<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KubeGraf - Advanced Kubernetes Visualization</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        /* Theme Definitions */
        :root {
            /* Dark Theme (Default) */
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-tertiary: #334155;
            --bg-card: rgba(30, 41, 59, 0.8);
            --bg-navbar: rgba(15, 23, 42, 0.95);
            --bg-input: rgba(30, 41, 59, 0.8);
            --text-primary: #ffffff;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-color: rgba(100, 116, 139, 0.3);
            --border-light: rgba(100, 116, 139, 0.5);
            --accent-primary: #06b6d4;
            --accent-secondary: #3b82f6;
            --accent-gradient: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%);
            --success-color: #22c55e;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
            --tab-bg: #16213e;
            --tab-hover: #1f4068;
            --tab-active: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --sub-tab-bg: #0f3460;
            --sub-tab-active: #00d4ff;
            --table-header: rgba(15, 23, 42, 0.8);
            --table-row-hover: rgba(6, 182, 212, 0.1);
            --scrollbar-bg: #1e293b;
            --scrollbar-thumb: #475569;
        }

        [data-theme="light"] {
            --bg-primary: #f8fafc;
            --bg-secondary: #e2e8f0;
            --bg-tertiary: #cbd5e1;
            --bg-card: rgba(255, 255, 255, 0.95);
            --bg-navbar: rgba(248, 250, 252, 0.95);
            --bg-input: rgba(255, 255, 255, 0.9);
            --text-primary: #0f172a;
            --text-secondary: #475569;
            --text-muted: #64748b;
            --border-color: rgba(148, 163, 184, 0.4);
            --border-light: rgba(148, 163, 184, 0.6);
            --accent-primary: #0891b2;
            --accent-secondary: #2563eb;
            --accent-gradient: linear-gradient(135deg, #0891b2 0%, #2563eb 100%);
            --success-color: #16a34a;
            --warning-color: #d97706;
            --error-color: #dc2626;
            --tab-bg: #e2e8f0;
            --tab-hover: #cbd5e1;
            --tab-active: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --sub-tab-bg: #cbd5e1;
            --sub-tab-active: #0891b2;
            --table-header: rgba(226, 232, 240, 0.9);
            --table-row-hover: rgba(8, 145, 178, 0.1);
            --scrollbar-bg: #e2e8f0;
            --scrollbar-thumb: #94a3b8;
        }

        [data-theme="midnight"] {
            --bg-primary: #030712;
            --bg-secondary: #111827;
            --bg-tertiary: #1f2937;
            --bg-card: rgba(17, 24, 39, 0.9);
            --bg-navbar: rgba(3, 7, 18, 0.98);
            --bg-input: rgba(17, 24, 39, 0.9);
            --text-primary: #f9fafb;
            --text-secondary: #9ca3af;
            --text-muted: #6b7280;
            --border-color: rgba(75, 85, 99, 0.4);
            --border-light: rgba(75, 85, 99, 0.6);
            --accent-primary: #8b5cf6;
            --accent-secondary: #a855f7;
            --accent-gradient: linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%);
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #f43f5e;
            --tab-bg: #1f2937;
            --tab-hover: #374151;
            --tab-active: linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%);
            --sub-tab-bg: #1f2937;
            --sub-tab-active: #8b5cf6;
            --table-header: rgba(17, 24, 39, 0.9);
            --table-row-hover: rgba(139, 92, 246, 0.1);
            --scrollbar-bg: #111827;
            --scrollbar-thumb: #4b5563;
        }

        [data-theme="cyberpunk"] {
            --bg-primary: #0a0a0f;
            --bg-secondary: #12121a;
            --bg-tertiary: #1a1a25;
            --bg-card: rgba(18, 18, 26, 0.95);
            --bg-navbar: rgba(10, 10, 15, 0.98);
            --bg-input: rgba(18, 18, 26, 0.9);
            --text-primary: #00ff9f;
            --text-secondary: #ff00ff;
            --text-muted: #00d4ff;
            --border-color: rgba(0, 255, 159, 0.3);
            --border-light: rgba(255, 0, 255, 0.4);
            --accent-primary: #00ff9f;
            --accent-secondary: #ff00ff;
            --accent-gradient: linear-gradient(135deg, #00ff9f 0%, #ff00ff 100%);
            --success-color: #00ff9f;
            --warning-color: #ffff00;
            --error-color: #ff0055;
            --tab-bg: #1a1a25;
            --tab-hover: #252535;
            --tab-active: linear-gradient(135deg, #00ff9f 0%, #ff00ff 100%);
            --sub-tab-bg: #1a1a25;
            --sub-tab-active: #00ff9f;
            --table-header: rgba(18, 18, 26, 0.95);
            --table-row-hover: rgba(0, 255, 159, 0.1);
            --scrollbar-bg: #12121a;
            --scrollbar-thumb: #00ff9f;
        }

        [data-theme="ocean"] {
            --bg-primary: #0c1929;
            --bg-secondary: #132f4c;
            --bg-tertiary: #1a4971;
            --bg-card: rgba(19, 47, 76, 0.9);
            --bg-navbar: rgba(12, 25, 41, 0.98);
            --bg-input: rgba(19, 47, 76, 0.9);
            --text-primary: #ffffff;
            --text-secondary: #b2bac2;
            --text-muted: #8b949e;
            --border-color: rgba(48, 98, 139, 0.5);
            --border-light: rgba(48, 98, 139, 0.7);
            --accent-primary: #29b6f6;
            --accent-secondary: #4fc3f7;
            --accent-gradient: linear-gradient(135deg, #29b6f6 0%, #4fc3f7 100%);
            --success-color: #66bb6a;
            --warning-color: #ffa726;
            --error-color: #ef5350;
            --tab-bg: #132f4c;
            --tab-hover: #1a4971;
            --tab-active: linear-gradient(135deg, #29b6f6 0%, #4fc3f7 100%);
            --sub-tab-bg: #132f4c;
            --sub-tab-active: #29b6f6;
            --table-header: rgba(19, 47, 76, 0.95);
            --table-row-hover: rgba(41, 182, 246, 0.1);
            --scrollbar-bg: #132f4c;
            --scrollbar-thumb: #29b6f6;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            color: var(--text-primary);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            transition: background 0.3s ease, color 0.3s ease;
        }

        .main-wrapper {
            flex: 1;
        }

        /* Global Search */
        .global-search {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--bg-input);
            border: 1px solid var(--border-light);
            border-radius: 8px;
            padding: 0.4rem 0.8rem;
            transition: all 0.3s ease;
        }

        .global-search:focus-within {
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px rgba(6, 182, 212, 0.2);
        }

        .global-search .search-icon {
            font-size: 0.9rem;
            opacity: 0.7;
        }

        .global-search input {
            background: transparent;
            border: none;
            outline: none;
            color: var(--text-primary);
            font-size: 0.875rem;
            width: 180px;
            transition: width 0.3s ease;
        }

        .global-search input::placeholder {
            color: var(--text-muted);
        }

        .global-search:focus-within input {
            width: 250px;
        }

        .global-search .search-shortcut {
            background: var(--bg-tertiary);
            padding: 0.15rem 0.4rem;
            border-radius: 4px;
            font-size: 0.65rem;
            color: var(--text-muted);
            font-family: monospace;
        }

        /* Search Results Highlight */
        .search-highlight {
            background: rgba(234, 179, 8, 0.3);
            padding: 0 2px;
            border-radius: 2px;
        }

        .search-no-match {
            opacity: 0.3;
        }

        /* Table Controls (Filter, Pagination, Count) */
        .table-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
            background: var(--bg-card);
            border-bottom: 1px solid var(--border-color);
            flex-wrap: wrap;
            gap: 1rem;
        }

        .table-filter {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--bg-input);
            border: 1px solid var(--border-light);
            border-radius: 6px;
            padding: 0.4rem 0.8rem;
            transition: all 0.3s ease;
        }

        .table-filter:focus-within {
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 2px rgba(6, 182, 212, 0.15);
        }

        .table-filter input {
            background: transparent;
            border: none;
            outline: none;
            color: var(--text-primary);
            font-size: 0.875rem;
            width: 200px;
        }

        .table-filter input::placeholder {
            color: var(--text-muted);
        }

        .table-filter .filter-icon {
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .table-info {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            flex-wrap: wrap;
        }

        .item-count {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .item-count strong {
            color: var(--accent-primary);
        }

        .rows-per-page {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .rows-per-page select {
            background: var(--bg-input);
            border: 1px solid var(--border-light);
            border-radius: 4px;
            color: var(--text-primary);
            padding: 0.3rem 0.5rem;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .pagination {
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .pagination button {
            background: var(--bg-input);
            border: 1px solid var(--border-light);
            border-radius: 4px;
            color: var(--text-primary);
            padding: 0.4rem 0.7rem;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.2s ease;
        }

        .pagination button:hover:not(:disabled) {
            background: var(--accent-primary);
            border-color: var(--accent-primary);
            color: white;
        }

        .pagination button:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .pagination button.active {
            background: var(--accent-primary);
            border-color: var(--accent-primary);
            color: white;
        }

        .pagination .page-info {
            color: var(--text-secondary);
            font-size: 0.8rem;
            padding: 0 0.5rem;
        }

        /* Theme Selector */
        .theme-selector {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .theme-selector select {
            padding: 0.4rem 0.8rem;
            background: var(--bg-input);
            border: 1px solid var(--border-light);
            border-radius: 6px;
            color: var(--text-primary);
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }

        .theme-selector select:hover {
            border-color: var(--accent-primary);
        }

        .theme-icon {
            font-size: 1rem;
        }

        /* Top Navigation */
        .navbar {
            background: var(--bg-navbar);
            border-bottom: 1px solid var(--border-color);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            backdrop-filter: blur(10px);
            transition: background 0.3s ease, border-color 0.3s ease;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo-icon {
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.5rem;
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: bold;
            background: linear-gradient(90deg, #06b6d4 0%, #3b82f6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .status-badge {
            padding: 0.5rem 1rem;
            background: rgba(34, 197, 94, 0.2);
            border: 1px solid rgba(34, 197, 94, 0.5);
            border-radius: 6px;
            color: var(--success-color);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            transition: all 0.3s ease;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: var(--success-color);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Main Category Tabs */
        .main-tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 10px;
            border-bottom: 2px solid var(--bg-tertiary);
            padding: 0 2rem;
            background: rgba(15, 23, 42, 0.5);
            transition: all 0.3s ease;
        }

        .main-tab {
            padding: 10px 20px;
            background: var(--tab-bg);
            color: var(--text-primary);
            border: none;
            border-radius: 8px 8px 0 0;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s;
        }

        .main-tab:hover {
            background: var(--tab-hover);
        }

        .main-tab.active {
            background: var(--tab-active);
            color: white;
        }

        /* Sub-Tabs for categories */
        .sub-tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 15px;
            padding: 8px 2rem;
            background: var(--sub-tab-bg);
            transition: all 0.3s ease;
        }

        .sub-tabs button {
            padding: 8px 15px;
            background: var(--tab-bg);
            color: var(--text-primary);
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.2s;
        }

        .sub-tabs button:hover {
            background: var(--tab-hover);
        }

        .sub-tabs button.active {
            background: var(--sub-tab-active);
            color: #000;
        }

        /* Legacy tab styles for compatibility */
        .tabs {
            background: rgba(15, 23, 42, 0.5);
            border-bottom: 1px solid rgba(100, 116, 139, 0.3);
            padding: 0 2rem;
            display: flex;
            gap: 0.5rem;
        }

        .tab {
            padding: 1rem 1.5rem;
            background: transparent;
            border: none;
            color: #94a3b8;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
            font-size: 0.875rem;
            text-transform: capitalize;
        }

        .tab:hover {
            color: white;
        }

        .tab.active {
            color: #06b6d4;
            border-bottom-color: #06b6d4;
            background: rgba(6, 182, 212, 0.1);
        }

        .tab-group {
            margin-bottom: 10px;
        }

        .tab-header {
            font-weight: bold;
            color: #00d4ff;
            margin-bottom: 5px;
            font-size: 14px;
            padding: 0.5rem 0;
        }

        /* Main Content */
        .container {
            padding: 2rem;
            max-width: 1600px;
            margin: 0 auto;
        }

        /* Metrics Grid */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .metric-card {
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid rgba(100, 116, 139, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            backdrop-filter: blur(10px);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .metric-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 30px rgba(6, 182, 212, 0.2);
        }

        .metric-label {
            color: #94a3b8;
            font-size: 0.875rem;
            margin-bottom: 0.5rem;
        }

        .metric-value {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .metric-value.cyan { color: #06b6d4; }
        .metric-value.purple { color: #a855f7; }
        .metric-value.green { color: #22c55e; }
        .metric-value.yellow { color: #eab308; }

        .sparkline {
            width: 100%;
            height: 40px;
            margin-top: 0.5rem;
        }

        /* Cards */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            backdrop-filter: blur(10px);
            overflow: hidden;
            transition: background 0.3s ease, border-color 0.3s ease;
        }

        .card-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-title {
            font-size: 1.125rem;
            font-weight: 600;
        }

        .card-body {
            padding: 1.5rem;
        }

        /* Topology */
        #topology {
            width: 100%;
            height: 600px;
            background: rgba(15, 23, 42, 0.5);
            border-radius: 12px;
        }

        /* Table */
        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            background: var(--table-header);
            transition: background 0.3s ease;
        }

        th {
            padding: 1rem 1.5rem;
            text-align: left;
            font-size: 0.875rem;
            color: var(--text-secondary);
            font-weight: 600;
        }

        td {
            padding: 1rem 1.5rem;
            border-top: 1px solid var(--border-color);
            color: var(--text-primary);
        }

        tbody tr:hover {
            background: var(--table-row-hover);
        }

        .badge {
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .badge-success {
            background: rgba(34, 197, 94, 0.2);
            color: var(--success-color);
        }

        .badge-warning {
            background: rgba(234, 179, 8, 0.2);
            color: var(--warning-color);
        }

        .badge-error {
            background: rgba(239, 68, 68, 0.2);
            color: var(--error-color);
        }

        /* Button */
        .btn {
            padding: 0.75rem 1.5rem;
            background: var(--accent-gradient);
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(6, 182, 212, 0.3);
        }

        /* Grid Layouts */
        .grid-2 {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
        }

        /* Insights Panel */
        .insight {
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            border: 1px solid;
        }

        .insight-info {
            background: rgba(59, 130, 246, 0.1);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .insight-success {
            background: rgba(34, 197, 94, 0.1);
            border-color: rgba(34, 197, 94, 0.3);
        }

        .insight-warning {
            background: rgba(234, 179, 8, 0.1);
            border-color: rgba(234, 179, 8, 0.3);
        }

        .insight-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .insight-text {
            font-size: 0.875rem;
            color: #cbd5e1;
        }

        /* Loading */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 400px;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(6, 182, 212, 0.2);
            border-top-color: #06b6d4;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="main-wrapper">
    <!-- Navigation -->
    <nav class="navbar">
        <div class="logo">
            <div class="logo-icon">
                <svg viewBox="0 0 100 100" width="44" height="44" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <linearGradient id="logoGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#06b6d4"/>
                            <stop offset="50%" style="stop-color:#3b82f6"/>
                            <stop offset="100%" style="stop-color:#8b5cf6"/>
                        </linearGradient>
                        <filter id="glow">
                            <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
                            <feMerge>
                                <feMergeNode in="coloredBlur"/>
                                <feMergeNode in="SourceGraphic"/>
                            </feMerge>
                        </filter>
                    </defs>
                    <!-- Background circle -->
                    <circle cx="50" cy="50" r="46" fill="rgba(6, 182, 212, 0.1)" stroke="url(#logoGrad)" stroke-width="2"/>
                    <!-- Kubernetes helm wheel (7 spokes) -->
                    <g filter="url(#glow)">
                        <!-- Center hub -->
                        <circle cx="50" cy="50" r="12" fill="url(#logoGrad)"/>
                        <!-- Spokes -->
                        <line x1="50" y1="38" x2="50" y2="18" stroke="url(#logoGrad)" stroke-width="4" stroke-linecap="round"/>
                        <line x1="61" y1="41" x2="76" y2="26" stroke="url(#logoGrad)" stroke-width="4" stroke-linecap="round"/>
                        <line x1="62" y1="54" x2="80" y2="60" stroke="url(#logoGrad)" stroke-width="4" stroke-linecap="round"/>
                        <line x1="56" y1="61" x2="64" y2="80" stroke="url(#logoGrad)" stroke-width="4" stroke-linecap="round"/>
                        <line x1="44" y1="61" x2="36" y2="80" stroke="url(#logoGrad)" stroke-width="4" stroke-linecap="round"/>
                        <line x1="38" y1="54" x2="20" y2="60" stroke="url(#logoGrad)" stroke-width="4" stroke-linecap="round"/>
                        <line x1="39" y1="41" x2="24" y2="26" stroke="url(#logoGrad)" stroke-width="4" stroke-linecap="round"/>
                        <!-- Node circles at spoke ends -->
                        <circle cx="50" cy="16" r="5" fill="#06b6d4"/>
                        <circle cx="78" cy="24" r="5" fill="#22d3ee"/>
                        <circle cx="82" cy="62" r="5" fill="#3b82f6"/>
                        <circle cx="66" cy="82" r="5" fill="#6366f1"/>
                        <circle cx="34" cy="82" r="5" fill="#8b5cf6"/>
                        <circle cx="18" cy="62" r="5" fill="#a855f7"/>
                        <circle cx="22" cy="24" r="5" fill="#06b6d4"/>
                        <!-- Connection lines between nodes (graph effect) -->
                        <line x1="50" y1="16" x2="78" y2="24" stroke="#06b6d4" stroke-width="1.5" opacity="0.4"/>
                        <line x1="78" y1="24" x2="82" y2="62" stroke="#3b82f6" stroke-width="1.5" opacity="0.4"/>
                        <line x1="82" y1="62" x2="66" y2="82" stroke="#6366f1" stroke-width="1.5" opacity="0.4"/>
                        <line x1="66" y1="82" x2="34" y2="82" stroke="#8b5cf6" stroke-width="1.5" opacity="0.4"/>
                        <line x1="34" y1="82" x2="18" y2="62" stroke="#a855f7" stroke-width="1.5" opacity="0.4"/>
                        <line x1="18" y1="62" x2="22" y2="24" stroke="#06b6d4" stroke-width="1.5" opacity="0.4"/>
                        <line x1="22" y1="24" x2="50" y2="16" stroke="#06b6d4" stroke-width="1.5" opacity="0.4"/>
                    </g>
                </svg>
            </div>
            <span class="logo-text">KubeGraf</span>
            <span style="padding: 0.2rem 0.5rem; background: rgba(34, 197, 94, 0.2); border: 1px solid rgba(34, 197, 94, 0.4); border-radius: 4px; color: #22c55e; font-size: 0.7rem; font-weight: 600; margin-left: 0.5rem;">v1.0.0</span>
        </div>
        <div style="display: flex; align-items: center; gap: 1rem;">
            <!-- Global Search -->
            <div class="global-search">
                <span class="search-icon">üîç</span>
                <input type="text" id="global-search" placeholder="Search resources... (Ctrl+K)" onkeyup="globalSearch(this.value)" />
                <kbd class="search-shortcut">Ctrl+K</kbd>
            </div>
            <!-- Cluster Name Badge -->
            <div style="display: flex; align-items: center; gap: 0.5rem; padding: 0.4rem 0.8rem; background: rgba(59, 130, 246, 0.15); border: 1px solid rgba(59, 130, 246, 0.4); border-radius: 6px;">
                <span style="font-size: 1rem;">‚ò∏Ô∏è</span>
                <span style="color: #60a5fa; font-size: 0.875rem; font-weight: 600;" id="cluster-name">Loading...</span>
            </div>
            <div style="display: flex; align-items: center; gap: 0.5rem;">
                <span style="color: #94a3b8; font-size: 0.875rem;">Namespace:</span>
                <select id="namespace-selector" onchange="changeNamespace(this.value)" style="padding: 0.5rem 1rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 6px; color: white; cursor: pointer; font-size: 0.875rem;">
                    <option value="default">default</option>
                </select>
            </div>
            <!-- Theme Selector -->
            <div class="theme-selector">
                <select id="theme-selector" onchange="changeTheme(this.value)">
                    <option value="dark">Dark</option>
                    <option value="light">Light</option>
                    <option value="midnight">Midnight</option>
                    <option value="cyberpunk">Cyberpunk</option>
                    <option value="ocean">Ocean</option>
                </select>
            </div>
            <div class="status-badge" id="connection-status">
                <div class="status-dot" id="connection-dot"></div>
                <span id="connection-text">Checking...</span>
            </div>
        </div>
    </nav>

    <!-- Connection Error Banner -->
    <div id="connection-error-banner" style="display: none; background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%); padding: 1rem 2rem; color: white; text-align: center;">
        <div style="display: flex; align-items: center; justify-content: center; gap: 1rem; flex-wrap: wrap;">
            <span style="font-size: 1.5rem;">‚ö†Ô∏è</span>
            <div>
                <strong style="font-size: 1rem;">Not Connected to Kubernetes Cluster</strong>
                <p id="connection-error-message" style="margin: 0.25rem 0 0 0; font-size: 0.875rem; opacity: 0.9;"></p>
            </div>
        </div>
    </div>

    <!-- Main Category Tabs -->
    <div class="main-tabs">
        <button id="tab-dashboard" class="main-tab active" onclick="switchMainTab('dashboard')">Dashboard</button>
        <button id="tab-workloads" class="main-tab" onclick="switchMainTab('workloads')">Workloads</button>
        <button id="tab-network" class="main-tab" onclick="switchMainTab('network')">Network</button>
        <button id="tab-config" class="main-tab" onclick="switchMainTab('config')">Config</button>
        <button id="tab-cluster" class="main-tab" onclick="switchMainTab('cluster')">Cluster</button>
        <button id="tab-resourcemap" class="main-tab" onclick="switchMainTab('resourcemap')">Resource Map</button>
        <button id="tab-security" class="main-tab" onclick="switchMainTab('security')">Security</button>
        <button id="tab-plugins" class="main-tab" onclick="switchMainTab('plugins')">Plugins</button>
    </div>

    <!-- Sub-Tabs for each category -->
    <div id="workloads-subtabs" class="sub-tabs" style="display: none;">
        <button id="subtab-pods" onclick="switchTab('pods')">Pods</button>
        <button id="subtab-deployments" onclick="switchTab('deployments')">Deployments</button>
        <button id="subtab-statefulsets" onclick="switchTab('statefulsets')">StatefulSets</button>
        <button id="subtab-daemonsets" onclick="switchTab('daemonsets')">DaemonSets</button>
        <button id="subtab-cronjobs" onclick="switchTab('cronjobs')">CronJobs</button>
        <button id="subtab-jobs" onclick="switchTab('jobs')">Jobs</button>
    </div>

    <div id="network-subtabs" class="sub-tabs" style="display: none;">
        <button id="subtab-services" onclick="switchTab('services')">Services</button>
        <button id="subtab-ingresses" onclick="switchTab('ingresses')">Ingresses</button>
    </div>

    <div id="config-subtabs" class="sub-tabs" style="display: none;">
        <button id="subtab-configmaps" onclick="switchTab('configmaps')">ConfigMaps</button>
        <button id="subtab-secrets" onclick="switchTab('secrets')">Secrets</button>
    </div>

    <div id="cluster-subtabs" class="sub-tabs" style="display: none;">
        <button id="subtab-nodes" onclick="switchTab('nodes')">Nodes</button>
    </div>

    <div id="plugins-subtabs" class="sub-tabs" style="display: none;">
        <button id="subtab-helm" onclick="switchTab('helm')">Helm Releases</button>
        <button id="subtab-kustomize" onclick="switchTab('kustomize')">Kustomize</button>
        <button id="subtab-argocd" onclick="switchTab('argocd')">ArgoCD</button>
        <button id="subtab-flux" onclick="switchTab('flux')">Flux</button>
    </div>

    <!-- Main Content -->
    <div class="container">
        <!-- Dashboard View -->
        <div id="dashboard" class="tab-content">
            <!-- Metrics -->
            <div class="metrics-grid">
                <div class="metric-card" style="cursor: default;">
                    <div class="metric-label">Cluster CPU</div>
                    <div class="metric-value cyan" id="cpu-value">--</div>
                    <svg class="sparkline" id="cpu-sparkline"></svg>
                </div>
                <div class="metric-card" style="cursor: default;">
                    <div class="metric-label">Memory Usage</div>
                    <div class="metric-value purple" id="memory-value">--</div>
                    <svg class="sparkline" id="memory-sparkline"></svg>
                </div>
                <div class="metric-card" onclick="switchMainTab('workloads'); switchTab('pods');" style="cursor: pointer;">
                    <div class="metric-label">Running Pods</div>
                    <div class="metric-value green" id="pods-value">--</div>
                    <div style="display: flex; gap: 2px; margin-top: 0.5rem;" id="pods-bars"></div>
                </div>
                <div class="metric-card" onclick="switchMainTab('cluster'); switchTab('nodes');" style="cursor: pointer;">
                    <div class="metric-label">Active Nodes</div>
                    <div class="metric-value yellow" id="nodes-value">--</div>
                    <div style="margin-top: 0.5rem; font-size: 0.875rem; color: #22c55e;">‚úì All Healthy</div>
                </div>
            </div>

            <!-- Main Grid -->
            <div class="grid-2">
                <!-- Resources -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Resource Overview</h3>
                    </div>
                    <div class="card-body" id="resources-overview">
                        <div class="loading"><div class="spinner"></div></div>
                    </div>
                </div>

                <!-- Insights -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ü§ñ AI Insights</h3>
                    </div>
                    <div class="card-body">
                        <div class="insight insight-info">
                            <div class="insight-title" style="color: #3b82f6;">üí° Recommendation</div>
                            <div class="insight-text">System running smoothly. All resources within optimal parameters.</div>
                        </div>
                        <div class="insight insight-success">
                            <div class="insight-title" style="color: #22c55e;">‚úÖ Optimization</div>
                            <div class="insight-text">Cluster efficiency at 94%. No optimization needed at this time.</div>
                        </div>
                        <div class="insight insight-warning">
                            <div class="insight-title" style="color: #eab308;">‚ö†Ô∏è Notice</div>
                            <div class="insight-text">Monitor resource usage during peak hours for potential scaling needs.</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Security Summary Card -->
            <div class="card" onclick="switchMainTab('security')" style="cursor: pointer; margin-top: 1rem;">
                <div class="card-header" style="display: flex; justify-content: space-between; align-items: center;">
                    <h3 class="card-title">üõ°Ô∏è Security Overview</h3>
                    <span style="color: #64748b; font-size: 0.75rem;">Click to view details ‚Üí</span>
                </div>
                <div class="card-body">
                    <div style="display: flex; gap: 1.5rem; align-items: center; flex-wrap: wrap;">
                        <div style="text-align: center;">
                            <div id="dashboard-security-score" style="font-size: 2.5rem; font-weight: 700; color: #22c55e;">--</div>
                            <div style="color: #64748b; font-size: 0.875rem;">Security Score</div>
                        </div>
                        <div style="flex: 1; display: grid; grid-template-columns: repeat(4, 1fr); gap: 0.75rem; min-width: 300px;">
                            <div style="text-align: center; padding: 0.5rem; background: rgba(239, 68, 68, 0.1); border-radius: 8px;">
                                <div id="dashboard-critical-count" style="font-size: 1.5rem; font-weight: 600; color: #ef4444;">-</div>
                                <div style="color: #ef4444; font-size: 0.75rem;">Critical</div>
                            </div>
                            <div style="text-align: center; padding: 0.5rem; background: rgba(249, 115, 22, 0.1); border-radius: 8px;">
                                <div id="dashboard-high-count" style="font-size: 1.5rem; font-weight: 600; color: #f97316;">-</div>
                                <div style="color: #f97316; font-size: 0.75rem;">High</div>
                            </div>
                            <div style="text-align: center; padding: 0.5rem; background: rgba(234, 179, 8, 0.1); border-radius: 8px;">
                                <div id="dashboard-medium-count" style="font-size: 1.5rem; font-weight: 600; color: #eab308;">-</div>
                                <div style="color: #eab308; font-size: 0.75rem;">Medium</div>
                            </div>
                            <div style="text-align: center; padding: 0.5rem; background: rgba(34, 197, 94, 0.1); border-radius: 8px;">
                                <div id="dashboard-low-count" style="font-size: 1.5rem; font-weight: 600; color: #22c55e;">-</div>
                                <div style="color: #22c55e; font-size: 0.75rem;">Low</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Topology View -->
        <div id="topology-view" class="tab-content" style="display: none;">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Resource Topology</h3>
                </div>
                <div class="card-body">
                    <svg id="topology"></svg>
                </div>
            </div>
        </div>

        <!-- Pods View -->
        <div id="pods-view" class="tab-content" style="display: none;">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Pods</h3>
                    <button class="btn" onclick="loadPods()" style="background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%); border: none; padding: 0.6rem; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; font-weight: 600; box-shadow: 0 4px 6px rgba(6, 182, 212, 0.3); transition: all 0.3s ease; cursor: pointer;" title="Refresh">
                        <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor">
                            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                        </svg>
                    </button>
                </div>
                <div class="card-body">
                    <div class="filter-controls" style="display: flex; gap: 1rem; margin-bottom: 1rem; flex-wrap: wrap; align-items: center;">
                        <div style="position: relative; flex: 1; max-width: 300px;">
                            <span style="position: absolute; left: 10px; top: 50%; transform: translateY(-50%); color: #64748b;">üîç</span>
                            <input type="text" id="pods-search" placeholder="Search pods..." onkeyup="filterPods()" style="width: 100%; padding: 0.5rem 0.5rem 0.5rem 2rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white;">
                        </div>
                        <select id="pods-status-filter" onchange="filterPods()" style="padding: 0.5rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">
                            <option value="">All Status</option>
                            <option value="Running">Running</option>
                            <option value="Pending">Pending</option>
                            <option value="Failed">Failed</option>
                            <option value="Succeeded">Succeeded</option>
                            <option value="Terminating">Terminating</option>
                        </select>
                        <select id="pods-age-filter" onchange="filterPods()" style="padding: 0.5rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">
                            <option value="">All Ages</option>
                            <option value="1h">&lt; 1 hour</option>
                            <option value="1d">&lt; 1 day</option>
                            <option value="7d">&lt; 7 days</option>
                            <option value="30d">&lt; 30 days</option>
                        </select>
                        <select id="pods-sort" onchange="sortPods()" style="padding: 0.5rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">
                            <option value="name">Sort by Name</option>
                            <option value="age">Sort by Age</option>
                            <option value="status">Sort by Status</option>
                        </select>
                        <button onclick="clearFiltersPods()" style="padding: 0.5rem 1rem; background: rgba(71, 85, 105, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">Clear Filters</button>
                    </div>
                    <table id="pods-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Status</th>
                                <th>Ready</th>
                                <th>Restarts</th>
                                <th>CPU</th>
                                <th>Memory</th>
                                <th>IP</th>
                                <th>Node</th>
                                <th>Age</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="pods-tbody"></tbody>
                    </table>
                    <!-- Pagination Controls -->
                    <div class="table-controls" id="pods-pagination">
                        <div class="item-count">
                            Showing <strong><span id="pods-showing-start">0</span>-<span id="pods-showing-end">0</span></strong> of <strong><span id="pods-total">0</span></strong> pods
                        </div>
                        <div class="table-info">
                            <div class="rows-per-page">
                                <span>Rows per page:</span>
                                <select id="pods-page-size" onchange="changePageSize('pods')">
                                    <option value="10">10</option>
                                    <option value="25">25</option>
                                    <option value="50">50</option>
                                    <option value="100">100</option>
                                </select>
                            </div>
                            <div class="pagination" id="pods-pagination-btns">
                                <button onclick="goToPage('pods', 'first')" title="First Page">¬´</button>
                                <button onclick="goToPage('pods', 'prev')" title="Previous Page">‚Äπ</button>
                                <span class="page-info">Page <span id="pods-current-page">1</span> of <span id="pods-total-pages">1</span></span>
                                <button onclick="goToPage('pods', 'next')" title="Next Page">‚Ä∫</button>
                                <button onclick="goToPage('pods', 'last')" title="Last Page">¬ª</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Deployments View -->
        <div id="deployments-view" class="tab-content" style="display: none;">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Deployments</h3>
                    <button class="btn" onclick="loadDeployments()" style="background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%); border: none; padding: 0.6rem; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; font-weight: 600; box-shadow: 0 4px 6px rgba(6, 182, 212, 0.3); transition: all 0.3s ease; cursor: pointer;" title="Refresh">
                        <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor">
                            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                        </svg>
                    </button>
                </div>
                <div class="card-body">
                    <div class="filter-controls" style="display: flex; gap: 1rem; margin-bottom: 1rem; flex-wrap: wrap; align-items: center;">
                        <div style="position: relative; flex: 1; max-width: 300px;">
                            <span style="position: absolute; left: 10px; top: 50%; transform: translateY(-50%); color: #64748b;">üîç</span>
                            <input type="text" id="deployments-search" placeholder="Search deployments..." onkeyup="filterDeployments()" style="width: 100%; padding: 0.5rem 0.5rem 0.5rem 2rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white;">
                        </div>
                        <select id="deployments-age-filter" onchange="filterDeployments()" style="padding: 0.5rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">
                            <option value="">All Ages</option>
                            <option value="1h">&lt; 1 hour</option>
                            <option value="1d">&lt; 1 day</option>
                            <option value="7d">&lt; 7 days</option>
                            <option value="30d">&lt; 30 days</option>
                        </select>
                        <select id="deployments-sort" onchange="sortDeployments()" style="padding: 0.5rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">
                            <option value="name">Sort by Name</option>
                            <option value="age">Sort by Age</option>
                            <option value="ready">Sort by Ready</option>
                        </select>
                        <button onclick="clearFiltersDeployments()" style="padding: 0.5rem 1rem; background: rgba(71, 85, 105, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">Clear Filters</button>
                    </div>
                    <table id="deployments-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Ready</th>
                                <th>Available</th>
                                <th>Age</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="deployments-tbody"></tbody>
                    </table>
                    <!-- Pagination Controls -->
                    <div class="table-controls" id="deployments-pagination">
                        <div class="item-count">
                            Showing <strong><span id="deployments-showing-start">0</span>-<span id="deployments-showing-end">0</span></strong> of <strong><span id="deployments-total">0</span></strong> deployments
                        </div>
                        <div class="table-info">
                            <div class="rows-per-page">
                                <span>Rows per page:</span>
                                <select id="deployments-page-size" onchange="changePageSize('deployments')">
                                    <option value="10">10</option>
                                    <option value="25">25</option>
                                    <option value="50">50</option>
                                    <option value="100">100</option>
                                </select>
                            </div>
                            <div class="pagination" id="deployments-pagination-btns">
                                <button onclick="goToPage('deployments', 'first')" title="First Page">¬´</button>
                                <button onclick="goToPage('deployments', 'prev')" title="Previous Page">‚Äπ</button>
                                <span class="page-info">Page <span id="deployments-current-page">1</span> of <span id="deployments-total-pages">1</span></span>
                                <button onclick="goToPage('deployments', 'next')" title="Next Page">‚Ä∫</button>
                                <button onclick="goToPage('deployments', 'last')" title="Last Page">¬ª</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- StatefulSets View -->
        <div id="statefulsets-view" class="tab-content" style="display: none;">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">StatefulSets</h3>
                    <button class="btn" onclick="loadStatefulSets()" style="background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%); border: none; padding: 0.6rem; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; font-weight: 600; box-shadow: 0 4px 6px rgba(6, 182, 212, 0.3); transition: all 0.3s ease; cursor: pointer;" title="Refresh">
                        <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor">
                            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                        </svg>
                    </button>
                </div>
                <div class="card-body">
                    <div class="filter-controls" style="display: flex; gap: 1rem; margin-bottom: 1rem; flex-wrap: wrap; align-items: center;">
                        <div style="position: relative; flex: 1; max-width: 300px;">
                            <span style="position: absolute; left: 10px; top: 50%; transform: translateY(-50%); color: #64748b;">üîç</span>
                            <input type="text" id="statefulsets-search" placeholder="Search statefulsets..." onkeyup="filterStatefulSets()" style="width: 100%; padding: 0.5rem 0.5rem 0.5rem 2rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white;">
                        </div>
                        <select id="statefulsets-age-filter" onchange="filterStatefulSets()" style="padding: 0.5rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">
                            <option value="">All Ages</option>
                            <option value="1h">&lt; 1 hour</option>
                            <option value="1d">&lt; 1 day</option>
                            <option value="7d">&lt; 7 days</option>
                            <option value="30d">&lt; 30 days</option>
                        </select>
                        <select id="statefulsets-sort" onchange="sortStatefulSets()" style="padding: 0.5rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">
                            <option value="name">Sort by Name</option>
                            <option value="age">Sort by Age</option>
                            <option value="ready">Sort by Ready</option>
                        </select>
                        <button onclick="clearFiltersStatefulSets()" style="padding: 0.5rem 1rem; background: rgba(71, 85, 105, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">Clear Filters</button>
                    </div>
                    <table id="statefulsets-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Ready</th>
                                <th>Service</th>
                                <th>Age</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="statefulsets-tbody"></tbody>
                    </table>
                    <!-- Pagination Controls -->
                    <div class="table-controls" id="statefulsets-pagination">
                        <div class="item-count">
                            Showing <strong><span id="statefulsets-showing-start">0</span>-<span id="statefulsets-showing-end">0</span></strong> of <strong><span id="statefulsets-total">0</span></strong> statefulsets
                        </div>
                        <div class="table-info">
                            <div class="rows-per-page">
                                <span>Rows per page:</span>
                                <select id="statefulsets-page-size" onchange="changePageSize('statefulsets')">
                                    <option value="10">10</option>
                                    <option value="25">25</option>
                                    <option value="50">50</option>
                                    <option value="100">100</option>
                                </select>
                            </div>
                            <div class="pagination" id="statefulsets-pagination-btns">
                                <button onclick="goToPage('statefulsets', 'first')" title="First Page">¬´</button>
                                <button onclick="goToPage('statefulsets', 'prev')" title="Previous Page">‚Äπ</button>
                                <span class="page-info">Page <span id="statefulsets-current-page">1</span> of <span id="statefulsets-total-pages">1</span></span>
                                <button onclick="goToPage('statefulsets', 'next')" title="Next Page">‚Ä∫</button>
                                <button onclick="goToPage('statefulsets', 'last')" title="Last Page">¬ª</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- DaemonSets View -->
        <div id="daemonsets-view" class="tab-content" style="display: none;">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">DaemonSets</h3>
                    <button class="btn" onclick="loadDaemonSets()" style="background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%); border: none; padding: 0.6rem; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; font-weight: 600; box-shadow: 0 4px 6px rgba(6, 182, 212, 0.3); transition: all 0.3s ease; cursor: pointer;" title="Refresh">
                        <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor">
                            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                        </svg>
                    </button>
                </div>
                <div class="card-body">
                    <div class="filter-controls" style="display: flex; gap: 1rem; margin-bottom: 1rem; flex-wrap: wrap; align-items: center;">
                        <div style="position: relative; flex: 1; max-width: 300px;">
                            <span style="position: absolute; left: 10px; top: 50%; transform: translateY(-50%); color: #64748b;">üîç</span>
                            <input type="text" id="daemonsets-search" placeholder="Search daemonsets..." onkeyup="filterDaemonSets()" style="width: 100%; padding: 0.5rem 0.5rem 0.5rem 2rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white;">
                        </div>
                        <select id="daemonsets-age-filter" onchange="filterDaemonSets()" style="padding: 0.5rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">
                            <option value="">All Ages</option>
                            <option value="1h">&lt; 1 hour</option>
                            <option value="1d">&lt; 1 day</option>
                            <option value="7d">&lt; 7 days</option>
                            <option value="30d">&lt; 30 days</option>
                        </select>
                        <select id="daemonsets-sort" onchange="sortDaemonSets()" style="padding: 0.5rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">
                            <option value="name">Sort by Name</option>
                            <option value="age">Sort by Age</option>
                            <option value="ready">Sort by Ready</option>
                        </select>
                        <button onclick="clearFiltersDaemonSets()" style="padding: 0.5rem 1rem; background: rgba(71, 85, 105, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">Clear Filters</button>
                    </div>
                    <table id="daemonsets-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Desired</th>
                                <th>Current</th>
                                <th>Ready</th>
                                <th>Age</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="daemonsets-tbody"></tbody>
                    </table>
                    <!-- Pagination Controls -->
                    <div class="table-controls" id="daemonsets-pagination">
                        <div class="item-count">
                            Showing <strong><span id="daemonsets-showing-start">0</span>-<span id="daemonsets-showing-end">0</span></strong> of <strong><span id="daemonsets-total">0</span></strong> daemonsets
                        </div>
                        <div class="table-info">
                            <div class="rows-per-page">
                                <span>Rows per page:</span>
                                <select id="daemonsets-page-size" onchange="changePageSize('daemonsets')">
                                    <option value="10">10</option>
                                    <option value="25">25</option>
                                    <option value="50">50</option>
                                    <option value="100">100</option>
                                </select>
                            </div>
                            <div class="pagination" id="daemonsets-pagination-btns">
                                <button onclick="goToPage('daemonsets', 'first')" title="First Page">¬´</button>
                                <button onclick="goToPage('daemonsets', 'prev')" title="Previous Page">‚Äπ</button>
                                <span class="page-info">Page <span id="daemonsets-current-page">1</span> of <span id="daemonsets-total-pages">1</span></span>
                                <button onclick="goToPage('daemonsets', 'next')" title="Next Page">‚Ä∫</button>
                                <button onclick="goToPage('daemonsets', 'last')" title="Last Page">¬ª</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Services View -->
        <div id="services-view" class="tab-content" style="display: none;">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Services</h3>
                    <button class="btn" onclick="loadServices()" style="background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%); border: none; padding: 0.6rem; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; font-weight: 600; box-shadow: 0 4px 6px rgba(6, 182, 212, 0.3); transition: all 0.3s ease; cursor: pointer;" title="Refresh">
                        <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor">
                            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                        </svg>
                    </button>
                </div>
                <div class="card-body">
                    <div class="filter-controls" style="display: flex; gap: 1rem; margin-bottom: 1rem; flex-wrap: wrap; align-items: center;">
                        <div style="position: relative; flex: 1; max-width: 300px;">
                            <span style="position: absolute; left: 10px; top: 50%; transform: translateY(-50%); color: #64748b;">üîç</span>
                            <input type="text" id="services-search" placeholder="Search services..." onkeyup="filterServices()" style="width: 100%; padding: 0.5rem 0.5rem 0.5rem 2rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white;">
                        </div>
                        <select id="services-type-filter" onchange="filterServices()" style="padding: 0.5rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">
                            <option value="">All Types</option>
                            <option value="ClusterIP">ClusterIP</option>
                            <option value="NodePort">NodePort</option>
                            <option value="LoadBalancer">LoadBalancer</option>
                        </select>
                        <select id="services-age-filter" onchange="filterServices()" style="padding: 0.5rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">
                            <option value="">All Ages</option>
                            <option value="1h">&lt; 1 hour</option>
                            <option value="1d">&lt; 1 day</option>
                            <option value="7d">&lt; 7 days</option>
                            <option value="30d">&lt; 30 days</option>
                        </select>
                        <select id="services-sort" onchange="sortServices()" style="padding: 0.5rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">
                            <option value="name">Sort by Name</option>
                            <option value="age">Sort by Age</option>
                            <option value="type">Sort by Type</option>
                        </select>
                        <button onclick="clearFiltersServices()" style="padding: 0.5rem 1rem; background: rgba(71, 85, 105, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">Clear Filters</button>
                    </div>
                    <table id="services-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Type</th>
                                <th>Cluster IP</th>
                                <th>Ports</th>
                                <th>Age</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="services-tbody"></tbody>
                    </table>
                    <!-- Pagination Controls -->
                    <div class="table-controls" id="services-pagination">
                        <div class="item-count">
                            Showing <strong><span id="services-showing-start">0</span>-<span id="services-showing-end">0</span></strong> of <strong><span id="services-total">0</span></strong> services
                        </div>
                        <div class="table-info">
                            <div class="rows-per-page">
                                <span>Rows per page:</span>
                                <select id="services-page-size" onchange="changePageSize('services')">
                                    <option value="10">10</option>
                                    <option value="25">25</option>
                                    <option value="50">50</option>
                                    <option value="100">100</option>
                                </select>
                            </div>
                            <div class="pagination" id="services-pagination-btns">
                                <button onclick="goToPage('services', 'first')" title="First Page">¬´</button>
                                <button onclick="goToPage('services', 'prev')" title="Previous Page">‚Äπ</button>
                                <span class="page-info">Page <span id="services-current-page">1</span> of <span id="services-total-pages">1</span></span>
                                <button onclick="goToPage('services', 'next')" title="Next Page">‚Ä∫</button>
                                <button onclick="goToPage('services', 'last')" title="Last Page">¬ª</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ingresses View -->
        <div id="ingresses-view" class="tab-content" style="display: none;">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">üö™ Ingresses</h3>
                    <button class="btn" onclick="loadIngresses()" style="background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%); border: none; padding: 0.6rem; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; font-weight: 600; box-shadow: 0 4px 6px rgba(6, 182, 212, 0.3); transition: all 0.3s ease; cursor: pointer;" title="Refresh">
                        <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor">
                            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                        </svg>
                    </button>
                </div>
                <div class="card-body">
                    <div class="filter-controls" style="display: flex; gap: 1rem; margin-bottom: 1rem; flex-wrap: wrap; align-items: center;">
                        <div style="position: relative; flex: 1; max-width: 300px;">
                            <span style="position: absolute; left: 10px; top: 50%; transform: translateY(-50%); color: #64748b;">üîç</span>
                            <input type="text" id="ingresses-search" placeholder="Search ingresses..." onkeyup="filterIngresses()" style="width: 100%; padding: 0.5rem 0.5rem 0.5rem 2rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white;">
                        </div>
                        <select id="ingresses-age-filter" onchange="filterIngresses()" style="padding: 0.5rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">
                            <option value="">All Ages</option>
                            <option value="1h">&lt; 1 hour</option>
                            <option value="1d">&lt; 1 day</option>
                            <option value="7d">&lt; 7 days</option>
                            <option value="30d">&lt; 30 days</option>
                        </select>
                        <select id="ingresses-sort" onchange="sortIngresses()" style="padding: 0.5rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">
                            <option value="name">Sort by Name</option>
                            <option value="age">Sort by Age</option>
                        </select>
                        <button onclick="clearFiltersIngresses()" style="padding: 0.5rem 1rem; background: rgba(71, 85, 105, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">Clear Filters</button>
                    </div>
                    <table id="ingresses-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Hosts</th>
                                <th>Age</th>
                            </tr>
                        </thead>
                        <tbody id="ingresses-tbody"></tbody>
                    </table>
                    <!-- Pagination Controls -->
                    <div class="table-controls" id="ingresses-pagination">
                        <div class="item-count">
                            Showing <strong><span id="ingresses-showing-start">0</span>-<span id="ingresses-showing-end">0</span></strong> of <strong><span id="ingresses-total">0</span></strong> ingresses
                        </div>
                        <div class="table-info">
                            <div class="rows-per-page">
                                <span>Rows per page:</span>
                                <select id="ingresses-page-size" onchange="changePageSize('ingresses')">
                                    <option value="10">10</option>
                                    <option value="25">25</option>
                                    <option value="50">50</option>
                                    <option value="100">100</option>
                                </select>
                            </div>
                            <div class="pagination" id="ingresses-pagination-btns">
                                <button onclick="goToPage('ingresses', 'first')" title="First Page">¬´</button>
                                <button onclick="goToPage('ingresses', 'prev')" title="Previous Page">‚Äπ</button>
                                <span class="page-info">Page <span id="ingresses-current-page">1</span> of <span id="ingresses-total-pages">1</span></span>
                                <button onclick="goToPage('ingresses', 'next')" title="Next Page">‚Ä∫</button>
                                <button onclick="goToPage('ingresses', 'last')" title="Last Page">¬ª</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- CronJobs View -->
        <div id="cronjobs-view" class="tab-content" style="display: none;">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">CronJobs</h3>
                    <button class="btn" onclick="loadCronJobs()" style="background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%); border: none; padding: 0.6rem; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; font-weight: 600; box-shadow: 0 4px 6px rgba(6, 182, 212, 0.3); transition: all 0.3s ease; cursor: pointer;" title="Refresh">
                        <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor">
                            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                        </svg>
                    </button>
                </div>
                <div class="card-body">
                    <div class="filter-controls" style="display: flex; gap: 1rem; margin-bottom: 1rem; flex-wrap: wrap; align-items: center;">
                        <div style="position: relative; flex: 1; max-width: 300px;">
                            <span style="position: absolute; left: 10px; top: 50%; transform: translateY(-50%); color: #64748b;">üîç</span>
                            <input type="text" id="cronjobs-search" placeholder="Search cronjobs..." onkeyup="filterCronJobs()" style="width: 100%; padding: 0.5rem 0.5rem 0.5rem 2rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white;">
                        </div>
                        <select id="cronjobs-age-filter" onchange="filterCronJobs()" style="padding: 0.5rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">
                            <option value="">All Ages</option>
                            <option value="1h">&lt; 1 hour</option>
                            <option value="1d">&lt; 1 day</option>
                            <option value="7d">&lt; 7 days</option>
                            <option value="30d">&lt; 30 days</option>
                        </select>
                        <select id="cronjobs-sort" onchange="sortCronJobs()" style="padding: 0.5rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">
                            <option value="name">Sort by Name</option>
                            <option value="age">Sort by Age</option>
                            <option value="schedule">Sort by Schedule</option>
                        </select>
                        <button onclick="clearFiltersCronJobs()" style="padding: 0.5rem 1rem; background: rgba(71, 85, 105, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">Clear Filters</button>
                    </div>
                    <table id="cronjobs-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Schedule</th>
                                <th>Suspend</th>
                                <th>Active</th>
                                <th>Last Schedule</th>
                                <th>Age</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="cronjobs-tbody"></tbody>
                    </table>
                    <!-- Pagination Controls -->
                    <div class="table-controls" id="cronjobs-pagination">
                        <div class="item-count">
                            Showing <strong><span id="cronjobs-showing-start">0</span>-<span id="cronjobs-showing-end">0</span></strong> of <strong><span id="cronjobs-total">0</span></strong> cronjobs
                        </div>
                        <div class="table-info">
                            <div class="rows-per-page">
                                <span>Rows per page:</span>
                                <select id="cronjobs-page-size" onchange="changePageSize('cronjobs')">
                                    <option value="10">10</option>
                                    <option value="25">25</option>
                                    <option value="50">50</option>
                                    <option value="100">100</option>
                                </select>
                            </div>
                            <div class="pagination" id="cronjobs-pagination-btns">
                                <button onclick="goToPage('cronjobs', 'first')" title="First Page">¬´</button>
                                <button onclick="goToPage('cronjobs', 'prev')" title="Previous Page">‚Äπ</button>
                                <span class="page-info">Page <span id="cronjobs-current-page">1</span> of <span id="cronjobs-total-pages">1</span></span>
                                <button onclick="goToPage('cronjobs', 'next')" title="Next Page">‚Ä∫</button>
                                <button onclick="goToPage('cronjobs', 'last')" title="Last Page">¬ª</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Jobs View -->
        <div id="jobs-view" class="tab-content" style="display: none;">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Jobs</h3>
                    <button class="btn" onclick="loadJobs()" style="background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%); border: none; padding: 0.6rem; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; font-weight: 600; box-shadow: 0 4px 6px rgba(6, 182, 212, 0.3); transition: all 0.3s ease; cursor: pointer;" title="Refresh">
                        <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor">
                            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                        </svg>
                    </button>
                </div>
                <div class="card-body">
                    <div class="filter-controls" style="display: flex; gap: 1rem; margin-bottom: 1rem; flex-wrap: wrap; align-items: center;">
                        <div style="position: relative; flex: 1; max-width: 300px;">
                            <span style="position: absolute; left: 10px; top: 50%; transform: translateY(-50%); color: #64748b;">üîç</span>
                            <input type="text" id="jobs-search" placeholder="Search jobs..." onkeyup="filterJobs()" style="width: 100%; padding: 0.5rem 0.5rem 0.5rem 2rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white;">
                        </div>
                        <select id="jobs-status-filter" onchange="filterJobs()" style="padding: 0.5rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">
                            <option value="">All Status</option>
                            <option value="Complete">Complete</option>
                            <option value="Failed">Failed</option>
                            <option value="Running">Running</option>
                        </select>
                        <select id="jobs-age-filter" onchange="filterJobs()" style="padding: 0.5rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">
                            <option value="">All Ages</option>
                            <option value="1h">&lt; 1 hour</option>
                            <option value="1d">&lt; 1 day</option>
                            <option value="7d">&lt; 7 days</option>
                            <option value="30d">&lt; 30 days</option>
                        </select>
                        <select id="jobs-sort" onchange="sortJobs()" style="padding: 0.5rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">
                            <option value="name">Sort by Name</option>
                            <option value="age">Sort by Age</option>
                            <option value="status">Sort by Status</option>
                        </select>
                        <button onclick="clearFiltersJobs()" style="padding: 0.5rem 1rem; background: rgba(71, 85, 105, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">Clear Filters</button>
                    </div>
                    <table id="jobs-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Status</th>
                                <th>Completions</th>
                                <th>Duration</th>
                                <th>Age</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="jobs-tbody"></tbody>
                    </table>
                    <!-- Pagination Controls -->
                    <div class="table-controls" id="jobs-pagination">
                        <div class="item-count">
                            Showing <strong><span id="jobs-showing-start">0</span>-<span id="jobs-showing-end">0</span></strong> of <strong><span id="jobs-total">0</span></strong> jobs
                        </div>
                        <div class="table-info">
                            <div class="rows-per-page">
                                <span>Rows per page:</span>
                                <select id="jobs-page-size" onchange="changePageSize('jobs')">
                                    <option value="10">10</option>
                                    <option value="25">25</option>
                                    <option value="50">50</option>
                                    <option value="100">100</option>
                                </select>
                            </div>
                            <div class="pagination" id="jobs-pagination-btns">
                                <button onclick="goToPage('jobs', 'first')" title="First Page">¬´</button>
                                <button onclick="goToPage('jobs', 'prev')" title="Previous Page">‚Äπ</button>
                                <span class="page-info">Page <span id="jobs-current-page">1</span> of <span id="jobs-total-pages">1</span></span>
                                <button onclick="goToPage('jobs', 'next')" title="Next Page">‚Ä∫</button>
                                <button onclick="goToPage('jobs', 'last')" title="Last Page">¬ª</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Nodes View -->
        <div id="nodes-view" class="tab-content" style="display: none;">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Nodes</h3>
                    <button class="btn" onclick="loadNodes()" style="background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%); border: none; padding: 0.6rem; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; font-weight: 600; box-shadow: 0 4px 6px rgba(6, 182, 212, 0.3); transition: all 0.3s ease; cursor: pointer;" title="Refresh">
                        <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor">
                            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                        </svg>
                    </button>
                </div>
                <div class="card-body">
                    <div class="filter-controls" style="display: flex; gap: 1rem; margin-bottom: 1rem; flex-wrap: wrap; align-items: center;">
                        <div style="position: relative; flex: 1; max-width: 300px;">
                            <span style="position: absolute; left: 10px; top: 50%; transform: translateY(-50%); color: #64748b;">üîç</span>
                            <input type="text" id="nodes-search" placeholder="Search nodes..." onkeyup="filterNodes()" style="width: 100%; padding: 0.5rem 0.5rem 0.5rem 2rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white;">
                        </div>
                        <select id="nodes-status-filter" onchange="filterNodes()" style="padding: 0.5rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">
                            <option value="">All Status</option>
                            <option value="Ready">Ready</option>
                            <option value="NotReady">NotReady</option>
                        </select>
                        <select id="nodes-role-filter" onchange="filterNodes()" style="padding: 0.5rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">
                            <option value="">All Roles</option>
                            <option value="control-plane">Control Plane</option>
                            <option value="worker">Worker</option>
                        </select>
                        <select id="nodes-sort" onchange="sortNodes()" style="padding: 0.5rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">
                            <option value="name">Sort by Name</option>
                            <option value="status">Sort by Status</option>
                            <option value="role">Sort by Role</option>
                        </select>
                        <button onclick="clearFiltersNodes()" style="padding: 0.5rem 1rem; background: rgba(71, 85, 105, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">Clear Filters</button>
                    </div>
                    <table id="nodes-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Status</th>
                                <th>Roles</th>
                                <th>Version</th>
                                <th>CPU</th>
                                <th>Memory</th>
                                <th>Age</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="nodes-tbody"></tbody>
                    </table>
                    <!-- Pagination Controls -->
                    <div class="table-controls" id="nodes-pagination">
                        <div class="item-count">
                            Showing <strong><span id="nodes-showing-start">0</span>-<span id="nodes-showing-end">0</span></strong> of <strong><span id="nodes-total">0</span></strong> nodes
                        </div>
                        <div class="table-info">
                            <div class="rows-per-page">
                                <span>Rows per page:</span>
                                <select id="nodes-page-size" onchange="changePageSize('nodes')">
                                    <option value="10">10</option>
                                    <option value="25">25</option>
                                    <option value="50">50</option>
                                    <option value="100">100</option>
                                </select>
                            </div>
                            <div class="pagination" id="nodes-pagination-btns">
                                <button onclick="goToPage('nodes', 'first')" title="First Page">¬´</button>
                                <button onclick="goToPage('nodes', 'prev')" title="Previous Page">‚Äπ</button>
                                <span class="page-info">Page <span id="nodes-current-page">1</span> of <span id="nodes-total-pages">1</span></span>
                                <button onclick="goToPage('nodes', 'next')" title="Next Page">‚Ä∫</button>
                                <button onclick="goToPage('nodes', 'last')" title="Last Page">¬ª</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ConfigMaps View -->
        <div id="configmaps-view" class="tab-content" style="display: none;">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">‚öôÔ∏è ConfigMaps</h3>
                    <button class="btn" onclick="loadConfigMaps()" style="background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%); border: none; padding: 0.6rem; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; font-weight: 600; box-shadow: 0 4px 6px rgba(6, 182, 212, 0.3); transition: all 0.3s ease; cursor: pointer;" title="Refresh">
                        <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor">
                            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                        </svg>
                    </button>
                </div>
                <div class="card-body">
                    <div class="filter-controls" style="display: flex; gap: 1rem; margin-bottom: 1rem; flex-wrap: wrap; align-items: center;">
                        <div style="position: relative; flex: 1; max-width: 300px;">
                            <span style="position: absolute; left: 10px; top: 50%; transform: translateY(-50%); color: #64748b;">üîç</span>
                            <input type="text" id="configmaps-search" placeholder="Search configmaps..." onkeyup="filterConfigMaps()" style="width: 100%; padding: 0.5rem 0.5rem 0.5rem 2rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white;">
                        </div>
                        <select id="configmaps-age-filter" onchange="filterConfigMaps()" style="padding: 0.5rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">
                            <option value="">All Ages</option>
                            <option value="1h">&lt; 1 hour</option>
                            <option value="1d">&lt; 1 day</option>
                            <option value="7d">&lt; 7 days</option>
                            <option value="30d">&lt; 30 days</option>
                        </select>
                        <select id="configmaps-sort" onchange="sortConfigMaps()" style="padding: 0.5rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">
                            <option value="name">Sort by Name</option>
                            <option value="age">Sort by Age</option>
                        </select>
                        <button onclick="clearFiltersConfigMaps()" style="padding: 0.5rem 1rem; background: rgba(71, 85, 105, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; cursor: pointer;">Clear Filters</button>
                    </div>
                    <table id="configmaps-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Data Keys</th>
                                <th>Age</th>
                            </tr>
                        </thead>
                        <tbody id="configmaps-tbody"></tbody>
                    </table>
                    <!-- Pagination Controls -->
                    <div class="table-controls" id="configmaps-pagination">
                        <div class="item-count">
                            Showing <strong><span id="configmaps-showing-start">0</span>-<span id="configmaps-showing-end">0</span></strong> of <strong><span id="configmaps-total">0</span></strong> configmaps
                        </div>
                        <div class="table-info">
                            <div class="rows-per-page">
                                <span>Rows per page:</span>
                                <select id="configmaps-page-size" onchange="changePageSize('configmaps')">
                                    <option value="10">10</option>
                                    <option value="25">25</option>
                                    <option value="50">50</option>
                                    <option value="100">100</option>
                                </select>
                            </div>
                            <div class="pagination" id="configmaps-pagination-btns">
                                <button onclick="goToPage('configmaps', 'first')" title="First Page">¬´</button>
                                <button onclick="goToPage('configmaps', 'prev')" title="Previous Page">‚Äπ</button>
                                <span class="page-info">Page <span id="configmaps-current-page">1</span> of <span id="configmaps-total-pages">1</span></span>
                                <button onclick="goToPage('configmaps', 'next')" title="Next Page">‚Ä∫</button>
                                <button onclick="goToPage('configmaps', 'last')" title="Last Page">¬ª</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ResourceMap View (Enhanced) -->
        <div id="resourcemap-view" class="tab-content" style="display: none;">
            <div class="card">
                <div class="card-header" style="flex-wrap: wrap; gap: 1rem;">
                    <h3 class="card-title">üó∫Ô∏è Resource Relationship Map</h3>
                    <div style="display: flex; gap: 0.5rem; align-items: center;">
                        <!-- View Type Selector -->
                        <div style="display: flex; gap: 4px; background: rgba(30, 41, 59, 0.8); padding: 4px; border-radius: 8px;">
                            <button id="view-force" onclick="switchResourceMapView('force')" class="view-btn active" style="padding: 0.5rem 1rem; border: none; border-radius: 6px; cursor: pointer; font-size: 12px; font-weight: 600; background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%); color: white; transition: all 0.3s;">
                                üîÆ Force
                            </button>
                            <button id="view-tree" onclick="switchResourceMapView('tree')" class="view-btn" style="padding: 0.5rem 1rem; border: none; border-radius: 6px; cursor: pointer; font-size: 12px; font-weight: 600; background: #475569; color: white; transition: all 0.3s;">
                                üå≥ Tree
                            </button>
                            <button id="view-cluster" onclick="switchResourceMapView('cluster')" class="view-btn" style="padding: 0.5rem 1rem; border: none; border-radius: 6px; cursor: pointer; font-size: 12px; font-weight: 600; background: #475569; color: white; transition: all 0.3s;">
                                üì¶ Cluster
                            </button>
                            <button id="view-hierarchical" onclick="switchResourceMapView('hierarchical')" class="view-btn" style="padding: 0.5rem 1rem; border: none; border-radius: 6px; cursor: pointer; font-size: 12px; font-weight: 600; background: #475569; color: white; transition: all 0.3s;">
                                üìä Hierarchy
                            </button>
                        </div>
                        <button class="btn" onclick="loadResourceMap()" style="background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%); border: none; padding: 0.6rem; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; font-weight: 600; box-shadow: 0 4px 6px rgba(6, 182, 212, 0.3); transition: all 0.3s ease; cursor: pointer;" title="Refresh">
                            <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor">
                                <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                                <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div id="resourcemap-help" style="padding: 1rem; background: rgba(6, 182, 212, 0.1); border: 1px solid rgba(6, 182, 212, 0.3); border-radius: 8px; margin-bottom: 1rem;">
                        <strong>üéØ Force Graph:</strong> Drag nodes to rearrange ‚Ä¢ Scroll to zoom ‚Ä¢ Click and drag background to pan
                    </div>
                    <svg id="resourcemap-svg" style="width: 100%; height: 700px; background: rgba(15, 23, 42, 0.5); border-radius: 12px;"></svg>
                    <!-- Legend -->
                    <div style="display: flex; flex-wrap: wrap; gap: 1rem; margin-top: 1rem; padding: 1rem; background: rgba(30, 41, 59, 0.5); border-radius: 8px;">
                        <div style="display: flex; align-items: center; gap: 0.5rem;"><span style="display: inline-block; width: 16px; height: 16px; background: #3b82f6; border-radius: 50%;"></span><span style="font-size: 12px; color: #94a3b8;">Ingress</span></div>
                        <div style="display: flex; align-items: center; gap: 0.5rem;"><span style="display: inline-block; width: 16px; height: 16px; background: #8b5cf6; border-radius: 50%;"></span><span style="font-size: 12px; color: #94a3b8;">Service</span></div>
                        <div style="display: flex; align-items: center; gap: 0.5rem;"><span style="display: inline-block; width: 16px; height: 16px; background: #06b6d4; border-radius: 50%;"></span><span style="font-size: 12px; color: #94a3b8;">Deployment</span></div>
                        <div style="display: flex; align-items: center; gap: 0.5rem;"><span style="display: inline-block; width: 16px; height: 16px; background: #22c55e; border-radius: 50%;"></span><span style="font-size: 12px; color: #94a3b8;">Pod</span></div>
                        <div style="display: flex; align-items: center; gap: 0.5rem;"><span style="display: inline-block; width: 16px; height: 16px; background: #f59e0b; border-radius: 50%;"></span><span style="font-size: 12px; color: #94a3b8;">ConfigMap</span></div>
                        <div style="display: flex; align-items: center; gap: 0.5rem;"><span style="display: inline-block; width: 16px; height: 16px; background: #ef4444; border-radius: 50%;"></span><span style="font-size: 12px; color: #94a3b8;">Secret</span></div>
                        <div style="display: flex; align-items: center; gap: 0.5rem;"><span style="display: inline-block; width: 16px; height: 16px; background: #64748b; border-radius: 50%;"></span><span style="font-size: 12px; color: #94a3b8;">ReplicaSet</span></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirm-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); z-index: 9999; align-items: center; justify-content: center;">
        <div style="background: #1e293b; padding: 2rem; border-radius: 12px; border: 1px solid #475569; max-width: 500px; width: 90%;">
            <h3 style="margin-bottom: 1rem; color: #ef4444;" id="confirm-title">Confirm Action</h3>
            <p style="margin-bottom: 2rem; color: #cbd5e1;" id="confirm-message">Are you sure?</p>
            <div style="display: flex; gap: 1rem; justify-content: flex-end;">
                <button onclick="closeConfirmModal()" style="padding: 0.75rem 1.5rem; background: #475569; border: none; border-radius: 8px; color: white; cursor: pointer;">Cancel</button>
                <button id="confirm-btn" style="padding: 0.75rem 1.5rem; background: #ef4444; border: none; border-radius: 8px; color: white; cursor: pointer; font-weight: 600;">Confirm</button>
            </div>
        </div>
    </div>

    <!-- Security Best Practices View -->
    <div id="security-view" class="tab-content" style="display: none;">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">üõ°Ô∏è Security Best Practices</h3>
                <div style="display: flex; gap: 0.5rem; align-items: center;">
                    <button class="btn" onclick="loadSecurity()" style="background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%); border: none; padding: 0.6rem; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; font-weight: 600; box-shadow: 0 4px 6px rgba(6, 182, 212, 0.3); transition: all 0.3s ease; cursor: pointer;" title="Refresh">
                        <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor">
                            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="card-body">
                <!-- Security Score -->
                <div id="security-score-section" style="margin-bottom: 2rem;">
                    <div style="display: flex; gap: 2rem; flex-wrap: wrap;">
                        <div style="flex: 1; min-width: 200px; background: rgba(30, 41, 59, 0.6); border-radius: 12px; padding: 1.5rem; text-align: center;">
                            <div style="font-size: 3rem; font-weight: 700;" id="security-score">--</div>
                            <div style="color: #94a3b8; font-size: 0.875rem;">Security Score</div>
                        </div>
                        <div style="flex: 3; min-width: 300px; display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem;">
                            <div style="background: rgba(239, 68, 68, 0.15); border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 8px; padding: 1rem; text-align: center;">
                                <div style="font-size: 1.75rem; font-weight: 700; color: #ef4444;" id="security-critical">0</div>
                                <div style="color: #ef4444; font-size: 0.75rem; font-weight: 600;">CRITICAL</div>
                            </div>
                            <div style="background: rgba(249, 115, 22, 0.15); border: 1px solid rgba(249, 115, 22, 0.3); border-radius: 8px; padding: 1rem; text-align: center;">
                                <div style="font-size: 1.75rem; font-weight: 700; color: #f97316;" id="security-high">0</div>
                                <div style="color: #f97316; font-size: 0.75rem; font-weight: 600;">HIGH</div>
                            </div>
                            <div style="background: rgba(234, 179, 8, 0.15); border: 1px solid rgba(234, 179, 8, 0.3); border-radius: 8px; padding: 1rem; text-align: center;">
                                <div style="font-size: 1.75rem; font-weight: 700; color: #eab308;" id="security-medium">0</div>
                                <div style="color: #eab308; font-size: 0.75rem; font-weight: 600;">MEDIUM</div>
                            </div>
                            <div style="background: rgba(34, 197, 94, 0.15); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 8px; padding: 1rem; text-align: center;">
                                <div style="font-size: 1.75rem; font-weight: 700; color: #22c55e;" id="security-low">0</div>
                                <div style="color: #22c55e; font-size: 0.75rem; font-weight: 600;">LOW</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Filter Buttons -->
                <div style="display: flex; gap: 0.5rem; margin-bottom: 1rem; flex-wrap: wrap;">
                    <button onclick="filterSecurityFindings('all')" id="sec-filter-all" class="btn" style="background: #06b6d4; padding: 0.5rem 1rem; font-size: 0.875rem;">All</button>
                    <button onclick="filterSecurityFindings('critical')" id="sec-filter-critical" class="btn" style="background: #475569; padding: 0.5rem 1rem; font-size: 0.875rem;">Critical</button>
                    <button onclick="filterSecurityFindings('high')" id="sec-filter-high" class="btn" style="background: #475569; padding: 0.5rem 1rem; font-size: 0.875rem;">High</button>
                    <button onclick="filterSecurityFindings('medium')" id="sec-filter-medium" class="btn" style="background: #475569; padding: 0.5rem 1rem; font-size: 0.875rem;">Medium</button>
                    <button onclick="filterSecurityFindings('low')" id="sec-filter-low" class="btn" style="background: #475569; padding: 0.5rem 1rem; font-size: 0.875rem;">Low</button>
                    <div style="flex: 1;"></div>
                    <select id="security-category-filter" onchange="filterSecurityFindings()" style="background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 4px; color: white; padding: 0.5rem;">
                        <option value="">All Categories</option>
                        <option value="security-context">Security Context</option>
                        <option value="network-policy">Network Policy</option>
                        <option value="ingress-ports">Ingress Ports</option>
                        <option value="ingress-tls">Ingress TLS</option>
                        <option value="service-exposure">Service Exposure</option>
                    </select>
                </div>

                <!-- Findings List -->
                <div id="security-findings" style="display: flex; flex-direction: column; gap: 0.75rem;">
                    <div style="text-align: center; padding: 3rem; color: #64748b;">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">üîç</div>
                        <p>Click "Refresh" to analyze security best practices</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Helm Releases View -->
    <div id="helm-view" class="tab-content" style="display: none;">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">‚éà Helm Releases</h3>
                <div style="display: flex; gap: 0.5rem; align-items: center;">
                    <button class="btn" onclick="loadHelmReleases()" style="background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%); border: none; padding: 0.6rem; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; font-weight: 600; box-shadow: 0 4px 6px rgba(6, 182, 212, 0.3); transition: all 0.3s ease; cursor: pointer;" title="Refresh">
                        <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor">
                            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="card-body">
                <!-- Summary Stats -->
                <div id="helm-summary" style="display: flex; gap: 1rem; margin-bottom: 1.5rem; flex-wrap: wrap;">
                    <div style="background: rgba(30, 41, 59, 0.6); border-radius: 8px; padding: 1rem; flex: 1; min-width: 150px; text-align: center;">
                        <div style="font-size: 2rem; font-weight: 700; color: #06b6d4;" id="helm-count">--</div>
                        <div style="color: #94a3b8; font-size: 0.875rem;">Total Releases</div>
                    </div>
                    <div style="background: rgba(34, 197, 94, 0.15); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 8px; padding: 1rem; flex: 1; min-width: 150px; text-align: center;">
                        <div style="font-size: 2rem; font-weight: 700; color: #22c55e;" id="helm-deployed">--</div>
                        <div style="color: #22c55e; font-size: 0.875rem;">Deployed</div>
                    </div>
                    <div style="background: rgba(249, 115, 22, 0.15); border: 1px solid rgba(249, 115, 22, 0.3); border-radius: 8px; padding: 1rem; flex: 1; min-width: 150px; text-align: center;">
                        <div style="font-size: 2rem; font-weight: 700; color: #f97316;" id="helm-other">--</div>
                        <div style="color: #f97316; font-size: 0.875rem;">Other Status</div>
                    </div>
                </div>

                <!-- Search Box -->
                <div style="margin-bottom: 1rem;">
                    <input type="text" id="helm-search" placeholder="Search releases..." oninput="filterHelmReleases()" style="width: 100%; max-width: 300px; padding: 0.5rem 1rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 6px; color: white;">
                </div>

                <!-- Releases Table -->
                <div style="overflow-x: auto;">
                    <table class="data-table" id="helm-table">
                        <thead>
                            <tr>
                                <th>Release Name</th>
                                <th>Namespace</th>
                                <th>Revision</th>
                                <th>Status</th>
                                <th>Updated</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="helm-releases-body">
                            <tr>
                                <td colspan="6" style="text-align: center; padding: 3rem; color: #64748b;">
                                    <div style="font-size: 3rem; margin-bottom: 1rem;">‚éà</div>
                                    <p>Loading Helm releases...</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Kustomize Resources View -->
    <div id="kustomize-view" class="tab-content" style="display: none;">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">üì¶ Kustomize Managed Resources</h3>
                <div style="display: flex; gap: 0.5rem; align-items: center;">
                    <button class="btn" onclick="loadKustomizeResources()" style="background: linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%); border: none; padding: 0.6rem; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; font-weight: 600; box-shadow: 0 4px 6px rgba(139, 92, 246, 0.3); transition: all 0.3s ease; cursor: pointer;" title="Refresh">
                        <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor">
                            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="card-body">
                <div id="kustomize-summary" style="display: flex; gap: 1rem; margin-bottom: 1.5rem; flex-wrap: wrap;">
                    <div style="background: rgba(139, 92, 246, 0.15); border: 1px solid rgba(139, 92, 246, 0.3); border-radius: 8px; padding: 1rem; flex: 1; min-width: 150px; text-align: center;">
                        <div style="font-size: 2rem; font-weight: 700; color: #8b5cf6;" id="kustomize-count">--</div>
                        <div style="color: #a78bfa; font-size: 0.875rem;">Total Resources</div>
                    </div>
                </div>
                <p style="color: #94a3b8; margin-bottom: 1rem; font-size: 0.875rem;">Resources with label <code style="background: rgba(30, 41, 59, 0.8); padding: 0.2rem 0.4rem; border-radius: 4px;">app.kubernetes.io/managed-by=kustomize</code></p>
                <div style="margin-bottom: 1rem;">
                    <input type="text" id="kustomize-search" placeholder="Search resources..." oninput="filterKustomizeResources()" style="width: 100%; max-width: 300px; padding: 0.5rem 1rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 6px; color: white;">
                </div>
                <div style="overflow-x: auto;">
                    <table class="data-table" id="kustomize-table">
                        <thead>
                            <tr>
                                <th>Kind</th>
                                <th>Name</th>
                                <th>Namespace</th>
                                <th>Age</th>
                            </tr>
                        </thead>
                        <tbody id="kustomize-resources-body">
                            <tr>
                                <td colspan="4" style="text-align: center; padding: 3rem; color: #64748b;">
                                    <div style="font-size: 3rem; margin-bottom: 1rem;">üì¶</div>
                                    <p>Loading Kustomize resources...</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- ArgoCD Applications View -->
    <div id="argocd-view" class="tab-content" style="display: none;">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">ü¶ë ArgoCD Applications</h3>
                <div style="display: flex; gap: 0.5rem; align-items: center;">
                    <button class="btn" onclick="loadArgoCDApps()" style="background: linear-gradient(135deg, #f97316 0%, #ef4444 100%); border: none; padding: 0.6rem; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; font-weight: 600; box-shadow: 0 4px 6px rgba(249, 115, 22, 0.3); transition: all 0.3s ease; cursor: pointer;" title="Refresh">
                        <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor">
                            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="card-body">
                <div id="argocd-summary" style="display: flex; gap: 1rem; margin-bottom: 1.5rem; flex-wrap: wrap;">
                    <div style="background: rgba(30, 41, 59, 0.6); border-radius: 8px; padding: 1rem; flex: 1; min-width: 150px; text-align: center;">
                        <div style="font-size: 2rem; font-weight: 700; color: #f97316;" id="argocd-count">--</div>
                        <div style="color: #94a3b8; font-size: 0.875rem;">Total Apps</div>
                    </div>
                    <div style="background: rgba(34, 197, 94, 0.15); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 8px; padding: 1rem; flex: 1; min-width: 150px; text-align: center;">
                        <div style="font-size: 2rem; font-weight: 700; color: #22c55e;" id="argocd-synced">--</div>
                        <div style="color: #22c55e; font-size: 0.875rem;">Synced</div>
                    </div>
                    <div style="background: rgba(34, 197, 94, 0.15); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 8px; padding: 1rem; flex: 1; min-width: 150px; text-align: center;">
                        <div style="font-size: 2rem; font-weight: 700; color: #22c55e;" id="argocd-healthy">--</div>
                        <div style="color: #22c55e; font-size: 0.875rem;">Healthy</div>
                    </div>
                </div>
                <div id="argocd-not-installed" style="display: none; text-align: center; padding: 2rem; color: #94a3b8; background: rgba(30, 41, 59, 0.6); border-radius: 8px; margin-bottom: 1rem;">
                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">‚ö†Ô∏è</div>
                    <p>ArgoCD is not installed in this cluster</p>
                </div>
                <div style="margin-bottom: 1rem;">
                    <input type="text" id="argocd-search" placeholder="Search applications..." oninput="filterArgoCDApps()" style="width: 100%; max-width: 300px; padding: 0.5rem 1rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 6px; color: white;">
                </div>
                <div style="overflow-x: auto;">
                    <table class="data-table" id="argocd-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Namespace</th>
                                <th>Project</th>
                                <th>Sync Status</th>
                                <th>Health</th>
                                <th>Repo</th>
                                <th>Age</th>
                            </tr>
                        </thead>
                        <tbody id="argocd-apps-body">
                            <tr>
                                <td colspan="7" style="text-align: center; padding: 3rem; color: #64748b;">
                                    <div style="font-size: 3rem; margin-bottom: 1rem;">ü¶ë</div>
                                    <p>Loading ArgoCD applications...</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Flux Resources View -->
    <div id="flux-view" class="tab-content" style="display: none;">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">üîÑ Flux Resources</h3>
                <div style="display: flex; gap: 0.5rem; align-items: center;">
                    <button class="btn" onclick="loadFluxResources()" style="background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%); border: none; padding: 0.6rem; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; font-weight: 600; box-shadow: 0 4px 6px rgba(6, 182, 212, 0.3); transition: all 0.3s ease; cursor: pointer;" title="Refresh">
                        <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor">
                            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="card-body">
                <div id="flux-summary" style="display: flex; gap: 1rem; margin-bottom: 1.5rem; flex-wrap: wrap;">
                    <div style="background: rgba(30, 41, 59, 0.6); border-radius: 8px; padding: 1rem; flex: 1; min-width: 150px; text-align: center;">
                        <div style="font-size: 2rem; font-weight: 700; color: #06b6d4;" id="flux-count">--</div>
                        <div style="color: #94a3b8; font-size: 0.875rem;">Total Resources</div>
                    </div>
                    <div style="background: rgba(34, 197, 94, 0.15); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 8px; padding: 1rem; flex: 1; min-width: 150px; text-align: center;">
                        <div style="font-size: 2rem; font-weight: 700; color: #22c55e;" id="flux-ready">--</div>
                        <div style="color: #22c55e; font-size: 0.875rem;">Ready</div>
                    </div>
                    <div style="background: rgba(239, 68, 68, 0.15); border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 8px; padding: 1rem; flex: 1; min-width: 150px; text-align: center;">
                        <div style="font-size: 2rem; font-weight: 700; color: #ef4444;" id="flux-not-ready">--</div>
                        <div style="color: #ef4444; font-size: 0.875rem;">Not Ready</div>
                    </div>
                </div>
                <div id="flux-not-installed" style="display: none; text-align: center; padding: 2rem; color: #94a3b8; background: rgba(30, 41, 59, 0.6); border-radius: 8px; margin-bottom: 1rem;">
                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">‚ö†Ô∏è</div>
                    <p>Flux is not installed in this cluster</p>
                </div>
                <div style="margin-bottom: 1rem;">
                    <input type="text" id="flux-search" placeholder="Search resources..." oninput="filterFluxResources()" style="width: 100%; max-width: 300px; padding: 0.5rem 1rem; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(100, 116, 139, 0.5); border-radius: 6px; color: white;">
                </div>
                <div style="overflow-x: auto;">
                    <table class="data-table" id="flux-table">
                        <thead>
                            <tr>
                                <th>Kind</th>
                                <th>Name</th>
                                <th>Namespace</th>
                                <th>Ready</th>
                                <th>Status</th>
                                <th>Age</th>
                            </tr>
                        </thead>
                        <tbody id="flux-resources-body">
                            <tr>
                                <td colspan="6" style="text-align: center; padding: 3rem; color: #64748b;">
                                    <div style="font-size: 3rem; margin-bottom: 1rem;">üîÑ</div>
                                    <p>Loading Flux resources...</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Pod Details Modal -->
    <div id="pod-details-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); z-index: 9999; padding: 2rem; overflow-y: auto;">
        <div style="background: #1e293b; padding: 2rem; border-radius: 12px; border: 1px solid #475569; max-width: 1200px; margin: 0 auto; position: relative;">
            <button onclick="closePodDetails()" style="position: absolute; top: 1rem; right: 1rem; background: #475569; border: none; border-radius: 8px; color: white; cursor: pointer; padding: 0.5rem 1rem; font-size: 1.25rem;">&times;</button>
            <div id="pod-details-content"></div>
        </div>
    </div>

    <!-- Deployment Details Modal -->
    <div id="deployment-details-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); z-index: 9999; padding: 2rem; overflow-y: auto;">
        <div style="background: #1e293b; padding: 2rem; border-radius: 12px; border: 1px solid #475569; max-width: 1200px; margin: 0 auto; position: relative;">
            <button onclick="closeDeploymentDetails()" style="position: absolute; top: 1rem; right: 1rem; background: #475569; border: none; border-radius: 8px; color: white; cursor: pointer; padding: 0.5rem 1rem; font-size: 1.25rem;">&times;</button>
            <div id="deployment-details-content"></div>
        </div>
    </div>

    <!-- Service Details Modal -->
    <div id="service-details-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); z-index: 9999; padding: 2rem; overflow-y: auto;">
        <div style="background: #1e293b; padding: 2rem; border-radius: 12px; border: 1px solid #475569; max-width: 1200px; margin: 0 auto; position: relative;">
            <button onclick="closeServiceDetails()" style="position: absolute; top: 1rem; right: 1rem; background: #475569; border: none; border-radius: 8px; color: white; cursor: pointer; padding: 0.5rem 1rem; font-size: 1.25rem;">&times;</button>
            <div id="service-details-content"></div>
        </div>
    </div>

    <!-- Ingress Details Modal -->
    <div id="ingress-details-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); z-index: 9999; padding: 2rem; overflow-y: auto;">
        <div style="background: #1e293b; padding: 2rem; border-radius: 12px; border: 1px solid #475569; max-width: 1200px; margin: 0 auto; position: relative;">
            <button onclick="closeIngressDetails()" style="position: absolute; top: 1rem; right: 1rem; background: #475569; border: none; border-radius: 8px; color: white; cursor: pointer; padding: 0.5rem 1rem; font-size: 1.25rem;">&times;</button>
            <div id="ingress-details-content"></div>
        </div>
    </div>

    <!-- ConfigMap Details Modal -->
    <div id="configmap-details-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); z-index: 9999; padding: 2rem; overflow-y: auto;">
        <div style="background: #1e293b; padding: 2rem; border-radius: 12px; border: 1px solid #475569; max-width: 1200px; margin: 0 auto; position: relative;">
            <button onclick="closeConfigMapDetails()" style="position: absolute; top: 1rem; right: 1rem; background: #475569; border: none; border-radius: 8px; color: white; cursor: pointer; padding: 0.5rem 1rem; font-size: 1.25rem;">&times;</button>
            <div id="configmap-details-content"></div>
        </div>
    </div>

    <!-- StatefulSet Details Modal -->
    <div id="statefulset-details-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); z-index: 9999; padding: 2rem; overflow-y: auto;">
        <div style="background: #1e293b; padding: 2rem; border-radius: 12px; border: 1px solid #475569; max-width: 1200px; margin: 0 auto; position: relative;">
            <button onclick="closeStatefulSetDetails()" style="position: absolute; top: 1rem; right: 1rem; background: #475569; border: none; border-radius: 8px; color: white; cursor: pointer; padding: 0.5rem 1rem; font-size: 1.25rem;">&times;</button>
            <div id="statefulset-details-content"></div>
        </div>
    </div>

    <!-- DaemonSet Details Modal -->
    <div id="daemonset-details-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); z-index: 9999; padding: 2rem; overflow-y: auto;">
        <div style="background: #1e293b; padding: 2rem; border-radius: 12px; border: 1px solid #475569; max-width: 1200px; margin: 0 auto; position: relative;">
            <button onclick="closeDaemonSetDetails()" style="position: absolute; top: 1rem; right: 1rem; background: #475569; border: none; border-radius: 8px; color: white; cursor: pointer; padding: 0.5rem 1rem; font-size: 1.25rem;">&times;</button>
            <div id="daemonset-details-content"></div>
        </div>
    </div>

    <!-- CronJob Details Modal -->
    <div id="cronjob-details-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); z-index: 9999; padding: 2rem; overflow-y: auto;">
        <div style="background: #1e293b; padding: 2rem; border-radius: 12px; border: 1px solid #475569; max-width: 1200px; margin: 0 auto; position: relative;">
            <button onclick="closeCronJobDetails()" style="position: absolute; top: 1rem; right: 1rem; background: #475569; border: none; border-radius: 8px; color: white; cursor: pointer; padding: 0.5rem 1rem; font-size: 1.25rem;">&times;</button>
            <div id="cronjob-details-content"></div>
        </div>
    </div>

    <!-- Job Details Modal -->
    <div id="job-details-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); z-index: 9999; padding: 2rem; overflow-y: auto;">
        <div style="background: #1e293b; padding: 2rem; border-radius: 12px; border: 1px solid #475569; max-width: 1200px; margin: 0 auto; position: relative;">
            <button onclick="closeJobDetails()" style="position: absolute; top: 1rem; right: 1rem; background: #475569; border: none; border-radius: 8px; color: white; cursor: pointer; padding: 0.5rem 1rem; font-size: 1.25rem;">&times;</button>
            <div id="job-details-content"></div>
        </div>
    </div>

    <!-- Node Details Modal -->
    <div id="node-details-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); z-index: 9999; padding: 2rem; overflow-y: auto;">
        <div style="background: #1e293b; padding: 2rem; border-radius: 12px; border: 1px solid #475569; max-width: 1200px; margin: 0 auto; position: relative;">
            <button onclick="closeNodeDetails()" style="position: absolute; top: 1rem; right: 1rem; background: #475569; border: none; border-radius: 8px; color: white; cursor: pointer; padding: 0.5rem 1rem; font-size: 1.25rem;">&times;</button>
            <div id="node-details-content"></div>
        </div>
    </div>

    <!-- Terminal Modal -->
    <div id="terminal-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.9); z-index: 10000; padding: 2rem;">
        <div style="background: #0f172a; border-radius: 12px; border: 1px solid #475569; max-width: 1400px; margin: 0 auto; height: 90%; display: flex; flex-direction: column;">
            <div style="padding: 1rem; border-bottom: 1px solid #475569; display: flex; justify-content: space-between; align-items: center;">
                <h3 style="margin: 0; color: #06b6d4; font-size: 1.125rem;" id="terminal-title">Terminal</h3>
                <button onclick="closeTerminal()" style="background: #475569; border: none; border-radius: 8px; color: white; cursor: pointer; padding: 0.5rem 1rem; font-size: 1.25rem;">&times;</button>
            </div>
            <div id="terminal-output" style="flex: 1; padding: 1rem; overflow-y: auto; font-family: 'Courier New', monospace; font-size: 14px; color: #e2e8f0; background: #000000;">
                <div style="color: #22c55e;">Connecting to container...</div>
            </div>
            <div style="padding: 1rem; border-top: 1px solid #475569; display: flex; gap: 0.5rem;">
                <input type="text" id="terminal-input" placeholder="Type command and press Enter..." style="flex: 1; padding: 0.75rem; background: #1e293b; border: 1px solid #475569; border-radius: 8px; color: white; font-family: 'Courier New', monospace;" />
                <button onclick="sendCommand()" style="padding: 0.75rem 1.5rem; background: #06b6d4; border: none; border-radius: 8px; color: white; cursor: pointer; font-weight: 600;">Send</button>
            </div>
        </div>
    </div>

    <!-- Generic Modal -->
    <div id="generic-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); z-index: 9999; padding: 2rem; overflow-y: auto;">
        <div style="background: #1e293b; padding: 2rem; border-radius: 12px; border: 1px solid #475569; max-width: 900px; margin: 0 auto; position: relative;">
            <button onclick="closeGenericModal()" style="position: absolute; top: 1rem; right: 1rem; background: #475569; border: none; border-radius: 8px; color: white; cursor: pointer; padding: 0.5rem 1rem; font-size: 1.25rem;">&times;</button>
            <h3 id="generic-modal-title" style="color: #06b6d4; margin-bottom: 1.5rem;"></h3>
            <div id="generic-modal-content"></div>
        </div>
    </div>
    </div>

    <!-- Port Forward Modal -->
    <div id="portforward-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); z-index: 9999; align-items: center; justify-content: center;">
        <div style="background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); padding: 2rem; border-radius: 16px; border: 1px solid rgba(100, 116, 139, 0.3); max-width: 500px; width: 90%;">
            <h3 style="margin: 0 0 1.5rem 0; color: #06b6d4; display: flex; align-items: center; gap: 0.5rem;">Port Forward</h3>
            <p style="color: #94a3b8; margin-bottom: 1.5rem;" id="pf-resource-info">Forward ports to access the resource locally</p>
            <input type="hidden" id="pf-type" value="">
            <input type="hidden" id="pf-name" value="">
            <input type="hidden" id="pf-namespace" value="">
            <div style="margin-bottom: 1rem;">
                <label style="color: #cbd5e1; font-size: 0.875rem; display: block; margin-bottom: 0.5rem;">Remote Port (Container/Service)</label>
                <input type="number" id="pf-remote-port" placeholder="e.g., 8080" style="width: 100%; padding: 0.75rem; background: rgba(15, 23, 42, 0.8); border: 1px solid #475569; border-radius: 8px; color: white; font-size: 1rem;">
            </div>
            <div style="margin-bottom: 1.5rem;">
                <label style="color: #cbd5e1; font-size: 0.875rem; display: block; margin-bottom: 0.5rem;">Local Port (Optional - auto-assigned if empty)</label>
                <input type="number" id="pf-local-port" placeholder="e.g., 8080" style="width: 100%; padding: 0.75rem; background: rgba(15, 23, 42, 0.8); border: 1px solid #475569; border-radius: 8px; color: white; font-size: 1rem;">
            </div>
            <div style="display: flex; gap: 1rem; justify-content: flex-end;">
                <button onclick="closePortForwardModal()" style="padding: 0.75rem 1.5rem; background: #475569; border: none; border-radius: 8px; color: white; cursor: pointer; font-weight: 600;">Cancel</button>
                <button onclick="startPortForward()" style="padding: 0.75rem 1.5rem; background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); border: none; border-radius: 8px; color: white; cursor: pointer; font-weight: 600;">Start Forward</button>
            </div>
        </div>
    </div>

    <!-- Active Port Forwards Panel -->
    <div id="portforwards-panel" style="display: none; position: fixed; bottom: 1rem; right: 1rem; background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); border: 1px solid #475569; border-radius: 12px; padding: 1rem; z-index: 9998; min-width: 320px; max-width: 400px; box-shadow: 0 10px 40px rgba(0,0,0,0.5);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem; border-bottom: 1px solid #334155; padding-bottom: 0.75rem;">
            <h4 style="margin: 0; color: #06b6d4; font-size: 0.875rem;">Active Port Forwards</h4>
            <button onclick="togglePortForwardsPanel()" style="background: none; border: none; color: #64748b; cursor: pointer; font-size: 1rem;">&times;</button>
        </div>
        <div id="portforwards-list" style="max-height: 300px; overflow-y: auto;"></div>
    </div>

    <!-- Port Forwards Toggle Button -->
    <button id="portforwards-toggle" onclick="togglePortForwardsPanel()" style="display: none; position: fixed; bottom: 1rem; right: 1rem; background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); border: none; border-radius: 50%; width: 48px; height: 48px; color: white; cursor: pointer; z-index: 9997; box-shadow: 0 4px 12px rgba(34, 197, 94, 0.4); font-size: 1.25rem;" title="Active Port Forwards">
        <span id="pf-count-badge" style="position: absolute; top: -4px; right: -4px; background: #ef4444; color: white; border-radius: 50%; width: 20px; height: 20px; font-size: 0.75rem; display: flex; align-items: center; justify-content: center;">0</span>
        PF
    </button>

    <script>
        // Theme Management
        function changeTheme(theme) {
            if (theme === 'dark') {
                document.documentElement.removeAttribute('data-theme');
            } else {
                document.documentElement.setAttribute('data-theme', theme);
            }
            localStorage.setItem('kubegraf-theme', theme);

            // Update theme-dependent elements
            updateThemeColors(theme);
        }

        function updateThemeColors(theme) {
            // Update any inline styles that need theme awareness
            const isLight = theme === 'light';

            // Update namespace selector styling
            const nsSelector = document.getElementById('namespace-selector');
            if (nsSelector) {
                nsSelector.style.background = isLight ? 'rgba(255, 255, 255, 0.9)' : 'rgba(30, 41, 59, 0.8)';
                nsSelector.style.color = isLight ? '#0f172a' : 'white';
                nsSelector.style.borderColor = isLight ? 'rgba(148, 163, 184, 0.6)' : 'rgba(100, 116, 139, 0.5)';
            }
        }

        // Initialize theme from localStorage
        function initTheme() {
            const savedTheme = localStorage.getItem('kubegraf-theme') || 'dark';
            const themeSelector = document.getElementById('theme-selector');
            if (themeSelector) {
                themeSelector.value = savedTheme;
            }
            changeTheme(savedTheme);
        }

        // Initialize theme on page load
        document.addEventListener('DOMContentLoaded', initTheme);

        // Global Search functionality
        let currentSearchTerm = '';

        function globalSearch(term) {
            currentSearchTerm = term.toLowerCase().trim();

            // Search across all table bodies
            const tables = [
                'pods-tbody',
                'deployments-tbody',
                'statefulsets-tbody',
                'daemonsets-tbody',
                'services-tbody',
                'ingresses-tbody',
                'configmaps-tbody',
                'cronjobs-tbody',
                'jobs-tbody',
                'nodes-tbody'
            ];

            let totalMatches = 0;

            tables.forEach(tableId => {
                const tbody = document.getElementById(tableId);
                if (!tbody) return;

                const rows = tbody.querySelectorAll('tr');
                rows.forEach(row => {
                    const text = row.textContent.toLowerCase();
                    if (currentSearchTerm === '' || text.includes(currentSearchTerm)) {
                        row.classList.remove('search-no-match');
                        row.style.display = '';
                        if (currentSearchTerm !== '') totalMatches++;
                    } else {
                        row.classList.add('search-no-match');
                        row.style.display = 'none';
                    }
                });
            });

            // Update search input styling based on results
            const searchInput = document.getElementById('global-search');
            if (currentSearchTerm !== '' && totalMatches === 0) {
                searchInput.style.color = 'var(--error-color)';
            } else {
                searchInput.style.color = '';
            }
        }

        // Keyboard shortcut for search (Ctrl+K)
        document.addEventListener('keydown', function(e) {
            if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                e.preventDefault();
                const searchInput = document.getElementById('global-search');
                searchInput.focus();
                searchInput.select();
            }
            // Escape to clear search
            if (e.key === 'Escape') {
                const searchInput = document.getElementById('global-search');
                if (document.activeElement === searchInput) {
                    searchInput.value = '';
                    globalSearch('');
                    searchInput.blur();
                }
            }
        });

        // Pagination State
        const paginationState = {
            pods: { page: 1, pageSize: 10, total: 0, filteredData: [] },
            deployments: { page: 1, pageSize: 10, total: 0, filteredData: [] },
            statefulsets: { page: 1, pageSize: 10, total: 0, filteredData: [] },
            daemonsets: { page: 1, pageSize: 10, total: 0, filteredData: [] },
            services: { page: 1, pageSize: 10, total: 0, filteredData: [] },
            ingresses: { page: 1, pageSize: 10, total: 0, filteredData: [] },
            configmaps: { page: 1, pageSize: 10, total: 0, filteredData: [] },
            cronjobs: { page: 1, pageSize: 10, total: 0, filteredData: [] },
            jobs: { page: 1, pageSize: 10, total: 0, filteredData: [] },
            nodes: { page: 1, pageSize: 10, total: 0, filteredData: [] }
        };

        // Change page size
        function changePageSize(resource) {
            const select = document.getElementById(`${resource}-page-size`);
            paginationState[resource].pageSize = parseInt(select.value);
            paginationState[resource].page = 1; // Reset to first page
            renderPaginatedTable(resource);
        }

        // Go to page
        function goToPage(resource, action) {
            const state = paginationState[resource];
            const totalPages = Math.ceil(state.filteredData.length / state.pageSize) || 1;

            switch(action) {
                case 'first':
                    state.page = 1;
                    break;
                case 'prev':
                    state.page = Math.max(1, state.page - 1);
                    break;
                case 'next':
                    state.page = Math.min(totalPages, state.page + 1);
                    break;
                case 'last':
                    state.page = totalPages;
                    break;
                default:
                    state.page = parseInt(action) || 1;
            }
            renderPaginatedTable(resource);
        }

        // Update pagination UI
        function updatePaginationUI(resource) {
            const state = paginationState[resource];
            const totalItems = state.filteredData.length;
            const totalPages = Math.ceil(totalItems / state.pageSize) || 1;
            const startItem = totalItems > 0 ? ((state.page - 1) * state.pageSize) + 1 : 0;
            const endItem = Math.min(state.page * state.pageSize, totalItems);

            // Update showing text
            const showingStart = document.getElementById(`${resource}-showing-start`);
            const showingEnd = document.getElementById(`${resource}-showing-end`);
            const totalEl = document.getElementById(`${resource}-total`);
            const currentPage = document.getElementById(`${resource}-current-page`);
            const totalPagesEl = document.getElementById(`${resource}-total-pages`);

            if (showingStart) showingStart.textContent = startItem;
            if (showingEnd) showingEnd.textContent = endItem;
            if (totalEl) totalEl.textContent = totalItems;
            if (currentPage) currentPage.textContent = state.page;
            if (totalPagesEl) totalPagesEl.textContent = totalPages;

            // Update button states
            const paginationBtns = document.getElementById(`${resource}-pagination-btns`);
            if (paginationBtns) {
                const buttons = paginationBtns.querySelectorAll('button');
                if (buttons.length >= 4) {
                    buttons[0].disabled = state.page === 1; // First
                    buttons[1].disabled = state.page === 1; // Prev
                    buttons[2].disabled = state.page === totalPages; // Next
                    buttons[3].disabled = state.page === totalPages; // Last
                }
            }
        }

        // Generic function to render paginated table
        function renderPaginatedTable(resource) {
            const state = paginationState[resource];
            const startIndex = (state.page - 1) * state.pageSize;
            const endIndex = startIndex + state.pageSize;
            const pageData = state.filteredData.slice(startIndex, endIndex);

            // Call the specific render function for each resource type
            const renderFunctions = {
                pods: renderPodsRows,
                deployments: renderDeploymentsRows,
                statefulsets: renderStatefulSetsRows,
                daemonsets: renderDaemonSetsRows,
                services: renderServicesRows,
                ingresses: renderIngressesRows,
                configmaps: renderConfigMapsRows,
                cronjobs: renderCronJobsRows,
                jobs: renderJobsRows,
                nodes: renderNodesRows
            };

            if (renderFunctions[resource]) {
                renderFunctions[resource](pageData);
            }

            updatePaginationUI(resource);
        }

        // State
        let currentMainTab = 'dashboard';
        let currentSubTab = '';
        let currentTab = 'dashboard';
        let currentNamespace = 'default';
        let metricsHistory = {
            cpu: Array(20).fill(0),
            memory: Array(20).fill(0)
        };

        // Global data storage for filtering and sorting
        let podsData = [];
        let deploymentsData = [];
        let statefulSetsData = [];
        let daemonSetsData = [];
        let servicesData = [];
        let ingressesData = [];
        let configMapsData = [];
        let cronJobsData = [];
        let jobsData = [];
        let nodesData = [];

        // WebSocket connection
        const ws = new WebSocket('ws://' + location.host + '/ws');
        ws.onmessage = (event) => {
            const data = JSON.parse(event.data);
            if (data.type === 'metrics') {
                updateMetrics(data.data);
            }
        };

        // Main tab switching
        function switchMainTab(mainTab) {
            currentMainTab = mainTab;

            // Hide all sub-tabs
            document.querySelectorAll('.sub-tabs').forEach(st => st.style.display = 'none');

            // Remove active class from all main tabs
            document.querySelectorAll('.main-tab').forEach(t => t.classList.remove('active'));

            // Add active class to selected main tab
            document.getElementById('tab-' + mainTab).classList.add('active');

            // Remove active class from all sub-tabs
            document.querySelectorAll('.sub-tabs button').forEach(b => b.classList.remove('active'));

            if (mainTab === 'dashboard') {
                // Show dashboard, hide all resource views
                document.getElementById('dashboard').style.display = 'block';
                document.querySelectorAll('.tab-content').forEach(v => {
                    if (v.id !== 'dashboard') {
                        v.style.display = 'none';
                    }
                });
                currentTab = 'dashboard';
                loadMetrics();
            } else if (mainTab === 'resourcemap') {
                // Show resource map
                switchTab('resourcemap');
            } else if (mainTab === 'workloads') {
                document.getElementById('workloads-subtabs').style.display = 'flex';
                switchTab('pods'); // Default to pods
            } else if (mainTab === 'network') {
                document.getElementById('network-subtabs').style.display = 'flex';
                switchTab('services'); // Default to services
            } else if (mainTab === 'config') {
                document.getElementById('config-subtabs').style.display = 'flex';
                switchTab('configmaps'); // Default to configmaps
            } else if (mainTab === 'cluster') {
                document.getElementById('cluster-subtabs').style.display = 'flex';
                switchTab('nodes'); // Default to nodes
            } else if (mainTab === 'security') {
                // Show security view
                switchTab('security');
            } else if (mainTab === 'plugins') {
                document.getElementById('plugins-subtabs').style.display = 'flex';
                switchTab('helm'); // Default to helm
            }
        }

        // Resource tab switching
        function switchTab(tabName) {
            currentTab = tabName;
            currentSubTab = tabName;

            // Remove active class from all sub-tab buttons
            document.querySelectorAll('.sub-tabs button').forEach(b => b.classList.remove('active'));

            // Add active class to current sub-tab button
            const subtabButton = document.getElementById('subtab-' + tabName);
            if (subtabButton) {
                subtabButton.classList.add('active');
            }

            // Hide all content views
            document.querySelectorAll('.tab-content').forEach(c => c.style.display = 'none');

            if (tabName === 'dashboard') {
                document.getElementById('dashboard').style.display = 'block';
            } else if (tabName === 'topology') {
                document.getElementById('topology-view').style.display = 'block';
                loadTopology();
            } else if (tabName === 'resourcemap') {
                document.getElementById('resourcemap-view').style.display = 'block';
                loadResourceMap();
            } else if (tabName === 'pods') {
                document.getElementById('pods-view').style.display = 'block';
                loadPods();
            } else if (tabName === 'deployments') {
                document.getElementById('deployments-view').style.display = 'block';
                loadDeployments();
            } else if (tabName === 'statefulsets') {
                document.getElementById('statefulsets-view').style.display = 'block';
                loadStatefulSets();
            } else if (tabName === 'daemonsets') {
                document.getElementById('daemonsets-view').style.display = 'block';
                loadDaemonSets();
            } else if (tabName === 'services') {
                document.getElementById('services-view').style.display = 'block';
                loadServices();
            } else if (tabName === 'ingresses') {
                document.getElementById('ingresses-view').style.display = 'block';
                loadIngresses();
            } else if (tabName === 'cronjobs') {
                document.getElementById('cronjobs-view').style.display = 'block';
                loadCronJobs();
            } else if (tabName === 'jobs') {
                document.getElementById('jobs-view').style.display = 'block';
                loadJobs();
            } else if (tabName === 'nodes') {
                document.getElementById('nodes-view').style.display = 'block';
                loadNodes();
            } else if (tabName === 'configmaps') {
                document.getElementById('configmaps-view').style.display = 'block';
                loadConfigMaps();
            } else if (tabName === 'secrets') {
                // Secrets view placeholder - to be implemented
                console.log('Secrets view not yet implemented');
            } else if (tabName === 'security') {
                document.getElementById('security-view').style.display = 'block';
                loadSecurity();
            } else if (tabName === 'helm') {
                document.getElementById('helm-view').style.display = 'block';
                loadHelmReleases();
            } else if (tabName === 'kustomize') {
                document.getElementById('kustomize-view').style.display = 'block';
                loadKustomizeResources();
            } else if (tabName === 'argocd') {
                document.getElementById('argocd-view').style.display = 'block';
                loadArgoCDApps();
            } else if (tabName === 'flux') {
                document.getElementById('flux-view').style.display = 'block';
                loadFluxResources();
            }
        }

        // Update metrics
        function updateMetrics(data) {
            document.getElementById('cpu-value').textContent = data.cpu.toFixed(1) + '%';
            document.getElementById('memory-value').textContent = data.memory.toFixed(1) + '%';
            document.getElementById('pods-value').textContent = data.pods + '/15';
            document.getElementById('nodes-value').textContent = data.nodes;

            // Update cluster name in navbar
            if (data.clusterName) {
                document.getElementById('cluster-name').textContent = data.clusterName;
            }

            // Update sparklines
            metricsHistory.cpu.shift();
            metricsHistory.cpu.push(data.cpu);
            metricsHistory.memory.shift();
            metricsHistory.memory.push(data.memory);

            drawSparkline('cpu-sparkline', metricsHistory.cpu, '#06b6d4');
            drawSparkline('memory-sparkline', metricsHistory.memory, '#a855f7');

            // Update pod bars
            const podBars = document.getElementById('pods-bars');
            podBars.innerHTML = '';
            for (let i = 0; i < 15; i++) {
                const bar = document.createElement('div');
                bar.style.width = '8px';
                bar.style.height = '24px';
                bar.style.borderRadius = '2px';
                bar.style.background = i < data.pods ? '#22c55e' : '#334155';
                podBars.appendChild(bar);
            }
        }

        // Draw sparkline
        function drawSparkline(id, data, color) {
            const svg = document.getElementById(id);
            const width = svg.clientWidth;
            const height = 40;
            const max = Math.max(...data, 100);

            const points = data.map((v, i) => {
                const x = (i / (data.length - 1)) * width;
                const y = height - (v / max * height);
                return x + ',' + y;
            }).join(' ');

            svg.innerHTML = '<polyline fill="none" stroke="' + color + '" stroke-width="2" points="' + points + '" />';
        }

        // Load topology
        function loadTopology() {
            fetch('/api/topology')
                .then(r => r.json())
                .then(data => {
                    drawTopology(data);
                });
        }

        // Draw topology with D3.js
        function drawTopology(data) {
            const svg = d3.select('#topology');
            svg.selectAll('*').remove();

            const width = document.getElementById('topology').clientWidth;
            const height = 600;

            const simulation = d3.forceSimulation(data.nodes)
                .force('link', d3.forceLink(data.links).id(d => d.id).distance(150))
                .force('charge', d3.forceManyBody().strength(-500))
                .force('center', d3.forceCenter(width / 2, height / 2));

            const link = svg.append('g')
                .selectAll('line')
                .data(data.links)
                .join('line')
                .attr('stroke', '#475569')
                .attr('stroke-width', 2);

            const node = svg.append('g')
                .selectAll('circle')
                .data(data.nodes)
                .join('circle')
                .attr('r', 20)
                .attr('fill', d => d.group === 1 ? '#f97316' : '#10b981')
                .attr('stroke', '#fff')
                .attr('stroke-width', 2)
                .call(d3.drag()
                    .on('start', dragstarted)
                    .on('drag', dragged)
                    .on('end', dragended));

            const label = svg.append('g')
                .selectAll('text')
                .data(data.nodes)
                .join('text')
                .text(d => d.name)
                .attr('font-size', 12)
                .attr('fill', 'white')
                .attr('text-anchor', 'middle')
                .attr('dy', 35);

            simulation.on('tick', () => {
                link
                    .attr('x1', d => d.source.x)
                    .attr('y1', d => d.source.y)
                    .attr('x2', d => d.target.x)
                    .attr('y2', d => d.target.y);

                node
                    .attr('cx', d => d.x)
                    .attr('cy', d => d.y);

                label
                    .attr('x', d => d.x)
                    .attr('y', d => d.y);
            });

            function dragstarted(event, d) {
                if (!event.active) simulation.alphaTarget(0.3).restart();
                d.fx = d.x;
                d.fy = d.y;
            }

            function dragged(event, d) {
                d.fx = event.x;
                d.fy = event.y;
            }

            function dragended(event, d) {
                if (!event.active) simulation.alphaTarget(0);
                d.fx = null;
                d.fy = null;
            }
        }

        // Load pods
        function loadPods() {
            fetch('/api/pods?namespace=' + currentNamespace)
                .then(r => r.json())
                .then(pods => {
                    podsData = pods;
                    displayPods(pods);
                });
        }

        // Load deployments
        function loadDeployments() {
            fetch('/api/deployments?namespace=' + currentNamespace)
                .then(r => r.json())
                .then(deps => {
                    deploymentsData = deps;
                    displayDeployments(deps);
                });
        }

        // Load services
        function loadServices() {
            fetch('/api/services?namespace=' + currentNamespace)
                .then(r => r.json())
                .then(svcs => {
                    servicesData = svcs;
                    displayServices(svcs);
                });
        }

        // Load statefulsets
        function loadStatefulSets() {
            fetch('/api/statefulsets?namespace=' + currentNamespace)
                .then(r => r.json())
                .then(ssets => {
                    statefulSetsData = ssets;
                    displayStatefulSets(ssets);
                });
        }

        // Load daemonsets
        function loadDaemonSets() {
            fetch('/api/daemonsets?namespace=' + currentNamespace)
                .then(r => r.json())
                .then(dsets => {
                    daemonSetsData = dsets;
                    displayDaemonSets(dsets);
                });
        }

        // Load cronjobs
        function loadCronJobs() {
            fetch('/api/cronjobs?namespace=' + currentNamespace)
                .then(r => r.json())
                .then(cjs => {
                    cronJobsData = cjs;
                    displayCronJobs(cjs);
                });
        }

        // Load jobs
        function loadJobs() {
            fetch('/api/jobs?namespace=' + currentNamespace)
                .then(r => r.json())
                .then(jobs => {
                    jobsData = jobs;
                    displayJobs(jobs);
                });
        }

        // Load nodes
        function loadNodes() {
            fetch('/api/nodes')
                .then(r => r.json())
                .then(nodes => {
                    nodesData = nodes;
                    displayNodes(nodes);
                });
        }

        // Load resource overview
        function loadResourceOverview() {
            Promise.all([
                fetch('/api/pods').then(r => r.json()),
                fetch('/api/deployments').then(r => r.json()),
                fetch('/api/services').then(r => r.json())
            ]).then(([pods, deployments, services]) => {
                const overview = document.getElementById('resources-overview');

                const runningPods = pods.filter(p => p.status === 'Running').length;
                const pendingPods = pods.filter(p => p.status === 'Pending').length;
                const failedPods = pods.filter(p => p.status === 'Failed').length;

                const readyDeployments = deployments.filter(d => {
                    const parts = d.ready.split('/');
                    return parts[0] === parts[1];
                }).length;

                overview.innerHTML = '<div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5rem;">' +
                    '<div onclick="switchMainTab(\'workloads\'); switchTab(\'pods\');" style="padding: 1.5rem; background: rgba(6, 182, 212, 0.1); border: 1px solid rgba(6, 182, 212, 0.3); border-radius: 8px; cursor: pointer; transition: transform 0.2s;" onmouseover="this.style.transform=\'scale(1.02)\'" onmouseout="this.style.transform=\'scale(1)\'">' +
                        '<div style="font-size: 0.875rem; color: #94a3b8; margin-bottom: 0.5rem;">Total Pods</div>' +
                        '<div style="font-size: 2rem; font-weight: bold; color: #06b6d4; margin-bottom: 0.5rem;">' + pods.length + '</div>' +
                        '<div style="display: flex; gap: 1rem; font-size: 0.875rem;">' +
                            '<span style="color: #22c55e;">‚óè ' + runningPods + ' Running</span>' +
                            (pendingPods > 0 ? '<span style="color: #eab308;">‚óè ' + pendingPods + ' Pending</span>' : '') +
                            (failedPods > 0 ? '<span style="color: #ef4444;">‚óè ' + failedPods + ' Failed</span>' : '') +
                        '</div>' +
                    '</div>' +

                    '<div onclick="switchMainTab(\'workloads\'); switchTab(\'deployments\');" style="padding: 1.5rem; background: rgba(249, 115, 22, 0.1); border: 1px solid rgba(249, 115, 22, 0.3); border-radius: 8px; cursor: pointer; transition: transform 0.2s;" onmouseover="this.style.transform=\'scale(1.02)\'" onmouseout="this.style.transform=\'scale(1)\'">' +
                        '<div style="font-size: 0.875rem; color: #94a3b8; margin-bottom: 0.5rem;">Deployments</div>' +
                        '<div style="font-size: 2rem; font-weight: bold; color: #f97316; margin-bottom: 0.5rem;">' + deployments.length + '</div>' +
                        '<div style="font-size: 0.875rem; color: #22c55e;">‚úì ' + readyDeployments + ' Ready</div>' +
                    '</div>' +

                    '<div onclick="switchMainTab(\'network\'); switchTab(\'services\');" style="padding: 1.5rem; background: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 8px; cursor: pointer; transition: transform 0.2s;" onmouseover="this.style.transform=\'scale(1.02)\'" onmouseout="this.style.transform=\'scale(1)\'">' +
                        '<div style="font-size: 0.875rem; color: #94a3b8; margin-bottom: 0.5rem;">Services</div>' +
                        '<div style="font-size: 2rem; font-weight: bold; color: #22c55e; margin-bottom: 0.5rem;">' + services.length + '</div>' +
                        '<div style="font-size: 0.875rem; color: #94a3b8;">' +
                            services.filter(s => s.type === 'LoadBalancer').length + ' LoadBalancer, ' +
                            services.filter(s => s.type === 'ClusterIP').length + ' ClusterIP' +
                        '</div>' +
                    '</div>' +

                    '<div style="padding: 1.5rem; background: rgba(168, 85, 247, 0.1); border: 1px solid rgba(168, 85, 247, 0.3); border-radius: 8px;">' +
                        '<div style="font-size: 0.875rem; color: #94a3b8; margin-bottom: 0.5rem;">Cluster Health</div>' +
                        '<div style="font-size: 2rem; font-weight: bold; color: #a855f7; margin-bottom: 0.5rem;">95%</div>' +
                        '<div style="font-size: 0.875rem; color: #22c55e;">‚úì All systems operational</div>' +
                    '</div>' +
                '</div>';
            }).catch(err => {
                document.getElementById('resources-overview').innerHTML =
                    '<div style="padding: 2rem; text-align: center; color: #ef4444;">' +
                    'Failed to load resource overview: ' + err.message +
                    '</div>';
            });
        }

        // Load ingresses
        function loadIngresses() {
            fetch('/api/ingresses?namespace=' + currentNamespace)
                .then(r => r.json())
                .then(ingresses => {
                    ingressesData = ingresses;
                    displayIngresses(ingresses);
                });
        }

        // Load configmaps
        function loadConfigMaps() {
            fetch('/api/configmaps?namespace=' + currentNamespace)
                .then(r => r.json())
                .then(cms => {
                    configMapsData = cms;
                    displayConfigMaps(cms);
                });
        }

        // Load resource map
        function loadResourceMap() {
            fetch('/api/resourcemap')
                .then(r => r.json())
                .then(data => {
                    drawResourceMap(data);
                });
        }

        // Security analysis data
        let securityData = { findings: [], summary: {}, score: 100 };
        let currentSecurityFilter = 'all';

        // Load security summary for dashboard
        function loadDashboardSecuritySummary() {
            fetch('/api/security?namespace=_all')
                .then(r => r.json())
                .then(data => {
                    if (data.success) {
                        const score = data.score;
                        let scoreColor = '#22c55e'; // green
                        if (score < 50) scoreColor = '#ef4444'; // red
                        else if (score < 70) scoreColor = '#f97316'; // orange
                        else if (score < 85) scoreColor = '#eab308'; // yellow

                        document.getElementById('dashboard-security-score').innerHTML = score;
                        document.getElementById('dashboard-security-score').style.color = scoreColor;
                        document.getElementById('dashboard-critical-count').textContent = data.summary.critical || 0;
                        document.getElementById('dashboard-high-count').textContent = data.summary.high || 0;
                        document.getElementById('dashboard-medium-count').textContent = data.summary.medium || 0;
                        document.getElementById('dashboard-low-count').textContent = data.summary.low || 0;
                    }
                })
                .catch(err => {
                    console.log('Failed to load dashboard security summary:', err);
                });
        }

        // Load security analysis
        function loadSecurity() {
            const ns = document.getElementById('namespace-selector').value;
            const namespaceParam = ns === 'All Namespaces' ? '_all' : (ns || 'default');

            document.getElementById('security-findings').innerHTML = '<div style="text-align: center; padding: 3rem; color: #64748b;"><div class="loading-spinner" style="margin: 0 auto 1rem;"></div>Analyzing security best practices...</div>';

            fetch('/api/security?namespace=' + namespaceParam)
                .then(r => r.json())
                .then(data => {
                    if (data.success) {
                        securityData = data;
                        displaySecuritySummary(data);
                        displaySecurityFindings(data.findings);
                    }
                })
                .catch(err => {
                    document.getElementById('security-findings').innerHTML = '<div style="text-align: center; padding: 3rem; color: #ef4444;">Error loading security analysis: ' + err.message + '</div>';
                });
        }

        // Display security summary
        function displaySecuritySummary(data) {
            const score = data.score;
            let scoreColor = '#22c55e'; // green
            if (score < 50) scoreColor = '#ef4444'; // red
            else if (score < 70) scoreColor = '#f97316'; // orange
            else if (score < 85) scoreColor = '#eab308'; // yellow

            document.getElementById('security-score').innerHTML = score + '<span style="font-size: 1rem; color: #94a3b8;">/100</span>';
            document.getElementById('security-score').style.color = scoreColor;

            document.getElementById('security-critical').textContent = data.summary.critical || 0;
            document.getElementById('security-high').textContent = data.summary.high || 0;
            document.getElementById('security-medium').textContent = data.summary.medium || 0;
            document.getElementById('security-low').textContent = data.summary.low || 0;
        }

        // Display security findings
        function displaySecurityFindings(findings) {
            const container = document.getElementById('security-findings');

            if (!findings || findings.length === 0) {
                container.innerHTML = '<div style="text-align: center; padding: 3rem; color: #22c55e;"><div style="font-size: 3rem; margin-bottom: 1rem;">‚úÖ</div><p style="font-size: 1.25rem; font-weight: 600;">Excellent! No security issues found.</p><p style="color: #94a3b8;">Your cluster follows security best practices.</p></div>';
                return;
            }

            // Apply current filter
            let filtered = findings;
            const categoryFilter = document.getElementById('security-category-filter').value;

            if (currentSecurityFilter !== 'all') {
                filtered = filtered.filter(f => f.severity === currentSecurityFilter);
            }
            if (categoryFilter) {
                filtered = filtered.filter(f => f.category === categoryFilter);
            }

            if (filtered.length === 0) {
                container.innerHTML = '<div style="text-align: center; padding: 2rem; color: #64748b;">No findings match the current filter.</div>';
                return;
            }

            const severityColors = {
                critical: { bg: 'rgba(239, 68, 68, 0.15)', border: 'rgba(239, 68, 68, 0.4)', text: '#ef4444', icon: 'üî¥' },
                high: { bg: 'rgba(249, 115, 22, 0.15)', border: 'rgba(249, 115, 22, 0.4)', text: '#f97316', icon: 'üü†' },
                medium: { bg: 'rgba(234, 179, 8, 0.15)', border: 'rgba(234, 179, 8, 0.4)', text: '#eab308', icon: 'üü°' },
                low: { bg: 'rgba(34, 197, 94, 0.15)', border: 'rgba(34, 197, 94, 0.4)', text: '#22c55e', icon: 'üü¢' }
            };

            const categoryIcons = {
                'security-context': 'üîê',
                'network-policy': 'üåê',
                'ingress-ports': 'üö™',
                'ingress-tls': 'üîí',
                'service-exposure': 'üì°'
            };

            container.innerHTML = filtered.map(finding => {
                const colors = severityColors[finding.severity] || severityColors.medium;
                const catIcon = categoryIcons[finding.category] || 'üìã';

                return '<div style="background: ' + colors.bg + '; border: 1px solid ' + colors.border + '; border-radius: 8px; padding: 1rem; cursor: pointer;" onclick="this.querySelector(\'.finding-details\').style.display = this.querySelector(\'.finding-details\').style.display === \'none\' ? \'block\' : \'none\'">' +
                    '<div style="display: flex; align-items: flex-start; gap: 1rem;">' +
                        '<div style="font-size: 1.5rem;">' + colors.icon + '</div>' +
                        '<div style="flex: 1;">' +
                            '<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">' +
                                '<span style="color: ' + colors.text + '; font-weight: 600; font-size: 0.875rem; text-transform: uppercase;">' + finding.severity + '</span>' +
                                '<span style="color: #64748b; font-size: 0.75rem;">' + catIcon + ' ' + finding.category.replace(/-/g, ' ') + '</span>' +
                            '</div>' +
                            '<div style="font-weight: 600; color: #f1f5f9; margin-bottom: 0.25rem;">' + finding.title + '</div>' +
                            '<div style="color: #94a3b8; font-size: 0.875rem;">' +
                                '<span style="background: #334155; padding: 0.125rem 0.5rem; border-radius: 4px; margin-right: 0.5rem;">' + finding.resource + '</span>' +
                                '<span style="color: #06b6d4;">' + finding.name + '</span>' +
                                '<span style="color: #64748b;"> in </span>' +
                                '<span style="color: #a855f7;">' + finding.namespace + '</span>' +
                            '</div>' +
                            '<div class="finding-details" style="display: none; margin-top: 1rem; padding-top: 1rem; border-top: 1px solid ' + colors.border + ';">' +
                                '<div style="margin-bottom: 0.75rem;">' +
                                    '<div style="color: #94a3b8; font-size: 0.75rem; text-transform: uppercase; margin-bottom: 0.25rem;">Description</div>' +
                                    '<div style="color: #e2e8f0; font-size: 0.875rem;">' + finding.description + '</div>' +
                                '</div>' +
                                '<div>' +
                                    '<div style="color: #94a3b8; font-size: 0.75rem; text-transform: uppercase; margin-bottom: 0.25rem;">Remediation</div>' +
                                    '<div style="color: #22c55e; font-size: 0.875rem; background: rgba(34, 197, 94, 0.1); padding: 0.5rem; border-radius: 4px;">' + finding.remediation + '</div>' +
                                '</div>' +
                            '</div>' +
                        '</div>' +
                    '</div>' +
                '</div>';
            }).join('');
        }

        // Filter security findings by severity
        function filterSecurityFindings(severity) {
            if (severity) {
                currentSecurityFilter = severity;
            }

            // Update button styles
            document.querySelectorAll('[id^="sec-filter-"]').forEach(btn => {
                btn.style.background = '#475569';
            });
            const activeBtn = document.getElementById('sec-filter-' + currentSecurityFilter);
            if (activeBtn) {
                activeBtn.style.background = '#06b6d4';
            }

            displaySecurityFindings(securityData.findings);
        }

        // Helm releases data
        let helmData = { releases: [] };

        // Load Helm releases
        function loadHelmReleases() {
            const namespace = currentNamespace;
            fetch(`/api/plugins/helm/releases?namespace=${encodeURIComponent(namespace)}`)
                .then(r => r.json())
                .then(data => {
                    if (data.success) {
                        helmData = data;
                        displayHelmSummary(data);
                        displayHelmReleases(data.releases);
                    } else {
                        document.getElementById('helm-releases-body').innerHTML = `
                            <tr>
                                <td colspan="6" style="text-align: center; padding: 2rem; color: #ef4444;">
                                    ${data.error || 'Failed to load Helm releases'}
                                </td>
                            </tr>`;
                    }
                })
                .catch(err => {
                    document.getElementById('helm-releases-body').innerHTML = `
                        <tr>
                            <td colspan="6" style="text-align: center; padding: 2rem; color: #ef4444;">
                                Error: ${err.message}
                            </td>
                        </tr>`;
                });
        }

        // Display Helm summary stats
        function displayHelmSummary(data) {
            document.getElementById('helm-count').textContent = data.count || 0;

            let deployed = 0, other = 0;
            if (data.releases) {
                data.releases.forEach(r => {
                    if (r.status === 'deployed') deployed++;
                    else other++;
                });
            }
            document.getElementById('helm-deployed').textContent = deployed;
            document.getElementById('helm-other').textContent = other;
        }

        // Display Helm releases in table
        function displayHelmReleases(releases) {
            const tbody = document.getElementById('helm-releases-body');

            if (!releases || releases.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="6" style="text-align: center; padding: 3rem; color: #64748b;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">‚éà</div>
                            <p>No Helm releases found in this namespace</p>
                            <p style="font-size: 0.875rem; margin-top: 0.5rem;">Deploy a Helm chart to see it here</p>
                        </td>
                    </tr>`;
                return;
            }

            tbody.innerHTML = releases.map(release => {
                const statusColor = release.status === 'deployed' ? '#22c55e' :
                                   release.status === 'failed' ? '#ef4444' :
                                   release.status === 'pending' ? '#eab308' : '#94a3b8';
                const statusBg = release.status === 'deployed' ? 'rgba(34, 197, 94, 0.15)' :
                                release.status === 'failed' ? 'rgba(239, 68, 68, 0.15)' :
                                release.status === 'pending' ? 'rgba(234, 179, 8, 0.15)' : 'rgba(148, 163, 184, 0.15)';

                return `
                    <tr>
                        <td>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span style="font-size: 1.25rem;">‚éà</span>
                                <span style="font-weight: 600; color: #f1f5f9;">${release.name}</span>
                            </div>
                        </td>
                        <td><span style="color: #94a3b8;">${release.namespace}</span></td>
                        <td><span style="color: #06b6d4; font-weight: 500;">${release.revision}</span></td>
                        <td>
                            <span style="background: ${statusBg}; color: ${statusColor}; padding: 0.25rem 0.75rem; border-radius: 4px; font-size: 0.75rem; font-weight: 600; text-transform: uppercase;">
                                ${release.status}
                            </span>
                        </td>
                        <td><span style="color: #94a3b8; font-size: 0.875rem;">${release.updated}</span></td>
                        <td>
                            <button onclick="viewHelmHistory('${release.name}', '${release.namespace}')" class="btn" style="background: #475569; padding: 0.4rem 0.75rem; font-size: 0.75rem;" title="View History">
                                History
                            </button>
                        </td>
                    </tr>`;
            }).join('');
        }

        // Filter Helm releases
        function filterHelmReleases() {
            const searchTerm = document.getElementById('helm-search').value.toLowerCase();

            if (!helmData.releases) return;

            const filtered = helmData.releases.filter(r =>
                r.name.toLowerCase().includes(searchTerm) ||
                r.namespace.toLowerCase().includes(searchTerm) ||
                r.status.toLowerCase().includes(searchTerm)
            );

            displayHelmReleases(filtered);
        }

        // View Helm release history
        function viewHelmHistory(name, namespace) {
            fetch(`/api/plugins/helm/release?name=${encodeURIComponent(name)}&namespace=${encodeURIComponent(namespace)}`)
                .then(r => r.json())
                .then(data => {
                    if (data.success && data.history) {
                        const historyHtml = data.history.map(h => `
                            <tr>
                                <td>${h.revision}</td>
                                <td>
                                    <span style="background: ${h.status === 'deployed' ? 'rgba(34, 197, 94, 0.15)' : 'rgba(148, 163, 184, 0.15)'};
                                          color: ${h.status === 'deployed' ? '#22c55e' : '#94a3b8'};
                                          padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem;">
                                        ${h.status}
                                    </span>
                                </td>
                                <td>${h.updated}</td>
                            </tr>
                        `).join('');

                        showGenericModal('Helm Release History: ' + name, `
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Revision</th>
                                        <th>Status</th>
                                        <th>Updated</th>
                                    </tr>
                                </thead>
                                <tbody>${historyHtml}</tbody>
                            </table>
                        `);
                    }
                });
        }

        // Show generic modal
        function showGenericModal(title, content) {
            document.getElementById('generic-modal-title').textContent = title;
            document.getElementById('generic-modal-content').innerHTML = content;
            document.getElementById('generic-modal').style.display = 'block';
        }

        // Close generic modal
        function closeGenericModal() {
            document.getElementById('generic-modal').style.display = 'none';
        }

        // =====================
        // Kustomize Functions
        // =====================
        let kustomizeData = { resources: [] };

        function loadKustomizeResources() {
            const namespace = currentNamespace;
            fetch(`/api/plugins/kustomize/resources?namespace=${encodeURIComponent(namespace)}`)
                .then(r => r.json())
                .then(data => {
                    if (data.success) {
                        kustomizeData = data;
                        document.getElementById('kustomize-count').textContent = data.count || 0;
                        displayKustomizeResources(data.resources);
                    } else {
                        document.getElementById('kustomize-resources-body').innerHTML = `
                            <tr>
                                <td colspan="4" style="text-align: center; padding: 2rem; color: #ef4444;">
                                    ${data.error || 'Failed to load Kustomize resources'}
                                </td>
                            </tr>`;
                    }
                })
                .catch(err => {
                    document.getElementById('kustomize-resources-body').innerHTML = `
                        <tr>
                            <td colspan="4" style="text-align: center; padding: 2rem; color: #ef4444;">
                                Error: ${err.message}
                            </td>
                        </tr>`;
                });
        }

        function displayKustomizeResources(resources) {
            const tbody = document.getElementById('kustomize-resources-body');

            if (!resources || resources.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="4" style="text-align: center; padding: 3rem; color: #64748b;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">üì¶</div>
                            <p>No Kustomize managed resources found</p>
                            <p style="font-size: 0.875rem; margin-top: 0.5rem;">Resources with label app.kubernetes.io/managed-by=kustomize will appear here</p>
                        </td>
                    </tr>`;
                return;
            }

            const kindIcons = {
                'Deployment': 'üöÄ',
                'Service': 'üåê',
                'ConfigMap': '‚öôÔ∏è',
                'Secret': 'üîê',
                'default': 'üì¶'
            };

            tbody.innerHTML = resources.map(res => `
                <tr>
                    <td>
                        <span style="margin-right: 0.5rem;">${kindIcons[res.kind] || kindIcons['default']}</span>
                        <span style="color: #8b5cf6; font-weight: 500;">${res.kind}</span>
                    </td>
                    <td><span style="font-weight: 600; color: #f1f5f9;">${res.name}</span></td>
                    <td><span style="color: #94a3b8;">${res.namespace}</span></td>
                    <td><span style="color: #94a3b8;">${res.age}</span></td>
                </tr>
            `).join('');
        }

        function filterKustomizeResources() {
            const searchTerm = document.getElementById('kustomize-search').value.toLowerCase();
            if (!kustomizeData.resources) return;

            const filtered = kustomizeData.resources.filter(r =>
                r.name.toLowerCase().includes(searchTerm) ||
                r.namespace.toLowerCase().includes(searchTerm) ||
                r.kind.toLowerCase().includes(searchTerm)
            );
            displayKustomizeResources(filtered);
        }

        // =====================
        // ArgoCD Functions
        // =====================
        let argocdData = { apps: [] };

        function loadArgoCDApps() {
            const namespace = currentNamespace;
            fetch(`/api/plugins/argocd/apps?namespace=${encodeURIComponent(namespace)}`)
                .then(r => r.json())
                .then(data => {
                    if (data.success) {
                        argocdData = data;

                        // Show/hide not installed message
                        if (!data.installed) {
                            document.getElementById('argocd-not-installed').style.display = 'block';
                            document.getElementById('argocd-count').textContent = '-';
                            document.getElementById('argocd-synced').textContent = '-';
                            document.getElementById('argocd-healthy').textContent = '-';
                        } else {
                            document.getElementById('argocd-not-installed').style.display = 'none';
                            document.getElementById('argocd-count').textContent = data.count || 0;

                            let synced = 0, healthy = 0;
                            if (data.apps) {
                                data.apps.forEach(a => {
                                    if (a.syncStatus === 'Synced') synced++;
                                    if (a.health === 'Healthy') healthy++;
                                });
                            }
                            document.getElementById('argocd-synced').textContent = synced;
                            document.getElementById('argocd-healthy').textContent = healthy;
                        }

                        displayArgoCDApps(data.apps);
                    } else {
                        document.getElementById('argocd-apps-body').innerHTML = `
                            <tr>
                                <td colspan="7" style="text-align: center; padding: 2rem; color: #ef4444;">
                                    ${data.error || 'Failed to load ArgoCD applications'}
                                </td>
                            </tr>`;
                    }
                })
                .catch(err => {
                    document.getElementById('argocd-apps-body').innerHTML = `
                        <tr>
                            <td colspan="7" style="text-align: center; padding: 2rem; color: #ef4444;">
                                Error: ${err.message}
                            </td>
                        </tr>`;
                });
        }

        function displayArgoCDApps(apps) {
            const tbody = document.getElementById('argocd-apps-body');

            if (!apps || apps.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="7" style="text-align: center; padding: 3rem; color: #64748b;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">ü¶ë</div>
                            <p>No ArgoCD applications found</p>
                        </td>
                    </tr>`;
                return;
            }

            tbody.innerHTML = apps.map(app => {
                const syncColor = app.syncStatus === 'Synced' ? '#22c55e' :
                                 app.syncStatus === 'OutOfSync' ? '#eab308' : '#94a3b8';
                const syncBg = app.syncStatus === 'Synced' ? 'rgba(34, 197, 94, 0.15)' :
                              app.syncStatus === 'OutOfSync' ? 'rgba(234, 179, 8, 0.15)' : 'rgba(148, 163, 184, 0.15)';
                const healthColor = app.health === 'Healthy' ? '#22c55e' :
                                   app.health === 'Degraded' ? '#ef4444' :
                                   app.health === 'Progressing' ? '#06b6d4' : '#94a3b8';
                const healthBg = app.health === 'Healthy' ? 'rgba(34, 197, 94, 0.15)' :
                                app.health === 'Degraded' ? 'rgba(239, 68, 68, 0.15)' :
                                app.health === 'Progressing' ? 'rgba(6, 182, 212, 0.15)' : 'rgba(148, 163, 184, 0.15)';

                // Truncate repo URL
                let repoDisplay = app.repoURL || '-';
                if (repoDisplay.length > 40) {
                    repoDisplay = repoDisplay.substring(0, 37) + '...';
                }

                return `
                    <tr>
                        <td>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span style="font-size: 1.25rem;">ü¶ë</span>
                                <span style="font-weight: 600; color: #f1f5f9;">${app.name}</span>
                            </div>
                        </td>
                        <td><span style="color: #94a3b8;">${app.namespace}</span></td>
                        <td><span style="color: #f97316;">${app.project}</span></td>
                        <td>
                            <span style="background: ${syncBg}; color: ${syncColor}; padding: 0.25rem 0.75rem; border-radius: 4px; font-size: 0.75rem; font-weight: 600;">
                                ${app.syncStatus}
                            </span>
                        </td>
                        <td>
                            <span style="background: ${healthBg}; color: ${healthColor}; padding: 0.25rem 0.75rem; border-radius: 4px; font-size: 0.75rem; font-weight: 600;">
                                ${app.health}
                            </span>
                        </td>
                        <td><span style="color: #94a3b8; font-size: 0.8rem;" title="${app.repoURL}">${repoDisplay}</span></td>
                        <td><span style="color: #94a3b8;">${app.age}</span></td>
                    </tr>`;
            }).join('');
        }

        function filterArgoCDApps() {
            const searchTerm = document.getElementById('argocd-search').value.toLowerCase();
            if (!argocdData.apps) return;

            const filtered = argocdData.apps.filter(a =>
                a.name.toLowerCase().includes(searchTerm) ||
                a.namespace.toLowerCase().includes(searchTerm) ||
                a.project.toLowerCase().includes(searchTerm) ||
                a.syncStatus.toLowerCase().includes(searchTerm) ||
                a.health.toLowerCase().includes(searchTerm)
            );
            displayArgoCDApps(filtered);
        }

        // =====================
        // Flux Functions
        // =====================
        let fluxData = { resources: [] };

        function loadFluxResources() {
            const namespace = currentNamespace;
            fetch(`/api/plugins/flux/resources?namespace=${encodeURIComponent(namespace)}`)
                .then(r => r.json())
                .then(data => {
                    if (data.success) {
                        fluxData = data;

                        // Show/hide not installed message
                        if (!data.installed) {
                            document.getElementById('flux-not-installed').style.display = 'block';
                            document.getElementById('flux-count').textContent = '-';
                            document.getElementById('flux-ready').textContent = '-';
                            document.getElementById('flux-not-ready').textContent = '-';
                        } else {
                            document.getElementById('flux-not-installed').style.display = 'none';
                            document.getElementById('flux-count').textContent = data.count || 0;

                            let ready = 0, notReady = 0;
                            if (data.resources) {
                                data.resources.forEach(r => {
                                    if (r.ready === 'True') ready++;
                                    else notReady++;
                                });
                            }
                            document.getElementById('flux-ready').textContent = ready;
                            document.getElementById('flux-not-ready').textContent = notReady;
                        }

                        displayFluxResources(data.resources);
                    } else {
                        document.getElementById('flux-resources-body').innerHTML = `
                            <tr>
                                <td colspan="6" style="text-align: center; padding: 2rem; color: #ef4444;">
                                    ${data.error || 'Failed to load Flux resources'}
                                </td>
                            </tr>`;
                    }
                })
                .catch(err => {
                    document.getElementById('flux-resources-body').innerHTML = `
                        <tr>
                            <td colspan="6" style="text-align: center; padding: 2rem; color: #ef4444;">
                                Error: ${err.message}
                            </td>
                        </tr>`;
                });
        }

        function displayFluxResources(resources) {
            const tbody = document.getElementById('flux-resources-body');

            if (!resources || resources.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="6" style="text-align: center; padding: 3rem; color: #64748b;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">üîÑ</div>
                            <p>No Flux resources found</p>
                        </td>
                    </tr>`;
                return;
            }

            const kindIcons = {
                'Kustomization': 'üì¶',
                'HelmRelease': '‚éà',
                'GitRepository': 'üìÅ',
                'HelmRepository': 'üìä',
                'OCIRepository': 'üê≥',
                'default': 'üîÑ'
            };

            tbody.innerHTML = resources.map(res => {
                const readyColor = res.ready === 'True' ? '#22c55e' : '#ef4444';
                const readyBg = res.ready === 'True' ? 'rgba(34, 197, 94, 0.15)' : 'rgba(239, 68, 68, 0.15)';

                return `
                    <tr>
                        <td>
                            <span style="margin-right: 0.5rem;">${kindIcons[res.kind] || kindIcons['default']}</span>
                            <span style="color: #06b6d4; font-weight: 500;">${res.kind}</span>
                        </td>
                        <td><span style="font-weight: 600; color: #f1f5f9;">${res.name}</span></td>
                        <td><span style="color: #94a3b8;">${res.namespace}</span></td>
                        <td>
                            <span style="background: ${readyBg}; color: ${readyColor}; padding: 0.25rem 0.75rem; border-radius: 4px; font-size: 0.75rem; font-weight: 600;">
                                ${res.ready}
                            </span>
                        </td>
                        <td><span style="color: #94a3b8; font-size: 0.8rem;" title="${res.status}">${res.status || '-'}</span></td>
                        <td><span style="color: #94a3b8;">${res.age}</span></td>
                    </tr>`;
            }).join('');
        }

        function filterFluxResources() {
            const searchTerm = document.getElementById('flux-search').value.toLowerCase();
            if (!fluxData.resources) return;

            const filtered = fluxData.resources.filter(r =>
                r.name.toLowerCase().includes(searchTerm) ||
                r.namespace.toLowerCase().includes(searchTerm) ||
                r.kind.toLowerCase().includes(searchTerm) ||
                r.ready.toLowerCase().includes(searchTerm)
            );
            displayFluxResources(filtered);
        }

        // Draw resource map with D3.js
        function drawResourceMap(data) {
            const svg = d3.select('#resourcemap-svg');
            svg.selectAll('*').remove();

            const width = document.getElementById('resourcemap-svg').clientWidth;
            const height = 700;

            // Create simulation
            const simulation = d3.forceSimulation(data.nodes)
                .force('link', d3.forceLink(data.links).id(d => d.id).distance(200))
                .force('charge', d3.forceManyBody().strength(-800))
                .force('center', d3.forceCenter(width / 2, height / 2))
                .force('collision', d3.forceCollide().radius(50));

            // Add zoom behavior
            const g = svg.append('g');
            svg.call(d3.zoom()
                .scaleExtent([0.5, 3])
                .on('zoom', (event) => {
                    g.attr('transform', event.transform);
                })
            );

            // Create links
            const link = g.append('g')
                .selectAll('line')
                .data(data.links)
                .join('line')
                .attr('stroke', '#475569')
                .attr('stroke-width', 2)
                .attr('marker-end', 'url(#arrowhead)');

            // Add arrow marker
            svg.append('defs').append('marker')
                .attr('id', 'arrowhead')
                .attr('viewBox', '-0 -5 10 10')
                .attr('refX', 35)
                .attr('refY', 0)
                .attr('orient', 'auto')
                .attr('markerWidth', 8)
                .attr('markerHeight', 8)
                .append('path')
                .attr('d', 'M 0,-5 L 10 ,0 L 0,5')
                .attr('fill', '#475569');

            // Create node groups
            const node = g.append('g')
                .selectAll('g')
                .data(data.nodes)
                .join('g')
                .call(d3.drag()
                    .on('start', dragstarted)
                    .on('drag', dragged)
                    .on('end', dragended));

            // Add circles to nodes
            node.append('circle')
                .attr('r', 25)
                .attr('fill', d => d.color)
                .attr('stroke', '#fff')
                .attr('stroke-width', 3);

            // Add icons (emoji) to nodes
            node.append('text')
                .text(d => d.icon)
                .attr('text-anchor', 'middle')
                .attr('dy', '0.35em')
                .attr('font-size', '20px');

            // Add labels below nodes
            node.append('text')
                .text(d => d.name)
                .attr('text-anchor', 'middle')
                .attr('dy', 45)
                .attr('font-size', 12)
                .attr('fill', 'white')
                .attr('font-weight', 'bold');

            // Add status text
            node.append('text')
                .text(d => d.status || '')
                .attr('text-anchor', 'middle')
                .attr('dy', 60)
                .attr('font-size', 10)
                .attr('fill', '#94a3b8');

            // Simulation tick
            simulation.on('tick', () => {
                link
                    .attr('x1', d => d.source.x)
                    .attr('y1', d => d.source.y)
                    .attr('x2', d => d.target.x)
                    .attr('y2', d => d.target.y);

                node.attr('transform', d => 'translate(' + d.x + ',' + d.y + ')');
            });

            function dragstarted(event, d) {
                if (!event.active) simulation.alphaTarget(0.3).restart();
                d.fx = d.x;
                d.fy = d.y;
            }

            function dragged(event, d) {
                d.fx = event.x;
                d.fy = event.y;
            }

            function dragended(event, d) {
                if (!event.active) simulation.alphaTarget(0);
                d.fx = null;
                d.fy = null;
            }
        }

        // Current view state
        let currentResourceMapView = 'force';
        let cachedResourceMapData = null;

        // Switch between different resource map views
        function switchResourceMapView(viewType) {
            currentResourceMapView = viewType;

            // Update button styles
            document.querySelectorAll('.view-btn').forEach(btn => {
                btn.style.background = '#475569';
            });
            document.getElementById('view-' + viewType).style.background = 'linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%)';

            // Update help text
            const helpTexts = {
                'force': '<strong>üîÆ Force Graph:</strong> Drag nodes to rearrange ‚Ä¢ Scroll to zoom ‚Ä¢ Click and drag background to pan',
                'tree': '<strong>üå≥ Tree View:</strong> Hierarchical tree structure showing resource relationships ‚Ä¢ Scroll to zoom ‚Ä¢ Drag to pan',
                'cluster': '<strong>üì¶ Cluster View:</strong> Resources grouped by type in separate clusters ‚Ä¢ Drag nodes to rearrange',
                'hierarchical': '<strong>üìä Hierarchy View:</strong> Top-down hierarchical layout showing dependency flow ‚Ä¢ Scroll to zoom'
            };
            document.getElementById('resourcemap-help').innerHTML = helpTexts[viewType];

            // Redraw with cached data or fetch new
            if (cachedResourceMapData) {
                drawResourceMapView(cachedResourceMapData, viewType);
            } else {
                loadResourceMap();
            }
        }

        // Modified load function to cache data
        function loadResourceMapWithView() {
            fetch('/api/resourcemap')
                .then(r => r.json())
                .then(data => {
                    cachedResourceMapData = JSON.parse(JSON.stringify(data)); // Deep copy
                    drawResourceMapView(data, currentResourceMapView);
                });
        }

        // Draw resource map based on view type
        function drawResourceMapView(data, viewType) {
            // Deep copy to avoid mutation
            const dataCopy = JSON.parse(JSON.stringify(data));

            switch(viewType) {
                case 'force':
                    drawResourceMapForce(dataCopy);
                    break;
                case 'tree':
                    drawResourceMapTree(dataCopy);
                    break;
                case 'cluster':
                    drawResourceMapCluster(dataCopy);
                    break;
                case 'hierarchical':
                    drawResourceMapHierarchical(dataCopy);
                    break;
                default:
                    drawResourceMapForce(dataCopy);
            }
        }

        // Force-directed graph (original)
        function drawResourceMapForce(data) {
            const svg = d3.select('#resourcemap-svg');
            svg.selectAll('*').remove();

            const width = document.getElementById('resourcemap-svg').clientWidth;
            const height = 700;

            const simulation = d3.forceSimulation(data.nodes)
                .force('link', d3.forceLink(data.links).id(d => d.id).distance(200))
                .force('charge', d3.forceManyBody().strength(-800))
                .force('center', d3.forceCenter(width / 2, height / 2))
                .force('collision', d3.forceCollide().radius(50));

            const g = svg.append('g');
            svg.call(d3.zoom()
                .scaleExtent([0.3, 3])
                .on('zoom', (event) => g.attr('transform', event.transform))
            );

            // Add arrow marker
            svg.append('defs').append('marker')
                .attr('id', 'arrowhead-force')
                .attr('viewBox', '-0 -5 10 10')
                .attr('refX', 35)
                .attr('refY', 0)
                .attr('orient', 'auto')
                .attr('markerWidth', 8)
                .attr('markerHeight', 8)
                .append('path')
                .attr('d', 'M 0,-5 L 10 ,0 L 0,5')
                .attr('fill', '#475569');

            const link = g.append('g')
                .selectAll('line')
                .data(data.links)
                .join('line')
                .attr('stroke', '#475569')
                .attr('stroke-width', 2)
                .attr('marker-end', 'url(#arrowhead-force)');

            const node = g.append('g')
                .selectAll('g')
                .data(data.nodes)
                .join('g')
                .call(d3.drag()
                    .on('start', (event, d) => { if (!event.active) simulation.alphaTarget(0.3).restart(); d.fx = d.x; d.fy = d.y; })
                    .on('drag', (event, d) => { d.fx = event.x; d.fy = event.y; })
                    .on('end', (event, d) => { if (!event.active) simulation.alphaTarget(0); d.fx = null; d.fy = null; }));

            node.append('circle').attr('r', 25).attr('fill', d => d.color).attr('stroke', '#fff').attr('stroke-width', 3);
            node.append('text').text(d => d.icon).attr('text-anchor', 'middle').attr('dy', '0.35em').attr('font-size', '20px');
            node.append('text').text(d => d.name).attr('text-anchor', 'middle').attr('dy', 45).attr('font-size', 12).attr('fill', 'white').attr('font-weight', 'bold');
            node.append('text').text(d => d.status || '').attr('text-anchor', 'middle').attr('dy', 60).attr('font-size', 10).attr('fill', '#94a3b8');

            simulation.on('tick', () => {
                link.attr('x1', d => d.source.x).attr('y1', d => d.source.y).attr('x2', d => d.target.x).attr('y2', d => d.target.y);
                node.attr('transform', d => 'translate(' + d.x + ',' + d.y + ')');
            });
        }

        // Tree View - Hierarchical tree layout
        function drawResourceMapTree(data) {
            const svg = d3.select('#resourcemap-svg');
            svg.selectAll('*').remove();

            const width = document.getElementById('resourcemap-svg').clientWidth;
            const height = 700;
            const margin = { top: 40, right: 120, bottom: 40, left: 120 };

            const g = svg.append('g').attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');

            svg.call(d3.zoom()
                .scaleExtent([0.3, 3])
                .on('zoom', (event) => g.attr('transform', event.transform))
            );

            // Convert flat data to hierarchy
            const root = buildHierarchy(data);

            const treeLayout = d3.tree().size([height - margin.top - margin.bottom, width - margin.left - margin.right]);
            const treeData = treeLayout(root);

            // Draw links
            g.selectAll('.link')
                .data(treeData.links())
                .join('path')
                .attr('class', 'link')
                .attr('fill', 'none')
                .attr('stroke', '#475569')
                .attr('stroke-width', 2)
                .attr('d', d3.linkHorizontal()
                    .x(d => d.y)
                    .y(d => d.x));

            // Draw nodes
            const node = g.selectAll('.node')
                .data(treeData.descendants())
                .join('g')
                .attr('class', 'node')
                .attr('transform', d => 'translate(' + d.y + ',' + d.x + ')');

            node.append('circle')
                .attr('r', 20)
                .attr('fill', d => d.data.color || '#64748b')
                .attr('stroke', '#fff')
                .attr('stroke-width', 2);

            node.append('text')
                .text(d => d.data.icon || 'üì¶')
                .attr('text-anchor', 'middle')
                .attr('dy', '0.35em')
                .attr('font-size', '16px');

            node.append('text')
                .text(d => d.data.name)
                .attr('text-anchor', 'middle')
                .attr('dy', 35)
                .attr('font-size', 10)
                .attr('fill', 'white')
                .attr('font-weight', 'bold');
        }

        // Cluster View - Grouped by type
        function drawResourceMapCluster(data) {
            const svg = d3.select('#resourcemap-svg');
            svg.selectAll('*').remove();

            const width = document.getElementById('resourcemap-svg').clientWidth;
            const height = 700;

            const g = svg.append('g');
            svg.call(d3.zoom()
                .scaleExtent([0.3, 3])
                .on('zoom', (event) => g.attr('transform', event.transform))
            );

            // Group nodes by type
            const types = [...new Set(data.nodes.map(n => n.type))];
            const typeGroups = {};
            types.forEach((type, i) => {
                typeGroups[type] = {
                    x: (i % 3) * (width / 3) + width / 6,
                    y: Math.floor(i / 3) * (height / 2) + height / 4
                };
            });

            // Position nodes in clusters
            data.nodes.forEach(node => {
                const group = typeGroups[node.type];
                node.x = group.x + (Math.random() - 0.5) * 150;
                node.y = group.y + (Math.random() - 0.5) * 150;
            });

            // Draw cluster backgrounds
            types.forEach((type, i) => {
                const group = typeGroups[type];
                g.append('rect')
                    .attr('x', group.x - 100)
                    .attr('y', group.y - 100)
                    .attr('width', 200)
                    .attr('height', 200)
                    .attr('rx', 15)
                    .attr('fill', 'rgba(71, 85, 105, 0.2)')
                    .attr('stroke', 'rgba(100, 116, 139, 0.5)')
                    .attr('stroke-width', 2);

                g.append('text')
                    .attr('x', group.x)
                    .attr('y', group.y - 110)
                    .attr('text-anchor', 'middle')
                    .attr('fill', '#94a3b8')
                    .attr('font-size', 14)
                    .attr('font-weight', 'bold')
                    .text(type + 's');
            });

            // Create simulation with cluster forces
            const simulation = d3.forceSimulation(data.nodes)
                .force('link', d3.forceLink(data.links).id(d => d.id).distance(80).strength(0.1))
                .force('charge', d3.forceManyBody().strength(-200))
                .force('x', d3.forceX(d => typeGroups[d.type].x).strength(0.3))
                .force('y', d3.forceY(d => typeGroups[d.type].y).strength(0.3))
                .force('collision', d3.forceCollide().radius(30));

            // Add arrow marker
            svg.append('defs').append('marker')
                .attr('id', 'arrowhead-cluster')
                .attr('viewBox', '-0 -5 10 10')
                .attr('refX', 25)
                .attr('refY', 0)
                .attr('orient', 'auto')
                .attr('markerWidth', 6)
                .attr('markerHeight', 6)
                .append('path')
                .attr('d', 'M 0,-5 L 10 ,0 L 0,5')
                .attr('fill', '#475569');

            const link = g.append('g')
                .selectAll('line')
                .data(data.links)
                .join('line')
                .attr('stroke', '#475569')
                .attr('stroke-width', 1.5)
                .attr('stroke-opacity', 0.6)
                .attr('marker-end', 'url(#arrowhead-cluster)');

            const node = g.append('g')
                .selectAll('g')
                .data(data.nodes)
                .join('g')
                .call(d3.drag()
                    .on('start', (event, d) => { if (!event.active) simulation.alphaTarget(0.3).restart(); d.fx = d.x; d.fy = d.y; })
                    .on('drag', (event, d) => { d.fx = event.x; d.fy = event.y; })
                    .on('end', (event, d) => { if (!event.active) simulation.alphaTarget(0); d.fx = null; d.fy = null; }));

            node.append('circle').attr('r', 20).attr('fill', d => d.color).attr('stroke', '#fff').attr('stroke-width', 2);
            node.append('text').text(d => d.icon).attr('text-anchor', 'middle').attr('dy', '0.35em').attr('font-size', '16px');
            node.append('text').text(d => d.name).attr('text-anchor', 'middle').attr('dy', 35).attr('font-size', 9).attr('fill', 'white').attr('font-weight', 'bold');

            simulation.on('tick', () => {
                link.attr('x1', d => d.source.x).attr('y1', d => d.source.y).attr('x2', d => d.target.x).attr('y2', d => d.target.y);
                node.attr('transform', d => 'translate(' + d.x + ',' + d.y + ')');
            });
        }

        // Hierarchical View - Top-down layout
        function drawResourceMapHierarchical(data) {
            const svg = d3.select('#resourcemap-svg');
            svg.selectAll('*').remove();

            const width = document.getElementById('resourcemap-svg').clientWidth;
            const height = 700;
            const margin = { top: 60, right: 40, bottom: 60, left: 40 };

            const g = svg.append('g').attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');

            svg.call(d3.zoom()
                .scaleExtent([0.3, 3])
                .on('zoom', (event) => g.attr('transform', event.transform))
            );

            // Convert flat data to hierarchy
            const root = buildHierarchy(data);

            const treeLayout = d3.tree()
                .size([width - margin.left - margin.right, height - margin.top - margin.bottom])
                .nodeSize([80, 120]);

            const treeData = treeLayout(root);

            // Center the tree
            let x0 = Infinity, x1 = -Infinity;
            treeData.each(d => { if (d.x > x1) x1 = d.x; if (d.x < x0) x0 = d.x; });
            const dx = x1 - x0;

            g.attr('transform', 'translate(' + ((width - dx) / 2 - x0) + ',' + margin.top + ')');

            // Draw curved links
            g.selectAll('.link')
                .data(treeData.links())
                .join('path')
                .attr('class', 'link')
                .attr('fill', 'none')
                .attr('stroke', 'url(#link-gradient)')
                .attr('stroke-width', 2.5)
                .attr('d', d => {
                    return 'M' + d.source.x + ',' + d.source.y +
                           'C' + d.source.x + ',' + (d.source.y + d.target.y) / 2 +
                           ' ' + d.target.x + ',' + (d.source.y + d.target.y) / 2 +
                           ' ' + d.target.x + ',' + d.target.y;
                });

            // Add gradient for links
            const defs = svg.append('defs');
            const gradient = defs.append('linearGradient')
                .attr('id', 'link-gradient')
                .attr('gradientUnits', 'userSpaceOnUse')
                .attr('x1', '0%').attr('y1', '0%')
                .attr('x2', '0%').attr('y2', '100%');
            gradient.append('stop').attr('offset', '0%').attr('stop-color', '#06b6d4');
            gradient.append('stop').attr('offset', '100%').attr('stop-color', '#8b5cf6');

            // Draw nodes
            const node = g.selectAll('.node')
                .data(treeData.descendants())
                .join('g')
                .attr('class', 'node')
                .attr('transform', d => 'translate(' + d.x + ',' + d.y + ')');

            // Node background with glow
            node.append('circle')
                .attr('r', 28)
                .attr('fill', d => d.data.color || '#64748b')
                .attr('stroke', '#fff')
                .attr('stroke-width', 3)
                .style('filter', 'drop-shadow(0 0 8px rgba(6, 182, 212, 0.5))');

            node.append('text')
                .text(d => d.data.icon || 'üì¶')
                .attr('text-anchor', 'middle')
                .attr('dy', '0.35em')
                .attr('font-size', '20px');

            node.append('text')
                .text(d => d.data.name)
                .attr('text-anchor', 'middle')
                .attr('dy', 48)
                .attr('font-size', 11)
                .attr('fill', 'white')
                .attr('font-weight', 'bold');

            node.append('text')
                .text(d => d.data.type || '')
                .attr('text-anchor', 'middle')
                .attr('dy', 62)
                .attr('font-size', 9)
                .attr('fill', '#94a3b8');
        }

        // Helper: Build hierarchy from flat data
        function buildHierarchy(data) {
            // Create a map of nodes
            const nodeMap = {};
            data.nodes.forEach(n => {
                nodeMap[n.id] = { ...n, children: [] };
            });

            // Find root nodes (nodes with no incoming links)
            const hasParent = new Set(data.links.map(l => l.target));
            const roots = data.nodes.filter(n => !hasParent.has(n.id));

            // Build parent-child relationships
            data.links.forEach(link => {
                const sourceId = typeof link.source === 'object' ? link.source.id : link.source;
                const targetId = typeof link.target === 'object' ? link.target.id : link.target;
                if (nodeMap[sourceId] && nodeMap[targetId]) {
                    nodeMap[sourceId].children.push(nodeMap[targetId]);
                }
            });

            // Create virtual root if multiple roots
            let rootNode;
            if (roots.length === 0) {
                rootNode = { name: 'Cluster', icon: '‚ò∏Ô∏è', color: '#3b82f6', children: Object.values(nodeMap).slice(0, 5) };
            } else if (roots.length === 1) {
                rootNode = nodeMap[roots[0].id];
            } else {
                rootNode = { name: 'Cluster', icon: '‚ò∏Ô∏è', color: '#3b82f6', children: roots.map(r => nodeMap[r.id]) };
            }

            return d3.hierarchy(rootNode);
        }

        // Override loadResourceMap to use new system
        const originalLoadResourceMap = loadResourceMap;
        loadResourceMap = function() {
            fetch('/api/resourcemap')
                .then(r => r.json())
                .then(data => {
                    cachedResourceMapData = JSON.parse(JSON.stringify(data));
                    drawResourceMapView(data, currentResourceMapView);
                });
        };

        // Confirmation modal functions
        function showConfirmModal(title, message, onConfirm) {
            document.getElementById('confirm-title').textContent = title;
            document.getElementById('confirm-message').textContent = message;
            document.getElementById('confirm-modal').style.display = 'flex';

            document.getElementById('confirm-btn').onclick = function() {
                closeConfirmModal();
                onConfirm();
            };
        }

        function closeConfirmModal() {
            document.getElementById('confirm-modal').style.display = 'none';
        }

        // Action handlers
        function restartPod(name, namespace) {
            const ns = namespace || currentNamespace;
            showConfirmModal(
                'Restart Pod',
                'Are you sure you want to restart pod "' + name + '"? This will delete and recreate the pod.',
                function() {
                    fetch('/api/pod/restart?name=' + encodeURIComponent(name) + '&namespace=' + encodeURIComponent(ns), {
                        method: 'POST'
                    })
                    .then(r => r.json())
                    .then(result => {
                        if (result.success) {
                            alert('Pod "' + name + '" restarted successfully');
                            loadPods();
                        } else {
                            alert('Failed to restart pod: ' + result.error);
                        }
                    })
                    .catch(err => alert('Error: ' + err.message));
                }
            );
        }

        function deletePod(name, namespace) {
            const ns = namespace || currentNamespace;
            showConfirmModal(
                'Delete Pod',
                'Are you sure you want to delete pod "' + name + '"? This action cannot be undone.',
                function() {
                    fetch('/api/pod/delete?name=' + encodeURIComponent(name) + '&namespace=' + encodeURIComponent(ns), {
                        method: 'POST'
                    })
                    .then(r => r.json())
                    .then(result => {
                        if (result.success) {
                            alert('Pod "' + name + '" deleted successfully');
                            loadPods();
                        } else {
                            alert('Failed to delete pod: ' + result.error);
                        }
                    })
                    .catch(err => alert('Error: ' + err.message));
                }
            );
        }

        function restartDeployment(name) {
            showConfirmModal(
                'Restart Deployment',
                'Are you sure you want to restart deployment "' + name + '"? This will scale down and back up.',
                function() {
                    fetch('/api/deployment/restart?name=' + encodeURIComponent(name), {
                        method: 'POST'
                    })
                    .then(r => r.json())
                    .then(result => {
                        if (result.success) {
                            alert('Deployment "' + name + '" restarted successfully');
                            loadDeployments();
                        } else {
                            alert('Failed to restart deployment: ' + result.error);
                        }
                    })
                    .catch(err => alert('Error: ' + err.message));
                }
            );
        }

        function deleteDeployment(name) {
            showConfirmModal(
                'Delete Deployment',
                'Are you sure you want to delete deployment "' + name + '"? This will delete all associated pods.',
                function() {
                    fetch('/api/deployment/delete?name=' + encodeURIComponent(name), {
                        method: 'POST'
                    })
                    .then(r => r.json())
                    .then(result => {
                        if (result.success) {
                            alert('Deployment "' + name + '" deleted successfully');
                            loadDeployments();
                        } else {
                            alert('Failed to delete deployment: ' + result.error);
                        }
                    })
                    .catch(err => alert('Error: ' + err.message));
                }
            );
        }

        function deleteService(name, namespace) {
            showConfirmModal(
                'Delete Service',
                'Are you sure you want to delete service "' + name + '"?',
                function() {
                    fetch('/api/service/delete?name=' + encodeURIComponent(name) + '&namespace=' + encodeURIComponent(namespace || currentNamespace), {
                        method: 'POST'
                    })
                    .then(r => r.json())
                    .then(result => {
                        if (result.success) {
                            alert('Service "' + name + '" deleted successfully');
                            loadServices();
                        } else {
                            alert('Failed to delete service: ' + result.error);
                        }
                    })
                    .catch(err => alert('Error: ' + err.message));
                }
            );
        }

        function restartStatefulSet(name) {
            showConfirmModal(
                'Restart StatefulSet',
                'Are you sure you want to restart statefulset "' + name + '"? This will scale down and back up.',
                function() {
                    fetch('/api/statefulset/restart?name=' + encodeURIComponent(name), {
                        method: 'POST'
                    })
                    .then(r => r.json())
                    .then(result => {
                        if (result.success) {
                            alert('StatefulSet "' + name + '" restarted successfully');
                            loadStatefulSets();
                        } else {
                            alert('Failed to restart statefulset: ' + result.error);
                        }
                    })
                    .catch(err => alert('Error: ' + err.message));
                }
            );
        }

        function deleteStatefulSet(name) {
            showConfirmModal(
                'Delete StatefulSet',
                'Are you sure you want to delete statefulset "' + name + '"? This will delete all associated pods.',
                function() {
                    fetch('/api/statefulset/delete?name=' + encodeURIComponent(name), {
                        method: 'POST'
                    })
                    .then(r => r.json())
                    .then(result => {
                        if (result.success) {
                            alert('StatefulSet "' + name + '" deleted successfully');
                            loadStatefulSets();
                        } else {
                            alert('Failed to delete statefulset: ' + result.error);
                        }
                    })
                    .catch(err => alert('Error: ' + err.message));
                }
            );
        }

        function restartDaemonSet(name) {
            showConfirmModal(
                'Restart DaemonSet',
                'Are you sure you want to restart daemonset "' + name + '"? This will recreate all pods.',
                function() {
                    fetch('/api/daemonset/restart?name=' + encodeURIComponent(name), {
                        method: 'POST'
                    })
                    .then(r => r.json())
                    .then(result => {
                        if (result.success) {
                            alert('DaemonSet "' + name + '" restarted successfully');
                            loadDaemonSets();
                        } else {
                            alert('Failed to restart daemonset: ' + result.error);
                        }
                    })
                    .catch(err => alert('Error: ' + err.message));
                }
            );
        }

        function deleteDaemonSet(name) {
            showConfirmModal(
                'Delete DaemonSet',
                'Are you sure you want to delete daemonset "' + name + '"? This will delete all associated pods.',
                function() {
                    fetch('/api/daemonset/delete?name=' + encodeURIComponent(name), {
                        method: 'POST'
                    })
                    .then(r => r.json())
                    .then(result => {
                        if (result.success) {
                            alert('DaemonSet "' + name + '" deleted successfully');
                            loadDaemonSets();
                        } else {
                            alert('Failed to delete daemonset: ' + result.error);
                        }
                    })
                    .catch(err => alert('Error: ' + err.message));
                }
            );
        }

        function deleteCronJob(name) {
            showConfirmModal(
                'Delete CronJob',
                'Are you sure you want to delete cronjob "' + name + '"?',
                function() {
                    fetch('/api/cronjob/delete?name=' + encodeURIComponent(name), {
                        method: 'POST'
                    })
                    .then(r => r.json())
                    .then(result => {
                        if (result.success) {
                            alert('CronJob "' + name + '" deleted successfully');
                            loadCronJobs();
                        } else {
                            alert('Failed to delete cronjob: ' + result.error);
                        }
                    })
                    .catch(err => alert('Error: ' + err.message));
                }
            );
        }

        function deleteJob(name) {
            showConfirmModal(
                'Delete Job',
                'Are you sure you want to delete job "' + name + '"?',
                function() {
                    fetch('/api/job/delete?name=' + encodeURIComponent(name), {
                        method: 'POST'
                    })
                    .then(r => r.json())
                    .then(result => {
                        if (result.success) {
                            alert('Job "' + name + '" deleted successfully');
                            loadJobs();
                        } else {
                            alert('Failed to delete job: ' + result.error);
                        }
                    })
                    .catch(err => alert('Error: ' + err.message));
                }
            );
        }

        // Copy to clipboard function
        function copyToClipboard(text, label) {
            navigator.clipboard.writeText(text).then(() => {
                const toast = document.createElement('div');
                toast.textContent = label + ' copied!';
                toast.style.cssText = 'position: fixed; top: 20px; right: 20px; background: #22c55e; color: white; padding: 1rem 1.5rem; border-radius: 8px; z-index: 10001; box-shadow: 0 4px 6px rgba(0,0,0,0.3); font-weight: 600;';
                document.body.appendChild(toast);
                setTimeout(() => document.body.removeChild(toast), 2000);
            });
        }

        // Pod details functions
        let currentPodName = '';
        let currentPodNamespace = '';
        let currentPodView = 'details'; // details, yaml, describe

        function showPodDetails(name, namespace) {
            currentPodName = name;
            currentPodNamespace = namespace || currentNamespace;
            currentPodView = 'details';
            loadPodDetailsTab('details');
            document.getElementById('pod-details-modal').style.display = 'block';
        }

        function loadPodDetailsTab(tab) {
            currentPodView = tab;

            // Update tab buttons
            document.querySelectorAll('.pod-detail-tab').forEach(btn => {
                btn.style.background = btn.dataset.tab === tab ? 'linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%)' : 'rgba(71, 85, 105, 0.5)';
            });

            if (tab === 'details') {
                loadPodDetailsContent();
            } else if (tab === 'yaml') {
                loadPodYAML();
            } else if (tab === 'describe') {
                loadPodDescribe();
            }
        }

        function loadPodDetailsContent() {
            fetch('/api/pod/details?name=' + encodeURIComponent(currentPodName) + '&namespace=' + encodeURIComponent(currentPodNamespace))
                .then(r => r.json())
                .then(data => {
                    if (!data.success) {
                        alert('Error: ' + data.error);
                        return;
                    }

                    let html = '<div style="display: flex; gap: 1rem; margin-bottom: 2rem; border-bottom: 1px solid #475569; padding-bottom: 1rem;">';
                    html += '<button class="pod-detail-tab" data-tab="details" onclick="loadPodDetailsTab(\'details\')" style="padding: 0.75rem 1.5rem; border: none; border-radius: 8px; color: white; cursor: pointer; font-weight: 600; transition: all 0.3s ease; background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%);">Details</button>';
                    html += '<button class="pod-detail-tab" data-tab="yaml" onclick="loadPodDetailsTab(\'yaml\')" style="padding: 0.75rem 1.5rem; border: none; border-radius: 8px; color: white; cursor: pointer; font-weight: 600; transition: all 0.3s ease; background: rgba(71, 85, 105, 0.5);">YAML</button>';
                    html += '<button class="pod-detail-tab" data-tab="describe" onclick="loadPodDetailsTab(\'describe\')" style="padding: 0.75rem 1.5rem; border: none; border-radius: 8px; color: white; cursor: pointer; font-weight: 600; transition: all 0.3s ease; background: rgba(71, 85, 105, 0.5);">Describe</button>';
                    html += '</div>';

                    html += '<h2 style="margin-bottom: 1.5rem; color: #06b6d4; display: flex; align-items: center; gap: 0.75rem;">' +
                            'Pod: ' + data.name +
                            '<button onclick="copyToClipboard(\'' + data.name + '\', \'Pod name\')" style="padding: 0.5rem; background: rgba(6, 182, 212, 0.2); border: 1px solid #06b6d4; border-radius: 6px; color: #06b6d4; cursor: pointer; display: flex; align-items: center; font-size: 0.875rem;" title="Copy pod name">' +
                            '<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/></svg>' +
                            '</button>' +
                            '</h2>';

                    // Overview section
                    html += '<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem;">';
                    html += '<div style="background: rgba(6, 182, 212, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(6, 182, 212, 0.3);">' +
                            '<div style="color: #94a3b8; font-size: 0.875rem;">Status</div>' +
                            '<div style="color: #06b6d4; font-size: 1.25rem; font-weight: 600; margin-top: 0.25rem;">' + data.status + '</div></div>';
                    html += '<div style="background: rgba(34, 197, 94, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(34, 197, 94, 0.3);">' +
                            '<div style="color: #94a3b8; font-size: 0.875rem;">IP Address</div>' +
                            '<div style="color: #22c55e; font-size: 1.25rem; font-weight: 600; margin-top: 0.25rem; display: flex; align-items: center; gap: 0.5rem;">' +
                            (data.ip || '-') +
                            (data.ip ? '<button onclick="copyToClipboard(\'' + data.ip + '\', \'IP address\')" style="padding: 0.25rem 0.5rem; background: rgba(34, 197, 94, 0.2); border: 1px solid #22c55e; border-radius: 4px; color: #22c55e; cursor: pointer; display: flex; align-items: center; font-size: 0.75rem;" title="Copy IP"><svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/></svg></button>' : '') +
                            '</div></div>';
                    html += '<div style="background: rgba(249, 115, 22, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(249, 115, 22, 0.3);">' +
                            '<div style="color: #94a3b8; font-size: 0.875rem;">Node</div>' +
                            '<div style="color: #f97316; font-size: 1.25rem; font-weight: 600; margin-top: 0.25rem;">' + data.node + '</div></div>';
                    html += '<div style="background: rgba(168, 85, 247, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(168, 85, 247, 0.3);">' +
                            '<div style="color: #94a3b8; font-size: 0.875rem;">Age</div>' +
                            '<div style="color: #a855f7; font-size: 1.25rem; font-weight: 600; margin-top: 0.25rem;">' + data.age + '</div></div>';

                    // Add CPU/Memory metrics if available
                    if (data.metrics) {
                        html += '<div style="background: rgba(236, 72, 153, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(236, 72, 153, 0.3);">' +
                                '<div style="color: #94a3b8; font-size: 0.875rem;">CPU Usage</div>' +
                                '<div style="color: #ec4899; font-size: 1.25rem; font-weight: 600; margin-top: 0.25rem;">' + data.metrics.totalCPU + '</div>' +
                                '<div style="color: #94a3b8; font-size: 0.75rem; margin-top: 0.25rem;">Real-time</div></div>';
                        html += '<div style="background: rgba(245, 158, 11, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(245, 158, 11, 0.3);">' +
                                '<div style="color: #94a3b8; font-size: 0.875rem;">Memory Usage</div>' +
                                '<div style="color: #f59e0b; font-size: 1.25rem; font-weight: 600; margin-top: 0.25rem;">' + data.metrics.totalMemory + '</div>' +
                                '<div style="color: #94a3b8; font-size: 0.75rem; margin-top: 0.25rem;">Real-time</div></div>';
                    }

                    html += '</div>';

                    // Containers section
                    html += '<h3 style="margin: 2rem 0 1rem 0; color: #cbd5e1; border-bottom: 1px solid #475569; padding-bottom: 0.5rem;">Containers</h3>';
                    html += '<div style="overflow-x: auto;"><table style="width: 100%; border-collapse: collapse;">';
                    html += '<thead><tr style="background: rgba(71, 85, 105, 0.3);"><th style="padding: 0.75rem; text-align: left; color: #cbd5e1;">Name</th><th style="padding: 0.75rem; text-align: left; color: #cbd5e1;">Image</th><th style="padding: 0.75rem; text-align: left; color: #cbd5e1;">State</th><th style="padding: 0.75rem; text-align: left; color: #cbd5e1;">Ready</th><th style="padding: 0.75rem; text-align: left; color: #cbd5e1;">Restarts</th><th style="padding: 0.75rem; text-align: left; color: #cbd5e1;">Actions</th></tr></thead><tbody>';
                    data.containers.forEach(c => {
                        html += '<tr style="border-bottom: 1px solid #334155;">' +
                                '<td style="padding: 0.75rem; color: #e2e8f0; font-weight: 600;">' + c.name + '</td>' +
                                '<td style="padding: 0.75rem;"><div style="color: #06b6d4; font-size: 0.875rem; font-family: monospace; background: rgba(6, 182, 212, 0.1); padding: 0.25rem 0.5rem; border-radius: 4px; display: inline-block;">' + c.image + '</div></td>' +
                                '<td style="padding: 0.75rem;"><span style="color: ' + (c.state === 'Running' ? '#22c55e' : '#eab308') + ';">' + (c.state || 'Unknown') + '</span></td>' +
                                '<td style="padding: 0.75rem;"><span style="color: ' + (c.ready ? '#22c55e' : '#ef4444') + ';">' + (c.ready ? 'Yes' : 'No') + '</span></td>' +
                                '<td style="padding: 0.75rem; color: #e2e8f0;">' + (c.restartCount || 0) + '</td>' +
                                '<td style="padding: 0.75rem;">' +
                                    '<button onclick="openTerminal(\'' + data.name + '\', \'' + c.name + '\')" style="padding: 0.5rem 1rem; background: #22c55e; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.875rem; font-weight: 600;" ' + (c.state !== 'Running' ? 'disabled style="background: #64748b; cursor: not-allowed;"' : '') + '>Shell</button>' +
                                '</td>' +
                                '</tr>';
                    });
                    html += '</tbody></table></div>';

                    // Port Forward section
                    html += '<div style="margin-top: 1.5rem; padding: 1rem; background: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 8px;">';
                    html += '<div style="display: flex; justify-content: space-between; align-items: center;">';
                    html += '<div><span style="color: #22c55e; font-weight: 600;">Port Forward</span><p style="color: #94a3b8; font-size: 0.875rem; margin: 0.25rem 0 0 0;">Forward a port from this pod to your local machine</p></div>';
                    html += '<button onclick="openPortForwardModal(\'pod\', \'' + data.name + '\', \'' + data.namespace + '\')" style="padding: 0.75rem 1.5rem; background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); border: none; border-radius: 8px; color: white; cursor: pointer; font-weight: 600;">Forward Port</button>';
                    html += '</div></div>';

                    // Volumes section
                    if (data.volumes && data.volumes.length > 0) {
                        html += '<h3 style="margin: 2rem 0 1rem 0; color: #cbd5e1; border-bottom: 1px solid #475569; padding-bottom: 0.5rem;">Volumes</h3>';
                        html += '<div style="overflow-x: auto;"><table style="width: 100%; border-collapse: collapse;">';
                        html += '<thead><tr style="background: rgba(71, 85, 105, 0.3);"><th style="padding: 0.75rem; text-align: left; color: #cbd5e1;">Name</th><th style="padding: 0.75rem; text-align: left; color: #cbd5e1;">Type</th><th style="padding: 0.75rem; text-align: left; color: #cbd5e1;">Source</th></tr></thead><tbody>';
                        data.volumes.forEach(v => {
                            html += '<tr style="border-bottom: 1px solid #334155;">' +
                                    '<td style="padding: 0.75rem; color: #e2e8f0;">' + v.name + '</td>' +
                                    '<td style="padding: 0.75rem; color: #06b6d4;">' + v.type + '</td>' +
                                    '<td style="padding: 0.75rem; color: #94a3b8;">' + (v.source || '-') + '</td>' +
                                    '</tr>';
                        });
                        html += '</tbody></table></div>';
                    }

                    // Conditions section
                    if (data.conditions && data.conditions.length > 0) {
                        html += '<h3 style="margin: 2rem 0 1rem 0; color: #cbd5e1; border-bottom: 1px solid #475569; padding-bottom: 0.5rem;">Conditions</h3>';
                        html += '<div style="overflow-x: auto;"><table style="width: 100%; border-collapse: collapse;">';
                        html += '<thead><tr style="background: rgba(71, 85, 105, 0.3);"><th style="padding: 0.75rem; text-align: left; color: #cbd5e1;">Type</th><th style="padding: 0.75rem; text-align: left; color: #cbd5e1;">Status</th><th style="padding: 0.75rem; text-align: left; color: #cbd5e1;">Reason</th></tr></thead><tbody>';
                        data.conditions.forEach(c => {
                            html += '<tr style="border-bottom: 1px solid #334155;">' +
                                    '<td style="padding: 0.75rem; color: #e2e8f0;">' + c.type + '</td>' +
                                    '<td style="padding: 0.75rem;"><span style="color: ' + (c.status === 'True' ? '#22c55e' : '#ef4444') + ';">' + c.status + '</span></td>' +
                                    '<td style="padding: 0.75rem; color: #94a3b8;">' + (c.reason || '-') + '</td>' +
                                    '</tr>';
                        });
                        html += '</tbody></table></div>';
                    }

                    // Events section
                    if (data.events && data.events.length > 0) {
                        html += '<h3 style="margin: 2rem 0 1rem 0; color: #cbd5e1; border-bottom: 1px solid #475569; padding-bottom: 0.5rem;">Recent Events</h3>';
                        html += '<div style="overflow-x: auto;"><table style="width: 100%; border-collapse: collapse;">';
                        html += '<thead><tr style="background: rgba(71, 85, 105, 0.3);"><th style="padding: 0.75rem; text-align: left; color: #cbd5e1;">Type</th><th style="padding: 0.75rem; text-align: left; color: #cbd5e1;">Reason</th><th style="padding: 0.75rem; text-align: left; color: #cbd5e1;">Message</th><th style="padding: 0.75rem; text-align: left; color: #cbd5e1;">Count</th><th style="padding: 0.75rem; text-align: left; color: #cbd5e1;">Age</th></tr></thead><tbody>';
                        data.events.slice(0, 10).forEach(e => {
                            html += '<tr style="border-bottom: 1px solid #334155;">' +
                                    '<td style="padding: 0.75rem;"><span style="color: ' + (e.type === 'Normal' ? '#22c55e' : '#eab308') + ';">' + e.type + '</span></td>' +
                                    '<td style="padding: 0.75rem; color: #06b6d4;">' + e.reason + '</td>' +
                                    '<td style="padding: 0.75rem; color: #94a3b8; font-size: 0.875rem;">' + e.message + '</td>' +
                                    '<td style="padding: 0.75rem; color: #e2e8f0;">' + e.count + '</td>' +
                                    '<td style="padding: 0.75rem; color: #94a3b8; font-size: 0.875rem;">' + e.age + '</td>' +
                                    '</tr>';
                        });
                        html += '</tbody></table></div>';
                    }

                    // Labels section
                    if (data.labels && Object.keys(data.labels).length > 0) {
                        html += '<h3 style="margin: 2rem 0 1rem 0; color: #cbd5e1; border-bottom: 1px solid #475569; padding-bottom: 0.5rem;">Labels</h3>';
                        html += '<div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">';
                        Object.entries(data.labels).forEach(([key, value]) => {
                            html += '<span style="background: rgba(71, 85, 105, 0.5); padding: 0.5rem 1rem; border-radius: 6px; font-size: 0.875rem; color: #cbd5e1;">' +
                                    '<span style="color: #06b6d4;">' + key + '</span>=<span style="color: #a855f7;">' + value + '</span>' +
                                    '</span>';
                        });
                        html += '</div>';
                    }

                    document.getElementById('pod-details-content').innerHTML = html;
                })
                .catch(err => alert('Error loading pod details: ' + err.message));
        }

        function loadPodYAML() {
            fetch('/api/pod/yaml?name=' + encodeURIComponent(currentPodName) + '&namespace=' + encodeURIComponent(currentPodNamespace))
                .then(r => r.json())
                .then(data => {
                    if (!data.success) {
                        alert('Error: ' + data.error);
                        return;
                    }

                    let html = '<div style="display: flex; gap: 1rem; margin-bottom: 2rem; border-bottom: 1px solid #475569; padding-bottom: 1rem;">';
                    html += '<button class="pod-detail-tab" data-tab="details" onclick="loadPodDetailsTab(\'details\')" style="padding: 0.75rem 1.5rem; border: none; border-radius: 8px; color: white; cursor: pointer; font-weight: 600; transition: all 0.3s ease; background: rgba(71, 85, 105, 0.5);">Details</button>';
                    html += '<button class="pod-detail-tab" data-tab="yaml" onclick="loadPodDetailsTab(\'yaml\')" style="padding: 0.75rem 1.5rem; border: none; border-radius: 8px; color: white; cursor: pointer; font-weight: 600; transition: all 0.3s ease; background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%);">YAML</button>';
                    html += '<button class="pod-detail-tab" data-tab="describe" onclick="loadPodDetailsTab(\'describe\')" style="padding: 0.75rem 1.5rem; border: none; border-radius: 8px; color: white; cursor: pointer; font-weight: 600; transition: all 0.3s ease; background: rgba(71, 85, 105, 0.5);">Describe</button>';
                    html += '</div>';

                    html += '<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">';
                    html += '<h2 style="color: #06b6d4;">YAML Definition</h2>';
                    html += '<button onclick="copyToClipboard(document.getElementById(\'yaml-content\').textContent, \'YAML\')" style="padding: 0.5rem 1rem; background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%); border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600; display: flex; align-items: center; gap: 0.5rem;">' +
                            '<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/></svg>' +
                            'Copy YAML' +
                            '</button>';
                    html += '</div>';

                    html += '<pre id="yaml-content" style="background: #0f172a; padding: 1.5rem; border-radius: 8px; border: 1px solid #475569; overflow-x: auto; color: #e2e8f0; font-family: \'Courier New\', monospace; font-size: 0.875rem; line-height: 1.5;">' + data.yaml + '</pre>';

                    document.getElementById('pod-details-content').innerHTML = html;
                })
                .catch(err => alert('Error loading YAML: ' + err.message));
        }

        function loadPodDescribe() {
            fetch('/api/pod/describe?name=' + encodeURIComponent(currentPodName) + '&namespace=' + encodeURIComponent(currentPodNamespace))
                .then(r => r.json())
                .then(data => {
                    if (!data.success) {
                        alert('Error: ' + data.error);
                        return;
                    }

                    let html = '<div style="display: flex; gap: 1rem; margin-bottom: 2rem; border-bottom: 1px solid #475569; padding-bottom: 1rem;">';
                    html += '<button class="pod-detail-tab" data-tab="details" onclick="loadPodDetailsTab(\'details\')" style="padding: 0.75rem 1.5rem; border: none; border-radius: 8px; color: white; cursor: pointer; font-weight: 600; transition: all 0.3s ease; background: rgba(71, 85, 105, 0.5);">Details</button>';
                    html += '<button class="pod-detail-tab" data-tab="yaml" onclick="loadPodDetailsTab(\'yaml\')" style="padding: 0.75rem 1.5rem; border: none; border-radius: 8px; color: white; cursor: pointer; font-weight: 600; transition: all 0.3s ease; background: rgba(71, 85, 105, 0.5);">YAML</button>';
                    html += '<button class="pod-detail-tab" data-tab="describe" onclick="loadPodDetailsTab(\'describe\')" style="padding: 0.75rem 1.5rem; border: none; border-radius: 8px; color: white; cursor: pointer; font-weight: 600; transition: all 0.3s ease; background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%);">Describe</button>';
                    html += '</div>';

                    html += '<h2 style="margin-bottom: 1.5rem; color: #06b6d4;">Describe Pod</h2>';
                    html += '<pre style="background: #0f172a; padding: 1.5rem; border-radius: 8px; border: 1px solid #475569; overflow-x: auto; color: #e2e8f0; font-family: \'Courier New\', monospace; font-size: 0.875rem; line-height: 1.5; white-space: pre-wrap;">' + data.describe + '</pre>';

                    document.getElementById('pod-details-content').innerHTML = html;
                })
                .catch(err => alert('Error loading describe: ' + err.message));
        }

        function closePodDetails() {
            document.getElementById('pod-details-modal').style.display = 'none';
        }

        // Deployment Details Functions
        let currentDeploymentName = '';
        let currentDeploymentView = 'details';

        function showDeploymentDetails(name) {
            currentDeploymentName = name;
            currentDeploymentView = 'details';
            loadDeploymentDetailsTab('details');
            document.getElementById('deployment-details-modal').style.display = 'block';
        }

        function closeDeploymentDetails() {
            document.getElementById('deployment-details-modal').style.display = 'none';
        }

        function loadDeploymentDetailsTab(tab) {
            currentDeploymentView = tab;
            if (tab === 'details') {
                loadDeploymentDetailsContent();
            } else if (tab === 'yaml') {
                loadDeploymentYAML();
            } else if (tab === 'describe') {
                loadDeploymentDescribe();
            }
        }

        function loadDeploymentDetailsContent() {
            fetch('/api/deployment/details?name=' + currentDeploymentName)
                .then(r => r.json())
                .then(data => {
                    let html = '<div style="display: flex; justify-content: space-between; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">' +
                               '<div style="display: flex; gap: 0.75rem;">' +
                               '<button onclick="loadDeploymentDetailsTab(\'details\')" style="padding: 0.5rem 1rem; background: ' + (currentDeploymentView === 'details' ? '#06b6d4' : '#475569') + '; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Details</button>' +
                               '<button onclick="loadDeploymentDetailsTab(\'yaml\')" style="padding: 0.5rem 1rem; background: ' + (currentDeploymentView === 'yaml' ? '#06b6d4' : '#475569') + '; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">YAML</button>' +
                               '<button onclick="loadDeploymentDetailsTab(\'describe\')" style="padding: 0.5rem 1rem; background: ' + (currentDeploymentView === 'describe' ? '#06b6d4' : '#475569') + '; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Describe</button>' +
                               '</div></div>';

                    html += '<h2 style="color: #06b6d4; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 1rem;">' +
                            data.name +
                            '<button onclick="copyToClipboard(\'' + data.name + '\', \'Deployment name\')" style="padding: 0.25rem 0.75rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-size: 0.875rem;">Copy</button>' +
                            '</h2>';

                    html += '<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">';
                    html += '<div style="background: rgba(6, 182, 212, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(6, 182, 212, 0.3);">' +
                            '<div style="color: #94a3b8; font-size: 0.875rem;">Ready</div>' +
                            '<div style="color: #06b6d4; font-size: 1.25rem; font-weight: 600; margin-top: 0.25rem;">' + data.ready + '</div></div>';
                    html += '<div style="background: rgba(34, 197, 94, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(34, 197, 94, 0.3);">' +
                            '<div style="color: #94a3b8; font-size: 0.875rem;">Available</div>' +
                            '<div style="color: #22c55e; font-size: 1.25rem; font-weight: 600; margin-top: 0.25rem;">' + data.available + '</div></div>';
                    html += '<div style="background: rgba(168, 85, 247, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(168, 85, 247, 0.3);">' +
                            '<div style="color: #94a3b8; font-size: 0.875rem;">Strategy</div>' +
                            '<div style="color: #a855f7; font-size: 1.25rem; font-weight: 600; margin-top: 0.25rem;">' + (data.strategy || 'RollingUpdate') + '</div></div>';
                    html += '<div style="background: rgba(251, 146, 60, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(251, 146, 60, 0.3);">' +
                            '<div style="color: #94a3b8; font-size: 0.875rem;">Age</div>' +
                            '<div style="color: #fb923c; font-size: 1.25rem; font-weight: 600; margin-top: 0.25rem;">' + data.age + '</div></div>';
                    html += '</div>';

                    if (data.selector) {
                        html += '<div style="background: #0f172a; padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem; border: 1px solid #475569;">' +
                                '<div style="color: #06b6d4; font-weight: 600; margin-bottom: 0.5rem;">Selector</div>' +
                                '<div style="color: #e2e8f0; font-family: monospace;">' + data.selector + '</div></div>';
                    }

                    document.getElementById('deployment-details-content').innerHTML = html;
                });
        }

        function loadDeploymentYAML() {
            fetch('/api/deployment/yaml?name=' + currentDeploymentName)
                .then(r => r.json())
                .then(data => {
                    let html = '<div style="display: flex; justify-content: space-between; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">' +
                               '<div style="display: flex; gap: 0.75rem;">' +
                               '<button onclick="loadDeploymentDetailsTab(\'details\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Details</button>' +
                               '<button onclick="loadDeploymentDetailsTab(\'yaml\')" style="padding: 0.5rem 1rem; background: #06b6d4; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">YAML</button>' +
                               '<button onclick="loadDeploymentDetailsTab(\'describe\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Describe</button>' +
                               '</div>' +
                               '<button onclick="copyToClipboard(document.querySelector(\'#deployment-details-content pre\').innerText, \'YAML\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer;">Copy YAML</button>' +
                               '</div>';
                    html += '<pre style="background: #0f172a; padding: 1.5rem; border-radius: 8px; color: #e2e8f0; overflow-x: auto; border: 1px solid #475569; line-height: 1.5;">' + data.yaml + '</pre>';
                    document.getElementById('deployment-details-content').innerHTML = html;
                });
        }

        function loadDeploymentDescribe() {
            fetch('/api/deployment/describe?name=' + currentDeploymentName)
                .then(r => r.json())
                .then(data => {
                    let html = '<div style="display: flex; justify-content: space-between; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">' +
                               '<div style="display: flex; gap: 0.75rem;">' +
                               '<button onclick="loadDeploymentDetailsTab(\'details\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Details</button>' +
                               '<button onclick="loadDeploymentDetailsTab(\'yaml\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">YAML</button>' +
                               '<button onclick="loadDeploymentDetailsTab(\'describe\')" style="padding: 0.5rem 1rem; background: #06b6d4; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Describe</button>' +
                               '</div></div>';
                    html += '<pre style="background: #0f172a; padding: 1.5rem; border-radius: 8px; color: #e2e8f0; overflow-x: auto; border: 1px solid #475569; line-height: 1.5;">' + data.describe + '</pre>';
                    document.getElementById('deployment-details-content').innerHTML = html;
                });
        }

        // Service Details Functions
        let currentServiceName = '';
        let currentServiceNamespace = '';
        let currentServiceView = 'details';

        function showServiceDetails(name, namespace) {
            currentServiceName = name;
            currentServiceNamespace = namespace || currentNamespace;
            currentServiceView = 'details';
            loadServiceDetailsTab('details');
            document.getElementById('service-details-modal').style.display = 'block';
        }

        function closeServiceDetails() {
            document.getElementById('service-details-modal').style.display = 'none';
        }

        function loadServiceDetailsTab(tab) {
            currentServiceView = tab;
            if (tab === 'details') {
                loadServiceDetailsContent();
            } else if (tab === 'yaml') {
                loadServiceYAML();
            } else if (tab === 'describe') {
                loadServiceDescribe();
            }
        }

        function loadServiceDetailsContent() {
            fetch('/api/service/details?name=' + encodeURIComponent(currentServiceName) + '&namespace=' + encodeURIComponent(currentServiceNamespace))
                .then(r => r.json())
                .then(data => {
                    let html = '<div style="display: flex; justify-content: space-between; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">' +
                               '<div style="display: flex; gap: 0.75rem;">' +
                               '<button onclick="loadServiceDetailsTab(\'details\')" style="padding: 0.5rem 1rem; background: ' + (currentServiceView === 'details' ? '#06b6d4' : '#475569') + '; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Details</button>' +
                               '<button onclick="loadServiceDetailsTab(\'yaml\')" style="padding: 0.5rem 1rem; background: ' + (currentServiceView === 'yaml' ? '#06b6d4' : '#475569') + '; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">YAML</button>' +
                               '<button onclick="loadServiceDetailsTab(\'describe\')" style="padding: 0.5rem 1rem; background: ' + (currentServiceView === 'describe' ? '#06b6d4' : '#475569') + '; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Describe</button>' +
                               '</div></div>';

                    html += '<h2 style="color: #06b6d4; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 1rem;">' +
                            data.name +
                            '<button onclick="copyToClipboard(\'' + data.name + '\', \'Service name\')" style="padding: 0.25rem 0.75rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-size: 0.875rem;">Copy</button>' +
                            '</h2>';

                    html += '<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">';
                    html += '<div style="background: rgba(6, 182, 212, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(6, 182, 212, 0.3);">' +
                            '<div style="color: #94a3b8; font-size: 0.875rem;">Type</div>' +
                            '<div style="color: #06b6d4; font-size: 1.25rem; font-weight: 600; margin-top: 0.25rem;">' + data.type + '</div></div>';
                    html += '<div style="background: rgba(34, 197, 94, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(34, 197, 94, 0.3);">' +
                            '<div style="color: #94a3b8; font-size: 0.875rem;">Cluster IP</div>' +
                            '<div style="color: #22c55e; font-size: 1.25rem; font-weight: 600; margin-top: 0.25rem;">' + data.clusterIP + '</div></div>';
                    html += '<div style="background: rgba(251, 146, 60, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(251, 146, 60, 0.3);">' +
                            '<div style="color: #94a3b8; font-size: 0.875rem;">Ports</div>' +
                            '<div style="color: #fb923c; font-size: 1.25rem; font-weight: 600; margin-top: 0.25rem;">' + data.ports + '</div></div>';
                    html += '<div style="background: rgba(168, 85, 247, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(168, 85, 247, 0.3);">' +
                            '<div style="color: #94a3b8; font-size: 0.875rem;">Age</div>' +
                            '<div style="color: #a855f7; font-size: 1.25rem; font-weight: 600; margin-top: 0.25rem;">' + data.age + '</div></div>';
                    html += '</div>';

                    if (data.selector) {
                        html += '<div style="background: #0f172a; padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem; border: 1px solid #475569;">' +
                                '<div style="color: #06b6d4; font-weight: 600; margin-bottom: 0.5rem;">Selector</div>' +
                                '<div style="color: #e2e8f0; font-family: monospace;">' + data.selector + '</div></div>';
                    }

                    // Port Forward section
                    html += '<div style="margin-top: 1.5rem; padding: 1rem; background: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 8px;">';
                    html += '<div style="display: flex; justify-content: space-between; align-items: center;">';
                    html += '<div><span style="color: #22c55e; font-weight: 600;">Port Forward</span><p style="color: #94a3b8; font-size: 0.875rem; margin: 0.25rem 0 0 0;">Forward this service to your local machine</p></div>';
                    html += '<button onclick="openPortForwardModal(\'service\', \'' + data.name + '\', currentServiceNamespace)" style="padding: 0.75rem 1.5rem; background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); border: none; border-radius: 8px; color: white; cursor: pointer; font-weight: 600;">Forward Port</button>';
                    html += '</div></div>';

                    document.getElementById('service-details-content').innerHTML = html;
                });
        }

        function loadServiceYAML() {
            fetch('/api/service/yaml?name=' + encodeURIComponent(currentServiceName) + '&namespace=' + encodeURIComponent(currentServiceNamespace))
                .then(r => r.json())
                .then(data => {
                    let html = '<div style="display: flex; justify-content: space-between; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">' +
                               '<div style="display: flex; gap: 0.75rem;">' +
                               '<button onclick="loadServiceDetailsTab(\'details\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Details</button>' +
                               '<button onclick="loadServiceDetailsTab(\'yaml\')" style="padding: 0.5rem 1rem; background: #06b6d4; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">YAML</button>' +
                               '<button onclick="loadServiceDetailsTab(\'describe\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Describe</button>' +
                               '</div>' +
                               '<button onclick="copyToClipboard(document.querySelector(\'#service-details-content pre\').innerText, \'YAML\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer;">Copy YAML</button>' +
                               '</div>';
                    html += '<pre style="background: #0f172a; padding: 1.5rem; border-radius: 8px; color: #e2e8f0; overflow-x: auto; border: 1px solid #475569; line-height: 1.5;">' + data.yaml + '</pre>';
                    document.getElementById('service-details-content').innerHTML = html;
                });
        }

        function loadServiceDescribe() {
            fetch('/api/service/describe?name=' + encodeURIComponent(currentServiceName) + '&namespace=' + encodeURIComponent(currentServiceNamespace))
                .then(r => r.json())
                .then(data => {
                    let html = '<div style="display: flex; justify-content: space-between; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">' +
                               '<div style="display: flex; gap: 0.75rem;">' +
                               '<button onclick="loadServiceDetailsTab(\'details\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Details</button>' +
                               '<button onclick="loadServiceDetailsTab(\'yaml\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">YAML</button>' +
                               '<button onclick="loadServiceDetailsTab(\'describe\')" style="padding: 0.5rem 1rem; background: #06b6d4; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Describe</button>' +
                               '</div></div>';
                    html += '<pre style="background: #0f172a; padding: 1.5rem; border-radius: 8px; color: #e2e8f0; overflow-x: auto; border: 1px solid #475569; line-height: 1.5;">' + data.describe + '</pre>';
                    document.getElementById('service-details-content').innerHTML = html;
                });
        }

        // Ingress Details Functions
        let currentIngressName = '';
        let currentIngressView = 'details';

        function showIngressDetails(name) {
            currentIngressName = name;
            currentIngressView = 'details';
            loadIngressDetailsTab('details');
            document.getElementById('ingress-details-modal').style.display = 'block';
        }

        function closeIngressDetails() {
            document.getElementById('ingress-details-modal').style.display = 'none';
        }

        function loadIngressDetailsTab(tab) {
            currentIngressView = tab;
            if (tab === 'details') {
                loadIngressDetailsContent();
            } else if (tab === 'yaml') {
                loadIngressYAML();
            } else if (tab === 'describe') {
                loadIngressDescribe();
            }
        }

        function loadIngressDetailsContent() {
            fetch('/api/ingress/details?name=' + currentIngressName)
                .then(r => r.json())
                .then(data => {
                    let html = '<div style="display: flex; justify-content: space-between; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">' +
                               '<div style="display: flex; gap: 0.75rem;">' +
                               '<button onclick="loadIngressDetailsTab(\'details\')" style="padding: 0.5rem 1rem; background: ' + (currentIngressView === 'details' ? '#06b6d4' : '#475569') + '; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Details</button>' +
                               '<button onclick="loadIngressDetailsTab(\'yaml\')" style="padding: 0.5rem 1rem; background: ' + (currentIngressView === 'yaml' ? '#06b6d4' : '#475569') + '; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">YAML</button>' +
                               '<button onclick="loadIngressDetailsTab(\'describe\')" style="padding: 0.5rem 1rem; background: ' + (currentIngressView === 'describe' ? '#06b6d4' : '#475569') + '; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Describe</button>' +
                               '</div></div>';

                    html += '<h2 style="color: #06b6d4; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 1rem;">' +
                            data.name +
                            '<button onclick="copyToClipboard(\'' + data.name + '\', \'Ingress name\')" style="padding: 0.25rem 0.75rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-size: 0.875rem;">Copy</button>' +
                            '</h2>';

                    html += '<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">';
                    html += '<div style="background: rgba(6, 182, 212, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(6, 182, 212, 0.3);">' +
                            '<div style="color: #94a3b8; font-size: 0.875rem;">Hosts</div>' +
                            '<div style="color: #06b6d4; font-size: 1.25rem; font-weight: 600; margin-top: 0.25rem;">' + (data.hosts || '-') + '</div></div>';
                    html += '<div style="background: rgba(34, 197, 94, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(34, 197, 94, 0.3);">' +
                            '<div style="color: #94a3b8; font-size: 0.875rem;">Class</div>' +
                            '<div style="color: #22c55e; font-size: 1.25rem; font-weight: 600; margin-top: 0.25rem;">' + (data.class || '-') + '</div></div>';
                    html += '<div style="background: rgba(168, 85, 247, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(168, 85, 247, 0.3);">' +
                            '<div style="color: #94a3b8; font-size: 0.875rem;">Age</div>' +
                            '<div style="color: #a855f7; font-size: 1.25rem; font-weight: 600; margin-top: 0.25rem;">' + data.age + '</div></div>';
                    html += '</div>';

                    document.getElementById('ingress-details-content').innerHTML = html;
                });
        }

        function loadIngressYAML() {
            fetch('/api/ingress/yaml?name=' + currentIngressName)
                .then(r => r.json())
                .then(data => {
                    let html = '<div style="display: flex; justify-content: space-between; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">' +
                               '<div style="display: flex; gap: 0.75rem;">' +
                               '<button onclick="loadIngressDetailsTab(\'details\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Details</button>' +
                               '<button onclick="loadIngressDetailsTab(\'yaml\')" style="padding: 0.5rem 1rem; background: #06b6d4; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">YAML</button>' +
                               '<button onclick="loadIngressDetailsTab(\'describe\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Describe</button>' +
                               '</div>' +
                               '<button onclick="copyToClipboard(document.querySelector(\'#ingress-details-content pre\').innerText, \'YAML\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer;">Copy YAML</button>' +
                               '</div>';
                    html += '<pre style="background: #0f172a; padding: 1.5rem; border-radius: 8px; color: #e2e8f0; overflow-x: auto; border: 1px solid #475569; line-height: 1.5;">' + data.yaml + '</pre>';
                    document.getElementById('ingress-details-content').innerHTML = html;
                });
        }

        function loadIngressDescribe() {
            fetch('/api/ingress/describe?name=' + currentIngressName)
                .then(r => r.json())
                .then(data => {
                    let html = '<div style="display: flex; justify-content: space-between; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">' +
                               '<div style="display: flex; gap: 0.75rem;">' +
                               '<button onclick="loadIngressDetailsTab(\'details\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Details</button>' +
                               '<button onclick="loadIngressDetailsTab(\'yaml\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">YAML</button>' +
                               '<button onclick="loadIngressDetailsTab(\'describe\')" style="padding: 0.5rem 1rem; background: #06b6d4; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Describe</button>' +
                               '</div></div>';
                    html += '<pre style="background: #0f172a; padding: 1.5rem; border-radius: 8px; color: #e2e8f0; overflow-x: auto; border: 1px solid #475569; line-height: 1.5;">' + data.describe + '</pre>';
                    document.getElementById('ingress-details-content').innerHTML = html;
                });
        }

        // ConfigMap Details Functions
        let currentConfigMapName = '';
        let currentConfigMapView = 'details';

        function showConfigMapDetails(name) {
            currentConfigMapName = name;
            currentConfigMapView = 'details';
            loadConfigMapDetailsTab('details');
            document.getElementById('configmap-details-modal').style.display = 'block';
        }

        function closeConfigMapDetails() {
            document.getElementById('configmap-details-modal').style.display = 'none';
        }

        function loadConfigMapDetailsTab(tab) {
            currentConfigMapView = tab;
            if (tab === 'details') {
                loadConfigMapDetailsContent();
            } else if (tab === 'yaml') {
                loadConfigMapYAML();
            } else if (tab === 'describe') {
                loadConfigMapDescribe();
            }
        }

        function loadConfigMapDetailsContent() {
            fetch('/api/configmap/details?name=' + currentConfigMapName)
                .then(r => r.json())
                .then(data => {
                    let html = '<div style="display: flex; justify-content: space-between; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">' +
                               '<div style="display: flex; gap: 0.75rem;">' +
                               '<button onclick="loadConfigMapDetailsTab(\'details\')" style="padding: 0.5rem 1rem; background: ' + (currentConfigMapView === 'details' ? '#06b6d4' : '#475569') + '; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Details</button>' +
                               '<button onclick="loadConfigMapDetailsTab(\'yaml\')" style="padding: 0.5rem 1rem; background: ' + (currentConfigMapView === 'yaml' ? '#06b6d4' : '#475569') + '; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">YAML</button>' +
                               '<button onclick="loadConfigMapDetailsTab(\'describe\')" style="padding: 0.5rem 1rem; background: ' + (currentConfigMapView === 'describe' ? '#06b6d4' : '#475569') + '; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Describe</button>' +
                               '</div></div>';

                    html += '<h2 style="color: #06b6d4; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 1rem;">' +
                            data.name +
                            '<button onclick="copyToClipboard(\'' + data.name + '\', \'ConfigMap name\')" style="padding: 0.25rem 0.75rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-size: 0.875rem;">Copy</button>' +
                            '</h2>';

                    html += '<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">';
                    html += '<div style="background: rgba(6, 182, 212, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(6, 182, 212, 0.3);">' +
                            '<div style="color: #94a3b8; font-size: 0.875rem;">Data Keys</div>' +
                            '<div style="color: #06b6d4; font-size: 1.25rem; font-weight: 600; margin-top: 0.25rem;">' + (data.keys || '-') + '</div></div>';
                    html += '<div style="background: rgba(168, 85, 247, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(168, 85, 247, 0.3);">' +
                            '<div style="color: #94a3b8; font-size: 0.875rem;">Age</div>' +
                            '<div style="color: #a855f7; font-size: 1.25rem; font-weight: 600; margin-top: 0.25rem;">' + data.age + '</div></div>';
                    html += '</div>';

                    document.getElementById('configmap-details-content').innerHTML = html;
                });
        }

        function loadConfigMapYAML() {
            fetch('/api/configmap/yaml?name=' + currentConfigMapName)
                .then(r => r.json())
                .then(data => {
                    let html = '<div style="display: flex; justify-content: space-between; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">' +
                               '<div style="display: flex; gap: 0.75rem;">' +
                               '<button onclick="loadConfigMapDetailsTab(\'details\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Details</button>' +
                               '<button onclick="loadConfigMapDetailsTab(\'yaml\')" style="padding: 0.5rem 1rem; background: #06b6d4; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">YAML</button>' +
                               '<button onclick="loadConfigMapDetailsTab(\'describe\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Describe</button>' +
                               '</div>' +
                               '<button onclick="copyToClipboard(document.querySelector(\'#configmap-details-content pre\').innerText, \'YAML\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer;">Copy YAML</button>' +
                               '</div>';
                    html += '<pre style="background: #0f172a; padding: 1.5rem; border-radius: 8px; color: #e2e8f0; overflow-x: auto; border: 1px solid #475569; line-height: 1.5;">' + data.yaml + '</pre>';
                    document.getElementById('configmap-details-content').innerHTML = html;
                });
        }

        function loadConfigMapDescribe() {
            fetch('/api/configmap/describe?name=' + currentConfigMapName)
                .then(r => r.json())
                .then(data => {
                    let html = '<div style="display: flex; justify-content: space-between; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">' +
                               '<div style="display: flex; gap: 0.75rem;">' +
                               '<button onclick="loadConfigMapDetailsTab(\'details\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Details</button>' +
                               '<button onclick="loadConfigMapDetailsTab(\'yaml\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">YAML</button>' +
                               '<button onclick="loadConfigMapDetailsTab(\'describe\')" style="padding: 0.5rem 1rem; background: #06b6d4; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Describe</button>' +
                               '</div></div>';
                    html += '<pre style="background: #0f172a; padding: 1.5rem; border-radius: 8px; color: #e2e8f0; overflow-x: auto; border: 1px solid #475569; line-height: 1.5;">' + data.describe + '</pre>';
                    document.getElementById('configmap-details-content').innerHTML = html;
                });
        }

        // StatefulSet details functions
        let currentStatefulSetName = '';
        let currentStatefulSetView = 'details';

        function showStatefulSetDetails(name) {
            currentStatefulSetName = name;
            currentStatefulSetView = 'details';
            loadStatefulSetDetailsTab('details');
            document.getElementById('statefulset-details-modal').style.display = 'block';
        }

        function closeStatefulSetDetails() {
            document.getElementById('statefulset-details-modal').style.display = 'none';
        }

        function loadStatefulSetDetailsTab(tab) {
            currentStatefulSetView = tab;
            if (tab === 'details') {
                loadStatefulSetDetailsContent();
            } else if (tab === 'yaml') {
                loadStatefulSetYAML();
            } else if (tab === 'describe') {
                loadStatefulSetDescribe();
            }
        }

        function loadStatefulSetDetailsContent() {
            fetch('/api/statefulset/details?name=' + currentStatefulSetName)
                .then(r => r.json())
                .then(data => {
                    let html = '<div style="display: flex; gap: 0.75rem; margin-bottom: 1.5rem;">' +
                               '<button onclick="loadStatefulSetDetailsTab(\'details\')" style="padding: 0.5rem 1rem; background: ' + (currentStatefulSetView === 'details' ? '#06b6d4' : '#475569') + '; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Details</button>' +
                               '<button onclick="loadStatefulSetDetailsTab(\'yaml\')" style="padding: 0.5rem 1rem; background: ' + (currentStatefulSetView === 'yaml' ? '#06b6d4' : '#475569') + '; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">YAML</button>' +
                               '<button onclick="loadStatefulSetDetailsTab(\'describe\')" style="padding: 0.5rem 1rem; background: ' + (currentStatefulSetView === 'describe' ? '#06b6d4' : '#475569') + '; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Describe</button>' +
                               '</div>';
                    html += '<h2 style="color: #06b6d4; margin-bottom: 1.5rem;">' + data.name + '</h2>';
                    html += '<pre style="background: #0f172a; padding: 1.5rem; border-radius: 8px; color: #e2e8f0; overflow-x: auto; border: 1px solid #475569; line-height: 1.5;">' + JSON.stringify(data, null, 2) + '</pre>';
                    document.getElementById('statefulset-details-content').innerHTML = html;
                });
        }

        function loadStatefulSetYAML() {
            fetch('/api/statefulset/yaml?name=' + currentStatefulSetName)
                .then(r => r.json())
                .then(data => {
                    let html = '<div style="display: flex; justify-content: space-between; margin-bottom: 1.5rem;">' +
                               '<div style="display: flex; gap: 0.75rem;">' +
                               '<button onclick="loadStatefulSetDetailsTab(\'details\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Details</button>' +
                               '<button onclick="loadStatefulSetDetailsTab(\'yaml\')" style="padding: 0.5rem 1rem; background: #06b6d4; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">YAML</button>' +
                               '<button onclick="loadStatefulSetDetailsTab(\'describe\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Describe</button>' +
                               '</div>' +
                               '<button onclick="copyToClipboard(document.querySelector(\'#statefulset-details-content pre\').innerText, \'YAML\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer;">Copy YAML</button>' +
                               '</div>';
                    html += '<pre style="background: #0f172a; padding: 1.5rem; border-radius: 8px; color: #e2e8f0; overflow-x: auto; border: 1px solid #475569; line-height: 1.5;">' + data.yaml + '</pre>';
                    document.getElementById('statefulset-details-content').innerHTML = html;
                });
        }

        function loadStatefulSetDescribe() {
            fetch('/api/statefulset/describe?name=' + currentStatefulSetName)
                .then(r => r.json())
                .then(data => {
                    let html = '<div style="display: flex; gap: 0.75rem; margin-bottom: 1.5rem;">' +
                               '<button onclick="loadStatefulSetDetailsTab(\'details\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Details</button>' +
                               '<button onclick="loadStatefulSetDetailsTab(\'yaml\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">YAML</button>' +
                               '<button onclick="loadStatefulSetDetailsTab(\'describe\')" style="padding: 0.5rem 1rem; background: #06b6d4; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Describe</button>' +
                               '</div>';
                    html += '<pre style="background: #0f172a; padding: 1.5rem; border-radius: 8px; color: #e2e8f0; overflow-x: auto; border: 1px solid #475569; line-height: 1.5;">' + data.describe + '</pre>';
                    document.getElementById('statefulset-details-content').innerHTML = html;
                });
        }

        // DaemonSet details functions
        let currentDaemonSetName = '';
        let currentDaemonSetView = 'details';

        function showDaemonSetDetails(name) {
            currentDaemonSetName = name;
            currentDaemonSetView = 'details';
            loadDaemonSetDetailsTab('details');
            document.getElementById('daemonset-details-modal').style.display = 'block';
        }

        function closeDaemonSetDetails() {
            document.getElementById('daemonset-details-modal').style.display = 'none';
        }

        function loadDaemonSetDetailsTab(tab) {
            currentDaemonSetView = tab;
            if (tab === 'details') {
                loadDaemonSetDetailsContent();
            } else if (tab === 'yaml') {
                loadDaemonSetYAML();
            } else if (tab === 'describe') {
                loadDaemonSetDescribe();
            }
        }

        function loadDaemonSetDetailsContent() {
            fetch('/api/daemonset/details?name=' + currentDaemonSetName)
                .then(r => r.json())
                .then(data => {
                    let html = '<div style="display: flex; gap: 0.75rem; margin-bottom: 1.5rem;">' +
                               '<button onclick="loadDaemonSetDetailsTab(\'details\')" style="padding: 0.5rem 1rem; background: ' + (currentDaemonSetView === 'details' ? '#06b6d4' : '#475569') + '; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Details</button>' +
                               '<button onclick="loadDaemonSetDetailsTab(\'yaml\')" style="padding: 0.5rem 1rem; background: ' + (currentDaemonSetView === 'yaml' ? '#06b6d4' : '#475569') + '; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">YAML</button>' +
                               '<button onclick="loadDaemonSetDetailsTab(\'describe\')" style="padding: 0.5rem 1rem; background: ' + (currentDaemonSetView === 'describe' ? '#06b6d4' : '#475569') + '; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Describe</button>' +
                               '</div>';
                    html += '<h2 style="color: #06b6d4; margin-bottom: 1.5rem;">' + data.name + '</h2>';
                    html += '<pre style="background: #0f172a; padding: 1.5rem; border-radius: 8px; color: #e2e8f0; overflow-x: auto; border: 1px solid #475569; line-height: 1.5;">' + JSON.stringify(data, null, 2) + '</pre>';
                    document.getElementById('daemonset-details-content').innerHTML = html;
                });
        }

        function loadDaemonSetYAML() {
            fetch('/api/daemonset/yaml?name=' + currentDaemonSetName)
                .then(r => r.json())
                .then(data => {
                    let html = '<div style="display: flex; justify-content: space-between; margin-bottom: 1.5rem;">' +
                               '<div style="display: flex; gap: 0.75rem;">' +
                               '<button onclick="loadDaemonSetDetailsTab(\'details\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Details</button>' +
                               '<button onclick="loadDaemonSetDetailsTab(\'yaml\')" style="padding: 0.5rem 1rem; background: #06b6d4; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">YAML</button>' +
                               '<button onclick="loadDaemonSetDetailsTab(\'describe\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Describe</button>' +
                               '</div>' +
                               '<button onclick="copyToClipboard(document.querySelector(\'#daemonset-details-content pre\').innerText, \'YAML\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer;">Copy YAML</button>' +
                               '</div>';
                    html += '<pre style="background: #0f172a; padding: 1.5rem; border-radius: 8px; color: #e2e8f0; overflow-x: auto; border: 1px solid #475569; line-height: 1.5;">' + data.yaml + '</pre>';
                    document.getElementById('daemonset-details-content').innerHTML = html;
                });
        }

        function loadDaemonSetDescribe() {
            fetch('/api/daemonset/describe?name=' + currentDaemonSetName)
                .then(r => r.json())
                .then(data => {
                    let html = '<div style="display: flex; gap: 0.75rem; margin-bottom: 1.5rem;">' +
                               '<button onclick="loadDaemonSetDetailsTab(\'details\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Details</button>' +
                               '<button onclick="loadDaemonSetDetailsTab(\'yaml\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">YAML</button>' +
                               '<button onclick="loadDaemonSetDetailsTab(\'describe\')" style="padding: 0.5rem 1rem; background: #06b6d4; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Describe</button>' +
                               '</div>';
                    html += '<pre style="background: #0f172a; padding: 1.5rem; border-radius: 8px; color: #e2e8f0; overflow-x: auto; border: 1px solid #475569; line-height: 1.5;">' + data.describe + '</pre>';
                    document.getElementById('daemonset-details-content').innerHTML = html;
                });
        }

        // CronJob details functions
        let currentCronJobName = '';
        let currentCronJobView = 'details';

        function showCronJobDetails(name) {
            currentCronJobName = name;
            currentCronJobView = 'details';
            loadCronJobDetailsTab('details');
            document.getElementById('cronjob-details-modal').style.display = 'block';
        }

        function closeCronJobDetails() {
            document.getElementById('cronjob-details-modal').style.display = 'none';
        }

        function loadCronJobDetailsTab(tab) {
            currentCronJobView = tab;
            if (tab === 'details') {
                loadCronJobDetailsContent();
            } else if (tab === 'yaml') {
                loadCronJobYAML();
            } else if (tab === 'describe') {
                loadCronJobDescribe();
            }
        }

        function loadCronJobDetailsContent() {
            fetch('/api/cronjob/details?name=' + currentCronJobName)
                .then(r => r.json())
                .then(data => {
                    let html = '<div style="display: flex; gap: 0.75rem; margin-bottom: 1.5rem;">' +
                               '<button onclick="loadCronJobDetailsTab(\'details\')" style="padding: 0.5rem 1rem; background: ' + (currentCronJobView === 'details' ? '#06b6d4' : '#475569') + '; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Details</button>' +
                               '<button onclick="loadCronJobDetailsTab(\'yaml\')" style="padding: 0.5rem 1rem; background: ' + (currentCronJobView === 'yaml' ? '#06b6d4' : '#475569') + '; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">YAML</button>' +
                               '<button onclick="loadCronJobDetailsTab(\'describe\')" style="padding: 0.5rem 1rem; background: ' + (currentCronJobView === 'describe' ? '#06b6d4' : '#475569') + '; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Describe</button>' +
                               '</div>';
                    html += '<h2 style="color: #06b6d4; margin-bottom: 1.5rem;">' + data.name + '</h2>';
                    html += '<pre style="background: #0f172a; padding: 1.5rem; border-radius: 8px; color: #e2e8f0; overflow-x: auto; border: 1px solid #475569; line-height: 1.5;">' + JSON.stringify(data, null, 2) + '</pre>';
                    document.getElementById('cronjob-details-content').innerHTML = html;
                });
        }

        function loadCronJobYAML() {
            fetch('/api/cronjob/yaml?name=' + currentCronJobName)
                .then(r => r.json())
                .then(data => {
                    let html = '<div style="display: flex; justify-content: space-between; margin-bottom: 1.5rem;">' +
                               '<div style="display: flex; gap: 0.75rem;">' +
                               '<button onclick="loadCronJobDetailsTab(\'details\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Details</button>' +
                               '<button onclick="loadCronJobDetailsTab(\'yaml\')" style="padding: 0.5rem 1rem; background: #06b6d4; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">YAML</button>' +
                               '<button onclick="loadCronJobDetailsTab(\'describe\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Describe</button>' +
                               '</div>' +
                               '<button onclick="copyToClipboard(document.querySelector(\'#cronjob-details-content pre\').innerText, \'YAML\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer;">Copy YAML</button>' +
                               '</div>';
                    html += '<pre style="background: #0f172a; padding: 1.5rem; border-radius: 8px; color: #e2e8f0; overflow-x: auto; border: 1px solid #475569; line-height: 1.5;">' + data.yaml + '</pre>';
                    document.getElementById('cronjob-details-content').innerHTML = html;
                });
        }

        function loadCronJobDescribe() {
            fetch('/api/cronjob/describe?name=' + currentCronJobName)
                .then(r => r.json())
                .then(data => {
                    let html = '<div style="display: flex; gap: 0.75rem; margin-bottom: 1.5rem;">' +
                               '<button onclick="loadCronJobDetailsTab(\'details\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Details</button>' +
                               '<button onclick="loadCronJobDetailsTab(\'yaml\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">YAML</button>' +
                               '<button onclick="loadCronJobDetailsTab(\'describe\')" style="padding: 0.5rem 1rem; background: #06b6d4; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Describe</button>' +
                               '</div>';
                    html += '<pre style="background: #0f172a; padding: 1.5rem; border-radius: 8px; color: #e2e8f0; overflow-x: auto; border: 1px solid #475569; line-height: 1.5;">' + data.describe + '</pre>';
                    document.getElementById('cronjob-details-content').innerHTML = html;
                });
        }

        // Job details functions
        let currentJobName = '';
        let currentJobView = 'details';

        function showJobDetails(name) {
            currentJobName = name;
            currentJobView = 'details';
            loadJobDetailsTab('details');
            document.getElementById('job-details-modal').style.display = 'block';
        }

        function closeJobDetails() {
            document.getElementById('job-details-modal').style.display = 'none';
        }

        function loadJobDetailsTab(tab) {
            currentJobView = tab;
            if (tab === 'details') {
                loadJobDetailsContent();
            } else if (tab === 'yaml') {
                loadJobYAML();
            } else if (tab === 'describe') {
                loadJobDescribe();
            }
        }

        function loadJobDetailsContent() {
            fetch('/api/job/details?name=' + currentJobName)
                .then(r => r.json())
                .then(data => {
                    let html = '<div style="display: flex; gap: 0.75rem; margin-bottom: 1.5rem;">' +
                               '<button onclick="loadJobDetailsTab(\'details\')" style="padding: 0.5rem 1rem; background: ' + (currentJobView === 'details' ? '#06b6d4' : '#475569') + '; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Details</button>' +
                               '<button onclick="loadJobDetailsTab(\'yaml\')" style="padding: 0.5rem 1rem; background: ' + (currentJobView === 'yaml' ? '#06b6d4' : '#475569') + '; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">YAML</button>' +
                               '<button onclick="loadJobDetailsTab(\'describe\')" style="padding: 0.5rem 1rem; background: ' + (currentJobView === 'describe' ? '#06b6d4' : '#475569') + '; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Describe</button>' +
                               '</div>';
                    html += '<h2 style="color: #06b6d4; margin-bottom: 1.5rem;">' + data.name + '</h2>';
                    html += '<pre style="background: #0f172a; padding: 1.5rem; border-radius: 8px; color: #e2e8f0; overflow-x: auto; border: 1px solid #475569; line-height: 1.5;">' + JSON.stringify(data, null, 2) + '</pre>';
                    document.getElementById('job-details-content').innerHTML = html;
                });
        }

        function loadJobYAML() {
            fetch('/api/job/yaml?name=' + currentJobName)
                .then(r => r.json())
                .then(data => {
                    let html = '<div style="display: flex; justify-content: space-between; margin-bottom: 1.5rem;">' +
                               '<div style="display: flex; gap: 0.75rem;">' +
                               '<button onclick="loadJobDetailsTab(\'details\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Details</button>' +
                               '<button onclick="loadJobDetailsTab(\'yaml\')" style="padding: 0.5rem 1rem; background: #06b6d4; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">YAML</button>' +
                               '<button onclick="loadJobDetailsTab(\'describe\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Describe</button>' +
                               '</div>' +
                               '<button onclick="copyToClipboard(document.querySelector(\'#job-details-content pre\').innerText, \'YAML\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer;">Copy YAML</button>' +
                               '</div>';
                    html += '<pre style="background: #0f172a; padding: 1.5rem; border-radius: 8px; color: #e2e8f0; overflow-x: auto; border: 1px solid #475569; line-height: 1.5;">' + data.yaml + '</pre>';
                    document.getElementById('job-details-content').innerHTML = html;
                });
        }

        function loadJobDescribe() {
            fetch('/api/job/describe?name=' + currentJobName)
                .then(r => r.json())
                .then(data => {
                    let html = '<div style="display: flex; gap: 0.75rem; margin-bottom: 1.5rem;">' +
                               '<button onclick="loadJobDetailsTab(\'details\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Details</button>' +
                               '<button onclick="loadJobDetailsTab(\'yaml\')" style="padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">YAML</button>' +
                               '<button onclick="loadJobDetailsTab(\'describe\')" style="padding: 0.5rem 1rem; background: #06b6d4; border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">Describe</button>' +
                               '</div>';
                    html += '<pre style="background: #0f172a; padding: 1.5rem; border-radius: 8px; color: #e2e8f0; overflow-x: auto; border: 1px solid #475569; line-height: 1.5;">' + data.describe + '</pre>';
                    document.getElementById('job-details-content').innerHTML = html;
                });
        }

        // Terminal functions
        let terminalWs = null;
        let currentPod = '';
        let currentContainer = '';

        function openTerminal(podName, containerName) {
            currentPod = podName;
            currentContainer = containerName;

            document.getElementById('terminal-title').textContent = 'Terminal: ' + podName + ' / ' + containerName;
            document.getElementById('terminal-output').innerHTML = '<div style="color: #22c55e;">‚óè Connecting to ' + podName + '/' + containerName + '...</div>';
            document.getElementById('terminal-modal').style.display = 'block';
            document.getElementById('terminal-input').value = '';
            document.getElementById('terminal-input').focus();

            // Set up Enter key to send command
            document.getElementById('terminal-input').onkeypress = function(e) {
                if (e.key === 'Enter') {
                    sendCommand();
                }
            };

            // Add welcome message
            setTimeout(() => {
                addTerminalOutput('‚óè Connected! Type commands below.', '#22c55e');
                addTerminalOutput('$ ', '#06b6d4', false);
            }, 500);
        }

        function closeTerminal() {
            if (terminalWs) {
                terminalWs.close();
                terminalWs = null;
            }
            document.getElementById('terminal-modal').style.display = 'none';
        }

        function sendCommand() {
            const input = document.getElementById('terminal-input');
            const command = input.value.trim();

            if (!command) return;

            // Display the command
            addTerminalOutput(command, '#e2e8f0');
            input.value = '';

            // Send command to backend
            fetch('/api/pod/exec', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    pod: currentPod,
                    container: currentContainer,
                    command: command
                })
            })
            .then(r => r.json())
            .then(data => {
                if (data.success) {
                    addTerminalOutput(data.output || '(no output)', '#94a3b8');
                } else {
                    addTerminalOutput('Error: ' + (data.error || 'Command failed'), '#ef4444');
                }
                addTerminalOutput('$ ', '#06b6d4', false);
            })
            .catch(err => {
                addTerminalOutput('Error: ' + err.message, '#ef4444');
                addTerminalOutput('$ ', '#06b6d4', false);
            });
        }

        function addTerminalOutput(text, color, newline = true) {
            const output = document.getElementById('terminal-output');
            const line = document.createElement('div');
            line.style.color = color || '#e2e8f0';
            line.style.whiteSpace = 'pre-wrap';
            line.style.wordBreak = 'break-all';
            if (!newline) {
                line.style.display = 'inline';
            }
            line.textContent = text;
            output.appendChild(line);
            output.scrollTop = output.scrollHeight;
        }

        // Port Forward functions
        let activePortForwards = [];

        function openPortForwardModal(type, name, namespace, defaultPort) {
            document.getElementById('pf-type').value = type;
            document.getElementById('pf-name').value = name;
            document.getElementById('pf-namespace').value = namespace || currentNamespace;
            document.getElementById('pf-resource-info').textContent = 'Forward ports for ' + type + ': ' + name;
            document.getElementById('pf-remote-port').value = defaultPort || '';
            document.getElementById('pf-local-port').value = '';
            document.getElementById('portforward-modal').style.display = 'flex';
        }

        function closePortForwardModal() {
            document.getElementById('portforward-modal').style.display = 'none';
        }

        function startPortForward() {
            const type = document.getElementById('pf-type').value;
            const name = document.getElementById('pf-name').value;
            const namespace = document.getElementById('pf-namespace').value;
            const remotePort = document.getElementById('pf-remote-port').value;
            const localPort = document.getElementById('pf-local-port').value;

            if (!remotePort) {
                alert('Remote port is required');
                return;
            }

            let url = '/api/portforward/start?type=' + encodeURIComponent(type) +
                '&name=' + encodeURIComponent(name) +
                '&namespace=' + encodeURIComponent(namespace) +
                '&remotePort=' + encodeURIComponent(remotePort);
            if (localPort) {
                url += '&localPort=' + encodeURIComponent(localPort);
            }

            fetch(url)
                .then(r => r.json())
                .then(data => {
                    if (data.success) {
                        closePortForwardModal();
                        refreshPortForwards();
                        alert('Port forward started!\\nLocal: localhost:' + data.localPort + ' -> Remote: ' + remotePort + '\\nURL: ' + data.url);
                    } else {
                        alert('Error: ' + (data.error || 'Failed to start port forward'));
                    }
                })
                .catch(err => alert('Error: ' + err.message));
        }

        function stopPortForward(sessionId) {
            fetch('/api/portforward/stop?id=' + encodeURIComponent(sessionId))
                .then(r => r.json())
                .then(data => {
                    if (data.success) {
                        refreshPortForwards();
                    } else {
                        alert('Error: ' + (data.error || 'Failed to stop port forward'));
                    }
                })
                .catch(err => alert('Error: ' + err.message));
        }

        function refreshPortForwards() {
            fetch('/api/portforward/list')
                .then(r => r.json())
                .then(data => {
                    if (data.success) {
                        activePortForwards = data.sessions || [];
                        updatePortForwardsUI();
                    }
                })
                .catch(err => console.error('Error fetching port forwards:', err));
        }

        function updatePortForwardsUI() {
            const count = activePortForwards.length;
            const toggleBtn = document.getElementById('portforwards-toggle');
            const badge = document.getElementById('pf-count-badge');
            const list = document.getElementById('portforwards-list');

            if (count > 0) {
                toggleBtn.style.display = 'block';
                badge.textContent = count;

                let html = '';
                activePortForwards.forEach(pf => {
                    html += '<div style="background: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 8px; padding: 0.75rem; margin-bottom: 0.5rem;">' +
                        '<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">' +
                        '<span style="color: #22c55e; font-weight: 600; font-size: 0.875rem;">' + pf.type + '/' + pf.name + '</span>' +
                        '<button onclick="stopPortForward(\'' + pf.id + '\')" style="background: #ef4444; border: none; border-radius: 4px; color: white; padding: 0.25rem 0.5rem; cursor: pointer; font-size: 0.75rem;">Stop</button>' +
                        '</div>' +
                        '<div style="color: #94a3b8; font-size: 0.75rem;">localhost:' + pf.localPort + ' -> :' + pf.remotePort + '</div>' +
                        '<div style="display: flex; justify-content: space-between; align-items: center; margin-top: 0.5rem;">' +
                        '<span style="color: #64748b; font-size: 0.7rem;">Running: ' + pf.duration + '</span>' +
                        '<a href="' + pf.url + '" target="_blank" style="color: #06b6d4; font-size: 0.75rem; text-decoration: none;">Open</a>' +
                        '</div>' +
                        '</div>';
                });
                list.innerHTML = html;
            } else {
                toggleBtn.style.display = 'none';
                document.getElementById('portforwards-panel').style.display = 'none';
            }
        }

        function togglePortForwardsPanel() {
            const panel = document.getElementById('portforwards-panel');
            panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
        }

        // Refresh port forwards on load
        setInterval(refreshPortForwards, 10000);
        setTimeout(refreshPortForwards, 1000);

        // Node details functions
        let currentNodeName = '';

        function showNodeDetails(name) {
            currentNodeName = name;
            loadNodeDetailsContent();
            document.getElementById('node-details-modal').style.display = 'block';
        }

        function closeNodeDetails() {
            document.getElementById('node-details-modal').style.display = 'none';
        }

        function loadNodeDetailsContent() {
            fetch('/api/node/details?name=' + currentNodeName)
                .then(r => r.json())
                .then(data => {
                    let html = '<h2 style="color: #06b6d4; margin-bottom: 1.5rem;">' + data.name + '</h2>';
                    html += '<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5rem; margin-bottom: 2rem;">';
                    html += '<div style="background: rgba(6, 182, 212, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(6, 182, 212, 0.3);">' +
                            '<div style="color: #94a3b8; font-size: 0.875rem;">Status</div>' +
                            '<div style="color: ' + (data.status === 'Ready' ? '#22c55e' : '#ef4444') + '; font-size: 1.25rem; font-weight: 600; margin-top: 0.25rem;">' + data.status + '</div></div>';
                    html += '<div style="background: rgba(249, 115, 22, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(249, 115, 22, 0.3);">' +
                            '<div style="color: #94a3b8; font-size: 0.875rem;">Roles</div>' +
                            '<div style="color: #f97316; font-size: 1.25rem; font-weight: 600; margin-top: 0.25rem;">' + data.roles + '</div></div>';
                    html += '<div style="background: rgba(168, 85, 247, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(168, 85, 247, 0.3);">' +
                            '<div style="color: #94a3b8; font-size: 0.875rem;">Version</div>' +
                            '<div style="color: #a855f7; font-size: 1.25rem; font-weight: 600; margin-top: 0.25rem;">' + data.version + '</div></div>';
                    html += '<div style="background: rgba(34, 197, 94, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(34, 197, 94, 0.3);">' +
                            '<div style="color: #94a3b8; font-size: 0.875rem;">CPU</div>' +
                            '<div style="color: #22c55e; font-size: 1.25rem; font-weight: 600; margin-top: 0.25rem;">' + data.cpu + '</div></div>';
                    html += '<div style="background: rgba(59, 130, 246, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(59, 130, 246, 0.3);">' +
                            '<div style="color: #94a3b8; font-size: 0.875rem;">Memory</div>' +
                            '<div style="color: #3b82f6; font-size: 1.25rem; font-weight: 600; margin-top: 0.25rem;">' + data.memory + '</div></div>';
                    html += '<div style="background: rgba(234, 179, 8, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(234, 179, 8, 0.3);">' +
                            '<div style="color: #94a3b8; font-size: 0.875rem;">OS Image</div>' +
                            '<div style="color: #eab308; font-size: 1.25rem; font-weight: 600; margin-top: 0.25rem;">' + (data.osImage || '-') + '</div></div>';
                    html += '</div>';
                    html += '<div style="margin-top: 1.5rem;"><h3 style="color: #06b6d4; margin-bottom: 1rem;">System Info</h3>';
                    html += '<pre style="background: #0f172a; padding: 1.5rem; border-radius: 8px; color: #e2e8f0; overflow-x: auto; border: 1px solid #475569; line-height: 1.5;">' + JSON.stringify(data, null, 2) + '</pre></div>';
                    document.getElementById('node-details-content').innerHTML = html;
                });
        }

        function showNodeYAML(name) {
            currentNodeName = name;
            fetch('/api/node/yaml?name=' + name)
                .then(r => r.json())
                .then(data => {
                    document.getElementById('node-details-modal').style.display = 'block';
                    let html = '<h2 style="color: #06b6d4; margin-bottom: 1.5rem;">Node YAML: ' + name + '</h2>';
                    html += '<button onclick="copyToClipboard(document.querySelector(\'#node-details-content pre\').innerText, \'YAML\')" style="margin-bottom: 1rem; padding: 0.5rem 1rem; background: #475569; border: none; border-radius: 6px; color: white; cursor: pointer;">Copy YAML</button>';
                    html += '<pre style="background: #0f172a; padding: 1.5rem; border-radius: 8px; color: #e2e8f0; overflow-x: auto; border: 1px solid #475569; line-height: 1.5;">' + data.yaml + '</pre>';
                    document.getElementById('node-details-content').innerHTML = html;
                });
        }

        function showNodeDescribe(name) {
            currentNodeName = name;
            fetch('/api/node/describe?name=' + name)
                .then(r => r.json())
                .then(data => {
                    document.getElementById('node-details-modal').style.display = 'block';
                    let html = '<h2 style="color: #06b6d4; margin-bottom: 1.5rem;">Node Describe: ' + name + '</h2>';
                    html += '<pre style="background: #0f172a; padding: 1.5rem; border-radius: 8px; color: #e2e8f0; overflow-x: auto; border: 1px solid #475569; line-height: 1.5;">' + data.describe + '</pre>';
                    document.getElementById('node-details-content').innerHTML = html;
                });
        }

        // Load namespaces
        function loadNamespaces() {
            return fetch('/api/namespaces')
                .then(r => r.json())
                .then(data => {
                    const selector = document.getElementById('namespace-selector');
                    // Add "All Namespaces" option first
                    let options = '<option value="">All Namespaces</option>';
                    options += data.namespaces.map(ns =>
                        '<option value="' + ns + '"' + (ns === 'default' ? ' selected' : '') + '>' + ns + '</option>'
                    ).join('');
                    selector.innerHTML = options;
                    // Set currentNamespace to match selector
                    currentNamespace = selector.value;
                });
        }

        // Change namespace
        function changeNamespace(namespace) {
            currentNamespace = namespace;
            console.log('Namespace changed to:', namespace);
            // Refresh current tab
            if (currentTab === 'pods') {
                loadPods();
            } else if (currentTab === 'deployments') {
                loadDeployments();
            } else if (currentTab === 'services') {
                loadServices();
            } else if (currentTab === 'statefulsets') {
                loadStatefulSets();
            } else if (currentTab === 'daemonsets') {
                loadDaemonSets();
            } else if (currentTab === 'cronjobs') {
                loadCronJobs();
            } else if (currentTab === 'jobs') {
                loadJobs();
            } else if (currentTab === 'nodes') {
                loadNodes();
            } else if (currentTab === 'configmaps') {
                loadConfigMaps();
            } else if (currentTab === 'ingresses') {
                loadIngresses();
            } else if (currentTab === 'dashboard') {
                loadResourceOverview();
                loadDashboardSecuritySummary();
            } else if (currentTab === 'security') {
                loadSecurity();
            } else if (currentTab === 'helm') {
                loadHelmReleases();
            } else if (currentTab === 'kustomize') {
                loadKustomizeResources();
            } else if (currentTab === 'argocd') {
                loadArgoCDApps();
            } else if (currentTab === 'flux') {
                loadFluxResources();
            }
        }

        // Helper function to parse age string to milliseconds
        function parseAge(ageStr) {
            const parts = ageStr.match(/(\d+)([a-z]+)/ig);
            if (!parts) return 0;
            let ms = 0;
            parts.forEach(part => {
                const match = part.match(/(\d+)([a-z]+)/i);
                if (match) {
                    const value = parseInt(match[1]);
                    const unit = match[2];
                    if (unit.startsWith('s')) ms += value * 1000;
                    else if (unit.startsWith('m')) ms += value * 60 * 1000;
                    else if (unit.startsWith('h')) ms += value * 60 * 60 * 1000;
                    else if (unit.startsWith('d')) ms += value * 24 * 60 * 60 * 1000;
                }
            });
            return ms;
        }

        // Pods filter and sort functions
        function filterPods() {
            const searchTerm = (document.getElementById('pods-search')?.value || '').toLowerCase();
            const statusFilter = document.getElementById('pods-status-filter').value;
            const ageFilter = document.getElementById('pods-age-filter').value;

            let filtered = podsData;

            // Search filter
            if (searchTerm) {
                filtered = filtered.filter(p =>
                    p.name.toLowerCase().includes(searchTerm) ||
                    p.node?.toLowerCase().includes(searchTerm) ||
                    p.ip?.toLowerCase().includes(searchTerm)
                );
            }

            if (statusFilter) {
                filtered = filtered.filter(p => p.status === statusFilter);
            }

            if (ageFilter) {
                const ageMs = { '1h': 3600000, '1d': 86400000, '7d': 604800000, '30d': 2592000000 }[ageFilter];
                filtered = filtered.filter(p => parseAge(p.age) < ageMs);
            }

            // Store filtered data and reset to page 1
            paginationState.pods.filteredData = filtered;
            paginationState.pods.page = 1;
            renderPaginatedTable('pods');
        }

        function sortPods() {
            const sortBy = document.getElementById('pods-sort').value;
            const sorted = [...podsData];

            if (sortBy === 'name') {
                sorted.sort((a, b) => a.name.localeCompare(b.name));
            } else if (sortBy === 'age') {
                sorted.sort((a, b) => parseAge(b.age) - parseAge(a.age));
            } else if (sortBy === 'status') {
                sorted.sort((a, b) => a.status.localeCompare(b.status));
            }

            podsData = sorted;
            filterPods();
        }

        function clearFiltersPods() {
            const searchEl = document.getElementById('pods-search');
            if (searchEl) searchEl.value = '';
            document.getElementById('pods-status-filter').value = '';
            document.getElementById('pods-age-filter').value = '';
            document.getElementById('pods-sort').value = 'name';
            paginationState.pods.filteredData = podsData;
            paginationState.pods.page = 1;
            renderPaginatedTable('pods');
        }

        // Render function for pods (used by pagination)
        function renderPodsRows(pods) {
            const tbody = document.getElementById('pods-tbody');
            if (pods.length === 0) {
                tbody.innerHTML = '<tr><td colspan="10" style="text-align: center; padding: 2rem; color: #94a3b8;">No pods found</td></tr>';
                return;
            }
            tbody.innerHTML = pods.map(pod =>
                '<tr onclick="showPodDetails(\'' + pod.name + '\', \'' + pod.namespace + '\')" style="cursor: pointer;" onmouseover="this.style.background=\'rgba(6, 182, 212, 0.1)\'" onmouseout="this.style.background=\'transparent\'">' +
                    '<td>' + pod.name + '</td>' +
                    '<td><span class="badge badge-' + (pod.status === 'Running' ? 'success' : 'warning') + '">' + pod.status + '</span></td>' +
                    '<td>' + pod.ready + '</td>' +
                    '<td>' + pod.restarts + '</td>' +
                    '<td><span style="color: #ec4899; font-weight: 600;">' + (pod.cpu || '-') + '</span></td>' +
                    '<td><span style="color: #f59e0b; font-weight: 600;">' + (pod.memory || '-') + '</span></td>' +
                    '<td>' + pod.ip + '</td>' +
                    '<td>' + pod.node + '</td>' +
                    '<td>' + pod.age + '</td>' +
                    '<td onclick="event.stopPropagation()">' +
                        '<button onclick="restartPod(\'' + pod.name + '\', \'' + pod.namespace + '\')" style="padding: 0.25rem 0.75rem; margin-right: 0.5rem; background: #f97316; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.875rem;">Restart</button>' +
                        '<button onclick="deletePod(\'' + pod.name + '\', \'' + pod.namespace + '\')" style="padding: 0.25rem 0.75rem; background: #ef4444; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.875rem;">Delete</button>' +
                    '</td>' +
                '</tr>'
            ).join('');
        }

        function displayPods(pods) {
            paginationState.pods.filteredData = pods;
            paginationState.pods.page = 1;
            renderPaginatedTable('pods');
        }

        // Deployments filter and sort functions
        function filterDeployments() {
            const searchTerm = (document.getElementById('deployments-search')?.value || '').toLowerCase();
            const ageFilter = document.getElementById('deployments-age-filter').value;
            let filtered = deploymentsData;

            if (searchTerm) {
                filtered = filtered.filter(d => d.name.toLowerCase().includes(searchTerm));
            }
            if (ageFilter) {
                const ageMs = { '1h': 3600000, '1d': 86400000, '7d': 604800000, '30d': 2592000000 }[ageFilter];
                filtered = filtered.filter(d => parseAge(d.age) < ageMs);
            }

            paginationState.deployments.filteredData = filtered;
            paginationState.deployments.page = 1;
            renderPaginatedTable('deployments');
        }

        function sortDeployments() {
            const sortBy = document.getElementById('deployments-sort').value;
            const sorted = [...deploymentsData];
            if (sortBy === 'name') sorted.sort((a, b) => a.name.localeCompare(b.name));
            else if (sortBy === 'age') sorted.sort((a, b) => parseAge(b.age) - parseAge(a.age));
            deploymentsData = sorted;
            filterDeployments();
        }

        function clearFiltersDeployments() {
            const searchEl = document.getElementById('deployments-search');
            if (searchEl) searchEl.value = '';
            document.getElementById('deployments-age-filter').value = '';
            document.getElementById('deployments-sort').value = 'name';
            paginationState.deployments.filteredData = deploymentsData;
            paginationState.deployments.page = 1;
            renderPaginatedTable('deployments');
        }

        function renderDeploymentsRows(deps) {
            const tbody = document.getElementById('deployments-tbody');
            if (deps.length === 0) {
                tbody.innerHTML = '<tr><td colspan="5" style="text-align: center; padding: 2rem; color: #94a3b8;">No deployments found</td></tr>';
                return;
            }
            tbody.innerHTML = deps.map(dep =>
                '<tr onclick="showDeploymentDetails(\'' + dep.name + '\')" style="cursor: pointer;" onmouseover="this.style.background=\'rgba(6, 182, 212, 0.1)\'" onmouseout="this.style.background=\'transparent\'">' +
                    '<td>' + dep.name + '</td>' +
                    '<td>' + dep.ready + '</td>' +
                    '<td>' + dep.available + '</td>' +
                    '<td>' + dep.age + '</td>' +
                    '<td onclick="event.stopPropagation()">' +
                        '<button onclick="restartDeployment(\'' + dep.name + '\')" style="padding: 0.25rem 0.75rem; margin-right: 0.5rem; background: #f97316; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.875rem;">Restart</button>' +
                        '<button onclick="deleteDeployment(\'' + dep.name + '\')" style="padding: 0.25rem 0.75rem; background: #ef4444; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.875rem;">Delete</button>' +
                    '</td>' +
                '</tr>'
            ).join('');
        }

        function displayDeployments(deps) { paginationState.deployments.filteredData = deps; paginationState.deployments.page = 1; renderPaginatedTable('deployments'); }

        // StatefulSets filter functions
        function filterStatefulSets() {
            const searchTerm = (document.getElementById('statefulsets-search')?.value || '').toLowerCase();
            const ageFilter = document.getElementById('statefulsets-age-filter').value;
            let filtered = statefulSetsData;
            if (searchTerm) filtered = filtered.filter(s => s.name.toLowerCase().includes(searchTerm));
            if (ageFilter) { const ageMs = { '1h': 3600000, '1d': 86400000, '7d': 604800000, '30d': 2592000000 }[ageFilter]; filtered = filtered.filter(s => parseAge(s.age) < ageMs); }
            paginationState.statefulsets.filteredData = filtered; paginationState.statefulsets.page = 1; renderPaginatedTable('statefulsets');
        }
        function sortStatefulSets() { const sortBy = document.getElementById('statefulsets-sort').value; const sorted = [...statefulSetsData]; if (sortBy === 'name') sorted.sort((a, b) => a.name.localeCompare(b.name)); else if (sortBy === 'age') sorted.sort((a, b) => parseAge(b.age) - parseAge(a.age)); statefulSetsData = sorted; filterStatefulSets(); }
        function clearFiltersStatefulSets() { const el = document.getElementById('statefulsets-search'); if (el) el.value = ''; document.getElementById('statefulsets-age-filter').value = ''; document.getElementById('statefulsets-sort').value = 'name'; paginationState.statefulsets.filteredData = statefulSetsData; paginationState.statefulsets.page = 1; renderPaginatedTable('statefulsets'); }
        function renderStatefulSetsRows(ssets) { const tbody = document.getElementById('statefulsets-tbody'); if (ssets.length === 0) { tbody.innerHTML = '<tr><td colspan="5" style="text-align: center; padding: 2rem; color: #94a3b8;">No statefulsets found</td></tr>'; return; } tbody.innerHTML = ssets.map(ss => '<tr onclick="showStatefulSetDetails(\'' + ss.name + '\')" style="cursor: pointer;" onmouseover="this.style.background=\'rgba(6, 182, 212, 0.1)\'" onmouseout="this.style.background=\'transparent\'"><td>' + ss.name + '</td><td>' + ss.ready + '</td><td>' + (ss.service || '-') + '</td><td>' + ss.age + '</td><td onclick="event.stopPropagation()"><button onclick="restartStatefulSet(\'' + ss.name + '\')" style="padding: 0.25rem 0.75rem; margin-right: 0.5rem; background: #f97316; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.875rem;">Restart</button><button onclick="deleteStatefulSet(\'' + ss.name + '\')" style="padding: 0.25rem 0.75rem; background: #ef4444; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.875rem;">Delete</button></td></tr>').join(''); }
        function displayStatefulSets(ssets) { paginationState.statefulsets.filteredData = ssets; paginationState.statefulsets.page = 1; renderPaginatedTable('statefulsets'); }

        // DaemonSets filter functions
        function filterDaemonSets() {
            const searchTerm = (document.getElementById('daemonsets-search')?.value || '').toLowerCase();
            const ageFilter = document.getElementById('daemonsets-age-filter').value;
            let filtered = daemonSetsData;
            if (searchTerm) filtered = filtered.filter(d => d.name.toLowerCase().includes(searchTerm));
            if (ageFilter) { const ageMs = { '1h': 3600000, '1d': 86400000, '7d': 604800000, '30d': 2592000000 }[ageFilter]; filtered = filtered.filter(d => parseAge(d.age) < ageMs); }
            paginationState.daemonsets.filteredData = filtered; paginationState.daemonsets.page = 1; renderPaginatedTable('daemonsets');
        }
        function sortDaemonSets() { const sortBy = document.getElementById('daemonsets-sort').value; const sorted = [...daemonSetsData]; if (sortBy === 'name') sorted.sort((a, b) => a.name.localeCompare(b.name)); else if (sortBy === 'age') sorted.sort((a, b) => parseAge(b.age) - parseAge(a.age)); daemonSetsData = sorted; filterDaemonSets(); }
        function clearFiltersDaemonSets() { const el = document.getElementById('daemonsets-search'); if (el) el.value = ''; document.getElementById('daemonsets-age-filter').value = ''; document.getElementById('daemonsets-sort').value = 'name'; paginationState.daemonsets.filteredData = daemonSetsData; paginationState.daemonsets.page = 1; renderPaginatedTable('daemonsets'); }
        function renderDaemonSetsRows(dsets) { const tbody = document.getElementById('daemonsets-tbody'); if (dsets.length === 0) { tbody.innerHTML = '<tr><td colspan="6" style="text-align: center; padding: 2rem; color: #94a3b8;">No daemonsets found</td></tr>'; return; } tbody.innerHTML = dsets.map(ds => '<tr onclick="showDaemonSetDetails(\'' + ds.name + '\')" style="cursor: pointer;" onmouseover="this.style.background=\'rgba(6, 182, 212, 0.1)\'" onmouseout="this.style.background=\'transparent\'"><td>' + ds.name + '</td><td>' + ds.desired + '</td><td>' + ds.current + '</td><td>' + ds.ready + '</td><td>' + ds.age + '</td><td onclick="event.stopPropagation()"><button onclick="restartDaemonSet(\'' + ds.name + '\')" style="padding: 0.25rem 0.75rem; margin-right: 0.5rem; background: #f97316; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.875rem;">Restart</button><button onclick="deleteDaemonSet(\'' + ds.name + '\')" style="padding: 0.25rem 0.75rem; background: #ef4444; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.875rem;">Delete</button></td></tr>').join(''); }
        function displayDaemonSets(dsets) { paginationState.daemonsets.filteredData = dsets; paginationState.daemonsets.page = 1; renderPaginatedTable('daemonsets'); }

        // Services filter functions
        function filterServices() {
            const searchTerm = (document.getElementById('services-search')?.value || '').toLowerCase();
            const typeFilter = document.getElementById('services-type-filter').value;
            const ageFilter = document.getElementById('services-age-filter').value;
            let filtered = servicesData;
            if (searchTerm) filtered = filtered.filter(s => s.name.toLowerCase().includes(searchTerm) || s.clusterIP?.toLowerCase().includes(searchTerm));
            if (typeFilter) filtered = filtered.filter(s => s.type === typeFilter);
            if (ageFilter) { const ageMs = { '1h': 3600000, '1d': 86400000, '7d': 604800000, '30d': 2592000000 }[ageFilter]; filtered = filtered.filter(s => parseAge(s.age) < ageMs); }
            paginationState.services.filteredData = filtered; paginationState.services.page = 1; renderPaginatedTable('services');
        }
        function sortServices() { const sortBy = document.getElementById('services-sort').value; const sorted = [...servicesData]; if (sortBy === 'name') sorted.sort((a, b) => a.name.localeCompare(b.name)); else if (sortBy === 'age') sorted.sort((a, b) => parseAge(b.age) - parseAge(a.age)); else if (sortBy === 'type') sorted.sort((a, b) => a.type.localeCompare(b.type)); servicesData = sorted; filterServices(); }
        function clearFiltersServices() { const el = document.getElementById('services-search'); if (el) el.value = ''; document.getElementById('services-type-filter').value = ''; document.getElementById('services-age-filter').value = ''; document.getElementById('services-sort').value = 'name'; paginationState.services.filteredData = servicesData; paginationState.services.page = 1; renderPaginatedTable('services'); }
        function renderServicesRows(svcs) { const tbody = document.getElementById('services-tbody'); if (svcs.length === 0) { tbody.innerHTML = '<tr><td colspan="6" style="text-align: center; padding: 2rem; color: #94a3b8;">No services found</td></tr>'; return; } tbody.innerHTML = svcs.map(svc => '<tr onclick="showServiceDetails(\'' + svc.name + '\', \'' + svc.namespace + '\')" style="cursor: pointer;" onmouseover="this.style.background=\'rgba(6, 182, 212, 0.1)\'" onmouseout="this.style.background=\'transparent\'"><td>' + svc.name + '</td><td>' + svc.type + '</td><td>' + svc.clusterIP + '</td><td>' + svc.ports + '</td><td>' + svc.age + '</td><td onclick="event.stopPropagation()"><button onclick="deleteService(\'' + svc.name + '\', \'' + svc.namespace + '\')" style="padding: 0.25rem 0.75rem; background: #ef4444; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.875rem;">Delete</button></td></tr>').join(''); }
        function displayServices(svcs) { paginationState.services.filteredData = svcs; paginationState.services.page = 1; renderPaginatedTable('services'); }

        // Ingresses filter functions
        function filterIngresses() {
            const searchTerm = (document.getElementById('ingresses-search')?.value || '').toLowerCase();
            const ageFilter = document.getElementById('ingresses-age-filter').value;
            let filtered = ingressesData;
            if (searchTerm) filtered = filtered.filter(i => i.name.toLowerCase().includes(searchTerm) || i.hosts?.toLowerCase().includes(searchTerm));
            if (ageFilter) { const ageMs = { '1h': 3600000, '1d': 86400000, '7d': 604800000, '30d': 2592000000 }[ageFilter]; filtered = filtered.filter(i => parseAge(i.age) < ageMs); }
            paginationState.ingresses.filteredData = filtered; paginationState.ingresses.page = 1; renderPaginatedTable('ingresses');
        }
        function sortIngresses() { const sortBy = document.getElementById('ingresses-sort').value; const sorted = [...ingressesData]; if (sortBy === 'name') sorted.sort((a, b) => a.name.localeCompare(b.name)); else if (sortBy === 'age') sorted.sort((a, b) => parseAge(b.age) - parseAge(a.age)); ingressesData = sorted; filterIngresses(); }
        function clearFiltersIngresses() { const el = document.getElementById('ingresses-search'); if (el) el.value = ''; document.getElementById('ingresses-age-filter').value = ''; document.getElementById('ingresses-sort').value = 'name'; paginationState.ingresses.filteredData = ingressesData; paginationState.ingresses.page = 1; renderPaginatedTable('ingresses'); }
        function renderIngressesRows(ingresses) { const tbody = document.getElementById('ingresses-tbody'); if (ingresses.length === 0) { tbody.innerHTML = '<tr><td colspan="3" style="text-align: center; padding: 2rem; color: #94a3b8;">No ingresses found</td></tr>'; return; } tbody.innerHTML = ingresses.map(ing => '<tr onclick="showIngressDetails(\'' + ing.name + '\')" style="cursor: pointer;" onmouseover="this.style.background=\'rgba(6, 182, 212, 0.1)\'" onmouseout="this.style.background=\'transparent\'"><td>' + ing.name + '</td><td>' + (ing.hosts || '-') + '</td><td>' + ing.age + '</td></tr>').join(''); }
        function displayIngresses(ingresses) { paginationState.ingresses.filteredData = ingresses; paginationState.ingresses.page = 1; renderPaginatedTable('ingresses'); }

        // ConfigMaps filter functions
        function filterConfigMaps() {
            const searchTerm = (document.getElementById('configmaps-search')?.value || '').toLowerCase();
            const ageFilter = document.getElementById('configmaps-age-filter').value;
            let filtered = configMapsData;
            if (searchTerm) filtered = filtered.filter(c => c.name.toLowerCase().includes(searchTerm));
            if (ageFilter) { const ageMs = { '1h': 3600000, '1d': 86400000, '7d': 604800000, '30d': 2592000000 }[ageFilter]; filtered = filtered.filter(c => parseAge(c.age) < ageMs); }
            paginationState.configmaps.filteredData = filtered; paginationState.configmaps.page = 1; renderPaginatedTable('configmaps');
        }
        function sortConfigMaps() { const sortBy = document.getElementById('configmaps-sort').value; const sorted = [...configMapsData]; if (sortBy === 'name') sorted.sort((a, b) => a.name.localeCompare(b.name)); else if (sortBy === 'age') sorted.sort((a, b) => parseAge(b.age) - parseAge(a.age)); configMapsData = sorted; filterConfigMaps(); }
        function clearFiltersConfigMaps() { const el = document.getElementById('configmaps-search'); if (el) el.value = ''; document.getElementById('configmaps-age-filter').value = ''; document.getElementById('configmaps-sort').value = 'name'; paginationState.configmaps.filteredData = configMapsData; paginationState.configmaps.page = 1; renderPaginatedTable('configmaps'); }
        function renderConfigMapsRows(cms) { const tbody = document.getElementById('configmaps-tbody'); if (cms.length === 0) { tbody.innerHTML = '<tr><td colspan="3" style="text-align: center; padding: 2rem; color: #94a3b8;">No configmaps found</td></tr>'; return; } tbody.innerHTML = cms.map(cm => '<tr onclick="showConfigMapDetails(\'' + cm.name + '\')" style="cursor: pointer;" onmouseover="this.style.background=\'rgba(6, 182, 212, 0.1)\'" onmouseout="this.style.background=\'transparent\'"><td>' + cm.name + '</td><td>' + (cm.keys || '-') + '</td><td>' + cm.age + '</td></tr>').join(''); }
        function displayConfigMaps(cms) { paginationState.configmaps.filteredData = cms; paginationState.configmaps.page = 1; renderPaginatedTable('configmaps'); }

        // CronJobs filter functions
        function filterCronJobs() {
            const searchTerm = (document.getElementById('cronjobs-search')?.value || '').toLowerCase();
            const ageFilter = document.getElementById('cronjobs-age-filter').value;
            let filtered = cronJobsData;
            if (searchTerm) filtered = filtered.filter(c => c.name.toLowerCase().includes(searchTerm) || c.schedule?.toLowerCase().includes(searchTerm));
            if (ageFilter) { const ageMs = { '1h': 3600000, '1d': 86400000, '7d': 604800000, '30d': 2592000000 }[ageFilter]; filtered = filtered.filter(c => parseAge(c.age) < ageMs); }
            paginationState.cronjobs.filteredData = filtered; paginationState.cronjobs.page = 1; renderPaginatedTable('cronjobs');
        }
        function sortCronJobs() { const sortBy = document.getElementById('cronjobs-sort').value; const sorted = [...cronJobsData]; if (sortBy === 'name') sorted.sort((a, b) => a.name.localeCompare(b.name)); else if (sortBy === 'age') sorted.sort((a, b) => parseAge(b.age) - parseAge(a.age)); cronJobsData = sorted; filterCronJobs(); }
        function clearFiltersCronJobs() { const el = document.getElementById('cronjobs-search'); if (el) el.value = ''; document.getElementById('cronjobs-age-filter').value = ''; document.getElementById('cronjobs-sort').value = 'name'; paginationState.cronjobs.filteredData = cronJobsData; paginationState.cronjobs.page = 1; renderPaginatedTable('cronjobs'); }
        function renderCronJobsRows(cjs) { const tbody = document.getElementById('cronjobs-tbody'); if (cjs.length === 0) { tbody.innerHTML = '<tr><td colspan="7" style="text-align: center; padding: 2rem; color: #94a3b8;">No cronjobs found</td></tr>'; return; } tbody.innerHTML = cjs.map(cj => '<tr onclick="showCronJobDetails(\'' + cj.name + '\')" style="cursor: pointer;" onmouseover="this.style.background=\'rgba(6, 182, 212, 0.1)\'" onmouseout="this.style.background=\'transparent\'"><td>' + cj.name + '</td><td>' + cj.schedule + '</td><td>' + (cj.suspend ? 'Yes' : 'No') + '</td><td>' + cj.active + '</td><td>' + (cj.lastSchedule || '-') + '</td><td>' + cj.age + '</td><td onclick="event.stopPropagation()"><button onclick="deleteCronJob(\'' + cj.name + '\')" style="padding: 0.25rem 0.75rem; background: #ef4444; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.875rem;">Delete</button></td></tr>').join(''); }
        function displayCronJobs(cjs) { paginationState.cronjobs.filteredData = cjs; paginationState.cronjobs.page = 1; renderPaginatedTable('cronjobs'); }

        // Jobs filter functions
        function filterJobs() {
            const searchTerm = (document.getElementById('jobs-search')?.value || '').toLowerCase();
            const statusFilter = document.getElementById('jobs-status-filter').value;
            const ageFilter = document.getElementById('jobs-age-filter').value;
            let filtered = jobsData;
            if (searchTerm) filtered = filtered.filter(j => j.name.toLowerCase().includes(searchTerm));
            if (statusFilter) filtered = filtered.filter(j => j.status === statusFilter);
            if (ageFilter) { const ageMs = { '1h': 3600000, '1d': 86400000, '7d': 604800000, '30d': 2592000000 }[ageFilter]; filtered = filtered.filter(j => parseAge(j.age) < ageMs); }
            paginationState.jobs.filteredData = filtered; paginationState.jobs.page = 1; renderPaginatedTable('jobs');
        }
        function sortJobs() { const sortBy = document.getElementById('jobs-sort').value; const sorted = [...jobsData]; if (sortBy === 'name') sorted.sort((a, b) => a.name.localeCompare(b.name)); else if (sortBy === 'age') sorted.sort((a, b) => parseAge(b.age) - parseAge(a.age)); else if (sortBy === 'status') sorted.sort((a, b) => a.status.localeCompare(b.status)); jobsData = sorted; filterJobs(); }
        function clearFiltersJobs() { const el = document.getElementById('jobs-search'); if (el) el.value = ''; document.getElementById('jobs-status-filter').value = ''; document.getElementById('jobs-age-filter').value = ''; document.getElementById('jobs-sort').value = 'name'; paginationState.jobs.filteredData = jobsData; paginationState.jobs.page = 1; renderPaginatedTable('jobs'); }
        function renderJobsRows(jobs) { const tbody = document.getElementById('jobs-tbody'); if (jobs.length === 0) { tbody.innerHTML = '<tr><td colspan="6" style="text-align: center; padding: 2rem; color: #94a3b8;">No jobs found</td></tr>'; return; } tbody.innerHTML = jobs.map(job => '<tr onclick="showJobDetails(\'' + job.name + '\')" style="cursor: pointer;" onmouseover="this.style.background=\'rgba(6, 182, 212, 0.1)\'" onmouseout="this.style.background=\'transparent\'"><td>' + job.name + '</td><td><span class="badge badge-' + (job.status === 'Complete' ? 'success' : job.status === 'Failed' ? 'error' : 'warning') + '">' + job.status + '</span></td><td>' + job.completions + '</td><td>' + (job.duration || '-') + '</td><td>' + job.age + '</td><td onclick="event.stopPropagation()"><button onclick="deleteJob(\'' + job.name + '\')" style="padding: 0.25rem 0.75rem; background: #ef4444; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.875rem;">Delete</button></td></tr>').join(''); }
        function displayJobs(jobs) { paginationState.jobs.filteredData = jobs; paginationState.jobs.page = 1; renderPaginatedTable('jobs'); }

        // Nodes filter functions
        function filterNodes() {
            const searchTerm = (document.getElementById('nodes-search')?.value || '').toLowerCase();
            const statusFilter = document.getElementById('nodes-status-filter').value;
            const roleFilter = document.getElementById('nodes-role-filter').value;
            let filtered = nodesData;
            if (searchTerm) filtered = filtered.filter(n => n.name.toLowerCase().includes(searchTerm) || n.version?.toLowerCase().includes(searchTerm));
            if (statusFilter) filtered = filtered.filter(n => n.status === statusFilter);
            if (roleFilter) filtered = filtered.filter(n => n.roles === roleFilter);
            paginationState.nodes.filteredData = filtered; paginationState.nodes.page = 1; renderPaginatedTable('nodes');
        }
        function sortNodes() { const sortBy = document.getElementById('nodes-sort').value; const sorted = [...nodesData]; if (sortBy === 'name') sorted.sort((a, b) => a.name.localeCompare(b.name)); else if (sortBy === 'status') sorted.sort((a, b) => a.status.localeCompare(b.status)); else if (sortBy === 'role') sorted.sort((a, b) => a.roles.localeCompare(b.roles)); nodesData = sorted; filterNodes(); }
        function clearFiltersNodes() { const el = document.getElementById('nodes-search'); if (el) el.value = ''; document.getElementById('nodes-status-filter').value = ''; document.getElementById('nodes-role-filter').value = ''; document.getElementById('nodes-sort').value = 'name'; paginationState.nodes.filteredData = nodesData; paginationState.nodes.page = 1; renderPaginatedTable('nodes'); }
        function renderNodesRows(nodes) { const tbody = document.getElementById('nodes-tbody'); if (nodes.length === 0) { tbody.innerHTML = '<tr><td colspan="8" style="text-align: center; padding: 2rem; color: #94a3b8;">No nodes found</td></tr>'; return; } tbody.innerHTML = nodes.map(node => '<tr onclick="showNodeDetails(\'' + node.name + '\')" style="cursor: pointer;" onmouseover="this.style.background=\'rgba(6, 182, 212, 0.1)\'" onmouseout="this.style.background=\'transparent\'"><td>' + node.name + '</td><td><span class="badge badge-' + (node.status === 'Ready' ? 'success' : 'error') + '">' + node.status + '</span></td><td>' + node.roles + '</td><td>' + node.version + '</td><td><span style="color: #ec4899; font-weight: 600;">' + node.cpu + '</span> / <span style="color: #ec4899;">' + (node.cpuUsage || '-') + '</span></td><td><span style="color: #f59e0b; font-weight: 600;">' + node.memory + '</span> / <span style="color: #f59e0b;">' + (node.memoryUsage || '-') + '</span></td><td>' + node.age + '</td><td><button onclick="event.stopPropagation(); showNodeDetails(\'' + node.name + '\')" style="padding: 0.25rem 0.75rem; background: #06b6d4; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.875rem;">Details</button></td></tr>').join(''); }
        function displayNodes(nodes) { paginationState.nodes.filteredData = nodes; paginationState.nodes.page = 1; renderPaginatedTable('nodes'); }

        // Connection status tracking
        let isConnected = true;

        function checkConnectionStatus() {
            return fetch('/api/status')
                .then(r => r.json())
                .then(data => {
                    isConnected = data.connected;
                    const dot = document.getElementById('connection-dot');
                    const text = document.getElementById('connection-text');
                    const banner = document.getElementById('connection-error-banner');
                    const errorMsg = document.getElementById('connection-error-message');

                    if (data.connected) {
                        dot.style.background = '#22c55e';
                        dot.style.boxShadow = '0 0 8px rgba(34, 197, 94, 0.6)';
                        text.textContent = 'Connected';
                        banner.style.display = 'none';
                        if (data.cluster) {
                            document.getElementById('cluster-name').textContent = data.cluster;
                        }
                    } else {
                        dot.style.background = '#ef4444';
                        dot.style.boxShadow = '0 0 8px rgba(239, 68, 68, 0.6)';
                        text.textContent = 'Disconnected';
                        banner.style.display = 'block';
                        errorMsg.textContent = data.error || 'Unable to connect to Kubernetes cluster';
                        document.getElementById('cluster-name').textContent = 'Not Connected';
                    }
                    return data.connected;
                })
                .catch(err => {
                    console.error('Error checking connection status:', err);
                    return false;
                });
        }

        // Initial load - check connection first
        checkConnectionStatus().then(connected => {
            if (connected) {
                fetch('/api/metrics').then(r => r.json()).then(updateMetrics);
                loadResourceOverview();
                loadDashboardSecuritySummary();
                // Load namespaces first, then load pods with correct namespace
                loadNamespaces().then(() => {
                    loadPods();
                });
            } else {
                // Still load namespaces structure but they'll be empty
                document.getElementById('namespace-selector').innerHTML = '<option value="">No cluster connected</option>';
            }
        });

        // Refresh resource overview every 10 seconds (only if connected)
        setInterval(() => {
            if (isConnected) {
                loadResourceOverview();
                loadDashboardSecuritySummary();
            }
        }, 10000);

        // Check connection status every 5 seconds
        setInterval(checkConnectionStatus, 5000);
    </script>
    </div>

    <!-- Footer -->
    <footer style="background: rgba(15, 23, 42, 0.95); border-top: 1px solid rgba(100, 116, 139, 0.3); padding: 1rem 2rem; display: flex; justify-content: space-between; align-items: center; flex-shrink: 0;">
        <div style="display: flex; align-items: center; gap: 1rem;">
            <span style="color: #64748b; font-size: 0.875rem;">KubeGraf v1.0.0</span>
            <span style="color: #475569;">|</span>
            <span style="color: #64748b; font-size: 0.875rem;">Advanced Kubernetes Visualization</span>
        </div>
        <div style="display: flex; align-items: center; gap: 1rem;">
            <span style="color: #64748b; font-size: 0.875rem;">¬© 2025 KubeGraf Contributors</span>
            <span style="color: #475569;">|</span>
            <span style="color: #64748b; font-size: 0.875rem;">Apache License 2.0</span>
            <span style="color: #475569;">|</span>
            <a href="#" onclick="showCreditsModal(); return false;" style="color: #a855f7; text-decoration: none; font-size: 0.875rem;">Credits</a>
            <a href="https://github.com/kubegraf/kubegraf" target="_blank" style="color: #06b6d4; text-decoration: none; font-size: 0.875rem; display: flex; align-items: center; gap: 0.25rem;">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/></svg>
                GitHub
            </a>
        </div>
    </footer>

    <!-- Credits Modal -->
    <div id="credits-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); z-index: 9999; align-items: center; justify-content: center;">
        <div style="background: #1e293b; padding: 1.5rem; border-radius: 8px; border: 1px solid #334155; max-width: 480px; width: 90%; position: relative;">
            <button onclick="closeCreditsModal()" style="position: absolute; top: 0.75rem; right: 0.75rem; background: none; border: none; color: #64748b; cursor: pointer; font-size: 1.25rem; line-height: 1;">&times;</button>
            <h3 style="margin: 0 0 1rem 0; color: #f1f5f9; font-size: 1rem; font-weight: 600;">Third-Party Libraries</h3>
            <table style="width: 100%; font-size: 0.8125rem; border-collapse: collapse;">
                <tr style="border-bottom: 1px solid #334155;"><td style="padding: 0.4rem 0; color: #e2e8f0;">D3.js</td><td style="padding: 0.4rem 0; color: #64748b; text-align: right;">BSD-3-Clause</td></tr>
                <tr style="border-bottom: 1px solid #334155;"><td style="padding: 0.4rem 0; color: #e2e8f0;">k8s.io/client-go</td><td style="padding: 0.4rem 0; color: #64748b; text-align: right;">Apache-2.0</td></tr>
                <tr style="border-bottom: 1px solid #334155;"><td style="padding: 0.4rem 0; color: #e2e8f0;">rivo/tview</td><td style="padding: 0.4rem 0; color: #64748b; text-align: right;">MIT</td></tr>
                <tr style="border-bottom: 1px solid #334155;"><td style="padding: 0.4rem 0; color: #e2e8f0;">gdamore/tcell</td><td style="padding: 0.4rem 0; color: #64748b; text-align: right;">Apache-2.0</td></tr>
                <tr style="border-bottom: 1px solid #334155;"><td style="padding: 0.4rem 0; color: #e2e8f0;">gorilla/websocket</td><td style="padding: 0.4rem 0; color: #64748b; text-align: right;">BSD-2-Clause</td></tr>
                <tr><td style="padding: 0.4rem 0; color: #e2e8f0;">go-yaml/yaml</td><td style="padding: 0.4rem 0; color: #64748b; text-align: right;">MIT</td></tr>
            </table>
            <p style="margin: 1rem 0 0 0; color: #64748b; font-size: 0.75rem; text-align: center;">Full license details available in project repository.</p>
        </div>
    </div>

    <script>
        function showCreditsModal() {
            document.getElementById('credits-modal').style.display = 'flex';
        }
        function closeCreditsModal() {
            document.getElementById('credits-modal').style.display = 'none';
        }
    </script>
</body>
</html>
