{"version":3,"file":"CommandPreview-C6bYxIqz.js","sources":["../../src/components/CommandPreview.tsx"],"sourcesContent":["import { Component, Show, createSignal, JSX } from 'solid-js';\nimport { addNotification } from '../stores/ui';\n\ninterface CommandPreviewProps {\n  label?: string;               // \"Actual command\" or \"Equivalent kubectl command\"\n  command: string;              // Full command line (single string, can include newlines)\n  description?: string;         // Optional helper text\n  defaultCollapsed?: boolean;   // Start collapsed by default (true)\n  badge?: JSX.Element;          // Optional extra badge (e.g. mode, namespace)\n}\n\nconst CommandPreview: Component<CommandPreviewProps> = (props) => {\n  const [expanded, setExpanded] = createSignal(!(props.defaultCollapsed ?? true));\n  const [copied, setCopied] = createSignal(false);\n\n  const handleCopy = async () => {\n    try {\n      await navigator.clipboard.writeText(props.command || '');\n      setCopied(true);\n      addNotification('Command copied to clipboard', 'success');\n      setTimeout(() => setCopied(false), 1500);\n    } catch (err) {\n      console.error('[CommandPreview] Failed to copy command:', err);\n      addNotification('Failed to copy command', 'error');\n    }\n  };\n\n  const labelText = () => props.label || 'Command preview';\n\n  return (\n    <div\n      class=\"rounded-lg border mt-3 mb-2\"\n      style={{\n        background: 'var(--bg-secondary)',\n        'border-color': 'var(--border-color)',\n      }}\n    >\n      {/* Header */}\n      <button\n        type=\"button\"\n        class=\"w-full flex items-center justify-between px-3 py-2 text-xs\"\n        onClick={() => setExpanded(!expanded())}\n        style={{ color: 'var(--text-secondary)' }}\n      >\n        <div class=\"flex items-center gap-2 min-w-0\">\n          <svg\n            class=\"w-3.5 h-3.5 flex-shrink-0\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            viewBox=\"0 0 24 24\"\n          >\n            <path\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n              stroke-width=\"2\"\n              d={expanded() ? 'M19 9l-7 7-7-7' : 'M9 5l7 7-7 7'}\n            />\n          </svg>\n          <span class=\"font-medium truncate\" style={{ color: 'var(--text-primary)' }}>\n            {labelText()}\n          </span>\n          <Show when={props.badge}>\n            <span class=\"ml-1 inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[10px]\"\n              style={{\n                background: 'rgba(148, 163, 184, 0.16)',\n                color: 'var(--text-secondary)',\n              }}\n            >\n              {props.badge}\n            </span>\n          </Show>\n        </div>\n        <div class=\"flex items-center gap-2\">\n          <Show when={props.description}>\n            <span class=\"hidden sm:inline text-[11px] truncate\" style={{ color: 'var(--text-muted)' }}>\n              {props.description}\n            </span>\n          </Show>\n          <span class=\"text-[11px]\" style={{ color: 'var(--text-muted)' }}>\n            {expanded() ? 'Hide' : 'Show'}\n          </span>\n        </div>\n      </button>\n\n      {/* Body */}\n      <Show when={expanded()}>\n        <div\n          class=\"px-3 pb-3 pt-1 border-t\"\n          style={{ 'border-color': 'var(--border-color)' }}\n        >\n          <div\n            class=\"relative rounded-md overflow-hidden font-mono text-[11px]\"\n            style={{\n              background: '#020617',\n              border: '1px solid rgba(15, 23, 42, 0.7)',\n            }}\n          >\n            <pre\n              class=\"m-0 p-3 whitespace-pre-wrap overflow-x-auto\"\n              style={{ color: 'var(--text-secondary)' }}\n            >\n{props.command || '# Command preview will appear here'}\n            </pre>\n\n            <button\n              type=\"button\"\n              onClick={handleCopy}\n              class=\"absolute top-1 right-1 px-2 py-1 rounded text-[11px] flex items-center gap-1\"\n              style={{\n                background: 'rgba(15, 23, 42, 0.85)',\n                color: 'var(--text-secondary)',\n                border: '1px solid rgba(148, 163, 184, 0.5)',\n              }}\n            >\n              <Show when={!copied()} fallback=\"Copied\">\n                <>\n                  <svg class=\"w-3.5 h-3.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path\n                      stroke-linecap=\"round\"\n                      stroke-linejoin=\"round\"\n                      stroke-width=\"2\"\n                      d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"\n                    />\n                  </svg>\n                  Copy\n                </>\n              </Show>\n            </button>\n          </div>\n          <Show when={props.description}>\n            <p class=\"mt-1 text-[11px]\" style={{ color: 'var(--text-muted)' }}>\n              {props.description}\n            </p>\n          </Show>\n        </div>\n      </Show>\n    </div>\n  );\n};\n\nexport default CommandPreview;\n\n\n"],"names":["CommandPreview","props","expanded","setExpanded","createSignal","defaultCollapsed","copied","setCopied","handleCopy","navigator","clipboard","writeText","command","addNotification","setTimeout","err","console","error","labelText","label","_el$","_tmpl$6","_el$2","firstChild","_el$3","_el$4","_el$5","_el$6","nextSibling","_el$8","_el$0","$$click","_$insert","_$createComponent","Show","when","badge","children","_el$7","_tmpl$","description","_el$9","_tmpl$2","_el$1","_tmpl$5","_el$10","_el$11","_el$12","fallback","_tmpl$3","_el$14","_tmpl$4","_$effect","_$setAttribute","_$delegateEvents"],"mappings":"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"}