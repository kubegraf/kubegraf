(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))l(u);new MutationObserver(u=>{for(const v of u)if(v.type==="childList")for(const h of v.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function r(u){const v={};return u.integrity&&(v.integrity=u.integrity),u.referrerPolicy&&(v.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?v.credentials="include":u.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function l(u){if(u.ep)return;u.ep=!0;const v=r(u);fetch(u.href,v)}})();const Ka=!1,Ya=(e,t)=>e===t,bi=Symbol("solid-proxy"),bo=typeof Proxy=="function",Ga=Symbol("solid-track"),yi={equals:Ya};let yo=Co;const Lr=1,xi=2,xo={owned:null,cleanups:null,context:null,owner:null},en={};var mt=null;let tn=null,Ja=null,vt=null,Ht=null,Mr=null,Ii=0;function ks(e,t){const r=vt,l=mt,u=e.length===0,v=t===void 0?l:t,h=u?xo:{owned:null,cleanups:null,context:v?v.context:null,owner:v},s=u?e:()=>e(()=>Kt(()=>Es(h)));mt=h,vt=null;try{return Or(s,!0)}finally{vt=r,mt=l}}function J(e,t){t=t?Object.assign({},yi,t):yi;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},l=u=>(typeof u=="function"&&(u=u(r.value)),So(r,u));return[wo.bind(r),l]}function Xa(e,t,r){const l=Bi(e,t,!0,Lr);fs(l)}function re(e,t,r){const l=Bi(e,t,!1,Lr);fs(l)}function Mt(e,t,r){yo=nc;const l=Bi(e,t,!1,Lr);(!r||!r.render)&&(l.user=!0),Mr?Mr.push(l):fs(l)}function ze(e,t,r){r=r?Object.assign({},yi,r):yi;const l=Bi(e,t,!0,0);return l.observers=null,l.observerSlots=null,l.comparator=r.equals||void 0,fs(l),wo.bind(l)}function Za(e){return e&&typeof e=="object"&&"then"in e}function qe(e,t,r){let l,u,v;typeof t=="function"?(l=e,u=t,v={}):(l=!0,u=e,v=t||{});let h=null,s=en,n=!1,f="initialValue"in v,g=typeof l=="function"&&ze(l);const p=new Set,[_,b]=(v.storage||J)(v.initialValue),[C,x]=J(void 0),[o,d]=J(void 0,{equals:!1}),[a,c]=J(f?"ready":"unresolved");function m(k,B,O,T){return h===k&&(h=null,T!==void 0&&(f=!0),(k===s||B===s)&&v.onHydrated&&queueMicrotask(()=>v.onHydrated(T,{value:B})),s=en,$(B,O)),B}function $(k,B){Or(()=>{B===void 0&&b(()=>k),c(B!==void 0?"errored":f?"ready":"unresolved"),x(B);for(const O of p.keys())O.decrement();p.clear()},!1)}function S(){const k=rc,B=_(),O=C();if(O!==void 0&&!h)throw O;return vt&&vt.user,B}function E(k=!0){if(k!==!1&&n)return;n=!1;const B=g?g():l;if(B==null||B===!1){m(h,Kt(_));return}let O;const T=s!==en?s:Kt(()=>{try{return u(B,{value:_(),refetching:k})}catch(I){O=I}});if(O!==void 0){m(h,void 0,di(O),B);return}else if(!Za(T))return m(h,T,void 0,B),T;return h=T,"v"in T?(T.s===1?m(h,T.v,void 0,B):m(h,void 0,di(T.v),B),T):(n=!0,queueMicrotask(()=>n=!1),Or(()=>{c(f?"refreshing":"pending"),d()},!1),T.then(I=>m(T,I,void 0,B),I=>m(T,void 0,di(I),B)))}Object.defineProperties(S,{state:{get:()=>a()},error:{get:()=>C()},loading:{get(){const k=a();return k==="pending"||k==="refreshing"}},latest:{get(){if(!f)return S();const k=C();if(k&&!h)throw k;return _()}}});let y=mt;return g?Xa(()=>(y=mt,E(!1))):E(!1),[S,{refetch:k=>$o(y,()=>E(k)),mutate:b}]}function Kt(e){if(vt===null)return e();const t=vt;vt=null;try{return e()}finally{vt=t}}function Qa(e,t,r){const l=Array.isArray(e);let u;return v=>{let h;if(l){h=Array(e.length);for(let n=0;n<e.length;n++)h[n]=e[n]()}else h=e();const s=Kt(()=>t(h,u,v));return u=h,s}}function Xt(e){Mt(()=>Kt(e))}function or(e){return mt===null||(mt.cleanups===null?mt.cleanups=[e]:mt.cleanups.push(e)),e}function ec(){return mt}function $o(e,t){const r=mt,l=vt;mt=e,vt=null;try{return Or(t,!0)}catch(u){Ln(u)}finally{mt=r,vt=l}}const[Y4,G4]=J(!1);function tc(e){const t=ze(e),r=ze(()=>pn(t()));return r.toArray=()=>{const l=r();return Array.isArray(l)?l:l!=null?[l]:[]},r}let rc;function wo(){if(this.sources&&this.state)if(this.state===Lr)fs(this);else{const e=Ht;Ht=null,Or(()=>wi(this),!1),Ht=e}if(vt){const e=this.observers?this.observers.length:0;vt.sources?(vt.sources.push(this),vt.sourceSlots.push(e)):(vt.sources=[this],vt.sourceSlots=[e]),this.observers?(this.observers.push(vt),this.observerSlots.push(vt.sources.length-1)):(this.observers=[vt],this.observerSlots=[vt.sources.length-1])}return this.value}function So(e,t,r){let l=e.value;return(!e.comparator||!e.comparator(l,t))&&(e.value=t,e.observers&&e.observers.length&&Or(()=>{for(let u=0;u<e.observers.length;u+=1){const v=e.observers[u],h=tn&&tn.running;h&&tn.disposed.has(v),(h?!v.tState:!v.state)&&(v.pure?Ht.push(v):Mr.push(v),v.observers&&ko(v)),h||(v.state=Lr)}if(Ht.length>1e6)throw Ht=[],new Error},!1)),t}function fs(e){if(!e.fn)return;Es(e);const t=Ii;sc(e,e.value,t)}function sc(e,t,r){let l;const u=mt,v=vt;vt=mt=e;try{l=e.fn(t)}catch(h){return e.pure&&(e.state=Lr,e.owned&&e.owned.forEach(Es),e.owned=null),e.updatedAt=r+1,Ln(h)}finally{vt=v,mt=u}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?So(e,l):e.value=l,e.updatedAt=r)}function Bi(e,t,r,l=Lr,u){const v={fn:e,state:l,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:mt,context:mt?mt.context:null,pure:r};return mt===null||mt!==xo&&(mt.owned?mt.owned.push(v):mt.owned=[v]),v}function $i(e){if(e.state===0)return;if(e.state===xi)return wi(e);if(e.suspense&&Kt(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Ii);)e.state&&t.push(e);for(let r=t.length-1;r>=0;r--)if(e=t[r],e.state===Lr)fs(e);else if(e.state===xi){const l=Ht;Ht=null,Or(()=>wi(e,t[0]),!1),Ht=l}}function Or(e,t){if(Ht)return e();let r=!1;t||(Ht=[]),Mr?r=!0:Mr=[],Ii++;try{const l=e();return ic(r),l}catch(l){r||(Mr=null),Ht=null,Ln(l)}}function ic(e){if(Ht&&(Co(Ht),Ht=null),e)return;const t=Mr;Mr=null,t.length&&Or(()=>yo(t),!1)}function Co(e){for(let t=0;t<e.length;t++)$i(e[t])}function nc(e){let t,r=0;for(t=0;t<e.length;t++){const l=e[t];l.user?e[r++]=l:$i(l)}for(t=0;t<r;t++)$i(e[t])}function wi(e,t){e.state=0;for(let r=0;r<e.sources.length;r+=1){const l=e.sources[r];if(l.sources){const u=l.state;u===Lr?l!==t&&(!l.updatedAt||l.updatedAt<Ii)&&$i(l):u===xi&&wi(l,t)}}}function ko(e){for(let t=0;t<e.observers.length;t+=1){const r=e.observers[t];r.state||(r.state=xi,r.pure?Ht.push(r):Mr.push(r),r.observers&&ko(r))}}function Es(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),l=e.sourceSlots.pop(),u=r.observers;if(u&&u.length){const v=u.pop(),h=r.observerSlots.pop();l<u.length&&(v.sourceSlots[h]=l,u[l]=v,r.observerSlots[l]=h)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)Es(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)Es(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function di(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Ln(e,t=mt){throw di(e)}function pn(e){if(typeof e=="function"&&!e.length)return pn(e());if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++){const l=pn(e[r]);Array.isArray(l)?t.push.apply(t,l):t.push(l)}return t}return e}const lc=Symbol("fallback");function tl(e){for(let t=0;t<e.length;t++)e[t]()}function oc(e,t,r={}){let l=[],u=[],v=[],h=0,s=t.length>1?[]:null;return or(()=>tl(v)),()=>{let n=e()||[],f=n.length,g,p;return n[Ga],Kt(()=>{let b,C,x,o,d,a,c,m,$;if(f===0)h!==0&&(tl(v),v=[],l=[],u=[],h=0,s&&(s=[])),r.fallback&&(l=[lc],u[0]=ks(S=>(v[0]=S,r.fallback())),h=1);else if(h===0){for(u=new Array(f),p=0;p<f;p++)l[p]=n[p],u[p]=ks(_);h=f}else{for(x=new Array(f),o=new Array(f),s&&(d=new Array(f)),a=0,c=Math.min(h,f);a<c&&l[a]===n[a];a++);for(c=h-1,m=f-1;c>=a&&m>=a&&l[c]===n[m];c--,m--)x[m]=u[c],o[m]=v[c],s&&(d[m]=s[c]);for(b=new Map,C=new Array(m+1),p=m;p>=a;p--)$=n[p],g=b.get($),C[p]=g===void 0?-1:g,b.set($,p);for(g=a;g<=c;g++)$=l[g],p=b.get($),p!==void 0&&p!==-1?(x[p]=u[g],o[p]=v[g],s&&(d[p]=s[g]),p=C[p],b.set($,p)):v[g]();for(p=a;p<f;p++)p in x?(u[p]=x[p],v[p]=o[p],s&&(s[p]=d[p],s[p](p))):u[p]=ks(_);u=u.slice(0,h=f),l=n.slice(0)}return u});function _(b){if(v[p]=b,s){const[C,x]=J(p);return s[p]=x,t(n[p],C)}return t(n[p])}}}function A(e,t){return Kt(()=>e(t||{}))}function Js(){return!0}const vn={get(e,t,r){return t===bi?r:e.get(t)},has(e,t){return t===bi?!0:e.has(t)},set:Js,deleteProperty:Js,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:Js,deleteProperty:Js}},ownKeys(e){return e.keys()}};function rn(e){return(e=typeof e=="function"?e():e)?e:{}}function ac(){for(let e=0,t=this.length;e<t;++e){const r=this[e]();if(r!==void 0)return r}}function cc(...e){let t=!1;for(let h=0;h<e.length;h++){const s=e[h];t=t||!!s&&bi in s,e[h]=typeof s=="function"?(t=!0,ze(s)):s}if(bo&&t)return new Proxy({get(h){for(let s=e.length-1;s>=0;s--){const n=rn(e[s])[h];if(n!==void 0)return n}},has(h){for(let s=e.length-1;s>=0;s--)if(h in rn(e[s]))return!0;return!1},keys(){const h=[];for(let s=0;s<e.length;s++)h.push(...Object.keys(rn(e[s])));return[...new Set(h)]}},vn);const r={},l=Object.create(null);for(let h=e.length-1;h>=0;h--){const s=e[h];if(!s)continue;const n=Object.getOwnPropertyNames(s);for(let f=n.length-1;f>=0;f--){const g=n[f];if(g==="__proto__"||g==="constructor")continue;const p=Object.getOwnPropertyDescriptor(s,g);if(!l[g])l[g]=p.get?{enumerable:!0,configurable:!0,get:ac.bind(r[g]=[p.get.bind(s)])}:p.value!==void 0?p:void 0;else{const _=r[g];_&&(p.get?_.push(p.get.bind(s)):p.value!==void 0&&_.push(()=>p.value))}}}const u={},v=Object.keys(l);for(let h=v.length-1;h>=0;h--){const s=v[h],n=l[s];n&&n.get?Object.defineProperty(u,s,n):u[s]=n?n.value:void 0}return u}function dc(e,...t){const r=t.length;if(bo&&bi in e){const u=r>1?t.flat():t[0],v=t.map(h=>new Proxy({get(s){return h.includes(s)?e[s]:void 0},has(s){return h.includes(s)&&s in e},keys(){return h.filter(s=>s in e)}},vn));return v.push(new Proxy({get(h){return u.includes(h)?void 0:e[h]},has(h){return u.includes(h)?!1:h in e},keys(){return Object.keys(e).filter(h=>!u.includes(h))}},vn)),v}const l=[];for(let u=0;u<=r;u++)l[u]={};for(const u of Object.getOwnPropertyNames(e)){let v=r;for(let n=0;n<t.length;n++)if(t[n].includes(u)){v=n;break}const h=Object.getOwnPropertyDescriptor(e,u);!h.get&&!h.set&&h.enumerable&&h.writable&&h.configurable?l[v][u]=h.value:Object.defineProperty(l[v],u,h)}return l}const Ao=e=>`Stale read from <${e}>.`;function Ne(e){const t="fallback"in e&&{fallback:()=>e.fallback};return ze(oc(()=>e.each,e.children,t||void 0))}function q(e){const t=e.keyed,r=ze(()=>e.when,void 0,void 0),l=t?r:ze(r,void 0,{equals:(u,v)=>!u==!v});return ze(()=>{const u=l();if(u){const v=e.children;return typeof v=="function"&&v.length>0?Kt(()=>v(t?u:()=>{if(!Kt(l))throw Ao("Show");return r()})):v}return e.fallback},void 0,void 0)}function Si(e){const t=tc(()=>e.children),r=ze(()=>{const l=t(),u=Array.isArray(l)?l:[l];let v=()=>{};for(let h=0;h<u.length;h++){const s=h,n=u[h],f=v,g=ze(()=>f()?void 0:n.when,void 0,void 0),p=n.keyed?g:ze(g,void 0,{equals:(_,b)=>!_==!b});v=()=>f()||(p()?[s,g,n]:void 0)}return v});return ze(()=>{const l=r()();if(!l)return e.fallback;const[u,v,h]=l,s=h.children;return typeof s=="function"&&s.length>0?Kt(()=>s(h.keyed?v():()=>{if(Kt(r)()?.[0]!==u)throw Ao("Match");return v()})):s},void 0,void 0)}function nr(e){return e}const hc=["allowfullscreen","async","alpha","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","adauctionheaders","browsingtopics","credentialless","defaultchecked","defaultmuted","defaultselected","defer","disablepictureinpicture","disableremoteplayback","preservespitch","shadowrootclonable","shadowrootcustomelementregistry","shadowrootdelegatesfocus","shadowrootserializable","sharedstoragewritable"],uc=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline","adAuctionHeaders","allowFullscreen","browsingTopics","defaultChecked","defaultMuted","defaultSelected","disablePictureInPicture","disableRemotePlayback","preservesPitch","shadowRootClonable","shadowRootCustomElementRegistry","shadowRootDelegatesFocus","shadowRootSerializable","sharedStorageWritable",...hc]),fc=new Set(["innerHTML","textContent","innerText","children"]),gc=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),pc=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1},adauctionheaders:{$:"adAuctionHeaders",IFRAME:1},allowfullscreen:{$:"allowFullscreen",IFRAME:1},browsingtopics:{$:"browsingTopics",IMG:1},defaultchecked:{$:"defaultChecked",INPUT:1},defaultmuted:{$:"defaultMuted",AUDIO:1,VIDEO:1},defaultselected:{$:"defaultSelected",OPTION:1},disablepictureinpicture:{$:"disablePictureInPicture",VIDEO:1},disableremoteplayback:{$:"disableRemotePlayback",AUDIO:1,VIDEO:1},preservespitch:{$:"preservesPitch",AUDIO:1,VIDEO:1},shadowrootclonable:{$:"shadowRootClonable",TEMPLATE:1},shadowrootdelegatesfocus:{$:"shadowRootDelegatesFocus",TEMPLATE:1},shadowrootserializable:{$:"shadowRootSerializable",TEMPLATE:1},sharedstoragewritable:{$:"sharedStorageWritable",IFRAME:1,IMG:1}});function vc(e,t){const r=pc[e];return typeof r=="object"?r[t]?r.$:void 0:r}const mc=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),_c=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),bc={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},Me=e=>ze(()=>e());function yc(e,t,r){let l=r.length,u=t.length,v=l,h=0,s=0,n=t[u-1].nextSibling,f=null;for(;h<u||s<v;){if(t[h]===r[s]){h++,s++;continue}for(;t[u-1]===r[v-1];)u--,v--;if(u===h){const g=v<l?s?r[s-1].nextSibling:r[v-s]:n;for(;s<v;)e.insertBefore(r[s++],g)}else if(v===s)for(;h<u;)(!f||!f.has(t[h]))&&t[h].remove(),h++;else if(t[h]===r[v-1]&&r[s]===t[u-1]){const g=t[--u].nextSibling;e.insertBefore(r[s++],t[h++].nextSibling),e.insertBefore(r[--v],g),t[u]=r[v]}else{if(!f){f=new Map;let p=s;for(;p<v;)f.set(r[p],p++)}const g=f.get(t[h]);if(g!=null)if(s<g&&g<v){let p=h,_=1,b;for(;++p<u&&p<v&&!((b=f.get(t[p]))==null||b!==g+_);)_++;if(_>g-s){const C=t[h];for(;s<g;)e.insertBefore(r[s++],C)}else e.replaceChild(r[s++],t[h++])}else h++;else t[h++].remove()}}}const rl="_$DX_DELEGATE";function xc(e,t,r,l={}){let u;return ks(v=>{u=v,t===document?e():i(t,e(),t.firstChild?null:void 0,r)},l.owner),()=>{u(),t.textContent=""}}function R(e,t,r,l){let u;const v=()=>{const s=document.createElement("template");return s.innerHTML=e,s.content.firstChild},h=()=>(u||(u=v())).cloneNode(!0);return h.cloneNode=h,h}function Qe(e,t=window.document){const r=t[rl]||(t[rl]=new Set);for(let l=0,u=e.length;l<u;l++){const v=e[l];r.has(v)||(r.add(v),t.addEventListener(v,Ac))}}function Xe(e,t,r){r==null?e.removeAttribute(t):e.setAttribute(t,r)}function $c(e,t,r,l){l==null?e.removeAttributeNS(t,r):e.setAttributeNS(t,r,l)}function wc(e,t,r){r?e.setAttribute(t,""):e.removeAttribute(t)}function He(e,t){t==null?e.removeAttribute("class"):e.className=t}function ar(e,t,r,l){if(l)Array.isArray(r)?(e[`$$${t}`]=r[0],e[`$$${t}Data`]=r[1]):e[`$$${t}`]=r;else if(Array.isArray(r)){const u=r[0];e.addEventListener(t,r[0]=v=>u.call(e,r[1],v))}else e.addEventListener(t,r,typeof r!="function"&&r)}function Mo(e,t,r={}){const l=Object.keys(t||{}),u=Object.keys(r);let v,h;for(v=0,h=u.length;v<h;v++){const s=u[v];!s||s==="undefined"||t[s]||(sl(e,s,!1),delete r[s])}for(v=0,h=l.length;v<h;v++){const s=l[v],n=!!t[s];!s||s==="undefined"||r[s]===n||!n||(sl(e,s,!0),r[s]=n)}return r}function Hs(e,t,r){if(!t)return r?Xe(e,"style"):t;const l=e.style;if(typeof t=="string")return l.cssText=t;typeof r=="string"&&(l.cssText=r=void 0),r||(r={}),t||(t={});let u,v;for(v in r)t[v]==null&&l.removeProperty(v),delete r[v];for(v in t)u=t[v],u!==r[v]&&(l.setProperty(v,u),r[v]=u);return r}function oe(e,t,r){r!=null?e.style.setProperty(t,r):e.style.removeProperty(t)}function Sc(e,t={},r,l){const u={};return re(()=>u.children=Ls(e,t.children,u.children)),re(()=>typeof t.ref=="function"&&Wt(t.ref,e)),re(()=>Cc(e,t,r,!0,u,!0)),u}function Wt(e,t,r){return Kt(()=>e(t,r))}function i(e,t,r,l){if(r!==void 0&&!l&&(l=[]),typeof t!="function")return Ls(e,t,l,r);re(u=>Ls(e,t(),u,r),l)}function Cc(e,t,r,l,u={},v=!1){t||(t={});for(const h in u)if(!(h in t)){if(h==="children")continue;u[h]=il(e,h,null,u[h],r,v,t)}for(const h in t){if(h==="children")continue;const s=t[h];u[h]=il(e,h,s,u[h],r,v,t)}}function kc(e){return e.toLowerCase().replace(/-([a-z])/g,(t,r)=>r.toUpperCase())}function sl(e,t,r){const l=t.trim().split(/\s+/);for(let u=0,v=l.length;u<v;u++)e.classList.toggle(l[u],r)}function il(e,t,r,l,u,v,h){let s,n,f,g,p;if(t==="style")return Hs(e,r,l);if(t==="classList")return Mo(e,r,l);if(r===l)return l;if(t==="ref")v||r(e);else if(t.slice(0,3)==="on:"){const _=t.slice(3);l&&e.removeEventListener(_,l,typeof l!="function"&&l),r&&e.addEventListener(_,r,typeof r!="function"&&r)}else if(t.slice(0,10)==="oncapture:"){const _=t.slice(10);l&&e.removeEventListener(_,l,!0),r&&e.addEventListener(_,r,!0)}else if(t.slice(0,2)==="on"){const _=t.slice(2).toLowerCase(),b=mc.has(_);if(!b&&l){const C=Array.isArray(l)?l[0]:l;e.removeEventListener(_,C)}(b||r)&&(ar(e,_,r,b),b&&Qe([_]))}else if(t.slice(0,5)==="attr:")Xe(e,t.slice(5),r);else if(t.slice(0,5)==="bool:")wc(e,t.slice(5),r);else if((p=t.slice(0,5)==="prop:")||(f=fc.has(t))||!u&&((g=vc(t,e.tagName))||(n=uc.has(t)))||(s=e.nodeName.includes("-")||"is"in h))p&&(t=t.slice(5),n=!0),t==="class"||t==="className"?He(e,r):s&&!n&&!f?e[kc(t)]=r:e[g||t]=r;else{const _=u&&t.indexOf(":")>-1&&bc[t.split(":")[0]];_?$c(e,_,t,r):Xe(e,gc[t]||t,r)}return r}function Ac(e){let t=e.target;const r=`$$${e.type}`,l=e.target,u=e.currentTarget,v=n=>Object.defineProperty(e,"target",{configurable:!0,value:n}),h=()=>{const n=t[r];if(n&&!t.disabled){const f=t[`${r}Data`];if(f!==void 0?n.call(t,f,e):n.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&v(t.host),!0},s=()=>{for(;h()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const n=e.composedPath();v(n[0]);for(let f=0;f<n.length-2&&(t=n[f],!!h());f++){if(t._$host){t=t._$host,s();break}if(t.parentNode===u)break}}else s();v(l)}function Ls(e,t,r,l,u){for(;typeof r=="function";)r=r();if(t===r)return r;const v=typeof t,h=l!==void 0;if(e=h&&r[0]&&r[0].parentNode||e,v==="string"||v==="number"){if(v==="number"&&(t=t.toString(),t===r))return r;if(h){let s=r[0];s&&s.nodeType===3?s.data!==t&&(s.data=t):s=document.createTextNode(t),r=is(e,r,l,s)}else r!==""&&typeof r=="string"?r=e.firstChild.data=t:r=e.textContent=t}else if(t==null||v==="boolean")r=is(e,r,l);else{if(v==="function")return re(()=>{let s=t();for(;typeof s=="function";)s=s();r=Ls(e,s,r,l)}),()=>r;if(Array.isArray(t)){const s=[],n=r&&Array.isArray(r);if(mn(s,t,r,u))return re(()=>r=Ls(e,s,r,l,!0)),()=>r;if(s.length===0){if(r=is(e,r,l),h)return r}else n?r.length===0?nl(e,s,l):yc(e,r,s):(r&&is(e),nl(e,s));r=s}else if(t.nodeType){if(Array.isArray(r)){if(h)return r=is(e,r,l,t);is(e,r,null,t)}else r==null||r===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);r=t}}return r}function mn(e,t,r,l){let u=!1;for(let v=0,h=t.length;v<h;v++){let s=t[v],n=r&&r[e.length],f;if(!(s==null||s===!0||s===!1))if((f=typeof s)=="object"&&s.nodeType)e.push(s);else if(Array.isArray(s))u=mn(e,s,n)||u;else if(f==="function")if(l){for(;typeof s=="function";)s=s();u=mn(e,Array.isArray(s)?s:[s],Array.isArray(n)?n:[n])||u}else e.push(s),u=!0;else{const g=String(s);n&&n.nodeType===3&&n.data===g?e.push(n):e.push(document.createTextNode(g))}}return u}function nl(e,t,r=null){for(let l=0,u=t.length;l<u;l++)e.insertBefore(t[l],r)}function is(e,t,r,l){if(r===void 0)return e.textContent="";const u=l||document.createTextNode("");if(t.length){let v=!1;for(let h=t.length-1;h>=0;h--){const s=t[h];if(u!==s){const n=s.parentNode===e;!v&&!h?n?e.replaceChild(u,s):e.insertBefore(u,r):n&&s.remove()}else v=!0}}else e.insertBefore(u,r);return[u]}const Mc="http://www.w3.org/2000/svg";function Eo(e,t=!1,r=void 0){return t?document.createElementNS(Mc,e):document.createElement(e,{is:r})}function Xr(e){const{useShadow:t}=e,r=document.createTextNode(""),l=()=>e.mount||document.body,u=ec();let v;return Mt(()=>{v||(v=$o(u,()=>ze(()=>e.children)));const h=l();if(h instanceof HTMLHeadElement){const[s,n]=J(!1),f=()=>n(!0);ks(g=>i(h,()=>s()?g():v(),null)),or(f)}else{const s=Eo(e.isSVG?"g":"div",e.isSVG),n=t&&s.attachShadow?s.attachShadow({mode:"open"}):s;Object.defineProperty(s,"_$host",{get(){return r.parentNode},configurable:!0}),i(n,v),h.appendChild(s),e.ref&&e.ref(s),or(()=>h.removeChild(s))}},void 0,{render:!0}),r}function Ec(e,t){const r=ze(e);return ze(()=>{const l=r();switch(typeof l){case"function":return Kt(()=>l(t));case"string":const u=_c.has(l),v=Eo(l,u,Kt(()=>t.is));return Sc(v,t,u),v}})}function Lc(e){const[,t]=dc(e,["component"]);return Ec(()=>e.component,t)}const[kr,At]=J("dashboard"),[It,Rc]=J(!1),[Lo,Ro]=J(!1),[J4,Dc]=J(null),[X4,Z4]=J(!1),[Do,Tc]=J(""),[Pc,ll]=J([]),[_n,To]=J(!1);function Ic(e){try{if(localStorage.getItem("kubegraf-sound")!=="true")return;const r=new(window.AudioContext||window.webkitAudioContext),u={success:800,error:300,warning:500,info:600}[e]||600,v=r.createOscillator(),h=r.createGain();v.connect(h),h.connect(r.destination),v.frequency.value=u,v.type="sine",h.gain.setValueAtTime(.3,r.currentTime),h.gain.exponentialRampToValueAtTime(.01,r.currentTime+.3),v.start(r.currentTime),v.stop(r.currentTime+.3)}catch(t){console.debug("Could not play notification sound:",t)}}function Fe(e,t="info"){const r={id:crypto.randomUUID(),type:t,message:e,timestamp:new Date};ll(l=>[r,...l].slice(0,10)),Ic(t),setTimeout(()=>{ll(l=>l.filter(u=>u.id!==r.id))},5e3)}function Bc(){Rc(!It())}function Oc(){Ro(!Lo())}function Hc(){const e=_n();console.log("[ui.ts] toggleTerminal called - current:",e,"-> new:",!e),To(!e),console.log("[ui.ts] terminalOpen after setState:",_n())}var Nc=R('<button class="w-full flex items-center justify-between px-2.5 py-2 rounded-md hover:bg-white/5 transition-colors group"><span class="text-xs font-bold uppercase tracking-wide"style=color:var(--text-primary)></span><svg fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 9l-7 7-7-7">'),zc=R("<div>"),Fc=R("<div class=mb-1>"),jc=R("<span>"),Uc=R('<div class="fixed px-2 py-1 rounded text-xs font-medium whitespace-nowrap z-[9999]"style="transform:translateY(-50%);background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color);box-shadow:0 2px 8px rgba(0,0,0,0.3)">'),Vc=R('<button><svg class="w-4 h-4 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2>'),Wc=R('<span class="font-bold text-lg gradient-text">KubeGraf'),qc=R('<button class="absolute right-2.5 top-1/2 transform -translate-y-1/2 p-0.5 rounded hover:bg-white/10"style=color:var(--text-muted)><svg class="w-3.5 h-3.5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12">'),Kc=R('<div class="px-2.5 py-2 border-b"style=border-color:rgba(255,255,255,0.08)><div class=relative><svg class="absolute left-2.5 top-1/2 transform -translate-y-1/2 w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg><input type=text placeholder=Search... class="w-full pl-8 pr-2.5 py-1.5 rounded-md text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)">'),Yc=R('<div class="px-2.5 py-8 text-center"><p class=text-sm style=color:var(--text-muted)>No results found'),Gc=R("<span class=text-sm>Settings"),Jc=R('<div class="flex items-center gap-1.5 px-2.5 mt-2 text-xs"style=color:var(--text-muted)><span class="w-1.5 h-1.5 rounded-full bg-green-500"></span><span>v1.0.0'),Xc=R('<aside><div class="h-14 flex items-center justify-between px-3 border-b"style=border-color:rgba(255,255,255,0.08)><button class="flex items-center gap-2.5 hover:opacity-80 transition-opacity"title="Go to Dashboard"><svg viewBox="0 0 100 100"width=32 height=32 xmlns=http://www.w3.org/2000/svg><defs><linearGradient id=gGrad x1=0% y1=0% x2=100% y2=100%><stop offset=0% stop-color=#22d3ee></stop><stop offset=50% stop-color=#3b82f6></stop><stop offset=100% stop-color=#d946ef></stop></linearGradient><filter id=glow><feGaussianBlur stdDeviation=1.5 result=coloredBlur></feGaussianBlur><feMerge><feMergeNode in=coloredBlur></feMergeNode><feMergeNode in=SourceGraphic></feMergeNode></feMerge></filter></defs><g filter=url(#glow)><line x1=80 y1=30 x2=60 y2=12 stroke=#22d3ee stroke-width=3.5 stroke-linecap=round></line><line x1=60 y1=12 x2=35 y2=12 stroke=#06b6d4 stroke-width=3.5 stroke-linecap=round></line><line x1=35 y1=12 x2=12 y2=30 stroke=#3b82f6 stroke-width=3.5 stroke-linecap=round></line><line x1=12 y1=30 x2=12 y2=70 stroke=#3b82f6 stroke-width=3.5 stroke-linecap=round></line><line x1=12 y1=70 x2=35 y2=88 stroke=#6366f1 stroke-width=3.5 stroke-linecap=round></line><line x1=35 y1=88 x2=60 y2=88 stroke=#8b5cf6 stroke-width=3.5 stroke-linecap=round></line><line x1=60 y1=88 x2=80 y2=70 stroke=#a855f7 stroke-width=3.5 stroke-linecap=round></line><line x1=80 y1=70 x2=80 y2=50 stroke=#c026d3 stroke-width=3.5 stroke-linecap=round></line><line x1=80 y1=50 x2=55 y2=50 stroke=#d946ef stroke-width=3.5 stroke-linecap=round></line></g><circle cx=80 cy=30 r=5 fill=#22d3ee></circle><circle cx=60 cy=12 r=5 fill=#06b6d4></circle><circle cx=35 cy=12 r=5 fill=#3b82f6></circle><circle cx=12 cy=30 r=5 fill=#3b82f6></circle><circle cx=12 cy=70 r=5 fill=#6366f1></circle><circle cx=35 cy=88 r=5 fill=#8b5cf6></circle><circle cx=60 cy=88 r=5 fill=#a855f7></circle><circle cx=80 cy=70 r=5 fill=#c026d3></circle><circle cx=80 cy=50 r=5 fill=#d946ef></circle><circle cx=55 cy=50 r=5 fill=#d946ef></circle><g filter=url(#glow)><path d="M42 22 L62 34 L42 46 L22 34 Z"fill=#22d3ee stroke=#fff stroke-width=1.5></path><path d="M42 46 L62 34 L62 54 L42 66 Z"fill=#8b5cf6 stroke=#fff stroke-width=1.5></path><path d="M42 46 L22 34 L22 54 L42 66 Z"fill=#3b82f6 stroke=#fff stroke-width=1.5></path></g></svg></button><button class="p-1 rounded hover:bg-white/10 transition-colors"><svg fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M11 19l-7-7 7-7m8 14l-7-7 7-7"></path></svg></button></div><nav class="p-1.5 overflow-y-auto"></nav><div class="absolute bottom-0 left-0 right-0 p-2 border-t"style=border-color:rgba(255,255,255,0.08)><button><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M15 12a3 3 0 11-6 0 3 3 0 016 0z">');const ol=[{title:"Overview",items:[{id:"dashboard",label:"Dashboard",icon:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"}]},{title:"Insights",items:[{id:"anomalies",label:"AI Insights",icon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},{id:"cost",label:"Cost Analysis",icon:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},{id:"security",label:"Security Insights",icon:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"},{id:"drift",label:"Drift Detection",icon:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"}]},{title:"Deployments",items:[{id:"apps",label:"Deploy",icon:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"},{id:"rollouts",label:"Rollouts",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"}]},{title:"Workloads",items:[{id:"pods",label:"Pods",icon:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"},{id:"deployments",label:"Deployments",icon:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"},{id:"statefulsets",label:"StatefulSets",icon:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"},{id:"daemonsets",label:"DaemonSets",icon:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"},{id:"jobs",label:"Jobs",icon:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"},{id:"cronjobs",label:"CronJobs",icon:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"}]},{title:"Networking",items:[{id:"services",label:"Services",icon:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"},{id:"ingresses",label:"Ingresses",icon:"M13 10V3L4 14h7v7l9-11h-7z"},{id:"networkpolicies",label:"Network Policies",icon:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"}]},{title:"Config & Storage",items:[{id:"configmaps",label:"ConfigMaps",icon:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"},{id:"secrets",label:"Secrets",icon:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"},{id:"certificates",label:"Certificates",icon:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"},{id:"storage",label:"Storage",icon:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"}]},{title:"Cluster",items:[{id:"nodes",label:"Nodes",icon:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"},{id:"rbac",label:"RBAC",icon:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"},{id:"usermanagement",label:"User Management",icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"},{id:"events",label:"Events",icon:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"},{id:"monitoredevents",label:"Event Monitor",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},{id:"resourcemap",label:"Resource Map",icon:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"}]},{title:"Integrations",items:[{id:"connectors",label:"Connectors",icon:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"},{id:"aiagents",label:"AI Agents",icon:"M9.75 3.104v5.714a2.25 2.25 0 01-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 014.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0112 15a9.065 9.065 0 00-6.23-.693L5 14.5m14.8.8l1.57.393A9.065 9.065 0 0021.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.065 9.065 0 003.464 3.693M19.8 15.3l-1.464-1.464M5 14.5l-1.464-1.464"},{id:"sreagent",label:"SRE Agent",icon:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"}]},{title:"Extensions",items:[{id:"plugins",label:"Plugins",icon:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"},{id:"terminal",label:"Terminal",icon:"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},{id:"uidemo",label:"UI Demo",icon:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"}]}],Zc=e=>{const[t,r]=J(e.defaultExpanded??!0);return(()=>{var l=Fc();return i(l,A(q,{get when(){return!It()},get children(){var u=Nc(),v=u.firstChild,h=v.nextSibling;return u.$$click=()=>r(!t()),i(v,()=>e.section.title),re(()=>Xe(h,"class",`w-3.5 h-3.5 transition-transform duration-200 ${t()?"":"-rotate-90"}`)),u}}),null),i(l,A(q,{get when(){return t()||It()},get children(){var u=zc();return i(u,A(Ne,{get each(){return e.section.items},children:v=>{const[h,s]=J(!1),[n,f]=J({top:0,left:0});return(()=>{var g=Vc(),p=g.firstChild,_=p.firstChild;return g.addEventListener("mouseleave",()=>s(!1)),g.addEventListener("mouseenter",b=>{if(It()){const C=b.currentTarget.getBoundingClientRect();f({top:C.top+C.height/2,left:C.right+8}),s(!0)}}),g.$$click=b=>{b.preventDefault(),b.stopPropagation(),v.id==="terminal"?e.onTerminalClick?.():At(v.id)},i(g,A(q,{get when(){return!It()},get children(){var b=jc();return i(b,()=>v.label),re(()=>He(b,`text-sm ${kr()===v.id?"font-medium":""}`)),b}}),null),i(g,A(q,{get when(){return Me(()=>!!It())()&&h()},get children(){return A(Xr,{get children(){var b=Uc();return i(b,()=>v.label),re(C=>{var x=`${n().top}px`,o=`${n().left}px`;return x!==C.e&&oe(b,"top",C.e=x),o!==C.t&&oe(b,"left",C.t=o),C},{e:void 0,t:void 0}),b}})}}),null),re(b=>{var C=`w-full flex items-center gap-2.5 px-2.5 py-1.5 rounded-md transition-all ${kr()===v.id?"bg-white/10":"hover:bg-white/5"}`,x=kr()===v.id?"var(--text-primary)":"var(--text-secondary)",o=v.icon;return C!==b.e&&He(g,b.e=C),x!==b.t&&oe(g,"color",b.t=x),o!==b.a&&Xe(_,"d",b.a=o),b},{e:void 0,t:void 0,a:void 0}),g})()}})),re(()=>He(u,`space-y-px ${It()?"":"mt-0.5"}`)),u}}),null),l})()},Qc=()=>{const[e,t]=J(""),r=()=>{console.log("[Sidebar] Terminal icon clicked - calling toggleTerminal()"),Hc(),console.log("[Sidebar] toggleTerminal() called")},l=ze(()=>{const u=e().toLowerCase().trim();return u?ol.map(v=>({...v,items:v.items.filter(h=>h.label.toLowerCase().includes(u)||v.title.toLowerCase().includes(u))})).filter(v=>v.items.length>0):ol});return(()=>{var u=Xc(),v=u.firstChild,h=v.firstChild;h.firstChild;var s=h.nextSibling,n=s.firstChild,f=v.nextSibling,g=f.nextSibling,p=g.firstChild;return p.firstChild,h.$$click=()=>At("dashboard"),i(h,A(q,{get when(){return!It()},get children(){return Wc()}}),null),ar(s,"click",Bc,!0),i(u,A(q,{get when(){return!It()},get children(){var _=Kc(),b=_.firstChild,C=b.firstChild,x=C.nextSibling;return x.$$input=o=>t(o.currentTarget.value),i(b,A(q,{get when(){return e()},get children(){var o=qc();return o.$$click=()=>t(""),o}}),null),re(()=>x.value=e()),_}}),f),i(f,A(Ne,{get each(){return l()},children:(_,b)=>(console.log(`[Sidebar] Rendering section: ${_.title} with ${_.items.length} items:`,_.items.map(C=>C.label)),_.title==="Integrations"&&(console.log("[Sidebar] âœ… INTEGRATIONS SECTION FOUND with items:",_.items.map(C=>C.label)),console.log("[Sidebar] Full section object:",JSON.stringify(_,null,2))),A(Zc,{section:_,get defaultExpanded(){return b()<3||_.title==="Integrations"},onTerminalClick:r}))}),null),i(f,A(q,{get when(){return Me(()=>!!e())()&&l().length===0},get children(){var _=Yc();return _.firstChild,_}}),null),p.$$click=()=>At("settings"),i(p,A(q,{get when(){return!It()},get children(){return Gc()}}),null),i(g,A(q,{get when(){return!It()},get children(){return Jc()}}),null),re(_=>{var b=`fixed left-0 top-0 h-full sidebar-glass transition-all duration-300 z-40 ${It()?"w-16":"w-52"}`,C=It()?"Expand":"Collapse",x=`w-4 h-4 transition-transform ${It()?"rotate-180":""}`,o=It()?"calc(100% - 3.5rem - 4rem)":"calc(100% - 3.5rem - 4rem - 3rem)",d=`w-full flex items-center gap-2.5 px-2.5 py-1.5 rounded-md transition-all ${kr()==="settings"?"bg-white/10":"hover:bg-white/5"}`,a=kr()==="settings"?"var(--text-primary)":"var(--text-secondary)";return b!==_.e&&He(u,_.e=b),C!==_.t&&Xe(s,"title",_.t=C),x!==_.a&&Xe(n,"class",_.a=x),o!==_.o&&oe(f,"height",_.o=o),d!==_.i&&He(p,_.i=d),a!==_.n&&oe(p,"color",_.n=a),_},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),u})()};Qe(["click","input"]);const[tt,Po]=J("_all"),[hi,Io]=J(["default"]),[ms,Bo]=J([]),[St,Oo]=J(""),[ed,sn]=J(!1),[td,ns]=J(""),[al,rd]=J({connected:!1,context:"",server:"",namespace:"default",nodeCount:0,podCount:0,cpuUsage:0,memoryUsage:0});async function sd(){const e=await fetch("/api/namespaces");if(!e.ok)throw new Error("Failed to fetch namespaces");return(await e.json()).namespaces||[]}async function id(e){const t=e==="_all"?"/api/pods?all=true":`/api/pods?namespace=${e}`,r=await fetch(t);if(!r.ok)throw new Error("Failed to fetch pods");const l=await r.json();return Array.isArray(l)?l:l.pods||[]}async function nd(e){const t=e==="_all"?"/api/deployments?all=true":`/api/deployments?namespace=${e}`,r=await fetch(t);if(!r.ok)throw new Error("Failed to fetch deployments");const l=await r.json();return Array.isArray(l)?l:l.deployments||[]}async function ld(e){const t=e==="_all"?"/api/services?all=true":`/api/services?namespace=${e}`,r=await fetch(t);if(!r.ok)throw new Error("Failed to fetch services");const l=await r.json();return Array.isArray(l)?l:l.services||[]}async function od(){const e=await fetch("/api/nodes");if(!e.ok)throw new Error("Failed to fetch nodes");const t=await e.json();return Array.isArray(t)?t:t.nodes||[]}async function ad(){const e=await fetch("/api/status");if(!e.ok)throw new Error("Failed to fetch status");const t=await e.json();return{connected:t.connected||!1,context:t.cluster||t.context||"",server:t.server||"",namespace:t.namespace||"default",nodeCount:t.nodeCount||0,podCount:t.podCount||0,cpuUsage:t.cpuUsage||0,memoryUsage:t.memoryUsage||0}}async function Ho(){const e=await fetch("/api/contexts");if(!e.ok)throw new Error("Failed to fetch contexts");return(await e.json()).contexts||[]}async function cd(e){sn(!0),ns(`Switching to ${e}...`);try{if(!(await fetch("/api/contexts/switch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({context:e})})).ok)throw new Error("Failed to switch context");Oo(e),ns(`Loading resources from ${e}...`),zo();const r=await Ho();Bo(r);const l=await fetch("/api/namespaces");if(l.ok){const u=await l.json();Io(u.namespaces||[])}ns(`Connected to ${e}`),setTimeout(()=>{sn(!1),ns("")},1e3)}catch(t){throw ns(`Failed to switch to ${e}`),setTimeout(()=>{sn(!1),ns("")},2e3),t}}const[Ci]=qe(sd),[cl,{refetch:dd}]=qe(tt,id),[Q4,{refetch:hd}]=qe(tt,nd),[ew,{refetch:ud}]=qe(tt,ld),[os,{refetch:No}]=qe(od),[bn,{refetch:fd}]=qe(ad),[yn,{refetch:tw}]=qe(Ho);Mt(()=>{const e=Ci();e&&Io(e)});Mt(()=>{const e=bn();console.log("Status resource loaded:",e),e&&(rd(e),Oo(e.context))});Mt(()=>{const e=yn();console.log("Contexts resource loaded:",e),e&&Bo(e)});Mt(()=>{bn.error&&console.error("Status error:",bn.error),Ci.error&&console.error("Namespaces error:",Ci.error),cl.error&&console.error("Pods error:",cl.error),os.error&&console.error("Nodes error:",os.error)});const[Gt,gd]=J(0);function zo(){dd(),hd(),ud(),No(),fd(),gd(e=>e+1)}const Kr={dark:{name:"dark",label:"Dark",icon:"moon",colors:{bgPrimary:"#0f172a",bgSecondary:"#1e293b",bgTertiary:"#334155",bgCard:"rgba(30, 41, 59, 0.8)",bgNavbar:"rgba(15, 23, 42, 0.95)",bgInput:"rgba(30, 41, 59, 0.8)",textPrimary:"#ffffff",textSecondary:"#94a3b8",textMuted:"#64748b",borderColor:"rgba(100, 116, 139, 0.3)",borderLight:"rgba(100, 116, 139, 0.5)",accentPrimary:"#06b6d4",accentSecondary:"#3b82f6",accentGradient:"linear-gradient(135deg, #06b6d4 0%, #3b82f6 50%, #8b5cf6 100%)",successColor:"#22c55e",warningColor:"#f59e0b",errorColor:"#ef4444"}},light:{name:"light",label:"Light",icon:"sun",colors:{bgPrimary:"#f8fafc",bgSecondary:"#e2e8f0",bgTertiary:"#cbd5e1",bgCard:"rgba(255, 255, 255, 0.95)",bgNavbar:"rgba(248, 250, 252, 0.95)",bgInput:"rgba(255, 255, 255, 0.9)",textPrimary:"#0f172a",textSecondary:"#475569",textMuted:"#64748b",borderColor:"rgba(148, 163, 184, 0.4)",borderLight:"rgba(148, 163, 184, 0.6)",accentPrimary:"#0891b2",accentSecondary:"#2563eb",accentGradient:"linear-gradient(135deg, #0891b2 0%, #2563eb 100%)",successColor:"#16a34a",warningColor:"#d97706",errorColor:"#dc2626"}},midnight:{name:"midnight",label:"Midnight",icon:"stars",colors:{bgPrimary:"#030712",bgSecondary:"#111827",bgTertiary:"#1f2937",bgCard:"rgba(17, 24, 39, 0.9)",bgNavbar:"rgba(3, 7, 18, 0.98)",bgInput:"rgba(17, 24, 39, 0.9)",textPrimary:"#f9fafb",textSecondary:"#9ca3af",textMuted:"#6b7280",borderColor:"rgba(75, 85, 99, 0.4)",borderLight:"rgba(75, 85, 99, 0.6)",accentPrimary:"#8b5cf6",accentSecondary:"#a855f7",accentGradient:"linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%)",successColor:"#10b981",warningColor:"#f59e0b",errorColor:"#f43f5e"}},cyberpunk:{name:"cyberpunk",label:"Cyberpunk",icon:"bolt",colors:{bgPrimary:"#0a0a0f",bgSecondary:"#12121a",bgTertiary:"#1a1a25",bgCard:"rgba(18, 18, 26, 0.95)",bgNavbar:"rgba(10, 10, 15, 0.98)",bgInput:"rgba(18, 18, 26, 0.9)",textPrimary:"#00ff9f",textSecondary:"#ff00ff",textMuted:"#00d4ff",borderColor:"rgba(0, 255, 159, 0.3)",borderLight:"rgba(255, 0, 255, 0.4)",accentPrimary:"#00ff9f",accentSecondary:"#ff00ff",accentGradient:"linear-gradient(135deg, #00ff9f 0%, #ff00ff 100%)",successColor:"#00ff9f",warningColor:"#ffff00",errorColor:"#ff0055"}},ocean:{name:"ocean",label:"Ocean",icon:"wave",colors:{bgPrimary:"#0c1929",bgSecondary:"#132f4c",bgTertiary:"#1a4971",bgCard:"rgba(19, 47, 76, 0.9)",bgNavbar:"rgba(12, 25, 41, 0.98)",bgInput:"rgba(19, 47, 76, 0.9)",textPrimary:"#ffffff",textSecondary:"#b2bac2",textMuted:"#8b949e",borderColor:"rgba(48, 98, 139, 0.5)",borderLight:"rgba(48, 98, 139, 0.7)",accentPrimary:"#29b6f6",accentSecondary:"#4fc3f7",accentGradient:"linear-gradient(135deg, #29b6f6 0%, #4fc3f7 100%)",successColor:"#66bb6a",warningColor:"#ffa726",errorColor:"#ef5350"}},terminal:{name:"terminal",label:"Terminal",icon:"terminal",colors:{bgPrimary:"#000000",bgSecondary:"#1a1a1a",bgTertiary:"#2d2d2d",bgCard:"rgba(26, 26, 26, 0.95)",bgNavbar:"rgba(0, 0, 0, 0.98)",bgInput:"rgba(26, 26, 26, 0.9)",textPrimary:"#ffffff",textSecondary:"#e5e5e5",textMuted:"#999999",borderColor:"rgba(255, 255, 255, 0.1)",borderLight:"rgba(255, 255, 255, 0.15)",accentPrimary:"#007aff",accentSecondary:"#5ac8fa",accentGradient:"linear-gradient(135deg, #007aff 0%, #5ac8fa 100%)",successColor:"#34c759",warningColor:"#ff9500",errorColor:"#ff3b30"}}};function pd(){if(typeof window<"u"){const e=localStorage.getItem("kubegraf-theme");if(e&&Kr[e])return e}return"dark"}const[ws,vd]=J(pd());function Fo(e){const t=Kr[e],r=document.documentElement;Object.entries(t.colors).forEach(([l,u])=>{const v=l.replace(/([A-Z])/g,"-$1").toLowerCase();r.style.setProperty(`--${v}`,u)}),document.body.setAttribute("data-theme",e),localStorage.setItem("kubegraf-theme",e)}function jo(e){vd(e),Fo(e)}typeof window<"u"&&Fo(ws());var md=R('<svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="w-5 h-5"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z">'),_d=R('<svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="w-5 h-5"><circle cx=12 cy=12 r=5></circle><line x1=12 y1=1 x2=12 y2=3></line><line x1=12 y1=21 x2=12 y2=23></line><line x1=4.22 y1=4.22 x2=5.64 y2=5.64></line><line x1=18.36 y1=18.36 x2=19.78 y2=19.78></line><line x1=1 y1=12 x2=3 y2=12></line><line x1=21 y1=12 x2=23 y2=12></line><line x1=4.22 y1=19.78 x2=5.64 y2=18.36></line><line x1=18.36 y1=5.64 x2=19.78 y2=4.22>'),bd=R('<svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="w-5 h-5"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2">'),yd=R('<svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="w-5 h-5"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2">'),xd=R('<svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="w-5 h-5"><path d="M2 12c2-2 4-4 6-4s4 2 6 4 4 4 6 4 4-2 6-4"></path><path d="M2 6c2-2 4-4 6-4s4 2 6 4 4 4 6 4 4-2 6-4"></path><path d="M2 18c2-2 4-4 6-4s4 2 6 4 4 4 6 4 4-2 6-4">'),$d=R('<svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="w-5 h-5"><polyline points="4 17 10 11 4 5"></polyline><line x1=12 y1=19 x2=20 y2=19>'),wd=R('<div class="fixed inset-0"style=z-index:99998>'),Sd=R('<div class="fixed w-48 rounded-lg border border-[var(--border-color)] shadow-xl"style=background:var(--bg-secondary);z-index:99999>'),Cd=R('<div class=relative><button class="icon-btn border border-[var(--border-color)] hover:border-[var(--accent-primary)]">'),kd=R("<button><span class=font-medium>"),Ad=R('<svg class="w-4 h-4 ml-auto"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"clip-rule=evenodd>');const Md=()=>{const[e,t]=J(!1),[r,l]=J({top:0,right:0});let u;const v={dark:md(),light:_d(),midnight:bd(),cyberpunk:yd(),ocean:xd(),terminal:$d()},h=()=>{if(!e()&&u){const s=u.getBoundingClientRect();l({top:s.bottom+8,right:window.innerWidth-s.right})}t(!e())};return(()=>{var s=Cd(),n=s.firstChild;n.$$click=h;var f=u;return typeof f=="function"?Wt(f,n):u=n,i(n,()=>v[ws()]),i(s,A(Xr,{get children(){return A(q,{get when(){return e()},get children(){return[(()=>{var g=wd();return g.$$click=()=>t(!1),g})(),(()=>{var g=Sd();return i(g,()=>Object.keys(Kr).map(p=>(()=>{var _=kd(),b=_.firstChild;return _.$$click=()=>{jo(p),t(!1)},i(_,()=>v[p],b),i(b,()=>Kr[p].label),i(_,(()=>{var C=Me(()=>ws()===p);return()=>C()&&Ad()})(),null),re(()=>He(_,`w-full flex items-center gap-3 px-4 py-3 transition-colors hover:bg-[var(--bg-tertiary)] ${ws()===p?"text-[var(--accent-primary)]":"text-[var(--text-primary)]"} ${p==="dark"?"rounded-t-lg":""} ${p==="terminal"?"rounded-b-lg":""}`)),_})())),re(p=>{var _=`${r().top}px`,b=`${r().right}px`;return _!==p.e&&oe(g,"top",p.e=_),b!==p.t&&oe(g,"right",p.t=b),p},{e:void 0,t:void 0}),g})()]}})}}),null),re(()=>Xe(n,"title",`Theme: ${Kr[ws()].label}`)),s})()};Qe(["click"]);const Pr="/api";async function Ee(e,t){const l=new AbortController,u=setTimeout(()=>l.abort(),15e3);try{const v=await fetch(`${Pr}${e}`,{headers:{"Content-Type":"application/json",...t?.headers},signal:l.signal,...t});if(clearTimeout(u),!v.ok){const h=await v.text();throw new Error(h||`API error: ${v.status}`)}return v.json()}catch(v){throw clearTimeout(u),v.name==="AbortError"?new Error("Request timed out. The server may be processing a large amount of data."):v}}async function Dt(e){const r=await(await fetch(`${Pr}${e}`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();if(!r.success)throw new Error(r.error||"Delete operation failed");return r}const Re={getStatus:()=>Ee("/status"),checkForUpdates:()=>Ee("/updates/check"),installUpdate:e=>Ee("/updates/install",{method:"POST",body:JSON.stringify({downloadUrl:e})}),getMetrics:()=>Ee("/metrics"),getNamespaces:async()=>(await Ee("/namespaces")).namespaces||[],getPods:async e=>{const t=e&&e!=="_all"?`/pods?namespace=${e}`:"/pods?namespace=",r=await Ee(t);return Array.isArray(r)?r:[]},getPodDetails:(e,t)=>Ee(`/pod/details?name=${e}&namespace=${t}`),getPodYAML:(e,t)=>Ee(`/pod/yaml?name=${e}&namespace=${t}`),updatePod:async(e,t,r)=>{const l=await fetch(`/api/pod/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"text/yaml"},body:r});if(!l.ok){const u=await l.json().catch(()=>({message:"Unknown error"}));throw new Error(u.error||u.message||`API error: ${l.statusText}`)}return l.json()},getPodDescribe:(e,t)=>Ee(`/pod/describe?name=${e}&namespace=${t}`),deletePod:(e,t)=>Dt(`/pod/delete?name=${e}&namespace=${t}`),restartPod:(e,t)=>Ee(`/pod/restart?name=${e}&namespace=${t}`,{method:"POST"}),getPodMetrics:async e=>{const t=e&&e!=="_all"?`/pods/metrics?namespace=${e}`:"/pods/metrics?namespace=";return await Ee(t)||{}},getDeployments:async e=>{const t=e&&e!=="_all"?`/deployments?namespace=${e}`:"/deployments?namespace=",r=await Ee(t);return Array.isArray(r)?r:[]},getDeploymentDetails:(e,t)=>Ee(`/deployment/details?name=${e}&namespace=${t}`),getDeploymentYAML:(e,t)=>Ee(`/deployment/yaml?name=${e}&namespace=${t}`),updateDeployment:async(e,t,r)=>{const l=await fetch(`/api/deployment/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"text/yaml"},body:r});if(!l.ok){const u=await l.json().catch(()=>({message:"Unknown error"}));throw new Error(u.error||u.message||`API error: ${l.statusText}`)}return l.json()},getDeploymentDescribe:(e,t)=>Ee(`/deployment/describe?name=${e}&namespace=${t}`),deleteDeployment:(e,t)=>Dt(`/deployment/delete?name=${e}&namespace=${t}`),restartDeployment:(e,t)=>Ee(`/deployment/restart?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST"}),scaleDeployment:(e,t,r)=>Ee(`/deployment/scale?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}&replicas=${r}`,{method:"POST"}),getStatefulSets:async e=>{const t=e&&e!=="_all"?`/statefulsets?namespace=${e}`:"/statefulsets?namespace=",r=await Ee(t);return Array.isArray(r)?r:[]},getStatefulSetYAML:(e,t)=>Ee(`/statefulset/yaml?name=${e}&namespace=${t}`),getStatefulSetDescribe:(e,t)=>Ee(`/statefulset/describe?name=${e}&namespace=${t}`),deleteStatefulSet:(e,t)=>Dt(`/statefulset/delete?name=${e}&namespace=${t}`),restartStatefulSet:(e,t)=>Ee(`/statefulset/restart?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST"}),scaleStatefulSet:(e,t,r)=>Ee(`/statefulset/scale?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}&replicas=${r}`,{method:"POST"}),getDaemonSets:async e=>{const t=e&&e!=="_all"?`/daemonsets?namespace=${e}`:"/daemonsets?namespace=",r=await Ee(t);return Array.isArray(r)?r:[]},getDaemonSetYAML:(e,t)=>Ee(`/daemonset/yaml?name=${e}&namespace=${t}`),updateDaemonSet:(e,t,r)=>fetch(`${Pr}/daemonset/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"application/yaml"},body:r}).then(l=>l.json()),getDaemonSetDescribe:(e,t)=>Ee(`/daemonset/describe?name=${e}&namespace=${t}`),deleteDaemonSet:(e,t)=>Dt(`/daemonset/delete?name=${e}&namespace=${t}`),getCronJobs:async e=>{const t=e&&e!=="_all"?`/cronjobs?namespace=${e}`:"/cronjobs?namespace=",r=await Ee(t);return Array.isArray(r)?r:[]},getCronJobYAML:(e,t)=>Ee(`/cronjob/yaml?name=${e}&namespace=${t}`),updateCronJob:(e,t,r)=>fetch(`${Pr}/cronjob/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"application/yaml"},body:r}).then(l=>l.json()),deleteCronJob:(e,t)=>Dt(`/cronjob/delete?name=${e}&namespace=${t}`),getJobs:async e=>{const t=e&&e!=="_all"?`/jobs?namespace=${e}`:"/jobs?namespace=",r=await Ee(t);return Array.isArray(r)?r:[]},getJobYAML:(e,t)=>Ee(`/job/yaml?name=${e}&namespace=${t}`),updateJob:(e,t,r)=>fetch(`${Pr}/job/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"application/yaml"},body:r}).then(l=>l.json()),deleteJob:(e,t)=>Dt(`/job/delete?name=${e}&namespace=${t}`),getServices:async e=>{const t=e&&e!=="_all"?`/services?namespace=${e}`:"/services?namespace=",r=await Ee(t);return Array.isArray(r)?r:[]},getServiceYAML:(e,t)=>Ee(`/service/yaml?name=${e}&namespace=${t}`),updateService:(e,t,r)=>fetch(`${Pr}/service/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"application/yaml"},body:r}).then(l=>l.json()),getServiceDescribe:(e,t)=>Ee(`/service/describe?name=${e}&namespace=${t}`),deleteService:(e,t)=>Dt(`/service/delete?name=${e}&namespace=${t}`),getIngresses:async e=>{const t=e&&e!=="_all"?`/ingresses?namespace=${e}`:"/ingresses?namespace=",r=await Ee(t);return Array.isArray(r)?r:[]},getIngressYAML:(e,t)=>Ee(`/ingress/yaml?name=${e}&namespace=${t}`),updateIngress:(e,t,r)=>fetch(`${Pr}/ingress/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"application/yaml"},body:r}).then(l=>l.json()),getIngressDescribe:(e,t)=>Ee(`/ingress/describe?name=${e}&namespace=${t}`),deleteIngress:(e,t)=>Dt(`/ingress/delete?name=${e}&namespace=${t}`),getConfigMaps:async e=>{const t=e&&e!=="_all"?`/configmaps?namespace=${e}`:"/configmaps?namespace=",r=await Ee(t);return Array.isArray(r)?r:[]},getConfigMapYAML:(e,t)=>Ee(`/configmap/yaml?name=${e}&namespace=${t}`),getConfigMapDescribe:(e,t)=>Ee(`/configmap/describe?name=${e}&namespace=${t}`),deleteConfigMap:(e,t)=>Dt(`/configmap/delete?name=${e}&namespace=${t}`),getSecrets:async e=>{const t=e&&e!=="_all"?`/secrets?namespace=${e}`:"/secrets?namespace=",r=await Ee(t);return Array.isArray(r)?r:[]},getSecretYAML:(e,t)=>Ee(`/secret/yaml?name=${e}&namespace=${t}`),updateSecret:async(e,t,r)=>{const l=await fetch(`/api/secret/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"text/yaml"},body:r});if(!l.ok){const u=await l.json().catch(()=>({message:"Unknown error"}));throw new Error(u.error||u.message||`API error: ${l.statusText}`)}return l.json()},getSecretDescribe:(e,t)=>Ee(`/secret/describe?name=${e}&namespace=${t}`),deleteSecret:(e,t)=>Dt(`/secret/delete?name=${e}&namespace=${t}`),getCertificates:async e=>{const t=e&&e!=="_all"?`/certificates?namespace=${e}`:"/certificates?namespace=",r=await Ee(t);return Array.isArray(r)?r:[]},getCertificateYAML:(e,t)=>Ee(`/certificate/yaml?name=${e}&namespace=${t}`),updateCertificate:(e,t,r)=>fetch(`${Pr}/certificate/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"application/yaml"},body:r}).then(l=>l.json()),getCertificateDescribe:(e,t)=>Ee(`/certificate/describe?name=${e}&namespace=${t}`),deleteCertificate:(e,t)=>Dt(`/certificate/delete?name=${e}&namespace=${t}`),getNodes:async()=>{const e=await Ee("/nodes");return Array.isArray(e)?e:[]},getNodeDetails:e=>Ee(`/node/details?name=${e}`),getNodeYAML:e=>Ee(`/node/yaml?name=${e}`),getNodeDescribe:e=>Ee(`/node/describe?name=${e}`),getTopology:e=>{const t=e&&e!=="All Namespaces"?`/topology?namespace=${e}`:"/topology";return Ee(t)},getResourceMap:()=>Ee("/resourcemap"),getImpactAnalysis:(e,t,r)=>Ee(`/impact?kind=${e}&name=${t}&namespace=${r}`),getSecurityAnalysis:()=>Ee("/security"),startPortForward:(e,t,r,l,u)=>Ee("/portforward/start",{method:"POST",body:JSON.stringify({type:e,name:t,namespace:r,localPort:l,remotePort:u})}),stopPortForward:e=>Ee(`/portforward/stop?id=${e}`,{method:"POST"}),listPortForwards:()=>Ee("/portforward/list"),getAIStatus:()=>Ee("/ai/status"),queryAI:e=>Ee("/ai/query",{method:"POST",body:JSON.stringify({query:e})}),analyzePod:(e,t)=>Ee(`/ai/analyze/pod?name=${e}&namespace=${t}`),explainError:(e,t)=>Ee("/ai/explain",{method:"POST",body:JSON.stringify({error:e,resourceType:t})}),runDiagnostics:(e,t)=>{const r=new URLSearchParams;e&&r.append("namespace",e),t&&r.append("category",t);const l=r.toString()?`?${r.toString()}`:"";return Ee(`/diagnostics/run${l}`)},getDiagnosticsCategories:()=>Ee("/diagnostics/categories"),scanVulnerabilities:e=>{const t=new URLSearchParams;e&&t.append("severity",e);const r=t.toString()?`?${t.toString()}`:"";return Ee(`/vulnerabilities/scan${r}`)},refreshVulnerabilities:()=>Ee("/vulnerabilities/refresh",{method:"POST"}),getVulnerabilityStats:()=>Ee("/vulnerabilities/stats"),detectAnomalies:e=>{const t=e?`/anomalies/detect?severity=${e}`:"/anomalies/detect";return Ee(t)},getAnomalyStats:()=>Ee("/anomalies/stats"),remediateAnomaly:e=>Ee("/anomalies/remediate",{method:"POST",body:JSON.stringify({anomalyId:e})}),getMLRecommendations:()=>Ee("/ml/recommendations"),predictResourceNeeds:(e,t,r)=>{const l=new URLSearchParams({namespace:e,deployment:t});return r&&l.append("hours",r.toString()),Ee(`/ml/predict?${l.toString()}`)},getAnomalyMetrics:e=>{const t=e?`/anomalies/metrics?limit=${e}`:"/anomalies/metrics";return Ee(t)},getMonitoredEvents:e=>{const t=new URLSearchParams;e?.type&&t.append("type",e.type),e?.category&&t.append("category",e.category),e?.severity&&t.append("severity",e.severity),e?.namespace&&t.append("namespace",e.namespace),e?.since&&t.append("since",e.since),e?.limit&&t.append("limit",e.limit.toString());const r=t.toString()?`?${t.toString()}`:"";return Ee(`/events/monitored${r}`)},getLogErrors:e=>{const t=new URLSearchParams;e?.namespace&&t.append("namespace",e.namespace),e?.since&&t.append("since",e.since),e?.limit&&t.append("limit",e.limit.toString());const r=t.toString()?`?${t.toString()}`:"";return Ee(`/events/log-errors${r}`)},getEventStats:()=>Ee("/events/stats"),getGroupedEvents:e=>{const t=new URLSearchParams;e&&t.append("period",e);const r=t.toString()?`?${t.toString()}`:"";return Ee(`/events/grouped${r}`)},getClusterCost:()=>Ee("/cost/cluster"),getNamespaceCost:e=>Ee(`/cost/namespace?namespace=${e}`),getPodCost:(e,t)=>Ee(`/cost/pod?name=${e}&namespace=${t}`),getDeploymentCost:(e,t)=>Ee(`/cost/deployment?name=${e}&namespace=${t}`),getIdleResources:(e,t,r)=>{const l=new URLSearchParams;e&&l.append("namespace",e),t&&l.append("cpuThreshold",t.toString()),r&&l.append("memThreshold",r.toString());const u=l.toString()?`?${l.toString()}`:"";return Ee(`/cost/idle${u}`)},checkDrift:(e,t,r)=>{const l=new URLSearchParams({kind:e,name:t});return r&&l.append("namespace",r),Ee(`/drift/check?${l.toString()}`)},getNamespaceDrift:e=>Ee(`/drift/namespace?namespace=${e}`),getDriftSummary:e=>Ee(`/drift/summary?namespace=${e}`),revertDrift:(e,t,r)=>Ee("/drift/revert",{method:"POST",body:JSON.stringify({kind:e,name:t,namespace:r})}),getNetworkTopology:()=>Ee("/network/topology"),getPodHeatmap:()=>Ee("/heatmap/pods"),getNodeHeatmap:()=>Ee("/heatmap/nodes"),getPluginsList:()=>Ee("/plugins/list"),installPlugin:e=>Ee("/plugins/install",{method:"POST",body:JSON.stringify({source:e})}),uninstallPlugin:e=>Ee("/plugins/uninstall",{method:"POST",body:JSON.stringify({name:e})}),getHelmReleases:async e=>{const t=e?`/plugins/helm/releases?namespace=${e}`:"/plugins/helm/releases";return(await Ee(t)).releases||[]},getHelmReleaseDetails:(e,t)=>Ee(`/plugins/helm/release?name=${e}&namespace=${t}`),getHelmReleaseHistory:(e,t)=>Ee(`/plugins/helm/history?name=${e}&namespace=${t}`),rollbackHelmRelease:(e,t,r)=>Ee("/plugins/helm/rollback",{method:"POST",body:JSON.stringify({name:e,namespace:t,revision:r})}),getArgoCDApps:async()=>(await Ee("/plugins/argocd/apps")).apps||[],getArgoCDAppDetails:(e,t)=>Ee(`/plugins/argocd/app?name=${e}&namespace=${t}`),syncArgoCDApp:(e,t)=>Ee("/plugins/argocd/sync",{method:"POST",body:JSON.stringify({name:e,namespace:t})}),refreshArgoCDApp:(e,t)=>Ee("/plugins/argocd/refresh",{method:"POST",body:JSON.stringify({name:e,namespace:t})}),getFluxResources:async()=>(await Ee("/plugins/flux/resources")).resources||[],getKustomizeResources:()=>Ee("/plugins/kustomize/resources"),getCloudInfo:()=>Ee("/cloud"),getContexts:()=>Ee("/contexts"),getCurrentContext:()=>Ee("/contexts/current"),switchContext:e=>Ee("/contexts/switch",{method:"POST",body:JSON.stringify({context:e})}),getEvents:async(e,t)=>{const r=new URLSearchParams;return e&&e!=="All Namespaces"&&r.set("namespace",e),t&&r.set("limit",t.toString()),Ee(`/events?${r.toString()}`)},getApps:()=>Ee("/apps"),getAppDetails:e=>Ee(`/apps/${e}`),installApp:(e,t,r)=>Ee("/apps/install",{method:"POST",body:JSON.stringify({name:e,namespace:t,values:r})}),uninstallApp:(e,t)=>Ee("/apps/uninstall",{method:"POST",body:JSON.stringify({name:e,namespace:t})}),getInstalledApps:()=>Ee("/apps/installed"),getLocalClusters:()=>Ee("/apps/local-clusters"),analyzePodsLogs:e=>Ee(`/ai/analyze/logs${e?`?namespace=${e}`:""}`),analyzePodLogs:(e,t)=>Ee(`/ai/analyze/pod-logs?name=${e}&namespace=${t}`),getPVYAML:e=>Ee(`/storage/pv/yaml?name=${encodeURIComponent(e)}`),updatePV:async(e,t)=>{const r=await fetch(`/api/storage/pv/update?name=${encodeURIComponent(e)}`,{method:"POST",headers:{"Content-Type":"text/yaml"},body:t});if(!r.ok){const l=await r.json().catch(()=>({message:"Unknown error"}));throw new Error(l.error||l.message||`API error: ${r.statusText}`)}return r.json()},deletePV:e=>Dt(`/storage/pv/delete?name=${e}`),getPVCYAML:(e,t)=>Ee(`/storage/pvc/yaml?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`),updatePVC:async(e,t,r)=>{const l=await fetch(`/api/storage/pvc/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"text/yaml"},body:r});if(!l.ok){const u=await l.json().catch(()=>({message:"Unknown error"}));throw new Error(u.error||u.message||`API error: ${l.statusText}`)}return l.json()},deletePVC:(e,t)=>Dt(`/storage/pvc/delete?name=${e}&namespace=${t}`),getStorageClassYAML:e=>Ee(`/storage/storageclass/yaml?name=${encodeURIComponent(e)}`),updateStorageClass:async(e,t)=>{const r=await fetch(`/api/storage/storageclass/update?name=${encodeURIComponent(e)}`,{method:"POST",headers:{"Content-Type":"text/yaml"},body:t});if(!r.ok){const l=await r.json().catch(()=>({message:"Unknown error"}));throw new Error(l.error||l.message||`API error: ${r.statusText}`)}return r.json()},deleteStorageClass:e=>Dt(`/storage/storageclass/delete?name=${e}`),getRoleYAML:(e,t)=>Ee(`/rbac/role/yaml?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`),updateRole:async(e,t,r)=>{const l=await fetch(`/api/rbac/role/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"text/yaml"},body:r});if(!l.ok){const u=await l.json().catch(()=>({message:"Unknown error"}));throw new Error(u.error||u.message||`API error: ${l.statusText}`)}return l.json()},deleteRole:(e,t)=>Dt(`/rbac/role/delete?name=${e}&namespace=${t}`),getRoleBindingYAML:(e,t)=>Ee(`/rbac/rolebinding/yaml?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`),updateRoleBinding:async(e,t,r)=>{const l=await fetch(`/api/rbac/rolebinding/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"text/yaml"},body:r});if(!l.ok){const u=await l.json().catch(()=>({message:"Unknown error"}));throw new Error(u.error||u.message||`API error: ${l.statusText}`)}return l.json()},deleteRoleBinding:(e,t)=>Dt(`/rbac/rolebinding/delete?name=${e}&namespace=${t}`),getClusterRoleYAML:e=>Ee(`/rbac/clusterrole/yaml?name=${encodeURIComponent(e)}`),updateClusterRole:async(e,t)=>{const r=await fetch(`/api/rbac/clusterrole/update?name=${encodeURIComponent(e)}`,{method:"POST",headers:{"Content-Type":"text/yaml"},body:t});if(!r.ok){const l=await r.json().catch(()=>({message:"Unknown error"}));throw new Error(l.error||l.message||`API error: ${r.statusText}`)}return r.json()},deleteClusterRole:e=>Dt(`/rbac/clusterrole/delete?name=${e}`),getClusterRoleBindingYAML:e=>Ee(`/rbac/clusterrolebinding/yaml?name=${encodeURIComponent(e)}`),updateClusterRoleBinding:async(e,t)=>{const r=await fetch(`/api/rbac/clusterrolebinding/update?name=${encodeURIComponent(e)}`,{method:"POST",headers:{"Content-Type":"text/yaml"},body:t});if(!r.ok){const l=await r.json().catch(()=>({message:"Unknown error"}));throw new Error(l.error||l.message||`API error: ${r.statusText}`)}return r.json()},deleteClusterRoleBinding:e=>Dt(`/rbac/clusterrolebinding/delete?name=${e}`),applyRecommendation:async e=>Ee("/ml/recommendations/apply",{method:"POST",body:JSON.stringify({id:e})}),getConnectors:()=>Ee("/connectors"),createConnector:e=>Ee("/connectors",{method:"POST",body:JSON.stringify(e)}),updateConnector:(e,t)=>Ee(`/connectors/${e}`,{method:"PUT",body:JSON.stringify(t)}),deleteConnector:e=>Ee(`/connectors/${e}`,{method:"DELETE"}),testConnector:e=>Ee(`/connectors/${e}/test`,{method:"POST"})};var Ed=R('<div class="modal-overlay animate-fade-in"><div><div class="flex items-center justify-between p-4 border-b"style=border-color:var(--border-color)><h2 class="text-lg font-semibold"style=color:var(--text-primary)></h2><button class="p-1 rounded-lg transition-colors hover:bg-[var(--bg-tertiary)]"style=color:var(--text-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12"></path></svg></button></div><div>');const it=e=>{Mt(()=>{if(e.isOpen){const r=l=>{const u=l.target;u.tagName==="INPUT"||u.tagName==="TEXTAREA"||u.closest(".xterm")||u.closest("[data-terminal]")||l.key==="Escape"&&e.onClose()};document.addEventListener("keydown",r),document.body.style.overflow="hidden",or(()=>{document.removeEventListener("keydown",r),document.body.style.overflow=""})}});const t={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-[90vw] w-full"};return A(q,{get when(){return e.isOpen},get children(){return A(Xr,{get children(){var r=Ed(),l=r.firstChild,u=l.firstChild,v=u.firstChild,h=v.nextSibling,s=u.nextSibling;return ar(r,"click",e.onClose,!0),l.$$click=n=>n.stopPropagation(),i(v,()=>e.title),ar(h,"click",e.onClose,!0),i(s,()=>e.children),re(n=>{var f=`modal-content ${t[e.size||"lg"]} animate-slide-up`,g=`p-4 overflow-auto ${e.size==="full"?"max-h-[85vh]":"max-h-[70vh]"}`;return f!==n.e&&He(l,n.e=f),g!==n.t&&He(s,n.t=g),n},{e:void 0,t:void 0}),r}})}})};Qe(["click"]);var Uo={exports:{}};(function(e,t){(function(r,l){e.exports=l()})(self,()=>(()=>{var r={4567:function(h,s,n){var f=this&&this.__decorate||function(c,m,$,S){var E,y=arguments.length,k=y<3?m:S===null?S=Object.getOwnPropertyDescriptor(m,$):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(c,m,$,S);else for(var B=c.length-1;B>=0;B--)(E=c[B])&&(k=(y<3?E(k):y>3?E(m,$,k):E(m,$))||k);return y>3&&k&&Object.defineProperty(m,$,k),k},g=this&&this.__param||function(c,m){return function($,S){m($,S,c)}};Object.defineProperty(s,"__esModule",{value:!0}),s.AccessibilityManager=void 0;const p=n(9042),_=n(6114),b=n(9924),C=n(844),x=n(5596),o=n(4725),d=n(3656);let a=s.AccessibilityManager=class extends C.Disposable{constructor(c,m){super(),this._terminal=c,this._renderService=m,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let $=0;$<this._terminal.rows;$++)this._rowElements[$]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[$]);if(this._topBoundaryFocusListener=$=>this._handleBoundaryFocus($,0),this._bottomBoundaryFocusListener=$=>this._handleBoundaryFocus($,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new b.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize($=>this._handleResize($.rows))),this.register(this._terminal.onRender($=>this._refreshRows($.start,$.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar($=>this._handleChar($))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab($=>this._handleTab($))),this.register(this._terminal.onKey($=>this._handleKey($.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new x.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,d.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,C.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(c){for(let m=0;m<c;m++)this._handleChar(" ")}_handleChar(c){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==c&&(this._charsToAnnounce+=c):this._charsToAnnounce+=c,c===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=p.tooMuchOutput)),_.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,_.isMac&&this._liveRegion.remove()}_handleKey(c){this._clearLiveRegion(),/\p{Control}/u.test(c)||this._charsToConsume.push(c)}_refreshRows(c,m){this._liveRegionDebouncer.refresh(c,m,this._terminal.rows)}_renderRows(c,m){const $=this._terminal.buffer,S=$.lines.length.toString();for(let E=c;E<=m;E++){const y=$.translateBufferLineToString($.ydisp+E,!0),k=($.ydisp+E+1).toString(),B=this._rowElements[E];B&&(y.length===0?B.innerText="Â ":B.textContent=y,B.setAttribute("aria-posinset",k),B.setAttribute("aria-setsize",S))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(c,m){const $=c.target,S=this._rowElements[m===0?1:this._rowElements.length-2];if($.getAttribute("aria-posinset")===(m===0?"1":`${this._terminal.buffer.lines.length}`)||c.relatedTarget!==S)return;let E,y;if(m===0?(E=$,y=this._rowElements.pop(),this._rowContainer.removeChild(y)):(E=this._rowElements.shift(),y=$,this._rowContainer.removeChild(E)),E.removeEventListener("focus",this._topBoundaryFocusListener),y.removeEventListener("focus",this._bottomBoundaryFocusListener),m===0){const k=this._createAccessibilityTreeNode();this._rowElements.unshift(k),this._rowContainer.insertAdjacentElement("afterbegin",k)}else{const k=this._createAccessibilityTreeNode();this._rowElements.push(k),this._rowContainer.appendChild(k)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(m===0?-1:1),this._rowElements[m===0?1:this._rowElements.length-2].focus(),c.preventDefault(),c.stopImmediatePropagation()}_handleResize(c){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let m=this._rowContainer.children.length;m<this._terminal.rows;m++)this._rowElements[m]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[m]);for(;this._rowElements.length>c;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const c=document.createElement("div");return c.setAttribute("role","listitem"),c.tabIndex=-1,this._refreshRowDimensions(c),c}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let c=0;c<this._terminal.rows;c++)this._refreshRowDimensions(this._rowElements[c])}}_refreshRowDimensions(c){c.style.height=`${this._renderService.dimensions.css.cell.height}px`}};s.AccessibilityManager=a=f([g(1,o.IRenderService)],a)},3614:(h,s)=>{function n(_){return _.replace(/\r?\n/g,"\r")}function f(_,b){return b?"\x1B[200~"+_+"\x1B[201~":_}function g(_,b,C,x){_=f(_=n(_),C.decPrivateModes.bracketedPasteMode&&x.rawOptions.ignoreBracketedPasteMode!==!0),C.triggerDataEvent(_,!0),b.value=""}function p(_,b,C){const x=C.getBoundingClientRect(),o=_.clientX-x.left-10,d=_.clientY-x.top-10;b.style.width="20px",b.style.height="20px",b.style.left=`${o}px`,b.style.top=`${d}px`,b.style.zIndex="1000",b.focus()}Object.defineProperty(s,"__esModule",{value:!0}),s.rightClickHandler=s.moveTextAreaUnderMouseCursor=s.paste=s.handlePasteEvent=s.copyHandler=s.bracketTextForPaste=s.prepareTextForTerminal=void 0,s.prepareTextForTerminal=n,s.bracketTextForPaste=f,s.copyHandler=function(_,b){_.clipboardData&&_.clipboardData.setData("text/plain",b.selectionText),_.preventDefault()},s.handlePasteEvent=function(_,b,C,x){_.stopPropagation(),_.clipboardData&&g(_.clipboardData.getData("text/plain"),b,C,x)},s.paste=g,s.moveTextAreaUnderMouseCursor=p,s.rightClickHandler=function(_,b,C,x,o){p(_,b,C),o&&x.rightClickSelect(_),b.value=x.selectionText,b.select()}},7239:(h,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorContrastCache=void 0;const f=n(1505);s.ColorContrastCache=class{constructor(){this._color=new f.TwoKeyMap,this._css=new f.TwoKeyMap}setCss(g,p,_){this._css.set(g,p,_)}getCss(g,p){return this._css.get(g,p)}setColor(g,p,_){this._color.set(g,p,_)}getColor(g,p){return this._color.get(g,p)}clear(){this._color.clear(),this._css.clear()}}},3656:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(n,f,g,p){n.addEventListener(f,g,p);let _=!1;return{dispose:()=>{_||(_=!0,n.removeEventListener(f,g,p))}}}},6465:function(h,s,n){var f=this&&this.__decorate||function(o,d,a,c){var m,$=arguments.length,S=$<3?d:c===null?c=Object.getOwnPropertyDescriptor(d,a):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(o,d,a,c);else for(var E=o.length-1;E>=0;E--)(m=o[E])&&(S=($<3?m(S):$>3?m(d,a,S):m(d,a))||S);return $>3&&S&&Object.defineProperty(d,a,S),S},g=this&&this.__param||function(o,d){return function(a,c){d(a,c,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Linkifier2=void 0;const p=n(3656),_=n(8460),b=n(844),C=n(2585);let x=s.Linkifier2=class extends b.Disposable{get currentLink(){return this._currentLink}constructor(o){super(),this._bufferService=o,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new _.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new _.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,b.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,b.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(o){return this._linkProviders.push(o),{dispose:()=>{const d=this._linkProviders.indexOf(o);d!==-1&&this._linkProviders.splice(d,1)}}}attachToDom(o,d,a){this._element=o,this._mouseService=d,this._renderService=a,this.register((0,p.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,p.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,p.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,p.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(o){if(this._lastMouseEvent=o,!this._element||!this._mouseService)return;const d=this._positionFromMouseEvent(o,this._element,this._mouseService);if(!d)return;this._isMouseOut=!1;const a=o.composedPath();for(let c=0;c<a.length;c++){const m=a[c];if(m.classList.contains("xterm"))break;if(m.classList.contains("xterm-hover"))return}this._lastBufferCell&&d.x===this._lastBufferCell.x&&d.y===this._lastBufferCell.y||(this._handleHover(d),this._lastBufferCell=d)}_handleHover(o){if(this._activeLine!==o.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(o,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,o)||(this._clearCurrentLink(),this._askForLink(o,!0))}_askForLink(o,d){var a,c;this._activeProviderReplies&&d||((a=this._activeProviderReplies)===null||a===void 0||a.forEach($=>{$?.forEach(S=>{S.link.dispose&&S.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=o.y);let m=!1;for(const[$,S]of this._linkProviders.entries())d?!((c=this._activeProviderReplies)===null||c===void 0)&&c.get($)&&(m=this._checkLinkProviderResult($,o,m)):S.provideLinks(o.y,E=>{var y,k;if(this._isMouseOut)return;const B=E?.map(O=>({link:O}));(y=this._activeProviderReplies)===null||y===void 0||y.set($,B),m=this._checkLinkProviderResult($,o,m),((k=this._activeProviderReplies)===null||k===void 0?void 0:k.size)===this._linkProviders.length&&this._removeIntersectingLinks(o.y,this._activeProviderReplies)})}_removeIntersectingLinks(o,d){const a=new Set;for(let c=0;c<d.size;c++){const m=d.get(c);if(m)for(let $=0;$<m.length;$++){const S=m[$],E=S.link.range.start.y<o?0:S.link.range.start.x,y=S.link.range.end.y>o?this._bufferService.cols:S.link.range.end.x;for(let k=E;k<=y;k++){if(a.has(k)){m.splice($--,1);break}a.add(k)}}}}_checkLinkProviderResult(o,d,a){var c;if(!this._activeProviderReplies)return a;const m=this._activeProviderReplies.get(o);let $=!1;for(let S=0;S<o;S++)this._activeProviderReplies.has(S)&&!this._activeProviderReplies.get(S)||($=!0);if(!$&&m){const S=m.find(E=>this._linkAtPosition(E.link,d));S&&(a=!0,this._handleNewLink(S))}if(this._activeProviderReplies.size===this._linkProviders.length&&!a)for(let S=0;S<this._activeProviderReplies.size;S++){const E=(c=this._activeProviderReplies.get(S))===null||c===void 0?void 0:c.find(y=>this._linkAtPosition(y.link,d));if(E){a=!0,this._handleNewLink(E);break}}return a}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(o){if(!this._element||!this._mouseService||!this._currentLink)return;const d=this._positionFromMouseEvent(o,this._element,this._mouseService);d&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,d)&&this._currentLink.link.activate(o,this._currentLink.link.text)}_clearCurrentLink(o,d){this._element&&this._currentLink&&this._lastMouseEvent&&(!o||!d||this._currentLink.link.range.start.y>=o&&this._currentLink.link.range.end.y<=d)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,b.disposeArray)(this._linkCacheDisposables))}_handleNewLink(o){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const d=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);d&&this._linkAtPosition(o.link,d)&&(this._currentLink=o,this._currentLink.state={decorations:{underline:o.link.decorations===void 0||o.link.decorations.underline,pointerCursor:o.link.decorations===void 0||o.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,o.link,this._lastMouseEvent),o.link.decorations={},Object.defineProperties(o.link.decorations,{pointerCursor:{get:()=>{var a,c;return(c=(a=this._currentLink)===null||a===void 0?void 0:a.state)===null||c===void 0?void 0:c.decorations.pointerCursor},set:a=>{var c,m;!((c=this._currentLink)===null||c===void 0)&&c.state&&this._currentLink.state.decorations.pointerCursor!==a&&(this._currentLink.state.decorations.pointerCursor=a,this._currentLink.state.isHovered&&((m=this._element)===null||m===void 0||m.classList.toggle("xterm-cursor-pointer",a)))}},underline:{get:()=>{var a,c;return(c=(a=this._currentLink)===null||a===void 0?void 0:a.state)===null||c===void 0?void 0:c.decorations.underline},set:a=>{var c,m,$;!((c=this._currentLink)===null||c===void 0)&&c.state&&(($=(m=this._currentLink)===null||m===void 0?void 0:m.state)===null||$===void 0?void 0:$.decorations.underline)!==a&&(this._currentLink.state.decorations.underline=a,this._currentLink.state.isHovered&&this._fireUnderlineEvent(o.link,a))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(a=>{if(!this._currentLink)return;const c=a.start===0?0:a.start+1+this._bufferService.buffer.ydisp,m=this._bufferService.buffer.ydisp+1+a.end;if(this._currentLink.link.range.start.y>=c&&this._currentLink.link.range.end.y<=m&&(this._clearCurrentLink(c,m),this._lastMouseEvent&&this._element)){const $=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);$&&this._askForLink($,!1)}})))}_linkHover(o,d,a){var c;!((c=this._currentLink)===null||c===void 0)&&c.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(d,!0),this._currentLink.state.decorations.pointerCursor&&o.classList.add("xterm-cursor-pointer")),d.hover&&d.hover(a,d.text)}_fireUnderlineEvent(o,d){const a=o.range,c=this._bufferService.buffer.ydisp,m=this._createLinkUnderlineEvent(a.start.x-1,a.start.y-c-1,a.end.x,a.end.y-c-1,void 0);(d?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(m)}_linkLeave(o,d,a){var c;!((c=this._currentLink)===null||c===void 0)&&c.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(d,!1),this._currentLink.state.decorations.pointerCursor&&o.classList.remove("xterm-cursor-pointer")),d.leave&&d.leave(a,d.text)}_linkAtPosition(o,d){const a=o.range.start.y*this._bufferService.cols+o.range.start.x,c=o.range.end.y*this._bufferService.cols+o.range.end.x,m=d.y*this._bufferService.cols+d.x;return a<=m&&m<=c}_positionFromMouseEvent(o,d,a){const c=a.getCoords(o,d,this._bufferService.cols,this._bufferService.rows);if(c)return{x:c[0],y:c[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(o,d,a,c,m){return{x1:o,y1:d,x2:a,y2:c,cols:this._bufferService.cols,fg:m}}};s.Linkifier2=x=f([g(0,C.IBufferService)],x)},9042:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tooMuchOutput=s.promptLabel=void 0,s.promptLabel="Terminal input",s.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(h,s,n){var f=this&&this.__decorate||function(x,o,d,a){var c,m=arguments.length,$=m<3?o:a===null?a=Object.getOwnPropertyDescriptor(o,d):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$=Reflect.decorate(x,o,d,a);else for(var S=x.length-1;S>=0;S--)(c=x[S])&&($=(m<3?c($):m>3?c(o,d,$):c(o,d))||$);return m>3&&$&&Object.defineProperty(o,d,$),$},g=this&&this.__param||function(x,o){return function(d,a){o(d,a,x)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkProvider=void 0;const p=n(511),_=n(2585);let b=s.OscLinkProvider=class{constructor(x,o,d){this._bufferService=x,this._optionsService=o,this._oscLinkService=d}provideLinks(x,o){var d;const a=this._bufferService.buffer.lines.get(x-1);if(!a)return void o(void 0);const c=[],m=this._optionsService.rawOptions.linkHandler,$=new p.CellData,S=a.getTrimmedLength();let E=-1,y=-1,k=!1;for(let B=0;B<S;B++)if(y!==-1||a.hasContent(B)){if(a.loadCell(B,$),$.hasExtendedAttrs()&&$.extended.urlId){if(y===-1){y=B,E=$.extended.urlId;continue}k=$.extended.urlId!==E}else y!==-1&&(k=!0);if(k||y!==-1&&B===S-1){const O=(d=this._oscLinkService.getLinkData(E))===null||d===void 0?void 0:d.uri;if(O){const T={start:{x:y+1,y:x},end:{x:B+(k||B!==S-1?0:1),y:x}};let I=!1;if(!m?.allowNonHttpProtocols)try{const M=new URL(O);["http:","https:"].includes(M.protocol)||(I=!0)}catch{I=!0}I||c.push({text:O,range:T,activate:(M,P)=>m?m.activate(M,P,T):C(0,P),hover:(M,P)=>{var L;return(L=m?.hover)===null||L===void 0?void 0:L.call(m,M,P,T)},leave:(M,P)=>{var L;return(L=m?.leave)===null||L===void 0?void 0:L.call(m,M,P,T)}})}k=!1,$.hasExtendedAttrs()&&$.extended.urlId?(y=B,E=$.extended.urlId):(y=-1,E=-1)}}o(c)}};function C(x,o){if(confirm(`Do you want to navigate to ${o}?

WARNING: This link could potentially be dangerous`)){const d=window.open();if(d){try{d.opener=null}catch{}d.location.href=o}else console.warn("Opening link blocked as opener could not be cleared")}}s.OscLinkProvider=b=f([g(0,_.IBufferService),g(1,_.IOptionsService),g(2,_.IOscLinkService)],b)},6193:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderDebouncer=void 0,s.RenderDebouncer=class{constructor(n,f){this._parentWindow=n,this._renderCallback=f,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(n){return this._refreshCallbacks.push(n),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(n,f,g){this._rowCount=g,n=n!==void 0?n:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,n):n,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const n=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(n,f),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const n of this._refreshCallbacks)n(0);this._refreshCallbacks=[]}}},5596:(h,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ScreenDprMonitor=void 0;const f=n(844);class g extends f.Disposable{constructor(_){super(),this._parentWindow=_,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,f.toDisposable)(()=>{this.clearListener()}))}setListener(_){this._listener&&this.clearListener(),this._listener=_,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var _;this._outerListener&&((_=this._resolutionMediaMatchList)===null||_===void 0||_.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}s.ScreenDprMonitor=g},3236:(h,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Terminal=void 0;const f=n(3614),g=n(3656),p=n(6465),_=n(9042),b=n(3730),C=n(1680),x=n(3107),o=n(5744),d=n(2950),a=n(1296),c=n(428),m=n(4269),$=n(5114),S=n(8934),E=n(3230),y=n(9312),k=n(4725),B=n(6731),O=n(8055),T=n(8969),I=n(8460),M=n(844),P=n(6114),L=n(8437),H=n(2584),w=n(7399),N=n(5941),z=n(9074),V=n(2585),Q=n(5435),F=n(4567),U=typeof window<"u"?window.document:null;class W extends T.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(D={}){super(D),this.browser=P,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new M.MutableDisposable),this._onCursorMove=this.register(new I.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new I.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new I.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new I.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new I.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new I.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new I.EventEmitter),this._onBlur=this.register(new I.EventEmitter),this._onA11yCharEmitter=this.register(new I.EventEmitter),this._onA11yTabEmitter=this.register(new I.EventEmitter),this._onWillOpen=this.register(new I.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(p.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(b.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(z.DecorationService),this._instantiationService.setService(V.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((j,K)=>this.refresh(j,K))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(j=>this._reportWindowsOptions(j))),this.register(this._inputHandler.onColor(j=>this._handleColorEvent(j))),this.register((0,I.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,I.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,I.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,I.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(j=>this._afterResize(j.cols,j.rows))),this.register((0,M.toDisposable)(()=>{var j,K;this._customKeyEventHandler=void 0,(K=(j=this.element)===null||j===void 0?void 0:j.parentNode)===null||K===void 0||K.removeChild(this.element)}))}_handleColorEvent(D){if(this._themeService)for(const j of D){let K,ee="";switch(j.index){case 256:K="foreground",ee="10";break;case 257:K="background",ee="11";break;case 258:K="cursor",ee="12";break;default:K="ansi",ee="4;"+j.index}switch(j.type){case 0:const ne=O.color.toColorRGB(K==="ansi"?this._themeService.colors.ansi[j.index]:this._themeService.colors[K]);this.coreService.triggerDataEvent(`${H.C0.ESC}]${ee};${(0,N.toRgbString)(ne)}${H.C1_ESCAPED.ST}`);break;case 1:if(K==="ansi")this._themeService.modifyColors(te=>te.ansi[j.index]=O.rgba.toColor(...j.color));else{const te=K;this._themeService.modifyColors(le=>le[te]=O.rgba.toColor(...j.color))}break;case 2:this._themeService.restoreColor(j.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(D){D?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(F.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(D){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(H.C0.ESC+"[I"),this.updateCursorStyle(D),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var D;return(D=this.textarea)===null||D===void 0?void 0:D.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(H.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const D=this.buffer.ybase+this.buffer.y,j=this.buffer.lines.get(D);if(!j)return;const K=Math.min(this.buffer.x,this.cols-1),ee=this._renderService.dimensions.css.cell.height,ne=j.getWidth(K),te=this._renderService.dimensions.css.cell.width*ne,le=this.buffer.y*this._renderService.dimensions.css.cell.height,Z=K*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Z+"px",this.textarea.style.top=le+"px",this.textarea.style.width=te+"px",this.textarea.style.height=ee+"px",this.textarea.style.lineHeight=ee+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,g.addDisposableDomListener)(this.element,"copy",j=>{this.hasSelection()&&(0,f.copyHandler)(j,this._selectionService)}));const D=j=>(0,f.handlePasteEvent)(j,this.textarea,this.coreService,this.optionsService);this.register((0,g.addDisposableDomListener)(this.textarea,"paste",D)),this.register((0,g.addDisposableDomListener)(this.element,"paste",D)),P.isFirefox?this.register((0,g.addDisposableDomListener)(this.element,"mousedown",j=>{j.button===2&&(0,f.rightClickHandler)(j,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,g.addDisposableDomListener)(this.element,"contextmenu",j=>{(0,f.rightClickHandler)(j,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),P.isLinux&&this.register((0,g.addDisposableDomListener)(this.element,"auxclick",j=>{j.button===1&&(0,f.moveTextAreaUnderMouseCursor)(j,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,g.addDisposableDomListener)(this.textarea,"keyup",D=>this._keyUp(D),!0)),this.register((0,g.addDisposableDomListener)(this.textarea,"keydown",D=>this._keyDown(D),!0)),this.register((0,g.addDisposableDomListener)(this.textarea,"keypress",D=>this._keyPress(D),!0)),this.register((0,g.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,g.addDisposableDomListener)(this.textarea,"compositionupdate",D=>this._compositionHelper.compositionupdate(D))),this.register((0,g.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,g.addDisposableDomListener)(this.textarea,"input",D=>this._inputEvent(D),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(D){var j;if(!D)throw new Error("Terminal requires a parent element.");D.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=D.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),D.appendChild(this.element);const K=U.createDocumentFragment();this._viewportElement=U.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),K.appendChild(this._viewportElement),this._viewportScrollArea=U.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=U.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=U.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),K.appendChild(this.screenElement),this.textarea=U.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",_.promptLabel),P.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance($.CoreBrowserService,this.textarea,(j=this._document.defaultView)!==null&&j!==void 0?j:window),this._instantiationService.setService(k.ICoreBrowserService,this._coreBrowserService),this.register((0,g.addDisposableDomListener)(this.textarea,"focus",ee=>this._handleTextAreaFocus(ee))),this.register((0,g.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(c.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(k.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(B.ThemeService),this._instantiationService.setService(k.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(m.CharacterJoinerService),this._instantiationService.setService(k.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(E.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(k.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(ee=>this._onRender.fire(ee))),this.onResize(ee=>this._renderService.resize(ee.cols,ee.rows)),this._compositionView=U.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(d.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(K);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(S.MouseService),this._instantiationService.setService(k.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(C.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(ee=>this.scrollLines(ee.amount,ee.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(y.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(k.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(ee=>this.scrollLines(ee.amount,ee.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(ee=>this._renderService.handleSelectionChanged(ee.start,ee.end,ee.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(ee=>{this.textarea.value=ee,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(ee=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,g.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(x.BufferDecorationRenderer,this.screenElement)),this.register((0,g.addDisposableDomListener)(this.element,"mousedown",ee=>this._selectionService.handleMouseDown(ee))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(F.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",ee=>this._handleScreenReaderModeOptionChange(ee))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(o.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",ee=>{!this._overviewRulerRenderer&&ee&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(o.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(a.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const D=this,j=this.element;function K(te){const le=D._mouseService.getMouseReportCoords(te,D.screenElement);if(!le)return!1;let Z,Y;switch(te.overrideType||te.type){case"mousemove":Y=32,te.buttons===void 0?(Z=3,te.button!==void 0&&(Z=te.button<3?te.button:3)):Z=1&te.buttons?0:4&te.buttons?1:2&te.buttons?2:3;break;case"mouseup":Y=0,Z=te.button<3?te.button:3;break;case"mousedown":Y=1,Z=te.button<3?te.button:3;break;case"wheel":if(D.viewport.getLinesScrolled(te)===0)return!1;Y=te.deltaY<0?0:1,Z=4;break;default:return!1}return!(Y===void 0||Z===void 0||Z>4)&&D.coreMouseService.triggerMouseEvent({col:le.col,row:le.row,x:le.x,y:le.y,button:Z,action:Y,ctrl:te.ctrlKey,alt:te.altKey,shift:te.shiftKey})}const ee={mouseup:null,wheel:null,mousedrag:null,mousemove:null},ne={mouseup:te=>(K(te),te.buttons||(this._document.removeEventListener("mouseup",ee.mouseup),ee.mousedrag&&this._document.removeEventListener("mousemove",ee.mousedrag)),this.cancel(te)),wheel:te=>(K(te),this.cancel(te,!0)),mousedrag:te=>{te.buttons&&K(te)},mousemove:te=>{te.buttons||K(te)}};this.register(this.coreMouseService.onProtocolChange(te=>{te?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(te)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&te?ee.mousemove||(j.addEventListener("mousemove",ne.mousemove),ee.mousemove=ne.mousemove):(j.removeEventListener("mousemove",ee.mousemove),ee.mousemove=null),16&te?ee.wheel||(j.addEventListener("wheel",ne.wheel,{passive:!1}),ee.wheel=ne.wheel):(j.removeEventListener("wheel",ee.wheel),ee.wheel=null),2&te?ee.mouseup||(j.addEventListener("mouseup",ne.mouseup),ee.mouseup=ne.mouseup):(this._document.removeEventListener("mouseup",ee.mouseup),j.removeEventListener("mouseup",ee.mouseup),ee.mouseup=null),4&te?ee.mousedrag||(ee.mousedrag=ne.mousedrag):(this._document.removeEventListener("mousemove",ee.mousedrag),ee.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,g.addDisposableDomListener)(j,"mousedown",te=>{if(te.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(te))return K(te),ee.mouseup&&this._document.addEventListener("mouseup",ee.mouseup),ee.mousedrag&&this._document.addEventListener("mousemove",ee.mousedrag),this.cancel(te)})),this.register((0,g.addDisposableDomListener)(j,"wheel",te=>{if(!ee.wheel){if(!this.buffer.hasScrollback){const le=this.viewport.getLinesScrolled(te);if(le===0)return;const Z=H.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(te.deltaY<0?"A":"B");let Y="";for(let se=0;se<Math.abs(le);se++)Y+=Z;return this.coreService.triggerDataEvent(Y,!0),this.cancel(te,!0)}return this.viewport.handleWheel(te)?this.cancel(te):void 0}},{passive:!1})),this.register((0,g.addDisposableDomListener)(j,"touchstart",te=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(te),this.cancel(te)},{passive:!0})),this.register((0,g.addDisposableDomListener)(j,"touchmove",te=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(te)?void 0:this.cancel(te)},{passive:!1}))}refresh(D,j){var K;(K=this._renderService)===null||K===void 0||K.refreshRows(D,j)}updateCursorStyle(D){var j;!((j=this._selectionService)===null||j===void 0)&&j.shouldColumnSelect(D)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(D,j,K=0){var ee;K===1?(super.scrollLines(D,j,K),this.refresh(0,this.rows-1)):(ee=this.viewport)===null||ee===void 0||ee.scrollLines(D)}paste(D){(0,f.paste)(D,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(D){this._customKeyEventHandler=D}registerLinkProvider(D){return this.linkifier2.registerLinkProvider(D)}registerCharacterJoiner(D){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const j=this._characterJoinerService.register(D);return this.refresh(0,this.rows-1),j}deregisterCharacterJoiner(D){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(D)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(D){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+D)}registerDecoration(D){return this._decorationService.registerDecoration(D)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(D,j,K){this._selectionService.setSelection(D,j,K)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var D;(D=this._selectionService)===null||D===void 0||D.clearSelection()}selectAll(){var D;(D=this._selectionService)===null||D===void 0||D.selectAll()}selectLines(D,j){var K;(K=this._selectionService)===null||K===void 0||K.selectLines(D,j)}_keyDown(D){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(D)===!1)return!1;const j=this.browser.isMac&&this.options.macOptionIsMeta&&D.altKey;if(!j&&!this._compositionHelper.keydown(D))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;j||D.key!=="Dead"&&D.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const K=(0,w.evaluateKeyboardEvent)(D,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(D),K.type===3||K.type===2){const ee=this.rows-1;return this.scrollLines(K.type===2?-ee:ee),this.cancel(D,!0)}return K.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,D)||(K.cancel&&this.cancel(D,!0),!K.key||!!(D.key&&!D.ctrlKey&&!D.altKey&&!D.metaKey&&D.key.length===1&&D.key.charCodeAt(0)>=65&&D.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(K.key!==H.C0.ETX&&K.key!==H.C0.CR||(this.textarea.value=""),this._onKey.fire({key:K.key,domEvent:D}),this._showCursor(),this.coreService.triggerDataEvent(K.key,!0),!this.optionsService.rawOptions.screenReaderMode||D.altKey||D.ctrlKey?this.cancel(D,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(D,j){const K=D.isMac&&!this.options.macOptionIsMeta&&j.altKey&&!j.ctrlKey&&!j.metaKey||D.isWindows&&j.altKey&&j.ctrlKey&&!j.metaKey||D.isWindows&&j.getModifierState("AltGraph");return j.type==="keypress"?K:K&&(!j.keyCode||j.keyCode>47)}_keyUp(D){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(D)===!1||(function(j){return j.keyCode===16||j.keyCode===17||j.keyCode===18}(D)||this.focus(),this.updateCursorStyle(D),this._keyPressHandled=!1)}_keyPress(D){let j;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(D)===!1)return!1;if(this.cancel(D),D.charCode)j=D.charCode;else if(D.which===null||D.which===void 0)j=D.keyCode;else{if(D.which===0||D.charCode===0)return!1;j=D.which}return!(!j||(D.altKey||D.ctrlKey||D.metaKey)&&!this._isThirdLevelShift(this.browser,D)||(j=String.fromCharCode(j),this._onKey.fire({key:j,domEvent:D}),this._showCursor(),this.coreService.triggerDataEvent(j,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(D){if(D.data&&D.inputType==="insertText"&&(!D.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const j=D.data;return this.coreService.triggerDataEvent(j,!0),this.cancel(D),!0}return!1}resize(D,j){D!==this.cols||j!==this.rows?super.resize(D,j):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(D,j){var K,ee;(K=this._charSizeService)===null||K===void 0||K.measure(),(ee=this.viewport)===null||ee===void 0||ee.syncScrollArea(!0)}clear(){var D;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let j=1;j<this.rows;j++)this.buffer.lines.push(this.buffer.getBlankLine(L.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(D=this.viewport)===null||D===void 0||D.reset(),this.refresh(0,this.rows-1)}}reset(){var D,j;this.options.rows=this.rows,this.options.cols=this.cols;const K=this._customKeyEventHandler;this._setup(),super.reset(),(D=this._selectionService)===null||D===void 0||D.reset(),this._decorationService.reset(),(j=this.viewport)===null||j===void 0||j.reset(),this._customKeyEventHandler=K,this.refresh(0,this.rows-1)}clearTextureAtlas(){var D;(D=this._renderService)===null||D===void 0||D.clearTextureAtlas()}_reportFocus(){var D;!((D=this.element)===null||D===void 0)&&D.classList.contains("focus")?this.coreService.triggerDataEvent(H.C0.ESC+"[I"):this.coreService.triggerDataEvent(H.C0.ESC+"[O")}_reportWindowsOptions(D){if(this._renderService)switch(D){case Q.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const j=this._renderService.dimensions.css.canvas.width.toFixed(0),K=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${H.C0.ESC}[4;${K};${j}t`);break;case Q.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const ee=this._renderService.dimensions.css.cell.width.toFixed(0),ne=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${H.C0.ESC}[6;${ne};${ee}t`)}}cancel(D,j){if(this.options.cancelEvents||j)return D.preventDefault(),D.stopPropagation(),!1}}s.Terminal=W},9924:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TimeBasedDebouncer=void 0,s.TimeBasedDebouncer=class{constructor(n,f=1e3){this._renderCallback=n,this._debounceThresholdMS=f,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(n,f,g){this._rowCount=g,n=n!==void 0?n:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,n):n,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f;const p=Date.now();if(p-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=p,this._innerRefresh();else if(!this._additionalRefreshRequested){const _=p-this._lastRefreshMs,b=this._debounceThresholdMS-_;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},b)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const n=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(n,f)}}},1680:function(h,s,n){var f=this&&this.__decorate||function(d,a,c,m){var $,S=arguments.length,E=S<3?a:m===null?m=Object.getOwnPropertyDescriptor(a,c):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(d,a,c,m);else for(var y=d.length-1;y>=0;y--)($=d[y])&&(E=(S<3?$(E):S>3?$(a,c,E):$(a,c))||E);return S>3&&E&&Object.defineProperty(a,c,E),E},g=this&&this.__param||function(d,a){return function(c,m){a(c,m,d)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Viewport=void 0;const p=n(3656),_=n(4725),b=n(8460),C=n(844),x=n(2585);let o=s.Viewport=class extends C.Disposable{constructor(d,a,c,m,$,S,E,y){super(),this._viewportElement=d,this._scrollArea=a,this._bufferService=c,this._optionsService=m,this._charSizeService=$,this._renderService=S,this._coreBrowserService=E,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new b.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,p.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(k=>this._activeBuffer=k.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(k=>this._renderDimensions=k)),this._handleThemeChange(y.colors),this.register(y.onChangeColors(k=>this._handleThemeChange(k))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(d){this._viewportElement.style.backgroundColor=d.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(d){if(d)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const a=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==a&&(this._lastRecordedBufferHeight=a,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const d=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==d&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=d),this._refreshAnimationFrame=null}syncScrollArea(d=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(d);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(d)}_handleScroll(d){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const a=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:a,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const d=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(d*(this._smoothScrollState.target-this._smoothScrollState.origin)),d<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(d,a){const c=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(a<0&&this._viewportElement.scrollTop!==0||a>0&&c<this._lastRecordedBufferHeight)||(d.cancelable&&d.preventDefault(),!1)}handleWheel(d){const a=this._getPixelsScrolled(d);return a!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+a:this._smoothScrollState.target+=a,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=a,this._bubbleScroll(d,a))}scrollLines(d){if(d!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const a=d*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+a,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:d,suppressScrollEvent:!1})}_getPixelsScrolled(d){if(d.deltaY===0||d.shiftKey)return 0;let a=this._applyScrollModifier(d.deltaY,d);return d.deltaMode===WheelEvent.DOM_DELTA_LINE?a*=this._currentRowHeight:d.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(a*=this._currentRowHeight*this._bufferService.rows),a}getBufferElements(d,a){var c;let m,$="";const S=[],E=a??this._bufferService.buffer.lines.length,y=this._bufferService.buffer.lines;for(let k=d;k<E;k++){const B=y.get(k);if(!B)continue;const O=(c=y.get(k+1))===null||c===void 0?void 0:c.isWrapped;if($+=B.translateToString(!O),!O||k===y.length-1){const T=document.createElement("div");T.textContent=$,S.push(T),$.length>0&&(m=T),$=""}}return{bufferElements:S,cursorElement:m}}getLinesScrolled(d){if(d.deltaY===0||d.shiftKey)return 0;let a=this._applyScrollModifier(d.deltaY,d);return d.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(a/=this._currentRowHeight+0,this._wheelPartialScroll+=a,a=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):d.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(a*=this._bufferService.rows),a}_applyScrollModifier(d,a){const c=this._optionsService.rawOptions.fastScrollModifier;return c==="alt"&&a.altKey||c==="ctrl"&&a.ctrlKey||c==="shift"&&a.shiftKey?d*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:d*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(d){this._lastTouchY=d.touches[0].pageY}handleTouchMove(d){const a=this._lastTouchY-d.touches[0].pageY;return this._lastTouchY=d.touches[0].pageY,a!==0&&(this._viewportElement.scrollTop+=a,this._bubbleScroll(d,a))}};s.Viewport=o=f([g(2,x.IBufferService),g(3,x.IOptionsService),g(4,_.ICharSizeService),g(5,_.IRenderService),g(6,_.ICoreBrowserService),g(7,_.IThemeService)],o)},3107:function(h,s,n){var f=this&&this.__decorate||function(o,d,a,c){var m,$=arguments.length,S=$<3?d:c===null?c=Object.getOwnPropertyDescriptor(d,a):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(o,d,a,c);else for(var E=o.length-1;E>=0;E--)(m=o[E])&&(S=($<3?m(S):$>3?m(d,a,S):m(d,a))||S);return $>3&&S&&Object.defineProperty(d,a,S),S},g=this&&this.__param||function(o,d){return function(a,c){d(a,c,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferDecorationRenderer=void 0;const p=n(3656),_=n(4725),b=n(844),C=n(2585);let x=s.BufferDecorationRenderer=class extends b.Disposable{constructor(o,d,a,c){super(),this._screenElement=o,this._bufferService=d,this._decorationService=a,this._renderService=c,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,p.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(m=>this._removeDecoration(m))),this.register((0,b.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const o of this._decorationService.decorations)this._renderDecoration(o);this._dimensionsChanged=!1}_renderDecoration(o){this._refreshStyle(o),this._dimensionsChanged&&this._refreshXPosition(o)}_createElement(o){var d,a;const c=document.createElement("div");c.classList.add("xterm-decoration"),c.classList.toggle("xterm-decoration-top-layer",((d=o?.options)===null||d===void 0?void 0:d.layer)==="top"),c.style.width=`${Math.round((o.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,c.style.height=(o.options.height||1)*this._renderService.dimensions.css.cell.height+"px",c.style.top=(o.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",c.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const m=(a=o.options.x)!==null&&a!==void 0?a:0;return m&&m>this._bufferService.cols&&(c.style.display="none"),this._refreshXPosition(o,c),c}_refreshStyle(o){const d=o.marker.line-this._bufferService.buffers.active.ydisp;if(d<0||d>=this._bufferService.rows)o.element&&(o.element.style.display="none",o.onRenderEmitter.fire(o.element));else{let a=this._decorationElements.get(o);a||(a=this._createElement(o),o.element=a,this._decorationElements.set(o,a),this._container.appendChild(a),o.onDispose(()=>{this._decorationElements.delete(o),a.remove()})),a.style.top=d*this._renderService.dimensions.css.cell.height+"px",a.style.display=this._altBufferIsActive?"none":"block",o.onRenderEmitter.fire(a)}}_refreshXPosition(o,d=o.element){var a;if(!d)return;const c=(a=o.options.x)!==null&&a!==void 0?a:0;(o.options.anchor||"left")==="right"?d.style.right=c?c*this._renderService.dimensions.css.cell.width+"px":"":d.style.left=c?c*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(o){var d;(d=this._decorationElements.get(o))===null||d===void 0||d.remove(),this._decorationElements.delete(o),o.dispose()}};s.BufferDecorationRenderer=x=f([g(1,C.IBufferService),g(2,C.IDecorationService),g(3,_.IRenderService)],x)},5871:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorZoneStore=void 0,s.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(n){if(n.options.overviewRulerOptions){for(const f of this._zones)if(f.color===n.options.overviewRulerOptions.color&&f.position===n.options.overviewRulerOptions.position){if(this._lineIntersectsZone(f,n.marker.line))return;if(this._lineAdjacentToZone(f,n.marker.line,n.options.overviewRulerOptions.position))return void this._addLineToZone(f,n.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=n.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=n.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=n.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=n.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:n.options.overviewRulerOptions.color,position:n.options.overviewRulerOptions.position,startBufferLine:n.marker.line,endBufferLine:n.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(n){this._linePadding=n}_lineIntersectsZone(n,f){return f>=n.startBufferLine&&f<=n.endBufferLine}_lineAdjacentToZone(n,f,g){return f>=n.startBufferLine-this._linePadding[g||"full"]&&f<=n.endBufferLine+this._linePadding[g||"full"]}_addLineToZone(n,f){n.startBufferLine=Math.min(n.startBufferLine,f),n.endBufferLine=Math.max(n.endBufferLine,f)}}},5744:function(h,s,n){var f=this&&this.__decorate||function(m,$,S,E){var y,k=arguments.length,B=k<3?$:E===null?E=Object.getOwnPropertyDescriptor($,S):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(m,$,S,E);else for(var O=m.length-1;O>=0;O--)(y=m[O])&&(B=(k<3?y(B):k>3?y($,S,B):y($,S))||B);return k>3&&B&&Object.defineProperty($,S,B),B},g=this&&this.__param||function(m,$){return function(S,E){$(S,E,m)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OverviewRulerRenderer=void 0;const p=n(5871),_=n(3656),b=n(4725),C=n(844),x=n(2585),o={full:0,left:0,center:0,right:0},d={full:0,left:0,center:0,right:0},a={full:0,left:0,center:0,right:0};let c=s.OverviewRulerRenderer=class extends C.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(m,$,S,E,y,k,B){var O;super(),this._viewportElement=m,this._screenElement=$,this._bufferService=S,this._decorationService=E,this._renderService=y,this._optionsService=k,this._coreBrowseService=B,this._colorZoneStore=new p.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(O=this._viewportElement.parentElement)===null||O===void 0||O.insertBefore(this._canvas,this._viewportElement);const T=this._canvas.getContext("2d");if(!T)throw new Error("Ctx cannot be null");this._ctx=T,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,C.toDisposable)(()=>{var I;(I=this._canvas)===null||I===void 0||I.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,_.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const m=Math.floor(this._canvas.width/3),$=Math.ceil(this._canvas.width/3);d.full=this._canvas.width,d.left=m,d.center=$,d.right=m,this._refreshDrawHeightConstants(),a.full=0,a.left=0,a.center=d.left,a.right=d.left+d.center}_refreshDrawHeightConstants(){o.full=Math.round(2*this._coreBrowseService.dpr);const m=this._canvas.height/this._bufferService.buffer.lines.length,$=Math.round(Math.max(Math.min(m,12),6)*this._coreBrowseService.dpr);o.left=$,o.center=$,o.right=$}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const $ of this._decorationService.decorations)this._colorZoneStore.addDecoration($);this._ctx.lineWidth=1;const m=this._colorZoneStore.zones;for(const $ of m)$.position!=="full"&&this._renderColorZone($);for(const $ of m)$.position==="full"&&this._renderColorZone($);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(m){this._ctx.fillStyle=m.color,this._ctx.fillRect(a[m.position||"full"],Math.round((this._canvas.height-1)*(m.startBufferLine/this._bufferService.buffers.active.lines.length)-o[m.position||"full"]/2),d[m.position||"full"],Math.round((this._canvas.height-1)*((m.endBufferLine-m.startBufferLine)/this._bufferService.buffers.active.lines.length)+o[m.position||"full"]))}_queueRefresh(m,$){this._shouldUpdateDimensions=m||this._shouldUpdateDimensions,this._shouldUpdateAnchor=$||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};s.OverviewRulerRenderer=c=f([g(2,x.IBufferService),g(3,x.IDecorationService),g(4,b.IRenderService),g(5,x.IOptionsService),g(6,b.ICoreBrowserService)],c)},2950:function(h,s,n){var f=this&&this.__decorate||function(x,o,d,a){var c,m=arguments.length,$=m<3?o:a===null?a=Object.getOwnPropertyDescriptor(o,d):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$=Reflect.decorate(x,o,d,a);else for(var S=x.length-1;S>=0;S--)(c=x[S])&&($=(m<3?c($):m>3?c(o,d,$):c(o,d))||$);return m>3&&$&&Object.defineProperty(o,d,$),$},g=this&&this.__param||function(x,o){return function(d,a){o(d,a,x)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CompositionHelper=void 0;const p=n(4725),_=n(2585),b=n(2584);let C=s.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(x,o,d,a,c,m){this._textarea=x,this._compositionView=o,this._bufferService=d,this._optionsService=a,this._coreService=c,this._renderService=m,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(x){this._compositionView.textContent=x.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(x){if(this._isComposing||this._isSendingComposition){if(x.keyCode===229||x.keyCode===16||x.keyCode===17||x.keyCode===18)return!1;this._finalizeComposition(!1)}return x.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(x){if(this._compositionView.classList.remove("active"),this._isComposing=!1,x){const o={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let d;this._isSendingComposition=!1,o.start+=this._dataAlreadySent.length,d=this._isComposing?this._textarea.value.substring(o.start,o.end):this._textarea.value.substring(o.start),d.length>0&&this._coreService.triggerDataEvent(d,!0)}},0)}else{this._isSendingComposition=!1;const o=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(o,!0)}}_handleAnyTextareaChanges(){const x=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const o=this._textarea.value,d=o.replace(x,"");this._dataAlreadySent=d,o.length>x.length?this._coreService.triggerDataEvent(d,!0):o.length<x.length?this._coreService.triggerDataEvent(`${b.C0.DEL}`,!0):o.length===x.length&&o!==x&&this._coreService.triggerDataEvent(o,!0)}},0)}updateCompositionElements(x){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const o=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),d=this._renderService.dimensions.css.cell.height,a=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,c=o*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=c+"px",this._compositionView.style.top=a+"px",this._compositionView.style.height=d+"px",this._compositionView.style.lineHeight=d+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const m=this._compositionView.getBoundingClientRect();this._textarea.style.left=c+"px",this._textarea.style.top=a+"px",this._textarea.style.width=Math.max(m.width,1)+"px",this._textarea.style.height=Math.max(m.height,1)+"px",this._textarea.style.lineHeight=m.height+"px"}x||setTimeout(()=>this.updateCompositionElements(!0),0)}}};s.CompositionHelper=C=f([g(2,_.IBufferService),g(3,_.IOptionsService),g(4,_.ICoreService),g(5,p.IRenderService)],C)},9806:(h,s)=>{function n(f,g,p){const _=p.getBoundingClientRect(),b=f.getComputedStyle(p),C=parseInt(b.getPropertyValue("padding-left")),x=parseInt(b.getPropertyValue("padding-top"));return[g.clientX-_.left-C,g.clientY-_.top-x]}Object.defineProperty(s,"__esModule",{value:!0}),s.getCoords=s.getCoordsRelativeToElement=void 0,s.getCoordsRelativeToElement=n,s.getCoords=function(f,g,p,_,b,C,x,o,d){if(!C)return;const a=n(f,g,p);return a?(a[0]=Math.ceil((a[0]+(d?x/2:0))/x),a[1]=Math.ceil(a[1]/o),a[0]=Math.min(Math.max(a[0],1),_+(d?1:0)),a[1]=Math.min(Math.max(a[1],1),b),a):void 0}},9504:(h,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.moveToCellSequence=void 0;const f=n(2584);function g(o,d,a,c){const m=o-p(o,a),$=d-p(d,a),S=Math.abs(m-$)-function(E,y,k){let B=0;const O=E-p(E,k),T=y-p(y,k);for(let I=0;I<Math.abs(O-T);I++){const M=_(E,y)==="A"?-1:1,P=k.buffer.lines.get(O+M*I);P?.isWrapped&&B++}return B}(o,d,a);return x(S,C(_(o,d),c))}function p(o,d){let a=0,c=d.buffer.lines.get(o),m=c?.isWrapped;for(;m&&o>=0&&o<d.rows;)a++,c=d.buffer.lines.get(--o),m=c?.isWrapped;return a}function _(o,d){return o>d?"A":"B"}function b(o,d,a,c,m,$){let S=o,E=d,y="";for(;S!==a||E!==c;)S+=m?1:-1,m&&S>$.cols-1?(y+=$.buffer.translateBufferLineToString(E,!1,o,S),S=0,o=0,E++):!m&&S<0&&(y+=$.buffer.translateBufferLineToString(E,!1,0,o+1),S=$.cols-1,o=S,E--);return y+$.buffer.translateBufferLineToString(E,!1,o,S)}function C(o,d){const a=d?"O":"[";return f.C0.ESC+a+o}function x(o,d){o=Math.floor(o);let a="";for(let c=0;c<o;c++)a+=d;return a}s.moveToCellSequence=function(o,d,a,c){const m=a.buffer.x,$=a.buffer.y;if(!a.buffer.hasScrollback)return function(y,k,B,O,T,I){return g(k,O,T,I).length===0?"":x(b(y,k,y,k-p(k,T),!1,T).length,C("D",I))}(m,$,0,d,a,c)+g($,d,a,c)+function(y,k,B,O,T,I){let M;M=g(k,O,T,I).length>0?O-p(O,T):k;const P=O,L=function(H,w,N,z,V,Q){let F;return F=g(N,z,V,Q).length>0?z-p(z,V):w,H<N&&F<=z||H>=N&&F<z?"C":"D"}(y,k,B,O,T,I);return x(b(y,M,B,P,L==="C",T).length,C(L,I))}(m,$,o,d,a,c);let S;if($===d)return S=m>o?"D":"C",x(Math.abs(m-o),C(S,c));S=$>d?"D":"C";const E=Math.abs($-d);return x(function(y,k){return k.cols-y}($>d?o:m,a)+(E-1)*a.cols+1+(($>d?m:o)-1),C(S,c))}},1296:function(h,s,n){var f=this&&this.__decorate||function(T,I,M,P){var L,H=arguments.length,w=H<3?I:P===null?P=Object.getOwnPropertyDescriptor(I,M):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(T,I,M,P);else for(var N=T.length-1;N>=0;N--)(L=T[N])&&(w=(H<3?L(w):H>3?L(I,M,w):L(I,M))||w);return H>3&&w&&Object.defineProperty(I,M,w),w},g=this&&this.__param||function(T,I){return function(M,P){I(M,P,T)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRenderer=void 0;const p=n(3787),_=n(2550),b=n(2223),C=n(6171),x=n(4725),o=n(8055),d=n(8460),a=n(844),c=n(2585),m="xterm-dom-renderer-owner-",$="xterm-rows",S="xterm-fg-",E="xterm-bg-",y="xterm-focus",k="xterm-selection";let B=1,O=s.DomRenderer=class extends a.Disposable{constructor(T,I,M,P,L,H,w,N,z,V){super(),this._element=T,this._screenElement=I,this._viewportElement=M,this._linkifier2=P,this._charSizeService=H,this._optionsService=w,this._bufferService=N,this._coreBrowserService=z,this._themeService=V,this._terminalClass=B++,this._rowElements=[],this.onRequestRedraw=this.register(new d.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add($),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(k),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,C.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(Q=>this._injectCss(Q))),this._injectCss(this._themeService.colors),this._rowFactory=L.createInstance(p.DomRendererRowFactory,document),this._element.classList.add(m+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(Q=>this._handleLinkHover(Q))),this.register(this._linkifier2.onHideLinkUnderline(Q=>this._handleLinkLeave(Q))),this.register((0,a.toDisposable)(()=>{this._element.classList.remove(m+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new _.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const T=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*T,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*T),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/T),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/T),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const M of this._rowElements)M.style.width=`${this.dimensions.css.canvas.width}px`,M.style.height=`${this.dimensions.css.cell.height}px`,M.style.lineHeight=`${this.dimensions.css.cell.height}px`,M.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const I=`${this._terminalSelector} .${$} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=I,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(T){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let I=`${this._terminalSelector} .${$} { color: ${T.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;I+=`${this._terminalSelector} .${$} .xterm-dim { color: ${o.color.multiplyOpacity(T.foreground,.5).css};}`,I+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,I+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",I+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${T.cursor.css};  color: ${T.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${T.cursor.css}; }}`,I+=`${this._terminalSelector} .${$}.${y} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${$}.${y} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${$} .xterm-cursor.xterm-cursor-block { background-color: ${T.cursor.css}; color: ${T.cursorAccent.css};}${this._terminalSelector} .${$} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${T.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${$} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${T.cursor.css} inset;}${this._terminalSelector} .${$} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${T.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,I+=`${this._terminalSelector} .${k} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${k} div { position: absolute; background-color: ${T.selectionBackgroundOpaque.css};}${this._terminalSelector} .${k} div { position: absolute; background-color: ${T.selectionInactiveBackgroundOpaque.css};}`;for(const[M,P]of T.ansi.entries())I+=`${this._terminalSelector} .${S}${M} { color: ${P.css}; }${this._terminalSelector} .${S}${M}.xterm-dim { color: ${o.color.multiplyOpacity(P,.5).css}; }${this._terminalSelector} .${E}${M} { background-color: ${P.css}; }`;I+=`${this._terminalSelector} .${S}${b.INVERTED_DEFAULT_COLOR} { color: ${o.color.opaque(T.background).css}; }${this._terminalSelector} .${S}${b.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${o.color.multiplyOpacity(o.color.opaque(T.background),.5).css}; }${this._terminalSelector} .${E}${b.INVERTED_DEFAULT_COLOR} { background-color: ${T.foreground.css}; }`,this._themeStyleElement.textContent=I}_setDefaultSpacing(){const T=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${T}px`,this._rowFactory.defaultSpacing=T}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(T,I){for(let M=this._rowElements.length;M<=I;M++){const P=document.createElement("div");this._rowContainer.appendChild(P),this._rowElements.push(P)}for(;this._rowElements.length>I;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(T,I){this._refreshRowElements(T,I),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(y)}handleFocus(){this._rowContainer.classList.add(y),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(T,I,M){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(T,I,M),this.renderRows(0,this._bufferService.rows-1),!T||!I)return;const P=T[1]-this._bufferService.buffer.ydisp,L=I[1]-this._bufferService.buffer.ydisp,H=Math.max(P,0),w=Math.min(L,this._bufferService.rows-1);if(H>=this._bufferService.rows||w<0)return;const N=document.createDocumentFragment();if(M){const z=T[0]>I[0];N.appendChild(this._createSelectionElement(H,z?I[0]:T[0],z?T[0]:I[0],w-H+1))}else{const z=P===H?T[0]:0,V=H===L?I[0]:this._bufferService.cols;N.appendChild(this._createSelectionElement(H,z,V));const Q=w-H-1;if(N.appendChild(this._createSelectionElement(H+1,0,this._bufferService.cols,Q)),H!==w){const F=L===w?I[0]:this._bufferService.cols;N.appendChild(this._createSelectionElement(w,0,F))}}this._selectionContainer.appendChild(N)}_createSelectionElement(T,I,M,P=1){const L=document.createElement("div");return L.style.height=P*this.dimensions.css.cell.height+"px",L.style.top=T*this.dimensions.css.cell.height+"px",L.style.left=I*this.dimensions.css.cell.width+"px",L.style.width=this.dimensions.css.cell.width*(M-I)+"px",L}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const T of this._rowElements)T.replaceChildren()}renderRows(T,I){const M=this._bufferService.buffer,P=M.ybase+M.y,L=Math.min(M.x,this._bufferService.cols-1),H=this._optionsService.rawOptions.cursorBlink,w=this._optionsService.rawOptions.cursorStyle,N=this._optionsService.rawOptions.cursorInactiveStyle;for(let z=T;z<=I;z++){const V=z+M.ydisp,Q=this._rowElements[z],F=M.lines.get(V);if(!Q||!F)break;Q.replaceChildren(...this._rowFactory.createRow(F,V,V===P,w,N,L,H,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${m}${this._terminalClass}`}_handleLinkHover(T){this._setCellUnderline(T.x1,T.x2,T.y1,T.y2,T.cols,!0)}_handleLinkLeave(T){this._setCellUnderline(T.x1,T.x2,T.y1,T.y2,T.cols,!1)}_setCellUnderline(T,I,M,P,L,H){M<0&&(T=0),P<0&&(I=0);const w=this._bufferService.rows-1;M=Math.max(Math.min(M,w),0),P=Math.max(Math.min(P,w),0),L=Math.min(L,this._bufferService.cols);const N=this._bufferService.buffer,z=N.ybase+N.y,V=Math.min(N.x,L-1),Q=this._optionsService.rawOptions.cursorBlink,F=this._optionsService.rawOptions.cursorStyle,U=this._optionsService.rawOptions.cursorInactiveStyle;for(let W=M;W<=P;++W){const ce=W+N.ydisp,D=this._rowElements[W],j=N.lines.get(ce);if(!D||!j)break;D.replaceChildren(...this._rowFactory.createRow(j,ce,ce===z,F,U,V,Q,this.dimensions.css.cell.width,this._widthCache,H?W===M?T:0:-1,H?(W===P?I:L)-1:-1))}}};s.DomRenderer=O=f([g(4,c.IInstantiationService),g(5,x.ICharSizeService),g(6,c.IOptionsService),g(7,c.IBufferService),g(8,x.ICoreBrowserService),g(9,x.IThemeService)],O)},3787:function(h,s,n){var f=this&&this.__decorate||function(S,E,y,k){var B,O=arguments.length,T=O<3?E:k===null?k=Object.getOwnPropertyDescriptor(E,y):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(S,E,y,k);else for(var I=S.length-1;I>=0;I--)(B=S[I])&&(T=(O<3?B(T):O>3?B(E,y,T):B(E,y))||T);return O>3&&T&&Object.defineProperty(E,y,T),T},g=this&&this.__param||function(S,E){return function(y,k){E(y,k,S)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRendererRowFactory=void 0;const p=n(2223),_=n(643),b=n(511),C=n(2585),x=n(8055),o=n(4725),d=n(4269),a=n(6171),c=n(3734);let m=s.DomRendererRowFactory=class{constructor(S,E,y,k,B,O,T){this._document=S,this._characterJoinerService=E,this._optionsService=y,this._coreBrowserService=k,this._coreService=B,this._decorationService=O,this._themeService=T,this._workCell=new b.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(S,E,y){this._selectionStart=S,this._selectionEnd=E,this._columnSelectMode=y}createRow(S,E,y,k,B,O,T,I,M,P,L){const H=[],w=this._characterJoinerService.getJoinedCharacters(E),N=this._themeService.colors;let z,V=S.getNoBgTrimmedLength();y&&V<O+1&&(V=O+1);let Q=0,F="",U=0,W=0,ce=0,D=!1,j=0,K=!1,ee=0;const ne=[],te=P!==-1&&L!==-1;for(let le=0;le<V;le++){S.loadCell(le,this._workCell);let Z=this._workCell.getWidth();if(Z===0)continue;let Y=!1,se=le,G=this._workCell;if(w.length>0&&le===w[0][0]){Y=!0;const ve=w.shift();G=new d.JoinedCellData(this._workCell,S.translateToString(!0,ve[0],ve[1]),ve[1]-ve[0]),se=ve[1]-1,Z=G.getWidth()}const ie=this._isCellInSelection(le,E),X=y&&le===O,fe=te&&le>=P&&le<=L;let Ae=!1;this._decorationService.forEachDecorationAtCell(le,E,void 0,ve=>{Ae=!0});let Ce=G.getChars()||_.WHITESPACE_CELL_CHAR;if(Ce===" "&&(G.isUnderline()||G.isOverline())&&(Ce="Â "),ee=Z*I-M.get(Ce,G.isBold(),G.isItalic()),z){if(Q&&(ie&&K||!ie&&!K&&G.bg===U)&&(ie&&K&&N.selectionForeground||G.fg===W)&&G.extended.ext===ce&&fe===D&&ee===j&&!X&&!Y&&!Ae){F+=Ce,Q++;continue}Q&&(z.textContent=F),z=this._document.createElement("span"),Q=0,F=""}else z=this._document.createElement("span");if(U=G.bg,W=G.fg,ce=G.extended.ext,D=fe,j=ee,K=ie,Y&&O>=le&&O<=se&&(O=le),!this._coreService.isCursorHidden&&X){if(ne.push("xterm-cursor"),this._coreBrowserService.isFocused)T&&ne.push("xterm-cursor-blink"),ne.push(k==="bar"?"xterm-cursor-bar":k==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(B)switch(B){case"outline":ne.push("xterm-cursor-outline");break;case"block":ne.push("xterm-cursor-block");break;case"bar":ne.push("xterm-cursor-bar");break;case"underline":ne.push("xterm-cursor-underline")}}if(G.isBold()&&ne.push("xterm-bold"),G.isItalic()&&ne.push("xterm-italic"),G.isDim()&&ne.push("xterm-dim"),F=G.isInvisible()?_.WHITESPACE_CELL_CHAR:G.getChars()||_.WHITESPACE_CELL_CHAR,G.isUnderline()&&(ne.push(`xterm-underline-${G.extended.underlineStyle}`),F===" "&&(F="Â "),!G.isUnderlineColorDefault()))if(G.isUnderlineColorRGB())z.style.textDecorationColor=`rgb(${c.AttributeData.toColorRGB(G.getUnderlineColor()).join(",")})`;else{let ve=G.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&G.isBold()&&ve<8&&(ve+=8),z.style.textDecorationColor=N.ansi[ve].css}G.isOverline()&&(ne.push("xterm-overline"),F===" "&&(F="Â ")),G.isStrikethrough()&&ne.push("xterm-strikethrough"),fe&&(z.style.textDecoration="underline");let $e=G.getFgColor(),ye=G.getFgColorMode(),he=G.getBgColor(),ae=G.getBgColorMode();const ue=!!G.isInverse();if(ue){const ve=$e;$e=he,he=ve;const ge=ye;ye=ae,ae=ge}let Se,_e,de,be=!1;switch(this._decorationService.forEachDecorationAtCell(le,E,void 0,ve=>{ve.options.layer!=="top"&&be||(ve.backgroundColorRGB&&(ae=50331648,he=ve.backgroundColorRGB.rgba>>8&16777215,Se=ve.backgroundColorRGB),ve.foregroundColorRGB&&(ye=50331648,$e=ve.foregroundColorRGB.rgba>>8&16777215,_e=ve.foregroundColorRGB),be=ve.options.layer==="top")}),!be&&ie&&(Se=this._coreBrowserService.isFocused?N.selectionBackgroundOpaque:N.selectionInactiveBackgroundOpaque,he=Se.rgba>>8&16777215,ae=50331648,be=!0,N.selectionForeground&&(ye=50331648,$e=N.selectionForeground.rgba>>8&16777215,_e=N.selectionForeground)),be&&ne.push("xterm-decoration-top"),ae){case 16777216:case 33554432:de=N.ansi[he],ne.push(`xterm-bg-${he}`);break;case 50331648:de=x.rgba.toColor(he>>16,he>>8&255,255&he),this._addStyle(z,`background-color:#${$((he>>>0).toString(16),"0",6)}`);break;default:ue?(de=N.foreground,ne.push(`xterm-bg-${p.INVERTED_DEFAULT_COLOR}`)):de=N.background}switch(Se||G.isDim()&&(Se=x.color.multiplyOpacity(de,.5)),ye){case 16777216:case 33554432:G.isBold()&&$e<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&($e+=8),this._applyMinimumContrast(z,de,N.ansi[$e],G,Se,void 0)||ne.push(`xterm-fg-${$e}`);break;case 50331648:const ve=x.rgba.toColor($e>>16&255,$e>>8&255,255&$e);this._applyMinimumContrast(z,de,ve,G,Se,_e)||this._addStyle(z,`color:#${$($e.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(z,de,N.foreground,G,Se,void 0)||ue&&ne.push(`xterm-fg-${p.INVERTED_DEFAULT_COLOR}`)}ne.length&&(z.className=ne.join(" "),ne.length=0),X||Y||Ae?z.textContent=F:Q++,ee!==this.defaultSpacing&&(z.style.letterSpacing=`${ee}px`),H.push(z),le=se}return z&&Q&&(z.textContent=F),H}_applyMinimumContrast(S,E,y,k,B,O){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,a.excludeFromContrastRatioDemands)(k.getCode()))return!1;const T=this._getContrastCache(k);let I;if(B||O||(I=T.getColor(E.rgba,y.rgba)),I===void 0){const M=this._optionsService.rawOptions.minimumContrastRatio/(k.isDim()?2:1);I=x.color.ensureContrastRatio(B||E,O||y,M),T.setColor((B||E).rgba,(O||y).rgba,I??null)}return!!I&&(this._addStyle(S,`color:${I.css}`),!0)}_getContrastCache(S){return S.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(S,E){S.setAttribute("style",`${S.getAttribute("style")||""}${E};`)}_isCellInSelection(S,E){const y=this._selectionStart,k=this._selectionEnd;return!(!y||!k)&&(this._columnSelectMode?y[0]<=k[0]?S>=y[0]&&E>=y[1]&&S<k[0]&&E<=k[1]:S<y[0]&&E>=y[1]&&S>=k[0]&&E<=k[1]:E>y[1]&&E<k[1]||y[1]===k[1]&&E===y[1]&&S>=y[0]&&S<k[0]||y[1]<k[1]&&E===k[1]&&S<k[0]||y[1]<k[1]&&E===y[1]&&S>=y[0])}};function $(S,E,y){for(;S.length<y;)S=E+S;return S}s.DomRendererRowFactory=m=f([g(1,o.ICharacterJoinerService),g(2,C.IOptionsService),g(3,o.ICoreBrowserService),g(4,C.ICoreService),g(5,C.IDecorationService),g(6,o.IThemeService)],m)},2550:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WidthCache=void 0,s.WidthCache=class{constructor(n){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=n.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const f=n.createElement("span"),g=n.createElement("span");g.style.fontWeight="bold";const p=n.createElement("span");p.style.fontStyle="italic";const _=n.createElement("span");_.style.fontWeight="bold",_.style.fontStyle="italic",this._measureElements=[f,g,p,_],this._container.appendChild(f),this._container.appendChild(g),this._container.appendChild(p),this._container.appendChild(_),n.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(n,f,g,p){n===this._font&&f===this._fontSize&&g===this._weight&&p===this._weightBold||(this._font=n,this._fontSize=f,this._weight=g,this._weightBold=p,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${g}`,this._measureElements[1].style.fontWeight=`${p}`,this._measureElements[2].style.fontWeight=`${g}`,this._measureElements[3].style.fontWeight=`${p}`,this.clear())}get(n,f,g){let p=0;if(!f&&!g&&n.length===1&&(p=n.charCodeAt(0))<256)return this._flat[p]!==-9999?this._flat[p]:this._flat[p]=this._measure(n,0);let _=n;f&&(_+="B"),g&&(_+="I");let b=this._holey.get(_);if(b===void 0){let C=0;f&&(C|=1),g&&(C|=2),b=this._measure(n,C),this._holey.set(_,b)}return b}_measure(n,f){const g=this._measureElements[f];return g.textContent=n.repeat(32),g.offsetWidth/32}}},2223:(h,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TEXT_BASELINE=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0;const f=n(6114);s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.TEXT_BASELINE=f.isFirefox||f.isLegacyEdge?"bottom":"ideographic"},6171:(h,s)=>{function n(f){return 57508<=f&&f<=57558}Object.defineProperty(s,"__esModule",{value:!0}),s.createRenderDimensions=s.excludeFromContrastRatioDemands=s.isRestrictedPowerlineGlyph=s.isPowerlineGlyph=s.throwIfFalsy=void 0,s.throwIfFalsy=function(f){if(!f)throw new Error("value must not be falsy");return f},s.isPowerlineGlyph=n,s.isRestrictedPowerlineGlyph=function(f){return 57520<=f&&f<=57527},s.excludeFromContrastRatioDemands=function(f){return n(f)||function(g){return 9472<=g&&g<=9631}(f)},s.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionModel=void 0,s.SelectionModel=class{constructor(n){this._bufferService=n,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const n=this.selectionStart[0]+this.selectionStartLength;return n>this._bufferService.cols?n%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)-1]:[n%this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)]:[n,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const n=this.selectionStart[0]+this.selectionStartLength;return n>this._bufferService.cols?[n%this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)]:[Math.max(n,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const n=this.selectionStart,f=this.selectionEnd;return!(!n||!f)&&(n[1]>f[1]||n[1]===f[1]&&n[0]>f[0])}handleTrim(n){return this.selectionStart&&(this.selectionStart[1]-=n),this.selectionEnd&&(this.selectionEnd[1]-=n),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(h,s,n){var f=this&&this.__decorate||function(o,d,a,c){var m,$=arguments.length,S=$<3?d:c===null?c=Object.getOwnPropertyDescriptor(d,a):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(o,d,a,c);else for(var E=o.length-1;E>=0;E--)(m=o[E])&&(S=($<3?m(S):$>3?m(d,a,S):m(d,a))||S);return $>3&&S&&Object.defineProperty(d,a,S),S},g=this&&this.__param||function(o,d){return function(a,c){d(a,c,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharSizeService=void 0;const p=n(2585),_=n(8460),b=n(844);let C=s.CharSizeService=class extends b.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(o,d,a){super(),this._optionsService=a,this.width=0,this.height=0,this._onCharSizeChange=this.register(new _.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new x(o,d,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const o=this._measureStrategy.measure();o.width===this.width&&o.height===this.height||(this.width=o.width,this.height=o.height,this._onCharSizeChange.fire())}};s.CharSizeService=C=f([g(2,p.IOptionsService)],C);class x{constructor(d,a,c){this._document=d,this._parentElement=a,this._optionsService=c,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const d={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return d.width!==0&&d.height!==0&&(this._result.width=d.width/32,this._result.height=Math.ceil(d.height)),this._result}}},4269:function(h,s,n){var f=this&&this.__decorate||function(d,a,c,m){var $,S=arguments.length,E=S<3?a:m===null?m=Object.getOwnPropertyDescriptor(a,c):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(d,a,c,m);else for(var y=d.length-1;y>=0;y--)($=d[y])&&(E=(S<3?$(E):S>3?$(a,c,E):$(a,c))||E);return S>3&&E&&Object.defineProperty(a,c,E),E},g=this&&this.__param||function(d,a){return function(c,m){a(c,m,d)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharacterJoinerService=s.JoinedCellData=void 0;const p=n(3734),_=n(643),b=n(511),C=n(2585);class x extends p.AttributeData{constructor(a,c,m){super(),this.content=0,this.combinedData="",this.fg=a.fg,this.bg=a.bg,this.combinedData=c,this._width=m}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(a){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.JoinedCellData=x;let o=s.CharacterJoinerService=class Vo{constructor(a){this._bufferService=a,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new b.CellData}register(a){const c={id:this._nextCharacterJoinerId++,handler:a};return this._characterJoiners.push(c),c.id}deregister(a){for(let c=0;c<this._characterJoiners.length;c++)if(this._characterJoiners[c].id===a)return this._characterJoiners.splice(c,1),!0;return!1}getJoinedCharacters(a){if(this._characterJoiners.length===0)return[];const c=this._bufferService.buffer.lines.get(a);if(!c||c.length===0)return[];const m=[],$=c.translateToString(!0);let S=0,E=0,y=0,k=c.getFg(0),B=c.getBg(0);for(let O=0;O<c.getTrimmedLength();O++)if(c.loadCell(O,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==k||this._workCell.bg!==B){if(O-S>1){const T=this._getJoinedRanges($,y,E,c,S);for(let I=0;I<T.length;I++)m.push(T[I])}S=O,y=E,k=this._workCell.fg,B=this._workCell.bg}E+=this._workCell.getChars().length||_.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-S>1){const O=this._getJoinedRanges($,y,E,c,S);for(let T=0;T<O.length;T++)m.push(O[T])}return m}_getJoinedRanges(a,c,m,$,S){const E=a.substring(c,m);let y=[];try{y=this._characterJoiners[0].handler(E)}catch(k){console.error(k)}for(let k=1;k<this._characterJoiners.length;k++)try{const B=this._characterJoiners[k].handler(E);for(let O=0;O<B.length;O++)Vo._mergeRanges(y,B[O])}catch(B){console.error(B)}return this._stringRangesToCellRanges(y,$,S),y}_stringRangesToCellRanges(a,c,m){let $=0,S=!1,E=0,y=a[$];if(y){for(let k=m;k<this._bufferService.cols;k++){const B=c.getWidth(k),O=c.getString(k).length||_.WHITESPACE_CELL_CHAR.length;if(B!==0){if(!S&&y[0]<=E&&(y[0]=k,S=!0),y[1]<=E){if(y[1]=k,y=a[++$],!y)break;y[0]<=E?(y[0]=k,S=!0):S=!1}E+=O}}y&&(y[1]=this._bufferService.cols)}}static _mergeRanges(a,c){let m=!1;for(let $=0;$<a.length;$++){const S=a[$];if(m){if(c[1]<=S[0])return a[$-1][1]=c[1],a;if(c[1]<=S[1])return a[$-1][1]=Math.max(c[1],S[1]),a.splice($,1),a;a.splice($,1),$--}else{if(c[1]<=S[0])return a.splice($,0,c),a;if(c[1]<=S[1])return S[0]=Math.min(c[0],S[0]),a;c[0]<S[1]&&(S[0]=Math.min(c[0],S[0]),m=!0)}}return m?a[a.length-1][1]=c[1]:a.push(c),a}};s.CharacterJoinerService=o=f([g(0,C.IBufferService)],o)},5114:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreBrowserService=void 0,s.CoreBrowserService=class{constructor(n,f){this._textarea=n,this.window=f,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(h,s,n){var f=this&&this.__decorate||function(C,x,o,d){var a,c=arguments.length,m=c<3?x:d===null?d=Object.getOwnPropertyDescriptor(x,o):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(C,x,o,d);else for(var $=C.length-1;$>=0;$--)(a=C[$])&&(m=(c<3?a(m):c>3?a(x,o,m):a(x,o))||m);return c>3&&m&&Object.defineProperty(x,o,m),m},g=this&&this.__param||function(C,x){return function(o,d){x(o,d,C)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseService=void 0;const p=n(4725),_=n(9806);let b=s.MouseService=class{constructor(C,x){this._renderService=C,this._charSizeService=x}getCoords(C,x,o,d,a){return(0,_.getCoords)(window,C,x,o,d,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,a)}getMouseReportCoords(C,x){const o=(0,_.getCoordsRelativeToElement)(window,C,x);if(this._charSizeService.hasValidSize)return o[0]=Math.min(Math.max(o[0],0),this._renderService.dimensions.css.canvas.width-1),o[1]=Math.min(Math.max(o[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(o[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(o[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(o[0]),y:Math.floor(o[1])}}};s.MouseService=b=f([g(0,p.IRenderService),g(1,p.ICharSizeService)],b)},3230:function(h,s,n){var f=this&&this.__decorate||function(m,$,S,E){var y,k=arguments.length,B=k<3?$:E===null?E=Object.getOwnPropertyDescriptor($,S):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(m,$,S,E);else for(var O=m.length-1;O>=0;O--)(y=m[O])&&(B=(k<3?y(B):k>3?y($,S,B):y($,S))||B);return k>3&&B&&Object.defineProperty($,S,B),B},g=this&&this.__param||function(m,$){return function(S,E){$(S,E,m)}};Object.defineProperty(s,"__esModule",{value:!0}),s.RenderService=void 0;const p=n(3656),_=n(6193),b=n(5596),C=n(4725),x=n(8460),o=n(844),d=n(7226),a=n(2585);let c=s.RenderService=class extends o.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(m,$,S,E,y,k,B,O){if(super(),this._rowCount=m,this._charSizeService=E,this._renderer=this.register(new o.MutableDisposable),this._pausedResizeTask=new d.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new x.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new x.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new x.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new x.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new _.RenderDebouncer(B.window,(T,I)=>this._renderRows(T,I)),this.register(this._renderDebouncer),this._screenDprMonitor=new b.ScreenDprMonitor(B.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(k.onResize(()=>this._fullRefresh())),this.register(k.buffers.onBufferActivate(()=>{var T;return(T=this._renderer.value)===null||T===void 0?void 0:T.clear()})),this.register(S.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(y.onDecorationRegistered(()=>this._fullRefresh())),this.register(y.onDecorationRemoved(()=>this._fullRefresh())),this.register(S.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(k.cols,k.rows),this._fullRefresh()})),this.register(S.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(k.buffer.y,k.buffer.y,!0))),this.register((0,p.addDisposableDomListener)(B.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(O.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in B.window){const T=new B.window.IntersectionObserver(I=>this._handleIntersectionChange(I[I.length-1]),{threshold:0});T.observe($),this.register({dispose:()=>T.disconnect()})}}_handleIntersectionChange(m){this._isPaused=m.isIntersecting===void 0?m.intersectionRatio===0:!m.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(m,$,S=!1){this._isPaused?this._needsFullRefresh=!0:(S||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(m,$,this._rowCount))}_renderRows(m,$){this._renderer.value&&(m=Math.min(m,this._rowCount-1),$=Math.min($,this._rowCount-1),this._renderer.value.renderRows(m,$),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:m,end:$}),this._onRender.fire({start:m,end:$}),this._isNextRenderRedrawOnly=!0)}resize(m,$){this._rowCount=$,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(m){this._renderer.value=m,this._renderer.value.onRequestRedraw($=>this.refreshRows($.start,$.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(m){return this._renderDebouncer.addRefreshCallback(m)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var m,$;this._renderer.value&&(($=(m=this._renderer.value).clearTextureAtlas)===null||$===void 0||$.call(m),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(m,$){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(m,$)):this._renderer.value.handleResize(m,$),this._fullRefresh())}handleCharSizeChanged(){var m;(m=this._renderer.value)===null||m===void 0||m.handleCharSizeChanged()}handleBlur(){var m;(m=this._renderer.value)===null||m===void 0||m.handleBlur()}handleFocus(){var m;(m=this._renderer.value)===null||m===void 0||m.handleFocus()}handleSelectionChanged(m,$,S){var E;this._selectionState.start=m,this._selectionState.end=$,this._selectionState.columnSelectMode=S,(E=this._renderer.value)===null||E===void 0||E.handleSelectionChanged(m,$,S)}handleCursorMove(){var m;(m=this._renderer.value)===null||m===void 0||m.handleCursorMove()}clear(){var m;(m=this._renderer.value)===null||m===void 0||m.clear()}};s.RenderService=c=f([g(2,a.IOptionsService),g(3,C.ICharSizeService),g(4,a.IDecorationService),g(5,a.IBufferService),g(6,C.ICoreBrowserService),g(7,C.IThemeService)],c)},9312:function(h,s,n){var f=this&&this.__decorate||function(y,k,B,O){var T,I=arguments.length,M=I<3?k:O===null?O=Object.getOwnPropertyDescriptor(k,B):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(y,k,B,O);else for(var P=y.length-1;P>=0;P--)(T=y[P])&&(M=(I<3?T(M):I>3?T(k,B,M):T(k,B))||M);return I>3&&M&&Object.defineProperty(k,B,M),M},g=this&&this.__param||function(y,k){return function(B,O){k(B,O,y)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionService=void 0;const p=n(9806),_=n(9504),b=n(456),C=n(4725),x=n(8460),o=n(844),d=n(6114),a=n(4841),c=n(511),m=n(2585),$="Â ",S=new RegExp($,"g");let E=s.SelectionService=class extends o.Disposable{constructor(y,k,B,O,T,I,M,P,L){super(),this._element=y,this._screenElement=k,this._linkifier=B,this._bufferService=O,this._coreService=T,this._mouseService=I,this._optionsService=M,this._renderService=P,this._coreBrowserService=L,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new c.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new x.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new x.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new x.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new x.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=H=>this._handleMouseMove(H),this._mouseUpListener=H=>this._handleMouseUp(H),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(H=>this._handleTrim(H)),this.register(this._bufferService.buffers.onBufferActivate(H=>this._handleBufferActivate(H))),this.enable(),this._model=new b.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,o.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const y=this._model.finalSelectionStart,k=this._model.finalSelectionEnd;return!(!y||!k||y[0]===k[0]&&y[1]===k[1])}get selectionText(){const y=this._model.finalSelectionStart,k=this._model.finalSelectionEnd;if(!y||!k)return"";const B=this._bufferService.buffer,O=[];if(this._activeSelectionMode===3){if(y[0]===k[0])return"";const T=y[0]<k[0]?y[0]:k[0],I=y[0]<k[0]?k[0]:y[0];for(let M=y[1];M<=k[1];M++){const P=B.translateBufferLineToString(M,!0,T,I);O.push(P)}}else{const T=y[1]===k[1]?k[0]:void 0;O.push(B.translateBufferLineToString(y[1],!0,y[0],T));for(let I=y[1]+1;I<=k[1]-1;I++){const M=B.lines.get(I),P=B.translateBufferLineToString(I,!0);M?.isWrapped?O[O.length-1]+=P:O.push(P)}if(y[1]!==k[1]){const I=B.lines.get(k[1]),M=B.translateBufferLineToString(k[1],!0,0,k[0]);I&&I.isWrapped?O[O.length-1]+=M:O.push(M)}}return O.map(T=>T.replace(S," ")).join(d.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(y){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),d.isLinux&&y&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(y){const k=this._getMouseBufferCoords(y),B=this._model.finalSelectionStart,O=this._model.finalSelectionEnd;return!!(B&&O&&k)&&this._areCoordsInSelection(k,B,O)}isCellInSelection(y,k){const B=this._model.finalSelectionStart,O=this._model.finalSelectionEnd;return!(!B||!O)&&this._areCoordsInSelection([y,k],B,O)}_areCoordsInSelection(y,k,B){return y[1]>k[1]&&y[1]<B[1]||k[1]===B[1]&&y[1]===k[1]&&y[0]>=k[0]&&y[0]<B[0]||k[1]<B[1]&&y[1]===B[1]&&y[0]<B[0]||k[1]<B[1]&&y[1]===k[1]&&y[0]>=k[0]}_selectWordAtCursor(y,k){var B,O;const T=(O=(B=this._linkifier.currentLink)===null||B===void 0?void 0:B.link)===null||O===void 0?void 0:O.range;if(T)return this._model.selectionStart=[T.start.x-1,T.start.y-1],this._model.selectionStartLength=(0,a.getRangeLength)(T,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const I=this._getMouseBufferCoords(y);return!!I&&(this._selectWordAt(I,k),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(y,k){this._model.clearSelection(),y=Math.max(y,0),k=Math.min(k,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,y],this._model.selectionEnd=[this._bufferService.cols,k],this.refresh(),this._onSelectionChange.fire()}_handleTrim(y){this._model.handleTrim(y)&&this.refresh()}_getMouseBufferCoords(y){const k=this._mouseService.getCoords(y,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(k)return k[0]--,k[1]--,k[1]+=this._bufferService.buffer.ydisp,k}_getMouseEventScrollAmount(y){let k=(0,p.getCoordsRelativeToElement)(this._coreBrowserService.window,y,this._screenElement)[1];const B=this._renderService.dimensions.css.canvas.height;return k>=0&&k<=B?0:(k>B&&(k-=B),k=Math.min(Math.max(k,-50),50),k/=50,k/Math.abs(k)+Math.round(14*k))}shouldForceSelection(y){return d.isMac?y.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:y.shiftKey}handleMouseDown(y){if(this._mouseDownTimeStamp=y.timeStamp,(y.button!==2||!this.hasSelection)&&y.button===0){if(!this._enabled){if(!this.shouldForceSelection(y))return;y.stopPropagation()}y.preventDefault(),this._dragScrollAmount=0,this._enabled&&y.shiftKey?this._handleIncrementalClick(y):y.detail===1?this._handleSingleClick(y):y.detail===2?this._handleDoubleClick(y):y.detail===3&&this._handleTripleClick(y),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(y){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(y))}_handleSingleClick(y){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(y)?3:0,this._model.selectionStart=this._getMouseBufferCoords(y),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const k=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);k&&k.length!==this._model.selectionStart[0]&&k.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(y){this._selectWordAtCursor(y,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(y){const k=this._getMouseBufferCoords(y);k&&(this._activeSelectionMode=2,this._selectLineAt(k[1]))}shouldColumnSelect(y){return y.altKey&&!(d.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(y){if(y.stopImmediatePropagation(),!this._model.selectionStart)return;const k=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(y),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(y),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const B=this._bufferService.buffer;if(this._model.selectionEnd[1]<B.lines.length){const O=B.lines.get(this._model.selectionEnd[1]);O&&O.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}k&&k[0]===this._model.selectionEnd[0]&&k[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const y=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(y.ydisp+this._bufferService.rows,y.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=y.ydisp),this.refresh()}}_handleMouseUp(y){const k=y.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&k<500&&y.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const B=this._mouseService.getCoords(y,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(B&&B[0]!==void 0&&B[1]!==void 0){const O=(0,_.moveToCellSequence)(B[0]-1,B[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(O,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const y=this._model.finalSelectionStart,k=this._model.finalSelectionEnd,B=!(!y||!k||y[0]===k[0]&&y[1]===k[1]);B?y&&k&&(this._oldSelectionStart&&this._oldSelectionEnd&&y[0]===this._oldSelectionStart[0]&&y[1]===this._oldSelectionStart[1]&&k[0]===this._oldSelectionEnd[0]&&k[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(y,k,B)):this._oldHasSelection&&this._fireOnSelectionChange(y,k,B)}_fireOnSelectionChange(y,k,B){this._oldSelectionStart=y,this._oldSelectionEnd=k,this._oldHasSelection=B,this._onSelectionChange.fire()}_handleBufferActivate(y){this.clearSelection(),this._trimListener.dispose(),this._trimListener=y.activeBuffer.lines.onTrim(k=>this._handleTrim(k))}_convertViewportColToCharacterIndex(y,k){let B=k;for(let O=0;k>=O;O++){const T=y.loadCell(O,this._workCell).getChars().length;this._workCell.getWidth()===0?B--:T>1&&k!==O&&(B+=T-1)}return B}setSelection(y,k,B){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[y,k],this._model.selectionStartLength=B,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(y){this._isClickInSelection(y)||(this._selectWordAtCursor(y,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(y,k,B=!0,O=!0){if(y[0]>=this._bufferService.cols)return;const T=this._bufferService.buffer,I=T.lines.get(y[1]);if(!I)return;const M=T.translateBufferLineToString(y[1],!1);let P=this._convertViewportColToCharacterIndex(I,y[0]),L=P;const H=y[0]-P;let w=0,N=0,z=0,V=0;if(M.charAt(P)===" "){for(;P>0&&M.charAt(P-1)===" ";)P--;for(;L<M.length&&M.charAt(L+1)===" ";)L++}else{let U=y[0],W=y[0];I.getWidth(U)===0&&(w++,U--),I.getWidth(W)===2&&(N++,W++);const ce=I.getString(W).length;for(ce>1&&(V+=ce-1,L+=ce-1);U>0&&P>0&&!this._isCharWordSeparator(I.loadCell(U-1,this._workCell));){I.loadCell(U-1,this._workCell);const D=this._workCell.getChars().length;this._workCell.getWidth()===0?(w++,U--):D>1&&(z+=D-1,P-=D-1),P--,U--}for(;W<I.length&&L+1<M.length&&!this._isCharWordSeparator(I.loadCell(W+1,this._workCell));){I.loadCell(W+1,this._workCell);const D=this._workCell.getChars().length;this._workCell.getWidth()===2?(N++,W++):D>1&&(V+=D-1,L+=D-1),L++,W++}}L++;let Q=P+H-w+z,F=Math.min(this._bufferService.cols,L-P+w+N-z-V);if(k||M.slice(P,L).trim()!==""){if(B&&Q===0&&I.getCodePoint(0)!==32){const U=T.lines.get(y[1]-1);if(U&&I.isWrapped&&U.getCodePoint(this._bufferService.cols-1)!==32){const W=this._getWordAt([this._bufferService.cols-1,y[1]-1],!1,!0,!1);if(W){const ce=this._bufferService.cols-W.start;Q-=ce,F+=ce}}}if(O&&Q+F===this._bufferService.cols&&I.getCodePoint(this._bufferService.cols-1)!==32){const U=T.lines.get(y[1]+1);if(U?.isWrapped&&U.getCodePoint(0)!==32){const W=this._getWordAt([0,y[1]+1],!1,!1,!0);W&&(F+=W.length)}}return{start:Q,length:F}}}_selectWordAt(y,k){const B=this._getWordAt(y,k);if(B){for(;B.start<0;)B.start+=this._bufferService.cols,y[1]--;this._model.selectionStart=[B.start,y[1]],this._model.selectionStartLength=B.length}}_selectToWordAt(y){const k=this._getWordAt(y,!0);if(k){let B=y[1];for(;k.start<0;)k.start+=this._bufferService.cols,B--;if(!this._model.areSelectionValuesReversed())for(;k.start+k.length>this._bufferService.cols;)k.length-=this._bufferService.cols,B++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?k.start:k.start+k.length,B]}}_isCharWordSeparator(y){return y.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(y.getChars())>=0}_selectLineAt(y){const k=this._bufferService.buffer.getWrappedRangeForLine(y),B={start:{x:0,y:k.first},end:{x:this._bufferService.cols-1,y:k.last}};this._model.selectionStart=[0,k.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,a.getRangeLength)(B,this._bufferService.cols)}};s.SelectionService=E=f([g(3,m.IBufferService),g(4,m.ICoreService),g(5,C.IMouseService),g(6,m.IOptionsService),g(7,C.IRenderService),g(8,C.ICoreBrowserService)],E)},4725:(h,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IThemeService=s.ICharacterJoinerService=s.ISelectionService=s.IRenderService=s.IMouseService=s.ICoreBrowserService=s.ICharSizeService=void 0;const f=n(8343);s.ICharSizeService=(0,f.createDecorator)("CharSizeService"),s.ICoreBrowserService=(0,f.createDecorator)("CoreBrowserService"),s.IMouseService=(0,f.createDecorator)("MouseService"),s.IRenderService=(0,f.createDecorator)("RenderService"),s.ISelectionService=(0,f.createDecorator)("SelectionService"),s.ICharacterJoinerService=(0,f.createDecorator)("CharacterJoinerService"),s.IThemeService=(0,f.createDecorator)("ThemeService")},6731:function(h,s,n){var f=this&&this.__decorate||function(E,y,k,B){var O,T=arguments.length,I=T<3?y:B===null?B=Object.getOwnPropertyDescriptor(y,k):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(E,y,k,B);else for(var M=E.length-1;M>=0;M--)(O=E[M])&&(I=(T<3?O(I):T>3?O(y,k,I):O(y,k))||I);return T>3&&I&&Object.defineProperty(y,k,I),I},g=this&&this.__param||function(E,y){return function(k,B){y(k,B,E)}};Object.defineProperty(s,"__esModule",{value:!0}),s.ThemeService=s.DEFAULT_ANSI_COLORS=void 0;const p=n(7239),_=n(8055),b=n(8460),C=n(844),x=n(2585),o=_.css.toColor("#ffffff"),d=_.css.toColor("#000000"),a=_.css.toColor("#ffffff"),c=_.css.toColor("#000000"),m={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};s.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const E=[_.css.toColor("#2e3436"),_.css.toColor("#cc0000"),_.css.toColor("#4e9a06"),_.css.toColor("#c4a000"),_.css.toColor("#3465a4"),_.css.toColor("#75507b"),_.css.toColor("#06989a"),_.css.toColor("#d3d7cf"),_.css.toColor("#555753"),_.css.toColor("#ef2929"),_.css.toColor("#8ae234"),_.css.toColor("#fce94f"),_.css.toColor("#729fcf"),_.css.toColor("#ad7fa8"),_.css.toColor("#34e2e2"),_.css.toColor("#eeeeec")],y=[0,95,135,175,215,255];for(let k=0;k<216;k++){const B=y[k/36%6|0],O=y[k/6%6|0],T=y[k%6];E.push({css:_.channels.toCss(B,O,T),rgba:_.channels.toRgba(B,O,T)})}for(let k=0;k<24;k++){const B=8+10*k;E.push({css:_.channels.toCss(B,B,B),rgba:_.channels.toRgba(B,B,B)})}return E})());let $=s.ThemeService=class extends C.Disposable{get colors(){return this._colors}constructor(E){super(),this._optionsService=E,this._contrastCache=new p.ColorContrastCache,this._halfContrastCache=new p.ColorContrastCache,this._onChangeColors=this.register(new b.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:o,background:d,cursor:a,cursorAccent:c,selectionForeground:void 0,selectionBackgroundTransparent:m,selectionBackgroundOpaque:_.color.blend(d,m),selectionInactiveBackgroundTransparent:m,selectionInactiveBackgroundOpaque:_.color.blend(d,m),ansi:s.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(E={}){const y=this._colors;if(y.foreground=S(E.foreground,o),y.background=S(E.background,d),y.cursor=S(E.cursor,a),y.cursorAccent=S(E.cursorAccent,c),y.selectionBackgroundTransparent=S(E.selectionBackground,m),y.selectionBackgroundOpaque=_.color.blend(y.background,y.selectionBackgroundTransparent),y.selectionInactiveBackgroundTransparent=S(E.selectionInactiveBackground,y.selectionBackgroundTransparent),y.selectionInactiveBackgroundOpaque=_.color.blend(y.background,y.selectionInactiveBackgroundTransparent),y.selectionForeground=E.selectionForeground?S(E.selectionForeground,_.NULL_COLOR):void 0,y.selectionForeground===_.NULL_COLOR&&(y.selectionForeground=void 0),_.color.isOpaque(y.selectionBackgroundTransparent)&&(y.selectionBackgroundTransparent=_.color.opacity(y.selectionBackgroundTransparent,.3)),_.color.isOpaque(y.selectionInactiveBackgroundTransparent)&&(y.selectionInactiveBackgroundTransparent=_.color.opacity(y.selectionInactiveBackgroundTransparent,.3)),y.ansi=s.DEFAULT_ANSI_COLORS.slice(),y.ansi[0]=S(E.black,s.DEFAULT_ANSI_COLORS[0]),y.ansi[1]=S(E.red,s.DEFAULT_ANSI_COLORS[1]),y.ansi[2]=S(E.green,s.DEFAULT_ANSI_COLORS[2]),y.ansi[3]=S(E.yellow,s.DEFAULT_ANSI_COLORS[3]),y.ansi[4]=S(E.blue,s.DEFAULT_ANSI_COLORS[4]),y.ansi[5]=S(E.magenta,s.DEFAULT_ANSI_COLORS[5]),y.ansi[6]=S(E.cyan,s.DEFAULT_ANSI_COLORS[6]),y.ansi[7]=S(E.white,s.DEFAULT_ANSI_COLORS[7]),y.ansi[8]=S(E.brightBlack,s.DEFAULT_ANSI_COLORS[8]),y.ansi[9]=S(E.brightRed,s.DEFAULT_ANSI_COLORS[9]),y.ansi[10]=S(E.brightGreen,s.DEFAULT_ANSI_COLORS[10]),y.ansi[11]=S(E.brightYellow,s.DEFAULT_ANSI_COLORS[11]),y.ansi[12]=S(E.brightBlue,s.DEFAULT_ANSI_COLORS[12]),y.ansi[13]=S(E.brightMagenta,s.DEFAULT_ANSI_COLORS[13]),y.ansi[14]=S(E.brightCyan,s.DEFAULT_ANSI_COLORS[14]),y.ansi[15]=S(E.brightWhite,s.DEFAULT_ANSI_COLORS[15]),E.extendedAnsi){const k=Math.min(y.ansi.length-16,E.extendedAnsi.length);for(let B=0;B<k;B++)y.ansi[B+16]=S(E.extendedAnsi[B],s.DEFAULT_ANSI_COLORS[B+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(E){this._restoreColor(E),this._onChangeColors.fire(this.colors)}_restoreColor(E){if(E!==void 0)switch(E){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[E]=this._restoreColors.ansi[E]}else for(let y=0;y<this._restoreColors.ansi.length;++y)this._colors.ansi[y]=this._restoreColors.ansi[y]}modifyColors(E){E(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function S(E,y){if(E!==void 0)try{return _.css.toColor(E)}catch{}return y}s.ThemeService=$=f([g(0,x.IOptionsService)],$)},6349:(h,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CircularList=void 0;const f=n(8460),g=n(844);class p extends g.Disposable{constructor(b){super(),this._maxLength=b,this.onDeleteEmitter=this.register(new f.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new f.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new f.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(b){if(this._maxLength===b)return;const C=new Array(b);for(let x=0;x<Math.min(b,this.length);x++)C[x]=this._array[this._getCyclicIndex(x)];this._array=C,this._maxLength=b,this._startIndex=0}get length(){return this._length}set length(b){if(b>this._length)for(let C=this._length;C<b;C++)this._array[C]=void 0;this._length=b}get(b){return this._array[this._getCyclicIndex(b)]}set(b,C){this._array[this._getCyclicIndex(b)]=C}push(b){this._array[this._getCyclicIndex(this._length)]=b,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(b,C,...x){if(C){for(let o=b;o<this._length-C;o++)this._array[this._getCyclicIndex(o)]=this._array[this._getCyclicIndex(o+C)];this._length-=C,this.onDeleteEmitter.fire({index:b,amount:C})}for(let o=this._length-1;o>=b;o--)this._array[this._getCyclicIndex(o+x.length)]=this._array[this._getCyclicIndex(o)];for(let o=0;o<x.length;o++)this._array[this._getCyclicIndex(b+o)]=x[o];if(x.length&&this.onInsertEmitter.fire({index:b,amount:x.length}),this._length+x.length>this._maxLength){const o=this._length+x.length-this._maxLength;this._startIndex+=o,this._length=this._maxLength,this.onTrimEmitter.fire(o)}else this._length+=x.length}trimStart(b){b>this._length&&(b=this._length),this._startIndex+=b,this._length-=b,this.onTrimEmitter.fire(b)}shiftElements(b,C,x){if(!(C<=0)){if(b<0||b>=this._length)throw new Error("start argument out of range");if(b+x<0)throw new Error("Cannot shift elements in list beyond index 0");if(x>0){for(let d=C-1;d>=0;d--)this.set(b+d+x,this.get(b+d));const o=b+C+x-this._length;if(o>0)for(this._length+=o;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let o=0;o<C;o++)this.set(b+o+x,this.get(b+o))}}_getCyclicIndex(b){return(this._startIndex+b)%this._maxLength}}s.CircularList=p},1439:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.clone=void 0,s.clone=function n(f,g=5){if(typeof f!="object")return f;const p=Array.isArray(f)?[]:{};for(const _ in f)p[_]=g<=1?f[_]:f[_]&&n(f[_],g-1);return p}},8055:(h,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=s.NULL_COLOR=void 0;const f=n(6114);let g=0,p=0,_=0,b=0;var C,x,o,d,a;function c($){const S=$.toString(16);return S.length<2?"0"+S:S}function m($,S){return $<S?(S+.05)/($+.05):($+.05)/(S+.05)}s.NULL_COLOR={css:"#00000000",rgba:0},function($){$.toCss=function(S,E,y,k){return k!==void 0?`#${c(S)}${c(E)}${c(y)}${c(k)}`:`#${c(S)}${c(E)}${c(y)}`},$.toRgba=function(S,E,y,k=255){return(S<<24|E<<16|y<<8|k)>>>0}}(C||(s.channels=C={})),function($){function S(E,y){return b=Math.round(255*y),[g,p,_]=a.toChannels(E.rgba),{css:C.toCss(g,p,_,b),rgba:C.toRgba(g,p,_,b)}}$.blend=function(E,y){if(b=(255&y.rgba)/255,b===1)return{css:y.css,rgba:y.rgba};const k=y.rgba>>24&255,B=y.rgba>>16&255,O=y.rgba>>8&255,T=E.rgba>>24&255,I=E.rgba>>16&255,M=E.rgba>>8&255;return g=T+Math.round((k-T)*b),p=I+Math.round((B-I)*b),_=M+Math.round((O-M)*b),{css:C.toCss(g,p,_),rgba:C.toRgba(g,p,_)}},$.isOpaque=function(E){return(255&E.rgba)==255},$.ensureContrastRatio=function(E,y,k){const B=a.ensureContrastRatio(E.rgba,y.rgba,k);if(B)return a.toColor(B>>24&255,B>>16&255,B>>8&255)},$.opaque=function(E){const y=(255|E.rgba)>>>0;return[g,p,_]=a.toChannels(y),{css:C.toCss(g,p,_),rgba:y}},$.opacity=S,$.multiplyOpacity=function(E,y){return b=255&E.rgba,S(E,b*y/255)},$.toColorRGB=function(E){return[E.rgba>>24&255,E.rgba>>16&255,E.rgba>>8&255]}}(x||(s.color=x={})),function($){let S,E;if(!f.isNode){const y=document.createElement("canvas");y.width=1,y.height=1;const k=y.getContext("2d",{willReadFrequently:!0});k&&(S=k,S.globalCompositeOperation="copy",E=S.createLinearGradient(0,0,1,1))}$.toColor=function(y){if(y.match(/#[\da-f]{3,8}/i))switch(y.length){case 4:return g=parseInt(y.slice(1,2).repeat(2),16),p=parseInt(y.slice(2,3).repeat(2),16),_=parseInt(y.slice(3,4).repeat(2),16),a.toColor(g,p,_);case 5:return g=parseInt(y.slice(1,2).repeat(2),16),p=parseInt(y.slice(2,3).repeat(2),16),_=parseInt(y.slice(3,4).repeat(2),16),b=parseInt(y.slice(4,5).repeat(2),16),a.toColor(g,p,_,b);case 7:return{css:y,rgba:(parseInt(y.slice(1),16)<<8|255)>>>0};case 9:return{css:y,rgba:parseInt(y.slice(1),16)>>>0}}const k=y.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(k)return g=parseInt(k[1]),p=parseInt(k[2]),_=parseInt(k[3]),b=Math.round(255*(k[5]===void 0?1:parseFloat(k[5]))),a.toColor(g,p,_,b);if(!S||!E)throw new Error("css.toColor: Unsupported css format");if(S.fillStyle=E,S.fillStyle=y,typeof S.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(S.fillRect(0,0,1,1),[g,p,_,b]=S.getImageData(0,0,1,1).data,b!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:C.toRgba(g,p,_,b),css:y}}}(o||(s.css=o={})),function($){function S(E,y,k){const B=E/255,O=y/255,T=k/255;return .2126*(B<=.03928?B/12.92:Math.pow((B+.055)/1.055,2.4))+.7152*(O<=.03928?O/12.92:Math.pow((O+.055)/1.055,2.4))+.0722*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))}$.relativeLuminance=function(E){return S(E>>16&255,E>>8&255,255&E)},$.relativeLuminance2=S}(d||(s.rgb=d={})),function($){function S(y,k,B){const O=y>>24&255,T=y>>16&255,I=y>>8&255;let M=k>>24&255,P=k>>16&255,L=k>>8&255,H=m(d.relativeLuminance2(M,P,L),d.relativeLuminance2(O,T,I));for(;H<B&&(M>0||P>0||L>0);)M-=Math.max(0,Math.ceil(.1*M)),P-=Math.max(0,Math.ceil(.1*P)),L-=Math.max(0,Math.ceil(.1*L)),H=m(d.relativeLuminance2(M,P,L),d.relativeLuminance2(O,T,I));return(M<<24|P<<16|L<<8|255)>>>0}function E(y,k,B){const O=y>>24&255,T=y>>16&255,I=y>>8&255;let M=k>>24&255,P=k>>16&255,L=k>>8&255,H=m(d.relativeLuminance2(M,P,L),d.relativeLuminance2(O,T,I));for(;H<B&&(M<255||P<255||L<255);)M=Math.min(255,M+Math.ceil(.1*(255-M))),P=Math.min(255,P+Math.ceil(.1*(255-P))),L=Math.min(255,L+Math.ceil(.1*(255-L))),H=m(d.relativeLuminance2(M,P,L),d.relativeLuminance2(O,T,I));return(M<<24|P<<16|L<<8|255)>>>0}$.ensureContrastRatio=function(y,k,B){const O=d.relativeLuminance(y>>8),T=d.relativeLuminance(k>>8);if(m(O,T)<B){if(T<O){const P=S(y,k,B),L=m(O,d.relativeLuminance(P>>8));if(L<B){const H=E(y,k,B);return L>m(O,d.relativeLuminance(H>>8))?P:H}return P}const I=E(y,k,B),M=m(O,d.relativeLuminance(I>>8));if(M<B){const P=S(y,k,B);return M>m(O,d.relativeLuminance(P>>8))?I:P}return I}},$.reduceLuminance=S,$.increaseLuminance=E,$.toChannels=function(y){return[y>>24&255,y>>16&255,y>>8&255,255&y]},$.toColor=function(y,k,B,O){return{css:C.toCss(y,k,B,O),rgba:C.toRgba(y,k,B,O)}}}(a||(s.rgba=a={})),s.toPaddedHex=c,s.contrastRatio=m},8969:(h,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreTerminal=void 0;const f=n(844),g=n(2585),p=n(4348),_=n(7866),b=n(744),C=n(7302),x=n(6975),o=n(8460),d=n(1753),a=n(1480),c=n(7994),m=n(9282),$=n(5435),S=n(5981),E=n(2660);let y=!1;class k extends f.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new o.EventEmitter),this._onScroll.event(O=>{var T;(T=this._onScrollApi)===null||T===void 0||T.fire(O.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(O){for(const T in O)this.optionsService.options[T]=O[T]}constructor(O){super(),this._windowsWrappingHeuristics=this.register(new f.MutableDisposable),this._onBinary=this.register(new o.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new o.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new o.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new o.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new o.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new o.EventEmitter),this._instantiationService=new p.InstantiationService,this.optionsService=this.register(new C.OptionsService(O)),this._instantiationService.setService(g.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(b.BufferService)),this._instantiationService.setService(g.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(_.LogService)),this._instantiationService.setService(g.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(x.CoreService)),this._instantiationService.setService(g.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(d.CoreMouseService)),this._instantiationService.setService(g.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(a.UnicodeService)),this._instantiationService.setService(g.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(c.CharsetService),this._instantiationService.setService(g.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(E.OscLinkService),this._instantiationService.setService(g.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new $.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,o.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,o.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,o.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,o.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new S.WriteBuffer((T,I)=>this._inputHandler.parse(T,I))),this.register((0,o.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(O,T){this._writeBuffer.write(O,T)}writeSync(O,T){this._logService.logLevel<=g.LogLevelEnum.WARN&&!y&&(this._logService.warn("writeSync is unreliable and will be removed soon."),y=!0),this._writeBuffer.writeSync(O,T)}resize(O,T){isNaN(O)||isNaN(T)||(O=Math.max(O,b.MINIMUM_COLS),T=Math.max(T,b.MINIMUM_ROWS),this._bufferService.resize(O,T))}scroll(O,T=!1){this._bufferService.scroll(O,T)}scrollLines(O,T,I){this._bufferService.scrollLines(O,T,I)}scrollPages(O){this.scrollLines(O*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(O){const T=O-this._bufferService.buffer.ydisp;T!==0&&this.scrollLines(T)}registerEscHandler(O,T){return this._inputHandler.registerEscHandler(O,T)}registerDcsHandler(O,T){return this._inputHandler.registerDcsHandler(O,T)}registerCsiHandler(O,T){return this._inputHandler.registerCsiHandler(O,T)}registerOscHandler(O,T){return this._inputHandler.registerOscHandler(O,T)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let O=!1;const T=this.optionsService.rawOptions.windowsPty;T&&T.buildNumber!==void 0&&T.buildNumber!==void 0?O=T.backend==="conpty"&&T.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(O=!0),O?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const O=[];O.push(this.onLineFeed(m.updateWindowsModeWrappedState.bind(null,this._bufferService))),O.push(this.registerCsiHandler({final:"H"},()=>((0,m.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,f.toDisposable)(()=>{for(const T of O)T.dispose()})}}}s.CoreTerminal=k},8460:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.forwardEvent=s.EventEmitter=void 0,s.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=n=>(this._listeners.push(n),{dispose:()=>{if(!this._disposed){for(let f=0;f<this._listeners.length;f++)if(this._listeners[f]===n)return void this._listeners.splice(f,1)}}})),this._event}fire(n,f){const g=[];for(let p=0;p<this._listeners.length;p++)g.push(this._listeners[p]);for(let p=0;p<g.length;p++)g[p].call(void 0,n,f)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},s.forwardEvent=function(n,f){return n(g=>f.fire(g))}},5435:function(h,s,n){var f=this&&this.__decorate||function(H,w,N,z){var V,Q=arguments.length,F=Q<3?w:z===null?z=Object.getOwnPropertyDescriptor(w,N):z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(H,w,N,z);else for(var U=H.length-1;U>=0;U--)(V=H[U])&&(F=(Q<3?V(F):Q>3?V(w,N,F):V(w,N))||F);return Q>3&&F&&Object.defineProperty(w,N,F),F},g=this&&this.__param||function(H,w){return function(N,z){w(N,z,H)}};Object.defineProperty(s,"__esModule",{value:!0}),s.InputHandler=s.WindowsOptionsReportType=void 0;const p=n(2584),_=n(7116),b=n(2015),C=n(844),x=n(482),o=n(8437),d=n(8460),a=n(643),c=n(511),m=n(3734),$=n(2585),S=n(6242),E=n(6351),y=n(5941),k={"(":0,")":1,"*":2,"+":3,"-":1,".":2},B=131072;function O(H,w){if(H>24)return w.setWinLines||!1;switch(H){case 1:return!!w.restoreWin;case 2:return!!w.minimizeWin;case 3:return!!w.setWinPosition;case 4:return!!w.setWinSizePixels;case 5:return!!w.raiseWin;case 6:return!!w.lowerWin;case 7:return!!w.refreshWin;case 8:return!!w.setWinSizeChars;case 9:return!!w.maximizeWin;case 10:return!!w.fullscreenWin;case 11:return!!w.getWinState;case 13:return!!w.getWinPosition;case 14:return!!w.getWinSizePixels;case 15:return!!w.getScreenSizePixels;case 16:return!!w.getCellSizePixels;case 18:return!!w.getWinSizeChars;case 19:return!!w.getScreenSizeChars;case 20:return!!w.getIconTitle;case 21:return!!w.getWinTitle;case 22:return!!w.pushTitle;case 23:return!!w.popTitle;case 24:return!!w.setWinLines}return!1}var T;(function(H){H[H.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",H[H.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(T||(s.WindowsOptionsReportType=T={}));let I=0;class M extends C.Disposable{getAttrData(){return this._curAttrData}constructor(w,N,z,V,Q,F,U,W,ce=new b.EscapeSequenceParser){super(),this._bufferService=w,this._charsetService=N,this._coreService=z,this._logService=V,this._optionsService=Q,this._oscLinkService=F,this._coreMouseService=U,this._unicodeService=W,this._parser=ce,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new x.StringToUtf32,this._utf8Decoder=new x.Utf8ToUtf32,this._workCell=new c.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new d.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new d.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new d.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new d.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new d.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new d.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new d.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new d.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new d.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new d.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new d.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new d.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new P(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(D=>this._activeBuffer=D.activeBuffer)),this._parser.setCsiHandlerFallback((D,j)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(D),params:j.toArray()})}),this._parser.setEscHandlerFallback(D=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(D)})}),this._parser.setExecuteHandlerFallback(D=>{this._logService.debug("Unknown EXECUTE code: ",{code:D})}),this._parser.setOscHandlerFallback((D,j,K)=>{this._logService.debug("Unknown OSC code: ",{identifier:D,action:j,data:K})}),this._parser.setDcsHandlerFallback((D,j,K)=>{j==="HOOK"&&(K=K.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(D),action:j,payload:K})}),this._parser.setPrintHandler((D,j,K)=>this.print(D,j,K)),this._parser.registerCsiHandler({final:"@"},D=>this.insertChars(D)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},D=>this.scrollLeft(D)),this._parser.registerCsiHandler({final:"A"},D=>this.cursorUp(D)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},D=>this.scrollRight(D)),this._parser.registerCsiHandler({final:"B"},D=>this.cursorDown(D)),this._parser.registerCsiHandler({final:"C"},D=>this.cursorForward(D)),this._parser.registerCsiHandler({final:"D"},D=>this.cursorBackward(D)),this._parser.registerCsiHandler({final:"E"},D=>this.cursorNextLine(D)),this._parser.registerCsiHandler({final:"F"},D=>this.cursorPrecedingLine(D)),this._parser.registerCsiHandler({final:"G"},D=>this.cursorCharAbsolute(D)),this._parser.registerCsiHandler({final:"H"},D=>this.cursorPosition(D)),this._parser.registerCsiHandler({final:"I"},D=>this.cursorForwardTab(D)),this._parser.registerCsiHandler({final:"J"},D=>this.eraseInDisplay(D,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},D=>this.eraseInDisplay(D,!0)),this._parser.registerCsiHandler({final:"K"},D=>this.eraseInLine(D,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},D=>this.eraseInLine(D,!0)),this._parser.registerCsiHandler({final:"L"},D=>this.insertLines(D)),this._parser.registerCsiHandler({final:"M"},D=>this.deleteLines(D)),this._parser.registerCsiHandler({final:"P"},D=>this.deleteChars(D)),this._parser.registerCsiHandler({final:"S"},D=>this.scrollUp(D)),this._parser.registerCsiHandler({final:"T"},D=>this.scrollDown(D)),this._parser.registerCsiHandler({final:"X"},D=>this.eraseChars(D)),this._parser.registerCsiHandler({final:"Z"},D=>this.cursorBackwardTab(D)),this._parser.registerCsiHandler({final:"`"},D=>this.charPosAbsolute(D)),this._parser.registerCsiHandler({final:"a"},D=>this.hPositionRelative(D)),this._parser.registerCsiHandler({final:"b"},D=>this.repeatPrecedingCharacter(D)),this._parser.registerCsiHandler({final:"c"},D=>this.sendDeviceAttributesPrimary(D)),this._parser.registerCsiHandler({prefix:">",final:"c"},D=>this.sendDeviceAttributesSecondary(D)),this._parser.registerCsiHandler({final:"d"},D=>this.linePosAbsolute(D)),this._parser.registerCsiHandler({final:"e"},D=>this.vPositionRelative(D)),this._parser.registerCsiHandler({final:"f"},D=>this.hVPosition(D)),this._parser.registerCsiHandler({final:"g"},D=>this.tabClear(D)),this._parser.registerCsiHandler({final:"h"},D=>this.setMode(D)),this._parser.registerCsiHandler({prefix:"?",final:"h"},D=>this.setModePrivate(D)),this._parser.registerCsiHandler({final:"l"},D=>this.resetMode(D)),this._parser.registerCsiHandler({prefix:"?",final:"l"},D=>this.resetModePrivate(D)),this._parser.registerCsiHandler({final:"m"},D=>this.charAttributes(D)),this._parser.registerCsiHandler({final:"n"},D=>this.deviceStatus(D)),this._parser.registerCsiHandler({prefix:"?",final:"n"},D=>this.deviceStatusPrivate(D)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},D=>this.softReset(D)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},D=>this.setCursorStyle(D)),this._parser.registerCsiHandler({final:"r"},D=>this.setScrollRegion(D)),this._parser.registerCsiHandler({final:"s"},D=>this.saveCursor(D)),this._parser.registerCsiHandler({final:"t"},D=>this.windowOptions(D)),this._parser.registerCsiHandler({final:"u"},D=>this.restoreCursor(D)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},D=>this.insertColumns(D)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},D=>this.deleteColumns(D)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},D=>this.selectProtected(D)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},D=>this.requestMode(D,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},D=>this.requestMode(D,!1)),this._parser.setExecuteHandler(p.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(p.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(p.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(p.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(p.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(p.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(p.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(p.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(p.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(p.C1.IND,()=>this.index()),this._parser.setExecuteHandler(p.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(p.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new S.OscHandler(D=>(this.setTitle(D),this.setIconName(D),!0))),this._parser.registerOscHandler(1,new S.OscHandler(D=>this.setIconName(D))),this._parser.registerOscHandler(2,new S.OscHandler(D=>this.setTitle(D))),this._parser.registerOscHandler(4,new S.OscHandler(D=>this.setOrReportIndexedColor(D))),this._parser.registerOscHandler(8,new S.OscHandler(D=>this.setHyperlink(D))),this._parser.registerOscHandler(10,new S.OscHandler(D=>this.setOrReportFgColor(D))),this._parser.registerOscHandler(11,new S.OscHandler(D=>this.setOrReportBgColor(D))),this._parser.registerOscHandler(12,new S.OscHandler(D=>this.setOrReportCursorColor(D))),this._parser.registerOscHandler(104,new S.OscHandler(D=>this.restoreIndexedColor(D))),this._parser.registerOscHandler(110,new S.OscHandler(D=>this.restoreFgColor(D))),this._parser.registerOscHandler(111,new S.OscHandler(D=>this.restoreBgColor(D))),this._parser.registerOscHandler(112,new S.OscHandler(D=>this.restoreCursorColor(D))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const D in _.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:D},()=>this.selectCharset("("+D)),this._parser.registerEscHandler({intermediates:")",final:D},()=>this.selectCharset(")"+D)),this._parser.registerEscHandler({intermediates:"*",final:D},()=>this.selectCharset("*"+D)),this._parser.registerEscHandler({intermediates:"+",final:D},()=>this.selectCharset("+"+D)),this._parser.registerEscHandler({intermediates:"-",final:D},()=>this.selectCharset("-"+D)),this._parser.registerEscHandler({intermediates:".",final:D},()=>this.selectCharset("."+D)),this._parser.registerEscHandler({intermediates:"/",final:D},()=>this.selectCharset("/"+D));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(D=>(this._logService.error("Parsing error: ",D),D)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new E.DcsHandler((D,j)=>this.requestStatusString(D,j)))}_preserveStack(w,N,z,V){this._parseStack.paused=!0,this._parseStack.cursorStartX=w,this._parseStack.cursorStartY=N,this._parseStack.decodedLength=z,this._parseStack.position=V}_logSlowResolvingAsync(w){this._logService.logLevel<=$.LogLevelEnum.WARN&&Promise.race([w,new Promise((N,z)=>setTimeout(()=>z("#SLOW_TIMEOUT"),5e3))]).catch(N=>{if(N!=="#SLOW_TIMEOUT")throw N;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(w,N){let z,V=this._activeBuffer.x,Q=this._activeBuffer.y,F=0;const U=this._parseStack.paused;if(U){if(z=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,N))return this._logSlowResolvingAsync(z),z;V=this._parseStack.cursorStartX,Q=this._parseStack.cursorStartY,this._parseStack.paused=!1,w.length>B&&(F=this._parseStack.position+B)}if(this._logService.logLevel<=$.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof w=="string"?` "${w}"`:` "${Array.prototype.map.call(w,W=>String.fromCharCode(W)).join("")}"`),typeof w=="string"?w.split("").map(W=>W.charCodeAt(0)):w),this._parseBuffer.length<w.length&&this._parseBuffer.length<B&&(this._parseBuffer=new Uint32Array(Math.min(w.length,B))),U||this._dirtyRowTracker.clearRange(),w.length>B)for(let W=F;W<w.length;W+=B){const ce=W+B<w.length?W+B:w.length,D=typeof w=="string"?this._stringDecoder.decode(w.substring(W,ce),this._parseBuffer):this._utf8Decoder.decode(w.subarray(W,ce),this._parseBuffer);if(z=this._parser.parse(this._parseBuffer,D))return this._preserveStack(V,Q,D,W),this._logSlowResolvingAsync(z),z}else if(!U){const W=typeof w=="string"?this._stringDecoder.decode(w,this._parseBuffer):this._utf8Decoder.decode(w,this._parseBuffer);if(z=this._parser.parse(this._parseBuffer,W))return this._preserveStack(V,Q,W,0),this._logSlowResolvingAsync(z),z}this._activeBuffer.x===V&&this._activeBuffer.y===Q||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(w,N,z){let V,Q;const F=this._charsetService.charset,U=this._optionsService.rawOptions.screenReaderMode,W=this._bufferService.cols,ce=this._coreService.decPrivateModes.wraparound,D=this._coreService.modes.insertMode,j=this._curAttrData;let K=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&z-N>0&&K.getWidth(this._activeBuffer.x-1)===2&&K.setCellFromCodePoint(this._activeBuffer.x-1,0,1,j.fg,j.bg,j.extended);for(let ee=N;ee<z;++ee){if(V=w[ee],Q=this._unicodeService.wcwidth(V),V<127&&F){const ne=F[String.fromCharCode(V)];ne&&(V=ne.charCodeAt(0))}if(U&&this._onA11yChar.fire((0,x.stringFromCodePoint)(V)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),Q||!this._activeBuffer.x){if(this._activeBuffer.x+Q-1>=W){if(ce){for(;this._activeBuffer.x<W;)K.setCellFromCodePoint(this._activeBuffer.x++,0,1,j.fg,j.bg,j.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),K=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=W-1,Q===2)continue}if(D&&(K.insertCells(this._activeBuffer.x,Q,this._activeBuffer.getNullCell(j),j),K.getWidth(W-1)===2&&K.setCellFromCodePoint(W-1,a.NULL_CELL_CODE,a.NULL_CELL_WIDTH,j.fg,j.bg,j.extended)),K.setCellFromCodePoint(this._activeBuffer.x++,V,Q,j.fg,j.bg,j.extended),Q>0)for(;--Q;)K.setCellFromCodePoint(this._activeBuffer.x++,0,0,j.fg,j.bg,j.extended)}else K.getWidth(this._activeBuffer.x-1)?K.addCodepointToCell(this._activeBuffer.x-1,V):K.addCodepointToCell(this._activeBuffer.x-2,V)}z-N>0&&(K.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<W&&z-N>0&&K.getWidth(this._activeBuffer.x)===0&&!K.hasContent(this._activeBuffer.x)&&K.setCellFromCodePoint(this._activeBuffer.x,0,1,j.fg,j.bg,j.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(w,N){return w.final!=="t"||w.prefix||w.intermediates?this._parser.registerCsiHandler(w,N):this._parser.registerCsiHandler(w,z=>!O(z.params[0],this._optionsService.rawOptions.windowOptions)||N(z))}registerDcsHandler(w,N){return this._parser.registerDcsHandler(w,new E.DcsHandler(N))}registerEscHandler(w,N){return this._parser.registerEscHandler(w,N)}registerOscHandler(w,N){return this._parser.registerOscHandler(w,new S.OscHandler(N))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var w;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((w=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||w===void 0)&&w.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const N=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);N.hasWidth(this._activeBuffer.x)&&!N.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const w=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-w),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(w=this._bufferService.cols-1){this._activeBuffer.x=Math.min(w,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(w,N){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=w,this._activeBuffer.y=this._activeBuffer.scrollTop+N):(this._activeBuffer.x=w,this._activeBuffer.y=N),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(w,N){this._restrictCursor(),this._setCursor(this._activeBuffer.x+w,this._activeBuffer.y+N)}cursorUp(w){const N=this._activeBuffer.y-this._activeBuffer.scrollTop;return N>=0?this._moveCursor(0,-Math.min(N,w.params[0]||1)):this._moveCursor(0,-(w.params[0]||1)),!0}cursorDown(w){const N=this._activeBuffer.scrollBottom-this._activeBuffer.y;return N>=0?this._moveCursor(0,Math.min(N,w.params[0]||1)):this._moveCursor(0,w.params[0]||1),!0}cursorForward(w){return this._moveCursor(w.params[0]||1,0),!0}cursorBackward(w){return this._moveCursor(-(w.params[0]||1),0),!0}cursorNextLine(w){return this.cursorDown(w),this._activeBuffer.x=0,!0}cursorPrecedingLine(w){return this.cursorUp(w),this._activeBuffer.x=0,!0}cursorCharAbsolute(w){return this._setCursor((w.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(w){return this._setCursor(w.length>=2?(w.params[1]||1)-1:0,(w.params[0]||1)-1),!0}charPosAbsolute(w){return this._setCursor((w.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(w){return this._moveCursor(w.params[0]||1,0),!0}linePosAbsolute(w){return this._setCursor(this._activeBuffer.x,(w.params[0]||1)-1),!0}vPositionRelative(w){return this._moveCursor(0,w.params[0]||1),!0}hVPosition(w){return this.cursorPosition(w),!0}tabClear(w){const N=w.params[0];return N===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:N===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(w){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let N=w.params[0]||1;for(;N--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(w){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let N=w.params[0]||1;for(;N--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(w){const N=w.params[0];return N===1&&(this._curAttrData.bg|=536870912),N!==2&&N!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(w,N,z,V=!1,Q=!1){const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+w);F.replaceCells(N,z,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),Q),V&&(F.isWrapped=!1)}_resetBufferLine(w,N=!1){const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+w);z&&(z.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),N),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+w),z.isWrapped=!1)}eraseInDisplay(w,N=!1){let z;switch(this._restrictCursor(this._bufferService.cols),w.params[0]){case 0:for(z=this._activeBuffer.y,this._dirtyRowTracker.markDirty(z),this._eraseInBufferLine(z++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,N);z<this._bufferService.rows;z++)this._resetBufferLine(z,N);this._dirtyRowTracker.markDirty(z);break;case 1:for(z=this._activeBuffer.y,this._dirtyRowTracker.markDirty(z),this._eraseInBufferLine(z,0,this._activeBuffer.x+1,!0,N),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(z+1).isWrapped=!1);z--;)this._resetBufferLine(z,N);this._dirtyRowTracker.markDirty(0);break;case 2:for(z=this._bufferService.rows,this._dirtyRowTracker.markDirty(z-1);z--;)this._resetBufferLine(z,N);this._dirtyRowTracker.markDirty(0);break;case 3:const V=this._activeBuffer.lines.length-this._bufferService.rows;V>0&&(this._activeBuffer.lines.trimStart(V),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-V,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-V,0),this._onScroll.fire(0))}return!0}eraseInLine(w,N=!1){switch(this._restrictCursor(this._bufferService.cols),w.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,N);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,N);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,N)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(w){this._restrictCursor();let N=w.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const z=this._activeBuffer.ybase+this._activeBuffer.y,V=this._bufferService.rows-1-this._activeBuffer.scrollBottom,Q=this._bufferService.rows-1+this._activeBuffer.ybase-V+1;for(;N--;)this._activeBuffer.lines.splice(Q-1,1),this._activeBuffer.lines.splice(z,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(w){this._restrictCursor();let N=w.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const z=this._activeBuffer.ybase+this._activeBuffer.y;let V;for(V=this._bufferService.rows-1-this._activeBuffer.scrollBottom,V=this._bufferService.rows-1+this._activeBuffer.ybase-V;N--;)this._activeBuffer.lines.splice(z,1),this._activeBuffer.lines.splice(V,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(w){this._restrictCursor();const N=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return N&&(N.insertCells(this._activeBuffer.x,w.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(w){this._restrictCursor();const N=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return N&&(N.deleteCells(this._activeBuffer.x,w.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(w){let N=w.params[0]||1;for(;N--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(w){let N=w.params[0]||1;for(;N--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(o.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(w){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const N=w.params[0]||1;for(let z=this._activeBuffer.scrollTop;z<=this._activeBuffer.scrollBottom;++z){const V=this._activeBuffer.lines.get(this._activeBuffer.ybase+z);V.deleteCells(0,N,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),V.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(w){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const N=w.params[0]||1;for(let z=this._activeBuffer.scrollTop;z<=this._activeBuffer.scrollBottom;++z){const V=this._activeBuffer.lines.get(this._activeBuffer.ybase+z);V.insertCells(0,N,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),V.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(w){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const N=w.params[0]||1;for(let z=this._activeBuffer.scrollTop;z<=this._activeBuffer.scrollBottom;++z){const V=this._activeBuffer.lines.get(this._activeBuffer.ybase+z);V.insertCells(this._activeBuffer.x,N,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),V.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(w){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const N=w.params[0]||1;for(let z=this._activeBuffer.scrollTop;z<=this._activeBuffer.scrollBottom;++z){const V=this._activeBuffer.lines.get(this._activeBuffer.ybase+z);V.deleteCells(this._activeBuffer.x,N,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),V.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(w){this._restrictCursor();const N=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return N&&(N.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(w.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(w){if(!this._parser.precedingCodepoint)return!0;const N=w.params[0]||1,z=new Uint32Array(N);for(let V=0;V<N;++V)z[V]=this._parser.precedingCodepoint;return this.print(z,0,z.length),!0}sendDeviceAttributesPrimary(w){return w.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(p.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(p.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(w){return w.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(p.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(p.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(w.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(p.C0.ESC+"[>83;40003;0c")),!0}_is(w){return(this._optionsService.rawOptions.termName+"").indexOf(w)===0}setMode(w){for(let N=0;N<w.length;N++)switch(w.params[N]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(w){for(let N=0;N<w.length;N++)switch(w.params[N]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,_.DEFAULT_CHARSET),this._charsetService.setgCharset(1,_.DEFAULT_CHARSET),this._charsetService.setgCharset(2,_.DEFAULT_CHARSET),this._charsetService.setgCharset(3,_.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(w){for(let N=0;N<w.length;N++)switch(w.params[N]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(w){for(let N=0;N<w.length;N++)switch(w.params[N]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),w.params[N]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(w,N){const z=this._coreService.decPrivateModes,{activeProtocol:V,activeEncoding:Q}=this._coreMouseService,F=this._coreService,{buffers:U,cols:W}=this._bufferService,{active:ce,alt:D}=U,j=this._optionsService.rawOptions,K=le=>le?1:2,ee=w.params[0];return ne=ee,te=N?ee===2?4:ee===4?K(F.modes.insertMode):ee===12?3:ee===20?K(j.convertEol):0:ee===1?K(z.applicationCursorKeys):ee===3?j.windowOptions.setWinLines?W===80?2:W===132?1:0:0:ee===6?K(z.origin):ee===7?K(z.wraparound):ee===8?3:ee===9?K(V==="X10"):ee===12?K(j.cursorBlink):ee===25?K(!F.isCursorHidden):ee===45?K(z.reverseWraparound):ee===66?K(z.applicationKeypad):ee===67?4:ee===1e3?K(V==="VT200"):ee===1002?K(V==="DRAG"):ee===1003?K(V==="ANY"):ee===1004?K(z.sendFocus):ee===1005?4:ee===1006?K(Q==="SGR"):ee===1015?4:ee===1016?K(Q==="SGR_PIXELS"):ee===1048?1:ee===47||ee===1047||ee===1049?K(ce===D):ee===2004?K(z.bracketedPasteMode):0,F.triggerDataEvent(`${p.C0.ESC}[${N?"":"?"}${ne};${te}$y`),!0;var ne,te}_updateAttrColor(w,N,z,V,Q){return N===2?(w|=50331648,w&=-16777216,w|=m.AttributeData.fromColorRGB([z,V,Q])):N===5&&(w&=-50331904,w|=33554432|255&z),w}_extractColor(w,N,z){const V=[0,0,-1,0,0,0];let Q=0,F=0;do{if(V[F+Q]=w.params[N+F],w.hasSubParams(N+F)){const U=w.getSubParams(N+F);let W=0;do V[1]===5&&(Q=1),V[F+W+1+Q]=U[W];while(++W<U.length&&W+F+1+Q<V.length);break}if(V[1]===5&&F+Q>=2||V[1]===2&&F+Q>=5)break;V[1]&&(Q=1)}while(++F+N<w.length&&F+Q<V.length);for(let U=2;U<V.length;++U)V[U]===-1&&(V[U]=0);switch(V[0]){case 38:z.fg=this._updateAttrColor(z.fg,V[1],V[3],V[4],V[5]);break;case 48:z.bg=this._updateAttrColor(z.bg,V[1],V[3],V[4],V[5]);break;case 58:z.extended=z.extended.clone(),z.extended.underlineColor=this._updateAttrColor(z.extended.underlineColor,V[1],V[3],V[4],V[5])}return F}_processUnderline(w,N){N.extended=N.extended.clone(),(!~w||w>5)&&(w=1),N.extended.underlineStyle=w,N.fg|=268435456,w===0&&(N.fg&=-268435457),N.updateExtended()}_processSGR0(w){w.fg=o.DEFAULT_ATTR_DATA.fg,w.bg=o.DEFAULT_ATTR_DATA.bg,w.extended=w.extended.clone(),w.extended.underlineStyle=0,w.extended.underlineColor&=-67108864,w.updateExtended()}charAttributes(w){if(w.length===1&&w.params[0]===0)return this._processSGR0(this._curAttrData),!0;const N=w.length;let z;const V=this._curAttrData;for(let Q=0;Q<N;Q++)z=w.params[Q],z>=30&&z<=37?(V.fg&=-50331904,V.fg|=16777216|z-30):z>=40&&z<=47?(V.bg&=-50331904,V.bg|=16777216|z-40):z>=90&&z<=97?(V.fg&=-50331904,V.fg|=16777224|z-90):z>=100&&z<=107?(V.bg&=-50331904,V.bg|=16777224|z-100):z===0?this._processSGR0(V):z===1?V.fg|=134217728:z===3?V.bg|=67108864:z===4?(V.fg|=268435456,this._processUnderline(w.hasSubParams(Q)?w.getSubParams(Q)[0]:1,V)):z===5?V.fg|=536870912:z===7?V.fg|=67108864:z===8?V.fg|=1073741824:z===9?V.fg|=2147483648:z===2?V.bg|=134217728:z===21?this._processUnderline(2,V):z===22?(V.fg&=-134217729,V.bg&=-134217729):z===23?V.bg&=-67108865:z===24?(V.fg&=-268435457,this._processUnderline(0,V)):z===25?V.fg&=-536870913:z===27?V.fg&=-67108865:z===28?V.fg&=-1073741825:z===29?V.fg&=2147483647:z===39?(V.fg&=-67108864,V.fg|=16777215&o.DEFAULT_ATTR_DATA.fg):z===49?(V.bg&=-67108864,V.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):z===38||z===48||z===58?Q+=this._extractColor(w,Q,V):z===53?V.bg|=1073741824:z===55?V.bg&=-1073741825:z===59?(V.extended=V.extended.clone(),V.extended.underlineColor=-1,V.updateExtended()):z===100?(V.fg&=-67108864,V.fg|=16777215&o.DEFAULT_ATTR_DATA.fg,V.bg&=-67108864,V.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",z);return!0}deviceStatus(w){switch(w.params[0]){case 5:this._coreService.triggerDataEvent(`${p.C0.ESC}[0n`);break;case 6:const N=this._activeBuffer.y+1,z=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${p.C0.ESC}[${N};${z}R`)}return!0}deviceStatusPrivate(w){if(w.params[0]===6){const N=this._activeBuffer.y+1,z=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${p.C0.ESC}[?${N};${z}R`)}return!0}softReset(w){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(w){const N=w.params[0]||1;switch(N){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const z=N%2==1;return this._optionsService.options.cursorBlink=z,!0}setScrollRegion(w){const N=w.params[0]||1;let z;return(w.length<2||(z=w.params[1])>this._bufferService.rows||z===0)&&(z=this._bufferService.rows),z>N&&(this._activeBuffer.scrollTop=N-1,this._activeBuffer.scrollBottom=z-1,this._setCursor(0,0)),!0}windowOptions(w){if(!O(w.params[0],this._optionsService.rawOptions.windowOptions))return!0;const N=w.length>1?w.params[1]:0;switch(w.params[0]){case 14:N!==2&&this._onRequestWindowsOptionsReport.fire(T.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(T.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${p.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:N!==0&&N!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),N!==0&&N!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:N!==0&&N!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),N!==0&&N!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(w){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(w){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(w){return this._windowTitle=w,this._onTitleChange.fire(w),!0}setIconName(w){return this._iconName=w,!0}setOrReportIndexedColor(w){const N=[],z=w.split(";");for(;z.length>1;){const V=z.shift(),Q=z.shift();if(/^\d+$/.exec(V)){const F=parseInt(V);if(L(F))if(Q==="?")N.push({type:0,index:F});else{const U=(0,y.parseColor)(Q);U&&N.push({type:1,index:F,color:U})}}}return N.length&&this._onColor.fire(N),!0}setHyperlink(w){const N=w.split(";");return!(N.length<2)&&(N[1]?this._createHyperlink(N[0],N[1]):!N[0]&&this._finishHyperlink())}_createHyperlink(w,N){this._getCurrentLinkId()&&this._finishHyperlink();const z=w.split(":");let V;const Q=z.findIndex(F=>F.startsWith("id="));return Q!==-1&&(V=z[Q].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:V,uri:N}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(w,N){const z=w.split(";");for(let V=0;V<z.length&&!(N>=this._specialColors.length);++V,++N)if(z[V]==="?")this._onColor.fire([{type:0,index:this._specialColors[N]}]);else{const Q=(0,y.parseColor)(z[V]);Q&&this._onColor.fire([{type:1,index:this._specialColors[N],color:Q}])}return!0}setOrReportFgColor(w){return this._setOrReportSpecialColor(w,0)}setOrReportBgColor(w){return this._setOrReportSpecialColor(w,1)}setOrReportCursorColor(w){return this._setOrReportSpecialColor(w,2)}restoreIndexedColor(w){if(!w)return this._onColor.fire([{type:2}]),!0;const N=[],z=w.split(";");for(let V=0;V<z.length;++V)if(/^\d+$/.exec(z[V])){const Q=parseInt(z[V]);L(Q)&&N.push({type:2,index:Q})}return N.length&&this._onColor.fire(N),!0}restoreFgColor(w){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(w){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(w){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,_.DEFAULT_CHARSET),!0}selectCharset(w){return w.length!==2?(this.selectDefaultCharset(),!0):(w[0]==="/"||this._charsetService.setgCharset(k[w[0]],_.CHARSETS[w[1]]||_.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const w=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,w,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(w){return this._charsetService.setgLevel(w),!0}screenAlignmentPattern(){const w=new c.CellData;w.content=4194373,w.fg=this._curAttrData.fg,w.bg=this._curAttrData.bg,this._setCursor(0,0);for(let N=0;N<this._bufferService.rows;++N){const z=this._activeBuffer.ybase+this._activeBuffer.y+N,V=this._activeBuffer.lines.get(z);V&&(V.fill(w),V.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(w,N){const z=this._bufferService.buffer,V=this._optionsService.rawOptions;return(Q=>(this._coreService.triggerDataEvent(`${p.C0.ESC}${Q}${p.C0.ESC}\\`),!0))(w==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:w==='"p'?'P1$r61;1"p':w==="r"?`P1$r${z.scrollTop+1};${z.scrollBottom+1}r`:w==="m"?"P1$r0m":w===" q"?`P1$r${{block:2,underline:4,bar:6}[V.cursorStyle]-(V.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(w,N){this._dirtyRowTracker.markRangeDirty(w,N)}}s.InputHandler=M;let P=class{constructor(H){this._bufferService=H,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(H){H<this.start?this.start=H:H>this.end&&(this.end=H)}markRangeDirty(H,w){H>w&&(I=H,H=w,w=I),H<this.start&&(this.start=H),w>this.end&&(this.end=w)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function L(H){return 0<=H&&H<256}P=f([g(0,$.IBufferService)],P)},844:(h,s)=>{function n(f){for(const g of f)g.dispose();f.length=0}Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.toDisposable=s.MutableDisposable=s.Disposable=void 0,s.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const f of this._disposables)f.dispose();this._disposables.length=0}register(f){return this._disposables.push(f),f}unregister(f){const g=this._disposables.indexOf(f);g!==-1&&this._disposables.splice(g,1)}},s.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(f){var g;this._isDisposed||f===this._value||((g=this._value)===null||g===void 0||g.dispose(),this._value=f)}clear(){this.value=void 0}dispose(){var f;this._isDisposed=!0,(f=this._value)===null||f===void 0||f.dispose(),this._value=void 0}},s.toDisposable=function(f){return{dispose:f}},s.disposeArray=n,s.getDisposeArrayDisposable=function(f){return{dispose:()=>n(f)}}},1505:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FourKeyMap=s.TwoKeyMap=void 0;class n{constructor(){this._data={}}set(g,p,_){this._data[g]||(this._data[g]={}),this._data[g][p]=_}get(g,p){return this._data[g]?this._data[g][p]:void 0}clear(){this._data={}}}s.TwoKeyMap=n,s.FourKeyMap=class{constructor(){this._data=new n}set(f,g,p,_,b){this._data.get(f,g)||this._data.set(f,g,new n),this._data.get(f,g).set(p,_,b)}get(f,g,p,_){var b;return(b=this._data.get(f,g))===null||b===void 0?void 0:b.get(p,_)}clear(){this._data.clear()}}},6114:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isChromeOS=s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.getSafariVersion=s.isSafari=s.isLegacyEdge=s.isFirefox=s.isNode=void 0,s.isNode=typeof navigator>"u";const n=s.isNode?"node":navigator.userAgent,f=s.isNode?"node":navigator.platform;s.isFirefox=n.includes("Firefox"),s.isLegacyEdge=n.includes("Edge"),s.isSafari=/^((?!chrome|android).)*safari/i.test(n),s.getSafariVersion=function(){if(!s.isSafari)return 0;const g=n.match(/Version\/(\d+)/);return g===null||g.length<2?0:parseInt(g[1])},s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(f),s.isIpad=f==="iPad",s.isIphone=f==="iPhone",s.isWindows=["Windows","Win16","Win32","WinCE"].includes(f),s.isLinux=f.indexOf("Linux")>=0,s.isChromeOS=/\bCrOS\b/.test(n)},6106:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SortedList=void 0;let n=0;s.SortedList=class{constructor(f){this._getKey=f,this._array=[]}clear(){this._array.length=0}insert(f){this._array.length!==0?(n=this._search(this._getKey(f)),this._array.splice(n,0,f)):this._array.push(f)}delete(f){if(this._array.length===0)return!1;const g=this._getKey(f);if(g===void 0||(n=this._search(g),n===-1)||this._getKey(this._array[n])!==g)return!1;do if(this._array[n]===f)return this._array.splice(n,1),!0;while(++n<this._array.length&&this._getKey(this._array[n])===g);return!1}*getKeyIterator(f){if(this._array.length!==0&&(n=this._search(f),!(n<0||n>=this._array.length)&&this._getKey(this._array[n])===f))do yield this._array[n];while(++n<this._array.length&&this._getKey(this._array[n])===f)}forEachByKey(f,g){if(this._array.length!==0&&(n=this._search(f),!(n<0||n>=this._array.length)&&this._getKey(this._array[n])===f))do g(this._array[n]);while(++n<this._array.length&&this._getKey(this._array[n])===f)}values(){return[...this._array].values()}_search(f){let g=0,p=this._array.length-1;for(;p>=g;){let _=g+p>>1;const b=this._getKey(this._array[_]);if(b>f)p=_-1;else{if(!(b<f)){for(;_>0&&this._getKey(this._array[_-1])===f;)_--;return _}g=_+1}}return g}}},7226:(h,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DebouncedIdleTask=s.IdleTaskQueue=s.PriorityTaskQueue=void 0;const f=n(6114);class g{constructor(){this._tasks=[],this._i=0}enqueue(b){this._tasks.push(b),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(b){this._idleCallback=void 0;let C=0,x=0,o=b.timeRemaining(),d=0;for(;this._i<this._tasks.length;){if(C=Date.now(),this._tasks[this._i]()||this._i++,C=Math.max(1,Date.now()-C),x=Math.max(C,x),d=b.timeRemaining(),1.5*x>d)return o-C<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(o-C))}ms`),void this._start();o=d}this.clear()}}class p extends g{_requestCallback(b){return setTimeout(()=>b(this._createDeadline(16)))}_cancelCallback(b){clearTimeout(b)}_createDeadline(b){const C=Date.now()+b;return{timeRemaining:()=>Math.max(0,C-Date.now())}}}s.PriorityTaskQueue=p,s.IdleTaskQueue=!f.isNode&&"requestIdleCallback"in window?class extends g{_requestCallback(_){return requestIdleCallback(_)}_cancelCallback(_){cancelIdleCallback(_)}}:p,s.DebouncedIdleTask=class{constructor(){this._queue=new s.IdleTaskQueue}set(_){this._queue.clear(),this._queue.enqueue(_)}flush(){this._queue.flush()}}},9282:(h,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.updateWindowsModeWrappedState=void 0;const f=n(643);s.updateWindowsModeWrappedState=function(g){const p=g.buffer.lines.get(g.buffer.ybase+g.buffer.y-1),_=p?.get(g.cols-1),b=g.buffer.lines.get(g.buffer.ybase+g.buffer.y);b&&_&&(b.isWrapped=_[f.CHAR_DATA_CODE_INDEX]!==f.NULL_CELL_CODE&&_[f.CHAR_DATA_CODE_INDEX]!==f.WHITESPACE_CELL_CODE)}},3734:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;class n{constructor(){this.fg=0,this.bg=0,this.extended=new f}static toColorRGB(p){return[p>>>16&255,p>>>8&255,255&p]}static fromColorRGB(p){return(255&p[0])<<16|(255&p[1])<<8|255&p[2]}clone(){const p=new n;return p.fg=this.fg,p.bg=this.bg,p.extended=this.extended.clone(),p}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}s.AttributeData=n;class f{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(p){this._ext=p}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(p){this._ext&=-469762049,this._ext|=p<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(p){this._ext&=-67108864,this._ext|=67108863&p}get urlId(){return this._urlId}set urlId(p){this._urlId=p}constructor(p=0,_=0){this._ext=0,this._urlId=0,this._ext=p,this._urlId=_}clone(){return new f(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}s.ExtendedAttrs=f},9092:(h,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Buffer=s.MAX_BUFFER_SIZE=void 0;const f=n(6349),g=n(7226),p=n(3734),_=n(8437),b=n(4634),C=n(511),x=n(643),o=n(4863),d=n(7116);s.MAX_BUFFER_SIZE=4294967295,s.Buffer=class{constructor(a,c,m){this._hasScrollback=a,this._optionsService=c,this._bufferService=m,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=_.DEFAULT_ATTR_DATA.clone(),this.savedCharset=d.DEFAULT_CHARSET,this.markers=[],this._nullCell=C.CellData.fromCharData([0,x.NULL_CELL_CHAR,x.NULL_CELL_WIDTH,x.NULL_CELL_CODE]),this._whitespaceCell=C.CellData.fromCharData([0,x.WHITESPACE_CELL_CHAR,x.WHITESPACE_CELL_WIDTH,x.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new g.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(a){return a?(this._nullCell.fg=a.fg,this._nullCell.bg=a.bg,this._nullCell.extended=a.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new p.ExtendedAttrs),this._nullCell}getWhitespaceCell(a){return a?(this._whitespaceCell.fg=a.fg,this._whitespaceCell.bg=a.bg,this._whitespaceCell.extended=a.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new p.ExtendedAttrs),this._whitespaceCell}getBlankLine(a,c){return new _.BufferLine(this._bufferService.cols,this.getNullCell(a),c)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const a=this.ybase+this.y-this.ydisp;return a>=0&&a<this._rows}_getCorrectBufferLength(a){if(!this._hasScrollback)return a;const c=a+this._optionsService.rawOptions.scrollback;return c>s.MAX_BUFFER_SIZE?s.MAX_BUFFER_SIZE:c}fillViewportRows(a){if(this.lines.length===0){a===void 0&&(a=_.DEFAULT_ATTR_DATA);let c=this._rows;for(;c--;)this.lines.push(this.getBlankLine(a))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(a,c){const m=this.getNullCell(_.DEFAULT_ATTR_DATA);let $=0;const S=this._getCorrectBufferLength(c);if(S>this.lines.maxLength&&(this.lines.maxLength=S),this.lines.length>0){if(this._cols<a)for(let y=0;y<this.lines.length;y++)$+=+this.lines.get(y).resize(a,m);let E=0;if(this._rows<c)for(let y=this._rows;y<c;y++)this.lines.length<c+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new _.BufferLine(a,m)):this.ybase>0&&this.lines.length<=this.ybase+this.y+E+1?(this.ybase--,E++,this.ydisp>0&&this.ydisp--):this.lines.push(new _.BufferLine(a,m)));else for(let y=this._rows;y>c;y--)this.lines.length>c+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(S<this.lines.maxLength){const y=this.lines.length-S;y>0&&(this.lines.trimStart(y),this.ybase=Math.max(this.ybase-y,0),this.ydisp=Math.max(this.ydisp-y,0),this.savedY=Math.max(this.savedY-y,0)),this.lines.maxLength=S}this.x=Math.min(this.x,a-1),this.y=Math.min(this.y,c-1),E&&(this.y+=E),this.savedX=Math.min(this.savedX,a-1),this.scrollTop=0}if(this.scrollBottom=c-1,this._isReflowEnabled&&(this._reflow(a,c),this._cols>a))for(let E=0;E<this.lines.length;E++)$+=+this.lines.get(E).resize(a,m);this._cols=a,this._rows=c,this._memoryCleanupQueue.clear(),$>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let a=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,a=!1);let c=0;for(;this._memoryCleanupPosition<this.lines.length;)if(c+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),c>100)return!0;return a}get _isReflowEnabled(){const a=this._optionsService.rawOptions.windowsPty;return a&&a.buildNumber?this._hasScrollback&&a.backend==="conpty"&&a.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(a,c){this._cols!==a&&(a>this._cols?this._reflowLarger(a,c):this._reflowSmaller(a,c))}_reflowLarger(a,c){const m=(0,b.reflowLargerGetLinesToRemove)(this.lines,this._cols,a,this.ybase+this.y,this.getNullCell(_.DEFAULT_ATTR_DATA));if(m.length>0){const $=(0,b.reflowLargerCreateNewLayout)(this.lines,m);(0,b.reflowLargerApplyNewLayout)(this.lines,$.layout),this._reflowLargerAdjustViewport(a,c,$.countRemoved)}}_reflowLargerAdjustViewport(a,c,m){const $=this.getNullCell(_.DEFAULT_ATTR_DATA);let S=m;for(;S-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<c&&this.lines.push(new _.BufferLine(a,$))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-m,0)}_reflowSmaller(a,c){const m=this.getNullCell(_.DEFAULT_ATTR_DATA),$=[];let S=0;for(let E=this.lines.length-1;E>=0;E--){let y=this.lines.get(E);if(!y||!y.isWrapped&&y.getTrimmedLength()<=a)continue;const k=[y];for(;y.isWrapped&&E>0;)y=this.lines.get(--E),k.unshift(y);const B=this.ybase+this.y;if(B>=E&&B<E+k.length)continue;const O=k[k.length-1].getTrimmedLength(),T=(0,b.reflowSmallerGetNewLineLengths)(k,this._cols,a),I=T.length-k.length;let M;M=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+I):Math.max(0,this.lines.length-this.lines.maxLength+I);const P=[];for(let V=0;V<I;V++){const Q=this.getBlankLine(_.DEFAULT_ATTR_DATA,!0);P.push(Q)}P.length>0&&($.push({start:E+k.length+S,newLines:P}),S+=P.length),k.push(...P);let L=T.length-1,H=T[L];H===0&&(L--,H=T[L]);let w=k.length-I-1,N=O;for(;w>=0;){const V=Math.min(N,H);if(k[L]===void 0)break;if(k[L].copyCellsFrom(k[w],N-V,H-V,V,!0),H-=V,H===0&&(L--,H=T[L]),N-=V,N===0){w--;const Q=Math.max(w,0);N=(0,b.getWrappedLineTrimmedLength)(k,Q,this._cols)}}for(let V=0;V<k.length;V++)T[V]<a&&k[V].setCell(T[V],m);let z=I-M;for(;z-- >0;)this.ybase===0?this.y<c-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+S)-c&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+I,this.ybase+c-1)}if($.length>0){const E=[],y=[];for(let L=0;L<this.lines.length;L++)y.push(this.lines.get(L));const k=this.lines.length;let B=k-1,O=0,T=$[O];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+S);let I=0;for(let L=Math.min(this.lines.maxLength-1,k+S-1);L>=0;L--)if(T&&T.start>B+I){for(let H=T.newLines.length-1;H>=0;H--)this.lines.set(L--,T.newLines[H]);L++,E.push({index:B+1,amount:T.newLines.length}),I+=T.newLines.length,T=$[++O]}else this.lines.set(L,y[B--]);let M=0;for(let L=E.length-1;L>=0;L--)E[L].index+=M,this.lines.onInsertEmitter.fire(E[L]),M+=E[L].amount;const P=Math.max(0,k+S-this.lines.maxLength);P>0&&this.lines.onTrimEmitter.fire(P)}}translateBufferLineToString(a,c,m=0,$){const S=this.lines.get(a);return S?S.translateToString(c,m,$):""}getWrappedRangeForLine(a){let c=a,m=a;for(;c>0&&this.lines.get(c).isWrapped;)c--;for(;m+1<this.lines.length&&this.lines.get(m+1).isWrapped;)m++;return{first:c,last:m}}setupTabStops(a){for(a!=null?this.tabs[a]||(a=this.prevStop(a)):(this.tabs={},a=0);a<this._cols;a+=this._optionsService.rawOptions.tabStopWidth)this.tabs[a]=!0}prevStop(a){for(a==null&&(a=this.x);!this.tabs[--a]&&a>0;);return a>=this._cols?this._cols-1:a<0?0:a}nextStop(a){for(a==null&&(a=this.x);!this.tabs[++a]&&a<this._cols;);return a>=this._cols?this._cols-1:a<0?0:a}clearMarkers(a){this._isClearing=!0;for(let c=0;c<this.markers.length;c++)this.markers[c].line===a&&(this.markers[c].dispose(),this.markers.splice(c--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let a=0;a<this.markers.length;a++)this.markers[a].dispose(),this.markers.splice(a--,1);this._isClearing=!1}addMarker(a){const c=new o.Marker(a);return this.markers.push(c),c.register(this.lines.onTrim(m=>{c.line-=m,c.line<0&&c.dispose()})),c.register(this.lines.onInsert(m=>{c.line>=m.index&&(c.line+=m.amount)})),c.register(this.lines.onDelete(m=>{c.line>=m.index&&c.line<m.index+m.amount&&c.dispose(),c.line>m.index&&(c.line-=m.amount)})),c.register(c.onDispose(()=>this._removeMarker(c))),c}_removeMarker(a){this._isClearing||this.markers.splice(this.markers.indexOf(a),1)}}},8437:(h,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLine=s.DEFAULT_ATTR_DATA=void 0;const f=n(3734),g=n(511),p=n(643),_=n(482);s.DEFAULT_ATTR_DATA=Object.freeze(new f.AttributeData);let b=0;class C{constructor(o,d,a=!1){this.isWrapped=a,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*o);const c=d||g.CellData.fromCharData([0,p.NULL_CELL_CHAR,p.NULL_CELL_WIDTH,p.NULL_CELL_CODE]);for(let m=0;m<o;++m)this.setCell(m,c);this.length=o}get(o){const d=this._data[3*o+0],a=2097151&d;return[this._data[3*o+1],2097152&d?this._combined[o]:a?(0,_.stringFromCodePoint)(a):"",d>>22,2097152&d?this._combined[o].charCodeAt(this._combined[o].length-1):a]}set(o,d){this._data[3*o+1]=d[p.CHAR_DATA_ATTR_INDEX],d[p.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[o]=d[1],this._data[3*o+0]=2097152|o|d[p.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*o+0]=d[p.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|d[p.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(o){return this._data[3*o+0]>>22}hasWidth(o){return 12582912&this._data[3*o+0]}getFg(o){return this._data[3*o+1]}getBg(o){return this._data[3*o+2]}hasContent(o){return 4194303&this._data[3*o+0]}getCodePoint(o){const d=this._data[3*o+0];return 2097152&d?this._combined[o].charCodeAt(this._combined[o].length-1):2097151&d}isCombined(o){return 2097152&this._data[3*o+0]}getString(o){const d=this._data[3*o+0];return 2097152&d?this._combined[o]:2097151&d?(0,_.stringFromCodePoint)(2097151&d):""}isProtected(o){return 536870912&this._data[3*o+2]}loadCell(o,d){return b=3*o,d.content=this._data[b+0],d.fg=this._data[b+1],d.bg=this._data[b+2],2097152&d.content&&(d.combinedData=this._combined[o]),268435456&d.bg&&(d.extended=this._extendedAttrs[o]),d}setCell(o,d){2097152&d.content&&(this._combined[o]=d.combinedData),268435456&d.bg&&(this._extendedAttrs[o]=d.extended),this._data[3*o+0]=d.content,this._data[3*o+1]=d.fg,this._data[3*o+2]=d.bg}setCellFromCodePoint(o,d,a,c,m,$){268435456&m&&(this._extendedAttrs[o]=$),this._data[3*o+0]=d|a<<22,this._data[3*o+1]=c,this._data[3*o+2]=m}addCodepointToCell(o,d){let a=this._data[3*o+0];2097152&a?this._combined[o]+=(0,_.stringFromCodePoint)(d):(2097151&a?(this._combined[o]=(0,_.stringFromCodePoint)(2097151&a)+(0,_.stringFromCodePoint)(d),a&=-2097152,a|=2097152):a=d|4194304,this._data[3*o+0]=a)}insertCells(o,d,a,c){if((o%=this.length)&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,c?.fg||0,c?.bg||0,c?.extended||new f.ExtendedAttrs),d<this.length-o){const m=new g.CellData;for(let $=this.length-o-d-1;$>=0;--$)this.setCell(o+d+$,this.loadCell(o+$,m));for(let $=0;$<d;++$)this.setCell(o+$,a)}else for(let m=o;m<this.length;++m)this.setCell(m,a);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,c?.fg||0,c?.bg||0,c?.extended||new f.ExtendedAttrs)}deleteCells(o,d,a,c){if(o%=this.length,d<this.length-o){const m=new g.CellData;for(let $=0;$<this.length-o-d;++$)this.setCell(o+$,this.loadCell(o+d+$,m));for(let $=this.length-d;$<this.length;++$)this.setCell($,a)}else for(let m=o;m<this.length;++m)this.setCell(m,a);o&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,c?.fg||0,c?.bg||0,c?.extended||new f.ExtendedAttrs),this.getWidth(o)!==0||this.hasContent(o)||this.setCellFromCodePoint(o,0,1,c?.fg||0,c?.bg||0,c?.extended||new f.ExtendedAttrs)}replaceCells(o,d,a,c,m=!1){if(m)for(o&&this.getWidth(o-1)===2&&!this.isProtected(o-1)&&this.setCellFromCodePoint(o-1,0,1,c?.fg||0,c?.bg||0,c?.extended||new f.ExtendedAttrs),d<this.length&&this.getWidth(d-1)===2&&!this.isProtected(d)&&this.setCellFromCodePoint(d,0,1,c?.fg||0,c?.bg||0,c?.extended||new f.ExtendedAttrs);o<d&&o<this.length;)this.isProtected(o)||this.setCell(o,a),o++;else for(o&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,c?.fg||0,c?.bg||0,c?.extended||new f.ExtendedAttrs),d<this.length&&this.getWidth(d-1)===2&&this.setCellFromCodePoint(d,0,1,c?.fg||0,c?.bg||0,c?.extended||new f.ExtendedAttrs);o<d&&o<this.length;)this.setCell(o++,a)}resize(o,d){if(o===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const a=3*o;if(o>this.length){if(this._data.buffer.byteLength>=4*a)this._data=new Uint32Array(this._data.buffer,0,a);else{const c=new Uint32Array(a);c.set(this._data),this._data=c}for(let c=this.length;c<o;++c)this.setCell(c,d)}else{this._data=this._data.subarray(0,a);const c=Object.keys(this._combined);for(let $=0;$<c.length;$++){const S=parseInt(c[$],10);S>=o&&delete this._combined[S]}const m=Object.keys(this._extendedAttrs);for(let $=0;$<m.length;$++){const S=parseInt(m[$],10);S>=o&&delete this._extendedAttrs[S]}}return this.length=o,4*a*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const o=new Uint32Array(this._data.length);return o.set(this._data),this._data=o,1}return 0}fill(o,d=!1){if(d)for(let a=0;a<this.length;++a)this.isProtected(a)||this.setCell(a,o);else{this._combined={},this._extendedAttrs={};for(let a=0;a<this.length;++a)this.setCell(a,o)}}copyFrom(o){this.length!==o.length?this._data=new Uint32Array(o._data):this._data.set(o._data),this.length=o.length,this._combined={};for(const d in o._combined)this._combined[d]=o._combined[d];this._extendedAttrs={};for(const d in o._extendedAttrs)this._extendedAttrs[d]=o._extendedAttrs[d];this.isWrapped=o.isWrapped}clone(){const o=new C(0);o._data=new Uint32Array(this._data),o.length=this.length;for(const d in this._combined)o._combined[d]=this._combined[d];for(const d in this._extendedAttrs)o._extendedAttrs[d]=this._extendedAttrs[d];return o.isWrapped=this.isWrapped,o}getTrimmedLength(){for(let o=this.length-1;o>=0;--o)if(4194303&this._data[3*o+0])return o+(this._data[3*o+0]>>22);return 0}getNoBgTrimmedLength(){for(let o=this.length-1;o>=0;--o)if(4194303&this._data[3*o+0]||50331648&this._data[3*o+2])return o+(this._data[3*o+0]>>22);return 0}copyCellsFrom(o,d,a,c,m){const $=o._data;if(m)for(let E=c-1;E>=0;E--){for(let y=0;y<3;y++)this._data[3*(a+E)+y]=$[3*(d+E)+y];268435456&$[3*(d+E)+2]&&(this._extendedAttrs[a+E]=o._extendedAttrs[d+E])}else for(let E=0;E<c;E++){for(let y=0;y<3;y++)this._data[3*(a+E)+y]=$[3*(d+E)+y];268435456&$[3*(d+E)+2]&&(this._extendedAttrs[a+E]=o._extendedAttrs[d+E])}const S=Object.keys(o._combined);for(let E=0;E<S.length;E++){const y=parseInt(S[E],10);y>=d&&(this._combined[y-d+a]=o._combined[y])}}translateToString(o=!1,d=0,a=this.length){o&&(a=Math.min(a,this.getTrimmedLength()));let c="";for(;d<a;){const m=this._data[3*d+0],$=2097151&m;c+=2097152&m?this._combined[d]:$?(0,_.stringFromCodePoint)($):p.WHITESPACE_CELL_CHAR,d+=m>>22||1}return c}}s.BufferLine=C},4841:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getRangeLength=void 0,s.getRangeLength=function(n,f){if(n.start.y>n.end.y)throw new Error(`Buffer range end (${n.end.x}, ${n.end.y}) cannot be before start (${n.start.x}, ${n.start.y})`);return f*(n.end.y-n.start.y)+(n.end.x-n.start.x+1)}},4634:(h,s)=>{function n(f,g,p){if(g===f.length-1)return f[g].getTrimmedLength();const _=!f[g].hasContent(p-1)&&f[g].getWidth(p-1)===1,b=f[g+1].getWidth(0)===2;return _&&b?p-1:p}Object.defineProperty(s,"__esModule",{value:!0}),s.getWrappedLineTrimmedLength=s.reflowSmallerGetNewLineLengths=s.reflowLargerApplyNewLayout=s.reflowLargerCreateNewLayout=s.reflowLargerGetLinesToRemove=void 0,s.reflowLargerGetLinesToRemove=function(f,g,p,_,b){const C=[];for(let x=0;x<f.length-1;x++){let o=x,d=f.get(++o);if(!d.isWrapped)continue;const a=[f.get(x)];for(;o<f.length&&d.isWrapped;)a.push(d),d=f.get(++o);if(_>=x&&_<o){x+=a.length-1;continue}let c=0,m=n(a,c,g),$=1,S=0;for(;$<a.length;){const y=n(a,$,g),k=y-S,B=p-m,O=Math.min(k,B);a[c].copyCellsFrom(a[$],S,m,O,!1),m+=O,m===p&&(c++,m=0),S+=O,S===y&&($++,S=0),m===0&&c!==0&&a[c-1].getWidth(p-1)===2&&(a[c].copyCellsFrom(a[c-1],p-1,m++,1,!1),a[c-1].setCell(p-1,b))}a[c].replaceCells(m,p,b);let E=0;for(let y=a.length-1;y>0&&(y>c||a[y].getTrimmedLength()===0);y--)E++;E>0&&(C.push(x+a.length-E),C.push(E)),x+=a.length-1}return C},s.reflowLargerCreateNewLayout=function(f,g){const p=[];let _=0,b=g[_],C=0;for(let x=0;x<f.length;x++)if(b===x){const o=g[++_];f.onDeleteEmitter.fire({index:x-C,amount:o}),x+=o-1,C+=o,b=g[++_]}else p.push(x);return{layout:p,countRemoved:C}},s.reflowLargerApplyNewLayout=function(f,g){const p=[];for(let _=0;_<g.length;_++)p.push(f.get(g[_]));for(let _=0;_<p.length;_++)f.set(_,p[_]);f.length=g.length},s.reflowSmallerGetNewLineLengths=function(f,g,p){const _=[],b=f.map((d,a)=>n(f,a,g)).reduce((d,a)=>d+a);let C=0,x=0,o=0;for(;o<b;){if(b-o<p){_.push(b-o);break}C+=p;const d=n(f,x,g);C>d&&(C-=d,x++);const a=f[x].getWidth(C-1)===2;a&&C--;const c=a?p-1:p;_.push(c),o+=c}return _},s.getWrappedLineTrimmedLength=n},5295:(h,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferSet=void 0;const f=n(8460),g=n(844),p=n(9092);class _ extends g.Disposable{constructor(C,x){super(),this._optionsService=C,this._bufferService=x,this._onBufferActivate=this.register(new f.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new p.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new p.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(C){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(C),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(C,x){this._normal.resize(C,x),this._alt.resize(C,x),this.setupTabStops(C)}setupTabStops(C){this._normal.setupTabStops(C),this._alt.setupTabStops(C)}}s.BufferSet=_},511:(h,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;const f=n(482),g=n(643),p=n(3734);class _ extends p.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new p.ExtendedAttrs,this.combinedData=""}static fromCharData(C){const x=new _;return x.setFromCharData(C),x}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(C){this.fg=C[g.CHAR_DATA_ATTR_INDEX],this.bg=0;let x=!1;if(C[g.CHAR_DATA_CHAR_INDEX].length>2)x=!0;else if(C[g.CHAR_DATA_CHAR_INDEX].length===2){const o=C[g.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=o&&o<=56319){const d=C[g.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=d&&d<=57343?this.content=1024*(o-55296)+d-56320+65536|C[g.CHAR_DATA_WIDTH_INDEX]<<22:x=!0}else x=!0}else this.content=C[g.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|C[g.CHAR_DATA_WIDTH_INDEX]<<22;x&&(this.combinedData=C[g.CHAR_DATA_CHAR_INDEX],this.content=2097152|C[g.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.CellData=_},643:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_EXT=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=0,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.DEFAULT_EXT=0,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},4863:(h,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Marker=void 0;const f=n(8460),g=n(844);class p{get id(){return this._id}constructor(b){this.line=b,this.isDisposed=!1,this._disposables=[],this._id=p._nextId++,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,g.disposeArray)(this._disposables),this._disposables.length=0)}register(b){return this._disposables.push(b),b}}s.Marker=p,p._nextId=1},7116:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DEFAULT_CHARSET=s.CHARSETS=void 0,s.CHARSETS={},s.DEFAULT_CHARSET=s.CHARSETS.B,s.CHARSETS[0]={"`":"â—†",a:"â–’",b:"â‰",c:"âŒ",d:"â",e:"âŠ",f:"Â°",g:"Â±",h:"â¤",i:"â‹",j:"â”˜",k:"â”",l:"â”Œ",m:"â””",n:"â”¼",o:"âŽº",p:"âŽ»",q:"â”€",r:"âŽ¼",s:"âŽ½",t:"â”œ",u:"â”¤",v:"â”´",w:"â”¬",x:"â”‚",y:"â‰¤",z:"â‰¥","{":"Ï€","|":"â‰ ","}":"Â£","~":"Â·"},s.CHARSETS.A={"#":"Â£"},s.CHARSETS.B=void 0,s.CHARSETS[4]={"#":"Â£","@":"Â¾","[":"ij","\\":"Â½","]":"|","{":"Â¨","|":"f","}":"Â¼","~":"Â´"},s.CHARSETS.C=s.CHARSETS[5]={"[":"Ã„","\\":"Ã–","]":"Ã…","^":"Ãœ","`":"Ã©","{":"Ã¤","|":"Ã¶","}":"Ã¥","~":"Ã¼"},s.CHARSETS.R={"#":"Â£","@":"Ã ","[":"Â°","\\":"Ã§","]":"Â§","{":"Ã©","|":"Ã¹","}":"Ã¨","~":"Â¨"},s.CHARSETS.Q={"@":"Ã ","[":"Ã¢","\\":"Ã§","]":"Ãª","^":"Ã®","`":"Ã´","{":"Ã©","|":"Ã¹","}":"Ã¨","~":"Ã»"},s.CHARSETS.K={"@":"Â§","[":"Ã„","\\":"Ã–","]":"Ãœ","{":"Ã¤","|":"Ã¶","}":"Ã¼","~":"ÃŸ"},s.CHARSETS.Y={"#":"Â£","@":"Â§","[":"Â°","\\":"Ã§","]":"Ã©","`":"Ã¹","{":"Ã ","|":"Ã²","}":"Ã¨","~":"Ã¬"},s.CHARSETS.E=s.CHARSETS[6]={"@":"Ã„","[":"Ã†","\\":"Ã˜","]":"Ã…","^":"Ãœ","`":"Ã¤","{":"Ã¦","|":"Ã¸","}":"Ã¥","~":"Ã¼"},s.CHARSETS.Z={"#":"Â£","@":"Â§","[":"Â¡","\\":"Ã‘","]":"Â¿","{":"Â°","|":"Ã±","}":"Ã§"},s.CHARSETS.H=s.CHARSETS[7]={"@":"Ã‰","[":"Ã„","\\":"Ã–","]":"Ã…","^":"Ãœ","`":"Ã©","{":"Ã¤","|":"Ã¶","}":"Ã¥","~":"Ã¼"},s.CHARSETS["="]={"#":"Ã¹","@":"Ã ","[":"Ã©","\\":"Ã§","]":"Ãª","^":"Ã®",_:"Ã¨","`":"Ã´","{":"Ã¤","|":"Ã¶","}":"Ã¼","~":"Ã»"}},2584:(h,s)=>{var n,f,g;Object.defineProperty(s,"__esModule",{value:!0}),s.C1_ESCAPED=s.C1=s.C0=void 0,function(p){p.NUL="\0",p.SOH="",p.STX="",p.ETX="",p.EOT="",p.ENQ="",p.ACK="",p.BEL="\x07",p.BS="\b",p.HT="	",p.LF=`
`,p.VT="\v",p.FF="\f",p.CR="\r",p.SO="",p.SI="",p.DLE="",p.DC1="",p.DC2="",p.DC3="",p.DC4="",p.NAK="",p.SYN="",p.ETB="",p.CAN="",p.EM="",p.SUB="",p.ESC="\x1B",p.FS="",p.GS="",p.RS="",p.US="",p.SP=" ",p.DEL=""}(n||(s.C0=n={})),function(p){p.PAD="Â€",p.HOP="Â",p.BPH="Â‚",p.NBH="Âƒ",p.IND="Â„",p.NEL="Â…",p.SSA="Â†",p.ESA="Â‡",p.HTS="Âˆ",p.HTJ="Â‰",p.VTS="ÂŠ",p.PLD="Â‹",p.PLU="ÂŒ",p.RI="Â",p.SS2="ÂŽ",p.SS3="Â",p.DCS="Â",p.PU1="Â‘",p.PU2="Â’",p.STS="Â“",p.CCH="Â”",p.MW="Â•",p.SPA="Â–",p.EPA="Â—",p.SOS="Â˜",p.SGCI="Â™",p.SCI="Âš",p.CSI="Â›",p.ST="Âœ",p.OSC="Â",p.PM="Âž",p.APC="ÂŸ"}(f||(s.C1=f={})),function(p){p.ST=`${n.ESC}\\`}(g||(s.C1_ESCAPED=g={}))},7399:(h,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.evaluateKeyboardEvent=void 0;const f=n(2584),g={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};s.evaluateKeyboardEvent=function(p,_,b,C){const x={type:0,cancel:!1,key:void 0},o=(p.shiftKey?1:0)|(p.altKey?2:0)|(p.ctrlKey?4:0)|(p.metaKey?8:0);switch(p.keyCode){case 0:p.key==="UIKeyInputUpArrow"?x.key=_?f.C0.ESC+"OA":f.C0.ESC+"[A":p.key==="UIKeyInputLeftArrow"?x.key=_?f.C0.ESC+"OD":f.C0.ESC+"[D":p.key==="UIKeyInputRightArrow"?x.key=_?f.C0.ESC+"OC":f.C0.ESC+"[C":p.key==="UIKeyInputDownArrow"&&(x.key=_?f.C0.ESC+"OB":f.C0.ESC+"[B");break;case 8:if(p.altKey){x.key=f.C0.ESC+f.C0.DEL;break}x.key=f.C0.DEL;break;case 9:if(p.shiftKey){x.key=f.C0.ESC+"[Z";break}x.key=f.C0.HT,x.cancel=!0;break;case 13:x.key=p.altKey?f.C0.ESC+f.C0.CR:f.C0.CR,x.cancel=!0;break;case 27:x.key=f.C0.ESC,p.altKey&&(x.key=f.C0.ESC+f.C0.ESC),x.cancel=!0;break;case 37:if(p.metaKey)break;o?(x.key=f.C0.ESC+"[1;"+(o+1)+"D",x.key===f.C0.ESC+"[1;3D"&&(x.key=f.C0.ESC+(b?"b":"[1;5D"))):x.key=_?f.C0.ESC+"OD":f.C0.ESC+"[D";break;case 39:if(p.metaKey)break;o?(x.key=f.C0.ESC+"[1;"+(o+1)+"C",x.key===f.C0.ESC+"[1;3C"&&(x.key=f.C0.ESC+(b?"f":"[1;5C"))):x.key=_?f.C0.ESC+"OC":f.C0.ESC+"[C";break;case 38:if(p.metaKey)break;o?(x.key=f.C0.ESC+"[1;"+(o+1)+"A",b||x.key!==f.C0.ESC+"[1;3A"||(x.key=f.C0.ESC+"[1;5A")):x.key=_?f.C0.ESC+"OA":f.C0.ESC+"[A";break;case 40:if(p.metaKey)break;o?(x.key=f.C0.ESC+"[1;"+(o+1)+"B",b||x.key!==f.C0.ESC+"[1;3B"||(x.key=f.C0.ESC+"[1;5B")):x.key=_?f.C0.ESC+"OB":f.C0.ESC+"[B";break;case 45:p.shiftKey||p.ctrlKey||(x.key=f.C0.ESC+"[2~");break;case 46:x.key=o?f.C0.ESC+"[3;"+(o+1)+"~":f.C0.ESC+"[3~";break;case 36:x.key=o?f.C0.ESC+"[1;"+(o+1)+"H":_?f.C0.ESC+"OH":f.C0.ESC+"[H";break;case 35:x.key=o?f.C0.ESC+"[1;"+(o+1)+"F":_?f.C0.ESC+"OF":f.C0.ESC+"[F";break;case 33:p.shiftKey?x.type=2:p.ctrlKey?x.key=f.C0.ESC+"[5;"+(o+1)+"~":x.key=f.C0.ESC+"[5~";break;case 34:p.shiftKey?x.type=3:p.ctrlKey?x.key=f.C0.ESC+"[6;"+(o+1)+"~":x.key=f.C0.ESC+"[6~";break;case 112:x.key=o?f.C0.ESC+"[1;"+(o+1)+"P":f.C0.ESC+"OP";break;case 113:x.key=o?f.C0.ESC+"[1;"+(o+1)+"Q":f.C0.ESC+"OQ";break;case 114:x.key=o?f.C0.ESC+"[1;"+(o+1)+"R":f.C0.ESC+"OR";break;case 115:x.key=o?f.C0.ESC+"[1;"+(o+1)+"S":f.C0.ESC+"OS";break;case 116:x.key=o?f.C0.ESC+"[15;"+(o+1)+"~":f.C0.ESC+"[15~";break;case 117:x.key=o?f.C0.ESC+"[17;"+(o+1)+"~":f.C0.ESC+"[17~";break;case 118:x.key=o?f.C0.ESC+"[18;"+(o+1)+"~":f.C0.ESC+"[18~";break;case 119:x.key=o?f.C0.ESC+"[19;"+(o+1)+"~":f.C0.ESC+"[19~";break;case 120:x.key=o?f.C0.ESC+"[20;"+(o+1)+"~":f.C0.ESC+"[20~";break;case 121:x.key=o?f.C0.ESC+"[21;"+(o+1)+"~":f.C0.ESC+"[21~";break;case 122:x.key=o?f.C0.ESC+"[23;"+(o+1)+"~":f.C0.ESC+"[23~";break;case 123:x.key=o?f.C0.ESC+"[24;"+(o+1)+"~":f.C0.ESC+"[24~";break;default:if(!p.ctrlKey||p.shiftKey||p.altKey||p.metaKey)if(b&&!C||!p.altKey||p.metaKey)!b||p.altKey||p.ctrlKey||p.shiftKey||!p.metaKey?p.key&&!p.ctrlKey&&!p.altKey&&!p.metaKey&&p.keyCode>=48&&p.key.length===1?x.key=p.key:p.key&&p.ctrlKey&&(p.key==="_"&&(x.key=f.C0.US),p.key==="@"&&(x.key=f.C0.NUL)):p.keyCode===65&&(x.type=1);else{const d=g[p.keyCode],a=d?.[p.shiftKey?1:0];if(a)x.key=f.C0.ESC+a;else if(p.keyCode>=65&&p.keyCode<=90){const c=p.ctrlKey?p.keyCode-64:p.keyCode+32;let m=String.fromCharCode(c);p.shiftKey&&(m=m.toUpperCase()),x.key=f.C0.ESC+m}else if(p.keyCode===32)x.key=f.C0.ESC+(p.ctrlKey?f.C0.NUL:" ");else if(p.key==="Dead"&&p.code.startsWith("Key")){let c=p.code.slice(3,4);p.shiftKey||(c=c.toLowerCase()),x.key=f.C0.ESC+c,x.cancel=!0}}else p.keyCode>=65&&p.keyCode<=90?x.key=String.fromCharCode(p.keyCode-64):p.keyCode===32?x.key=f.C0.NUL:p.keyCode>=51&&p.keyCode<=55?x.key=String.fromCharCode(p.keyCode-51+27):p.keyCode===56?x.key=f.C0.DEL:p.keyCode===219?x.key=f.C0.ESC:p.keyCode===220?x.key=f.C0.FS:p.keyCode===221&&(x.key=f.C0.GS)}return x}},482:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(n){return n>65535?(n-=65536,String.fromCharCode(55296+(n>>10))+String.fromCharCode(n%1024+56320)):String.fromCharCode(n)},s.utf32ToString=function(n,f=0,g=n.length){let p="";for(let _=f;_<g;++_){let b=n[_];b>65535?(b-=65536,p+=String.fromCharCode(55296+(b>>10))+String.fromCharCode(b%1024+56320)):p+=String.fromCharCode(b)}return p},s.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(n,f){const g=n.length;if(!g)return 0;let p=0,_=0;if(this._interim){const b=n.charCodeAt(_++);56320<=b&&b<=57343?f[p++]=1024*(this._interim-55296)+b-56320+65536:(f[p++]=this._interim,f[p++]=b),this._interim=0}for(let b=_;b<g;++b){const C=n.charCodeAt(b);if(55296<=C&&C<=56319){if(++b>=g)return this._interim=C,p;const x=n.charCodeAt(b);56320<=x&&x<=57343?f[p++]=1024*(C-55296)+x-56320+65536:(f[p++]=C,f[p++]=x)}else C!==65279&&(f[p++]=C)}return p}},s.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(n,f){const g=n.length;if(!g)return 0;let p,_,b,C,x=0,o=0,d=0;if(this.interim[0]){let m=!1,$=this.interim[0];$&=(224&$)==192?31:(240&$)==224?15:7;let S,E=0;for(;(S=63&this.interim[++E])&&E<4;)$<<=6,$|=S;const y=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,k=y-E;for(;d<k;){if(d>=g)return 0;if(S=n[d++],(192&S)!=128){d--,m=!0;break}this.interim[E++]=S,$<<=6,$|=63&S}m||(y===2?$<128?d--:f[x++]=$:y===3?$<2048||$>=55296&&$<=57343||$===65279||(f[x++]=$):$<65536||$>1114111||(f[x++]=$)),this.interim.fill(0)}const a=g-4;let c=d;for(;c<g;){for(;!(!(c<a)||128&(p=n[c])||128&(_=n[c+1])||128&(b=n[c+2])||128&(C=n[c+3]));)f[x++]=p,f[x++]=_,f[x++]=b,f[x++]=C,c+=4;if(p=n[c++],p<128)f[x++]=p;else if((224&p)==192){if(c>=g)return this.interim[0]=p,x;if(_=n[c++],(192&_)!=128){c--;continue}if(o=(31&p)<<6|63&_,o<128){c--;continue}f[x++]=o}else if((240&p)==224){if(c>=g)return this.interim[0]=p,x;if(_=n[c++],(192&_)!=128){c--;continue}if(c>=g)return this.interim[0]=p,this.interim[1]=_,x;if(b=n[c++],(192&b)!=128){c--;continue}if(o=(15&p)<<12|(63&_)<<6|63&b,o<2048||o>=55296&&o<=57343||o===65279)continue;f[x++]=o}else if((248&p)==240){if(c>=g)return this.interim[0]=p,x;if(_=n[c++],(192&_)!=128){c--;continue}if(c>=g)return this.interim[0]=p,this.interim[1]=_,x;if(b=n[c++],(192&b)!=128){c--;continue}if(c>=g)return this.interim[0]=p,this.interim[1]=_,this.interim[2]=b,x;if(C=n[c++],(192&C)!=128){c--;continue}if(o=(7&p)<<18|(63&_)<<12|(63&b)<<6|63&C,o<65536||o>1114111)continue;f[x++]=o}}return x}}},225:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeV6=void 0;const n=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],f=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let g;s.UnicodeV6=class{constructor(){if(this.version="6",!g){g=new Uint8Array(65536),g.fill(1),g[0]=0,g.fill(0,1,32),g.fill(0,127,160),g.fill(2,4352,4448),g[9001]=2,g[9002]=2,g.fill(2,11904,42192),g[12351]=1,g.fill(2,44032,55204),g.fill(2,63744,64256),g.fill(2,65040,65050),g.fill(2,65072,65136),g.fill(2,65280,65377),g.fill(2,65504,65511);for(let p=0;p<n.length;++p)g.fill(0,n[p][0],n[p][1]+1)}}wcwidth(p){return p<32?0:p<127?1:p<65536?g[p]:function(_,b){let C,x=0,o=b.length-1;if(_<b[0][0]||_>b[o][1])return!1;for(;o>=x;)if(C=x+o>>1,_>b[C][1])x=C+1;else{if(!(_<b[C][0]))return!0;o=C-1}return!1}(p,f)?0:p>=131072&&p<=196605||p>=196608&&p<=262141?2:1}}},5981:(h,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WriteBuffer=void 0;const f=n(8460),g=n(844);class p extends g.Disposable{constructor(b){super(),this._action=b,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new f.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(b,C){if(C!==void 0&&this._syncCalls>C)return void(this._syncCalls=0);if(this._pendingData+=b.length,this._writeBuffer.push(b),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let x;for(this._isSyncWriting=!0;x=this._writeBuffer.shift();){this._action(x);const o=this._callbacks.shift();o&&o()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(b,C){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=b.length,this._writeBuffer.push(b),this._callbacks.push(C),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=b.length,this._writeBuffer.push(b),this._callbacks.push(C)}_innerWrite(b=0,C=!0){const x=b||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const o=this._writeBuffer[this._bufferOffset],d=this._action(o,C);if(d){const c=m=>Date.now()-x>=12?setTimeout(()=>this._innerWrite(0,m)):this._innerWrite(x,m);return void d.catch(m=>(queueMicrotask(()=>{throw m}),Promise.resolve(!1))).then(c)}const a=this._callbacks[this._bufferOffset];if(a&&a(),this._bufferOffset++,this._pendingData-=o.length,Date.now()-x>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}s.WriteBuffer=p},5941:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.toRgbString=s.parseColor=void 0;const n=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,f=/^[\da-f]+$/;function g(p,_){const b=p.toString(16),C=b.length<2?"0"+b:b;switch(_){case 4:return b[0];case 8:return C;case 12:return(C+C).slice(0,3);default:return C+C}}s.parseColor=function(p){if(!p)return;let _=p.toLowerCase();if(_.indexOf("rgb:")===0){_=_.slice(4);const b=n.exec(_);if(b){const C=b[1]?15:b[4]?255:b[7]?4095:65535;return[Math.round(parseInt(b[1]||b[4]||b[7]||b[10],16)/C*255),Math.round(parseInt(b[2]||b[5]||b[8]||b[11],16)/C*255),Math.round(parseInt(b[3]||b[6]||b[9]||b[12],16)/C*255)]}}else if(_.indexOf("#")===0&&(_=_.slice(1),f.exec(_)&&[3,6,9,12].includes(_.length))){const b=_.length/3,C=[0,0,0];for(let x=0;x<3;++x){const o=parseInt(_.slice(b*x,b*x+b),16);C[x]=b===1?o<<4:b===2?o:b===3?o>>4:o>>8}return C}},s.toRgbString=function(p,_=16){const[b,C,x]=p;return`rgb:${g(b,_)}/${g(C,_)}/${g(x,_)}`}},5770:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PAYLOAD_LIMIT=void 0,s.PAYLOAD_LIMIT=1e7},6351:(h,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DcsHandler=s.DcsParser=void 0;const f=n(482),g=n(8742),p=n(5770),_=[];s.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=_,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=_}registerHandler(C,x){this._handlers[C]===void 0&&(this._handlers[C]=[]);const o=this._handlers[C];return o.push(x),{dispose:()=>{const d=o.indexOf(x);d!==-1&&o.splice(d,1)}}}clearHandler(C){this._handlers[C]&&delete this._handlers[C]}setHandlerFallback(C){this._handlerFb=C}reset(){if(this._active.length)for(let C=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;C>=0;--C)this._active[C].unhook(!1);this._stack.paused=!1,this._active=_,this._ident=0}hook(C,x){if(this.reset(),this._ident=C,this._active=this._handlers[C]||_,this._active.length)for(let o=this._active.length-1;o>=0;o--)this._active[o].hook(x);else this._handlerFb(this._ident,"HOOK",x)}put(C,x,o){if(this._active.length)for(let d=this._active.length-1;d>=0;d--)this._active[d].put(C,x,o);else this._handlerFb(this._ident,"PUT",(0,f.utf32ToString)(C,x,o))}unhook(C,x=!0){if(this._active.length){let o=!1,d=this._active.length-1,a=!1;if(this._stack.paused&&(d=this._stack.loopPosition-1,o=x,a=this._stack.fallThrough,this._stack.paused=!1),!a&&o===!1){for(;d>=0&&(o=this._active[d].unhook(C),o!==!0);d--)if(o instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!1,o;d--}for(;d>=0;d--)if(o=this._active[d].unhook(!1),o instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!0,o}else this._handlerFb(this._ident,"UNHOOK",C);this._active=_,this._ident=0}};const b=new g.Params;b.addParam(0),s.DcsHandler=class{constructor(C){this._handler=C,this._data="",this._params=b,this._hitLimit=!1}hook(C){this._params=C.length>1||C.params[0]?C.clone():b,this._data="",this._hitLimit=!1}put(C,x,o){this._hitLimit||(this._data+=(0,f.utf32ToString)(C,x,o),this._data.length>p.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(C){let x=!1;if(this._hitLimit)x=!1;else if(C&&(x=this._handler(this._data,this._params),x instanceof Promise))return x.then(o=>(this._params=b,this._data="",this._hitLimit=!1,o));return this._params=b,this._data="",this._hitLimit=!1,x}}},2015:(h,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.EscapeSequenceParser=s.VT500_TRANSITION_TABLE=s.TransitionTable=void 0;const f=n(844),g=n(8742),p=n(6242),_=n(6351);class b{constructor(d){this.table=new Uint8Array(d)}setDefault(d,a){this.table.fill(d<<4|a)}add(d,a,c,m){this.table[a<<8|d]=c<<4|m}addMany(d,a,c,m){for(let $=0;$<d.length;$++)this.table[a<<8|d[$]]=c<<4|m}}s.TransitionTable=b;const C=160;s.VT500_TRANSITION_TABLE=function(){const o=new b(4095),d=Array.apply(null,Array(256)).map((E,y)=>y),a=(E,y)=>d.slice(E,y),c=a(32,127),m=a(0,24);m.push(25),m.push.apply(m,a(28,32));const $=a(0,14);let S;for(S in o.setDefault(1,0),o.addMany(c,0,2,0),$)o.addMany([24,26,153,154],S,3,0),o.addMany(a(128,144),S,3,0),o.addMany(a(144,152),S,3,0),o.add(156,S,0,0),o.add(27,S,11,1),o.add(157,S,4,8),o.addMany([152,158,159],S,0,7),o.add(155,S,11,3),o.add(144,S,11,9);return o.addMany(m,0,3,0),o.addMany(m,1,3,1),o.add(127,1,0,1),o.addMany(m,8,0,8),o.addMany(m,3,3,3),o.add(127,3,0,3),o.addMany(m,4,3,4),o.add(127,4,0,4),o.addMany(m,6,3,6),o.addMany(m,5,3,5),o.add(127,5,0,5),o.addMany(m,2,3,2),o.add(127,2,0,2),o.add(93,1,4,8),o.addMany(c,8,5,8),o.add(127,8,5,8),o.addMany([156,27,24,26,7],8,6,0),o.addMany(a(28,32),8,0,8),o.addMany([88,94,95],1,0,7),o.addMany(c,7,0,7),o.addMany(m,7,0,7),o.add(156,7,0,0),o.add(127,7,0,7),o.add(91,1,11,3),o.addMany(a(64,127),3,7,0),o.addMany(a(48,60),3,8,4),o.addMany([60,61,62,63],3,9,4),o.addMany(a(48,60),4,8,4),o.addMany(a(64,127),4,7,0),o.addMany([60,61,62,63],4,0,6),o.addMany(a(32,64),6,0,6),o.add(127,6,0,6),o.addMany(a(64,127),6,0,0),o.addMany(a(32,48),3,9,5),o.addMany(a(32,48),5,9,5),o.addMany(a(48,64),5,0,6),o.addMany(a(64,127),5,7,0),o.addMany(a(32,48),4,9,5),o.addMany(a(32,48),1,9,2),o.addMany(a(32,48),2,9,2),o.addMany(a(48,127),2,10,0),o.addMany(a(48,80),1,10,0),o.addMany(a(81,88),1,10,0),o.addMany([89,90,92],1,10,0),o.addMany(a(96,127),1,10,0),o.add(80,1,11,9),o.addMany(m,9,0,9),o.add(127,9,0,9),o.addMany(a(28,32),9,0,9),o.addMany(a(32,48),9,9,12),o.addMany(a(48,60),9,8,10),o.addMany([60,61,62,63],9,9,10),o.addMany(m,11,0,11),o.addMany(a(32,128),11,0,11),o.addMany(a(28,32),11,0,11),o.addMany(m,10,0,10),o.add(127,10,0,10),o.addMany(a(28,32),10,0,10),o.addMany(a(48,60),10,8,10),o.addMany([60,61,62,63],10,0,11),o.addMany(a(32,48),10,9,12),o.addMany(m,12,0,12),o.add(127,12,0,12),o.addMany(a(28,32),12,0,12),o.addMany(a(32,48),12,9,12),o.addMany(a(48,64),12,0,11),o.addMany(a(64,127),12,12,13),o.addMany(a(64,127),10,12,13),o.addMany(a(64,127),9,12,13),o.addMany(m,13,13,13),o.addMany(c,13,13,13),o.add(127,13,0,13),o.addMany([27,156,24,26],13,14,0),o.add(C,0,2,0),o.add(C,8,5,8),o.add(C,6,0,6),o.add(C,11,0,11),o.add(C,13,13,13),o}();class x extends f.Disposable{constructor(d=s.VT500_TRANSITION_TABLE){super(),this._transitions=d,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new g.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(a,c,m)=>{},this._executeHandlerFb=a=>{},this._csiHandlerFb=(a,c)=>{},this._escHandlerFb=a=>{},this._errorHandlerFb=a=>a,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,f.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new p.OscParser),this._dcsParser=this.register(new _.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(d,a=[64,126]){let c=0;if(d.prefix){if(d.prefix.length>1)throw new Error("only one byte as prefix supported");if(c=d.prefix.charCodeAt(0),c&&60>c||c>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(d.intermediates){if(d.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let $=0;$<d.intermediates.length;++$){const S=d.intermediates.charCodeAt($);if(32>S||S>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");c<<=8,c|=S}}if(d.final.length!==1)throw new Error("final must be a single byte");const m=d.final.charCodeAt(0);if(a[0]>m||m>a[1])throw new Error(`final must be in range ${a[0]} .. ${a[1]}`);return c<<=8,c|=m,c}identToString(d){const a=[];for(;d;)a.push(String.fromCharCode(255&d)),d>>=8;return a.reverse().join("")}setPrintHandler(d){this._printHandler=d}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(d,a){const c=this._identifier(d,[48,126]);this._escHandlers[c]===void 0&&(this._escHandlers[c]=[]);const m=this._escHandlers[c];return m.push(a),{dispose:()=>{const $=m.indexOf(a);$!==-1&&m.splice($,1)}}}clearEscHandler(d){this._escHandlers[this._identifier(d,[48,126])]&&delete this._escHandlers[this._identifier(d,[48,126])]}setEscHandlerFallback(d){this._escHandlerFb=d}setExecuteHandler(d,a){this._executeHandlers[d.charCodeAt(0)]=a}clearExecuteHandler(d){this._executeHandlers[d.charCodeAt(0)]&&delete this._executeHandlers[d.charCodeAt(0)]}setExecuteHandlerFallback(d){this._executeHandlerFb=d}registerCsiHandler(d,a){const c=this._identifier(d);this._csiHandlers[c]===void 0&&(this._csiHandlers[c]=[]);const m=this._csiHandlers[c];return m.push(a),{dispose:()=>{const $=m.indexOf(a);$!==-1&&m.splice($,1)}}}clearCsiHandler(d){this._csiHandlers[this._identifier(d)]&&delete this._csiHandlers[this._identifier(d)]}setCsiHandlerFallback(d){this._csiHandlerFb=d}registerDcsHandler(d,a){return this._dcsParser.registerHandler(this._identifier(d),a)}clearDcsHandler(d){this._dcsParser.clearHandler(this._identifier(d))}setDcsHandlerFallback(d){this._dcsParser.setHandlerFallback(d)}registerOscHandler(d,a){return this._oscParser.registerHandler(d,a)}clearOscHandler(d){this._oscParser.clearHandler(d)}setOscHandlerFallback(d){this._oscParser.setHandlerFallback(d)}setErrorHandler(d){this._errorHandler=d}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(d,a,c,m,$){this._parseStack.state=d,this._parseStack.handlers=a,this._parseStack.handlerPos=c,this._parseStack.transition=m,this._parseStack.chunkPos=$}parse(d,a,c){let m,$=0,S=0,E=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,E=this._parseStack.chunkPos+1;else{if(c===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const y=this._parseStack.handlers;let k=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(c===!1&&k>-1){for(;k>=0&&(m=y[k](this._params),m!==!0);k--)if(m instanceof Promise)return this._parseStack.handlerPos=k,m}this._parseStack.handlers=[];break;case 4:if(c===!1&&k>-1){for(;k>=0&&(m=y[k](),m!==!0);k--)if(m instanceof Promise)return this._parseStack.handlerPos=k,m}this._parseStack.handlers=[];break;case 6:if($=d[this._parseStack.chunkPos],m=this._dcsParser.unhook($!==24&&$!==26,c),m)return m;$===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if($=d[this._parseStack.chunkPos],m=this._oscParser.end($!==24&&$!==26,c),m)return m;$===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,E=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let y=E;y<a;++y){switch($=d[y],S=this._transitions.table[this.currentState<<8|($<160?$:C)],S>>4){case 2:for(let I=y+1;;++I){if(I>=a||($=d[I])<32||$>126&&$<C){this._printHandler(d,y,I),y=I-1;break}if(++I>=a||($=d[I])<32||$>126&&$<C){this._printHandler(d,y,I),y=I-1;break}if(++I>=a||($=d[I])<32||$>126&&$<C){this._printHandler(d,y,I),y=I-1;break}if(++I>=a||($=d[I])<32||$>126&&$<C){this._printHandler(d,y,I),y=I-1;break}}break;case 3:this._executeHandlers[$]?this._executeHandlers[$]():this._executeHandlerFb($),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:y,code:$,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const k=this._csiHandlers[this._collect<<8|$];let B=k?k.length-1:-1;for(;B>=0&&(m=k[B](this._params),m!==!0);B--)if(m instanceof Promise)return this._preserveStack(3,k,B,S,y),m;B<0&&this._csiHandlerFb(this._collect<<8|$,this._params),this.precedingCodepoint=0;break;case 8:do switch($){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit($-48)}while(++y<a&&($=d[y])>47&&$<60);y--;break;case 9:this._collect<<=8,this._collect|=$;break;case 10:const O=this._escHandlers[this._collect<<8|$];let T=O?O.length-1:-1;for(;T>=0&&(m=O[T](),m!==!0);T--)if(m instanceof Promise)return this._preserveStack(4,O,T,S,y),m;T<0&&this._escHandlerFb(this._collect<<8|$),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|$,this._params);break;case 13:for(let I=y+1;;++I)if(I>=a||($=d[I])===24||$===26||$===27||$>127&&$<C){this._dcsParser.put(d,y,I),y=I-1;break}break;case 14:if(m=this._dcsParser.unhook($!==24&&$!==26),m)return this._preserveStack(6,[],0,S,y),m;$===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let I=y+1;;I++)if(I>=a||($=d[I])<32||$>127&&$<C){this._oscParser.put(d,y,I),y=I-1;break}break;case 6:if(m=this._oscParser.end($!==24&&$!==26),m)return this._preserveStack(5,[],0,S,y),m;$===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&S}}}s.EscapeSequenceParser=x},6242:(h,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OscHandler=s.OscParser=void 0;const f=n(5770),g=n(482),p=[];s.OscParser=class{constructor(){this._state=0,this._active=p,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(_,b){this._handlers[_]===void 0&&(this._handlers[_]=[]);const C=this._handlers[_];return C.push(b),{dispose:()=>{const x=C.indexOf(b);x!==-1&&C.splice(x,1)}}}clearHandler(_){this._handlers[_]&&delete this._handlers[_]}setHandlerFallback(_){this._handlerFb=_}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=p}reset(){if(this._state===2)for(let _=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;_>=0;--_)this._active[_].end(!1);this._stack.paused=!1,this._active=p,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||p,this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].start();else this._handlerFb(this._id,"START")}_put(_,b,C){if(this._active.length)for(let x=this._active.length-1;x>=0;x--)this._active[x].put(_,b,C);else this._handlerFb(this._id,"PUT",(0,g.utf32ToString)(_,b,C))}start(){this.reset(),this._state=1}put(_,b,C){if(this._state!==3){if(this._state===1)for(;b<C;){const x=_[b++];if(x===59){this._state=2,this._start();break}if(x<48||57<x)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+x-48}this._state===2&&C-b>0&&this._put(_,b,C)}}end(_,b=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let C=!1,x=this._active.length-1,o=!1;if(this._stack.paused&&(x=this._stack.loopPosition-1,C=b,o=this._stack.fallThrough,this._stack.paused=!1),!o&&C===!1){for(;x>=0&&(C=this._active[x].end(_),C!==!0);x--)if(C instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=x,this._stack.fallThrough=!1,C;x--}for(;x>=0;x--)if(C=this._active[x].end(!1),C instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=x,this._stack.fallThrough=!0,C}else this._handlerFb(this._id,"END",_);this._active=p,this._id=-1,this._state=0}}},s.OscHandler=class{constructor(_){this._handler=_,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(_,b,C){this._hitLimit||(this._data+=(0,g.utf32ToString)(_,b,C),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(_){let b=!1;if(this._hitLimit)b=!1;else if(_&&(b=this._handler(this._data),b instanceof Promise))return b.then(C=>(this._data="",this._hitLimit=!1,C));return this._data="",this._hitLimit=!1,b}}},8742:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Params=void 0;const n=2147483647;class f{static fromArray(p){const _=new f;if(!p.length)return _;for(let b=Array.isArray(p[0])?1:0;b<p.length;++b){const C=p[b];if(Array.isArray(C))for(let x=0;x<C.length;++x)_.addSubParam(C[x]);else _.addParam(C)}return _}constructor(p=32,_=32){if(this.maxLength=p,this.maxSubParamsLength=_,_>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(p),this.length=0,this._subParams=new Int32Array(_),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(p),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const p=new f(this.maxLength,this.maxSubParamsLength);return p.params.set(this.params),p.length=this.length,p._subParams.set(this._subParams),p._subParamsLength=this._subParamsLength,p._subParamsIdx.set(this._subParamsIdx),p._rejectDigits=this._rejectDigits,p._rejectSubDigits=this._rejectSubDigits,p._digitIsSub=this._digitIsSub,p}toArray(){const p=[];for(let _=0;_<this.length;++_){p.push(this.params[_]);const b=this._subParamsIdx[_]>>8,C=255&this._subParamsIdx[_];C-b>0&&p.push(Array.prototype.slice.call(this._subParams,b,C))}return p}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(p){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(p<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=p>n?n:p}}addSubParam(p){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(p<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=p>n?n:p,this._subParamsIdx[this.length-1]++}}hasSubParams(p){return(255&this._subParamsIdx[p])-(this._subParamsIdx[p]>>8)>0}getSubParams(p){const _=this._subParamsIdx[p]>>8,b=255&this._subParamsIdx[p];return b-_>0?this._subParams.subarray(_,b):null}getSubParamsAll(){const p={};for(let _=0;_<this.length;++_){const b=this._subParamsIdx[_]>>8,C=255&this._subParamsIdx[_];C-b>0&&(p[_]=this._subParams.slice(b,C))}return p}addDigit(p){let _;if(this._rejectDigits||!(_=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const b=this._digitIsSub?this._subParams:this.params,C=b[_-1];b[_-1]=~C?Math.min(10*C+p,n):p}}s.Params=f},5741:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AddonManager=void 0,s.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let n=this._addons.length-1;n>=0;n--)this._addons[n].instance.dispose()}loadAddon(n,f){const g={instance:f,dispose:f.dispose,isDisposed:!1};this._addons.push(g),f.dispose=()=>this._wrappedAddonDispose(g),f.activate(n)}_wrappedAddonDispose(n){if(n.isDisposed)return;let f=-1;for(let g=0;g<this._addons.length;g++)if(this._addons[g]===n){f=g;break}if(f===-1)throw new Error("Could not dispose an addon that has not been loaded");n.isDisposed=!0,n.dispose.apply(n.instance),this._addons.splice(f,1)}}},8771:(h,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferApiView=void 0;const f=n(3785),g=n(511);s.BufferApiView=class{constructor(p,_){this._buffer=p,this.type=_}init(p){return this._buffer=p,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(p){const _=this._buffer.lines.get(p);if(_)return new f.BufferLineApiView(_)}getNullCell(){return new g.CellData}}},3785:(h,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLineApiView=void 0;const f=n(511);s.BufferLineApiView=class{constructor(g){this._line=g}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(g,p){if(!(g<0||g>=this._line.length))return p?(this._line.loadCell(g,p),p):this._line.loadCell(g,new f.CellData)}translateToString(g,p,_){return this._line.translateToString(g,p,_)}}},8285:(h,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferNamespaceApi=void 0;const f=n(8771),g=n(8460),p=n(844);class _ extends p.Disposable{constructor(C){super(),this._core=C,this._onBufferChange=this.register(new g.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new f.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new f.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}s.BufferNamespaceApi=_},7975:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ParserApi=void 0,s.ParserApi=class{constructor(n){this._core=n}registerCsiHandler(n,f){return this._core.registerCsiHandler(n,g=>f(g.toArray()))}addCsiHandler(n,f){return this.registerCsiHandler(n,f)}registerDcsHandler(n,f){return this._core.registerDcsHandler(n,(g,p)=>f(g,p.toArray()))}addDcsHandler(n,f){return this.registerDcsHandler(n,f)}registerEscHandler(n,f){return this._core.registerEscHandler(n,f)}addEscHandler(n,f){return this.registerEscHandler(n,f)}registerOscHandler(n,f){return this._core.registerOscHandler(n,f)}addOscHandler(n,f){return this.registerOscHandler(n,f)}}},7090:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeApi=void 0,s.UnicodeApi=class{constructor(n){this._core=n}register(n){this._core.unicodeService.register(n)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(n){this._core.unicodeService.activeVersion=n}}},744:function(h,s,n){var f=this&&this.__decorate||function(o,d,a,c){var m,$=arguments.length,S=$<3?d:c===null?c=Object.getOwnPropertyDescriptor(d,a):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(o,d,a,c);else for(var E=o.length-1;E>=0;E--)(m=o[E])&&(S=($<3?m(S):$>3?m(d,a,S):m(d,a))||S);return $>3&&S&&Object.defineProperty(d,a,S),S},g=this&&this.__param||function(o,d){return function(a,c){d(a,c,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferService=s.MINIMUM_ROWS=s.MINIMUM_COLS=void 0;const p=n(8460),_=n(844),b=n(5295),C=n(2585);s.MINIMUM_COLS=2,s.MINIMUM_ROWS=1;let x=s.BufferService=class extends _.Disposable{get buffer(){return this.buffers.active}constructor(o){super(),this.isUserScrolling=!1,this._onResize=this.register(new p.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new p.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(o.rawOptions.cols||0,s.MINIMUM_COLS),this.rows=Math.max(o.rawOptions.rows||0,s.MINIMUM_ROWS),this.buffers=this.register(new b.BufferSet(o,this))}resize(o,d){this.cols=o,this.rows=d,this.buffers.resize(o,d),this._onResize.fire({cols:o,rows:d})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(o,d=!1){const a=this.buffer;let c;c=this._cachedBlankLine,c&&c.length===this.cols&&c.getFg(0)===o.fg&&c.getBg(0)===o.bg||(c=a.getBlankLine(o,d),this._cachedBlankLine=c),c.isWrapped=d;const m=a.ybase+a.scrollTop,$=a.ybase+a.scrollBottom;if(a.scrollTop===0){const S=a.lines.isFull;$===a.lines.length-1?S?a.lines.recycle().copyFrom(c):a.lines.push(c.clone()):a.lines.splice($+1,0,c.clone()),S?this.isUserScrolling&&(a.ydisp=Math.max(a.ydisp-1,0)):(a.ybase++,this.isUserScrolling||a.ydisp++)}else{const S=$-m+1;a.lines.shiftElements(m+1,S-1,-1),a.lines.set($,c.clone())}this.isUserScrolling||(a.ydisp=a.ybase),this._onScroll.fire(a.ydisp)}scrollLines(o,d,a){const c=this.buffer;if(o<0){if(c.ydisp===0)return;this.isUserScrolling=!0}else o+c.ydisp>=c.ybase&&(this.isUserScrolling=!1);const m=c.ydisp;c.ydisp=Math.max(Math.min(c.ydisp+o,c.ybase),0),m!==c.ydisp&&(d||this._onScroll.fire(c.ydisp))}};s.BufferService=x=f([g(0,C.IOptionsService)],x)},7994:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CharsetService=void 0,s.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(n){this.glevel=n,this.charset=this._charsets[n]}setgCharset(n,f){this._charsets[n]=f,this.glevel===n&&(this.charset=f)}}},1753:function(h,s,n){var f=this&&this.__decorate||function(c,m,$,S){var E,y=arguments.length,k=y<3?m:S===null?S=Object.getOwnPropertyDescriptor(m,$):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(c,m,$,S);else for(var B=c.length-1;B>=0;B--)(E=c[B])&&(k=(y<3?E(k):y>3?E(m,$,k):E(m,$))||k);return y>3&&k&&Object.defineProperty(m,$,k),k},g=this&&this.__param||function(c,m){return function($,S){m($,S,c)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreMouseService=void 0;const p=n(2585),_=n(8460),b=n(844),C={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:c=>c.button!==4&&c.action===1&&(c.ctrl=!1,c.alt=!1,c.shift=!1,!0)},VT200:{events:19,restrict:c=>c.action!==32},DRAG:{events:23,restrict:c=>c.action!==32||c.button!==3},ANY:{events:31,restrict:c=>!0}};function x(c,m){let $=(c.ctrl?16:0)|(c.shift?4:0)|(c.alt?8:0);return c.button===4?($|=64,$|=c.action):($|=3&c.button,4&c.button&&($|=64),8&c.button&&($|=128),c.action===32?$|=32:c.action!==0||m||($|=3)),$}const o=String.fromCharCode,d={DEFAULT:c=>{const m=[x(c,!1)+32,c.col+32,c.row+32];return m[0]>255||m[1]>255||m[2]>255?"":`\x1B[M${o(m[0])}${o(m[1])}${o(m[2])}`},SGR:c=>{const m=c.action===0&&c.button!==4?"m":"M";return`\x1B[<${x(c,!0)};${c.col};${c.row}${m}`},SGR_PIXELS:c=>{const m=c.action===0&&c.button!==4?"m":"M";return`\x1B[<${x(c,!0)};${c.x};${c.y}${m}`}};let a=s.CoreMouseService=class extends b.Disposable{constructor(c,m){super(),this._bufferService=c,this._coreService=m,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new _.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const $ of Object.keys(C))this.addProtocol($,C[$]);for(const $ of Object.keys(d))this.addEncoding($,d[$]);this.reset()}addProtocol(c,m){this._protocols[c]=m}addEncoding(c,m){this._encodings[c]=m}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(c){if(!this._protocols[c])throw new Error(`unknown protocol "${c}"`);this._activeProtocol=c,this._onProtocolChange.fire(this._protocols[c].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(c){if(!this._encodings[c])throw new Error(`unknown encoding "${c}"`);this._activeEncoding=c}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(c){if(c.col<0||c.col>=this._bufferService.cols||c.row<0||c.row>=this._bufferService.rows||c.button===4&&c.action===32||c.button===3&&c.action!==32||c.button!==4&&(c.action===2||c.action===3)||(c.col++,c.row++,c.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,c,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(c))return!1;const m=this._encodings[this._activeEncoding](c);return m&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(m):this._coreService.triggerDataEvent(m,!0)),this._lastEvent=c,!0}explainEvents(c){return{down:!!(1&c),up:!!(2&c),drag:!!(4&c),move:!!(8&c),wheel:!!(16&c)}}_equalEvents(c,m,$){if($){if(c.x!==m.x||c.y!==m.y)return!1}else if(c.col!==m.col||c.row!==m.row)return!1;return c.button===m.button&&c.action===m.action&&c.ctrl===m.ctrl&&c.alt===m.alt&&c.shift===m.shift}};s.CoreMouseService=a=f([g(0,p.IBufferService),g(1,p.ICoreService)],a)},6975:function(h,s,n){var f=this&&this.__decorate||function(a,c,m,$){var S,E=arguments.length,y=E<3?c:$===null?$=Object.getOwnPropertyDescriptor(c,m):$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(a,c,m,$);else for(var k=a.length-1;k>=0;k--)(S=a[k])&&(y=(E<3?S(y):E>3?S(c,m,y):S(c,m))||y);return E>3&&y&&Object.defineProperty(c,m,y),y},g=this&&this.__param||function(a,c){return function(m,$){c(m,$,a)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreService=void 0;const p=n(1439),_=n(8460),b=n(844),C=n(2585),x=Object.freeze({insertMode:!1}),o=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let d=s.CoreService=class extends b.Disposable{constructor(a,c,m){super(),this._bufferService=a,this._logService=c,this._optionsService=m,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new _.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new _.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new _.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new _.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,p.clone)(x),this.decPrivateModes=(0,p.clone)(o)}reset(){this.modes=(0,p.clone)(x),this.decPrivateModes=(0,p.clone)(o)}triggerDataEvent(a,c=!1){if(this._optionsService.rawOptions.disableStdin)return;const m=this._bufferService.buffer;c&&this._optionsService.rawOptions.scrollOnUserInput&&m.ybase!==m.ydisp&&this._onRequestScrollToBottom.fire(),c&&this._onUserInput.fire(),this._logService.debug(`sending data "${a}"`,()=>a.split("").map($=>$.charCodeAt(0))),this._onData.fire(a)}triggerBinaryEvent(a){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${a}"`,()=>a.split("").map(c=>c.charCodeAt(0))),this._onBinary.fire(a))}};s.CoreService=d=f([g(0,C.IBufferService),g(1,C.ILogService),g(2,C.IOptionsService)],d)},9074:(h,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DecorationService=void 0;const f=n(8055),g=n(8460),p=n(844),_=n(6106);let b=0,C=0;class x extends p.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new _.SortedList(a=>a?.marker.line),this._onDecorationRegistered=this.register(new g.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new g.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,p.toDisposable)(()=>this.reset()))}registerDecoration(a){if(a.marker.isDisposed)return;const c=new o(a);if(c){const m=c.marker.onDispose(()=>c.dispose());c.onDispose(()=>{c&&(this._decorations.delete(c)&&this._onDecorationRemoved.fire(c),m.dispose())}),this._decorations.insert(c),this._onDecorationRegistered.fire(c)}return c}reset(){for(const a of this._decorations.values())a.dispose();this._decorations.clear()}*getDecorationsAtCell(a,c,m){var $,S,E;let y=0,k=0;for(const B of this._decorations.getKeyIterator(c))y=($=B.options.x)!==null&&$!==void 0?$:0,k=y+((S=B.options.width)!==null&&S!==void 0?S:1),a>=y&&a<k&&(!m||((E=B.options.layer)!==null&&E!==void 0?E:"bottom")===m)&&(yield B)}forEachDecorationAtCell(a,c,m,$){this._decorations.forEachByKey(c,S=>{var E,y,k;b=(E=S.options.x)!==null&&E!==void 0?E:0,C=b+((y=S.options.width)!==null&&y!==void 0?y:1),a>=b&&a<C&&(!m||((k=S.options.layer)!==null&&k!==void 0?k:"bottom")===m)&&$(S)})}}s.DecorationService=x;class o extends p.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=f.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=f.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(a){super(),this.options=a,this.onRenderEmitter=this.register(new g.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new g.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=a.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(h,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.InstantiationService=s.ServiceCollection=void 0;const f=n(2585),g=n(8343);class p{constructor(...b){this._entries=new Map;for(const[C,x]of b)this.set(C,x)}set(b,C){const x=this._entries.get(b);return this._entries.set(b,C),x}forEach(b){for(const[C,x]of this._entries.entries())b(C,x)}has(b){return this._entries.has(b)}get(b){return this._entries.get(b)}}s.ServiceCollection=p,s.InstantiationService=class{constructor(){this._services=new p,this._services.set(f.IInstantiationService,this)}setService(_,b){this._services.set(_,b)}getService(_){return this._services.get(_)}createInstance(_,...b){const C=(0,g.getServiceDependencies)(_).sort((d,a)=>d.index-a.index),x=[];for(const d of C){const a=this._services.get(d.id);if(!a)throw new Error(`[createInstance] ${_.name} depends on UNKNOWN service ${d.id}.`);x.push(a)}const o=C.length>0?C[0].index:b.length;if(b.length!==o)throw new Error(`[createInstance] First service dependency of ${_.name} at position ${o+1} conflicts with ${b.length} static arguments`);return new _(...b,...x)}}},7866:function(h,s,n){var f=this&&this.__decorate||function(o,d,a,c){var m,$=arguments.length,S=$<3?d:c===null?c=Object.getOwnPropertyDescriptor(d,a):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(o,d,a,c);else for(var E=o.length-1;E>=0;E--)(m=o[E])&&(S=($<3?m(S):$>3?m(d,a,S):m(d,a))||S);return $>3&&S&&Object.defineProperty(d,a,S),S},g=this&&this.__param||function(o,d){return function(a,c){d(a,c,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.traceCall=s.setTraceLogger=s.LogService=void 0;const p=n(844),_=n(2585),b={trace:_.LogLevelEnum.TRACE,debug:_.LogLevelEnum.DEBUG,info:_.LogLevelEnum.INFO,warn:_.LogLevelEnum.WARN,error:_.LogLevelEnum.ERROR,off:_.LogLevelEnum.OFF};let C,x=s.LogService=class extends p.Disposable{get logLevel(){return this._logLevel}constructor(o){super(),this._optionsService=o,this._logLevel=_.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),C=this}_updateLogLevel(){this._logLevel=b[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(o){for(let d=0;d<o.length;d++)typeof o[d]=="function"&&(o[d]=o[d]())}_log(o,d,a){this._evalLazyOptionalParams(a),o.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+d,...a)}trace(o,...d){var a,c;this._logLevel<=_.LogLevelEnum.TRACE&&this._log((c=(a=this._optionsService.options.logger)===null||a===void 0?void 0:a.trace.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.log,o,d)}debug(o,...d){var a,c;this._logLevel<=_.LogLevelEnum.DEBUG&&this._log((c=(a=this._optionsService.options.logger)===null||a===void 0?void 0:a.debug.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.log,o,d)}info(o,...d){var a,c;this._logLevel<=_.LogLevelEnum.INFO&&this._log((c=(a=this._optionsService.options.logger)===null||a===void 0?void 0:a.info.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.info,o,d)}warn(o,...d){var a,c;this._logLevel<=_.LogLevelEnum.WARN&&this._log((c=(a=this._optionsService.options.logger)===null||a===void 0?void 0:a.warn.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.warn,o,d)}error(o,...d){var a,c;this._logLevel<=_.LogLevelEnum.ERROR&&this._log((c=(a=this._optionsService.options.logger)===null||a===void 0?void 0:a.error.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.error,o,d)}};s.LogService=x=f([g(0,_.IOptionsService)],x),s.setTraceLogger=function(o){C=o},s.traceCall=function(o,d,a){if(typeof a.value!="function")throw new Error("not supported");const c=a.value;a.value=function(...m){if(C.logLevel!==_.LogLevelEnum.TRACE)return c.apply(this,m);C.trace(`GlyphRenderer#${c.name}(${m.map(S=>JSON.stringify(S)).join(", ")})`);const $=c.apply(this,m);return C.trace(`GlyphRenderer#${c.name} return`,$),$}}},7302:(h,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OptionsService=s.DEFAULT_OPTIONS=void 0;const f=n(8460),g=n(844),p=n(6114);s.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:p.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const _=["normal","bold","100","200","300","400","500","600","700","800","900"];class b extends g.Disposable{constructor(x){super(),this._onOptionChange=this.register(new f.EventEmitter),this.onOptionChange=this._onOptionChange.event;const o=Object.assign({},s.DEFAULT_OPTIONS);for(const d in x)if(d in o)try{const a=x[d];o[d]=this._sanitizeAndValidateOption(d,a)}catch(a){console.error(a)}this.rawOptions=o,this.options=Object.assign({},o),this._setupOptions()}onSpecificOptionChange(x,o){return this.onOptionChange(d=>{d===x&&o(this.rawOptions[x])})}onMultipleOptionChange(x,o){return this.onOptionChange(d=>{x.indexOf(d)!==-1&&o()})}_setupOptions(){const x=d=>{if(!(d in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${d}"`);return this.rawOptions[d]},o=(d,a)=>{if(!(d in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${d}"`);a=this._sanitizeAndValidateOption(d,a),this.rawOptions[d]!==a&&(this.rawOptions[d]=a,this._onOptionChange.fire(d))};for(const d in this.rawOptions){const a={get:x.bind(this,d),set:o.bind(this,d)};Object.defineProperty(this.options,d,a)}}_sanitizeAndValidateOption(x,o){switch(x){case"cursorStyle":if(o||(o=s.DEFAULT_OPTIONS[x]),!function(d){return d==="block"||d==="underline"||d==="bar"}(o))throw new Error(`"${o}" is not a valid value for ${x}`);break;case"wordSeparator":o||(o=s.DEFAULT_OPTIONS[x]);break;case"fontWeight":case"fontWeightBold":if(typeof o=="number"&&1<=o&&o<=1e3)break;o=_.includes(o)?o:s.DEFAULT_OPTIONS[x];break;case"cursorWidth":o=Math.floor(o);case"lineHeight":case"tabStopWidth":if(o<1)throw new Error(`${x} cannot be less than 1, value: ${o}`);break;case"minimumContrastRatio":o=Math.max(1,Math.min(21,Math.round(10*o)/10));break;case"scrollback":if((o=Math.min(o,4294967295))<0)throw new Error(`${x} cannot be less than 0, value: ${o}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(o<=0)throw new Error(`${x} cannot be less than or equal to 0, value: ${o}`);break;case"rows":case"cols":if(!o&&o!==0)throw new Error(`${x} must be numeric, value: ${o}`);break;case"windowsPty":o=o??{}}return o}}s.OptionsService=b},2660:function(h,s,n){var f=this&&this.__decorate||function(b,C,x,o){var d,a=arguments.length,c=a<3?C:o===null?o=Object.getOwnPropertyDescriptor(C,x):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(b,C,x,o);else for(var m=b.length-1;m>=0;m--)(d=b[m])&&(c=(a<3?d(c):a>3?d(C,x,c):d(C,x))||c);return a>3&&c&&Object.defineProperty(C,x,c),c},g=this&&this.__param||function(b,C){return function(x,o){C(x,o,b)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkService=void 0;const p=n(2585);let _=s.OscLinkService=class{constructor(b){this._bufferService=b,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(b){const C=this._bufferService.buffer;if(b.id===void 0){const m=C.addMarker(C.ybase+C.y),$={data:b,id:this._nextId++,lines:[m]};return m.onDispose(()=>this._removeMarkerFromLink($,m)),this._dataByLinkId.set($.id,$),$.id}const x=b,o=this._getEntryIdKey(x),d=this._entriesWithId.get(o);if(d)return this.addLineToLink(d.id,C.ybase+C.y),d.id;const a=C.addMarker(C.ybase+C.y),c={id:this._nextId++,key:this._getEntryIdKey(x),data:x,lines:[a]};return a.onDispose(()=>this._removeMarkerFromLink(c,a)),this._entriesWithId.set(c.key,c),this._dataByLinkId.set(c.id,c),c.id}addLineToLink(b,C){const x=this._dataByLinkId.get(b);if(x&&x.lines.every(o=>o.line!==C)){const o=this._bufferService.buffer.addMarker(C);x.lines.push(o),o.onDispose(()=>this._removeMarkerFromLink(x,o))}}getLinkData(b){var C;return(C=this._dataByLinkId.get(b))===null||C===void 0?void 0:C.data}_getEntryIdKey(b){return`${b.id};;${b.uri}`}_removeMarkerFromLink(b,C){const x=b.lines.indexOf(C);x!==-1&&(b.lines.splice(x,1),b.lines.length===0&&(b.data.id!==void 0&&this._entriesWithId.delete(b.key),this._dataByLinkId.delete(b.id)))}};s.OscLinkService=_=f([g(0,p.IBufferService)],_)},8343:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createDecorator=s.getServiceDependencies=s.serviceRegistry=void 0;const n="di$target",f="di$dependencies";s.serviceRegistry=new Map,s.getServiceDependencies=function(g){return g[f]||[]},s.createDecorator=function(g){if(s.serviceRegistry.has(g))return s.serviceRegistry.get(g);const p=function(_,b,C){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(x,o,d){o[n]===o?o[f].push({id:x,index:d}):(o[f]=[{id:x,index:d}],o[n]=o)})(p,_,C)};return p.toString=()=>g,s.serviceRegistry.set(g,p),p}},2585:(h,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IDecorationService=s.IUnicodeService=s.IOscLinkService=s.IOptionsService=s.ILogService=s.LogLevelEnum=s.IInstantiationService=s.ICharsetService=s.ICoreService=s.ICoreMouseService=s.IBufferService=void 0;const f=n(8343);var g;s.IBufferService=(0,f.createDecorator)("BufferService"),s.ICoreMouseService=(0,f.createDecorator)("CoreMouseService"),s.ICoreService=(0,f.createDecorator)("CoreService"),s.ICharsetService=(0,f.createDecorator)("CharsetService"),s.IInstantiationService=(0,f.createDecorator)("InstantiationService"),function(p){p[p.TRACE=0]="TRACE",p[p.DEBUG=1]="DEBUG",p[p.INFO=2]="INFO",p[p.WARN=3]="WARN",p[p.ERROR=4]="ERROR",p[p.OFF=5]="OFF"}(g||(s.LogLevelEnum=g={})),s.ILogService=(0,f.createDecorator)("LogService"),s.IOptionsService=(0,f.createDecorator)("OptionsService"),s.IOscLinkService=(0,f.createDecorator)("OscLinkService"),s.IUnicodeService=(0,f.createDecorator)("UnicodeService"),s.IDecorationService=(0,f.createDecorator)("DecorationService")},1480:(h,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeService=void 0;const f=n(8460),g=n(225);s.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new f.EventEmitter,this.onChange=this._onChange.event;const p=new g.UnicodeV6;this.register(p),this._active=p.version,this._activeProvider=p}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(p){if(!this._providers[p])throw new Error(`unknown Unicode version "${p}"`);this._active=p,this._activeProvider=this._providers[p],this._onChange.fire(p)}register(p){this._providers[p.version]=p}wcwidth(p){return this._activeProvider.wcwidth(p)}getStringCellWidth(p){let _=0;const b=p.length;for(let C=0;C<b;++C){let x=p.charCodeAt(C);if(55296<=x&&x<=56319){if(++C>=b)return _+this.wcwidth(x);const o=p.charCodeAt(C);56320<=o&&o<=57343?x=1024*(x-55296)+o-56320+65536:_+=this.wcwidth(o)}_+=this.wcwidth(x)}return _}}}},l={};function u(h){var s=l[h];if(s!==void 0)return s.exports;var n=l[h]={exports:{}};return r[h].call(n.exports,n,n.exports,u),n.exports}var v={};return(()=>{var h=v;Object.defineProperty(h,"__esModule",{value:!0}),h.Terminal=void 0;const s=u(9042),n=u(3236),f=u(844),g=u(5741),p=u(8285),_=u(7975),b=u(7090),C=["cols","rows"];class x extends f.Disposable{constructor(d){super(),this._core=this.register(new n.Terminal(d)),this._addonManager=this.register(new g.AddonManager),this._publicOptions=Object.assign({},this._core.options);const a=m=>this._core.options[m],c=(m,$)=>{this._checkReadonlyOptions(m),this._core.options[m]=$};for(const m in this._core.options){const $={get:a.bind(this,m),set:c.bind(this,m)};Object.defineProperty(this._publicOptions,m,$)}}_checkReadonlyOptions(d){if(C.includes(d))throw new Error(`Option "${d}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new _.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new b.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new p.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const d=this._core.coreService.decPrivateModes;let a="none";switch(this._core.coreMouseService.activeProtocol){case"X10":a="x10";break;case"VT200":a="vt200";break;case"DRAG":a="drag";break;case"ANY":a="any"}return{applicationCursorKeysMode:d.applicationCursorKeys,applicationKeypadMode:d.applicationKeypad,bracketedPasteMode:d.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:a,originMode:d.origin,reverseWraparoundMode:d.reverseWraparound,sendFocusMode:d.sendFocus,wraparoundMode:d.wraparound}}get options(){return this._publicOptions}set options(d){for(const a in d)this._publicOptions[a]=d[a]}blur(){this._core.blur()}focus(){this._core.focus()}resize(d,a){this._verifyIntegers(d,a),this._core.resize(d,a)}open(d){this._core.open(d)}attachCustomKeyEventHandler(d){this._core.attachCustomKeyEventHandler(d)}registerLinkProvider(d){return this._core.registerLinkProvider(d)}registerCharacterJoiner(d){return this._checkProposedApi(),this._core.registerCharacterJoiner(d)}deregisterCharacterJoiner(d){this._checkProposedApi(),this._core.deregisterCharacterJoiner(d)}registerMarker(d=0){return this._verifyIntegers(d),this._core.registerMarker(d)}registerDecoration(d){var a,c,m;return this._checkProposedApi(),this._verifyPositiveIntegers((a=d.x)!==null&&a!==void 0?a:0,(c=d.width)!==null&&c!==void 0?c:0,(m=d.height)!==null&&m!==void 0?m:0),this._core.registerDecoration(d)}hasSelection(){return this._core.hasSelection()}select(d,a,c){this._verifyIntegers(d,a,c),this._core.select(d,a,c)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(d,a){this._verifyIntegers(d,a),this._core.selectLines(d,a)}dispose(){super.dispose()}scrollLines(d){this._verifyIntegers(d),this._core.scrollLines(d)}scrollPages(d){this._verifyIntegers(d),this._core.scrollPages(d)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(d){this._verifyIntegers(d),this._core.scrollToLine(d)}clear(){this._core.clear()}write(d,a){this._core.write(d,a)}writeln(d,a){this._core.write(d),this._core.write(`\r
`,a)}paste(d){this._core.paste(d)}refresh(d,a){this._verifyIntegers(d,a),this._core.refresh(d,a)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(d){this._addonManager.loadAddon(this,d)}static get strings(){return s}_verifyIntegers(...d){for(const a of d)if(a===1/0||isNaN(a)||a%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...d){for(const a of d)if(a&&(a===1/0||isNaN(a)||a%1!=0||a<0))throw new Error("This API only accepts positive integers")}}h.Terminal=x})(),v})())})(Uo);var Ld=Uo.exports,Wo={exports:{}};(function(e,t){(function(r,l){e.exports=l()})(self,()=>(()=>{var r={};return(()=>{var l=r;Object.defineProperty(l,"__esModule",{value:!0}),l.FitAddon=void 0,l.FitAddon=class{activate(u){this._terminal=u}dispose(){}fit(){const u=this.proposeDimensions();if(!u||!this._terminal||isNaN(u.cols)||isNaN(u.rows))return;const v=this._terminal._core;this._terminal.rows===u.rows&&this._terminal.cols===u.cols||(v._renderService.clear(),this._terminal.resize(u.cols,u.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const u=this._terminal._core,v=u._renderService.dimensions;if(v.css.cell.width===0||v.css.cell.height===0)return;const h=this._terminal.options.scrollback===0?0:u.viewport.scrollBarWidth,s=window.getComputedStyle(this._terminal.element.parentElement),n=parseInt(s.getPropertyValue("height")),f=Math.max(0,parseInt(s.getPropertyValue("width"))),g=window.getComputedStyle(this._terminal.element),p=n-(parseInt(g.getPropertyValue("padding-top"))+parseInt(g.getPropertyValue("padding-bottom"))),_=f-(parseInt(g.getPropertyValue("padding-right"))+parseInt(g.getPropertyValue("padding-left")))-h;return{cols:Math.max(2,Math.floor(_/v.css.cell.width)),rows:Math.max(1,Math.floor(p/v.css.cell.height))}}}})(),r})())})(Wo);var Rd=Wo.exports,Dd=R('<div class="mb-2 px-3 py-2 rounded-lg text-sm"style="background:rgba(239, 68, 68, 0.1);color:var(--error-color)">'),Td=R('<div class="flex flex-col"style=height:80vh;minHeight:600px><div class="flex items-center gap-2 mb-2 px-3 py-2 rounded-lg"style=background:var(--bg-tertiary)><span></span><span class=text-sm style=color:var(--text-secondary)></span><span class="text-sm ml-auto"style=color:var(--text-muted)>Local System Terminal</span><button class="ml-2 px-3 py-1.5 rounded text-xs font-medium transition-all hover:opacity-80"title="Open in new window (recommended)"style=background:var(--accent-primary);color:white>Open in New Window</button></div><div class="flex-1 rounded-lg overflow-hidden"data-terminal=true tabindex=0 style="background:#0d1117;border:1px solid var(--border-color);padding:8px;minHeight:500px;height:100%;outline:none">');const Pd=e=>{const[t,r]=J(!1),[l,u]=J(null);let v=null,h,s=null,n=null;const f=()=>{if(!h||s){console.log("Terminal init skipped - container:",!!h,"term:",!!s);return}console.log("Initializing terminal...");try{if(s=new Ld.Terminal({theme:{background:"#0d1117",foreground:"#c9d1d9",cursor:"#58a6ff",cursorAccent:"#0d1117",selection:"rgba(88, 166, 255, 0.3)",black:"#484f58",red:"#ff7b72",green:"#3fb950",yellow:"#d29922",blue:"#58a6ff",magenta:"#bc8cff",cyan:"#39c5cf",white:"#b1bac4"},fontFamily:'"SF Mono", Monaco, "Cascadia Code", "Fira Code", monospace',fontSize:13,cursorBlink:!0,cursorStyle:"bar"}),console.log("Terminal created:",s),n=new Rd.FitAddon,s.loadAddon(n),s.open(h),console.log("Terminal opened in container, element:",s.element),setTimeout(()=>{n?.fit(),s.element&&(s.element.focus(),s.element.setAttribute("tabindex","0")),s.focus(),console.log("Terminal fitted and focused, activeElement:",document.activeElement)},100),s.onData(b=>{if(console.log("TERMINAL INPUT CAPTURED:",b,"char codes:",Array.from(b).map(C=>C.charCodeAt(0))),v&&v.readyState===WebSocket.OPEN){const C=JSON.stringify({type:"input",data:b});console.log("Sending to WebSocket:",C),v.send(C)}else console.warn("WebSocket not ready, state:",v?.readyState)}),console.log("Input handler attached to terminal"),h){const b=C=>{console.log("Direct keydown on container:",C.key,"code:",C.code),s&&!s.element?.contains(document.activeElement)&&s.focus()};h.addEventListener("keydown",b),h._keydownHandler=b}}catch(b){console.error("Failed to initialize terminal:",b),u(`Failed to load terminal: ${b}`)}},g=()=>{const C=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/api/local/terminal`;console.log("Connecting to WebSocket:",C);try{v=new WebSocket(C),v.onopen=()=>{console.log("WebSocket connected!"),r(!0),u(null),s&&(s.write(`\r
\x1B[32mConnected to local terminal\x1B[0m\r
\r
`),n&&(n.fit(),v?.send(JSON.stringify({type:"resize",cols:s.cols,rows:s.rows}))),setTimeout(()=>{s.focus(),console.log("Terminal focused after connection, element:",s.element)},100))},v.onmessage=x=>{s&&s.write(x.data)},v.onerror=x=>{console.error("WebSocket error:",x),u("WebSocket connection failed"),r(!1),s&&s.write(`\r
\x1B[31mConnection error\x1B[0m\r
`)},v.onclose=()=>{console.log("WebSocket closed"),r(!1),s&&s.write(`\r
\x1B[31mConnection closed\x1B[0m\r
`)}}catch(x){console.error("Failed to create WebSocket:",x),u(`Failed to connect: ${x}`)}};Mt(()=>{e.isOpen?(console.log("Modal opened, initializing terminal..."),setTimeout(()=>{f(),setTimeout(()=>{g()},200)},100)):(console.log("Modal closed, cleaning up..."),v&&(v.close(),v=null),s&&(s.dispose(),s=null),h&&h._keydownHandler&&(h.removeEventListener("keydown",h._keydownHandler),delete h._keydownHandler),n=null,r(!1),u(null))}),Xt(()=>{const b=()=>{n&&s&&(n.fit(),v&&v.readyState===WebSocket.OPEN&&v.send(JSON.stringify({type:"resize",cols:s.cols,rows:s.rows})))};window.addEventListener("resize",b),or(()=>{window.removeEventListener("resize",b)})}),or(()=>{v&&(v.close(),v=null),s&&(s.dispose(),s=null),n=null});const p=()=>{v&&(v.close(),v=null),s&&(s.dispose(),s=null),h&&h._keydownHandler&&(h.removeEventListener("keydown",h._keydownHandler),delete h._keydownHandler),n=null,r(!1),u(null),e.onClose()},_=()=>{window.open("/terminal","_blank","width=1200,height=800"),e.onClose()};return A(it,{get isOpen(){return e.isOpen},onClose:p,title:"Local Terminal",size:"full",get children(){var b=Td(),C=b.firstChild,x=C.firstChild,o=x.nextSibling,d=o.nextSibling,a=d.nextSibling,c=C.nextSibling;i(o,()=>t()?"Connected":"Disconnected"),a.$$click=_,i(b,A(q,{get when(){return l()},get children(){var $=Dd();return i($,l),$}}),c),c.$$keydown=$=>{console.log("Container keydown:",$.key,"target:",$.target),$.stopPropagation()},c.$$click=$=>{console.log("Container clicked, focusing terminal..."),$.stopPropagation(),s&&(s.focus(),h?.focus(),console.log("Terminal focused, element:",s.element,"activeElement:",document.activeElement))};var m=h;return typeof m=="function"?Wt(m,c):h=c,re(()=>He(x,`w-2 h-2 rounded-full ${t()?"bg-green-500":"bg-red-500"}`)),b}})};Qe(["click","keydown"]);var Id=R('<svg viewBox="0 0 256 206"class="w-5 h-5"fill=none><path d="M170.252 56.819l22.253-22.253 1.483-9.37C153.437-11.677 88.976-7.496 52.42 33.92 42.267 45.423 34.734 59.764 30.717 74.573l7.97-1.123 44.505-7.34 3.436-3.513c19.797-21.742 53.27-24.667 76.128-5.632l7.496-.146z"fill=#EA4335></path><path d="M224.205 73.918a100.249 100.249 0 00-30.217-48.722l-31.232 31.232a55.515 55.515 0 0120.379 44.037v5.544c15.35 0 27.797 12.446 27.797 27.796 0 15.352-12.446 27.573-27.797 27.573h-55.671l-5.466 5.621v33.339l5.466 5.389h55.67c40.143.312 73.076-31.857 73.388-72 .178-23.106-10.736-44.898-29.84-59.653l-2.477.844z"fill=#4285F4></path><path d="M71.87 205.796h55.593V161.29H71.87a27.275 27.275 0 01-11.467-2.545l-7.97 2.468-22.331 22.253-1.949 7.65c12.758 9.603 28.39 14.758 44.484 14.68h-.767z"fill=#34A853></path><path d="M71.87 50.525C31.727 50.837-1.207 84.447.081 124.59c.72 22.632 11.389 43.821 28.925 57.476l32.25-32.25c-16.292-7.378-23.503-26.672-16.125-42.964a31.86 31.86 0 0116.125-16.125l-32.25-32.25A72.002 72.002 0 0071.87 50.525z"fill=#FBBC05>'),Bd=R('<svg viewBox="0 0 256 153"class="w-5 h-5"fill=none><path d="M72.392 55.438c0 3.137.34 5.68.933 7.545a45.373 45.373 0 002.712 6.103c.424.678.593 1.356.593 1.95 0 .847-.508 1.695-1.61 2.543l-5.34 3.56c-.763.509-1.526.763-2.205.763-.847 0-1.695-.424-2.543-1.187a26.224 26.224 0 01-3.051-3.984 65.48 65.48 0 01-2.628-5.001c-6.612 7.798-14.92 11.698-24.922 11.698-7.12 0-12.8-2.035-16.954-6.103-4.153-4.07-6.272-9.495-6.272-16.277 0-7.206 2.543-13.054 7.714-17.462 5.17-4.408 12.037-6.612 20.682-6.612 2.882 0 5.849.254 8.985.678 3.137.424 6.358 1.102 9.749 1.865V29.33c0-6.443-1.356-10.935-3.984-13.563-2.712-2.628-7.29-3.9-13.817-3.9-2.967 0-6.018.34-9.155 1.103-3.136.762-6.188 1.695-9.155 2.882-.763.34-1.441.593-1.95.763-.508.17-.932.254-1.271.254-1.102 0-1.61-.763-1.61-2.374v-4.153c0-1.272.17-2.205.593-2.713.424-.508 1.187-1.017 2.374-1.525 2.967-1.526 6.527-2.798 10.68-3.815C24.922.678 29.33.085 33.992.085c10.256 0 17.716 2.374 22.463 7.12 4.662 4.747 7.036 11.952 7.036 21.615v28.618h-.1z"fill=#252F3E></path><path d="M30.94 67.052c2.798 0 5.68-.509 8.731-1.526 3.052-1.017 5.765-2.882 8.054-5.425 1.356-1.61 2.374-3.39 2.882-5.51.509-2.12.848-4.661.848-7.629v-3.646a70.732 70.732 0 00-7.799-1.44 63.56 63.56 0 00-7.968-.509c-5.68 0-9.833 1.102-12.63 3.39-2.798 2.289-4.154 5.51-4.154 9.749 0 3.984 1.017 6.95 3.136 8.985 2.035 2.12 5.001 3.137 8.9 3.137v.424z"fill=#252F3E></path><path d="M126.434 74.087c-1.441 0-2.374-.254-2.967-.847-.593-.509-1.102-1.61-1.525-3.052l-17.039-56.05c-.424-1.526-.678-2.543-.678-3.136 0-1.272.593-1.95 1.78-1.95h8.308c1.526 0 2.543.254 3.052.847.593.509 1.017 1.61 1.44 3.052l12.206 48.082 11.359-48.082c.34-1.526.763-2.543 1.356-3.052.593-.508 1.695-.847 3.136-.847h6.782c1.526 0 2.543.254 3.136.847.593.509 1.102 1.61 1.357 3.052l11.528 48.675 12.545-48.675c.424-1.526.932-2.543 1.441-3.052.593-.508 1.61-.847 3.051-.847h7.883c1.187 0 1.865.678 1.865 1.95 0 .338-.085.678-.17 1.101-.084.424-.254 1.017-.508 1.78l-17.378 56.219c-.424 1.526-.932 2.543-1.526 3.052-.593.508-1.61.847-2.966.847h-7.29c-1.526 0-2.544-.254-3.137-.847-.593-.593-1.102-1.61-1.356-3.136l-11.274-46.877-11.19 46.793c-.339 1.526-.763 2.543-1.356 3.136-.593.593-1.695.848-3.137.848h-7.29z"fill=#252F3E></path><path d="M201.462 78.325c-4.408 0-8.816-.508-13.055-1.525-4.238-1.017-7.544-2.12-9.748-3.39-1.357-.763-2.29-1.61-2.629-2.374-.339-.763-.508-1.61-.508-2.374v-4.322c0-1.61.593-2.374 1.695-2.374.423 0 .847.085 1.271.254.424.17 1.102.424 1.865.763 2.543 1.187 5.34 2.12 8.308 2.798 3.051.678 6.018 1.017 9.07 1.017 4.831 0 8.562-.847 11.105-2.543 2.543-1.695 3.9-4.153 3.9-7.29 0-2.119-.678-3.9-2.035-5.34-1.356-1.441-3.984-2.713-7.798-3.9l-11.19-3.475c-5.68-1.78-9.918-4.408-12.546-7.883-2.628-3.39-3.984-7.205-3.984-11.274 0-3.306.678-6.188 2.035-8.731 1.356-2.543 3.136-4.747 5.425-6.527 2.288-1.865 4.916-3.221 8.053-4.153 3.136-.932 6.442-1.356 9.918-1.356 1.78 0 3.645.085 5.425.339 1.865.254 3.56.593 5.255.932 1.61.424 3.136.847 4.577 1.356 1.44.508 2.543 1.017 3.305 1.525.932.593 1.61 1.187 1.95 1.865.339.593.508 1.44.508 2.458v3.984c0 1.61-.593 2.458-1.695 2.458-.593 0-1.526-.254-2.798-.763-4.238-1.95-9.07-2.882-14.495-2.882-4.408 0-7.883.678-10.341 2.12-2.459 1.44-3.73 3.645-3.73 6.781 0 2.12.763 3.9 2.289 5.34 1.525 1.441 4.408 2.882 8.562 4.153l10.935 3.475c5.595 1.78 9.665 4.238 12.122 7.374 2.459 3.136 3.646 6.697 3.646 10.681 0 3.39-.678 6.442-1.95 9.155-1.356 2.713-3.22 5.086-5.594 7.036-2.374 2.035-5.255 3.56-8.647 4.577-3.56 1.102-7.374 1.61-11.444 1.61z"fill=#252F3E></path><path d="M237.596 145.256c-29.126 21.531-71.418 32.974-107.813 32.974-50.996 0-96.927-18.853-131.65-50.235-2.713-2.459-.339-5.849 2.967-3.9 37.517 21.785 83.787 34.922 131.65 34.922 32.296 0 67.78-6.697 100.414-20.598 4.916-2.12 9.07 3.221 4.432 6.837z"fill=#FF9900></path><path d="M249.548 131.524c-3.73-4.747-24.668-2.289-34.078-1.102-2.882.339-3.306-2.12-.678-3.9 16.7-11.698 43.99-8.308 47.127-4.408 3.136 3.984-.848 31.314-16.531 44.369-2.374 2.035-4.662.932-3.56-1.78 3.475-8.562 11.189-28.449 7.72-33.179z"fill=#FF9900>'),Od=R('<svg viewBox="0 0 96 96"class="w-5 h-5"fill=none><path d="M33.337 6.11L2.305 81.954h21.792L57.67 6.11H33.337z"fill=#0078D4></path><path d="M71.175 26.316H43.09L20.97 82.097h22.125l28.08-55.781z"fill=#0078D4></path><path d="M79.04 6.11L57.8 89.9h18.41l21.484-83.79H79.04z"fill=#0078D4>'),Hd=R('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#0530AD><path d="M0 7.5h4.05v.9H0zm5.4 0v.9H6.3v-.9h-.9zm3.6 0v.9h4.05v-.9H9zm8.1 0v.9h.9v-.9h-.9zm3.6 0v.9H24v-.9h-3.3zM0 9.3h4.05v.9H0zm5.4 0v.9H6.3v-.9h-.9zm3.6 0v.9h4.05v-.9H9zm8.1 0v.9h.9v-.9h-.9zm3.6 0v.9H24v-.9h-3.3zM0 11.1h2.7v.9H0zm3.6 0v.9h1.35c.124-.31.248-.6.45-.9H3.6zm5.4 0v.9h1.35c.186.31.31.6.45.9H9zm8.1 0c.124.31.248.6.45.9h1.35v-.9h-.9zm2.7 0v.9h.9c.186-.31.31-.6.45-.9h-.45zm2.7 0c.124.31.248.6.45.9H24v-.9h-3.3zM0 12.9h2.7v.9H0zm3.6 0v.9h.45c-.186-.31-.31-.6-.45-.9zm5.4 0c-.124-.31-.248-.6-.45-.9v.9H9zm8.1 0v.9c.124-.31.248-.6.45-.9h-.45zm2.7 0c-.186.31-.31.6-.45.9h.45v-.9zm2.7 0v.9H24v-.9h-3.3zM0 14.7h4.05v.9H0zm5.4 0v.9H6.3v-.9h-.9zm3.6 0v.9h4.05v-.9H9zm8.1 0v.9h.9v-.9h-.9zm3.6 0v.9H24v-.9h-3.3zM0 16.5h4.05v.9H0zm5.4 0v.9H6.3v-.9h-.9zm3.6 0v.9h4.05v-.9H9zm8.1 0v.9h.9v-.9h-.9zm3.6 0v.9H24v-.9h-3.3z">'),Nd=R('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#F80000><path d="M6.754 16.15h10.492c2.294 0 4.254-1.96 4.254-4.254S19.54 7.642 17.246 7.642H6.754C4.46 7.642 2.5 9.602 2.5 11.896s1.96 4.254 4.254 4.254zm0-6.204h10.492c1.078 0 1.95.872 1.95 1.95s-.872 1.95-1.95 1.95H6.754c-1.078 0-1.95-.872-1.95-1.95s.872-1.95 1.95-1.95z">'),zd=R('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#0080FF><path d="M12.04 24v-4.8h-4.8V24H12zm-4.8-4.8v-3.6H3.6v3.6h3.64zm0-3.6v-3.6H3.6v3.6h3.64zm6-3.6v-3.6H9.6v3.6h3.64zm0 0a7.2 7.2 0 007.2-7.2H12.04v4.8h4.8v-4.8h-4.8v7.2z"></path><path d="M12 0C5.37 0 0 5.37 0 12h4.8A7.2 7.2 0 0112 4.8V0z">'),Fd=R('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#FF6A00><path d="M21.692 18.5L12 13.5l-9.692 5L0 17l12-6.154L24 17l-2.308 1.5zm0-6L12 7.5l-9.692 5L0 11l12-6.154L24 11l-2.308 1.5z">'),jd=R('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#00A95C><path d="M12 2L2 7l10 5 10-5-10-5zm0 7.5L4.5 7 12 4.5l7.5 2.5L12 9.5zm0 3L4.5 10 12 7.5l7.5 2.5L12 12.5zm0 3L4.5 13 12 10.5l7.5 2.5L12 15.5zm0 3L4.5 16 12 13.5l7.5 2.5L12 18.5zm0 3L2 17v2l10 5 10-5v-2l-10 4.5z">'),Ud=R('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#007BFC><path d="M19.743 6H23.5l-7 12h-3.757L19.743 6zM.5 6h3.757l7 12H7.5L.5 6zm7.28 0h3.757l5.723 9.8h-3.757L7.78 6z">'),Vd=R('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#123F6D><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-4h2v2h-2zm0-8h2v6h-2z">'),Wd=R('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#D50C2D><path d="M4 4h16v16H4V4zm2 2v12h12V6H6zm2 2h3v8H8V8zm5 0h3v8h-3V8z">'),qd=R('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#326CE5><path d="M12 2L2 7l10 5 10-5-10-5zm0 12l-8-4v7l8 4 8-4v-7l-8 4z">'),Kd=R('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#326CE5><path d="M12 2a10 10 0 100 20 10 10 0 000-20zm0 18a8 8 0 110-16 8 8 0 010 16zm-2-6l5-3-5-3v6z">'),Yd=R('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#2496ED><path d="M13.983 11.078h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.185.185 0 00-.185.185v1.888c0 .102.083.185.185.185zm-2.954-5.43h2.118a.186.186 0 00.186-.186V3.574a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.186zm0 2.716h2.118a.187.187 0 00.186-.186V6.29a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.887c0 .102.082.185.185.186zm-2.93 0h2.12a.186.186 0 00.184-.186V6.29a.185.185 0 00-.185-.185H8.1a.185.185 0 00-.185.185v1.887c0 .102.083.185.185.186zm-2.964 0h2.119a.186.186 0 00.185-.186V6.29a.185.185 0 00-.185-.185H5.136a.186.186 0 00-.186.185v1.887c0 .102.084.185.186.186zm5.893 2.715h2.118a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185zm-2.93 0h2.12a.185.185 0 00.184-.185V9.006a.185.185 0 00-.184-.186h-2.12a.185.185 0 00-.184.185v1.888c0 .102.083.185.185.185zm-2.964 0h2.119a.185.185 0 00.185-.185V9.006a.185.185 0 00-.185-.186h-2.12a.186.186 0 00-.185.186v1.887c0 .102.084.185.186.185zm-2.92 0h2.12a.185.185 0 00.184-.185V9.006a.185.185 0 00-.184-.186h-2.12a.185.185 0 00-.184.185v1.888c0 .102.082.185.185.185zM23.763 9.89c-.065-.051-.672-.51-1.954-.51-.338.001-.676.03-1.01.087-.248-1.7-1.653-2.53-1.716-2.566l-.344-.199-.226.327c-.284.438-.49.922-.612 1.43-.23.97-.09 1.882.403 2.661-.595.332-1.55.413-1.744.42H.751a.751.751 0 00-.75.748 11.376 11.376 0 00.692 4.062c.545 1.428 1.355 2.48 2.41 3.124 1.18.723 3.1 1.137 5.275 1.137.983.003 1.963-.086 2.93-.266a12.248 12.248 0 003.823-1.389c.98-.567 1.86-1.288 2.61-2.136 1.252-1.418 1.998-2.997 2.553-4.4h.221c1.372 0 2.215-.549 2.68-1.009.309-.293.55-.65.707-1.046l.098-.288z">'),Gd=R('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#FFC61C><path d="M12 2L2 7v10l10 5 10-5V7L12 2zm0 2.5L19 8l-7 3.5L5 8l7-3.5zM4 9.5l7 3.5v7l-7-3.5v-7zm16 0v7l-7 3.5v-7l7-3.5z">'),Jd=R('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#0075A8><path d="M12 2L2 7v10l10 5 10-5V7L12 2zm0 3l6 3-6 3-6-3 6-3zm-7 5l6 3v5l-6-3v-5zm14 0v5l-6 3v-5l6-3z">'),Xd=R('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#EE0000><path d="M21.665 11.812l-9.027-3.046a.67.67 0 00-.423 0l-9.027 3.046a.67.67 0 00-.445.631v5.545c0 .286.18.542.445.632l9.027 3.046a.67.67 0 00.423 0l9.027-3.046a.67.67 0 00.445-.632v-5.545a.67.67 0 00-.445-.631zm-9.242 7.726l-7.37-2.49v-3.62l7.37 2.488v3.622zm.408-4.97l-7.576-2.558 7.576-2.558 7.576 2.558-7.576 2.558zm8.03 2.48l-7.37 2.49v-3.622l7.37-2.488v3.62z">'),Zd=R('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=currentColor><path d="M19.35 10.04A7.49 7.49 0 0012 4C9.11 4 6.6 5.64 5.35 8.04A5.994 5.994 0 000 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z">'),Qd=R('<svg class="w-4 h-4 ml-auto"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"clip-rule=evenodd>'),eh=R('<button class="w-full px-3 py-2 text-sm text-left flex items-center gap-2 transition-colors"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path></svg>All Namespaces'),th=R('<div class="px-3 py-4 text-sm text-center"style=color:var(--text-muted)>No namespaces found'),rh=R('<div class="absolute top-full left-0 mt-1 w-64 rounded-lg shadow-xl z-[200] overflow-hidden"style="background:var(--bg-card);border:1px solid var(--border-color)"><div class="p-2 border-b"style=border-color:var(--border-color)><div class=relative><svg class="absolute left-2.5 top-1/2 -translate-y-1/2 w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg><input type=text placeholder="Search namespaces..."class="w-full rounded-md pl-8 pr-3 py-1.5 text-sm"autofocus style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div></div><div class="max-h-64 overflow-y-auto"></div><div class="px-3 py-2 text-xs border-t"style=border-color:var(--border-color);color:var(--text-muted)> namespaces available'),sh=R('<kbd class="absolute right-3 top-1/2 -translate-y-1/2 px-1.5 py-0.5 rounded text-xs font-mono"style="background:var(--bg-tertiary);color:var(--text-muted);border:1px solid var(--border-color)">âŒ˜K'),dl=R("<span class=text-xs style=color:var(--text-muted)>"),ih=R('<div class="px-3 py-4 text-sm text-center"style=color:var(--text-muted)>No clusters found'),nh=R('<div class="px-3 py-4 text-sm text-center"style=color:var(--text-muted)>No clusters available'),lh=R('<div class="absolute top-full right-0 mt-1 w-72 rounded-lg shadow-xl z-[200] overflow-hidden"style="background:var(--bg-card);border:1px solid var(--border-color)"><div class="p-2 border-b"style=border-color:var(--border-color)><div class=relative><svg class="absolute left-2.5 top-1/2 -translate-y-1/2 w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg><input type=text placeholder="Search clusters..."class="w-full rounded-md pl-8 pr-3 py-1.5 text-sm"autofocus style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div></div><div class="max-h-64 overflow-y-auto"></div><div class="px-3 py-2 text-xs border-t"style=border-color:var(--border-color);color:var(--text-muted)> cluster<!> available'),oh=R('<header class="h-16 header-glass flex items-center justify-between px-6 relative"style=z-index:100><div class="flex items-center gap-4"><div class="flex items-center gap-2 relative"><label class=text-sm style=color:var(--text-secondary)>Namespace:</label><button class="flex items-center gap-2 rounded-lg px-3 py-1.5 text-sm min-w-[180px] justify-between"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><span class=truncate></span><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 9l-7 7-7-7"></path></svg></button></div><div class=relative><svg class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg><input id=global-search type=text placeholder="Search resources..."class="w-72 rounded-lg pl-10 pr-16 py-1.5 text-sm"></div></div><div class="flex items-center gap-4"><div class="flex items-center gap-2 relative"><label class=text-sm style=color:var(--text-secondary)>Cluster:</label><button class="flex items-center gap-2 rounded-lg px-3 py-1.5 text-sm min-w-[200px] justify-between"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><div class="flex items-center gap-2"><div class="flex flex-col items-start"><span class=truncate></span></div></div><div class="flex items-center gap-1"><span></span><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 9l-7 7-7-7"></path></svg></div></button></div><button class=icon-btn title="Open Local Terminal"style=display:flex;alignItems:center;justifyContent:center;minWidth:40px;minHeight:40px><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></button><button class=icon-btn title="Refresh all data"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button><button class="flex items-center gap-2 px-4 py-2 btn-accent rounded-lg"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg><span>AI'),ah=R('<div class="px-3 py-2 text-sm"style=color:var(--text-muted)>Loading...'),hl=R('<svg class="w-4 h-4 flex-shrink-0"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"clip-rule=evenodd>'),ch=R('<button class="w-full px-3 py-2 text-sm text-left flex items-center gap-2 transition-colors"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg><span class="truncate flex-1">'),dh=R("<span>"),hh=R('<button class="cursor-pointer hover:opacity-80 transition-opacity">'),uh=R("<div class=opacity-70>"),fh=R('<div class="px-3 py-2 text-sm"style=color:var(--text-muted)>Loading clusters...'),gh=R('<button class="w-full px-3 py-2 text-sm text-left flex items-center gap-2 transition-colors"><span></span><div class="flex-1 min-w-0"><span class="truncate block">'),ph=R('<div class="flex items-center gap-2 px-3 py-1.5 rounded-lg"title="Loading cloud provider info..."style="background:var(--bg-secondary);border:1px solid var(--border-color)"><span class="text-sm font-medium"style=color:var(--text-primary)>...'),vh=R('<button class="flex items-center gap-2 px-3 py-1.5 rounded-lg cursor-pointer hover:opacity-80 transition-opacity"style="background:var(--bg-secondary);border:1px solid var(--border-color)"><span class="text-sm font-medium"style=color:var(--text-primary)></span><svg class="w-3 h-3 ml-1"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14">'),mh=R('<div class="flex items-center gap-2 px-3 py-1.5 rounded-lg opacity-90"style="background:var(--bg-secondary);border:1px solid var(--border-color)"><span class="text-sm font-medium"style=color:var(--text-primary)>');const ul={gcp:()=>Id(),aws:()=>Bd(),azure:()=>Od(),ibm:()=>Hd(),oracle:()=>Nd(),digitalocean:()=>zd(),alibaba:()=>Fd(),linode:()=>jd(),vultr:()=>Ud(),ovh:()=>Vd(),hetzner:()=>Wd(),kind:()=>qd(),minikube:()=>Kd(),"docker-desktop":()=>Yd(),k3s:()=>Gd(),rancher:()=>Jd(),openshift:()=>Xd(),generic:()=>Zd()},_h=()=>{const[e,t]=J(!1),[r,l]=J(!1),[u,v]=J(""),[h,s]=J(!1),[n,f]=J(""),[g,p]=J(!1),[_,b]=J(!1);let C,x,o,d;const[a]=qe(()=>Re.getCloudInfo().catch(()=>null)),c=()=>{const B=a()?.provider?.toLowerCase()||"generic";return ul[B]||ul.generic},m=()=>{const B=a()?.provider?.toLowerCase();return{gcp:"GCP",aws:"AWS",azure:"Azure",ibm:"IBM",oracle:"Oracle",digitalocean:"DO",alibaba:"Alibaba",linode:"Linode",vultr:"Vultr",ovh:"OVH",hetzner:"Hetzner",kind:"Kind",minikube:"Minikube","docker-desktop":"Docker",k3s:"K3s",rancher:"Rancher",openshift:"OpenShift"}[B||""]||a()?.displayName||"Cloud"},$=ze(()=>{const B=u().toLowerCase();return B?hi().filter(O=>O.toLowerCase().includes(B)):hi()}),S=ze(()=>{const B=n().toLowerCase();return B?ms().filter(O=>O.name.toLowerCase().includes(B)):ms()});if(typeof window<"u"){document.addEventListener("keydown",O=>{(O.ctrlKey||O.metaKey)&&O.key==="k"&&(O.preventDefault(),document.getElementById("global-search")?.focus())});const B=O=>{r()&&C&&!C.contains(O.target)&&x&&!x.contains(O.target)&&(l(!1),v("")),h()&&o&&!o.contains(O.target)&&d&&!d.contains(O.target)&&(s(!1),f(""))};document.addEventListener("mousedown",B),or(()=>document.removeEventListener("mousedown",B))}const E=B=>{Po(B),l(!1),v("")},y=async B=>{if(B!==St()){p(!0);try{await cd(B)}catch(O){console.error("Failed to switch context:",O)}finally{p(!1),s(!1),f("")}}},k=()=>tt()==="_all"?"All Namespaces":tt();return(()=>{var B=oh(),O=B.firstChild,T=O.firstChild,I=T.firstChild,M=I.nextSibling,P=M.firstChild,L=P.nextSibling,H=T.nextSibling,w=H.firstChild,N=w.nextSibling,z=O.nextSibling,V=z.firstChild,Q=V.firstChild,F=Q.nextSibling,U=F.firstChild,W=U.firstChild,ce=W.firstChild,D=U.nextSibling,j=D.firstChild,K=j.nextSibling,ee=V.nextSibling,ne=ee.nextSibling,te=ne.nextSibling;M.$$click=()=>l(!r());var le=x;typeof le=="function"?Wt(le,M):x=M,i(P,k),i(T,A(q,{get when(){return r()},get children(){var Y=rh(),se=Y.firstChild,G=se.firstChild,ie=G.firstChild,X=ie.nextSibling,fe=se.nextSibling,Ae=fe.nextSibling,Ce=Ae.firstChild,$e=C;return typeof $e=="function"?Wt($e,Y):C=Y,X.$$input=ye=>v(ye.target.value),i(fe,A(q,{get when(){return!u()||"all namespaces".includes(u().toLowerCase())},get children(){var ye=eh(),he=ye.firstChild;return he.nextSibling,ye.addEventListener("mouseleave",ae=>ae.currentTarget.style.background=tt()==="_all"?"var(--bg-tertiary)":"transparent"),ye.addEventListener("mouseenter",ae=>ae.currentTarget.style.background="var(--bg-tertiary)"),ye.$$click=()=>E("_all"),i(ye,A(q,{get when(){return tt()==="_all"},get children(){return Qd()}}),null),re(ae=>{var ue=tt()==="_all"?"var(--bg-tertiary)":"transparent",Se=tt()==="_all"?"var(--accent-primary)":"var(--text-primary)";return ue!==ae.e&&oe(ye,"background",ae.e=ue),Se!==ae.t&&oe(ye,"color",ae.t=Se),ae},{e:void 0,t:void 0}),ye}}),null),i(fe,A(q,{get when(){return!Ci.loading},get fallback(){return ah()},get children(){return A(Ne,{get each(){return $()},children:ye=>(()=>{var he=ch(),ae=he.firstChild,ue=ae.nextSibling;return he.addEventListener("mouseleave",Se=>Se.currentTarget.style.background=tt()===ye?"var(--bg-tertiary)":"transparent"),he.addEventListener("mouseenter",Se=>Se.currentTarget.style.background="var(--bg-tertiary)"),he.$$click=()=>E(ye),i(ue,ye),i(he,A(q,{get when(){return tt()===ye},get children(){return hl()}}),null),re(Se=>{var _e=tt()===ye?"var(--bg-tertiary)":"transparent",de=tt()===ye?"var(--accent-primary)":"var(--text-primary)";return _e!==Se.e&&oe(he,"background",Se.e=_e),de!==Se.t&&oe(he,"color",Se.t=de),Se},{e:void 0,t:void 0}),he})()})}}),null),i(fe,A(q,{get when(){return Me(()=>!!u())()&&$().length===0},get children(){return th()}}),null),i(Ae,()=>hi().length,Ce),re(()=>X.value=u()),Y}}),null),N.addEventListener("blur",()=>t(!1)),N.addEventListener("focus",()=>t(!0)),N.$$input=Y=>Tc(Y.target.value),i(H,A(q,{get when(){return!e()},get children(){return sh()}}),null),F.$$click=()=>s(!h());var Z=d;return typeof Z=="function"?Wt(Z,F):d=F,i(U,A(q,{get when(){return Me(()=>!!a())()&&!a.loading},get fallback(){return(()=>{var Y=dh();return re(()=>He(Y,`w-2 h-2 rounded-full ${al().connected?"bg-green-500":"bg-red-500"}`)),Y})()},get children(){return(()=>{const Y=a();return Y?.consoleUrl&&Y.consoleUrl.trim()!==""?(()=>{var G=hh();return G.$$click=ie=>{ie.stopPropagation(),Y.consoleUrl&&window.open(Y.consoleUrl,"_blank","noopener,noreferrer")},i(G,()=>c()()),re(()=>Xe(G,"title",`Open ${Y?.displayName||"Cloud"} Console`)),G})():(()=>{var G=uh();return i(G,()=>c()()),re(()=>Xe(G,"title",`${Y?.displayName||"Local"} Cluster (no console available)`)),G})()})()}}),W),i(ce,(()=>{var Y=Me(()=>!!g());return()=>Y()?"Switching...":St()||"Select cluster"})()),i(W,A(q,{get when(){return Me(()=>!!a())()&&!a.loading},get children(){var Y=dl();return i(Y,()=>a()?.region||""),Y}}),null),i(V,A(q,{get when(){return h()},get children(){var Y=lh(),se=Y.firstChild,G=se.firstChild,ie=G.firstChild,X=ie.nextSibling,fe=se.nextSibling,Ae=fe.nextSibling,Ce=Ae.firstChild,$e=Ce.nextSibling;$e.nextSibling;var ye=o;return typeof ye=="function"?Wt(ye,Y):o=Y,X.$$input=he=>f(he.target.value),i(fe,A(q,{get when(){return!yn.loading},get fallback(){return fh()},get children(){return A(Ne,{get each(){return S()},children:he=>(()=>{var ae=gh(),ue=ae.firstChild,Se=ue.nextSibling,_e=Se.firstChild;return ae.addEventListener("mouseleave",de=>de.currentTarget.style.background=he.isCurrent?"var(--bg-tertiary)":"transparent"),ae.addEventListener("mouseenter",de=>de.currentTarget.style.background="var(--bg-tertiary)"),ae.$$click=()=>y(he.name),i(_e,()=>he.name),i(Se,A(q,{get when(){return he.serverVersion},get children(){var de=dl();return i(de,()=>he.serverVersion),de}}),null),i(ae,A(q,{get when(){return he.isCurrent},get children(){return hl()}}),null),re(de=>{var be=he.isCurrent?"var(--bg-tertiary)":"transparent",ve=he.isCurrent?"var(--accent-primary)":"var(--text-primary)",ge=`w-2 h-2 rounded-full flex-shrink-0 ${he.connected?"bg-green-500":"bg-red-500"}`;return be!==de.e&&oe(ae,"background",de.e=be),ve!==de.t&&oe(ae,"color",de.t=ve),ge!==de.a&&He(ue,de.a=ge),de},{e:void 0,t:void 0,a:void 0}),ae})()})}}),null),i(fe,A(q,{get when(){return Me(()=>!!n())()&&S().length===0},get children(){return ih()}}),null),i(fe,A(q,{get when(){return Me(()=>!yn.loading)()&&ms().length===0},get children(){return nh()}}),null),i(Ae,()=>ms().length,Ce),i(Ae,()=>ms().length!==1?"s":"",$e),re(()=>X.value=n()),Y}}),null),ee.$$click=()=>b(!0),ne.$$click=Y=>{const se=Y.currentTarget;se.classList.add("refreshing"),setTimeout(()=>se.classList.remove("refreshing"),500),zo()},i(z,A(Md,{}),te),ar(te,"click",Oc,!0),i(z,A(q,{get when(){return Me(()=>!!a())()&&!a.loading},get fallback(){return(()=>{var Y=ph(),se=Y.firstChild;return i(Y,()=>c()(),se),Y})()},get children(){return(()=>{const Y=a();return Y?.consoleUrl&&Y.consoleUrl.trim()!==""?(()=>{var G=vh(),ie=G.firstChild;return G.$$click=()=>{Y.consoleUrl&&window.open(Y.consoleUrl,"_blank","noopener,noreferrer")},i(G,()=>c()(),ie),i(ie,m),re(()=>Xe(G,"title",`Click to open ${Y?.displayName||"Cloud"} Console - ${Y?.region||""}`)),G})():(()=>{var G=mh(),ie=G.firstChild;return i(G,()=>c()(),ie),i(ie,m),re(()=>Xe(G,"title",`${Y?.displayName||"Local"} Cluster - ${Y?.region||""} (no cloud console available)`)),G})()})()}}),null),i(B,A(Pd,{get isOpen(){return _()},onClose:()=>b(!1)}),null),re(Y=>{var se=`w-4 h-4 transition-transform ${r()?"rotate-180":""}`,G=g(),ie=g()?.7:1,X=`w-2 h-2 rounded-full ${al().connected?"bg-green-500":"bg-red-500"}`,fe=`w-4 h-4 transition-transform ${h()?"rotate-180":""}`;return se!==Y.e&&Xe(L,"class",Y.e=se),G!==Y.t&&(F.disabled=Y.t=G),ie!==Y.a&&oe(F,"opacity",Y.a=ie),X!==Y.o&&He(j,Y.o=X),fe!==Y.i&&Xe(K,"class",Y.i=fe),Y},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),re(()=>N.value=Do()),B})()};Qe(["click","input"]);var bh=R('<svg class="w-6 h-6"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><rect x=4 y=4 width=16 height=16 rx=2></rect><rect x=9 y=9 width=6 height=6></rect><line x1=9 y1=1 x2=9 y2=4></line><line x1=15 y1=1 x2=15 y2=4></line><line x1=9 y1=20 x2=9 y2=23></line><line x1=15 y1=20 x2=15 y2=23></line><line x1=20 y1=9 x2=23 y2=9></line><line x1=20 y1=14 x2=23 y2=14></line><line x1=1 y1=9 x2=4 y2=9></line><line x1=1 y1=14 x2=4 y2=14>'),yh=R('<svg class="w-6 h-6"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><rect x=3 y=4 width=18 height=16 rx=2></rect><line x1=7 y1=8 x2=7 y2=16></line><line x1=11 y1=8 x2=11 y2=16></line><line x1=15 y1=8 x2=15 y2=16></line><line x1=3 y1=12 x2=21 y2=12>'),xh=R('<svg class="w-6 h-6"viewBox="0 0 24 24"fill=currentColor><path d="M12 2L3 7v10l9 5 9-5V7l-9-5zm0 2.18l6.9 3.85L12 11.9 5.1 8.03 12 4.18zM5 9.48l6 3.35v6.7l-6-3.35v-6.7zm8 10.05v-6.7l6-3.35v6.7l-6 3.35z">'),$h=R('<svg class="w-6 h-6"viewBox="0 0 24 24"fill=currentColor><path d="M4 4h16v4H4V4zm0 6h16v4H4v-4zm0 6h16v4H4v-4z"></path><circle cx=6 cy=6 r=1></circle><circle cx=6 cy=12 r=1></circle><circle cx=6 cy=18 r=1>'),wh=R('<svg class="w-5 h-5"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z">'),Sh=R('<svg class="w-5 h-5"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1=12 y1=9 x2=12 y2=13></line><line x1=12 y1=17 x2=12.01 y2=17>'),Ch=R('<svg class="w-4 h-4"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><polyline points="20 6 9 17 4 12">'),kh=R('<svg class="w-4 h-4"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><line x1=18 y1=6 x2=6 y2=18></line><line x1=6 y1=6 x2=18 y2=18>'),Ah=R('<div class="text-sm mt-1"style=color:var(--text-muted)>'),Mh=R('<div class="card p-5 cursor-pointer transition-all hover:scale-[1.02] hover:shadow-lg"><div class="flex items-start justify-between"><div><div class="text-sm font-medium"style=color:var(--text-muted)></div><div class="text-3xl font-bold mt-2"></div></div><div class="w-12 h-12 rounded-xl flex items-center justify-center">'),Eh=R('<div class="space-y-2 max-h-64 overflow-auto">'),Lh=R('<div class=space-y-6><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Dashboard</h1><p style=color:var(--text-secondary)>Cluster overview and health monitoring</p></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"></div><div class="card p-6"><h2 class="text-lg font-semibold mb-4"style=color:var(--text-primary)>Resource Overview</h2><div class="grid grid-cols-2 md:grid-cols-5 gap-4"><div class="p-4 rounded-lg text-center cursor-pointer hover:opacity-80 transition-opacity"style=background:var(--bg-tertiary)><div class="text-3xl font-bold"style=color:#06b6d4></div><div class="text-sm mt-1"style=color:var(--text-secondary)>Pods</div></div><div class="p-4 rounded-lg text-center cursor-pointer hover:opacity-80 transition-opacity"style=background:var(--bg-tertiary)><div class="text-3xl font-bold"style=color:#3b82f6></div><div class="text-sm mt-1"style=color:var(--text-secondary)>Deployments</div></div><div class="p-4 rounded-lg text-center cursor-pointer hover:opacity-80 transition-opacity"style=background:var(--bg-tertiary)><div class="text-3xl font-bold"style=color:#8b5cf6></div><div class="text-sm mt-1"style=color:var(--text-secondary)>Services</div></div><div class="p-4 rounded-lg text-center cursor-pointer hover:opacity-80 transition-opacity"style=background:var(--bg-tertiary)><div class="text-3xl font-bold"style=color:#22c55e></div><div class="text-sm mt-1"style=color:var(--text-secondary)>Nodes</div></div><div class="p-4 rounded-lg text-center cursor-pointer hover:opacity-80 transition-opacity"style=background:var(--bg-tertiary)><div class="text-3xl font-bold"style=color:#f59e0b>$</div><div class="text-sm mt-1"style=color:var(--text-secondary)>Est. Monthly Cost</div></div></div></div><div class="grid grid-cols-1 lg:grid-cols-2 gap-6"><div class="card p-6"><h2 class="text-lg font-semibold mb-4 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><path d="M12 2a10 10 0 1 0 10 10H12V2z"></path><path d="M12 2a10 10 0 0 1 10 10"></path><circle cx=12 cy=12 r=3></circle></svg>AI Insights & Recommendations</h2><div class=space-y-3></div></div><div class="card p-6"><h2 class="text-lg font-semibold mb-4 flex items-center gap-2 cursor-pointer hover:opacity-80"style=color:var(--text-primary)>Security Overview<svg class="w-4 h-4 ml-auto"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><path d="M9 18l6-6-6-6"></path></svg></h2><div class=space-y-4><div class="flex items-center justify-between p-4 rounded-lg"style=background:var(--bg-tertiary)><span style=color:var(--text-secondary)>Security Score</span><span class="text-2xl font-bold">/100</span></div><div class=space-y-2></div></div></div></div><div class="card p-6"><h2 class="text-lg font-semibold mb-4"style=color:var(--text-primary)>Recent Events'),Rh=R('<ul class="mt-2 text-xs space-y-1"style=color:var(--text-muted)>'),Dh=R('<button class="mt-3 px-3 py-1.5 text-xs font-medium rounded-md transition-all hover:opacity-80"> â†’'),Th=R('<div class="p-4 rounded-lg border"><div class="flex items-start gap-3"><div></div><div class=flex-1><div class=font-medium></div><div class="text-sm mt-1"style=color:var(--text-secondary)>'),Ph=R('<li class="flex items-center gap-2"><span class="w-1 h-1 rounded-full">'),Ih=R('<span class="text-xs px-1.5 py-0.5 rounded"style=background:var(--bg-tertiary);color:var(--text-muted)>'),Bh=R('<div class="flex items-center justify-between p-3 rounded-lg"style=background:var(--bg-secondary)><div class="flex items-center gap-2"><span></span><span style=color:var(--text-primary)></span></div><span>'),Oh=R('<div class="text-center py-8"style=color:var(--text-muted)>No recent events'),Hh=R('<div class="flex items-start gap-3 p-3 rounded-lg"style=background:var(--bg-secondary)><span></span><div class="flex-1 min-w-0"><div class="text-sm font-medium truncate"style=color:var(--text-primary)>: </div><div class="text-xs truncate"style=color:var(--text-muted)>');const Nh=()=>bh(),zh=()=>yh(),Fh=()=>xh(),jh=()=>$h(),fl=()=>wh(),Xs=()=>Sh(),nn=()=>Ch(),gl=()=>kh(),Zs=e=>(()=>{var t=Mh(),r=t.firstChild,l=r.firstChild,u=l.firstChild,v=u.nextSibling,h=l.nextSibling;return ar(t,"click",e.onClick,!0),i(u,()=>e.label),i(v,()=>e.value),i(l,A(q,{get when(){return e.subtext},get children(){var s=Ah();return i(s,()=>e.subtext),s}}),null),i(h,()=>e.icon({})),re(s=>{var n=`4px solid ${e.color}`,f=e.color,g=`${e.color}20`,p=e.color;return n!==s.e&&oe(t,"border-left",s.e=n),f!==s.t&&oe(v,"color",s.t=f),g!==s.a&&oe(h,"background",s.a=g),p!==s.o&&oe(h,"color",s.o=p),s},{e:void 0,t:void 0,a:void 0,o:void 0}),t})(),Uh=()=>{const[e,{refetch:t}]=qe(()=>{const S=St(),E=Gt();return{context:S,refresh:E}},async()=>Re.getMetrics()),[r,{refetch:l}]=qe(()=>{const S=St(),E=Gt();return{context:S,refresh:E}},async()=>Re.getPods("_all")),[u,{refetch:v}]=qe(()=>{const S=St(),E=Gt();return{context:S,refresh:E}},async()=>Re.getDeployments("_all")),[h,{refetch:s}]=qe(()=>{const S=St(),E=Gt();return{context:S,refresh:E}},async()=>Re.getServices("_all")),n=os,[f,{refetch:g}]=qe(()=>{const S=St(),E=Gt();return{context:S,refresh:E}},async()=>Re.getEvents()),[p,{refetch:_}]=qe(()=>{const S=St(),E=Gt();return{context:S,refresh:E}},async()=>{try{return await Re.getClusterCost()}catch(S){return console.error("Dashboard cost API error:",S),null}}),b=()=>{const S=r();return!S||!Array.isArray(S)?0:S.filter(E=>E.status==="Running").length},C=()=>{const S=r();return Array.isArray(S)?S.length:0},x=()=>{const S=n();return!S||!Array.isArray(S)?0:S.filter(E=>E.status==="Ready").length},o=()=>{const S=n();return Array.isArray(S)?S.length:0},d=()=>{const S=f();return Array.isArray(S)?S.slice(0,10):[]},a=ze(()=>{const S=r()||[],E=[],y=S.filter(I=>!I.securityContext);y.length>0?E.push({name:"Security Context Missing",status:"fail",severity:"critical",count:y.length,details:`${y.length} pods have no security context defined`}):S.length>0&&E.push({name:"Security Context",status:"pass",severity:"critical",details:"All pods have security context configured"});const k=S.filter(I=>I.securityContext?.runAsRoot===!0||!I.securityContext?.runAsNonRoot&&!I.securityContext?.runAsUser);k.length>0?E.push({name:"Running as Root",status:"fail",severity:"critical",count:k.length,details:`${k.length} pods may run as root user`}):S.length>0&&E.push({name:"Non-Root User",status:"pass",severity:"critical",details:"All pods run as non-root"});const B=S.filter(I=>I.privileged===!0);B.length>0?E.push({name:"Privileged Containers",status:"fail",severity:"critical",count:B.length,details:`${B.length} containers running in privileged mode`}):S.length>0&&E.push({name:"No Privileged Containers",status:"pass",severity:"critical",details:"No privileged containers detected"});const O=S.filter(I=>!I.resources?.limits);O.length>0?E.push({name:"Resource Limits Missing",status:"warning",severity:"high",count:O.length,details:`${O.length} pods without resource limits`}):S.length>0&&E.push({name:"Resource Limits",status:"pass",severity:"high",details:"All pods have resource limits configured"});const T=S.filter(I=>I.securityContext?.readOnlyRootFilesystem!==!0);return T.length>0&&S.length>0&&E.push({name:"Writable Root Filesystem",status:"warning",severity:"medium",count:T.length,details:`${T.length} pods have writable root filesystem`}),S.length===0&&E.push({name:"No Pods to Analyze",status:"warning",severity:"low",details:"No pods found for security analysis"}),E}),c=ze(()=>{const S=a();if(S.length===0)return 100;const E={critical:25,high:15,medium:10,low:5};let y=0,k=0;return S.forEach(B=>{const O=E[B.severity];y+=O,B.status==="pass"?k+=O:B.status==="warning"&&(k+=O*.5)}),y>0?Math.round(k/y*100):100}),m=()=>{const S=[],E=r()||[],y=n()||[],k=e(),B=E.filter(H=>H.status==="Pending");B.length>0&&S.push({type:"warning",title:"Pending Pods Detected",message:`${B.length} pods are in Pending state.`,details:B.slice(0,3).map(H=>`${H.namespace}/${H.name}`),navigateTo:"pods",actionLabel:"View Pods"});const O=E.filter(H=>H.status==="Failed"||H.status==="Error"||H.status==="CrashLoopBackOff");O.length>0&&S.push({type:"error",title:"Failed Pods Alert",message:`${O.length} pods are failing. Immediate attention recommended.`,details:O.slice(0,3).map(H=>`${H.namespace}/${H.name} (${H.status})`),navigateTo:"pods",actionLabel:"View Failed Pods"});const T=y.filter(H=>H.status!=="Ready");T.length>0&&S.push({type:"error",title:"Node Health Issue",message:`${T.length} nodes are not ready.`,details:T.slice(0,3).map(H=>H.name),navigateTo:"nodes",actionLabel:"View Nodes"});const I=k?.cpu!=null?typeof k.cpu=="object"?k.cpu.percentage:Number(k.cpu):null,M=k?.memory!=null?typeof k.memory=="object"?k.memory.percentage:Number(k.memory):null;I&&I>80&&S.push({type:"warning",title:"High CPU Usage",message:`Cluster CPU at ${I.toFixed(1)}%. Consider scaling or optimizing workloads.`}),M&&M>85&&S.push({type:"warning",title:"High Memory Usage",message:`Cluster memory at ${M.toFixed(1)}%. Consider adding capacity.`});const P=a().filter(H=>H.status==="fail"&&H.severity==="critical");P.length>0&&S.push({type:"error",title:"Critical Security Issues",message:`${P.length} critical security findings require immediate attention.`,details:P.map(H=>`${H.name}${H.count?` (${H.count} affected)`:""}`),navigateTo:"security",actionLabel:"View Security Details"});const L=a().filter(H=>H.status==="fail"&&H.severity==="high");return L.length>0&&P.length===0&&S.push({type:"warning",title:"Security Warnings",message:`${L.length} high-severity security findings detected.`,details:L.map(H=>H.name),navigateTo:"security",actionLabel:"View Security Details"}),S.length===0&&S.push({type:"success",title:"Cluster Healthy",message:"All systems operating normally. No issues detected."}),S},$=S=>S>=80?"var(--success-color)":S>=60?"var(--warning-color)":"var(--error-color)";return(()=>{var S=Lh(),E=S.firstChild,y=E.firstChild;y.nextSibling;var k=E.nextSibling,B=k.nextSibling,O=B.firstChild,T=O.nextSibling,I=T.firstChild,M=I.firstChild;M.nextSibling;var P=I.nextSibling,L=P.firstChild;L.nextSibling;var H=P.nextSibling,w=H.firstChild;w.nextSibling;var N=H.nextSibling,z=N.firstChild;z.nextSibling;var V=N.nextSibling,Q=V.firstChild;Q.firstChild,Q.nextSibling;var F=B.nextSibling,U=F.firstChild,W=U.firstChild,ce=W.nextSibling,D=U.nextSibling,j=D.firstChild,K=j.firstChild,ee=j.nextSibling,ne=ee.firstChild,te=ne.firstChild,le=te.nextSibling,Z=le.firstChild,Y=ne.nextSibling,se=F.nextSibling;return se.firstChild,i(k,A(Zs,{label:"CPU Usage",get value(){return Me(()=>e()?.cpu!=null)()?`${typeof e().cpu=="object"?e().cpu.percentage?.toFixed(1):Number(e().cpu).toFixed(1)}%`:"--"},subtext:"Cluster average",color:"#06b6d4",icon:Nh}),null),i(k,A(Zs,{label:"Memory Usage",get value(){return Me(()=>e()?.memory!=null)()?`${typeof e().memory=="object"?e().memory.percentage?.toFixed(1):Number(e().memory).toFixed(1)}%`:"--"},subtext:"Cluster average",color:"#8b5cf6",icon:zh}),null),i(k,A(Zs,{label:"Running Pods",get value(){return`${b()}/${C()}`},get subtext(){return`${C()>0?(b()/C()*100).toFixed(0):0}% healthy`},color:"#22c55e",icon:Fh,onClick:()=>At("pods")}),null),i(k,A(Zs,{label:"Nodes",get value(){return Me(()=>!!n.loading)()?"...":`${x()}/${o()}`},get subtext(){return Me(()=>!!n.loading)()?"Loading...":Me(()=>x()===o()&&o()>0)()?"All healthy":o()===0?"No nodes":"Some unhealthy"},get color(){return Me(()=>!!n.loading)()?"#6b7280":x()===o()&&o()>0?"#22c55e":"#f59e0b"},icon:jh,onClick:()=>At("nodes")}),null),I.$$click=()=>At("pods"),i(M,C),P.$$click=()=>At("deployments"),i(L,()=>(u()||[]).length),H.$$click=()=>At("services"),i(w,()=>(h()||[]).length),N.$$click=()=>At("nodes"),i(z,(()=>{var G=Me(()=>!!n.loading);return()=>G()?"...":o()})()),V.$$click=()=>At("cost"),i(Q,()=>p()?.monthlyCost?.toFixed(0)||"--",null),i(ce,A(Ne,{get each(){return m()},children:G=>(()=>{var ie=Th(),X=ie.firstChild,fe=X.firstChild,Ae=fe.nextSibling,Ce=Ae.firstChild,$e=Ce.nextSibling;return i(fe,(()=>{var ye=Me(()=>G.type==="error");return()=>ye()?A(Xs,{}):Me(()=>G.type==="warning")()?A(Xs,{}):Me(()=>G.type==="success")()?A(nn,{}):A(fl,{})})()),i(Ce,()=>G.title),i($e,()=>G.message),i(Ae,A(q,{get when(){return Me(()=>!!G.details)()&&G.details.length>0},get children(){var ye=Rh();return i(ye,A(Ne,{get each(){return G.details},children:he=>(()=>{var ae=Ph(),ue=ae.firstChild;return i(ae,he,null),re(Se=>oe(ue,"background",G.type==="error"?"var(--error-color)":G.type==="warning"?"var(--warning-color)":"var(--accent-primary)")),ae})()})),ye}}),null),i(Ae,A(q,{get when(){return Me(()=>!!G.navigateTo)()&&G.actionLabel},get children(){var ye=Dh(),he=ye.firstChild;return ye.$$click=()=>At(G.navigateTo),i(ye,()=>G.actionLabel,he),re(ae=>{var ue=G.type==="error"?"rgba(239, 68, 68, 0.2)":G.type==="warning"?"rgba(245, 158, 11, 0.2)":"rgba(6, 182, 212, 0.2)",Se=G.type==="error"?"var(--error-color)":G.type==="warning"?"var(--warning-color)":"var(--accent-primary)",_e=`1px solid ${G.type==="error"?"rgba(239, 68, 68, 0.3)":G.type==="warning"?"rgba(245, 158, 11, 0.3)":"rgba(6, 182, 212, 0.3)"}`;return ue!==ae.e&&oe(ye,"background",ae.e=ue),Se!==ae.t&&oe(ye,"color",ae.t=Se),_e!==ae.a&&oe(ye,"border",ae.a=_e),ae},{e:void 0,t:void 0,a:void 0}),ye}}),null),re(ye=>{var he=G.type==="error"?"rgba(239, 68, 68, 0.1)":G.type==="warning"?"rgba(245, 158, 11, 0.1)":G.type==="success"?"rgba(34, 197, 94, 0.1)":"rgba(6, 182, 212, 0.1)",ae=G.type==="error"?"rgba(239, 68, 68, 0.3)":G.type==="warning"?"rgba(245, 158, 11, 0.3)":G.type==="success"?"rgba(34, 197, 94, 0.3)":"rgba(6, 182, 212, 0.3)",ue=G.type==="error"?"var(--error-color)":G.type==="warning"?"var(--warning-color)":G.type==="success"?"var(--success-color)":"var(--accent-primary)",Se=G.type==="error"?"var(--error-color)":G.type==="warning"?"var(--warning-color)":G.type==="success"?"var(--success-color)":"var(--accent-primary)";return he!==ye.e&&oe(ie,"background",ye.e=he),ae!==ye.t&&oe(ie,"border-color",ye.t=ae),ue!==ye.a&&oe(fe,"color",ye.a=ue),Se!==ye.o&&oe(Ce,"color",ye.o=Se),ye},{e:void 0,t:void 0,a:void 0,o:void 0}),ie})()})),j.$$click=()=>At("security"),i(j,A(fl,{}),K),i(le,c,Z),i(Y,A(Ne,{get each(){return a()},children:G=>(()=>{var ie=Bh(),X=ie.firstChild,fe=X.firstChild,Ae=fe.nextSibling,Ce=X.nextSibling;return i(fe,()=>G.severity.toUpperCase()),i(Ae,()=>G.name),i(X,A(q,{get when(){return G.count},get children(){var $e=Ih();return i($e,()=>G.count),$e}}),null),i(Ce,(()=>{var $e=Me(()=>G.status==="pass");return()=>$e()?A(nn,{}):Me(()=>G.status==="fail")()?A(gl,{}):A(Xs,{})})(),null),i(Ce,(()=>{var $e=Me(()=>G.status==="pass");return()=>$e()?"Pass":G.status==="fail"?"Fail":"Warning"})(),null),re($e=>{var ye=`px-1.5 py-0.5 rounded text-xs font-medium ${G.severity==="critical"?"bg-red-500/20 text-red-400":G.severity==="high"?"bg-orange-500/20 text-orange-400":G.severity==="medium"?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"}`,he=`flex items-center gap-1 text-sm ${G.status==="pass"?"text-green-400":G.status==="fail"?"text-red-400":"text-yellow-400"}`;return ye!==$e.e&&He(fe,$e.e=ye),he!==$e.t&&He(Ce,$e.t=he),$e},{e:void 0,t:void 0}),ie})()})),i(se,A(q,{get when(){return d().length>0},get fallback(){return Oh()},get children(){var G=Eh();return i(G,A(Ne,{get each(){return d()},children:ie=>(()=>{var X=Hh(),fe=X.firstChild,Ae=fe.nextSibling,Ce=Ae.firstChild,$e=Ce.firstChild,ye=Ce.nextSibling;return i(fe,(()=>{var he=Me(()=>ie.type==="Warning");return()=>he()?A(Xs,{}):Me(()=>ie.type==="Normal")()?A(nn,{}):A(gl,{})})()),i(Ce,()=>ie.reason,$e),i(Ce,()=>ie.object,null),i(ye,()=>ie.message),re(()=>He(fe,`mt-0.5 ${ie.type==="Warning"?"text-yellow-400":ie.type==="Normal"?"text-green-400":"text-red-400"}`)),X})()})),G}}),null),re(G=>oe(le,"color",$(c()))),S})()};Qe(["click"]);var Vh=R('<svg class="w-4 h-4 text-green-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 13l4 4L19 7">'),Wh=R("<span class=text-green-400>Copied!"),qh=R('<div class=relative><div class="flex items-center justify-end gap-2 mb-2"><button class="flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm transition-colors"style=background:var(--bg-tertiary);color:var(--text-secondary)></button><button class="flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm transition-colors"style=background:var(--bg-tertiary);color:var(--text-secondary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>Download</button></div><div class="code-block overflow-auto max-h-[60vh]"><pre class="text-sm leading-relaxed">'),Kh=R('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z">');const tr=e=>{const[t,r]=J(!1),l=async()=>{await navigator.clipboard.writeText(e.yaml),r(!0),e.onCopy?.(),setTimeout(()=>r(!1),2e3)},u=()=>{const s=new Blob([e.yaml],{type:"text/yaml"}),n=URL.createObjectURL(s),f=document.createElement("a");f.href=n,f.download=`${e.title||"resource"}.yaml`,f.click(),URL.revokeObjectURL(n)},v=s=>s.split(`
`).map(n=>{if(n.trim().startsWith("#"))return`<span class="text-gray-500">${h(n)}</span>`;const f=n.match(/^(\s*)([a-zA-Z0-9_-]+)(:)/);if(f){const[,g,p,_]=f,b=n.slice(f[0].length);return`${g}<span class="text-cyan-400">${h(p)}</span>${_}<span class="text-amber-300">${h(b)}</span>`}return n.trim().startsWith("-")?`<span class="text-purple-400">${h(n)}</span>`:h(n)}).join(`
`),h=s=>s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");return(()=>{var s=qh(),n=s.firstChild,f=n.firstChild,g=f.nextSibling,p=n.nextSibling,_=p.firstChild;return f.$$click=l,i(f,A(q,{get when(){return t()},get fallback(){return[Kh(),"Copy"]},get children(){return[Vh(),Wh()]}})),g.$$click=u,re(()=>_.innerHTML=v(e.yaml)),s})()};Qe(["click"]);var Yh=R("<div class=text-red-400>Error: "),Gh=R("<pre class=whitespace-pre-wrap>"),Jh=R('<div class="flex flex-col h-[60vh]"><div class="flex items-center justify-end gap-2 mb-2"><button class="flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm transition-colors"style=background:var(--bg-tertiary);color:var(--text-secondary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="flex-1 font-mono text-sm p-4 rounded-lg overflow-auto"style="background:#0d1117;color:#c9d1d9;border:1px solid var(--border-color)">'),Xh=R('<div class="flex items-center justify-center h-full"><div class=spinner>');const cr=e=>{const[t]=qe(()=>({type:e.resourceType,name:e.name,ns:e.namespace,open:e.isOpen}),async v=>{if(!v.open||!v.name)return"";const h=v.ns?`&namespace=${v.ns}`:"",s=await fetch(`/api/${v.type}/describe?name=${v.name}${h}`);if(!s.ok)throw new Error("Failed to fetch describe output");return(await s.json()).describe||""}),r=async()=>{await navigator.clipboard.writeText(t()||"")},l=v=>v.split(`
`).map(h=>{const s=h.match(/^([A-Za-z][A-Za-z\s]+):\s*(.*)$/);if(s&&h.indexOf(":")<30){const[,f,g]=s;return`<span class="text-cyan-400">${u(f)}:</span> <span class="text-amber-300">${u(g)}</span>`}const n=h.match(/^(\s+)([A-Za-z][A-Za-z\s-]+):\s*(.*)$/);if(n){const[,f,g,p]=n;return`${f}<span class="text-blue-400">${u(g)}:</span> ${u(p)}`}return u(h)}).join(`
`),u=v=>v.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");return A(it,{get isOpen(){return e.isOpen},get onClose(){return e.onClose},get title(){return`Describe: ${e.name}`},size:"xl",get children(){var v=Jh(),h=v.firstChild,s=h.firstChild,n=h.nextSibling;return s.$$click=r,i(n,A(q,{get when(){return!t.loading},get fallback(){return Xh()},get children(){return[A(q,{get when(){return t.error},get children(){var f=Yh();return f.firstChild,i(f,()=>t.error?.message,null),f}}),(()=>{var f=Gh();return re(()=>f.innerHTML=l(t()||"")),f})()]}})),v}})};Qe(["click"]);var Zh=R('<div class="fixed z-50 py-2 rounded-lg shadow-xl min-w-[180px]"style="background:var(--bg-card);border:1px solid var(--border-color);box-shadow:0 10px 40px rgba(0, 0, 0, 0.3)">'),Qh=R('<div class=relative><button class="flex items-center justify-center p-1 rounded transition-all hover:bg-opacity-80"title=Actions style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z">'),eu=R('<div class="my-1 border-t"style=border-color:var(--border-color)>'),tu=R("<div class=spinner style=width:16px;height:16px>"),ru=R('<button class="w-full flex items-center gap-3 px-4 py-2 text-sm transition-colors"style=background:transparent>'),su=R('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2>');const pl={shell:"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z",portforward:"M13 10V3L4 14h7v7l9-11h-7z",logs:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",yaml:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4",describe:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",restart:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15",delete:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",scale:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4",details:"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z",edit:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"},Tt=e=>{const[t,r]=J(!1),[l,u]=J({top:0,left:0});let v;const h=f=>{if(f.stopPropagation(),v){const g=v.getBoundingClientRect();u({top:g.bottom+4,left:g.right-180})}r(!t())},s=f=>{r(!1),f.onClick()},n=f=>{t()&&v&&!v.contains(f.target)&&r(!1)};return typeof window<"u"&&(document.addEventListener("click",n),or(()=>document.removeEventListener("click",n))),(()=>{var f=Qh(),g=f.firstChild;g.$$click=h;var p=v;return typeof p=="function"?Wt(p,g):v=g,i(f,A(q,{get when(){return t()},get children(){return A(Xr,{get children(){var _=Zh();return i(_,A(Ne,{get each(){return e.actions},children:b=>[A(q,{get when(){return b.divider},get children(){return eu()}}),(()=>{var C=ru();return C.addEventListener("mouseleave",x=>{x.currentTarget.style.background="transparent"}),C.addEventListener("mouseenter",x=>{!b.disabled&&!b.loading&&(x.currentTarget.style.background=b.variant==="danger"?"rgba(239, 68, 68, 0.1)":"var(--bg-tertiary)")}),C.$$click=()=>!b.disabled&&!b.loading&&s(b),i(C,A(q,{get when(){return b.loading},get fallback(){return(()=>{var x=su(),o=x.firstChild;return re(()=>Xe(o,"d",pl[b.icon]||pl.details)),x})()},get children(){return tu()}}),null),i(C,(()=>{var x=Me(()=>!!b.loading);return()=>x()?`${b.label}...`:b.label})(),null),re(x=>{var o=b.disabled||b.loading,d={"opacity-50 cursor-not-allowed":b.disabled||b.loading,"hover:bg-opacity-50":!b.disabled&&!b.loading},a=b.variant==="danger"?"var(--error-color)":"var(--text-primary)";return o!==x.e&&(C.disabled=x.e=o),x.t=Mo(C,d,x.t),a!==x.a&&oe(C,"color",x.a=a),x},{e:void 0,t:void 0,a:void 0}),C})()]})),re(b=>{var C=`${l().top}px`,x=`${l().left}px`;return C!==b.e&&oe(_,"top",b.e=C),x!==b.t&&oe(_,"left",b.t=x),b},{e:void 0,t:void 0}),_}})}}),null),f})()};Qe(["click"]);var iu=R('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>â–²</span><span>â–¼'),nu=R('<div class="card p-4"><h3 class="font-semibold mb-3 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>Active Port Forwards</h3><div class="flex flex-wrap gap-2">'),lu=R('<div class=overflow-x-auto><table style=table-layout:auto><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Status </div></th><th class=whitespace-nowrap>Ready</th><th class=whitespace-nowrap>IP</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">CPU </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Mem </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Restarts </div></th><th class=whitespace-nowrap>Node</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),ou=R('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:#161b22><div style=color:#8b949e>Showing <!> - <!> of <!> pods</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>â† Prev</button><span class="px-3 py-1"style=color:#c9d1d9>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Next â†’</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Last'),au=R('<div class="text-red-400 mb-2">Error: '),cu=R("<pre class=whitespace-pre-wrap>"),du=R('<div class="flex flex-col h-[60vh]"><div class="flex flex-wrap items-center gap-3 mb-3"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=50>Last 50 lines</option><option value=100>Last 100 lines</option><option value=500>Last 500 lines</option><option value=1000>Last 1000 lines</option></select><label class="flex items-center gap-2 px-3 py-2 rounded-lg cursor-pointer"><input type=checkbox class=hidden><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg><span class="text-sm font-medium"></span></label><input type=text placeholder="Search logs..."class="px-3 py-2 rounded-lg text-sm flex-1 min-w-[150px]"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><button class="p-2 rounded-lg hover:bg-[var(--bg-secondary)]"title="Refresh Logs"style=background:var(--bg-tertiary);color:var(--text-secondary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button><button class="px-3 py-2 rounded-lg text-sm flex items-center gap-1"style=background:var(--bg-tertiary);color:var(--text-secondary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>Download</button></div><div class="flex-1 font-mono text-xs p-4 rounded-lg overflow-auto"style="background:#0d1117;color:#c9d1d9;border:1px solid var(--border-color)">'),hu=R('<div class=space-y-4><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Local Port</label><input type=number min=1024 max=65535 class="w-full px-4 py-2 rounded-lg"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Remote Port</label><input type=number min=1 max=65535 class="w-full px-4 py-2 rounded-lg"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div class="p-3 rounded-lg text-sm"style=background:var(--bg-tertiary);color:var(--text-muted)>This will forward <code class="px-1 rounded"style=background:var(--bg-secondary)>localhost:</code> to <code class="px-1 rounded"style=background:var(--bg-secondary)>:</code></div><div class="flex gap-2"><button class="btn-secondary flex-1">Cancel</button><button class="btn-primary flex-1">Start'),uu=R('<div class=space-y-4><div class="flex items-start gap-3"><div class="flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center"style="background:rgba(239, 68, 68, 0.15)"><svg class="w-6 h-6"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--error-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div><div class=flex-1><p class="text-sm mb-2"style=color:var(--text-primary)>Are you sure you want to delete this pod?</p><div class="p-3 rounded-lg mb-4"style=background:var(--bg-tertiary)><div class="text-sm font-medium mb-1"style=color:var(--text-primary)></div><div class=text-xs style=color:var(--text-muted)>Namespace: </div></div><p class="text-xs mb-4"style=color:var(--text-muted)>This action cannot be undone. The pod will be permanently deleted from the cluster.</p></div></div><div class="flex items-center justify-end gap-3 pt-4 border-t"style=border-color:var(--border-color)><button class="px-4 py-2 rounded-lg text-sm font-medium transition-all hover:opacity-80"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)">Cancel</button><button class="px-4 py-2 rounded-lg text-sm font-medium transition-all hover:opacity-80 flex items-center gap-2"style=background:var(--error-color);color:white><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>Delete Pod'),fu=R('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Pods</h1><p style=color:var(--text-secondary)>Manage and monitor your Kubernetes pods</p></div><div class="flex items-center gap-3"><button class=icon-btn><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></button><button class=icon-btn title="Refresh Pods (Auto-refresh: 2s)"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Running</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--warning-color)"><span class=text-sm style=color:var(--text-secondary)>Pending</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--error-color)"><span class=text-sm style=color:var(--text-secondary)>Failed</span><span class="text-xl font-bold"style=color:var(--error-color)></span></div><div class=flex-1></div><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=all>All Status</option><option value=running>Running</option><option value=pending>Pending</option><option value=failed>Failed/Error</option><option value=succeeded>Succeeded</option></select><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class="overflow-hidden rounded-lg">'),gu=R('<div class="flex items-center gap-2 px-3 py-2 rounded-lg"style=background:var(--bg-tertiary)><span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span><span style=color:var(--text-primary)></span><span style=color:var(--text-muted)>localhost:<!> â†’ </span><a target=_blank class="text-xs px-2 py-1 rounded"style=background:var(--accent-primary);color:white>Open</a><button class="text-red-400 hover:text-red-300"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12">'),pu=R('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading pods...'),vu=R('<tr><td colspan=10 class="text-center py-8"style=color:var(--text-muted)>No pods found'),mu=R('<tr style="cursor:pointer;outlineOffset:-2px;transition:background-color 0.2s ease"><td><span class="font-medium text-xs"></span></td><td></td><td></td><td class=font-mono></td><td><span class="flex items-center"style=font-weight:600></span></td><td><span class="flex items-center"style=font-weight:600></span></td><td></td><td></td><td></td><td>'),_u=R("<span style=font-weight:bold> "),bu=R("<span>"),vl=R("<span style=color:#ef4444;font-size:0.6rem>â–²"),ml=R("<span style=color:#22c55e;font-size:0.6rem>â–¼"),yu=R('<div class="spinner mx-auto">'),xu=R('<span class="w-2 h-2 rounded-full bg-green-400 animate-pulse">'),$u=R('<div class="flex items-center justify-center h-full"><div class=spinner>'),wu=R("<div class=space-y-3>"),Su=R('<div class=space-y-6><div><h3 class="text-sm font-semibold mb-3"style=color:var(--text-secondary)>Basic Information</h3><div class="grid grid-cols-2 md:grid-cols-4 gap-3"><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>Status</div><div><span></span></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>Ready</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>CPU</div><div style=color:#ec4899;font-weight:600></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>Memory</div><div style=color:#f59e0b;font-weight:600></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>Restarts</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>Age</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>IP</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>Namespace</div><div style=color:var(--text-primary)></div></div></div><div class="mt-3 p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>Node</div><div class="text-sm break-all"style=color:var(--text-primary)></div></div></div><div><h3 class="text-sm font-semibold mb-3"style=color:var(--text-secondary)>Containers</h3></div><div class="grid grid-cols-2 sm:grid-cols-3 gap-3 pt-4"><button class="btn-primary flex items-center justify-center gap-2 px-4 py-3 rounded-lg"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>Shell</button><button class="btn-primary flex items-center justify-center gap-2 px-4 py-3 rounded-lg"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>Port Forward</button><button class="btn-secondary flex items-center justify-center gap-2 px-4 py-3 rounded-lg"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>Logs</button><button class="btn-secondary flex items-center justify-center gap-2 px-4 py-3 rounded-lg"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg>YAML</button><button class="btn-secondary flex items-center justify-center gap-2 px-4 py-3 rounded-lg"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>Describe'),Cu=R('<div class="p-4 text-center"><div class="spinner mx-auto">'),ku=R('<div class="p-4 rounded-lg border"style=background:var(--bg-secondary);border-color:var(--border-color)><div class="flex items-center justify-between mb-3"><div class="flex items-center gap-2"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg><span class=font-medium style=color:var(--text-primary)></span></div><span></span></div><div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm"><div><div class="text-xs mb-1"style=color:var(--text-muted)>Image</div><div class="p-2 rounded text-xs font-mono break-all"style=background:var(--bg-tertiary);color:var(--accent-primary)></div></div><div><div class="text-xs mb-1"style=color:var(--text-muted)>Container ID</div><div class="p-2 rounded text-xs font-mono truncate"style=background:var(--bg-tertiary);color:var(--text-secondary)>...</div></div><div><div class="text-xs mb-1"style=color:var(--text-muted)>Restart Count</div><div></div></div><div><div class="text-xs mb-1"style=color:var(--text-muted)>Started At</div><div style=color:var(--text-secondary)>');const Au=()=>{const[e,t]=J(""),[r,l]=J("all"),[u,v]=J("name"),[h,s]=J("asc"),[n,f]=J(1),[g,p]=J(20),[_,b]=J(null),[C,x]=J(!1),[o,d]=J(!1),[a,c]=J(!1),[m,$]=J(!1),[S,E]=J(!1),[y,k]=J(!1),[B,O]=J(!1),[T,I]=J(!1),[M,P]=J(null),[L,H]=J(8080),[w,N]=J(80),[z,{refetch:V}]=qe(Re.listPortForwards),[Q,F]=J(""),[U,W]=J(!1),[ce,D]=J(null),[j,K]=J(100),[ee,ne]=J(""),[te,le]=J(!1);let Z=null;const[Y,se]=J({}),[G,ie]=J({});let X=null;const[fe,Ae]=J(!1),[Ce,$e]=J(null);let ye;const he=Le=>{if(!Le||Le==="-")return 0;const Ve=Le.match(/^(\d+)/);return Ve?parseInt(Ve[1]):0},ae=(Le,Ve)=>{const nt=Y()[Le]?.[Ve],ct=G()[Le]?.[Ve];if(!nt||!ct)return null;const dt=he(nt),et=he(ct);return dt>et?"up":dt<et?"down":null},ue=async()=>{try{const Le=Y(),Ve=await Re.getPodMetrics(tt());Object.keys(Le).length>0&&ie(Le),se(Ve)}catch(Le){console.error("Failed to fetch metrics:",Le)}},[Se,_e]=J(0);let de=null;const be=(Le,Ve)=>{if(!Le)return"-";const nt=new Date(Le),dt=new Date().getTime()-nt.getTime();if(dt<0)return"0s";const et=Math.floor(dt/1e3),yt=Math.floor(et/60),ht=Math.floor(yt/60),kt=Math.floor(ht/24);if(et<120)return`${et}s`;if(yt<60){const gs=et%60;return`${yt}m${gs}s`}if(ht<24){const gs=yt%60;return`${ht}h${gs}m`}const Ui=ht%24;return`${kt}d${Ui}h`};let ve=null,ge=null;Xt(()=>{ue(),X=setInterval(ue,1e4),de=setInterval(()=>_e(Le=>Le+1),5e3),ve=setInterval(()=>{pe().catch(Le=>console.error("Background refresh error:",Le)),ue()},2e3),ge=Le=>{if(Le.target.tagName==="INPUT"||Le.target.tagName==="TEXTAREA")return;const Ve=Ue();if(Ve.length===0)return;const nt=Ce();switch(Le.key){case"ArrowDown":Le.preventDefault(),$e(ct=>ct===null?0:Math.min(ct+1,Ve.length-1));break;case"ArrowUp":Le.preventDefault(),$e(ct=>ct===null||ct===0?null:ct-1);break;case"Enter":Le.preventDefault(),nt!==null&&Ve[nt]&&Be(Ve[nt],"details");break;case"Escape":$e(null);break}},document.addEventListener("keydown",ge)}),or(()=>{X&&clearInterval(X),de&&clearInterval(de),ve&&clearInterval(ve),ge&&document.removeEventListener("keydown",ge)}),Mt(()=>{const Le=Ce();if(Le!==null&&ye){const Ve=ye.querySelectorAll("tbody tr");Ve[Le]&&Ve[Le].scrollIntoView({behavior:"smooth",block:"nearest"})}}),qe(Re.getNamespaces);const[me,{refetch:pe}]=qe(tt,Re.getPods),[xe,we]=J(!0);Mt(()=>{me()!==void 0&&xe()&&we(!1)});const[ke]=qe(()=>(C()||o())&&_()?{name:_().name,ns:_().namespace}:null,async Le=>Le&&(await Re.getPodYAML(Le.name,Le.ns)).yaml||""),Oe=Le=>{if(!Le)return 0;const Ve=Le.match(/^(\d+)m?$/);return Ve?parseInt(Ve[1]):0},Pe=Le=>{if(!Le)return 0;const Ve=Le.match(/^(\d+)(Ki|Mi|Gi)?$/);if(!Ve)return 0;const nt=parseInt(Ve[1]),ct=Ve[2];return ct==="Gi"?nt*1024:ct==="Ki"?nt/1024:nt},Ie=Le=>{if(!Le)return 0;let Ve=0;const nt=Le.match(/(\d+)d/),ct=Le.match(/(\d+)h/),dt=Le.match(/(\d+)m/);return nt&&(Ve+=parseInt(nt[1])*24*60),ct&&(Ve+=parseInt(ct[1])*60),dt&&(Ve+=parseInt(dt[1])),Ve},De=ze(()=>{let Le=me()||[];const Ve=e().toLowerCase(),nt=r();Ve&&(Le=Le.filter(et=>et.name.toLowerCase().includes(Ve)||et.namespace.toLowerCase().includes(Ve)||et.node?.toLowerCase().includes(Ve)||et.ip?.toLowerCase().includes(Ve))),nt!=="all"&&(nt==="running"?Le=Le.filter(et=>et.status==="Running"):nt==="pending"?Le=Le.filter(et=>et.status==="Pending"):nt==="failed"?Le=Le.filter(et=>["Failed","Error","CrashLoopBackOff"].includes(et.status)):nt==="succeeded"&&(Le=Le.filter(et=>et.status==="Succeeded")));const ct=u(),dt=h();return Le=[...Le].sort((et,yt)=>{let ht=0;switch(ct){case"name":ht=et.name.localeCompare(yt.name);break;case"namespace":ht=et.namespace.localeCompare(yt.namespace);break;case"status":ht=et.status.localeCompare(yt.status);break;case"cpu":ht=Oe(et.cpu)-Oe(yt.cpu);break;case"memory":ht=Pe(et.memory)-Pe(yt.memory);break;case"restarts":ht=et.restarts-yt.restarts;break;case"age":ht=Ie(et.age)-Ie(yt.age);break}return dt==="asc"?ht:-ht}),Le}),je=ze(()=>Math.ceil(De().length/g())),Ue=ze(()=>{const Le=(n()-1)*g();return De().slice(Le,Le+g())}),Ke=ze(()=>{const Le=me()||[];return{running:Le.filter(Ve=>Ve.status==="Running").length,pending:Le.filter(Ve=>Ve.status==="Pending").length,failed:Le.filter(Ve=>["Failed","Error","CrashLoopBackOff"].includes(Ve.status)).length,total:Le.length}}),Te=Le=>{u()===Le?s(Ve=>Ve==="asc"?"desc":"asc"):(v(Le),s("asc")),f(1)},Ge=Le=>(()=>{var Ve=iu(),nt=Ve.firstChild,ct=nt.nextSibling;return re(dt=>{var et=u()===Le.field&&h()==="asc"?"var(--accent-primary)":"var(--text-muted)",yt=u()===Le.field&&h()==="desc"?"var(--accent-primary)":"var(--text-muted)";return et!==dt.e&&oe(nt,"color",dt.e=et),yt!==dt.t&&oe(ct,"color",dt.t=yt),dt},{e:void 0,t:void 0}),Ve})(),Be=(Le,Ve)=>{switch(b(Le),Ve){case"yaml":x(!0);break;case"describe":c(!0);break;case"logs":ot(Le,te()),$(!0);break;case"details":E(!0);break;case"shell":k(!0);break;case"portforward":O(!0);break}},We=async()=>{const Le=_();if(Le)try{await Re.startPortForward("pod",Le.name,Le.namespace,L(),w()),O(!1),V()}catch(Ve){console.error("Failed to start port forward:",Ve)}},Ye=async Le=>{try{await Re.stopPortForward(Le),V()}catch(Ve){console.error("Failed to stop port forward:",Ve)}},Ze=Le=>{const Ve=Le.containers?.[0]||"";window.open(`/api/pod/exec?name=${Le.name}&namespace=${Le.namespace}&container=${Ve}`,"_blank")},rt=()=>{Z&&(Z.close(),Z=null)},ot=async(Le,Ve=!1)=>{rt(),W(!0),D(null);const nt=Le.containers?.[0]||"",ct=`/api/pod/logs?name=${Le.name}&namespace=${Le.namespace}&container=${nt}&tail=${j()}${Ve?"&follow=true":""}`;if(Ve)F(""),Z=new EventSource(ct),Z.onmessage=dt=>{F(et=>et+dt.data+`
`),W(!1)},Z.onerror=()=>{D("Stream connection lost"),W(!1),rt()},Z.onopen=()=>{W(!1)};else try{const dt=await fetch(ct);if(!dt.ok){const yt=await dt.text();throw new Error(yt||`HTTP ${dt.status}`)}const et=await dt.json();F(et.logs||"No logs available")}catch(dt){D(dt.message||"Failed to fetch logs"),F("")}finally{W(!1)}},Ct=ze(()=>{const Le=Q(),Ve=ee().toLowerCase();return Ve?Le.split(`
`).filter(nt=>nt.toLowerCase().includes(Ve)).join(`
`):Le}),Nt=()=>{const Le=new Blob([Q()],{type:"text/plain"}),Ve=URL.createObjectURL(Le),nt=document.createElement("a");nt.href=Ve,nt.download=`${_()?.name}-logs.txt`,nt.click(),URL.revokeObjectURL(Ve)},rr=Le=>{P(Le),I(!0)},gr=async()=>{const Le=M();if(Le){I(!1);try{await Re.deletePod(Le.name,Le.namespace),Fe(`Pod ${Le.name} deleted successfully`,"success"),setTimeout(()=>pe(),500)}catch(Ve){console.error("Failed to delete pod:",Ve),Fe(`Failed to delete pod: ${Ve instanceof Error?Ve.message:"Unknown error"}`,"error")}finally{P(null)}}};return(()=>{var Le=fu(),Ve=Le.firstChild,nt=Ve.firstChild,ct=nt.firstChild;ct.nextSibling;var dt=nt.nextSibling,et=dt.firstChild,yt=et.nextSibling,ht=Ve.nextSibling,kt=ht.firstChild,Ui=kt.firstChild,gs=Ui.nextSibling,Vi=kt.nextSibling,Pa=Vi.firstChild,Ia=Pa.nextSibling,Wi=Vi.nextSibling,Ba=Wi.firstChild,Oa=Ba.nextSibling,qi=Wi.nextSibling,Ha=qi.firstChild,Na=Ha.nextSibling,za=qi.nextSibling,Ki=za.nextSibling,Yi=Ki.nextSibling,Yn=Yi.nextSibling,Gi=ht.nextSibling;return et.$$click=()=>Ae(!fe()),yt.$$click=st=>{const lt=st.currentTarget;lt.classList.add("refreshing"),setTimeout(()=>lt.classList.remove("refreshing"),500),pe(),ue()},kt.$$click=()=>l("all"),i(gs,()=>Ke().total),Vi.$$click=()=>l("running"),i(Ia,()=>Ke().running),Wi.$$click=()=>l("pending"),i(Oa,()=>Ke().pending),qi.$$click=()=>l("failed"),i(Na,()=>Ke().failed),Ki.addEventListener("change",st=>{l(st.currentTarget.value),f(1)}),Yi.$$input=st=>{t(st.currentTarget.value),f(1)},Yn.addEventListener("change",st=>{p(parseInt(st.currentTarget.value)),f(1)}),i(Le,A(q,{get when(){return(z()||[]).length>0},get children(){var st=nu(),lt=st.firstChild,bt=lt.nextSibling;return i(bt,A(Ne,{get each(){return z()||[]},children:pt=>(()=>{var $t=gu(),Et=$t.firstChild,Lt=Et.nextSibling,wt=Lt.nextSibling,Bt=wt.firstChild,xt=Bt.nextSibling;xt.nextSibling;var Rt=wt.nextSibling,Pt=Rt.nextSibling;return i(Lt,()=>pt.name),i(wt,()=>pt.localPort,xt),i(wt,()=>pt.remotePort,null),Pt.$$click=()=>Ye(pt.id),re(()=>Xe(Rt,"href",`http://localhost:${pt.localPort}`)),$t})()})),st}}),Gi),i(Gi,A(q,{get when(){return!xe()||me()!==void 0},get fallback(){return(()=>{var st=pu(),lt=st.firstChild;return lt.nextSibling,st})()},get children(){return[(()=>{var st=lu(),lt=st.firstChild,bt=lt.firstChild,pt=bt.firstChild,$t=pt.firstChild,Et=$t.firstChild;Et.firstChild;var Lt=$t.nextSibling,wt=Lt.firstChild;wt.firstChild;var Bt=Lt.nextSibling,xt=Bt.nextSibling,Rt=xt.nextSibling,Pt=Rt.firstChild;Pt.firstChild;var at=Rt.nextSibling,zt=at.firstChild;zt.firstChild;var Ft=at.nextSibling,Zt=Ft.firstChild;Zt.firstChild;var _t=Ft.nextSibling,Hr=_t.nextSibling,Rr=Hr.firstChild;Rr.firstChild;var Qr=bt.nextSibling,Nr=ye;return typeof Nr=="function"?Wt(Nr,lt):ye=lt,$t.$$click=()=>Te("name"),i(Et,A(Ge,{field:"name"}),null),Lt.$$click=()=>Te("status"),i(wt,A(Ge,{field:"status"}),null),Rt.$$click=()=>Te("cpu"),i(Pt,A(Ge,{field:"cpu"}),null),at.$$click=()=>Te("memory"),i(zt,A(Ge,{field:"memory"}),null),Ft.$$click=()=>Te("restarts"),i(Zt,A(Ge,{field:"restarts"}),null),Hr.$$click=()=>Te("age"),i(Rr,A(Ge,{field:"age"}),null),i(Qr,A(Ne,{get each(){return Ue()},get fallback(){return(()=>{var Je=vu();return Je.firstChild,Je})()},children:(Je,yr)=>{const Dr=()=>Ce()===yr(),xr=Je.status==="Failed"||Je.status==="CrashLoopBackOff"||Je.status==="Error",ps=Je.status==="Pending",[Ji,Vs]=J(!1),Xi=()=>{if(xr)return"#ef4444";if(ps)return"#f59e0b"},Zi=()=>Ji()?Dr()?fe()?"#1f2937":"var(--bg-tertiary)":xr?"rgba(239, 68, 68, 0.2)":ps?"rgba(251, 191, 36, 0.2)":"rgba(255, 255, 255, 0.05)":"transparent",dr=Xi();return(()=>{var sr=mu(),Ws=sr.firstChild,zr=Ws.firstChild,qs=Ws.nextSibling,es=qs.nextSibling,ts=es.nextSibling,vs=ts.nextSibling,Fr=vs.firstChild,Ks=vs.nextSibling,jr=Ks.firstChild,jt=Ks.nextSibling,rs=jt.nextSibling,ss=rs.nextSibling,Ys=ss.nextSibling;return sr.addEventListener("mouseleave",()=>Vs(!1)),sr.addEventListener("mouseenter",()=>{Vs(!0),Ce()!==yr()&&$e(yr())}),sr.$$click=()=>{$e(yr()),Be(Je,"details")},oe(sr,"borderLeft",xr?"3px solid #ef4444":ps?"3px solid #f59e0b":"none"),oe(sr,"color",dr),i(zr,()=>fe()?"â–¶ ":"",null),i(zr,(()=>{var ut=Me(()=>Je.name.length>40);return()=>ut()?Je.name.slice(0,37)+"...":Je.name})(),null),i(qs,()=>{const ut=Je.status==="Failed"||Je.status==="CrashLoopBackOff"||Je.status==="Error",$r=Je.status==="Pending",wr=Je.status==="Running",Ur=Je.status==="Succeeded";return fe()?(()=>{var Ot=_u(),Tr=Ot.firstChild;return oe(Ot,"color",wr?"#22c55e":$r?"#f59e0b":Ur?"#06b6d4":"#ef4444"),i(Ot,wr?"â—":$r?"â—‹":ut?"âœ—":"â—‹",Tr),i(Ot,()=>Je.status,null),Ot})():(()=>{var Ot=bu();return He(Ot,`badge ${wr?"badge-success":$r?"badge-warning":Ur?"badge-info":"badge-error"}`),i(Ot,()=>Je.status),re(Tr=>Hs(Ot,{...$r&&{background:"rgba(251, 191, 36, 0.2)",color:"#fbbf24",border:"1px solid rgba(251, 191, 36, 0.3)"},...ut&&{background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)"}},Tr)),Ot})()}),oe(es,"color",dr||"inherit"),i(es,()=>Je.ready),oe(ts,"color",dr||"var(--text-secondary)"),i(ts,()=>Je.ip||"-"),oe(Fr,"color",dr||"#ec4899"),i(Fr,()=>Y()[`${Je.namespace}/${Je.name}`]?.cpu||Je.cpu||"-",null),i(Fr,(()=>{var ut=Me(()=>ae(`${Je.namespace}/${Je.name}`,"cpu")==="up");return()=>ut()&&vl()})(),null),i(Fr,(()=>{var ut=Me(()=>ae(`${Je.namespace}/${Je.name}`,"cpu")==="down");return()=>ut()&&ml()})(),null),oe(jr,"color",dr||"#f59e0b"),i(jr,()=>Y()[`${Je.namespace}/${Je.name}`]?.memory||Je.memory||"-",null),i(jr,(()=>{var ut=Me(()=>ae(`${Je.namespace}/${Je.name}`,"memory")==="up");return()=>ut()&&vl()})(),null),i(jr,(()=>{var ut=Me(()=>ae(`${Je.namespace}/${Je.name}`,"memory")==="down");return()=>ut()&&ml()})(),null),i(jt,()=>Je.restarts),oe(rs,"color",dr||"var(--text-muted)"),i(rs,()=>Je.node),oe(ss,"color",dr||"inherit"),i(ss,()=>be(Je.createdAt,Se())),i(Ys,A(Tt,{actions:[{label:"Shell",icon:"shell",onClick:()=>Ze(Je)},{label:"Port Forward",icon:"portforward",onClick:()=>Be(Je,"portforward")},{label:"View Logs",icon:"logs",onClick:()=>Be(Je,"logs")},{label:"View YAML",icon:"yaml",onClick:()=>Be(Je,"yaml")},{label:"Edit YAML",icon:"edit",onClick:()=>{b(Je),d(!0)}},{label:"Describe",icon:"describe",onClick:()=>Be(Je,"describe")},{label:"Delete",icon:"delete",onClick:()=>rr(Je),variant:"danger"}]})),re(ut=>{var $r=Dr()?"selected-row":"",wr=Zi(),Ur=Dr()?`2px solid ${fe()?"#06b6d4":"var(--accent-primary)"}`:"none",Ot=dr||(fe()?Je.status==="Running"?"#22c55e":"var(--text-primary)":"#60a5fa"),Tr=dr||(Je.restarts>0?"#fbbf24":"inherit"),Gs=Je.restarts>0?"font-semibold":"";return $r!==ut.e&&He(sr,ut.e=$r),wr!==ut.t&&oe(sr,"background",ut.t=wr),Ur!==ut.a&&oe(sr,"outline",ut.a=Ur),Ot!==ut.o&&oe(zr,"color",ut.o=Ot),Tr!==ut.i&&oe(jt,"color",ut.i=Tr),Gs!==ut.n&&He(jt,ut.n=Gs),ut},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),sr})()}})),re(Je=>{var yr=`data-table ${fe()?"terminal-table":""}`,Dr=fe()?"monospace":"inherit",xr=fe()?"#0d1117":"transparent";return yr!==Je.e&&He(lt,Je.e=yr),Dr!==Je.t&&oe(lt,"font-family",Je.t=Dr),xr!==Je.a&&oe(lt,"background",Je.a=xr),Je},{e:void 0,t:void 0,a:void 0}),st})(),A(q,{get when(){return je()>1},get children(){var st=ou(),lt=st.firstChild,bt=lt.firstChild,pt=bt.nextSibling,$t=pt.nextSibling,Et=$t.nextSibling,Lt=Et.nextSibling,wt=Lt.nextSibling;wt.nextSibling;var Bt=lt.nextSibling,xt=Bt.firstChild,Rt=xt.nextSibling,Pt=Rt.nextSibling,at=Pt.firstChild,zt=at.nextSibling;zt.nextSibling;var Ft=Pt.nextSibling,Zt=Ft.nextSibling;return i(lt,()=>(n()-1)*g()+1,pt),i(lt,()=>Math.min(n()*g(),De().length),Et),i(lt,()=>De().length,wt),xt.$$click=()=>f(1),Rt.$$click=()=>f(_t=>Math.max(1,_t-1)),i(Pt,n,zt),i(Pt,je,null),Ft.$$click=()=>f(_t=>Math.min(je(),_t+1)),Zt.$$click=()=>f(je()),re(_t=>{var Hr=n()===1,Rr=n()===1,Qr=n()===je(),Nr=n()===je();return Hr!==_t.e&&(xt.disabled=_t.e=Hr),Rr!==_t.t&&(Rt.disabled=_t.t=Rr),Qr!==_t.a&&(Ft.disabled=_t.a=Qr),Nr!==_t.o&&(Zt.disabled=_t.o=Nr),_t},{e:void 0,t:void 0,a:void 0,o:void 0}),st}})]}})),i(Le,A(it,{get isOpen(){return C()},onClose:()=>x(!1),get title(){return`YAML: ${_()?.name}`},size:"xl",get children(){return A(q,{get when(){return!ke.loading},get fallback(){return yu()},get children(){return A(tr,{get yaml(){return ke()||""},get title(){return _()?.name}})}})}}),null),i(Le,A(cr,{get isOpen(){return a()},onClose:()=>c(!1),resourceType:"pod",get name(){return _()?.name||""},get namespace(){return _()?.namespace}}),null),i(Le,A(it,{get isOpen(){return m()},onClose:()=>{rt(),$(!1)},get title(){return`Logs: ${_()?.name}`},size:"xl",get children(){var st=du(),lt=st.firstChild,bt=lt.firstChild,pt=bt.nextSibling,$t=pt.firstChild,Et=$t.nextSibling,Lt=Et.firstChild,wt=Et.nextSibling,Bt=pt.nextSibling,xt=Bt.nextSibling,Rt=xt.nextSibling,Pt=lt.nextSibling;return bt.addEventListener("change",at=>{K(parseInt(at.currentTarget.value)),_()&&ot(_(),te())}),$t.addEventListener("change",at=>{const zt=at.currentTarget.checked;le(zt),_()&&ot(_(),zt)}),i(wt,()=>te()?"Live":"Follow"),i(pt,(()=>{var at=Me(()=>!!te());return()=>at()&&xu()})(),null),Bt.$$input=at=>ne(at.currentTarget.value),xt.$$click=()=>_()&&ot(_(),te()),Rt.$$click=Nt,i(Pt,A(q,{get when(){return!U()},get fallback(){return $u()},get children(){return[A(q,{get when(){return ce()},get children(){var at=au();return at.firstChild,i(at,ce,null),at}}),(()=>{var at=cu();return i(at,()=>Ct()||"No logs available"),at})()]}})),re(at=>{var zt=te(),Ft=te()?"var(--accent-primary)":"var(--bg-tertiary)",Zt=te()?"white":"var(--text-primary)",_t=te()?"M21 12a9 9 0 11-18 0 9 9 0 0118 0z M10 9v6m4-6v6":"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z M21 12a9 9 0 11-18 0 9 9 0 0118 0z";return zt!==at.e&&(bt.disabled=at.e=zt),Ft!==at.t&&oe(pt,"background",at.t=Ft),Zt!==at.a&&oe(pt,"color",at.a=Zt),_t!==at.o&&Xe(Lt,"d",at.o=_t),at},{e:void 0,t:void 0,a:void 0,o:void 0}),re(()=>bt.value=j()),re(()=>$t.checked=te()),re(()=>Bt.value=ee()),st}}),null),i(Le,A(it,{get isOpen(){return S()},onClose:()=>E(!1),get title(){return`Pod: ${_()?.name}`},size:"xl",get children(){return A(q,{get when(){return _()},get children(){return(()=>{const[st]=qe(()=>_()?{name:_().name,ns:_().namespace}:null,async lt=>lt?Re.getPodDetails(lt.name,lt.ns):null);return(()=>{var lt=Su(),bt=lt.firstChild,pt=bt.firstChild,$t=pt.nextSibling,Et=$t.firstChild,Lt=Et.firstChild,wt=Lt.nextSibling,Bt=wt.firstChild,xt=Et.nextSibling,Rt=xt.firstChild,Pt=Rt.nextSibling,at=xt.nextSibling,zt=at.firstChild,Ft=zt.nextSibling,Zt=at.nextSibling,_t=Zt.firstChild,Hr=_t.nextSibling,Rr=Zt.nextSibling,Qr=Rr.firstChild,Nr=Qr.nextSibling,Je=Rr.nextSibling,yr=Je.firstChild,Dr=yr.nextSibling,xr=Je.nextSibling,ps=xr.firstChild,Ji=ps.nextSibling,Vs=xr.nextSibling,Xi=Vs.firstChild,Zi=Xi.nextSibling,dr=$t.nextSibling,sr=dr.firstChild,Ws=sr.nextSibling,zr=bt.nextSibling;zr.firstChild;var qs=zr.nextSibling,es=qs.firstChild,ts=es.nextSibling,vs=ts.nextSibling,Fr=vs.nextSibling,Ks=Fr.nextSibling;return i(Bt,()=>_()?.status),i(Pt,()=>_()?.ready),i(Ft,()=>_()?.cpu||"-"),i(Hr,()=>_()?.memory||"-"),i(Nr,()=>_()?.restarts),i(Dr,()=>_()?.age),i(Ji,()=>_()?.ip||"-"),i(Zi,()=>_()?.namespace),i(Ws,()=>_()?.node),i(zr,A(q,{get when(){return Me(()=>!st.loading)()&&st()?.containers},get fallback(){return Cu()},get children(){var jr=wu();return i(jr,A(Ne,{get each(){return st()?.containers||[]},children:jt=>(()=>{var rs=ku(),ss=rs.firstChild,Ys=ss.firstChild,ut=Ys.firstChild,$r=ut.nextSibling,wr=Ys.nextSibling,Ur=ss.nextSibling,Ot=Ur.firstChild,Tr=Ot.firstChild,Gs=Tr.nextSibling,Gn=Ot.nextSibling,Fa=Gn.firstChild,Qi=Fa.nextSibling,ja=Qi.firstChild,Jn=Gn.nextSibling,Ua=Jn.firstChild,Xn=Ua.nextSibling,Va=Jn.nextSibling,Wa=Va.firstChild,qa=Wa.nextSibling;return i($r,()=>jt.name),i(wr,()=>jt.state||(jt.ready?"Running":"Not Ready")),i(Gs,()=>jt.image),i(Qi,()=>jt.containerID?.split("//")[1]?.substring(0,24)||"-",ja),i(Xn,()=>jt.restartCount),i(qa,()=>jt.startedAt||"-"),re(Vr=>{var Zn=`badge ${jt.ready?"badge-success":"badge-error"}`,Qn=jt.containerID,el=jt.restartCount>0?"var(--warning-color)":"var(--text-primary)";return Zn!==Vr.e&&He(wr,Vr.e=Zn),Qn!==Vr.t&&Xe(Qi,"title",Vr.t=Qn),el!==Vr.a&&oe(Xn,"color",Vr.a=el),Vr},{e:void 0,t:void 0,a:void 0}),rs})()})),jr}}),null),es.$$click=()=>Ze(_()),ts.$$click=()=>{E(!1),Be(_(),"portforward")},vs.$$click=()=>{E(!1),Be(_(),"logs")},Fr.$$click=()=>{E(!1),Be(_(),"yaml")},Ks.$$click=()=>{E(!1),Be(_(),"describe")},re(()=>He(Bt,`badge ${_()?.status==="Running"?"badge-success":"badge-warning"}`)),lt})()})()}})}}),null),i(Le,A(it,{get isOpen(){return B()},onClose:()=>O(!1),get title(){return`Port Forward: ${_()?.name}`},size:"sm",get children(){var st=hu(),lt=st.firstChild,bt=lt.firstChild,pt=bt.nextSibling,$t=lt.nextSibling,Et=$t.firstChild,Lt=Et.nextSibling,wt=$t.nextSibling,Bt=wt.firstChild,xt=Bt.nextSibling;xt.firstChild;var Rt=xt.nextSibling,Pt=Rt.nextSibling,at=Pt.firstChild,zt=wt.nextSibling,Ft=zt.firstChild,Zt=Ft.nextSibling;return pt.$$input=_t=>H(parseInt(_t.currentTarget.value)||8080),Lt.$$input=_t=>N(parseInt(_t.currentTarget.value)||80),i(xt,L,null),i(Pt,()=>_()?.name,at),i(Pt,w,null),Ft.$$click=()=>O(!1),Zt.$$click=We,re(()=>pt.value=L()),re(()=>Lt.value=w()),st}}),null),i(Le,A(it,{get isOpen(){return T()},onClose:()=>{I(!1),P(null)},title:"Delete Pod",size:"md",get children(){var st=uu(),lt=st.firstChild,bt=lt.firstChild;bt.firstChild;var pt=bt.nextSibling,$t=pt.firstChild,Et=$t.nextSibling,Lt=Et.firstChild,wt=Lt.nextSibling;wt.firstChild,Et.nextSibling;var Bt=lt.nextSibling,xt=Bt.firstChild,Rt=xt.nextSibling;return i(Lt,()=>M()?.name),i(wt,()=>M()?.namespace,null),xt.$$click=()=>{I(!1),P(null)},Rt.$$click=gr,st}}),null),re(st=>{var lt=fe()?"var(--accent-primary)":"var(--bg-secondary)",bt=fe()?"Switch to Normal View":"Switch to Terminal View",pt=fe()?"#0d1117":"var(--bg-primary)";return lt!==st.e&&oe(et,"background",st.e=lt),bt!==st.t&&Xe(et,"title",st.t=bt),pt!==st.a&&oe(Gi,"background",st.a=pt),st},{e:void 0,t:void 0,a:void 0}),re(()=>Ki.value=r()),re(()=>Yi.value=e()),re(()=>Yn.value=g()),Le})()};Qe(["click","input"]);var Mu=R('<div class="px-3 py-1.5 rounded-lg text-sm"style="background:rgba(239, 68, 68, 0.1);color:var(--error-color)">'),Eu=R("<div class=spinner style=width:16px;height:16px>"),Lu=R('<div class="flex flex-col h-full"><div class="flex items-center justify-between mb-2"><div class="flex items-center gap-2"></div><div class="flex items-center gap-2"><button class="px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)">Cancel</button><button class="px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"style=background:var(--accent-primary);color:white></button></div></div><textarea class="flex-1 w-full p-4 rounded-lg font-mono text-sm leading-relaxed resize-none focus:outline-none focus:ring-2 focus:ring-[var(--accent-primary)]"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color);fontFamily:ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace">');const ur=e=>{const[t,r]=J(e.yaml),[l,u]=J(!1),[v,h]=J(null),s=async()=>{h(null),u(!0);try{await e.onSave?.(t())}catch(f){h(f instanceof Error?f.message:"Failed to save YAML")}finally{u(!1)}},n=()=>{r(e.yaml),h(null),e.onCancel?.()};return(()=>{var f=Lu(),g=f.firstChild,p=g.firstChild,_=p.nextSibling,b=_.firstChild,C=b.nextSibling,x=g.nextSibling;return i(p,A(q,{get when(){return v()},get children(){var o=Mu();return i(o,v),o}})),b.$$click=n,C.$$click=s,i(C,A(q,{get when(){return l()||e.loading},fallback:"Save",get children(){return[Eu(),"Saving..."]}})),x.$$input=o=>r(o.currentTarget.value),Xe(x,"spellcheck",!1),re(o=>{var d=l()||e.loading,a=l()||e.loading||t()===e.yaml;return d!==o.e&&(b.disabled=o.e=d),a!==o.t&&(C.disabled=o.t=a),o},{e:void 0,t:void 0}),re(()=>x.value=t()),f})()};Qe(["click","input"]);var Ru=R('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>â–²</span><span>â–¼'),Du=R('<div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Ready </div></th><th class=whitespace-nowrap>Up-to-date</th><th class=whitespace-nowrap>Available</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),Tu=R('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:#161b22><div style=color:#8b949e>Showing <!> - <!> of <!> deployments</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>â† Prev</button><span class="px-3 py-1"style=color:#c9d1d9>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Next â†’</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Last'),Pu=R("<div style=height:70vh>"),Iu=R('<div class=space-y-4><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Replicas</label><input type=number min=0 max=100 class="w-full px-4 py-2 rounded-lg"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div class="flex gap-2"><button class="btn-secondary flex-1">Cancel</button><button class="btn-primary flex-1">Scale'),Bu=R('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Deployments</h1><p style=color:var(--text-secondary)>Manage application deployments</p></div><div class="flex items-center gap-3"><button class=icon-btn title="Refresh Deployments"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Ready</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--warning-color)"><span class=text-sm style=color:var(--text-secondary)>Partial</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--error-color)"><span class=text-sm style=color:var(--text-secondary)>Unavailable</span><span class="text-xl font-bold"style=color:var(--error-color)></span></div><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class="overflow-hidden rounded-lg"style=background:#0d1117>'),Ou=R('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading deployments...'),Hu=R('<tr><td colspan=7 class="text-center py-8"style=color:var(--text-muted)>No deployments found'),Nu=R('<tr><td><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td></td><td><span></span></td><td></td><td></td><td></td><td>'),_l=R('<div class="spinner mx-auto">');const zu=()=>{const[e,t]=J(""),[r,l]=J("name"),[u,v]=J("asc"),[h,s]=J(1),[n,f]=J(20),[g,p]=J(null),[_,b]=J(!1),[C,x]=J(!1),[o,d]=J(!1),[a,c]=J(!1),[m,$]=J(1),[S,E]=J(null),[y,{refetch:k}]=qe(tt,Re.getDeployments),[B]=qe(()=>(_()||C())&&g()?{name:g().name,ns:g().namespace}:null,async F=>F&&(await Re.getDeploymentYAML(F.name,F.ns)).yaml||""),O=async F=>{const U=g();if(U)try{await Re.updateDeployment(U.name,U.namespace,F),Fe(`âœ… Deployment ${U.name} updated successfully`,"success"),x(!1),setTimeout(()=>k(),500),setTimeout(()=>k(),2e3)}catch(W){const ce=W instanceof Error?W.message:"Unknown error";throw Fe(`âŒ Failed to update deployment: ${ce}`,"error"),W}},T=F=>{if(!F)return 0;let U=0;const W=F.match(/(\d+)d/),ce=F.match(/(\d+)h/),D=F.match(/(\d+)m/);return W&&(U+=parseInt(W[1])*24*60),ce&&(U+=parseInt(ce[1])*60),D&&(U+=parseInt(D[1])),U},I=ze(()=>{let F=y()||[];const U=e().toLowerCase();U&&(F=F.filter(D=>D.name.toLowerCase().includes(U)||D.namespace.toLowerCase().includes(U)));const W=r(),ce=u();return F=[...F].sort((D,j)=>{let K=0;switch(W){case"name":K=D.name.localeCompare(j.name);break;case"namespace":K=D.namespace.localeCompare(j.namespace);break;case"ready":K=D.ready.localeCompare(j.ready);break;case"age":K=T(D.age)-T(j.age);break}return ce==="asc"?K:-K}),F}),M=ze(()=>Math.ceil(I().length/n())),P=ze(()=>{const F=(h()-1)*n();return I().slice(F,F+n())}),L=ze(()=>{const F=y()||[];return{total:F.length,ready:F.filter(U=>{const W=U.ready?.split("/")||["0","0"];return W[0]===W[1]&&parseInt(W[0])>0}).length,partial:F.filter(U=>{const W=U.ready?.split("/")||["0","0"];return W[0]!==W[1]&&parseInt(W[0])>0}).length,unavailable:F.filter(U=>{const W=U.ready?.split("/")||["0","0"];return parseInt(W[0])===0}).length}}),H=F=>{r()===F?v(U=>U==="asc"?"desc":"asc"):(l(F),v("asc")),s(1)},w=F=>(()=>{var U=Ru(),W=U.firstChild,ce=W.nextSibling;return re(D=>{var j=r()===F.field&&u()==="asc"?"var(--accent-primary)":"var(--text-muted)",K=r()===F.field&&u()==="desc"?"var(--accent-primary)":"var(--text-muted)";return j!==D.e&&oe(W,"color",D.e=j),K!==D.t&&oe(ce,"color",D.t=K),D},{e:void 0,t:void 0}),U})(),N=async F=>{const U=`${F.namespace}/${F.name}`;E(U);try{const W=await Re.restartDeployment(F.name,F.namespace);W?.success?Fe(`âœ… Deployment ${F.name} restart initiated - pods will restart shortly`,"success"):Fe(`âš ï¸ Restart initiated but may not have completed: ${W?.message||"Unknown status"}`,"warning"),setTimeout(()=>k(),500),setTimeout(()=>k(),2e3),setTimeout(()=>k(),5e3)}catch(W){console.error("Failed to restart deployment:",W);const ce=W instanceof Error?W.message:"Unknown error";Fe(`âŒ Failed to restart deployment ${F.name}: ${ce}`,"error")}finally{setTimeout(()=>E(null),2e3)}},z=async()=>{const F=g();if(F)try{const U=await Re.scaleDeployment(F.name,F.namespace,m());U?.success?Fe(`âœ… Deployment ${F.name} scaled to ${m()} replicas`,"success"):Fe(`âš ï¸ Scale may not have completed: ${U?.message||"Unknown status"}`,"warning"),c(!1),setTimeout(()=>k(),500),setTimeout(()=>k(),2e3)}catch(U){console.error("Failed to scale deployment:",U);const W=U instanceof Error?U.message:"Unknown error";Fe(`âŒ Failed to scale deployment: ${W}`,"error")}},V=async F=>{if(confirm(`Are you sure you want to delete deployment "${F.name}" in namespace "${F.namespace}"?`))try{await Re.deleteDeployment(F.name,F.namespace),Fe(`Deployment ${F.name} deleted successfully`,"success"),k()}catch(U){console.error("Failed to delete deployment:",U),Fe(`Failed to delete deployment: ${U instanceof Error?U.message:"Unknown error"}`,"error")}},Q=F=>{p(F);const U=F.ready?.split("/")||["1","1"];$(parseInt(U[1])||1),c(!0)};return(()=>{var F=Bu(),U=F.firstChild,W=U.firstChild,ce=W.firstChild;ce.nextSibling;var D=W.nextSibling,j=D.firstChild,K=U.nextSibling,ee=K.firstChild,ne=ee.firstChild,te=ne.nextSibling,le=ee.nextSibling,Z=le.firstChild,Y=Z.nextSibling,se=le.nextSibling,G=se.firstChild,ie=G.nextSibling,X=se.nextSibling,fe=X.firstChild,Ae=fe.nextSibling,Ce=X.nextSibling,$e=Ce.nextSibling,ye=$e.nextSibling,he=K.nextSibling;return j.$$click=ae=>{const ue=ae.currentTarget;ue.classList.add("refreshing"),setTimeout(()=>ue.classList.remove("refreshing"),500),k()},i(te,()=>L().total),i(Y,()=>L().ready),i(ie,()=>L().partial),i(Ae,()=>L().unavailable),$e.$$input=ae=>{t(ae.currentTarget.value),s(1)},ye.addEventListener("change",ae=>{f(parseInt(ae.currentTarget.value)),s(1)}),i(he,A(q,{get when(){return!y.loading},get fallback(){return(()=>{var ae=Ou(),ue=ae.firstChild;return ue.nextSibling,ae})()},get children(){return[(()=>{var ae=Du(),ue=ae.firstChild,Se=ue.firstChild,_e=Se.firstChild,de=_e.firstChild,be=de.firstChild;be.firstChild;var ve=de.nextSibling,ge=ve.firstChild;ge.firstChild;var me=ve.nextSibling,pe=me.firstChild;pe.firstChild;var xe=me.nextSibling,we=xe.nextSibling,ke=we.nextSibling,Oe=ke.firstChild;Oe.firstChild;var Pe=Se.nextSibling;return de.$$click=()=>H("name"),i(be,A(w,{field:"name"}),null),ve.$$click=()=>H("namespace"),i(ge,A(w,{field:"namespace"}),null),me.$$click=()=>H("ready"),i(pe,A(w,{field:"ready"}),null),ke.$$click=()=>H("age"),i(Oe,A(w,{field:"age"}),null),i(Pe,A(Ne,{get each(){return P()},get fallback(){return(()=>{var Ie=Hu();return Ie.firstChild,Ie})()},children:Ie=>(()=>{var De=Nu(),je=De.firstChild,Ue=je.firstChild,Ke=je.nextSibling,Te=Ke.nextSibling,Ge=Te.firstChild,Be=Te.nextSibling,We=Be.nextSibling,Ye=We.nextSibling,Ze=Ye.nextSibling;return Ue.$$click=()=>{p(Ie),d(!0)},i(Ue,(()=>{var rt=Me(()=>Ie.name.length>40);return()=>rt()?Ie.name.slice(0,37)+"...":Ie.name})()),i(Ke,()=>Ie.namespace),i(Ge,()=>Ie.ready),i(Be,()=>Ie.upToDate),i(We,()=>Ie.available),i(Ye,()=>Ie.age),i(Ze,A(Tt,{get actions(){return[{label:"Scale",icon:"scale",onClick:()=>Q(Ie)},{label:"Restart",icon:"restart",onClick:()=>N(Ie),loading:S()===`${Ie.namespace}/${Ie.name}`},{label:"View YAML",icon:"yaml",onClick:()=>{p(Ie),b(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{p(Ie),x(!0)}},{label:"Delete",icon:"delete",onClick:()=>V(Ie),variant:"danger",divider:!0}]}})),re(()=>He(Ge,`badge ${Ie.ready.split("/")[0]===Ie.ready.split("/")[1]?"badge-success":"badge-warning"}`)),De})()})),ae})(),A(q,{get when(){return M()>1},get children(){var ae=Tu(),ue=ae.firstChild,Se=ue.firstChild,_e=Se.nextSibling,de=_e.nextSibling,be=de.nextSibling,ve=be.nextSibling,ge=ve.nextSibling;ge.nextSibling;var me=ue.nextSibling,pe=me.firstChild,xe=pe.nextSibling,we=xe.nextSibling,ke=we.firstChild,Oe=ke.nextSibling;Oe.nextSibling;var Pe=we.nextSibling,Ie=Pe.nextSibling;return i(ue,()=>(h()-1)*n()+1,_e),i(ue,()=>Math.min(h()*n(),I().length),be),i(ue,()=>I().length,ge),pe.$$click=()=>s(1),xe.$$click=()=>s(De=>Math.max(1,De-1)),i(we,h,Oe),i(we,M,null),Pe.$$click=()=>s(De=>Math.min(M(),De+1)),Ie.$$click=()=>s(M()),re(De=>{var je=h()===1,Ue=h()===1,Ke=h()===M(),Te=h()===M();return je!==De.e&&(pe.disabled=De.e=je),Ue!==De.t&&(xe.disabled=De.t=Ue),Ke!==De.a&&(Pe.disabled=De.a=Ke),Te!==De.o&&(Ie.disabled=De.o=Te),De},{e:void 0,t:void 0,a:void 0,o:void 0}),ae}})]}})),i(F,A(it,{get isOpen(){return _()},onClose:()=>b(!1),get title(){return`YAML: ${g()?.name}`},size:"xl",get children(){return A(q,{get when(){return!B.loading},get fallback(){return _l()},get children(){return A(tr,{get yaml(){return B()||""},get title(){return g()?.name}})}})}}),null),i(F,A(it,{get isOpen(){return C()},onClose:()=>x(!1),get title(){return`Edit YAML: ${g()?.name}`},size:"xl",get children(){return A(q,{get when(){return!B.loading},get fallback(){return _l()},get children(){var ae=Pu();return i(ae,A(ur,{get yaml(){return B()||""},get title(){return g()?.name},onSave:O,onCancel:()=>x(!1)})),ae}})}}),null),i(F,A(cr,{get isOpen(){return o()},onClose:()=>d(!1),resourceType:"deployment",get name(){return g()?.name||""},get namespace(){return g()?.namespace}}),null),i(F,A(it,{get isOpen(){return a()},onClose:()=>c(!1),get title(){return`Scale: ${g()?.name}`},size:"sm",get children(){var ae=Iu(),ue=ae.firstChild,Se=ue.firstChild,_e=Se.nextSibling,de=ue.nextSibling,be=de.firstChild,ve=be.nextSibling;return _e.$$input=ge=>$(parseInt(ge.currentTarget.value)||0),be.$$click=()=>c(!1),ve.$$click=z,re(()=>_e.value=m()),ae}}),null),re(()=>$e.value=e()),re(()=>ye.value=n()),F})()};Qe(["click","input"]);var Fu=R('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>â–²</span><span>â–¼'),ju=R('<div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Ready </div></th><th class=whitespace-nowrap>Replicas</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),Uu=R('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:#161b22><div style=color:#8b949e>Showing <!> - <!> of <!> StatefulSets</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>â† Prev</button><span class="px-3 py-1"style=color:#c9d1d9>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Next â†’</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Last'),Vu=R("<div style=height:70vh>"),Wu=R('<div class=space-y-4><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Replicas</label><input type=number min=0 max=100 class="w-full px-4 py-2 rounded-lg"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div class="flex gap-2"><button class="btn-secondary flex-1">Cancel</button><button class="btn-primary flex-1">Scale'),qu=R('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>StatefulSets</h1><p style=color:var(--text-secondary)>Manage stateful applications</p></div><div class="flex items-center gap-3"><button class=icon-btn title="Refresh StatefulSets"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Ready</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--warning-color)"><span class=text-sm style=color:var(--text-secondary)>Partial</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--error-color)"><span class=text-sm style=color:var(--text-secondary)>Unavailable</span><span class="text-xl font-bold"style=color:var(--error-color)></span></div><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class="overflow-hidden rounded-lg"style=background:#0d1117>'),Ku=R('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading StatefulSets...'),Yu=R('<tr><td colspan=6 class="text-center py-8"style=color:var(--text-muted)>No StatefulSets found'),Gu=R('<tr><td><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td></td><td><span></span></td><td></td><td></td><td>'),bl=R('<div class="spinner mx-auto">');const Ju=()=>{const[e,t]=J(""),[r,l]=J("name"),[u,v]=J("asc"),[h,s]=J(1),[n,f]=J(20),[g,p]=J(null),[_,b]=J(!1),[C,x]=J(!1),[o,d]=J(!1),[a,c]=J(!1),[m,$]=J(1),[S,E]=J(null),[y,{refetch:k}]=qe(tt,Re.getStatefulSets),[B]=qe(()=>(_()||C())&&g()?{name:g().name,ns:g().namespace}:null,async F=>F&&(await Re.getStatefulSetYAML(F.name,F.ns)).yaml||""),O=async F=>{const U=g();if(U)try{await Re.updateStatefulSet(U.name,U.namespace,F),Fe(`âœ… StatefulSet ${U.name} updated successfully`,"success"),x(!1),setTimeout(()=>k(),500),setTimeout(()=>k(),2e3)}catch(W){const ce=W instanceof Error?W.message:"Unknown error";throw Fe(`âŒ Failed to update StatefulSet: ${ce}`,"error"),W}},T=F=>{if(!F)return 0;let U=0;const W=F.match(/(\d+)d/),ce=F.match(/(\d+)h/),D=F.match(/(\d+)m/);return W&&(U+=parseInt(W[1])*24*60),ce&&(U+=parseInt(ce[1])*60),D&&(U+=parseInt(D[1])),U},I=ze(()=>{let F=y()||[];const U=e().toLowerCase();U&&(F=F.filter(D=>D.name.toLowerCase().includes(U)||D.namespace.toLowerCase().includes(U)));const W=r(),ce=u();return F=[...F].sort((D,j)=>{let K=0;switch(W){case"name":K=D.name.localeCompare(j.name);break;case"namespace":K=D.namespace.localeCompare(j.namespace);break;case"ready":K=D.ready.localeCompare(j.ready);break;case"age":K=T(D.age)-T(j.age);break}return ce==="asc"?K:-K}),F}),M=ze(()=>Math.ceil(I().length/n())),P=ze(()=>{const F=(h()-1)*n();return I().slice(F,F+n())}),L=ze(()=>{const F=y()||[];return{total:F.length,ready:F.filter(U=>{const W=U.ready?.split("/")||["0","0"];return W[0]===W[1]&&parseInt(W[0])>0}).length,partial:F.filter(U=>{const W=U.ready?.split("/")||["0","0"];return W[0]!==W[1]&&parseInt(W[0])>0}).length,unavailable:F.filter(U=>{const W=U.ready?.split("/")||["0","0"];return parseInt(W[0])===0}).length}}),H=F=>{r()===F?v(U=>U==="asc"?"desc":"asc"):(l(F),v("asc")),s(1)},w=F=>(()=>{var U=Fu(),W=U.firstChild,ce=W.nextSibling;return re(D=>{var j=r()===F.field&&u()==="asc"?"var(--accent-primary)":"var(--text-muted)",K=r()===F.field&&u()==="desc"?"var(--accent-primary)":"var(--text-muted)";return j!==D.e&&oe(W,"color",D.e=j),K!==D.t&&oe(ce,"color",D.t=K),D},{e:void 0,t:void 0}),U})(),N=async F=>{const U=`${F.namespace}/${F.name}`;E(U);try{const W=await Re.restartStatefulSet(F.name,F.namespace);W?.success?Fe(`âœ… StatefulSet ${F.name} restart initiated - pods will restart shortly`,"success"):Fe(`âš ï¸ Restart initiated but may not have completed: ${W?.message||"Unknown status"}`,"warning"),setTimeout(()=>k(),500),setTimeout(()=>k(),2e3),setTimeout(()=>k(),5e3)}catch(W){console.error("Failed to restart StatefulSet:",W);const ce=W instanceof Error?W.message:"Unknown error";Fe(`âŒ Failed to restart StatefulSet ${F.name}: ${ce}`,"error")}finally{setTimeout(()=>E(null),2e3)}},z=async()=>{const F=g();if(F)try{const U=await Re.scaleStatefulSet(F.name,F.namespace,m());U?.success?Fe(`âœ… StatefulSet ${F.name} scaled to ${m()} replicas`,"success"):Fe(`âš ï¸ Scale may not have completed: ${U?.message||"Unknown status"}`,"warning"),c(!1),setTimeout(()=>k(),500),setTimeout(()=>k(),2e3)}catch(U){console.error("Failed to scale StatefulSet:",U);const W=U instanceof Error?U.message:"Unknown error";Fe(`âŒ Failed to scale StatefulSet: ${W}`,"error")}},V=async F=>{if(confirm(`Are you sure you want to delete StatefulSet "${F.name}" in namespace "${F.namespace}"?`))try{await Re.deleteStatefulSet(F.name,F.namespace),Fe(`StatefulSet ${F.name} deleted successfully`,"success"),k()}catch(U){console.error("Failed to delete StatefulSet:",U),Fe(`Failed to delete StatefulSet: ${U instanceof Error?U.message:"Unknown error"}`,"error")}},Q=F=>{p(F);const U=F.ready?.split("/")||["1","1"];$(parseInt(U[1])||1),c(!0)};return(()=>{var F=qu(),U=F.firstChild,W=U.firstChild,ce=W.firstChild;ce.nextSibling;var D=W.nextSibling,j=D.firstChild,K=U.nextSibling,ee=K.firstChild,ne=ee.firstChild,te=ne.nextSibling,le=ee.nextSibling,Z=le.firstChild,Y=Z.nextSibling,se=le.nextSibling,G=se.firstChild,ie=G.nextSibling,X=se.nextSibling,fe=X.firstChild,Ae=fe.nextSibling,Ce=X.nextSibling,$e=Ce.nextSibling,ye=$e.nextSibling,he=K.nextSibling;return j.$$click=ae=>{const ue=ae.currentTarget;ue.classList.add("refreshing"),setTimeout(()=>ue.classList.remove("refreshing"),500),k()},i(te,()=>L().total),i(Y,()=>L().ready),i(ie,()=>L().partial),i(Ae,()=>L().unavailable),$e.$$input=ae=>{t(ae.currentTarget.value),s(1)},ye.addEventListener("change",ae=>{f(parseInt(ae.currentTarget.value)),s(1)}),i(he,A(q,{get when(){return!y.loading},get fallback(){return(()=>{var ae=Ku(),ue=ae.firstChild;return ue.nextSibling,ae})()},get children(){return[(()=>{var ae=ju(),ue=ae.firstChild,Se=ue.firstChild,_e=Se.firstChild,de=_e.firstChild,be=de.firstChild;be.firstChild;var ve=de.nextSibling,ge=ve.firstChild;ge.firstChild;var me=ve.nextSibling,pe=me.firstChild;pe.firstChild;var xe=me.nextSibling,we=xe.nextSibling,ke=we.firstChild;ke.firstChild;var Oe=Se.nextSibling;return de.$$click=()=>H("name"),i(be,A(w,{field:"name"}),null),ve.$$click=()=>H("namespace"),i(ge,A(w,{field:"namespace"}),null),me.$$click=()=>H("ready"),i(pe,A(w,{field:"ready"}),null),we.$$click=()=>H("age"),i(ke,A(w,{field:"age"}),null),i(Oe,A(Ne,{get each(){return P()},get fallback(){return(()=>{var Pe=Yu();return Pe.firstChild,Pe})()},children:Pe=>(()=>{var Ie=Gu(),De=Ie.firstChild,je=De.firstChild,Ue=De.nextSibling,Ke=Ue.nextSibling,Te=Ke.firstChild,Ge=Ke.nextSibling,Be=Ge.nextSibling,We=Be.nextSibling;return je.$$click=()=>{p(Pe),d(!0)},i(je,(()=>{var Ye=Me(()=>Pe.name.length>40);return()=>Ye()?Pe.name.slice(0,37)+"...":Pe.name})()),i(Ue,()=>Pe.namespace),i(Te,()=>Pe.ready),i(Ge,()=>Pe.replicas),i(Be,()=>Pe.age),i(We,A(Tt,{get actions(){return[{label:"Scale",icon:"scale",onClick:()=>Q(Pe)},{label:"Restart",icon:"restart",onClick:()=>N(Pe),loading:S()===`${Pe.namespace}/${Pe.name}`},{label:"View YAML",icon:"yaml",onClick:()=>{p(Pe),b(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{p(Pe),x(!0)}},{label:"Delete",icon:"delete",onClick:()=>V(Pe),variant:"danger",divider:!0}]}})),re(()=>He(Te,`badge ${Pe.ready.split("/")[0]===Pe.ready.split("/")[1]?"badge-success":"badge-warning"}`)),Ie})()})),ae})(),A(q,{get when(){return M()>1},get children(){var ae=Uu(),ue=ae.firstChild,Se=ue.firstChild,_e=Se.nextSibling,de=_e.nextSibling,be=de.nextSibling,ve=be.nextSibling,ge=ve.nextSibling;ge.nextSibling;var me=ue.nextSibling,pe=me.firstChild,xe=pe.nextSibling,we=xe.nextSibling,ke=we.firstChild,Oe=ke.nextSibling;Oe.nextSibling;var Pe=we.nextSibling,Ie=Pe.nextSibling;return i(ue,()=>(h()-1)*n()+1,_e),i(ue,()=>Math.min(h()*n(),I().length),be),i(ue,()=>I().length,ge),pe.$$click=()=>s(1),xe.$$click=()=>s(De=>Math.max(1,De-1)),i(we,h,Oe),i(we,M,null),Pe.$$click=()=>s(De=>Math.min(M(),De+1)),Ie.$$click=()=>s(M()),re(De=>{var je=h()===1,Ue=h()===1,Ke=h()===M(),Te=h()===M();return je!==De.e&&(pe.disabled=De.e=je),Ue!==De.t&&(xe.disabled=De.t=Ue),Ke!==De.a&&(Pe.disabled=De.a=Ke),Te!==De.o&&(Ie.disabled=De.o=Te),De},{e:void 0,t:void 0,a:void 0,o:void 0}),ae}})]}})),i(F,A(it,{get isOpen(){return _()},onClose:()=>b(!1),get title(){return`YAML: ${g()?.name}`},size:"xl",get children(){return A(q,{get when(){return!B.loading},get fallback(){return bl()},get children(){return A(tr,{get yaml(){return B()||""},get title(){return g()?.name}})}})}}),null),i(F,A(it,{get isOpen(){return C()},onClose:()=>x(!1),get title(){return`Edit YAML: ${g()?.name}`},size:"xl",get children(){return A(q,{get when(){return!B.loading},get fallback(){return bl()},get children(){var ae=Vu();return i(ae,A(ur,{get yaml(){return B()||""},get title(){return g()?.name},onSave:O,onCancel:()=>x(!1)})),ae}})}}),null),i(F,A(cr,{get isOpen(){return o()},onClose:()=>d(!1),resourceType:"statefulset",get name(){return g()?.name||""},get namespace(){return g()?.namespace}}),null),i(F,A(it,{get isOpen(){return a()},onClose:()=>c(!1),get title(){return`Scale: ${g()?.name}`},size:"sm",get children(){var ae=Wu(),ue=ae.firstChild,Se=ue.firstChild,_e=Se.nextSibling,de=ue.nextSibling,be=de.firstChild,ve=be.nextSibling;return _e.$$input=ge=>$(parseInt(ge.currentTarget.value)||0),be.$$click=()=>c(!1),ve.$$click=z,re(()=>_e.value=m()),ae}}),null),re(()=>$e.value=e()),re(()=>ye.value=n()),F})()};Qe(["click","input"]);var Xu=R('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>â–²</span><span>â–¼'),Zu=R('<div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class=whitespace-nowrap>Desired</th><th class=whitespace-nowrap>Current</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Ready </div></th><th class=whitespace-nowrap>Available</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),Qu=R('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:#161b22><div style=color:#8b949e>Showing <!> - <!> of <!> DaemonSets</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>â† Prev</button><span class="px-3 py-1"style=color:#c9d1d9>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Next â†’</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Last'),ef=R("<div style=height:70vh>"),tf=R('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>DaemonSets</h1><p style=color:var(--text-secondary)>Node-level workloads running on all or selected nodes</p></div><div class="flex items-center gap-3"><button class=icon-btn title="Refresh DaemonSets"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Ready</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--warning-color)"><span class=text-sm style=color:var(--text-secondary)>Partial</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--error-color)"><span class=text-sm style=color:var(--text-secondary)>Unavailable</span><span class="text-xl font-bold"style=color:var(--error-color)></span></div><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class="overflow-hidden rounded-lg"style=background:#0d1117>'),rf=R('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading DaemonSets...'),sf=R('<tr><td colspan=8 class="text-center py-8"style=color:var(--text-muted)>No DaemonSets found'),nf=R('<tr><td><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td></td><td></td><td></td><td><span></span></td><td></td><td></td><td>'),yl=R('<div class="spinner mx-auto">');const lf=()=>{const[e,t]=J(""),[r,l]=J("name"),[u,v]=J("asc"),[h,s]=J(1),[n,f]=J(20),[g,p]=J(null),[_,b]=J(!1),[C,x]=J(!1),[o,d]=J(!1),[a,{refetch:c}]=qe(tt,Re.getDaemonSets),[m]=qe(()=>(_()||C())&&g()?{name:g().name,ns:g().namespace}:null,async P=>P&&(await Re.getDaemonSetYAML(P.name,P.ns)).yaml||""),$=async P=>{const L=g();if(L)try{await Re.updateDaemonSet(L.name,L.namespace,P),Fe(`âœ… DaemonSet ${L.name} updated successfully`,"success"),x(!1),setTimeout(()=>c(),500),setTimeout(()=>c(),2e3)}catch(H){const w=H instanceof Error?H.message:"Unknown error";throw Fe(`âŒ Failed to update daemonset: ${w}`,"error"),H}},S=P=>{if(!P)return 0;let L=0;const H=P.match(/(\d+)d/),w=P.match(/(\d+)h/),N=P.match(/(\d+)m/);return H&&(L+=parseInt(H[1])*24*60),w&&(L+=parseInt(w[1])*60),N&&(L+=parseInt(N[1])),L},E=ze(()=>{let P=a()||[];const L=e().toLowerCase();L&&(P=P.filter(N=>N.name.toLowerCase().includes(L)||N.namespace.toLowerCase().includes(L)));const H=r(),w=u();return P=[...P].sort((N,z)=>{let V=0;switch(H){case"name":V=N.name.localeCompare(z.name);break;case"namespace":V=N.namespace.localeCompare(z.namespace);break;case"ready":V=N.ready-z.ready;break;case"age":V=S(N.age)-S(z.age);break}return w==="asc"?V:-V}),P}),y=ze(()=>Math.ceil(E().length/n())),k=ze(()=>{const P=(h()-1)*n();return E().slice(P,P+n())}),B=ze(()=>{const P=a()||[];return{total:P.length,ready:P.filter(L=>L.ready===L.desired&&L.ready>0).length,partial:P.filter(L=>L.ready!==L.desired&&L.ready>0).length,unavailable:P.filter(L=>L.ready===0).length}}),O=P=>{r()===P?v(L=>L==="asc"?"desc":"asc"):(l(P),v("asc")),s(1)},T=P=>(()=>{var L=Xu(),H=L.firstChild,w=H.nextSibling;return re(N=>{var z=r()===P.field&&u()==="asc"?"var(--accent-primary)":"var(--text-muted)",V=r()===P.field&&u()==="desc"?"var(--accent-primary)":"var(--text-muted)";return z!==N.e&&oe(H,"color",N.e=z),V!==N.t&&oe(w,"color",N.t=V),N},{e:void 0,t:void 0}),L})(),I=async P=>{try{await Re.restartDaemonSet(P.name,P.namespace),c()}catch(L){console.error("Failed to restart DaemonSet:",L)}},M=async P=>{if(confirm(`Are you sure you want to delete DaemonSet "${P.name}" in namespace "${P.namespace}"?`))try{await Re.deleteDaemonSet(P.name,P.namespace),Fe(`DaemonSet ${P.name} deleted successfully`,"success"),c()}catch(L){console.error("Failed to delete DaemonSet:",L),Fe(`Failed to delete DaemonSet: ${L instanceof Error?L.message:"Unknown error"}`,"error")}};return(()=>{var P=tf(),L=P.firstChild,H=L.firstChild,w=H.firstChild;w.nextSibling;var N=H.nextSibling,z=N.firstChild,V=L.nextSibling,Q=V.firstChild,F=Q.firstChild,U=F.nextSibling,W=Q.nextSibling,ce=W.firstChild,D=ce.nextSibling,j=W.nextSibling,K=j.firstChild,ee=K.nextSibling,ne=j.nextSibling,te=ne.firstChild,le=te.nextSibling,Z=ne.nextSibling,Y=Z.nextSibling,se=Y.nextSibling,G=V.nextSibling;return z.$$click=ie=>{const X=ie.currentTarget;X.classList.add("refreshing"),setTimeout(()=>X.classList.remove("refreshing"),500),c()},i(U,()=>B().total),i(D,()=>B().ready),i(ee,()=>B().partial),i(le,()=>B().unavailable),Y.$$input=ie=>{t(ie.currentTarget.value),s(1)},se.addEventListener("change",ie=>{f(parseInt(ie.currentTarget.value)),s(1)}),i(G,A(q,{get when(){return!a.loading},get fallback(){return(()=>{var ie=rf(),X=ie.firstChild;return X.nextSibling,ie})()},get children(){return[(()=>{var ie=Zu(),X=ie.firstChild,fe=X.firstChild,Ae=fe.firstChild,Ce=Ae.firstChild,$e=Ce.firstChild;$e.firstChild;var ye=Ce.nextSibling,he=ye.firstChild;he.firstChild;var ae=ye.nextSibling,ue=ae.nextSibling,Se=ue.nextSibling,_e=Se.firstChild;_e.firstChild;var de=Se.nextSibling,be=de.nextSibling,ve=be.firstChild;ve.firstChild;var ge=fe.nextSibling;return Ce.$$click=()=>O("name"),i($e,A(T,{field:"name"}),null),ye.$$click=()=>O("namespace"),i(he,A(T,{field:"namespace"}),null),Se.$$click=()=>O("ready"),i(_e,A(T,{field:"ready"}),null),be.$$click=()=>O("age"),i(ve,A(T,{field:"age"}),null),i(ge,A(Ne,{get each(){return k()},get fallback(){return(()=>{var me=sf();return me.firstChild,me})()},children:me=>(()=>{var pe=nf(),xe=pe.firstChild,we=xe.firstChild,ke=xe.nextSibling,Oe=ke.nextSibling,Pe=Oe.nextSibling,Ie=Pe.nextSibling,De=Ie.firstChild,je=Ie.nextSibling,Ue=je.nextSibling,Ke=Ue.nextSibling;return we.$$click=()=>{p(me),d(!0)},i(we,(()=>{var Te=Me(()=>me.name.length>40);return()=>Te()?me.name.slice(0,37)+"...":me.name})()),i(ke,()=>me.namespace),i(Oe,()=>me.desired),i(Pe,()=>me.current),i(De,()=>me.ready),i(je,()=>me.available),i(Ue,()=>me.age),i(Ke,A(Tt,{actions:[{label:"Restart",icon:"restart",onClick:()=>I(me)},{label:"View YAML",icon:"yaml",onClick:()=>{p(me),b(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{p(me),x(!0)}},{label:"Delete",icon:"delete",onClick:()=>M(me),variant:"danger",divider:!0}]})),re(()=>He(De,`badge ${me.ready===me.desired?"badge-success":"badge-warning"}`)),pe})()})),ie})(),A(q,{get when(){return y()>1},get children(){var ie=Qu(),X=ie.firstChild,fe=X.firstChild,Ae=fe.nextSibling,Ce=Ae.nextSibling,$e=Ce.nextSibling,ye=$e.nextSibling,he=ye.nextSibling;he.nextSibling;var ae=X.nextSibling,ue=ae.firstChild,Se=ue.nextSibling,_e=Se.nextSibling,de=_e.firstChild,be=de.nextSibling;be.nextSibling;var ve=_e.nextSibling,ge=ve.nextSibling;return i(X,()=>(h()-1)*n()+1,Ae),i(X,()=>Math.min(h()*n(),E().length),$e),i(X,()=>E().length,he),ue.$$click=()=>s(1),Se.$$click=()=>s(me=>Math.max(1,me-1)),i(_e,h,be),i(_e,y,null),ve.$$click=()=>s(me=>Math.min(y(),me+1)),ge.$$click=()=>s(y()),re(me=>{var pe=h()===1,xe=h()===1,we=h()===y(),ke=h()===y();return pe!==me.e&&(ue.disabled=me.e=pe),xe!==me.t&&(Se.disabled=me.t=xe),we!==me.a&&(ve.disabled=me.a=we),ke!==me.o&&(ge.disabled=me.o=ke),me},{e:void 0,t:void 0,a:void 0,o:void 0}),ie}})]}})),i(P,A(it,{get isOpen(){return _()},onClose:()=>b(!1),get title(){return`YAML: ${g()?.name}`},size:"xl",get children(){return A(q,{get when(){return!m.loading},get fallback(){return yl()},get children(){return A(tr,{get yaml(){return m()||""},get title(){return g()?.name}})}})}}),null),i(P,A(it,{get isOpen(){return C()},onClose:()=>x(!1),get title(){return`Edit YAML: ${g()?.name}`},size:"xl",get children(){return A(q,{get when(){return!m.loading},get fallback(){return yl()},get children(){var ie=ef();return i(ie,A(ur,{get yaml(){return m()||""},get title(){return g()?.name},onSave:$,onCancel:()=>x(!1)})),ie}})}}),null),i(P,A(cr,{get isOpen(){return o()},onClose:()=>d(!1),resourceType:"daemonset",get name(){return g()?.name||""},get namespace(){return g()?.namespace}}),null),re(()=>Y.value=e()),re(()=>se.value=n()),P})()};Qe(["click","input"]);var of=R('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>â–²</span><span>â–¼'),af=R('<div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class=whitespace-nowrap>Schedule</th><th class=whitespace-nowrap>Suspend</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Active </div></th><th class=whitespace-nowrap>Last Schedule</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),cf=R('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:#161b22><div style=color:#8b949e>Showing <!> - <!> of <!> CronJobs</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>â† Prev</button><span class="px-3 py-1"style=color:#c9d1d9>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Next â†’</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Last'),df=R("<div style=height:70vh>"),hf=R('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>CronJobs</h1><p style=color:var(--text-secondary)>Scheduled job management</p></div><div class="flex items-center gap-3"><button class=icon-btn title="Refresh CronJobs"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Active</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--warning-color)"><span class=text-sm style=color:var(--text-secondary)>Suspended</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid #3b82f6"><span class=text-sm style=color:var(--text-secondary)>Scheduled</span><span class="text-xl font-bold"style=color:#3b82f6></span></div><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class="overflow-hidden rounded-lg"style=background:#0d1117>'),uf=R('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading CronJobs...'),ff=R('<tr><td colspan=8 class="text-center py-8"style=color:var(--text-muted)>No CronJobs found'),gf=R('<tr><td><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td></td><td><code class="px-2 py-1 rounded text-xs"style=background:var(--bg-tertiary)></code></td><td><span></span></td><td></td><td></td><td></td><td>'),xl=R('<div class="spinner mx-auto">');const pf=()=>{const[e,t]=J(""),[r,l]=J("name"),[u,v]=J("asc"),[h,s]=J(1),[n,f]=J(20),[g,p]=J(null),[_,b]=J(!1),[C,x]=J(!1),[o,d]=J(!1),[a,{refetch:c}]=qe(tt,Re.getCronJobs),[m]=qe(()=>(_()||C())&&g()?{name:g().name,ns:g().namespace}:null,async L=>L&&(await Re.getCronJobYAML(L.name,L.ns)).yaml||""),$=async L=>{const H=g();if(H)try{await Re.updateCronJob(H.name,H.namespace,L),Fe(`âœ… CronJob ${H.name} updated successfully`,"success"),x(!1),setTimeout(()=>c(),500),setTimeout(()=>c(),2e3)}catch(w){const N=w instanceof Error?w.message:"Unknown error";throw Fe(`âŒ Failed to update cronjob: ${N}`,"error"),w}},S=L=>{if(!L)return 0;let H=0;const w=L.match(/(\d+)d/),N=L.match(/(\d+)h/),z=L.match(/(\d+)m/);return w&&(H+=parseInt(w[1])*24*60),N&&(H+=parseInt(N[1])*60),z&&(H+=parseInt(z[1])),H},E=ze(()=>{let L=a()||[];const H=e().toLowerCase();H&&(L=L.filter(z=>z.name.toLowerCase().includes(H)||z.namespace.toLowerCase().includes(H)));const w=r(),N=u();return L=[...L].sort((z,V)=>{let Q=0;switch(w){case"name":Q=z.name.localeCompare(V.name);break;case"namespace":Q=z.namespace.localeCompare(V.namespace);break;case"active":Q=z.active-V.active;break;case"age":Q=S(z.age)-S(V.age);break}return N==="asc"?Q:-Q}),L}),y=ze(()=>Math.ceil(E().length/n())),k=ze(()=>{const L=(h()-1)*n();return E().slice(L,L+n())}),B=ze(()=>{const L=a()||[];return{total:L.length,active:L.filter(H=>H.active>0).length,suspended:L.filter(H=>H.suspend).length,scheduled:L.filter(H=>!H.suspend&&H.active===0).length}}),O=L=>{r()===L?v(H=>H==="asc"?"desc":"asc"):(l(L),v("asc")),s(1)},T=L=>(()=>{var H=of(),w=H.firstChild,N=w.nextSibling;return re(z=>{var V=r()===L.field&&u()==="asc"?"var(--accent-primary)":"var(--text-muted)",Q=r()===L.field&&u()==="desc"?"var(--accent-primary)":"var(--text-muted)";return V!==z.e&&oe(w,"color",z.e=V),Q!==z.t&&oe(N,"color",z.t=Q),z},{e:void 0,t:void 0}),H})(),I=async L=>{try{await Re.triggerCronJob(L.name,L.namespace),c()}catch(H){console.error("Failed to trigger CronJob:",H)}},M=async L=>{try{await Re.suspendCronJob(L.name,L.namespace,!L.suspend),c()}catch(H){console.error("Failed to toggle suspend CronJob:",H)}},P=async L=>{if(confirm(`Are you sure you want to delete CronJob "${L.name}" in namespace "${L.namespace}"?`))try{await Re.deleteCronJob(L.name,L.namespace),Fe(`CronJob ${L.name} deleted successfully`,"success"),c()}catch(H){console.error("Failed to delete CronJob:",H),Fe(`Failed to delete CronJob: ${H instanceof Error?H.message:"Unknown error"}`,"error")}};return(()=>{var L=hf(),H=L.firstChild,w=H.firstChild,N=w.firstChild;N.nextSibling;var z=w.nextSibling,V=z.firstChild,Q=H.nextSibling,F=Q.firstChild,U=F.firstChild,W=U.nextSibling,ce=F.nextSibling,D=ce.firstChild,j=D.nextSibling,K=ce.nextSibling,ee=K.firstChild,ne=ee.nextSibling,te=K.nextSibling,le=te.firstChild,Z=le.nextSibling,Y=te.nextSibling,se=Y.nextSibling,G=se.nextSibling,ie=Q.nextSibling;return V.$$click=X=>{const fe=X.currentTarget;fe.classList.add("refreshing"),setTimeout(()=>fe.classList.remove("refreshing"),500),c()},i(W,()=>B().total),i(j,()=>B().active),i(ne,()=>B().suspended),i(Z,()=>B().scheduled),se.$$input=X=>{t(X.currentTarget.value),s(1)},G.addEventListener("change",X=>{f(parseInt(X.currentTarget.value)),s(1)}),i(ie,A(q,{get when(){return!a.loading},get fallback(){return(()=>{var X=uf(),fe=X.firstChild;return fe.nextSibling,X})()},get children(){return[(()=>{var X=af(),fe=X.firstChild,Ae=fe.firstChild,Ce=Ae.firstChild,$e=Ce.firstChild,ye=$e.firstChild;ye.firstChild;var he=$e.nextSibling,ae=he.firstChild;ae.firstChild;var ue=he.nextSibling,Se=ue.nextSibling,_e=Se.nextSibling,de=_e.firstChild;de.firstChild;var be=_e.nextSibling,ve=be.nextSibling,ge=ve.firstChild;ge.firstChild;var me=Ae.nextSibling;return $e.$$click=()=>O("name"),i(ye,A(T,{field:"name"}),null),he.$$click=()=>O("namespace"),i(ae,A(T,{field:"namespace"}),null),_e.$$click=()=>O("active"),i(de,A(T,{field:"active"}),null),ve.$$click=()=>O("age"),i(ge,A(T,{field:"age"}),null),i(me,A(Ne,{get each(){return k()},get fallback(){return(()=>{var pe=ff();return pe.firstChild,pe})()},children:pe=>(()=>{var xe=gf(),we=xe.firstChild,ke=we.firstChild,Oe=we.nextSibling,Pe=Oe.nextSibling,Ie=Pe.firstChild,De=Pe.nextSibling,je=De.firstChild,Ue=De.nextSibling,Ke=Ue.nextSibling,Te=Ke.nextSibling,Ge=Te.nextSibling;return ke.$$click=()=>{p(pe),d(!0)},i(ke,(()=>{var Be=Me(()=>pe.name.length>40);return()=>Be()?pe.name.slice(0,37)+"...":pe.name})()),i(Oe,()=>pe.namespace),i(Ie,()=>pe.schedule),i(je,()=>pe.suspend?"Yes":"No"),i(Ue,()=>pe.active),i(Ke,()=>pe.lastSchedule||"Never"),i(Te,()=>pe.age),i(Ge,A(Tt,{get actions(){return[{label:"Trigger",icon:"restart",onClick:()=>I(pe)},{label:pe.suspend?"Resume":"Suspend",icon:"restart",onClick:()=>M(pe)},{label:"View YAML",icon:"yaml",onClick:()=>{p(pe),b(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{p(pe),x(!0)}},{label:"Delete",icon:"delete",onClick:()=>P(pe),variant:"danger",divider:!0}]}})),re(()=>He(je,`badge ${pe.suspend?"badge-warning":"badge-success"}`)),xe})()})),X})(),A(q,{get when(){return y()>1},get children(){var X=cf(),fe=X.firstChild,Ae=fe.firstChild,Ce=Ae.nextSibling,$e=Ce.nextSibling,ye=$e.nextSibling,he=ye.nextSibling,ae=he.nextSibling;ae.nextSibling;var ue=fe.nextSibling,Se=ue.firstChild,_e=Se.nextSibling,de=_e.nextSibling,be=de.firstChild,ve=be.nextSibling;ve.nextSibling;var ge=de.nextSibling,me=ge.nextSibling;return i(fe,()=>(h()-1)*n()+1,Ce),i(fe,()=>Math.min(h()*n(),E().length),ye),i(fe,()=>E().length,ae),Se.$$click=()=>s(1),_e.$$click=()=>s(pe=>Math.max(1,pe-1)),i(de,h,ve),i(de,y,null),ge.$$click=()=>s(pe=>Math.min(y(),pe+1)),me.$$click=()=>s(y()),re(pe=>{var xe=h()===1,we=h()===1,ke=h()===y(),Oe=h()===y();return xe!==pe.e&&(Se.disabled=pe.e=xe),we!==pe.t&&(_e.disabled=pe.t=we),ke!==pe.a&&(ge.disabled=pe.a=ke),Oe!==pe.o&&(me.disabled=pe.o=Oe),pe},{e:void 0,t:void 0,a:void 0,o:void 0}),X}})]}})),i(L,A(it,{get isOpen(){return _()},onClose:()=>b(!1),get title(){return`YAML: ${g()?.name}`},size:"xl",get children(){return A(q,{get when(){return!m.loading},get fallback(){return xl()},get children(){return A(tr,{get yaml(){return m()||""},get title(){return g()?.name}})}})}}),null),i(L,A(it,{get isOpen(){return C()},onClose:()=>x(!1),get title(){return`Edit YAML: ${g()?.name}`},size:"xl",get children(){return A(q,{get when(){return!m.loading},get fallback(){return xl()},get children(){var X=df();return i(X,A(ur,{get yaml(){return m()||""},get title(){return g()?.name},onSave:$,onCancel:()=>x(!1)})),X}})}}),null),i(L,A(cr,{get isOpen(){return o()},onClose:()=>d(!1),resourceType:"cronjob",get name(){return g()?.name||""},get namespace(){return g()?.namespace}}),null),re(()=>se.value=e()),re(()=>G.value=n()),L})()};Qe(["click","input"]);var vf=R('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>â–²</span><span>â–¼'),mf=R('<div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class=whitespace-nowrap>Completions</th><th class=whitespace-nowrap>Duration</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Status </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),_f=R('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:#161b22><div style=color:#8b949e>Showing <!> - <!> of <!> jobs</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>â† Prev</button><span class="px-3 py-1"style=color:#c9d1d9>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Next â†’</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Last'),bf=R("<div style=height:70vh>"),yf=R('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Jobs</h1><p style=color:var(--text-secondary)>One-time task execution</p></div><div class="flex items-center gap-3"><button class=icon-btn title="Refresh Jobs"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Complete</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid #3b82f6"><span class=text-sm style=color:var(--text-secondary)>Running</span><span class="text-xl font-bold"style=color:#3b82f6></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--error-color)"><span class=text-sm style=color:var(--text-secondary)>Failed</span><span class="text-xl font-bold"style=color:var(--error-color)></span></div><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class="overflow-hidden rounded-lg"style=background:#0d1117>'),xf=R('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading jobs...'),$f=R('<tr><td colspan=7 class="text-center py-8"style=color:var(--text-muted)>No jobs found'),wf=R('<tr><td><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td></td><td></td><td></td><td></td><td><span></span></td><td>'),$l=R('<div class="spinner mx-auto">');const Sf=()=>{const[e,t]=J(""),[r,l]=J("name"),[u,v]=J("asc"),[h,s]=J(1),[n,f]=J(20),[g,p]=J(null),[_,b]=J(!1),[C,x]=J(!1),[o,d]=J(!1),[a,{refetch:c}]=qe(tt,Re.getJobs),[m]=qe(()=>(_()||C())&&g()?{name:g().name,ns:g().namespace}:null,async M=>M&&(await Re.getJobYAML(M.name,M.ns)).yaml||""),$=async M=>{const P=g();if(P)try{await Re.updateJob(P.name,P.namespace,M),Fe(`âœ… Job ${P.name} updated successfully`,"success"),x(!1),setTimeout(()=>c(),500),setTimeout(()=>c(),2e3)}catch(L){const H=L instanceof Error?L.message:"Unknown error";throw Fe(`âŒ Failed to update job: ${H}`,"error"),L}},S=M=>{if(!M)return 0;let P=0;const L=M.match(/(\d+)d/),H=M.match(/(\d+)h/),w=M.match(/(\d+)m/);return L&&(P+=parseInt(L[1])*24*60),H&&(P+=parseInt(H[1])*60),w&&(P+=parseInt(w[1])),P},E=ze(()=>{let M=a()||[];const P=e().toLowerCase();P&&(M=M.filter(w=>w.name.toLowerCase().includes(P)||w.namespace.toLowerCase().includes(P)));const L=r(),H=u();return M=[...M].sort((w,N)=>{let z=0;switch(L){case"name":z=w.name.localeCompare(N.name);break;case"namespace":z=w.namespace.localeCompare(N.namespace);break;case"status":z=w.status.localeCompare(N.status);break;case"age":z=S(w.age)-S(N.age);break}return H==="asc"?z:-z}),M}),y=ze(()=>Math.ceil(E().length/n())),k=ze(()=>{const M=(h()-1)*n();return E().slice(M,M+n())}),B=ze(()=>{const M=a()||[];return{total:M.length,complete:M.filter(P=>P.status==="Complete").length,running:M.filter(P=>P.status==="Running"||P.status==="Active").length,failed:M.filter(P=>P.status==="Failed").length}}),O=M=>{r()===M?v(P=>P==="asc"?"desc":"asc"):(l(M),v("asc")),s(1)},T=M=>(()=>{var P=vf(),L=P.firstChild,H=L.nextSibling;return re(w=>{var N=r()===M.field&&u()==="asc"?"var(--accent-primary)":"var(--text-muted)",z=r()===M.field&&u()==="desc"?"var(--accent-primary)":"var(--text-muted)";return N!==w.e&&oe(L,"color",w.e=N),z!==w.t&&oe(H,"color",w.t=z),w},{e:void 0,t:void 0}),P})(),I=async M=>{if(confirm(`Are you sure you want to delete job "${M.name}" in namespace "${M.namespace}"?`))try{await Re.deleteJob(M.name,M.namespace),Fe(`Job ${M.name} deleted successfully`,"success"),c()}catch(P){console.error("Failed to delete job:",P),Fe(`Failed to delete job: ${P instanceof Error?P.message:"Unknown error"}`,"error")}};return(()=>{var M=yf(),P=M.firstChild,L=P.firstChild,H=L.firstChild;H.nextSibling;var w=L.nextSibling,N=w.firstChild,z=P.nextSibling,V=z.firstChild,Q=V.firstChild,F=Q.nextSibling,U=V.nextSibling,W=U.firstChild,ce=W.nextSibling,D=U.nextSibling,j=D.firstChild,K=j.nextSibling,ee=D.nextSibling,ne=ee.firstChild,te=ne.nextSibling,le=ee.nextSibling,Z=le.nextSibling,Y=Z.nextSibling,se=z.nextSibling;return N.$$click=G=>{const ie=G.currentTarget;ie.classList.add("refreshing"),setTimeout(()=>ie.classList.remove("refreshing"),500),c()},i(F,()=>B().total),i(ce,()=>B().complete),i(K,()=>B().running),i(te,()=>B().failed),Z.$$input=G=>{t(G.currentTarget.value),s(1)},Y.addEventListener("change",G=>{f(parseInt(G.currentTarget.value)),s(1)}),i(se,A(q,{get when(){return!a.loading},get fallback(){return(()=>{var G=xf(),ie=G.firstChild;return ie.nextSibling,G})()},get children(){return[(()=>{var G=mf(),ie=G.firstChild,X=ie.firstChild,fe=X.firstChild,Ae=fe.firstChild,Ce=Ae.firstChild;Ce.firstChild;var $e=Ae.nextSibling,ye=$e.firstChild;ye.firstChild;var he=$e.nextSibling,ae=he.nextSibling,ue=ae.nextSibling,Se=ue.firstChild;Se.firstChild;var _e=ue.nextSibling,de=_e.firstChild;de.firstChild;var be=X.nextSibling;return Ae.$$click=()=>O("name"),i(Ce,A(T,{field:"name"}),null),$e.$$click=()=>O("namespace"),i(ye,A(T,{field:"namespace"}),null),ue.$$click=()=>O("age"),i(Se,A(T,{field:"age"}),null),_e.$$click=()=>O("status"),i(de,A(T,{field:"status"}),null),i(be,A(Ne,{get each(){return k()},get fallback(){return(()=>{var ve=$f();return ve.firstChild,ve})()},children:ve=>(()=>{var ge=wf(),me=ge.firstChild,pe=me.firstChild,xe=me.nextSibling,we=xe.nextSibling,ke=we.nextSibling,Oe=ke.nextSibling,Pe=Oe.nextSibling,Ie=Pe.firstChild,De=Pe.nextSibling;return pe.$$click=()=>{p(ve),d(!0)},i(pe,(()=>{var je=Me(()=>ve.name.length>40);return()=>je()?ve.name.slice(0,37)+"...":ve.name})()),i(xe,()=>ve.namespace),i(we,()=>ve.completions),i(ke,()=>ve.duration||"-"),i(Oe,()=>ve.age),i(Ie,()=>ve.status),i(De,A(Tt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{p(ve),b(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{p(ve),x(!0)}},{label:"Delete",icon:"delete",onClick:()=>I(ve),variant:"danger",divider:!0}]})),re(()=>He(Ie,`badge ${ve.status==="Complete"?"badge-success":ve.status==="Failed"?"badge-error":"badge-warning"}`)),ge})()})),G})(),A(q,{get when(){return y()>1},get children(){var G=_f(),ie=G.firstChild,X=ie.firstChild,fe=X.nextSibling,Ae=fe.nextSibling,Ce=Ae.nextSibling,$e=Ce.nextSibling,ye=$e.nextSibling;ye.nextSibling;var he=ie.nextSibling,ae=he.firstChild,ue=ae.nextSibling,Se=ue.nextSibling,_e=Se.firstChild,de=_e.nextSibling;de.nextSibling;var be=Se.nextSibling,ve=be.nextSibling;return i(ie,()=>(h()-1)*n()+1,fe),i(ie,()=>Math.min(h()*n(),E().length),Ce),i(ie,()=>E().length,ye),ae.$$click=()=>s(1),ue.$$click=()=>s(ge=>Math.max(1,ge-1)),i(Se,h,de),i(Se,y,null),be.$$click=()=>s(ge=>Math.min(y(),ge+1)),ve.$$click=()=>s(y()),re(ge=>{var me=h()===1,pe=h()===1,xe=h()===y(),we=h()===y();return me!==ge.e&&(ae.disabled=ge.e=me),pe!==ge.t&&(ue.disabled=ge.t=pe),xe!==ge.a&&(be.disabled=ge.a=xe),we!==ge.o&&(ve.disabled=ge.o=we),ge},{e:void 0,t:void 0,a:void 0,o:void 0}),G}})]}})),i(M,A(it,{get isOpen(){return _()},onClose:()=>b(!1),get title(){return`YAML: ${g()?.name}`},size:"xl",get children(){return A(q,{get when(){return!m.loading},get fallback(){return $l()},get children(){return A(tr,{get yaml(){return m()||""},get title(){return g()?.name}})}})}}),null),i(M,A(it,{get isOpen(){return C()},onClose:()=>x(!1),get title(){return`Edit YAML: ${g()?.name}`},size:"xl",get children(){return A(q,{get when(){return!m.loading},get fallback(){return $l()},get children(){var G=bf();return i(G,A(ur,{get yaml(){return m()||""},get title(){return g()?.name},onSave:$,onCancel:()=>x(!1)})),G}})}}),null),i(M,A(cr,{get isOpen(){return o()},onClose:()=>d(!1),resourceType:"job",get name(){return g()?.name||""},get namespace(){return g()?.namespace}}),null),re(()=>Z.value=e()),re(()=>Y.value=n()),M})()};Qe(["click","input"]);var Cf=R('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>â–²</span><span>â–¼'),kf=R('<div class="card p-4"><h3 class="font-semibold mb-3 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>Active Port Forwards</h3><div class="flex flex-wrap gap-2">'),Af=R('<div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Type </div></th><th class=whitespace-nowrap>Cluster IP</th><th class=whitespace-nowrap>External IP</th><th class=whitespace-nowrap>Ports</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),Mf=R('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:#161b22><div style=color:#8b949e>Showing <!> - <!> of <!> services</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>â† Prev</button><span class="px-3 py-1"style=color:#c9d1d9>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Next â†’</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Last'),Ef=R("<div style=height:70vh>"),Lf=R('<div class=space-y-4><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Local Port</label><input type=number min=1024 max=65535 class="w-full px-4 py-2 rounded-lg"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Remote Port</label><input type=number min=1 max=65535 class="w-full px-4 py-2 rounded-lg"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div class="p-3 rounded-lg text-sm"style=background:var(--bg-tertiary);color:var(--text-muted)>This will forward <code>localhost:</code> to <code>:</code></div><div class="flex gap-2"><button class="btn-secondary flex-1">Cancel</button><button class="btn-primary flex-1">Start'),Rf=R('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Services</h1><p style=color:var(--text-secondary)>Network services and load balancers</p></div><div class="flex items-center gap-3"><button class=icon-btn title="Refresh Services"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2 transition-all"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2 transition-all"><span class=text-sm style=color:var(--text-secondary)>ClusterIP</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2 transition-all"><span class=text-sm style=color:var(--text-secondary)>NodePort</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2 transition-all"><span class=text-sm style=color:var(--text-secondary)>LoadBalancer</span><span class="text-xl font-bold"style=color:#3b82f6></span></div><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class="overflow-hidden rounded-lg"style=background:#0d1117>'),Df=R('<div class="flex items-center gap-2 px-3 py-2 rounded-lg"style=background:var(--bg-tertiary)><span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span><span style=color:var(--text-primary)></span><span style=color:var(--text-muted)>localhost:<!> â†’ </span><a target=_blank class="text-xs px-2 py-1 rounded"style=background:var(--accent-primary);color:white>Open</a><button class="text-red-400 hover:text-red-300"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12">'),Tf=R('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading services...'),Pf=R('<tr><td colspan=8 class="text-center py-8"style=color:var(--text-muted)>No services found'),If=R('<tr><td><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td></td><td><span></span></td><td class="font-mono text-sm"></td><td class="font-mono text-sm"></td><td class=text-sm></td><td></td><td>'),wl=R('<div class="spinner mx-auto">');const Bf=()=>{const[e,t]=J(""),[r,l]=J("all"),[u,v]=J("name"),[h,s]=J("asc"),[n,f]=J(1),[g,p]=J(20),[_,b]=J(null),[C,x]=J(!1),[o,d]=J(!1),[a,c]=J(!1),[m,$]=J(!1),[S,E]=J(8080),[y,k]=J(80),[B,{refetch:O}]=qe(tt,Re.getServices),[T,{refetch:I}]=qe(Re.listPortForwards),[M]=qe(()=>(C()||o())&&_()?{name:_().name,ns:_().namespace}:null,async D=>D&&(await Re.getServiceYAML(D.name,D.ns)).yaml||""),P=async D=>{const j=_();if(j)try{await Re.updateService(j.name,j.namespace,D),Fe(`âœ… Service ${j.name} updated successfully`,"success"),d(!1),setTimeout(()=>O(),500),setTimeout(()=>O(),2e3)}catch(K){const ee=K instanceof Error?K.message:"Unknown error";throw Fe(`âŒ Failed to update service: ${ee}`,"error"),K}},L=D=>{if(!D)return 0;let j=0;const K=D.match(/(\d+)d/),ee=D.match(/(\d+)h/),ne=D.match(/(\d+)m/);return K&&(j+=parseInt(K[1])*24*60),ee&&(j+=parseInt(ee[1])*60),ne&&(j+=parseInt(ne[1])),j},H=ze(()=>{let D=B()||[];const j=e().toLowerCase(),K=r();K!=="all"&&(D=D.filter(te=>te.type===K)),j&&(D=D.filter(te=>te.name.toLowerCase().includes(j)||te.namespace.toLowerCase().includes(j)||te.type.toLowerCase().includes(j)));const ee=u(),ne=h();return D=[...D].sort((te,le)=>{let Z=0;switch(ee){case"name":Z=te.name.localeCompare(le.name);break;case"namespace":Z=te.namespace.localeCompare(le.namespace);break;case"type":Z=te.type.localeCompare(le.type);break;case"age":Z=L(te.age)-L(le.age);break}return ne==="asc"?Z:-Z}),D}),w=ze(()=>Math.ceil(H().length/g())),N=ze(()=>{const D=(n()-1)*g();return H().slice(D,D+g())}),z=ze(()=>{const D=B()||[];return{total:D.length,clusterIP:D.filter(j=>j.type==="ClusterIP").length,nodePort:D.filter(j=>j.type==="NodePort").length,loadBalancer:D.filter(j=>j.type==="LoadBalancer").length}}),V=D=>{u()===D?s(j=>j==="asc"?"desc":"asc"):(v(D),s("asc")),f(1)},Q=D=>(()=>{var j=Cf(),K=j.firstChild,ee=K.nextSibling;return re(ne=>{var te=u()===D.field&&h()==="asc"?"var(--accent-primary)":"var(--text-muted)",le=u()===D.field&&h()==="desc"?"var(--accent-primary)":"var(--text-muted)";return te!==ne.e&&oe(K,"color",ne.e=te),le!==ne.t&&oe(ee,"color",ne.t=le),ne},{e:void 0,t:void 0}),j})(),F=async()=>{const D=_();if(D)try{await Re.startPortForward("service",D.name,D.namespace,S(),y()),Fe(`âœ… Port forward started: localhost:${S()} â†’ ${D.name}:${y()}`,"success"),$(!1),I()}catch(j){console.error("Failed to start port forward:",j);const K=j instanceof Error?j.message:"Unknown error";Fe(`âŒ Failed to start port forward: ${K}`,"error")}},U=async D=>{try{await Re.stopPortForward(D.id),Fe(`âœ… Port forward stopped: ${D.name}`,"success"),I()}catch(j){console.error("Failed to stop port forward:",j);const K=j instanceof Error?j.message:"Unknown error";Fe(`âŒ Failed to stop port forward: ${K}`,"error")}},W=D=>{b(D);const j=D.ports;if(typeof j=="string"&&j.trim()!==""&&j!=="-"){const K=j.match(/(\d+)/);K&&k(parseInt(K[1]))}$(!0)},ce=async D=>{if(confirm(`Are you sure you want to delete service "${D.name}" in namespace "${D.namespace}"?`))try{await Re.deleteService(D.name,D.namespace),Fe(`Service ${D.name} deleted successfully`,"success"),O()}catch(j){console.error("Failed to delete service:",j),Fe(`Failed to delete service: ${j instanceof Error?j.message:"Unknown error"}`,"error")}};return(()=>{var D=Rf(),j=D.firstChild,K=j.firstChild,ee=K.firstChild;ee.nextSibling;var ne=K.nextSibling,te=ne.firstChild,le=j.nextSibling,Z=le.firstChild,Y=Z.firstChild,se=Y.nextSibling,G=Z.nextSibling,ie=G.firstChild,X=ie.nextSibling,fe=G.nextSibling,Ae=fe.firstChild,Ce=Ae.nextSibling,$e=fe.nextSibling,ye=$e.firstChild,he=ye.nextSibling,ae=$e.nextSibling,ue=ae.nextSibling,Se=ue.nextSibling,_e=le.nextSibling;return te.$$click=de=>{const be=de.currentTarget;be.classList.add("refreshing"),setTimeout(()=>be.classList.remove("refreshing"),500),O()},Z.$$click=()=>{l("all"),f(1)},i(se,()=>z().total),G.$$click=()=>{l("ClusterIP"),f(1)},i(X,()=>z().clusterIP),fe.$$click=()=>{l("NodePort"),f(1)},i(Ce,()=>z().nodePort),$e.$$click=()=>{l("LoadBalancer"),f(1)},i(he,()=>z().loadBalancer),ue.$$input=de=>{t(de.currentTarget.value),f(1)},Se.addEventListener("change",de=>{p(parseInt(de.currentTarget.value)),f(1)}),i(D,A(q,{get when(){return(T()||[]).length>0},get children(){var de=kf(),be=de.firstChild,ve=be.nextSibling;return i(ve,A(Ne,{get each(){return T()||[]},children:ge=>(()=>{var me=Df(),pe=me.firstChild,xe=pe.nextSibling,we=xe.nextSibling,ke=we.firstChild,Oe=ke.nextSibling;Oe.nextSibling;var Pe=we.nextSibling,Ie=Pe.nextSibling;return i(xe,()=>ge.name),i(we,()=>ge.localPort,Oe),i(we,()=>ge.remotePort,null),Ie.$$click=()=>U(ge),re(()=>Xe(Pe,"href",`http://localhost:${ge.localPort}`)),me})()})),de}}),_e),i(_e,A(q,{get when(){return!B.loading},get fallback(){return(()=>{var de=Tf(),be=de.firstChild;return be.nextSibling,de})()},get children(){return[(()=>{var de=Af(),be=de.firstChild,ve=be.firstChild,ge=ve.firstChild,me=ge.firstChild,pe=me.firstChild;pe.firstChild;var xe=me.nextSibling,we=xe.firstChild;we.firstChild;var ke=xe.nextSibling,Oe=ke.firstChild;Oe.firstChild;var Pe=ke.nextSibling,Ie=Pe.nextSibling,De=Ie.nextSibling,je=De.nextSibling,Ue=je.firstChild;Ue.firstChild;var Ke=ve.nextSibling;return me.$$click=()=>V("name"),i(pe,A(Q,{field:"name"}),null),xe.$$click=()=>V("namespace"),i(we,A(Q,{field:"namespace"}),null),ke.$$click=()=>V("type"),i(Oe,A(Q,{field:"type"}),null),je.$$click=()=>V("age"),i(Ue,A(Q,{field:"age"}),null),i(Ke,A(Ne,{get each(){return N()},get fallback(){return(()=>{var Te=Pf();return Te.firstChild,Te})()},children:Te=>(()=>{var Ge=If(),Be=Ge.firstChild,We=Be.firstChild,Ye=Be.nextSibling,Ze=Ye.nextSibling,rt=Ze.firstChild,ot=Ze.nextSibling,Ct=ot.nextSibling,Nt=Ct.nextSibling,rr=Nt.nextSibling,gr=rr.nextSibling;return We.$$click=()=>{b(Te),c(!0)},i(We,(()=>{var Le=Me(()=>Te.name.length>40);return()=>Le()?Te.name.slice(0,37)+"...":Te.name})()),i(Ye,()=>Te.namespace),i(rt,()=>Te.type),i(ot,()=>Te.clusterIP),i(Ct,()=>Te.externalIP||"-"),i(Nt,()=>Te.ports),i(rr,()=>Te.age),i(gr,A(Tt,{actions:[{label:"Port Forward",icon:"portforward",onClick:()=>W(Te)},{label:"View YAML",icon:"yaml",onClick:()=>{b(Te),x(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{b(Te),d(!0)}},{label:"Delete",icon:"delete",onClick:()=>ce(Te),variant:"danger",divider:!0}]})),re(()=>He(rt,`badge ${Te.type==="LoadBalancer"?"badge-info":Te.type==="NodePort"?"badge-warning":"badge-success"}`)),Ge})()})),de})(),A(q,{get when(){return w()>1},get children(){var de=Mf(),be=de.firstChild,ve=be.firstChild,ge=ve.nextSibling,me=ge.nextSibling,pe=me.nextSibling,xe=pe.nextSibling,we=xe.nextSibling;we.nextSibling;var ke=be.nextSibling,Oe=ke.firstChild,Pe=Oe.nextSibling,Ie=Pe.nextSibling,De=Ie.firstChild,je=De.nextSibling;je.nextSibling;var Ue=Ie.nextSibling,Ke=Ue.nextSibling;return i(be,()=>(n()-1)*g()+1,ge),i(be,()=>Math.min(n()*g(),H().length),pe),i(be,()=>H().length,we),Oe.$$click=()=>f(1),Pe.$$click=()=>f(Te=>Math.max(1,Te-1)),i(Ie,n,je),i(Ie,w,null),Ue.$$click=()=>f(Te=>Math.min(w(),Te+1)),Ke.$$click=()=>f(w()),re(Te=>{var Ge=n()===1,Be=n()===1,We=n()===w(),Ye=n()===w();return Ge!==Te.e&&(Oe.disabled=Te.e=Ge),Be!==Te.t&&(Pe.disabled=Te.t=Be),We!==Te.a&&(Ue.disabled=Te.a=We),Ye!==Te.o&&(Ke.disabled=Te.o=Ye),Te},{e:void 0,t:void 0,a:void 0,o:void 0}),de}})]}})),i(D,A(it,{get isOpen(){return C()},onClose:()=>x(!1),get title(){return`YAML: ${_()?.name}`},size:"xl",get children(){return A(q,{get when(){return!M.loading},get fallback(){return wl()},get children(){return A(tr,{get yaml(){return M()||""},get title(){return _()?.name}})}})}}),null),i(D,A(it,{get isOpen(){return o()},onClose:()=>d(!1),get title(){return`Edit YAML: ${_()?.name}`},size:"xl",get children(){return A(q,{get when(){return!M.loading},get fallback(){return wl()},get children(){var de=Ef();return i(de,A(ur,{get yaml(){return M()||""},get title(){return _()?.name},onSave:P,onCancel:()=>d(!1)})),de}})}}),null),i(D,A(cr,{get isOpen(){return a()},onClose:()=>c(!1),resourceType:"service",get name(){return _()?.name||""},get namespace(){return _()?.namespace}}),null),i(D,A(it,{get isOpen(){return m()},onClose:()=>$(!1),get title(){return`Port Forward: ${_()?.name}`},size:"sm",get children(){var de=Lf(),be=de.firstChild,ve=be.firstChild,ge=ve.nextSibling,me=be.nextSibling,pe=me.firstChild,xe=pe.nextSibling,we=me.nextSibling,ke=we.firstChild,Oe=ke.nextSibling;Oe.firstChild;var Pe=Oe.nextSibling,Ie=Pe.nextSibling,De=Ie.firstChild,je=we.nextSibling,Ue=je.firstChild,Ke=Ue.nextSibling;return ge.$$input=Te=>E(parseInt(Te.currentTarget.value)||8080),xe.$$input=Te=>k(parseInt(Te.currentTarget.value)||80),i(Oe,S,null),i(Ie,()=>_()?.name,De),i(Ie,y,null),Ue.$$click=()=>$(!1),Ke.$$click=F,re(()=>ge.value=S()),re(()=>xe.value=y()),de}}),null),re(de=>{var be=r()==="all"?"3px solid var(--accent-primary)":"3px solid transparent",ve=r()==="all"?1:.7,ge=r()==="ClusterIP"?"3px solid var(--success-color)":"3px solid transparent",me=r()==="ClusterIP"?1:.7,pe=r()==="NodePort"?"3px solid var(--warning-color)":"3px solid transparent",xe=r()==="NodePort"?1:.7,we=r()==="LoadBalancer"?"3px solid #3b82f6":"3px solid transparent",ke=r()==="LoadBalancer"?1:.7;return be!==de.e&&oe(Z,"border-left",de.e=be),ve!==de.t&&oe(Z,"opacity",de.t=ve),ge!==de.a&&oe(G,"border-left",de.a=ge),me!==de.o&&oe(G,"opacity",de.o=me),pe!==de.i&&oe(fe,"border-left",de.i=pe),xe!==de.n&&oe(fe,"opacity",de.n=xe),we!==de.s&&oe($e,"border-left",de.s=we),ke!==de.h&&oe($e,"opacity",de.h=ke),de},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),re(()=>ue.value=e()),re(()=>Se.value=g()),D})()};Qe(["click","input"]);var Of=R('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>â–²</span><span>â–¼'),Hf=R('<div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Class </div></th><th class=whitespace-nowrap>Hosts</th><th class=whitespace-nowrap>Address</th><th class=whitespace-nowrap>Ports</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),Nf=R('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:#161b22><div style=color:#8b949e>Showing <!> - <!> of <!> ingresses</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>â† Prev</button><span class="px-3 py-1"style=color:#c9d1d9>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Next â†’</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Last'),zf=R("<div style=height:70vh>"),Ff=R('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Ingresses</h1><p style=color:var(--text-secondary)>External access to services</p></div><div class="flex items-center gap-3"><button class=icon-btn title="Refresh Ingresses"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>With Address</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--warning-color)"><span class=text-sm style=color:var(--text-secondary)>Without Address</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid #3b82f6"><span class=text-sm style=color:var(--text-secondary)>Total Hosts</span><span class="text-xl font-bold"style=color:#3b82f6></span></div><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class="overflow-hidden rounded-lg"style=background:#0d1117>'),jf=R('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading ingresses...'),Uf=R('<tr><td colspan=8 class="text-center py-8"style=color:var(--text-muted)>No ingresses found'),Vf=R('<tr><td><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td></td><td></td><td><div class="flex flex-wrap gap-1"></div></td><td></td><td></td><td></td><td>'),Wf=R('<a target=_blank class="text-xs px-2 py-1 rounded hover:opacity-80"style=background:var(--bg-tertiary);color:var(--accent-primary)>'),Sl=R('<div class="spinner mx-auto">');const qf=()=>{const[e,t]=J(""),[r,l]=J("name"),[u,v]=J("asc"),[h,s]=J(1),[n,f]=J(20),[g,p]=J(null),[_,b]=J(!1),[C,x]=J(!1),[o,d]=J(!1),[a,{refetch:c}]=qe(tt,Re.getIngresses),[m]=qe(()=>(_()||C())&&g()?{name:g().name,ns:g().namespace}:null,async M=>M&&(await Re.getIngressYAML(M.name,M.ns)).yaml||""),$=async M=>{const P=g();if(P)try{await Re.updateIngress(P.name,P.namespace,M),Fe(`âœ… Ingress ${P.name} updated successfully`,"success"),x(!1),setTimeout(()=>c(),500),setTimeout(()=>c(),2e3)}catch(L){const H=L instanceof Error?L.message:"Unknown error";throw Fe(`âŒ Failed to update ingress: ${H}`,"error"),L}},S=M=>{if(!M)return 0;let P=0;const L=M.match(/(\d+)d/),H=M.match(/(\d+)h/),w=M.match(/(\d+)m/);return L&&(P+=parseInt(L[1])*24*60),H&&(P+=parseInt(H[1])*60),w&&(P+=parseInt(w[1])),P},E=ze(()=>{let M=a()||[];const P=e().toLowerCase();P&&(M=M.filter(w=>w.name.toLowerCase().includes(P)||w.namespace.toLowerCase().includes(P)||w.hosts?.some(N=>N.toLowerCase().includes(P))));const L=r(),H=u();return M=[...M].sort((w,N)=>{let z=0;switch(L){case"name":z=w.name.localeCompare(N.name);break;case"namespace":z=w.namespace.localeCompare(N.namespace);break;case"class":z=(w.class||"").localeCompare(N.class||"");break;case"age":z=S(w.age)-S(N.age);break}return H==="asc"?z:-z}),M}),y=ze(()=>Math.ceil(E().length/n())),k=ze(()=>{const M=(h()-1)*n();return E().slice(M,M+n())}),B=ze(()=>{const M=a()||[];return{total:M.length,withAddress:M.filter(P=>P.address&&P.address!=="-").length,withoutAddress:M.filter(P=>!P.address||P.address==="-").length,totalHosts:M.reduce((P,L)=>P+(L.hosts?.length||0),0)}}),O=M=>{r()===M?v(P=>P==="asc"?"desc":"asc"):(l(M),v("asc")),s(1)},T=M=>(()=>{var P=Of(),L=P.firstChild,H=L.nextSibling;return re(w=>{var N=r()===M.field&&u()==="asc"?"var(--accent-primary)":"var(--text-muted)",z=r()===M.field&&u()==="desc"?"var(--accent-primary)":"var(--text-muted)";return N!==w.e&&oe(L,"color",w.e=N),z!==w.t&&oe(H,"color",w.t=z),w},{e:void 0,t:void 0}),P})(),I=async M=>{if(confirm(`Are you sure you want to delete ingress "${M.name}" in namespace "${M.namespace}"?`))try{await Re.deleteIngress(M.name,M.namespace),Fe(`Ingress ${M.name} deleted successfully`,"success"),c()}catch(P){console.error("Failed to delete ingress:",P),Fe(`Failed to delete ingress: ${P instanceof Error?P.message:"Unknown error"}`,"error")}};return(()=>{var M=Ff(),P=M.firstChild,L=P.firstChild,H=L.firstChild;H.nextSibling;var w=L.nextSibling,N=w.firstChild,z=P.nextSibling,V=z.firstChild,Q=V.firstChild,F=Q.nextSibling,U=V.nextSibling,W=U.firstChild,ce=W.nextSibling,D=U.nextSibling,j=D.firstChild,K=j.nextSibling,ee=D.nextSibling,ne=ee.firstChild,te=ne.nextSibling,le=ee.nextSibling,Z=le.nextSibling,Y=Z.nextSibling,se=z.nextSibling;return N.$$click=G=>{const ie=G.currentTarget;ie.classList.add("refreshing"),setTimeout(()=>ie.classList.remove("refreshing"),500),c()},i(F,()=>B().total),i(ce,()=>B().withAddress),i(K,()=>B().withoutAddress),i(te,()=>B().totalHosts),Z.$$input=G=>{t(G.currentTarget.value),s(1)},Y.addEventListener("change",G=>{f(parseInt(G.currentTarget.value)),s(1)}),i(se,A(q,{get when(){return!a.loading},get fallback(){return(()=>{var G=jf(),ie=G.firstChild;return ie.nextSibling,G})()},get children(){return[(()=>{var G=Hf(),ie=G.firstChild,X=ie.firstChild,fe=X.firstChild,Ae=fe.firstChild,Ce=Ae.firstChild;Ce.firstChild;var $e=Ae.nextSibling,ye=$e.firstChild;ye.firstChild;var he=$e.nextSibling,ae=he.firstChild;ae.firstChild;var ue=he.nextSibling,Se=ue.nextSibling,_e=Se.nextSibling,de=_e.nextSibling,be=de.firstChild;be.firstChild;var ve=X.nextSibling;return Ae.$$click=()=>O("name"),i(Ce,A(T,{field:"name"}),null),$e.$$click=()=>O("namespace"),i(ye,A(T,{field:"namespace"}),null),he.$$click=()=>O("class"),i(ae,A(T,{field:"class"}),null),de.$$click=()=>O("age"),i(be,A(T,{field:"age"}),null),i(ve,A(Ne,{get each(){return k()},get fallback(){return(()=>{var ge=Uf();return ge.firstChild,ge})()},children:ge=>(()=>{var me=Vf(),pe=me.firstChild,xe=pe.firstChild,we=pe.nextSibling,ke=we.nextSibling,Oe=ke.nextSibling,Pe=Oe.firstChild,Ie=Oe.nextSibling,De=Ie.nextSibling,je=De.nextSibling,Ue=je.nextSibling;return xe.$$click=()=>{p(ge),d(!0)},i(xe,(()=>{var Ke=Me(()=>ge.name.length>40);return()=>Ke()?ge.name.slice(0,37)+"...":ge.name})()),i(we,()=>ge.namespace),i(ke,()=>ge.class||"-"),i(Pe,A(Ne,{get each(){return ge.hosts||[]},children:Ke=>(()=>{var Te=Wf();return Xe(Te,"href",`https://${Ke}`),i(Te,Ke),Te})()})),i(Ie,()=>ge.address||"-"),i(De,()=>ge.ports),i(je,()=>ge.age),i(Ue,A(Tt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{p(ge),b(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{p(ge),x(!0)}},{label:"Delete",icon:"delete",onClick:()=>I(ge),variant:"danger",divider:!0}]})),me})()})),G})(),A(q,{get when(){return y()>1},get children(){var G=Nf(),ie=G.firstChild,X=ie.firstChild,fe=X.nextSibling,Ae=fe.nextSibling,Ce=Ae.nextSibling,$e=Ce.nextSibling,ye=$e.nextSibling;ye.nextSibling;var he=ie.nextSibling,ae=he.firstChild,ue=ae.nextSibling,Se=ue.nextSibling,_e=Se.firstChild,de=_e.nextSibling;de.nextSibling;var be=Se.nextSibling,ve=be.nextSibling;return i(ie,()=>(h()-1)*n()+1,fe),i(ie,()=>Math.min(h()*n(),E().length),Ce),i(ie,()=>E().length,ye),ae.$$click=()=>s(1),ue.$$click=()=>s(ge=>Math.max(1,ge-1)),i(Se,h,de),i(Se,y,null),be.$$click=()=>s(ge=>Math.min(y(),ge+1)),ve.$$click=()=>s(y()),re(ge=>{var me=h()===1,pe=h()===1,xe=h()===y(),we=h()===y();return me!==ge.e&&(ae.disabled=ge.e=me),pe!==ge.t&&(ue.disabled=ge.t=pe),xe!==ge.a&&(be.disabled=ge.a=xe),we!==ge.o&&(ve.disabled=ge.o=we),ge},{e:void 0,t:void 0,a:void 0,o:void 0}),G}})]}})),i(M,A(it,{get isOpen(){return _()},onClose:()=>b(!1),get title(){return`YAML: ${g()?.name}`},size:"xl",get children(){return A(q,{get when(){return!m.loading},get fallback(){return Sl()},get children(){return A(tr,{get yaml(){return m()||""},get title(){return g()?.name}})}})}}),null),i(M,A(it,{get isOpen(){return C()},onClose:()=>x(!1),get title(){return`Edit YAML: ${g()?.name}`},size:"xl",get children(){return A(q,{get when(){return!m.loading},get fallback(){return Sl()},get children(){var G=zf();return i(G,A(ur,{get yaml(){return m()||""},get title(){return g()?.name},onSave:$,onCancel:()=>x(!1)})),G}})}}),null),i(M,A(cr,{get isOpen(){return o()},onClose:()=>d(!1),resourceType:"ingress",get name(){return g()?.name||""},get namespace(){return g()?.namespace}}),null),re(()=>Z.value=e()),re(()=>Y.value=n()),M})()};Qe(["click","input"]);var Kf=R('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>â–²</span><span>â–¼'),Yf=R('<div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Data </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),Gf=R('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:#161b22><div style=color:#8b949e>Showing <!> - <!> of <!> ConfigMaps</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>â† Prev</button><span class="px-3 py-1"style=color:#c9d1d9>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Next â†’</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Last'),Jf=R('<div class=space-y-4><div class="grid grid-cols-2 gap-4"><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Name</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Namespace</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Data Keys</div><div class=font-semibold style=color:var(--accent-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Age</div><div style=color:var(--text-primary)></div></div></div><div class="flex gap-2 pt-4"><button class="btn-primary flex-1">View YAML</button><button class="btn-secondary flex-1">Describe'),Xf=R('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>ConfigMaps</h1><p style=color:var(--text-secondary)>Configuration data storage</p></div><div class="flex items-center gap-3"><button class=icon-btn title="Refresh ConfigMaps"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid #8b5cf6"><span class=text-sm style=color:var(--text-secondary)>Filtered</span><span class="text-xl font-bold"style=color:#8b5cf6></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid #22c55e"><span class=text-sm style=color:var(--text-secondary)>Namespaces</span><span class="text-xl font-bold"style=color:#22c55e></span></div><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class="overflow-hidden rounded-lg"style=background:#0d1117>'),Zf=R('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading ConfigMaps...'),Qf=R('<tr><td colspan=5 class="text-center py-8"style=color:var(--text-muted)>No ConfigMaps found'),eg=R('<tr><td><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td></td><td><span class="badge badge-info"> keys</span></td><td></td><td>'),tg=R('<div class="spinner mx-auto">');const rg=()=>{const[e,t]=J(""),[r,l]=J("name"),[u,v]=J("asc"),[h,s]=J(1),[n,f]=J(20),[g,p]=J(null),[_,b]=J(!1),[C,x]=J(!1),[o,d]=J(!1),[a,c]=J(!1),[m,{refetch:$}]=qe(tt,Re.getConfigMaps),[S]=qe(()=>(_()||C())&&g()?{name:g().name,ns:g().namespace}:null,async M=>M&&(await Re.getConfigMapYAML(M.name,M.ns)).yaml||""),E=M=>{if(!M)return 0;let P=0;const L=M.match(/(\d+)d/),H=M.match(/(\d+)h/),w=M.match(/(\d+)m/);return L&&(P+=parseInt(L[1])*24*60),H&&(P+=parseInt(H[1])*60),w&&(P+=parseInt(w[1])),P},y=ze(()=>{let M=m()||[];const P=e().toLowerCase();P&&(M=M.filter(w=>w.name.toLowerCase().includes(P)||w.namespace.toLowerCase().includes(P)));const L=r(),H=u();return M=[...M].sort((w,N)=>{let z=0;switch(L){case"name":z=w.name.localeCompare(N.name);break;case"namespace":z=w.namespace.localeCompare(N.namespace);break;case"data":z=w.data-N.data;break;case"age":z=E(w.age)-E(N.age);break}return H==="asc"?z:-z}),M}),k=ze(()=>Math.ceil(y().length/n())),B=ze(()=>{const M=(h()-1)*n();return y().slice(M,M+n())}),O=M=>{r()===M?v(P=>P==="asc"?"desc":"asc"):(l(M),v("asc")),s(1)},T=M=>(()=>{var P=Kf(),L=P.firstChild,H=L.nextSibling;return re(w=>{var N=r()===M.field&&u()==="asc"?"var(--accent-primary)":"var(--text-muted)",z=r()===M.field&&u()==="desc"?"var(--accent-primary)":"var(--text-muted)";return N!==w.e&&oe(L,"color",w.e=N),z!==w.t&&oe(H,"color",w.t=z),w},{e:void 0,t:void 0}),P})(),I=async M=>{if(confirm(`Are you sure you want to delete ConfigMap "${M.name}" in namespace "${M.namespace}"?`))try{await Re.deleteConfigMap(M.name,M.namespace),Fe(`ConfigMap ${M.name} deleted successfully`,"success"),$()}catch(P){console.error("Failed to delete ConfigMap:",P),Fe(`Failed to delete ConfigMap: ${P instanceof Error?P.message:"Unknown error"}`,"error")}};return(()=>{var M=Xf(),P=M.firstChild,L=P.firstChild,H=L.firstChild;H.nextSibling;var w=L.nextSibling,N=w.firstChild,z=P.nextSibling,V=z.firstChild,Q=V.firstChild,F=Q.nextSibling,U=V.nextSibling,W=U.firstChild,ce=W.nextSibling,D=U.nextSibling,j=D.firstChild,K=j.nextSibling,ee=D.nextSibling,ne=ee.nextSibling,te=ne.nextSibling,le=z.nextSibling;return N.$$click=Z=>{const Y=Z.currentTarget;Y.classList.add("refreshing"),setTimeout(()=>Y.classList.remove("refreshing"),500),$()},i(F,()=>(m()||[]).length),i(ce,()=>y().length),i(K,()=>new Set((m()||[]).map(Z=>Z.namespace)).size),ne.$$input=Z=>{t(Z.currentTarget.value),s(1)},te.addEventListener("change",Z=>{f(parseInt(Z.currentTarget.value)),s(1)}),i(le,A(q,{get when(){return!m.loading},get fallback(){return(()=>{var Z=Zf(),Y=Z.firstChild;return Y.nextSibling,Z})()},get children(){return[(()=>{var Z=Yf(),Y=Z.firstChild,se=Y.firstChild,G=se.firstChild,ie=G.firstChild,X=ie.firstChild;X.firstChild;var fe=ie.nextSibling,Ae=fe.firstChild;Ae.firstChild;var Ce=fe.nextSibling,$e=Ce.firstChild;$e.firstChild;var ye=Ce.nextSibling,he=ye.firstChild;he.firstChild;var ae=se.nextSibling;return ie.$$click=()=>O("name"),i(X,A(T,{field:"name"}),null),fe.$$click=()=>O("namespace"),i(Ae,A(T,{field:"namespace"}),null),Ce.$$click=()=>O("data"),i($e,A(T,{field:"data"}),null),ye.$$click=()=>O("age"),i(he,A(T,{field:"age"}),null),i(ae,A(Ne,{get each(){return B()},get fallback(){return(()=>{var ue=Qf();return ue.firstChild,ue})()},children:ue=>(()=>{var Se=eg(),_e=Se.firstChild,de=_e.firstChild,be=_e.nextSibling,ve=be.nextSibling,ge=ve.firstChild,me=ge.firstChild,pe=ve.nextSibling,xe=pe.nextSibling;return de.$$click=()=>{p(ue),c(!0)},i(de,(()=>{var we=Me(()=>ue.name.length>40);return()=>we()?ue.name.slice(0,37)+"...":ue.name})()),i(be,()=>ue.namespace),i(ge,()=>ue.data,me),i(pe,()=>ue.age),i(xe,A(Tt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{p(ue),b(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{p(ue),x(!0)}},{label:"Delete",icon:"delete",onClick:()=>I(ue),variant:"danger",divider:!0}]})),Se})()})),Z})(),A(q,{get when(){return k()>1},get children(){var Z=Gf(),Y=Z.firstChild,se=Y.firstChild,G=se.nextSibling,ie=G.nextSibling,X=ie.nextSibling,fe=X.nextSibling,Ae=fe.nextSibling;Ae.nextSibling;var Ce=Y.nextSibling,$e=Ce.firstChild,ye=$e.nextSibling,he=ye.nextSibling,ae=he.firstChild,ue=ae.nextSibling;ue.nextSibling;var Se=he.nextSibling,_e=Se.nextSibling;return i(Y,()=>(h()-1)*n()+1,G),i(Y,()=>Math.min(h()*n(),y().length),X),i(Y,()=>y().length,Ae),$e.$$click=()=>s(1),ye.$$click=()=>s(de=>Math.max(1,de-1)),i(he,h,ue),i(he,k,null),Se.$$click=()=>s(de=>Math.min(k(),de+1)),_e.$$click=()=>s(k()),re(de=>{var be=h()===1,ve=h()===1,ge=h()===k(),me=h()===k();return be!==de.e&&($e.disabled=de.e=be),ve!==de.t&&(ye.disabled=de.t=ve),ge!==de.a&&(Se.disabled=de.a=ge),me!==de.o&&(_e.disabled=de.o=me),de},{e:void 0,t:void 0,a:void 0,o:void 0}),Z}})]}})),i(M,A(it,{get isOpen(){return o()},onClose:()=>d(!1),get title(){return`ConfigMap: ${g()?.name}`},size:"lg",get children(){return A(q,{get when(){return g()},get children(){var Z=Jf(),Y=Z.firstChild,se=Y.firstChild,G=se.firstChild,ie=G.nextSibling,X=se.nextSibling,fe=X.firstChild,Ae=fe.nextSibling,Ce=X.nextSibling,$e=Ce.firstChild,ye=$e.nextSibling,he=Ce.nextSibling,ae=he.firstChild,ue=ae.nextSibling,Se=Y.nextSibling,_e=Se.firstChild,de=_e.nextSibling;return i(ie,()=>g()?.name),i(Ae,()=>g()?.namespace),i(ye,()=>g()?.data),i(ue,()=>g()?.age),_e.$$click=()=>{d(!1),b(!0)},de.$$click=()=>{d(!1),c(!0)},Z}})}}),null),i(M,A(it,{get isOpen(){return _()},onClose:()=>b(!1),get title(){return`ConfigMap: ${g()?.name}`},size:"xl",get children(){return A(q,{get when(){return!S.loading},get fallback(){return tg()},get children(){return A(tr,{get yaml(){return S()||""},get title(){return g()?.name}})}})}}),null),i(M,A(cr,{get isOpen(){return a()},onClose:()=>c(!1),resourceType:"configmap",get name(){return g()?.name||""},get namespace(){return g()?.namespace}}),null),re(()=>ne.value=e()),re(()=>te.value=n()),M})()};Qe(["click","input"]);var sg=R('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>â–²</span><span>â–¼'),ig=R('<div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Type </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Data </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),ng=R('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:#161b22><div style=color:#8b949e>Showing <!> - <!> of <!> Secrets</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>â† Prev</button><span class="px-3 py-1"style=color:#c9d1d9>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Next â†’</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Last'),lg=R("<div style=height:70vh>"),og=R('<div class=space-y-4 style=background:var(--bg-primary);minHeight:100%><div class="flex items-center justify-between"><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Secrets</h1><div class="flex items-center gap-3"><input type=text placeholder="Search secrets..."class="px-3 py-2 rounded-lg bg-[var(--bg-alt)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent-primary)]"style="border:1px solid var(--border-color);color:var(--text-primary)"><button class="px-3 py-2 rounded-lg bg-[var(--accent-primary)] text-white text-sm font-medium hover:opacity-90 transition-opacity">Refresh</button></div></div><div class="overflow-hidden rounded-lg w-full"style=background:#0d1117>'),ag=R('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading Secrets...'),cg=R('<tr><td colspan=6 class="text-center py-8"style=color:var(--text-muted)>No secrets found'),dg=R('<tr><td><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td></td><td><span></span></td><td></td><td></td><td>'),Cl=R('<div class="spinner mx-auto">');const hg=()=>{const[e,t]=J(""),[r,l]=J("name"),[u,v]=J("asc"),[h,s]=J(1),[n,f]=J(20),[g,p]=J(null),[_,b]=J(!1),[C,x]=J(!1),[o,d]=J(!1),[a,c]=J(!1),[m,{refetch:$}]=qe(tt,Re.getSecrets),[S]=qe(()=>(_()||C())&&g()?{name:g().name,ns:g().namespace}:null,async L=>L&&(await Re.getSecretYAML(L.name,L.ns)).yaml||""),E=async L=>{const H=g();if(H)try{await Re.updateSecret(H.name,H.namespace,L),Fe(`âœ… Secret ${H.name} updated successfully`,"success"),x(!1),setTimeout(()=>$(),500),setTimeout(()=>$(),2e3)}catch(w){const N=w instanceof Error?w.message:"Unknown error";throw Fe(`âŒ Failed to update secret: ${N}`,"error"),w}},y=L=>{if(!L)return 0;let H=0;const w=L.match(/(\d+)d/),N=L.match(/(\d+)h/),z=L.match(/(\d+)m/);return w&&(H+=parseInt(w[1])*24*60),N&&(H+=parseInt(N[1])*60),z&&(H+=parseInt(z[1])),H},k=ze(()=>{let L=m()||[];const H=e().toLowerCase();H&&(L=L.filter(z=>z.name.toLowerCase().includes(H)||z.namespace.toLowerCase().includes(H)||z.type.toLowerCase().includes(H)));const w=r(),N=u();return L=[...L].sort((z,V)=>{let Q=0;switch(w){case"name":Q=z.name.localeCompare(V.name);break;case"namespace":Q=z.namespace.localeCompare(V.namespace);break;case"type":Q=z.type.localeCompare(V.type);break;case"data":Q=z.data-V.data;break;case"age":Q=y(z.age)-y(V.age);break}return N==="asc"?Q:-Q}),L}),B=ze(()=>Math.ceil(k().length/n())),O=ze(()=>{const L=(h()-1)*n();return k().slice(L,L+n())}),T=L=>{r()===L?v(H=>H==="asc"?"desc":"asc"):(l(L),v("asc")),s(1)},I=L=>(()=>{var H=sg(),w=H.firstChild,N=w.nextSibling;return re(z=>{var V=r()===L.field&&u()==="asc"?"var(--accent-primary)":"var(--text-muted)",Q=r()===L.field&&u()==="desc"?"var(--accent-primary)":"var(--text-muted)";return V!==z.e&&oe(w,"color",z.e=V),Q!==z.t&&oe(N,"color",z.t=Q),z},{e:void 0,t:void 0}),H})(),M=async L=>{if(confirm(`Are you sure you want to delete secret "${L.name}" in namespace "${L.namespace}"?`))try{await Re.deleteSecret(L.name,L.namespace),Fe(`Secret ${L.name} deleted successfully`,"success"),$()}catch(H){console.error("Failed to delete secret:",H),Fe(`Failed to delete secret: ${H instanceof Error?H.message:"Unknown error"}`,"error")}},P=L=>L.includes("tls")?"badge-success":L.includes("Opaque")?"badge-default":L.includes("helm")?"badge-info":"badge-default";return(()=>{var L=og(),H=L.firstChild,w=H.firstChild,N=w.nextSibling,z=N.firstChild,V=z.nextSibling,Q=H.nextSibling;return z.$$input=F=>t(F.currentTarget.value),V.$$click=()=>$(),i(Q,A(q,{get when(){return!m.loading},get fallback(){return(()=>{var F=ag(),U=F.firstChild;return U.nextSibling,F})()},get children(){return[(()=>{var F=ig(),U=F.firstChild,W=U.firstChild,ce=W.firstChild,D=ce.firstChild,j=D.firstChild;j.firstChild;var K=D.nextSibling,ee=K.firstChild;ee.firstChild;var ne=K.nextSibling,te=ne.firstChild;te.firstChild;var le=ne.nextSibling,Z=le.firstChild;Z.firstChild;var Y=le.nextSibling,se=Y.firstChild;se.firstChild;var G=W.nextSibling;return D.$$click=()=>T("name"),i(j,A(I,{field:"name"}),null),K.$$click=()=>T("namespace"),i(ee,A(I,{field:"namespace"}),null),ne.$$click=()=>T("type"),i(te,A(I,{field:"type"}),null),le.$$click=()=>T("data"),i(Z,A(I,{field:"data"}),null),Y.$$click=()=>T("age"),i(se,A(I,{field:"age"}),null),i(G,A(Ne,{get each(){return O()},get fallback(){return(()=>{var ie=cg();return ie.firstChild,ie})()},children:ie=>(()=>{var X=dg(),fe=X.firstChild,Ae=fe.firstChild,Ce=fe.nextSibling,$e=Ce.nextSibling,ye=$e.firstChild,he=$e.nextSibling,ae=he.nextSibling,ue=ae.nextSibling;return Ae.$$click=()=>{p(ie),c(!0)},i(Ae,(()=>{var Se=Me(()=>ie.name.length>40);return()=>Se()?ie.name.slice(0,37)+"...":ie.name})()),i(Ce,()=>ie.namespace),i(ye,()=>ie.type),i(he,()=>ie.data),i(ae,()=>ie.age),i(ue,A(Tt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{p(ie),b(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{p(ie),x(!0)}},{label:"Describe",icon:"describe",onClick:()=>{p(ie),c(!0)}},{label:"Delete",icon:"delete",onClick:()=>M(ie),variant:"danger",divider:!0}]})),re(()=>He(ye,`badge ${P(ie.type)}`)),X})()})),F})(),A(q,{get when(){return B()>1},get children(){var F=ng(),U=F.firstChild,W=U.firstChild,ce=W.nextSibling,D=ce.nextSibling,j=D.nextSibling,K=j.nextSibling,ee=K.nextSibling;ee.nextSibling;var ne=U.nextSibling,te=ne.firstChild,le=te.nextSibling,Z=le.nextSibling,Y=Z.firstChild,se=Y.nextSibling;se.nextSibling;var G=Z.nextSibling,ie=G.nextSibling;return i(U,()=>(h()-1)*n()+1,ce),i(U,()=>Math.min(h()*n(),k().length),j),i(U,()=>k().length,ee),te.$$click=()=>s(1),le.$$click=()=>s(X=>Math.max(1,X-1)),i(Z,h,se),i(Z,B,null),G.$$click=()=>s(X=>Math.min(B(),X+1)),ie.$$click=()=>s(B()),re(X=>{var fe=h()===1,Ae=h()===1,Ce=h()===B(),$e=h()===B();return fe!==X.e&&(te.disabled=X.e=fe),Ae!==X.t&&(le.disabled=X.t=Ae),Ce!==X.a&&(G.disabled=X.a=Ce),$e!==X.o&&(ie.disabled=X.o=$e),X},{e:void 0,t:void 0,a:void 0,o:void 0}),F}})]}})),i(L,A(it,{get isOpen(){return _()},onClose:()=>b(!1),get title(){return`YAML: ${g()?.name}`},size:"xl",get children(){return A(q,{get when(){return!S.loading},get fallback(){return Cl()},get children(){return A(tr,{get yaml(){return S()||""},get title(){return g()?.name}})}})}}),null),i(L,A(it,{get isOpen(){return C()},onClose:()=>x(!1),get title(){return`Edit YAML: ${g()?.name}`},size:"xl",get children(){return A(q,{get when(){return!S.loading},get fallback(){return Cl()},get children(){var F=lg();return i(F,A(ur,{get yaml(){return S()||""},get title(){return g()?.name},onSave:E,onCancel:()=>x(!1)})),F}})}}),null),i(L,A(cr,{get isOpen(){return a()},onClose:()=>c(!1),resourceType:"secret",get name(){return g()?.name||""},get namespace(){return g()?.namespace||""}}),null),L})()};Qe(["input","click"]);var ug=R('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>&#9650;</span><span>&#9660;'),fg=R('<div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class=whitespace-nowrap>Secret</th><th class=whitespace-nowrap>Issuer</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Status </div></th><th class=whitespace-nowrap>Expires</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),gg=R('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:#161b22><div style=color:#8b949e>Showing <!> - <!> of <!> certificates</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Prev</button><span class="px-3 py-1"style=color:#c9d1d9>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Next</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Last'),pg=R("<div style=height:70vh>"),vg=R('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Certificates</h1><p style=color:var(--text-secondary)>TLS certificates managed by cert-manager</p></div><div class="flex items-center gap-3"><button class=icon-btn title="Refresh Certificates"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Ready</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--warning-color)"><span class=text-sm style=color:var(--text-secondary)>Pending</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--error-color)"><span class=text-sm style=color:var(--text-secondary)>Failed</span><span class="text-xl font-bold"style=color:var(--error-color)></span></div><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class="overflow-hidden rounded-lg"style=background:#0d1117>'),mg=R('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading certificates...'),_g=R('<tr><td colspan=8 class="text-center py-8"style=color:var(--text-muted)>No certificates found. Make sure cert-manager is installed.'),bg=R('<tr><td><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td></td><td><code class="px-2 py-1 rounded text-xs"style=background:var(--bg-tertiary)></code></td><td></td><td><span></span></td><td></td><td></td><td>'),kl=R('<div class="spinner mx-auto">');const yg=()=>{const[e,t]=J(""),[r,l]=J("name"),[u,v]=J("asc"),[h,s]=J(1),[n,f]=J(20),[g,p]=J(null),[_,b]=J(!1),[C,x]=J(!1),[o,d]=J(!1),[a,{refetch:c}]=qe(tt,Re.getCertificates),[m]=qe(()=>(_()||C())&&g()?{name:g().name,ns:g().namespace}:null,async P=>P&&(await Re.getCertificateYAML(P.name,P.ns)).yaml||""),$=async P=>{const L=g();if(L)try{await Re.updateCertificate(L.name,L.namespace,P),Fe(`âœ… Certificate ${L.name} updated successfully`,"success"),x(!1),setTimeout(()=>c(),500),setTimeout(()=>c(),2e3)}catch(H){const w=H instanceof Error?H.message:"Unknown error";throw Fe(`âŒ Failed to update certificate: ${w}`,"error"),H}},S=P=>{if(!P)return 0;let L=0;const H=P.match(/(\d+)d/),w=P.match(/(\d+)h/),N=P.match(/(\d+)m/);return H&&(L+=parseInt(H[1])*24*60),w&&(L+=parseInt(w[1])*60),N&&(L+=parseInt(N[1])),L},E=ze(()=>{let P=a()||[];const L=e().toLowerCase();L&&(P=P.filter(N=>N.name.toLowerCase().includes(L)||N.namespace.toLowerCase().includes(L)||N.issuer?.toLowerCase().includes(L)||N.dnsNames?.some(z=>z.toLowerCase().includes(L))));const H=r(),w=u();return P=[...P].sort((N,z)=>{let V=0;switch(H){case"name":V=N.name.localeCompare(z.name);break;case"namespace":V=N.namespace.localeCompare(z.namespace);break;case"status":V=N.status.localeCompare(z.status);break;case"age":V=S(N.age)-S(z.age);break}return w==="asc"?V:-V}),P}),y=ze(()=>Math.ceil(E().length/n())),k=ze(()=>{const P=(h()-1)*n();return E().slice(P,P+n())}),B=ze(()=>{const P=a()||[];return{total:P.length,ready:P.filter(L=>L.status==="Ready"||L.status==="True").length,pending:P.filter(L=>L.status==="Pending"||L.status==="Unknown").length,failed:P.filter(L=>L.status==="Failed"||L.status==="False").length}}),O=P=>{r()===P?v(L=>L==="asc"?"desc":"asc"):(l(P),v("asc")),s(1)},T=P=>(()=>{var L=ug(),H=L.firstChild,w=H.nextSibling;return re(N=>{var z=r()===P.field&&u()==="asc"?"var(--accent-primary)":"var(--text-muted)",V=r()===P.field&&u()==="desc"?"var(--accent-primary)":"var(--text-muted)";return z!==N.e&&oe(H,"color",N.e=z),V!==N.t&&oe(w,"color",N.t=V),N},{e:void 0,t:void 0}),L})(),I=async P=>{if(confirm(`Are you sure you want to delete certificate ${P.name}?`))try{await Re.deleteCertificate(P.name,P.namespace),Fe(`Certificate ${P.name} deleted successfully`,"success"),c()}catch(L){console.error("Failed to delete certificate:",L),Fe(`Failed to delete certificate: ${L instanceof Error?L.message:"Unknown error"}`,"error")}},M=P=>P==="Ready"||P==="True"?"badge-success":P==="Failed"||P==="False"?"badge-error":"badge-warning";return(()=>{var P=vg(),L=P.firstChild,H=L.firstChild,w=H.firstChild;w.nextSibling;var N=H.nextSibling,z=N.firstChild,V=L.nextSibling,Q=V.firstChild,F=Q.firstChild,U=F.nextSibling,W=Q.nextSibling,ce=W.firstChild,D=ce.nextSibling,j=W.nextSibling,K=j.firstChild,ee=K.nextSibling,ne=j.nextSibling,te=ne.firstChild,le=te.nextSibling,Z=ne.nextSibling,Y=Z.nextSibling,se=Y.nextSibling,G=V.nextSibling;return z.$$click=ie=>{const X=ie.currentTarget;X.classList.add("refreshing"),setTimeout(()=>X.classList.remove("refreshing"),500),c()},i(U,()=>B().total),i(D,()=>B().ready),i(ee,()=>B().pending),i(le,()=>B().failed),Y.$$input=ie=>{t(ie.currentTarget.value),s(1)},se.addEventListener("change",ie=>{f(parseInt(ie.currentTarget.value)),s(1)}),i(G,A(q,{get when(){return!a.loading},get fallback(){return(()=>{var ie=mg(),X=ie.firstChild;return X.nextSibling,ie})()},get children(){return[(()=>{var ie=fg(),X=ie.firstChild,fe=X.firstChild,Ae=fe.firstChild,Ce=Ae.firstChild,$e=Ce.firstChild;$e.firstChild;var ye=Ce.nextSibling,he=ye.firstChild;he.firstChild;var ae=ye.nextSibling,ue=ae.nextSibling,Se=ue.nextSibling,_e=Se.firstChild;_e.firstChild;var de=Se.nextSibling,be=de.nextSibling,ve=be.firstChild;ve.firstChild;var ge=fe.nextSibling;return Ce.$$click=()=>O("name"),i($e,A(T,{field:"name"}),null),ye.$$click=()=>O("namespace"),i(he,A(T,{field:"namespace"}),null),Se.$$click=()=>O("status"),i(_e,A(T,{field:"status"}),null),be.$$click=()=>O("age"),i(ve,A(T,{field:"age"}),null),i(ge,A(Ne,{get each(){return k()},get fallback(){return(()=>{var me=_g();return me.firstChild,me})()},children:me=>(()=>{var pe=bg(),xe=pe.firstChild,we=xe.firstChild,ke=xe.nextSibling,Oe=ke.nextSibling,Pe=Oe.firstChild,Ie=Oe.nextSibling,De=Ie.nextSibling,je=De.firstChild,Ue=De.nextSibling,Ke=Ue.nextSibling,Te=Ke.nextSibling;return we.$$click=()=>{p(me),d(!0)},i(we,(()=>{var Ge=Me(()=>me.name.length>40);return()=>Ge()?me.name.slice(0,37)+"...":me.name})()),i(ke,()=>me.namespace),i(Pe,()=>me.secretName||"-"),i(Ie,()=>me.issuer||"-"),i(je,()=>me.status),i(Ue,()=>me.notAfter||"-"),i(Ke,()=>me.age),i(Te,A(Tt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{p(me),b(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{p(me),x(!0)}},{label:"Delete",icon:"delete",onClick:()=>I(me),variant:"danger",divider:!0}]})),re(()=>He(je,`badge ${M(me.status)}`)),pe})()})),ie})(),A(q,{get when(){return y()>1},get children(){var ie=gg(),X=ie.firstChild,fe=X.firstChild,Ae=fe.nextSibling,Ce=Ae.nextSibling,$e=Ce.nextSibling,ye=$e.nextSibling,he=ye.nextSibling;he.nextSibling;var ae=X.nextSibling,ue=ae.firstChild,Se=ue.nextSibling,_e=Se.nextSibling,de=_e.firstChild,be=de.nextSibling;be.nextSibling;var ve=_e.nextSibling,ge=ve.nextSibling;return i(X,()=>(h()-1)*n()+1,Ae),i(X,()=>Math.min(h()*n(),E().length),$e),i(X,()=>E().length,he),ue.$$click=()=>s(1),Se.$$click=()=>s(me=>Math.max(1,me-1)),i(_e,h,be),i(_e,y,null),ve.$$click=()=>s(me=>Math.min(y(),me+1)),ge.$$click=()=>s(y()),re(me=>{var pe=h()===1,xe=h()===1,we=h()===y(),ke=h()===y();return pe!==me.e&&(ue.disabled=me.e=pe),xe!==me.t&&(Se.disabled=me.t=xe),we!==me.a&&(ve.disabled=me.a=we),ke!==me.o&&(ge.disabled=me.o=ke),me},{e:void 0,t:void 0,a:void 0,o:void 0}),ie}})]}})),i(P,A(it,{get isOpen(){return _()},onClose:()=>b(!1),get title(){return`YAML: ${g()?.name}`},size:"xl",get children(){return A(q,{get when(){return!m.loading},get fallback(){return kl()},get children(){return A(tr,{get yaml(){return m()||""},get title(){return g()?.name}})}})}}),null),i(P,A(it,{get isOpen(){return C()},onClose:()=>x(!1),get title(){return`Edit YAML: ${g()?.name}`},size:"xl",get children(){return A(q,{get when(){return!m.loading},get fallback(){return kl()},get children(){var ie=pg();return i(ie,A(ur,{get yaml(){return m()||""},get title(){return g()?.name},onSave:$,onCancel:()=>x(!1)})),ie}})}}),null),i(P,A(cr,{get isOpen(){return o()},onClose:()=>d(!1),resourceType:"certificate",get name(){return g()?.name||""},get namespace(){return g()?.namespace}}),null),re(()=>Y.value=e()),re(()=>se.value=n()),P})()};Qe(["click","input"]);var xg=R('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z">'),$g=R('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 6h16M4 10h16M4 14h16M4 18h16">'),wg=R('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1v-4zM14 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z">'),Sg=R('<div class="grid grid-cols-1 lg:grid-cols-2 gap-4">'),Cg=R('<div><div class="flex items-start justify-between mb-4"><div class="flex items-center gap-3"><div><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path></svg></div><div><button class="text-white font-semibold hover:underline text-left"></button><p class="text-gray-500 text-sm"></p></div></div><span></span></div><div class="grid grid-cols-2 gap-4 mb-4"><div class="bg-k8s-dark rounded-lg p-3"><div class="flex items-center justify-between mb-2"><span class="text-gray-400 text-sm">CPU</span><span class="text-white font-medium"></span></div><div class="h-2 bg-k8s-border rounded-full overflow-hidden"><div class="h-full bg-blue-500 rounded-full"style=width:45%></div></div></div><div class="bg-k8s-dark rounded-lg p-3"><div class="flex items-center justify-between mb-2"><span class="text-gray-400 text-sm">Memory</span><span class="text-white font-medium"></span></div><div class="h-2 bg-k8s-border rounded-full overflow-hidden"><div class="h-full bg-purple-500 rounded-full"style=width:60%></div></div></div></div><div class="flex items-center justify-between text-sm text-gray-400 pt-4 border-t border-k8s-border"><span>Version: </span><span>Age: '),kg=R('<div class="overflow-hidden rounded-lg"style=background:#0d1117><div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class=whitespace-nowrap>Name</th><th class=whitespace-nowrap>Status</th><th class=whitespace-nowrap>Roles</th><th class=whitespace-nowrap>CPU</th><th class=whitespace-nowrap>Memory</th><th class=whitespace-nowrap>Version</th><th class=whitespace-nowrap>Age</th></tr></thead><tbody>'),Ag=R('<tr><td colspan=7 class="text-center py-8"style=color:var(--text-muted)>No nodes found'),Mg=R('<tr><td><div class="flex items-center gap-2"><div><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path></svg></div><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></div></td><td><span></span></td><td><span></span></td><td class="font-mono text-sm"></td><td class="font-mono text-sm"></td><td class="font-mono text-sm"></td><td>'),Eg=R('<div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3">'),Lg=R('<button><div class="flex items-center gap-2 mb-2"><div><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path></svg></div><span></span></div><h4 class="text-white font-medium text-sm truncate mb-1"></h4><p class="text-gray-500 text-xs truncate"></p><div class="mt-2 pt-2 border-t border-k8s-border"><div class="flex justify-between text-xs"><span class=text-gray-500>CPU</span><span class=text-gray-300></span></div><div class="flex justify-between text-xs mt-1"><span class=text-gray-500>Mem</span><span class=text-gray-300>'),Rg=R('<div class=space-y-6><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold text-white">Nodes</h1><p class="text-gray-400 mt-1">Cluster node management</p></div><div class="flex items-center gap-3"><div class="flex items-center rounded-lg overflow-hidden"style="background:var(--bg-secondary);border:1px solid var(--border-color)"></div><button class=icon-btn title="Refresh Nodes"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="grid grid-cols-2 md:grid-cols-4 gap-4"><div class="bg-k8s-card border border-k8s-border rounded-lg p-4"><div class="text-gray-400 text-sm">Total Nodes</div><div class="text-2xl font-bold text-white"></div></div><div class="bg-k8s-card border border-green-500/30 rounded-lg p-4"><div class="text-gray-400 text-sm">Ready</div><div class="text-2xl font-bold text-green-400"></div></div><div class="bg-k8s-card border border-red-500/30 rounded-lg p-4"><div class="text-gray-400 text-sm">Not Ready</div><div class="text-2xl font-bold text-red-400"></div></div><div class="bg-k8s-card border border-cyan-500/30 rounded-lg p-4"><div class="text-gray-400 text-sm">Control Plane</div><div class="text-2xl font-bold text-cyan-400">'),Dg=R('<button><span class="hidden sm:inline capitalize">'),Tg=R('<div class="p-8 text-center text-gray-500"><svg class="w-8 h-8 animate-spin mx-auto mb-2"fill=none viewBox="0 0 24 24"><circle class=opacity-25 cx=12 cy=12 r=10 stroke=currentColor stroke-width=4></circle><path class=opacity-75 fill=currentColor d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>Loading nodes...');const Pg=()=>{const[e,t]=J(null),[r,l]=J(!1),[u,v]=J("card"),h=ze(()=>{const _=os()||[],b=Do().toLowerCase();return b?_.filter(C=>C.name.toLowerCase().includes(b)||C.roles.toLowerCase().includes(b)||C.status.toLowerCase().includes(b)):_}),s=ze(()=>{const _=os()||[];return{total:_.length,ready:_.filter(b=>b.status==="Ready").length,notReady:_.filter(b=>b.status!=="Ready").length,controlPlane:_.filter(b=>b.roles.includes("control-plane")||b.roles.includes("master")).length}}),n=_=>A(Si,{get children(){return[A(nr,{get when(){return _.mode==="card"},get children(){return xg()}}),A(nr,{get when(){return _.mode==="list"},get children(){return $g()}}),A(nr,{get when(){return _.mode==="grid"},get children(){return wg()}})]}}),f=()=>(()=>{var _=Sg();return i(_,A(Ne,{get each(){return h()},children:b=>{const C=b.status==="Ready",x=b.roles.includes("control-plane")||b.roles.includes("master");return(()=>{var o=Cg(),d=o.firstChild,a=d.firstChild,c=a.firstChild,m=c.firstChild,$=c.nextSibling,S=$.firstChild,E=S.nextSibling,y=a.nextSibling,k=d.nextSibling,B=k.firstChild,O=B.firstChild,T=O.firstChild,I=T.nextSibling,M=O.nextSibling;M.firstChild;var P=B.nextSibling,L=P.firstChild,H=L.firstChild,w=H.nextSibling,N=L.nextSibling;N.firstChild;var z=k.nextSibling,V=z.firstChild;V.firstChild;var Q=V.nextSibling;return Q.firstChild,He(o,`bg-k8s-card border rounded-xl p-6 card-hover ${C?"border-k8s-border":"border-red-500/30"}`),He(c,`p-2 rounded-lg ${x?"bg-cyan-500/20":"bg-k8s-dark"}`),Xe(m,"class",`w-6 h-6 ${x?"text-cyan-400":"text-gray-400"}`),S.$$click=()=>{t(b),l(!0)},i(S,()=>b.name),i(E,()=>b.roles||"worker"),He(y,`px-2 py-1 rounded text-xs font-medium ${C?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`),i(y,()=>b.status),i(I,()=>b.cpu||"N/A"),i(w,()=>b.memory||"N/A"),i(V,()=>b.version,null),i(Q,()=>b.age,null),o})()}})),_})(),g=()=>(()=>{var _=kg(),b=_.firstChild,C=b.firstChild,x=C.firstChild,o=x.nextSibling;return i(o,A(Ne,{get each(){return h()},get fallback(){return(()=>{var d=Ag();return d.firstChild,d})()},children:d=>{const a=d.status==="Ready",c=d.roles.includes("control-plane")||d.roles.includes("master");return(()=>{var m=Mg(),$=m.firstChild,S=$.firstChild,E=S.firstChild,y=E.firstChild,k=E.nextSibling,B=$.nextSibling,O=B.firstChild,T=B.nextSibling,I=T.firstChild,M=T.nextSibling,P=M.nextSibling,L=P.nextSibling,H=L.nextSibling;return He(E,`p-1 rounded ${c?"bg-cyan-500/20":"bg-k8s-dark"}`),Xe(y,"class",`w-4 h-4 ${c?"text-cyan-400":"text-gray-400"}`),k.$$click=()=>{t(d),l(!0)},i(k,()=>d.name),He(O,`badge ${a?"badge-success":"badge-error"}`),i(O,()=>d.status),He(I,`text-sm ${c?"text-cyan-400":"text-gray-400"}`),i(I,()=>d.roles||"worker"),i(M,()=>d.cpu||"N/A"),i(P,()=>d.memory||"N/A"),i(L,()=>d.version),i(H,()=>d.age),m})()}})),_})(),p=()=>(()=>{var _=Eg();return i(_,A(Ne,{get each(){return h()},children:b=>{const C=b.status==="Ready",x=b.roles.includes("control-plane")||b.roles.includes("master");return(()=>{var o=Lg(),d=o.firstChild,a=d.firstChild,c=a.firstChild,m=a.nextSibling,$=d.nextSibling,S=$.nextSibling,E=S.nextSibling,y=E.firstChild,k=y.firstChild,B=k.nextSibling,O=y.nextSibling,T=O.firstChild,I=T.nextSibling;return o.$$click=()=>{t(b),l(!0)},He(o,`bg-k8s-card border rounded-lg p-4 text-left hover:bg-k8s-dark transition-colors ${C?"border-k8s-border":"border-red-500/30"}`),He(a,`p-1.5 rounded ${x?"bg-cyan-500/20":"bg-k8s-dark"}`),Xe(c,"class",`w-4 h-4 ${x?"text-cyan-400":"text-gray-400"}`),He(m,`px-1.5 py-0.5 rounded text-xs font-medium ${C?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`),i(m,()=>b.status),i($,()=>b.name),i(S,()=>b.roles||"worker"),i(B,()=>b.cpu||"N/A"),i(I,()=>b.memory||"N/A"),re(()=>Xe($,"title",b.name)),o})()}})),_})();return(()=>{var _=Rg(),b=_.firstChild,C=b.firstChild,x=C.nextSibling,o=x.firstChild,d=o.nextSibling,a=b.nextSibling,c=a.firstChild,m=c.firstChild,$=m.nextSibling,S=c.nextSibling,E=S.firstChild,y=E.nextSibling,k=S.nextSibling,B=k.firstChild,O=B.nextSibling,T=k.nextSibling,I=T.firstChild,M=I.nextSibling;return i(o,A(Ne,{each:["card","list","grid"],children:P=>(()=>{var L=Dg(),H=L.firstChild;return L.$$click=()=>v(P),i(L,A(n,{mode:P}),H),i(H,P),re(w=>{var N=`px-3 py-2 flex items-center gap-2 text-sm transition-colors ${u()===P?"bg-k8s-blue text-white":"text-gray-400 hover:text-white hover:bg-k8s-dark"}`,z=`${P.charAt(0).toUpperCase()+P.slice(1)} View`;return N!==w.e&&He(L,w.e=N),z!==w.t&&Xe(L,"title",w.t=z),w},{e:void 0,t:void 0}),L})()})),d.$$click=P=>{const L=P.currentTarget;L.classList.add("refreshing"),setTimeout(()=>L.classList.remove("refreshing"),500),No()},i($,()=>s().total),i(y,()=>s().ready),i(O,()=>s().notReady),i(M,()=>s().controlPlane),i(_,A(q,{get when(){return!os.loading},get fallback(){return Tg()},get children(){return A(Si,{get children(){return[A(nr,{get when(){return u()==="card"},get children(){return A(f,{})}}),A(nr,{get when(){return u()==="list"},get children(){return A(g,{})}}),A(nr,{get when(){return u()==="grid"},get children(){return A(p,{})}})]}})}}),null),i(_,A(cr,{get isOpen(){return r()},onClose:()=>l(!1),resourceType:"node",get name(){return e()?.name||""}}),null),_})()};Qe(["click"]);var Ig={value:()=>{}};function Ns(){for(var e=0,t=arguments.length,r={},l;e<t;++e){if(!(l=arguments[e]+"")||l in r||/[\s.]/.test(l))throw new Error("illegal type: "+l);r[l]=[]}return new ui(r)}function ui(e){this._=e}function Bg(e,t){return e.trim().split(/^|\s+/).map(function(r){var l="",u=r.indexOf(".");if(u>=0&&(l=r.slice(u+1),r=r.slice(0,u)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:l}})}ui.prototype=Ns.prototype={constructor:ui,on:function(e,t){var r=this._,l=Bg(e+"",r),u,v=-1,h=l.length;if(arguments.length<2){for(;++v<h;)if((u=(e=l[v]).type)&&(u=Og(r[u],e.name)))return u;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++v<h;)if(u=(e=l[v]).type)r[u]=Al(r[u],e.name,t);else if(t==null)for(u in r)r[u]=Al(r[u],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new ui(e)},call:function(e,t){if((u=arguments.length-2)>0)for(var r=new Array(u),l=0,u,v;l<u;++l)r[l]=arguments[l+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(v=this._[e],l=0,u=v.length;l<u;++l)v[l].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var l=this._[e],u=0,v=l.length;u<v;++u)l[u].value.apply(t,r)}};function Og(e,t){for(var r=0,l=e.length,u;r<l;++r)if((u=e[r]).name===t)return u.value}function Al(e,t,r){for(var l=0,u=e.length;l<u;++l)if(e[l].name===t){e[l]=Ig,e=e.slice(0,l).concat(e.slice(l+1));break}return r!=null&&e.push({name:t,value:r}),e}var xn="http://www.w3.org/1999/xhtml";const Ml={svg:"http://www.w3.org/2000/svg",xhtml:xn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Oi(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),Ml.hasOwnProperty(t)?{space:Ml[t],local:e}:e}function Hg(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===xn&&t.documentElement.namespaceURI===xn?t.createElement(e):t.createElementNS(r,e)}}function Ng(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function qo(e){var t=Oi(e);return(t.local?Ng:Hg)(t)}function zg(){}function Rn(e){return e==null?zg:function(){return this.querySelector(e)}}function Fg(e){typeof e!="function"&&(e=Rn(e));for(var t=this._groups,r=t.length,l=new Array(r),u=0;u<r;++u)for(var v=t[u],h=v.length,s=l[u]=new Array(h),n,f,g=0;g<h;++g)(n=v[g])&&(f=e.call(n,n.__data__,g,v))&&("__data__"in n&&(f.__data__=n.__data__),s[g]=f);return new er(l,this._parents)}function jg(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Ug(){return[]}function Ko(e){return e==null?Ug:function(){return this.querySelectorAll(e)}}function Vg(e){return function(){return jg(e.apply(this,arguments))}}function Wg(e){typeof e=="function"?e=Vg(e):e=Ko(e);for(var t=this._groups,r=t.length,l=[],u=[],v=0;v<r;++v)for(var h=t[v],s=h.length,n,f=0;f<s;++f)(n=h[f])&&(l.push(e.call(n,n.__data__,f,h)),u.push(n));return new er(l,u)}function Yo(e){return function(){return this.matches(e)}}function Go(e){return function(t){return t.matches(e)}}var qg=Array.prototype.find;function Kg(e){return function(){return qg.call(this.children,e)}}function Yg(){return this.firstElementChild}function Gg(e){return this.select(e==null?Yg:Kg(typeof e=="function"?e:Go(e)))}var Jg=Array.prototype.filter;function Xg(){return Array.from(this.children)}function Zg(e){return function(){return Jg.call(this.children,e)}}function Qg(e){return this.selectAll(e==null?Xg:Zg(typeof e=="function"?e:Go(e)))}function ep(e){typeof e!="function"&&(e=Yo(e));for(var t=this._groups,r=t.length,l=new Array(r),u=0;u<r;++u)for(var v=t[u],h=v.length,s=l[u]=[],n,f=0;f<h;++f)(n=v[f])&&e.call(n,n.__data__,f,v)&&s.push(n);return new er(l,this._parents)}function Jo(e){return new Array(e.length)}function tp(){return new er(this._enter||this._groups.map(Jo),this._parents)}function ki(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ki.prototype={constructor:ki,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function rp(e){return function(){return e}}function sp(e,t,r,l,u,v){for(var h=0,s,n=t.length,f=v.length;h<f;++h)(s=t[h])?(s.__data__=v[h],l[h]=s):r[h]=new ki(e,v[h]);for(;h<n;++h)(s=t[h])&&(u[h]=s)}function ip(e,t,r,l,u,v,h){var s,n,f=new Map,g=t.length,p=v.length,_=new Array(g),b;for(s=0;s<g;++s)(n=t[s])&&(_[s]=b=h.call(n,n.__data__,s,t)+"",f.has(b)?u[s]=n:f.set(b,n));for(s=0;s<p;++s)b=h.call(e,v[s],s,v)+"",(n=f.get(b))?(l[s]=n,n.__data__=v[s],f.delete(b)):r[s]=new ki(e,v[s]);for(s=0;s<g;++s)(n=t[s])&&f.get(_[s])===n&&(u[s]=n)}function np(e){return e.__data__}function lp(e,t){if(!arguments.length)return Array.from(this,np);var r=t?ip:sp,l=this._parents,u=this._groups;typeof e!="function"&&(e=rp(e));for(var v=u.length,h=new Array(v),s=new Array(v),n=new Array(v),f=0;f<v;++f){var g=l[f],p=u[f],_=p.length,b=op(e.call(g,g&&g.__data__,f,l)),C=b.length,x=s[f]=new Array(C),o=h[f]=new Array(C),d=n[f]=new Array(_);r(g,p,x,o,d,b,t);for(var a=0,c=0,m,$;a<C;++a)if(m=x[a]){for(a>=c&&(c=a+1);!($=o[c])&&++c<C;);m._next=$||null}}return h=new er(h,l),h._enter=s,h._exit=n,h}function op(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ap(){return new er(this._exit||this._groups.map(Jo),this._parents)}function cp(e,t,r){var l=this.enter(),u=this,v=this.exit();return typeof e=="function"?(l=e(l),l&&(l=l.selection())):l=l.append(e+""),t!=null&&(u=t(u),u&&(u=u.selection())),r==null?v.remove():r(v),l&&u?l.merge(u).order():u}function dp(e){for(var t=e.selection?e.selection():e,r=this._groups,l=t._groups,u=r.length,v=l.length,h=Math.min(u,v),s=new Array(u),n=0;n<h;++n)for(var f=r[n],g=l[n],p=f.length,_=s[n]=new Array(p),b,C=0;C<p;++C)(b=f[C]||g[C])&&(_[C]=b);for(;n<u;++n)s[n]=r[n];return new er(s,this._parents)}function hp(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var l=e[t],u=l.length-1,v=l[u],h;--u>=0;)(h=l[u])&&(v&&h.compareDocumentPosition(v)^4&&v.parentNode.insertBefore(h,v),v=h);return this}function up(e){e||(e=fp);function t(p,_){return p&&_?e(p.__data__,_.__data__):!p-!_}for(var r=this._groups,l=r.length,u=new Array(l),v=0;v<l;++v){for(var h=r[v],s=h.length,n=u[v]=new Array(s),f,g=0;g<s;++g)(f=h[g])&&(n[g]=f);n.sort(t)}return new er(u,this._parents).order()}function fp(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function gp(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function pp(){return Array.from(this)}function vp(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var l=e[t],u=0,v=l.length;u<v;++u){var h=l[u];if(h)return h}return null}function mp(){let e=0;for(const t of this)++e;return e}function _p(){return!this.node()}function bp(e){for(var t=this._groups,r=0,l=t.length;r<l;++r)for(var u=t[r],v=0,h=u.length,s;v<h;++v)(s=u[v])&&e.call(s,s.__data__,v,u);return this}function yp(e){return function(){this.removeAttribute(e)}}function xp(e){return function(){this.removeAttributeNS(e.space,e.local)}}function $p(e,t){return function(){this.setAttribute(e,t)}}function wp(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Sp(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function Cp(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function kp(e,t){var r=Oi(e);if(arguments.length<2){var l=this.node();return r.local?l.getAttributeNS(r.space,r.local):l.getAttribute(r)}return this.each((t==null?r.local?xp:yp:typeof t=="function"?r.local?Cp:Sp:r.local?wp:$p)(r,t))}function Xo(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ap(e){return function(){this.style.removeProperty(e)}}function Mp(e,t,r){return function(){this.style.setProperty(e,t,r)}}function Ep(e,t,r){return function(){var l=t.apply(this,arguments);l==null?this.style.removeProperty(e):this.style.setProperty(e,l,r)}}function Lp(e,t,r){return arguments.length>1?this.each((t==null?Ap:typeof t=="function"?Ep:Mp)(e,t,r??"")):hs(this.node(),e)}function hs(e,t){return e.style.getPropertyValue(t)||Xo(e).getComputedStyle(e,null).getPropertyValue(t)}function Rp(e){return function(){delete this[e]}}function Dp(e,t){return function(){this[e]=t}}function Tp(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function Pp(e,t){return arguments.length>1?this.each((t==null?Rp:typeof t=="function"?Tp:Dp)(e,t)):this.node()[e]}function Zo(e){return e.trim().split(/^|\s+/)}function Dn(e){return e.classList||new Qo(e)}function Qo(e){this._node=e,this._names=Zo(e.getAttribute("class")||"")}Qo.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ea(e,t){for(var r=Dn(e),l=-1,u=t.length;++l<u;)r.add(t[l])}function ta(e,t){for(var r=Dn(e),l=-1,u=t.length;++l<u;)r.remove(t[l])}function Ip(e){return function(){ea(this,e)}}function Bp(e){return function(){ta(this,e)}}function Op(e,t){return function(){(t.apply(this,arguments)?ea:ta)(this,e)}}function Hp(e,t){var r=Zo(e+"");if(arguments.length<2){for(var l=Dn(this.node()),u=-1,v=r.length;++u<v;)if(!l.contains(r[u]))return!1;return!0}return this.each((typeof t=="function"?Op:t?Ip:Bp)(r,t))}function Np(){this.textContent=""}function zp(e){return function(){this.textContent=e}}function Fp(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function jp(e){return arguments.length?this.each(e==null?Np:(typeof e=="function"?Fp:zp)(e)):this.node().textContent}function Up(){this.innerHTML=""}function Vp(e){return function(){this.innerHTML=e}}function Wp(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function qp(e){return arguments.length?this.each(e==null?Up:(typeof e=="function"?Wp:Vp)(e)):this.node().innerHTML}function Kp(){this.nextSibling&&this.parentNode.appendChild(this)}function Yp(){return this.each(Kp)}function Gp(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Jp(){return this.each(Gp)}function Xp(e){var t=typeof e=="function"?e:qo(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Zp(){return null}function Qp(e,t){var r=typeof e=="function"?e:qo(e),l=t==null?Zp:typeof t=="function"?t:Rn(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),l.apply(this,arguments)||null)})}function ev(){var e=this.parentNode;e&&e.removeChild(this)}function tv(){return this.each(ev)}function rv(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function sv(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function iv(e){return this.select(e?sv:rv)}function nv(e){return arguments.length?this.property("__data__",e):this.node().__data__}function lv(e){return function(t){e.call(this,t,this.__data__)}}function ov(e){return e.trim().split(/^|\s+/).map(function(t){var r="",l=t.indexOf(".");return l>=0&&(r=t.slice(l+1),t=t.slice(0,l)),{type:t,name:r}})}function av(e){return function(){var t=this.__on;if(t){for(var r=0,l=-1,u=t.length,v;r<u;++r)v=t[r],(!e.type||v.type===e.type)&&v.name===e.name?this.removeEventListener(v.type,v.listener,v.options):t[++l]=v;++l?t.length=l:delete this.__on}}}function cv(e,t,r){return function(){var l=this.__on,u,v=lv(t);if(l){for(var h=0,s=l.length;h<s;++h)if((u=l[h]).type===e.type&&u.name===e.name){this.removeEventListener(u.type,u.listener,u.options),this.addEventListener(u.type,u.listener=v,u.options=r),u.value=t;return}}this.addEventListener(e.type,v,r),u={type:e.type,name:e.name,value:t,listener:v,options:r},l?l.push(u):this.__on=[u]}}function dv(e,t,r){var l=ov(e+""),u,v=l.length,h;if(arguments.length<2){var s=this.node().__on;if(s){for(var n=0,f=s.length,g;n<f;++n)for(u=0,g=s[n];u<v;++u)if((h=l[u]).type===g.type&&h.name===g.name)return g.value}return}for(s=t?cv:av,u=0;u<v;++u)this.each(s(l[u],t,r));return this}function ra(e,t,r){var l=Xo(e),u=l.CustomEvent;typeof u=="function"?u=new u(t,r):(u=l.document.createEvent("Event"),r?(u.initEvent(t,r.bubbles,r.cancelable),u.detail=r.detail):u.initEvent(t,!1,!1)),e.dispatchEvent(u)}function hv(e,t){return function(){return ra(this,e,t)}}function uv(e,t){return function(){return ra(this,e,t.apply(this,arguments))}}function fv(e,t){return this.each((typeof t=="function"?uv:hv)(e,t))}function*gv(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var l=e[t],u=0,v=l.length,h;u<v;++u)(h=l[u])&&(yield h)}var sa=[null];function er(e,t){this._groups=e,this._parents=t}function zs(){return new er([[document.documentElement]],sa)}function pv(){return this}er.prototype=zs.prototype={constructor:er,select:Fg,selectAll:Wg,selectChild:Gg,selectChildren:Qg,filter:ep,data:lp,enter:tp,exit:ap,join:cp,merge:dp,selection:pv,order:hp,sort:up,call:gp,nodes:pp,node:vp,size:mp,empty:_p,each:bp,attr:kp,style:Lp,property:Pp,classed:Hp,text:jp,html:qp,raise:Yp,lower:Jp,append:Xp,insert:Qp,remove:tv,clone:iv,datum:nv,on:dv,dispatch:fv,[Symbol.iterator]:gv};function Ut(e){return typeof e=="string"?new er([[document.querySelector(e)]],[document.documentElement]):new er([[e]],sa)}function vv(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Cr(e,t){if(e=vv(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var l=r.createSVGPoint();return l.x=e.clientX,l.y=e.clientY,l=l.matrixTransform(t.getScreenCTM().inverse()),[l.x,l.y]}if(t.getBoundingClientRect){var u=t.getBoundingClientRect();return[e.clientX-u.left-t.clientLeft,e.clientY-u.top-t.clientTop]}}return[e.pageX,e.pageY]}const mv={passive:!1},Rs={capture:!0,passive:!1};function ln(e){e.stopImmediatePropagation()}function as(e){e.preventDefault(),e.stopImmediatePropagation()}function ia(e){var t=e.document.documentElement,r=Ut(e).on("dragstart.drag",as,Rs);"onselectstart"in t?r.on("selectstart.drag",as,Rs):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function na(e,t){var r=e.document.documentElement,l=Ut(e).on("dragstart.drag",null);t&&(l.on("click.drag",as,Rs),setTimeout(function(){l.on("click.drag",null)},0)),"onselectstart"in r?l.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const Qs=e=>()=>e;function $n(e,{sourceEvent:t,subject:r,target:l,identifier:u,active:v,x:h,y:s,dx:n,dy:f,dispatch:g}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:l,enumerable:!0,configurable:!0},identifier:{value:u,enumerable:!0,configurable:!0},active:{value:v,enumerable:!0,configurable:!0},x:{value:h,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:n,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:g}})}$n.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function _v(e){return!e.ctrlKey&&!e.button}function bv(){return this.parentNode}function yv(e,t){return t??{x:e.x,y:e.y}}function xv(){return navigator.maxTouchPoints||"ontouchstart"in this}function $v(){var e=_v,t=bv,r=yv,l=xv,u={},v=Ns("start","drag","end"),h=0,s,n,f,g,p=0;function _(m){m.on("mousedown.drag",b).filter(l).on("touchstart.drag",o).on("touchmove.drag",d,mv).on("touchend.drag touchcancel.drag",a).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(m,$){if(!(g||!e.call(this,m,$))){var S=c(this,t.call(this,m,$),m,$,"mouse");S&&(Ut(m.view).on("mousemove.drag",C,Rs).on("mouseup.drag",x,Rs),ia(m.view),ln(m),f=!1,s=m.clientX,n=m.clientY,S("start",m))}}function C(m){if(as(m),!f){var $=m.clientX-s,S=m.clientY-n;f=$*$+S*S>p}u.mouse("drag",m)}function x(m){Ut(m.view).on("mousemove.drag mouseup.drag",null),na(m.view,f),as(m),u.mouse("end",m)}function o(m,$){if(e.call(this,m,$)){var S=m.changedTouches,E=t.call(this,m,$),y=S.length,k,B;for(k=0;k<y;++k)(B=c(this,E,m,$,S[k].identifier,S[k]))&&(ln(m),B("start",m,S[k]))}}function d(m){var $=m.changedTouches,S=$.length,E,y;for(E=0;E<S;++E)(y=u[$[E].identifier])&&(as(m),y("drag",m,$[E]))}function a(m){var $=m.changedTouches,S=$.length,E,y;for(g&&clearTimeout(g),g=setTimeout(function(){g=null},500),E=0;E<S;++E)(y=u[$[E].identifier])&&(ln(m),y("end",m,$[E]))}function c(m,$,S,E,y,k){var B=v.copy(),O=Cr(k||S,$),T,I,M;if((M=r.call(m,new $n("beforestart",{sourceEvent:S,target:_,identifier:y,active:h,x:O[0],y:O[1],dx:0,dy:0,dispatch:B}),E))!=null)return T=M.x-O[0]||0,I=M.y-O[1]||0,function P(L,H,w){var N=O,z;switch(L){case"start":u[y]=P,z=h++;break;case"end":delete u[y],--h;case"drag":O=Cr(w||H,$),z=h;break}B.call(L,m,new $n(L,{sourceEvent:H,subject:M,target:_,identifier:y,active:z,x:O[0]+T,y:O[1]+I,dx:O[0]-N[0],dy:O[1]-N[1],dispatch:B}),E)}}return _.filter=function(m){return arguments.length?(e=typeof m=="function"?m:Qs(!!m),_):e},_.container=function(m){return arguments.length?(t=typeof m=="function"?m:Qs(m),_):t},_.subject=function(m){return arguments.length?(r=typeof m=="function"?m:Qs(m),_):r},_.touchable=function(m){return arguments.length?(l=typeof m=="function"?m:Qs(!!m),_):l},_.on=function(){var m=v.on.apply(v,arguments);return m===v?_:m},_.clickDistance=function(m){return arguments.length?(p=(m=+m)*m,_):Math.sqrt(p)},_}function Tn(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function la(e,t){var r=Object.create(e.prototype);for(var l in t)r[l]=t[l];return r}function Fs(){}var Ds=.7,Ai=1/Ds,cs="\\s*([+-]?\\d+)\\s*",Ts="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_r="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wv=/^#([0-9a-f]{3,8})$/,Sv=new RegExp(`^rgb\\(${cs},${cs},${cs}\\)$`),Cv=new RegExp(`^rgb\\(${_r},${_r},${_r}\\)$`),kv=new RegExp(`^rgba\\(${cs},${cs},${cs},${Ts}\\)$`),Av=new RegExp(`^rgba\\(${_r},${_r},${_r},${Ts}\\)$`),Mv=new RegExp(`^hsl\\(${Ts},${_r},${_r}\\)$`),Ev=new RegExp(`^hsla\\(${Ts},${_r},${_r},${Ts}\\)$`),El={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Tn(Fs,Ps,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ll,formatHex:Ll,formatHex8:Lv,formatHsl:Rv,formatRgb:Rl,toString:Rl});function Ll(){return this.rgb().formatHex()}function Lv(){return this.rgb().formatHex8()}function Rv(){return oa(this).formatHsl()}function Rl(){return this.rgb().formatRgb()}function Ps(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=wv.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Dl(t):r===3?new Jt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?ei(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?ei(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Sv.exec(e))?new Jt(t[1],t[2],t[3],1):(t=Cv.exec(e))?new Jt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=kv.exec(e))?ei(t[1],t[2],t[3],t[4]):(t=Av.exec(e))?ei(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Mv.exec(e))?Il(t[1],t[2]/100,t[3]/100,1):(t=Ev.exec(e))?Il(t[1],t[2]/100,t[3]/100,t[4]):El.hasOwnProperty(e)?Dl(El[e]):e==="transparent"?new Jt(NaN,NaN,NaN,0):null}function Dl(e){return new Jt(e>>16&255,e>>8&255,e&255,1)}function ei(e,t,r,l){return l<=0&&(e=t=r=NaN),new Jt(e,t,r,l)}function Dv(e){return e instanceof Fs||(e=Ps(e)),e?(e=e.rgb(),new Jt(e.r,e.g,e.b,e.opacity)):new Jt}function wn(e,t,r,l){return arguments.length===1?Dv(e):new Jt(e,t,r,l??1)}function Jt(e,t,r,l){this.r=+e,this.g=+t,this.b=+r,this.opacity=+l}Tn(Jt,wn,la(Fs,{brighter(e){return e=e==null?Ai:Math.pow(Ai,e),new Jt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ds:Math.pow(Ds,e),new Jt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Jt(Yr(this.r),Yr(this.g),Yr(this.b),Mi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Tl,formatHex:Tl,formatHex8:Tv,formatRgb:Pl,toString:Pl}));function Tl(){return`#${qr(this.r)}${qr(this.g)}${qr(this.b)}`}function Tv(){return`#${qr(this.r)}${qr(this.g)}${qr(this.b)}${qr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Pl(){const e=Mi(this.opacity);return`${e===1?"rgb(":"rgba("}${Yr(this.r)}, ${Yr(this.g)}, ${Yr(this.b)}${e===1?")":`, ${e})`}`}function Mi(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Yr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function qr(e){return e=Yr(e),(e<16?"0":"")+e.toString(16)}function Il(e,t,r,l){return l<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new hr(e,t,r,l)}function oa(e){if(e instanceof hr)return new hr(e.h,e.s,e.l,e.opacity);if(e instanceof Fs||(e=Ps(e)),!e)return new hr;if(e instanceof hr)return e;e=e.rgb();var t=e.r/255,r=e.g/255,l=e.b/255,u=Math.min(t,r,l),v=Math.max(t,r,l),h=NaN,s=v-u,n=(v+u)/2;return s?(t===v?h=(r-l)/s+(r<l)*6:r===v?h=(l-t)/s+2:h=(t-r)/s+4,s/=n<.5?v+u:2-v-u,h*=60):s=n>0&&n<1?0:h,new hr(h,s,n,e.opacity)}function Pv(e,t,r,l){return arguments.length===1?oa(e):new hr(e,t,r,l??1)}function hr(e,t,r,l){this.h=+e,this.s=+t,this.l=+r,this.opacity=+l}Tn(hr,Pv,la(Fs,{brighter(e){return e=e==null?Ai:Math.pow(Ai,e),new hr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ds:Math.pow(Ds,e),new hr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,l=r+(r<.5?r:1-r)*t,u=2*r-l;return new Jt(on(e>=240?e-240:e+120,u,l),on(e,u,l),on(e<120?e+240:e-120,u,l),this.opacity)},clamp(){return new hr(Bl(this.h),ti(this.s),ti(this.l),Mi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Mi(this.opacity);return`${e===1?"hsl(":"hsla("}${Bl(this.h)}, ${ti(this.s)*100}%, ${ti(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Bl(e){return e=(e||0)%360,e<0?e+360:e}function ti(e){return Math.max(0,Math.min(1,e||0))}function on(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const aa=e=>()=>e;function Iv(e,t){return function(r){return e+r*t}}function Bv(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(l){return Math.pow(e+l*t,r)}}function Ov(e){return(e=+e)==1?ca:function(t,r){return r-t?Bv(t,r,e):aa(isNaN(t)?r:t)}}function ca(e,t){var r=t-e;return r?Iv(e,r):aa(isNaN(e)?t:e)}const Ol=function e(t){var r=Ov(t);function l(u,v){var h=r((u=wn(u)).r,(v=wn(v)).r),s=r(u.g,v.g),n=r(u.b,v.b),f=ca(u.opacity,v.opacity);return function(g){return u.r=h(g),u.g=s(g),u.b=n(g),u.opacity=f(g),u+""}}return l.gamma=e,l}(1);function Ir(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var Sn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,an=new RegExp(Sn.source,"g");function Hv(e){return function(){return e}}function Nv(e){return function(t){return e(t)+""}}function zv(e,t){var r=Sn.lastIndex=an.lastIndex=0,l,u,v,h=-1,s=[],n=[];for(e=e+"",t=t+"";(l=Sn.exec(e))&&(u=an.exec(t));)(v=u.index)>r&&(v=t.slice(r,v),s[h]?s[h]+=v:s[++h]=v),(l=l[0])===(u=u[0])?s[h]?s[h]+=u:s[++h]=u:(s[++h]=null,n.push({i:h,x:Ir(l,u)})),r=an.lastIndex;return r<t.length&&(v=t.slice(r),s[h]?s[h]+=v:s[++h]=v),s.length<2?n[0]?Nv(n[0].x):Hv(t):(t=n.length,function(f){for(var g=0,p;g<t;++g)s[(p=n[g]).i]=p.x(f);return s.join("")})}var Hl=180/Math.PI,Cn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function da(e,t,r,l,u,v){var h,s,n;return(h=Math.sqrt(e*e+t*t))&&(e/=h,t/=h),(n=e*r+t*l)&&(r-=e*n,l-=t*n),(s=Math.sqrt(r*r+l*l))&&(r/=s,l/=s,n/=s),e*l<t*r&&(e=-e,t=-t,n=-n,h=-h),{translateX:u,translateY:v,rotate:Math.atan2(t,e)*Hl,skewX:Math.atan(n)*Hl,scaleX:h,scaleY:s}}var ri;function Fv(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Cn:da(t.a,t.b,t.c,t.d,t.e,t.f)}function jv(e){return e==null||(ri||(ri=document.createElementNS("http://www.w3.org/2000/svg","g")),ri.setAttribute("transform",e),!(e=ri.transform.baseVal.consolidate()))?Cn:(e=e.matrix,da(e.a,e.b,e.c,e.d,e.e,e.f))}function ha(e,t,r,l){function u(f){return f.length?f.pop()+" ":""}function v(f,g,p,_,b,C){if(f!==p||g!==_){var x=b.push("translate(",null,t,null,r);C.push({i:x-4,x:Ir(f,p)},{i:x-2,x:Ir(g,_)})}else(p||_)&&b.push("translate("+p+t+_+r)}function h(f,g,p,_){f!==g?(f-g>180?g+=360:g-f>180&&(f+=360),_.push({i:p.push(u(p)+"rotate(",null,l)-2,x:Ir(f,g)})):g&&p.push(u(p)+"rotate("+g+l)}function s(f,g,p,_){f!==g?_.push({i:p.push(u(p)+"skewX(",null,l)-2,x:Ir(f,g)}):g&&p.push(u(p)+"skewX("+g+l)}function n(f,g,p,_,b,C){if(f!==p||g!==_){var x=b.push(u(b)+"scale(",null,",",null,")");C.push({i:x-4,x:Ir(f,p)},{i:x-2,x:Ir(g,_)})}else(p!==1||_!==1)&&b.push(u(b)+"scale("+p+","+_+")")}return function(f,g){var p=[],_=[];return f=e(f),g=e(g),v(f.translateX,f.translateY,g.translateX,g.translateY,p,_),h(f.rotate,g.rotate,p,_),s(f.skewX,g.skewX,p,_),n(f.scaleX,f.scaleY,g.scaleX,g.scaleY,p,_),f=g=null,function(b){for(var C=-1,x=_.length,o;++C<x;)p[(o=_[C]).i]=o.x(b);return p.join("")}}}var Uv=ha(Fv,"px, ","px)","deg)"),Vv=ha(jv,", ",")",")"),Wv=1e-12;function Nl(e){return((e=Math.exp(e))+1/e)/2}function qv(e){return((e=Math.exp(e))-1/e)/2}function Kv(e){return((e=Math.exp(2*e))-1)/(e+1)}const Yv=function e(t,r,l){function u(v,h){var s=v[0],n=v[1],f=v[2],g=h[0],p=h[1],_=h[2],b=g-s,C=p-n,x=b*b+C*C,o,d;if(x<Wv)d=Math.log(_/f)/t,o=function(E){return[s+E*b,n+E*C,f*Math.exp(t*E*d)]};else{var a=Math.sqrt(x),c=(_*_-f*f+l*x)/(2*f*r*a),m=(_*_-f*f-l*x)/(2*_*r*a),$=Math.log(Math.sqrt(c*c+1)-c),S=Math.log(Math.sqrt(m*m+1)-m);d=(S-$)/t,o=function(E){var y=E*d,k=Nl($),B=f/(r*a)*(k*Kv(t*y+$)-qv($));return[s+B*b,n+B*C,f*k/Nl(t*y+$)]}}return o.duration=d*1e3*t/Math.SQRT2,o}return u.rho=function(v){var h=Math.max(.001,+v),s=h*h,n=s*s;return e(h,s,n)},u}(Math.SQRT2,2,4);var us=0,Ss=0,_s=0,ua=1e3,Ei,Cs,Li=0,Gr=0,Hi=0,Is=typeof performance=="object"&&performance.now?performance:Date,fa=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Pn(){return Gr||(fa(Gv),Gr=Is.now()+Hi)}function Gv(){Gr=0}function Ri(){this._call=this._time=this._next=null}Ri.prototype=In.prototype={constructor:Ri,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?Pn():+r)+(t==null?0:+t),!this._next&&Cs!==this&&(Cs?Cs._next=this:Ei=this,Cs=this),this._call=e,this._time=r,kn()},stop:function(){this._call&&(this._call=null,this._time=1/0,kn())}};function In(e,t,r){var l=new Ri;return l.restart(e,t,r),l}function Jv(){Pn(),++us;for(var e=Ei,t;e;)(t=Gr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--us}function zl(){Gr=(Li=Is.now())+Hi,us=Ss=0;try{Jv()}finally{us=0,Zv(),Gr=0}}function Xv(){var e=Is.now(),t=e-Li;t>ua&&(Hi-=t,Li=e)}function Zv(){for(var e,t=Ei,r,l=1/0;t;)t._call?(l>t._time&&(l=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:Ei=r);Cs=e,kn(l)}function kn(e){if(!us){Ss&&(Ss=clearTimeout(Ss));var t=e-Gr;t>24?(e<1/0&&(Ss=setTimeout(zl,e-Is.now()-Hi)),_s&&(_s=clearInterval(_s))):(_s||(Li=Is.now(),_s=setInterval(Xv,ua)),us=1,fa(zl))}}function Fl(e,t,r){var l=new Ri;return t=t==null?0:+t,l.restart(u=>{l.stop(),e(u+t)},t,r),l}var Qv=Ns("start","end","cancel","interrupt"),e0=[],ga=0,jl=1,An=2,fi=3,Ul=4,Mn=5,gi=6;function Ni(e,t,r,l,u,v){var h=e.__transition;if(!h)e.__transition={};else if(r in h)return;t0(e,r,{name:t,index:l,group:u,on:Qv,tween:e0,time:v.time,delay:v.delay,duration:v.duration,ease:v.ease,timer:null,state:ga})}function Bn(e,t){var r=fr(e,t);if(r.state>ga)throw new Error("too late; already scheduled");return r}function br(e,t){var r=fr(e,t);if(r.state>fi)throw new Error("too late; already running");return r}function fr(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function t0(e,t,r){var l=e.__transition,u;l[t]=r,r.timer=In(v,0,r.time);function v(f){r.state=jl,r.timer.restart(h,r.delay,r.time),r.delay<=f&&h(f-r.delay)}function h(f){var g,p,_,b;if(r.state!==jl)return n();for(g in l)if(b=l[g],b.name===r.name){if(b.state===fi)return Fl(h);b.state===Ul?(b.state=gi,b.timer.stop(),b.on.call("interrupt",e,e.__data__,b.index,b.group),delete l[g]):+g<t&&(b.state=gi,b.timer.stop(),b.on.call("cancel",e,e.__data__,b.index,b.group),delete l[g])}if(Fl(function(){r.state===fi&&(r.state=Ul,r.timer.restart(s,r.delay,r.time),s(f))}),r.state=An,r.on.call("start",e,e.__data__,r.index,r.group),r.state===An){for(r.state=fi,u=new Array(_=r.tween.length),g=0,p=-1;g<_;++g)(b=r.tween[g].value.call(e,e.__data__,r.index,r.group))&&(u[++p]=b);u.length=p+1}}function s(f){for(var g=f<r.duration?r.ease.call(null,f/r.duration):(r.timer.restart(n),r.state=Mn,1),p=-1,_=u.length;++p<_;)u[p].call(e,g);r.state===Mn&&(r.on.call("end",e,e.__data__,r.index,r.group),n())}function n(){r.state=gi,r.timer.stop(),delete l[t];for(var f in l)return;delete e.__transition}}function pi(e,t){var r=e.__transition,l,u,v=!0,h;if(r){t=t==null?null:t+"";for(h in r){if((l=r[h]).name!==t){v=!1;continue}u=l.state>An&&l.state<Mn,l.state=gi,l.timer.stop(),l.on.call(u?"interrupt":"cancel",e,e.__data__,l.index,l.group),delete r[h]}v&&delete e.__transition}}function r0(e){return this.each(function(){pi(this,e)})}function s0(e,t){var r,l;return function(){var u=br(this,e),v=u.tween;if(v!==r){l=r=v;for(var h=0,s=l.length;h<s;++h)if(l[h].name===t){l=l.slice(),l.splice(h,1);break}}u.tween=l}}function i0(e,t,r){var l,u;if(typeof r!="function")throw new Error;return function(){var v=br(this,e),h=v.tween;if(h!==l){u=(l=h).slice();for(var s={name:t,value:r},n=0,f=u.length;n<f;++n)if(u[n].name===t){u[n]=s;break}n===f&&u.push(s)}v.tween=u}}function n0(e,t){var r=this._id;if(e+="",arguments.length<2){for(var l=fr(this.node(),r).tween,u=0,v=l.length,h;u<v;++u)if((h=l[u]).name===e)return h.value;return null}return this.each((t==null?s0:i0)(r,e,t))}function On(e,t,r){var l=e._id;return e.each(function(){var u=br(this,l);(u.value||(u.value={}))[t]=r.apply(this,arguments)}),function(u){return fr(u,l).value[t]}}function pa(e,t){var r;return(typeof t=="number"?Ir:t instanceof Ps?Ol:(r=Ps(t))?(t=r,Ol):zv)(e,t)}function l0(e){return function(){this.removeAttribute(e)}}function o0(e){return function(){this.removeAttributeNS(e.space,e.local)}}function a0(e,t,r){var l,u=r+"",v;return function(){var h=this.getAttribute(e);return h===u?null:h===l?v:v=t(l=h,r)}}function c0(e,t,r){var l,u=r+"",v;return function(){var h=this.getAttributeNS(e.space,e.local);return h===u?null:h===l?v:v=t(l=h,r)}}function d0(e,t,r){var l,u,v;return function(){var h,s=r(this),n;return s==null?void this.removeAttribute(e):(h=this.getAttribute(e),n=s+"",h===n?null:h===l&&n===u?v:(u=n,v=t(l=h,s)))}}function h0(e,t,r){var l,u,v;return function(){var h,s=r(this),n;return s==null?void this.removeAttributeNS(e.space,e.local):(h=this.getAttributeNS(e.space,e.local),n=s+"",h===n?null:h===l&&n===u?v:(u=n,v=t(l=h,s)))}}function u0(e,t){var r=Oi(e),l=r==="transform"?Vv:pa;return this.attrTween(e,typeof t=="function"?(r.local?h0:d0)(r,l,On(this,"attr."+e,t)):t==null?(r.local?o0:l0)(r):(r.local?c0:a0)(r,l,t))}function f0(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function g0(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function p0(e,t){var r,l;function u(){var v=t.apply(this,arguments);return v!==l&&(r=(l=v)&&g0(e,v)),r}return u._value=t,u}function v0(e,t){var r,l;function u(){var v=t.apply(this,arguments);return v!==l&&(r=(l=v)&&f0(e,v)),r}return u._value=t,u}function m0(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var l=Oi(e);return this.tween(r,(l.local?p0:v0)(l,t))}function _0(e,t){return function(){Bn(this,e).delay=+t.apply(this,arguments)}}function b0(e,t){return t=+t,function(){Bn(this,e).delay=t}}function y0(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?_0:b0)(t,e)):fr(this.node(),t).delay}function x0(e,t){return function(){br(this,e).duration=+t.apply(this,arguments)}}function $0(e,t){return t=+t,function(){br(this,e).duration=t}}function w0(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?x0:$0)(t,e)):fr(this.node(),t).duration}function S0(e,t){if(typeof t!="function")throw new Error;return function(){br(this,e).ease=t}}function C0(e){var t=this._id;return arguments.length?this.each(S0(t,e)):fr(this.node(),t).ease}function k0(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;br(this,e).ease=r}}function A0(e){if(typeof e!="function")throw new Error;return this.each(k0(this._id,e))}function M0(e){typeof e!="function"&&(e=Yo(e));for(var t=this._groups,r=t.length,l=new Array(r),u=0;u<r;++u)for(var v=t[u],h=v.length,s=l[u]=[],n,f=0;f<h;++f)(n=v[f])&&e.call(n,n.__data__,f,v)&&s.push(n);return new Er(l,this._parents,this._name,this._id)}function E0(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,l=t.length,u=r.length,v=Math.min(l,u),h=new Array(l),s=0;s<v;++s)for(var n=t[s],f=r[s],g=n.length,p=h[s]=new Array(g),_,b=0;b<g;++b)(_=n[b]||f[b])&&(p[b]=_);for(;s<l;++s)h[s]=t[s];return new Er(h,this._parents,this._name,this._id)}function L0(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function R0(e,t,r){var l,u,v=L0(t)?Bn:br;return function(){var h=v(this,e),s=h.on;s!==l&&(u=(l=s).copy()).on(t,r),h.on=u}}function D0(e,t){var r=this._id;return arguments.length<2?fr(this.node(),r).on.on(e):this.each(R0(r,e,t))}function T0(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function P0(){return this.on("end.remove",T0(this._id))}function I0(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Rn(e));for(var l=this._groups,u=l.length,v=new Array(u),h=0;h<u;++h)for(var s=l[h],n=s.length,f=v[h]=new Array(n),g,p,_=0;_<n;++_)(g=s[_])&&(p=e.call(g,g.__data__,_,s))&&("__data__"in g&&(p.__data__=g.__data__),f[_]=p,Ni(f[_],t,r,_,f,fr(g,r)));return new Er(v,this._parents,t,r)}function B0(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Ko(e));for(var l=this._groups,u=l.length,v=[],h=[],s=0;s<u;++s)for(var n=l[s],f=n.length,g,p=0;p<f;++p)if(g=n[p]){for(var _=e.call(g,g.__data__,p,n),b,C=fr(g,r),x=0,o=_.length;x<o;++x)(b=_[x])&&Ni(b,t,r,x,_,C);v.push(_),h.push(g)}return new Er(v,h,t,r)}var O0=zs.prototype.constructor;function H0(){return new O0(this._groups,this._parents)}function N0(e,t){var r,l,u;return function(){var v=hs(this,e),h=(this.style.removeProperty(e),hs(this,e));return v===h?null:v===r&&h===l?u:u=t(r=v,l=h)}}function va(e){return function(){this.style.removeProperty(e)}}function z0(e,t,r){var l,u=r+"",v;return function(){var h=hs(this,e);return h===u?null:h===l?v:v=t(l=h,r)}}function F0(e,t,r){var l,u,v;return function(){var h=hs(this,e),s=r(this),n=s+"";return s==null&&(n=s=(this.style.removeProperty(e),hs(this,e))),h===n?null:h===l&&n===u?v:(u=n,v=t(l=h,s))}}function j0(e,t){var r,l,u,v="style."+t,h="end."+v,s;return function(){var n=br(this,e),f=n.on,g=n.value[v]==null?s||(s=va(t)):void 0;(f!==r||u!==g)&&(l=(r=f).copy()).on(h,u=g),n.on=l}}function U0(e,t,r){var l=(e+="")=="transform"?Uv:pa;return t==null?this.styleTween(e,N0(e,l)).on("end.style."+e,va(e)):typeof t=="function"?this.styleTween(e,F0(e,l,On(this,"style."+e,t))).each(j0(this._id,e)):this.styleTween(e,z0(e,l,t),r).on("end.style."+e,null)}function V0(e,t,r){return function(l){this.style.setProperty(e,t.call(this,l),r)}}function W0(e,t,r){var l,u;function v(){var h=t.apply(this,arguments);return h!==u&&(l=(u=h)&&V0(e,h,r)),l}return v._value=t,v}function q0(e,t,r){var l="style."+(e+="");if(arguments.length<2)return(l=this.tween(l))&&l._value;if(t==null)return this.tween(l,null);if(typeof t!="function")throw new Error;return this.tween(l,W0(e,t,r??""))}function K0(e){return function(){this.textContent=e}}function Y0(e){return function(){var t=e(this);this.textContent=t??""}}function G0(e){return this.tween("text",typeof e=="function"?Y0(On(this,"text",e)):K0(e==null?"":e+""))}function J0(e){return function(t){this.textContent=e.call(this,t)}}function X0(e){var t,r;function l(){var u=e.apply(this,arguments);return u!==r&&(t=(r=u)&&J0(u)),t}return l._value=e,l}function Z0(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,X0(e))}function Q0(){for(var e=this._name,t=this._id,r=ma(),l=this._groups,u=l.length,v=0;v<u;++v)for(var h=l[v],s=h.length,n,f=0;f<s;++f)if(n=h[f]){var g=fr(n,t);Ni(n,e,r,f,h,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new Er(l,this._parents,e,r)}function em(){var e,t,r=this,l=r._id,u=r.size();return new Promise(function(v,h){var s={value:h},n={value:function(){--u===0&&v()}};r.each(function(){var f=br(this,l),g=f.on;g!==e&&(t=(e=g).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(n)),f.on=t}),u===0&&v()})}var tm=0;function Er(e,t,r,l){this._groups=e,this._parents=t,this._name=r,this._id=l}function ma(){return++tm}var Sr=zs.prototype;Er.prototype={constructor:Er,select:I0,selectAll:B0,selectChild:Sr.selectChild,selectChildren:Sr.selectChildren,filter:M0,merge:E0,selection:H0,transition:Q0,call:Sr.call,nodes:Sr.nodes,node:Sr.node,size:Sr.size,empty:Sr.empty,each:Sr.each,on:D0,attr:u0,attrTween:m0,style:U0,styleTween:q0,text:G0,textTween:Z0,remove:P0,tween:n0,delay:y0,duration:w0,ease:C0,easeVarying:A0,end:em,[Symbol.iterator]:Sr[Symbol.iterator]};function rm(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var sm={time:null,delay:0,duration:250,ease:rm};function im(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function nm(e){var t,r;e instanceof Er?(t=e._id,e=e._name):(t=ma(),(r=sm).time=Pn(),e=e==null?null:e+"");for(var l=this._groups,u=l.length,v=0;v<u;++v)for(var h=l[v],s=h.length,n,f=0;f<s;++f)(n=h[f])&&Ni(n,e,t,f,h,r||im(n,t));return new Er(l,this._parents,e,t)}zs.prototype.interrupt=r0;zs.prototype.transition=nm;function lm(e,t){var r,l=1;e==null&&(e=0),t==null&&(t=0);function u(){var v,h=r.length,s,n=0,f=0;for(v=0;v<h;++v)s=r[v],n+=s.x,f+=s.y;for(n=(n/h-e)*l,f=(f/h-t)*l,v=0;v<h;++v)s=r[v],s.x-=n,s.y-=f}return u.initialize=function(v){r=v},u.x=function(v){return arguments.length?(e=+v,u):e},u.y=function(v){return arguments.length?(t=+v,u):t},u.strength=function(v){return arguments.length?(l=+v,u):l},u}function om(e){const t=+this._x.call(null,e),r=+this._y.call(null,e);return _a(this.cover(t,r),t,r,e)}function _a(e,t,r,l){if(isNaN(t)||isNaN(r))return e;var u,v=e._root,h={data:l},s=e._x0,n=e._y0,f=e._x1,g=e._y1,p,_,b,C,x,o,d,a;if(!v)return e._root=h,e;for(;v.length;)if((x=t>=(p=(s+f)/2))?s=p:f=p,(o=r>=(_=(n+g)/2))?n=_:g=_,u=v,!(v=v[d=o<<1|x]))return u[d]=h,e;if(b=+e._x.call(null,v.data),C=+e._y.call(null,v.data),t===b&&r===C)return h.next=v,u?u[d]=h:e._root=h,e;do u=u?u[d]=new Array(4):e._root=new Array(4),(x=t>=(p=(s+f)/2))?s=p:f=p,(o=r>=(_=(n+g)/2))?n=_:g=_;while((d=o<<1|x)===(a=(C>=_)<<1|b>=p));return u[a]=v,u[d]=h,e}function am(e){var t,r,l=e.length,u,v,h=new Array(l),s=new Array(l),n=1/0,f=1/0,g=-1/0,p=-1/0;for(r=0;r<l;++r)isNaN(u=+this._x.call(null,t=e[r]))||isNaN(v=+this._y.call(null,t))||(h[r]=u,s[r]=v,u<n&&(n=u),u>g&&(g=u),v<f&&(f=v),v>p&&(p=v));if(n>g||f>p)return this;for(this.cover(n,f).cover(g,p),r=0;r<l;++r)_a(this,h[r],s[r],e[r]);return this}function cm(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var r=this._x0,l=this._y0,u=this._x1,v=this._y1;if(isNaN(r))u=(r=Math.floor(e))+1,v=(l=Math.floor(t))+1;else{for(var h=u-r||1,s=this._root,n,f;r>e||e>=u||l>t||t>=v;)switch(f=(t<l)<<1|e<r,n=new Array(4),n[f]=s,s=n,h*=2,f){case 0:u=r+h,v=l+h;break;case 1:r=u-h,v=l+h;break;case 2:u=r+h,l=v-h;break;case 3:r=u-h,l=v-h;break}this._root&&this._root.length&&(this._root=s)}return this._x0=r,this._y0=l,this._x1=u,this._y1=v,this}function dm(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function hm(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Vt(e,t,r,l,u){this.node=e,this.x0=t,this.y0=r,this.x1=l,this.y1=u}function um(e,t,r){var l,u=this._x0,v=this._y0,h,s,n,f,g=this._x1,p=this._y1,_=[],b=this._root,C,x;for(b&&_.push(new Vt(b,u,v,g,p)),r==null?r=1/0:(u=e-r,v=t-r,g=e+r,p=t+r,r*=r);C=_.pop();)if(!(!(b=C.node)||(h=C.x0)>g||(s=C.y0)>p||(n=C.x1)<u||(f=C.y1)<v))if(b.length){var o=(h+n)/2,d=(s+f)/2;_.push(new Vt(b[3],o,d,n,f),new Vt(b[2],h,d,o,f),new Vt(b[1],o,s,n,d),new Vt(b[0],h,s,o,d)),(x=(t>=d)<<1|e>=o)&&(C=_[_.length-1],_[_.length-1]=_[_.length-1-x],_[_.length-1-x]=C)}else{var a=e-+this._x.call(null,b.data),c=t-+this._y.call(null,b.data),m=a*a+c*c;if(m<r){var $=Math.sqrt(r=m);u=e-$,v=t-$,g=e+$,p=t+$,l=b.data}}return l}function fm(e){if(isNaN(g=+this._x.call(null,e))||isNaN(p=+this._y.call(null,e)))return this;var t,r=this._root,l,u,v,h=this._x0,s=this._y0,n=this._x1,f=this._y1,g,p,_,b,C,x,o,d;if(!r)return this;if(r.length)for(;;){if((C=g>=(_=(h+n)/2))?h=_:n=_,(x=p>=(b=(s+f)/2))?s=b:f=b,t=r,!(r=r[o=x<<1|C]))return this;if(!r.length)break;(t[o+1&3]||t[o+2&3]||t[o+3&3])&&(l=t,d=o)}for(;r.data!==e;)if(u=r,!(r=r.next))return this;return(v=r.next)&&delete r.next,u?(v?u.next=v:delete u.next,this):t?(v?t[o]=v:delete t[o],(r=t[0]||t[1]||t[2]||t[3])&&r===(t[3]||t[2]||t[1]||t[0])&&!r.length&&(l?l[d]=r:this._root=r),this):(this._root=v,this)}function gm(e){for(var t=0,r=e.length;t<r;++t)this.remove(e[t]);return this}function pm(){return this._root}function vm(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function mm(e){var t=[],r,l=this._root,u,v,h,s,n;for(l&&t.push(new Vt(l,this._x0,this._y0,this._x1,this._y1));r=t.pop();)if(!e(l=r.node,v=r.x0,h=r.y0,s=r.x1,n=r.y1)&&l.length){var f=(v+s)/2,g=(h+n)/2;(u=l[3])&&t.push(new Vt(u,f,g,s,n)),(u=l[2])&&t.push(new Vt(u,v,g,f,n)),(u=l[1])&&t.push(new Vt(u,f,h,s,g)),(u=l[0])&&t.push(new Vt(u,v,h,f,g))}return this}function _m(e){var t=[],r=[],l;for(this._root&&t.push(new Vt(this._root,this._x0,this._y0,this._x1,this._y1));l=t.pop();){var u=l.node;if(u.length){var v,h=l.x0,s=l.y0,n=l.x1,f=l.y1,g=(h+n)/2,p=(s+f)/2;(v=u[0])&&t.push(new Vt(v,h,s,g,p)),(v=u[1])&&t.push(new Vt(v,g,s,n,p)),(v=u[2])&&t.push(new Vt(v,h,p,g,f)),(v=u[3])&&t.push(new Vt(v,g,p,n,f))}r.push(l)}for(;l=r.pop();)e(l.node,l.x0,l.y0,l.x1,l.y1);return this}function bm(e){return e[0]}function ym(e){return arguments.length?(this._x=e,this):this._x}function xm(e){return e[1]}function $m(e){return arguments.length?(this._y=e,this):this._y}function Hn(e,t,r){var l=new Nn(t??bm,r??xm,NaN,NaN,NaN,NaN);return e==null?l:l.addAll(e)}function Nn(e,t,r,l,u,v){this._x=e,this._y=t,this._x0=r,this._y0=l,this._x1=u,this._y1=v,this._root=void 0}function Vl(e){for(var t={data:e.data},r=t;e=e.next;)r=r.next={data:e.data};return t}var Yt=Hn.prototype=Nn.prototype;Yt.copy=function(){var e=new Nn(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,r,l;if(!t)return e;if(!t.length)return e._root=Vl(t),e;for(r=[{source:t,target:e._root=new Array(4)}];t=r.pop();)for(var u=0;u<4;++u)(l=t.source[u])&&(l.length?r.push({source:l,target:t.target[u]=new Array(4)}):t.target[u]=Vl(l));return e};Yt.add=om;Yt.addAll=am;Yt.cover=cm;Yt.data=dm;Yt.extent=hm;Yt.find=um;Yt.remove=fm;Yt.removeAll=gm;Yt.root=pm;Yt.size=vm;Yt.visit=mm;Yt.visitAfter=_m;Yt.x=ym;Yt.y=$m;function qt(e){return function(){return e}}function Br(e){return(e()-.5)*1e-6}function wm(e){return e.x+e.vx}function Sm(e){return e.y+e.vy}function Cm(e){var t,r,l,u=1,v=1;typeof e!="function"&&(e=qt(e==null?1:+e));function h(){for(var f,g=t.length,p,_,b,C,x,o,d=0;d<v;++d)for(p=Hn(t,wm,Sm).visitAfter(s),f=0;f<g;++f)_=t[f],x=r[_.index],o=x*x,b=_.x+_.vx,C=_.y+_.vy,p.visit(a);function a(c,m,$,S,E){var y=c.data,k=c.r,B=x+k;if(y){if(y.index>_.index){var O=b-y.x-y.vx,T=C-y.y-y.vy,I=O*O+T*T;I<B*B&&(O===0&&(O=Br(l),I+=O*O),T===0&&(T=Br(l),I+=T*T),I=(B-(I=Math.sqrt(I)))/I*u,_.vx+=(O*=I)*(B=(k*=k)/(o+k)),_.vy+=(T*=I)*B,y.vx-=O*(B=1-B),y.vy-=T*B)}return}return m>b+B||S<b-B||$>C+B||E<C-B}}function s(f){if(f.data)return f.r=r[f.data.index];for(var g=f.r=0;g<4;++g)f[g]&&f[g].r>f.r&&(f.r=f[g].r)}function n(){if(t){var f,g=t.length,p;for(r=new Array(g),f=0;f<g;++f)p=t[f],r[p.index]=+e(p,f,t)}}return h.initialize=function(f,g){t=f,l=g,n()},h.iterations=function(f){return arguments.length?(v=+f,h):v},h.strength=function(f){return arguments.length?(u=+f,h):u},h.radius=function(f){return arguments.length?(e=typeof f=="function"?f:qt(+f),n(),h):e},h}function km(e){return e.index}function Wl(e,t){var r=e.get(t);if(!r)throw new Error("node not found: "+t);return r}function Am(e){var t=km,r=p,l,u=qt(30),v,h,s,n,f,g=1;e==null&&(e=[]);function p(o){return 1/Math.min(s[o.source.index],s[o.target.index])}function _(o){for(var d=0,a=e.length;d<g;++d)for(var c=0,m,$,S,E,y,k,B;c<a;++c)m=e[c],$=m.source,S=m.target,E=S.x+S.vx-$.x-$.vx||Br(f),y=S.y+S.vy-$.y-$.vy||Br(f),k=Math.sqrt(E*E+y*y),k=(k-v[c])/k*o*l[c],E*=k,y*=k,S.vx-=E*(B=n[c]),S.vy-=y*B,$.vx+=E*(B=1-B),$.vy+=y*B}function b(){if(h){var o,d=h.length,a=e.length,c=new Map(h.map(($,S)=>[t($,S,h),$])),m;for(o=0,s=new Array(d);o<a;++o)m=e[o],m.index=o,typeof m.source!="object"&&(m.source=Wl(c,m.source)),typeof m.target!="object"&&(m.target=Wl(c,m.target)),s[m.source.index]=(s[m.source.index]||0)+1,s[m.target.index]=(s[m.target.index]||0)+1;for(o=0,n=new Array(a);o<a;++o)m=e[o],n[o]=s[m.source.index]/(s[m.source.index]+s[m.target.index]);l=new Array(a),C(),v=new Array(a),x()}}function C(){if(h)for(var o=0,d=e.length;o<d;++o)l[o]=+r(e[o],o,e)}function x(){if(h)for(var o=0,d=e.length;o<d;++o)v[o]=+u(e[o],o,e)}return _.initialize=function(o,d){h=o,f=d,b()},_.links=function(o){return arguments.length?(e=o,b(),_):e},_.id=function(o){return arguments.length?(t=o,_):t},_.iterations=function(o){return arguments.length?(g=+o,_):g},_.strength=function(o){return arguments.length?(r=typeof o=="function"?o:qt(+o),C(),_):r},_.distance=function(o){return arguments.length?(u=typeof o=="function"?o:qt(+o),x(),_):u},_}const Mm=1664525,Em=1013904223,ql=4294967296;function Lm(){let e=1;return()=>(e=(Mm*e+Em)%ql)/ql}function Rm(e){return e.x}function Dm(e){return e.y}var Tm=10,Pm=Math.PI*(3-Math.sqrt(5));function Im(e){var t,r=1,l=.001,u=1-Math.pow(l,1/300),v=0,h=.6,s=new Map,n=In(p),f=Ns("tick","end"),g=Lm();e==null&&(e=[]);function p(){_(),f.call("tick",t),r<l&&(n.stop(),f.call("end",t))}function _(x){var o,d=e.length,a;x===void 0&&(x=1);for(var c=0;c<x;++c)for(r+=(v-r)*u,s.forEach(function(m){m(r)}),o=0;o<d;++o)a=e[o],a.fx==null?a.x+=a.vx*=h:(a.x=a.fx,a.vx=0),a.fy==null?a.y+=a.vy*=h:(a.y=a.fy,a.vy=0);return t}function b(){for(var x=0,o=e.length,d;x<o;++x){if(d=e[x],d.index=x,d.fx!=null&&(d.x=d.fx),d.fy!=null&&(d.y=d.fy),isNaN(d.x)||isNaN(d.y)){var a=Tm*Math.sqrt(.5+x),c=x*Pm;d.x=a*Math.cos(c),d.y=a*Math.sin(c)}(isNaN(d.vx)||isNaN(d.vy))&&(d.vx=d.vy=0)}}function C(x){return x.initialize&&x.initialize(e,g),x}return b(),t={tick:_,restart:function(){return n.restart(p),t},stop:function(){return n.stop(),t},nodes:function(x){return arguments.length?(e=x,b(),s.forEach(C),t):e},alpha:function(x){return arguments.length?(r=+x,t):r},alphaMin:function(x){return arguments.length?(l=+x,t):l},alphaDecay:function(x){return arguments.length?(u=+x,t):+u},alphaTarget:function(x){return arguments.length?(v=+x,t):v},velocityDecay:function(x){return arguments.length?(h=1-x,t):1-h},randomSource:function(x){return arguments.length?(g=x,s.forEach(C),t):g},force:function(x,o){return arguments.length>1?(o==null?s.delete(x):s.set(x,C(o)),t):s.get(x)},find:function(x,o,d){var a=0,c=e.length,m,$,S,E,y;for(d==null?d=1/0:d*=d,a=0;a<c;++a)E=e[a],m=x-E.x,$=o-E.y,S=m*m+$*$,S<d&&(y=E,d=S);return y},on:function(x,o){return arguments.length>1?(f.on(x,o),t):f.on(x)}}}function Bm(){var e,t,r,l,u=qt(-30),v,h=1,s=1/0,n=.81;function f(b){var C,x=e.length,o=Hn(e,Rm,Dm).visitAfter(p);for(l=b,C=0;C<x;++C)t=e[C],o.visit(_)}function g(){if(e){var b,C=e.length,x;for(v=new Array(C),b=0;b<C;++b)x=e[b],v[x.index]=+u(x,b,e)}}function p(b){var C=0,x,o,d=0,a,c,m;if(b.length){for(a=c=m=0;m<4;++m)(x=b[m])&&(o=Math.abs(x.value))&&(C+=x.value,d+=o,a+=o*x.x,c+=o*x.y);b.x=a/d,b.y=c/d}else{x=b,x.x=x.data.x,x.y=x.data.y;do C+=v[x.data.index];while(x=x.next)}b.value=C}function _(b,C,x,o){if(!b.value)return!0;var d=b.x-t.x,a=b.y-t.y,c=o-C,m=d*d+a*a;if(c*c/n<m)return m<s&&(d===0&&(d=Br(r),m+=d*d),a===0&&(a=Br(r),m+=a*a),m<h&&(m=Math.sqrt(h*m)),t.vx+=d*b.value*l/m,t.vy+=a*b.value*l/m),!0;if(b.length||m>=s)return;(b.data!==t||b.next)&&(d===0&&(d=Br(r),m+=d*d),a===0&&(a=Br(r),m+=a*a),m<h&&(m=Math.sqrt(h*m)));do b.data!==t&&(c=v[b.data.index]*l/m,t.vx+=d*c,t.vy+=a*c);while(b=b.next)}return f.initialize=function(b,C){e=b,r=C,g()},f.strength=function(b){return arguments.length?(u=typeof b=="function"?b:qt(+b),g(),f):u},f.distanceMin=function(b){return arguments.length?(h=b*b,f):Math.sqrt(h)},f.distanceMax=function(b){return arguments.length?(s=b*b,f):Math.sqrt(s)},f.theta=function(b){return arguments.length?(n=b*b,f):Math.sqrt(n)},f}function Om(e){var t=qt(.1),r,l,u;typeof e!="function"&&(e=qt(e==null?0:+e));function v(s){for(var n=0,f=r.length,g;n<f;++n)g=r[n],g.vx+=(u[n]-g.x)*l[n]*s}function h(){if(r){var s,n=r.length;for(l=new Array(n),u=new Array(n),s=0;s<n;++s)l[s]=isNaN(u[s]=+e(r[s],s,r))?0:+t(r[s],s,r)}}return v.initialize=function(s){r=s,h()},v.strength=function(s){return arguments.length?(t=typeof s=="function"?s:qt(+s),h(),v):t},v.x=function(s){return arguments.length?(e=typeof s=="function"?s:qt(+s),h(),v):e},v}function Hm(e){var t=qt(.1),r,l,u;typeof e!="function"&&(e=qt(e==null?0:+e));function v(s){for(var n=0,f=r.length,g;n<f;++n)g=r[n],g.vy+=(u[n]-g.y)*l[n]*s}function h(){if(r){var s,n=r.length;for(l=new Array(n),u=new Array(n),s=0;s<n;++s)l[s]=isNaN(u[s]=+e(r[s],s,r))?0:+t(r[s],s,r)}}return v.initialize=function(s){r=s,h()},v.strength=function(s){return arguments.length?(t=typeof s=="function"?s:qt(+s),h(),v):t},v.y=function(s){return arguments.length?(e=typeof s=="function"?s:qt(+s),h(),v):e},v}const si=e=>()=>e;function Nm(e,{sourceEvent:t,target:r,transform:l,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}function Ar(e,t,r){this.k=e,this.x=t,this.y=r}Ar.prototype={constructor:Ar,scale:function(e){return e===1?this:new Ar(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ar(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var zn=new Ar(1,0,0);Ar.prototype;function cn(e){e.stopImmediatePropagation()}function bs(e){e.preventDefault(),e.stopImmediatePropagation()}function zm(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Fm(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Kl(){return this.__zoom||zn}function jm(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Um(){return navigator.maxTouchPoints||"ontouchstart"in this}function Vm(e,t,r){var l=e.invertX(t[0][0])-r[0][0],u=e.invertX(t[1][0])-r[1][0],v=e.invertY(t[0][1])-r[0][1],h=e.invertY(t[1][1])-r[1][1];return e.translate(u>l?(l+u)/2:Math.min(0,l)||Math.max(0,u),h>v?(v+h)/2:Math.min(0,v)||Math.max(0,h))}function Wm(){var e=zm,t=Fm,r=Vm,l=jm,u=Um,v=[0,1/0],h=[[-1/0,-1/0],[1/0,1/0]],s=250,n=Yv,f=Ns("start","zoom","end"),g,p,_,b=500,C=150,x=0,o=10;function d(M){M.property("__zoom",Kl).on("wheel.zoom",y,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",B).filter(u).on("touchstart.zoom",O).on("touchmove.zoom",T).on("touchend.zoom touchcancel.zoom",I).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}d.transform=function(M,P,L,H){var w=M.selection?M.selection():M;w.property("__zoom",Kl),M!==w?$(M,P,L,H):w.interrupt().each(function(){S(this,arguments).event(H).start().zoom(null,typeof P=="function"?P.apply(this,arguments):P).end()})},d.scaleBy=function(M,P,L,H){d.scaleTo(M,function(){var w=this.__zoom.k,N=typeof P=="function"?P.apply(this,arguments):P;return w*N},L,H)},d.scaleTo=function(M,P,L,H){d.transform(M,function(){var w=t.apply(this,arguments),N=this.__zoom,z=L==null?m(w):typeof L=="function"?L.apply(this,arguments):L,V=N.invert(z),Q=typeof P=="function"?P.apply(this,arguments):P;return r(c(a(N,Q),z,V),w,h)},L,H)},d.translateBy=function(M,P,L,H){d.transform(M,function(){return r(this.__zoom.translate(typeof P=="function"?P.apply(this,arguments):P,typeof L=="function"?L.apply(this,arguments):L),t.apply(this,arguments),h)},null,H)},d.translateTo=function(M,P,L,H,w){d.transform(M,function(){var N=t.apply(this,arguments),z=this.__zoom,V=H==null?m(N):typeof H=="function"?H.apply(this,arguments):H;return r(zn.translate(V[0],V[1]).scale(z.k).translate(typeof P=="function"?-P.apply(this,arguments):-P,typeof L=="function"?-L.apply(this,arguments):-L),N,h)},H,w)};function a(M,P){return P=Math.max(v[0],Math.min(v[1],P)),P===M.k?M:new Ar(P,M.x,M.y)}function c(M,P,L){var H=P[0]-L[0]*M.k,w=P[1]-L[1]*M.k;return H===M.x&&w===M.y?M:new Ar(M.k,H,w)}function m(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function $(M,P,L,H){M.on("start.zoom",function(){S(this,arguments).event(H).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(H).end()}).tween("zoom",function(){var w=this,N=arguments,z=S(w,N).event(H),V=t.apply(w,N),Q=L==null?m(V):typeof L=="function"?L.apply(w,N):L,F=Math.max(V[1][0]-V[0][0],V[1][1]-V[0][1]),U=w.__zoom,W=typeof P=="function"?P.apply(w,N):P,ce=n(U.invert(Q).concat(F/U.k),W.invert(Q).concat(F/W.k));return function(D){if(D===1)D=W;else{var j=ce(D),K=F/j[2];D=new Ar(K,Q[0]-j[0]*K,Q[1]-j[1]*K)}z.zoom(null,D)}})}function S(M,P,L){return!L&&M.__zooming||new E(M,P)}function E(M,P){this.that=M,this.args=P,this.active=0,this.sourceEvent=null,this.extent=t.apply(M,P),this.taps=0}E.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,P){return this.mouse&&M!=="mouse"&&(this.mouse[1]=P.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=P.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=P.invert(this.touch1[0])),this.that.__zoom=P,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var P=Ut(this.that).datum();f.call(M,this.that,new Nm(M,{sourceEvent:this.sourceEvent,target:d,transform:this.that.__zoom,dispatch:f}),P)}};function y(M,...P){if(!e.apply(this,arguments))return;var L=S(this,P).event(M),H=this.__zoom,w=Math.max(v[0],Math.min(v[1],H.k*Math.pow(2,l.apply(this,arguments)))),N=Cr(M);if(L.wheel)(L.mouse[0][0]!==N[0]||L.mouse[0][1]!==N[1])&&(L.mouse[1]=H.invert(L.mouse[0]=N)),clearTimeout(L.wheel);else{if(H.k===w)return;L.mouse=[N,H.invert(N)],pi(this),L.start()}bs(M),L.wheel=setTimeout(z,C),L.zoom("mouse",r(c(a(H,w),L.mouse[0],L.mouse[1]),L.extent,h));function z(){L.wheel=null,L.end()}}function k(M,...P){if(_||!e.apply(this,arguments))return;var L=M.currentTarget,H=S(this,P,!0).event(M),w=Ut(M.view).on("mousemove.zoom",Q,!0).on("mouseup.zoom",F,!0),N=Cr(M,L),z=M.clientX,V=M.clientY;ia(M.view),cn(M),H.mouse=[N,this.__zoom.invert(N)],pi(this),H.start();function Q(U){if(bs(U),!H.moved){var W=U.clientX-z,ce=U.clientY-V;H.moved=W*W+ce*ce>x}H.event(U).zoom("mouse",r(c(H.that.__zoom,H.mouse[0]=Cr(U,L),H.mouse[1]),H.extent,h))}function F(U){w.on("mousemove.zoom mouseup.zoom",null),na(U.view,H.moved),bs(U),H.event(U).end()}}function B(M,...P){if(e.apply(this,arguments)){var L=this.__zoom,H=Cr(M.changedTouches?M.changedTouches[0]:M,this),w=L.invert(H),N=L.k*(M.shiftKey?.5:2),z=r(c(a(L,N),H,w),t.apply(this,P),h);bs(M),s>0?Ut(this).transition().duration(s).call($,z,H,M):Ut(this).call(d.transform,z,H,M)}}function O(M,...P){if(e.apply(this,arguments)){var L=M.touches,H=L.length,w=S(this,P,M.changedTouches.length===H).event(M),N,z,V,Q;for(cn(M),z=0;z<H;++z)V=L[z],Q=Cr(V,this),Q=[Q,this.__zoom.invert(Q),V.identifier],w.touch0?!w.touch1&&w.touch0[2]!==Q[2]&&(w.touch1=Q,w.taps=0):(w.touch0=Q,N=!0,w.taps=1+!!g);g&&(g=clearTimeout(g)),N&&(w.taps<2&&(p=Q[0],g=setTimeout(function(){g=null},b)),pi(this),w.start())}}function T(M,...P){if(this.__zooming){var L=S(this,P).event(M),H=M.changedTouches,w=H.length,N,z,V,Q;for(bs(M),N=0;N<w;++N)z=H[N],V=Cr(z,this),L.touch0&&L.touch0[2]===z.identifier?L.touch0[0]=V:L.touch1&&L.touch1[2]===z.identifier&&(L.touch1[0]=V);if(z=L.that.__zoom,L.touch1){var F=L.touch0[0],U=L.touch0[1],W=L.touch1[0],ce=L.touch1[1],D=(D=W[0]-F[0])*D+(D=W[1]-F[1])*D,j=(j=ce[0]-U[0])*j+(j=ce[1]-U[1])*j;z=a(z,Math.sqrt(D/j)),V=[(F[0]+W[0])/2,(F[1]+W[1])/2],Q=[(U[0]+ce[0])/2,(U[1]+ce[1])/2]}else if(L.touch0)V=L.touch0[0],Q=L.touch0[1];else return;L.zoom("touch",r(c(z,V,Q),L.extent,h))}}function I(M,...P){if(this.__zooming){var L=S(this,P).event(M),H=M.changedTouches,w=H.length,N,z;for(cn(M),_&&clearTimeout(_),_=setTimeout(function(){_=null},b),N=0;N<w;++N)z=H[N],L.touch0&&L.touch0[2]===z.identifier?delete L.touch0:L.touch1&&L.touch1[2]===z.identifier&&delete L.touch1;if(L.touch1&&!L.touch0&&(L.touch0=L.touch1,delete L.touch1),L.touch0)L.touch0[1]=this.__zoom.invert(L.touch0[0]);else if(L.end(),L.taps===2&&(z=Cr(z,this),Math.hypot(p[0]-z[0],p[1]-z[1])<o)){var V=Ut(this).on("dblclick.zoom");V&&V.apply(this,arguments)}}}return d.wheelDelta=function(M){return arguments.length?(l=typeof M=="function"?M:si(+M),d):l},d.filter=function(M){return arguments.length?(e=typeof M=="function"?M:si(!!M),d):e},d.touchable=function(M){return arguments.length?(u=typeof M=="function"?M:si(!!M),d):u},d.extent=function(M){return arguments.length?(t=typeof M=="function"?M:si([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),d):t},d.scaleExtent=function(M){return arguments.length?(v[0]=+M[0],v[1]=+M[1],d):[v[0],v[1]]},d.translateExtent=function(M){return arguments.length?(h[0][0]=+M[0][0],h[1][0]=+M[1][0],h[0][1]=+M[0][1],h[1][1]=+M[1][1],d):[[h[0][0],h[0][1]],[h[1][0],h[1][1]]]},d.constrain=function(M){return arguments.length?(r=M,d):r},d.duration=function(M){return arguments.length?(s=+M,d):s},d.interpolate=function(M){return arguments.length?(n=M,d):n},d.on=function(){var M=f.on.apply(f,arguments);return M===f?d:M},d.clickDistance=function(M){return arguments.length?(x=(M=+M)*M,d):Math.sqrt(x)},d.tapDistance=function(M){return arguments.length?(o=+M,d):o},d}var qm=R("<svg style=width:100%;height:100%;background:var(--bg-primary)>"),Km=R('<div class="p-4 text-center text-sm rounded-lg"style=background:var(--bg-tertiary);color:var(--text-muted)>No connected resources'),Ym=R('<div class=space-y-4><div class="flex items-center gap-4 p-4 rounded-lg"><div class="w-16 h-16 rounded-xl flex items-center justify-center text-3xl"></div><div><div class="font-bold text-lg"style=color:var(--text-primary)></div><div class="flex items-center gap-2 mt-1"><span class="px-2 py-0.5 rounded text-xs font-medium uppercase"style=color:white></span><span class=text-sm style=color:var(--text-muted)>in </span></div></div></div><div><h4 class="font-semibold mb-3 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg>Connected Resources (<!>)</h4><div class="grid gap-2 max-h-64 overflow-auto">'),Gm=R('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Resource Map</h1><p style=color:var(--text-secondary)>D3.js force-directed graph â€¢ Drag nodes â€¢ Scroll to zoom â€¢ Hover to highlight</p></div><div class="flex items-center gap-3"><button class=icon-btn title=Refresh style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button><button class="px-3 py-2 rounded-lg text-sm hover:bg-[var(--bg-tertiary)]"style=background:var(--bg-secondary);color:var(--text-primary)>Reset Layout</button></div></div><div class="grid grid-cols-2 md:grid-cols-6 gap-3"><div class="card p-3 flex items-center gap-3"><div class="w-10 h-10 rounded-lg flex items-center justify-center"style=background:var(--bg-tertiary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg></div><div><div class="text-xl font-bold"style=color:var(--accent-primary)></div><div class=text-xs style=color:var(--text-muted)>Connections</div></div></div></div><div class="card overflow-hidden relative"style=height:650px><div class="absolute bottom-4 left-4 p-3 rounded-lg text-xs"style="background:var(--bg-secondary);border:1px solid var(--border-color)"><div class="font-semibold mb-2"style=color:var(--text-primary)>Legend</div><div class="grid grid-cols-3 gap-x-4 gap-y-1"></div></div><div class="absolute bottom-4 right-4 px-3 py-2 rounded-lg text-xs"style=background:var(--bg-secondary);color:var(--text-muted)>ðŸ–±ï¸ Drag nodes â€¢ Scroll to zoom â€¢ Click for details'),Jm=R('<div class="card p-3 flex items-center gap-3"><div class="w-10 h-10 rounded-lg flex items-center justify-center text-lg"></div><div><div class="text-xl font-bold"></div><div class="text-xs capitalize"style=color:var(--text-muted)>s'),Xm=R('<div class="h-full flex items-center justify-center"><div class=spinner>'),Zm=R('<div class="h-full flex items-center justify-center flex-col gap-4"style=color:var(--text-muted)><svg class="w-20 h-20 opacity-30"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"></path></svg><p class=text-lg>No resources found</p><p class=text-sm>Select a namespace with deployments and services'),Qm=R('<div class="flex items-center gap-1.5"><span></span><span class=capitalize style=color:var(--text-muted)>'),e1=R('<div class="p-3 rounded-lg flex items-center gap-3 cursor-pointer hover:scale-[1.02] transition-transform"style=background:var(--bg-tertiary)><div class="w-10 h-10 rounded-lg flex items-center justify-center text-lg"></div><div class="flex-1 min-w-0"><div class="font-medium truncate"style=color:var(--accent-primary)></div><div class="text-xs capitalize"style=color:var(--text-muted)></div></div><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 5l7 7-7 7">');const t1=()=>{const[e,{refetch:t}]=qe(()=>tt(),C=>Re.getTopology(C==="_all"?"":C)),[r,l]=J(null),[u,v]=J(!1);let h,s,n=null;const f={node:"#22c55e",deployment:"#3b82f6",statefulset:"#8b5cf6",daemonset:"#f59e0b",service:"#06b6d4",pod:"#ec4899",configmap:"#84cc16",secret:"#ef4444",ingress:"#14b8a6",replicaset:"#6366f1",job:"#f97316",cronjob:"#a855f7"},g=()=>{if(!h||!e())return;const C=e();if(!C?.nodes||C.nodes.length===0)return;Ut(h).selectAll("*").remove(),n&&n.stop();const x=s?.clientWidth||1e3,o=650,d=Ut(h).attr("width",x).attr("height",o).attr("viewBox",[0,0,x,o]),a=d.append("g"),c=Wm().scaleExtent([.2,4]).on("zoom",w=>{a.attr("transform",w.transform)});d.call(c);const m=C.nodes.map(w=>({...w})),$=C.links.map(w=>({source:w.source,target:w.target,value:w.value||1}));n=Im(m).force("link",Am($).id(w=>w.id).distance(120).strength(.5)).force("charge",Bm().strength(-400)).force("center",lm(x/2,o/2)).force("collision",Cm().radius(60)).force("x",Om(x/2).strength(.05)).force("y",Hm(o/2).strength(.05));const S=d.append("defs");S.append("marker").attr("id","arrowhead").attr("viewBox","-0 -5 10 10").attr("refX",25).attr("refY",0).attr("orient","auto").attr("markerWidth",8).attr("markerHeight",8).append("path").attr("d","M 0,-5 L 10 ,0 L 0,5").attr("fill","#06b6d4").style("opacity",.8);const E=S.append("linearGradient").attr("id","linkGradient").attr("gradientUnits","userSpaceOnUse");E.append("stop").attr("offset","0%").attr("stop-color","#06b6d4").attr("stop-opacity",.6),E.append("stop").attr("offset","100%").attr("stop-color","#8b5cf6").attr("stop-opacity",.6);const y=S.append("filter").attr("id","glow").attr("x","-50%").attr("y","-50%").attr("width","200%").attr("height","200%");y.append("feGaussianBlur").attr("stdDeviation","3").attr("result","coloredBlur");const k=y.append("feMerge");k.append("feMergeNode").attr("in","coloredBlur"),k.append("feMergeNode").attr("in","SourceGraphic");const B=a.append("g").attr("class","links").selectAll("path").data($).join("path").attr("fill","none").attr("stroke","url(#linkGradient)").attr("stroke-width",2).attr("stroke-opacity",.6).attr("marker-end","url(#arrowhead)"),O=a.append("g").attr("class","nodes").selectAll("g").data(m).join("g").attr("cursor","pointer").call($v().on("start",M).on("drag",P).on("end",L));O.append("circle").attr("class","node-ring").attr("r",45).attr("fill",w=>f[w.type]||"#6b7280").attr("fill-opacity",0).attr("stroke",w=>f[w.type]||"#6b7280").attr("stroke-width",0).attr("stroke-dasharray","4 4"),O.append("circle").attr("class","node-circle").attr("r",32).attr("fill",w=>`${f[w.type]||"#6b7280"}20`).attr("stroke",w=>f[w.type]||"#6b7280").attr("stroke-width",2.5),O.append("circle").attr("r",22).attr("fill",w=>`${f[w.type]||"#6b7280"}30`);const T={node:"ðŸ–¥ï¸",deployment:"ðŸ“¦",statefulset:"ðŸ—„ï¸",daemonset:"ðŸ‘¹",service:"ðŸŒ",pod:"ðŸ«›",configmap:"âš™ï¸",secret:"ðŸ”",ingress:"ðŸšª",replicaset:"ðŸ“‹",job:"âš¡",cronjob:"â°"};O.append("text").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size","20px").text(w=>T[w.type]||"â“"),O.append("text").attr("class","node-label").attr("text-anchor","middle").attr("dy",48).attr("font-size","10px").attr("fill","var(--text-primary)").attr("font-weight","500").text(w=>w.name.length>18?w.name.slice(0,15)+"...":w.name),O.append("rect").attr("x",-20).attr("y",55).attr("width",40).attr("height",14).attr("rx",7).attr("fill",w=>f[w.type]||"#6b7280").attr("fill-opacity",.9),O.append("text").attr("text-anchor","middle").attr("y",65).attr("font-size","8px").attr("fill","white").attr("font-weight","600").text(w=>w.type.toUpperCase().slice(0,6)),O.on("mouseenter",function(w,N){Ut(this).select(".node-circle").attr("filter","url(#glow)").attr("stroke-width",3.5),Ut(this).select(".node-ring").attr("fill-opacity",.1).attr("stroke-width",2),B.attr("stroke-opacity",V=>{const Q=typeof V.source=="object"?V.source.id:V.source,F=typeof V.target=="object"?V.target.id:V.target;return Q===N.id||F===N.id?1:.1}).attr("stroke-width",V=>{const Q=typeof V.source=="object"?V.source.id:V.source,F=typeof V.target=="object"?V.target.id:V.target;return Q===N.id||F===N.id?3:1});const z=new Set;z.add(N.id),$.forEach(V=>{const Q=typeof V.source=="object"?V.source.id:V.source,F=typeof V.target=="object"?V.target.id:V.target;Q===N.id&&z.add(F),F===N.id&&z.add(Q)}),O.attr("opacity",V=>z.has(V.id)?1:.3)}).on("mouseleave",function(){Ut(this).select(".node-circle").attr("filter",null).attr("stroke-width",2.5),Ut(this).select(".node-ring").attr("fill-opacity",0).attr("stroke-width",0),B.attr("stroke-opacity",.6).attr("stroke-width",2),O.attr("opacity",1)});let I=!1;function M(w){I=!1,w.active||n?.alphaTarget(.3).restart(),w.subject.fx=w.subject.x,w.subject.fy=w.subject.y}function P(w){I=!0,w.subject.fx=w.x,w.subject.fy=w.y}function L(w){w.active||n?.alphaTarget(0)}O.on("click",function(w,N){if(I){I=!1;return}w.stopPropagation(),l(N),v(!0)}),n.on("tick",()=>{B.attr("d",w=>{const N=w.source.x,z=w.source.y,V=w.target.x,Q=w.target.y,F=V-N,U=Q-z,W=Math.sqrt(F*F+U*U)*.8;return`M${N},${z}A${W},${W} 0 0,1 ${V},${Q}`}),O.attr("transform",w=>`translate(${w.x},${w.y})`)});const H=zn.translate(0,0).scale(.9);d.call(c.transform,H)},p=C=>{const x=e();if(!x?.links)return[];const o=[],d=new Map(x.nodes.map(a=>[a.id,a]));return x.links.forEach(a=>{if(a.source===C||typeof a.source=="object"&&a.source.id===C){const c=typeof a.target=="object"?a.target.id:a.target,m=d.get(c);m&&o.push(m)}if(a.target===C||typeof a.target=="object"&&a.target.id===C){const c=typeof a.source=="object"?a.source.id:a.source,m=d.get(c);m&&o.push(m)}}),o};Mt(Qa(()=>e(),()=>{g()})),Xt(()=>{const C=()=>g();window.addEventListener("resize",C),or(()=>{window.removeEventListener("resize",C),n&&n.stop()})});const _=()=>{const C=e();return C?.nodes?C.nodes.reduce((x,o)=>(x[o.type]=(x[o.type]||0)+1,x),{}):{}},b={node:"ðŸ–¥ï¸",deployment:"ðŸ“¦",statefulset:"ðŸ—„ï¸",daemonset:"ðŸ‘¹",service:"ðŸŒ",pod:"ðŸ«›",configmap:"âš™ï¸",secret:"ðŸ”",ingress:"ðŸšª",replicaset:"ðŸ“‹",job:"âš¡",cronjob:"â°"};return(()=>{var C=Gm(),x=C.firstChild,o=x.firstChild,d=o.firstChild;d.nextSibling;var a=o.nextSibling,c=a.firstChild,m=c.nextSibling,$=x.nextSibling,S=$.firstChild,E=S.firstChild;E.firstChild;var y=E.nextSibling,k=y.firstChild;k.nextSibling;var B=$.nextSibling,O=B.firstChild,T=O.firstChild,I=T.nextSibling;O.nextSibling,c.$$click=P=>{const L=P.currentTarget;L.classList.add("refreshing"),setTimeout(()=>L.classList.remove("refreshing"),500),t()},m.$$click=()=>g(),i($,A(Ne,{get each(){return Object.entries(_())},children:([P,L])=>(()=>{var H=Jm(),w=H.firstChild,N=w.nextSibling,z=N.firstChild,V=z.nextSibling,Q=V.firstChild;return i(w,()=>b[P]||"â“"),i(z,L),i(V,P,Q),re(F=>{var U=`${f[P]}20`,W=f[P],ce=f[P];return U!==F.e&&oe(w,"background",F.e=U),W!==F.t&&oe(w,"color",F.t=W),ce!==F.a&&oe(z,"color",F.a=ce),F},{e:void 0,t:void 0,a:void 0}),H})()}),S),i(k,()=>(e()?.links||[]).length);var M=s;return typeof M=="function"?Wt(M,B):s=B,i(B,A(q,{get when(){return!e.loading},get fallback(){return Xm()},get children(){return A(q,{get when(){return e()?.nodes?.length>0},get fallback(){return Zm()},get children(){var P=qm(),L=h;return typeof L=="function"?Wt(L,P):h=P,P}})}}),O),i(I,A(Ne,{get each(){return Object.entries(b).slice(0,6)},children:([P,L])=>(()=>{var H=Qm(),w=H.firstChild,N=w.nextSibling;return i(w,L),i(N,P),H})()})),i(C,A(it,{get isOpen(){return u()},onClose:()=>v(!1),get title(){return`${r()?.type}: ${r()?.name}`},size:"lg",get children(){return A(q,{get when(){return r()},get children(){var P=Ym(),L=P.firstChild,H=L.firstChild,w=H.nextSibling,N=w.firstChild,z=N.nextSibling,V=z.firstChild,Q=V.nextSibling;Q.firstChild;var F=L.nextSibling,U=F.firstChild,W=U.firstChild,ce=W.nextSibling,D=ce.nextSibling;D.nextSibling;var j=U.nextSibling;return i(H,()=>b[r().type]||"â“"),i(N,()=>r().name),i(V,()=>r().type),i(Q,()=>r().namespace||tt(),null),i(U,()=>p(r().id).length,D),i(j,A(Ne,{get each(){return p(r().id)},children:K=>(()=>{var ee=e1(),ne=ee.firstChild,te=ne.nextSibling,le=te.firstChild,Z=le.nextSibling;return te.nextSibling,ee.$$click=()=>l(K),i(ne,()=>b[K.type]||"â“"),i(le,()=>K.name),i(Z,()=>K.type),re(Y=>oe(ne,"background",`${f[K.type]}20`)),ee})()}),null),i(j,A(q,{get when(){return p(r().id).length===0},get children(){return Km()}}),null),re(K=>{var ee=`${f[r().type]}15`,ne=`${f[r().type]}25`,te=f[r().type];return ee!==K.e&&oe(L,"background",K.e=ee),ne!==K.t&&oe(H,"background",K.t=ne),te!==K.a&&oe(V,"background",K.a=te),K},{e:void 0,t:void 0,a:void 0}),P}})}}),null),C})()};Qe(["click"]);const r1={enableDiagnostics:!0,enableCVEVulnerabilities:!0,enableSecurityChecks:!0,enableMLRecommendations:!0,enableEventMonitoring:!0,enableMCP:!0,enableConnectors:!0,enableAnomalyDetection:!0,enableCostAnalysis:!0,enableDriftDetection:!0,enableTopology:!0,enableResourceMap:!0,enableAIChat:!0,enableWebTerminal:!0,enableLogs:!0,enableMetrics:!0,enableAutoRefresh:!0,enableNotifications:!0,enableSoundEffects:!0,showOverviewSection:!0,showInsightsSection:!0,showDeploymentsSection:!0,showWorkloadsSection:!0,showNetworkingSection:!0,showConfigStorageSection:!0,showClusterSection:!0,showIntegrationsSection:!0,showExtensionsSection:!0,showDashboard:!0,showAIInsights:!0,showCostAnalysisMenu:!0,showSecurityInsights:!0,showDriftDetectionMenu:!0,showConnectorsMenu:!0,showAIAgentsMenu:!0,showPlugins:!0,showTerminalMenu:!0},Yl=3,vi={...r1,theme:"dark",compactMode:!1,sidebarCollapsed:!1,defaultNamespace:"_all",itemsPerPage:50,refreshInterval:30,enableDebugMode:!1,enablePerformanceMetrics:!1};function s1(){try{const e=localStorage.getItem("kubegraf-settings-version"),t=localStorage.getItem("kubegraf-settings");if(!e||parseInt(e)<Yl)return console.log("Settings version mismatch or upgrade needed - resetting to defaults"),localStorage.setItem("kubegraf-settings-version",Yl.toString()),vi;if(t){const r=JSON.parse(t);return{...vi,...r}}}catch(e){console.error("Failed to load settings:",e)}return vi}function i1(e){try{localStorage.setItem("kubegraf-settings",JSON.stringify(e))}catch(t){console.error("Failed to save settings:",t)}}const[As,ba]=J(s1());Mt(()=>{i1(As())});function n1(e,t){ba(r=>({...r,[e]:t}))}function l1(){ba(vi)}var o1=R('<button class="px-3 py-1.5 rounded-lg text-sm transition-colors flex items-center gap-2"title="Show single replica workloads"style="background:rgba(245, 158, 11, 0.2);color:var(--warning-color);border:1px solid rgba(245, 158, 11, 0.4)"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>Single Replica Issues<span class="px-1.5 py-0.5 rounded text-xs"style="background:rgba(245, 158, 11, 0.3)">'),a1=R('<div class="text-center py-8"><div class="spinner mx-auto mb-4"></div><p style=color:var(--text-muted)></p><p class="text-xs mt-2"style=color:var(--text-muted)>Optimized with parallel execution and caching'),c1=R('<div class="text-center py-8"style=color:var(--text-muted)><svg class="w-12 h-12 mx-auto mb-4 text-green-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><p class=text-lg>All checks passed!</p><p class=text-sm>No issues found in the selected scope.'),Gl=R("<div class=space-y-3>"),d1=R('<div class="flex items-center justify-between mt-6 pt-4 border-t"style=border-color:var(--border-color)><div class=text-sm style=color:var(--text-secondary)>Showing <!>-<!> of <!> findings</div><div class="flex items-center gap-2"><button class="px-3 py-1.5 rounded text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed">Previous</button><div class="flex items-center gap-1"></div><button class="px-3 py-1.5 rounded text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed">Next'),h1=R('<div class="card p-6"><h3 class="font-semibold mb-4 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg>Findings (<!>)'),u1=R('<div class="card p-6"><div class="text-center py-8"style=color:var(--text-muted)><svg class="w-12 h-12 mx-auto mb-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg><p class="text-lg mb-2">Diagnostics are disabled</p><p class=text-sm>Enable Diagnostics in Settings to run health checks'),f1=R('<div class="card p-6 mt-6"><h3 class="font-semibold mb-4 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg>High Availability (HA) Recommendations</h3><div class=space-y-4><div class="p-4 rounded-lg border-l-4"style="background:rgba(245, 158, 11, 0.1);border-color:var(--warning-color)"><div class="flex items-start gap-3"><svg class="w-5 h-5 mt-0.5 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--warning-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div class=flex-1><h4 class="font-medium mb-2"style=color:var(--text-primary)>Single Replica Workloads</h4><p class="text-sm mb-3"style=color:var(--text-secondary)>Deployments and StatefulSets with only 1 replica are at high risk. At least 2 replicas are recommended for production workloads to ensure high availability.</p><div class="text-xs space-y-1"style=color:var(--text-muted)><p><strong>Check:</strong> REL005 - Single Replica Deployment/StatefulSet</p><p><strong>Impact:</strong> No redundancy - single point of failure</p></div></div></div></div><div class="p-4 rounded-lg border-l-4"style="background:rgba(6, 182, 212, 0.1);border-color:var(--accent-primary)"><div class="flex items-start gap-3"><svg class="w-5 h-5 mt-0.5 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div class=flex-1><h4 class="font-medium mb-2"style=color:var(--text-primary)>Pod Anti-Affinity</h4><p class="text-sm mb-3"style=color:var(--text-secondary)>Multi-replica workloads should use podAntiAffinity to spread pods across different nodes, preventing all replicas from being on the same node.</p><div class="text-xs space-y-1"style=color:var(--text-muted)><p><strong>Check:</strong> REL007 - No Anti-Affinity</p><p><strong>Recommendation:</strong> Add podAntiAffinity rules to pod templates</p></div></div></div></div><div class="p-4 rounded-lg border-l-4"style="background:rgba(6, 182, 212, 0.1);border-color:var(--accent-primary)"><div class="flex items-start gap-3"><svg class="w-5 h-5 mt-0.5 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div class=flex-1><h4 class="font-medium mb-2"style=color:var(--text-primary)>Pod Disruption Budget (PDB)</h4><p class="text-sm mb-3"style=color:var(--text-secondary)>PodDisruptionBudgets ensure that a minimum number of pods remain available during voluntary disruptions (node drains, cluster upgrades, etc.).</p><div class="text-xs space-y-1"style=color:var(--text-muted)><p><strong>Check:</strong> REL006 - Missing PDB</p><p><strong>Recommendation:</strong> Create PDBs for all production workloads with 2+ replicas</p></div></div></div></div><div class="mt-4 p-4 rounded-lg"style=background:var(--bg-tertiary)><h4 class="font-medium mb-2"style=color:var(--text-primary)>Best Practices Summary</h4><ul class="text-sm space-y-1"style=color:var(--text-secondary)><li>â€¢ Use at least 2 replicas for production workloads</li><li>â€¢ Configure podAntiAffinity to spread pods across nodes</li><li>â€¢ Create PodDisruptionBudgets for multi-replica workloads</li><li>â€¢ Consider using topologySpreadConstraints for advanced placement</li><li>â€¢ Monitor pod distribution across nodes regularly'),g1=R('<div class="text-center py-4"style=color:var(--text-secondary)>Loading vulnerability stats...'),p1=R('<div class="text-center py-8"style=color:var(--text-secondary)><div class="spinner mx-auto mb-4"></div><p>Scanning cluster for vulnerabilities...</p><p class="text-xs mt-2"style=color:var(--text-muted)>This may take a few moments'),v1=R('<div class="text-center py-8"style=color:var(--error-color)><p class=mb-2>Error scanning for vulnerabilities</p><p class=text-xs style=color:var(--text-muted)></p><button class="mt-4 px-4 py-2 rounded text-sm transition-colors"style=background:var(--accent-primary);color:white>Retry Scan'),m1=R('<div class="text-center py-8"style=color:var(--text-secondary)><svg class="w-12 h-12 mx-auto mb-4 text-green-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><p class=mb-2>No vulnerabilities found matching the selected criteria.</p><p class=text-xs style=color:var(--text-muted)>Click "Scan Cluster" to scan for vulnerabilities.'),_1=R('<div class="flex items-center justify-between mt-6 pt-4 border-t"style=border-color:var(--border-color)><div class=text-sm style=color:var(--text-secondary)>Showing <!>-<!> of <!> vulnerabilities</div><div class="flex items-center gap-2"><button class="px-3 py-1.5 rounded text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed">Previous</button><div class="flex items-center gap-1"></div><button class="px-3 py-1.5 rounded text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed">Next'),b1=R('<div class="mt-4 text-xs text-center"style=color:var(--text-muted)>Last NVD refresh: '),y1=R('<div class="card p-6 mt-6"><div class="flex items-center justify-between mb-4"><h3 class="font-semibold flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>CVE Vulnerabilities (NIST NVD)</h3><div class="flex items-center gap-2"><select class="px-3 py-1.5 rounded text-sm"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><option value>All Severities</option><option value=CRITICAL>Critical</option><option value=HIGH>High</option><option value=MEDIUM>Medium</option><option value=LOW>Low</option></select><button class="px-3 py-1.5 rounded text-sm transition-colors"title="Refresh NVD data"style=background:var(--bg-tertiary);color:var(--text-primary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button><button class="px-3 py-1.5 rounded text-sm transition-colors"style=background:var(--accent-primary);color:white>Scan Cluster'),x1=R('<div class="card p-6 mt-6"><div class="text-center py-8"style=color:var(--text-muted)><svg class="w-12 h-12 mx-auto mb-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><p class="text-lg mb-2">CVE Vulnerabilities are disabled</p><p class=text-sm>Enable CVE Vulnerabilities (NIST NVD) in Settings to scan for vulnerabilities'),$1=R('<div class=space-y-6><div class="flex items-center justify-between"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Security & Diagnostics</h1><p style=color:var(--text-secondary)>Cluster health checks, security posture, vulnerability scanning, and best practices analysis</p></div><div class="flex items-center gap-2"><button class="flex items-center gap-2 px-4 py-2 rounded-lg transition-colors"title="Export diagnostic report"style=background:var(--bg-tertiary);color:var(--text-primary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>Export Report</button><button class="flex items-center gap-2 px-4 py-2 rounded-lg transition-colors"style=background:var(--accent-primary);color:white><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>Run Diagnostics</button></div></div><div class="grid grid-cols-1 md:grid-cols-4 gap-6"><div class="card p-6"><div class=text-center><div class="text-5xl font-bold mb-2"></div><div style=color:var(--text-secondary)>Health Score</div><div class="mt-4 h-2 rounded-full overflow-hidden"style=background:var(--bg-tertiary)><div class="h-full rounded-full transition-all"></div></div></div></div><div class="card p-6"><div class=text-center><div class="text-3xl font-bold"style=color:var(--error-color)></div><div class=text-sm style=color:var(--text-secondary)>Critical Issues</div></div></div><div class="card p-6"><div class=text-center><div class="text-3xl font-bold"style=color:var(--warning-color)></div><div class=text-sm style=color:var(--text-secondary)>Warnings</div></div></div><div class="card p-6"><div class=text-center><div class="text-3xl font-bold"style=color:var(--accent-primary)></div><div class=text-sm style=color:var(--text-secondary)>Info</div></div></div></div><div class="flex gap-2 flex-wrap items-center"><button class="px-3 py-1.5 rounded-lg text-sm transition-colors">All Categories</button><div class=flex-1></div></div><div class="card p-6 mt-6"><h3 class="font-semibold mb-4 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg>Security Best Practices</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="p-4 rounded-lg"style=background:var(--bg-tertiary)><h4 class="font-medium mb-2"style=color:var(--text-primary)>Pod Security</h4><ul class="space-y-1 text-sm"style=color:var(--text-secondary)><li>- Run containers as non-root user</li><li>- Use read-only root filesystem</li><li>- Drop all capabilities and add only needed ones</li><li>- Use Pod Security Standards</li></ul></div><div class="p-4 rounded-lg"style=background:var(--bg-tertiary)><h4 class="font-medium mb-2"style=color:var(--text-primary)>Network Security</h4><ul class="space-y-1 text-sm"style=color:var(--text-secondary)><li>- Implement NetworkPolicies</li><li>- Use TLS for all communications</li><li>- Restrict egress traffic</li><li>- Use service mesh for mTLS</li></ul></div><div class="p-4 rounded-lg"style=background:var(--bg-tertiary)><h4 class="font-medium mb-2"style=color:var(--text-primary)>Access Control</h4><ul class="space-y-1 text-sm"style=color:var(--text-secondary)><li>- Use RBAC with least privilege</li><li>- Avoid cluster-admin bindings</li><li>- Use dedicated service accounts</li><li>- Enable audit logging</li></ul></div><div class="p-4 rounded-lg"style=background:var(--bg-tertiary)><h4 class="font-medium mb-2"style=color:var(--text-primary)>Image Security</h4><ul class="space-y-1 text-sm"style=color:var(--text-secondary)><li>- Scan images for vulnerabilities</li><li>- Use trusted base images</li><li>- Sign and verify images</li><li>- Keep images up to date'),w1=R('<span class="ml-1 opacity-70">(<!>)'),S1=R('<button class="px-3 py-1.5 rounded-lg text-sm transition-colors">'),Jl=R('<div class="mt-2 text-xs flex items-start gap-1"style=color:var(--accent-primary)><svg class="w-3 h-3 mt-0.5 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>'),C1=R('<div class="p-4 rounded-lg border"><div class="flex items-start justify-between gap-4"><div class="flex items-start gap-3 flex-1"><div class=mt-0.5></div><div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-1"><span class=font-medium style=color:var(--text-primary)></span><span class="px-2 py-0.5 rounded text-xs"></span><span class="px-2 py-0.5 rounded text-xs"style=background:var(--bg-tertiary);color:var(--text-muted)></span></div><div class="text-sm mb-1"style=color:var(--text-secondary)></div><div class=text-xs style=color:var(--text-muted)><span class=font-mono>'),k1=R('<svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--error-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z">'),A1=R('<svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--warning-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z">'),M1=R('<svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z">'),E1=R("<span> in "),Xl=R("<button>"),L1=R('<div class="grid grid-cols-2 md:grid-cols-5 gap-4 mb-6"><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class="text-2xl font-bold"style=color:var(--text-primary)></div><div class=text-xs style=color:var(--text-secondary)>Total CVEs</div></div><div class="p-3 rounded-lg"style="background:rgba(239, 68, 68, 0.1)"><div class="text-2xl font-bold"style=color:var(--error-color)></div><div class=text-xs style=color:var(--text-secondary)>Critical</div></div><div class="p-3 rounded-lg"style="background:rgba(245, 158, 11, 0.1)"><div class="text-2xl font-bold"style=color:var(--warning-color)></div><div class=text-xs style=color:var(--text-secondary)>High</div></div><div class="p-3 rounded-lg"style="background:rgba(6, 182, 212, 0.1)"><div class="text-2xl font-bold"style=color:var(--accent-primary)></div><div class=text-xs style=color:var(--text-secondary)>Medium</div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class="text-2xl font-bold"style=color:var(--text-primary)></div><div class=text-xs style=color:var(--text-secondary)>CVE Cache'),R1=R('<div class="mt-2 flex flex-wrap gap-2">'),D1=R('<div class="p-4 rounded-lg border"><div class="flex items-start justify-between gap-4"><div class=flex-1><div class="flex items-center gap-2 mb-2"><span class="font-mono font-bold"style=color:var(--text-primary)></span><span class="px-2 py-0.5 rounded text-xs font-medium"style=color:white></span><span class=text-sm style=color:var(--text-secondary)>CVSS: </span></div><div class="text-sm mb-2"style=color:var(--text-secondary)></div><div class="text-xs mb-2"style=color:var(--text-muted)><span class=font-mono>'),T1=R("<span> in <!>/"),P1=R("<span> (<!>)"),I1=R('<a target=_blank rel="noopener noreferrer"class="text-xs px-2 py-1 rounded"style=background:var(--bg-tertiary);color:var(--accent-primary)>Reference');const B1=()=>{const[e,t]=J(""),[r,l]=J(""),[u,v]=J(1),[h,s]=J(1),[n,f]=J(""),g=10,p=()=>As().enableDiagnostics,_=()=>As().enableCVEVulnerabilities,b=()=>As().enableSecurityChecks,[C]=qe(Re.getDiagnosticsCategories),[x,{refetch:o}]=qe(()=>({ns:tt(),cat:e(),enabled:p()}),async T=>{if(!T.enabled)return{findings:[],summary:{total:0,critical:0,warning:0,info:0,byCategory:{}},total:0};v(1),f("Initializing diagnostics...");const I=T.ns==="_all"?void 0:T.ns,M=T.cat||void 0;try{f(M?`Running ${M} checks in parallel...`:"Running all diagnostic checks in parallel...");const P=await Re.runDiagnostics(I,M);return f(""),P}catch(P){throw f(""),P}}),[d,a]=J(0),[c,{refetch:m}]=qe(()=>{const T=r(),I=d();return I>0?{severity:T,key:I}:null},async T=>{try{console.log("[Security] Fetching vulnerabilities with params:",T);const I=Date.now(),M=await Re.scanVulnerabilities(T.severity||void 0),P=Date.now()-I;console.log(`[Security] Vulnerabilities fetched in ${P}ms:`,M?.vulnerabilities?.length||0,"vulnerabilities"),console.log("[Security] Result structure:",{hasVulnerabilities:!!M?.vulnerabilities,vulnArray:Array.isArray(M?.vulnerabilities),vulnLength:M?.vulnerabilities?.length,hasStats:!!M?.stats,hasLastRefresh:!!M?.lastRefresh,resultKeys:M?Object.keys(M):[]}),s(1);const L={vulnerabilities:Array.isArray(M?.vulnerabilities)?M.vulnerabilities:[],stats:M?.stats||{},lastRefresh:M?.lastRefresh||null};return console.log("[Security] Returning response:",{vulnCount:L.vulnerabilities.length,hasStats:!!L.stats,hasLastRefresh:!!L.lastRefresh}),L}catch(I){return console.error("[Security] Failed to scan vulnerabilities:",I),{vulnerabilities:[],stats:{},lastRefresh:null}}}),[$]=qe(Re.getVulnerabilityStats),S=ze(()=>{const T=x();if(!T||!Array.isArray(T.findings)||T.findings.length===0)return{list:[],totalPages:0,startIdx:0,endIdx:0,total:0};const I=T.findings,M=Math.ceil(I.length/g),L=(u()-1)*g,H=L+g;return{list:I.slice(L,H),totalPages:M,startIdx:L,endIdx:H,total:I.length}}),E=ze(()=>{const T=c();if(console.log("[Security] paginatedVulnerabilities memo - data:",{hasData:!!T,hasVulnerabilities:!!T?.vulnerabilities,isArray:Array.isArray(T?.vulnerabilities),length:T?.vulnerabilities?.length||0}),!T||!Array.isArray(T.vulnerabilities)||T.vulnerabilities.length===0)return console.log("[Security] paginatedVulnerabilities - returning empty"),{list:[],totalPages:0,startIdx:0,endIdx:0,total:0};const I=T.vulnerabilities,M=Math.ceil(I.length/g),L=(h()-1)*g,H=L+g,w={list:I.slice(L,H),totalPages:M,startIdx:L,endIdx:H,total:I.length};return console.log("[Security] paginatedVulnerabilities - result:",w),w});Xt(()=>{console.log("[Security] Component mounted, triggering initial scan"),a(1)}),Mt(()=>{const T=c(),I=E();console.log("[Security] Vulnerabilities resource state:",{loading:c.loading,error:c.error,hasData:!!T,vulnCount:T?.vulnerabilities?.length||0,scanKey:d(),selectedSeverity:r(),paginatedTotal:I.total,paginatedListLength:I.list.length,dataStructure:T?{hasVulnerabilities:!!T.vulnerabilities,vulnArrayLength:T.vulnerabilities?.length,isArray:Array.isArray(T.vulnerabilities),hasStats:!!T.stats,hasLastRefresh:!!T.lastRefresh}:null})});const y=T=>{switch(T){case"critical":return"var(--error-color)";case"warning":return"var(--warning-color)";case"info":return"var(--accent-primary)";default:return"var(--text-secondary)"}},k=T=>{switch(T){case"critical":return"rgba(239, 68, 68, 0.1)";case"warning":return"rgba(245, 158, 11, 0.1)";case"info":return"rgba(6, 182, 212, 0.1)";default:return"var(--bg-tertiary)"}},B=T=>{switch(T){case"critical":return"rgba(239, 68, 68, 0.3)";case"warning":return"rgba(245, 158, 11, 0.3)";case"info":return"rgba(6, 182, 212, 0.3)";default:return"var(--border-color)"}},O=()=>{const T=x()?.summary;if(!T||T.total===0)return 100;const I=T.critical*25,M=T.warning*8,P=T.info*1,L=Math.max(0,100-I-M-P);return Math.round(L)};return(()=>{var T=$1(),I=T.firstChild,M=I.firstChild,P=M.firstChild;P.nextSibling;var L=M.nextSibling,H=L.firstChild,w=H.nextSibling,N=I.nextSibling,z=N.firstChild,V=z.firstChild,Q=V.firstChild,F=Q.nextSibling,U=F.nextSibling,W=U.firstChild,ce=z.nextSibling,D=ce.firstChild,j=D.firstChild;j.nextSibling;var K=ce.nextSibling,ee=K.firstChild,ne=ee.firstChild;ne.nextSibling;var te=K.nextSibling,le=te.firstChild,Z=le.firstChild;Z.nextSibling;var Y=N.nextSibling,se=Y.firstChild,G=se.nextSibling,ie=Y.nextSibling,X=ie.firstChild,fe=X.nextSibling,Ae=fe.firstChild,Ce=Ae.firstChild;Ce.nextSibling;var $e=Ae.nextSibling,ye=$e.firstChild;ye.nextSibling;var he=$e.nextSibling,ae=he.firstChild;ae.nextSibling;var ue=he.nextSibling,Se=ue.firstChild;return Se.nextSibling,H.$$click=()=>{const _e=x();if(_e){const de={timestamp:new Date().toISOString(),summary:_e.summary,findings:_e.findings},be=new Blob([JSON.stringify(de,null,2)],{type:"application/json"}),ve=URL.createObjectURL(be),ge=document.createElement("a");ge.href=ve,ge.download=`kubegraf-diagnostics-${new Date().toISOString().split("T")[0]}.json`,ge.click(),URL.revokeObjectURL(ve)}},w.$$click=()=>o(),i(Q,O),i(j,()=>x()?.summary?.critical||0),i(ne,()=>x()?.summary?.warning||0),i(Z,()=>x()?.summary?.info||0),se.$$click=()=>t(""),i(Y,A(Ne,{get each(){return C()||[]},children:_e=>(()=>{var de=S1();return de.$$click=()=>t(_e.id),i(de,()=>_e.name,null),i(de,A(q,{get when(){return x()?.summary?.byCategory?.[_e.id]},get children(){var be=w1(),ve=be.firstChild,ge=ve.nextSibling;return ge.nextSibling,i(be,()=>x()?.summary?.byCategory?.[_e.id],ge),be}}),null),re(be=>{var ve=e()===_e.id?"var(--accent-primary)":"var(--bg-tertiary)",ge=e()===_e.id?"white":"var(--text-secondary)";return ve!==be.e&&oe(de,"background",be.e=ve),ge!==be.t&&oe(de,"color",be.t=ge),be},{e:void 0,t:void 0}),de})()}),G),i(Y,A(q,{get when(){return Me(()=>!!x())()&&(x()?.findings||[]).some(_e=>_e.rule==="REL005")},get children(){var _e=o1(),de=_e.firstChild,be=de.nextSibling,ve=be.nextSibling;return _e.$$click=()=>{const me=(x()?.findings||[]).filter(pe=>pe.rule==="REL005");e()==="reliability"&&me.length>0?document.querySelector('[data-rule="REL005"]')?.scrollIntoView({behavior:"smooth",block:"center"}):(t("reliability"),setTimeout(()=>{document.querySelector('[data-rule="REL005"]')?.scrollIntoView({behavior:"smooth",block:"center"})},300))},i(ve,()=>(x()?.findings||[]).filter(ge=>ge.rule==="REL005").length),_e}}),null),i(T,A(q,{get when(){return p()},get children(){var _e=h1(),de=_e.firstChild,be=de.firstChild,ve=be.nextSibling,ge=ve.nextSibling;return ge.nextSibling,i(de,()=>x()?.total||0,ge),i(_e,A(q,{get when(){return x.loading},get children(){var me=a1(),pe=me.firstChild,xe=pe.nextSibling;return xe.nextSibling,i(xe,()=>n()||"Running diagnostics in parallel..."),me}}),null),i(_e,A(q,{get when(){return Me(()=>!x.loading)()&&(x()?.findings?.length||0)===0},get children(){return c1()}}),null),i(_e,A(q,{get when(){return Me(()=>!x.loading)()&&S().total>0},get children(){return[(()=>{var me=Gl();return i(me,A(Ne,{get each(){return S().list},children:pe=>(()=>{var xe=C1(),we=xe.firstChild,ke=we.firstChild,Oe=ke.firstChild,Pe=Oe.nextSibling,Ie=Pe.firstChild,De=Ie.firstChild,je=De.nextSibling,Ue=je.nextSibling,Ke=Ie.nextSibling,Te=Ke.nextSibling,Ge=Te.firstChild;return i(Oe,(()=>{var Be=Me(()=>pe.severity==="critical");return()=>Be()?k1():Me(()=>pe.severity==="warning")()?A1():M1()})()),i(De,()=>pe.rule),i(je,()=>pe.severity),i(Ue,()=>pe.category),i(Ke,()=>pe.message),i(Ge,()=>pe.resource),i(Te,(()=>{var Be=Me(()=>!!pe.namespace);return()=>Be()&&(()=>{var We=E1();return We.firstChild,i(We,()=>pe.namespace,null),We})()})(),null),i(Pe,A(q,{get when(){return pe.remediation},get children(){var Be=Jl(),We=Be.firstChild,Ye=We.nextSibling;return i(Ye,()=>pe.remediation),Be}}),null),re(Be=>{var We=pe.rule,Ye=k(pe.severity),Ze=B(pe.severity),rt=k(pe.severity),ot=y(pe.severity),Ct=`1px solid ${B(pe.severity)}`;return We!==Be.e&&Xe(xe,"data-rule",Be.e=We),Ye!==Be.t&&oe(xe,"background",Be.t=Ye),Ze!==Be.a&&oe(xe,"border-color",Be.a=Ze),rt!==Be.o&&oe(je,"background",Be.o=rt),ot!==Be.i&&oe(je,"color",Be.i=ot),Ct!==Be.n&&oe(je,"border",Be.n=Ct),Be},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),xe})()})),me})(),(()=>{var me=d1(),pe=me.firstChild,xe=pe.firstChild,we=xe.nextSibling,ke=we.nextSibling,Oe=ke.nextSibling,Pe=Oe.nextSibling,Ie=Pe.nextSibling;Ie.nextSibling;var De=pe.nextSibling,je=De.firstChild,Ue=je.nextSibling,Ke=Ue.nextSibling;return i(pe,()=>S().startIdx+1,we),i(pe,()=>Math.min(S().endIdx,S().total),Oe),i(pe,()=>S().total,Ie),je.$$click=()=>v(Math.max(1,u()-1)),i(Ue,()=>Array.from({length:Math.min(5,S().totalPages)},(Te,Ge)=>{const Be=S().totalPages,We=u();let Ye;return Be<=5||We<=3?Ye=Ge+1:We>=Be-2?Ye=Be-4+Ge:Ye=We-2+Ge,(()=>{var Ze=Xl();return Ze.$$click=()=>v(Ye),He(Ze,`px-3 py-1.5 rounded text-sm transition-colors ${Ye===We?"font-bold":""}`),oe(Ze,"background",Ye===We?"var(--accent-primary)":"var(--bg-tertiary)"),oe(Ze,"color",Ye===We?"white":"var(--text-primary)"),i(Ze,Ye),Ze})()})),Ke.$$click=()=>v(Math.min(S().totalPages,u()+1)),re(Te=>{var Ge=u()===1,Be=u()===1?"var(--bg-tertiary)":"var(--accent-primary)",We=u()===1?"var(--text-muted)":"white",Ye=u()===S().totalPages,Ze=u()===S().totalPages?"var(--bg-tertiary)":"var(--accent-primary)",rt=u()===S().totalPages?"var(--text-muted)":"white";return Ge!==Te.e&&(je.disabled=Te.e=Ge),Be!==Te.t&&oe(je,"background",Te.t=Be),We!==Te.a&&oe(je,"color",Te.a=We),Ye!==Te.o&&(Ke.disabled=Te.o=Ye),Ze!==Te.i&&oe(Ke,"background",Te.i=Ze),rt!==Te.n&&oe(Ke,"color",Te.n=rt),Te},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),me})()]}}),null),_e}}),ie),i(T,A(q,{get when(){return!p()},get children(){var _e=u1();return _e.firstChild,_e}}),ie),i(T,A(q,{get when(){return b()},get children(){var _e=f1(),de=_e.firstChild,be=de.nextSibling,ve=be.firstChild,ge=ve.firstChild,me=ge.firstChild,pe=me.nextSibling,xe=pe.firstChild,we=xe.nextSibling;we.nextSibling;var ke=ve.nextSibling,Oe=ke.firstChild,Pe=Oe.firstChild,Ie=Pe.nextSibling,De=Ie.firstChild,je=De.nextSibling;je.nextSibling;var Ue=ke.nextSibling,Ke=Ue.firstChild,Te=Ke.firstChild,Ge=Te.nextSibling,Be=Ge.firstChild,We=Be.nextSibling;We.nextSibling;var Ye=Ue.nextSibling,Ze=Ye.firstChild;return Ze.nextSibling,_e}}),ie),i(T,A(q,{get when(){return _()},get children(){var _e=y1(),de=_e.firstChild,be=de.firstChild,ve=be.nextSibling,ge=ve.firstChild,me=ge.nextSibling,pe=me.nextSibling;return ge.addEventListener("change",xe=>l(xe.currentTarget.value)),me.$$click=()=>Re.refreshVulnerabilities().then(()=>m()),pe.$$click=async()=>{console.log("[Security] Scan Cluster button clicked"),l(""),a(xe=>xe+1),setTimeout(()=>{console.log("[Security] Manually refetching vulnerabilities"),m()},50)},i(_e,A(q,{get when(){return $.loading},get fallback(){return A(q,{get when(){return $()},children:xe=>(()=>{var we=L1(),ke=we.firstChild,Oe=ke.firstChild;Oe.nextSibling;var Pe=ke.nextSibling,Ie=Pe.firstChild;Ie.nextSibling;var De=Pe.nextSibling,je=De.firstChild;je.nextSibling;var Ue=De.nextSibling,Ke=Ue.firstChild;Ke.nextSibling;var Te=Ue.nextSibling,Ge=Te.firstChild;return Ge.nextSibling,i(Oe,()=>xe().total||0),i(Ie,()=>xe().critical||0),i(je,()=>xe().high||0),i(Ke,()=>xe().medium||0),i(Ge,()=>xe().cveCount||0),we})()})},get children(){return g1()}}),null),i(_e,A(q,{get when(){return c.loading},get children(){var xe=p1(),we=xe.firstChild,ke=we.nextSibling;return ke.nextSibling,xe}}),null),i(_e,A(q,{get when(){return c.error},get children(){var xe=v1(),we=xe.firstChild,ke=we.nextSibling,Oe=ke.nextSibling;return i(ke,()=>String(c.error)),Oe.$$click=()=>{a(Pe=>Pe+1),setTimeout(()=>m(),50)},xe}}),null),i(_e,()=>{const xe=c(),we=E();return console.log("[Security] Render check - vulnerabilities:",{loading:c.loading,error:c.error,hasData:!!xe,vulnCount:xe?.vulnerabilities?.length||0,paginatedTotal:we.total,shouldShowList:!c.loading&&!c.error&&we.total>0}),null},null),i(_e,A(q,{get when(){return Me(()=>!!(!c.loading&&!c.error&&c()))()&&(c()?.vulnerabilities||[]).length===0},get children(){var xe=m1(),we=xe.firstChild,ke=we.nextSibling;return ke.nextSibling,xe}}),null),i(_e,A(q,{get when(){return Me(()=>!c.loading&&!c.error)()&&E().total>0},get children(){return[(()=>{var xe=Gl();return i(xe,A(Ne,{get each(){return E().list},children:we=>(()=>{var ke=D1(),Oe=ke.firstChild,Pe=Oe.firstChild,Ie=Pe.firstChild,De=Ie.firstChild,je=De.nextSibling,Ue=je.nextSibling;Ue.firstChild;var Ke=Ie.nextSibling,Te=Ke.nextSibling,Ge=Te.firstChild;return i(De,()=>we.cveId),i(je,()=>we.severity),i(Ue,()=>we.cvssScore?.toFixed(1)||"N/A",null),i(Ke,()=>we.description),i(Ge,()=>we.affectedImage),i(Te,(()=>{var Be=Me(()=>!!we.namespace);return()=>Be()&&(()=>{var We=T1(),Ye=We.firstChild,Ze=Ye.nextSibling;return Ze.nextSibling,i(We,()=>we.namespace,Ze),i(We,()=>we.podName,null),We})()})(),null),i(Te,(()=>{var Be=Me(()=>!!we.containerName);return()=>Be()&&(()=>{var We=P1(),Ye=We.firstChild,Ze=Ye.nextSibling;return Ze.nextSibling,i(We,()=>we.containerName,Ze),We})()})(),null),i(Pe,A(q,{get when(){return we.remediation},get children(){var Be=Jl(),We=Be.firstChild,Ye=We.nextSibling;return i(Ye,()=>we.remediation),Be}}),null),i(Pe,A(q,{get when(){return Me(()=>!!we.references)()&&we.references.length>0},get children(){var Be=R1();return i(Be,A(Ne,{get each(){return we.references.slice(0,3)},children:We=>(()=>{var Ye=I1();return Xe(Ye,"href",We),Ye})()})),Be}}),null),re(Be=>{var We=we.severity==="CRITICAL"?"rgba(239, 68, 68, 0.1)":we.severity==="HIGH"?"rgba(245, 158, 11, 0.1)":"rgba(6, 182, 212, 0.1)",Ye=we.severity==="CRITICAL"?"rgba(239, 68, 68, 0.3)":we.severity==="HIGH"?"rgba(245, 158, 11, 0.3)":"rgba(6, 182, 212, 0.3)",Ze=we.severity==="CRITICAL"?"var(--error-color)":we.severity==="HIGH"?"var(--warning-color)":"var(--accent-primary)";return We!==Be.e&&oe(ke,"background",Be.e=We),Ye!==Be.t&&oe(ke,"border-color",Be.t=Ye),Ze!==Be.a&&oe(je,"background",Be.a=Ze),Be},{e:void 0,t:void 0,a:void 0}),ke})()})),xe})(),(()=>{var xe=_1(),we=xe.firstChild,ke=we.firstChild,Oe=ke.nextSibling,Pe=Oe.nextSibling,Ie=Pe.nextSibling,De=Ie.nextSibling,je=De.nextSibling;je.nextSibling;var Ue=we.nextSibling,Ke=Ue.firstChild,Te=Ke.nextSibling,Ge=Te.nextSibling;return i(we,()=>E().startIdx+1,Oe),i(we,()=>Math.min(E().endIdx,E().total),Ie),i(we,()=>E().total,je),Ke.$$click=()=>s(Math.max(1,h()-1)),i(Te,()=>Array.from({length:Math.min(5,E().totalPages)},(Be,We)=>{const Ye=E().totalPages,Ze=h();let rt;return Ye<=5||Ze<=3?rt=We+1:Ze>=Ye-2?rt=Ye-4+We:rt=Ze-2+We,(()=>{var ot=Xl();return ot.$$click=()=>s(rt),He(ot,`px-3 py-1.5 rounded text-sm transition-colors ${rt===Ze?"font-bold":""}`),oe(ot,"background",rt===Ze?"var(--accent-primary)":"var(--bg-tertiary)"),oe(ot,"color",rt===Ze?"white":"var(--text-primary)"),i(ot,rt),ot})()})),Ge.$$click=()=>s(Math.min(E().totalPages,h()+1)),re(Be=>{var We=h()===1,Ye=h()===1?"var(--bg-tertiary)":"var(--accent-primary)",Ze=h()===1?"var(--text-muted)":"white",rt=h()===E().totalPages,ot=h()===E().totalPages?"var(--bg-tertiary)":"var(--accent-primary)",Ct=h()===E().totalPages?"var(--text-muted)":"white";return We!==Be.e&&(Ke.disabled=Be.e=We),Ye!==Be.t&&oe(Ke,"background",Be.t=Ye),Ze!==Be.a&&oe(Ke,"color",Be.a=Ze),rt!==Be.o&&(Ge.disabled=Be.o=rt),ot!==Be.i&&oe(Ge,"background",Be.i=ot),Ct!==Be.n&&oe(Ge,"color",Be.n=Ct),Be},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),xe})()]}}),null),i(_e,A(q,{get when(){return Me(()=>!!c())()&&c()?.lastRefresh},get children(){var xe=b1();return xe.firstChild,i(xe,()=>new Date(c()?.lastRefresh||"").toLocaleString(),null),xe}}),null),re(()=>ge.value=r()),_e}}),null),i(T,A(q,{get when(){return!_()},get children(){var _e=x1();return _e.firstChild,_e}}),null),re(_e=>{var de=O()>=80?"var(--success-color)":O()>=60?"var(--warning-color)":"var(--error-color)",be=`${O()}%`,ve=O()>=80?"var(--success-color)":O()>=60?"var(--warning-color)":"var(--error-color)",ge=e()===""?"var(--accent-primary)":"var(--bg-tertiary)",me=e()===""?"white":"var(--text-secondary)";return de!==_e.e&&oe(Q,"color",_e.e=de),be!==_e.t&&oe(W,"width",_e.t=be),ve!==_e.a&&oe(W,"background",_e.a=ve),ge!==_e.o&&oe(se,"background",_e.o=ge),me!==_e.i&&oe(se,"color",_e.i=me),_e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),T})()};Qe(["click"]);var O1=R('<svg viewBox="0 0 512 512"class="w-8 h-8"><path fill=#0F1689 d="M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256 256-114.6 256-256S397.4 0 256 0z"></path><g fill=#fff><circle cx=256 cy=256 r=50></circle><rect x=248 y=96 width=16 height=80 rx=8></rect><rect x=248 y=336 width=16 height=80 rx=8></rect><rect x=96 y=248 width=80 height=16 rx=8></rect><rect x=336 y=248 width=80 height=16 rx=8></rect><rect x=132 y=132 width=16 height=80 rx=8 transform="rotate(-45 140 172)"></rect><rect x=364 y=300 width=16 height=80 rx=8 transform="rotate(-45 372 340)"></rect><rect x=300 y=132 width=16 height=80 rx=8 transform="rotate(45 308 172)"></rect><rect x=132 y=300 width=16 height=80 rx=8 transform="rotate(45 140 340)">'),H1=R('<svg viewBox="0 0 128 128"class="w-8 h-8"><defs><linearGradient id=argoGrad x1=0% y1=0% x2=100% y2=100%><stop offset=0% style=stop-color:#EF7B4D></stop><stop offset=100% style=stop-color:#E96D3F></stop></linearGradient></defs><circle cx=64 cy=64 r=60 fill=url(#argoGrad)></circle><g fill=#fff><ellipse cx=64 cy=52 rx=28 ry=24></ellipse><circle cx=52 cy=48 r=6 fill=#E96D3F></circle><circle cx=76 cy=48 r=6 fill=#E96D3F></circle><circle cx=52 cy=48 r=3 fill=#1a1a1a></circle><circle cx=76 cy=48 r=3 fill=#1a1a1a></circle><path d="M44 76 Q34 90 28 100"stroke=#fff stroke-width=8 stroke-linecap=round fill=none></path><path d="M52 78 Q48 94 44 106"stroke=#fff stroke-width=8 stroke-linecap=round fill=none></path><path d="M64 80 Q64 96 64 108"stroke=#fff stroke-width=8 stroke-linecap=round fill=none></path><path d="M76 78 Q80 94 84 106"stroke=#fff stroke-width=8 stroke-linecap=round fill=none></path><path d="M84 76 Q94 90 100 100"stroke=#fff stroke-width=8 stroke-linecap=round fill=none>'),N1=R('<svg viewBox="0 0 128 128"class="w-8 h-8"><defs><linearGradient id=fluxGrad x1=0% y1=0% x2=100% y2=100%><stop offset=0% style=stop-color:#5468FF></stop><stop offset=100% style=stop-color:#316CE6></stop></linearGradient></defs><circle cx=64 cy=64 r=60 fill=url(#fluxGrad)></circle><g fill=none stroke=#fff stroke-width=8 stroke-linecap=round><path d="M24 44 Q44 28 64 44 Q84 60 104 44"></path><path d="M24 64 Q44 48 64 64 Q84 80 104 64"></path><path d="M24 84 Q44 68 64 84 Q84 100 104 84">'),z1=R('<svg viewBox="0 0 128 128"class="w-8 h-8"><defs><linearGradient id=kustomizeGrad x1=0% y1=0% x2=100% y2=100%><stop offset=0% style=stop-color:#326CE5></stop><stop offset=100% style=stop-color:#1D4ED8></stop></linearGradient></defs><circle cx=64 cy=64 r=60 fill=url(#kustomizeGrad)></circle><g fill=#fff><rect x=32 y=28 width=16 height=72 rx=2></rect><polygon points="48,64 80,28 96,28 56,72 96,100 80,100"></polygon></g><g fill=none stroke=#fff stroke-width=3><rect x=76 y=52 width=20 height=20 rx=2></rect><rect x=86 y=62 width=20 height=20 rx=2>'),F1=R('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">'),j1=R('<div class="text-2xl font-bold flex items-center justify-center"style=color:var(--accent-primary)><div class=spinner style=width:24px;height:24px>'),U1=R('<div class="text-2xl font-bold flex items-center justify-center"style=color:var(--accent-secondary)><div class=spinner style=width:24px;height:24px>'),V1=R('<div class="text-2xl font-bold flex items-center justify-center"style=color:#8b5cf6><div class=spinner style=width:24px;height:24px>'),W1=R('<div class="card p-6"><h3 class="font-semibold mb-4"style=color:var(--text-primary)>Quick Stats</h3><div class="grid grid-cols-2 md:grid-cols-4 gap-4"><div class="p-4 rounded-lg text-center"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-secondary)>Helm Releases</div></div><div class="p-4 rounded-lg text-center"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-secondary)>ArgoCD Apps</div></div><div class="p-4 rounded-lg text-center"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-secondary)>Flux Resources</div></div><div class="p-4 rounded-lg text-center"style=background:var(--bg-tertiary)><div class="text-2xl font-bold"style=color:var(--success-color)></div><div class=text-sm style=color:var(--text-secondary)>Active Plugins'),q1=R('<div class="flex items-center justify-between mb-4"><div class=text-sm style=color:var(--text-muted)> releases</div><button class="flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-colors"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>Refresh'),K1=R("<table class=data-table><thead><tr><th>Name</th><th>Namespace</th><th>Chart</th><th>Revision</th><th>Status</th><th>Updated</th><th>Actions</th></tr></thead><tbody>"),dn=R('<div class="card overflow-hidden">'),Y1=R('<div class="flex items-center justify-between mb-4"><div class=text-sm style=color:var(--text-muted)> applications</div><button class="flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-colors"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>Refresh'),G1=R("<table class=data-table><thead><tr><th>Name</th><th>Project</th><th>Sync Status</th><th>Health</th><th>Age</th><th>Actions</th></tr></thead><tbody>"),J1=R('<div class="flex items-center justify-between mb-4"><div class=text-sm style=color:var(--text-muted)> resources</div><button class="flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-colors"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>Refresh'),X1=R("<table class=data-table><thead><tr><th>Name</th><th>Kind</th><th>Namespace</th><th>Ready</th><th>Status</th></tr></thead><tbody>"),Zl=R("<div>"),Z1=R('<div class="border rounded-lg overflow-hidden"style=border-color:var(--border-color)><table class="data-table w-full"><thead><tr><th>Revision</th><th>Status</th><th>Updated</th><th>Description</th><th>Actions</th></tr></thead><tbody>'),Q1=R('<div class=space-y-4><div class="grid grid-cols-2 gap-4"><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Chart</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Current Revision</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Namespace</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Status</div><div><span class="badge badge-success"></span></div></div><div class="p-3 rounded-lg col-span-2"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Last Updated</div><div style=color:var(--text-primary)></div></div></div><div><h4 class="font-semibold mb-3 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>Release History'),e_=R('<div class=space-y-4><div class="flex gap-2"><button class="flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors"title="Apply changes from Git repository"style=background:var(--accent-primary);color:#fff><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg></button><button title="Fetch latest state from cluster"class="flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div><div class="grid grid-cols-2 gap-4"><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Project</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Namespace</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Sync Status</div><div><span></span></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Health</div><div><span></span></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Age</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Revision</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg col-span-2"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Repository</div><div class="text-sm break-all"style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Path</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Cluster</div><div class="text-sm break-all"style=color:var(--text-primary)>'),t_=R('<div class=space-y-6><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Plugins</h1><p style=color:var(--text-secondary)>GitOps and package management integrations</p></div><div class="flex gap-2 border-b"style=border-color:var(--border-color)>'),r_=R('<button class="px-4 py-2 -mb-px transition-colors">'),s_=R('<div class="card p-6"><div class="flex items-center gap-3 mb-4"><div class=flex-shrink-0></div><div><div class=font-semibold style=color:var(--text-primary)></div><div class=text-sm style=color:var(--text-muted)></div></div></div><p class="text-sm mb-4"style=color:var(--text-secondary)></p><div class="flex items-center justify-between"><span></span><button class=text-sm style=color:var(--accent-primary)>View â†’'),i_=R('<div class="text-2xl font-bold"style=color:var(--accent-primary)>'),n_=R('<div class="text-2xl font-bold"style=color:var(--accent-secondary)>'),l_=R('<div class="text-2xl font-bold"style=color:#8b5cf6>'),hn=R('<div class="p-8 text-center"><div class="spinner mx-auto">'),o_=R('<tr><td colspan=7 class="text-center py-8"style=color:var(--text-muted)>No Helm releases found'),a_=R('<tr class="cursor-pointer hover:bg-[var(--bg-tertiary)]"><td class=font-medium style=color:var(--accent-primary)></td><td></td><td></td><td></td><td><span></span></td><td></td><td><div class="flex gap-1"><button class=action-btn title="Details &amp; History"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></button><button class=action-btn title="Uninstall release"style=color:var(--error-color)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">'),c_=R('<div class="p-8 text-center"style=color:var(--text-muted)><svg class="w-12 h-12 mx-auto mb-4 opacity-50"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg><p>No ArgoCD applications found</p><p class="text-sm mt-2">ArgoCD may not be installed or configured'),d_=R('<tr class="cursor-pointer hover:bg-[var(--bg-tertiary)]"><td class=font-medium style=color:var(--accent-primary)></td><td></td><td><span></span></td><td><span></span></td><td></td><td class="flex gap-1"><button class=action-btn title="Sync - Apply changes from Git"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg></button><button class=action-btn title="Refresh - Fetch latest state"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button><button class=action-btn title=Details><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z">'),h_=R('<div class="p-8 text-center"style=color:var(--text-muted)><svg class="w-12 h-12 mx-auto mb-4 opacity-50"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg><p>No Flux resources found</p><p class="text-sm mt-2">Flux may not be installed or configured'),u_=R("<tr><td class=font-medium style=color:var(--accent-primary)></td><td></td><td></td><td><span></span></td><td>"),f_=R('<div class="p-4 text-center"><div class="spinner mx-auto">'),g_=R('<div class="p-4 text-center"style=color:var(--text-muted)>No history available'),p_=R('<span class="ml-2 badge badge-success">current'),v_=R('<button class="px-3 py-1.5 rounded transition-colors font-medium"style=background:var(--warning-color);color:#000>'),m_=R('<tr><td style=color:var(--accent-primary)></td><td><span></span></td><td style=color:var(--text-secondary)></td><td class="max-w-xs truncate"style=color:var(--text-muted)></td><td>');const __=()=>{const[e,t]=J("overview"),[r,l]=J(null),[u,v]=J(null),[h,s]=J(!1),[n,f]=J(!1),[g,p]=J([]),[_,b]=J(!1),[C,x]=J(!1),[o,d]=J(null),[a,{refetch:c,mutate:m}]=qe(()=>e()==="helm"||e()==="overview"?St():!1,async()=>Re.getHelmReleases()),[$,{refetch:S,mutate:E}]=qe(()=>e()==="argocd"||e()==="overview"?St():!1,async()=>Re.getArgoCDApps()),[y,{refetch:k,mutate:B}]=qe(()=>e()==="flux"||e()==="overview"?St():!1,async()=>Re.getFluxResources());Mt(()=>{St()&&(m(void 0),E(void 0),B(void 0))});const O=async(U,W)=>{b(!0);try{const ce=await Re.getHelmReleaseHistory(U,W);p(ce.history||[])}catch(ce){console.error("Failed to fetch release history:",ce),p([])}b(!1)},T=async U=>{const W=r();if(W){x(!0),d(null);try{await Re.rollbackHelmRelease(W.name,W.namespace,U),d({type:"success",text:`Rolled back to revision ${U}`}),O(W.name,W.namespace),c()}catch(ce){d({type:"error",text:ce.message||"Rollback failed"})}x(!1)}},I=async()=>{const U=u();if(U){x(!0),d(null);try{await Re.syncArgoCDApp(U.name,U.namespace),d({type:"success",text:"Sync triggered successfully"}),S()}catch(W){d({type:"error",text:W.message||"Sync failed"})}x(!1)}},M=async()=>{const U=u();if(U){x(!0),d(null);try{await Re.refreshArgoCDApp(U.name,U.namespace),d({type:"success",text:"Refresh triggered successfully"}),S()}catch(W){d({type:"error",text:W.message||"Refresh failed"})}x(!1)}},P=async U=>{if(confirm(`Are you sure you want to uninstall ${U.name} from ${U.namespace}?`))try{await Re.uninstallApp(U.name,U.namespace),c()}catch(W){alert(`Failed to uninstall ${U.name}: ${W.message||"Unknown error"}`)}},L=U=>{l(U),s(!0),d(null),O(U.name,U.namespace)},H=U=>{v(U),f(!0),d(null)},w=()=>O1(),N=()=>H1(),z=()=>N1(),V=()=>z1(),Q=[{name:"Helm",version:"v3",enabled:!0,description:"Package manager for Kubernetes",icon:A(w,{})},{name:"ArgoCD",version:"v2",enabled:!0,description:"GitOps continuous delivery",icon:A(N,{})},{name:"Flux",version:"v2",enabled:!0,description:"GitOps toolkit for Kubernetes",icon:A(z,{})},{name:"Kustomize",version:"v5",enabled:!0,description:"Kubernetes native configuration management",icon:A(V,{})}],F=[{id:"overview",label:"Overview"},{id:"helm",label:"Helm Releases"},{id:"argocd",label:"ArgoCD Apps"},{id:"flux",label:"Flux Resources"}];return(()=>{var U=t_(),W=U.firstChild,ce=W.firstChild;ce.nextSibling;var D=W.nextSibling;return i(D,A(Ne,{each:F,children:j=>(()=>{var K=r_();return K.$$click=()=>t(j.id),i(K,()=>j.label),re(ee=>{var ne=e()===j.id?"var(--accent-primary)":"var(--text-secondary)",te=e()===j.id?"2px solid var(--accent-primary)":"2px solid transparent";return ne!==ee.e&&oe(K,"color",ee.e=ne),te!==ee.t&&oe(K,"border-bottom",ee.t=te),ee},{e:void 0,t:void 0}),K})()})),i(U,A(q,{get when(){return e()==="overview"},get children(){return[(()=>{var j=F1();return i(j,A(Ne,{each:Q,children:K=>(()=>{var ee=s_(),ne=ee.firstChild,te=ne.firstChild,le=te.nextSibling,Z=le.firstChild,Y=Z.nextSibling,se=ne.nextSibling,G=se.nextSibling,ie=G.firstChild,X=ie.nextSibling;return i(te,()=>K.icon),i(Z,()=>K.name),i(Y,()=>K.version),i(se,()=>K.description),i(ie,()=>K.enabled?"Enabled":"Disabled"),X.$$click=()=>t(K.name.toLowerCase()),re(()=>He(ie,`badge ${K.enabled?"badge-success":"badge-warning"}`)),ee})()})),j})(),(()=>{var j=W1(),K=j.firstChild,ee=K.nextSibling,ne=ee.firstChild,te=ne.firstChild,le=ne.nextSibling,Z=le.firstChild,Y=le.nextSibling,se=Y.firstChild,G=Y.nextSibling,ie=G.firstChild;return ie.nextSibling,i(ne,A(q,{get when(){return a.loading},get fallback(){return(()=>{var X=i_();return i(X,(()=>{var fe=Me(()=>!!Array.isArray(a()));return()=>fe()?a().length:0})()),X})()},get children(){var X=j1();return X.firstChild,X}}),te),i(le,A(q,{get when(){return $.loading},get fallback(){return(()=>{var X=n_();return i(X,(()=>{var fe=Me(()=>!!Array.isArray($()));return()=>fe()?$().length:0})()),X})()},get children(){var X=U1();return X.firstChild,X}}),Z),i(Y,A(q,{get when(){return y.loading},get fallback(){return(()=>{var X=l_();return i(X,(()=>{var fe=Me(()=>!!Array.isArray(y()));return()=>fe()?y().length:0})()),X})()},get children(){var X=V1();return X.firstChild,X}}),se),i(ie,()=>Q.filter(X=>X.enabled).length),j})()]}}),null),i(U,A(q,{get when(){return e()==="helm"},get children(){return[(()=>{var j=q1(),K=j.firstChild,ee=K.firstChild,ne=K.nextSibling,te=ne.firstChild;return i(K,()=>a()?.length||0,ee),ne.$$click=()=>c(),re(le=>{var Z=a.loading,Y=a.loading?.5:1,se=`w-4 h-4 ${a.loading?"animate-spin":""}`;return Z!==le.e&&(ne.disabled=le.e=Z),Y!==le.t&&oe(ne,"opacity",le.t=Y),se!==le.a&&Xe(te,"class",le.a=se),le},{e:void 0,t:void 0,a:void 0}),j})(),(()=>{var j=dn();return i(j,A(q,{get when(){return!a.loading},get fallback(){return hn()},get children(){var K=K1(),ee=K.firstChild,ne=ee.nextSibling;return i(ne,A(Ne,{get each(){return a()||[]},get fallback(){return(()=>{var te=o_();return te.firstChild,te})()},children:te=>(()=>{var le=a_(),Z=le.firstChild,Y=Z.nextSibling,se=Y.nextSibling,G=se.nextSibling,ie=G.nextSibling,X=ie.firstChild,fe=ie.nextSibling,Ae=fe.nextSibling,Ce=Ae.firstChild,$e=Ce.firstChild,ye=$e.nextSibling;return le.$$click=()=>L(te),i(Z,()=>te.name),i(Y,()=>te.namespace),i(se,()=>te.chart),i(G,()=>te.revision),i(X,()=>te.status),i(fe,()=>te.updated),$e.$$click=he=>{he.stopPropagation(),L(te)},ye.$$click=he=>{he.stopPropagation(),P(te)},re(()=>He(X,`badge ${te.status==="deployed"?"badge-success":"badge-warning"}`)),le})()})),K}})),j})()]}}),null),i(U,A(q,{get when(){return e()==="argocd"},get children(){return[(()=>{var j=Y1(),K=j.firstChild,ee=K.firstChild,ne=K.nextSibling,te=ne.firstChild;return i(K,()=>$()?.length||0,ee),ne.$$click=()=>S(),re(le=>{var Z=$.loading,Y=$.loading?.5:1,se=`w-4 h-4 ${$.loading?"animate-spin":""}`;return Z!==le.e&&(ne.disabled=le.e=Z),Y!==le.t&&oe(ne,"opacity",le.t=Y),se!==le.a&&Xe(te,"class",le.a=se),le},{e:void 0,t:void 0,a:void 0}),j})(),(()=>{var j=dn();return i(j,A(q,{get when(){return!$.loading},get fallback(){return hn()},get children(){return A(q,{get when(){return($()||[]).length>0},get fallback(){return c_()},get children(){var K=G1(),ee=K.firstChild,ne=ee.nextSibling;return i(ne,A(Ne,{get each(){return $()||[]},children:te=>(()=>{var le=d_(),Z=le.firstChild,Y=Z.nextSibling,se=Y.nextSibling,G=se.firstChild,ie=se.nextSibling,X=ie.firstChild,fe=ie.nextSibling,Ae=fe.nextSibling,Ce=Ae.firstChild,$e=Ce.nextSibling,ye=$e.nextSibling;return le.$$click=()=>H(te),i(Z,()=>te.name),i(Y,()=>te.project),i(G,()=>te.syncStatus),i(X,()=>te.health),i(fe,()=>te.age),Ce.$$click=he=>{he.stopPropagation(),v(te),I()},$e.$$click=he=>{he.stopPropagation(),v(te),M()},ye.$$click=he=>{he.stopPropagation(),H(te)},re(he=>{var ae=`badge ${te.syncStatus==="Synced"?"badge-success":"badge-warning"}`,ue=`badge ${te.health==="Healthy"?"badge-success":"badge-error"}`;return ae!==he.e&&He(G,he.e=ae),ue!==he.t&&He(X,he.t=ue),he},{e:void 0,t:void 0}),le})()})),K}})}})),j})()]}}),null),i(U,A(q,{get when(){return e()==="flux"},get children(){return[(()=>{var j=J1(),K=j.firstChild,ee=K.firstChild,ne=K.nextSibling,te=ne.firstChild;return i(K,()=>y()?.length||0,ee),ne.$$click=()=>k(),re(le=>{var Z=y.loading,Y=y.loading?.5:1,se=`w-4 h-4 ${y.loading?"animate-spin":""}`;return Z!==le.e&&(ne.disabled=le.e=Z),Y!==le.t&&oe(ne,"opacity",le.t=Y),se!==le.a&&Xe(te,"class",le.a=se),le},{e:void 0,t:void 0,a:void 0}),j})(),(()=>{var j=dn();return i(j,A(q,{get when(){return!y.loading},get fallback(){return hn()},get children(){return A(q,{get when(){return(y()||[]).length>0},get fallback(){return h_()},get children(){var K=X1(),ee=K.firstChild,ne=ee.nextSibling;return i(ne,A(Ne,{get each(){return y()||[]},children:te=>(()=>{var le=u_(),Z=le.firstChild,Y=Z.nextSibling,se=Y.nextSibling,G=se.nextSibling,ie=G.firstChild,X=G.nextSibling;return i(Z,()=>te.name),i(Y,()=>te.kind),i(se,()=>te.namespace),i(ie,()=>te.ready?"True":"False"),i(X,()=>te.status),re(()=>He(ie,`badge ${te.ready?"badge-success":"badge-error"}`)),le})()})),K}})}})),j})()]}}),null),i(U,A(it,{get isOpen(){return h()},onClose:()=>s(!1),get title(){return`Helm Release: ${r()?.name}`},size:"lg",get children(){return A(q,{get when(){return r()},get children(){var j=Q1(),K=j.firstChild,ee=K.firstChild,ne=ee.firstChild,te=ne.nextSibling,le=ee.nextSibling,Z=le.firstChild,Y=Z.nextSibling,se=le.nextSibling,G=se.firstChild,ie=G.nextSibling,X=se.nextSibling,fe=X.firstChild,Ae=fe.nextSibling,Ce=Ae.firstChild,$e=X.nextSibling,ye=$e.firstChild,he=ye.nextSibling,ae=K.nextSibling;return ae.firstChild,i(j,A(q,{get when(){return o()},get children(){var ue=Zl();return i(ue,()=>o()?.text),re(()=>He(ue,`p-3 rounded-lg ${o()?.type==="success"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`)),ue}}),K),i(te,()=>r()?.chart),i(Y,()=>r()?.revision),i(ie,()=>r()?.namespace),i(Ce,()=>r()?.status),i(he,()=>r()?.updated),i(ae,A(q,{get when(){return!_()},get fallback(){return f_()},get children(){return A(q,{get when(){return g().length>0},get fallback(){return g_()},get children(){var ue=Z1(),Se=ue.firstChild,_e=Se.firstChild,de=_e.nextSibling;return i(de,A(Ne,{get each(){return g()},children:be=>(()=>{var ve=m_(),ge=ve.firstChild,me=ge.nextSibling,pe=me.firstChild,xe=me.nextSibling,we=xe.nextSibling,ke=we.nextSibling;return i(ge,()=>be.revision,null),i(ge,A(q,{get when(){return be.revision===r()?.revision},get children(){return p_()}}),null),i(pe,()=>be.status),i(xe,()=>be.updated),i(we,()=>be.description||"-"),i(ke,A(q,{get when(){return be.revision!==r()?.revision},get children(){var Oe=v_();return Oe.$$click=()=>T(be.revision),i(Oe,()=>C()?"Rolling back...":"Rollback"),re(Pe=>{var Ie=C(),De=C()?.5:1;return Ie!==Pe.e&&(Oe.disabled=Pe.e=Ie),De!==Pe.t&&oe(Oe,"opacity",Pe.t=De),Pe},{e:void 0,t:void 0}),Oe}})),re(()=>He(pe,`badge ${be.status==="deployed"?"badge-success":be.status==="superseded"?"badge-secondary":"badge-warning"}`)),ve})()})),ue}})}}),null),j}})}}),null),i(U,A(it,{get isOpen(){return n()},onClose:()=>f(!1),get title(){return`ArgoCD App: ${u()?.name}`},size:"lg",get children(){return A(q,{get when(){return u()},get children(){var j=e_(),K=j.firstChild,ee=K.firstChild;ee.firstChild;var ne=ee.nextSibling;ne.firstChild;var te=K.nextSibling,le=te.firstChild,Z=le.firstChild,Y=Z.nextSibling,se=le.nextSibling,G=se.firstChild,ie=G.nextSibling,X=se.nextSibling,fe=X.firstChild,Ae=fe.nextSibling,Ce=Ae.firstChild,$e=X.nextSibling,ye=$e.firstChild,he=ye.nextSibling,ae=he.firstChild,ue=$e.nextSibling,Se=ue.firstChild,_e=Se.nextSibling,de=ue.nextSibling,be=de.firstChild,ve=be.nextSibling,ge=de.nextSibling,me=ge.firstChild,pe=me.nextSibling,xe=ge.nextSibling,we=xe.firstChild,ke=we.nextSibling,Oe=xe.nextSibling,Pe=Oe.firstChild,Ie=Pe.nextSibling;return i(j,A(q,{get when(){return o()},get children(){var De=Zl();return i(De,()=>o()?.text),re(()=>He(De,`p-3 rounded-lg ${o()?.type==="success"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`)),De}}),K),ee.$$click=I,i(ee,()=>C()?"Syncing...":"Sync",null),ne.$$click=M,i(ne,()=>C()?"Refreshing...":"Refresh",null),i(Y,()=>u()?.project),i(ie,()=>u()?.namespace),i(Ce,()=>u()?.syncStatus),i(ae,()=>u()?.health),i(_e,()=>u()?.age),i(ve,()=>u()?.revision||"-"),i(pe,()=>u()?.repoURL||"-"),i(ke,()=>u()?.path||"-"),i(Ie,()=>u()?.cluster||"-"),re(De=>{var je=C(),Ue=C()?.5:1,Ke=C(),Te=C()?.5:1,Ge=`badge ${u()?.syncStatus==="Synced"?"badge-success":"badge-warning"}`,Be=`badge ${u()?.health==="Healthy"?"badge-success":"badge-error"}`;return je!==De.e&&(ee.disabled=De.e=je),Ue!==De.t&&oe(ee,"opacity",De.t=Ue),Ke!==De.a&&(ne.disabled=De.a=Ke),Te!==De.o&&oe(ne,"opacity",De.o=Te),Ge!==De.i&&He(Ce,De.i=Ge),Be!==De.n&&He(ae,De.n=Be),De},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),j}})}}),null),U})()};Qe(["click"]);var b_=R('<svg class="w-8 h-8"viewBox="0 0 48 48"><path fill=#4285F4 d="M24 4L6 14v20l18 10 18-10V14L24 4z"></path><path fill=#EA4335 d="M24 4L6 14l18 10 18-10L24 4z"></path><path fill=#34A853 d="M6 34l18 10V24L6 14v20z"></path><path fill=#FBBC05 d="M42 34V14L24 24v20l18-10z"></path><path fill=#fff d="M24 17l-7 4v8l7 4 7-4v-8l-7-4z"opacity=.3>'),y_=R('<svg class="w-8 h-8"viewBox="0 0 48 48"><path fill=#FF9900 d="M8 24c0-8.8 7.2-16 16-16s16 7.2 16 16-7.2 16-16 16S8 32.8 8 24z"></path><path fill=#252F3E d="M16 22c0-4.4 3.6-8 8-8s8 3.6 8 8-3.6 8-8 8-8-3.6-8-8z">'),x_=R('<svg class="w-8 h-8"viewBox="0 0 48 48"><path fill=#0089D6 d="M24 4L8 24l8 16h16l8-16L24 4z">'),$_=R('<svg class="w-8 h-8"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z">'),w_=R('<div class="text-center py-8"style=color:var(--text-muted)>No namespace cost data available'),S_=R('<span class="text-xs px-1.5 py-0.5 rounded"style="background:rgba(34, 197, 94, 0.2);color:var(--success-color)">~70% savings'),C_=R('<div class="mt-4 pt-3 border-t"style=border-color:var(--border-color)><div class="flex justify-between text-sm"><span style=color:var(--text-secondary)>On-Demand Nodes</span><span style=color:var(--text-primary)></span></div><div class="flex justify-between text-sm mt-1"><span style=color:var(--text-secondary)>Spot/Preemptible Nodes</span><span class="flex items-center gap-1"><span style=color:var(--success-color)>'),k_=R('<div class="grid grid-cols-1 lg:grid-cols-2 gap-6"><div class="card p-6"><h3 class="font-semibold mb-4"style=color:var(--text-primary)>Cost by Namespace</h3><div class=space-y-3></div></div><div class="card p-6"><h3 class="font-semibold mb-4"style=color:var(--text-primary)>Resource Allocation</h3><div class=space-y-4><div><div class="flex justify-between text-sm mb-2"><span style=color:var(--text-secondary)>CPU (<!>)</span><span style=color:var(--text-muted)>Cluster Total</span></div><div class="h-3 rounded-full overflow-hidden"style=background:var(--bg-tertiary)><div class="h-full rounded-full"style=width:100%;background:var(--accent-primary)></div></div></div><div><div class="flex justify-between text-sm mb-2"><span style=color:var(--text-secondary)>Memory (<!>)</span><span style=color:var(--text-muted)>Cluster Total</span></div><div class="h-3 rounded-full overflow-hidden"style=background:var(--bg-tertiary)><div class="h-full rounded-full"style=width:100%;background:var(--accent-secondary)></div></div></div><div><div class="flex justify-between text-sm mb-2"><span style=color:var(--text-secondary)>Nodes</span><span style=color:var(--text-muted)></span></div></div></div><div class="mt-6 pt-4 border-t"style=border-color:var(--border-color)><h4 class="text-sm font-medium mb-3"style=color:var(--text-primary)>Pricing Rates (<!>)</h4><div class="space-y-2 text-sm"><div class="flex justify-between"><span style=color:var(--text-secondary)>CPU (per core/hour)</span><span style=color:var(--text-primary)>$</span></div><div class="flex justify-between"><span style=color:var(--text-secondary)>Memory (per GB/hour)</span><span style=color:var(--text-primary)>$</span></div><div class="flex justify-between"><span style=color:var(--text-secondary)>Storage (per GB/month)</span><span style=color:var(--text-primary)>$</span></div></div><p class="text-xs mt-3"style=color:var(--text-muted)>'),A_=R('<div class="card overflow-hidden"><table class=data-table><thead><tr><th>Namespace</th><th>Pods</th><th>CPU</th><th>Memory</th><th>Hourly</th><th>Daily</th><th>Monthly</th></tr></thead><tbody>'),M_=R('<div class="card p-6 mb-6"><div class="flex items-center gap-3"><svg class="w-6 h-6"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--success-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h3 class=font-semibold style=color:var(--text-primary)>Optimization Opportunities</h3><p class=text-sm style=color:var(--text-secondary)>Resources using less than 10% of their requests could be scaled down to save costs'),E_=R('<div class="card overflow-hidden"><table class=data-table><thead><tr><th>Resource</th><th>Namespace</th><th>Kind</th><th>CPU Usage</th><th>Memory Usage</th><th>Wasted Cost/hr</th></tr></thead><tbody>'),L_=R('<div class=space-y-6><div class="flex items-center justify-between"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Cost Analysis</h1><p style=color:var(--text-secondary)></p></div><div class="flex items-center gap-3 px-4 py-2 rounded-lg"style=background:var(--bg-tertiary)><div><div class=font-medium style=color:var(--text-primary)></div><div class=text-xs style=color:var(--text-muted)></div></div></div></div><div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div class="card p-6"><div class=text-sm style=color:var(--text-muted)>Hourly Cost</div><div class="text-3xl font-bold mt-2"style=color:var(--accent-primary)></div><div class="text-xs mt-1"style=color:var(--text-secondary)> nodes</div></div><div class="card p-6"><div class=text-sm style=color:var(--text-muted)>Daily Cost</div><div class="text-3xl font-bold mt-2"style=color:var(--accent-secondary)></div><div class="text-xs mt-1"style=color:var(--text-secondary)> CPU</div></div><div class="card p-6"><div class=text-sm style=color:var(--text-muted)>Monthly Estimate</div><div class="text-3xl font-bold mt-2"style=color:#f59e0b></div><div class="text-xs mt-1"style=color:var(--text-secondary)> Memory</div></div><div class="card p-6"><div class=text-sm style=color:var(--text-muted)>Potential Savings</div><div class="text-3xl font-bold mt-2"style=color:var(--success-color)></div><div class="text-xs mt-1"style=color:var(--text-secondary)> idle resources</div></div></div><div class="flex gap-2 border-b"style=border-color:var(--border-color)>'),R_=R('<button class="px-4 py-2 -mb-px transition-colors">'),D_=R('<div class="flex items-center justify-between p-3 rounded-lg"style=background:var(--bg-tertiary)><div><div class=font-medium style=color:var(--text-primary)></div><div class=text-xs style=color:var(--text-muted)> pods â€¢ <!> CPU â€¢ <!> mem</div></div><div class=text-right><div class=font-bold style=color:var(--warning-color)>/mo</div><div class=text-xs style=color:var(--text-muted)>/day'),T_=R('<tr><td colspan=7 class="text-center py-8"style=color:var(--text-muted)>No namespace cost data available'),P_=R("<tr class=hover:bg-[var(--bg-tertiary)]><td class=font-medium style=color:var(--accent-primary)></td><td></td><td></td><td></td><td></td><td></td><td class=font-bold style=color:var(--warning-color)>"),I_=R('<tr><td colspan=6 class="text-center py-8"style=color:var(--text-muted)><svg class="w-12 h-12 mx-auto mb-4 text-green-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><p>No idle resources found</p><p class=text-sm>All resources are being utilized efficiently'),B_=R('<tr class=hover:bg-[var(--bg-tertiary)]><td class=font-medium style=color:var(--accent-primary)></td><td></td><td><span class="badge badge-info"></span></td><td><div class="flex items-center gap-2"><div class="w-16 h-2 rounded-full overflow-hidden"style=background:var(--bg-tertiary)><div class="h-full rounded-full"style=background:var(--warning-color)></div></div><span class=text-xs style=color:var(--text-muted)>%</span></div></td><td><div class="flex items-center gap-2"><div class="w-16 h-2 rounded-full overflow-hidden"style=background:var(--bg-tertiary)><div class="h-full rounded-full"style=background:var(--accent-secondary)></div></div><span class=text-xs style=color:var(--text-muted)>%</span></div></td><td class=font-bold style=color:var(--success-color)>');const O_=()=>{const[e,t]=J("overview"),[r,l]=J(null),[u,{refetch:v}]=qe(()=>{const o=St(),d=Gt();return{context:o,refresh:d}},async()=>{try{const o=await Re.getClusterCost();return console.log("Cost API response:",o),o}catch(o){return console.error("Cost API error:",o),null}}),[h,{refetch:s}]=qe(()=>{const o=St(),d=Gt();return{context:o,refresh:d}},async()=>Re.getStatus()),[n,{refetch:f}]=qe(()=>{const o=St(),d=Gt();return{context:o,refresh:d}},async()=>Re.getIdleResources()),[g,{refetch:p}]=qe(()=>{const o=St(),d=Gt();return{context:o,refresh:d}},async()=>Re.getNamespaces()),_=o=>o==null?"--":`$${o.toFixed(2)}`,b=o=>o==null?"--":o<1?`${(o*1e3).toFixed(0)}m`:`${o.toFixed(2)} cores`,C=o=>o==null?"--":o<1?`${(o*1024).toFixed(0)} Mi`:`${o.toFixed(2)} Gi`,x=[{id:"overview",label:"Overview"},{id:"namespaces",label:"By Namespace"},{id:"idle",label:"Idle Resources"}];return(()=>{var o=L_(),d=o.firstChild,a=d.firstChild,c=a.firstChild,m=c.nextSibling,$=a.nextSibling,S=$.firstChild,E=S.firstChild,y=E.nextSibling,k=d.nextSibling,B=k.firstChild,O=B.firstChild,T=O.nextSibling,I=T.nextSibling,M=I.firstChild,P=B.nextSibling,L=P.firstChild,H=L.nextSibling,w=H.nextSibling,N=w.firstChild,z=P.nextSibling,V=z.firstChild,Q=V.nextSibling,F=Q.nextSibling,U=F.firstChild,W=z.nextSibling,ce=W.firstChild,D=ce.nextSibling,j=D.nextSibling,K=j.firstChild,ee=k.nextSibling;return i(m,(()=>{var ne=Me(()=>!!h()?.cluster);return()=>ne()?`Cluster: ${h()?.cluster}`:"Cluster cost estimation and optimization opportunities"})()),i($,A(q,{get when(){return u()?.cloud?.provider==="gcp"},get children(){return b_()}}),S),i($,A(q,{get when(){return u()?.cloud?.provider==="aws"},get children(){return y_()}}),S),i($,A(q,{get when(){return u()?.cloud?.provider==="azure"},get children(){return x_()}}),S),i($,A(q,{get when(){return!u()?.cloud?.provider||u()?.cloud?.provider==="unknown"},get children(){return $_()}}),S),i(E,(()=>{var ne=Me(()=>!!u.loading);return()=>ne()?"Loading...":u()?.cloud?.displayName||"Unknown Cloud"})()),i(y,(()=>{var ne=Me(()=>!!u.loading);return()=>ne()?"...":u()?.cloud?.region||"Unknown region"})()),i(T,()=>_(u()?.hourlyCost)),i(I,()=>u()?.nodeCount||0,M),i(H,()=>_(u()?.dailyCost)),i(w,()=>b(u()?.totalCpu),N),i(Q,()=>_(u()?.monthlyCost)),i(F,()=>C(u()?.totalMemory),U),i(D,()=>_((n()?.idleResources||[]).reduce((ne,te)=>ne+(te.wastedCost||0),0)*720)),i(j,()=>(n()?.idleResources||[]).length,K),i(ee,A(Ne,{each:x,children:ne=>(()=>{var te=R_();return te.$$click=()=>t(ne.id),i(te,()=>ne.label),re(le=>{var Z=e()===ne.id?"var(--accent-primary)":"var(--text-secondary)",Y=e()===ne.id?"2px solid var(--accent-primary)":"2px solid transparent";return Z!==le.e&&oe(te,"color",le.e=Z),Y!==le.t&&oe(te,"border-bottom",le.t=Y),le},{e:void 0,t:void 0}),te})()})),i(o,A(q,{get when(){return e()==="overview"},get children(){var ne=k_(),te=ne.firstChild,le=te.firstChild,Z=le.nextSibling,Y=te.nextSibling,se=Y.firstChild,G=se.nextSibling,ie=G.firstChild,X=ie.firstChild,fe=X.firstChild,Ae=fe.firstChild,Ce=Ae.nextSibling;Ce.nextSibling,fe.nextSibling;var $e=X.nextSibling;$e.firstChild;var ye=ie.nextSibling,he=ye.firstChild,ae=he.firstChild,ue=ae.firstChild,Se=ue.nextSibling;Se.nextSibling,ae.nextSibling;var _e=he.nextSibling;_e.firstChild;var de=ye.nextSibling,be=de.firstChild,ve=be.firstChild,ge=ve.nextSibling,me=G.nextSibling,pe=me.firstChild,xe=pe.firstChild,we=xe.nextSibling;we.nextSibling;var ke=pe.nextSibling,Oe=ke.firstChild,Pe=Oe.firstChild,Ie=Pe.nextSibling;Ie.firstChild;var De=Oe.nextSibling,je=De.firstChild,Ue=je.nextSibling;Ue.firstChild;var Ke=De.nextSibling,Te=Ke.firstChild,Ge=Te.nextSibling;Ge.firstChild;var Be=ke.nextSibling;return i(Z,A(Ne,{get each(){return(u()?.namespaceCosts||[]).slice(0,8)},children:We=>(()=>{var Ye=D_(),Ze=Ye.firstChild,rt=Ze.firstChild,ot=rt.nextSibling,Ct=ot.firstChild,Nt=Ct.nextSibling,rr=Nt.nextSibling,gr=rr.nextSibling;gr.nextSibling;var Le=Ze.nextSibling,Ve=Le.firstChild,nt=Ve.firstChild,ct=Ve.nextSibling,dt=ct.firstChild;return i(rt,()=>We.namespace),i(ot,()=>We.podCount,Ct),i(ot,()=>b(We.totalCpu),Nt),i(ot,()=>C(We.totalMemory),gr),i(Ve,()=>_(We.monthlyCost),nt),i(ct,()=>_(We.dailyCost),dt),Ye})()}),null),i(Z,A(q,{get when(){return(u()?.namespaceCosts||[]).length===0},get children(){return w_()}}),null),i(fe,()=>b(u()?.totalCpu),Ce),i(ae,()=>C(u()?.totalMemory),Se),i(ge,()=>u()?.nodeCount||0),i(pe,()=>u()?.pricing?.provider||"Generic",we),i(pe,(()=>{var We=Me(()=>!!u()?.pricing?.region);return()=>We()?` - ${u()?.pricing?.region}`:""})(),we),i(Ie,()=>(u()?.pricing?.cpuPerCoreHour||.0336).toFixed(4),null),i(Ue,()=>(u()?.pricing?.memoryPerGBHour||.0045).toFixed(4),null),i(Ge,()=>(u()?.pricing?.storagePerGBMonth||.1).toFixed(2),null),i(me,A(q,{get when(){return u()?.pricing?.spotNodesCount!==void 0},get children(){var We=C_(),Ye=We.firstChild,Ze=Ye.firstChild,rt=Ze.nextSibling,ot=Ye.nextSibling,Ct=ot.firstChild,Nt=Ct.nextSibling,rr=Nt.firstChild;return i(rt,()=>u()?.pricing?.onDemandNodesCount||0),i(rr,()=>u()?.pricing?.spotNodesCount||0),i(Nt,A(q,{get when(){return(u()?.pricing?.spotNodesCount||0)>0},get children(){return S_()}}),null),We}}),Be),i(Be,A(q,{get when(){return u()?.cloud?.provider==="gcp"},fallback:"Rates auto-detected from cluster. Actual costs may vary.",get children(){return["GCP ",Me(()=>u()?.cloud?.region)," region pricing applied automatically."]}})),ne}}),null),i(o,A(q,{get when(){return e()==="namespaces"},get children(){var ne=A_(),te=ne.firstChild,le=te.firstChild,Z=le.nextSibling;return i(Z,A(Ne,{get each(){return u()?.namespaceCosts||[]},get fallback(){return(()=>{var Y=T_();return Y.firstChild,Y})()},children:Y=>(()=>{var se=P_(),G=se.firstChild,ie=G.nextSibling,X=ie.nextSibling,fe=X.nextSibling,Ae=fe.nextSibling,Ce=Ae.nextSibling,$e=Ce.nextSibling;return i(G,()=>Y.namespace),i(ie,()=>Y.podCount),i(X,()=>b(Y.totalCpu)),i(fe,()=>C(Y.totalMemory)),i(Ae,()=>_(Y.hourlyCost)),i(Ce,()=>_(Y.dailyCost)),i($e,()=>_(Y.monthlyCost)),se})()})),ne}}),null),i(o,A(q,{get when(){return e()==="idle"},get children(){return[(()=>{var ne=M_(),te=ne.firstChild,le=te.firstChild,Z=le.nextSibling,Y=Z.firstChild;return Y.nextSibling,ne})(),(()=>{var ne=E_(),te=ne.firstChild,le=te.firstChild,Z=le.nextSibling;return i(Z,A(Ne,{get each(){return n()?.idleResources||[]},get fallback(){return(()=>{var Y=I_();return Y.firstChild,Y})()},children:Y=>(()=>{var se=B_(),G=se.firstChild,ie=G.nextSibling,X=ie.nextSibling,fe=X.firstChild,Ae=X.nextSibling,Ce=Ae.firstChild,$e=Ce.firstChild,ye=$e.firstChild,he=$e.nextSibling,ae=he.firstChild,ue=Ae.nextSibling,Se=ue.firstChild,_e=Se.firstChild,de=_e.firstChild,be=_e.nextSibling,ve=be.firstChild,ge=ue.nextSibling;return i(G,()=>Y.name),i(ie,()=>Y.namespace),i(fe,()=>Y.kind),i(he,()=>(Y.cpuUsage/Y.cpuRequest*100).toFixed(1),ae),i(be,()=>(Y.memoryUsage/Y.memoryRequest*100).toFixed(1),ve),i(ge,()=>_(Y.wastedCost)),re(me=>{var pe=`${Math.min(100,Y.cpuUsage/Y.cpuRequest*100)}%`,xe=`${Math.min(100,Y.memoryUsage/Y.memoryRequest*100)}%`;return pe!==me.e&&oe(ye,"width",me.e=pe),xe!==me.t&&oe(de,"width",me.t=xe),me},{e:void 0,t:void 0}),se})()})),ne})()]}}),null),o})()};Qe(["click"]);var H_=R('<div class="card p-8"><div class=text-center><div class="spinner mx-auto mb-4"></div><p style=color:var(--text-muted)>Checking for configuration drift...'),N_=R('<div class="card p-8"><div class=text-center><svg class="w-16 h-16 mx-auto mb-4"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--success-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><h3 class="text-lg font-semibold"style=color:var(--text-primary)>No Configuration Drift Detected</h3><p style=color:var(--text-secondary)>All resources are in sync with their expected state'),z_=R('<div class="card overflow-hidden"><div class="p-4 border-b"style=border-color:var(--border-color)><h3 class="font-semibold flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--error-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>Drifted Resources (<!>)</h3></div><table class=data-table><thead><tr><th>Resource</th><th>Kind</th><th>Namespace</th><th>Changes</th><th>Last Checked</th><th>Actions</th></tr></thead><tbody>'),F_=R("<div class=space-y-3>"),j_=R('<div class=space-y-4><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Namespace</div><div style=color:var(--text-primary)></div></div><h4 class=font-medium style=color:var(--text-primary)>Changes Detected</h4><div class="flex justify-end gap-2 mt-4"><button class="px-4 py-2 rounded-lg"style=background:var(--bg-tertiary);color:var(--text-primary)>Close</button><button class="px-4 py-2 rounded-lg"style=background:var(--success-color);color:white>Revert to Expected'),U_=R('<div class=space-y-6><div class="flex items-center justify-between"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Configuration Drift</h1><p style=color:var(--text-secondary)>Detect and remediate configuration drift from desired state</p></div><button class="flex items-center gap-2 px-4 py-2 rounded-lg transition-colors"style=background:var(--bg-tertiary);color:var(--text-primary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>Check Drift</button></div><div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div class="card p-6"><div class=text-sm style=color:var(--text-muted)>Resources Checked</div><div class="text-3xl font-bold mt-2"style=color:var(--accent-primary)></div></div><div class="card p-6"><div class=text-sm style=color:var(--text-muted)>In Sync</div><div class="text-3xl font-bold mt-2"style=color:var(--success-color)></div></div><div class="card p-6"><div class=text-sm style=color:var(--text-muted)>Drifted</div><div class="text-3xl font-bold mt-2"></div></div><div class="card p-6"><div class=text-sm style=color:var(--text-muted)>Health</div><div class="text-3xl font-bold mt-2">%</div></div></div><div class="card p-6"><h3 class="font-semibold mb-4 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>About Configuration Drift</h3><div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="p-4 rounded-lg"style=background:var(--bg-tertiary)><h4 class="font-medium mb-2"style=color:var(--text-primary)>What is Drift?</h4><p class=text-sm style=color:var(--text-secondary)>Configuration drift occurs when the actual state of a resource differs from its expected or desired state, often due to manual changes.</p></div><div class="p-4 rounded-lg"style=background:var(--bg-tertiary)><h4 class="font-medium mb-2"style=color:var(--text-primary)>Detection Method</h4><p class=text-sm style=color:var(--text-secondary)>We compare resource specifications against their last-applied-configuration annotation or GitOps source of truth.</p></div><div class="p-4 rounded-lg"style=background:var(--bg-tertiary)><h4 class="font-medium mb-2"style=color:var(--text-primary)>Remediation</h4><p class=text-sm style=color:var(--text-secondary)>Revert drifted resources to their expected state automatically, or use GitOps to sync from your repository.'),V_=R('<tr class=hover:bg-[var(--bg-tertiary)]><td class=font-medium style=color:var(--accent-primary)></td><td><span class="badge badge-info"></span></td><td></td><td><span class="badge badge-warning"> changes</span></td><td class=text-sm style=color:var(--text-muted)></td><td><div class="flex items-center gap-2"><button class=action-btn title="View Diff"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></button><button class=action-btn title="Revert to Expected"style=color:var(--success-color)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6">'),W_=R('<div class="text-center py-4"style=color:var(--text-muted)>No detailed changes available'),q_=R('<div class="p-3 rounded-lg border"style=background:var(--bg-secondary);border-color:var(--border-color)><div class="font-mono text-sm mb-2"style=color:var(--accent-primary)></div><div class="grid grid-cols-2 gap-4 text-sm"><div><div class="text-xs mb-1"style=color:var(--text-muted)>Expected</div><div class="p-2 rounded font-mono text-xs break-all"style="background:rgba(34, 197, 94, 0.1);color:var(--success-color)"></div></div><div><div class="text-xs mb-1"style=color:var(--text-muted)>Actual</div><div class="p-2 rounded font-mono text-xs break-all"style="background:rgba(239, 68, 68, 0.1);color:var(--error-color)">');const K_=()=>{const[e,t]=J(!1),[r,l]=J(null),[u,{refetch:v}]=qe(()=>tt(),async g=>{const p=g==="_all"?"default":g;return Re.getDriftSummary(p)}),h=g=>{l(g),t(!0)},s=async g=>{if(confirm(`Revert ${g.kind}/${g.name} to its expected state?`))try{await Re.revertDrift(g.kind,g.name,g.namespace),v()}catch(p){console.error("Failed to revert drift:",p),alert("Failed to revert. Check console for details.")}},n=()=>(u()?.drifted||[]).length,f=()=>u()?.total||0;return(()=>{var g=U_(),p=g.firstChild,_=p.firstChild,b=_.firstChild;b.nextSibling;var C=_.nextSibling,x=p.nextSibling,o=x.firstChild,d=o.firstChild,a=d.nextSibling,c=o.nextSibling,m=c.firstChild,$=m.nextSibling,S=c.nextSibling,E=S.firstChild,y=E.nextSibling,k=S.nextSibling,B=k.firstChild,O=B.nextSibling,T=O.firstChild,I=x.nextSibling,M=I.firstChild,P=M.nextSibling,L=P.firstChild,H=L.firstChild;H.nextSibling;var w=L.nextSibling,N=w.firstChild;N.nextSibling;var z=w.nextSibling,V=z.firstChild;return V.nextSibling,C.$$click=()=>v(),i(a,f),i($,()=>f()-n()),i(y,n),i(O,(()=>{var Q=Me(()=>f()>0);return()=>Q()?Math.round((f()-n())/f()*100):100})(),T),i(g,A(q,{get when(){return u.loading},get children(){var Q=H_(),F=Q.firstChild,U=F.firstChild;return U.nextSibling,Q}}),I),i(g,A(q,{get when(){return Me(()=>!u.loading)()&&n()===0},get children(){var Q=N_(),F=Q.firstChild,U=F.firstChild,W=U.nextSibling;return W.nextSibling,Q}}),I),i(g,A(q,{get when(){return Me(()=>!u.loading)()&&n()>0},get children(){var Q=z_(),F=Q.firstChild,U=F.firstChild,W=U.firstChild,ce=W.nextSibling,D=ce.nextSibling;D.nextSibling;var j=F.nextSibling,K=j.firstChild,ee=K.nextSibling;return i(U,n,D),i(ee,A(Ne,{get each(){return u()?.drifted||[]},children:ne=>(()=>{var te=V_(),le=te.firstChild,Z=le.nextSibling,Y=Z.firstChild,se=Z.nextSibling,G=se.nextSibling,ie=G.firstChild,X=ie.firstChild,fe=G.nextSibling,Ae=fe.nextSibling,Ce=Ae.firstChild,$e=Ce.firstChild,ye=$e.nextSibling;return i(le,()=>ne.name),i(Y,()=>ne.kind),i(se,()=>ne.namespace),i(ie,()=>ne.driftDetails?.length||0,X),i(fe,()=>ne.lastChecked||"Just now"),$e.$$click=()=>h(ne),ye.$$click=()=>s(ne),te})()})),Q}}),I),i(g,A(it,{get isOpen(){return e()},onClose:()=>t(!1),get title(){return`Drift Details: ${r()?.kind}/${r()?.name}`},size:"lg",get children(){return A(q,{get when(){return r()},get children(){var Q=j_(),F=Q.firstChild,U=F.firstChild,W=U.nextSibling,ce=F.nextSibling,D=ce.nextSibling,j=D.firstChild,K=j.nextSibling;return i(W,()=>r()?.namespace),i(Q,A(q,{get when(){return(r()?.driftDetails||[]).length>0},get fallback(){return W_()},get children(){var ee=F_();return i(ee,A(Ne,{get each(){return r()?.driftDetails||[]},children:ne=>(()=>{var te=q_(),le=te.firstChild,Z=le.nextSibling,Y=Z.firstChild,se=Y.firstChild,G=se.nextSibling,ie=Y.nextSibling,X=ie.firstChild,fe=X.nextSibling;return i(le,()=>ne.field),i(G,()=>ne.expected||"(not set)"),i(fe,()=>ne.actual||"(not set)"),te})()})),ee}}),D),j.$$click=()=>t(!1),K.$$click=()=>{r()&&s(r()),t(!1)},Q}})}}),null),re(Q=>{var F=n()>0?"var(--error-color)":"var(--success-color)",U=n()===0?"var(--success-color)":n()<5?"var(--warning-color)":"var(--error-color)";return F!==Q.e&&oe(y,"color",Q.e=F),U!==Q.t&&oe(O,"color",Q.t=U),Q},{e:void 0,t:void 0}),g})()};Qe(["click"]);class Y_{ws=null;reconnectAttempts=0;maxReconnectAttempts=10;reconnectDelay=1e3;handlers=new Set;pingInterval=null;connect(){if(this.ws?.readyState===WebSocket.OPEN)return;const r=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`;try{this.ws=new WebSocket(r),this.ws.onopen=()=>{console.log("WebSocket connected"),this.reconnectAttempts=0,this.startPing(),this.notifyHandlers({type:"connection",data:{connected:!0}})},this.ws.onmessage=l=>{try{const u=JSON.parse(l.data);this.notifyHandlers(u)}catch(u){console.error("Failed to parse WebSocket message:",u)}},this.ws.onclose=()=>{console.log("WebSocket disconnected"),this.stopPing(),this.notifyHandlers({type:"connection",data:{connected:!1}}),this.attemptReconnect()},this.ws.onerror=l=>{console.error("WebSocket error:",l)}}catch(l){console.error("Failed to create WebSocket:",l),this.attemptReconnect()}}disconnect(){this.stopPing(),this.ws&&(this.ws.close(),this.ws=null)}attemptReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.log("Max reconnect attempts reached");return}this.reconnectAttempts++;const t=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);console.log(`Reconnecting in ${t}ms (attempt ${this.reconnectAttempts})`),setTimeout(()=>this.connect(),t)}startPing(){this.pingInterval=window.setInterval(()=>{this.ws?.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify({type:"ping"}))},3e4)}stopPing(){this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null)}subscribe(t){return this.handlers.add(t),()=>this.handlers.delete(t)}notifyHandlers(t){this.handlers.forEach(r=>{try{r(t)}catch(l){console.error("Handler error:",l)}})}send(t){this.ws?.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify(t))}}const ds=new Y_,[rw,G_]=J(!1);ds.subscribe(e=>{e.type==="connection"&&G_(e.data.connected)});var J_=R('<svg class="w-4 h-4"fill=currentColor viewBox="0 0 24 24"><path d="M8 5v14l11-7z">'),X_=R('<div class=overflow-y-auto style="max-height:calc(100vh - 320px)">'),Z_=R('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Events</h1><p style=color:var(--text-secondary)>Real-time cluster events stream</p></div><div class="flex items-center gap-3"><button></button><button class=icon-btn title="Refresh Events"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div><span></span><span class=text-sm style=color:var(--text-secondary)></span><span class="text-xl font-bold"style=color:var(--text-primary)></span><span class=text-xs style=color:var(--text-muted)>new</span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Normal</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--warning-color)"><span class=text-sm style=color:var(--text-secondary)>Warning</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class=flex-1></div><input type=text placeholder="Search events..."class="px-3 py-2 rounded-lg text-sm w-64"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=all>All Types</option><option value=Normal>Normal</option><option value=Warning>Warning</option></select></div><div class="card overflow-hidden">'),Q_=R('<svg class="w-4 h-4"fill=currentColor viewBox="0 0 24 24"><path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z">'),e2=R('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading events...'),t2=R('<div class="p-8 text-center"style=color:var(--text-muted)>No events found'),r2=R('<span class="text-xs px-2 py-0.5 rounded"style=background:var(--bg-tertiary);color:var(--text-secondary)>'),s2=R('<span class="px-2 py-0.5 rounded"style=background:var(--bg-tertiary)>x'),i2=R("<span>Source: "),n2=R('<div style=border-color:var(--border-color)><div class="flex items-start gap-4"><div class="flex-shrink-0 p-2 rounded-lg"style=background:var(--bg-tertiary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></div><div class="flex-1 min-w-0"><div class="flex items-center gap-2 flex-wrap"><span></span><span class="px-2 py-0.5 rounded text-xs"style=background:var(--bg-tertiary);color:var(--accent-primary)></span><span class=text-xs style=color:var(--text-muted)>/</span></div><p class="mt-1 text-sm"style=color:var(--text-primary)></p><div class="mt-2 flex items-center gap-4 text-xs"style=color:var(--text-muted)><span>');const l2=()=>{const[e,t]=J([]),[r,l]=J("all"),[u,v]=J(""),[h,s]=J(!1),[n,f]=J([]),[g,p]=J(0),[_,{refetch:b}]=qe(()=>({ns:tt(),trigger:g()}),async({ns:a})=>{try{console.log("[Events] Fetching events for namespace:",a);const c=a==="_all"||a==="All Namespaces"||!a?void 0:a,m=await Re.getEvents(c,200);return console.log("[Events] Received events:",m?.events?.length||0,"total:",m?.total||0),m?.events||[]}catch(c){return console.error("[Events] Failed to fetch events:",c),[]}});Mt(()=>{const a=_(),c=_.loading,m=_.error;console.log("[Events] createEffect triggered:",{hasInitial:!!a,initialLength:a?.length||0,loading:c,error:m?String(m):null}),a&&Array.isArray(a)?a.length>0?(console.log("[Events] Setting events:",a.length),t(a)):console.log("[Events] Initial events array is empty"):!c&&m?console.error("[Events] Error loading events:",m):!c&&!a&&console.log("[Events] No initial events data")}),Xt(()=>{p(a=>a+1)}),Xt(()=>{const a=ds.subscribe(c=>{if(c.type==="event"&&!h()){const m=c.data,$=tt();if($&&$!=="All Namespaces"&&m.namespace!==$)return;f(S=>{const E=Array.isArray(S)?S:[];return[m,...E].slice(0,50)}),t(S=>{const E=Array.isArray(S)?S:[];return[m,...E].slice(0,500)})}});return()=>a()});const C=ze(()=>{let a=e();Array.isArray(a)||(console.warn("[Events] events() is not an array:",typeof a,a),a=[]);const c=r(),m=u().toLowerCase();return console.log("[Events] filteredEvents memo:",{totalEvents:a.length,filterType:c,query:m,hasQuery:!!m}),c!=="all"&&(a=a.filter($=>$.type===c)),m&&(a=a.filter($=>$.message?.toLowerCase().includes(m)||$.object?.toLowerCase().includes(m)||$.reason?.toLowerCase().includes(m)||$.namespace?.toLowerCase().includes(m))),console.log("[Events] Filtered result:",a.length),a}),x=ze(()=>{const a=e();return{total:a.length,normal:a.filter(c=>c.type==="Normal").length,warning:a.filter(c=>c.type==="Warning").length}}),o=a=>{if(!a)return"Unknown";const c=new Date(a);if(isNaN(c.getTime()))return"Unknown";const $=new Date().getTime()-c.getTime();return $<6e4?"Just now":$<36e5?`${Math.floor($/6e4)}m ago`:$<864e5?`${Math.floor($/36e5)}h ago`:`${Math.floor($/864e5)}d ago`},d=a=>{switch(a?.toLowerCase()){case"pod":return"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4";case"deployment":return"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10";case"service":return"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9";case"node":return"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01";case"replicaset":return"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4";default:return"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}};return(()=>{var a=Z_(),c=a.firstChild,m=c.firstChild,$=m.firstChild;$.nextSibling;var S=m.nextSibling,E=S.firstChild,y=E.nextSibling,k=c.nextSibling,B=k.firstChild,O=B.firstChild,T=O.nextSibling,I=T.nextSibling;I.nextSibling;var M=B.nextSibling,P=M.firstChild,L=P.nextSibling,H=M.nextSibling,w=H.firstChild,N=w.nextSibling,z=H.nextSibling,V=z.firstChild,Q=V.nextSibling,F=z.nextSibling,U=F.nextSibling,W=U.nextSibling,ce=k.nextSibling;return E.$$click=()=>s(!h()),i(E,A(q,{get when(){return h()},get fallback(){return[Q_(),"Pause"]},get children(){return[J_(),"Resume"]}})),y.$$click=()=>b(),i(T,()=>h()?"Paused":"Live"),i(I,()=>n().length),M.$$click=()=>l("all"),i(L,()=>x().total),H.$$click=()=>l("Normal"),i(N,()=>x().normal),z.$$click=()=>l("Warning"),i(Q,()=>x().warning),U.$$input=D=>v(D.currentTarget.value),W.addEventListener("change",D=>l(D.currentTarget.value)),i(ce,A(q,{get when(){return!_.loading},get fallback(){return(()=>{var D=e2(),j=D.firstChild;return j.nextSibling,D})()},get children(){var D=X_();return i(D,A(Ne,{get each(){return C()},get fallback(){return t2()},children:(j,K)=>(()=>{var ee=n2(),ne=ee.firstChild,te=ne.firstChild,le=te.firstChild,Z=le.firstChild,Y=te.nextSibling,se=Y.firstChild,G=se.firstChild,ie=G.nextSibling,X=ie.nextSibling,fe=X.firstChild,Ae=se.nextSibling,Ce=Ae.nextSibling,$e=Ce.firstChild;return i(G,()=>j.type),i(ie,()=>j.reason),i(X,()=>j.kind,fe),i(X,()=>j.object,null),i(se,A(q,{get when(){return j.namespace},get children(){var ye=r2();return i(ye,()=>j.namespace),ye}}),null),i(Ae,()=>j.message),i($e,()=>o(j.time)),i(Ce,A(q,{get when(){return j.count>1},get children(){var ye=s2();return ye.firstChild,i(ye,()=>j.count,null),ye}}),null),i(Ce,A(q,{get when(){return j.source},get children(){var ye=i2();return ye.firstChild,i(ye,()=>j.source,null),ye}}),null),re(ye=>{var he=`p-4 border-b transition-all hover:bg-white/5 ${K()<n().length&&!h()?"animate-slide-in":""}`,ae=`4px solid ${j.type==="Warning"?"var(--warning-color)":"var(--success-color)"}`,ue=j.type==="Warning"?"var(--warning-color)":"var(--accent-primary)",Se=d(j.kind),_e=`px-2 py-0.5 rounded text-xs font-medium ${j.type==="Warning"?"bg-amber-500/20 text-amber-400":"bg-green-500/20 text-green-400"}`;return he!==ye.e&&He(ee,ye.e=he),ae!==ye.t&&oe(ee,"border-left",ye.t=ae),ue!==ye.a&&oe(le,"color",ye.a=ue),Se!==ye.o&&Xe(Z,"d",ye.o=Se),_e!==ye.i&&He(G,ye.i=_e),ye},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),ee})()})),D}})),re(D=>{var j=`px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-all ${h()?"bg-gradient-to-r from-green-500/20 to-emerald-500/20 border border-green-500/40":"bg-gradient-to-r from-amber-500/20 to-orange-500/20 border border-amber-500/40"}`,K=h()?"var(--success-color)":"var(--warning-color)",ee=`card px-4 py-2 flex items-center gap-2 ${h()?"":"animate-pulse"}`,ne=`3px solid ${h()?"var(--warning-color)":"var(--success-color)"}`,te=`w-3 h-3 rounded-full ${h()?"bg-amber-500":"bg-green-500 animate-pulse"}`;return j!==D.e&&He(E,D.e=j),K!==D.t&&oe(E,"color",D.t=K),ee!==D.a&&He(B,D.a=ee),ne!==D.o&&oe(B,"border-left",D.o=ne),te!==D.i&&He(O,D.i=te),D},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),re(()=>U.value=u()),re(()=>W.value=r()),a})()};Qe(["click","input"]);var o2=R('<span class="px-2 py-1 rounded text-xs font-medium">'),a2=R('<div class="p-4 text-center text-sm"style=color:var(--text-muted)>No namespaces found'),c2=R('<div class="p-2 border-t text-xs text-center"style=borderColor:var(--border-color);color:var(--text-muted)> selected'),d2=R('<div class="absolute right-0 mt-2 w-64 rounded-lg border shadow-lg z-50 max-h-96 overflow-hidden flex flex-col"style=background:var(--bg-secondary);borderColor:var(--border-color)><div class="p-2 border-b"style=borderColor:var(--border-color)><input type=text placeholder="Search namespaces..."class="w-full px-3 py-2 rounded border text-sm"style=background:var(--bg-primary);color:var(--text-primary);borderColor:var(--border-color)></div><div class="p-2 border-b flex gap-2"style=borderColor:var(--border-color)><button class="px-3 py-1 text-xs rounded border"style=background:var(--bg-primary);color:var(--text-primary);borderColor:var(--border-color)>Select All</button><button class="px-3 py-1 text-xs rounded border"style=background:var(--bg-primary);color:var(--text-primary);borderColor:var(--border-color)>Clear</button></div><div class="overflow-y-auto flex-1">'),h2=R('<div class="flex items-center gap-2 flex-wrap"><span class=text-sm style=color:var(--text-muted)>Filtering by:</span><button class="text-xs underline"style=color:var(--text-muted)>Clear all'),u2=R('<select class="px-3 py-2 rounded-lg text-sm border"style=background:var(--bg-secondary);color:var(--text-primary)><option value=15m>15 minutes</option><option value=1h>1 hour</option><option value=6h>6 hours</option><option value=24h>24 hours'),f2=R('<div class="card p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading events...'),g2=R('<div class="card p-8 text-center"><p style=color:var(--text-muted)>No events found'),Ql=R("<div class=space-y-4>"),p2=R('<div class="card p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading grouped events...'),v2=R('<div class="card p-8 text-center"><p style=color:var(--text-muted)>No grouped events found'),m2=R("<div class=space-y-6>"),_2=R('<div class="card p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading log errors...'),b2=R('<div class="card p-8 text-center"><p style=color:var(--text-muted)>No log errors found'),y2=R('<div class="space-y-6 p-6"style=minHeight:100vh;background:var(--bg-primary)><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-3xl font-bold"style=color:var(--text-primary)>Event Monitor</h1><p style=color:var(--text-secondary)>Production environment events and alerts</p></div><div class="flex items-center gap-2 flex-wrap"><div class="relative namespace-dropdown-container"><button type=button class="px-4 py-2 rounded-lg border text-sm font-medium flex items-center gap-2"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path></svg><span></span><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 9l-7 7-7-7"></path></svg></button></div><button class="px-4 py-2 rounded-lg text-sm font-medium transition-colors"style=background:var(--accent-primary);color:white>Refresh</button><label class="flex items-center gap-2 px-4 py-2 rounded-lg text-sm cursor-pointer"style=background:var(--bg-secondary)><input type=checkbox class="w-4 h-4"><span style=color:var(--text-secondary)>Auto-refresh</span></label></div></div><div class="flex items-center justify-between flex-wrap gap-4"><div class="flex items-center gap-2"><button>Timeline</button><button>Grouped</button><button>Log Errors</button></div><div class="flex items-center gap-2"><select class="px-3 py-2 rounded-lg text-sm border"style=background:var(--bg-secondary);color:var(--text-primary)><option value=all>All Severities</option><option value=critical>Critical</option><option value=high>High</option><option value=medium>Medium</option><option value=low>Low</option><option value=info>Info</option></select><select class="px-3 py-2 rounded-lg text-sm border"style=background:var(--bg-secondary);color:var(--text-primary)><option value=all>All Types</option><option value=infrastructure>Infrastructure</option><option value=application>Application</option><option value=security>Security'),x2=R('<label class="flex items-center gap-2 p-2 hover:bg-opacity-50 cursor-pointer"><input type=checkbox class="w-4 h-4 rounded"style=accentColor:var(--accent-color)><span class=text-sm style=color:var(--text-primary)>'),$2=R('<span class="px-2 py-1 rounded text-xs font-medium flex items-center gap-1"style=background:var(--accent-color);color:var(--text-primary);opacity:0.8><button class=hover:opacity-70 style=color:var(--text-primary)><svg class="w-3 h-3"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12">'),w2=R('<div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div class="card p-4"><div class=text-sm style=color:var(--text-secondary)>Total Events</div><div class="text-2xl font-bold"style=color:var(--text-primary)></div></div><div class="card p-4"><div class=text-sm style=color:var(--text-secondary)>Critical</div><div class="text-2xl font-bold"style=color:#ef4444></div></div><div class="card p-4"><div class=text-sm style=color:var(--text-secondary)>High</div><div class="text-2xl font-bold"style=color:#f59e0b></div></div><div class="card p-4"><div class=text-sm style=color:var(--text-secondary)>Log Errors</div><div class="text-2xl font-bold"style=color:var(--text-primary)>'),S2=R('<div class="card p-4 border-l-4"><div class="flex items-start justify-between gap-4"><div class=flex-1><div class="flex items-center gap-2 mb-2"><span class="text-sm font-medium"style=color:var(--text-primary)></span></div><p class="text-sm mb-2"style=color:var(--text-secondary)></p><div class="flex items-center gap-4 text-xs"style=color:var(--text-muted)><span></span><span></span><span></span><span></span></div></div><div class=text-right><div class="text-sm font-medium"style=color:var(--text-primary)>x</div><div class=text-xs style=color:var(--text-muted)>'),C2=R('<div class="card p-4"><div class="flex items-center justify-between mb-4"><h3 class="text-lg font-semibold"style=color:var(--text-primary)></h3><span class="px-3 py-1 rounded-full text-sm"style=background:var(--bg-secondary);color:var(--text-secondary)> events</span></div><div class=space-y-2>'),k2=R('<div class="p-3 rounded border-l-4"style=background:var(--bg-secondary)><div class="flex items-center gap-2 mb-1"><span class="text-sm font-medium"style=color:var(--text-primary)></span></div><p class=text-xs style=color:var(--text-secondary)>'),A2=R('<div class="card p-4 border-l-4"><div class="flex items-start justify-between gap-4"><div class=flex-1><div class="flex items-center gap-2 mb-2"><span class="px-2 py-1 rounded text-xs font-medium">HTTP </span><span class="text-sm font-medium"style=color:var(--text-primary)> </span></div><p class="text-sm mb-2"style=color:var(--text-secondary)></p><div class="flex items-center gap-4 text-xs"style=color:var(--text-muted)><span>Pod: </span><span>Container: </span><span></span><span></span></div></div><div class=text-right><div class=text-xs style=color:var(--text-muted)>');const M2=()=>{const[e,t]=J("timeline"),[r,l]=J("all"),[u,v]=J("all"),[h,s]=J("1h"),[n,f]=J([]),[g,p]=J([]),[_,b]=J(null),[C,x]=J(!0),[o,d]=J([]),[a,c]=J(!1),[m,$]=J(""),[S]=qe(async()=>{try{return await Re.getNamespaces()}catch(W){return console.error("[MonitoredEvents] Failed to fetch namespaces:",W),[]}}),E=ze(()=>{const W=S()||[],ce=m().toLowerCase();return ce?W.filter(D=>D.toLowerCase().includes(ce)):W}),y=W=>{const ce=o();ce.includes(W)?d(ce.filter(D=>D!==W)):d([...ce,W])},k=()=>{const W=S()||[];d([...W])},B=()=>{d([])},[O,{refetch:T}]=qe(()=>({namespaces:o(),severity:r(),type:u(),context:St(),refresh:Gt()}),async({namespaces:W,severity:ce,type:D})=>{try{const j={limit:500};W.length===1&&(j.namespace=W[0]),ce!=="all"&&(j.severity=ce),D!=="all"&&(j.type=D);let ee=(await Re.getMonitoredEvents(j))?.events||[];return W.length>1?ee=ee.filter(ne=>W.includes(ne.namespace||"")):W.length,ee}catch(j){return console.error("[MonitoredEvents] Failed to fetch events:",j),[]}}),[I,{refetch:M}]=qe(()=>({namespaces:o(),context:St(),refresh:Gt()}),async({namespaces:W})=>{try{const ce={limit:200};W.length===1&&(ce.namespace=W[0]);let j=(await Re.getLogErrors(ce))?.errors||[];return W.length>1&&(j=j.filter(K=>W.includes(K.namespace||""))),j}catch(ce){return console.error("[MonitoredEvents] Failed to fetch log errors:",ce),[]}}),[P,{refetch:L}]=qe(async()=>{try{return await Re.getEventStats()}catch(W){return console.error("[MonitoredEvents] Failed to fetch stats:",W),null}}),[H,{refetch:w}]=qe(()=>h(),async W=>{try{return(await Re.getGroupedEvents(W))?.groups||[]}catch(ce){return console.error("[MonitoredEvents] Failed to fetch grouped events:",ce),[]}});ze(()=>{const W=O();W&&Array.isArray(W)?f(W):!O.loading&&!O.error&&f([])}),ze(()=>{const W=I();W&&Array.isArray(W)?p(W):!I.loading&&!I.error&&p([])}),ze(()=>{const W=P();W&&b(W)});let N=null;Xt(()=>{C()&&(N=window.setInterval(()=>{T(),M(),L(),e()==="grouped"&&w()},3e4))}),or(()=>{N&&clearInterval(N)}),Xt(()=>{const W=ds.subscribe(D=>{if(D.type==="monitored_event"&&C()){const j=D.data,K=o();(K.length===0||K.includes(j.namespace||""))&&(f(ee=>{const ne=Array.isArray(ee)?ee:[];return[j,...ne].slice(0,500)}),L())}}),ce=D=>{D.target.closest(".namespace-dropdown-container")||c(!1)};return document.addEventListener("click",ce),()=>{W(),document.removeEventListener("click",ce)}});const z=W=>{switch(W){case"critical":return"#ef4444";case"high":return"#f59e0b";case"medium":return"#3b82f6";case"low":return"#6b7280";case"info":return"#10b981";default:return"#6b7280"}},V=W=>{const ce=z(W);return(()=>{var D=o2();return oe(D,"background",`${ce}20`),oe(D,"color",ce),oe(D,"border",`1px solid ${ce}40`),i(D,()=>W.toUpperCase()),D})()},Q=W=>{if(!W)return"Unknown";const ce=new Date(W);return isNaN(ce.getTime())?"Unknown":ce.toLocaleString()},F=W=>{if(!W)return"Unknown";const ce=new Date(W);if(isNaN(ce.getTime()))return"Unknown";const j=new Date().getTime()-ce.getTime();return j<6e4?"Just now":j<36e5?`${Math.floor(j/6e4)}m ago`:j<864e5?`${Math.floor(j/36e5)}h ago`:`${Math.floor(j/864e5)}d ago`},U=ze(()=>{const W=n();return Array.isArray(W)?W:[]});return(()=>{var W=y2(),ce=W.firstChild,D=ce.firstChild,j=D.firstChild;j.nextSibling;var K=D.nextSibling,ee=K.firstChild,ne=ee.firstChild,te=ne.firstChild,le=te.nextSibling,Z=ee.nextSibling,Y=Z.nextSibling,se=Y.firstChild;se.nextSibling;var G=ce.nextSibling,ie=G.firstChild,X=ie.firstChild,fe=X.nextSibling,Ae=fe.nextSibling,Ce=ie.nextSibling,$e=Ce.firstChild,ye=$e.nextSibling;return ne.$$click=he=>{he.stopPropagation(),c(!a())},i(le,(()=>{var he=Me(()=>o().length===0);return()=>he()?"All Namespaces":Me(()=>o().length===1)()?o()[0]:`${o().length} namespaces`})()),i(ee,A(q,{get when(){return a()},get children(){var he=d2(),ae=he.firstChild,ue=ae.firstChild,Se=ae.nextSibling,_e=Se.firstChild,de=_e.nextSibling,be=Se.nextSibling;return he.$$click=ve=>ve.stopPropagation(),ue.$$input=ve=>$(ve.currentTarget.value),_e.$$click=k,de.$$click=B,i(be,A(q,{get when(){return E().length===0},get children(){return a2()}}),null),i(be,A(Ne,{get each(){return E()},children:ve=>(()=>{var ge=x2(),me=ge.firstChild,pe=me.nextSibling;return me.addEventListener("change",()=>y(ve)),i(pe,ve),re(xe=>{var we=o().includes(ve)?"var(--accent-color)":"transparent",ke=o().includes(ve)?"0.1":"0";return we!==xe.e&&oe(ge,"background",xe.e=we),ke!==xe.t&&oe(ge,"--tw-bg-opacity",xe.t=ke),xe},{e:void 0,t:void 0}),re(()=>me.checked=o().includes(ve)),ge})()}),null),i(he,A(q,{get when(){return o().length>0},get children(){var ve=c2(),ge=ve.firstChild;return i(ve,()=>o().length,ge),ve}}),null),re(()=>ue.value=m()),he}}),null),Z.$$click=()=>{T(),M(),L(),e()==="grouped"&&w()},se.addEventListener("change",he=>x(he.currentTarget.checked)),i(W,A(q,{get when(){return o().length>0},get children(){var he=h2(),ae=he.firstChild,ue=ae.nextSibling;return i(he,A(Ne,{get each(){return o()},children:Se=>(()=>{var _e=$2(),de=_e.firstChild;return i(_e,Se,de),de.$$click=()=>y(Se),_e})()}),ue),ue.$$click=B,he}}),G),i(W,A(q,{get when(){return _()},children:he=>(()=>{var ae=w2(),ue=ae.firstChild,Se=ue.firstChild,_e=Se.nextSibling,de=ue.nextSibling,be=de.firstChild,ve=be.nextSibling,ge=de.nextSibling,me=ge.firstChild,pe=me.nextSibling,xe=ge.nextSibling,we=xe.firstChild,ke=we.nextSibling;return i(_e,()=>he().total_events||0),i(ve,()=>he().by_severity?.critical||0),i(pe,()=>he().by_severity?.high||0),i(ke,()=>he().total_errors||0),ae})()}),G),X.$$click=()=>t("timeline"),fe.$$click=()=>t("grouped"),Ae.$$click=()=>t("errors"),$e.addEventListener("change",he=>l(he.currentTarget.value)),ye.addEventListener("change",he=>v(he.currentTarget.value)),i(Ce,A(q,{get when(){return e()==="grouped"},get children(){var he=u2();return he.addEventListener("change",ae=>s(ae.currentTarget.value)),re(()=>he.value=h()),he}}),null),i(W,A(q,{get when(){return e()==="timeline"},get children(){return[A(q,{get when(){return O.loading},get children(){var he=f2(),ae=he.firstChild;return ae.nextSibling,he}}),A(q,{get when(){return!O.loading},get children(){var he=Ql();return i(he,A(Ne,{get each(){return U()},children:ae=>(()=>{var ue=S2(),Se=ue.firstChild,_e=Se.firstChild,de=_e.firstChild,be=de.firstChild,ve=de.nextSibling,ge=ve.nextSibling,me=ge.firstChild,pe=me.nextSibling,xe=pe.nextSibling,we=xe.nextSibling,ke=_e.nextSibling,Oe=ke.firstChild,Pe=Oe.firstChild,Ie=Oe.nextSibling;return i(de,()=>V(ae.severity),be),i(be,()=>ae.title),i(ve,()=>ae.description),i(me,()=>ae.resource),i(pe,()=>ae.namespace||"cluster-wide"),i(xe,()=>F(ae.timestamp)),i(we,()=>ae.source),i(Oe,()=>ae.count,Pe),i(Ie,()=>Q(ae.timestamp)),re(De=>oe(ue,"border-left-color",z(ae.severity))),ue})()}),null),i(he,A(q,{get when(){return U().length===0},get children(){var ae=g2();return ae.firstChild,ae}}),null),he}})]}}),null),i(W,A(q,{get when(){return e()==="grouped"},get children(){return[A(q,{get when(){return H.loading},get children(){var he=p2(),ae=he.firstChild;return ae.nextSibling,he}}),A(q,{get when(){return!H.loading},get children(){var he=m2();return i(he,A(Ne,{get each(){return H()||[]},children:ae=>(()=>{var ue=C2(),Se=ue.firstChild,_e=Se.firstChild,de=_e.nextSibling,be=de.firstChild,ve=Se.nextSibling;return i(_e,()=>new Date(ae.time).toLocaleString()),i(de,()=>ae.count,be),i(ve,A(Ne,{get each(){return ae.events},children:ge=>(()=>{var me=k2(),pe=me.firstChild,xe=pe.firstChild,we=pe.nextSibling;return i(pe,()=>V(ge.severity),xe),i(xe,()=>ge.title),i(we,()=>ge.resource),re(ke=>oe(me,"border-left-color",z(ge.severity))),me})()})),ue})()}),null),i(he,A(q,{get when(){return!H()||H()?.length===0},get children(){var ae=v2();return ae.firstChild,ae}}),null),he}})]}}),null),i(W,A(q,{get when(){return e()==="errors"},get children(){return[A(q,{get when(){return I.loading},get children(){var he=_2(),ae=he.firstChild;return ae.nextSibling,he}}),A(q,{get when(){return!I.loading},get children(){var he=Ql();return i(he,A(Ne,{get each(){return(g()||[]).filter(ae=>ae.status_code>0)},children:ae=>(()=>{var ue=A2(),Se=ue.firstChild,_e=Se.firstChild,de=_e.firstChild,be=de.firstChild;be.firstChild;var ve=be.nextSibling,ge=ve.firstChild,me=de.nextSibling,pe=me.nextSibling,xe=pe.firstChild;xe.firstChild;var we=xe.nextSibling;we.firstChild;var ke=we.nextSibling,Oe=ke.nextSibling,Pe=_e.nextSibling,Ie=Pe.firstChild;return i(be,()=>ae.status_code,null),i(ve,()=>ae.method,ge),i(ve,()=>ae.path,null),i(me,()=>ae.message),i(xe,()=>ae.pod,null),i(we,()=>ae.container,null),i(ke,()=>ae.namespace),i(Oe,()=>F(ae.timestamp)),i(Ie,()=>Q(ae.timestamp)),re(De=>{var je=ae.status_code>=500?"#ef4444":"#f59e0b",Ue=ae.status_code>=500?"#ef444420":"#f59e0b20",Ke=ae.status_code>=500?"#ef4444":"#f59e0b";return je!==De.e&&oe(ue,"border-left-color",De.e=je),Ue!==De.t&&oe(be,"background",De.t=Ue),Ke!==De.a&&oe(be,"color",De.a=Ke),De},{e:void 0,t:void 0,a:void 0}),ue})()}),null),i(he,A(q,{get when(){return!g()||g().length===0},get children(){var ae=b2();return ae.firstChild,ae}}),null),he}})]}}),null),re(he=>{var ae=`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${e()==="timeline"?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"}`,ue=`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${e()==="grouped"?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"}`,Se=`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${e()==="errors"?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"}`;return ae!==he.e&&He(X,he.e=ae),ue!==he.t&&He(fe,he.t=ue),Se!==he.a&&He(Ae,he.a=Se),he},{e:void 0,t:void 0,a:void 0}),re(()=>se.checked=C()),re(()=>$e.value=r()),re(()=>ye.value=u()),W})()};Qe(["click","input"]);var E2=R('<div><h2 class="text-xl font-semibold mb-4"style=color:var(--text-primary)>Configured Connectors</h2><div class=space-y-4>'),L2=R('<div class="space-y-6 p-6"style=minHeight:100vh;background:var(--bg-primary)><div class="flex items-center justify-between"><div><h1 class="text-3xl font-bold"style=color:var(--text-primary)>Connectors</h1><p style=color:var(--text-secondary)>Connect KubeGraf to external services for notifications and integrations</p></div></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">'),R2=R('<div class="card p-4 cursor-pointer hover:scale-105 transition-transform"><div class="flex items-center gap-3 mb-2"><div class="w-10 h-10 rounded-lg flex items-center justify-center"><svg class="w-6 h-6"fill=currentColor viewBox="0 0 24 24"><path></path></svg></div><div class=flex-1><h3 class=font-semibold style=color:var(--text-primary)></h3><p class=text-sm style=color:var(--text-muted)>'),D2=R('<div class="card p-4"><div class="flex items-center justify-between"><div class="flex items-center gap-4 flex-1"><div class="w-12 h-12 rounded-lg flex items-center justify-center"><svg class="w-6 h-6"fill=currentColor viewBox="0 0 24 24"><path></path></svg></div><div class=flex-1><div class="flex items-center gap-2 mb-1"><h3 class=font-semibold style=color:var(--text-primary)></h3><span class="px-2 py-1 rounded text-xs font-medium"></span><span class="px-2 py-1 rounded text-xs font-medium"></span></div><p class=text-sm style=color:var(--text-muted)>Type: <!> | Created: </p></div></div><div class="flex items-center gap-2"><button class="px-3 py-2 rounded text-sm font-medium"style=background:var(--bg-secondary);color:var(--text-primary)></button><button class="px-3 py-2 rounded text-sm font-medium"></button><button class="px-3 py-2 rounded text-sm font-medium"style=background:var(--bg-secondary);color:var(--text-primary)>Edit</button><button class="px-3 py-2 rounded text-sm font-medium"style=background:#ef444420;color:#ef4444>Delete'),T2=R('<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50"><div class="card p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto"><div class="flex items-center justify-between mb-4"><h2 class="text-2xl font-bold"style=color:var(--text-primary)> <!> Connector</h2><button class=text-2xl style=color:var(--text-muted)>Ã—</button></div><div class=space-y-4><div><label class="block text-sm font-medium mb-1"style=color:var(--text-secondary)>Connector Name</label><input type=text class="w-full px-3 py-2 rounded border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)></div><div class="flex justify-end gap-2 mt-6"><button class="px-4 py-2 rounded text-sm font-medium"style=background:var(--bg-secondary);color:var(--text-primary)>Cancel</button><button class="px-4 py-2 rounded text-sm font-medium text-white"style=background:var(--accent-primary)> Connector'),P2=R('<div><label class="block text-sm font-medium mb-1"style=color:var(--text-secondary)> '),I2=R("<span style=color:#ef4444>*"),B2=R('<select class="w-full px-3 py-2 rounded border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)><option value>Select...'),O2=R("<option>"),H2=R('<input class="w-full px-3 py-2 rounded border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)>');const ys=[{id:"github",name:"GitHub",description:"Connect to GitHub repositories for issue tracking and webhooks",icon:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z",color:"#24292e",fields:[{key:"token",label:"Personal Access Token",type:"password",required:!0,placeholder:"ghp_..."},{key:"repository",label:"Repository (owner/repo)",type:"text",required:!0,placeholder:"owner/repo"},{key:"webhook_url",label:"Webhook URL (optional)",type:"url",required:!1,placeholder:"https://..."}]},{id:"slack",name:"Slack",description:"Send alerts and notifications to Slack channels",icon:"M5.042 15.165a2.528 2.528 0 01-2.52 2.523A2.528 2.528 0 010 15.165a2.527 2.527 0 012.522-2.52 2.527 2.527 0 012.52 2.52zM9.075 15.165a2.527 2.527 0 01-2.521-2.52 2.527 2.527 0 012.521-2.521 2.528 2.528 0 012.523 2.521 2.528 2.528 0 01-2.523 2.52zM5.042 11.143a2.528 2.528 0 01-2.52-2.523A2.528 2.528 0 015.042 6.098a2.527 2.527 0 012.52 2.522 2.527 2.527 0 01-2.52 2.523z",color:"#4A154B",fields:[{key:"webhook_url",label:"Webhook URL",type:"url",required:!0,placeholder:"https://hooks.slack.com/services/..."},{key:"channel",label:"Channel (optional)",type:"text",required:!1,placeholder:"#alerts"},{key:"username",label:"Bot Username (optional)",type:"text",required:!1,placeholder:"KubeGraf"}]},{id:"pagerduty",name:"PagerDuty",description:"Create incidents and alerts in PagerDuty",icon:"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm0 22c-5.514 0-10-4.486-10-10S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10z",color:"#06AC38",fields:[{key:"integration_key",label:"Integration Key",type:"text",required:!0,placeholder:"Your PagerDuty integration key"},{key:"service_id",label:"Service ID (optional)",type:"text",required:!1,placeholder:"Service ID"}]},{id:"webhook",name:"Generic Webhook",description:"Send events to any webhook endpoint",icon:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1",color:"#6366f1",fields:[{key:"url",label:"Webhook URL",type:"url",required:!0,placeholder:"https://..."},{key:"method",label:"HTTP Method",type:"select",required:!0,options:[{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"PATCH",label:"PATCH"}]},{key:"headers",label:"Custom Headers (JSON)",type:"text",required:!1,placeholder:'{"Authorization": "Bearer token"}'}]},{id:"email",name:"Email",description:"Send email notifications via SMTP",icon:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z",color:"#3b82f6",fields:[{key:"smtp_host",label:"SMTP Host",type:"text",required:!0,placeholder:"smtp.gmail.com"},{key:"smtp_port",label:"SMTP Port",type:"text",required:!0,placeholder:"587"},{key:"username",label:"Username",type:"text",required:!0,placeholder:"your-email@example.com"},{key:"password",label:"Password",type:"password",required:!0},{key:"from_email",label:"From Email",type:"text",required:!0,placeholder:"alerts@example.com"},{key:"to_emails",label:"To Emails (comma-separated)",type:"text",required:!0,placeholder:"admin@example.com,team@example.com"}]},{id:"teams",name:"Microsoft Teams",description:"Send notifications to Microsoft Teams channels",icon:"M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-2 14H6v-4h12v4zm0-6H6v-4h12v4zm0-6H6V6h12v4z",color:"#6264A7",fields:[{key:"webhook_url",label:"Webhook URL",type:"url",required:!0,placeholder:"https://outlook.office.com/webhook/..."},{key:"channel",label:"Channel Name (optional)",type:"text",required:!1,placeholder:"Alerts"}]},{id:"discord",name:"Discord",description:"Send alerts to Discord channels via webhook",icon:"M20.317 4.37a19.791 19.791 0 00-4.885-1.515.074.074 0 00-.079.037c-.21.24-.444.464-.68.7a18.27 18.27 0 00-5.487 0 12.64 12.64 0 00-.68-.7.077.077 0 00-.079-.037A19.736 19.736 0 003.677 4.37a.07.07 0 00-.032.027C2.67 6.018 2.32 7.724 2.11 9.424a.082.082 0 00.031.084 19.9 19.9 0 005.993 3.03.078.078 0 00.084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 00-.041-.106 13.107 13.107 0 01-1.872-.892.077.077 0 01-.007-.128 10.2 10.2 0 00.372-.292.074.074 0 01.077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 01.078.01c.12.098.246.198.373.292a.077.077 0 01-.006.128 12.299 12.299 0 01-1.873.892.077.077 0 00-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 00.084.028 19.839 19.839 0 006.002-3.03.077.077 0 00.032-.083c-.216-1.7-.571-3.406-1.535-5.026a.061.061 0 00-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z",color:"#5865F2",fields:[{key:"webhook_url",label:"Webhook URL",type:"url",required:!0,placeholder:"https://discord.com/api/webhooks/..."},{key:"username",label:"Bot Username (optional)",type:"text",required:!1,placeholder:"KubeGraf Bot"}]}],N2=()=>{const[e,t]=J(null),[r,l]=J(!1),[u,v]=J(null),[h,s]=J({}),[n,f]=J(null),[g,{refetch:p}]=qe(async()=>{try{return await Re.getConnectors()}catch(m){return console.error("[Connectors] Failed to fetch connectors:",m),[]}}),_=m=>{t(m),s({}),v(null),l(!0)},b=m=>{t(m.type),s(m.config||{}),v(m),l(!0)},C=async()=>{const m=e();if(m)try{u()?await Re.updateConnector(u().id,{name:h().name||ys.find($=>$.id===m)?.name||"",config:h()}):await Re.createConnector({type:m,name:h().name||ys.find($=>$.id===m)?.name||"",config:h()}),l(!1),p()}catch($){alert(`Failed to save connector: ${$.message}`)}},x=async m=>{f(m.id);try{const $=await Re.testConnector(m.id);$.success?alert("Connector test successful!"):alert(`Connector test failed: ${$.error||"Unknown error"}`),p()}catch($){alert(`Failed to test connector: ${$.message}`)}finally{f(null)}},o=async m=>{try{await Re.updateConnector(m.id,{enabled:!m.enabled}),p()}catch($){alert(`Failed to toggle connector: ${$.message}`)}},d=async m=>{if(confirm(`Are you sure you want to delete connector "${m.name}"?`))try{await Re.deleteConnector(m.id),p()}catch($){alert(`Failed to delete connector: ${$.message}`)}},a=m=>ys.find($=>$.id===m),c=m=>{switch(m){case"connected":return"#22c55e";case"error":return"#ef4444";default:return"#6b7280"}};return(()=>{var m=L2(),$=m.firstChild,S=$.firstChild,E=S.firstChild;E.nextSibling;var y=$.nextSibling;return i(y,A(Ne,{each:ys,children:k=>(()=>{var B=R2(),O=B.firstChild,T=O.firstChild,I=T.firstChild,M=I.firstChild,P=T.nextSibling,L=P.firstChild,H=L.nextSibling;return B.$$click=()=>_(k.id),i(L,()=>k.name),i(H,()=>k.description),re(w=>{var N=`${k.color}20`,z=k.color,V=k.icon;return N!==w.e&&oe(T,"background",w.e=N),z!==w.t&&oe(I,"color",w.t=z),V!==w.a&&Xe(M,"d",w.a=V),w},{e:void 0,t:void 0,a:void 0}),B})()})),i(m,A(q,{get when(){return Me(()=>!!g())()&&g().length>0},get children(){var k=E2(),B=k.firstChild,O=B.nextSibling;return i(O,A(Ne,{get each(){return g()},children:T=>{const I=a(T.type);return(()=>{var M=D2(),P=M.firstChild,L=P.firstChild,H=L.firstChild,w=H.firstChild,N=w.firstChild,z=H.nextSibling,V=z.firstChild,Q=V.firstChild,F=Q.nextSibling,U=F.nextSibling,W=V.nextSibling,ce=W.firstChild,D=ce.nextSibling;D.nextSibling;var j=L.nextSibling,K=j.firstChild,ee=K.nextSibling,ne=ee.nextSibling,te=ne.nextSibling;return i(Q,()=>T.name),i(F,()=>T.enabled?"Enabled":"Disabled"),i(U,()=>T.status),i(W,()=>I?.name||T.type,D),i(W,()=>new Date(T.createdAt).toLocaleDateString(),null),K.$$click=()=>x(T),i(K,()=>n()===T.id?"Testing...":"Test"),ee.$$click=()=>o(T),i(ee,()=>T.enabled?"Disable":"Enable"),ne.$$click=()=>b(T),te.$$click=()=>d(T),re(le=>{var Z=`${I?.color||"#6366f1"}20`,Y=I?.color||"#6366f1",se=I?.icon||"",G=T.enabled?"#22c55e20":"#6b728020",ie=T.enabled?"#22c55e":"#6b7280",X=`${c(T.status)}20`,fe=c(T.status),Ae=n()===T.id,Ce=T.enabled?"#ef444420":"#22c55e20",$e=T.enabled?"#ef4444":"#22c55e";return Z!==le.e&&oe(H,"background",le.e=Z),Y!==le.t&&oe(w,"color",le.t=Y),se!==le.a&&Xe(N,"d",le.a=se),G!==le.o&&oe(F,"background",le.o=G),ie!==le.i&&oe(F,"color",le.i=ie),X!==le.n&&oe(U,"background",le.n=X),fe!==le.s&&oe(U,"color",le.s=fe),Ae!==le.h&&(K.disabled=le.h=Ae),Ce!==le.r&&oe(ee,"background",le.r=Ce),$e!==le.d&&oe(ee,"color",le.d=$e),le},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0}),M})()}})),k}}),null),i(m,A(q,{get when(){return Me(()=>!!r())()&&e()},children:()=>{const k=ys.find(B=>B.id===e());return k?(()=>{var B=T2(),O=B.firstChild,T=O.firstChild,I=T.firstChild,M=I.firstChild,P=M.nextSibling;P.nextSibling;var L=I.nextSibling,H=T.nextSibling,w=H.firstChild,N=w.firstChild,z=N.nextSibling,V=w.nextSibling,Q=V.firstChild,F=Q.nextSibling,U=F.firstChild;return B.$$click=()=>l(!1),O.$$click=W=>W.stopPropagation(),i(I,()=>u()?"Edit":"Add",M),i(I,()=>k.name,P),L.$$click=()=>l(!1),z.$$input=W=>s({...h(),name:W.currentTarget.value}),i(H,A(Ne,{get each(){return k.fields},children:W=>(()=>{var ce=P2(),D=ce.firstChild,j=D.firstChild;return i(D,()=>W.label,j),i(D,(()=>{var K=Me(()=>!!W.required);return()=>K()&&I2()})(),null),i(ce,(()=>{var K=Me(()=>W.type==="select");return()=>K()?(()=>{var ee=B2();return ee.firstChild,ee.addEventListener("change",ne=>s({...h(),[W.key]:ne.currentTarget.value})),i(ee,A(Ne,{get each(){return W.options},children:ne=>(()=>{var te=O2();return i(te,()=>ne.label),re(()=>te.value=ne.value),te})()}),null),re(()=>ee.value=h()[W.key]||""),ee})():(()=>{var ee=H2();return ee.$$input=ne=>s({...h(),[W.key]:ne.currentTarget.value}),re(ne=>{var te=W.type,le=W.placeholder,Z=W.required;return te!==ne.e&&Xe(ee,"type",ne.e=te),le!==ne.t&&Xe(ee,"placeholder",ne.t=le),Z!==ne.a&&(ee.required=ne.a=Z),ne},{e:void 0,t:void 0,a:void 0}),re(()=>ee.value=h()[W.key]||""),ee})()})(),null),ce})()}),V),Q.$$click=()=>l(!1),F.$$click=C,i(F,()=>u()?"Update":"Create",U),re(()=>Xe(z,"placeholder",k.name)),re(()=>z.value=h().name||""),B})():null}}),null),m})()};Qe(["click","input"]);var z2=R('<div class="card p-8 text-center"><div class=text-lg style=color:var(--text-muted)>Loading MCP server status...'),F2=R('<div class="card p-8 text-center"><div class="text-lg font-medium mb-2"style=color:var(--text-primary)>MCP Server Not Available</div><p class=text-sm style=color:var(--text-muted)>The MCP server is not running or not accessible. Make sure KubeGraf is running and the MCP endpoint is enabled.'),j2=R("<div class=text-sm style=color:var(--text-secondary)> v"),U2=R('<div class="card p-6"><div class="flex items-center gap-3 mb-4"><div class="w-3 h-3 rounded-full bg-green-500"></div><div><div class=font-semibold style=color:var(--text-primary)>MCP Server Connected</div></div></div><div class=mb-4><h3 class="text-lg font-semibold mb-2"style=color:var(--text-primary)>Available Tools (<!>)</h3><p class=text-sm style=color:var(--text-secondary)>These tools are available for AI agents to interact with your Kubernetes cluster.</p></div><div class="grid grid-cols-1 md:grid-cols-2 gap-4">'),V2=R('<div class="space-y-3 mb-4"><div class="text-sm font-medium"style=color:var(--text-primary)>Parameters:'),W2=R('<div class="mt-4 p-4 rounded border"style=background:var(--bg-secondary);borderColor:var(--border-color)><div class="text-sm font-medium mb-2"style=color:var(--text-primary)>Result:</div><pre class="text-xs whitespace-pre-wrap"style=color:var(--text-secondary)>'),q2=R('<div class="card p-6"><div class="flex items-center justify-between mb-4"><h3 class="text-lg font-semibold"style=color:var(--text-primary)></h3><button class="px-3 py-1 rounded text-sm"style=background:var(--bg-secondary);color:var(--text-primary)>Close</button></div><p class="text-sm mb-4"style=color:var(--text-secondary)></p><button class="px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50"style=background:var(--accent-primary);color:white>'),K2=R(`<div class="space-y-6 p-6"style=minHeight:100vh;background:var(--bg-primary)><div class="flex items-center justify-between"><div><h1 class="text-3xl font-bold"style=color:var(--text-primary)>AI Agents</h1><p class="text-sm mt-2"style=color:var(--text-secondary)>AI agents powered by Model Context Protocol (MCP) to interact with your Kubernetes cluster</p></div><button class="px-4 py-2 rounded-lg font-medium transition-colors"style=background:var(--accent-primary);color:white>Refresh</button></div><div class="card p-6"><h3 class="text-lg font-semibold mb-3"style=color:var(--text-primary)>Setup Instructions</h3><div class="space-y-3 text-sm"style=color:var(--text-secondary)><div><strong>For Claude Desktop:</strong><pre class="mt-2 p-3 rounded bg-gray-900 text-white text-xs overflow-x-auto">{
  "mcpServers": {
    "kubegraf": {
      "command": "kubegraf",
      "args": ["mcp", "serve"],
      "env": {
        "KUBECONFIG": "/path/to/kubeconfig"
      }
    }
  }
}</pre></div><div class=mt-4><strong>Endpoint:</strong> <code class="px-2 py-1 rounded bg-gray-100 dark:bg-gray-800">/api/mcp</code></div><div><strong>Protocol:</strong> MCP (Model Context Protocol) - JSON-RPC 2.0`),Y2=R('<div class="p-4 rounded-lg border cursor-pointer hover:opacity-80 transition-opacity"style=borderColor:var(--border-color)><div class="font-semibold mb-1"style=color:var(--text-primary)></div><div class=text-sm style=color:var(--text-secondary)>'),G2=R('<span class="ml-2 text-xs"style=color:var(--text-muted)>- '),J2=R('<div><label class="block text-sm mb-1"style=color:var(--text-secondary)></label><input class="w-full px-3 py-2 rounded border"style=background:var(--bg-primary);borderColor:var(--border-color);color:var(--text-primary)>');const X2=()=>{const[e,{refetch:t}]=qe(async()=>{try{const _=await fetch("/api/mcp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:1,method:"initialize",params:{}})});if(!_.ok)return{available:!1,tools:[]};const b=await _.json(),C=await fetch("/api/mcp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:2,method:"tools/list",params:{}})});return C.ok?{available:!0,tools:(await C.json()).result?.tools||[],serverInfo:b.result?.serverInfo}:{available:!0,tools:[],serverInfo:b.result?.serverInfo}}catch(_){return console.error("MCP connection error:",_),{available:!1,tools:[]}}}),[r,l]=J(null),[u,v]=J(""),[h,s]=J(!1),[n,f]=J({}),g=async _=>{l(_),v(""),s(!0);try{const b=_.inputSchema?.properties||{},C={},x=n();for(const[a,c]of Object.entries(b))x[a]!==void 0&&(C[a]=x[a]);const o=await fetch("/api/mcp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:Date.now(),method:"tools/call",params:{name:_.name,arguments:C}})});if(!o.ok)throw new Error(`HTTP ${o.status}`);const d=await o.json();if(d.error)v(`Error: ${d.error.message}`);else{const c=(d.result?.content||[]).map(m=>m.text||"").join(`
`);v(c||JSON.stringify(d.result,null,2))}}catch(b){v(`Error: ${b.message}`)}finally{s(!1)}},p=(_,b)=>{f(C=>({...C,[_]:b}))};return(()=>{var _=K2(),b=_.firstChild,C=b.firstChild,x=C.firstChild;x.nextSibling;var o=C.nextSibling,d=b.nextSibling,a=d.firstChild;return a.nextSibling,o.$$click=()=>t(),i(_,A(q,{get when(){return e.loading},get children(){var c=z2();return c.firstChild,c}}),d),i(_,A(q,{get when(){return Me(()=>!e.loading)()&&!e()?.available},get children(){var c=F2(),m=c.firstChild;return m.nextSibling,c}}),d),i(_,A(q,{get when(){return Me(()=>!e.loading)()&&e()?.available},get children(){return[(()=>{var c=U2(),m=c.firstChild,$=m.firstChild,S=$.nextSibling;S.firstChild;var E=m.nextSibling,y=E.firstChild,k=y.firstChild,B=k.nextSibling;B.nextSibling,y.nextSibling;var O=E.nextSibling;return i(S,A(q,{get when(){return e()?.serverInfo},get children(){var T=j2(),I=T.firstChild;return i(T,()=>e()?.serverInfo?.name,I),i(T,()=>e()?.serverInfo?.version,null),T}}),null),i(y,()=>e()?.tools.length||0,B),i(O,A(Ne,{get each(){return e()?.tools||[]},children:T=>(()=>{var I=Y2(),M=I.firstChild,P=M.nextSibling;return I.$$click=()=>l(T),i(M,()=>T.name),i(P,()=>T.description),re(L=>oe(I,"background",r()?.name===T.name?"var(--bg-secondary)":"var(--bg-tertiary)")),I})()})),c})(),A(q,{get when(){return r()},get children(){var c=q2(),m=c.firstChild,$=m.firstChild,S=$.nextSibling,E=m.nextSibling,y=E.nextSibling;return i($,()=>r()?.name),S.$$click=()=>l(null),i(E,()=>r()?.description),i(c,A(q,{get when(){return r()?.inputSchema?.properties},get children(){var k=V2();return k.firstChild,i(k,A(Ne,{get each(){return Object.entries(r()?.inputSchema?.properties||{})},children:([B,O])=>(()=>{var T=J2(),I=T.firstChild,M=I.nextSibling;return i(I,B,null),i(I,A(q,{get when(){return O.description},get children(){var P=G2();return P.firstChild,i(P,()=>O.description,null),P}}),null),M.$$input=P=>{const L=O.type==="integer"?parseInt(P.currentTarget.value)||0:P.currentTarget.value;p(B,L)},re(P=>{var L=O.type==="integer"?"number":"text",H=O.type==="integer"?"0":"Enter value...";return L!==P.e&&Xe(M,"type",P.e=L),H!==P.t&&Xe(M,"placeholder",P.t=H),P},{e:void 0,t:void 0}),re(()=>M.value=n()[B]||""),T})()}),null),k}}),y),y.$$click=()=>g(r()),i(y,()=>h()?"Executing...":"Execute Tool"),i(c,A(q,{get when(){return u()},get children(){var k=W2(),B=k.firstChild,O=B.nextSibling;return i(O,u),k}}),null),re(()=>y.disabled=h()),c}})]}}),d),_})()};Qe(["click","input"]);var Z2=R('<div class="p-8 text-center text-gray-400"><div class="text-6xl mb-4">ðŸŽ‰</div><div class="text-xl font-medium">No active incidents</div><div class="text-sm mt-2">Your cluster is running smoothly!'),eo=R('<div class="divide-y divide-gray-700">'),Q2=R('<div class="bg-gray-800 rounded-lg border border-gray-700"><div class="p-4 border-b border-gray-700 flex justify-between items-center"><h2 class="text-xl font-bold text-white">Active Incidents</h2><button class="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded text-white text-sm">Refresh'),eb=R('<div class="p-8 text-center text-gray-400"><div class="text-6xl mb-4">ðŸ“‹</div><div class="text-xl font-medium">No actions recorded</div><div class="text-sm mt-2">Actions will appear here when incidents are remediated'),tb=R('<div class="bg-gray-800 rounded-lg border border-gray-700"><div class="p-4 border-b border-gray-700 flex justify-between items-center"><h2 class="text-xl font-bold text-white">Remediation Actions</h2><button class="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded text-white text-sm">Refresh'),rb=R('<div class="p-6 space-y-6"><div class="flex items-center justify-between"><div><h1 class="text-3xl font-bold text-white mb-2">SRE Agent</h1><p class=text-gray-400>Intelligent incident detection and automated remediation</p></div></div><div class="flex space-x-2 border-b border-gray-700"><button>Overview</button><button>Incidents</button><button>Actions</button><button>Configuration'),sb=R("<button>"),ib=R('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"><div class="bg-gray-800 rounded-lg p-6 border border-gray-700"><div class="text-gray-400 text-sm mb-2">Incidents Detected</div><div class="text-3xl font-bold text-white"></div></div><div class="bg-gray-800 rounded-lg p-6 border border-gray-700"><div class="text-gray-400 text-sm mb-2">Auto Remediations</div><div class="text-3xl font-bold text-green-400"></div></div><div class="bg-gray-800 rounded-lg p-6 border border-gray-700"><div class="text-gray-400 text-sm mb-2">Success Rate</div><div class="text-3xl font-bold text-blue-400">%</div></div><div class="bg-gray-800 rounded-lg p-6 border border-gray-700"><div class="text-gray-400 text-sm mb-2">Escalations</div><div class="text-3xl font-bold text-orange-400"></div></div><div class="bg-gray-800 rounded-lg p-6 border border-gray-700"><div class="text-gray-400 text-sm mb-2">Incidents Resolved</div><div class="text-3xl font-bold text-white"></div></div><div class="bg-gray-800 rounded-lg p-6 border border-gray-700"><div class="text-gray-400 text-sm mb-2">Avg Resolution Time</div><div class="text-2xl font-bold text-white">s</div></div><div class="bg-gray-800 rounded-lg p-6 border border-gray-700"><div class="text-gray-400 text-sm mb-2">Batch SLO Met</div><div class="text-3xl font-bold text-green-400"></div></div><div class="bg-gray-800 rounded-lg p-6 border border-gray-700"><div class="text-gray-400 text-sm mb-2">Actions This Hour</div><div class="text-3xl font-bold text-purple-400"></div><div class="text-xs text-gray-500 mt-1">/ <!> max'),nb=R('<span class="px-2 py-1 bg-green-900/30 text-green-400 rounded text-xs">Auto-remediated'),lb=R('<div class="p-4 hover:bg-gray-700/50 transition-colors"><div class="flex items-start justify-between mb-2"><div class=flex-1><div class="flex items-center space-x-2 mb-1"><span></span><span></span></div><h3 class="text-lg font-medium text-white"></h3><p class="text-gray-400 text-sm mt-1"></p></div></div><div class="flex items-center space-x-4 text-sm text-gray-500 mt-2"><span>Resource: </span><span>Namespace: </span><span>Detected: '),ob=R("<span class=text-green-400>âœ“"),ab=R("<span class=text-red-400>âœ—"),cb=R('<span class="px-2 py-1 bg-purple-900/30 text-purple-400 rounded text-xs">Automated'),db=R('<div class="p-4 hover:bg-gray-700/50 transition-colors"><div class="flex items-start justify-between"><div class=flex-1><div class="flex items-center space-x-2 mb-1"><span class="font-medium text-white"></span></div><p class="text-gray-400 text-sm"></p></div><span class="text-gray-500 text-sm">'),hb=R('<button class="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded text-white">Edit Configuration'),ub=R('<div class=space-x-2><button class="px-4 py-2 bg-gray-600 hover:bg-gray-700 rounded text-white">Cancel</button><button class="px-4 py-2 bg-green-600 hover:bg-green-700 rounded text-white">Save'),ii=R('<input type=checkbox class="w-5 h-5">'),xs=R("<span class=text-white>"),fb=R('<input type=number class="w-full bg-gray-700 text-white rounded px-3 py-2 border border-gray-600">'),gb=R('<div class="bg-gray-800 rounded-lg border border-gray-700 p-6"><div class="flex justify-between items-center mb-6"><h2 class="text-xl font-bold text-white">Agent Configuration</h2></div><div class=space-y-4><div class="grid grid-cols-2 gap-4"><div><label class="block text-gray-400 text-sm mb-2">Auto Remediation</label></div><div><label class="block text-gray-400 text-sm mb-2">Learning Mode</label></div><div><label class="block text-gray-400 text-sm mb-2">Notifications</label></div><div><label class="block text-gray-400 text-sm mb-2">Batch Monitoring</label></div><div class=col-span-2><label class="block text-gray-400 text-sm mb-2">Max Actions Per Hour</label></div></div><div class="mt-6 pt-6 border-t border-gray-700"><h3 class="text-lg font-medium text-white mb-4">Auto-Remediate Types</h3><div class="flex flex-wrap gap-2"></div></div><div class="mt-6 pt-6 border-t border-gray-700"><h3 class="text-lg font-medium text-white mb-2">Batch SLO</h3><p class=text-gray-400>'),pb=R('<span class="px-3 py-1 bg-blue-900/30 text-blue-400 rounded-full text-sm">');const vb=()=>{const[e,{refetch:t}]=qe(async()=>{const d=await fetch("/api/sre/status");if(!d.ok)throw new Error("Failed to fetch SRE status");return d.json()}),[r,{refetch:l}]=qe(async()=>{const d=await fetch("/api/sre/incidents");if(!d.ok)throw new Error("Failed to fetch incidents");return d.json()}),[u,{refetch:v}]=qe(async()=>{const d=await fetch("/api/sre/actions");if(!d.ok)throw new Error("Failed to fetch actions");return d.json()}),[h,s]=J("overview"),[n,f]=J(!1),[g,p]=J({}),_=async()=>{const d=e();if(!d)return;(await fetch("/api/sre/enable",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:!d.enabled})})).ok&&t()},b=async()=>{(await fetch("/api/sre/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g())})).ok&&(f(!1),t())},C=()=>{const d=e();d&&(p({autoRemediate:d.autoRemediate,notificationEnabled:d.notificationEnabled,batchMonitoring:d.batchMonitoring,maxAutoActionsPerHour:d.maxAutoActionsPerHour,learningEnabled:d.learningEnabled}),f(!0))},x=d=>{switch(d.toLowerCase()){case"critical":return"text-red-400 bg-red-900/20 border-red-700";case"high":return"text-orange-400 bg-orange-900/20 border-orange-700";case"medium":return"text-yellow-400 bg-yellow-900/20 border-yellow-700";case"low":return"text-blue-400 bg-blue-900/20 border-blue-700";default:return"text-gray-400 bg-gray-900/20 border-gray-700"}},o=d=>{switch(d.toLowerCase()){case"resolved":return"text-green-400";case"active":return"text-red-400";case"investigating":return"text-yellow-400";default:return"text-gray-400"}};return(()=>{var d=rb(),a=d.firstChild;a.firstChild;var c=a.nextSibling,m=c.firstChild,$=m.nextSibling,S=$.nextSibling,E=S.nextSibling;return i(a,A(q,{get when(){return e()},children:y=>(()=>{var k=sb();return k.$$click=_,i(k,()=>y().enabled?"âœ“ Enabled":"Disabled"),re(()=>He(k,`px-6 py-2 rounded-lg font-medium transition-colors ${y().enabled?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-600 hover:bg-gray-700 text-white"}`)),k})()}),null),m.$$click=()=>s("overview"),$.$$click=()=>s("incidents"),S.$$click=()=>s("actions"),E.$$click=()=>s("config"),i(d,A(q,{get when(){return Me(()=>h()==="overview")()&&e()},children:y=>(()=>{var k=ib(),B=k.firstChild,O=B.firstChild,T=O.nextSibling,I=B.nextSibling,M=I.firstChild,P=M.nextSibling,L=I.nextSibling,H=L.firstChild,w=H.nextSibling,N=w.firstChild,z=L.nextSibling,V=z.firstChild,Q=V.nextSibling,F=z.nextSibling,U=F.firstChild,W=U.nextSibling,ce=F.nextSibling,D=ce.firstChild,j=D.nextSibling,K=j.firstChild,ee=ce.nextSibling,ne=ee.firstChild,te=ne.nextSibling,le=ee.nextSibling,Z=le.firstChild,Y=Z.nextSibling,se=Y.nextSibling,G=se.firstChild,ie=G.nextSibling;return ie.nextSibling,i(T,()=>y().metrics.incidentsDetected),i(P,()=>y().metrics.autoRemediations),i(w,()=>y().metrics.successRate.toFixed(1),N),i(Q,()=>y().metrics.escalations),i(W,()=>y().metrics.incidentsResolved),i(j,()=>Math.round(y().metrics.avgResolutionTime/1e3),K),i(te,()=>y().metrics.batchSLOMet),i(Y,()=>y().metrics.actionsThisHour),i(se,()=>y().maxAutoActionsPerHour,ie),k})()}),null),i(d,A(q,{get when(){return h()==="incidents"},get children(){var y=Q2(),k=y.firstChild,B=k.firstChild,O=B.nextSibling;return ar(O,"click",l,!0),i(y,A(q,{get when(){return r()?.incidents.length===0},get children(){return Z2()}}),null),i(y,A(q,{get when(){return Me(()=>!!r())()&&r().incidents.length>0},get children(){var T=eo();return i(T,A(Ne,{get each(){return r().incidents},children:I=>(()=>{var M=lb(),P=M.firstChild,L=P.firstChild,H=L.firstChild,w=H.firstChild,N=w.nextSibling,z=H.nextSibling,V=z.nextSibling,Q=P.nextSibling,F=Q.firstChild;F.firstChild;var U=F.nextSibling;U.firstChild;var W=U.nextSibling;return W.firstChild,i(w,()=>I.severity),i(N,()=>I.status),i(H,A(q,{get when(){return I.autoRemediated},get children(){return nb()}}),null),i(z,()=>I.title),i(V,()=>I.description),i(F,()=>I.resource,null),i(U,()=>I.namespace,null),i(W,()=>new Date(I.detectedAt).toLocaleString(),null),re(ce=>{var D=`px-2 py-1 rounded text-xs font-medium border ${x(I.severity)}`,j=`font-medium ${o(I.status)}`;return D!==ce.e&&He(w,ce.e=D),j!==ce.t&&He(N,ce.t=j),ce},{e:void 0,t:void 0}),M})()})),T}}),null),y}}),null),i(d,A(q,{get when(){return h()==="actions"},get children(){var y=tb(),k=y.firstChild,B=k.firstChild,O=B.nextSibling;return ar(O,"click",v,!0),i(y,A(q,{get when(){return u()?.actions.length===0},get children(){return eb()}}),null),i(y,A(q,{get when(){return Me(()=>!!u())()&&u().actions.length>0},get children(){var T=eo();return i(T,A(Ne,{get each(){return u().actions},children:I=>(()=>{var M=db(),P=M.firstChild,L=P.firstChild,H=L.firstChild,w=H.firstChild,N=H.nextSibling,z=L.nextSibling;return i(H,A(q,{get when(){return I.success},get children(){return ob()}}),w),i(H,A(q,{get when(){return!I.success},get children(){return ab()}}),w),i(w,()=>I.action),i(H,A(q,{get when(){return I.automated},get children(){return cb()}}),null),i(N,()=>I.details),i(z,()=>new Date(I.timestamp).toLocaleString()),M})()})),T}}),null),y}}),null),i(d,A(q,{get when(){return Me(()=>h()==="config")()&&e()},children:y=>(()=>{var k=gb(),B=k.firstChild;B.firstChild;var O=B.nextSibling,T=O.firstChild,I=T.firstChild;I.firstChild;var M=I.nextSibling;M.firstChild;var P=M.nextSibling;P.firstChild;var L=P.nextSibling;L.firstChild;var H=L.nextSibling;H.firstChild;var w=T.nextSibling,N=w.firstChild,z=N.nextSibling,V=w.nextSibling,Q=V.firstChild,F=Q.nextSibling;return i(B,A(q,{get when(){return!n()},get children(){var U=hb();return U.$$click=C,U}}),null),i(B,A(q,{get when(){return n()},get children(){var U=ub(),W=U.firstChild,ce=W.nextSibling;return W.$$click=()=>f(!1),ce.$$click=b,U}}),null),i(I,A(q,{get when(){return n()},get children(){var U=ii();return U.addEventListener("change",W=>p({...g(),autoRemediate:W.target.checked})),re(()=>U.checked=g().autoRemediate),U}}),null),i(I,A(q,{get when(){return!n()},get children(){var U=xs();return i(U,()=>y().autoRemediate?"Enabled":"Disabled"),U}}),null),i(M,A(q,{get when(){return n()},get children(){var U=ii();return U.addEventListener("change",W=>p({...g(),learningEnabled:W.target.checked})),re(()=>U.checked=g().learningEnabled),U}}),null),i(M,A(q,{get when(){return!n()},get children(){var U=xs();return i(U,()=>y().learningEnabled?"Enabled":"Disabled"),U}}),null),i(P,A(q,{get when(){return n()},get children(){var U=ii();return U.addEventListener("change",W=>p({...g(),notificationEnabled:W.target.checked})),re(()=>U.checked=g().notificationEnabled),U}}),null),i(P,A(q,{get when(){return!n()},get children(){var U=xs();return i(U,()=>y().notificationEnabled?"Enabled":"Disabled"),U}}),null),i(L,A(q,{get when(){return n()},get children(){var U=ii();return U.addEventListener("change",W=>p({...g(),batchMonitoring:W.target.checked})),re(()=>U.checked=g().batchMonitoring),U}}),null),i(L,A(q,{get when(){return!n()},get children(){var U=xs();return i(U,()=>y().batchMonitoring?"Enabled":"Disabled"),U}}),null),i(H,A(q,{get when(){return n()},get children(){var U=fb();return U.addEventListener("change",W=>p({...g(),maxAutoActionsPerHour:parseInt(W.target.value)})),re(()=>U.value=g().maxAutoActionsPerHour),U}}),null),i(H,A(q,{get when(){return!n()},get children(){var U=xs();return i(U,()=>y().maxAutoActionsPerHour),U}}),null),i(z,A(Ne,{get each(){return y().autoRemediateTypes},children:U=>(()=>{var W=pb();return i(W,U),W})()})),i(F,()=>y().batchSLO),k})()}),null),re(y=>{var k=`px-4 py-2 font-medium transition-colors ${h()==="overview"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-gray-300"}`,B=`px-4 py-2 font-medium transition-colors ${h()==="incidents"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-gray-300"}`,O=`px-4 py-2 font-medium transition-colors ${h()==="actions"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-gray-300"}`,T=`px-4 py-2 font-medium transition-colors ${h()==="config"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-gray-300"}`;return k!==y.e&&He(m,y.e=k),B!==y.t&&He($,y.t=B),O!==y.a&&He(S,y.a=O),T!==y.o&&He(E,y.o=T),y},{e:void 0,t:void 0,a:void 0,o:void 0}),d})()};Qe(["click"]);var mb=R("<option disabled>Loading pods..."),_b=R("<option disabled>Loading containers..."),bb=R("<option disabled>No containers found"),yb=R('<div class="p-4 bg-red-500/10 border-l-4 border-red-500"><p style=color:var(--error-color)>'),xb=R('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading logs...'),$b=R('<div class="p-8 text-center"style=color:var(--text-muted)><svg class="w-12 h-12 mx-auto mb-4 opacity-50"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg><p>Select a pod and container, then click "Fetch Logs"'),wb=R('<div id=logs-container class="p-4 font-mono text-sm overflow-auto"style="background:#0d1117;color:#c9d1d9;max-height:calc(100vh - 400px);white-space:pre-wrap;word-break:break-word">'),Sb=R('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Logs</h1><p style=color:var(--text-secondary)>View and stream pod container logs</p></div><div class="flex items-center gap-2"><button class="px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"style=background:var(--accent-primary);color:white></button><button class="px-4 py-2 rounded-lg text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed"style=background:var(--bg-tertiary);color:var(--text-primary)>Download</button></div></div><div class="card p-4"><div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Namespace</label><select class="w-full px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option></option></select></div><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Pod</label><select class="w-full px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value>Select a pod</option></select></div><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Container</label><select class="w-full px-3 py-2 rounded-lg text-sm disabled:opacity-50"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value>Select a container</option></select></div><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Tail Lines</label><input type=number min=10 max=10000 class="w-full px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div></div><div class="flex items-center gap-4 mt-4"><label class="flex items-center gap-2 cursor-pointer"><input type=checkbox class="w-4 h-4 rounded"><span class=text-sm style=color:var(--text-secondary)>Follow logs (stream)</span></label></div></div><div class="card p-4"><input type=text placeholder="Search logs..."class="w-full px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div class="card overflow-hidden">'),Cb=R("<option> (<!>)"),kb=R("<option>");const Ab=()=>{console.log("[Logs] Component rendering");const[e,t]=J(""),[r,l]=J(""),[u,v]=J(""),[h,s]=J(100),[n,f]=J(!1),[g,p]=J(""),[_,b]=J(""),[C,x]=J(!1),[o,d]=J(null);let a=null;const[c]=qe(()=>tt(),async O=>{try{console.log("[Logs] Fetching pods for namespace:",O);const T=O==="_all"?void 0:O,I=await Re.getPods(T);return console.log("[Logs] Fetched pods:",I?.length||0),Array.isArray(I)?I:[]}catch(T){return console.error("[Logs] Failed to fetch pods:",T),[]}}),[m]=qe(()=>{const O=e(),T=u()||tt();return O?{pod:O,namespace:(T==="_all"?void 0:T)||"default"}:null},async O=>{if(!O)return null;try{console.log("[Logs] Fetching pod details:",O);const T=await Re.getPodDetails(O.pod,O.namespace);return console.log("[Logs] Pod details:",T),T}catch(T){return console.error("[Logs] Failed to fetch pod details:",T),null}}),$=ze(()=>{try{const O=m();if(!O||!O.containers)return[];if(!Array.isArray(O.containers))return console.warn("[Logs] podDetails.containers is not an array:",typeof O.containers,O.containers),[];const T=O.containers.map(I=>I.name||I).filter(Boolean);return console.log("[Logs] Containers:",T),T}catch(O){return console.error("[Logs] Error in containers memo:",O),[]}}),S=()=>{a&&(a.close(),a=null)},E=async()=>{const O=e(),T=r(),I=u()||tt();if(!O||!T){d("Please select a pod and container");return}S(),x(!0),d(null);const L=`/api/pod/logs?name=${O}&namespace=${(I==="_all"?void 0:I)||"default"}&container=${T}&tail=${h()}${n()?"&follow=true":""}`;if(n())b(""),a=new EventSource(L),a.onmessage=H=>{b(w=>w+H.data+`
`),x(!1),setTimeout(()=>{const w=document.getElementById("logs-container");w&&(w.scrollTop=w.scrollHeight)},50)},a.onerror=()=>{d("Stream connection lost"),x(!1),S()},a.onopen=()=>{x(!1)};else try{const H=await fetch(L);if(!H.ok){const N=await H.text();throw new Error(N||`HTTP ${H.status}`)}const w=await H.json();b(w.logs||"No logs available")}catch(H){d(H.message||"Failed to fetch logs"),b("")}finally{x(!1)}},y=ze(()=>{const O=_(),T=g().toLowerCase();return T?O.split(`
`).filter(I=>I.toLowerCase().includes(T)).join(`
`):O}),k=()=>{const O=new Blob([_()],{type:"text/plain"}),T=URL.createObjectURL(O),I=document.createElement("a");I.href=T,I.download=`${e()}-${r()||"logs"}.txt`,I.click(),URL.revokeObjectURL(T)};ze(()=>{const O=$();O.length>0&&!r()&&l(O[0])}),Xt(()=>{console.log("[Logs] Component mounted successfully")}),or(()=>{S()});const B=ze(()=>{try{if(c.loading)return[];if(c.error)return console.error("[Logs] pods resource error:",c.error),[];const O=c();return O==null?[]:Array.isArray(O)?O:(console.warn("[Logs] pods() returned non-array:",typeof O,O),[])}catch(O){return console.error("[Logs] Error in podsList memo:",O),[]}});return console.log("[Logs] Component rendering - RETURNING JSX"),(()=>{var O=Sb(),T=O.firstChild,I=T.firstChild,M=I.firstChild;M.nextSibling;var P=I.nextSibling,L=P.firstChild,H=L.nextSibling,w=T.nextSibling,N=w.firstChild,z=N.firstChild,V=z.firstChild,Q=V.nextSibling,F=Q.firstChild,U=z.nextSibling,W=U.firstChild,ce=W.nextSibling;ce.firstChild;var D=U.nextSibling,j=D.firstChild,K=j.nextSibling;K.firstChild;var ee=D.nextSibling,ne=ee.firstChild,te=ne.nextSibling,le=N.nextSibling,Z=le.firstChild,Y=Z.firstChild;Y.nextSibling;var se=w.nextSibling,G=se.firstChild,ie=se.nextSibling;return L.$$click=E,i(L,()=>C()?"Loading...":"Fetch Logs"),H.$$click=k,Q.addEventListener("change",X=>{v(X.currentTarget.value),t(""),l("")}),i(F,(()=>{var X=Me(()=>tt()==="_all");return()=>X()?"All Namespaces":tt()})()),ce.addEventListener("change",X=>{t(X.currentTarget.value),l("")}),i(ce,A(q,{get when(){return c.loading},get children(){return mb()}}),null),i(ce,A(q,{get when(){return Me(()=>!!(!c.loading&&Array.isArray(B())))()&&B().length>0},get children(){return A(Ne,{get each(){return B()},children:X=>(()=>{var fe=Cb(),Ae=fe.firstChild,Ce=Ae.nextSibling;return Ce.nextSibling,i(fe,()=>X.name,Ae),i(fe,()=>X.namespace||"default",Ce),re(()=>fe.value=X.name),fe})()})}}),null),K.addEventListener("change",X=>l(X.currentTarget.value)),i(K,A(q,{get when(){return m.loading},get children(){return _b()}}),null),i(K,A(q,{get when(){return Me(()=>!m.loading)()&&$().length>0},get children(){return A(Ne,{get each(){return $()},children:X=>(()=>{var fe=kb();return fe.value=X,i(fe,X),fe})()})}}),null),i(K,A(q,{get when(){return Me(()=>!!(!m.loading&&e()))()&&$().length===0},get children(){return bb()}}),null),te.addEventListener("change",X=>s(parseInt(X.currentTarget.value)||100)),Y.addEventListener("change",X=>{f(X.currentTarget.checked),X.currentTarget.checked&&e()&&r()?E():S()}),G.$$input=X=>p(X.currentTarget.value),i(ie,A(q,{get when(){return o()},get children(){var X=yb(),fe=X.firstChild;return i(fe,o),X}}),null),i(ie,A(q,{get when(){return Me(()=>!!C())()&&!_()},get children(){var X=xb(),fe=X.firstChild;return fe.nextSibling,X}}),null),i(ie,A(q,{get when(){return Me(()=>!_()&&!C())()&&!o()},get children(){return $b()}}),null),i(ie,A(q,{get when(){return _()},get children(){var X=wb();return i(X,()=>y()||"No logs available"),X}}),null),re(X=>{var fe=!e()||!r()||C(),Ae=!_(),Ce=!e(),$e=!e()||!r();return fe!==X.e&&(L.disabled=X.e=fe),Ae!==X.t&&(H.disabled=X.t=Ae),Ce!==X.a&&(K.disabled=X.a=Ce),$e!==X.o&&(Y.disabled=X.o=$e),X},{e:void 0,t:void 0,a:void 0,o:void 0}),re(()=>F.value=tt()),re(()=>Q.value=u()||tt()),re(()=>ce.value=e()),re(()=>K.value=r()),re(()=>te.value=h()),re(()=>Y.checked=n()),re(()=>G.value=g()),O})()};Qe(["click","input"]);var to=R('<button class="px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"style=background:var(--accent-primary);color:white>'),Mb=R("<span class=text-sm style=color:var(--text-muted)>Detection time: "),Eb=R('<div class="card p-4"><div class="flex items-center gap-4"><label class="text-sm font-medium"style=color:var(--text-secondary)>Filter by Severity:</label><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value>All Severities</option><option value=critical>Critical</option><option value=warning>Warning</option><option value=info>Info'),Lb=R('<div class="card p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Detecting anomalies...'),Rb=R("<div class=space-y-4>"),Db=R('<div class="flex items-center justify-center gap-2 mt-4"><button class="px-3 py-1 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed"style=background:var(--bg-secondary);color:var(--text-primary)>Previous</button><span class=text-sm style=color:var(--text-secondary)>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed"style=background:var(--bg-secondary);color:var(--text-primary)>Next'),Tb=R('<div class="card p-8 text-center"><svg class="w-16 h-16 mx-auto mb-4 opacity-50"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><p class="text-lg font-medium mb-2"style=color:var(--text-primary)>No Anomalies Detected</p><p style=color:var(--text-secondary)>Your cluster appears to be healthy!'),Pb=R('<div class="card p-4 bg-red-500/10 border-l-4 border-red-500"><p style=color:var(--error-color)>Error: '),Ib=R('<div class="card p-8 text-center"><div class="spinner mx-auto mb-2"></div><div class="flex flex-col items-center gap-2"><span style=color:var(--text-muted)>Loading ML recommendations...</span><p class=text-sm style=color:var(--text-muted)>This may take a few seconds'),Bb=R('<div class="card p-4 bg-red-500/10 border-l-4 border-red-500"><p style=color:var(--error-color)>Error: </p><p class="text-sm mt-2"style=color:var(--text-muted)>Tip: Run anomaly detection first to collect metrics, then try again.'),Ob=R('<div class="card p-8 text-center"style=color:var(--text-muted)><svg class="w-16 h-16 mx-auto mb-4 opacity-50"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg><p class="text-lg font-medium mb-2"style=color:var(--text-primary)>No ML Recommendations Yet</p><p class=text-sm>Recommendations will appear as the system learns from your cluster metrics.</p><p class="text-sm mt-2">The ML model needs historical data (at least 20-50 metric samples) to generate optimization suggestions.</p><p class="text-sm mt-1"style=color:var(--text-muted)>Metrics are collected automatically when you use the anomaly detection feature.'),Hb=R('<div class=space-y-4><div class="card p-4"><div class=text-sm style=color:var(--text-secondary)>Total Recommendations: <strong style=color:var(--text-primary)>'),Nb=R('<div class="space-y-6 p-6"style=minHeight:100vh;background:var(--bg-primary)><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-3xl font-bold"style=color:var(--text-primary)>AI/ML Insights</h1><p style=color:var(--text-secondary)>Anomaly detection and ML-powered recommendations</p></div><div class="flex items-center gap-2"></div></div><div class="flex gap-2 border-b"style=border-color:var(--border-color)><button>Anomaly Detection</button><button>ML Recommendations'),zb=R('<div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div class="card p-4"><div class=text-sm style=color:var(--text-secondary)>Total Anomalies</div><div class="text-2xl font-bold"style=color:var(--text-primary)></div></div><div class="card p-4"><div class=text-sm style=color:var(--text-secondary)>Critical</div><div class="text-2xl font-bold"style=color:#ef4444></div></div><div class="card p-4"><div class=text-sm style=color:var(--text-secondary)>Warning</div><div class="text-2xl font-bold"style=color:#f59e0b></div></div><div class="card p-4"><div class=text-sm style=color:var(--text-secondary)>Info</div><div class="text-2xl font-bold"style=color:#3b82f6>'),Fb=R('<button class="px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap"style=background:var(--accent-primary);color:white>'),jb=R('<div class="card p-4 border-l-4"><div class="flex items-start justify-between gap-4"><div class=flex-1><div class="flex items-center gap-2 mb-2"><span class=text-xl></span><span class="px-2 py-1 rounded text-xs font-medium uppercase"></span><span class=text-sm style=color:var(--text-secondary)></span><span class="text-sm font-mono"style=color:var(--text-muted)>Score: <!>%</span></div><h3 class="font-semibold mb-1"style=color:var(--text-primary)></h3><p class="text-sm mb-2"style=color:var(--text-secondary)><strong>Namespace:</strong> <!> | <strong>Pod:</strong> </p><p class="text-sm mb-2"style=color:var(--text-secondary)><strong>Recommendation:</strong> </p><div class=text-xs style=color:var(--text-muted)>Detected: '),Ub=R('<span class="px-2 py-1 rounded text-xs"style=background:#22c55e20;color:#22c55e>Auto-Apply Available'),Vb=R('<div class="mt-2 text-sm"style=color:#22c55e>ðŸ’° Estimated Savings: '),Wb=R('<button class="px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap"style=background:var(--accent-primary);color:white>Auto-Remediate'),qb=R('<div class="card p-4 border-l-4"><div class="flex items-start justify-between gap-4"><div class=flex-1><div class="flex items-center gap-2 mb-2 flex-wrap"><span class="px-2 py-1 rounded text-xs font-medium uppercase"></span><span class="px-2 py-1 rounded text-xs font-medium"></span><span class=text-sm style=color:var(--text-muted)>Confidence: <!>%</span></div><h3 class="font-semibold mb-1"style=color:var(--text-primary)></h3><p class="text-sm mb-2"style=color:var(--text-secondary)><strong>Resource:</strong> <!> | <strong>Namespace:</strong> </p><p class="text-sm mb-2"style=color:var(--text-secondary)></p><div class="flex items-center gap-4 text-sm mb-2"><div><span style=color:var(--text-muted)>Current: </span><strong style=color:var(--text-primary)></strong></div><div>â†’</div><div><span style=color:var(--text-muted)>Recommended: </span><strong style=color:var(--accent-primary)></strong></div></div><div class="mt-2 flex items-center gap-4 text-xs"style=color:var(--text-muted)><span>Impact: </span><span>Effort: </span></div><div class="text-xs mt-2"style=color:var(--text-muted)>Generated: </div></div><div class="flex flex-col gap-2"><button class="px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)">View Resource');const Kb=()=>{const[e,t]=J("anomalies"),[r,l]=J(""),[u,v]=J(0),[h,s]=J(null),[n,{refetch:f}]=qe(()=>{const $=r(),S=u(),E=St(),y=Gt();return{severity:$,key:S,context:E,refresh:y}},async({severity:$})=>{try{const S=await Re.detectAnomalies($||void 0);return console.log("[Anomalies] Fetched anomalies:",S.anomalies.length),S}catch(S){return console.error("[Anomalies] Failed to fetch anomalies:",S),{anomalies:[],stats:{total:0,critical:0,warning:0,info:0},duration:"0s"}}}),[g,p]=J(1),_=10,b=ze(()=>{const $=n()?.anomalies||[],S=(g()-1)*_,E=S+_;return{list:$.slice(S,E),total:$.length,pages:Math.ceil($.length/_)}}),C=async $=>{if(!$.autoRemediate){alert("Auto-remediation is not available for this anomaly type.");return}if(confirm(`Are you sure you want to auto-remediate this anomaly?

${$.message}

Recommendation: ${$.recommendation}`)){s($.id);try{const S=await Re.remediateAnomaly($.id);S.success?(alert(S.message||"Anomaly remediated successfully!"),v(E=>E+1)):alert("Failed to remediate anomaly.")}catch(S){alert(`Failed to remediate: ${S.message}`)}finally{s(null)}}},x=async $=>{if(!$.autoApply){alert("Auto-remediation is not available for this recommendation.");return}if(confirm(`Are you sure you want to apply this recommendation?

${$.title}

${$.description}

Recommended: ${$.recommendedValue}`))try{const S=await Re.applyRecommendation($.id);S?.success?(alert("Recommendation applied successfully!"),m()):alert(S?.error||"Failed to apply recommendation.")}catch(S){alert(`Failed to apply: ${S.message}`)}},o=$=>{const[S,E]=$.resource.split("/"),y=$.namespace;Dc({kind:S,name:E,namespace:y}),S==="Deployment"?At("deployments"):S==="Pod"?At("pods"):S==="StatefulSet"?At("statefulsets"):S==="DaemonSet"&&At("daemonsets")},d=$=>{switch($){case"critical":return"#ef4444";case"warning":return"#f59e0b";case"info":return"#3b82f6";default:return"#6b7280"}},a=$=>{switch($){case"crash_loop":return"ðŸ”„";case"cpu_spike":return"âš¡";case"memory_spike":return"ðŸ’¾";case"hpa_maxed":return"ðŸ“ˆ";case"pod_not_ready":return"âš ï¸";case"frequent_restarts":return"ðŸ”„";default:return"ðŸ”"}},[c,{refetch:m}]=qe(()=>{const $=e()==="recommendations",S=St(),E=Gt();return{shouldFetch:$,context:S,refresh:E}},async({shouldFetch:$})=>{if(!$)return{recommendations:[],total:0,error:void 0};try{return{...await Re.getMLRecommendations(),error:void 0}}catch(S){return console.error("[Anomalies] Failed to fetch recommendations:",S),{recommendations:[],total:0,error:S?.message||"Failed to load ML recommendations. This may take a few moments if there is no historical data."}}});return Xt(()=>{v(1)}),(()=>{var $=Nb(),S=$.firstChild,E=S.firstChild,y=E.firstChild;y.nextSibling;var k=E.nextSibling,B=S.nextSibling,O=B.firstChild,T=O.nextSibling;return i(k,A(q,{get when(){return e()==="anomalies"},get children(){var I=to();return I.$$click=()=>{v(M=>M+1),l(""),p(1)},i(I,()=>n.loading?"Detecting...":"Detect Anomalies"),re(()=>I.disabled=n.loading),I}}),null),i(k,A(q,{get when(){return e()==="recommendations"},get children(){var I=to();return I.$$click=()=>c.refetch(),i(I,()=>c.loading?"Loading...":"Refresh Recommendations"),re(()=>I.disabled=c.loading),I}}),null),O.$$click=()=>t("anomalies"),T.$$click=()=>t("recommendations"),i($,A(q,{get when(){return Me(()=>e()==="anomalies")()&&n()?.stats},children:I=>(()=>{var M=zb(),P=M.firstChild,L=P.firstChild,H=L.nextSibling,w=P.nextSibling,N=w.firstChild,z=N.nextSibling,V=w.nextSibling,Q=V.firstChild,F=Q.nextSibling,U=V.nextSibling,W=U.firstChild,ce=W.nextSibling;return i(H,()=>I().total),i(z,()=>I().critical),i(F,()=>I().warning),i(ce,()=>I().info),M})()}),null),i($,A(q,{get when(){return e()==="anomalies"},get children(){var I=Eb(),M=I.firstChild,P=M.firstChild,L=P.nextSibling;return L.addEventListener("change",H=>{l(H.currentTarget.value),p(1)}),i(M,A(q,{get when(){return n()?.duration},get children(){var H=Mb();return H.firstChild,i(H,()=>n()?.duration,null),H}}),null),re(()=>L.value=r()),I}}),null),i($,A(q,{get when(){return e()==="anomalies"},get children(){return[A(q,{get when(){return n.loading},get children(){var I=Lb(),M=I.firstChild;return M.nextSibling,I}}),A(q,{get when(){return Me(()=>!n.loading&&!n.error)()&&b().total>0},get children(){return[(()=>{var I=Rb();return i(I,A(Ne,{get each(){return b().list},children:M=>(()=>{var P=jb(),L=P.firstChild,H=L.firstChild,w=H.firstChild,N=w.firstChild,z=N.nextSibling,V=z.nextSibling,Q=V.nextSibling,F=Q.firstChild,U=F.nextSibling;U.nextSibling;var W=w.nextSibling,ce=W.nextSibling,D=ce.firstChild,j=D.nextSibling,K=j.nextSibling,ee=K.nextSibling,ne=ee.nextSibling;ne.nextSibling;var te=ce.nextSibling,le=te.firstChild;le.nextSibling;var Z=te.nextSibling;return Z.firstChild,i(N,()=>a(M.type)),i(z,()=>M.severity),i(V,()=>M.type.replace(/_/g," ")),i(Q,()=>(M.score*100).toFixed(1),U),i(W,()=>M.message),i(ce,()=>M.namespace,K),i(ce,()=>M.podName,null),i(ce,(()=>{var Y=Me(()=>!!M.deployment);return()=>Y()&&` | <strong>Deployment:</strong> ${M.deployment}`})(),null),i(te,()=>M.recommendation,null),i(Z,()=>new Date(M.timestamp).toLocaleString(),null),i(L,A(q,{get when(){return M.autoRemediate},get children(){var Y=Fb();return Y.$$click=()=>C(M),i(Y,()=>h()===M.id?"Remediating...":"Auto-Remediate"),re(()=>Y.disabled=h()===M.id),Y}}),null),re(Y=>{var se=d(M.severity),G=`${d(M.severity)}20`,ie=d(M.severity);return se!==Y.e&&oe(P,"border-left-color",Y.e=se),G!==Y.t&&oe(z,"background",Y.t=G),ie!==Y.a&&oe(z,"color",Y.a=ie),Y},{e:void 0,t:void 0,a:void 0}),P})()})),I})(),A(q,{get when(){return b().pages>1},get children(){var I=Db(),M=I.firstChild,P=M.nextSibling,L=P.firstChild,H=L.nextSibling;H.nextSibling;var w=P.nextSibling;return M.$$click=()=>p(N=>Math.max(1,N-1)),i(P,g,H),i(P,()=>b().pages,null),w.$$click=()=>p(N=>Math.min(b().pages,N+1)),re(N=>{var z=g()===1,V=g()===b().pages;return z!==N.e&&(M.disabled=N.e=z),V!==N.t&&(w.disabled=N.t=V),N},{e:void 0,t:void 0}),I}})]}}),A(q,{get when(){return Me(()=>!n.loading&&!n.error)()&&b().total===0},get children(){var I=Tb(),M=I.firstChild,P=M.nextSibling;return P.nextSibling,I}}),A(q,{get when(){return n.error},get children(){var I=Pb(),M=I.firstChild;return M.firstChild,i(M,(()=>{var P=Me(()=>n.error instanceof Error);return()=>P()?n.error.message:String(n.error)})(),null),I}})]}}),null),i($,A(q,{get when(){return e()==="recommendations"},get children(){return[A(q,{get when(){return c.loading},get children(){var I=Ib(),M=I.firstChild,P=M.nextSibling,L=P.firstChild;return L.nextSibling,I}}),A(q,{get when(){return Me(()=>!c.loading)()&&c.error},get children(){var I=Bb(),M=I.firstChild;return M.firstChild,M.nextSibling,i(M,()=>c.error,null),I}}),A(q,{get when(){return Me(()=>!c.loading&&!c.error)()&&(!c()||c().recommendations.length===0)},get children(){var I=Ob(),M=I.firstChild,P=M.nextSibling,L=P.nextSibling,H=L.nextSibling;return H.nextSibling,I}}),A(q,{get when(){return Me(()=>!!(!c.loading&&c()))()&&c().recommendations.length>0},get children(){var I=Hb(),M=I.firstChild,P=M.firstChild,L=P.firstChild,H=L.nextSibling;return i(H,()=>c().total),i(I,A(Ne,{get each(){return c().recommendations},children:w=>(()=>{var N=qb(),z=N.firstChild,V=z.firstChild,Q=V.firstChild,F=Q.firstChild,U=F.nextSibling,W=U.nextSibling,ce=W.firstChild,D=ce.nextSibling;D.nextSibling;var j=Q.nextSibling,K=j.nextSibling,ee=K.firstChild,ne=ee.nextSibling,te=ne.nextSibling,le=te.nextSibling,Z=le.nextSibling;Z.nextSibling;var Y=K.nextSibling,se=Y.nextSibling,G=se.firstChild,ie=G.firstChild,X=ie.nextSibling,fe=G.nextSibling,Ae=fe.nextSibling,Ce=Ae.firstChild,$e=Ce.nextSibling,ye=se.nextSibling,he=ye.firstChild;he.firstChild;var ae=he.nextSibling;ae.firstChild;var ue=ye.nextSibling;ue.firstChild;var Se=V.nextSibling,_e=Se.firstChild;return i(F,()=>w.severity),i(U,()=>w.type.replace(/_/g," ")),i(W,()=>(w.confidence*100).toFixed(0),D),i(Q,A(q,{get when(){return w.autoApply},get children(){return Ub()}}),null),i(j,()=>w.title),i(K,()=>w.resource,te),i(K,()=>w.namespace,null),i(Y,()=>w.description),i(X,()=>w.currentValue),i($e,()=>w.recommendedValue),i(V,A(q,{get when(){return w.estimatedSavings},get children(){var de=Vb();return de.firstChild,i(de,()=>w.estimatedSavings,null),de}}),ye),i(he,()=>w.impact,null),i(ae,()=>w.effort,null),i(ue,()=>new Date(w.timestamp).toLocaleString(),null),_e.$$click=()=>o(w),i(Se,A(q,{get when(){return w.autoApply},get children(){var de=Wb();return de.$$click=()=>x(w),de}}),null),re(de=>{var be=w.severity==="high"?"#ef4444":w.severity==="medium"?"#f59e0b":"#3b82f6",ve=w.severity==="high"?"#ef444420":w.severity==="medium"?"#f59e0b20":"#3b82f620",ge=w.severity==="high"?"#ef4444":w.severity==="medium"?"#f59e0b":"#3b82f6",me=w.type==="scaling"?"#a855f720":w.type==="resource_optimization"?"#22c55e20":w.type==="cost_saving"?"#f59e0b20":"#3b82f620",pe=w.type==="scaling"?"#a855f7":w.type==="resource_optimization"?"#22c55e":w.type==="cost_saving"?"#f59e0b":"#3b82f6";return be!==de.e&&oe(N,"border-left-color",de.e=be),ve!==de.t&&oe(F,"background",de.t=ve),ge!==de.a&&oe(F,"color",de.a=ge),me!==de.o&&oe(U,"background",de.o=me),pe!==de.i&&oe(U,"color",de.i=pe),de},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),N})()}),null),I}})]}}),null),re(I=>{var M=`px-4 py-2 text-sm font-medium transition-colors ${e()==="anomalies"?"border-b-2":"opacity-60 hover:opacity-100"}`,P=e()==="anomalies"?"var(--accent-primary)":"var(--text-secondary)",L=e()==="anomalies"?"var(--accent-primary)":"transparent",H=`px-4 py-2 text-sm font-medium transition-colors ${e()==="recommendations"?"border-b-2":"opacity-60 hover:opacity-100"}`,w=e()==="recommendations"?"var(--accent-primary)":"var(--text-secondary)",N=e()==="recommendations"?"var(--accent-primary)":"transparent";return M!==I.e&&He(O,I.e=M),P!==I.t&&oe(O,"color",I.t=P),L!==I.a&&oe(O,"border-bottom-color",I.a=L),H!==I.o&&He(T,I.o=H),w!==I.i&&oe(T,"color",I.i=w),N!==I.n&&oe(T,"border-bottom-color",I.n=N),I},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),$})()};Qe(["click"]);var Yb=R('<svg class="w-4 h-4"fill=none viewBox="0 0 24 24"stroke=currentColor style=color:var(--success-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z">'),Gb=R('<div class="p-4 space-y-4">'),Jb=R('<div class="p-4 space-y-2 border-t"style=border-color:var(--border-color)><h4 class="text-xs font-semibold mb-3"style=color:var(--text-secondary)>Recent'),Xb=R("<div class=overflow-y-auto style=max-height:520px>"),Zb=R('<div class="fixed bottom-6 right-6 z-50 transition-all duration-300"><div class="rounded-lg shadow-2xl overflow-hidden"style="background:var(--card-bg);border:1px solid var(--border-color)"><div class="flex items-center justify-between px-4 py-3 cursor-pointer"style=background:var(--header-bg)><div class="flex items-center gap-3"><svg class="w-5 h-5 animate-spin"fill=none viewBox="0 0 24 24"style=color:var(--primary-color)><circle class=opacity-25 cx=12 cy=12 r=10 stroke=currentColor stroke-width=4></circle><path class=opacity-75 fill=currentColor d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg><div><h3 class="text-sm font-semibold"style=color:var(--text-primary)>Deployments (<!>)</h3><p class=text-xs style=color:var(--text-secondary)> active</p></div></div><div class="flex items-center gap-2"><button class="p-1.5 rounded hover:opacity-70 transition-opacity"></button><svg class="w-4 h-4 transition-transform"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-secondary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 9l-7 7-7-7">'),Qb=R('<svg class="w-4 h-4"fill=none viewBox="0 0 24 24"stroke=currentColor style=color:var(--text-secondary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"clip-rule=evenodd></path><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2">'),ey=R('<div class="p-4 rounded-lg"style="background:var(--input-bg);border:1px solid var(--border-color)"><div class="flex items-start justify-between mb-3"><div class=flex-1><h4 class="text-sm font-semibold"style=color:var(--text-primary)></h4><p class="text-xs mt-0.5"style=color:var(--text-secondary)>v<!> â†’ </p></div><button class="text-xs px-2 py-1 rounded hover:opacity-70 transition-opacity"style=background:var(--error-color-alpha);color:var(--error-color)>Cancel</button></div><div class=space-y-2>'),ty=R('<div class="mt-1.5 h-1 rounded-full overflow-hidden"style=background:var(--border-color)><div class="h-full transition-all duration-300"style=background:var(--primary-color)>'),ry=R('<p class="text-xs mt-1"style=color:var(--text-secondary)>'),sy=R('<div class="flex items-center gap-3"><div class="w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0"></div><div class="flex-1 min-w-0"><div class="flex items-center justify-between"><p class="text-xs font-medium truncate"style=color:var(--text-primary)></p><span class="text-xs ml-2"style=color:var(--text-secondary)>'),iy=R('<div class="flex items-center justify-between p-2 rounded"style=background:var(--input-bg)><div class="flex items-center gap-2 flex-1 min-w-0"><span class=text-sm></span><span class="text-xs truncate"style=color:var(--text-primary)></span></div><button class="text-xs opacity-50 hover:opacity-100 transition-opacity"style=color:var(--text-secondary)>âœ•');const[ni,zi]=J([]),[ls,ny]=J(!1),[Bs,ly]=J(localStorage.getItem("kubegraf_sound_enabled")!=="false");let un=null;const ya=()=>(un||(un=new(window.AudioContext||window.webkitAudioContext)),un),oy=()=>{if(Bs())try{const e=ya(),t=e.createOscillator(),r=e.createGain();t.connect(r),r.connect(e.destination),t.frequency.value=800,t.type="sine",r.gain.setValueAtTime(.1,e.currentTime),r.gain.exponentialRampToValueAtTime(.01,e.currentTime+.3),t.start(e.currentTime),t.stop(e.currentTime+.3)}catch(e){console.error("Failed to play success sound:",e)}},ay=()=>{if(Bs())try{const e=ya(),t=e.createOscillator(),r=e.createGain();t.connect(r),r.connect(e.destination),t.frequency.value=200,t.type="sawtooth",r.gain.setValueAtTime(.1,e.currentTime),r.gain.exponentialRampToValueAtTime(.01,e.currentTime+.4),t.start(e.currentTime),t.stop(e.currentTime+.4)}catch(e){console.error("Failed to play error sound:",e)}},cy=(e,t,r,l)=>{const u={id:`deploy-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,appName:e,appVersion:t,namespace:r,tasks:l.map((v,h)=>({id:`task-${h}`,name:v,status:h===0?"running":"pending",progress:h===0?10:0})),overallStatus:"running",createdAt:Date.now()};return zi(v=>[...v,u]),u.id},ir=(e,t,r)=>{zi(l=>l.map(u=>{if(u.id!==e)return u;const v=u.tasks.map(n=>{if(n.id!==t)return n;const f={...n,...r};if(f.status==="completed"&&n.status!=="completed"){f.endTime=Date.now(),oy();const g=u.tasks.findIndex(p=>p.id===t);g<u.tasks.length-1&&setTimeout(()=>{ir(e,u.tasks[g+1].id,{status:"running",progress:10,startTime:Date.now()})},300)}else f.status==="failed"&&n.status!=="failed"&&(f.endTime=Date.now(),ay());return f}),h=v.every(n=>n.status==="completed"),s=v.some(n=>n.status==="failed");return{...u,tasks:v,overallStatus:s?"failed":h?"completed":"running"}}))},dy=e=>{zi(t=>t.map(r=>r.id!==e?r:{...r,overallStatus:"cancelled",tasks:r.tasks.map(l=>l.status==="pending"||l.status==="running"?{...l,status:"failed",message:"Cancelled by user"}:l)}))},ro=e=>{zi(t=>t.filter(r=>r.id!==e))},hy=()=>{const e=!Bs();ly(e),localStorage.setItem("kubegraf_sound_enabled",String(e))},uy=()=>{const e=()=>ni().filter(v=>v.overallStatus==="running"||v.overallStatus==="pending"),t=()=>ni().filter(v=>v.overallStatus==="completed"||v.overallStatus==="failed"),r=v=>{switch(v){case"completed":return"var(--success-color)";case"failed":return"var(--error-color)";case"running":return"var(--primary-color)";default:return"var(--text-secondary)"}},l=v=>{switch(v){case"completed":return"âœ“";case"failed":return"âœ—";case"running":return"âŸ³";default:return"â—‹"}},u=(v,h)=>{if(!v)return"";const s=h||Date.now(),n=Math.floor((s-v)/1e3);if(n<60)return`${n}s`;const f=Math.floor(n/60),g=n%60;return`${f}m ${g}s`};return Mt(()=>{t().forEach(h=>{const s=h.tasks[h.tasks.length-1];s.endTime&&Date.now()-s.endTime>1e4&&ro(h.id)})}),A(q,{get when(){return ni().length>0},get children(){return A(Xr,{get children(){var v=Zb(),h=v.firstChild,s=h.firstChild,n=s.firstChild,f=n.firstChild,g=f.nextSibling,p=g.firstChild,_=p.firstChild,b=_.nextSibling;b.nextSibling;var C=p.nextSibling,x=C.firstChild,o=n.nextSibling,d=o.firstChild,a=d.nextSibling;return s.$$click=()=>ny(!ls()),i(p,()=>ni().length,b),i(C,()=>e().length,x),d.$$click=c=>{c.stopPropagation(),hy()},i(d,A(q,{get when(){return Bs()},get fallback(){return Qb()},get children(){return Yb()}})),i(h,A(q,{get when(){return!ls()},get children(){var c=Xb();return i(c,A(q,{get when(){return e().length>0},get children(){var m=Gb();return i(m,A(Ne,{get each(){return e()},children:$=>(()=>{var S=ey(),E=S.firstChild,y=E.firstChild,k=y.firstChild,B=k.nextSibling,O=B.firstChild,T=O.nextSibling;T.nextSibling;var I=y.nextSibling,M=E.nextSibling;return i(k,()=>$.appName),i(B,()=>$.appVersion,T),i(B,()=>$.namespace,null),I.$$click=()=>dy($.id),i(M,A(Ne,{get each(){return $.tasks},children:P=>(()=>{var L=sy(),H=L.firstChild,w=H.nextSibling,N=w.firstChild,z=N.firstChild,V=z.nextSibling;return i(H,()=>l(P.status)),i(z,()=>P.name),i(V,()=>u(P.startTime,P.endTime)),i(w,A(q,{get when(){return Me(()=>P.status==="running")()&&P.progress>0},get children(){var Q=ty(),F=Q.firstChild;return re(U=>oe(F,"width",`${P.progress}%`)),Q}}),null),i(w,A(q,{get when(){return P.message},get children(){var Q=ry();return i(Q,()=>P.message),Q}}),null),re(Q=>{var F=P.status==="running"?"var(--primary-color-alpha)":"transparent",U=r(P.status),W=P.status==="pending"?"1px solid var(--border-color)":"none",ce=P.status==="running";return F!==Q.e&&oe(H,"background",Q.e=F),U!==Q.t&&oe(H,"color",Q.t=U),W!==Q.a&&oe(H,"border",Q.a=W),ce!==Q.o&&H.classList.toggle("animate-pulse",Q.o=ce),Q},{e:void 0,t:void 0,a:void 0,o:void 0}),L})()})),S})()})),m}}),null),i(c,A(q,{get when(){return t().length>0},get children(){var m=Jb();return m.firstChild,i(m,A(Ne,{get each(){return t()},children:$=>(()=>{var S=iy(),E=S.firstChild,y=E.firstChild,k=y.nextSibling,B=E.nextSibling;return i(y,()=>l($.overallStatus)),i(k,()=>$.appName),B.$$click=()=>ro($.id),re(O=>oe(y,"color",r($.overallStatus))),S})()}),null),m}}),null),c}}),null),re(c=>{var m=ls()?"320px":"420px",$=ls()?"60px":"600px",S=ls()?"none":"1px solid var(--border-color)",E=e().length===0,y=Bs()?"Disable sounds":"Enable sounds",k=!ls();return m!==c.e&&oe(v,"width",c.e=m),$!==c.t&&oe(v,"max-height",c.t=$),S!==c.a&&oe(s,"border-bottom",c.a=S),E!==c.o&&f.classList.toggle("hidden",c.o=E),y!==c.i&&Xe(d,"title",c.i=y),k!==c.n&&a.classList.toggle("rotate-180",c.n=k),c},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),v}})}})};Qe(["click"]);var fy=R('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z">'),gy=R('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 6h16M4 10h16M4 14h16M4 18h16">'),py=R('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1v-4zM14 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z">'),vy=R('<div class=space-y-4><h2 class="text-lg font-semibold flex items-center gap-2"><span class="w-3 h-3 rounded-full"></span></h2><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">'),my=R('<div class="absolute top-2 right-2 px-2 py-1 rounded text-xs font-medium flex items-center gap-1"style="background:rgba(6, 182, 212, 0.2);color:var(--accent-primary)"><div class=spinner style=width:12px;height:12px></div>Deploying...'),_y=R('<div class="absolute top-2 right-2 px-2 py-1 rounded text-xs font-medium flex items-center gap-1"style="background:rgba(34, 197, 94, 0.2);color:var(--success-color)"><svg class="w-3 h-3"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"clip-rule=evenodd></path></svg>Installed'),by=R("<div class=spinner style=width:24px;height:24px>"),yy=R('<div class="flex items-center gap-2"><span class=text-xs style=color:var(--accent-primary)>to '),xy=R('<div class="flex items-center gap-2"><button class="px-3 py-1.5 rounded-lg text-sm font-medium transition-all hover:opacity-80 flex items-center gap-1"style="background:rgba(34, 197, 94, 0.2);color:var(--success-color)"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>View Pods</button><button class="px-3 py-1.5 rounded-lg text-sm font-medium transition-all hover:opacity-80"style="background:rgba(239, 68, 68, 0.2);color:var(--error-color)">Uninstall'),$y=R('<div class="mt-2 pt-2 border-t flex items-center gap-1 text-xs"style=border-color:var(--border-color);color:var(--text-muted)><svg class="w-3 h-3"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg>Namespace: <span style=color:var(--text-secondary)>'),wy=R('<div><div class="flex items-start gap-3"><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)></div><div class="flex-1 min-w-0"><h3 class=font-semibold style=color:var(--text-primary)></h3><p class="text-xs mt-0.5"style=color:var(--text-muted)>v</p></div></div><p class="mt-3 text-sm line-clamp-2"style=color:var(--text-secondary)></p><div class="mt-4 flex items-center justify-between"><span class="text-xs px-2 py-1 rounded"style=background:var(--bg-tertiary);color:var(--text-muted)>'),Sy=R('<svg class="w-6 h-6"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2>'),Cy=R('<button class="p-1.5 rounded-lg text-sm transition-all hover:opacity-80"title="Remove custom app"style="background:rgba(239, 68, 68, 0.2);color:var(--error-color)"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">'),ky=R('<div class="flex items-center gap-2"><button class="px-3 py-1.5 rounded-lg text-sm font-medium transition-all hover:opacity-80"style=background:var(--accent-primary);color:#000>Install'),Ay=R('<div class="overflow-hidden rounded-lg"style=background:#0d1117><div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class=whitespace-nowrap>App</th><th class=whitespace-nowrap>Category</th><th class=whitespace-nowrap>Version</th><th class=whitespace-nowrap>Chart</th><th class=whitespace-nowrap>Status</th><th class=whitespace-nowrap>Namespace</th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),My=R('<tr><td colspan=7 class="text-center py-8"style=color:var(--text-muted)>No apps found'),Ey=R('<span class="badge badge-info flex items-center gap-1"><div class=spinner style=width:12px;height:12px></div>Deploying'),Ly=R('<button class="px-3 py-1 rounded text-sm transition-all hover:opacity-80"style="background:rgba(34, 197, 94, 0.2);color:var(--success-color)">View'),Ry=R('<button class="px-3 py-1 rounded text-sm transition-all hover:opacity-80"style="background:rgba(239, 68, 68, 0.2);color:var(--error-color)">Uninstall'),Dy=R('<tr><td><div class="flex items-center gap-3"><div class="p-2 rounded-lg"style=background:var(--bg-tertiary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></div><div><div class=font-medium style=color:var(--text-primary)></div><div class=text-xs style=color:var(--text-muted)></div></div></div></td><td><span class="text-xs px-2 py-1 rounded"></span></td><td class="font-mono text-sm"></td><td class="font-mono text-sm"></td><td></td><td class=text-sm></td><td><div class="flex items-center gap-2">'),Ty=R('<span class="badge badge-success">Installed'),Py=R('<span class="badge badge-default">Available'),Iy=R('<button class="px-3 py-1 rounded text-sm transition-all hover:opacity-80"style=background:var(--accent-primary);color:#000>Install'),By=R('<div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3">'),Oy=R("<div class=spinner style=width:12px;height:12px>"),Hy=R('<div class="absolute top-1 right-1">'),Ny=R('<button class="px-2 py-0.5 rounded text-xs transition-all hover:opacity-80"style=background:var(--accent-primary);color:#000>Install'),zy=R('<button><div class="flex items-center gap-2 mb-2"><div class="p-1.5 rounded"style=background:var(--bg-tertiary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></div></div><h4 class="font-medium text-sm truncate mb-1"style=color:var(--text-primary)></h4><p class="text-xs truncate mb-2"style=color:var(--text-muted)></p><div class="flex items-center justify-between text-xs"><span style=color:var(--text-muted)>v'),Fy=R('<div class="w-2 h-2 rounded-full bg-green-500"title=Installed>'),jy=R('<button class="px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-all hover:opacity-80"style=background:var(--accent-primary);color:#000><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 4v16m8-8H4"></path></svg>Add Custom App'),Uy=R('<div class="flex items-center gap-1 p-1 rounded-lg"style=background:var(--bg-secondary)><button><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg>Marketplace<span class="px-2 py-0.5 rounded text-xs"style=background:var(--bg-primary);color:var(--text-muted)></span></button><button><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"></path></svg>Custom Apps<span class="px-2 py-0.5 rounded text-xs"style=background:var(--bg-primary);color:var(--text-muted)>'),Vy=R('<div class="card p-12 text-center"><div class="w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center"style=background:var(--bg-tertiary)><svg class="w-8 h-8"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"></path></svg></div><h3 class="text-lg font-semibold mb-2"style=color:var(--text-primary)>No Custom Apps</h3><p class=mb-4 style=color:var(--text-secondary)>Add your own Helm charts to deploy custom applications.</p><button class="px-4 py-2 rounded-lg text-sm font-medium transition-all hover:opacity-80"style=background:var(--accent-primary);color:#000>Add Your First Custom App'),Wy=R('<div class="p-4 rounded-lg border-l-4"style="background:rgba(245, 158, 11, 0.1);border-left-color:#f59e0b;color:var(--text-primary)"><div class="flex items-start gap-2"><svg class="w-5 h-5 mt-0.5 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div class=flex-1><h4 class="font-semibold mb-1">Prerequisites Required</h4><p class="text-sm mb-2">This local cluster installer requires <strong>Docker</strong> to be installed and running.</p><ul class="text-sm list-disc list-inside space-y-1 mb-2"style=color:var(--text-secondary)><li>Docker Desktop must be installed</li><li>Docker Desktop must be running</li><li>Docker daemon must be accessible</li></ul><p class=text-xs style=color:var(--text-muted)>If Docker is not installed, the installation will fail. Check server logs for detailed error messages.'),qy=R("<div class=spinner style=width:16px;height:16px>"),Ky=R('<div class=space-y-4><p style=color:var(--text-secondary)></p><div class="p-4 rounded-lg"style=background:var(--bg-tertiary)><div class="flex items-center justify-between text-sm"><span style=color:var(--text-muted)>Chart</span><span style=color:var(--text-primary)></span></div><div class="flex items-center justify-between text-sm mt-2"><span style=color:var(--text-muted)>Version</span><span style=color:var(--text-primary)></span></div><div class="flex items-center justify-between text-sm mt-2"><span style=color:var(--text-muted)>Repository</span><span class="text-xs truncate max-w-xs"style=color:var(--accent-primary)></span></div></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Target Namespace</label><input type=text class="w-full px-3 py-2 rounded-lg text-sm"placeholder=default style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div class="flex justify-end gap-3 mt-6"><button class="px-4 py-2 rounded-lg text-sm font-medium"style=background:var(--bg-secondary);color:var(--text-secondary)>Cancel</button><button class="px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 disabled:opacity-50"style=background:var(--accent-primary);color:#000>'),Yy=R('<div class=space-y-4><p style=color:var(--text-secondary)>Add your own Helm chart to the marketplace. Custom apps are stored locally in your browser.</p><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>App Name <span style=color:var(--error-color)>*</span></label><input type=text class="w-full px-3 py-2 rounded-lg text-sm"placeholder=my-app style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Display Name</label><input type=text class="w-full px-3 py-2 rounded-lg text-sm"placeholder="My Application"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Chart Repository URL <span style=color:var(--error-color)>*</span></label><input type=text class="w-full px-3 py-2 rounded-lg text-sm"placeholder=https://charts.example.com style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Chart Name <span style=color:var(--error-color)>*</span></label><input type=text class="w-full px-3 py-2 rounded-lg text-sm"placeholder=my-chart style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div class="grid grid-cols-2 gap-4"><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Category</label><select class="w-full px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=Custom>Custom</option><option value=Networking>Networking</option><option value=CI/CD>CI/CD</option><option value=Observability>Observability</option><option value=Security>Security</option><option value=Data>Data</option></select></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Version</label><input type=text class="w-full px-3 py-2 rounded-lg text-sm"placeholder=1.0.0 style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Description</label><textarea class="w-full px-3 py-2 rounded-lg text-sm resize-none"placeholder="Optional description for the app"rows=3 style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></textarea></div><div class="flex justify-end gap-3 mt-6"><button class="px-4 py-2 rounded-lg text-sm font-medium"style=background:var(--bg-secondary);color:var(--text-secondary)>Cancel</button><button class="px-4 py-2 rounded-lg text-sm font-medium"style=background:var(--accent-primary);color:#000>Add App'),Gy=R('<div class=space-y-6><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)></h1><p style=color:var(--text-secondary)></p></div><div class="flex items-center gap-3"><div class="flex items-center rounded-lg overflow-hidden"style="background:var(--bg-secondary);border:1px solid var(--border-color)"></div><button class=icon-btn title=Refresh style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total Apps</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Installed</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 flex items-center gap-2"style="border-left:3px solid #8b5cf6"><span class=text-sm style=color:var(--text-secondary)>Available</span><span class="text-xl font-bold"style=color:#8b5cf6></span></div><div class=flex-1></div><input type=text placeholder="Search apps..."class="px-3 py-2 rounded-lg text-sm w-64"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div class="flex flex-wrap gap-2">'),Jy=R('<button><span class="hidden sm:inline capitalize">'),Xy=R("<button>");const Zy=()=>{try{const e=localStorage.getItem("kubegraf-custom-apps");return e?JSON.parse(e):[]}catch{return[]}},so=e=>{localStorage.setItem("kubegraf-custom-apps",JSON.stringify(e))},li=[{name:"nginx-ingress",displayName:"NGINX Ingress",description:"Ingress controller for Kubernetes using NGINX as a reverse proxy",category:"Networking",icon:"M13 10V3L4 14h7v7l9-11h-7z",version:"4.9.0",chartRepo:"https://kubernetes.github.io/ingress-nginx",chartName:"ingress-nginx"},{name:"istio",displayName:"Istio Service Mesh",description:"Connect, secure, control, and observe services across your cluster",category:"Networking",icon:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9",version:"1.20.0",chartRepo:"https://istio-release.storage.googleapis.com/charts",chartName:"istiod"},{name:"cilium",displayName:"Cilium CNI",description:"eBPF-based networking, observability, and security for Kubernetes",category:"Networking",icon:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z",version:"1.14.5",chartRepo:"https://helm.cilium.io/",chartName:"cilium"},{name:"argocd",displayName:"Argo CD",description:"Declarative GitOps continuous delivery tool for Kubernetes",category:"CI/CD",icon:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15",version:"5.51.0",chartRepo:"https://argoproj.github.io/argo-helm",chartName:"argo-cd"},{name:"fluxcd",displayName:"Flux CD",description:"GitOps toolkit for continuous and progressive delivery",category:"CI/CD",icon:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4",version:"2.12.0",chartRepo:"https://fluxcd-community.github.io/helm-charts",chartName:"flux2"},{name:"prometheus",displayName:"Prometheus",description:"Monitoring system and time series database for metrics",category:"Observability",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z",version:"25.8.0",chartRepo:"https://prometheus-community.github.io/helm-charts",chartName:"prometheus"},{name:"grafana",displayName:"Grafana",description:"Analytics & monitoring dashboards for all your metrics",category:"Observability",icon:"M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z",version:"7.0.19",chartRepo:"https://grafana.github.io/helm-charts",chartName:"grafana"},{name:"loki",displayName:"Loki",description:"Like Prometheus, but for logs - scalable log aggregation",category:"Observability",icon:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",version:"5.41.4",chartRepo:"https://grafana.github.io/helm-charts",chartName:"loki-stack"},{name:"tempo",displayName:"Tempo",description:"High-scale distributed tracing backend",category:"Observability",icon:"M13 10V3L4 14h7v7l9-11h-7z",version:"1.7.1",chartRepo:"https://grafana.github.io/helm-charts",chartName:"tempo"},{name:"cert-manager",displayName:"cert-manager",description:"Automatically provision and manage TLS certificates",category:"Security",icon:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z",version:"1.13.3",chartRepo:"https://charts.jetstack.io",chartName:"cert-manager"},{name:"vault",displayName:"HashiCorp Vault",description:"Secrets management, encryption, and privileged access",category:"Security",icon:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z",version:"0.27.0",chartRepo:"https://helm.releases.hashicorp.com",chartName:"vault"},{name:"redis",displayName:"Redis",description:"In-memory data structure store, cache, and message broker",category:"Data",icon:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4",version:"18.6.1",chartRepo:"https://charts.bitnami.com/bitnami",chartName:"redis"},{name:"postgresql",displayName:"PostgreSQL",description:"Advanced open source relational database",category:"Data",icon:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4",version:"14.0.5",chartRepo:"https://charts.bitnami.com/bitnami",chartName:"postgresql"},{name:"memcached",displayName:"Memcached",description:"High-performance distributed memory caching system",category:"Data",icon:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z",version:"6.7.2",chartRepo:"https://charts.bitnami.com/bitnami",chartName:"memcached"},{name:"kube-prometheus-stack",displayName:"Kube Prometheus Stack",description:"Full Prometheus + Grafana + Alertmanager observability stack",category:"Observability",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z",version:"55.5.0",chartRepo:"https://prometheus-community.github.io/helm-charts",chartName:"kube-prometheus-stack"},{name:"k3d",displayName:"k3d - Local Kubernetes",description:"Lightweight wrapper to run k3s in Docker. Perfect for local development and testing.",category:"Local Cluster",icon:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01",version:"Latest",chartRepo:"local-cluster",chartName:"k3d"},{name:"kind",displayName:"kind - Kubernetes in Docker",description:"Run local Kubernetes clusters using Docker container nodes. Great for CI/CD and development.",category:"Local Cluster",icon:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01",version:"Latest",chartRepo:"local-cluster",chartName:"kind"},{name:"minikube",displayName:"Minikube - Local Kubernetes",description:"Run Kubernetes locally. Minikube runs a single-node Kubernetes cluster inside a VM on your laptop.",category:"Local Cluster",icon:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01",version:"Latest",chartRepo:"local-cluster",chartName:"minikube"}],pr={Networking:"#22d3ee","CI/CD":"#a855f7",Observability:"#f97316",Security:"#22c55e",Data:"#3b82f6","Local Cluster":"#10b981"},xa=e=>{const[t,r]=J(""),[l,u]=J("all"),[v,h]=J(null),[s,n]=J(!1),[f,g]=J("default"),[p,_]=J("kubegraf-cluster"),[b,C]=J(!1),[x,o]=J([]),[d,a]=J(!1),[c,m]=J("card"),[$,S]=J({});Xt(()=>{const Z=sessionStorage.getItem("kubegraf-auto-filter");Z&&(u(Z),sessionStorage.removeItem("kubegraf-auto-filter"));const Y=sessionStorage.getItem("kubegraf-default-tab");Y&&(Y==="marketplace"||Y==="custom")&&(y(Y),sessionStorage.removeItem("kubegraf-default-tab")),Z==="Local Cluster"&&setTimeout(()=>{const se=document.querySelector('[data-category="Local Cluster"]');se&&se.scrollIntoView({behavior:"smooth",block:"start"})},300)});const[E,y]=J(e.defaultTab||"marketplace");Mt(()=>{e.defaultTab&&y(e.defaultTab)});const[k,B]=J(Zy()),[O,T]=J(!1),[I,M]=J({name:"",displayName:"",description:"",category:"Custom",chartRepo:"",chartName:"",version:"1.0.0"}),[P,{refetch:L}]=qe(async()=>{try{return await Re.getInstalledApps()}catch{return[]}}),H=ze(()=>{const Z=P()||[];return li.map(Y=>{const se=Z.find(G=>G.name===Y.name);return{...Y,installed:!!se,installedNamespace:se?.namespace}})}),w=ze(()=>{const Z=new Set(li.map(Y=>Y.category));return["all",...Array.from(Z)]}),N=ze(()=>{let Z=H();const Y=t().toLowerCase(),se=l();return se!=="all"&&(Z=Z.filter(G=>G.category===se)),Y&&(Z=Z.filter(G=>G.displayName.toLowerCase().includes(Y)||G.description.toLowerCase().includes(Y)||G.category.toLowerCase().includes(Y))),Z});ze(()=>{const Z=N(),Y={};return Z.forEach(se=>{Y[se.category]||(Y[se.category]=[]),Y[se.category].push(se)}),Object.entries(Y).map(([se,G])=>({name:se,apps:G}))});const z=ze(()=>{const Z=H();return{total:Z.length,installed:Z.filter(Y=>Y.installed).length,available:Z.filter(Y=>!Y.installed).length}}),V=(Z,Y,se)=>{const G=setInterval(async()=>{try{(await Re.getInstalledApps())?.some(fe=>fe.name===Z)&&(clearInterval(G),S(fe=>{const Ae={...fe};return delete Ae[Z],Ae}),Fe(`${Y} deployed successfully to ${se}`,"success"),L())}catch{}},5e3);setTimeout(()=>{clearInterval(G),S(ie=>{const X={...ie};return delete X[Z],X})},3e5)},Q=async()=>{const Z=v();if(!Z)return;C(!0);const Y=f()||"default",se=cy(Z.displayName,Z.version,Y,["Validating namespace","Adding Helm repository","Fetching chart metadata","Installing resources","Verifying deployment"]);try{ir(se,"task-0",{status:"running",progress:30,startTime:Date.now()}),await new Promise(G=>setTimeout(G,500)),ir(se,"task-0",{status:"completed",progress:100}),ir(se,"task-1",{status:"running",progress:40,startTime:Date.now()}),await new Promise(G=>setTimeout(G,500)),ir(se,"task-1",{status:"completed",progress:100}),ir(se,"task-2",{status:"running",progress:50,startTime:Date.now()}),await new Promise(G=>setTimeout(G,500)),ir(se,"task-2",{status:"completed",progress:100}),ir(se,"task-3",{status:"running",progress:60,startTime:Date.now(),message:`Deploying ${Z.displayName}...`}),await Re.installApp(Z.name,Y),ir(se,"task-3",{status:"completed",progress:100}),ir(se,"task-4",{status:"running",progress:80,startTime:Date.now()}),S(G=>({...G,[Z.name]:{namespace:Y,startTime:Date.now()}})),V(Z.name,Z.displayName,Y),await new Promise(G=>setTimeout(G,1e3)),ir(se,"task-4",{status:"completed",progress:100,message:`${Z.displayName} deployed successfully!`}),Fe(`${Z.displayName} installed successfully in ${Y}`,"success"),n(!1)}catch(G){const ie=["task-0","task-1","task-2","task-3","task-4"];for(const X of ie){ir(se,X,{status:"failed",message:G instanceof Error?G.message:"Unknown error"});break}Fe(`Failed to install ${Z.displayName}: ${G instanceof Error?G.message:"Unknown error"}`,"error")}finally{C(!1)}},F=Z=>{const Y=Z.installedNamespace||"default";console.log("Navigating to pods for app:",Z.name,"in namespace:",Y),Po(Y),At("pods")},U=async Z=>{if(confirm(`Are you sure you want to uninstall ${Z.displayName}?`))try{await Re.uninstallApp(Z.name,Z.installedNamespace||"default"),Fe(`${Z.displayName} uninstalled successfully`,"success"),L()}catch(Y){Fe(`Failed to uninstall ${Z.displayName}: ${Y instanceof Error?Y.message:"Unknown error"}`,"error")}},W=()=>{const Z=I();if(!Z.name||!Z.chartRepo||!Z.chartName){Fe("Please fill in all required fields","error");return}const se={name:Z.name.toLowerCase().replace(/[^a-z0-9-]/g,"-"),displayName:Z.displayName||Z.name,description:Z.description||`Custom Helm chart: ${Z.chartName}`,category:Z.category||"Custom",icon:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4",version:Z.version||"1.0.0",chartRepo:Z.chartRepo,chartName:Z.chartName,isCustom:!0},G=[...k(),se];B(G),so(G),M({name:"",displayName:"",description:"",category:"Custom",chartRepo:"",chartName:"",version:"1.0.0"}),T(!1),Fe(`${se.displayName} added to custom apps`,"success")},ce=Z=>{if(!confirm(`Are you sure you want to remove ${Z.displayName} from your custom apps?`))return;const Y=k().filter(se=>se.name!==Z.name);B(Y),so(Y),Fe(`${Z.displayName} removed from custom apps`,"success")},D=ze(()=>{const Z=P()||[],Y=li.map(G=>{const ie=Z.find(X=>X.name===G.name);return{...G,installed:!!ie,installedNamespace:ie?.namespace}}),se=k().map(G=>{const ie=Z.find(X=>X.name===G.name);return{...G,installed:!!ie,installedNamespace:ie?.namespace}});return{marketplace:Y,custom:se}}),j=ze(()=>{const{marketplace:Z,custom:Y}=D(),se=E()==="marketplace"?Z:Y,G=t().toLowerCase(),ie=l();let X=se;return ie!=="all"&&(X=X.filter(fe=>fe.category===ie)),G&&(X=X.filter(fe=>fe.displayName.toLowerCase().includes(G)||fe.description.toLowerCase().includes(G)||fe.category.toLowerCase().includes(G))),X}),K=ze(()=>{const Z=j(),Y={};return Z.forEach(se=>{Y[se.category]||(Y[se.category]=[]),Y[se.category].push(se)}),Object.entries(Y).map(([se,G])=>({name:se,apps:G}))}),ee=Z=>A(Si,{get children(){return[A(nr,{get when(){return Z.mode==="card"},get children(){return fy()}}),A(nr,{get when(){return Z.mode==="list"},get children(){return gy()}}),A(nr,{get when(){return Z.mode==="grid"},get children(){return py()}})]}}),ne=()=>A(Ne,{get each(){return K()},children:Z=>(()=>{var Y=vy(),se=Y.firstChild,G=se.firstChild,ie=se.nextSibling;return i(se,()=>Z.name,null),i(ie,A(Ne,{get each(){return Z.apps},children:X=>{const fe=()=>!!$()[X.name],Ae=()=>$()[X.name];return(()=>{var Ce=wy(),$e=Ce.firstChild,ye=$e.firstChild,he=ye.nextSibling,ae=he.firstChild,ue=ae.nextSibling;ue.firstChild;var Se=$e.nextSibling,_e=Se.nextSibling,de=_e.firstChild;return Ce.$$click=()=>X.installed&&F(X),i(Ce,A(q,{get when(){return fe()},get children(){var be=my();return be.firstChild,be}}),$e),i(Ce,A(q,{get when(){return Me(()=>!!X.installed)()&&!fe()},get children(){return _y()}}),$e),i(ye,A(q,{get when(){return fe()},get fallback(){return(()=>{var be=Sy(),ve=be.firstChild;return re(ge=>{var me=pr[X.category]||"var(--accent-primary)",pe=X.icon;return me!==ge.e&&oe(be,"color",ge.e=me),pe!==ge.t&&Xe(ve,"d",ge.t=pe),ge},{e:void 0,t:void 0}),be})()},get children(){return by()}})),i(ae,()=>X.displayName),i(ue,()=>X.version,null),i(Se,()=>X.description),i(de,()=>X.chartName),i(_e,A(q,{get when(){return fe()},get children(){var be=yy(),ve=be.firstChild;return ve.firstChild,i(ve,()=>Ae()?.namespace,null),be}}),null),i(_e,A(q,{get when(){return!fe()},get children(){return A(q,{get when(){return X.installed},get fallback(){return(()=>{var be=ky(),ve=be.firstChild;return ve.$$click=ge=>{ge.stopPropagation(),h(X),n(!0)},i(be,A(q,{get when(){return X.isCustom},get children(){var ge=Cy();return ge.$$click=me=>{me.stopPropagation(),ce(X)},ge}}),null),be})()},get children(){var be=xy(),ve=be.firstChild,ge=ve.nextSibling;return ve.$$click=me=>{me.stopPropagation(),F(X)},ge.$$click=me=>{me.stopPropagation(),U(X)},be}})}}),null),i(Ce,A(q,{get when(){return Me(()=>!!X.installed)()&&!fe()},get children(){var be=$y(),ve=be.firstChild,ge=ve.nextSibling,me=ge.nextSibling;return i(me,()=>X.installedNamespace||"default"),be}}),null),re(be=>{var ve=`card p-4 relative overflow-hidden group transition-all ${X.installed?"cursor-pointer hover:border-green-500/50":"hover:border-cyan-500/30"} ${fe()?"animate-pulse":""}`,ge=`4px solid ${pr[X.category]||"var(--accent-primary)"}`;return ve!==be.e&&He(Ce,be.e=ve),ge!==be.t&&oe(Ce,"border-left",be.t=ge),be},{e:void 0,t:void 0}),Ce})()}})),re(X=>{var fe=Z.name,Ae=pr[Z.name]||"var(--text-primary)",Ce=pr[Z.name]||"var(--accent-primary)";return fe!==X.e&&Xe(Y,"data-category",X.e=fe),Ae!==X.t&&oe(se,"color",X.t=Ae),Ce!==X.a&&oe(G,"background",X.a=Ce),X},{e:void 0,t:void 0,a:void 0}),Y})()}),te=()=>(()=>{var Z=Ay(),Y=Z.firstChild,se=Y.firstChild,G=se.firstChild,ie=G.nextSibling;return i(ie,A(Ne,{get each(){return j()},get fallback(){return(()=>{var X=My();return X.firstChild,X})()},children:X=>{const fe=()=>!!$()[X.name];return(()=>{var Ae=Dy(),Ce=Ae.firstChild,$e=Ce.firstChild,ye=$e.firstChild,he=ye.firstChild,ae=he.firstChild,ue=ye.nextSibling,Se=ue.firstChild,_e=Se.nextSibling,de=Ce.nextSibling,be=de.firstChild,ve=de.nextSibling,ge=ve.nextSibling,me=ge.nextSibling,pe=me.nextSibling,xe=pe.nextSibling,we=xe.firstChild;return i(Se,()=>X.displayName),i(_e,()=>X.description),i(be,()=>X.category),i(ve,()=>X.version),i(ge,()=>X.chartName),i(me,A(q,{get when(){return fe()},get fallback(){return A(q,{get when(){return X.installed},get fallback(){return Py()},get children(){return Ty()}})},get children(){var ke=Ey();return ke.firstChild,ke}})),i(pe,()=>X.installedNamespace||"-"),i(we,A(q,{get when(){return!fe()},get children(){return A(q,{get when(){return X.installed},get fallback(){return(()=>{var ke=Iy();return ke.$$click=()=>{h(X),n(!0)},ke})()},get children(){return[(()=>{var ke=Ly();return ke.$$click=()=>F(X),ke})(),(()=>{var ke=Ry();return ke.$$click=()=>U(X),ke})()]}})}})),re(ke=>{var Oe=pr[X.category]||"var(--accent-primary)",Pe=X.icon,Ie=`${pr[X.category]||"var(--accent-primary)"}20`,De=pr[X.category]||"var(--accent-primary)";return Oe!==ke.e&&oe(he,"color",ke.e=Oe),Pe!==ke.t&&Xe(ae,"d",ke.t=Pe),Ie!==ke.a&&oe(be,"background",ke.a=Ie),De!==ke.o&&oe(be,"color",ke.o=De),ke},{e:void 0,t:void 0,a:void 0,o:void 0}),Ae})()}})),Z})(),le=()=>(()=>{var Z=By();return i(Z,A(Ne,{get each(){return j()},children:Y=>{const se=()=>!!$()[Y.name],G=()=>Y.installed&&!se();return(()=>{var ie=zy(),X=ie.firstChild,fe=X.firstChild,Ae=fe.firstChild,Ce=Ae.firstChild,$e=X.nextSibling,ye=$e.nextSibling,he=ye.nextSibling,ae=he.firstChild;return ae.firstChild,ie.$$click=()=>G()&&F(Y),i(ie,A(q,{get when(){return se()||G()},get children(){var ue=Hy();return i(ue,A(q,{get when(){return se()},get fallback(){return Fy()},get children(){return Oy()}})),ue}}),X),i($e,()=>Y.displayName),i(ye,()=>Y.description),i(ae,()=>Y.version,null),i(he,A(q,{get when(){return Me(()=>!se())()&&!G()},get children(){var ue=Ny();return ue.$$click=Se=>{Se.stopPropagation(),h(Y),n(!0)},ue}}),null),re(ue=>{var Se=`card p-3 text-left hover:border-cyan-500/30 transition-colors relative ${G()?"cursor-pointer":""} ${se()?"animate-pulse":""}`,_e=`3px solid ${pr[Y.category]||"var(--accent-primary)"}`,de=pr[Y.category]||"var(--accent-primary)",be=Y.icon,ve=Y.displayName,ge=Y.description;return Se!==ue.e&&He(ie,ue.e=Se),_e!==ue.t&&oe(ie,"border-left",ue.t=_e),de!==ue.a&&oe(Ae,"color",ue.a=de),be!==ue.o&&Xe(Ce,"d",ue.o=be),ve!==ue.i&&Xe($e,"title",ue.i=ve),ge!==ue.n&&Xe(ye,"title",ue.n=ge),ue},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),ie})()}})),Z})();return(()=>{var Z=Gy(),Y=Z.firstChild,se=Y.firstChild,G=se.firstChild,ie=G.nextSibling,X=se.nextSibling,fe=X.firstChild,Ae=fe.nextSibling,Ce=Y.nextSibling,$e=Ce.firstChild,ye=$e.firstChild,he=ye.nextSibling,ae=$e.nextSibling,ue=ae.firstChild,Se=ue.nextSibling,_e=ae.nextSibling,de=_e.firstChild,be=de.nextSibling,ve=_e.nextSibling,ge=ve.nextSibling,me=Ce.nextSibling;return i(G,A(q,{get when(){return E()==="marketplace"},children:"Apps Marketplace"}),null),i(G,A(q,{get when(){return E()==="custom"},children:"Custom Apps"}),null),i(ie,A(q,{get when(){return E()==="marketplace"},children:"Deploy platform tools and applications with one click"}),null),i(ie,A(q,{get when(){return E()==="custom"},children:"Manage your custom application deployments"}),null),i(fe,A(Ne,{each:["card","list","grid"],children:pe=>(()=>{var xe=Jy(),we=xe.firstChild;return xe.$$click=()=>m(pe),i(xe,A(ee,{mode:pe}),we),i(we,pe),re(ke=>{var Oe=`px-3 py-2 flex items-center gap-2 text-sm transition-colors ${c()===pe?"text-white":"text-gray-400 hover:text-white"}`,Pe=c()===pe?{background:"var(--accent-primary)"}:{background:"transparent"},Ie=`${pe.charAt(0).toUpperCase()+pe.slice(1)} View`;return Oe!==ke.e&&He(xe,ke.e=Oe),ke.t=Hs(xe,Pe,ke.t),Ie!==ke.a&&Xe(xe,"title",ke.a=Ie),ke},{e:void 0,t:void 0,a:void 0}),xe})()})),i(X,A(q,{get when(){return E()==="custom"},get children(){var pe=jy();return pe.$$click=()=>T(!0),pe}}),Ae),Ae.$$click=()=>L(),i(Z,A(q,{when:!0,get children(){var pe=Uy(),xe=pe.firstChild,we=xe.firstChild,ke=we.nextSibling,Oe=ke.nextSibling,Pe=xe.nextSibling,Ie=Pe.firstChild,De=Ie.nextSibling,je=De.nextSibling;return xe.$$click=()=>y("marketplace"),i(Oe,()=>li.length),Pe.$$click=()=>y("custom"),i(je,()=>k().length),re(Ue=>{var Ke=`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all flex items-center justify-center gap-2 ${E()==="marketplace"?"shadow-sm":"hover:opacity-80"}`,Te=E()==="marketplace"?"var(--bg-tertiary)":"transparent",Ge=E()==="marketplace"?"var(--accent-primary)":"var(--text-secondary)",Be=`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all flex items-center justify-center gap-2 ${E()==="custom"?"shadow-sm":"hover:opacity-80"}`,We=E()==="custom"?"var(--bg-tertiary)":"transparent",Ye=E()==="custom"?"var(--accent-primary)":"var(--text-secondary)";return Ke!==Ue.e&&He(xe,Ue.e=Ke),Te!==Ue.t&&oe(xe,"background",Ue.t=Te),Ge!==Ue.a&&oe(xe,"color",Ue.a=Ge),Be!==Ue.o&&He(Pe,Ue.o=Be),We!==Ue.i&&oe(Pe,"background",Ue.i=We),Ye!==Ue.n&&oe(Pe,"color",Ue.n=Ye),Ue},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),pe}}),Ce),i(he,()=>z().total),i(Se,()=>z().installed),i(be,()=>z().available),ge.$$input=pe=>r(pe.currentTarget.value),i(me,A(Ne,{get each(){return w()},children:pe=>(()=>{var xe=Xy();return xe.$$click=()=>u(pe),i(xe,pe==="all"?"All Categories":pe),re(we=>{var ke=`px-4 py-2 rounded-lg text-sm font-medium transition-all ${l()===pe?"bg-gradient-to-r from-cyan-500/20 to-blue-500/20 border border-cyan-500/40":"bg-white/5 border border-transparent hover:border-white/10"}`,Oe=l()===pe?pe==="all"?"var(--accent-primary)":pr[pe]||"var(--accent-primary)":"var(--text-secondary)";return ke!==we.e&&He(xe,we.e=ke),Oe!==we.t&&oe(xe,"color",we.t=Oe),we},{e:void 0,t:void 0}),xe})()})),i(Z,A(q,{get when(){return Me(()=>E()==="custom")()&&k().length===0},get children(){var pe=Vy(),xe=pe.firstChild;xe.firstChild;var we=xe.nextSibling,ke=we.nextSibling,Oe=ke.nextSibling;return Oe.$$click=()=>T(!0),pe}}),null),i(Z,A(Si,{get children(){return[A(nr,{get when(){return c()==="card"},get children(){return A(ne,{})}}),A(nr,{get when(){return c()==="list"},get children(){return A(te,{})}}),A(nr,{get when(){return c()==="grid"},get children(){return A(le,{})}})]}}),null),i(Z,A(it,{get isOpen(){return s()},onClose:()=>n(!1),get title(){return`Install ${v()?.displayName}`},get children(){var pe=Ky(),xe=pe.firstChild,we=xe.nextSibling,ke=we.firstChild,Oe=ke.firstChild,Pe=Oe.nextSibling,Ie=ke.nextSibling,De=Ie.firstChild,je=De.nextSibling,Ue=Ie.nextSibling,Ke=Ue.firstChild,Te=Ke.nextSibling,Ge=we.nextSibling,Be=Ge.firstChild,We=Be.nextSibling,Ye=Ge.nextSibling,Ze=Ye.firstChild,rt=Ze.nextSibling;return i(xe,()=>v()?.description),i(pe,A(q,{get when(){return v()?.name==="k3d"||v()?.name==="kind"||v()?.name==="minikube"},get children(){var ot=Wy(),Ct=ot.firstChild,Nt=Ct.firstChild,rr=Nt.nextSibling,gr=rr.firstChild,Le=gr.nextSibling,Ve=Le.nextSibling;return Ve.nextSibling,ot}}),we),i(Pe,()=>v()?.chartName),i(je,()=>v()?.version),i(Te,()=>v()?.chartRepo),We.$$input=ot=>g(ot.currentTarget.value),Ze.$$click=()=>n(!1),rt.$$click=Q,i(rt,A(q,{get when(){return b()},get children(){return qy()}}),null),i(rt,()=>b()?"Installing...":"Install",null),re(()=>rt.disabled=b()),re(()=>We.value=f()),pe}}),null),i(Z,A(it,{get isOpen(){return O()},onClose:()=>T(!1),title:"Add Custom App",get children(){var pe=Yy(),xe=pe.firstChild,we=xe.nextSibling,ke=we.firstChild,Oe=ke.firstChild;Oe.nextSibling;var Pe=ke.nextSibling,Ie=we.nextSibling,De=Ie.firstChild,je=De.nextSibling,Ue=Ie.nextSibling,Ke=Ue.firstChild,Te=Ke.firstChild;Te.nextSibling;var Ge=Ke.nextSibling,Be=Ue.nextSibling,We=Be.firstChild,Ye=We.firstChild;Ye.nextSibling;var Ze=We.nextSibling,rt=Be.nextSibling,ot=rt.firstChild,Ct=ot.firstChild,Nt=Ct.nextSibling,rr=ot.nextSibling,gr=rr.firstChild,Le=gr.nextSibling,Ve=rt.nextSibling,nt=Ve.firstChild,ct=nt.nextSibling,dt=Ve.nextSibling,et=dt.firstChild,yt=et.nextSibling;return Pe.$$input=ht=>M(kt=>({...kt,name:ht.currentTarget.value})),je.$$input=ht=>M(kt=>({...kt,displayName:ht.currentTarget.value})),Ge.$$input=ht=>M(kt=>({...kt,chartRepo:ht.currentTarget.value})),Ze.$$input=ht=>M(kt=>({...kt,chartName:ht.currentTarget.value})),Nt.addEventListener("change",ht=>M(kt=>({...kt,category:ht.currentTarget.value}))),Le.$$input=ht=>M(kt=>({...kt,version:ht.currentTarget.value})),ct.$$input=ht=>M(kt=>({...kt,description:ht.currentTarget.value})),et.$$click=()=>T(!1),yt.$$click=W,re(()=>Pe.value=I().name),re(()=>je.value=I().displayName),re(()=>Ge.value=I().chartRepo),re(()=>Ze.value=I().chartName),re(()=>Nt.value=I().category),re(()=>Le.value=I().version),re(()=>ct.value=I().description),pe}}),null),re(()=>ge.value=t()),Z})()};Qe(["click","input"]);var Qy=R('<div class="flex items-center justify-center min-h-screen"style=background:var(--bg-primary)><div class="max-w-2xl mx-auto p-8 text-center"><div class=mb-6><h1 class="text-4xl font-bold mb-4"style=color:var(--text-primary)></h1><p class="text-lg mb-6"style=color:var(--text-secondary)></p></div><div class="mt-8 pt-8 border-t"style=border-color:var(--border-color)><p class=text-sm style=color:var(--text-muted)>This feature is under active development. Check back soon for updates!'),ex=R('<div class="inline-flex items-center justify-center w-20 h-20 rounded-full mb-4"style=background:var(--bg-secondary)><svg class="w-10 h-10"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2>'),tx=R('<div class="inline-flex items-center gap-2 px-4 py-2 rounded-full mb-8"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span class="text-sm font-medium"style=color:var(--text-primary)>Coming Soon'),rx=R('<div class="text-left space-y-3"><h2 class="text-xl font-semibold mb-4"style=color:var(--text-primary)>Planned Features:</h2><ul class=space-y-2>'),sx=R('<li class="flex items-start gap-3"><svg class="w-5 h-5 mt-0.5 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span style=color:var(--text-secondary)>');const Fi=e=>(()=>{var t=Qy(),r=t.firstChild,l=r.firstChild,u=l.firstChild,v=u.nextSibling,h=l.nextSibling;return h.firstChild,i(l,(()=>{var s=Me(()=>!!e.icon);return()=>s()&&(()=>{var n=ex(),f=n.firstChild,g=f.firstChild;return re(()=>Xe(g,"d",e.icon)),n})()})(),u),i(u,()=>e.title),i(v,()=>e.description),i(r,(()=>{var s=Me(()=>!!e.comingSoon);return()=>s()&&(()=>{var n=tx(),f=n.firstChild;return f.nextSibling,n})()})(),h),i(r,(()=>{var s=Me(()=>!!(e.features&&e.features.length>0));return()=>s()&&(()=>{var n=rx(),f=n.firstChild,g=f.nextSibling;return i(g,()=>e.features.map(p=>(()=>{var _=sx(),b=_.firstChild,C=b.nextSibling;return i(C,p),_})())),n})()})(),h),t})();var ix=R('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading PersistentVolumes...'),nx=R('<div class="p-8 text-center"style=color:var(--text-muted)><p>No PersistentVolumes found'),lx=R('<div class=overflow-x-auto><table class=w-full><thead style=background:var(--bg-secondary)><tr><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Name</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Capacity</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Access Modes</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Reclaim Policy</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Status</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Storage Class</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Claim</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Actions</th></tr></thead><tbody>'),fn=R('<div class="card overflow-hidden">'),ox=R('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading PersistentVolumeClaims...'),ax=R('<div class="p-8 text-center"style=color:var(--text-muted)><p>No PersistentVolumeClaims found'),cx=R('<div class=overflow-x-auto><table class=w-full><thead style=background:var(--bg-secondary)><tr><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Name</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Namespace</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Status</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Volume</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Capacity</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Access Modes</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Storage Class</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Actions</th></tr></thead><tbody>'),dx=R('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading StorageClasses...'),hx=R('<div class="p-8 text-center"style=color:var(--text-muted)><p>No StorageClasses found'),ux=R('<div class=overflow-x-auto><table class=w-full><thead style=background:var(--bg-secondary)><tr><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Name</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Provisioner</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Reclaim Policy</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Volume Binding Mode</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Allow Volume Expansion</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Actions</th></tr></thead><tbody>'),io=R('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading YAML...'),fx=R('<div class="space-y-6 p-6"style=minHeight:100vh;background:var(--bg-primary)><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-3xl font-bold"style=color:var(--text-primary)>Storage</h1><p style=color:var(--text-secondary)>Manage PersistentVolumes, PersistentVolumeClaims, and StorageClasses</p></div></div><div class="flex gap-2 border-b"style=border-color:var(--border-color)><button>PersistentVolumes (<!>)</button><button>PersistentVolumeClaims (<!>)</button><button>StorageClasses (<!>)'),gx=R('<tr class=border-t style=border-color:var(--border-color)><td class="px-4 py-3 text-sm"style=color:var(--text-primary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"><span class="px-2 py-1 rounded text-xs font-medium"></span></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm">'),px=R('<tr class=border-t style=border-color:var(--border-color)><td class="px-4 py-3 text-sm"style=color:var(--text-primary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"><span class="px-2 py-1 rounded text-xs font-medium"></span></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm">'),vx=R('<tr class=border-t style=border-color:var(--border-color)><td class="px-4 py-3 text-sm"style=color:var(--text-primary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm">'),mx=R("<span class=text-green-500>Yes"),_x=R("<span class=text-gray-500>No");const bx=()=>{const[e,t]=J("pvs"),[r,l]=J(null),[u,v]=J(null),[h,s]=J(null),[n,f]=J(!1),[g,p]=J(!1),[_,b]=J(""),[C,x]=J(!1),[o,{refetch:d}]=qe(async()=>{try{const k=await fetch("/api/storage/persistentvolumes");if(!k.ok)throw new Error("Failed to fetch PVs");const B=await k.json();return Array.isArray(B)?B:[]}catch(k){return console.error("Failed to fetch PVs:",k),[]}}),[a,{refetch:c}]=qe(()=>tt(),async k=>{try{const B=k==="_all"?void 0:k,O=await fetch(`/api/storage/persistentvolumeclaims${B?`?namespace=${B}`:""}`);if(!O.ok)throw new Error("Failed to fetch PVCs");const T=await O.json();return Array.isArray(T)?T:[]}catch(B){return console.error("Failed to fetch PVCs:",B),[]}}),[m,{refetch:$}]=qe(async()=>{try{const k=await fetch("/api/storage/storageclasses");if(!k.ok)throw new Error("Failed to fetch StorageClasses");const B=await k.json();return Array.isArray(B)?B:[]}catch(k){return console.error("Failed to fetch StorageClasses:",k),[]}}),S=async(k,B,O)=>{x(!0);try{let T="";k==="pv"?T=(await Re.getPVYAML(B)).yaml||"":k==="pvc"?T=(await Re.getPVCYAML(B,O||"default")).yaml||"":k==="sc"&&(T=(await Re.getStorageClassYAML(B)).yaml||""),b(T)}catch(T){Fe(`Failed to load YAML: ${T instanceof Error?T.message:"Unknown error"}`,"error")}finally{x(!1)}},E=async k=>{try{e()==="pvs"&&r()?(await Re.updatePV(r().name,k),Fe(`âœ… PersistentVolume ${r().name} updated successfully`,"success"),d()):e()==="pvcs"&&u()?(await Re.updatePVC(u().name,u().namespace||"default",k),Fe(`âœ… PersistentVolumeClaim ${u().name} updated successfully`,"success"),c()):e()==="storageclasses"&&h()&&(await Re.updateStorageClass(h().name,k),Fe(`âœ… StorageClass ${h().name} updated successfully`,"success"),$()),p(!1)}catch(B){throw Fe(`âŒ Failed to update: ${B instanceof Error?B.message:"Unknown error"}`,"error"),B}},y=async(k,B,O)=>{if(confirm(`Are you sure you want to delete ${B}?`))try{k==="pv"?(await Re.deletePV(B),Fe(`âœ… PersistentVolume ${B} deleted successfully`,"success"),d()):k==="pvc"?(await Re.deletePVC(B,O||"default"),Fe(`âœ… PersistentVolumeClaim ${B} deleted successfully`,"success"),c()):k==="sc"&&(await Re.deleteStorageClass(B),Fe(`âœ… StorageClass ${B} deleted successfully`,"success"),$())}catch(T){Fe(`âŒ Failed to delete: ${T instanceof Error?T.message:"Unknown error"}`,"error")}};return(()=>{var k=fx(),B=k.firstChild,O=B.firstChild,T=O.firstChild;T.nextSibling;var I=B.nextSibling,M=I.firstChild,P=M.firstChild,L=P.nextSibling;L.nextSibling;var H=M.nextSibling,w=H.firstChild,N=w.nextSibling;N.nextSibling;var z=H.nextSibling,V=z.firstChild,Q=V.nextSibling;return Q.nextSibling,M.$$click=()=>t("pvs"),i(M,()=>o()?.length||0,L),H.$$click=()=>t("pvcs"),i(H,()=>a()?.length||0,N),z.$$click=()=>t("storageclasses"),i(z,()=>m()?.length||0,Q),i(k,A(q,{get when(){return e()==="pvs"},get children(){var F=fn();return i(F,A(q,{get when(){return o.loading},get children(){var U=ix(),W=U.firstChild;return W.nextSibling,U}}),null),i(F,A(q,{get when(){return Me(()=>!o.loading)()&&(!o()||o().length===0)},get children(){return nx()}}),null),i(F,A(q,{get when(){return Me(()=>!!(!o.loading&&o()))()&&o().length>0},get children(){var U=lx(),W=U.firstChild,ce=W.firstChild,D=ce.firstChild,j=D.firstChild,K=j.nextSibling,ee=K.nextSibling,ne=ee.nextSibling,te=ne.nextSibling,le=te.nextSibling,Z=le.nextSibling;Z.nextSibling;var Y=ce.nextSibling;return i(Y,A(Ne,{get each(){return o()},children:se=>(()=>{var G=gx(),ie=G.firstChild,X=ie.nextSibling,fe=X.nextSibling,Ae=fe.nextSibling,Ce=Ae.nextSibling,$e=Ce.firstChild,ye=Ce.nextSibling,he=ye.nextSibling,ae=he.nextSibling;return i(ie,()=>se.name),i(X,()=>se.capacity||"N/A"),i(fe,(()=>{var ue=Me(()=>!!Array.isArray(se.accessModes));return()=>ue()?se.accessModes.join(", "):se.accessModes||"N/A"})()),i(Ae,()=>se.reclaimPolicy||"N/A"),i($e,()=>se.status||"Unknown"),i(ye,()=>se.storageClass||"N/A"),i(he,()=>se.claim||"-"),i(ae,A(Tt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{l(se),S("pv",se.name),f(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{l(se),S("pv",se.name),p(!0)}},{label:"Delete",icon:"delete",onClick:()=>y("pv",se.name),variant:"danger",divider:!0}]})),re(ue=>{var Se=se.status==="Bound"?"#10b98120":se.status==="Available"?"#3b82f620":"#ef444420",_e=se.status==="Bound"?"#10b981":se.status==="Available"?"#3b82f6":"#ef4444";return Se!==ue.e&&oe($e,"background",ue.e=Se),_e!==ue.t&&oe($e,"color",ue.t=_e),ue},{e:void 0,t:void 0}),G})()})),U}}),null),F}}),null),i(k,A(q,{get when(){return e()==="pvcs"},get children(){var F=fn();return i(F,A(q,{get when(){return a.loading},get children(){var U=ox(),W=U.firstChild;return W.nextSibling,U}}),null),i(F,A(q,{get when(){return Me(()=>!a.loading)()&&(!a()||Array.isArray(a())&&a().length===0)},get children(){return ax()}}),null),i(F,A(q,{get when(){return Me(()=>!!(!a.loading&&a()&&Array.isArray(a())))()&&a().length>0},get children(){var U=cx(),W=U.firstChild,ce=W.firstChild,D=ce.firstChild,j=D.firstChild,K=j.nextSibling,ee=K.nextSibling,ne=ee.nextSibling,te=ne.nextSibling,le=te.nextSibling,Z=le.nextSibling;Z.nextSibling;var Y=ce.nextSibling;return i(Y,A(Ne,{get each(){return a()},children:se=>(()=>{var G=px(),ie=G.firstChild,X=ie.nextSibling,fe=X.nextSibling,Ae=fe.firstChild,Ce=fe.nextSibling,$e=Ce.nextSibling,ye=$e.nextSibling,he=ye.nextSibling,ae=he.nextSibling;return i(ie,()=>se.name),i(X,()=>se.namespace||"default"),i(Ae,()=>se.status||"Unknown"),i(Ce,()=>se.volume||"-"),i($e,()=>se.capacity||"N/A"),i(ye,(()=>{var ue=Me(()=>!!Array.isArray(se.accessModes));return()=>ue()?se.accessModes.join(", "):se.accessModes||"N/A"})()),i(he,()=>se.storageClass||"N/A"),i(ae,A(Tt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{v(se),S("pvc",se.name,se.namespace),f(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{v(se),S("pvc",se.name,se.namespace),p(!0)}},{label:"Delete",icon:"delete",onClick:()=>y("pvc",se.name,se.namespace),variant:"danger",divider:!0}]})),re(ue=>{var Se=se.status==="Bound"?"#10b98120":"#ef444420",_e=se.status==="Bound"?"#10b981":"#ef4444";return Se!==ue.e&&oe(Ae,"background",ue.e=Se),_e!==ue.t&&oe(Ae,"color",ue.t=_e),ue},{e:void 0,t:void 0}),G})()})),U}}),null),F}}),null),i(k,A(q,{get when(){return e()==="storageclasses"},get children(){var F=fn();return i(F,A(q,{get when(){return m.loading},get children(){var U=dx(),W=U.firstChild;return W.nextSibling,U}}),null),i(F,A(q,{get when(){return Me(()=>!m.loading)()&&(!m()||m().length===0)},get children(){return hx()}}),null),i(F,A(q,{get when(){return Me(()=>!!(!m.loading&&m()))()&&m().length>0},get children(){var U=ux(),W=U.firstChild,ce=W.firstChild,D=ce.firstChild,j=D.firstChild,K=j.nextSibling,ee=K.nextSibling,ne=ee.nextSibling,te=ne.nextSibling;te.nextSibling;var le=ce.nextSibling;return i(le,A(Ne,{get each(){return m()},children:Z=>(()=>{var Y=vx(),se=Y.firstChild,G=se.nextSibling,ie=G.nextSibling,X=ie.nextSibling,fe=X.nextSibling,Ae=fe.nextSibling;return i(se,()=>Z.name),i(G,()=>Z.provisioner||"N/A"),i(ie,()=>Z.reclaimPolicy||"N/A"),i(X,()=>Z.volumeBindingMode||"N/A"),i(fe,(()=>{var Ce=Me(()=>!!Z.allowVolumeExpansion);return()=>Ce()?mx():_x()})()),i(Ae,A(Tt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{s(Z),S("sc",Z.name),f(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{s(Z),S("sc",Z.name),p(!0)}},{label:"Delete",icon:"delete",onClick:()=>y("sc",Z.name),variant:"danger",divider:!0}]})),Y})()})),U}}),null),F}}),null),i(k,A(q,{get when(){return n()},get children(){return A(it,{size:"large",get title(){return`View YAML - ${e()==="pvs"?r()?.name:e()==="pvcs"?u()?.name:h()?.name}`},onClose:()=>{f(!1),l(null),v(null),s(null)},get children(){return A(q,{get when(){return C()},get fallback(){return A(tr,{get content(){return _()}})},get children(){var F=io(),U=F.firstChild;return U.nextSibling,F}})}})}}),null),i(k,A(q,{get when(){return g()},get children(){return A(it,{size:"large",get title(){return`Edit YAML - ${e()==="pvs"?r()?.name:e()==="pvcs"?u()?.name:h()?.name}`},onClose:()=>{p(!1),l(null),v(null),s(null)},get children(){return A(q,{get when(){return C()},get fallback(){return A(ur,{get content(){return _()},onSave:E,onCancel:()=>p(!1)})},get children(){var F=io(),U=F.firstChild;return U.nextSibling,F}})}})}}),null),re(F=>{var U=`px-4 py-2 font-medium transition-colors ${e()==="pvs"?"border-b-2":""}`,W=e()==="pvs"?"var(--accent-primary)":"var(--text-secondary)",ce=e()==="pvs"?"var(--accent-primary)":"transparent",D=`px-4 py-2 font-medium transition-colors ${e()==="pvcs"?"border-b-2":""}`,j=e()==="pvcs"?"var(--accent-primary)":"var(--text-secondary)",K=e()==="pvcs"?"var(--accent-primary)":"transparent",ee=`px-4 py-2 font-medium transition-colors ${e()==="storageclasses"?"border-b-2":""}`,ne=e()==="storageclasses"?"var(--accent-primary)":"var(--text-secondary)",te=e()==="storageclasses"?"var(--accent-primary)":"transparent";return U!==F.e&&He(M,F.e=U),W!==F.t&&oe(M,"color",F.t=W),ce!==F.a&&oe(M,"border-bottom-color",F.a=ce),D!==F.o&&He(H,F.o=D),j!==F.i&&oe(H,"color",F.i=j),K!==F.n&&oe(H,"border-bottom-color",F.n=K),ee!==F.s&&He(z,F.s=ee),ne!==F.h&&oe(z,"color",F.h=ne),te!==F.r&&oe(z,"border-bottom-color",F.r=te),F},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),k})()};Qe(["click"]);var yx=R('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading Roles...'),xx=R('<div class="p-8 text-center"style=color:var(--text-muted)><p>No Roles found'),$x=R('<div class=overflow-x-auto><table class=w-full><thead style=background:var(--bg-secondary)><tr><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Name</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Namespace</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Rules</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Age</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Actions</th></tr></thead><tbody>'),oi=R('<div class="card overflow-hidden">'),wx=R('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading RoleBindings...'),Sx=R('<div class="p-8 text-center"style=color:var(--text-muted)><p>No RoleBindings found'),Cx=R('<div class=overflow-x-auto><table class=w-full><thead style=background:var(--bg-secondary)><tr><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Name</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Namespace</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Role Ref</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Subjects</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Age</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Actions</th></tr></thead><tbody>'),kx=R('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading ClusterRoles...'),Ax=R('<div class="p-8 text-center"style=color:var(--text-muted)><p>No ClusterRoles found'),Mx=R('<div class=overflow-x-auto><table class=w-full><thead style=background:var(--bg-secondary)><tr><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Name</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Rules</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Age</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Actions</th></tr></thead><tbody>'),Ex=R('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading ClusterRoleBindings...'),Lx=R('<div class="p-8 text-center"style=color:var(--text-muted)><p>No ClusterRoleBindings found'),Rx=R('<div class=overflow-x-auto><table class=w-full><thead style=background:var(--bg-secondary)><tr><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Name</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Role Ref</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Subjects</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Age</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Actions</th></tr></thead><tbody>'),no=R('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading YAML...'),Dx=R('<div class="space-y-6 p-6"style=minHeight:100vh;background:var(--bg-primary)><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-3xl font-bold"style=color:var(--text-primary)>RBAC</h1><p style=color:var(--text-secondary)>Manage Roles, RoleBindings, ClusterRoles, and ClusterRoleBindings</p></div></div><div class="flex gap-2 border-b"style=border-color:var(--border-color)><button>Roles (<!>)</button><button>RoleBindings (<!>)</button><button>ClusterRoles (<!>)</button><button>ClusterRoleBindings (<!>)'),lo=R('<tr class=border-t style=border-color:var(--border-color)><td class="px-4 py-3 text-sm"style=color:var(--text-primary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm">'),Tx=R('<tr class=border-t style=border-color:var(--border-color)><td class="px-4 py-3 text-sm"style=color:var(--text-primary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm">'),Px=R('<tr class=border-t style=border-color:var(--border-color)><td class="px-4 py-3 text-sm"style=color:var(--text-primary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm">');const Ix=()=>{const[e,t]=J("roles"),[r,l]=J(null),[u,v]=J(null),[h,s]=J(null),[n,f]=J(null),[g,p]=J(!1),[_,b]=J(!1),[C,x]=J(""),[o,d]=J(!1),[a]=qe(()=>tt(),async S=>{try{const E=S==="_all"?void 0:S,y=await fetch(`/api/rbac/roles${E?`?namespace=${E}`:""}`);if(!y.ok)throw new Error("Failed to fetch Roles");const k=await y.json();return Array.isArray(k)?k:[]}catch(E){return console.error("Failed to fetch Roles:",E),[]}}),[c]=qe(()=>tt(),async S=>{try{const E=S==="_all"?void 0:S,y=await fetch(`/api/rbac/rolebindings${E?`?namespace=${E}`:""}`);if(!y.ok)throw new Error("Failed to fetch RoleBindings");const k=await y.json();return Array.isArray(k)?k:[]}catch(E){return console.error("Failed to fetch RoleBindings:",E),[]}}),[m]=qe(async()=>{try{const S=await fetch("/api/rbac/clusterroles");if(!S.ok)throw new Error("Failed to fetch ClusterRoles");const E=await S.json();return Array.isArray(E)?E:[]}catch(S){return console.error("Failed to fetch ClusterRoles:",S),[]}}),[$]=qe(async()=>{try{const S=await fetch("/api/rbac/clusterrolebindings");if(!S.ok)throw new Error("Failed to fetch ClusterRoleBindings");const E=await S.json();return Array.isArray(E)?E:[]}catch(S){return console.error("Failed to fetch ClusterRoleBindings:",S),[]}});return(()=>{var S=Dx(),E=S.firstChild,y=E.firstChild,k=y.firstChild;k.nextSibling;var B=E.nextSibling,O=B.firstChild,T=O.firstChild,I=T.nextSibling;I.nextSibling;var M=O.nextSibling,P=M.firstChild,L=P.nextSibling;L.nextSibling;var H=M.nextSibling,w=H.firstChild,N=w.nextSibling;N.nextSibling;var z=H.nextSibling,V=z.firstChild,Q=V.nextSibling;return Q.nextSibling,O.$$click=()=>t("roles"),i(O,()=>a()?.length||0,I),M.$$click=()=>t("rolebindings"),i(M,()=>c()?.length||0,L),H.$$click=()=>t("clusterroles"),i(H,()=>m()?.length||0,N),z.$$click=()=>t("clusterrolebindings"),i(z,()=>$()?.length||0,Q),i(S,A(q,{get when(){return e()==="roles"},get children(){var F=oi();return i(F,A(q,{get when(){return a.loading},get children(){var U=yx(),W=U.firstChild;return W.nextSibling,U}}),null),i(F,A(q,{get when(){return Me(()=>!a.loading)()&&(!a()||a().length===0)},get children(){return xx()}}),null),i(F,A(q,{get when(){return Me(()=>!!(!a.loading&&a()))()&&a().length>0},get children(){var U=$x(),W=U.firstChild,ce=W.firstChild,D=ce.firstChild,j=D.firstChild,K=j.nextSibling,ee=K.nextSibling,ne=ee.nextSibling;ne.nextSibling;var te=ce.nextSibling;return i(te,A(Ne,{get each(){return a()},children:le=>(()=>{var Z=lo(),Y=Z.firstChild,se=Y.nextSibling,G=se.nextSibling,ie=G.nextSibling,X=ie.nextSibling;return i(Y,()=>le.name),i(se,()=>le.namespace||"default"),i(G,()=>le.rules||0),i(ie,()=>le.age||"N/A"),i(X,A(Tt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{l(le),loadYAML("role",le.name,le.namespace),p(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{l(le),loadYAML("role",le.name,le.namespace),b(!0)}},{label:"Delete",icon:"delete",onClick:()=>handleDelete("role",le.name,le.namespace),variant:"danger",divider:!0}]})),Z})()})),U}}),null),F}}),null),i(S,A(q,{get when(){return e()==="rolebindings"},get children(){var F=oi();return i(F,A(q,{get when(){return c.loading},get children(){var U=wx(),W=U.firstChild;return W.nextSibling,U}}),null),i(F,A(q,{get when(){return Me(()=>!c.loading)()&&(!c()||c().length===0)},get children(){return Sx()}}),null),i(F,A(q,{get when(){return Me(()=>!!(!c.loading&&c()))()&&c().length>0},get children(){var U=Cx(),W=U.firstChild,ce=W.firstChild,D=ce.firstChild,j=D.firstChild,K=j.nextSibling,ee=K.nextSibling,ne=ee.nextSibling,te=ne.nextSibling;te.nextSibling;var le=ce.nextSibling;return i(le,A(Ne,{get each(){return c()},children:Z=>(()=>{var Y=Tx(),se=Y.firstChild,G=se.nextSibling,ie=G.nextSibling,X=ie.nextSibling,fe=X.nextSibling,Ae=fe.nextSibling;return i(se,()=>Z.name),i(G,()=>Z.namespace||"default"),i(ie,()=>Z.roleRef||"N/A"),i(X,()=>Z.subjects||0),i(fe,()=>Z.age||"N/A"),i(Ae,A(Tt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{v(Z),loadYAML("rb",Z.name,Z.namespace),p(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{v(Z),loadYAML("rb",Z.name,Z.namespace),b(!0)}},{label:"Delete",icon:"delete",onClick:()=>handleDelete("rb",Z.name,Z.namespace),variant:"danger",divider:!0}]})),Y})()})),U}}),null),F}}),null),i(S,A(q,{get when(){return e()==="clusterroles"},get children(){var F=oi();return i(F,A(q,{get when(){return m.loading},get children(){var U=kx(),W=U.firstChild;return W.nextSibling,U}}),null),i(F,A(q,{get when(){return Me(()=>!m.loading)()&&(!m()||m().length===0)},get children(){return Ax()}}),null),i(F,A(q,{get when(){return Me(()=>!!(!m.loading&&m()))()&&m().length>0},get children(){var U=Mx(),W=U.firstChild,ce=W.firstChild,D=ce.firstChild,j=D.firstChild,K=j.nextSibling,ee=K.nextSibling;ee.nextSibling;var ne=ce.nextSibling;return i(ne,A(Ne,{get each(){return m()},children:te=>(()=>{var le=Px(),Z=le.firstChild,Y=Z.nextSibling,se=Y.nextSibling,G=se.nextSibling;return i(Z,()=>te.name),i(Y,()=>te.rules||0),i(se,()=>te.age||"N/A"),i(G,A(Tt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{s(te),loadYAML("cr",te.name),p(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{s(te),loadYAML("cr",te.name),b(!0)}},{label:"Delete",icon:"delete",onClick:()=>handleDelete("cr",te.name),variant:"danger",divider:!0}]})),le})()})),U}}),null),F}}),null),i(S,A(q,{get when(){return e()==="clusterrolebindings"},get children(){var F=oi();return i(F,A(q,{get when(){return $.loading},get children(){var U=Ex(),W=U.firstChild;return W.nextSibling,U}}),null),i(F,A(q,{get when(){return Me(()=>!$.loading)()&&(!$()||$().length===0)},get children(){return Lx()}}),null),i(F,A(q,{get when(){return Me(()=>!!(!$.loading&&$()))()&&$().length>0},get children(){var U=Rx(),W=U.firstChild,ce=W.firstChild,D=ce.firstChild,j=D.firstChild,K=j.nextSibling,ee=K.nextSibling,ne=ee.nextSibling;ne.nextSibling;var te=ce.nextSibling;return i(te,A(Ne,{get each(){return $()},children:le=>(()=>{var Z=lo(),Y=Z.firstChild,se=Y.nextSibling,G=se.nextSibling,ie=G.nextSibling,X=ie.nextSibling;return i(Y,()=>le.name),i(se,()=>le.roleRef||"N/A"),i(G,()=>le.subjects||0),i(ie,()=>le.age||"N/A"),i(X,A(Tt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{f(le),loadYAML("crb",le.name),p(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{f(le),loadYAML("crb",le.name),b(!0)}},{label:"Delete",icon:"delete",onClick:()=>handleDelete("crb",le.name),variant:"danger",divider:!0}]})),Z})()})),U}}),null),F}}),null),i(S,A(q,{get when(){return g()},get children(){return A(it,{size:"large",get title(){return`View YAML - ${e()==="roles"?r()?.name:e()==="rolebindings"?u()?.name:e()==="clusterroles"?h()?.name:n()?.name}`},onClose:()=>{p(!1),l(null),v(null),s(null),f(null)},get children(){return A(q,{get when(){return o()},get fallback(){return A(tr,{get content(){return C()}})},get children(){var F=no(),U=F.firstChild;return U.nextSibling,F}})}})}}),null),i(S,A(q,{get when(){return _()},get children(){return A(it,{size:"large",get title(){return`Edit YAML - ${e()==="roles"?r()?.name:e()==="rolebindings"?u()?.name:e()==="clusterroles"?h()?.name:n()?.name}`},onClose:()=>{b(!1),l(null),v(null),s(null),f(null)},get children(){return A(q,{get when(){return o()},get fallback(){return A(ur,{get content(){return C()},onSave:handleSaveYAML,onCancel:()=>b(!1)})},get children(){var F=no(),U=F.firstChild;return U.nextSibling,F}})}})}}),null),re(F=>{var U=`px-4 py-2 font-medium transition-colors ${e()==="roles"?"border-b-2":""}`,W=e()==="roles"?"var(--accent-primary)":"var(--text-secondary)",ce=e()==="roles"?"var(--accent-primary)":"transparent",D=`px-4 py-2 font-medium transition-colors ${e()==="rolebindings"?"border-b-2":""}`,j=e()==="rolebindings"?"var(--accent-primary)":"var(--text-secondary)",K=e()==="rolebindings"?"var(--accent-primary)":"transparent",ee=`px-4 py-2 font-medium transition-colors ${e()==="clusterroles"?"border-b-2":""}`,ne=e()==="clusterroles"?"var(--accent-primary)":"var(--text-secondary)",te=e()==="clusterroles"?"var(--accent-primary)":"transparent",le=`px-4 py-2 font-medium transition-colors ${e()==="clusterrolebindings"?"border-b-2":""}`,Z=e()==="clusterrolebindings"?"var(--accent-primary)":"var(--text-secondary)",Y=e()==="clusterrolebindings"?"var(--accent-primary)":"transparent";return U!==F.e&&He(O,F.e=U),W!==F.t&&oe(O,"color",F.t=W),ce!==F.a&&oe(O,"border-bottom-color",F.a=ce),D!==F.o&&He(M,F.o=D),j!==F.i&&oe(M,"color",F.i=j),K!==F.n&&oe(M,"border-bottom-color",F.n=K),ee!==F.s&&He(H,F.s=ee),ne!==F.h&&oe(H,"color",F.h=ne),te!==F.r&&oe(H,"border-bottom-color",F.r=te),le!==F.d&&He(z,F.d=le),Z!==F.l&&oe(z,"color",F.l=Z),Y!==F.u&&oe(z,"border-bottom-color",F.u=Y),F},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0}),S})()};Qe(["click"]);const Bx=()=>A(Fi,{title:"Network Policies",description:"View and manage Kubernetes Network Policies for controlling pod-to-pod communication.",icon:"M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z",comingSoon:!1,features:["View network policies","Policy visualization","Ingress/Egress rules","Pod selector matching","Policy testing"]});var Ox=R('<div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Email</label><input type=email class="w-full px-4 py-2 rounded-lg"placeholder=your@email.com style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)">'),Hx=R('<div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Role</label><select class="w-full px-4 py-2 rounded-lg"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=viewer>Viewer (Read-only)</option><option value=developer>Developer (Read/Write)</option><option value=admin>Admin (Full Access)</option></select><p class="text-xs mt-1"style=color:var(--text-muted)>Choose your access level'),Nx=R('<div class="mt-6 p-4 rounded-lg text-sm"style="background:var(--bg-tertiary);border:1px solid var(--border-color)"><p class="font-medium mb-2"style=color:var(--text-primary)>â„¹ï¸ First Time Setup</p><p style=color:var(--text-secondary)>If this is your first time, create an admin account by clicking "Create one" below, or use the default credentials if configured.'),zx=R('<div class="fixed inset-0 flex items-center justify-center"style="background:rgba(0, 0, 0, 0.7);z-index:9999;pointer-events:auto"><div class="card p-8 max-w-md w-full mx-4"style=background:var(--bg-card)><div class=mb-6><h2 class="text-2xl font-bold mb-2"style=color:var(--text-primary)></h2><p class=text-sm style=color:var(--text-secondary)></p></div><form class=space-y-4><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Username</label><input type=text required class="w-full px-4 py-2 rounded-lg"placeholder="Enter username"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Password</label><input type=password required class="w-full px-4 py-2 rounded-lg"placeholder="Enter password"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div><button type=submit class="w-full py-3 rounded-lg font-medium transition-opacity disabled:opacity-50"style=background:var(--accent-primary);color:white></button></form><div class="mt-4 text-center"><button class="text-sm hover:underline"style=color:var(--accent-primary)>');const Fx=e=>{const[t,r]=J(""),[l,u]=J(""),[v,h]=J(!1),[s,n]=J(!1),[f,g]=J(""),[p,_]=J("viewer"),b=async x=>{x.preventDefault(),h(!0);try{const o=await fetch("http://localhost:3001/api/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:t(),password:l()})});if(!o.ok)throw new Error("Invalid credentials");const d=await o.json();localStorage.setItem("kubegraf_token",d.token),localStorage.setItem("kubegraf_user",JSON.stringify(d.user)),Fe(`âœ… Welcome back, ${d.user.username}!`,"success"),e.onLoginSuccess(d.user),e.onClose()}catch(o){Fe(`âŒ Login failed: ${o instanceof Error?o.message:"Unknown error"}`,"error")}finally{h(!1)}},C=async x=>{x.preventDefault(),h(!0);try{const o=await fetch("http://localhost:3001/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t(),password:l(),email:f(),role:p()})});if(!o.ok){const d=await o.text();throw new Error(d||"Registration failed")}Fe("âœ… Account created! Please login.","success"),n(!1),u("")}catch(o){Fe(`âŒ Registration failed: ${o instanceof Error?o.message:"Unknown error"}`,"error")}finally{h(!1)}};return console.log("[LoginModal] Render called - isOpen:",e.isOpen),A(q,{get when(){return e.isOpen},get children(){return A(Xr,{get children(){var x=zx(),o=x.firstChild,d=o.firstChild,a=d.firstChild,c=a.nextSibling,m=d.nextSibling,$=m.firstChild,S=$.firstChild,E=S.nextSibling,y=$.nextSibling,k=y.firstChild,B=k.nextSibling,O=y.nextSibling,T=m.nextSibling,I=T.firstChild;return ar(x,"click",e.onClose,!0),o.$$click=M=>M.stopPropagation(),i(a,()=>s()?"ðŸ” Create Account":"ðŸ”‘ Login to KubeGraf"),i(c,()=>s()?"Create a new account to access KubeGraf":"Enter your credentials to continue"),ar(m,"submit",s()?C:b),E.$$input=M=>r(M.currentTarget.value),i(m,A(q,{get when(){return s()},get children(){var M=Ox(),P=M.firstChild,L=P.nextSibling;return L.$$input=H=>g(H.currentTarget.value),re(H=>{var w=s(),N=v();return w!==H.e&&(L.required=H.e=w),N!==H.t&&(L.disabled=H.t=N),H},{e:void 0,t:void 0}),re(()=>L.value=f()),M}}),y),B.$$input=M=>u(M.currentTarget.value),i(m,A(q,{get when(){return s()},get children(){var M=Hx(),P=M.firstChild,L=P.nextSibling;return L.nextSibling,L.addEventListener("change",H=>_(H.currentTarget.value)),re(()=>L.disabled=v()),re(()=>L.value=p()),M}}),O),i(O,(()=>{var M=Me(()=>!!v());return()=>M()?"â³ Processing...":s()?"ðŸ” Create Account":"ðŸ”‘ Login"})()),I.$$click=()=>{n(!s()),u(""),g("")},i(I,()=>s()?"â† Back to Login":"Don't have an account? Create one â†’"),i(o,A(q,{get when(){return!s()},get children(){var M=Nx(),P=M.firstChild;return P.nextSibling,M}}),null),re(M=>{var P=v(),L=v(),H=v(),w=v();return P!==M.e&&(E.disabled=M.e=P),L!==M.t&&(B.disabled=M.t=L),H!==M.a&&(O.disabled=M.a=H),w!==M.o&&(I.disabled=M.o=w),M},{e:void 0,t:void 0,a:void 0,o:void 0}),re(()=>E.value=t()),re(()=>B.value=l()),x}})}})};Qe(["click","input"]);var jx=R('<div class="flex items-center gap-3"><div class=text-right><div class="text-sm font-medium"style=color:var(--text-primary)></div><div class=text-xs style=color:var(--text-secondary)></div></div><button class="px-4 py-2 rounded-lg text-sm"style="background:var(--bg-tertiary);border:1px solid var(--border-color);color:var(--text-primary)">Logout'),Ux=R('<div class="p-4 rounded-lg"style="background:var(--bg-tertiary);border:1px solid var(--border-color)"><div class="grid grid-cols-2 gap-4"><div><div class=text-xs style=color:var(--text-muted)>Username</div><div class=font-medium style=color:var(--text-primary)></div></div><div><div class=text-xs style=color:var(--text-muted)>Email</div><div class=font-medium style=color:var(--text-primary)></div></div><div><div class=text-xs style=color:var(--text-muted)>Role</div><div><span class="inline-flex px-2 py-1 rounded text-xs font-medium"></span></div></div><div><div class=text-xs style=color:var(--text-muted)>Status</div><div class="flex items-center gap-2"><span class="w-2 h-2 rounded-full bg-green-500"></span><span class=text-sm style=color:var(--text-primary)>Active'),Vx=R(`<div class="card p-6"><h3 class="text-lg font-semibold mb-4"style=color:var(--text-primary)>ðŸš€ Quick Setup Guide</h3><div class=space-y-4><div class="flex items-start gap-3"><div class="w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0"style=background:var(--accent-primary);color:white>1</div><div><div class="font-medium mb-1"style=color:var(--text-primary)>Create Admin Account</div><div class=text-sm style=color:var(--text-secondary)>Click "Login" button â†’ "Create one" â†’ Fill details â†’ Select "Admin" role</div></div></div><div class="flex items-start gap-3"><div class="w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0"style=background:var(--accent-primary);color:white>2</div><div><div class="font-medium mb-1"style=color:var(--text-primary)>Login</div><div class=text-sm style=color:var(--text-secondary)>Use your credentials to login â†’ Session valid for 24 hours</div></div></div><div class="flex items-start gap-3"><div class="w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0"style=background:var(--accent-primary);color:white>3</div><div><div class="font-medium mb-1"style=color:var(--text-primary)>Create Additional Users</div><div class=text-sm style=color:var(--text-secondary)>As admin, create accounts for team members with appropriate roles</div></div></div></div><div class="mt-6 p-4 rounded-lg"style="background:var(--bg-tertiary);border:1px solid var(--border-color)"><div class="flex items-start gap-2"><span>ðŸ’¡</span><div class=text-sm style=color:var(--text-secondary)><strong>First Time?</strong> If IAM is enabled but you don't have credentials, you'll need to create the first admin account. Click the Login button above to get started.`),Wx=R('<div class="space-y-6 p-6"><div class="flex items-center justify-between"><div><h1 class="text-3xl font-bold"style=color:var(--text-primary)>ðŸ‘¥ User Management</h1><p class="text-sm mt-2"style=color:var(--text-secondary)>Manage users, roles, and authentication</p></div></div><div class="card p-6"><div class="flex items-center justify-between mb-4"><div class="flex items-center gap-3"><div class="w-12 h-12 rounded-full flex items-center justify-center"style=background:var(--accent-primary)><span class=text-2xl>ðŸ”</span></div><div><h2 class="text-xl font-semibold"style=color:var(--text-primary)>Local IAM System</h2><p class=text-sm style=color:var(--text-secondary)>Identity and Access Management</p></div></div></div></div><div class="card p-6"><h3 class="text-lg font-semibold mb-4"style=color:var(--text-primary)>ðŸ“‹ Roles & Permissions</h3><div class=space-y-3><div class="p-4 rounded-lg"style="background:var(--bg-tertiary);border:1px solid var(--border-color)"><div class="flex items-center gap-3 mb-2"><span class="px-2 py-1 rounded text-xs font-medium"style="background:rgba(239, 68, 68, 0.1);color:#ef4444">Admin</span><span class="text-sm font-medium"style=color:var(--text-primary)>Full Access</span></div><p class=text-sm style=color:var(--text-secondary)>Complete control over all resources, users, and settings. Can create/delete users, modify any resource, and access all namespaces.</p></div><div class="p-4 rounded-lg"style="background:var(--bg-tertiary);border:1px solid var(--border-color)"><div class="flex items-center gap-3 mb-2"><span class="px-2 py-1 rounded text-xs font-medium"style="background:rgba(59, 130, 246, 0.1);color:#3b82f6">Developer</span><span class="text-sm font-medium"style=color:var(--text-primary)>Read/Write Access</span></div><p class=text-sm style=color:var(--text-secondary)>Can create, update, and delete pods, deployments, services, and config maps. Can view all resources but cannot manage users or cluster settings.</p></div><div class="p-4 rounded-lg"style="background:var(--bg-tertiary);border:1px solid var(--border-color)"><div class="flex items-center gap-3 mb-2"><span class="px-2 py-1 rounded text-xs font-medium"style="background:rgba(34, 197, 94, 0.1);color:#22c55b">Viewer</span><span class="text-sm font-medium"style=color:var(--text-primary)>Read-Only Access</span></div><p class=text-sm style=color:var(--text-secondary)>Can view all resources, logs, and metrics. Cannot create, update, or delete any resources. Perfect for monitoring and auditing purposes.'),qx=R('<button class="px-6 py-2 rounded-lg font-medium transition-all hover:opacity-90"type=button style=background:var(--accent-primary);color:white;cursor:pointer;border:none>ðŸ”‘ Login');const Kx=()=>{const[e,t]=J(!1),[r,l]=J(null),[u,v]=J(!1);(()=>{const f=localStorage.getItem("kubegraf_token"),g=localStorage.getItem("kubegraf_user");return f&&g?(l(JSON.parse(g)),!0):!1})();const s=()=>{fetch("http://localhost:3001/api/logout",{method:"POST",credentials:"include"}),localStorage.removeItem("kubegraf_token"),localStorage.removeItem("kubegraf_user"),l(null),Fe("ðŸ‘‹ Logged out successfully","success")},n=f=>{l(f)};return(()=>{var f=Wx(),g=f.firstChild,p=g.firstChild,_=p.firstChild;_.nextSibling;var b=g.nextSibling,C=b.firstChild,x=C.firstChild,o=x.firstChild,d=o.nextSibling,a=d.firstChild;a.nextSibling;var c=b.nextSibling,m=c.firstChild,$=m.nextSibling,S=$.firstChild,E=S.firstChild,y=E.firstChild;y.nextSibling,E.nextSibling;var k=S.nextSibling,B=k.firstChild,O=B.firstChild;O.nextSibling,B.nextSibling;var T=k.nextSibling,I=T.firstChild,M=I.firstChild;return M.nextSibling,I.nextSibling,i(C,A(q,{get when(){return r()},get fallback(){return(()=>{var P=qx();return P.$$click=L=>{L.preventDefault(),L.stopPropagation(),console.log("Login button clicked! Current state:",e()),t(!0),console.log("After setState:",e()),setTimeout(()=>{console.log("After timeout:",e())},0)},P})()},get children(){var P=jx(),L=P.firstChild,H=L.firstChild,w=H.nextSibling,N=L.nextSibling;return i(H,()=>r()?.username),i(w,()=>r()?.role),N.$$click=s,P}}),null),i(b,A(q,{get when(){return r()},get children(){var P=Ux(),L=P.firstChild,H=L.firstChild,w=H.firstChild,N=w.nextSibling,z=H.nextSibling,V=z.firstChild,Q=V.nextSibling,F=z.nextSibling,U=F.firstChild,W=U.nextSibling,ce=W.firstChild,D=F.nextSibling,j=D.firstChild,K=j.nextSibling,ee=K.firstChild;return ee.nextSibling,i(N,()=>r()?.username),i(Q,()=>r()?.email||"Not set"),i(ce,()=>r()?.role),re(ne=>{var te=r()?.role==="admin"?"rgba(239, 68, 68, 0.1)":r()?.role==="developer"?"rgba(59, 130, 246, 0.1)":"rgba(34, 197, 94, 0.1)",le=r()?.role==="admin"?"#ef4444":r()?.role==="developer"?"#3b82f6":"#22c55b";return te!==ne.e&&oe(ce,"background",ne.e=te),le!==ne.t&&oe(ce,"color",ne.t=le),ne},{e:void 0,t:void 0}),P}}),null),i(f,A(q,{get when(){return!r()},get children(){var P=Vx(),L=P.firstChild,H=L.nextSibling,w=H.firstChild,N=w.firstChild,z=N.nextSibling,V=z.firstChild;V.nextSibling;var Q=w.nextSibling,F=Q.firstChild,U=F.nextSibling,W=U.firstChild;W.nextSibling;var ce=Q.nextSibling,D=ce.firstChild,j=D.nextSibling,K=j.firstChild;K.nextSibling;var ee=H.nextSibling,ne=ee.firstChild,te=ne.firstChild;return te.nextSibling,P}}),c),i(f,A(q,{when:!0,get children(){return A(Fx,{get isOpen(){return e()},onClose:()=>{console.log("Closing login modal"),t(!1)},onLoginSuccess:n})}}),null),f})()};Qe(["click"]);var Yx=R('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-secondary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 9V4.5M9 9H4.5M9 9L3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5l5.25 5.25">'),Gx=R('<div class="fixed bottom-0 left-0 right-0 transition-all duration-300"style="z-index:1000;background:var(--bg-primary);border-top:2px solid var(--border-color);box-shadow:0 -4px 6px -1px rgba(0, 0, 0, 0.1)"><div class="flex items-center justify-between px-4 py-2"style="background:var(--bg-secondary);border-bottom:1px solid var(--border-color)"><div class="flex items-center gap-3"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg><span class="text-sm font-semibold"style=color:var(--text-primary)>Terminal</span><span class=text-xs style=color:var(--text-secondary)>kubectl ready</span></div><div class="flex items-center gap-2"><button class="p-1.5 rounded hover:bg-gray-700 transition-colors"></button><button class="p-1.5 rounded hover:bg-gray-700 transition-colors"title=Close><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-secondary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div><div class="overflow-y-auto p-4 font-mono text-sm"style="height:calc(100% - 100px);background:#0d1117;color:#c9d1d9"></div><div class="flex items-center gap-2 px-4 py-3"style="background:#161b22;border-top:1px solid var(--border-color)"><span class="text-sm font-mono"style=color:#58a6ff>$</span><input type=text placeholder="Type a command (e.g., kubectl get pods)"class="flex-1 bg-transparent font-mono text-sm outline-none"autocomplete=off style=color:#c9d1d9;border:none>'),Jx=R('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-secondary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4">'),Xx=R("<div style=margin-bottom:4px>");const Zx=e=>{const[t,r]=J(!1),[l,u]=J(""),[v,h]=J(["KubeGraf Terminal v1.3.0",'Type "help" for available commands',""]),[s,n]=J([]),[f,g]=J(-1);let p,_;Xt(()=>{e.isOpen&&p&&p.focus()});const b=async o=>{if(o.trim()){if(n(d=>[...d,o]),g(-1),h(d=>[...d,`$ ${o}`,""]),o==="help")h(d=>[...d,"Available commands:","  kubectl <args>  - Execute kubectl commands","  clear          - Clear terminal","  help           - Show this help",""]);else if(o==="clear")h(["KubeGraf Terminal v1.3.0",'Type "help" for available commands',""]);else if(o.startsWith("kubectl"))try{const d=await fetch("http://localhost:3001/api/exec",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({command:o})});if(d.ok){const a=await d.json();h(c=>[...c,a.output||"Command executed",""])}else h(a=>[...a,"Error: Failed to execute command",""])}catch(d){h(a=>[...a,`Error: ${d instanceof Error?d.message:"Unknown error"}`,""])}else h(d=>[...d,`Command not found: ${o}`,'Type "help" for available commands',""]);setTimeout(()=>{_&&(_.scrollTop=_.scrollHeight)},0)}},C=o=>{if(o.key==="Enter")o.preventDefault(),b(l()),u("");else if(o.key==="ArrowUp"){o.preventDefault();const d=s();if(d.length>0){const a=f()===-1?d.length-1:Math.max(0,f()-1);g(a),u(d[a])}}else if(o.key==="ArrowDown"){o.preventDefault();const d=s();if(f()!==-1){const a=f()+1;a>=d.length?(g(-1),u("")):(g(a),u(d[a]))}}};console.log("[DockedTerminal] Render called - isOpen:",e.isOpen);const x=t()?"calc(100vh - 60px)":"400px";return A(q,{get when(){return e.isOpen},get children(){return A(Xr,{get children(){var o=Gx(),d=o.firstChild,a=d.firstChild,c=a.firstChild,m=c.nextSibling;m.nextSibling;var $=a.nextSibling,S=$.firstChild,E=S.nextSibling;E.firstChild;var y=d.nextSibling,k=y.nextSibling,B=k.firstChild,O=B.nextSibling;oe(o,"height",x),S.$$click=()=>r(!t()),i(S,A(q,{get when(){return t()},get fallback(){return Jx()},get children(){return Yx()}})),ar(E,"click",e.onClose,!0);var T=_;typeof T=="function"?Wt(T,y):_=y,i(y,()=>v().map((M,P)=>(()=>{var L=Xx();return Xe(L,"key",P),i(L,M),re(H=>oe(L,"color",M.startsWith("$")?"#58a6ff":M.startsWith("Error")?"#f85149":"#c9d1d9")),L})())),O.$$keydown=C,O.$$input=M=>u(M.currentTarget.value);var I=p;return typeof I=="function"?Wt(I,O):p=O,re(()=>Xe(S,"title",t()?"Restore":"Maximize")),re(()=>O.value=l()),o}})}})};Qe(["click","input","keydown"]);var Qx=R("<div aria-hidden=true>"),e$=R("<div class=skeleton-container style=width:100%>"),t$=R("<tr class=table-row-hover>"),r$=R("<td>"),s$=R('<div class="responsive-grid gap-6">'),i$=R('<div class="card card-hover-enhanced p-6"><div class="flex items-center justify-between mb-4"></div><div class="mt-4 pt-4 border-t">');const lr=e=>{const t=cc({variant:"text",shimmer:!0,pulse:!0,count:1,rounded:!1},e),r=()=>{switch(t.variant){case"circle":return{width:typeof t.width=="number"?`${t.width}px`:t.width||"40px",height:typeof t.height=="number"?`${t.height}px`:t.height||"40px","border-radius":"50%"};case"rect":return{width:typeof t.width=="number"?`${t.width}px`:t.width||"100%",height:typeof t.height=="number"?`${t.height}px`:t.height||"100px","border-radius":t.rounded?typeof t.rounded=="string"?t.rounded:"8px":"0"};case"card":return{width:typeof t.width=="number"?`${t.width}px`:t.width||"100%",height:typeof t.height=="number"?`${t.height}px`:t.height||"200px","border-radius":"12px"};case"text":default:return{width:typeof t.width=="number"?`${t.width}px`:t.width||"100%",height:typeof t.height=="number"?`${t.height}px`:t.height||"1em","border-radius":t.rounded?typeof t.rounded=="string"?t.rounded:"4px":"0"}}},l=()=>t.shimmer&&t.pulse?"skeleton-pulse skeleton-shimmer":t.shimmer?"skeleton-shimmer":t.pulse?"skeleton-pulse":"",u=v=>{const h=r(),s=l(),n={...h,...t.style};return t.variant==="text"&&t.count>1&&v<t.count-1&&(n["margin-bottom"]="0.5em"),(()=>{var f=Qx();return re(g=>{var p=`${s} ${t.className||""}`,_=n;return p!==g.e&&He(f,g.e=p),g.t=Hs(f,_,g.t),g},{e:void 0,t:void 0}),f})()};return(()=>{var v=e$();return i(v,()=>Array.from({length:t.count},(h,s)=>u(s))),v})()},n$=e=>{const t=e.rows||5,r=e.columns;return Me(()=>Array.from({length:t}).map((l,u)=>(()=>{var v=t$();return i(v,()=>Array.from({length:r}).map((h,s)=>(()=>{var n=r$();return i(n,A(lr,{variant:"text",width:s===0?"80%":"60%",shimmer:!0,pulse:!0})),n})())),v})()))},l$=e=>{const t=e.count||4;return(()=>{var r=s$();return i(r,()=>Array.from({length:t}).map(()=>(()=>{var l=i$(),u=l.firstChild,v=u.nextSibling;return i(u,A(lr,{variant:"text",width:"40%"}),null),i(u,A(lr,{variant:"circle",width:"24px",height:"24px"}),null),i(l,A(lr,{variant:"text",width:"60%",height:"2em",className:"mb-2"}),v),i(l,A(lr,{variant:"text",width:"30%"}),v),i(v,A(lr,{variant:"text",width:"100%",height:"0.875em",count:2})),re(h=>Hs(v,{"border-color":"var(--border-color)"},h)),l})())),r})()};var o$=R('<svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z">'),a$=R('<svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z">'),c$=R('<svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z">'),d$=R('<svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z">'),h$=R('<svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4">'),u$=R("<div><div class=empty-state-icon></div><h3 class=empty-state-title>"),f$=R("<p class=empty-state-description>"),g$=R("<div class=empty-state-actions>");const Os=e=>{const t=()=>{switch(e.variant){case"success":return{iconColor:"var(--success-color)",borderColor:"color-mix(in srgb, var(--success-color) 30%, transparent)",bgColor:"color-mix(in srgb, var(--success-color) 10%, transparent)"};case"warning":return{iconColor:"var(--warning-color)",borderColor:"color-mix(in srgb, var(--warning-color) 30%, transparent)",bgColor:"color-mix(in srgb, var(--warning-color) 10%, transparent)"};case"error":return{iconColor:"var(--error-color)",borderColor:"color-mix(in srgb, var(--error-color) 30%, transparent)",bgColor:"color-mix(in srgb, var(--error-color) 10%, transparent)"};case"info":return{iconColor:"var(--accent-primary)",borderColor:"color-mix(in srgb, var(--accent-primary) 30%, transparent)",bgColor:"color-mix(in srgb, var(--accent-primary) 10%, transparent)"};default:return{iconColor:"var(--text-muted)",borderColor:"var(--border-color)",bgColor:"var(--bg-card)"}}},r=()=>{switch(e.size){case"sm":return{padding:"1.5rem",iconSize:"2.5rem",titleSize:"1rem",descriptionSize:"0.875rem"};case"lg":return{padding:"4rem 2rem",iconSize:"5rem",titleSize:"1.75rem",descriptionSize:"1.125rem"};case"md":default:return{padding:"3rem 2rem",iconSize:"4rem",titleSize:"1.5rem",descriptionSize:"1rem"}}},l=t(),u=r(),v=()=>{switch(e.variant){case"success":return(()=>{var h=o$();return re(s=>oe(h,"color",l.iconColor)),h})();case"warning":return(()=>{var h=a$();return re(s=>oe(h,"color",l.iconColor)),h})();case"error":return(()=>{var h=c$();return re(s=>oe(h,"color",l.iconColor)),h})();case"info":return(()=>{var h=d$();return re(s=>oe(h,"color",l.iconColor)),h})();default:return(()=>{var h=h$();return re(s=>oe(h,"color",l.iconColor)),h})()}};return(()=>{var h=u$(),s=h.firstChild,n=s.nextSibling;return i(s,()=>e.icon||v()),i(n,()=>e.title),i(h,(()=>{var f=Me(()=>!!e.description);return()=>f()&&(()=>{var g=f$();return i(g,()=>e.description),re(p=>oe(g,"font-size",u.descriptionSize)),g})()})(),null),i(h,(()=>{var f=Me(()=>!!e.actions);return()=>f()&&(()=>{var g=g$();return i(g,()=>e.actions),g})()})(),null),re(f=>{var g=`empty-state-enhanced ${e.className||""}`,p=u.padding,_=l.bgColor,b=l.borderColor,C=u.iconSize,x=l.iconColor,o=u.titleSize;return g!==f.e&&He(h,f.e=g),p!==f.t&&oe(h,"padding",f.t=p),_!==f.a&&oe(h,"background",f.a=_),b!==f.o&&oe(h,"border-color",f.o=b),C!==f.i&&oe(s,"font-size",f.i=C),x!==f.n&&oe(s,"color",f.n=x),o!==f.s&&oe(n,"font-size",f.s=o),f},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),h})()},p$=e=>A(Os,{get title(){return Me(()=>!!e.resource)()?`No ${e.resource} Found`:"No Data Available"},get description(){return Me(()=>!!e.resource)()?`There are no ${e.resource.toLowerCase()} to display.`:"There is no data to display at the moment."},variant:"info",get actions(){return e.actions}}),v$=e=>A(Os,{get title(){return e.title||"Something Went Wrong"},get description(){return e.description||"An error occurred while loading the data. Please try again."},variant:"error",get actions(){return e.actions}}),m$=e=>A(Os,{title:"No Results Found",get description(){return Me(()=>!!e.searchQuery)()?`No results found for "${e.searchQuery}". Try a different search term.`:"No results match your criteria."},variant:"warning",get actions(){return e.actions}});var _$=R('<div class="p-6 space-y-8"><div><h2 class="text-2xl font-bold mb-4 gradient-text">UI/UX Improvements Demo</h2><p class="text-gray-400 mb-6">This demo showcases the UI/UX improvements implemented for KubeGraf.</p></div><section class="card p-6 card-hover-enhanced"><h3 class="text-xl font-semibold mb-4">Loading Skeletons</h3><p class="text-gray-400 mb-6">Enhanced loading states with pulse and shimmer effects for better perceived performance.</p><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class=space-y-4><h4 class=font-medium>Text Skeletons</h4></div><div class=space-y-4><h4 class=font-medium>Shape Skeletons</h4><div class="flex items-center gap-4"></div></div></div><div class=mt-6><h4 class="font-medium mb-4">Dashboard Card Skeletons</h4></div><div class=mt-6><h4 class="font-medium mb-4">Table Row Skeletons</h4><table class=w-full><thead><tr><th class="text-left p-3">Name</th><th class="text-left p-3">Status</th><th class="text-left p-3">Age</th><th class="text-left p-3">Actions</th></tr></thead><tbody></tbody></table></div></section><section class="card p-6 card-hover-enhanced"><h3 class="text-xl font-semibold mb-4">Enhanced Empty States</h3><p class="text-gray-400 mb-6">Informative empty states with appropriate icons, colors, and actions.</p><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"><div><h4 class="font-medium mb-3">No Data</h4></div><div><h4 class="font-medium mb-3">Error State</h4></div><div><h4 class="font-medium mb-3">No Results</h4></div></div><div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6"><div><h4 class="font-medium mb-3">Custom Empty State</h4></div><div><h4 class="font-medium mb-3">Success State</h4></div></div></section><section class="card p-6 card-hover-enhanced"><h3 class="text-xl font-semibold mb-4">Interactive Feedback</h3><p class="text-gray-400 mb-6">Enhanced hover states, focus states, and animations.</p><div class=space-y-6><div><h4 class="font-medium mb-3">Enhanced Buttons</h4><div class="flex flex-wrap gap-4"><button class="btn-accent px-6 py-3 rounded-lg btn-ripple">Primary Button</button><button class="btn-secondary px-6 py-3 rounded-lg btn-ripple">Secondary Button</button><button class="px-6 py-3 rounded-lg focus-visible-enhanced"style=background:var(--bg-tertiary);color:var(--text-primary)>Focus Visible</button></div></div><div><h4 class="font-medium mb-3">Enhanced Cards</h4><div class="grid grid-cols-1 md:grid-cols-3 gap-4"></div></div><div><h4 class="font-medium mb-3">Enhanced Inputs</h4><div class="space-y-4 max-w-md"><input type=text placeholder="Search resources..."class="w-full input-enhanced"><textarea placeholder="Enter description..."class="w-full input-enhanced"rows=3></textarea><select class="w-full input-enhanced"><option value>Select an option</option><option value=1>Option 1</option><option value=2>Option 2</option></select></div></div><div><h4 class="font-medium mb-3">Enhanced Status Indicators</h4><div class="flex flex-wrap gap-4"><span class="status-indicator status-indicator-running">Running</span><span class="status-indicator status-indicator-pending">Pending</span><span class="status-indicator status-indicator-failed">Failed</span></div></div></div></section><section class="card p-6 card-hover-enhanced"><h3 class="text-xl font-semibold mb-4">Utility Classes</h3><p class="text-gray-400 mb-6">Additional utility classes for common UI patterns.</p><div class=space-y-6><div><h4 class="font-medium mb-3">Text Truncation</h4><div class="space-y-2 max-w-md"><div class="line-clamp-1 p-2 bg-gray-800 rounded">This is a very long text that will be truncated with an ellipsis when it exceeds the container width.</div><div class="truncate-2 p-2 bg-gray-800 rounded">This is a multi-line text that will be truncated after two lines. The text continues here but will be hidden with an ellipsis at the end of the second line.</div></div></div><div><h4 class="font-medium mb-3">Gradient Text & Borders</h4><div class=space-y-4><h2 class="text-3xl font-bold text-gradient">Gradient Text Example</h2><div class="border-gradient p-6 rounded-lg"><p>This card has a gradient border using CSS border-image.</p></div></div></div><div><h4 class="font-medium mb-3">Enhanced Tooltips</h4><div class="flex gap-4"><button class="px-4 py-2 rounded-lg bg-gray-800 tooltip-enhanced"data-tooltip="This is an enhanced tooltip">Hover for Tooltip</button><button class="px-4 py-2 rounded-lg bg-gray-800 tooltip-enhanced"data-tooltip="Tooltip with arrow and shadow">Another Tooltip</button></div></div></div></section><section class="card p-6 card-hover-enhanced"><h3 class="text-xl font-semibold mb-4">Responsive Improvements</h3><p class="text-gray-400 mb-6">Responsive grid layouts that adapt to different screen sizes.</p><div class="responsive-grid gap-4">'),b$=R('<button class="btn-accent px-4 py-2 rounded-lg">Connect Cluster'),y$=R('<button class="btn-secondary px-4 py-2 rounded-lg">View Details'),x$=R('<div class="card card-hover-enhanced p-4"><div class="flex items-center justify-between mb-3"><span class=font-medium>Card </span><span class="status-indicator status-indicator-running">Running</span></div><p class="text-sm text-gray-400">Hover over this card to see the enhanced hover effect with shimmer animation.'),$$=R('<div class="card p-4 text-center"><div class="text-lg font-medium">Item </div><div class="text-sm text-gray-400">Resize window to see responsive behavior');const w$=()=>{const[e,t]=J(!0),[r,l]=J(!1),[u,v]=J(!1),[h,s]=J("");return setTimeout(()=>{t(!1),l(!1),v(!0)},2e3),(()=>{var n=_$(),f=n.firstChild,g=f.nextSibling,p=g.firstChild,_=p.nextSibling,b=_.nextSibling,C=b.firstChild;C.firstChild;var x=C.nextSibling,o=x.firstChild,d=o.nextSibling,a=b.nextSibling;a.firstChild;var c=a.nextSibling,m=c.firstChild,$=m.nextSibling,S=$.firstChild,E=S.nextSibling,y=g.nextSibling,k=y.firstChild,B=k.nextSibling,O=B.nextSibling,T=O.firstChild;T.firstChild;var I=T.nextSibling;I.firstChild;var M=I.nextSibling;M.firstChild;var P=O.nextSibling,L=P.firstChild;L.firstChild;var H=L.nextSibling;H.firstChild;var w=y.nextSibling,N=w.firstChild,z=N.nextSibling,V=z.nextSibling,Q=V.firstChild,F=Q.firstChild,U=F.nextSibling,W=U.firstChild,ce=W.nextSibling;ce.nextSibling;var D=Q.nextSibling,j=D.firstChild,K=j.nextSibling,ee=w.nextSibling,ne=ee.nextSibling,te=ne.firstChild,le=te.nextSibling,Z=le.nextSibling;return i(C,A(lr,{variant:"text",width:"100%"}),null),i(C,A(lr,{variant:"text",width:"80%"}),null),i(C,A(lr,{variant:"text",width:"60%",count:3}),null),i(d,A(lr,{variant:"circle",width:"40px",height:"40px"}),null),i(d,A(lr,{variant:"rect",width:"100px",height:"40px",rounded:"8px"}),null),i(x,A(lr,{variant:"card",width:"100%",height:"120px"}),null),i(a,A(l$,{count:3}),null),i(E,A(n$,{columns:4,rows:3})),i(T,A(p$,{resource:"Pods"}),null),i(I,A(v$,{title:"Failed to Load",description:"Unable to fetch cluster data. Please check your connection."}),null),i(M,A(m$,{searchQuery:"production"}),null),i(L,A(Os,{title:"Welcome to KubeGraf!",description:"Get started by connecting to your Kubernetes cluster.",variant:"info",size:"lg",get actions(){return b$()}}),null),i(H,A(Os,{title:"All Systems Operational",description:"All services are running smoothly.",variant:"success",get actions(){return y$()}}),null),i(K,()=>[1,2,3].map(Y=>(()=>{var se=x$(),G=se.firstChild,ie=G.firstChild;return ie.firstChild,i(ie,Y,null),se})())),i(Z,()=>[1,2,3,4,5,6].map(Y=>(()=>{var se=$$(),G=se.firstChild;return G.firstChild,i(G,Y,null),se})())),n})()};var S$=R('<span class="px-2 py-0.5 rounded text-xs font-semibold uppercase tracking-wide">'),C$=R("<p class=text-xs style=color:var(--text-muted)>"),k$=R("<button type=button style=outline:none><span>"),A$=R('<select class="rounded-lg px-3 py-1.5 text-sm cursor-pointer"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)">'),M$=R('<div class="flex items-center gap-2"><input type=number class="w-24 rounded-lg px-3 py-1.5 text-sm text-right"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)">'),E$=R('<div class="card p-4 hover:border-opacity-60 transition-all"><div class="flex items-start justify-between gap-4"><div class=flex-1><div class="flex items-center gap-2 mb-1"><label class="text-sm font-medium"style=color:var(--text-primary)></label></div></div><div class=flex-shrink-0>'),L$=R("<option>"),R$=R('<span class="px-3 py-1 rounded-full text-xs font-semibold"style=background:#f59e0b20;color:#f59e0b>Update Available'),D$=R("<div class=spinner style=width:16px;height:16px>"),T$=R('<div class=space-y-4><div class="card p-6"><h3 class="text-lg font-semibold mb-4"style=color:var(--text-primary)>Application Version & Updates</h3><div class="flex items-center justify-between mb-4"><div><div class="text-sm font-medium mb-1"style=color:var(--text-primary)>KubeGraf </div><div class=text-xs style=color:var(--text-muted)>Advanced Kubernetes Visualization & Management Platform</div></div></div><button class="px-4 py-2 rounded-lg text-sm font-medium transition-all hover:opacity-90 disabled:opacity-50 flex items-center gap-2"style=background:var(--accent-primary);color:#000></button></div><div class="card p-6"><h3 class="text-lg font-semibold mb-2"style=color:var(--text-primary)>Reset All Settings</h3><p class="text-sm mb-4"style=color:var(--text-muted)>Reset all settings to their default values. This will clear all customizations and preferences.</p><button class="px-4 py-2 rounded-lg text-sm font-medium hover:opacity-90 transition-opacity"style=background:var(--error-color);color:white>Reset to Defaults</button></div><div class="card p-6"><h3 class="text-lg font-semibold mb-4"style=color:var(--text-primary)>Documentation & Links</h3><div class="grid grid-cols-2 gap-3"><a href=https://kubegraf.io target=_blank class="flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium hover:opacity-80 transition-opacity"style=background:var(--bg-tertiary);color:var(--text-primary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>Website</a><a href=https://github.com/kubegraf/kubegraf target=_blank class="flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium hover:opacity-80 transition-opacity"style=background:var(--bg-tertiary);color:var(--text-primary)><svg class="w-4 h-4"fill=currentColor viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>GitHub</a><a href=https://kubegraf.io/docs target=_blank class="flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium hover:opacity-80 transition-opacity"style=background:var(--bg-tertiary);color:var(--text-primary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg>Documentation</a><a href=https://github.com/kubegraf/kubegraf/issues target=_blank class="flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium hover:opacity-80 transition-opacity"style=background:var(--bg-tertiary);color:var(--text-primary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>Report Issue'),P$=R('<div class="max-w-5xl mx-auto"><div class=mb-8><h1 class="text-3xl font-bold mb-2 gradient-text">Settings</h1><p class=text-sm style=color:var(--text-muted)>Configure KubeGraf to match your workflow and preferences</p></div><div class=mb-8><button class="flex items-center gap-2 text-sm font-medium mb-4 hover:opacity-80 transition-opacity"style=color:var(--accent-primary)><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 5l7 7-7 7"></path></svg>Advanced Settings & Information'),I$=R("<p class=text-sm style=color:var(--text-muted)>"),B$=R("<div class=space-y-3>"),O$=R('<div class=mb-8><button class="w-full flex items-center gap-3 mb-4 cursor-pointer hover:opacity-80 transition-opacity"><div class="w-10 h-10 rounded-lg flex items-center justify-center"style="background:rgba(6, 182, 212, 0.1)"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></div><div class="flex-1 text-left"><h2 class="text-xl font-semibold"style=color:var(--text-primary)></h2></div><svg fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 5l7 7-7 7">');const H$=()=>{const[e,t]=J(!1),[r,l]=J(new Set),[u,v]=J("1.2.1"),[h,s]=J(null),[n,f]=J(!1),[g,p]=J(!1);Mt(async()=>{try{const a=await Re.getStatus();a&&a.version&&v(a.version)}catch(a){console.error("Failed to get version:",a)}});const _=(a,c)=>{n1(a,c),Fe(`Setting updated: ${a}`,"success")},b=()=>{confirm("Are you sure you want to reset all settings to defaults? This action cannot be undone.")&&(l1(),jo("dark"),Fe("All settings have been reset to defaults","success"),setTimeout(()=>location.reload(),1e3))},C=a=>{l(c=>{const m=new Set(c);return m.has(a)?m.delete(a):m.add(a),m})},x=a=>r().has(a),o=[{title:"Appearance",description:"Customize the look and feel of KubeGraf",icon:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01",items:[{id:"theme",label:"Color Theme",description:"Choose your preferred color scheme",type:"select",options:Object.keys(Kr).map(a=>({label:Kr[a].label,value:a}))},{id:"compactMode",label:"Compact Mode",description:"Reduce spacing and padding for a more compact view",type:"toggle"},{id:"sidebarCollapsed",label:"Collapsed Sidebar by Default",description:"Start with sidebar in collapsed state",type:"toggle"}]},{title:"General Settings",description:"Configure basic application behavior",icon:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z",items:[{id:"defaultNamespace",label:"Default Namespace",description:"Set the default namespace to load on startup",type:"select",options:[{label:"All Namespaces",value:"_all"},...hi().map(a=>({label:a,value:a}))]},{id:"itemsPerPage",label:"Items Per Page",description:"Number of items to display per page in resource lists",type:"number",min:10,max:200,step:10},{id:"enableAutoRefresh",label:"Auto Refresh",description:"Automatically refresh resource data at regular intervals",type:"toggle"},{id:"refreshInterval",label:"Refresh Interval (seconds)",description:"Time between automatic refreshes",type:"number",min:5,max:300,step:5}]},{title:"Notifications & Alerts",description:"Configure notification and alert preferences",icon:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9",items:[{id:"enableNotifications",label:"Desktop Notifications",description:"Show toast notifications for important events and actions",type:"toggle"},{id:"enableSoundEffects",label:"Sound Effects",description:"Play sound effects for notifications and alerts",type:"toggle"}]},{title:"Security & Diagnostics",description:"Enable or disable security scanning and diagnostic features",icon:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z",items:[{id:"enableDiagnostics",label:"Cluster Diagnostics",description:"Run automatic cluster health checks and diagnostics",type:"toggle",badge:"Core",badgeColor:"blue"},{id:"enableSecurityChecks",label:"Security Checks",description:"Perform security-related diagnostic checks",type:"toggle",badge:"Security",badgeColor:"red"},{id:"enableCVEVulnerabilities",label:"CVE Vulnerability Scanning",description:"Scan for known CVE vulnerabilities using NIST NVD database",type:"toggle",badge:"NIST NVD",badgeColor:"purple"}]},{title:"AI & ML Features",description:"Control AI-powered features and machine learning capabilities",icon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z",items:[{id:"enableAIChat",label:"AI Chat Assistant",description:"Enable AI-powered chat assistant for cluster management",type:"toggle",badge:"AI",badgeColor:"green"},{id:"enableMLRecommendations",label:"ML Recommendations",description:"Get AI/ML-powered optimization recommendations",type:"toggle",badge:"ML",badgeColor:"green"},{id:"enableAnomalyDetection",label:"Anomaly Detection",description:"Detect anomalies in cluster behavior using machine learning",type:"toggle",badge:"Advanced",badgeColor:"orange"}]},{title:"Monitoring & Analysis",description:"Configure monitoring, cost analysis, and drift detection",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z",items:[{id:"enableEventMonitoring",label:"Event Monitoring",description:"Monitor and track Kubernetes events in real-time",type:"toggle"},{id:"enableCostAnalysis",label:"Cost Analysis",description:"Analyze and track cluster costs across cloud providers",type:"toggle",badge:"Beta",badgeColor:"yellow"},{id:"enableDriftDetection",label:"Configuration Drift Detection",description:"Detect configuration drift in deployments and resources",type:"toggle"},{id:"enableMetrics",label:"Resource Metrics",description:"Display CPU, memory, and other resource metrics",type:"toggle"}]},{title:"Integrations",description:"Enable or disable external integrations and connectors",icon:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1",items:[{id:"enableMCP",label:"AI Agents",description:"Enable Model Context Protocol server for AI agent integration (Claude, Cursor, etc.)",type:"toggle",badge:"New",badgeColor:"cyan"},{id:"enableConnectors",label:"External Connectors",description:"Enable integrations with external services (GitHub, Slack, PagerDuty, Webhooks)",type:"toggle"}]},{title:"Visualization",description:"Configure visualization and topology features",icon:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z",items:[{id:"enableTopology",label:"Topology View",description:"Enable interactive topology visualization",type:"toggle"},{id:"enableResourceMap",label:"Resource Map",description:"Enable resource relationship mapping",type:"toggle"}]},{title:"Developer Tools",description:"Tools for developers and advanced users",icon:"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z",items:[{id:"enableWebTerminal",label:"Web Terminal",description:"Enable built-in web terminal for kubectl commands",type:"toggle"},{id:"enableLogs",label:"Log Viewer",description:"Enable advanced log viewing and streaming",type:"toggle"}]},{title:"Sidebar Visibility",description:"Control which sections and menu items appear in the sidebar",icon:"M4 6h16M4 10h16M4 14h16M4 18h16",items:[{id:"showOverviewSection",label:"Show Overview Section",description:"Display Dashboard in sidebar",type:"toggle"},{id:"showInsightsSection",label:"Show Insights Section",description:"Display AI Insights, Cost Analysis, Security, Drift Detection",type:"toggle"},{id:"showDeploymentsSection",label:"Show Deployments Section",description:"Display Deploy and Rollouts",type:"toggle"},{id:"showWorkloadsSection",label:"Show Workloads Section",description:"Display Pods, Deployments, StatefulSets, DaemonSets, Jobs, CronJobs",type:"toggle"},{id:"showNetworkingSection",label:"Show Networking Section",description:"Display Services, Ingresses, Network Policies",type:"toggle"},{id:"showConfigStorageSection",label:"Show Config & Storage Section",description:"Display ConfigMaps, Secrets, Certificates, Storage",type:"toggle"},{id:"showClusterSection",label:"Show Cluster Section",description:"Display Nodes, RBAC, Events, Resource Map",type:"toggle"},{id:"showIntegrationsSection",label:"Show Integrations Section",description:"Display Connectors and AI Agents menu items",type:"toggle",badge:"Important",badgeColor:"cyan"},{id:"showExtensionsSection",label:"Show Extensions Section",description:"Display Plugins and Terminal",type:"toggle"}]},{title:"Individual Menu Items",description:"Fine-grained control over specific sidebar menu items",icon:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4",items:[{id:"showConnectorsMenu",label:"Show Connectors Menu",description:"Display Connectors in Integrations section",type:"toggle",badge:"Integration",badgeColor:"cyan"},{id:"showAIAgentsMenu",label:"Show AI Agents Menu",description:"Display AI Agents in Integrations section",type:"toggle",badge:"Integration",badgeColor:"cyan"},{id:"showAIInsights",label:"Show AI Insights",description:"Display AI Insights in Insights section",type:"toggle"},{id:"showCostAnalysisMenu",label:"Show Cost Analysis",description:"Display Cost Analysis in Insights section",type:"toggle"},{id:"showSecurityInsights",label:"Show Security Insights",description:"Display Security in Insights section",type:"toggle"},{id:"showDriftDetectionMenu",label:"Show Drift Detection",description:"Display Drift Detection in Insights section",type:"toggle"},{id:"showPlugins",label:"Show Plugins",description:"Display Plugins in Extensions section",type:"toggle"},{id:"showTerminalMenu",label:"Show Terminal",description:"Display Terminal in Extensions section",type:"toggle"}]}],d=a=>{const c=a.item,m=()=>As()[c.id];return(()=>{var $=E$(),S=$.firstChild,E=S.firstChild,y=E.firstChild,k=y.firstChild,B=E.nextSibling;return i(k,()=>c.label),i(y,A(q,{get when(){return c.badge},get children(){var O=S$();return i(O,()=>c.badge),re(T=>{var I=c.badgeColor==="blue"?"#3b82f620":c.badgeColor==="red"?"#ef444420":c.badgeColor==="green"?"#22c55e20":c.badgeColor==="purple"?"#a855f720":c.badgeColor==="orange"?"#f97316 20":c.badgeColor==="yellow"?"#f59e0b20":c.badgeColor==="cyan"?"#06b6d420":"#3b82f620",M=c.badgeColor==="blue"?"#3b82f6":c.badgeColor==="red"?"#ef4444":c.badgeColor==="green"?"#22c55e":c.badgeColor==="purple"?"#a855f7":c.badgeColor==="orange"?"#f97316":c.badgeColor==="yellow"?"#f59e0b":c.badgeColor==="cyan"?"#06b6d4":"#3b82f6";return I!==T.e&&oe(O,"background",T.e=I),M!==T.t&&oe(O,"color",T.t=M),T},{e:void 0,t:void 0}),O}}),null),i(E,A(q,{get when(){return c.description},get children(){var O=C$();return i(O,()=>c.description),O}}),null),i(B,A(q,{get when(){return c.type==="toggle"},get children(){var O=k$(),T=O.firstChild;return O.$$click=I=>{I.preventDefault(),I.stopPropagation(),_(c.id,!m())},re(I=>{var M=`relative inline-flex h-6 w-11 items-center rounded-full transition-colors cursor-pointer ${m()?"bg-[var(--accent-primary)]":"bg-[var(--bg-tertiary)]"}`,P=m()?"Enabled":"Disabled",L=`inline-block h-4 w-4 transform rounded-full bg-white transition-transform pointer-events-none ${m()?"translate-x-6":"translate-x-1"}`;return M!==I.e&&He(O,I.e=M),P!==I.t&&Xe(O,"title",I.t=P),L!==I.a&&He(T,I.a=L),I},{e:void 0,t:void 0,a:void 0}),O}}),null),i(B,A(q,{get when(){return c.type==="select"},get children(){var O=A$();return O.addEventListener("change",T=>_(c.id,T.currentTarget.value)),i(O,A(Ne,{get each(){return c.options},children:T=>(()=>{var I=L$();return i(I,()=>T.label),re(()=>I.value=T.value),I})()})),re(()=>O.value=m()),O}}),null),i(B,A(q,{get when(){return c.type==="number"},get children(){var O=M$(),T=O.firstChild;return T.addEventListener("change",I=>_(c.id,parseInt(I.currentTarget.value,10))),re(I=>{var M=c.min,P=c.max,L=c.step;return M!==I.e&&Xe(T,"min",I.e=M),P!==I.t&&Xe(T,"max",I.t=P),L!==I.a&&Xe(T,"step",I.a=L),I},{e:void 0,t:void 0,a:void 0}),re(()=>T.value=m()),O}}),null),$})()};return(()=>{var a=P$(),c=a.firstChild,m=c.firstChild;m.nextSibling;var $=c.nextSibling,S=$.firstChild,E=S.firstChild;return i(a,A(Ne,{each:o,children:y=>(()=>{var k=O$(),B=k.firstChild,O=B.firstChild,T=O.firstChild,I=T.firstChild,M=O.nextSibling,P=M.firstChild,L=M.nextSibling;return B.$$click=()=>C(y.title),i(P,()=>y.title),i(M,A(q,{get when(){return y.description},get children(){var H=I$();return i(H,()=>y.description),H}}),null),i(k,A(q,{get when(){return!x(y.title)},get children(){var H=B$();return i(H,A(Ne,{get each(){return y.items},children:w=>A(d,{item:w})})),H}}),null),re(H=>{var w=y.icon,N=`w-5 h-5 transition-transform flex-shrink-0 ${x(y.title)?"":"rotate-90"}`;return w!==H.e&&Xe(I,"d",H.e=w),N!==H.t&&Xe(L,"class",H.t=N),H},{e:void 0,t:void 0}),k})()}),$),S.$$click=()=>t(!e()),i($,A(q,{get when(){return e()},get children(){var y=T$(),k=y.firstChild,B=k.firstChild,O=B.nextSibling,T=O.firstChild,I=T.firstChild;I.firstChild,I.nextSibling;var M=O.nextSibling,P=k.nextSibling,L=P.firstChild,H=L.nextSibling,w=H.nextSibling,N=P.nextSibling,z=N.firstChild,V=z.nextSibling,Q=V.firstChild,F=Q.nextSibling,U=F.nextSibling;return U.nextSibling,i(I,u,null),i(O,A(q,{get when(){return Me(()=>!!h())()&&h().updateAvailable},get children(){return R$()}}),null),M.$$click=async()=>{f(!0);try{const W=await Re.checkForUpdates();s(W),W.updateAvailable?Fe(`Update available: ${W.latestVersion}`,"info"):Fe("You are running the latest version","success")}catch(W){Fe(`Failed to check for updates: ${W instanceof Error?W.message:"Unknown error"}`,"error")}finally{f(!1)}},i(M,A(q,{get when(){return n()},get children(){return D$()}}),null),i(M,()=>n()?"Checking...":"Check for Updates",null),w.$$click=b,re(()=>M.disabled=n()),y}}),null),re(()=>Xe(E,"class",`w-4 h-4 transition-transform ${e()?"rotate-90":""}`)),a})()};Qe(["click"]);function Fn(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Zr=Fn();function $a(e){Zr=e}const wa=/[&<>"']/,N$=new RegExp(wa.source,"g"),Sa=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,z$=new RegExp(Sa.source,"g"),F$={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},oo=e=>F$[e];function Qt(e,t){if(t){if(wa.test(e))return e.replace(N$,oo)}else if(Sa.test(e))return e.replace(z$,oo);return e}const j$=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function U$(e){return e.replace(j$,(t,r)=>(r=r.toLowerCase(),r==="colon"?":":r.charAt(0)==="#"?r.charAt(1)==="x"?String.fromCharCode(parseInt(r.substring(2),16)):String.fromCharCode(+r.substring(1)):""))}const V$=/(^|[^\[])\^/g;function gt(e,t){let r=typeof e=="string"?e:e.source;t=t||"";const l={replace:(u,v)=>{let h=typeof v=="string"?v:v.source;return h=h.replace(V$,"$1"),r=r.replace(u,h),l},getRegex:()=>new RegExp(r,t)};return l}function ao(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}const Ms={exec:()=>null};function co(e,t){const r=e.replace(/\|/g,(v,h,s)=>{let n=!1,f=h;for(;--f>=0&&s[f]==="\\";)n=!n;return n?"|":" |"}),l=r.split(/ \|/);let u=0;if(l[0].trim()||l.shift(),l.length>0&&!l[l.length-1].trim()&&l.pop(),t)if(l.length>t)l.splice(t);else for(;l.length<t;)l.push("");for(;u<l.length;u++)l[u]=l[u].trim().replace(/\\\|/g,"|");return l}function ai(e,t,r){const l=e.length;if(l===0)return"";let u=0;for(;u<l&&e.charAt(l-u-1)===t;)u++;return e.slice(0,l-u)}function W$(e,t){if(e.indexOf(t[1])===-1)return-1;let r=0;for(let l=0;l<e.length;l++)if(e[l]==="\\")l++;else if(e[l]===t[0])r++;else if(e[l]===t[1]&&(r--,r<0))return l;return-1}function ho(e,t,r,l){const u=t.href,v=t.title?Qt(t.title):null,h=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){l.state.inLink=!0;const s={type:"link",raw:r,href:u,title:v,text:h,tokens:l.inlineTokens(h)};return l.state.inLink=!1,s}return{type:"image",raw:r,href:u,title:v,text:Qt(h)}}function q$(e,t){const r=e.match(/^(\s+)(?:```)/);if(r===null)return t;const l=r[1];return t.split(`
`).map(u=>{const v=u.match(/^\s+/);if(v===null)return u;const[h]=v;return h.length>=l.length?u.slice(l.length):u}).join(`
`)}class Di{options;rules;lexer;constructor(t){this.options=t||Zr}space(t){const r=this.rules.block.newline.exec(t);if(r&&r[0].length>0)return{type:"space",raw:r[0]}}code(t){const r=this.rules.block.code.exec(t);if(r){const l=r[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:r[0],codeBlockStyle:"indented",text:this.options.pedantic?l:ai(l,`
`)}}}fences(t){const r=this.rules.block.fences.exec(t);if(r){const l=r[0],u=q$(l,r[3]||"");return{type:"code",raw:l,lang:r[2]?r[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):r[2],text:u}}}heading(t){const r=this.rules.block.heading.exec(t);if(r){let l=r[2].trim();if(/#$/.test(l)){const u=ai(l,"#");(this.options.pedantic||!u||/ $/.test(u))&&(l=u.trim())}return{type:"heading",raw:r[0],depth:r[1].length,text:l,tokens:this.lexer.inline(l)}}}hr(t){const r=this.rules.block.hr.exec(t);if(r)return{type:"hr",raw:r[0]}}blockquote(t){const r=this.rules.block.blockquote.exec(t);if(r){let l=r[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`);l=ai(l.replace(/^ *>[ \t]?/gm,""),`
`);const u=this.lexer.state.top;this.lexer.state.top=!0;const v=this.lexer.blockTokens(l);return this.lexer.state.top=u,{type:"blockquote",raw:r[0],tokens:v,text:l}}}list(t){let r=this.rules.block.list.exec(t);if(r){let l=r[1].trim();const u=l.length>1,v={type:"list",raw:"",ordered:u,start:u?+l.slice(0,-1):"",loose:!1,items:[]};l=u?`\\d{1,9}\\${l.slice(-1)}`:`\\${l}`,this.options.pedantic&&(l=u?l:"[*+-]");const h=new RegExp(`^( {0,3}${l})((?:[	 ][^\\n]*)?(?:\\n|$))`);let s="",n="",f=!1;for(;t;){let g=!1;if(!(r=h.exec(t))||this.rules.block.hr.test(t))break;s=r[0],t=t.substring(s.length);let p=r[2].split(`
`,1)[0].replace(/^\t+/,d=>" ".repeat(3*d.length)),_=t.split(`
`,1)[0],b=0;this.options.pedantic?(b=2,n=p.trimStart()):(b=r[2].search(/[^ ]/),b=b>4?1:b,n=p.slice(b),b+=r[1].length);let C=!1;if(!p&&/^ *$/.test(_)&&(s+=_+`
`,t=t.substring(_.length+1),g=!0),!g){const d=new RegExp(`^ {0,${Math.min(3,b-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),a=new RegExp(`^ {0,${Math.min(3,b-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),c=new RegExp(`^ {0,${Math.min(3,b-1)}}(?:\`\`\`|~~~)`),m=new RegExp(`^ {0,${Math.min(3,b-1)}}#`);for(;t;){const $=t.split(`
`,1)[0];if(_=$,this.options.pedantic&&(_=_.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),c.test(_)||m.test(_)||d.test(_)||a.test(t))break;if(_.search(/[^ ]/)>=b||!_.trim())n+=`
`+_.slice(b);else{if(C||p.search(/[^ ]/)>=4||c.test(p)||m.test(p)||a.test(p))break;n+=`
`+_}!C&&!_.trim()&&(C=!0),s+=$+`
`,t=t.substring($.length+1),p=_.slice(b)}}v.loose||(f?v.loose=!0:/\n *\n *$/.test(s)&&(f=!0));let x=null,o;this.options.gfm&&(x=/^\[[ xX]\] /.exec(n),x&&(o=x[0]!=="[ ] ",n=n.replace(/^\[[ xX]\] +/,""))),v.items.push({type:"list_item",raw:s,task:!!x,checked:o,loose:!1,text:n,tokens:[]}),v.raw+=s}v.items[v.items.length-1].raw=s.trimEnd(),v.items[v.items.length-1].text=n.trimEnd(),v.raw=v.raw.trimEnd();for(let g=0;g<v.items.length;g++)if(this.lexer.state.top=!1,v.items[g].tokens=this.lexer.blockTokens(v.items[g].text,[]),!v.loose){const p=v.items[g].tokens.filter(b=>b.type==="space"),_=p.length>0&&p.some(b=>/\n.*\n/.test(b.raw));v.loose=_}if(v.loose)for(let g=0;g<v.items.length;g++)v.items[g].loose=!0;return v}}html(t){const r=this.rules.block.html.exec(t);if(r)return{type:"html",block:!0,raw:r[0],pre:r[1]==="pre"||r[1]==="script"||r[1]==="style",text:r[0]}}def(t){const r=this.rules.block.def.exec(t);if(r){const l=r[1].toLowerCase().replace(/\s+/g," "),u=r[2]?r[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",v=r[3]?r[3].substring(1,r[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):r[3];return{type:"def",tag:l,raw:r[0],href:u,title:v}}}table(t){const r=this.rules.block.table.exec(t);if(!r||!/[:|]/.test(r[2]))return;const l=co(r[1]),u=r[2].replace(/^\||\| *$/g,"").split("|"),v=r[3]&&r[3].trim()?r[3].replace(/\n[ \t]*$/,"").split(`
`):[],h={type:"table",raw:r[0],header:[],align:[],rows:[]};if(l.length===u.length){for(const s of u)/^ *-+: *$/.test(s)?h.align.push("right"):/^ *:-+: *$/.test(s)?h.align.push("center"):/^ *:-+ *$/.test(s)?h.align.push("left"):h.align.push(null);for(const s of l)h.header.push({text:s,tokens:this.lexer.inline(s)});for(const s of v)h.rows.push(co(s,h.header.length).map(n=>({text:n,tokens:this.lexer.inline(n)})));return h}}lheading(t){const r=this.rules.block.lheading.exec(t);if(r)return{type:"heading",raw:r[0],depth:r[2].charAt(0)==="="?1:2,text:r[1],tokens:this.lexer.inline(r[1])}}paragraph(t){const r=this.rules.block.paragraph.exec(t);if(r){const l=r[1].charAt(r[1].length-1)===`
`?r[1].slice(0,-1):r[1];return{type:"paragraph",raw:r[0],text:l,tokens:this.lexer.inline(l)}}}text(t){const r=this.rules.block.text.exec(t);if(r)return{type:"text",raw:r[0],text:r[0],tokens:this.lexer.inline(r[0])}}escape(t){const r=this.rules.inline.escape.exec(t);if(r)return{type:"escape",raw:r[0],text:Qt(r[1])}}tag(t){const r=this.rules.inline.tag.exec(t);if(r)return!this.lexer.state.inLink&&/^<a /i.test(r[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(r[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:r[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:r[0]}}link(t){const r=this.rules.inline.link.exec(t);if(r){const l=r[2].trim();if(!this.options.pedantic&&/^</.test(l)){if(!/>$/.test(l))return;const h=ai(l.slice(0,-1),"\\");if((l.length-h.length)%2===0)return}else{const h=W$(r[2],"()");if(h>-1){const n=(r[0].indexOf("!")===0?5:4)+r[1].length+h;r[2]=r[2].substring(0,h),r[0]=r[0].substring(0,n).trim(),r[3]=""}}let u=r[2],v="";if(this.options.pedantic){const h=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(u);h&&(u=h[1],v=h[3])}else v=r[3]?r[3].slice(1,-1):"";return u=u.trim(),/^</.test(u)&&(this.options.pedantic&&!/>$/.test(l)?u=u.slice(1):u=u.slice(1,-1)),ho(r,{href:u&&u.replace(this.rules.inline.anyPunctuation,"$1"),title:v&&v.replace(this.rules.inline.anyPunctuation,"$1")},r[0],this.lexer)}}reflink(t,r){let l;if((l=this.rules.inline.reflink.exec(t))||(l=this.rules.inline.nolink.exec(t))){const u=(l[2]||l[1]).replace(/\s+/g," "),v=r[u.toLowerCase()];if(!v){const h=l[0].charAt(0);return{type:"text",raw:h,text:h}}return ho(l,v,l[0],this.lexer)}}emStrong(t,r,l=""){let u=this.rules.inline.emStrongLDelim.exec(t);if(!u||u[3]&&l.match(/[\p{L}\p{N}]/u))return;if(!(u[1]||u[2]||"")||!l||this.rules.inline.punctuation.exec(l)){const h=[...u[0]].length-1;let s,n,f=h,g=0;const p=u[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(p.lastIndex=0,r=r.slice(-1*t.length+h);(u=p.exec(r))!=null;){if(s=u[1]||u[2]||u[3]||u[4]||u[5]||u[6],!s)continue;if(n=[...s].length,u[3]||u[4]){f+=n;continue}else if((u[5]||u[6])&&h%3&&!((h+n)%3)){g+=n;continue}if(f-=n,f>0)continue;n=Math.min(n,n+f+g);const _=[...u[0]][0].length,b=t.slice(0,h+u.index+_+n);if(Math.min(h,n)%2){const x=b.slice(1,-1);return{type:"em",raw:b,text:x,tokens:this.lexer.inlineTokens(x)}}const C=b.slice(2,-2);return{type:"strong",raw:b,text:C,tokens:this.lexer.inlineTokens(C)}}}}codespan(t){const r=this.rules.inline.code.exec(t);if(r){let l=r[2].replace(/\n/g," ");const u=/[^ ]/.test(l),v=/^ /.test(l)&&/ $/.test(l);return u&&v&&(l=l.substring(1,l.length-1)),l=Qt(l,!0),{type:"codespan",raw:r[0],text:l}}}br(t){const r=this.rules.inline.br.exec(t);if(r)return{type:"br",raw:r[0]}}del(t){const r=this.rules.inline.del.exec(t);if(r)return{type:"del",raw:r[0],text:r[2],tokens:this.lexer.inlineTokens(r[2])}}autolink(t){const r=this.rules.inline.autolink.exec(t);if(r){let l,u;return r[2]==="@"?(l=Qt(r[1]),u="mailto:"+l):(l=Qt(r[1]),u=l),{type:"link",raw:r[0],text:l,href:u,tokens:[{type:"text",raw:l,text:l}]}}}url(t){let r;if(r=this.rules.inline.url.exec(t)){let l,u;if(r[2]==="@")l=Qt(r[0]),u="mailto:"+l;else{let v;do v=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])?.[0]??"";while(v!==r[0]);l=Qt(r[0]),r[1]==="www."?u="http://"+r[0]:u=r[0]}return{type:"link",raw:r[0],text:l,href:u,tokens:[{type:"text",raw:l,text:l}]}}}inlineText(t){const r=this.rules.inline.text.exec(t);if(r){let l;return this.lexer.state.inRawBlock?l=r[0]:l=Qt(r[0]),{type:"text",raw:r[0],text:l}}}}const K$=/^(?: *(?:\n|$))+/,Y$=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,G$=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,js=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,J$=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Ca=/(?:[*+-]|\d{1,9}[.)])/,ka=gt(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Ca).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),jn=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,X$=/^[^\n]+/,Un=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Z$=gt(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Un).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Q$=gt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Ca).getRegex(),ji="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Vn=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,e4=gt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",Vn).replace("tag",ji).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Aa=gt(jn).replace("hr",js).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ji).getRegex(),t4=gt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Aa).getRegex(),Wn={blockquote:t4,code:Y$,def:Z$,fences:G$,heading:J$,hr:js,html:e4,lheading:ka,list:Q$,newline:K$,paragraph:Aa,table:Ms,text:X$},uo=gt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",js).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ji).getRegex(),r4={...Wn,table:uo,paragraph:gt(jn).replace("hr",js).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",uo).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ji).getRegex()},s4={...Wn,html:gt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Vn).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ms,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:gt(jn).replace("hr",js).replace("heading",` *#{1,6} *[^
]`).replace("lheading",ka).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Ma=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,i4=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Ea=/^( {2,}|\\)\n(?!\s*$)/,n4=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Us="\\p{P}\\p{S}",l4=gt(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Us).getRegex(),o4=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,a4=gt(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Us).getRegex(),c4=gt("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Us).getRegex(),d4=gt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Us).getRegex(),h4=gt(/\\([punct])/,"gu").replace(/punct/g,Us).getRegex(),u4=gt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),f4=gt(Vn).replace("(?:-->|$)","-->").getRegex(),g4=gt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",f4).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Ti=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,p4=gt(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Ti).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),La=gt(/^!?\[(label)\]\[(ref)\]/).replace("label",Ti).replace("ref",Un).getRegex(),Ra=gt(/^!?\[(ref)\](?:\[\])?/).replace("ref",Un).getRegex(),v4=gt("reflink|nolink(?!\\()","g").replace("reflink",La).replace("nolink",Ra).getRegex(),qn={_backpedal:Ms,anyPunctuation:h4,autolink:u4,blockSkip:o4,br:Ea,code:i4,del:Ms,emStrongLDelim:a4,emStrongRDelimAst:c4,emStrongRDelimUnd:d4,escape:Ma,link:p4,nolink:Ra,punctuation:l4,reflink:La,reflinkSearch:v4,tag:g4,text:n4,url:Ms},m4={...qn,link:gt(/^!?\[(label)\]\((.*?)\)/).replace("label",Ti).getRegex(),reflink:gt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ti).getRegex()},En={...qn,escape:gt(Ma).replace("])","~|])").getRegex(),url:gt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},_4={...En,br:gt(Ea).replace("{2,}","*").getRegex(),text:gt(En.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ci={normal:Wn,gfm:r4,pedantic:s4},$s={normal:qn,gfm:En,breaks:_4,pedantic:m4};class vr{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Zr,this.options.tokenizer=this.options.tokenizer||new Di,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const r={block:ci.normal,inline:$s.normal};this.options.pedantic?(r.block=ci.pedantic,r.inline=$s.pedantic):this.options.gfm&&(r.block=ci.gfm,this.options.breaks?r.inline=$s.breaks:r.inline=$s.gfm),this.tokenizer.rules=r}static get rules(){return{block:ci,inline:$s}}static lex(t,r){return new vr(r).lex(t)}static lexInline(t,r){return new vr(r).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){const l=this.inlineQueue[r];this.inlineTokens(l.src,l.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,r=[]){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(s,n,f)=>n+"    ".repeat(f.length));let l,u,v,h;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(s=>(l=s.call({lexer:this},t,r))?(t=t.substring(l.raw.length),r.push(l),!0):!1))){if(l=this.tokenizer.space(t)){t=t.substring(l.raw.length),l.raw.length===1&&r.length>0?r[r.length-1].raw+=`
`:r.push(l);continue}if(l=this.tokenizer.code(t)){t=t.substring(l.raw.length),u=r[r.length-1],u&&(u.type==="paragraph"||u.type==="text")?(u.raw+=`
`+l.raw,u.text+=`
`+l.text,this.inlineQueue[this.inlineQueue.length-1].src=u.text):r.push(l);continue}if(l=this.tokenizer.fences(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.heading(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.hr(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.blockquote(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.list(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.html(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.def(t)){t=t.substring(l.raw.length),u=r[r.length-1],u&&(u.type==="paragraph"||u.type==="text")?(u.raw+=`
`+l.raw,u.text+=`
`+l.raw,this.inlineQueue[this.inlineQueue.length-1].src=u.text):this.tokens.links[l.tag]||(this.tokens.links[l.tag]={href:l.href,title:l.title});continue}if(l=this.tokenizer.table(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.lheading(t)){t=t.substring(l.raw.length),r.push(l);continue}if(v=t,this.options.extensions&&this.options.extensions.startBlock){let s=1/0;const n=t.slice(1);let f;this.options.extensions.startBlock.forEach(g=>{f=g.call({lexer:this},n),typeof f=="number"&&f>=0&&(s=Math.min(s,f))}),s<1/0&&s>=0&&(v=t.substring(0,s+1))}if(this.state.top&&(l=this.tokenizer.paragraph(v))){u=r[r.length-1],h&&u.type==="paragraph"?(u.raw+=`
`+l.raw,u.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=u.text):r.push(l),h=v.length!==t.length,t=t.substring(l.raw.length);continue}if(l=this.tokenizer.text(t)){t=t.substring(l.raw.length),u=r[r.length-1],u&&u.type==="text"?(u.raw+=`
`+l.raw,u.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=u.text):r.push(l);continue}if(t){const s="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(s);break}else throw new Error(s)}}return this.state.top=!0,r}inline(t,r=[]){return this.inlineQueue.push({src:t,tokens:r}),r}inlineTokens(t,r=[]){let l,u,v,h=t,s,n,f;if(this.tokens.links){const g=Object.keys(this.tokens.links);if(g.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(h))!=null;)g.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(h=h.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+h.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.blockSkip.exec(h))!=null;)h=h.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+h.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(s=this.tokenizer.rules.inline.anyPunctuation.exec(h))!=null;)h=h.slice(0,s.index)+"++"+h.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(n||(f=""),n=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(g=>(l=g.call({lexer:this},t,r))?(t=t.substring(l.raw.length),r.push(l),!0):!1))){if(l=this.tokenizer.escape(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.tag(t)){t=t.substring(l.raw.length),u=r[r.length-1],u&&l.type==="text"&&u.type==="text"?(u.raw+=l.raw,u.text+=l.text):r.push(l);continue}if(l=this.tokenizer.link(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(l.raw.length),u=r[r.length-1],u&&l.type==="text"&&u.type==="text"?(u.raw+=l.raw,u.text+=l.text):r.push(l);continue}if(l=this.tokenizer.emStrong(t,h,f)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.codespan(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.br(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.del(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.autolink(t)){t=t.substring(l.raw.length),r.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(t))){t=t.substring(l.raw.length),r.push(l);continue}if(v=t,this.options.extensions&&this.options.extensions.startInline){let g=1/0;const p=t.slice(1);let _;this.options.extensions.startInline.forEach(b=>{_=b.call({lexer:this},p),typeof _=="number"&&_>=0&&(g=Math.min(g,_))}),g<1/0&&g>=0&&(v=t.substring(0,g+1))}if(l=this.tokenizer.inlineText(v)){t=t.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(f=l.raw.slice(-1)),n=!0,u=r[r.length-1],u&&u.type==="text"?(u.raw+=l.raw,u.text+=l.text):r.push(l);continue}if(t){const g="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(g);break}else throw new Error(g)}}return r}}class Pi{options;constructor(t){this.options=t||Zr}code(t,r,l){const u=(r||"").match(/^\S*/)?.[0];return t=t.replace(/\n$/,"")+`
`,u?'<pre><code class="language-'+Qt(u)+'">'+(l?t:Qt(t,!0))+`</code></pre>
`:"<pre><code>"+(l?t:Qt(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t,r){return t}heading(t,r,l){return`<h${r}>${t}</h${r}>
`}hr(){return`<hr>
`}list(t,r,l){const u=r?"ol":"ul",v=r&&l!==1?' start="'+l+'"':"";return"<"+u+v+`>
`+t+"</"+u+`>
`}listitem(t,r,l){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(t){return`<p>${t}</p>
`}table(t,r){return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+r+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,r){const l=r.header?"th":"td";return(r.align?`<${l} align="${r.align}">`:`<${l}>`)+t+`</${l}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return"<br>"}del(t){return`<del>${t}</del>`}link(t,r,l){const u=ao(t);if(u===null)return l;t=u;let v='<a href="'+t+'"';return r&&(v+=' title="'+r+'"'),v+=">"+l+"</a>",v}image(t,r,l){const u=ao(t);if(u===null)return l;t=u;let v=`<img src="${t}" alt="${l}"`;return r&&(v+=` title="${r}"`),v+=">",v}text(t){return t}}class Kn{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,r,l){return""+l}image(t,r,l){return""+l}br(){return""}}class mr{options;renderer;textRenderer;constructor(t){this.options=t||Zr,this.options.renderer=this.options.renderer||new Pi,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Kn}static parse(t,r){return new mr(r).parse(t)}static parseInline(t,r){return new mr(r).parseInline(t)}parse(t,r=!0){let l="";for(let u=0;u<t.length;u++){const v=t[u];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[v.type]){const h=v,s=this.options.extensions.renderers[h.type].call({parser:this},h);if(s!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(h.type)){l+=s||"";continue}}switch(v.type){case"space":continue;case"hr":{l+=this.renderer.hr();continue}case"heading":{const h=v;l+=this.renderer.heading(this.parseInline(h.tokens),h.depth,U$(this.parseInline(h.tokens,this.textRenderer)));continue}case"code":{const h=v;l+=this.renderer.code(h.text,h.lang,!!h.escaped);continue}case"table":{const h=v;let s="",n="";for(let g=0;g<h.header.length;g++)n+=this.renderer.tablecell(this.parseInline(h.header[g].tokens),{header:!0,align:h.align[g]});s+=this.renderer.tablerow(n);let f="";for(let g=0;g<h.rows.length;g++){const p=h.rows[g];n="";for(let _=0;_<p.length;_++)n+=this.renderer.tablecell(this.parseInline(p[_].tokens),{header:!1,align:h.align[_]});f+=this.renderer.tablerow(n)}l+=this.renderer.table(s,f);continue}case"blockquote":{const h=v,s=this.parse(h.tokens);l+=this.renderer.blockquote(s);continue}case"list":{const h=v,s=h.ordered,n=h.start,f=h.loose;let g="";for(let p=0;p<h.items.length;p++){const _=h.items[p],b=_.checked,C=_.task;let x="";if(_.task){const o=this.renderer.checkbox(!!b);f?_.tokens.length>0&&_.tokens[0].type==="paragraph"?(_.tokens[0].text=o+" "+_.tokens[0].text,_.tokens[0].tokens&&_.tokens[0].tokens.length>0&&_.tokens[0].tokens[0].type==="text"&&(_.tokens[0].tokens[0].text=o+" "+_.tokens[0].tokens[0].text)):_.tokens.unshift({type:"text",text:o+" "}):x+=o+" "}x+=this.parse(_.tokens,f),g+=this.renderer.listitem(x,C,!!b)}l+=this.renderer.list(g,s,n);continue}case"html":{const h=v;l+=this.renderer.html(h.text,h.block);continue}case"paragraph":{const h=v;l+=this.renderer.paragraph(this.parseInline(h.tokens));continue}case"text":{let h=v,s=h.tokens?this.parseInline(h.tokens):h.text;for(;u+1<t.length&&t[u+1].type==="text";)h=t[++u],s+=`
`+(h.tokens?this.parseInline(h.tokens):h.text);l+=r?this.renderer.paragraph(s):s;continue}default:{const h='Token with "'+v.type+'" type was not found.';if(this.options.silent)return console.error(h),"";throw new Error(h)}}}return l}parseInline(t,r){r=r||this.renderer;let l="";for(let u=0;u<t.length;u++){const v=t[u];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[v.type]){const h=this.options.extensions.renderers[v.type].call({parser:this},v);if(h!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(v.type)){l+=h||"";continue}}switch(v.type){case"escape":{const h=v;l+=r.text(h.text);break}case"html":{const h=v;l+=r.html(h.text);break}case"link":{const h=v;l+=r.link(h.href,h.title,this.parseInline(h.tokens,r));break}case"image":{const h=v;l+=r.image(h.href,h.title,h.text);break}case"strong":{const h=v;l+=r.strong(this.parseInline(h.tokens,r));break}case"em":{const h=v;l+=r.em(this.parseInline(h.tokens,r));break}case"codespan":{const h=v;l+=r.codespan(h.text);break}case"br":{l+=r.br();break}case"del":{const h=v;l+=r.del(this.parseInline(h.tokens,r));break}case"text":{const h=v;l+=r.text(h.text);break}default:{const h='Token with "'+v.type+'" type was not found.';if(this.options.silent)return console.error(h),"";throw new Error(h)}}}return l}}class mi{options;constructor(t){this.options=t||Zr}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}}class b4{defaults=Fn();options=this.setOptions;parse=this.#e(vr.lex,mr.parse);parseInline=this.#e(vr.lexInline,mr.parseInline);Parser=mr;Renderer=Pi;TextRenderer=Kn;Lexer=vr;Tokenizer=Di;Hooks=mi;constructor(...t){this.use(...t)}walkTokens(t,r){let l=[];for(const u of t)switch(l=l.concat(r.call(this,u)),u.type){case"table":{const v=u;for(const h of v.header)l=l.concat(this.walkTokens(h.tokens,r));for(const h of v.rows)for(const s of h)l=l.concat(this.walkTokens(s.tokens,r));break}case"list":{const v=u;l=l.concat(this.walkTokens(v.items,r));break}default:{const v=u;this.defaults.extensions?.childTokens?.[v.type]?this.defaults.extensions.childTokens[v.type].forEach(h=>{const s=v[h].flat(1/0);l=l.concat(this.walkTokens(s,r))}):v.tokens&&(l=l.concat(this.walkTokens(v.tokens,r)))}}return l}use(...t){const r=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(l=>{const u={...l};if(u.async=this.defaults.async||u.async||!1,l.extensions&&(l.extensions.forEach(v=>{if(!v.name)throw new Error("extension name required");if("renderer"in v){const h=r.renderers[v.name];h?r.renderers[v.name]=function(...s){let n=v.renderer.apply(this,s);return n===!1&&(n=h.apply(this,s)),n}:r.renderers[v.name]=v.renderer}if("tokenizer"in v){if(!v.level||v.level!=="block"&&v.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const h=r[v.level];h?h.unshift(v.tokenizer):r[v.level]=[v.tokenizer],v.start&&(v.level==="block"?r.startBlock?r.startBlock.push(v.start):r.startBlock=[v.start]:v.level==="inline"&&(r.startInline?r.startInline.push(v.start):r.startInline=[v.start]))}"childTokens"in v&&v.childTokens&&(r.childTokens[v.name]=v.childTokens)}),u.extensions=r),l.renderer){const v=this.defaults.renderer||new Pi(this.defaults);for(const h in l.renderer){if(!(h in v))throw new Error(`renderer '${h}' does not exist`);if(h==="options")continue;const s=h,n=l.renderer[s],f=v[s];v[s]=(...g)=>{let p=n.apply(v,g);return p===!1&&(p=f.apply(v,g)),p||""}}u.renderer=v}if(l.tokenizer){const v=this.defaults.tokenizer||new Di(this.defaults);for(const h in l.tokenizer){if(!(h in v))throw new Error(`tokenizer '${h}' does not exist`);if(["options","rules","lexer"].includes(h))continue;const s=h,n=l.tokenizer[s],f=v[s];v[s]=(...g)=>{let p=n.apply(v,g);return p===!1&&(p=f.apply(v,g)),p}}u.tokenizer=v}if(l.hooks){const v=this.defaults.hooks||new mi;for(const h in l.hooks){if(!(h in v))throw new Error(`hook '${h}' does not exist`);if(h==="options")continue;const s=h,n=l.hooks[s],f=v[s];mi.passThroughHooks.has(h)?v[s]=g=>{if(this.defaults.async)return Promise.resolve(n.call(v,g)).then(_=>f.call(v,_));const p=n.call(v,g);return f.call(v,p)}:v[s]=(...g)=>{let p=n.apply(v,g);return p===!1&&(p=f.apply(v,g)),p}}u.hooks=v}if(l.walkTokens){const v=this.defaults.walkTokens,h=l.walkTokens;u.walkTokens=function(s){let n=[];return n.push(h.call(this,s)),v&&(n=n.concat(v.call(this,s))),n}}this.defaults={...this.defaults,...u}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,r){return vr.lex(t,r??this.defaults)}parser(t,r){return mr.parse(t,r??this.defaults)}#e(t,r){return(l,u)=>{const v={...u},h={...this.defaults,...v};this.defaults.async===!0&&v.async===!1&&(h.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),h.async=!0);const s=this.#t(!!h.silent,!!h.async);if(typeof l>"u"||l===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof l!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(l)+", string expected"));if(h.hooks&&(h.hooks.options=h),h.async)return Promise.resolve(h.hooks?h.hooks.preprocess(l):l).then(n=>t(n,h)).then(n=>h.hooks?h.hooks.processAllTokens(n):n).then(n=>h.walkTokens?Promise.all(this.walkTokens(n,h.walkTokens)).then(()=>n):n).then(n=>r(n,h)).then(n=>h.hooks?h.hooks.postprocess(n):n).catch(s);try{h.hooks&&(l=h.hooks.preprocess(l));let n=t(l,h);h.hooks&&(n=h.hooks.processAllTokens(n)),h.walkTokens&&this.walkTokens(n,h.walkTokens);let f=r(n,h);return h.hooks&&(f=h.hooks.postprocess(f)),f}catch(n){return s(n)}}}#t(t,r){return l=>{if(l.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const u="<p>An error occurred:</p><pre>"+Qt(l.message+"",!0)+"</pre>";return r?Promise.resolve(u):u}if(r)return Promise.reject(l);throw l}}}const Jr=new b4;function ft(e,t){return Jr.parse(e,t)}ft.options=ft.setOptions=function(e){return Jr.setOptions(e),ft.defaults=Jr.defaults,$a(ft.defaults),ft};ft.getDefaults=Fn;ft.defaults=Zr;ft.use=function(...e){return Jr.use(...e),ft.defaults=Jr.defaults,$a(ft.defaults),ft};ft.walkTokens=function(e,t){return Jr.walkTokens(e,t)};ft.parseInline=Jr.parseInline;ft.Parser=mr;ft.parser=mr.parse;ft.Renderer=Pi;ft.TextRenderer=Kn;ft.Lexer=vr;ft.lexer=vr.lex;ft.Tokenizer=Di;ft.Hooks=mi;ft.parse=ft;ft.options;ft.setOptions;ft.use;ft.walkTokens;ft.parseInline;mr.parse;vr.lex;const[sw,y4]=J(null),[gn,Wr]=J([]),[_i,fo]=J(!1),[go,Da]=J("ollama"),[po,iw]=J([{id:"ollama",name:"Ollama (Local)",icon:"llama"},{id:"openai",name:"OpenAI GPT-4",icon:"openai"},{id:"anthropic",name:"Claude",icon:"anthropic"}]);async function x4(){try{const e=await fetch("/api/ai/status");if(e.ok){const t=await e.json();if(t.available&&t.provider){const r=t.provider.split(" ")[0];Da(r)}}}catch(e){console.error("Failed to fetch AI status:",e)}}async function vo(e){if(!e.trim()||_i())return;const t={id:crypto.randomUUID(),role:"user",content:e,timestamp:new Date};Wr(r=>[...r,t]),fo(!0);try{if(!(await(await fetch("/api/ai/status")).json()).available){const v={id:crypto.randomUUID(),role:"assistant",content:"No AI provider available. Configure Ollama (local), OpenAI (OPENAI_API_KEY), or Claude (ANTHROPIC_API_KEY) to enable AI features.",timestamp:new Date};Wr(h=>[...h,v]);return}const u=await fetch("/api/ai/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e})});if(u.ok){const v=await u.json();if(v.error){const h={id:crypto.randomUUID(),role:"assistant",content:`Error: ${v.error}`,timestamp:new Date};Wr(s=>[...s,h])}else{const h={id:crypto.randomUUID(),role:"assistant",content:v.response,timestamp:new Date};Wr(s=>[...s,h])}}else{const v=await u.text(),h={id:crypto.randomUUID(),role:"assistant",content:`Error: ${v}`,timestamp:new Date};Wr(s=>[...s,h])}}catch(r){const l={id:crypto.randomUUID(),role:"assistant",content:`Failed to send message: ${r}`,timestamp:new Date};Wr(u=>[...u,l])}finally{fo(!1)}}function Ta(){Wr([]),y4(null)}function $4(e){Da(e),Ta()}var w4=R('<div class="text-center py-8"><div class="w-16 h-16 rounded-full bg-gradient-to-br from-purple-600/20 to-indigo-600/20 flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8 text-purple-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path></svg></div><h3 class="text-white font-medium mb-2">How can I help?</h3><p class="text-gray-500 text-sm mb-6">Ask me about your Kubernetes cluster, resources, or troubleshooting</p><div class=space-y-2>'),S4=R('<div class="flex justify-start"><div class="bg-k8s-dark rounded-lg px-4 py-3"><div class="flex items-center gap-2"><div class="flex gap-1"><div class="w-2 h-2 rounded-full bg-purple-500 animate-bounce"style=animation-delay:0ms></div><div class="w-2 h-2 rounded-full bg-purple-500 animate-bounce"style=animation-delay:150ms></div><div class="w-2 h-2 rounded-full bg-purple-500 animate-bounce"style=animation-delay:300ms></div></div><span class="text-gray-500 text-sm">Thinking...'),C4=R('<div class="fixed top-0 right-0 w-[420px] h-full bg-k8s-card border-l border-k8s-border flex flex-col z-50 animate-slide-in"><div class="flex items-center justify-between px-4 py-3 border-b border-k8s-border"><div class="flex items-center gap-3"><div class="w-10 h-10 rounded-lg bg-gradient-to-br from-purple-600 to-indigo-600 flex items-center justify-center"><svg class="w-6 h-6 text-white"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg></div><div><h2 class="text-white font-semibold">AI Assistant</h2><p class="text-gray-500 text-xs">Kubernetes expert</p></div></div><div class="flex items-center gap-2"><select class="bg-k8s-dark border border-k8s-border rounded-lg px-2 py-1 text-sm text-gray-400 focus:border-k8s-blue focus:outline-none"></select><button class="p-2 rounded-lg hover:bg-k8s-border/50 transition-colors text-gray-400 hover:text-white"title="Clear chat"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button><button class="p-2 rounded-lg hover:bg-k8s-border/50 transition-colors text-gray-400 hover:text-white"title=Close><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div><div class="flex-1 overflow-y-auto p-4 space-y-4"><div></div></div><form class="p-4 border-t border-k8s-border"><div class="flex items-center gap-2"><input type=text placeholder="Ask about your cluster..."class="flex-1 bg-k8s-dark border border-k8s-border rounded-lg px-4 py-2.5 text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none disabled:opacity-50"><button type=submit class="p-2.5 bg-gradient-to-r from-purple-600 to-indigo-600 rounded-lg text-white hover:from-purple-700 hover:to-indigo-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg></button></div><p class="mt-2 text-xs text-gray-500 text-center">Using '),k4=R("<option>"),A4=R('<button class="w-full text-left px-4 py-2 bg-k8s-dark hover:bg-k8s-border/50 rounded-lg text-sm text-gray-400 hover:text-white transition-colors">'),M4=R('<div class="prose prose-invert prose-sm max-w-none">'),E4=R('<div class="mt-2 pt-2 border-t border-k8s-border/50 text-xs text-gray-500">Tokens: '),L4=R("<div><div>"),R4=R('<p class="text-sm whitespace-pre-wrap">');const D4=()=>{let e,t;const[r,l]=J(""),u=["Show me pods with high restart counts","List deployments not fully available","What services expose port 80?","Show cluster resource usage"];Xt(()=>{x4(),t?.focus()}),Mt(()=>{gn(),setTimeout(()=>{e?.scrollIntoView({behavior:"smooth"})},100)});async function v(n){n.preventDefault();const f=r().trim();f&&(l(""),await vo(f))}function h(n){vo(n)}function s(n){try{return ft.parse(n,{async:!1})}catch{return n}}return(()=>{var n=C4(),f=n.firstChild,g=f.firstChild,p=g.nextSibling,_=p.firstChild,b=_.nextSibling,C=b.nextSibling,x=f.nextSibling,o=x.firstChild,d=x.nextSibling,a=d.firstChild,c=a.firstChild,m=c.nextSibling,$=a.nextSibling;$.firstChild,_.addEventListener("change",y=>$4(y.target.value)),i(_,A(Ne,{get each(){return po()},children:y=>(()=>{var k=k4();return i(k,()=>y.name),re(()=>k.value=y.id),k})()})),ar(b,"click",Ta,!0),C.$$click=()=>Ro(!1),i(x,A(q,{get when(){return gn().length===0},get children(){var y=w4(),k=y.firstChild,B=k.nextSibling,O=B.nextSibling,T=O.nextSibling;return i(T,A(Ne,{each:u,children:I=>(()=>{var M=A4();return M.$$click=()=>h(I),i(M,I),M})()})),y}}),o),i(x,A(Ne,{get each(){return gn()},children:y=>(()=>{var k=L4(),B=k.firstChild;return i(B,A(q,{get when(){return y.role==="assistant"},get fallback(){return(()=>{var O=R4();return i(O,()=>y.content),O})()},get children(){return[(()=>{var O=M4();return re(()=>O.innerHTML=s(y.content)),O})(),A(q,{get when(){return y.usage},get children(){var O=E4();return O.firstChild,i(O,()=>y.usage?.totalTokens,null),O}})]}})),re(O=>{var T=`flex ${y.role==="user"?"justify-end":"justify-start"}`,I=`max-w-[85%] rounded-lg px-4 py-3 ${y.role==="user"?"bg-k8s-blue text-white":"bg-k8s-dark text-gray-300"}`;return T!==O.e&&He(k,O.e=T),I!==O.t&&He(B,O.t=I),O},{e:void 0,t:void 0}),k})()}),o),i(x,A(q,{get when(){return _i()},get children(){var y=S4(),k=y.firstChild,B=k.firstChild,O=B.firstChild,T=O.firstChild,I=T.nextSibling;return I.nextSibling,y}}),o);var S=e;typeof S=="function"?Wt(S,o):e=o,d.addEventListener("submit",v),c.$$input=y=>l(y.target.value);var E=t;return typeof E=="function"?Wt(E,c):t=c,i($,()=>po().find(y=>y.id===go())?.name||"AI",null),re(y=>{var k=_i(),B=_i()||!r().trim();return k!==y.e&&(c.disabled=y.e=k),B!==y.t&&(m.disabled=y.t=B),y},{e:void 0,t:void 0}),re(()=>_.value=go()),re(()=>c.value=r()),n})()};Qe(["click","input"]);var T4=R('<div class="px-6 py-3 flex items-center gap-3"style="background:rgba(239, 68, 68, 0.1);border-bottom:1px solid rgba(239, 68, 68, 0.2)"><svg class="w-5 h-5 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--error-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div class="flex-1 min-w-0"><span class=font-medium style=color:var(--error-color)>Cluster not connected</span><span class="text-sm ml-2"style=color:var(--text-muted)>â€” Connect to a Kubernetes cluster to use KubeGraf</span></div><button class="px-3 py-1.5 rounded text-sm font-medium transition-all hover:opacity-80 flex items-center gap-1.5"style="background:rgba(239, 68, 68, 0.2);color:var(--error-color)"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>Retry'),P4=R('<div class="px-4 py-2 flex items-center gap-3"style="background:rgba(6, 182, 212, 0.1);border-bottom:1px solid rgba(6, 182, 212, 0.3);color:var(--accent-primary)"><div class=spinner style=width:16px;height:16px></div><span class="text-sm font-medium">'),I4=R('<div class="card p-4 mb-6 text-left max-w-lg mx-auto"><div class="text-xs font-semibold mb-2 uppercase tracking-wide"style=color:var(--error-color)>Error</div><div class="text-xs font-mono break-all mb-2"style=color:var(--text-secondary)></div><div class="text-sm font-medium mt-3"style=color:var(--text-primary)><div class=mb-2>Check your kubeconfig at:</div><code class="block px-3 py-2 rounded mb-3 text-xs font-mono"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)">~/.kube/config</code><div class=mb-2>Or run this command to verify access:</div><code class="block px-3 py-2 rounded text-xs font-mono"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)">kubectl cluster-info'),B4=R('<div class="absolute inset-0 z-10 flex items-center justify-center p-8"style=background:var(--bg-primary);pointer-events:auto><div class="max-w-3xl w-full"><div class="text-center mb-8"><div class="w-20 h-20 mx-auto mb-6 rounded-full flex items-center justify-center"style="background:rgba(6, 182, 212, 0.15)"><svg class="w-12 h-12"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg></div><h2 class="text-3xl font-bold mb-3"style=color:var(--text-primary)>No Cluster Connected</h2><p class="text-base mb-8"style=color:var(--text-secondary)>Connect to an existing Kubernetes cluster or create a local one to get started</p></div><div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"><div class="card p-6 hover:border-cyan-500/50 transition-all cursor-pointer"style="border:2px solid var(--border-color)"><div class="flex items-center gap-3 mb-4"><div class="w-12 h-12 rounded-lg flex items-center justify-center"style="background:rgba(6, 182, 212, 0.1)"><svg class="w-6 h-6"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg></div><h3 class="text-lg font-semibold"style=color:var(--text-primary)>Connect via kubeconfig</h3></div><p class="text-sm mb-4"style=color:var(--text-secondary)>Connect to an existing Kubernetes cluster using your kubeconfig file</p><ul class="text-xs space-y-2 mb-4"style=color:var(--text-muted)><li class="flex items-start gap-2"><span class=mt-1>â€¢</span><span>Ensure kubeconfig is at <code class="px-1 py-0.5 rounded"style=background:var(--bg-tertiary)>~/.kube/config</code></span></li><li class="flex items-start gap-2"><span class=mt-1>â€¢</span><span>Verify with: <code class="px-1 py-0.5 rounded"style=background:var(--bg-tertiary)>kubectl cluster-info</code></span></li><li class="flex items-start gap-2"><span class=mt-1>â€¢</span><span>Click "Retry Connection" below</span></li></ul><button class="w-full px-4 py-2 rounded-lg text-sm font-medium transition-all hover:opacity-90 flex items-center justify-center gap-2"style=background:var(--accent-primary);color:#000><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>Retry Connection</button></div><div class="card p-6 hover:border-cyan-500/50 transition-all cursor-pointer"style="border:2px solid var(--border-color)"><div class="flex items-center gap-3 mb-4"><div class="w-12 h-12 rounded-lg flex items-center justify-center"style="background:rgba(34, 197, 94, 0.1)"><svg class="w-6 h-6"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:#22c55e><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg></div><h3 class="text-lg font-semibold"style=color:var(--text-primary)>Create Local Cluster</h3></div><p class="text-sm mb-4"style=color:var(--text-secondary)>Set up a local Kubernetes cluster using k3d, kind, or minikube</p><ul class="text-xs space-y-2 mb-4"style=color:var(--text-muted)><li class="flex items-start gap-2"><span class=mt-1>â€¢</span><span>Requires Docker Desktop installed and running</span></li><li class="flex items-start gap-2"><span class=mt-1>â€¢</span><span>Choose from k3d, kind, or minikube</span></li><li class="flex items-start gap-2"><span class=mt-1>â€¢</span><span>Automatically connects after creation</span></li></ul><button class="w-full px-4 py-2 rounded-lg text-sm font-medium transition-all hover:opacity-90 flex items-center justify-center gap-2"style=background:#22c55e;color:#000><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>Go to Marketplace</button></div></div><div class="flex items-center justify-center gap-3"><button class="px-5 py-2.5 rounded-lg font-medium transition-all hover:opacity-90 flex items-center gap-2"style=background:var(--error-color);color:white><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>Retry Connection</button><a href=https://kubegraf.io/docs target=_blank class="px-5 py-2.5 rounded-lg font-medium transition-all hover:opacity-90 flex items-center gap-2"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg>Documentation'),O4=R('<div class="flex items-center gap-2 px-3 py-2 rounded-lg text-xs"style=background:var(--bg-secondary);color:var(--text-muted)><span></span><span>'),H4=R('<div class="flex h-screen overflow-hidden"style=background:var(--bg-primary)><div><main class="flex-1 overflow-auto p-6 relative"></main><footer class="px-6 py-2 border-t flex items-center justify-end text-xs"style=background:var(--bg-secondary);border-color:var(--border-color);color:var(--text-muted)><div class="flex items-center gap-4"><span class="flex items-center gap-1"><span></span></span><a href=https://github.com/kubegraf/kubegraf target=_blank class=hover:underline style=color:var(--accent-primary)>GitHub</a></div></footer></div><div class="fixed bottom-4 right-4 z-50 flex flex-col gap-2"></div><div class="fixed bottom-4 z-50"style=left:80px>'),N4=R('<div class=p-6 style=background:red;color:white;font-size:20px;z-index:9999;position:relative>Error: Component not found for view "<!>"'),z4=R("<div class=p-6 style=background:red;color:white;font-size:20px>Error rendering <!>: "),F4=R('<div class="animate-slide-in px-4 py-3 rounded-lg shadow-lg border max-w-sm"><div class="flex items-start gap-2"><span></span><span class=text-sm>');const j4=()=>A(xa,{}),U4=()=>A(xa,{}),V4=()=>A(Fi,{title:"Deploy App",description:"Deploy applications to your Kubernetes cluster with ease. Choose from templates, Helm charts, or custom YAML configurations.",icon:"M12 6v6m0 0v6m0-6h6m-6 0H6",comingSoon:!0,features:["Deploy from Helm charts","Deploy from YAML manifests","Application templates library","One-click deployment","Deployment validation","Rollback capabilities"]}),W4=()=>A(Fi,{title:"Releases",description:"Manage application releases and track deployment history across your cluster.",icon:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12",comingSoon:!0,features:["Release history tracking","Release comparison","Rollback to previous releases","Release notes and changelog","Release approval workflow"]}),q4=()=>A(Fi,{title:"Rollouts (Canary / Blue-Green)",description:"Advanced deployment strategies including canary and blue-green rollouts for zero-downtime deployments.",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z",comingSoon:!0,features:["Canary deployments","Blue-Green deployments","Traffic splitting","Automatic rollback on errors","Progressive delivery","Integration with Argo Rollouts"]}),mo={dashboard:Uh,pods:Au,deployments:zu,statefulsets:Ju,daemonsets:lf,cronjobs:pf,jobs:Sf,services:Bf,ingresses:qf,configmaps:rg,secrets:hg,certificates:yg,nodes:Pg,resourcemap:t1,security:B1,plugins:__,cost:O_,drift:K_,events:l2,monitoredevents:M2,logs:Ab,anomalies:Kb,connectors:N2,aiagents:X2,sreagent:vb,apps:j4,customapps:U4,settings:H$,deployapp:V4,releases:W4,rollouts:q4,storage:bx,rbac:Ix,networkpolicies:Bx,usermanagement:Kx,uidemo:w$},K4=()=>{const[e]=qe(Re.getStatus),[t,r]=J(!1);Xt(()=>{ds.connect();const u=ds.subscribe(v=>{v.type==="connection"&&r(v.data.connected)});return()=>{u(),ds.disconnect()}});const l=()=>e()?.connected!==!1;return(()=>{var u=H4(),v=u.firstChild,h=v.firstChild,s=h.nextSibling,n=s.firstChild,f=n.firstChild,g=f.firstChild;f.nextSibling;var p=v.nextSibling,_=p.nextSibling;return i(u,A(Qc,{}),v),i(v,A(_h,{}),h),i(v,A(q,{get when(){return!l()},get children(){var b=T4(),C=b.firstChild,x=C.nextSibling,o=x.firstChild;o.nextSibling;var d=x.nextSibling;return d.$$click=()=>location.reload(),b}}),h),i(v,A(q,{get when(){return ed()},get children(){var b=P4(),C=b.firstChild,x=C.nextSibling;return i(x,td),b}}),h),i(h,A(q,{get when(){return Me(()=>!l())()&&kr()!=="settings"},get children(){var b=B4(),C=b.firstChild,x=C.firstChild,o=x.firstChild;o.firstChild;var d=o.nextSibling;d.nextSibling;var a=x.nextSibling,c=a.firstChild,m=c.firstChild,$=m.firstChild;$.firstChild,$.nextSibling;var S=m.nextSibling,E=S.nextSibling,y=E.firstChild,k=y.firstChild,B=k.nextSibling,O=B.firstChild;O.nextSibling;var T=y.nextSibling,I=T.firstChild,M=I.nextSibling,P=M.firstChild;P.nextSibling;var L=E.nextSibling,H=c.nextSibling,w=H.firstChild,N=w.firstChild;N.firstChild,N.nextSibling;var z=w.nextSibling,V=z.nextSibling,Q=V.nextSibling,F=a.nextSibling,U=F.firstChild;return U.nextSibling,c.$$click=()=>{alert(`To connect to an existing cluster:

1. Ensure your kubeconfig is set up (~/.kube/config)
2. Verify access: kubectl cluster-info
3. Click "Retry Connection" or refresh the page

KubeGraf will automatically detect and connect to your cluster.`)},L.$$click=W=>{W.stopPropagation(),location.reload()},H.$$click=()=>{At("apps"),sessionStorage.setItem("kubegraf-auto-filter","Local Cluster")},Q.$$click=W=>{W.stopPropagation(),sessionStorage.setItem("kubegraf-auto-filter","Local Cluster"),sessionStorage.setItem("kubegraf-default-tab","marketplace"),At("apps")},i(C,A(q,{get when(){return e()?.error},get children(){var W=I4(),ce=W.firstChild,D=ce.nextSibling,j=D.nextSibling,K=j.firstChild,ee=K.nextSibling,ne=ee.nextSibling;return ne.nextSibling,i(D,()=>e()?.error),W}}),F),U.$$click=()=>location.reload(),b}}),null),i(h,A(q,{get when(){return l()||kr()==="settings"||kr()==="logs"},get children(){return(()=>{const b=kr(),C=mo[b];if(!C)return console.error("[App] Component not found for view:",b,"Available views:",Object.keys(mo)),(()=>{var x=N4(),o=x.firstChild,d=o.nextSibling;return d.nextSibling,i(x,b,d),x})();try{return A(Lc,{component:C})}catch(x){return console.error("[App] Error rendering component:",x),(()=>{var o=z4(),d=o.firstChild,a=d.nextSibling;return a.nextSibling,i(o,b,a),i(o,()=>String(x),null),o})()}})()}}),null),i(f,()=>e()?.connected?"Connected":"Disconnected",null),i(u,A(q,{get when(){return Lo()},get children(){return A(D4,{})}}),p),i(p,A(Ne,{get each(){return Pc()},children:b=>(()=>{var C=F4(),x=C.firstChild,o=x.firstChild,d=o.nextSibling;return i(o,(()=>{var a=Me(()=>b.type==="error");return()=>a()?"âŒ":Me(()=>b.type==="warning")()?"âš ï¸":b.type==="success"?"âœ“":"â„¹ï¸"})()),i(d,()=>b.message),re(a=>{var c=b.type==="error"?"rgba(239, 68, 68, 0.1)":b.type==="warning"?"rgba(245, 158, 11, 0.1)":b.type==="success"?"rgba(34, 197, 94, 0.1)":"rgba(6, 182, 212, 0.1)",m=b.type==="error"?"rgba(239, 68, 68, 0.3)":b.type==="warning"?"rgba(245, 158, 11, 0.3)":b.type==="success"?"rgba(34, 197, 94, 0.3)":"rgba(6, 182, 212, 0.3)",$=b.type==="error"?"var(--error-color)":b.type==="warning"?"var(--warning-color)":b.type==="success"?"var(--success-color)":"var(--accent-primary)";return c!==a.e&&oe(C,"background",a.e=c),m!==a.t&&oe(C,"border-color",a.t=m),$!==a.a&&oe(C,"color",a.a=$),a},{e:void 0,t:void 0,a:void 0}),C})()})),i(_,A(q,{get when(){return It()},get children(){var b=O4(),C=b.firstChild,x=C.nextSibling;return i(x,()=>t()?"Live":"Offline"),re(()=>He(C,`w-2 h-2 rounded-full ${t()?"bg-green-500":"bg-red-500"}`)),b}})),i(u,A(uy,{}),null),i(u,A(Zx,{get isOpen(){return _n()},onClose:()=>To(!1)}),null),re(b=>{var C=`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${It()?"ml-16":"ml-52"}`,x=`w-2 h-2 rounded-full ${e()?.connected?"bg-green-500":"bg-red-500"}`;return C!==b.e&&He(v,b.e=C),x!==b.t&&He(g,b.t=x),b},{e:void 0,t:void 0}),u})()};Qe(["click"]);const _o=document.getElementById("root");_o&&xc(()=>A(K4,{}),_o);
