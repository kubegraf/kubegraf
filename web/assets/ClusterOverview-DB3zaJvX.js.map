{"version":3,"file":"ClusterOverview-DB3zaJvX.js","sources":["../../src/routes/ClusterOverview.tsx"],"sourcesContent":["import { Component, For, Show, createMemo, onMount, createEffect } from 'solid-js';\nimport { clusterStatus, podsResource, deploymentsResource, servicesResource, nodesResource, refetchPods, refetchDeployments, refetchServices, refetchNodes } from '../stores/cluster';\nimport { setCurrentView } from '../stores/ui';\n\nconst ClusterOverview: Component = () => {\n  // Trigger data fetch when component mounts and when cluster connects\n  onMount(() => {\n    console.log('[ClusterOverview] Component mounted, cluster connected:', clusterStatus().connected);\n    // Always try to refetch, even if cluster status is uncertain\n    setTimeout(() => {\n      console.log('[ClusterOverview] onMount: Refetching all resources');\n      refetchPods();\n      refetchDeployments();\n      refetchServices();\n      refetchNodes();\n    }, 100);\n    \n    // Also refetch after a longer delay to ensure cluster is ready\n    setTimeout(() => {\n      if (clusterStatus().connected) {\n        console.log('[ClusterOverview] onMount (delayed): Refetching all resources again');\n        refetchPods();\n        refetchDeployments();\n        refetchServices();\n        refetchNodes();\n      }\n    }, 1000);\n  });\n\n  // Also refetch when cluster status changes to connected\n  createEffect(() => {\n    const connected = clusterStatus().connected;\n    if (connected) {\n      console.log('[ClusterOverview] Cluster connected, refetching resources');\n      // Small delay to ensure cluster is fully ready\n      setTimeout(() => {\n        if (clusterStatus().connected) {\n          console.log('[ClusterOverview] Refetching pods, deployments, services, nodes');\n          refetchPods();\n          refetchDeployments();\n          refetchServices();\n          refetchNodes();\n        }\n      }, 500);\n    }\n  });\n\n  // Debug: Log resource states\n  createEffect(() => {\n    const pods = podsResource();\n    const deployments = deploymentsResource();\n    const services = servicesResource();\n    const nodes = nodesResource();\n    \n    console.log('[ClusterOverview] Resource states:', {\n      podsLoading: podsResource.loading,\n      podsError: podsResource.error,\n      podsData: pods?.length || 0,\n      podsSample: pods?.slice(0, 2).map((p: any) => ({ name: p.name, namespace: p.namespace, status: p.status })) || [],\n      deploymentsLoading: deploymentsResource.loading,\n      deploymentsError: deploymentsResource.error,\n      deploymentsData: deployments?.length || 0,\n      servicesLoading: servicesResource.loading,\n      servicesData: services?.length || 0,\n      nodesLoading: nodesResource.loading,\n      nodesData: nodes?.length || 0,\n      connected: clusterStatus().connected,\n    });\n    \n    // If we have errors, log them\n    if (podsResource.error) {\n      console.error('[ClusterOverview] Pods fetch error:', podsResource.error);\n    }\n    if (deploymentsResource.error) {\n      console.error('[ClusterOverview] Deployments fetch error:', deploymentsResource.error);\n    }\n  });\n\n  // Derive cluster metrics from shared cluster resources so this view stays in sync\n  const clusterMetrics = createMemo(() => {\n    const pods = podsResource() || [];\n    const deployments = deploymentsResource() || [];\n    const services = servicesResource() || [];\n    const nodes = nodesResource() || [];\n\n    // Calculate statistics\n    const podStats = {\n      total: pods.length,\n      running: pods.filter((p: any) => p.status === 'Running').length,\n      pending: pods.filter((p: any) => p.status === 'Pending').length,\n      failed: pods.filter((p: any) => p.status === 'Failed' || p.status === 'Error').length,\n    };\n\n    const deploymentStats = {\n      total: deployments.length,\n      ready: deployments.filter((d: any) => {\n        if (!d.ready) return 0;\n        const [ready, total] = String(d.ready).split('/').map(Number);\n        return ready === total && total > 0;\n      }).length,\n      notReady: deployments.filter((d: any) => {\n        if (!d.ready) return 0;\n        const [ready, total] = String(d.ready).split('/').map(Number);\n        return ready !== total || total === 0;\n      }).length,\n    };\n\n    const nodeStats = {\n      total: nodes.length,\n      ready: nodes.filter((n: any) => n.status === 'Ready').length,\n      notReady: nodes.filter((n: any) => n.status !== 'Ready').length,\n    };\n\n    return {\n      pods: podStats,\n      deployments: deploymentStats,\n      services: { total: services.length },\n      nodes: nodeStats,\n    };\n  });\n\n  const healthScore = createMemo(() => {\n    const metrics = clusterMetrics();\n    if (!metrics) return 0;\n\n    let score = 0;\n    let total = 0;\n\n    // Pod health (40% weight)\n    if (metrics.pods.total > 0) {\n      const podHealth = (metrics.pods.running / metrics.pods.total) * 100;\n      score += podHealth * 0.4;\n      total += 0.4;\n    }\n\n    // Deployment health (30% weight)\n    if (metrics.deployments.total > 0) {\n      const depHealth = (metrics.deployments.ready / metrics.deployments.total) * 100;\n      score += depHealth * 0.3;\n      total += 0.3;\n    }\n\n    // Node health (30% weight)\n    if (metrics.nodes.total > 0) {\n      const nodeHealth = (metrics.nodes.ready / metrics.nodes.total) * 100;\n      score += nodeHealth * 0.3;\n      total += 0.3;\n    }\n\n    return total > 0 ? Math.round(score / total) : 0;\n  });\n\n  const getHealthColor = (score: number) => {\n    if (score >= 90) return 'text-green-400';\n    if (score >= 70) return 'text-yellow-400';\n    return 'text-red-400';\n  };\n\n  const getHealthBgColor = (score: number) => {\n    if (score >= 90) return 'bg-green-500/20 border-green-500/50';\n    if (score >= 70) return 'bg-yellow-500/20 border-yellow-500/50';\n    return 'bg-red-500/20 border-red-500/50';\n  };\n\n  return (\n    <div class=\"p-6\">\n      <div class=\"mb-6\">\n        <h1 class=\"text-2xl font-bold mb-1\">Cluster Overview</h1>\n        <p class=\"text-sm opacity-70\">\n          {clusterStatus().connected ? 'Real-time cluster health and resource summary' : 'Connect to a cluster to see overview'}\n        </p>\n      </div>\n\n      <Show\n        when={clusterStatus().connected}\n        fallback={\n          <div class=\"text-center py-12\">\n            <p class=\"text-sm opacity-70\">No cluster connected</p>\n          </div>\n        }\n      >\n        {(() => {\n          const isLoading = podsResource.loading || deploymentsResource.loading || servicesResource.loading || nodesResource.loading;\n          const metrics = clusterMetrics();\n          \n          if (isLoading || !metrics) {\n            return (\n              <div class=\"text-center py-12\">\n                <div class=\"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-white\"></div>\n                <p class=\"mt-4 text-sm opacity-70\">Loading cluster metrics...</p>\n              </div>\n            );\n          }\n          \n          const score = healthScore();\n          \n          return (\n            <>\n              {/* Health Score Card */}\n              <div class={`mb-6 p-6 rounded-lg border ${getHealthBgColor(score)}`}>\n                <div class=\"flex items-center justify-between\">\n                  <div>\n                    <h2 class=\"text-lg font-semibold mb-1\">Cluster Health Score</h2>\n                    <p class=\"text-sm opacity-70\">Overall cluster health indicator</p>\n                  </div>\n                  <div class=\"text-right\">\n                    <div class={`text-4xl font-bold ${getHealthColor(score)}`}>\n                      {score}%\n                    </div>\n                    <div class=\"text-xs opacity-70 mt-1\">Health</div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Resource Cards Grid */}\n              <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6\">\n                {/* Pods Card */}\n                <div class=\"bg-white/5 rounded-lg p-4 border border-white/10\">\n                  <div class=\"flex items-center justify-between mb-2\">\n                    <h3 class=\"font-semibold text-sm\">Pods</h3>\n                    <svg class=\"w-5 h-5 opacity-70\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\" />\n                    </svg>\n                  </div>\n                  <div class=\"text-2xl font-bold mb-1\">{metrics.pods.total}</div>\n                  <div class=\"text-xs opacity-70 space-y-1\">\n                    <div class=\"flex justify-between\">\n                      <span>Running:</span>\n                      <span class=\"text-green-400\">{metrics.pods.running}</span>\n                    </div>\n                    <div class=\"flex justify-between\">\n                      <span>Pending:</span>\n                      <span class=\"text-yellow-400\">{metrics.pods.pending}</span>\n                    </div>\n                    <div class=\"flex justify-between\">\n                      <span>Failed:</span>\n                      <span class=\"text-red-400\">{metrics.pods.failed}</span>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Deployments Card */}\n                <div class=\"bg-white/5 rounded-lg p-4 border border-white/10\">\n                  <div class=\"flex items-center justify-between mb-2\">\n                    <h3 class=\"font-semibold text-sm\">Deployments</h3>\n                    <svg class=\"w-5 h-5 opacity-70\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10\" />\n                    </svg>\n                  </div>\n                  <div class=\"text-2xl font-bold mb-1\">{metrics.deployments.total}</div>\n                  <div class=\"text-xs opacity-70 space-y-1\">\n                    <div class=\"flex justify-between\">\n                      <span>Ready:</span>\n                      <span class=\"text-green-400\">{metrics.deployments.ready}</span>\n                    </div>\n                    <div class=\"flex justify-between\">\n                      <span>Not Ready:</span>\n                      <span class=\"text-red-400\">{metrics.deployments.notReady}</span>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Services Card */}\n                <div class=\"bg-white/5 rounded-lg p-4 border border-white/10\">\n                  <div class=\"flex items-center justify-between mb-2\">\n                    <h3 class=\"font-semibold text-sm\">Services</h3>\n                    <svg class=\"w-5 h-5 opacity-70\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9\" />\n                    </svg>\n                  </div>\n                  <div class=\"text-2xl font-bold mb-1\">{metrics.services.total}</div>\n                  <div class=\"text-xs opacity-70\">Total services</div>\n                </div>\n\n                {/* Nodes Card */}\n                <div class=\"bg-white/5 rounded-lg p-4 border border-white/10\">\n                  <div class=\"flex items-center justify-between mb-2\">\n                    <h3 class=\"font-semibold text-sm\">Nodes</h3>\n                    <svg class=\"w-5 h-5 opacity-70\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01\" />\n                    </svg>\n                  </div>\n                  <div class=\"text-2xl font-bold mb-1\">{metrics.nodes.total}</div>\n                  <div class=\"text-xs opacity-70 space-y-1\">\n                    <div class=\"flex justify-between\">\n                      <span>Ready:</span>\n                      <span class=\"text-green-400\">{metrics.nodes.ready}</span>\n                    </div>\n                    <div class=\"flex justify-between\">\n                      <span>Not Ready:</span>\n                      <span class=\"text-red-400\">{metrics.nodes.notReady}</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Quick Actions */}\n              <div class=\"bg-white/5 rounded-lg p-4 border border-white/10\">\n                <h3 class=\"font-semibold mb-3\">Quick Actions</h3>\n                <div class=\"grid grid-cols-2 md:grid-cols-4 gap-2\">\n                  <button \n                    onClick={() => setCurrentView('pods')}\n                    class=\"px-3 py-2 bg-blue-600/20 hover:bg-blue-600/30 rounded text-sm text-center transition-colors cursor-pointer\"\n                  >\n                    View Pods\n                  </button>\n                  <button \n                    onClick={() => setCurrentView('deployments')}\n                    class=\"px-3 py-2 bg-blue-600/20 hover:bg-blue-600/30 rounded text-sm text-center transition-colors cursor-pointer\"\n                  >\n                    View Deployments\n                  </button>\n                  <button \n                    onClick={() => setCurrentView('services')}\n                    class=\"px-3 py-2 bg-blue-600/20 hover:bg-blue-600/30 rounded text-sm text-center transition-colors cursor-pointer\"\n                  >\n                    View Services\n                  </button>\n                  <button \n                    onClick={() => setCurrentView('nodes')}\n                    class=\"px-3 py-2 bg-blue-600/20 hover:bg-blue-600/30 rounded text-sm text-center transition-colors cursor-pointer\"\n                  >\n                    View Nodes\n                  </button>\n                </div>\n              </div>\n            </>\n          );\n        })()}\n      </Show>\n    </div>\n  );\n};\n\nexport default ClusterOverview;\n\n\n"],"names":["ClusterOverview","onMount","console","log","clusterStatus","connected","setTimeout","refetchPods","refetchDeployments","refetchServices","refetchNodes","createEffect","pods","podsResource","deployments","deploymentsResource","services","servicesResource","nodes","nodesResource","podsLoading","loading","podsError","error","podsData","length","podsSample","slice","map","p","name","namespace","status","deploymentsLoading","deploymentsError","deploymentsData","servicesLoading","servicesData","nodesLoading","nodesData","clusterMetrics","createMemo","podStats","total","running","filter","pending","failed","deploymentStats","ready","d","String","split","Number","notReady","nodeStats","n","healthScore","metrics","score","podHealth","depHealth","nodeHealth","Math","round","getHealthColor","getHealthBgColor","_el$","_tmpl$","_el$2","firstChild","_el$3","_el$4","nextSibling","_$insert","_$createComponent","Show","when","fallback","_tmpl$2","children","isLoading","_tmpl$3","_el$7","_tmpl$4","_el$8","_el$9","_el$0","_el$1","_el$10","_$effect","_p$","_v$","_v$2","e","_$className","t","undefined","_el$11","_tmpl$5","_el$12","_el$13","_el$14","_el$15","_el$16","_el$17","_el$18","_el$19","_el$20","_el$21","_el$22","_el$23","_el$24","_el$25","_el$26","_el$27","_el$28","_el$29","_el$30","_el$31","_el$32","_el$33","_el$34","_el$35","_el$36","_el$37","_el$38","_el$39","_el$40","_el$41","_el$42","_el$43","_el$44","_el$45","_el$46","_el$47","_el$48","_tmpl$6","_el$49","_el$50","_el$51","_el$52","_el$53","_el$54","$$click","setCurrentView","_$delegateEvents"],"mappings":"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"}