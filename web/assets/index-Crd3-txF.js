(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))n(d);new MutationObserver(d=>{for(const _ of d)if(_.type==="childList")for(const h of _.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function r(d){const _={};return d.integrity&&(_.integrity=d.integrity),d.referrerPolicy&&(_.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?_.credentials="include":d.crossOrigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function n(d){if(d.ep)return;d.ep=!0;const _=r(d);fetch(d.href,_)}})();const _a=!1,ba=(e,t)=>e===t,Gi=Symbol("solid-proxy"),ya=typeof Proxy=="function",xa=Symbol("solid-track"),ni={equals:ba};let Kl=Zl;const xr=1,li=2,Yl={owned:null,cleanups:null,context:null,owner:null},Hi={};var vt=null;let Ni=null,wa=null,pt=null,Mt=null,br=null,yi=0;function _s(e,t){const r=pt,n=vt,d=e.length===0,_=t===void 0?n:t,h=d?Yl:{owned:null,cleanups:null,context:_?_.context:null,owner:_},s=d?e:()=>e(()=>zt(()=>ws(h)));vt=h,pt=null;try{return Mr(s,!0)}finally{pt=r,vt=n}}function J(e,t){t=t?Object.assign({},ni,t):ni;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},n=d=>(typeof d=="function"&&(d=d(r.value)),Jl(r,d));return[Xl.bind(r),n]}function Sa(e,t,r){const n=xi(e,t,!0,xr);ls(n)}function ne(e,t,r){const n=xi(e,t,!1,xr);ls(n)}function Dt(e,t,r){Kl=Da;const n=xi(e,t,!1,xr);(!r||!r.render)&&(n.user=!0),br?br.push(n):ls(n)}function Oe(e,t,r){r=r?Object.assign({},ni,r):ni;const n=xi(e,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=r.equals||void 0,ls(n),Xl.bind(n)}function $a(e){return e&&typeof e=="object"&&"then"in e}function Ke(e,t,r){let n,d,_;typeof t=="function"?(n=e,d=t,_={}):(n=!0,d=e,_=t||{});let h=null,s=Hi,i=!1,u="initialValue"in _,f=typeof n=="function"&&Oe(n);const g=new Set,[v,b]=(_.storage||J)(_.initialValue),[S,y]=J(void 0),[l,a]=J(void 0,{equals:!1}),[o,c]=J(u?"ready":"unresolved");function m(C,I,R,D){return h===C&&(h=null,D!==void 0&&(u=!0),(C===s||I===s)&&_.onHydrated&&queueMicrotask(()=>_.onHydrated(D,{value:I})),s=Hi,w(I,R)),I}function w(C,I){Mr(()=>{I===void 0&&b(()=>C),c(I!==void 0?"errored":u?"ready":"unresolved"),y(I);for(const R of g.keys())R.decrement();g.clear()},!1)}function k(){const C=Aa,I=v(),R=S();if(R!==void 0&&!h)throw R;return pt&&pt.user,I}function A(C=!0){if(C!==!1&&i)return;i=!1;const I=f?f():n;if(I==null||I===!1){m(h,zt(v));return}let R;const D=s!==Hi?s:zt(()=>{try{return d(I,{value:v(),refetching:C})}catch(j){R=j}});if(R!==void 0){m(h,void 0,Js(R),I);return}else if(!$a(D))return m(h,D,void 0,I),D;return h=D,"v"in D?(D.s===1?m(h,D.v,void 0,I):m(h,void 0,Js(D.v),I),D):(i=!0,queueMicrotask(()=>i=!1),Mr(()=>{c(u?"refreshing":"pending"),a()},!1),D.then(j=>m(D,j,void 0,I),j=>m(D,void 0,Js(j),I)))}Object.defineProperties(k,{state:{get:()=>o()},error:{get:()=>S()},loading:{get(){const C=o();return C==="pending"||C==="refreshing"}},latest:{get(){if(!u)return k();const C=S();if(C&&!h)throw C;return v()}}});let x=vt;return f?Sa(()=>(x=vt,A(!1))):A(!1),[k,{refetch:C=>Gl(x,()=>A(C)),mutate:b}]}function zt(e){if(pt===null)return e();const t=pt;pt=null;try{return e()}finally{pt=t}}function Ca(e,t,r){const n=Array.isArray(e);let d;return _=>{let h;if(n){h=Array(e.length);for(let i=0;i<e.length;i++)h[i]=e[i]()}else h=e();const s=zt(()=>t(h,d,_));return d=h,s}}function cr(e){Dt(()=>zt(e))}function tr(e){return vt===null||(vt.cleanups===null?vt.cleanups=[e]:vt.cleanups.push(e)),e}function ka(){return vt}function Gl(e,t){const r=vt,n=pt;vt=e,pt=null;try{return Mr(t,!0)}catch(d){dn(d)}finally{vt=r,pt=n}}const[R2,T2]=J(!1);function Ea(e){const t=Oe(e),r=Oe(()=>Xi(t()));return r.toArray=()=>{const n=r();return Array.isArray(n)?n:n!=null?[n]:[]},r}let Aa;function Xl(){if(this.sources&&this.state)if(this.state===xr)ls(this);else{const e=Mt;Mt=null,Mr(()=>ai(this),!1),Mt=e}if(pt){const e=this.observers?this.observers.length:0;pt.sources?(pt.sources.push(this),pt.sourceSlots.push(e)):(pt.sources=[this],pt.sourceSlots=[e]),this.observers?(this.observers.push(pt),this.observerSlots.push(pt.sources.length-1)):(this.observers=[pt],this.observerSlots=[pt.sources.length-1])}return this.value}function Jl(e,t,r){let n=e.value;return(!e.comparator||!e.comparator(n,t))&&(e.value=t,e.observers&&e.observers.length&&Mr(()=>{for(let d=0;d<e.observers.length;d+=1){const _=e.observers[d],h=Ni&&Ni.running;h&&Ni.disposed.has(_),(h?!_.tState:!_.state)&&(_.pure?Mt.push(_):br.push(_),_.observers&&Ql(_)),h||(_.state=xr)}if(Mt.length>1e6)throw Mt=[],new Error},!1)),t}function ls(e){if(!e.fn)return;ws(e);const t=yi;La(e,e.value,t)}function La(e,t,r){let n;const d=vt,_=pt;pt=vt=e;try{n=e.fn(t)}catch(h){return e.pure&&(e.state=xr,e.owned&&e.owned.forEach(ws),e.owned=null),e.updatedAt=r+1,dn(h)}finally{pt=_,vt=d}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?Jl(e,n):e.value=n,e.updatedAt=r)}function xi(e,t,r,n=xr,d){const _={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:vt,context:vt?vt.context:null,pure:r};return vt===null||vt!==Yl&&(vt.owned?vt.owned.push(_):vt.owned=[_]),_}function oi(e){if(e.state===0)return;if(e.state===li)return ai(e);if(e.suspense&&zt(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<yi);)e.state&&t.push(e);for(let r=t.length-1;r>=0;r--)if(e=t[r],e.state===xr)ls(e);else if(e.state===li){const n=Mt;Mt=null,Mr(()=>ai(e,t[0]),!1),Mt=n}}function Mr(e,t){if(Mt)return e();let r=!1;t||(Mt=[]),br?r=!0:br=[],yi++;try{const n=e();return Ma(r),n}catch(n){r||(br=null),Mt=null,dn(n)}}function Ma(e){if(Mt&&(Zl(Mt),Mt=null),e)return;const t=br;br=null,t.length&&Mr(()=>Kl(t),!1)}function Zl(e){for(let t=0;t<e.length;t++)oi(e[t])}function Da(e){let t,r=0;for(t=0;t<e.length;t++){const n=e[t];n.user?e[r++]=n:oi(n)}for(t=0;t<r;t++)oi(e[t])}function ai(e,t){e.state=0;for(let r=0;r<e.sources.length;r+=1){const n=e.sources[r];if(n.sources){const d=n.state;d===xr?n!==t&&(!n.updatedAt||n.updatedAt<yi)&&oi(n):d===li&&ai(n,t)}}}function Ql(e){for(let t=0;t<e.observers.length;t+=1){const r=e.observers[t];r.state||(r.state=li,r.pure?Mt.push(r):br.push(r),r.observers&&Ql(r))}}function ws(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),n=e.sourceSlots.pop(),d=r.observers;if(d&&d.length){const _=d.pop(),h=r.observerSlots.pop();n<d.length&&(_.sourceSlots[h]=n,d[n]=_,r.observerSlots[n]=h)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)ws(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)ws(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function Js(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function dn(e,t=vt){throw Js(e)}function Xi(e){if(typeof e=="function"&&!e.length)return Xi(e());if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++){const n=Xi(e[r]);Array.isArray(n)?t.push.apply(t,n):t.push(n)}return t}return e}const Ra=Symbol("fallback");function On(e){for(let t=0;t<e.length;t++)e[t]()}function Ta(e,t,r={}){let n=[],d=[],_=[],h=0,s=t.length>1?[]:null;return tr(()=>On(_)),()=>{let i=e()||[],u=i.length,f,g;return i[xa],zt(()=>{let b,S,y,l,a,o,c,m,w;if(u===0)h!==0&&(On(_),_=[],n=[],d=[],h=0,s&&(s=[])),r.fallback&&(n=[Ra],d[0]=_s(k=>(_[0]=k,r.fallback())),h=1);else if(h===0){for(d=new Array(u),g=0;g<u;g++)n[g]=i[g],d[g]=_s(v);h=u}else{for(y=new Array(u),l=new Array(u),s&&(a=new Array(u)),o=0,c=Math.min(h,u);o<c&&n[o]===i[o];o++);for(c=h-1,m=u-1;c>=o&&m>=o&&n[c]===i[m];c--,m--)y[m]=d[c],l[m]=_[c],s&&(a[m]=s[c]);for(b=new Map,S=new Array(m+1),g=m;g>=o;g--)w=i[g],f=b.get(w),S[g]=f===void 0?-1:f,b.set(w,g);for(f=o;f<=c;f++)w=n[f],g=b.get(w),g!==void 0&&g!==-1?(y[g]=d[f],l[g]=_[f],s&&(a[g]=s[f]),g=S[g],b.set(w,g)):_[f]();for(g=o;g<u;g++)g in y?(d[g]=y[g],_[g]=l[g],s&&(s[g]=a[g],s[g](g))):d[g]=_s(v);d=d.slice(0,h=u),n=i.slice(0)}return d});function v(b){if(_[g]=b,s){const[S,y]=J(g);return s[g]=y,t(i[g],S)}return t(i[g])}}}function T(e,t){return zt(()=>e(t||{}))}function zs(){return!0}const Hn={get(e,t,r){return t===Gi?r:e.get(t)},has(e,t){return t===Gi?!0:e.has(t)},set:zs,deleteProperty:zs,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:zs,deleteProperty:zs}},ownKeys(e){return e.keys()}};function Pa(e,...t){const r=t.length;if(ya&&Gi in e){const d=r>1?t.flat():t[0],_=t.map(h=>new Proxy({get(s){return h.includes(s)?e[s]:void 0},has(s){return h.includes(s)&&s in e},keys(){return h.filter(s=>s in e)}},Hn));return _.push(new Proxy({get(h){return d.includes(h)?void 0:e[h]},has(h){return d.includes(h)?!1:h in e},keys(){return Object.keys(e).filter(h=>!d.includes(h))}},Hn)),_}const n=[];for(let d=0;d<=r;d++)n[d]={};for(const d of Object.getOwnPropertyNames(e)){let _=r;for(let i=0;i<t.length;i++)if(t[i].includes(d)){_=i;break}const h=Object.getOwnPropertyDescriptor(e,d);!h.get&&!h.set&&h.enumerable&&h.writable&&h.configurable?n[_][d]=h.value:Object.defineProperty(n[_],d,h)}return n}const eo=e=>`Stale read from <${e}>.`;function Ve(e){const t="fallback"in e&&{fallback:()=>e.fallback};return Oe(Ta(()=>e.each,e.children,t||void 0))}function ee(e){const t=e.keyed,r=Oe(()=>e.when,void 0,void 0),n=t?r:Oe(r,void 0,{equals:(d,_)=>!d==!_});return Oe(()=>{const d=n();if(d){const _=e.children;return typeof _=="function"&&_.length>0?zt(()=>_(t?d:()=>{if(!zt(n))throw eo("Show");return r()})):_}return e.fallback},void 0,void 0)}function ci(e){const t=Ea(()=>e.children),r=Oe(()=>{const n=t(),d=Array.isArray(n)?n:[n];let _=()=>{};for(let h=0;h<d.length;h++){const s=h,i=d[h],u=_,f=Oe(()=>u()?void 0:i.when,void 0,void 0),g=i.keyed?f:Oe(f,void 0,{equals:(v,b)=>!v==!b});_=()=>u()||(g()?[s,f,i]:void 0)}return _});return Oe(()=>{const n=r()();if(!n)return e.fallback;const[d,_,h]=n,s=h.children;return typeof s=="function"&&s.length>0?zt(()=>s(h.keyed?_():()=>{if(zt(r)()?.[0]!==d)throw eo("Match");return _()})):s},void 0,void 0)}function Xt(e){return e}const Ia=["allowfullscreen","async","alpha","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","adauctionheaders","browsingtopics","credentialless","defaultchecked","defaultmuted","defaultselected","defer","disablepictureinpicture","disableremoteplayback","preservespitch","shadowrootclonable","shadowrootcustomelementregistry","shadowrootdelegatesfocus","shadowrootserializable","sharedstoragewritable"],Ba=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline","adAuctionHeaders","allowFullscreen","browsingTopics","defaultChecked","defaultMuted","defaultSelected","disablePictureInPicture","disableRemotePlayback","preservesPitch","shadowRootClonable","shadowRootCustomElementRegistry","shadowRootDelegatesFocus","shadowRootSerializable","sharedStorageWritable",...Ia]),Oa=new Set(["innerHTML","textContent","innerText","children"]),Ha=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Na=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1},adauctionheaders:{$:"adAuctionHeaders",IFRAME:1},allowfullscreen:{$:"allowFullscreen",IFRAME:1},browsingtopics:{$:"browsingTopics",IMG:1},defaultchecked:{$:"defaultChecked",INPUT:1},defaultmuted:{$:"defaultMuted",AUDIO:1,VIDEO:1},defaultselected:{$:"defaultSelected",OPTION:1},disablepictureinpicture:{$:"disablePictureInPicture",VIDEO:1},disableremoteplayback:{$:"disableRemotePlayback",AUDIO:1,VIDEO:1},preservespitch:{$:"preservesPitch",AUDIO:1,VIDEO:1},shadowrootclonable:{$:"shadowRootClonable",TEMPLATE:1},shadowrootdelegatesfocus:{$:"shadowRootDelegatesFocus",TEMPLATE:1},shadowrootserializable:{$:"shadowRootSerializable",TEMPLATE:1},sharedstoragewritable:{$:"sharedStorageWritable",IFRAME:1,IMG:1}});function za(e,t){const r=Na[e];return typeof r=="object"?r[t]?r.$:void 0:r}const Fa=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),ja=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),Ua={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},Fe=e=>Oe(()=>e());function Va(e,t,r){let n=r.length,d=t.length,_=n,h=0,s=0,i=t[d-1].nextSibling,u=null;for(;h<d||s<_;){if(t[h]===r[s]){h++,s++;continue}for(;t[d-1]===r[_-1];)d--,_--;if(d===h){const f=_<n?s?r[s-1].nextSibling:r[_-s]:i;for(;s<_;)e.insertBefore(r[s++],f)}else if(_===s)for(;h<d;)(!u||!u.has(t[h]))&&t[h].remove(),h++;else if(t[h]===r[_-1]&&r[s]===t[d-1]){const f=t[--d].nextSibling;e.insertBefore(r[s++],t[h++].nextSibling),e.insertBefore(r[--_],f),t[d]=r[_]}else{if(!u){u=new Map;let g=s;for(;g<_;)u.set(r[g],g++)}const f=u.get(t[h]);if(f!=null)if(s<f&&f<_){let g=h,v=1,b;for(;++g<d&&g<_&&!((b=u.get(t[g]))==null||b!==f+v);)v++;if(v>f-s){const S=t[h];for(;s<f;)e.insertBefore(r[s++],S)}else e.replaceChild(r[s++],t[h++])}else h++;else t[h++].remove()}}}const Nn="_$DX_DELEGATE";function Wa(e,t,r,n={}){let d;return _s(_=>{d=_,t===document?e():p(t,e(),t.firstChild?null:void 0,r)},n.owner),()=>{d(),t.textContent=""}}function O(e,t,r,n){let d;const _=()=>{const s=document.createElement("template");return s.innerHTML=e,s.content.firstChild},h=()=>(d||(d=_())).cloneNode(!0);return h.cloneNode=h,h}function lt(e,t=window.document){const r=t[Nn]||(t[Nn]=new Set);for(let n=0,d=e.length;n<d;n++){const _=e[n];r.has(_)||(r.add(_),t.addEventListener(_,Ja))}}function et(e,t,r){r==null?e.removeAttribute(t):e.setAttribute(t,r)}function qa(e,t,r,n){n==null?e.removeAttributeNS(t,r):e.setAttributeNS(t,r,n)}function Ka(e,t,r){r?e.setAttribute(t,""):e.removeAttribute(t)}function Ue(e,t){t==null?e.removeAttribute("class"):e.className=t}function jr(e,t,r,n){if(n)Array.isArray(r)?(e[`$$${t}`]=r[0],e[`$$${t}Data`]=r[1]):e[`$$${t}`]=r;else if(Array.isArray(r)){const d=r[0];e.addEventListener(t,r[0]=_=>d.call(e,r[1],_))}else e.addEventListener(t,r,typeof r!="function"&&r)}function to(e,t,r={}){const n=Object.keys(t||{}),d=Object.keys(r);let _,h;for(_=0,h=d.length;_<h;_++){const s=d[_];!s||s==="undefined"||t[s]||(zn(e,s,!1),delete r[s])}for(_=0,h=n.length;_<h;_++){const s=n[_],i=!!t[s];!s||s==="undefined"||r[s]===i||!i||(zn(e,s,!0),r[s]=i)}return r}function hn(e,t,r){if(!t)return r?et(e,"style"):t;const n=e.style;if(typeof t=="string")return n.cssText=t;typeof r=="string"&&(n.cssText=r=void 0),r||(r={}),t||(t={});let d,_;for(_ in r)t[_]==null&&n.removeProperty(_),delete r[_];for(_ in t)d=t[_],d!==r[_]&&(n.setProperty(_,d),r[_]=d);return r}function ve(e,t,r){r!=null?e.style.setProperty(t,r):e.style.removeProperty(t)}function Ya(e,t={},r,n){const d={};return ne(()=>d.children=Ss(e,t.children,d.children)),ne(()=>typeof t.ref=="function"&&qt(t.ref,e)),ne(()=>Ga(e,t,r,!0,d,!0)),d}function qt(e,t,r){return zt(()=>e(t,r))}function p(e,t,r,n){if(r!==void 0&&!n&&(n=[]),typeof t!="function")return Ss(e,t,n,r);ne(d=>Ss(e,t(),d,r),n)}function Ga(e,t,r,n,d={},_=!1){t||(t={});for(const h in d)if(!(h in t)){if(h==="children")continue;d[h]=Fn(e,h,null,d[h],r,_,t)}for(const h in t){if(h==="children")continue;const s=t[h];d[h]=Fn(e,h,s,d[h],r,_,t)}}function Xa(e){return e.toLowerCase().replace(/-([a-z])/g,(t,r)=>r.toUpperCase())}function zn(e,t,r){const n=t.trim().split(/\s+/);for(let d=0,_=n.length;d<_;d++)e.classList.toggle(n[d],r)}function Fn(e,t,r,n,d,_,h){let s,i,u,f,g;if(t==="style")return hn(e,r,n);if(t==="classList")return to(e,r,n);if(r===n)return n;if(t==="ref")_||r(e);else if(t.slice(0,3)==="on:"){const v=t.slice(3);n&&e.removeEventListener(v,n,typeof n!="function"&&n),r&&e.addEventListener(v,r,typeof r!="function"&&r)}else if(t.slice(0,10)==="oncapture:"){const v=t.slice(10);n&&e.removeEventListener(v,n,!0),r&&e.addEventListener(v,r,!0)}else if(t.slice(0,2)==="on"){const v=t.slice(2).toLowerCase(),b=Fa.has(v);if(!b&&n){const S=Array.isArray(n)?n[0]:n;e.removeEventListener(v,S)}(b||r)&&(jr(e,v,r,b),b&&lt([v]))}else if(t.slice(0,5)==="attr:")et(e,t.slice(5),r);else if(t.slice(0,5)==="bool:")Ka(e,t.slice(5),r);else if((g=t.slice(0,5)==="prop:")||(u=Oa.has(t))||!d&&((f=za(t,e.tagName))||(i=Ba.has(t)))||(s=e.nodeName.includes("-")||"is"in h))g&&(t=t.slice(5),i=!0),t==="class"||t==="className"?Ue(e,r):s&&!i&&!u?e[Xa(t)]=r:e[f||t]=r;else{const v=d&&t.indexOf(":")>-1&&Ua[t.split(":")[0]];v?qa(e,v,t,r):et(e,Ha[t]||t,r)}return r}function Ja(e){let t=e.target;const r=`$$${e.type}`,n=e.target,d=e.currentTarget,_=i=>Object.defineProperty(e,"target",{configurable:!0,value:i}),h=()=>{const i=t[r];if(i&&!t.disabled){const u=t[`${r}Data`];if(u!==void 0?i.call(t,u,e):i.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&_(t.host),!0},s=()=>{for(;h()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const i=e.composedPath();_(i[0]);for(let u=0;u<i.length-2&&(t=i[u],!!h());u++){if(t._$host){t=t._$host,s();break}if(t.parentNode===d)break}}else s();_(n)}function Ss(e,t,r,n,d){for(;typeof r=="function";)r=r();if(t===r)return r;const _=typeof t,h=n!==void 0;if(e=h&&r[0]&&r[0].parentNode||e,_==="string"||_==="number"){if(_==="number"&&(t=t.toString(),t===r))return r;if(h){let s=r[0];s&&s.nodeType===3?s.data!==t&&(s.data=t):s=document.createTextNode(t),r=Zr(e,r,n,s)}else r!==""&&typeof r=="string"?r=e.firstChild.data=t:r=e.textContent=t}else if(t==null||_==="boolean")r=Zr(e,r,n);else{if(_==="function")return ne(()=>{let s=t();for(;typeof s=="function";)s=s();r=Ss(e,s,r,n)}),()=>r;if(Array.isArray(t)){const s=[],i=r&&Array.isArray(r);if(Ji(s,t,r,d))return ne(()=>r=Ss(e,s,r,n,!0)),()=>r;if(s.length===0){if(r=Zr(e,r,n),h)return r}else i?r.length===0?jn(e,s,n):Va(e,r,s):(r&&Zr(e),jn(e,s));r=s}else if(t.nodeType){if(Array.isArray(r)){if(h)return r=Zr(e,r,n,t);Zr(e,r,null,t)}else r==null||r===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);r=t}}return r}function Ji(e,t,r,n){let d=!1;for(let _=0,h=t.length;_<h;_++){let s=t[_],i=r&&r[e.length],u;if(!(s==null||s===!0||s===!1))if((u=typeof s)=="object"&&s.nodeType)e.push(s);else if(Array.isArray(s))d=Ji(e,s,i)||d;else if(u==="function")if(n){for(;typeof s=="function";)s=s();d=Ji(e,Array.isArray(s)?s:[s],Array.isArray(i)?i:[i])||d}else e.push(s),d=!0;else{const f=String(s);i&&i.nodeType===3&&i.data===f?e.push(i):e.push(document.createTextNode(f))}}return d}function jn(e,t,r=null){for(let n=0,d=t.length;n<d;n++)e.insertBefore(t[n],r)}function Zr(e,t,r,n){if(r===void 0)return e.textContent="";const d=n||document.createTextNode("");if(t.length){let _=!1;for(let h=t.length-1;h>=0;h--){const s=t[h];if(d!==s){const i=s.parentNode===e;!_&&!h?i?e.replaceChild(d,s):e.insertBefore(d,r):i&&s.remove()}else _=!0}}else e.insertBefore(d,r);return[d]}const Za="http://www.w3.org/2000/svg";function ro(e,t=!1,r=void 0){return t?document.createElementNS(Za,e):document.createElement(e,{is:r})}function wi(e){const{useShadow:t}=e,r=document.createTextNode(""),n=()=>e.mount||document.body,d=ka();let _;return Dt(()=>{_||(_=Gl(d,()=>Oe(()=>e.children)));const h=n();if(h instanceof HTMLHeadElement){const[s,i]=J(!1),u=()=>i(!0);_s(f=>p(h,()=>s()?f():_(),null)),tr(u)}else{const s=ro(e.isSVG?"g":"div",e.isSVG),i=t&&s.attachShadow?s.attachShadow({mode:"open"}):s;Object.defineProperty(s,"_$host",{get(){return r.parentNode},configurable:!0}),p(i,_),h.appendChild(s),e.ref&&e.ref(s),tr(()=>h.removeChild(s))}},void 0,{render:!0}),r}function Qa(e,t){const r=Oe(e);return Oe(()=>{const n=r();switch(typeof n){case"function":return zt(()=>n(t));case"string":const d=ja.has(n),_=ro(n,d,zt(()=>t.is));return Ya(_,t,d),_}})}function ec(e){const[,t]=Pa(e,["component"]);return Qa(()=>e.component,t)}const[Gt,Vt]=J("dashboard"),[Bt,tc]=J(!1),[so,io]=J(!1),[P2,I2]=J(null),[B2,O2]=J(!1),[no,rc]=J(""),[sc,Un]=J([]);function ic(e){try{if(localStorage.getItem("kubegraf-sound")!=="true")return;const r=new(window.AudioContext||window.webkitAudioContext),d={success:800,error:300,warning:500,info:600}[e]||600,_=r.createOscillator(),h=r.createGain();_.connect(h),h.connect(r.destination),_.frequency.value=d,_.type="sine",h.gain.setValueAtTime(.3,r.currentTime),h.gain.exponentialRampToValueAtTime(.01,r.currentTime+.3),_.start(r.currentTime),_.stop(r.currentTime+.3)}catch(t){console.debug("Could not play notification sound:",t)}}function qe(e,t="info"){const r={id:crypto.randomUUID(),type:t,message:e,timestamp:new Date};Un(n=>[r,...n].slice(0,10)),ic(t),setTimeout(()=>{Un(n=>n.filter(d=>d.id!==r.id))},5e3)}function nc(){tc(!Bt())}function lc(){io(!so())}var oc=O('<div class="modal-overlay animate-fade-in"><div><div class="flex items-center justify-between p-4 border-b"style=border-color:var(--border-color)><h2 class="text-lg font-semibold"style=color:var(--text-primary)></h2><button class="p-1 rounded-lg transition-colors hover:bg-[var(--bg-tertiary)]"style=color:var(--text-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12"></path></svg></button></div><div>');const st=e=>{Dt(()=>{if(e.isOpen){const r=n=>{const d=n.target;d.tagName==="INPUT"||d.tagName==="TEXTAREA"||d.closest(".xterm")||d.closest("[data-terminal]")||n.key==="Escape"&&e.onClose()};document.addEventListener("keydown",r),document.body.style.overflow="hidden",tr(()=>{document.removeEventListener("keydown",r),document.body.style.overflow=""})}});const t={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-[90vw] w-full"};return T(ee,{get when(){return e.isOpen},get children(){return T(wi,{get children(){var r=oc(),n=r.firstChild,d=n.firstChild,_=d.firstChild,h=_.nextSibling,s=d.nextSibling;return jr(r,"click",e.onClose,!0),n.$$click=i=>i.stopPropagation(),p(_,()=>e.title),jr(h,"click",e.onClose,!0),p(s,()=>e.children),ne(i=>{var u=`modal-content ${t[e.size||"lg"]} animate-slide-up`,f=`p-4 overflow-auto ${e.size==="full"?"max-h-[85vh]":"max-h-[70vh]"}`;return u!==i.e&&Ue(n,i.e=u),f!==i.t&&Ue(s,i.t=f),i},{e:void 0,t:void 0}),r}})}})};lt(["click"]);var lo={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(self,()=>(()=>{var r={4567:function(h,s,i){var u=this&&this.__decorate||function(c,m,w,k){var A,x=arguments.length,C=x<3?m:k===null?k=Object.getOwnPropertyDescriptor(m,w):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(c,m,w,k);else for(var I=c.length-1;I>=0;I--)(A=c[I])&&(C=(x<3?A(C):x>3?A(m,w,C):A(m,w))||C);return x>3&&C&&Object.defineProperty(m,w,C),C},f=this&&this.__param||function(c,m){return function(w,k){m(w,k,c)}};Object.defineProperty(s,"__esModule",{value:!0}),s.AccessibilityManager=void 0;const g=i(9042),v=i(6114),b=i(9924),S=i(844),y=i(5596),l=i(4725),a=i(3656);let o=s.AccessibilityManager=class extends S.Disposable{constructor(c,m){super(),this._terminal=c,this._renderService=m,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let w=0;w<this._terminal.rows;w++)this._rowElements[w]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[w]);if(this._topBoundaryFocusListener=w=>this._handleBoundaryFocus(w,0),this._bottomBoundaryFocusListener=w=>this._handleBoundaryFocus(w,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new b.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(w=>this._handleResize(w.rows))),this.register(this._terminal.onRender(w=>this._refreshRows(w.start,w.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(w=>this._handleChar(w))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(w=>this._handleTab(w))),this.register(this._terminal.onKey(w=>this._handleKey(w.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new y.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,a.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,S.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(c){for(let m=0;m<c;m++)this._handleChar(" ")}_handleChar(c){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==c&&(this._charsToAnnounce+=c):this._charsToAnnounce+=c,c===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=g.tooMuchOutput)),v.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,v.isMac&&this._liveRegion.remove()}_handleKey(c){this._clearLiveRegion(),/\p{Control}/u.test(c)||this._charsToConsume.push(c)}_refreshRows(c,m){this._liveRegionDebouncer.refresh(c,m,this._terminal.rows)}_renderRows(c,m){const w=this._terminal.buffer,k=w.lines.length.toString();for(let A=c;A<=m;A++){const x=w.translateBufferLineToString(w.ydisp+A,!0),C=(w.ydisp+A+1).toString(),I=this._rowElements[A];I&&(x.length===0?I.innerText="Â ":I.textContent=x,I.setAttribute("aria-posinset",C),I.setAttribute("aria-setsize",k))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(c,m){const w=c.target,k=this._rowElements[m===0?1:this._rowElements.length-2];if(w.getAttribute("aria-posinset")===(m===0?"1":`${this._terminal.buffer.lines.length}`)||c.relatedTarget!==k)return;let A,x;if(m===0?(A=w,x=this._rowElements.pop(),this._rowContainer.removeChild(x)):(A=this._rowElements.shift(),x=w,this._rowContainer.removeChild(A)),A.removeEventListener("focus",this._topBoundaryFocusListener),x.removeEventListener("focus",this._bottomBoundaryFocusListener),m===0){const C=this._createAccessibilityTreeNode();this._rowElements.unshift(C),this._rowContainer.insertAdjacentElement("afterbegin",C)}else{const C=this._createAccessibilityTreeNode();this._rowElements.push(C),this._rowContainer.appendChild(C)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(m===0?-1:1),this._rowElements[m===0?1:this._rowElements.length-2].focus(),c.preventDefault(),c.stopImmediatePropagation()}_handleResize(c){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let m=this._rowContainer.children.length;m<this._terminal.rows;m++)this._rowElements[m]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[m]);for(;this._rowElements.length>c;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const c=document.createElement("div");return c.setAttribute("role","listitem"),c.tabIndex=-1,this._refreshRowDimensions(c),c}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let c=0;c<this._terminal.rows;c++)this._refreshRowDimensions(this._rowElements[c])}}_refreshRowDimensions(c){c.style.height=`${this._renderService.dimensions.css.cell.height}px`}};s.AccessibilityManager=o=u([f(1,l.IRenderService)],o)},3614:(h,s)=>{function i(v){return v.replace(/\r?\n/g,"\r")}function u(v,b){return b?"\x1B[200~"+v+"\x1B[201~":v}function f(v,b,S,y){v=u(v=i(v),S.decPrivateModes.bracketedPasteMode&&y.rawOptions.ignoreBracketedPasteMode!==!0),S.triggerDataEvent(v,!0),b.value=""}function g(v,b,S){const y=S.getBoundingClientRect(),l=v.clientX-y.left-10,a=v.clientY-y.top-10;b.style.width="20px",b.style.height="20px",b.style.left=`${l}px`,b.style.top=`${a}px`,b.style.zIndex="1000",b.focus()}Object.defineProperty(s,"__esModule",{value:!0}),s.rightClickHandler=s.moveTextAreaUnderMouseCursor=s.paste=s.handlePasteEvent=s.copyHandler=s.bracketTextForPaste=s.prepareTextForTerminal=void 0,s.prepareTextForTerminal=i,s.bracketTextForPaste=u,s.copyHandler=function(v,b){v.clipboardData&&v.clipboardData.setData("text/plain",b.selectionText),v.preventDefault()},s.handlePasteEvent=function(v,b,S,y){v.stopPropagation(),v.clipboardData&&f(v.clipboardData.getData("text/plain"),b,S,y)},s.paste=f,s.moveTextAreaUnderMouseCursor=g,s.rightClickHandler=function(v,b,S,y,l){g(v,b,S),l&&y.rightClickSelect(v),b.value=y.selectionText,b.select()}},7239:(h,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorContrastCache=void 0;const u=i(1505);s.ColorContrastCache=class{constructor(){this._color=new u.TwoKeyMap,this._css=new u.TwoKeyMap}setCss(f,g,v){this._css.set(f,g,v)}getCss(f,g){return this._css.get(f,g)}setColor(f,g,v){this._color.set(f,g,v)}getColor(f,g){return this._color.get(f,g)}clear(){this._color.clear(),this._css.clear()}}},3656:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(i,u,f,g){i.addEventListener(u,f,g);let v=!1;return{dispose:()=>{v||(v=!0,i.removeEventListener(u,f,g))}}}},6465:function(h,s,i){var u=this&&this.__decorate||function(l,a,o,c){var m,w=arguments.length,k=w<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(l,a,o,c);else for(var A=l.length-1;A>=0;A--)(m=l[A])&&(k=(w<3?m(k):w>3?m(a,o,k):m(a,o))||k);return w>3&&k&&Object.defineProperty(a,o,k),k},f=this&&this.__param||function(l,a){return function(o,c){a(o,c,l)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Linkifier2=void 0;const g=i(3656),v=i(8460),b=i(844),S=i(2585);let y=s.Linkifier2=class extends b.Disposable{get currentLink(){return this._currentLink}constructor(l){super(),this._bufferService=l,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new v.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new v.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,b.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,b.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(l){return this._linkProviders.push(l),{dispose:()=>{const a=this._linkProviders.indexOf(l);a!==-1&&this._linkProviders.splice(a,1)}}}attachToDom(l,a,o){this._element=l,this._mouseService=a,this._renderService=o,this.register((0,g.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,g.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,g.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,g.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(l){if(this._lastMouseEvent=l,!this._element||!this._mouseService)return;const a=this._positionFromMouseEvent(l,this._element,this._mouseService);if(!a)return;this._isMouseOut=!1;const o=l.composedPath();for(let c=0;c<o.length;c++){const m=o[c];if(m.classList.contains("xterm"))break;if(m.classList.contains("xterm-hover"))return}this._lastBufferCell&&a.x===this._lastBufferCell.x&&a.y===this._lastBufferCell.y||(this._handleHover(a),this._lastBufferCell=a)}_handleHover(l){if(this._activeLine!==l.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(l,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,l)||(this._clearCurrentLink(),this._askForLink(l,!0))}_askForLink(l,a){var o,c;this._activeProviderReplies&&a||((o=this._activeProviderReplies)===null||o===void 0||o.forEach(w=>{w?.forEach(k=>{k.link.dispose&&k.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=l.y);let m=!1;for(const[w,k]of this._linkProviders.entries())a?!((c=this._activeProviderReplies)===null||c===void 0)&&c.get(w)&&(m=this._checkLinkProviderResult(w,l,m)):k.provideLinks(l.y,A=>{var x,C;if(this._isMouseOut)return;const I=A?.map(R=>({link:R}));(x=this._activeProviderReplies)===null||x===void 0||x.set(w,I),m=this._checkLinkProviderResult(w,l,m),((C=this._activeProviderReplies)===null||C===void 0?void 0:C.size)===this._linkProviders.length&&this._removeIntersectingLinks(l.y,this._activeProviderReplies)})}_removeIntersectingLinks(l,a){const o=new Set;for(let c=0;c<a.size;c++){const m=a.get(c);if(m)for(let w=0;w<m.length;w++){const k=m[w],A=k.link.range.start.y<l?0:k.link.range.start.x,x=k.link.range.end.y>l?this._bufferService.cols:k.link.range.end.x;for(let C=A;C<=x;C++){if(o.has(C)){m.splice(w--,1);break}o.add(C)}}}}_checkLinkProviderResult(l,a,o){var c;if(!this._activeProviderReplies)return o;const m=this._activeProviderReplies.get(l);let w=!1;for(let k=0;k<l;k++)this._activeProviderReplies.has(k)&&!this._activeProviderReplies.get(k)||(w=!0);if(!w&&m){const k=m.find(A=>this._linkAtPosition(A.link,a));k&&(o=!0,this._handleNewLink(k))}if(this._activeProviderReplies.size===this._linkProviders.length&&!o)for(let k=0;k<this._activeProviderReplies.size;k++){const A=(c=this._activeProviderReplies.get(k))===null||c===void 0?void 0:c.find(x=>this._linkAtPosition(x.link,a));if(A){o=!0,this._handleNewLink(A);break}}return o}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(l){if(!this._element||!this._mouseService||!this._currentLink)return;const a=this._positionFromMouseEvent(l,this._element,this._mouseService);a&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,a)&&this._currentLink.link.activate(l,this._currentLink.link.text)}_clearCurrentLink(l,a){this._element&&this._currentLink&&this._lastMouseEvent&&(!l||!a||this._currentLink.link.range.start.y>=l&&this._currentLink.link.range.end.y<=a)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,b.disposeArray)(this._linkCacheDisposables))}_handleNewLink(l){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const a=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);a&&this._linkAtPosition(l.link,a)&&(this._currentLink=l,this._currentLink.state={decorations:{underline:l.link.decorations===void 0||l.link.decorations.underline,pointerCursor:l.link.decorations===void 0||l.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,l.link,this._lastMouseEvent),l.link.decorations={},Object.defineProperties(l.link.decorations,{pointerCursor:{get:()=>{var o,c;return(c=(o=this._currentLink)===null||o===void 0?void 0:o.state)===null||c===void 0?void 0:c.decorations.pointerCursor},set:o=>{var c,m;!((c=this._currentLink)===null||c===void 0)&&c.state&&this._currentLink.state.decorations.pointerCursor!==o&&(this._currentLink.state.decorations.pointerCursor=o,this._currentLink.state.isHovered&&((m=this._element)===null||m===void 0||m.classList.toggle("xterm-cursor-pointer",o)))}},underline:{get:()=>{var o,c;return(c=(o=this._currentLink)===null||o===void 0?void 0:o.state)===null||c===void 0?void 0:c.decorations.underline},set:o=>{var c,m,w;!((c=this._currentLink)===null||c===void 0)&&c.state&&((w=(m=this._currentLink)===null||m===void 0?void 0:m.state)===null||w===void 0?void 0:w.decorations.underline)!==o&&(this._currentLink.state.decorations.underline=o,this._currentLink.state.isHovered&&this._fireUnderlineEvent(l.link,o))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(o=>{if(!this._currentLink)return;const c=o.start===0?0:o.start+1+this._bufferService.buffer.ydisp,m=this._bufferService.buffer.ydisp+1+o.end;if(this._currentLink.link.range.start.y>=c&&this._currentLink.link.range.end.y<=m&&(this._clearCurrentLink(c,m),this._lastMouseEvent&&this._element)){const w=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);w&&this._askForLink(w,!1)}})))}_linkHover(l,a,o){var c;!((c=this._currentLink)===null||c===void 0)&&c.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(a,!0),this._currentLink.state.decorations.pointerCursor&&l.classList.add("xterm-cursor-pointer")),a.hover&&a.hover(o,a.text)}_fireUnderlineEvent(l,a){const o=l.range,c=this._bufferService.buffer.ydisp,m=this._createLinkUnderlineEvent(o.start.x-1,o.start.y-c-1,o.end.x,o.end.y-c-1,void 0);(a?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(m)}_linkLeave(l,a,o){var c;!((c=this._currentLink)===null||c===void 0)&&c.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(a,!1),this._currentLink.state.decorations.pointerCursor&&l.classList.remove("xterm-cursor-pointer")),a.leave&&a.leave(o,a.text)}_linkAtPosition(l,a){const o=l.range.start.y*this._bufferService.cols+l.range.start.x,c=l.range.end.y*this._bufferService.cols+l.range.end.x,m=a.y*this._bufferService.cols+a.x;return o<=m&&m<=c}_positionFromMouseEvent(l,a,o){const c=o.getCoords(l,a,this._bufferService.cols,this._bufferService.rows);if(c)return{x:c[0],y:c[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(l,a,o,c,m){return{x1:l,y1:a,x2:o,y2:c,cols:this._bufferService.cols,fg:m}}};s.Linkifier2=y=u([f(0,S.IBufferService)],y)},9042:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tooMuchOutput=s.promptLabel=void 0,s.promptLabel="Terminal input",s.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(h,s,i){var u=this&&this.__decorate||function(y,l,a,o){var c,m=arguments.length,w=m<3?l:o===null?o=Object.getOwnPropertyDescriptor(l,a):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(y,l,a,o);else for(var k=y.length-1;k>=0;k--)(c=y[k])&&(w=(m<3?c(w):m>3?c(l,a,w):c(l,a))||w);return m>3&&w&&Object.defineProperty(l,a,w),w},f=this&&this.__param||function(y,l){return function(a,o){l(a,o,y)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkProvider=void 0;const g=i(511),v=i(2585);let b=s.OscLinkProvider=class{constructor(y,l,a){this._bufferService=y,this._optionsService=l,this._oscLinkService=a}provideLinks(y,l){var a;const o=this._bufferService.buffer.lines.get(y-1);if(!o)return void l(void 0);const c=[],m=this._optionsService.rawOptions.linkHandler,w=new g.CellData,k=o.getTrimmedLength();let A=-1,x=-1,C=!1;for(let I=0;I<k;I++)if(x!==-1||o.hasContent(I)){if(o.loadCell(I,w),w.hasExtendedAttrs()&&w.extended.urlId){if(x===-1){x=I,A=w.extended.urlId;continue}C=w.extended.urlId!==A}else x!==-1&&(C=!0);if(C||x!==-1&&I===k-1){const R=(a=this._oscLinkService.getLinkData(A))===null||a===void 0?void 0:a.uri;if(R){const D={start:{x:x+1,y},end:{x:I+(C||I!==k-1?0:1),y}};let j=!1;if(!m?.allowNonHttpProtocols)try{const M=new URL(R);["http:","https:"].includes(M.protocol)||(j=!0)}catch{j=!0}j||c.push({text:R,range:D,activate:(M,P)=>m?m.activate(M,P,D):S(0,P),hover:(M,P)=>{var L;return(L=m?.hover)===null||L===void 0?void 0:L.call(m,M,P,D)},leave:(M,P)=>{var L;return(L=m?.leave)===null||L===void 0?void 0:L.call(m,M,P,D)}})}C=!1,w.hasExtendedAttrs()&&w.extended.urlId?(x=I,A=w.extended.urlId):(x=-1,A=-1)}}l(c)}};function S(y,l){if(confirm(`Do you want to navigate to ${l}?

WARNING: This link could potentially be dangerous`)){const a=window.open();if(a){try{a.opener=null}catch{}a.location.href=l}else console.warn("Opening link blocked as opener could not be cleared")}}s.OscLinkProvider=b=u([f(0,v.IBufferService),f(1,v.IOptionsService),f(2,v.IOscLinkService)],b)},6193:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderDebouncer=void 0,s.RenderDebouncer=class{constructor(i,u){this._parentWindow=i,this._renderCallback=u,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(i){return this._refreshCallbacks.push(i),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(i,u,f){this._rowCount=f,i=i!==void 0?i:0,u=u!==void 0?u:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,i):i,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,u):u,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const i=Math.max(this._rowStart,0),u=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(i,u),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const i of this._refreshCallbacks)i(0);this._refreshCallbacks=[]}}},5596:(h,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ScreenDprMonitor=void 0;const u=i(844);class f extends u.Disposable{constructor(v){super(),this._parentWindow=v,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,u.toDisposable)(()=>{this.clearListener()}))}setListener(v){this._listener&&this.clearListener(),this._listener=v,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var v;this._outerListener&&((v=this._resolutionMediaMatchList)===null||v===void 0||v.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}s.ScreenDprMonitor=f},3236:(h,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Terminal=void 0;const u=i(3614),f=i(3656),g=i(6465),v=i(9042),b=i(3730),S=i(1680),y=i(3107),l=i(5744),a=i(2950),o=i(1296),c=i(428),m=i(4269),w=i(5114),k=i(8934),A=i(3230),x=i(9312),C=i(4725),I=i(6731),R=i(8055),D=i(8969),j=i(8460),M=i(844),P=i(6114),L=i(8437),F=i(2584),$=i(7399),B=i(5941),H=i(9074),z=i(2585),X=i(5435),V=i(4567),Y=typeof window<"u"?window.document:null;class K extends D.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(E={}){super(E),this.browser=P,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new M.MutableDisposable),this._onCursorMove=this.register(new j.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new j.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new j.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new j.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new j.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new j.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new j.EventEmitter),this._onBlur=this.register(new j.EventEmitter),this._onA11yCharEmitter=this.register(new j.EventEmitter),this._onA11yTabEmitter=this.register(new j.EventEmitter),this._onWillOpen=this.register(new j.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(g.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(b.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(H.DecorationService),this._instantiationService.setService(z.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((N,U)=>this.refresh(N,U))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(N=>this._reportWindowsOptions(N))),this.register(this._inputHandler.onColor(N=>this._handleColorEvent(N))),this.register((0,j.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,j.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,j.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,j.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(N=>this._afterResize(N.cols,N.rows))),this.register((0,M.toDisposable)(()=>{var N,U;this._customKeyEventHandler=void 0,(U=(N=this.element)===null||N===void 0?void 0:N.parentNode)===null||U===void 0||U.removeChild(this.element)}))}_handleColorEvent(E){if(this._themeService)for(const N of E){let U,W="";switch(N.index){case 256:U="foreground",W="10";break;case 257:U="background",W="11";break;case 258:U="cursor",W="12";break;default:U="ansi",W="4;"+N.index}switch(N.type){case 0:const q=R.color.toColorRGB(U==="ansi"?this._themeService.colors.ansi[N.index]:this._themeService.colors[U]);this.coreService.triggerDataEvent(`${F.C0.ESC}]${W};${(0,B.toRgbString)(q)}${F.C1_ESCAPED.ST}`);break;case 1:if(U==="ansi")this._themeService.modifyColors(G=>G.ansi[N.index]=R.rgba.toColor(...N.color));else{const G=U;this._themeService.modifyColors(Q=>Q[G]=R.rgba.toColor(...N.color))}break;case 2:this._themeService.restoreColor(N.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(E){E?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(V.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(E){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(F.C0.ESC+"[I"),this.updateCursorStyle(E),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var E;return(E=this.textarea)===null||E===void 0?void 0:E.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(F.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const E=this.buffer.ybase+this.buffer.y,N=this.buffer.lines.get(E);if(!N)return;const U=Math.min(this.buffer.x,this.cols-1),W=this._renderService.dimensions.css.cell.height,q=N.getWidth(U),G=this._renderService.dimensions.css.cell.width*q,Q=this.buffer.y*this._renderService.dimensions.css.cell.height,oe=U*this._renderService.dimensions.css.cell.width;this.textarea.style.left=oe+"px",this.textarea.style.top=Q+"px",this.textarea.style.width=G+"px",this.textarea.style.height=W+"px",this.textarea.style.lineHeight=W+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,f.addDisposableDomListener)(this.element,"copy",N=>{this.hasSelection()&&(0,u.copyHandler)(N,this._selectionService)}));const E=N=>(0,u.handlePasteEvent)(N,this.textarea,this.coreService,this.optionsService);this.register((0,f.addDisposableDomListener)(this.textarea,"paste",E)),this.register((0,f.addDisposableDomListener)(this.element,"paste",E)),P.isFirefox?this.register((0,f.addDisposableDomListener)(this.element,"mousedown",N=>{N.button===2&&(0,u.rightClickHandler)(N,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,f.addDisposableDomListener)(this.element,"contextmenu",N=>{(0,u.rightClickHandler)(N,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),P.isLinux&&this.register((0,f.addDisposableDomListener)(this.element,"auxclick",N=>{N.button===1&&(0,u.moveTextAreaUnderMouseCursor)(N,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,f.addDisposableDomListener)(this.textarea,"keyup",E=>this._keyUp(E),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"keydown",E=>this._keyDown(E),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"keypress",E=>this._keyPress(E),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionupdate",E=>this._compositionHelper.compositionupdate(E))),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,f.addDisposableDomListener)(this.textarea,"input",E=>this._inputEvent(E),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(E){var N;if(!E)throw new Error("Terminal requires a parent element.");E.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=E.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),E.appendChild(this.element);const U=Y.createDocumentFragment();this._viewportElement=Y.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),U.appendChild(this._viewportElement),this._viewportScrollArea=Y.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=Y.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=Y.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),U.appendChild(this.screenElement),this.textarea=Y.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",v.promptLabel),P.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(w.CoreBrowserService,this.textarea,(N=this._document.defaultView)!==null&&N!==void 0?N:window),this._instantiationService.setService(C.ICoreBrowserService,this._coreBrowserService),this.register((0,f.addDisposableDomListener)(this.textarea,"focus",W=>this._handleTextAreaFocus(W))),this.register((0,f.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(c.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(C.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(I.ThemeService),this._instantiationService.setService(C.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(m.CharacterJoinerService),this._instantiationService.setService(C.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(A.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(C.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(W=>this._onRender.fire(W))),this.onResize(W=>this._renderService.resize(W.cols,W.rows)),this._compositionView=Y.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(a.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(U);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(k.MouseService),this._instantiationService.setService(C.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(S.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(W=>this.scrollLines(W.amount,W.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(x.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(C.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(W=>this.scrollLines(W.amount,W.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(W=>this._renderService.handleSelectionChanged(W.start,W.end,W.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(W=>{this.textarea.value=W,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(W=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,f.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(y.BufferDecorationRenderer,this.screenElement)),this.register((0,f.addDisposableDomListener)(this.element,"mousedown",W=>this._selectionService.handleMouseDown(W))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(V.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",W=>this._handleScreenReaderModeOptionChange(W))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(l.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",W=>{!this._overviewRulerRenderer&&W&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(l.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(o.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const E=this,N=this.element;function U(G){const Q=E._mouseService.getMouseReportCoords(G,E.screenElement);if(!Q)return!1;let oe,ge;switch(G.overrideType||G.type){case"mousemove":ge=32,G.buttons===void 0?(oe=3,G.button!==void 0&&(oe=G.button<3?G.button:3)):oe=1&G.buttons?0:4&G.buttons?1:2&G.buttons?2:3;break;case"mouseup":ge=0,oe=G.button<3?G.button:3;break;case"mousedown":ge=1,oe=G.button<3?G.button:3;break;case"wheel":if(E.viewport.getLinesScrolled(G)===0)return!1;ge=G.deltaY<0?0:1,oe=4;break;default:return!1}return!(ge===void 0||oe===void 0||oe>4)&&E.coreMouseService.triggerMouseEvent({col:Q.col,row:Q.row,x:Q.x,y:Q.y,button:oe,action:ge,ctrl:G.ctrlKey,alt:G.altKey,shift:G.shiftKey})}const W={mouseup:null,wheel:null,mousedrag:null,mousemove:null},q={mouseup:G=>(U(G),G.buttons||(this._document.removeEventListener("mouseup",W.mouseup),W.mousedrag&&this._document.removeEventListener("mousemove",W.mousedrag)),this.cancel(G)),wheel:G=>(U(G),this.cancel(G,!0)),mousedrag:G=>{G.buttons&&U(G)},mousemove:G=>{G.buttons||U(G)}};this.register(this.coreMouseService.onProtocolChange(G=>{G?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(G)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&G?W.mousemove||(N.addEventListener("mousemove",q.mousemove),W.mousemove=q.mousemove):(N.removeEventListener("mousemove",W.mousemove),W.mousemove=null),16&G?W.wheel||(N.addEventListener("wheel",q.wheel,{passive:!1}),W.wheel=q.wheel):(N.removeEventListener("wheel",W.wheel),W.wheel=null),2&G?W.mouseup||(N.addEventListener("mouseup",q.mouseup),W.mouseup=q.mouseup):(this._document.removeEventListener("mouseup",W.mouseup),N.removeEventListener("mouseup",W.mouseup),W.mouseup=null),4&G?W.mousedrag||(W.mousedrag=q.mousedrag):(this._document.removeEventListener("mousemove",W.mousedrag),W.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,f.addDisposableDomListener)(N,"mousedown",G=>{if(G.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(G))return U(G),W.mouseup&&this._document.addEventListener("mouseup",W.mouseup),W.mousedrag&&this._document.addEventListener("mousemove",W.mousedrag),this.cancel(G)})),this.register((0,f.addDisposableDomListener)(N,"wheel",G=>{if(!W.wheel){if(!this.buffer.hasScrollback){const Q=this.viewport.getLinesScrolled(G);if(Q===0)return;const oe=F.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(G.deltaY<0?"A":"B");let ge="";for(let Ce=0;Ce<Math.abs(Q);Ce++)ge+=oe;return this.coreService.triggerDataEvent(ge,!0),this.cancel(G,!0)}return this.viewport.handleWheel(G)?this.cancel(G):void 0}},{passive:!1})),this.register((0,f.addDisposableDomListener)(N,"touchstart",G=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(G),this.cancel(G)},{passive:!0})),this.register((0,f.addDisposableDomListener)(N,"touchmove",G=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(G)?void 0:this.cancel(G)},{passive:!1}))}refresh(E,N){var U;(U=this._renderService)===null||U===void 0||U.refreshRows(E,N)}updateCursorStyle(E){var N;!((N=this._selectionService)===null||N===void 0)&&N.shouldColumnSelect(E)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(E,N,U=0){var W;U===1?(super.scrollLines(E,N,U),this.refresh(0,this.rows-1)):(W=this.viewport)===null||W===void 0||W.scrollLines(E)}paste(E){(0,u.paste)(E,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(E){this._customKeyEventHandler=E}registerLinkProvider(E){return this.linkifier2.registerLinkProvider(E)}registerCharacterJoiner(E){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const N=this._characterJoinerService.register(E);return this.refresh(0,this.rows-1),N}deregisterCharacterJoiner(E){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(E)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(E){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+E)}registerDecoration(E){return this._decorationService.registerDecoration(E)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(E,N,U){this._selectionService.setSelection(E,N,U)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var E;(E=this._selectionService)===null||E===void 0||E.clearSelection()}selectAll(){var E;(E=this._selectionService)===null||E===void 0||E.selectAll()}selectLines(E,N){var U;(U=this._selectionService)===null||U===void 0||U.selectLines(E,N)}_keyDown(E){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(E)===!1)return!1;const N=this.browser.isMac&&this.options.macOptionIsMeta&&E.altKey;if(!N&&!this._compositionHelper.keydown(E))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;N||E.key!=="Dead"&&E.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const U=(0,$.evaluateKeyboardEvent)(E,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(E),U.type===3||U.type===2){const W=this.rows-1;return this.scrollLines(U.type===2?-W:W),this.cancel(E,!0)}return U.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,E)||(U.cancel&&this.cancel(E,!0),!U.key||!!(E.key&&!E.ctrlKey&&!E.altKey&&!E.metaKey&&E.key.length===1&&E.key.charCodeAt(0)>=65&&E.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(U.key!==F.C0.ETX&&U.key!==F.C0.CR||(this.textarea.value=""),this._onKey.fire({key:U.key,domEvent:E}),this._showCursor(),this.coreService.triggerDataEvent(U.key,!0),!this.optionsService.rawOptions.screenReaderMode||E.altKey||E.ctrlKey?this.cancel(E,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(E,N){const U=E.isMac&&!this.options.macOptionIsMeta&&N.altKey&&!N.ctrlKey&&!N.metaKey||E.isWindows&&N.altKey&&N.ctrlKey&&!N.metaKey||E.isWindows&&N.getModifierState("AltGraph");return N.type==="keypress"?U:U&&(!N.keyCode||N.keyCode>47)}_keyUp(E){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(E)===!1||(function(N){return N.keyCode===16||N.keyCode===17||N.keyCode===18}(E)||this.focus(),this.updateCursorStyle(E),this._keyPressHandled=!1)}_keyPress(E){let N;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(E)===!1)return!1;if(this.cancel(E),E.charCode)N=E.charCode;else if(E.which===null||E.which===void 0)N=E.keyCode;else{if(E.which===0||E.charCode===0)return!1;N=E.which}return!(!N||(E.altKey||E.ctrlKey||E.metaKey)&&!this._isThirdLevelShift(this.browser,E)||(N=String.fromCharCode(N),this._onKey.fire({key:N,domEvent:E}),this._showCursor(),this.coreService.triggerDataEvent(N,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(E){if(E.data&&E.inputType==="insertText"&&(!E.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const N=E.data;return this.coreService.triggerDataEvent(N,!0),this.cancel(E),!0}return!1}resize(E,N){E!==this.cols||N!==this.rows?super.resize(E,N):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(E,N){var U,W;(U=this._charSizeService)===null||U===void 0||U.measure(),(W=this.viewport)===null||W===void 0||W.syncScrollArea(!0)}clear(){var E;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let N=1;N<this.rows;N++)this.buffer.lines.push(this.buffer.getBlankLine(L.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(E=this.viewport)===null||E===void 0||E.reset(),this.refresh(0,this.rows-1)}}reset(){var E,N;this.options.rows=this.rows,this.options.cols=this.cols;const U=this._customKeyEventHandler;this._setup(),super.reset(),(E=this._selectionService)===null||E===void 0||E.reset(),this._decorationService.reset(),(N=this.viewport)===null||N===void 0||N.reset(),this._customKeyEventHandler=U,this.refresh(0,this.rows-1)}clearTextureAtlas(){var E;(E=this._renderService)===null||E===void 0||E.clearTextureAtlas()}_reportFocus(){var E;!((E=this.element)===null||E===void 0)&&E.classList.contains("focus")?this.coreService.triggerDataEvent(F.C0.ESC+"[I"):this.coreService.triggerDataEvent(F.C0.ESC+"[O")}_reportWindowsOptions(E){if(this._renderService)switch(E){case X.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const N=this._renderService.dimensions.css.canvas.width.toFixed(0),U=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${F.C0.ESC}[4;${U};${N}t`);break;case X.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const W=this._renderService.dimensions.css.cell.width.toFixed(0),q=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${F.C0.ESC}[6;${q};${W}t`)}}cancel(E,N){if(this.options.cancelEvents||N)return E.preventDefault(),E.stopPropagation(),!1}}s.Terminal=K},9924:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TimeBasedDebouncer=void 0,s.TimeBasedDebouncer=class{constructor(i,u=1e3){this._renderCallback=i,this._debounceThresholdMS=u,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(i,u,f){this._rowCount=f,i=i!==void 0?i:0,u=u!==void 0?u:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,i):i,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,u):u;const g=Date.now();if(g-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=g,this._innerRefresh();else if(!this._additionalRefreshRequested){const v=g-this._lastRefreshMs,b=this._debounceThresholdMS-v;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},b)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const i=Math.max(this._rowStart,0),u=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(i,u)}}},1680:function(h,s,i){var u=this&&this.__decorate||function(a,o,c,m){var w,k=arguments.length,A=k<3?o:m===null?m=Object.getOwnPropertyDescriptor(o,c):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(a,o,c,m);else for(var x=a.length-1;x>=0;x--)(w=a[x])&&(A=(k<3?w(A):k>3?w(o,c,A):w(o,c))||A);return k>3&&A&&Object.defineProperty(o,c,A),A},f=this&&this.__param||function(a,o){return function(c,m){o(c,m,a)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Viewport=void 0;const g=i(3656),v=i(4725),b=i(8460),S=i(844),y=i(2585);let l=s.Viewport=class extends S.Disposable{constructor(a,o,c,m,w,k,A,x){super(),this._viewportElement=a,this._scrollArea=o,this._bufferService=c,this._optionsService=m,this._charSizeService=w,this._renderService=k,this._coreBrowserService=A,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new b.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,g.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(C=>this._activeBuffer=C.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(C=>this._renderDimensions=C)),this._handleThemeChange(x.colors),this.register(x.onChangeColors(C=>this._handleThemeChange(C))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(a){this._viewportElement.style.backgroundColor=a.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(a){if(a)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const o=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==o&&(this._lastRecordedBufferHeight=o,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const a=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==a&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=a),this._refreshAnimationFrame=null}syncScrollArea(a=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(a);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(a)}_handleScroll(a){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const o=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:o,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const a=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(a*(this._smoothScrollState.target-this._smoothScrollState.origin)),a<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(a,o){const c=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(o<0&&this._viewportElement.scrollTop!==0||o>0&&c<this._lastRecordedBufferHeight)||(a.cancelable&&a.preventDefault(),!1)}handleWheel(a){const o=this._getPixelsScrolled(a);return o!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+o:this._smoothScrollState.target+=o,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=o,this._bubbleScroll(a,o))}scrollLines(a){if(a!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const o=a*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+o,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:a,suppressScrollEvent:!1})}_getPixelsScrolled(a){if(a.deltaY===0||a.shiftKey)return 0;let o=this._applyScrollModifier(a.deltaY,a);return a.deltaMode===WheelEvent.DOM_DELTA_LINE?o*=this._currentRowHeight:a.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(o*=this._currentRowHeight*this._bufferService.rows),o}getBufferElements(a,o){var c;let m,w="";const k=[],A=o??this._bufferService.buffer.lines.length,x=this._bufferService.buffer.lines;for(let C=a;C<A;C++){const I=x.get(C);if(!I)continue;const R=(c=x.get(C+1))===null||c===void 0?void 0:c.isWrapped;if(w+=I.translateToString(!R),!R||C===x.length-1){const D=document.createElement("div");D.textContent=w,k.push(D),w.length>0&&(m=D),w=""}}return{bufferElements:k,cursorElement:m}}getLinesScrolled(a){if(a.deltaY===0||a.shiftKey)return 0;let o=this._applyScrollModifier(a.deltaY,a);return a.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(o/=this._currentRowHeight+0,this._wheelPartialScroll+=o,o=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):a.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(o*=this._bufferService.rows),o}_applyScrollModifier(a,o){const c=this._optionsService.rawOptions.fastScrollModifier;return c==="alt"&&o.altKey||c==="ctrl"&&o.ctrlKey||c==="shift"&&o.shiftKey?a*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:a*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(a){this._lastTouchY=a.touches[0].pageY}handleTouchMove(a){const o=this._lastTouchY-a.touches[0].pageY;return this._lastTouchY=a.touches[0].pageY,o!==0&&(this._viewportElement.scrollTop+=o,this._bubbleScroll(a,o))}};s.Viewport=l=u([f(2,y.IBufferService),f(3,y.IOptionsService),f(4,v.ICharSizeService),f(5,v.IRenderService),f(6,v.ICoreBrowserService),f(7,v.IThemeService)],l)},3107:function(h,s,i){var u=this&&this.__decorate||function(l,a,o,c){var m,w=arguments.length,k=w<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(l,a,o,c);else for(var A=l.length-1;A>=0;A--)(m=l[A])&&(k=(w<3?m(k):w>3?m(a,o,k):m(a,o))||k);return w>3&&k&&Object.defineProperty(a,o,k),k},f=this&&this.__param||function(l,a){return function(o,c){a(o,c,l)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferDecorationRenderer=void 0;const g=i(3656),v=i(4725),b=i(844),S=i(2585);let y=s.BufferDecorationRenderer=class extends b.Disposable{constructor(l,a,o,c){super(),this._screenElement=l,this._bufferService=a,this._decorationService=o,this._renderService=c,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,g.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(m=>this._removeDecoration(m))),this.register((0,b.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const l of this._decorationService.decorations)this._renderDecoration(l);this._dimensionsChanged=!1}_renderDecoration(l){this._refreshStyle(l),this._dimensionsChanged&&this._refreshXPosition(l)}_createElement(l){var a,o;const c=document.createElement("div");c.classList.add("xterm-decoration"),c.classList.toggle("xterm-decoration-top-layer",((a=l?.options)===null||a===void 0?void 0:a.layer)==="top"),c.style.width=`${Math.round((l.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,c.style.height=(l.options.height||1)*this._renderService.dimensions.css.cell.height+"px",c.style.top=(l.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",c.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const m=(o=l.options.x)!==null&&o!==void 0?o:0;return m&&m>this._bufferService.cols&&(c.style.display="none"),this._refreshXPosition(l,c),c}_refreshStyle(l){const a=l.marker.line-this._bufferService.buffers.active.ydisp;if(a<0||a>=this._bufferService.rows)l.element&&(l.element.style.display="none",l.onRenderEmitter.fire(l.element));else{let o=this._decorationElements.get(l);o||(o=this._createElement(l),l.element=o,this._decorationElements.set(l,o),this._container.appendChild(o),l.onDispose(()=>{this._decorationElements.delete(l),o.remove()})),o.style.top=a*this._renderService.dimensions.css.cell.height+"px",o.style.display=this._altBufferIsActive?"none":"block",l.onRenderEmitter.fire(o)}}_refreshXPosition(l,a=l.element){var o;if(!a)return;const c=(o=l.options.x)!==null&&o!==void 0?o:0;(l.options.anchor||"left")==="right"?a.style.right=c?c*this._renderService.dimensions.css.cell.width+"px":"":a.style.left=c?c*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(l){var a;(a=this._decorationElements.get(l))===null||a===void 0||a.remove(),this._decorationElements.delete(l),l.dispose()}};s.BufferDecorationRenderer=y=u([f(1,S.IBufferService),f(2,S.IDecorationService),f(3,v.IRenderService)],y)},5871:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorZoneStore=void 0,s.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(i){if(i.options.overviewRulerOptions){for(const u of this._zones)if(u.color===i.options.overviewRulerOptions.color&&u.position===i.options.overviewRulerOptions.position){if(this._lineIntersectsZone(u,i.marker.line))return;if(this._lineAdjacentToZone(u,i.marker.line,i.options.overviewRulerOptions.position))return void this._addLineToZone(u,i.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=i.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=i.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=i.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=i.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:i.options.overviewRulerOptions.color,position:i.options.overviewRulerOptions.position,startBufferLine:i.marker.line,endBufferLine:i.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(i){this._linePadding=i}_lineIntersectsZone(i,u){return u>=i.startBufferLine&&u<=i.endBufferLine}_lineAdjacentToZone(i,u,f){return u>=i.startBufferLine-this._linePadding[f||"full"]&&u<=i.endBufferLine+this._linePadding[f||"full"]}_addLineToZone(i,u){i.startBufferLine=Math.min(i.startBufferLine,u),i.endBufferLine=Math.max(i.endBufferLine,u)}}},5744:function(h,s,i){var u=this&&this.__decorate||function(m,w,k,A){var x,C=arguments.length,I=C<3?w:A===null?A=Object.getOwnPropertyDescriptor(w,k):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(m,w,k,A);else for(var R=m.length-1;R>=0;R--)(x=m[R])&&(I=(C<3?x(I):C>3?x(w,k,I):x(w,k))||I);return C>3&&I&&Object.defineProperty(w,k,I),I},f=this&&this.__param||function(m,w){return function(k,A){w(k,A,m)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OverviewRulerRenderer=void 0;const g=i(5871),v=i(3656),b=i(4725),S=i(844),y=i(2585),l={full:0,left:0,center:0,right:0},a={full:0,left:0,center:0,right:0},o={full:0,left:0,center:0,right:0};let c=s.OverviewRulerRenderer=class extends S.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(m,w,k,A,x,C,I){var R;super(),this._viewportElement=m,this._screenElement=w,this._bufferService=k,this._decorationService=A,this._renderService=x,this._optionsService=C,this._coreBrowseService=I,this._colorZoneStore=new g.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(R=this._viewportElement.parentElement)===null||R===void 0||R.insertBefore(this._canvas,this._viewportElement);const D=this._canvas.getContext("2d");if(!D)throw new Error("Ctx cannot be null");this._ctx=D,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,S.toDisposable)(()=>{var j;(j=this._canvas)===null||j===void 0||j.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,v.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const m=Math.floor(this._canvas.width/3),w=Math.ceil(this._canvas.width/3);a.full=this._canvas.width,a.left=m,a.center=w,a.right=m,this._refreshDrawHeightConstants(),o.full=0,o.left=0,o.center=a.left,o.right=a.left+a.center}_refreshDrawHeightConstants(){l.full=Math.round(2*this._coreBrowseService.dpr);const m=this._canvas.height/this._bufferService.buffer.lines.length,w=Math.round(Math.max(Math.min(m,12),6)*this._coreBrowseService.dpr);l.left=w,l.center=w,l.right=w}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*l.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*l.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*l.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*l.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const w of this._decorationService.decorations)this._colorZoneStore.addDecoration(w);this._ctx.lineWidth=1;const m=this._colorZoneStore.zones;for(const w of m)w.position!=="full"&&this._renderColorZone(w);for(const w of m)w.position==="full"&&this._renderColorZone(w);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(m){this._ctx.fillStyle=m.color,this._ctx.fillRect(o[m.position||"full"],Math.round((this._canvas.height-1)*(m.startBufferLine/this._bufferService.buffers.active.lines.length)-l[m.position||"full"]/2),a[m.position||"full"],Math.round((this._canvas.height-1)*((m.endBufferLine-m.startBufferLine)/this._bufferService.buffers.active.lines.length)+l[m.position||"full"]))}_queueRefresh(m,w){this._shouldUpdateDimensions=m||this._shouldUpdateDimensions,this._shouldUpdateAnchor=w||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};s.OverviewRulerRenderer=c=u([f(2,y.IBufferService),f(3,y.IDecorationService),f(4,b.IRenderService),f(5,y.IOptionsService),f(6,b.ICoreBrowserService)],c)},2950:function(h,s,i){var u=this&&this.__decorate||function(y,l,a,o){var c,m=arguments.length,w=m<3?l:o===null?o=Object.getOwnPropertyDescriptor(l,a):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(y,l,a,o);else for(var k=y.length-1;k>=0;k--)(c=y[k])&&(w=(m<3?c(w):m>3?c(l,a,w):c(l,a))||w);return m>3&&w&&Object.defineProperty(l,a,w),w},f=this&&this.__param||function(y,l){return function(a,o){l(a,o,y)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CompositionHelper=void 0;const g=i(4725),v=i(2585),b=i(2584);let S=s.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(y,l,a,o,c,m){this._textarea=y,this._compositionView=l,this._bufferService=a,this._optionsService=o,this._coreService=c,this._renderService=m,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(y){this._compositionView.textContent=y.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(y){if(this._isComposing||this._isSendingComposition){if(y.keyCode===229||y.keyCode===16||y.keyCode===17||y.keyCode===18)return!1;this._finalizeComposition(!1)}return y.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(y){if(this._compositionView.classList.remove("active"),this._isComposing=!1,y){const l={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let a;this._isSendingComposition=!1,l.start+=this._dataAlreadySent.length,a=this._isComposing?this._textarea.value.substring(l.start,l.end):this._textarea.value.substring(l.start),a.length>0&&this._coreService.triggerDataEvent(a,!0)}},0)}else{this._isSendingComposition=!1;const l=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(l,!0)}}_handleAnyTextareaChanges(){const y=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const l=this._textarea.value,a=l.replace(y,"");this._dataAlreadySent=a,l.length>y.length?this._coreService.triggerDataEvent(a,!0):l.length<y.length?this._coreService.triggerDataEvent(`${b.C0.DEL}`,!0):l.length===y.length&&l!==y&&this._coreService.triggerDataEvent(l,!0)}},0)}updateCompositionElements(y){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const l=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),a=this._renderService.dimensions.css.cell.height,o=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,c=l*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=c+"px",this._compositionView.style.top=o+"px",this._compositionView.style.height=a+"px",this._compositionView.style.lineHeight=a+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const m=this._compositionView.getBoundingClientRect();this._textarea.style.left=c+"px",this._textarea.style.top=o+"px",this._textarea.style.width=Math.max(m.width,1)+"px",this._textarea.style.height=Math.max(m.height,1)+"px",this._textarea.style.lineHeight=m.height+"px"}y||setTimeout(()=>this.updateCompositionElements(!0),0)}}};s.CompositionHelper=S=u([f(2,v.IBufferService),f(3,v.IOptionsService),f(4,v.ICoreService),f(5,g.IRenderService)],S)},9806:(h,s)=>{function i(u,f,g){const v=g.getBoundingClientRect(),b=u.getComputedStyle(g),S=parseInt(b.getPropertyValue("padding-left")),y=parseInt(b.getPropertyValue("padding-top"));return[f.clientX-v.left-S,f.clientY-v.top-y]}Object.defineProperty(s,"__esModule",{value:!0}),s.getCoords=s.getCoordsRelativeToElement=void 0,s.getCoordsRelativeToElement=i,s.getCoords=function(u,f,g,v,b,S,y,l,a){if(!S)return;const o=i(u,f,g);return o?(o[0]=Math.ceil((o[0]+(a?y/2:0))/y),o[1]=Math.ceil(o[1]/l),o[0]=Math.min(Math.max(o[0],1),v+(a?1:0)),o[1]=Math.min(Math.max(o[1],1),b),o):void 0}},9504:(h,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.moveToCellSequence=void 0;const u=i(2584);function f(l,a,o,c){const m=l-g(l,o),w=a-g(a,o),k=Math.abs(m-w)-function(A,x,C){let I=0;const R=A-g(A,C),D=x-g(x,C);for(let j=0;j<Math.abs(R-D);j++){const M=v(A,x)==="A"?-1:1,P=C.buffer.lines.get(R+M*j);P?.isWrapped&&I++}return I}(l,a,o);return y(k,S(v(l,a),c))}function g(l,a){let o=0,c=a.buffer.lines.get(l),m=c?.isWrapped;for(;m&&l>=0&&l<a.rows;)o++,c=a.buffer.lines.get(--l),m=c?.isWrapped;return o}function v(l,a){return l>a?"A":"B"}function b(l,a,o,c,m,w){let k=l,A=a,x="";for(;k!==o||A!==c;)k+=m?1:-1,m&&k>w.cols-1?(x+=w.buffer.translateBufferLineToString(A,!1,l,k),k=0,l=0,A++):!m&&k<0&&(x+=w.buffer.translateBufferLineToString(A,!1,0,l+1),k=w.cols-1,l=k,A--);return x+w.buffer.translateBufferLineToString(A,!1,l,k)}function S(l,a){const o=a?"O":"[";return u.C0.ESC+o+l}function y(l,a){l=Math.floor(l);let o="";for(let c=0;c<l;c++)o+=a;return o}s.moveToCellSequence=function(l,a,o,c){const m=o.buffer.x,w=o.buffer.y;if(!o.buffer.hasScrollback)return function(x,C,I,R,D,j){return f(C,R,D,j).length===0?"":y(b(x,C,x,C-g(C,D),!1,D).length,S("D",j))}(m,w,0,a,o,c)+f(w,a,o,c)+function(x,C,I,R,D,j){let M;M=f(C,R,D,j).length>0?R-g(R,D):C;const P=R,L=function(F,$,B,H,z,X){let V;return V=f(B,H,z,X).length>0?H-g(H,z):$,F<B&&V<=H||F>=B&&V<H?"C":"D"}(x,C,I,R,D,j);return y(b(x,M,I,P,L==="C",D).length,S(L,j))}(m,w,l,a,o,c);let k;if(w===a)return k=m>l?"D":"C",y(Math.abs(m-l),S(k,c));k=w>a?"D":"C";const A=Math.abs(w-a);return y(function(x,C){return C.cols-x}(w>a?l:m,o)+(A-1)*o.cols+1+((w>a?m:l)-1),S(k,c))}},1296:function(h,s,i){var u=this&&this.__decorate||function(D,j,M,P){var L,F=arguments.length,$=F<3?j:P===null?P=Object.getOwnPropertyDescriptor(j,M):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$=Reflect.decorate(D,j,M,P);else for(var B=D.length-1;B>=0;B--)(L=D[B])&&($=(F<3?L($):F>3?L(j,M,$):L(j,M))||$);return F>3&&$&&Object.defineProperty(j,M,$),$},f=this&&this.__param||function(D,j){return function(M,P){j(M,P,D)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRenderer=void 0;const g=i(3787),v=i(2550),b=i(2223),S=i(6171),y=i(4725),l=i(8055),a=i(8460),o=i(844),c=i(2585),m="xterm-dom-renderer-owner-",w="xterm-rows",k="xterm-fg-",A="xterm-bg-",x="xterm-focus",C="xterm-selection";let I=1,R=s.DomRenderer=class extends o.Disposable{constructor(D,j,M,P,L,F,$,B,H,z){super(),this._element=D,this._screenElement=j,this._viewportElement=M,this._linkifier2=P,this._charSizeService=F,this._optionsService=$,this._bufferService=B,this._coreBrowserService=H,this._themeService=z,this._terminalClass=I++,this._rowElements=[],this.onRequestRedraw=this.register(new a.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(w),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(C),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,S.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(X=>this._injectCss(X))),this._injectCss(this._themeService.colors),this._rowFactory=L.createInstance(g.DomRendererRowFactory,document),this._element.classList.add(m+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(X=>this._handleLinkHover(X))),this.register(this._linkifier2.onHideLinkUnderline(X=>this._handleLinkLeave(X))),this.register((0,o.toDisposable)(()=>{this._element.classList.remove(m+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new v.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const D=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*D,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*D),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/D),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/D),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const M of this._rowElements)M.style.width=`${this.dimensions.css.canvas.width}px`,M.style.height=`${this.dimensions.css.cell.height}px`,M.style.lineHeight=`${this.dimensions.css.cell.height}px`,M.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const j=`${this._terminalSelector} .${w} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=j,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(D){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let j=`${this._terminalSelector} .${w} { color: ${D.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;j+=`${this._terminalSelector} .${w} .xterm-dim { color: ${l.color.multiplyOpacity(D.foreground,.5).css};}`,j+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,j+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",j+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${D.cursor.css};  color: ${D.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${D.cursor.css}; }}`,j+=`${this._terminalSelector} .${w}.${x} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${w}.${x} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${w} .xterm-cursor.xterm-cursor-block { background-color: ${D.cursor.css}; color: ${D.cursorAccent.css};}${this._terminalSelector} .${w} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${D.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${w} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${D.cursor.css} inset;}${this._terminalSelector} .${w} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${D.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,j+=`${this._terminalSelector} .${C} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${C} div { position: absolute; background-color: ${D.selectionBackgroundOpaque.css};}${this._terminalSelector} .${C} div { position: absolute; background-color: ${D.selectionInactiveBackgroundOpaque.css};}`;for(const[M,P]of D.ansi.entries())j+=`${this._terminalSelector} .${k}${M} { color: ${P.css}; }${this._terminalSelector} .${k}${M}.xterm-dim { color: ${l.color.multiplyOpacity(P,.5).css}; }${this._terminalSelector} .${A}${M} { background-color: ${P.css}; }`;j+=`${this._terminalSelector} .${k}${b.INVERTED_DEFAULT_COLOR} { color: ${l.color.opaque(D.background).css}; }${this._terminalSelector} .${k}${b.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${l.color.multiplyOpacity(l.color.opaque(D.background),.5).css}; }${this._terminalSelector} .${A}${b.INVERTED_DEFAULT_COLOR} { background-color: ${D.foreground.css}; }`,this._themeStyleElement.textContent=j}_setDefaultSpacing(){const D=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${D}px`,this._rowFactory.defaultSpacing=D}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(D,j){for(let M=this._rowElements.length;M<=j;M++){const P=document.createElement("div");this._rowContainer.appendChild(P),this._rowElements.push(P)}for(;this._rowElements.length>j;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(D,j){this._refreshRowElements(D,j),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(x)}handleFocus(){this._rowContainer.classList.add(x),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(D,j,M){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(D,j,M),this.renderRows(0,this._bufferService.rows-1),!D||!j)return;const P=D[1]-this._bufferService.buffer.ydisp,L=j[1]-this._bufferService.buffer.ydisp,F=Math.max(P,0),$=Math.min(L,this._bufferService.rows-1);if(F>=this._bufferService.rows||$<0)return;const B=document.createDocumentFragment();if(M){const H=D[0]>j[0];B.appendChild(this._createSelectionElement(F,H?j[0]:D[0],H?D[0]:j[0],$-F+1))}else{const H=P===F?D[0]:0,z=F===L?j[0]:this._bufferService.cols;B.appendChild(this._createSelectionElement(F,H,z));const X=$-F-1;if(B.appendChild(this._createSelectionElement(F+1,0,this._bufferService.cols,X)),F!==$){const V=L===$?j[0]:this._bufferService.cols;B.appendChild(this._createSelectionElement($,0,V))}}this._selectionContainer.appendChild(B)}_createSelectionElement(D,j,M,P=1){const L=document.createElement("div");return L.style.height=P*this.dimensions.css.cell.height+"px",L.style.top=D*this.dimensions.css.cell.height+"px",L.style.left=j*this.dimensions.css.cell.width+"px",L.style.width=this.dimensions.css.cell.width*(M-j)+"px",L}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const D of this._rowElements)D.replaceChildren()}renderRows(D,j){const M=this._bufferService.buffer,P=M.ybase+M.y,L=Math.min(M.x,this._bufferService.cols-1),F=this._optionsService.rawOptions.cursorBlink,$=this._optionsService.rawOptions.cursorStyle,B=this._optionsService.rawOptions.cursorInactiveStyle;for(let H=D;H<=j;H++){const z=H+M.ydisp,X=this._rowElements[H],V=M.lines.get(z);if(!X||!V)break;X.replaceChildren(...this._rowFactory.createRow(V,z,z===P,$,B,L,F,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${m}${this._terminalClass}`}_handleLinkHover(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!0)}_handleLinkLeave(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!1)}_setCellUnderline(D,j,M,P,L,F){M<0&&(D=0),P<0&&(j=0);const $=this._bufferService.rows-1;M=Math.max(Math.min(M,$),0),P=Math.max(Math.min(P,$),0),L=Math.min(L,this._bufferService.cols);const B=this._bufferService.buffer,H=B.ybase+B.y,z=Math.min(B.x,L-1),X=this._optionsService.rawOptions.cursorBlink,V=this._optionsService.rawOptions.cursorStyle,Y=this._optionsService.rawOptions.cursorInactiveStyle;for(let K=M;K<=P;++K){const ce=K+B.ydisp,E=this._rowElements[K],N=B.lines.get(ce);if(!E||!N)break;E.replaceChildren(...this._rowFactory.createRow(N,ce,ce===H,V,Y,z,X,this.dimensions.css.cell.width,this._widthCache,F?K===M?D:0:-1,F?(K===P?j:L)-1:-1))}}};s.DomRenderer=R=u([f(4,c.IInstantiationService),f(5,y.ICharSizeService),f(6,c.IOptionsService),f(7,c.IBufferService),f(8,y.ICoreBrowserService),f(9,y.IThemeService)],R)},3787:function(h,s,i){var u=this&&this.__decorate||function(k,A,x,C){var I,R=arguments.length,D=R<3?A:C===null?C=Object.getOwnPropertyDescriptor(A,x):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(k,A,x,C);else for(var j=k.length-1;j>=0;j--)(I=k[j])&&(D=(R<3?I(D):R>3?I(A,x,D):I(A,x))||D);return R>3&&D&&Object.defineProperty(A,x,D),D},f=this&&this.__param||function(k,A){return function(x,C){A(x,C,k)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRendererRowFactory=void 0;const g=i(2223),v=i(643),b=i(511),S=i(2585),y=i(8055),l=i(4725),a=i(4269),o=i(6171),c=i(3734);let m=s.DomRendererRowFactory=class{constructor(k,A,x,C,I,R,D){this._document=k,this._characterJoinerService=A,this._optionsService=x,this._coreBrowserService=C,this._coreService=I,this._decorationService=R,this._themeService=D,this._workCell=new b.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(k,A,x){this._selectionStart=k,this._selectionEnd=A,this._columnSelectMode=x}createRow(k,A,x,C,I,R,D,j,M,P,L){const F=[],$=this._characterJoinerService.getJoinedCharacters(A),B=this._themeService.colors;let H,z=k.getNoBgTrimmedLength();x&&z<R+1&&(z=R+1);let X=0,V="",Y=0,K=0,ce=0,E=!1,N=0,U=!1,W=0;const q=[],G=P!==-1&&L!==-1;for(let Q=0;Q<z;Q++){k.loadCell(Q,this._workCell);let oe=this._workCell.getWidth();if(oe===0)continue;let ge=!1,Ce=Q,Z=this._workCell;if($.length>0&&Q===$[0][0]){ge=!0;const se=$.shift();Z=new a.JoinedCellData(this._workCell,k.translateToString(!0,se[0],se[1]),se[1]-se[0]),Ce=se[1]-1,oe=Z.getWidth()}const te=this._isCellInSelection(Q,A),re=x&&Q===R,me=G&&Q>=P&&Q<=L;let ye=!1;this._decorationService.forEachDecorationAtCell(Q,A,void 0,se=>{ye=!0});let we=Z.getChars()||v.WHITESPACE_CELL_CHAR;if(we===" "&&(Z.isUnderline()||Z.isOverline())&&(we="Â "),W=oe*j-M.get(we,Z.isBold(),Z.isItalic()),H){if(X&&(te&&U||!te&&!U&&Z.bg===Y)&&(te&&U&&B.selectionForeground||Z.fg===K)&&Z.extended.ext===ce&&me===E&&W===N&&!re&&!ge&&!ye){V+=we,X++;continue}X&&(H.textContent=V),H=this._document.createElement("span"),X=0,V=""}else H=this._document.createElement("span");if(Y=Z.bg,K=Z.fg,ce=Z.extended.ext,E=me,N=W,U=te,ge&&R>=Q&&R<=Ce&&(R=Q),!this._coreService.isCursorHidden&&re){if(q.push("xterm-cursor"),this._coreBrowserService.isFocused)D&&q.push("xterm-cursor-blink"),q.push(C==="bar"?"xterm-cursor-bar":C==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(I)switch(I){case"outline":q.push("xterm-cursor-outline");break;case"block":q.push("xterm-cursor-block");break;case"bar":q.push("xterm-cursor-bar");break;case"underline":q.push("xterm-cursor-underline")}}if(Z.isBold()&&q.push("xterm-bold"),Z.isItalic()&&q.push("xterm-italic"),Z.isDim()&&q.push("xterm-dim"),V=Z.isInvisible()?v.WHITESPACE_CELL_CHAR:Z.getChars()||v.WHITESPACE_CELL_CHAR,Z.isUnderline()&&(q.push(`xterm-underline-${Z.extended.underlineStyle}`),V===" "&&(V="Â "),!Z.isUnderlineColorDefault()))if(Z.isUnderlineColorRGB())H.style.textDecorationColor=`rgb(${c.AttributeData.toColorRGB(Z.getUnderlineColor()).join(",")})`;else{let se=Z.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Z.isBold()&&se<8&&(se+=8),H.style.textDecorationColor=B.ansi[se].css}Z.isOverline()&&(q.push("xterm-overline"),V===" "&&(V="Â ")),Z.isStrikethrough()&&q.push("xterm-strikethrough"),me&&(H.style.textDecoration="underline");let ke=Z.getFgColor(),Se=Z.getFgColorMode(),$e=Z.getBgColor(),he=Z.getBgColorMode();const ue=!!Z.isInverse();if(ue){const se=ke;ke=$e,$e=se;const fe=Se;Se=he,he=fe}let le,ie,ae,_e=!1;switch(this._decorationService.forEachDecorationAtCell(Q,A,void 0,se=>{se.options.layer!=="top"&&_e||(se.backgroundColorRGB&&(he=50331648,$e=se.backgroundColorRGB.rgba>>8&16777215,le=se.backgroundColorRGB),se.foregroundColorRGB&&(Se=50331648,ke=se.foregroundColorRGB.rgba>>8&16777215,ie=se.foregroundColorRGB),_e=se.options.layer==="top")}),!_e&&te&&(le=this._coreBrowserService.isFocused?B.selectionBackgroundOpaque:B.selectionInactiveBackgroundOpaque,$e=le.rgba>>8&16777215,he=50331648,_e=!0,B.selectionForeground&&(Se=50331648,ke=B.selectionForeground.rgba>>8&16777215,ie=B.selectionForeground)),_e&&q.push("xterm-decoration-top"),he){case 16777216:case 33554432:ae=B.ansi[$e],q.push(`xterm-bg-${$e}`);break;case 50331648:ae=y.rgba.toColor($e>>16,$e>>8&255,255&$e),this._addStyle(H,`background-color:#${w(($e>>>0).toString(16),"0",6)}`);break;default:ue?(ae=B.foreground,q.push(`xterm-bg-${g.INVERTED_DEFAULT_COLOR}`)):ae=B.background}switch(le||Z.isDim()&&(le=y.color.multiplyOpacity(ae,.5)),Se){case 16777216:case 33554432:Z.isBold()&&ke<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(ke+=8),this._applyMinimumContrast(H,ae,B.ansi[ke],Z,le,void 0)||q.push(`xterm-fg-${ke}`);break;case 50331648:const se=y.rgba.toColor(ke>>16&255,ke>>8&255,255&ke);this._applyMinimumContrast(H,ae,se,Z,le,ie)||this._addStyle(H,`color:#${w(ke.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(H,ae,B.foreground,Z,le,void 0)||ue&&q.push(`xterm-fg-${g.INVERTED_DEFAULT_COLOR}`)}q.length&&(H.className=q.join(" "),q.length=0),re||ge||ye?H.textContent=V:X++,W!==this.defaultSpacing&&(H.style.letterSpacing=`${W}px`),F.push(H),Q=Ce}return H&&X&&(H.textContent=V),F}_applyMinimumContrast(k,A,x,C,I,R){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,o.excludeFromContrastRatioDemands)(C.getCode()))return!1;const D=this._getContrastCache(C);let j;if(I||R||(j=D.getColor(A.rgba,x.rgba)),j===void 0){const M=this._optionsService.rawOptions.minimumContrastRatio/(C.isDim()?2:1);j=y.color.ensureContrastRatio(I||A,R||x,M),D.setColor((I||A).rgba,(R||x).rgba,j??null)}return!!j&&(this._addStyle(k,`color:${j.css}`),!0)}_getContrastCache(k){return k.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(k,A){k.setAttribute("style",`${k.getAttribute("style")||""}${A};`)}_isCellInSelection(k,A){const x=this._selectionStart,C=this._selectionEnd;return!(!x||!C)&&(this._columnSelectMode?x[0]<=C[0]?k>=x[0]&&A>=x[1]&&k<C[0]&&A<=C[1]:k<x[0]&&A>=x[1]&&k>=C[0]&&A<=C[1]:A>x[1]&&A<C[1]||x[1]===C[1]&&A===x[1]&&k>=x[0]&&k<C[0]||x[1]<C[1]&&A===C[1]&&k<C[0]||x[1]<C[1]&&A===x[1]&&k>=x[0])}};function w(k,A,x){for(;k.length<x;)k=A+k;return k}s.DomRendererRowFactory=m=u([f(1,l.ICharacterJoinerService),f(2,S.IOptionsService),f(3,l.ICoreBrowserService),f(4,S.ICoreService),f(5,S.IDecorationService),f(6,l.IThemeService)],m)},2550:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WidthCache=void 0,s.WidthCache=class{constructor(i){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=i.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const u=i.createElement("span"),f=i.createElement("span");f.style.fontWeight="bold";const g=i.createElement("span");g.style.fontStyle="italic";const v=i.createElement("span");v.style.fontWeight="bold",v.style.fontStyle="italic",this._measureElements=[u,f,g,v],this._container.appendChild(u),this._container.appendChild(f),this._container.appendChild(g),this._container.appendChild(v),i.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(i,u,f,g){i===this._font&&u===this._fontSize&&f===this._weight&&g===this._weightBold||(this._font=i,this._fontSize=u,this._weight=f,this._weightBold=g,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${f}`,this._measureElements[1].style.fontWeight=`${g}`,this._measureElements[2].style.fontWeight=`${f}`,this._measureElements[3].style.fontWeight=`${g}`,this.clear())}get(i,u,f){let g=0;if(!u&&!f&&i.length===1&&(g=i.charCodeAt(0))<256)return this._flat[g]!==-9999?this._flat[g]:this._flat[g]=this._measure(i,0);let v=i;u&&(v+="B"),f&&(v+="I");let b=this._holey.get(v);if(b===void 0){let S=0;u&&(S|=1),f&&(S|=2),b=this._measure(i,S),this._holey.set(v,b)}return b}_measure(i,u){const f=this._measureElements[u];return f.textContent=i.repeat(32),f.offsetWidth/32}}},2223:(h,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TEXT_BASELINE=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0;const u=i(6114);s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.TEXT_BASELINE=u.isFirefox||u.isLegacyEdge?"bottom":"ideographic"},6171:(h,s)=>{function i(u){return 57508<=u&&u<=57558}Object.defineProperty(s,"__esModule",{value:!0}),s.createRenderDimensions=s.excludeFromContrastRatioDemands=s.isRestrictedPowerlineGlyph=s.isPowerlineGlyph=s.throwIfFalsy=void 0,s.throwIfFalsy=function(u){if(!u)throw new Error("value must not be falsy");return u},s.isPowerlineGlyph=i,s.isRestrictedPowerlineGlyph=function(u){return 57520<=u&&u<=57527},s.excludeFromContrastRatioDemands=function(u){return i(u)||function(f){return 9472<=f&&f<=9631}(u)},s.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionModel=void 0,s.SelectionModel=class{constructor(i){this._bufferService=i,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const i=this.selectionStart[0]+this.selectionStartLength;return i>this._bufferService.cols?i%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(i/this._bufferService.cols)-1]:[i%this._bufferService.cols,this.selectionStart[1]+Math.floor(i/this._bufferService.cols)]:[i,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const i=this.selectionStart[0]+this.selectionStartLength;return i>this._bufferService.cols?[i%this._bufferService.cols,this.selectionStart[1]+Math.floor(i/this._bufferService.cols)]:[Math.max(i,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const i=this.selectionStart,u=this.selectionEnd;return!(!i||!u)&&(i[1]>u[1]||i[1]===u[1]&&i[0]>u[0])}handleTrim(i){return this.selectionStart&&(this.selectionStart[1]-=i),this.selectionEnd&&(this.selectionEnd[1]-=i),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(h,s,i){var u=this&&this.__decorate||function(l,a,o,c){var m,w=arguments.length,k=w<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(l,a,o,c);else for(var A=l.length-1;A>=0;A--)(m=l[A])&&(k=(w<3?m(k):w>3?m(a,o,k):m(a,o))||k);return w>3&&k&&Object.defineProperty(a,o,k),k},f=this&&this.__param||function(l,a){return function(o,c){a(o,c,l)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharSizeService=void 0;const g=i(2585),v=i(8460),b=i(844);let S=s.CharSizeService=class extends b.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(l,a,o){super(),this._optionsService=o,this.width=0,this.height=0,this._onCharSizeChange=this.register(new v.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new y(l,a,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const l=this._measureStrategy.measure();l.width===this.width&&l.height===this.height||(this.width=l.width,this.height=l.height,this._onCharSizeChange.fire())}};s.CharSizeService=S=u([f(2,g.IOptionsService)],S);class y{constructor(a,o,c){this._document=a,this._parentElement=o,this._optionsService=c,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const a={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return a.width!==0&&a.height!==0&&(this._result.width=a.width/32,this._result.height=Math.ceil(a.height)),this._result}}},4269:function(h,s,i){var u=this&&this.__decorate||function(a,o,c,m){var w,k=arguments.length,A=k<3?o:m===null?m=Object.getOwnPropertyDescriptor(o,c):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(a,o,c,m);else for(var x=a.length-1;x>=0;x--)(w=a[x])&&(A=(k<3?w(A):k>3?w(o,c,A):w(o,c))||A);return k>3&&A&&Object.defineProperty(o,c,A),A},f=this&&this.__param||function(a,o){return function(c,m){o(c,m,a)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharacterJoinerService=s.JoinedCellData=void 0;const g=i(3734),v=i(643),b=i(511),S=i(2585);class y extends g.AttributeData{constructor(o,c,m){super(),this.content=0,this.combinedData="",this.fg=o.fg,this.bg=o.bg,this.combinedData=c,this._width=m}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(o){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.JoinedCellData=y;let l=s.CharacterJoinerService=class oo{constructor(o){this._bufferService=o,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new b.CellData}register(o){const c={id:this._nextCharacterJoinerId++,handler:o};return this._characterJoiners.push(c),c.id}deregister(o){for(let c=0;c<this._characterJoiners.length;c++)if(this._characterJoiners[c].id===o)return this._characterJoiners.splice(c,1),!0;return!1}getJoinedCharacters(o){if(this._characterJoiners.length===0)return[];const c=this._bufferService.buffer.lines.get(o);if(!c||c.length===0)return[];const m=[],w=c.translateToString(!0);let k=0,A=0,x=0,C=c.getFg(0),I=c.getBg(0);for(let R=0;R<c.getTrimmedLength();R++)if(c.loadCell(R,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==C||this._workCell.bg!==I){if(R-k>1){const D=this._getJoinedRanges(w,x,A,c,k);for(let j=0;j<D.length;j++)m.push(D[j])}k=R,x=A,C=this._workCell.fg,I=this._workCell.bg}A+=this._workCell.getChars().length||v.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-k>1){const R=this._getJoinedRanges(w,x,A,c,k);for(let D=0;D<R.length;D++)m.push(R[D])}return m}_getJoinedRanges(o,c,m,w,k){const A=o.substring(c,m);let x=[];try{x=this._characterJoiners[0].handler(A)}catch(C){console.error(C)}for(let C=1;C<this._characterJoiners.length;C++)try{const I=this._characterJoiners[C].handler(A);for(let R=0;R<I.length;R++)oo._mergeRanges(x,I[R])}catch(I){console.error(I)}return this._stringRangesToCellRanges(x,w,k),x}_stringRangesToCellRanges(o,c,m){let w=0,k=!1,A=0,x=o[w];if(x){for(let C=m;C<this._bufferService.cols;C++){const I=c.getWidth(C),R=c.getString(C).length||v.WHITESPACE_CELL_CHAR.length;if(I!==0){if(!k&&x[0]<=A&&(x[0]=C,k=!0),x[1]<=A){if(x[1]=C,x=o[++w],!x)break;x[0]<=A?(x[0]=C,k=!0):k=!1}A+=R}}x&&(x[1]=this._bufferService.cols)}}static _mergeRanges(o,c){let m=!1;for(let w=0;w<o.length;w++){const k=o[w];if(m){if(c[1]<=k[0])return o[w-1][1]=c[1],o;if(c[1]<=k[1])return o[w-1][1]=Math.max(c[1],k[1]),o.splice(w,1),o;o.splice(w,1),w--}else{if(c[1]<=k[0])return o.splice(w,0,c),o;if(c[1]<=k[1])return k[0]=Math.min(c[0],k[0]),o;c[0]<k[1]&&(k[0]=Math.min(c[0],k[0]),m=!0)}}return m?o[o.length-1][1]=c[1]:o.push(c),o}};s.CharacterJoinerService=l=u([f(0,S.IBufferService)],l)},5114:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreBrowserService=void 0,s.CoreBrowserService=class{constructor(i,u){this._textarea=i,this.window=u,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(h,s,i){var u=this&&this.__decorate||function(S,y,l,a){var o,c=arguments.length,m=c<3?y:a===null?a=Object.getOwnPropertyDescriptor(y,l):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(S,y,l,a);else for(var w=S.length-1;w>=0;w--)(o=S[w])&&(m=(c<3?o(m):c>3?o(y,l,m):o(y,l))||m);return c>3&&m&&Object.defineProperty(y,l,m),m},f=this&&this.__param||function(S,y){return function(l,a){y(l,a,S)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseService=void 0;const g=i(4725),v=i(9806);let b=s.MouseService=class{constructor(S,y){this._renderService=S,this._charSizeService=y}getCoords(S,y,l,a,o){return(0,v.getCoords)(window,S,y,l,a,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,o)}getMouseReportCoords(S,y){const l=(0,v.getCoordsRelativeToElement)(window,S,y);if(this._charSizeService.hasValidSize)return l[0]=Math.min(Math.max(l[0],0),this._renderService.dimensions.css.canvas.width-1),l[1]=Math.min(Math.max(l[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(l[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(l[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(l[0]),y:Math.floor(l[1])}}};s.MouseService=b=u([f(0,g.IRenderService),f(1,g.ICharSizeService)],b)},3230:function(h,s,i){var u=this&&this.__decorate||function(m,w,k,A){var x,C=arguments.length,I=C<3?w:A===null?A=Object.getOwnPropertyDescriptor(w,k):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(m,w,k,A);else for(var R=m.length-1;R>=0;R--)(x=m[R])&&(I=(C<3?x(I):C>3?x(w,k,I):x(w,k))||I);return C>3&&I&&Object.defineProperty(w,k,I),I},f=this&&this.__param||function(m,w){return function(k,A){w(k,A,m)}};Object.defineProperty(s,"__esModule",{value:!0}),s.RenderService=void 0;const g=i(3656),v=i(6193),b=i(5596),S=i(4725),y=i(8460),l=i(844),a=i(7226),o=i(2585);let c=s.RenderService=class extends l.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(m,w,k,A,x,C,I,R){if(super(),this._rowCount=m,this._charSizeService=A,this._renderer=this.register(new l.MutableDisposable),this._pausedResizeTask=new a.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new y.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new y.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new y.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new y.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new v.RenderDebouncer(I.window,(D,j)=>this._renderRows(D,j)),this.register(this._renderDebouncer),this._screenDprMonitor=new b.ScreenDprMonitor(I.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(C.onResize(()=>this._fullRefresh())),this.register(C.buffers.onBufferActivate(()=>{var D;return(D=this._renderer.value)===null||D===void 0?void 0:D.clear()})),this.register(k.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(x.onDecorationRegistered(()=>this._fullRefresh())),this.register(x.onDecorationRemoved(()=>this._fullRefresh())),this.register(k.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(C.cols,C.rows),this._fullRefresh()})),this.register(k.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(C.buffer.y,C.buffer.y,!0))),this.register((0,g.addDisposableDomListener)(I.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(R.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in I.window){const D=new I.window.IntersectionObserver(j=>this._handleIntersectionChange(j[j.length-1]),{threshold:0});D.observe(w),this.register({dispose:()=>D.disconnect()})}}_handleIntersectionChange(m){this._isPaused=m.isIntersecting===void 0?m.intersectionRatio===0:!m.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(m,w,k=!1){this._isPaused?this._needsFullRefresh=!0:(k||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(m,w,this._rowCount))}_renderRows(m,w){this._renderer.value&&(m=Math.min(m,this._rowCount-1),w=Math.min(w,this._rowCount-1),this._renderer.value.renderRows(m,w),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:m,end:w}),this._onRender.fire({start:m,end:w}),this._isNextRenderRedrawOnly=!0)}resize(m,w){this._rowCount=w,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(m){this._renderer.value=m,this._renderer.value.onRequestRedraw(w=>this.refreshRows(w.start,w.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(m){return this._renderDebouncer.addRefreshCallback(m)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var m,w;this._renderer.value&&((w=(m=this._renderer.value).clearTextureAtlas)===null||w===void 0||w.call(m),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(m,w){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(m,w)):this._renderer.value.handleResize(m,w),this._fullRefresh())}handleCharSizeChanged(){var m;(m=this._renderer.value)===null||m===void 0||m.handleCharSizeChanged()}handleBlur(){var m;(m=this._renderer.value)===null||m===void 0||m.handleBlur()}handleFocus(){var m;(m=this._renderer.value)===null||m===void 0||m.handleFocus()}handleSelectionChanged(m,w,k){var A;this._selectionState.start=m,this._selectionState.end=w,this._selectionState.columnSelectMode=k,(A=this._renderer.value)===null||A===void 0||A.handleSelectionChanged(m,w,k)}handleCursorMove(){var m;(m=this._renderer.value)===null||m===void 0||m.handleCursorMove()}clear(){var m;(m=this._renderer.value)===null||m===void 0||m.clear()}};s.RenderService=c=u([f(2,o.IOptionsService),f(3,S.ICharSizeService),f(4,o.IDecorationService),f(5,o.IBufferService),f(6,S.ICoreBrowserService),f(7,S.IThemeService)],c)},9312:function(h,s,i){var u=this&&this.__decorate||function(x,C,I,R){var D,j=arguments.length,M=j<3?C:R===null?R=Object.getOwnPropertyDescriptor(C,I):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(x,C,I,R);else for(var P=x.length-1;P>=0;P--)(D=x[P])&&(M=(j<3?D(M):j>3?D(C,I,M):D(C,I))||M);return j>3&&M&&Object.defineProperty(C,I,M),M},f=this&&this.__param||function(x,C){return function(I,R){C(I,R,x)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionService=void 0;const g=i(9806),v=i(9504),b=i(456),S=i(4725),y=i(8460),l=i(844),a=i(6114),o=i(4841),c=i(511),m=i(2585),w="Â ",k=new RegExp(w,"g");let A=s.SelectionService=class extends l.Disposable{constructor(x,C,I,R,D,j,M,P,L){super(),this._element=x,this._screenElement=C,this._linkifier=I,this._bufferService=R,this._coreService=D,this._mouseService=j,this._optionsService=M,this._renderService=P,this._coreBrowserService=L,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new c.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new y.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new y.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new y.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new y.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=F=>this._handleMouseMove(F),this._mouseUpListener=F=>this._handleMouseUp(F),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(F=>this._handleTrim(F)),this.register(this._bufferService.buffers.onBufferActivate(F=>this._handleBufferActivate(F))),this.enable(),this._model=new b.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,l.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const x=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;return!(!x||!C||x[0]===C[0]&&x[1]===C[1])}get selectionText(){const x=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;if(!x||!C)return"";const I=this._bufferService.buffer,R=[];if(this._activeSelectionMode===3){if(x[0]===C[0])return"";const D=x[0]<C[0]?x[0]:C[0],j=x[0]<C[0]?C[0]:x[0];for(let M=x[1];M<=C[1];M++){const P=I.translateBufferLineToString(M,!0,D,j);R.push(P)}}else{const D=x[1]===C[1]?C[0]:void 0;R.push(I.translateBufferLineToString(x[1],!0,x[0],D));for(let j=x[1]+1;j<=C[1]-1;j++){const M=I.lines.get(j),P=I.translateBufferLineToString(j,!0);M?.isWrapped?R[R.length-1]+=P:R.push(P)}if(x[1]!==C[1]){const j=I.lines.get(C[1]),M=I.translateBufferLineToString(C[1],!0,0,C[0]);j&&j.isWrapped?R[R.length-1]+=M:R.push(M)}}return R.map(D=>D.replace(k," ")).join(a.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(x){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),a.isLinux&&x&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(x){const C=this._getMouseBufferCoords(x),I=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!!(I&&R&&C)&&this._areCoordsInSelection(C,I,R)}isCellInSelection(x,C){const I=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!(!I||!R)&&this._areCoordsInSelection([x,C],I,R)}_areCoordsInSelection(x,C,I){return x[1]>C[1]&&x[1]<I[1]||C[1]===I[1]&&x[1]===C[1]&&x[0]>=C[0]&&x[0]<I[0]||C[1]<I[1]&&x[1]===I[1]&&x[0]<I[0]||C[1]<I[1]&&x[1]===C[1]&&x[0]>=C[0]}_selectWordAtCursor(x,C){var I,R;const D=(R=(I=this._linkifier.currentLink)===null||I===void 0?void 0:I.link)===null||R===void 0?void 0:R.range;if(D)return this._model.selectionStart=[D.start.x-1,D.start.y-1],this._model.selectionStartLength=(0,o.getRangeLength)(D,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const j=this._getMouseBufferCoords(x);return!!j&&(this._selectWordAt(j,C),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(x,C){this._model.clearSelection(),x=Math.max(x,0),C=Math.min(C,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,x],this._model.selectionEnd=[this._bufferService.cols,C],this.refresh(),this._onSelectionChange.fire()}_handleTrim(x){this._model.handleTrim(x)&&this.refresh()}_getMouseBufferCoords(x){const C=this._mouseService.getCoords(x,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(C)return C[0]--,C[1]--,C[1]+=this._bufferService.buffer.ydisp,C}_getMouseEventScrollAmount(x){let C=(0,g.getCoordsRelativeToElement)(this._coreBrowserService.window,x,this._screenElement)[1];const I=this._renderService.dimensions.css.canvas.height;return C>=0&&C<=I?0:(C>I&&(C-=I),C=Math.min(Math.max(C,-50),50),C/=50,C/Math.abs(C)+Math.round(14*C))}shouldForceSelection(x){return a.isMac?x.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:x.shiftKey}handleMouseDown(x){if(this._mouseDownTimeStamp=x.timeStamp,(x.button!==2||!this.hasSelection)&&x.button===0){if(!this._enabled){if(!this.shouldForceSelection(x))return;x.stopPropagation()}x.preventDefault(),this._dragScrollAmount=0,this._enabled&&x.shiftKey?this._handleIncrementalClick(x):x.detail===1?this._handleSingleClick(x):x.detail===2?this._handleDoubleClick(x):x.detail===3&&this._handleTripleClick(x),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(x){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(x))}_handleSingleClick(x){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(x)?3:0,this._model.selectionStart=this._getMouseBufferCoords(x),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const C=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);C&&C.length!==this._model.selectionStart[0]&&C.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(x){this._selectWordAtCursor(x,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(x){const C=this._getMouseBufferCoords(x);C&&(this._activeSelectionMode=2,this._selectLineAt(C[1]))}shouldColumnSelect(x){return x.altKey&&!(a.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(x){if(x.stopImmediatePropagation(),!this._model.selectionStart)return;const C=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(x),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(x),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const I=this._bufferService.buffer;if(this._model.selectionEnd[1]<I.lines.length){const R=I.lines.get(this._model.selectionEnd[1]);R&&R.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}C&&C[0]===this._model.selectionEnd[0]&&C[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const x=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(x.ydisp+this._bufferService.rows,x.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=x.ydisp),this.refresh()}}_handleMouseUp(x){const C=x.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&C<500&&x.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const I=this._mouseService.getCoords(x,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(I&&I[0]!==void 0&&I[1]!==void 0){const R=(0,v.moveToCellSequence)(I[0]-1,I[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(R,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const x=this._model.finalSelectionStart,C=this._model.finalSelectionEnd,I=!(!x||!C||x[0]===C[0]&&x[1]===C[1]);I?x&&C&&(this._oldSelectionStart&&this._oldSelectionEnd&&x[0]===this._oldSelectionStart[0]&&x[1]===this._oldSelectionStart[1]&&C[0]===this._oldSelectionEnd[0]&&C[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(x,C,I)):this._oldHasSelection&&this._fireOnSelectionChange(x,C,I)}_fireOnSelectionChange(x,C,I){this._oldSelectionStart=x,this._oldSelectionEnd=C,this._oldHasSelection=I,this._onSelectionChange.fire()}_handleBufferActivate(x){this.clearSelection(),this._trimListener.dispose(),this._trimListener=x.activeBuffer.lines.onTrim(C=>this._handleTrim(C))}_convertViewportColToCharacterIndex(x,C){let I=C;for(let R=0;C>=R;R++){const D=x.loadCell(R,this._workCell).getChars().length;this._workCell.getWidth()===0?I--:D>1&&C!==R&&(I+=D-1)}return I}setSelection(x,C,I){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[x,C],this._model.selectionStartLength=I,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(x){this._isClickInSelection(x)||(this._selectWordAtCursor(x,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(x,C,I=!0,R=!0){if(x[0]>=this._bufferService.cols)return;const D=this._bufferService.buffer,j=D.lines.get(x[1]);if(!j)return;const M=D.translateBufferLineToString(x[1],!1);let P=this._convertViewportColToCharacterIndex(j,x[0]),L=P;const F=x[0]-P;let $=0,B=0,H=0,z=0;if(M.charAt(P)===" "){for(;P>0&&M.charAt(P-1)===" ";)P--;for(;L<M.length&&M.charAt(L+1)===" ";)L++}else{let Y=x[0],K=x[0];j.getWidth(Y)===0&&($++,Y--),j.getWidth(K)===2&&(B++,K++);const ce=j.getString(K).length;for(ce>1&&(z+=ce-1,L+=ce-1);Y>0&&P>0&&!this._isCharWordSeparator(j.loadCell(Y-1,this._workCell));){j.loadCell(Y-1,this._workCell);const E=this._workCell.getChars().length;this._workCell.getWidth()===0?($++,Y--):E>1&&(H+=E-1,P-=E-1),P--,Y--}for(;K<j.length&&L+1<M.length&&!this._isCharWordSeparator(j.loadCell(K+1,this._workCell));){j.loadCell(K+1,this._workCell);const E=this._workCell.getChars().length;this._workCell.getWidth()===2?(B++,K++):E>1&&(z+=E-1,L+=E-1),L++,K++}}L++;let X=P+F-$+H,V=Math.min(this._bufferService.cols,L-P+$+B-H-z);if(C||M.slice(P,L).trim()!==""){if(I&&X===0&&j.getCodePoint(0)!==32){const Y=D.lines.get(x[1]-1);if(Y&&j.isWrapped&&Y.getCodePoint(this._bufferService.cols-1)!==32){const K=this._getWordAt([this._bufferService.cols-1,x[1]-1],!1,!0,!1);if(K){const ce=this._bufferService.cols-K.start;X-=ce,V+=ce}}}if(R&&X+V===this._bufferService.cols&&j.getCodePoint(this._bufferService.cols-1)!==32){const Y=D.lines.get(x[1]+1);if(Y?.isWrapped&&Y.getCodePoint(0)!==32){const K=this._getWordAt([0,x[1]+1],!1,!1,!0);K&&(V+=K.length)}}return{start:X,length:V}}}_selectWordAt(x,C){const I=this._getWordAt(x,C);if(I){for(;I.start<0;)I.start+=this._bufferService.cols,x[1]--;this._model.selectionStart=[I.start,x[1]],this._model.selectionStartLength=I.length}}_selectToWordAt(x){const C=this._getWordAt(x,!0);if(C){let I=x[1];for(;C.start<0;)C.start+=this._bufferService.cols,I--;if(!this._model.areSelectionValuesReversed())for(;C.start+C.length>this._bufferService.cols;)C.length-=this._bufferService.cols,I++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?C.start:C.start+C.length,I]}}_isCharWordSeparator(x){return x.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(x.getChars())>=0}_selectLineAt(x){const C=this._bufferService.buffer.getWrappedRangeForLine(x),I={start:{x:0,y:C.first},end:{x:this._bufferService.cols-1,y:C.last}};this._model.selectionStart=[0,C.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,o.getRangeLength)(I,this._bufferService.cols)}};s.SelectionService=A=u([f(3,m.IBufferService),f(4,m.ICoreService),f(5,S.IMouseService),f(6,m.IOptionsService),f(7,S.IRenderService),f(8,S.ICoreBrowserService)],A)},4725:(h,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IThemeService=s.ICharacterJoinerService=s.ISelectionService=s.IRenderService=s.IMouseService=s.ICoreBrowserService=s.ICharSizeService=void 0;const u=i(8343);s.ICharSizeService=(0,u.createDecorator)("CharSizeService"),s.ICoreBrowserService=(0,u.createDecorator)("CoreBrowserService"),s.IMouseService=(0,u.createDecorator)("MouseService"),s.IRenderService=(0,u.createDecorator)("RenderService"),s.ISelectionService=(0,u.createDecorator)("SelectionService"),s.ICharacterJoinerService=(0,u.createDecorator)("CharacterJoinerService"),s.IThemeService=(0,u.createDecorator)("ThemeService")},6731:function(h,s,i){var u=this&&this.__decorate||function(A,x,C,I){var R,D=arguments.length,j=D<3?x:I===null?I=Object.getOwnPropertyDescriptor(x,C):I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(A,x,C,I);else for(var M=A.length-1;M>=0;M--)(R=A[M])&&(j=(D<3?R(j):D>3?R(x,C,j):R(x,C))||j);return D>3&&j&&Object.defineProperty(x,C,j),j},f=this&&this.__param||function(A,x){return function(C,I){x(C,I,A)}};Object.defineProperty(s,"__esModule",{value:!0}),s.ThemeService=s.DEFAULT_ANSI_COLORS=void 0;const g=i(7239),v=i(8055),b=i(8460),S=i(844),y=i(2585),l=v.css.toColor("#ffffff"),a=v.css.toColor("#000000"),o=v.css.toColor("#ffffff"),c=v.css.toColor("#000000"),m={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};s.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const A=[v.css.toColor("#2e3436"),v.css.toColor("#cc0000"),v.css.toColor("#4e9a06"),v.css.toColor("#c4a000"),v.css.toColor("#3465a4"),v.css.toColor("#75507b"),v.css.toColor("#06989a"),v.css.toColor("#d3d7cf"),v.css.toColor("#555753"),v.css.toColor("#ef2929"),v.css.toColor("#8ae234"),v.css.toColor("#fce94f"),v.css.toColor("#729fcf"),v.css.toColor("#ad7fa8"),v.css.toColor("#34e2e2"),v.css.toColor("#eeeeec")],x=[0,95,135,175,215,255];for(let C=0;C<216;C++){const I=x[C/36%6|0],R=x[C/6%6|0],D=x[C%6];A.push({css:v.channels.toCss(I,R,D),rgba:v.channels.toRgba(I,R,D)})}for(let C=0;C<24;C++){const I=8+10*C;A.push({css:v.channels.toCss(I,I,I),rgba:v.channels.toRgba(I,I,I)})}return A})());let w=s.ThemeService=class extends S.Disposable{get colors(){return this._colors}constructor(A){super(),this._optionsService=A,this._contrastCache=new g.ColorContrastCache,this._halfContrastCache=new g.ColorContrastCache,this._onChangeColors=this.register(new b.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:l,background:a,cursor:o,cursorAccent:c,selectionForeground:void 0,selectionBackgroundTransparent:m,selectionBackgroundOpaque:v.color.blend(a,m),selectionInactiveBackgroundTransparent:m,selectionInactiveBackgroundOpaque:v.color.blend(a,m),ansi:s.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(A={}){const x=this._colors;if(x.foreground=k(A.foreground,l),x.background=k(A.background,a),x.cursor=k(A.cursor,o),x.cursorAccent=k(A.cursorAccent,c),x.selectionBackgroundTransparent=k(A.selectionBackground,m),x.selectionBackgroundOpaque=v.color.blend(x.background,x.selectionBackgroundTransparent),x.selectionInactiveBackgroundTransparent=k(A.selectionInactiveBackground,x.selectionBackgroundTransparent),x.selectionInactiveBackgroundOpaque=v.color.blend(x.background,x.selectionInactiveBackgroundTransparent),x.selectionForeground=A.selectionForeground?k(A.selectionForeground,v.NULL_COLOR):void 0,x.selectionForeground===v.NULL_COLOR&&(x.selectionForeground=void 0),v.color.isOpaque(x.selectionBackgroundTransparent)&&(x.selectionBackgroundTransparent=v.color.opacity(x.selectionBackgroundTransparent,.3)),v.color.isOpaque(x.selectionInactiveBackgroundTransparent)&&(x.selectionInactiveBackgroundTransparent=v.color.opacity(x.selectionInactiveBackgroundTransparent,.3)),x.ansi=s.DEFAULT_ANSI_COLORS.slice(),x.ansi[0]=k(A.black,s.DEFAULT_ANSI_COLORS[0]),x.ansi[1]=k(A.red,s.DEFAULT_ANSI_COLORS[1]),x.ansi[2]=k(A.green,s.DEFAULT_ANSI_COLORS[2]),x.ansi[3]=k(A.yellow,s.DEFAULT_ANSI_COLORS[3]),x.ansi[4]=k(A.blue,s.DEFAULT_ANSI_COLORS[4]),x.ansi[5]=k(A.magenta,s.DEFAULT_ANSI_COLORS[5]),x.ansi[6]=k(A.cyan,s.DEFAULT_ANSI_COLORS[6]),x.ansi[7]=k(A.white,s.DEFAULT_ANSI_COLORS[7]),x.ansi[8]=k(A.brightBlack,s.DEFAULT_ANSI_COLORS[8]),x.ansi[9]=k(A.brightRed,s.DEFAULT_ANSI_COLORS[9]),x.ansi[10]=k(A.brightGreen,s.DEFAULT_ANSI_COLORS[10]),x.ansi[11]=k(A.brightYellow,s.DEFAULT_ANSI_COLORS[11]),x.ansi[12]=k(A.brightBlue,s.DEFAULT_ANSI_COLORS[12]),x.ansi[13]=k(A.brightMagenta,s.DEFAULT_ANSI_COLORS[13]),x.ansi[14]=k(A.brightCyan,s.DEFAULT_ANSI_COLORS[14]),x.ansi[15]=k(A.brightWhite,s.DEFAULT_ANSI_COLORS[15]),A.extendedAnsi){const C=Math.min(x.ansi.length-16,A.extendedAnsi.length);for(let I=0;I<C;I++)x.ansi[I+16]=k(A.extendedAnsi[I],s.DEFAULT_ANSI_COLORS[I+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(A){this._restoreColor(A),this._onChangeColors.fire(this.colors)}_restoreColor(A){if(A!==void 0)switch(A){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[A]=this._restoreColors.ansi[A]}else for(let x=0;x<this._restoreColors.ansi.length;++x)this._colors.ansi[x]=this._restoreColors.ansi[x]}modifyColors(A){A(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function k(A,x){if(A!==void 0)try{return v.css.toColor(A)}catch{}return x}s.ThemeService=w=u([f(0,y.IOptionsService)],w)},6349:(h,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CircularList=void 0;const u=i(8460),f=i(844);class g extends f.Disposable{constructor(b){super(),this._maxLength=b,this.onDeleteEmitter=this.register(new u.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new u.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new u.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(b){if(this._maxLength===b)return;const S=new Array(b);for(let y=0;y<Math.min(b,this.length);y++)S[y]=this._array[this._getCyclicIndex(y)];this._array=S,this._maxLength=b,this._startIndex=0}get length(){return this._length}set length(b){if(b>this._length)for(let S=this._length;S<b;S++)this._array[S]=void 0;this._length=b}get(b){return this._array[this._getCyclicIndex(b)]}set(b,S){this._array[this._getCyclicIndex(b)]=S}push(b){this._array[this._getCyclicIndex(this._length)]=b,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(b,S,...y){if(S){for(let l=b;l<this._length-S;l++)this._array[this._getCyclicIndex(l)]=this._array[this._getCyclicIndex(l+S)];this._length-=S,this.onDeleteEmitter.fire({index:b,amount:S})}for(let l=this._length-1;l>=b;l--)this._array[this._getCyclicIndex(l+y.length)]=this._array[this._getCyclicIndex(l)];for(let l=0;l<y.length;l++)this._array[this._getCyclicIndex(b+l)]=y[l];if(y.length&&this.onInsertEmitter.fire({index:b,amount:y.length}),this._length+y.length>this._maxLength){const l=this._length+y.length-this._maxLength;this._startIndex+=l,this._length=this._maxLength,this.onTrimEmitter.fire(l)}else this._length+=y.length}trimStart(b){b>this._length&&(b=this._length),this._startIndex+=b,this._length-=b,this.onTrimEmitter.fire(b)}shiftElements(b,S,y){if(!(S<=0)){if(b<0||b>=this._length)throw new Error("start argument out of range");if(b+y<0)throw new Error("Cannot shift elements in list beyond index 0");if(y>0){for(let a=S-1;a>=0;a--)this.set(b+a+y,this.get(b+a));const l=b+S+y-this._length;if(l>0)for(this._length+=l;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let l=0;l<S;l++)this.set(b+l+y,this.get(b+l))}}_getCyclicIndex(b){return(this._startIndex+b)%this._maxLength}}s.CircularList=g},1439:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.clone=void 0,s.clone=function i(u,f=5){if(typeof u!="object")return u;const g=Array.isArray(u)?[]:{};for(const v in u)g[v]=f<=1?u[v]:u[v]&&i(u[v],f-1);return g}},8055:(h,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=s.NULL_COLOR=void 0;const u=i(6114);let f=0,g=0,v=0,b=0;var S,y,l,a,o;function c(w){const k=w.toString(16);return k.length<2?"0"+k:k}function m(w,k){return w<k?(k+.05)/(w+.05):(w+.05)/(k+.05)}s.NULL_COLOR={css:"#00000000",rgba:0},function(w){w.toCss=function(k,A,x,C){return C!==void 0?`#${c(k)}${c(A)}${c(x)}${c(C)}`:`#${c(k)}${c(A)}${c(x)}`},w.toRgba=function(k,A,x,C=255){return(k<<24|A<<16|x<<8|C)>>>0}}(S||(s.channels=S={})),function(w){function k(A,x){return b=Math.round(255*x),[f,g,v]=o.toChannels(A.rgba),{css:S.toCss(f,g,v,b),rgba:S.toRgba(f,g,v,b)}}w.blend=function(A,x){if(b=(255&x.rgba)/255,b===1)return{css:x.css,rgba:x.rgba};const C=x.rgba>>24&255,I=x.rgba>>16&255,R=x.rgba>>8&255,D=A.rgba>>24&255,j=A.rgba>>16&255,M=A.rgba>>8&255;return f=D+Math.round((C-D)*b),g=j+Math.round((I-j)*b),v=M+Math.round((R-M)*b),{css:S.toCss(f,g,v),rgba:S.toRgba(f,g,v)}},w.isOpaque=function(A){return(255&A.rgba)==255},w.ensureContrastRatio=function(A,x,C){const I=o.ensureContrastRatio(A.rgba,x.rgba,C);if(I)return o.toColor(I>>24&255,I>>16&255,I>>8&255)},w.opaque=function(A){const x=(255|A.rgba)>>>0;return[f,g,v]=o.toChannels(x),{css:S.toCss(f,g,v),rgba:x}},w.opacity=k,w.multiplyOpacity=function(A,x){return b=255&A.rgba,k(A,b*x/255)},w.toColorRGB=function(A){return[A.rgba>>24&255,A.rgba>>16&255,A.rgba>>8&255]}}(y||(s.color=y={})),function(w){let k,A;if(!u.isNode){const x=document.createElement("canvas");x.width=1,x.height=1;const C=x.getContext("2d",{willReadFrequently:!0});C&&(k=C,k.globalCompositeOperation="copy",A=k.createLinearGradient(0,0,1,1))}w.toColor=function(x){if(x.match(/#[\da-f]{3,8}/i))switch(x.length){case 4:return f=parseInt(x.slice(1,2).repeat(2),16),g=parseInt(x.slice(2,3).repeat(2),16),v=parseInt(x.slice(3,4).repeat(2),16),o.toColor(f,g,v);case 5:return f=parseInt(x.slice(1,2).repeat(2),16),g=parseInt(x.slice(2,3).repeat(2),16),v=parseInt(x.slice(3,4).repeat(2),16),b=parseInt(x.slice(4,5).repeat(2),16),o.toColor(f,g,v,b);case 7:return{css:x,rgba:(parseInt(x.slice(1),16)<<8|255)>>>0};case 9:return{css:x,rgba:parseInt(x.slice(1),16)>>>0}}const C=x.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(C)return f=parseInt(C[1]),g=parseInt(C[2]),v=parseInt(C[3]),b=Math.round(255*(C[5]===void 0?1:parseFloat(C[5]))),o.toColor(f,g,v,b);if(!k||!A)throw new Error("css.toColor: Unsupported css format");if(k.fillStyle=A,k.fillStyle=x,typeof k.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(k.fillRect(0,0,1,1),[f,g,v,b]=k.getImageData(0,0,1,1).data,b!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:S.toRgba(f,g,v,b),css:x}}}(l||(s.css=l={})),function(w){function k(A,x,C){const I=A/255,R=x/255,D=C/255;return .2126*(I<=.03928?I/12.92:Math.pow((I+.055)/1.055,2.4))+.7152*(R<=.03928?R/12.92:Math.pow((R+.055)/1.055,2.4))+.0722*(D<=.03928?D/12.92:Math.pow((D+.055)/1.055,2.4))}w.relativeLuminance=function(A){return k(A>>16&255,A>>8&255,255&A)},w.relativeLuminance2=k}(a||(s.rgb=a={})),function(w){function k(x,C,I){const R=x>>24&255,D=x>>16&255,j=x>>8&255;let M=C>>24&255,P=C>>16&255,L=C>>8&255,F=m(a.relativeLuminance2(M,P,L),a.relativeLuminance2(R,D,j));for(;F<I&&(M>0||P>0||L>0);)M-=Math.max(0,Math.ceil(.1*M)),P-=Math.max(0,Math.ceil(.1*P)),L-=Math.max(0,Math.ceil(.1*L)),F=m(a.relativeLuminance2(M,P,L),a.relativeLuminance2(R,D,j));return(M<<24|P<<16|L<<8|255)>>>0}function A(x,C,I){const R=x>>24&255,D=x>>16&255,j=x>>8&255;let M=C>>24&255,P=C>>16&255,L=C>>8&255,F=m(a.relativeLuminance2(M,P,L),a.relativeLuminance2(R,D,j));for(;F<I&&(M<255||P<255||L<255);)M=Math.min(255,M+Math.ceil(.1*(255-M))),P=Math.min(255,P+Math.ceil(.1*(255-P))),L=Math.min(255,L+Math.ceil(.1*(255-L))),F=m(a.relativeLuminance2(M,P,L),a.relativeLuminance2(R,D,j));return(M<<24|P<<16|L<<8|255)>>>0}w.ensureContrastRatio=function(x,C,I){const R=a.relativeLuminance(x>>8),D=a.relativeLuminance(C>>8);if(m(R,D)<I){if(D<R){const P=k(x,C,I),L=m(R,a.relativeLuminance(P>>8));if(L<I){const F=A(x,C,I);return L>m(R,a.relativeLuminance(F>>8))?P:F}return P}const j=A(x,C,I),M=m(R,a.relativeLuminance(j>>8));if(M<I){const P=k(x,C,I);return M>m(R,a.relativeLuminance(P>>8))?j:P}return j}},w.reduceLuminance=k,w.increaseLuminance=A,w.toChannels=function(x){return[x>>24&255,x>>16&255,x>>8&255,255&x]},w.toColor=function(x,C,I,R){return{css:S.toCss(x,C,I,R),rgba:S.toRgba(x,C,I,R)}}}(o||(s.rgba=o={})),s.toPaddedHex=c,s.contrastRatio=m},8969:(h,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreTerminal=void 0;const u=i(844),f=i(2585),g=i(4348),v=i(7866),b=i(744),S=i(7302),y=i(6975),l=i(8460),a=i(1753),o=i(1480),c=i(7994),m=i(9282),w=i(5435),k=i(5981),A=i(2660);let x=!1;class C extends u.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new l.EventEmitter),this._onScroll.event(R=>{var D;(D=this._onScrollApi)===null||D===void 0||D.fire(R.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(R){for(const D in R)this.optionsService.options[D]=R[D]}constructor(R){super(),this._windowsWrappingHeuristics=this.register(new u.MutableDisposable),this._onBinary=this.register(new l.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new l.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new l.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new l.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new l.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new l.EventEmitter),this._instantiationService=new g.InstantiationService,this.optionsService=this.register(new S.OptionsService(R)),this._instantiationService.setService(f.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(b.BufferService)),this._instantiationService.setService(f.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(v.LogService)),this._instantiationService.setService(f.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(y.CoreService)),this._instantiationService.setService(f.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(a.CoreMouseService)),this._instantiationService.setService(f.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(o.UnicodeService)),this._instantiationService.setService(f.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(c.CharsetService),this._instantiationService.setService(f.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(A.OscLinkService),this._instantiationService.setService(f.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new w.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,l.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,l.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,l.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,l.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(D=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(D=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new k.WriteBuffer((D,j)=>this._inputHandler.parse(D,j))),this.register((0,l.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(R,D){this._writeBuffer.write(R,D)}writeSync(R,D){this._logService.logLevel<=f.LogLevelEnum.WARN&&!x&&(this._logService.warn("writeSync is unreliable and will be removed soon."),x=!0),this._writeBuffer.writeSync(R,D)}resize(R,D){isNaN(R)||isNaN(D)||(R=Math.max(R,b.MINIMUM_COLS),D=Math.max(D,b.MINIMUM_ROWS),this._bufferService.resize(R,D))}scroll(R,D=!1){this._bufferService.scroll(R,D)}scrollLines(R,D,j){this._bufferService.scrollLines(R,D,j)}scrollPages(R){this.scrollLines(R*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(R){const D=R-this._bufferService.buffer.ydisp;D!==0&&this.scrollLines(D)}registerEscHandler(R,D){return this._inputHandler.registerEscHandler(R,D)}registerDcsHandler(R,D){return this._inputHandler.registerDcsHandler(R,D)}registerCsiHandler(R,D){return this._inputHandler.registerCsiHandler(R,D)}registerOscHandler(R,D){return this._inputHandler.registerOscHandler(R,D)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let R=!1;const D=this.optionsService.rawOptions.windowsPty;D&&D.buildNumber!==void 0&&D.buildNumber!==void 0?R=D.backend==="conpty"&&D.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(R=!0),R?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const R=[];R.push(this.onLineFeed(m.updateWindowsModeWrappedState.bind(null,this._bufferService))),R.push(this.registerCsiHandler({final:"H"},()=>((0,m.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,u.toDisposable)(()=>{for(const D of R)D.dispose()})}}}s.CoreTerminal=C},8460:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.forwardEvent=s.EventEmitter=void 0,s.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=i=>(this._listeners.push(i),{dispose:()=>{if(!this._disposed){for(let u=0;u<this._listeners.length;u++)if(this._listeners[u]===i)return void this._listeners.splice(u,1)}}})),this._event}fire(i,u){const f=[];for(let g=0;g<this._listeners.length;g++)f.push(this._listeners[g]);for(let g=0;g<f.length;g++)f[g].call(void 0,i,u)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},s.forwardEvent=function(i,u){return i(f=>u.fire(f))}},5435:function(h,s,i){var u=this&&this.__decorate||function(F,$,B,H){var z,X=arguments.length,V=X<3?$:H===null?H=Object.getOwnPropertyDescriptor($,B):H;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")V=Reflect.decorate(F,$,B,H);else for(var Y=F.length-1;Y>=0;Y--)(z=F[Y])&&(V=(X<3?z(V):X>3?z($,B,V):z($,B))||V);return X>3&&V&&Object.defineProperty($,B,V),V},f=this&&this.__param||function(F,$){return function(B,H){$(B,H,F)}};Object.defineProperty(s,"__esModule",{value:!0}),s.InputHandler=s.WindowsOptionsReportType=void 0;const g=i(2584),v=i(7116),b=i(2015),S=i(844),y=i(482),l=i(8437),a=i(8460),o=i(643),c=i(511),m=i(3734),w=i(2585),k=i(6242),A=i(6351),x=i(5941),C={"(":0,")":1,"*":2,"+":3,"-":1,".":2},I=131072;function R(F,$){if(F>24)return $.setWinLines||!1;switch(F){case 1:return!!$.restoreWin;case 2:return!!$.minimizeWin;case 3:return!!$.setWinPosition;case 4:return!!$.setWinSizePixels;case 5:return!!$.raiseWin;case 6:return!!$.lowerWin;case 7:return!!$.refreshWin;case 8:return!!$.setWinSizeChars;case 9:return!!$.maximizeWin;case 10:return!!$.fullscreenWin;case 11:return!!$.getWinState;case 13:return!!$.getWinPosition;case 14:return!!$.getWinSizePixels;case 15:return!!$.getScreenSizePixels;case 16:return!!$.getCellSizePixels;case 18:return!!$.getWinSizeChars;case 19:return!!$.getScreenSizeChars;case 20:return!!$.getIconTitle;case 21:return!!$.getWinTitle;case 22:return!!$.pushTitle;case 23:return!!$.popTitle;case 24:return!!$.setWinLines}return!1}var D;(function(F){F[F.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",F[F.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(D||(s.WindowsOptionsReportType=D={}));let j=0;class M extends S.Disposable{getAttrData(){return this._curAttrData}constructor($,B,H,z,X,V,Y,K,ce=new b.EscapeSequenceParser){super(),this._bufferService=$,this._charsetService=B,this._coreService=H,this._logService=z,this._optionsService=X,this._oscLinkService=V,this._coreMouseService=Y,this._unicodeService=K,this._parser=ce,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new y.StringToUtf32,this._utf8Decoder=new y.Utf8ToUtf32,this._workCell=new c.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new a.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new a.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new a.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new a.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new a.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new a.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new a.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new a.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new a.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new a.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new a.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new a.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new a.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new P(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(E=>this._activeBuffer=E.activeBuffer)),this._parser.setCsiHandlerFallback((E,N)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(E),params:N.toArray()})}),this._parser.setEscHandlerFallback(E=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(E)})}),this._parser.setExecuteHandlerFallback(E=>{this._logService.debug("Unknown EXECUTE code: ",{code:E})}),this._parser.setOscHandlerFallback((E,N,U)=>{this._logService.debug("Unknown OSC code: ",{identifier:E,action:N,data:U})}),this._parser.setDcsHandlerFallback((E,N,U)=>{N==="HOOK"&&(U=U.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(E),action:N,payload:U})}),this._parser.setPrintHandler((E,N,U)=>this.print(E,N,U)),this._parser.registerCsiHandler({final:"@"},E=>this.insertChars(E)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},E=>this.scrollLeft(E)),this._parser.registerCsiHandler({final:"A"},E=>this.cursorUp(E)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},E=>this.scrollRight(E)),this._parser.registerCsiHandler({final:"B"},E=>this.cursorDown(E)),this._parser.registerCsiHandler({final:"C"},E=>this.cursorForward(E)),this._parser.registerCsiHandler({final:"D"},E=>this.cursorBackward(E)),this._parser.registerCsiHandler({final:"E"},E=>this.cursorNextLine(E)),this._parser.registerCsiHandler({final:"F"},E=>this.cursorPrecedingLine(E)),this._parser.registerCsiHandler({final:"G"},E=>this.cursorCharAbsolute(E)),this._parser.registerCsiHandler({final:"H"},E=>this.cursorPosition(E)),this._parser.registerCsiHandler({final:"I"},E=>this.cursorForwardTab(E)),this._parser.registerCsiHandler({final:"J"},E=>this.eraseInDisplay(E,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},E=>this.eraseInDisplay(E,!0)),this._parser.registerCsiHandler({final:"K"},E=>this.eraseInLine(E,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},E=>this.eraseInLine(E,!0)),this._parser.registerCsiHandler({final:"L"},E=>this.insertLines(E)),this._parser.registerCsiHandler({final:"M"},E=>this.deleteLines(E)),this._parser.registerCsiHandler({final:"P"},E=>this.deleteChars(E)),this._parser.registerCsiHandler({final:"S"},E=>this.scrollUp(E)),this._parser.registerCsiHandler({final:"T"},E=>this.scrollDown(E)),this._parser.registerCsiHandler({final:"X"},E=>this.eraseChars(E)),this._parser.registerCsiHandler({final:"Z"},E=>this.cursorBackwardTab(E)),this._parser.registerCsiHandler({final:"`"},E=>this.charPosAbsolute(E)),this._parser.registerCsiHandler({final:"a"},E=>this.hPositionRelative(E)),this._parser.registerCsiHandler({final:"b"},E=>this.repeatPrecedingCharacter(E)),this._parser.registerCsiHandler({final:"c"},E=>this.sendDeviceAttributesPrimary(E)),this._parser.registerCsiHandler({prefix:">",final:"c"},E=>this.sendDeviceAttributesSecondary(E)),this._parser.registerCsiHandler({final:"d"},E=>this.linePosAbsolute(E)),this._parser.registerCsiHandler({final:"e"},E=>this.vPositionRelative(E)),this._parser.registerCsiHandler({final:"f"},E=>this.hVPosition(E)),this._parser.registerCsiHandler({final:"g"},E=>this.tabClear(E)),this._parser.registerCsiHandler({final:"h"},E=>this.setMode(E)),this._parser.registerCsiHandler({prefix:"?",final:"h"},E=>this.setModePrivate(E)),this._parser.registerCsiHandler({final:"l"},E=>this.resetMode(E)),this._parser.registerCsiHandler({prefix:"?",final:"l"},E=>this.resetModePrivate(E)),this._parser.registerCsiHandler({final:"m"},E=>this.charAttributes(E)),this._parser.registerCsiHandler({final:"n"},E=>this.deviceStatus(E)),this._parser.registerCsiHandler({prefix:"?",final:"n"},E=>this.deviceStatusPrivate(E)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},E=>this.softReset(E)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},E=>this.setCursorStyle(E)),this._parser.registerCsiHandler({final:"r"},E=>this.setScrollRegion(E)),this._parser.registerCsiHandler({final:"s"},E=>this.saveCursor(E)),this._parser.registerCsiHandler({final:"t"},E=>this.windowOptions(E)),this._parser.registerCsiHandler({final:"u"},E=>this.restoreCursor(E)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},E=>this.insertColumns(E)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},E=>this.deleteColumns(E)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},E=>this.selectProtected(E)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},E=>this.requestMode(E,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},E=>this.requestMode(E,!1)),this._parser.setExecuteHandler(g.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(g.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(g.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(g.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(g.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(g.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(g.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(g.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(g.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(g.C1.IND,()=>this.index()),this._parser.setExecuteHandler(g.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(g.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new k.OscHandler(E=>(this.setTitle(E),this.setIconName(E),!0))),this._parser.registerOscHandler(1,new k.OscHandler(E=>this.setIconName(E))),this._parser.registerOscHandler(2,new k.OscHandler(E=>this.setTitle(E))),this._parser.registerOscHandler(4,new k.OscHandler(E=>this.setOrReportIndexedColor(E))),this._parser.registerOscHandler(8,new k.OscHandler(E=>this.setHyperlink(E))),this._parser.registerOscHandler(10,new k.OscHandler(E=>this.setOrReportFgColor(E))),this._parser.registerOscHandler(11,new k.OscHandler(E=>this.setOrReportBgColor(E))),this._parser.registerOscHandler(12,new k.OscHandler(E=>this.setOrReportCursorColor(E))),this._parser.registerOscHandler(104,new k.OscHandler(E=>this.restoreIndexedColor(E))),this._parser.registerOscHandler(110,new k.OscHandler(E=>this.restoreFgColor(E))),this._parser.registerOscHandler(111,new k.OscHandler(E=>this.restoreBgColor(E))),this._parser.registerOscHandler(112,new k.OscHandler(E=>this.restoreCursorColor(E))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const E in v.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:E},()=>this.selectCharset("("+E)),this._parser.registerEscHandler({intermediates:")",final:E},()=>this.selectCharset(")"+E)),this._parser.registerEscHandler({intermediates:"*",final:E},()=>this.selectCharset("*"+E)),this._parser.registerEscHandler({intermediates:"+",final:E},()=>this.selectCharset("+"+E)),this._parser.registerEscHandler({intermediates:"-",final:E},()=>this.selectCharset("-"+E)),this._parser.registerEscHandler({intermediates:".",final:E},()=>this.selectCharset("."+E)),this._parser.registerEscHandler({intermediates:"/",final:E},()=>this.selectCharset("/"+E));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(E=>(this._logService.error("Parsing error: ",E),E)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new A.DcsHandler((E,N)=>this.requestStatusString(E,N)))}_preserveStack($,B,H,z){this._parseStack.paused=!0,this._parseStack.cursorStartX=$,this._parseStack.cursorStartY=B,this._parseStack.decodedLength=H,this._parseStack.position=z}_logSlowResolvingAsync($){this._logService.logLevel<=w.LogLevelEnum.WARN&&Promise.race([$,new Promise((B,H)=>setTimeout(()=>H("#SLOW_TIMEOUT"),5e3))]).catch(B=>{if(B!=="#SLOW_TIMEOUT")throw B;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse($,B){let H,z=this._activeBuffer.x,X=this._activeBuffer.y,V=0;const Y=this._parseStack.paused;if(Y){if(H=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,B))return this._logSlowResolvingAsync(H),H;z=this._parseStack.cursorStartX,X=this._parseStack.cursorStartY,this._parseStack.paused=!1,$.length>I&&(V=this._parseStack.position+I)}if(this._logService.logLevel<=w.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof $=="string"?` "${$}"`:` "${Array.prototype.map.call($,K=>String.fromCharCode(K)).join("")}"`),typeof $=="string"?$.split("").map(K=>K.charCodeAt(0)):$),this._parseBuffer.length<$.length&&this._parseBuffer.length<I&&(this._parseBuffer=new Uint32Array(Math.min($.length,I))),Y||this._dirtyRowTracker.clearRange(),$.length>I)for(let K=V;K<$.length;K+=I){const ce=K+I<$.length?K+I:$.length,E=typeof $=="string"?this._stringDecoder.decode($.substring(K,ce),this._parseBuffer):this._utf8Decoder.decode($.subarray(K,ce),this._parseBuffer);if(H=this._parser.parse(this._parseBuffer,E))return this._preserveStack(z,X,E,K),this._logSlowResolvingAsync(H),H}else if(!Y){const K=typeof $=="string"?this._stringDecoder.decode($,this._parseBuffer):this._utf8Decoder.decode($,this._parseBuffer);if(H=this._parser.parse(this._parseBuffer,K))return this._preserveStack(z,X,K,0),this._logSlowResolvingAsync(H),H}this._activeBuffer.x===z&&this._activeBuffer.y===X||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print($,B,H){let z,X;const V=this._charsetService.charset,Y=this._optionsService.rawOptions.screenReaderMode,K=this._bufferService.cols,ce=this._coreService.decPrivateModes.wraparound,E=this._coreService.modes.insertMode,N=this._curAttrData;let U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&H-B>0&&U.getWidth(this._activeBuffer.x-1)===2&&U.setCellFromCodePoint(this._activeBuffer.x-1,0,1,N.fg,N.bg,N.extended);for(let W=B;W<H;++W){if(z=$[W],X=this._unicodeService.wcwidth(z),z<127&&V){const q=V[String.fromCharCode(z)];q&&(z=q.charCodeAt(0))}if(Y&&this._onA11yChar.fire((0,y.stringFromCodePoint)(z)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),X||!this._activeBuffer.x){if(this._activeBuffer.x+X-1>=K){if(ce){for(;this._activeBuffer.x<K;)U.setCellFromCodePoint(this._activeBuffer.x++,0,1,N.fg,N.bg,N.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=K-1,X===2)continue}if(E&&(U.insertCells(this._activeBuffer.x,X,this._activeBuffer.getNullCell(N),N),U.getWidth(K-1)===2&&U.setCellFromCodePoint(K-1,o.NULL_CELL_CODE,o.NULL_CELL_WIDTH,N.fg,N.bg,N.extended)),U.setCellFromCodePoint(this._activeBuffer.x++,z,X,N.fg,N.bg,N.extended),X>0)for(;--X;)U.setCellFromCodePoint(this._activeBuffer.x++,0,0,N.fg,N.bg,N.extended)}else U.getWidth(this._activeBuffer.x-1)?U.addCodepointToCell(this._activeBuffer.x-1,z):U.addCodepointToCell(this._activeBuffer.x-2,z)}H-B>0&&(U.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<K&&H-B>0&&U.getWidth(this._activeBuffer.x)===0&&!U.hasContent(this._activeBuffer.x)&&U.setCellFromCodePoint(this._activeBuffer.x,0,1,N.fg,N.bg,N.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler($,B){return $.final!=="t"||$.prefix||$.intermediates?this._parser.registerCsiHandler($,B):this._parser.registerCsiHandler($,H=>!R(H.params[0],this._optionsService.rawOptions.windowOptions)||B(H))}registerDcsHandler($,B){return this._parser.registerDcsHandler($,new A.DcsHandler(B))}registerEscHandler($,B){return this._parser.registerEscHandler($,B)}registerOscHandler($,B){return this._parser.registerOscHandler($,new k.OscHandler(B))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var $;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!(($=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||$===void 0)&&$.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);B.hasWidth(this._activeBuffer.x)&&!B.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const $=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-$),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor($=this._bufferService.cols-1){this._activeBuffer.x=Math.min($,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor($,B){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=$,this._activeBuffer.y=this._activeBuffer.scrollTop+B):(this._activeBuffer.x=$,this._activeBuffer.y=B),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor($,B){this._restrictCursor(),this._setCursor(this._activeBuffer.x+$,this._activeBuffer.y+B)}cursorUp($){const B=this._activeBuffer.y-this._activeBuffer.scrollTop;return B>=0?this._moveCursor(0,-Math.min(B,$.params[0]||1)):this._moveCursor(0,-($.params[0]||1)),!0}cursorDown($){const B=this._activeBuffer.scrollBottom-this._activeBuffer.y;return B>=0?this._moveCursor(0,Math.min(B,$.params[0]||1)):this._moveCursor(0,$.params[0]||1),!0}cursorForward($){return this._moveCursor($.params[0]||1,0),!0}cursorBackward($){return this._moveCursor(-($.params[0]||1),0),!0}cursorNextLine($){return this.cursorDown($),this._activeBuffer.x=0,!0}cursorPrecedingLine($){return this.cursorUp($),this._activeBuffer.x=0,!0}cursorCharAbsolute($){return this._setCursor(($.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition($){return this._setCursor($.length>=2?($.params[1]||1)-1:0,($.params[0]||1)-1),!0}charPosAbsolute($){return this._setCursor(($.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative($){return this._moveCursor($.params[0]||1,0),!0}linePosAbsolute($){return this._setCursor(this._activeBuffer.x,($.params[0]||1)-1),!0}vPositionRelative($){return this._moveCursor(0,$.params[0]||1),!0}hVPosition($){return this.cursorPosition($),!0}tabClear($){const B=$.params[0];return B===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:B===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab($){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let B=$.params[0]||1;for(;B--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab($){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let B=$.params[0]||1;for(;B--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected($){const B=$.params[0];return B===1&&(this._curAttrData.bg|=536870912),B!==2&&B!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine($,B,H,z=!1,X=!1){const V=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);V.replaceCells(B,H,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),X),z&&(V.isWrapped=!1)}_resetBufferLine($,B=!1){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);H&&(H.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),B),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+$),H.isWrapped=!1)}eraseInDisplay($,B=!1){let H;switch(this._restrictCursor(this._bufferService.cols),$.params[0]){case 0:for(H=this._activeBuffer.y,this._dirtyRowTracker.markDirty(H),this._eraseInBufferLine(H++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,B);H<this._bufferService.rows;H++)this._resetBufferLine(H,B);this._dirtyRowTracker.markDirty(H);break;case 1:for(H=this._activeBuffer.y,this._dirtyRowTracker.markDirty(H),this._eraseInBufferLine(H,0,this._activeBuffer.x+1,!0,B),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(H+1).isWrapped=!1);H--;)this._resetBufferLine(H,B);this._dirtyRowTracker.markDirty(0);break;case 2:for(H=this._bufferService.rows,this._dirtyRowTracker.markDirty(H-1);H--;)this._resetBufferLine(H,B);this._dirtyRowTracker.markDirty(0);break;case 3:const z=this._activeBuffer.lines.length-this._bufferService.rows;z>0&&(this._activeBuffer.lines.trimStart(z),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-z,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-z,0),this._onScroll.fire(0))}return!0}eraseInLine($,B=!1){switch(this._restrictCursor(this._bufferService.cols),$.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,B);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,B);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,B)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines($){this._restrictCursor();let B=$.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=this._activeBuffer.ybase+this._activeBuffer.y,z=this._bufferService.rows-1-this._activeBuffer.scrollBottom,X=this._bufferService.rows-1+this._activeBuffer.ybase-z+1;for(;B--;)this._activeBuffer.lines.splice(X-1,1),this._activeBuffer.lines.splice(H,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines($){this._restrictCursor();let B=$.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=this._activeBuffer.ybase+this._activeBuffer.y;let z;for(z=this._bufferService.rows-1-this._activeBuffer.scrollBottom,z=this._bufferService.rows-1+this._activeBuffer.ybase-z;B--;)this._activeBuffer.lines.splice(H,1),this._activeBuffer.lines.splice(z,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars($){this._restrictCursor();const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return B&&(B.insertCells(this._activeBuffer.x,$.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars($){this._restrictCursor();const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return B&&(B.deleteCells(this._activeBuffer.x,$.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp($){let B=$.params[0]||1;for(;B--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown($){let B=$.params[0]||1;for(;B--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(l.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft($){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=$.params[0]||1;for(let H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);z.deleteCells(0,B,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),z.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight($){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=$.params[0]||1;for(let H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);z.insertCells(0,B,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),z.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns($){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=$.params[0]||1;for(let H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);z.insertCells(this._activeBuffer.x,B,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),z.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns($){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=$.params[0]||1;for(let H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);z.deleteCells(this._activeBuffer.x,B,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),z.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars($){this._restrictCursor();const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return B&&(B.replaceCells(this._activeBuffer.x,this._activeBuffer.x+($.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter($){if(!this._parser.precedingCodepoint)return!0;const B=$.params[0]||1,H=new Uint32Array(B);for(let z=0;z<B;++z)H[z]=this._parser.precedingCodepoint;return this.print(H,0,H.length),!0}sendDeviceAttributesPrimary($){return $.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(g.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(g.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary($){return $.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(g.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(g.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent($.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(g.C0.ESC+"[>83;40003;0c")),!0}_is($){return(this._optionsService.rawOptions.termName+"").indexOf($)===0}setMode($){for(let B=0;B<$.length;B++)switch($.params[B]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate($){for(let B=0;B<$.length;B++)switch($.params[B]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,v.DEFAULT_CHARSET),this._charsetService.setgCharset(1,v.DEFAULT_CHARSET),this._charsetService.setgCharset(2,v.DEFAULT_CHARSET),this._charsetService.setgCharset(3,v.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode($){for(let B=0;B<$.length;B++)switch($.params[B]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate($){for(let B=0;B<$.length;B++)switch($.params[B]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),$.params[B]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode($,B){const H=this._coreService.decPrivateModes,{activeProtocol:z,activeEncoding:X}=this._coreMouseService,V=this._coreService,{buffers:Y,cols:K}=this._bufferService,{active:ce,alt:E}=Y,N=this._optionsService.rawOptions,U=Q=>Q?1:2,W=$.params[0];return q=W,G=B?W===2?4:W===4?U(V.modes.insertMode):W===12?3:W===20?U(N.convertEol):0:W===1?U(H.applicationCursorKeys):W===3?N.windowOptions.setWinLines?K===80?2:K===132?1:0:0:W===6?U(H.origin):W===7?U(H.wraparound):W===8?3:W===9?U(z==="X10"):W===12?U(N.cursorBlink):W===25?U(!V.isCursorHidden):W===45?U(H.reverseWraparound):W===66?U(H.applicationKeypad):W===67?4:W===1e3?U(z==="VT200"):W===1002?U(z==="DRAG"):W===1003?U(z==="ANY"):W===1004?U(H.sendFocus):W===1005?4:W===1006?U(X==="SGR"):W===1015?4:W===1016?U(X==="SGR_PIXELS"):W===1048?1:W===47||W===1047||W===1049?U(ce===E):W===2004?U(H.bracketedPasteMode):0,V.triggerDataEvent(`${g.C0.ESC}[${B?"":"?"}${q};${G}$y`),!0;var q,G}_updateAttrColor($,B,H,z,X){return B===2?($|=50331648,$&=-16777216,$|=m.AttributeData.fromColorRGB([H,z,X])):B===5&&($&=-50331904,$|=33554432|255&H),$}_extractColor($,B,H){const z=[0,0,-1,0,0,0];let X=0,V=0;do{if(z[V+X]=$.params[B+V],$.hasSubParams(B+V)){const Y=$.getSubParams(B+V);let K=0;do z[1]===5&&(X=1),z[V+K+1+X]=Y[K];while(++K<Y.length&&K+V+1+X<z.length);break}if(z[1]===5&&V+X>=2||z[1]===2&&V+X>=5)break;z[1]&&(X=1)}while(++V+B<$.length&&V+X<z.length);for(let Y=2;Y<z.length;++Y)z[Y]===-1&&(z[Y]=0);switch(z[0]){case 38:H.fg=this._updateAttrColor(H.fg,z[1],z[3],z[4],z[5]);break;case 48:H.bg=this._updateAttrColor(H.bg,z[1],z[3],z[4],z[5]);break;case 58:H.extended=H.extended.clone(),H.extended.underlineColor=this._updateAttrColor(H.extended.underlineColor,z[1],z[3],z[4],z[5])}return V}_processUnderline($,B){B.extended=B.extended.clone(),(!~$||$>5)&&($=1),B.extended.underlineStyle=$,B.fg|=268435456,$===0&&(B.fg&=-268435457),B.updateExtended()}_processSGR0($){$.fg=l.DEFAULT_ATTR_DATA.fg,$.bg=l.DEFAULT_ATTR_DATA.bg,$.extended=$.extended.clone(),$.extended.underlineStyle=0,$.extended.underlineColor&=-67108864,$.updateExtended()}charAttributes($){if($.length===1&&$.params[0]===0)return this._processSGR0(this._curAttrData),!0;const B=$.length;let H;const z=this._curAttrData;for(let X=0;X<B;X++)H=$.params[X],H>=30&&H<=37?(z.fg&=-50331904,z.fg|=16777216|H-30):H>=40&&H<=47?(z.bg&=-50331904,z.bg|=16777216|H-40):H>=90&&H<=97?(z.fg&=-50331904,z.fg|=16777224|H-90):H>=100&&H<=107?(z.bg&=-50331904,z.bg|=16777224|H-100):H===0?this._processSGR0(z):H===1?z.fg|=134217728:H===3?z.bg|=67108864:H===4?(z.fg|=268435456,this._processUnderline($.hasSubParams(X)?$.getSubParams(X)[0]:1,z)):H===5?z.fg|=536870912:H===7?z.fg|=67108864:H===8?z.fg|=1073741824:H===9?z.fg|=2147483648:H===2?z.bg|=134217728:H===21?this._processUnderline(2,z):H===22?(z.fg&=-134217729,z.bg&=-134217729):H===23?z.bg&=-67108865:H===24?(z.fg&=-268435457,this._processUnderline(0,z)):H===25?z.fg&=-536870913:H===27?z.fg&=-67108865:H===28?z.fg&=-1073741825:H===29?z.fg&=2147483647:H===39?(z.fg&=-67108864,z.fg|=16777215&l.DEFAULT_ATTR_DATA.fg):H===49?(z.bg&=-67108864,z.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):H===38||H===48||H===58?X+=this._extractColor($,X,z):H===53?z.bg|=1073741824:H===55?z.bg&=-1073741825:H===59?(z.extended=z.extended.clone(),z.extended.underlineColor=-1,z.updateExtended()):H===100?(z.fg&=-67108864,z.fg|=16777215&l.DEFAULT_ATTR_DATA.fg,z.bg&=-67108864,z.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",H);return!0}deviceStatus($){switch($.params[0]){case 5:this._coreService.triggerDataEvent(`${g.C0.ESC}[0n`);break;case 6:const B=this._activeBuffer.y+1,H=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${g.C0.ESC}[${B};${H}R`)}return!0}deviceStatusPrivate($){if($.params[0]===6){const B=this._activeBuffer.y+1,H=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${g.C0.ESC}[?${B};${H}R`)}return!0}softReset($){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle($){const B=$.params[0]||1;switch(B){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const H=B%2==1;return this._optionsService.options.cursorBlink=H,!0}setScrollRegion($){const B=$.params[0]||1;let H;return($.length<2||(H=$.params[1])>this._bufferService.rows||H===0)&&(H=this._bufferService.rows),H>B&&(this._activeBuffer.scrollTop=B-1,this._activeBuffer.scrollBottom=H-1,this._setCursor(0,0)),!0}windowOptions($){if(!R($.params[0],this._optionsService.rawOptions.windowOptions))return!0;const B=$.length>1?$.params[1]:0;switch($.params[0]){case 14:B!==2&&this._onRequestWindowsOptionsReport.fire(D.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(D.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${g.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:B!==0&&B!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),B!==0&&B!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:B!==0&&B!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),B!==0&&B!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor($){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor($){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle($){return this._windowTitle=$,this._onTitleChange.fire($),!0}setIconName($){return this._iconName=$,!0}setOrReportIndexedColor($){const B=[],H=$.split(";");for(;H.length>1;){const z=H.shift(),X=H.shift();if(/^\d+$/.exec(z)){const V=parseInt(z);if(L(V))if(X==="?")B.push({type:0,index:V});else{const Y=(0,x.parseColor)(X);Y&&B.push({type:1,index:V,color:Y})}}}return B.length&&this._onColor.fire(B),!0}setHyperlink($){const B=$.split(";");return!(B.length<2)&&(B[1]?this._createHyperlink(B[0],B[1]):!B[0]&&this._finishHyperlink())}_createHyperlink($,B){this._getCurrentLinkId()&&this._finishHyperlink();const H=$.split(":");let z;const X=H.findIndex(V=>V.startsWith("id="));return X!==-1&&(z=H[X].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:z,uri:B}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor($,B){const H=$.split(";");for(let z=0;z<H.length&&!(B>=this._specialColors.length);++z,++B)if(H[z]==="?")this._onColor.fire([{type:0,index:this._specialColors[B]}]);else{const X=(0,x.parseColor)(H[z]);X&&this._onColor.fire([{type:1,index:this._specialColors[B],color:X}])}return!0}setOrReportFgColor($){return this._setOrReportSpecialColor($,0)}setOrReportBgColor($){return this._setOrReportSpecialColor($,1)}setOrReportCursorColor($){return this._setOrReportSpecialColor($,2)}restoreIndexedColor($){if(!$)return this._onColor.fire([{type:2}]),!0;const B=[],H=$.split(";");for(let z=0;z<H.length;++z)if(/^\d+$/.exec(H[z])){const X=parseInt(H[z]);L(X)&&B.push({type:2,index:X})}return B.length&&this._onColor.fire(B),!0}restoreFgColor($){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor($){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor($){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,v.DEFAULT_CHARSET),!0}selectCharset($){return $.length!==2?(this.selectDefaultCharset(),!0):($[0]==="/"||this._charsetService.setgCharset(C[$[0]],v.CHARSETS[$[1]]||v.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const $=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,$,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel($){return this._charsetService.setgLevel($),!0}screenAlignmentPattern(){const $=new c.CellData;$.content=4194373,$.fg=this._curAttrData.fg,$.bg=this._curAttrData.bg,this._setCursor(0,0);for(let B=0;B<this._bufferService.rows;++B){const H=this._activeBuffer.ybase+this._activeBuffer.y+B,z=this._activeBuffer.lines.get(H);z&&(z.fill($),z.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString($,B){const H=this._bufferService.buffer,z=this._optionsService.rawOptions;return(X=>(this._coreService.triggerDataEvent(`${g.C0.ESC}${X}${g.C0.ESC}\\`),!0))($==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:$==='"p'?'P1$r61;1"p':$==="r"?`P1$r${H.scrollTop+1};${H.scrollBottom+1}r`:$==="m"?"P1$r0m":$===" q"?`P1$r${{block:2,underline:4,bar:6}[z.cursorStyle]-(z.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty($,B){this._dirtyRowTracker.markRangeDirty($,B)}}s.InputHandler=M;let P=class{constructor(F){this._bufferService=F,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(F){F<this.start?this.start=F:F>this.end&&(this.end=F)}markRangeDirty(F,$){F>$&&(j=F,F=$,$=j),F<this.start&&(this.start=F),$>this.end&&(this.end=$)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function L(F){return 0<=F&&F<256}P=u([f(0,w.IBufferService)],P)},844:(h,s)=>{function i(u){for(const f of u)f.dispose();u.length=0}Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.toDisposable=s.MutableDisposable=s.Disposable=void 0,s.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const u of this._disposables)u.dispose();this._disposables.length=0}register(u){return this._disposables.push(u),u}unregister(u){const f=this._disposables.indexOf(u);f!==-1&&this._disposables.splice(f,1)}},s.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(u){var f;this._isDisposed||u===this._value||((f=this._value)===null||f===void 0||f.dispose(),this._value=u)}clear(){this.value=void 0}dispose(){var u;this._isDisposed=!0,(u=this._value)===null||u===void 0||u.dispose(),this._value=void 0}},s.toDisposable=function(u){return{dispose:u}},s.disposeArray=i,s.getDisposeArrayDisposable=function(u){return{dispose:()=>i(u)}}},1505:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FourKeyMap=s.TwoKeyMap=void 0;class i{constructor(){this._data={}}set(f,g,v){this._data[f]||(this._data[f]={}),this._data[f][g]=v}get(f,g){return this._data[f]?this._data[f][g]:void 0}clear(){this._data={}}}s.TwoKeyMap=i,s.FourKeyMap=class{constructor(){this._data=new i}set(u,f,g,v,b){this._data.get(u,f)||this._data.set(u,f,new i),this._data.get(u,f).set(g,v,b)}get(u,f,g,v){var b;return(b=this._data.get(u,f))===null||b===void 0?void 0:b.get(g,v)}clear(){this._data.clear()}}},6114:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isChromeOS=s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.getSafariVersion=s.isSafari=s.isLegacyEdge=s.isFirefox=s.isNode=void 0,s.isNode=typeof navigator>"u";const i=s.isNode?"node":navigator.userAgent,u=s.isNode?"node":navigator.platform;s.isFirefox=i.includes("Firefox"),s.isLegacyEdge=i.includes("Edge"),s.isSafari=/^((?!chrome|android).)*safari/i.test(i),s.getSafariVersion=function(){if(!s.isSafari)return 0;const f=i.match(/Version\/(\d+)/);return f===null||f.length<2?0:parseInt(f[1])},s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(u),s.isIpad=u==="iPad",s.isIphone=u==="iPhone",s.isWindows=["Windows","Win16","Win32","WinCE"].includes(u),s.isLinux=u.indexOf("Linux")>=0,s.isChromeOS=/\bCrOS\b/.test(i)},6106:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SortedList=void 0;let i=0;s.SortedList=class{constructor(u){this._getKey=u,this._array=[]}clear(){this._array.length=0}insert(u){this._array.length!==0?(i=this._search(this._getKey(u)),this._array.splice(i,0,u)):this._array.push(u)}delete(u){if(this._array.length===0)return!1;const f=this._getKey(u);if(f===void 0||(i=this._search(f),i===-1)||this._getKey(this._array[i])!==f)return!1;do if(this._array[i]===u)return this._array.splice(i,1),!0;while(++i<this._array.length&&this._getKey(this._array[i])===f);return!1}*getKeyIterator(u){if(this._array.length!==0&&(i=this._search(u),!(i<0||i>=this._array.length)&&this._getKey(this._array[i])===u))do yield this._array[i];while(++i<this._array.length&&this._getKey(this._array[i])===u)}forEachByKey(u,f){if(this._array.length!==0&&(i=this._search(u),!(i<0||i>=this._array.length)&&this._getKey(this._array[i])===u))do f(this._array[i]);while(++i<this._array.length&&this._getKey(this._array[i])===u)}values(){return[...this._array].values()}_search(u){let f=0,g=this._array.length-1;for(;g>=f;){let v=f+g>>1;const b=this._getKey(this._array[v]);if(b>u)g=v-1;else{if(!(b<u)){for(;v>0&&this._getKey(this._array[v-1])===u;)v--;return v}f=v+1}}return f}}},7226:(h,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DebouncedIdleTask=s.IdleTaskQueue=s.PriorityTaskQueue=void 0;const u=i(6114);class f{constructor(){this._tasks=[],this._i=0}enqueue(b){this._tasks.push(b),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(b){this._idleCallback=void 0;let S=0,y=0,l=b.timeRemaining(),a=0;for(;this._i<this._tasks.length;){if(S=Date.now(),this._tasks[this._i]()||this._i++,S=Math.max(1,Date.now()-S),y=Math.max(S,y),a=b.timeRemaining(),1.5*y>a)return l-S<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(l-S))}ms`),void this._start();l=a}this.clear()}}class g extends f{_requestCallback(b){return setTimeout(()=>b(this._createDeadline(16)))}_cancelCallback(b){clearTimeout(b)}_createDeadline(b){const S=Date.now()+b;return{timeRemaining:()=>Math.max(0,S-Date.now())}}}s.PriorityTaskQueue=g,s.IdleTaskQueue=!u.isNode&&"requestIdleCallback"in window?class extends f{_requestCallback(v){return requestIdleCallback(v)}_cancelCallback(v){cancelIdleCallback(v)}}:g,s.DebouncedIdleTask=class{constructor(){this._queue=new s.IdleTaskQueue}set(v){this._queue.clear(),this._queue.enqueue(v)}flush(){this._queue.flush()}}},9282:(h,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.updateWindowsModeWrappedState=void 0;const u=i(643);s.updateWindowsModeWrappedState=function(f){const g=f.buffer.lines.get(f.buffer.ybase+f.buffer.y-1),v=g?.get(f.cols-1),b=f.buffer.lines.get(f.buffer.ybase+f.buffer.y);b&&v&&(b.isWrapped=v[u.CHAR_DATA_CODE_INDEX]!==u.NULL_CELL_CODE&&v[u.CHAR_DATA_CODE_INDEX]!==u.WHITESPACE_CELL_CODE)}},3734:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;class i{constructor(){this.fg=0,this.bg=0,this.extended=new u}static toColorRGB(g){return[g>>>16&255,g>>>8&255,255&g]}static fromColorRGB(g){return(255&g[0])<<16|(255&g[1])<<8|255&g[2]}clone(){const g=new i;return g.fg=this.fg,g.bg=this.bg,g.extended=this.extended.clone(),g}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}s.AttributeData=i;class u{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(g){this._ext=g}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(g){this._ext&=-469762049,this._ext|=g<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(g){this._ext&=-67108864,this._ext|=67108863&g}get urlId(){return this._urlId}set urlId(g){this._urlId=g}constructor(g=0,v=0){this._ext=0,this._urlId=0,this._ext=g,this._urlId=v}clone(){return new u(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}s.ExtendedAttrs=u},9092:(h,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Buffer=s.MAX_BUFFER_SIZE=void 0;const u=i(6349),f=i(7226),g=i(3734),v=i(8437),b=i(4634),S=i(511),y=i(643),l=i(4863),a=i(7116);s.MAX_BUFFER_SIZE=4294967295,s.Buffer=class{constructor(o,c,m){this._hasScrollback=o,this._optionsService=c,this._bufferService=m,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=v.DEFAULT_ATTR_DATA.clone(),this.savedCharset=a.DEFAULT_CHARSET,this.markers=[],this._nullCell=S.CellData.fromCharData([0,y.NULL_CELL_CHAR,y.NULL_CELL_WIDTH,y.NULL_CELL_CODE]),this._whitespaceCell=S.CellData.fromCharData([0,y.WHITESPACE_CELL_CHAR,y.WHITESPACE_CELL_WIDTH,y.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new f.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(o){return o?(this._nullCell.fg=o.fg,this._nullCell.bg=o.bg,this._nullCell.extended=o.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new g.ExtendedAttrs),this._nullCell}getWhitespaceCell(o){return o?(this._whitespaceCell.fg=o.fg,this._whitespaceCell.bg=o.bg,this._whitespaceCell.extended=o.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new g.ExtendedAttrs),this._whitespaceCell}getBlankLine(o,c){return new v.BufferLine(this._bufferService.cols,this.getNullCell(o),c)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const o=this.ybase+this.y-this.ydisp;return o>=0&&o<this._rows}_getCorrectBufferLength(o){if(!this._hasScrollback)return o;const c=o+this._optionsService.rawOptions.scrollback;return c>s.MAX_BUFFER_SIZE?s.MAX_BUFFER_SIZE:c}fillViewportRows(o){if(this.lines.length===0){o===void 0&&(o=v.DEFAULT_ATTR_DATA);let c=this._rows;for(;c--;)this.lines.push(this.getBlankLine(o))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(o,c){const m=this.getNullCell(v.DEFAULT_ATTR_DATA);let w=0;const k=this._getCorrectBufferLength(c);if(k>this.lines.maxLength&&(this.lines.maxLength=k),this.lines.length>0){if(this._cols<o)for(let x=0;x<this.lines.length;x++)w+=+this.lines.get(x).resize(o,m);let A=0;if(this._rows<c)for(let x=this._rows;x<c;x++)this.lines.length<c+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new v.BufferLine(o,m)):this.ybase>0&&this.lines.length<=this.ybase+this.y+A+1?(this.ybase--,A++,this.ydisp>0&&this.ydisp--):this.lines.push(new v.BufferLine(o,m)));else for(let x=this._rows;x>c;x--)this.lines.length>c+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(k<this.lines.maxLength){const x=this.lines.length-k;x>0&&(this.lines.trimStart(x),this.ybase=Math.max(this.ybase-x,0),this.ydisp=Math.max(this.ydisp-x,0),this.savedY=Math.max(this.savedY-x,0)),this.lines.maxLength=k}this.x=Math.min(this.x,o-1),this.y=Math.min(this.y,c-1),A&&(this.y+=A),this.savedX=Math.min(this.savedX,o-1),this.scrollTop=0}if(this.scrollBottom=c-1,this._isReflowEnabled&&(this._reflow(o,c),this._cols>o))for(let A=0;A<this.lines.length;A++)w+=+this.lines.get(A).resize(o,m);this._cols=o,this._rows=c,this._memoryCleanupQueue.clear(),w>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let o=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,o=!1);let c=0;for(;this._memoryCleanupPosition<this.lines.length;)if(c+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),c>100)return!0;return o}get _isReflowEnabled(){const o=this._optionsService.rawOptions.windowsPty;return o&&o.buildNumber?this._hasScrollback&&o.backend==="conpty"&&o.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(o,c){this._cols!==o&&(o>this._cols?this._reflowLarger(o,c):this._reflowSmaller(o,c))}_reflowLarger(o,c){const m=(0,b.reflowLargerGetLinesToRemove)(this.lines,this._cols,o,this.ybase+this.y,this.getNullCell(v.DEFAULT_ATTR_DATA));if(m.length>0){const w=(0,b.reflowLargerCreateNewLayout)(this.lines,m);(0,b.reflowLargerApplyNewLayout)(this.lines,w.layout),this._reflowLargerAdjustViewport(o,c,w.countRemoved)}}_reflowLargerAdjustViewport(o,c,m){const w=this.getNullCell(v.DEFAULT_ATTR_DATA);let k=m;for(;k-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<c&&this.lines.push(new v.BufferLine(o,w))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-m,0)}_reflowSmaller(o,c){const m=this.getNullCell(v.DEFAULT_ATTR_DATA),w=[];let k=0;for(let A=this.lines.length-1;A>=0;A--){let x=this.lines.get(A);if(!x||!x.isWrapped&&x.getTrimmedLength()<=o)continue;const C=[x];for(;x.isWrapped&&A>0;)x=this.lines.get(--A),C.unshift(x);const I=this.ybase+this.y;if(I>=A&&I<A+C.length)continue;const R=C[C.length-1].getTrimmedLength(),D=(0,b.reflowSmallerGetNewLineLengths)(C,this._cols,o),j=D.length-C.length;let M;M=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+j):Math.max(0,this.lines.length-this.lines.maxLength+j);const P=[];for(let z=0;z<j;z++){const X=this.getBlankLine(v.DEFAULT_ATTR_DATA,!0);P.push(X)}P.length>0&&(w.push({start:A+C.length+k,newLines:P}),k+=P.length),C.push(...P);let L=D.length-1,F=D[L];F===0&&(L--,F=D[L]);let $=C.length-j-1,B=R;for(;$>=0;){const z=Math.min(B,F);if(C[L]===void 0)break;if(C[L].copyCellsFrom(C[$],B-z,F-z,z,!0),F-=z,F===0&&(L--,F=D[L]),B-=z,B===0){$--;const X=Math.max($,0);B=(0,b.getWrappedLineTrimmedLength)(C,X,this._cols)}}for(let z=0;z<C.length;z++)D[z]<o&&C[z].setCell(D[z],m);let H=j-M;for(;H-- >0;)this.ybase===0?this.y<c-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+k)-c&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+j,this.ybase+c-1)}if(w.length>0){const A=[],x=[];for(let L=0;L<this.lines.length;L++)x.push(this.lines.get(L));const C=this.lines.length;let I=C-1,R=0,D=w[R];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+k);let j=0;for(let L=Math.min(this.lines.maxLength-1,C+k-1);L>=0;L--)if(D&&D.start>I+j){for(let F=D.newLines.length-1;F>=0;F--)this.lines.set(L--,D.newLines[F]);L++,A.push({index:I+1,amount:D.newLines.length}),j+=D.newLines.length,D=w[++R]}else this.lines.set(L,x[I--]);let M=0;for(let L=A.length-1;L>=0;L--)A[L].index+=M,this.lines.onInsertEmitter.fire(A[L]),M+=A[L].amount;const P=Math.max(0,C+k-this.lines.maxLength);P>0&&this.lines.onTrimEmitter.fire(P)}}translateBufferLineToString(o,c,m=0,w){const k=this.lines.get(o);return k?k.translateToString(c,m,w):""}getWrappedRangeForLine(o){let c=o,m=o;for(;c>0&&this.lines.get(c).isWrapped;)c--;for(;m+1<this.lines.length&&this.lines.get(m+1).isWrapped;)m++;return{first:c,last:m}}setupTabStops(o){for(o!=null?this.tabs[o]||(o=this.prevStop(o)):(this.tabs={},o=0);o<this._cols;o+=this._optionsService.rawOptions.tabStopWidth)this.tabs[o]=!0}prevStop(o){for(o==null&&(o=this.x);!this.tabs[--o]&&o>0;);return o>=this._cols?this._cols-1:o<0?0:o}nextStop(o){for(o==null&&(o=this.x);!this.tabs[++o]&&o<this._cols;);return o>=this._cols?this._cols-1:o<0?0:o}clearMarkers(o){this._isClearing=!0;for(let c=0;c<this.markers.length;c++)this.markers[c].line===o&&(this.markers[c].dispose(),this.markers.splice(c--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let o=0;o<this.markers.length;o++)this.markers[o].dispose(),this.markers.splice(o--,1);this._isClearing=!1}addMarker(o){const c=new l.Marker(o);return this.markers.push(c),c.register(this.lines.onTrim(m=>{c.line-=m,c.line<0&&c.dispose()})),c.register(this.lines.onInsert(m=>{c.line>=m.index&&(c.line+=m.amount)})),c.register(this.lines.onDelete(m=>{c.line>=m.index&&c.line<m.index+m.amount&&c.dispose(),c.line>m.index&&(c.line-=m.amount)})),c.register(c.onDispose(()=>this._removeMarker(c))),c}_removeMarker(o){this._isClearing||this.markers.splice(this.markers.indexOf(o),1)}}},8437:(h,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLine=s.DEFAULT_ATTR_DATA=void 0;const u=i(3734),f=i(511),g=i(643),v=i(482);s.DEFAULT_ATTR_DATA=Object.freeze(new u.AttributeData);let b=0;class S{constructor(l,a,o=!1){this.isWrapped=o,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*l);const c=a||f.CellData.fromCharData([0,g.NULL_CELL_CHAR,g.NULL_CELL_WIDTH,g.NULL_CELL_CODE]);for(let m=0;m<l;++m)this.setCell(m,c);this.length=l}get(l){const a=this._data[3*l+0],o=2097151&a;return[this._data[3*l+1],2097152&a?this._combined[l]:o?(0,v.stringFromCodePoint)(o):"",a>>22,2097152&a?this._combined[l].charCodeAt(this._combined[l].length-1):o]}set(l,a){this._data[3*l+1]=a[g.CHAR_DATA_ATTR_INDEX],a[g.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[l]=a[1],this._data[3*l+0]=2097152|l|a[g.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*l+0]=a[g.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|a[g.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(l){return this._data[3*l+0]>>22}hasWidth(l){return 12582912&this._data[3*l+0]}getFg(l){return this._data[3*l+1]}getBg(l){return this._data[3*l+2]}hasContent(l){return 4194303&this._data[3*l+0]}getCodePoint(l){const a=this._data[3*l+0];return 2097152&a?this._combined[l].charCodeAt(this._combined[l].length-1):2097151&a}isCombined(l){return 2097152&this._data[3*l+0]}getString(l){const a=this._data[3*l+0];return 2097152&a?this._combined[l]:2097151&a?(0,v.stringFromCodePoint)(2097151&a):""}isProtected(l){return 536870912&this._data[3*l+2]}loadCell(l,a){return b=3*l,a.content=this._data[b+0],a.fg=this._data[b+1],a.bg=this._data[b+2],2097152&a.content&&(a.combinedData=this._combined[l]),268435456&a.bg&&(a.extended=this._extendedAttrs[l]),a}setCell(l,a){2097152&a.content&&(this._combined[l]=a.combinedData),268435456&a.bg&&(this._extendedAttrs[l]=a.extended),this._data[3*l+0]=a.content,this._data[3*l+1]=a.fg,this._data[3*l+2]=a.bg}setCellFromCodePoint(l,a,o,c,m,w){268435456&m&&(this._extendedAttrs[l]=w),this._data[3*l+0]=a|o<<22,this._data[3*l+1]=c,this._data[3*l+2]=m}addCodepointToCell(l,a){let o=this._data[3*l+0];2097152&o?this._combined[l]+=(0,v.stringFromCodePoint)(a):(2097151&o?(this._combined[l]=(0,v.stringFromCodePoint)(2097151&o)+(0,v.stringFromCodePoint)(a),o&=-2097152,o|=2097152):o=a|4194304,this._data[3*l+0]=o)}insertCells(l,a,o,c){if((l%=this.length)&&this.getWidth(l-1)===2&&this.setCellFromCodePoint(l-1,0,1,c?.fg||0,c?.bg||0,c?.extended||new u.ExtendedAttrs),a<this.length-l){const m=new f.CellData;for(let w=this.length-l-a-1;w>=0;--w)this.setCell(l+a+w,this.loadCell(l+w,m));for(let w=0;w<a;++w)this.setCell(l+w,o)}else for(let m=l;m<this.length;++m)this.setCell(m,o);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,c?.fg||0,c?.bg||0,c?.extended||new u.ExtendedAttrs)}deleteCells(l,a,o,c){if(l%=this.length,a<this.length-l){const m=new f.CellData;for(let w=0;w<this.length-l-a;++w)this.setCell(l+w,this.loadCell(l+a+w,m));for(let w=this.length-a;w<this.length;++w)this.setCell(w,o)}else for(let m=l;m<this.length;++m)this.setCell(m,o);l&&this.getWidth(l-1)===2&&this.setCellFromCodePoint(l-1,0,1,c?.fg||0,c?.bg||0,c?.extended||new u.ExtendedAttrs),this.getWidth(l)!==0||this.hasContent(l)||this.setCellFromCodePoint(l,0,1,c?.fg||0,c?.bg||0,c?.extended||new u.ExtendedAttrs)}replaceCells(l,a,o,c,m=!1){if(m)for(l&&this.getWidth(l-1)===2&&!this.isProtected(l-1)&&this.setCellFromCodePoint(l-1,0,1,c?.fg||0,c?.bg||0,c?.extended||new u.ExtendedAttrs),a<this.length&&this.getWidth(a-1)===2&&!this.isProtected(a)&&this.setCellFromCodePoint(a,0,1,c?.fg||0,c?.bg||0,c?.extended||new u.ExtendedAttrs);l<a&&l<this.length;)this.isProtected(l)||this.setCell(l,o),l++;else for(l&&this.getWidth(l-1)===2&&this.setCellFromCodePoint(l-1,0,1,c?.fg||0,c?.bg||0,c?.extended||new u.ExtendedAttrs),a<this.length&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a,0,1,c?.fg||0,c?.bg||0,c?.extended||new u.ExtendedAttrs);l<a&&l<this.length;)this.setCell(l++,o)}resize(l,a){if(l===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const o=3*l;if(l>this.length){if(this._data.buffer.byteLength>=4*o)this._data=new Uint32Array(this._data.buffer,0,o);else{const c=new Uint32Array(o);c.set(this._data),this._data=c}for(let c=this.length;c<l;++c)this.setCell(c,a)}else{this._data=this._data.subarray(0,o);const c=Object.keys(this._combined);for(let w=0;w<c.length;w++){const k=parseInt(c[w],10);k>=l&&delete this._combined[k]}const m=Object.keys(this._extendedAttrs);for(let w=0;w<m.length;w++){const k=parseInt(m[w],10);k>=l&&delete this._extendedAttrs[k]}}return this.length=l,4*o*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const l=new Uint32Array(this._data.length);return l.set(this._data),this._data=l,1}return 0}fill(l,a=!1){if(a)for(let o=0;o<this.length;++o)this.isProtected(o)||this.setCell(o,l);else{this._combined={},this._extendedAttrs={};for(let o=0;o<this.length;++o)this.setCell(o,l)}}copyFrom(l){this.length!==l.length?this._data=new Uint32Array(l._data):this._data.set(l._data),this.length=l.length,this._combined={};for(const a in l._combined)this._combined[a]=l._combined[a];this._extendedAttrs={};for(const a in l._extendedAttrs)this._extendedAttrs[a]=l._extendedAttrs[a];this.isWrapped=l.isWrapped}clone(){const l=new S(0);l._data=new Uint32Array(this._data),l.length=this.length;for(const a in this._combined)l._combined[a]=this._combined[a];for(const a in this._extendedAttrs)l._extendedAttrs[a]=this._extendedAttrs[a];return l.isWrapped=this.isWrapped,l}getTrimmedLength(){for(let l=this.length-1;l>=0;--l)if(4194303&this._data[3*l+0])return l+(this._data[3*l+0]>>22);return 0}getNoBgTrimmedLength(){for(let l=this.length-1;l>=0;--l)if(4194303&this._data[3*l+0]||50331648&this._data[3*l+2])return l+(this._data[3*l+0]>>22);return 0}copyCellsFrom(l,a,o,c,m){const w=l._data;if(m)for(let A=c-1;A>=0;A--){for(let x=0;x<3;x++)this._data[3*(o+A)+x]=w[3*(a+A)+x];268435456&w[3*(a+A)+2]&&(this._extendedAttrs[o+A]=l._extendedAttrs[a+A])}else for(let A=0;A<c;A++){for(let x=0;x<3;x++)this._data[3*(o+A)+x]=w[3*(a+A)+x];268435456&w[3*(a+A)+2]&&(this._extendedAttrs[o+A]=l._extendedAttrs[a+A])}const k=Object.keys(l._combined);for(let A=0;A<k.length;A++){const x=parseInt(k[A],10);x>=a&&(this._combined[x-a+o]=l._combined[x])}}translateToString(l=!1,a=0,o=this.length){l&&(o=Math.min(o,this.getTrimmedLength()));let c="";for(;a<o;){const m=this._data[3*a+0],w=2097151&m;c+=2097152&m?this._combined[a]:w?(0,v.stringFromCodePoint)(w):g.WHITESPACE_CELL_CHAR,a+=m>>22||1}return c}}s.BufferLine=S},4841:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getRangeLength=void 0,s.getRangeLength=function(i,u){if(i.start.y>i.end.y)throw new Error(`Buffer range end (${i.end.x}, ${i.end.y}) cannot be before start (${i.start.x}, ${i.start.y})`);return u*(i.end.y-i.start.y)+(i.end.x-i.start.x+1)}},4634:(h,s)=>{function i(u,f,g){if(f===u.length-1)return u[f].getTrimmedLength();const v=!u[f].hasContent(g-1)&&u[f].getWidth(g-1)===1,b=u[f+1].getWidth(0)===2;return v&&b?g-1:g}Object.defineProperty(s,"__esModule",{value:!0}),s.getWrappedLineTrimmedLength=s.reflowSmallerGetNewLineLengths=s.reflowLargerApplyNewLayout=s.reflowLargerCreateNewLayout=s.reflowLargerGetLinesToRemove=void 0,s.reflowLargerGetLinesToRemove=function(u,f,g,v,b){const S=[];for(let y=0;y<u.length-1;y++){let l=y,a=u.get(++l);if(!a.isWrapped)continue;const o=[u.get(y)];for(;l<u.length&&a.isWrapped;)o.push(a),a=u.get(++l);if(v>=y&&v<l){y+=o.length-1;continue}let c=0,m=i(o,c,f),w=1,k=0;for(;w<o.length;){const x=i(o,w,f),C=x-k,I=g-m,R=Math.min(C,I);o[c].copyCellsFrom(o[w],k,m,R,!1),m+=R,m===g&&(c++,m=0),k+=R,k===x&&(w++,k=0),m===0&&c!==0&&o[c-1].getWidth(g-1)===2&&(o[c].copyCellsFrom(o[c-1],g-1,m++,1,!1),o[c-1].setCell(g-1,b))}o[c].replaceCells(m,g,b);let A=0;for(let x=o.length-1;x>0&&(x>c||o[x].getTrimmedLength()===0);x--)A++;A>0&&(S.push(y+o.length-A),S.push(A)),y+=o.length-1}return S},s.reflowLargerCreateNewLayout=function(u,f){const g=[];let v=0,b=f[v],S=0;for(let y=0;y<u.length;y++)if(b===y){const l=f[++v];u.onDeleteEmitter.fire({index:y-S,amount:l}),y+=l-1,S+=l,b=f[++v]}else g.push(y);return{layout:g,countRemoved:S}},s.reflowLargerApplyNewLayout=function(u,f){const g=[];for(let v=0;v<f.length;v++)g.push(u.get(f[v]));for(let v=0;v<g.length;v++)u.set(v,g[v]);u.length=f.length},s.reflowSmallerGetNewLineLengths=function(u,f,g){const v=[],b=u.map((a,o)=>i(u,o,f)).reduce((a,o)=>a+o);let S=0,y=0,l=0;for(;l<b;){if(b-l<g){v.push(b-l);break}S+=g;const a=i(u,y,f);S>a&&(S-=a,y++);const o=u[y].getWidth(S-1)===2;o&&S--;const c=o?g-1:g;v.push(c),l+=c}return v},s.getWrappedLineTrimmedLength=i},5295:(h,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferSet=void 0;const u=i(8460),f=i(844),g=i(9092);class v extends f.Disposable{constructor(S,y){super(),this._optionsService=S,this._bufferService=y,this._onBufferActivate=this.register(new u.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new g.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new g.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(S){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(S),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(S,y){this._normal.resize(S,y),this._alt.resize(S,y),this.setupTabStops(S)}setupTabStops(S){this._normal.setupTabStops(S),this._alt.setupTabStops(S)}}s.BufferSet=v},511:(h,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;const u=i(482),f=i(643),g=i(3734);class v extends g.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new g.ExtendedAttrs,this.combinedData=""}static fromCharData(S){const y=new v;return y.setFromCharData(S),y}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,u.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(S){this.fg=S[f.CHAR_DATA_ATTR_INDEX],this.bg=0;let y=!1;if(S[f.CHAR_DATA_CHAR_INDEX].length>2)y=!0;else if(S[f.CHAR_DATA_CHAR_INDEX].length===2){const l=S[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=l&&l<=56319){const a=S[f.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=a&&a<=57343?this.content=1024*(l-55296)+a-56320+65536|S[f.CHAR_DATA_WIDTH_INDEX]<<22:y=!0}else y=!0}else this.content=S[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|S[f.CHAR_DATA_WIDTH_INDEX]<<22;y&&(this.combinedData=S[f.CHAR_DATA_CHAR_INDEX],this.content=2097152|S[f.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.CellData=v},643:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_EXT=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=0,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.DEFAULT_EXT=0,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},4863:(h,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Marker=void 0;const u=i(8460),f=i(844);class g{get id(){return this._id}constructor(b){this.line=b,this.isDisposed=!1,this._disposables=[],this._id=g._nextId++,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,f.disposeArray)(this._disposables),this._disposables.length=0)}register(b){return this._disposables.push(b),b}}s.Marker=g,g._nextId=1},7116:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DEFAULT_CHARSET=s.CHARSETS=void 0,s.CHARSETS={},s.DEFAULT_CHARSET=s.CHARSETS.B,s.CHARSETS[0]={"`":"â",a:"â",b:"â",c:"â",d:"â",e:"â",f:"Â°",g:"Â±",h:"â¤",i:"â",j:"â",k:"â",l:"â",m:"â",n:"â¼",o:"âº",p:"â»",q:"â",r:"â¼",s:"â½",t:"â",u:"â¤",v:"â´",w:"â¬",x:"â",y:"â¤",z:"â¥","{":"Ï","|":"â ","}":"Â£","~":"Â·"},s.CHARSETS.A={"#":"Â£"},s.CHARSETS.B=void 0,s.CHARSETS[4]={"#":"Â£","@":"Â¾","[":"ij","\\":"Â½","]":"|","{":"Â¨","|":"f","}":"Â¼","~":"Â´"},s.CHARSETS.C=s.CHARSETS[5]={"[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã©","{":"Ã¤","|":"Ã¶","}":"Ã¥","~":"Ã¼"},s.CHARSETS.R={"#":"Â£","@":"Ã ","[":"Â°","\\":"Ã§","]":"Â§","{":"Ã©","|":"Ã¹","}":"Ã¨","~":"Â¨"},s.CHARSETS.Q={"@":"Ã ","[":"Ã¢","\\":"Ã§","]":"Ãª","^":"Ã®","`":"Ã´","{":"Ã©","|":"Ã¹","}":"Ã¨","~":"Ã»"},s.CHARSETS.K={"@":"Â§","[":"Ã","\\":"Ã","]":"Ã","{":"Ã¤","|":"Ã¶","}":"Ã¼","~":"Ã"},s.CHARSETS.Y={"#":"Â£","@":"Â§","[":"Â°","\\":"Ã§","]":"Ã©","`":"Ã¹","{":"Ã ","|":"Ã²","}":"Ã¨","~":"Ã¬"},s.CHARSETS.E=s.CHARSETS[6]={"@":"Ã","[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã¤","{":"Ã¦","|":"Ã¸","}":"Ã¥","~":"Ã¼"},s.CHARSETS.Z={"#":"Â£","@":"Â§","[":"Â¡","\\":"Ã","]":"Â¿","{":"Â°","|":"Ã±","}":"Ã§"},s.CHARSETS.H=s.CHARSETS[7]={"@":"Ã","[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã©","{":"Ã¤","|":"Ã¶","}":"Ã¥","~":"Ã¼"},s.CHARSETS["="]={"#":"Ã¹","@":"Ã ","[":"Ã©","\\":"Ã§","]":"Ãª","^":"Ã®",_:"Ã¨","`":"Ã´","{":"Ã¤","|":"Ã¶","}":"Ã¼","~":"Ã»"}},2584:(h,s)=>{var i,u,f;Object.defineProperty(s,"__esModule",{value:!0}),s.C1_ESCAPED=s.C1=s.C0=void 0,function(g){g.NUL="\0",g.SOH="",g.STX="",g.ETX="",g.EOT="",g.ENQ="",g.ACK="",g.BEL="\x07",g.BS="\b",g.HT="	",g.LF=`
`,g.VT="\v",g.FF="\f",g.CR="\r",g.SO="",g.SI="",g.DLE="",g.DC1="",g.DC2="",g.DC3="",g.DC4="",g.NAK="",g.SYN="",g.ETB="",g.CAN="",g.EM="",g.SUB="",g.ESC="\x1B",g.FS="",g.GS="",g.RS="",g.US="",g.SP=" ",g.DEL=""}(i||(s.C0=i={})),function(g){g.PAD="Â",g.HOP="Â",g.BPH="Â",g.NBH="Â",g.IND="Â",g.NEL="Â",g.SSA="Â",g.ESA="Â",g.HTS="Â",g.HTJ="Â",g.VTS="Â",g.PLD="Â",g.PLU="Â",g.RI="Â",g.SS2="Â",g.SS3="Â",g.DCS="Â",g.PU1="Â",g.PU2="Â",g.STS="Â",g.CCH="Â",g.MW="Â",g.SPA="Â",g.EPA="Â",g.SOS="Â",g.SGCI="Â",g.SCI="Â",g.CSI="Â",g.ST="Â",g.OSC="Â",g.PM="Â",g.APC="Â"}(u||(s.C1=u={})),function(g){g.ST=`${i.ESC}\\`}(f||(s.C1_ESCAPED=f={}))},7399:(h,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.evaluateKeyboardEvent=void 0;const u=i(2584),f={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};s.evaluateKeyboardEvent=function(g,v,b,S){const y={type:0,cancel:!1,key:void 0},l=(g.shiftKey?1:0)|(g.altKey?2:0)|(g.ctrlKey?4:0)|(g.metaKey?8:0);switch(g.keyCode){case 0:g.key==="UIKeyInputUpArrow"?y.key=v?u.C0.ESC+"OA":u.C0.ESC+"[A":g.key==="UIKeyInputLeftArrow"?y.key=v?u.C0.ESC+"OD":u.C0.ESC+"[D":g.key==="UIKeyInputRightArrow"?y.key=v?u.C0.ESC+"OC":u.C0.ESC+"[C":g.key==="UIKeyInputDownArrow"&&(y.key=v?u.C0.ESC+"OB":u.C0.ESC+"[B");break;case 8:if(g.altKey){y.key=u.C0.ESC+u.C0.DEL;break}y.key=u.C0.DEL;break;case 9:if(g.shiftKey){y.key=u.C0.ESC+"[Z";break}y.key=u.C0.HT,y.cancel=!0;break;case 13:y.key=g.altKey?u.C0.ESC+u.C0.CR:u.C0.CR,y.cancel=!0;break;case 27:y.key=u.C0.ESC,g.altKey&&(y.key=u.C0.ESC+u.C0.ESC),y.cancel=!0;break;case 37:if(g.metaKey)break;l?(y.key=u.C0.ESC+"[1;"+(l+1)+"D",y.key===u.C0.ESC+"[1;3D"&&(y.key=u.C0.ESC+(b?"b":"[1;5D"))):y.key=v?u.C0.ESC+"OD":u.C0.ESC+"[D";break;case 39:if(g.metaKey)break;l?(y.key=u.C0.ESC+"[1;"+(l+1)+"C",y.key===u.C0.ESC+"[1;3C"&&(y.key=u.C0.ESC+(b?"f":"[1;5C"))):y.key=v?u.C0.ESC+"OC":u.C0.ESC+"[C";break;case 38:if(g.metaKey)break;l?(y.key=u.C0.ESC+"[1;"+(l+1)+"A",b||y.key!==u.C0.ESC+"[1;3A"||(y.key=u.C0.ESC+"[1;5A")):y.key=v?u.C0.ESC+"OA":u.C0.ESC+"[A";break;case 40:if(g.metaKey)break;l?(y.key=u.C0.ESC+"[1;"+(l+1)+"B",b||y.key!==u.C0.ESC+"[1;3B"||(y.key=u.C0.ESC+"[1;5B")):y.key=v?u.C0.ESC+"OB":u.C0.ESC+"[B";break;case 45:g.shiftKey||g.ctrlKey||(y.key=u.C0.ESC+"[2~");break;case 46:y.key=l?u.C0.ESC+"[3;"+(l+1)+"~":u.C0.ESC+"[3~";break;case 36:y.key=l?u.C0.ESC+"[1;"+(l+1)+"H":v?u.C0.ESC+"OH":u.C0.ESC+"[H";break;case 35:y.key=l?u.C0.ESC+"[1;"+(l+1)+"F":v?u.C0.ESC+"OF":u.C0.ESC+"[F";break;case 33:g.shiftKey?y.type=2:g.ctrlKey?y.key=u.C0.ESC+"[5;"+(l+1)+"~":y.key=u.C0.ESC+"[5~";break;case 34:g.shiftKey?y.type=3:g.ctrlKey?y.key=u.C0.ESC+"[6;"+(l+1)+"~":y.key=u.C0.ESC+"[6~";break;case 112:y.key=l?u.C0.ESC+"[1;"+(l+1)+"P":u.C0.ESC+"OP";break;case 113:y.key=l?u.C0.ESC+"[1;"+(l+1)+"Q":u.C0.ESC+"OQ";break;case 114:y.key=l?u.C0.ESC+"[1;"+(l+1)+"R":u.C0.ESC+"OR";break;case 115:y.key=l?u.C0.ESC+"[1;"+(l+1)+"S":u.C0.ESC+"OS";break;case 116:y.key=l?u.C0.ESC+"[15;"+(l+1)+"~":u.C0.ESC+"[15~";break;case 117:y.key=l?u.C0.ESC+"[17;"+(l+1)+"~":u.C0.ESC+"[17~";break;case 118:y.key=l?u.C0.ESC+"[18;"+(l+1)+"~":u.C0.ESC+"[18~";break;case 119:y.key=l?u.C0.ESC+"[19;"+(l+1)+"~":u.C0.ESC+"[19~";break;case 120:y.key=l?u.C0.ESC+"[20;"+(l+1)+"~":u.C0.ESC+"[20~";break;case 121:y.key=l?u.C0.ESC+"[21;"+(l+1)+"~":u.C0.ESC+"[21~";break;case 122:y.key=l?u.C0.ESC+"[23;"+(l+1)+"~":u.C0.ESC+"[23~";break;case 123:y.key=l?u.C0.ESC+"[24;"+(l+1)+"~":u.C0.ESC+"[24~";break;default:if(!g.ctrlKey||g.shiftKey||g.altKey||g.metaKey)if(b&&!S||!g.altKey||g.metaKey)!b||g.altKey||g.ctrlKey||g.shiftKey||!g.metaKey?g.key&&!g.ctrlKey&&!g.altKey&&!g.metaKey&&g.keyCode>=48&&g.key.length===1?y.key=g.key:g.key&&g.ctrlKey&&(g.key==="_"&&(y.key=u.C0.US),g.key==="@"&&(y.key=u.C0.NUL)):g.keyCode===65&&(y.type=1);else{const a=f[g.keyCode],o=a?.[g.shiftKey?1:0];if(o)y.key=u.C0.ESC+o;else if(g.keyCode>=65&&g.keyCode<=90){const c=g.ctrlKey?g.keyCode-64:g.keyCode+32;let m=String.fromCharCode(c);g.shiftKey&&(m=m.toUpperCase()),y.key=u.C0.ESC+m}else if(g.keyCode===32)y.key=u.C0.ESC+(g.ctrlKey?u.C0.NUL:" ");else if(g.key==="Dead"&&g.code.startsWith("Key")){let c=g.code.slice(3,4);g.shiftKey||(c=c.toLowerCase()),y.key=u.C0.ESC+c,y.cancel=!0}}else g.keyCode>=65&&g.keyCode<=90?y.key=String.fromCharCode(g.keyCode-64):g.keyCode===32?y.key=u.C0.NUL:g.keyCode>=51&&g.keyCode<=55?y.key=String.fromCharCode(g.keyCode-51+27):g.keyCode===56?y.key=u.C0.DEL:g.keyCode===219?y.key=u.C0.ESC:g.keyCode===220?y.key=u.C0.FS:g.keyCode===221&&(y.key=u.C0.GS)}return y}},482:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(i){return i>65535?(i-=65536,String.fromCharCode(55296+(i>>10))+String.fromCharCode(i%1024+56320)):String.fromCharCode(i)},s.utf32ToString=function(i,u=0,f=i.length){let g="";for(let v=u;v<f;++v){let b=i[v];b>65535?(b-=65536,g+=String.fromCharCode(55296+(b>>10))+String.fromCharCode(b%1024+56320)):g+=String.fromCharCode(b)}return g},s.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(i,u){const f=i.length;if(!f)return 0;let g=0,v=0;if(this._interim){const b=i.charCodeAt(v++);56320<=b&&b<=57343?u[g++]=1024*(this._interim-55296)+b-56320+65536:(u[g++]=this._interim,u[g++]=b),this._interim=0}for(let b=v;b<f;++b){const S=i.charCodeAt(b);if(55296<=S&&S<=56319){if(++b>=f)return this._interim=S,g;const y=i.charCodeAt(b);56320<=y&&y<=57343?u[g++]=1024*(S-55296)+y-56320+65536:(u[g++]=S,u[g++]=y)}else S!==65279&&(u[g++]=S)}return g}},s.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(i,u){const f=i.length;if(!f)return 0;let g,v,b,S,y=0,l=0,a=0;if(this.interim[0]){let m=!1,w=this.interim[0];w&=(224&w)==192?31:(240&w)==224?15:7;let k,A=0;for(;(k=63&this.interim[++A])&&A<4;)w<<=6,w|=k;const x=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,C=x-A;for(;a<C;){if(a>=f)return 0;if(k=i[a++],(192&k)!=128){a--,m=!0;break}this.interim[A++]=k,w<<=6,w|=63&k}m||(x===2?w<128?a--:u[y++]=w:x===3?w<2048||w>=55296&&w<=57343||w===65279||(u[y++]=w):w<65536||w>1114111||(u[y++]=w)),this.interim.fill(0)}const o=f-4;let c=a;for(;c<f;){for(;!(!(c<o)||128&(g=i[c])||128&(v=i[c+1])||128&(b=i[c+2])||128&(S=i[c+3]));)u[y++]=g,u[y++]=v,u[y++]=b,u[y++]=S,c+=4;if(g=i[c++],g<128)u[y++]=g;else if((224&g)==192){if(c>=f)return this.interim[0]=g,y;if(v=i[c++],(192&v)!=128){c--;continue}if(l=(31&g)<<6|63&v,l<128){c--;continue}u[y++]=l}else if((240&g)==224){if(c>=f)return this.interim[0]=g,y;if(v=i[c++],(192&v)!=128){c--;continue}if(c>=f)return this.interim[0]=g,this.interim[1]=v,y;if(b=i[c++],(192&b)!=128){c--;continue}if(l=(15&g)<<12|(63&v)<<6|63&b,l<2048||l>=55296&&l<=57343||l===65279)continue;u[y++]=l}else if((248&g)==240){if(c>=f)return this.interim[0]=g,y;if(v=i[c++],(192&v)!=128){c--;continue}if(c>=f)return this.interim[0]=g,this.interim[1]=v,y;if(b=i[c++],(192&b)!=128){c--;continue}if(c>=f)return this.interim[0]=g,this.interim[1]=v,this.interim[2]=b,y;if(S=i[c++],(192&S)!=128){c--;continue}if(l=(7&g)<<18|(63&v)<<12|(63&b)<<6|63&S,l<65536||l>1114111)continue;u[y++]=l}}return y}}},225:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeV6=void 0;const i=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],u=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let f;s.UnicodeV6=class{constructor(){if(this.version="6",!f){f=new Uint8Array(65536),f.fill(1),f[0]=0,f.fill(0,1,32),f.fill(0,127,160),f.fill(2,4352,4448),f[9001]=2,f[9002]=2,f.fill(2,11904,42192),f[12351]=1,f.fill(2,44032,55204),f.fill(2,63744,64256),f.fill(2,65040,65050),f.fill(2,65072,65136),f.fill(2,65280,65377),f.fill(2,65504,65511);for(let g=0;g<i.length;++g)f.fill(0,i[g][0],i[g][1]+1)}}wcwidth(g){return g<32?0:g<127?1:g<65536?f[g]:function(v,b){let S,y=0,l=b.length-1;if(v<b[0][0]||v>b[l][1])return!1;for(;l>=y;)if(S=y+l>>1,v>b[S][1])y=S+1;else{if(!(v<b[S][0]))return!0;l=S-1}return!1}(g,u)?0:g>=131072&&g<=196605||g>=196608&&g<=262141?2:1}}},5981:(h,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WriteBuffer=void 0;const u=i(8460),f=i(844);class g extends f.Disposable{constructor(b){super(),this._action=b,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new u.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(b,S){if(S!==void 0&&this._syncCalls>S)return void(this._syncCalls=0);if(this._pendingData+=b.length,this._writeBuffer.push(b),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let y;for(this._isSyncWriting=!0;y=this._writeBuffer.shift();){this._action(y);const l=this._callbacks.shift();l&&l()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(b,S){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=b.length,this._writeBuffer.push(b),this._callbacks.push(S),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=b.length,this._writeBuffer.push(b),this._callbacks.push(S)}_innerWrite(b=0,S=!0){const y=b||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const l=this._writeBuffer[this._bufferOffset],a=this._action(l,S);if(a){const c=m=>Date.now()-y>=12?setTimeout(()=>this._innerWrite(0,m)):this._innerWrite(y,m);return void a.catch(m=>(queueMicrotask(()=>{throw m}),Promise.resolve(!1))).then(c)}const o=this._callbacks[this._bufferOffset];if(o&&o(),this._bufferOffset++,this._pendingData-=l.length,Date.now()-y>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}s.WriteBuffer=g},5941:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.toRgbString=s.parseColor=void 0;const i=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,u=/^[\da-f]+$/;function f(g,v){const b=g.toString(16),S=b.length<2?"0"+b:b;switch(v){case 4:return b[0];case 8:return S;case 12:return(S+S).slice(0,3);default:return S+S}}s.parseColor=function(g){if(!g)return;let v=g.toLowerCase();if(v.indexOf("rgb:")===0){v=v.slice(4);const b=i.exec(v);if(b){const S=b[1]?15:b[4]?255:b[7]?4095:65535;return[Math.round(parseInt(b[1]||b[4]||b[7]||b[10],16)/S*255),Math.round(parseInt(b[2]||b[5]||b[8]||b[11],16)/S*255),Math.round(parseInt(b[3]||b[6]||b[9]||b[12],16)/S*255)]}}else if(v.indexOf("#")===0&&(v=v.slice(1),u.exec(v)&&[3,6,9,12].includes(v.length))){const b=v.length/3,S=[0,0,0];for(let y=0;y<3;++y){const l=parseInt(v.slice(b*y,b*y+b),16);S[y]=b===1?l<<4:b===2?l:b===3?l>>4:l>>8}return S}},s.toRgbString=function(g,v=16){const[b,S,y]=g;return`rgb:${f(b,v)}/${f(S,v)}/${f(y,v)}`}},5770:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PAYLOAD_LIMIT=void 0,s.PAYLOAD_LIMIT=1e7},6351:(h,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DcsHandler=s.DcsParser=void 0;const u=i(482),f=i(8742),g=i(5770),v=[];s.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=v,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=v}registerHandler(S,y){this._handlers[S]===void 0&&(this._handlers[S]=[]);const l=this._handlers[S];return l.push(y),{dispose:()=>{const a=l.indexOf(y);a!==-1&&l.splice(a,1)}}}clearHandler(S){this._handlers[S]&&delete this._handlers[S]}setHandlerFallback(S){this._handlerFb=S}reset(){if(this._active.length)for(let S=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;S>=0;--S)this._active[S].unhook(!1);this._stack.paused=!1,this._active=v,this._ident=0}hook(S,y){if(this.reset(),this._ident=S,this._active=this._handlers[S]||v,this._active.length)for(let l=this._active.length-1;l>=0;l--)this._active[l].hook(y);else this._handlerFb(this._ident,"HOOK",y)}put(S,y,l){if(this._active.length)for(let a=this._active.length-1;a>=0;a--)this._active[a].put(S,y,l);else this._handlerFb(this._ident,"PUT",(0,u.utf32ToString)(S,y,l))}unhook(S,y=!0){if(this._active.length){let l=!1,a=this._active.length-1,o=!1;if(this._stack.paused&&(a=this._stack.loopPosition-1,l=y,o=this._stack.fallThrough,this._stack.paused=!1),!o&&l===!1){for(;a>=0&&(l=this._active[a].unhook(S),l!==!0);a--)if(l instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!1,l;a--}for(;a>=0;a--)if(l=this._active[a].unhook(!1),l instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!0,l}else this._handlerFb(this._ident,"UNHOOK",S);this._active=v,this._ident=0}};const b=new f.Params;b.addParam(0),s.DcsHandler=class{constructor(S){this._handler=S,this._data="",this._params=b,this._hitLimit=!1}hook(S){this._params=S.length>1||S.params[0]?S.clone():b,this._data="",this._hitLimit=!1}put(S,y,l){this._hitLimit||(this._data+=(0,u.utf32ToString)(S,y,l),this._data.length>g.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(S){let y=!1;if(this._hitLimit)y=!1;else if(S&&(y=this._handler(this._data,this._params),y instanceof Promise))return y.then(l=>(this._params=b,this._data="",this._hitLimit=!1,l));return this._params=b,this._data="",this._hitLimit=!1,y}}},2015:(h,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.EscapeSequenceParser=s.VT500_TRANSITION_TABLE=s.TransitionTable=void 0;const u=i(844),f=i(8742),g=i(6242),v=i(6351);class b{constructor(a){this.table=new Uint8Array(a)}setDefault(a,o){this.table.fill(a<<4|o)}add(a,o,c,m){this.table[o<<8|a]=c<<4|m}addMany(a,o,c,m){for(let w=0;w<a.length;w++)this.table[o<<8|a[w]]=c<<4|m}}s.TransitionTable=b;const S=160;s.VT500_TRANSITION_TABLE=function(){const l=new b(4095),a=Array.apply(null,Array(256)).map((A,x)=>x),o=(A,x)=>a.slice(A,x),c=o(32,127),m=o(0,24);m.push(25),m.push.apply(m,o(28,32));const w=o(0,14);let k;for(k in l.setDefault(1,0),l.addMany(c,0,2,0),w)l.addMany([24,26,153,154],k,3,0),l.addMany(o(128,144),k,3,0),l.addMany(o(144,152),k,3,0),l.add(156,k,0,0),l.add(27,k,11,1),l.add(157,k,4,8),l.addMany([152,158,159],k,0,7),l.add(155,k,11,3),l.add(144,k,11,9);return l.addMany(m,0,3,0),l.addMany(m,1,3,1),l.add(127,1,0,1),l.addMany(m,8,0,8),l.addMany(m,3,3,3),l.add(127,3,0,3),l.addMany(m,4,3,4),l.add(127,4,0,4),l.addMany(m,6,3,6),l.addMany(m,5,3,5),l.add(127,5,0,5),l.addMany(m,2,3,2),l.add(127,2,0,2),l.add(93,1,4,8),l.addMany(c,8,5,8),l.add(127,8,5,8),l.addMany([156,27,24,26,7],8,6,0),l.addMany(o(28,32),8,0,8),l.addMany([88,94,95],1,0,7),l.addMany(c,7,0,7),l.addMany(m,7,0,7),l.add(156,7,0,0),l.add(127,7,0,7),l.add(91,1,11,3),l.addMany(o(64,127),3,7,0),l.addMany(o(48,60),3,8,4),l.addMany([60,61,62,63],3,9,4),l.addMany(o(48,60),4,8,4),l.addMany(o(64,127),4,7,0),l.addMany([60,61,62,63],4,0,6),l.addMany(o(32,64),6,0,6),l.add(127,6,0,6),l.addMany(o(64,127),6,0,0),l.addMany(o(32,48),3,9,5),l.addMany(o(32,48),5,9,5),l.addMany(o(48,64),5,0,6),l.addMany(o(64,127),5,7,0),l.addMany(o(32,48),4,9,5),l.addMany(o(32,48),1,9,2),l.addMany(o(32,48),2,9,2),l.addMany(o(48,127),2,10,0),l.addMany(o(48,80),1,10,0),l.addMany(o(81,88),1,10,0),l.addMany([89,90,92],1,10,0),l.addMany(o(96,127),1,10,0),l.add(80,1,11,9),l.addMany(m,9,0,9),l.add(127,9,0,9),l.addMany(o(28,32),9,0,9),l.addMany(o(32,48),9,9,12),l.addMany(o(48,60),9,8,10),l.addMany([60,61,62,63],9,9,10),l.addMany(m,11,0,11),l.addMany(o(32,128),11,0,11),l.addMany(o(28,32),11,0,11),l.addMany(m,10,0,10),l.add(127,10,0,10),l.addMany(o(28,32),10,0,10),l.addMany(o(48,60),10,8,10),l.addMany([60,61,62,63],10,0,11),l.addMany(o(32,48),10,9,12),l.addMany(m,12,0,12),l.add(127,12,0,12),l.addMany(o(28,32),12,0,12),l.addMany(o(32,48),12,9,12),l.addMany(o(48,64),12,0,11),l.addMany(o(64,127),12,12,13),l.addMany(o(64,127),10,12,13),l.addMany(o(64,127),9,12,13),l.addMany(m,13,13,13),l.addMany(c,13,13,13),l.add(127,13,0,13),l.addMany([27,156,24,26],13,14,0),l.add(S,0,2,0),l.add(S,8,5,8),l.add(S,6,0,6),l.add(S,11,0,11),l.add(S,13,13,13),l}();class y extends u.Disposable{constructor(a=s.VT500_TRANSITION_TABLE){super(),this._transitions=a,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new f.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(o,c,m)=>{},this._executeHandlerFb=o=>{},this._csiHandlerFb=(o,c)=>{},this._escHandlerFb=o=>{},this._errorHandlerFb=o=>o,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,u.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new g.OscParser),this._dcsParser=this.register(new v.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(a,o=[64,126]){let c=0;if(a.prefix){if(a.prefix.length>1)throw new Error("only one byte as prefix supported");if(c=a.prefix.charCodeAt(0),c&&60>c||c>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(a.intermediates){if(a.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let w=0;w<a.intermediates.length;++w){const k=a.intermediates.charCodeAt(w);if(32>k||k>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");c<<=8,c|=k}}if(a.final.length!==1)throw new Error("final must be a single byte");const m=a.final.charCodeAt(0);if(o[0]>m||m>o[1])throw new Error(`final must be in range ${o[0]} .. ${o[1]}`);return c<<=8,c|=m,c}identToString(a){const o=[];for(;a;)o.push(String.fromCharCode(255&a)),a>>=8;return o.reverse().join("")}setPrintHandler(a){this._printHandler=a}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(a,o){const c=this._identifier(a,[48,126]);this._escHandlers[c]===void 0&&(this._escHandlers[c]=[]);const m=this._escHandlers[c];return m.push(o),{dispose:()=>{const w=m.indexOf(o);w!==-1&&m.splice(w,1)}}}clearEscHandler(a){this._escHandlers[this._identifier(a,[48,126])]&&delete this._escHandlers[this._identifier(a,[48,126])]}setEscHandlerFallback(a){this._escHandlerFb=a}setExecuteHandler(a,o){this._executeHandlers[a.charCodeAt(0)]=o}clearExecuteHandler(a){this._executeHandlers[a.charCodeAt(0)]&&delete this._executeHandlers[a.charCodeAt(0)]}setExecuteHandlerFallback(a){this._executeHandlerFb=a}registerCsiHandler(a,o){const c=this._identifier(a);this._csiHandlers[c]===void 0&&(this._csiHandlers[c]=[]);const m=this._csiHandlers[c];return m.push(o),{dispose:()=>{const w=m.indexOf(o);w!==-1&&m.splice(w,1)}}}clearCsiHandler(a){this._csiHandlers[this._identifier(a)]&&delete this._csiHandlers[this._identifier(a)]}setCsiHandlerFallback(a){this._csiHandlerFb=a}registerDcsHandler(a,o){return this._dcsParser.registerHandler(this._identifier(a),o)}clearDcsHandler(a){this._dcsParser.clearHandler(this._identifier(a))}setDcsHandlerFallback(a){this._dcsParser.setHandlerFallback(a)}registerOscHandler(a,o){return this._oscParser.registerHandler(a,o)}clearOscHandler(a){this._oscParser.clearHandler(a)}setOscHandlerFallback(a){this._oscParser.setHandlerFallback(a)}setErrorHandler(a){this._errorHandler=a}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(a,o,c,m,w){this._parseStack.state=a,this._parseStack.handlers=o,this._parseStack.handlerPos=c,this._parseStack.transition=m,this._parseStack.chunkPos=w}parse(a,o,c){let m,w=0,k=0,A=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,A=this._parseStack.chunkPos+1;else{if(c===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const x=this._parseStack.handlers;let C=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(c===!1&&C>-1){for(;C>=0&&(m=x[C](this._params),m!==!0);C--)if(m instanceof Promise)return this._parseStack.handlerPos=C,m}this._parseStack.handlers=[];break;case 4:if(c===!1&&C>-1){for(;C>=0&&(m=x[C](),m!==!0);C--)if(m instanceof Promise)return this._parseStack.handlerPos=C,m}this._parseStack.handlers=[];break;case 6:if(w=a[this._parseStack.chunkPos],m=this._dcsParser.unhook(w!==24&&w!==26,c),m)return m;w===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(w=a[this._parseStack.chunkPos],m=this._oscParser.end(w!==24&&w!==26,c),m)return m;w===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,A=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let x=A;x<o;++x){switch(w=a[x],k=this._transitions.table[this.currentState<<8|(w<160?w:S)],k>>4){case 2:for(let j=x+1;;++j){if(j>=o||(w=a[j])<32||w>126&&w<S){this._printHandler(a,x,j),x=j-1;break}if(++j>=o||(w=a[j])<32||w>126&&w<S){this._printHandler(a,x,j),x=j-1;break}if(++j>=o||(w=a[j])<32||w>126&&w<S){this._printHandler(a,x,j),x=j-1;break}if(++j>=o||(w=a[j])<32||w>126&&w<S){this._printHandler(a,x,j),x=j-1;break}}break;case 3:this._executeHandlers[w]?this._executeHandlers[w]():this._executeHandlerFb(w),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:x,code:w,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const C=this._csiHandlers[this._collect<<8|w];let I=C?C.length-1:-1;for(;I>=0&&(m=C[I](this._params),m!==!0);I--)if(m instanceof Promise)return this._preserveStack(3,C,I,k,x),m;I<0&&this._csiHandlerFb(this._collect<<8|w,this._params),this.precedingCodepoint=0;break;case 8:do switch(w){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(w-48)}while(++x<o&&(w=a[x])>47&&w<60);x--;break;case 9:this._collect<<=8,this._collect|=w;break;case 10:const R=this._escHandlers[this._collect<<8|w];let D=R?R.length-1:-1;for(;D>=0&&(m=R[D](),m!==!0);D--)if(m instanceof Promise)return this._preserveStack(4,R,D,k,x),m;D<0&&this._escHandlerFb(this._collect<<8|w),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|w,this._params);break;case 13:for(let j=x+1;;++j)if(j>=o||(w=a[j])===24||w===26||w===27||w>127&&w<S){this._dcsParser.put(a,x,j),x=j-1;break}break;case 14:if(m=this._dcsParser.unhook(w!==24&&w!==26),m)return this._preserveStack(6,[],0,k,x),m;w===27&&(k|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let j=x+1;;j++)if(j>=o||(w=a[j])<32||w>127&&w<S){this._oscParser.put(a,x,j),x=j-1;break}break;case 6:if(m=this._oscParser.end(w!==24&&w!==26),m)return this._preserveStack(5,[],0,k,x),m;w===27&&(k|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&k}}}s.EscapeSequenceParser=y},6242:(h,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OscHandler=s.OscParser=void 0;const u=i(5770),f=i(482),g=[];s.OscParser=class{constructor(){this._state=0,this._active=g,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(v,b){this._handlers[v]===void 0&&(this._handlers[v]=[]);const S=this._handlers[v];return S.push(b),{dispose:()=>{const y=S.indexOf(b);y!==-1&&S.splice(y,1)}}}clearHandler(v){this._handlers[v]&&delete this._handlers[v]}setHandlerFallback(v){this._handlerFb=v}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=g}reset(){if(this._state===2)for(let v=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;v>=0;--v)this._active[v].end(!1);this._stack.paused=!1,this._active=g,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||g,this._active.length)for(let v=this._active.length-1;v>=0;v--)this._active[v].start();else this._handlerFb(this._id,"START")}_put(v,b,S){if(this._active.length)for(let y=this._active.length-1;y>=0;y--)this._active[y].put(v,b,S);else this._handlerFb(this._id,"PUT",(0,f.utf32ToString)(v,b,S))}start(){this.reset(),this._state=1}put(v,b,S){if(this._state!==3){if(this._state===1)for(;b<S;){const y=v[b++];if(y===59){this._state=2,this._start();break}if(y<48||57<y)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+y-48}this._state===2&&S-b>0&&this._put(v,b,S)}}end(v,b=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let S=!1,y=this._active.length-1,l=!1;if(this._stack.paused&&(y=this._stack.loopPosition-1,S=b,l=this._stack.fallThrough,this._stack.paused=!1),!l&&S===!1){for(;y>=0&&(S=this._active[y].end(v),S!==!0);y--)if(S instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=y,this._stack.fallThrough=!1,S;y--}for(;y>=0;y--)if(S=this._active[y].end(!1),S instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=y,this._stack.fallThrough=!0,S}else this._handlerFb(this._id,"END",v);this._active=g,this._id=-1,this._state=0}}},s.OscHandler=class{constructor(v){this._handler=v,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(v,b,S){this._hitLimit||(this._data+=(0,f.utf32ToString)(v,b,S),this._data.length>u.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(v){let b=!1;if(this._hitLimit)b=!1;else if(v&&(b=this._handler(this._data),b instanceof Promise))return b.then(S=>(this._data="",this._hitLimit=!1,S));return this._data="",this._hitLimit=!1,b}}},8742:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Params=void 0;const i=2147483647;class u{static fromArray(g){const v=new u;if(!g.length)return v;for(let b=Array.isArray(g[0])?1:0;b<g.length;++b){const S=g[b];if(Array.isArray(S))for(let y=0;y<S.length;++y)v.addSubParam(S[y]);else v.addParam(S)}return v}constructor(g=32,v=32){if(this.maxLength=g,this.maxSubParamsLength=v,v>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(g),this.length=0,this._subParams=new Int32Array(v),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(g),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const g=new u(this.maxLength,this.maxSubParamsLength);return g.params.set(this.params),g.length=this.length,g._subParams.set(this._subParams),g._subParamsLength=this._subParamsLength,g._subParamsIdx.set(this._subParamsIdx),g._rejectDigits=this._rejectDigits,g._rejectSubDigits=this._rejectSubDigits,g._digitIsSub=this._digitIsSub,g}toArray(){const g=[];for(let v=0;v<this.length;++v){g.push(this.params[v]);const b=this._subParamsIdx[v]>>8,S=255&this._subParamsIdx[v];S-b>0&&g.push(Array.prototype.slice.call(this._subParams,b,S))}return g}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(g){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(g<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=g>i?i:g}}addSubParam(g){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(g<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=g>i?i:g,this._subParamsIdx[this.length-1]++}}hasSubParams(g){return(255&this._subParamsIdx[g])-(this._subParamsIdx[g]>>8)>0}getSubParams(g){const v=this._subParamsIdx[g]>>8,b=255&this._subParamsIdx[g];return b-v>0?this._subParams.subarray(v,b):null}getSubParamsAll(){const g={};for(let v=0;v<this.length;++v){const b=this._subParamsIdx[v]>>8,S=255&this._subParamsIdx[v];S-b>0&&(g[v]=this._subParams.slice(b,S))}return g}addDigit(g){let v;if(this._rejectDigits||!(v=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const b=this._digitIsSub?this._subParams:this.params,S=b[v-1];b[v-1]=~S?Math.min(10*S+g,i):g}}s.Params=u},5741:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AddonManager=void 0,s.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let i=this._addons.length-1;i>=0;i--)this._addons[i].instance.dispose()}loadAddon(i,u){const f={instance:u,dispose:u.dispose,isDisposed:!1};this._addons.push(f),u.dispose=()=>this._wrappedAddonDispose(f),u.activate(i)}_wrappedAddonDispose(i){if(i.isDisposed)return;let u=-1;for(let f=0;f<this._addons.length;f++)if(this._addons[f]===i){u=f;break}if(u===-1)throw new Error("Could not dispose an addon that has not been loaded");i.isDisposed=!0,i.dispose.apply(i.instance),this._addons.splice(u,1)}}},8771:(h,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferApiView=void 0;const u=i(3785),f=i(511);s.BufferApiView=class{constructor(g,v){this._buffer=g,this.type=v}init(g){return this._buffer=g,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(g){const v=this._buffer.lines.get(g);if(v)return new u.BufferLineApiView(v)}getNullCell(){return new f.CellData}}},3785:(h,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLineApiView=void 0;const u=i(511);s.BufferLineApiView=class{constructor(f){this._line=f}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(f,g){if(!(f<0||f>=this._line.length))return g?(this._line.loadCell(f,g),g):this._line.loadCell(f,new u.CellData)}translateToString(f,g,v){return this._line.translateToString(f,g,v)}}},8285:(h,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferNamespaceApi=void 0;const u=i(8771),f=i(8460),g=i(844);class v extends g.Disposable{constructor(S){super(),this._core=S,this._onBufferChange=this.register(new f.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new u.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new u.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}s.BufferNamespaceApi=v},7975:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ParserApi=void 0,s.ParserApi=class{constructor(i){this._core=i}registerCsiHandler(i,u){return this._core.registerCsiHandler(i,f=>u(f.toArray()))}addCsiHandler(i,u){return this.registerCsiHandler(i,u)}registerDcsHandler(i,u){return this._core.registerDcsHandler(i,(f,g)=>u(f,g.toArray()))}addDcsHandler(i,u){return this.registerDcsHandler(i,u)}registerEscHandler(i,u){return this._core.registerEscHandler(i,u)}addEscHandler(i,u){return this.registerEscHandler(i,u)}registerOscHandler(i,u){return this._core.registerOscHandler(i,u)}addOscHandler(i,u){return this.registerOscHandler(i,u)}}},7090:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeApi=void 0,s.UnicodeApi=class{constructor(i){this._core=i}register(i){this._core.unicodeService.register(i)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(i){this._core.unicodeService.activeVersion=i}}},744:function(h,s,i){var u=this&&this.__decorate||function(l,a,o,c){var m,w=arguments.length,k=w<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(l,a,o,c);else for(var A=l.length-1;A>=0;A--)(m=l[A])&&(k=(w<3?m(k):w>3?m(a,o,k):m(a,o))||k);return w>3&&k&&Object.defineProperty(a,o,k),k},f=this&&this.__param||function(l,a){return function(o,c){a(o,c,l)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferService=s.MINIMUM_ROWS=s.MINIMUM_COLS=void 0;const g=i(8460),v=i(844),b=i(5295),S=i(2585);s.MINIMUM_COLS=2,s.MINIMUM_ROWS=1;let y=s.BufferService=class extends v.Disposable{get buffer(){return this.buffers.active}constructor(l){super(),this.isUserScrolling=!1,this._onResize=this.register(new g.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new g.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(l.rawOptions.cols||0,s.MINIMUM_COLS),this.rows=Math.max(l.rawOptions.rows||0,s.MINIMUM_ROWS),this.buffers=this.register(new b.BufferSet(l,this))}resize(l,a){this.cols=l,this.rows=a,this.buffers.resize(l,a),this._onResize.fire({cols:l,rows:a})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(l,a=!1){const o=this.buffer;let c;c=this._cachedBlankLine,c&&c.length===this.cols&&c.getFg(0)===l.fg&&c.getBg(0)===l.bg||(c=o.getBlankLine(l,a),this._cachedBlankLine=c),c.isWrapped=a;const m=o.ybase+o.scrollTop,w=o.ybase+o.scrollBottom;if(o.scrollTop===0){const k=o.lines.isFull;w===o.lines.length-1?k?o.lines.recycle().copyFrom(c):o.lines.push(c.clone()):o.lines.splice(w+1,0,c.clone()),k?this.isUserScrolling&&(o.ydisp=Math.max(o.ydisp-1,0)):(o.ybase++,this.isUserScrolling||o.ydisp++)}else{const k=w-m+1;o.lines.shiftElements(m+1,k-1,-1),o.lines.set(w,c.clone())}this.isUserScrolling||(o.ydisp=o.ybase),this._onScroll.fire(o.ydisp)}scrollLines(l,a,o){const c=this.buffer;if(l<0){if(c.ydisp===0)return;this.isUserScrolling=!0}else l+c.ydisp>=c.ybase&&(this.isUserScrolling=!1);const m=c.ydisp;c.ydisp=Math.max(Math.min(c.ydisp+l,c.ybase),0),m!==c.ydisp&&(a||this._onScroll.fire(c.ydisp))}};s.BufferService=y=u([f(0,S.IOptionsService)],y)},7994:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CharsetService=void 0,s.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(i){this.glevel=i,this.charset=this._charsets[i]}setgCharset(i,u){this._charsets[i]=u,this.glevel===i&&(this.charset=u)}}},1753:function(h,s,i){var u=this&&this.__decorate||function(c,m,w,k){var A,x=arguments.length,C=x<3?m:k===null?k=Object.getOwnPropertyDescriptor(m,w):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(c,m,w,k);else for(var I=c.length-1;I>=0;I--)(A=c[I])&&(C=(x<3?A(C):x>3?A(m,w,C):A(m,w))||C);return x>3&&C&&Object.defineProperty(m,w,C),C},f=this&&this.__param||function(c,m){return function(w,k){m(w,k,c)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreMouseService=void 0;const g=i(2585),v=i(8460),b=i(844),S={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:c=>c.button!==4&&c.action===1&&(c.ctrl=!1,c.alt=!1,c.shift=!1,!0)},VT200:{events:19,restrict:c=>c.action!==32},DRAG:{events:23,restrict:c=>c.action!==32||c.button!==3},ANY:{events:31,restrict:c=>!0}};function y(c,m){let w=(c.ctrl?16:0)|(c.shift?4:0)|(c.alt?8:0);return c.button===4?(w|=64,w|=c.action):(w|=3&c.button,4&c.button&&(w|=64),8&c.button&&(w|=128),c.action===32?w|=32:c.action!==0||m||(w|=3)),w}const l=String.fromCharCode,a={DEFAULT:c=>{const m=[y(c,!1)+32,c.col+32,c.row+32];return m[0]>255||m[1]>255||m[2]>255?"":`\x1B[M${l(m[0])}${l(m[1])}${l(m[2])}`},SGR:c=>{const m=c.action===0&&c.button!==4?"m":"M";return`\x1B[<${y(c,!0)};${c.col};${c.row}${m}`},SGR_PIXELS:c=>{const m=c.action===0&&c.button!==4?"m":"M";return`\x1B[<${y(c,!0)};${c.x};${c.y}${m}`}};let o=s.CoreMouseService=class extends b.Disposable{constructor(c,m){super(),this._bufferService=c,this._coreService=m,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new v.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const w of Object.keys(S))this.addProtocol(w,S[w]);for(const w of Object.keys(a))this.addEncoding(w,a[w]);this.reset()}addProtocol(c,m){this._protocols[c]=m}addEncoding(c,m){this._encodings[c]=m}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(c){if(!this._protocols[c])throw new Error(`unknown protocol "${c}"`);this._activeProtocol=c,this._onProtocolChange.fire(this._protocols[c].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(c){if(!this._encodings[c])throw new Error(`unknown encoding "${c}"`);this._activeEncoding=c}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(c){if(c.col<0||c.col>=this._bufferService.cols||c.row<0||c.row>=this._bufferService.rows||c.button===4&&c.action===32||c.button===3&&c.action!==32||c.button!==4&&(c.action===2||c.action===3)||(c.col++,c.row++,c.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,c,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(c))return!1;const m=this._encodings[this._activeEncoding](c);return m&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(m):this._coreService.triggerDataEvent(m,!0)),this._lastEvent=c,!0}explainEvents(c){return{down:!!(1&c),up:!!(2&c),drag:!!(4&c),move:!!(8&c),wheel:!!(16&c)}}_equalEvents(c,m,w){if(w){if(c.x!==m.x||c.y!==m.y)return!1}else if(c.col!==m.col||c.row!==m.row)return!1;return c.button===m.button&&c.action===m.action&&c.ctrl===m.ctrl&&c.alt===m.alt&&c.shift===m.shift}};s.CoreMouseService=o=u([f(0,g.IBufferService),f(1,g.ICoreService)],o)},6975:function(h,s,i){var u=this&&this.__decorate||function(o,c,m,w){var k,A=arguments.length,x=A<3?c:w===null?w=Object.getOwnPropertyDescriptor(c,m):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(o,c,m,w);else for(var C=o.length-1;C>=0;C--)(k=o[C])&&(x=(A<3?k(x):A>3?k(c,m,x):k(c,m))||x);return A>3&&x&&Object.defineProperty(c,m,x),x},f=this&&this.__param||function(o,c){return function(m,w){c(m,w,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreService=void 0;const g=i(1439),v=i(8460),b=i(844),S=i(2585),y=Object.freeze({insertMode:!1}),l=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let a=s.CoreService=class extends b.Disposable{constructor(o,c,m){super(),this._bufferService=o,this._logService=c,this._optionsService=m,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new v.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new v.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new v.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new v.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,g.clone)(y),this.decPrivateModes=(0,g.clone)(l)}reset(){this.modes=(0,g.clone)(y),this.decPrivateModes=(0,g.clone)(l)}triggerDataEvent(o,c=!1){if(this._optionsService.rawOptions.disableStdin)return;const m=this._bufferService.buffer;c&&this._optionsService.rawOptions.scrollOnUserInput&&m.ybase!==m.ydisp&&this._onRequestScrollToBottom.fire(),c&&this._onUserInput.fire(),this._logService.debug(`sending data "${o}"`,()=>o.split("").map(w=>w.charCodeAt(0))),this._onData.fire(o)}triggerBinaryEvent(o){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${o}"`,()=>o.split("").map(c=>c.charCodeAt(0))),this._onBinary.fire(o))}};s.CoreService=a=u([f(0,S.IBufferService),f(1,S.ILogService),f(2,S.IOptionsService)],a)},9074:(h,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DecorationService=void 0;const u=i(8055),f=i(8460),g=i(844),v=i(6106);let b=0,S=0;class y extends g.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new v.SortedList(o=>o?.marker.line),this._onDecorationRegistered=this.register(new f.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new f.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,g.toDisposable)(()=>this.reset()))}registerDecoration(o){if(o.marker.isDisposed)return;const c=new l(o);if(c){const m=c.marker.onDispose(()=>c.dispose());c.onDispose(()=>{c&&(this._decorations.delete(c)&&this._onDecorationRemoved.fire(c),m.dispose())}),this._decorations.insert(c),this._onDecorationRegistered.fire(c)}return c}reset(){for(const o of this._decorations.values())o.dispose();this._decorations.clear()}*getDecorationsAtCell(o,c,m){var w,k,A;let x=0,C=0;for(const I of this._decorations.getKeyIterator(c))x=(w=I.options.x)!==null&&w!==void 0?w:0,C=x+((k=I.options.width)!==null&&k!==void 0?k:1),o>=x&&o<C&&(!m||((A=I.options.layer)!==null&&A!==void 0?A:"bottom")===m)&&(yield I)}forEachDecorationAtCell(o,c,m,w){this._decorations.forEachByKey(c,k=>{var A,x,C;b=(A=k.options.x)!==null&&A!==void 0?A:0,S=b+((x=k.options.width)!==null&&x!==void 0?x:1),o>=b&&o<S&&(!m||((C=k.options.layer)!==null&&C!==void 0?C:"bottom")===m)&&w(k)})}}s.DecorationService=y;class l extends g.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=u.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=u.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(o){super(),this.options=o,this.onRenderEmitter=this.register(new f.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=o.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(h,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.InstantiationService=s.ServiceCollection=void 0;const u=i(2585),f=i(8343);class g{constructor(...b){this._entries=new Map;for(const[S,y]of b)this.set(S,y)}set(b,S){const y=this._entries.get(b);return this._entries.set(b,S),y}forEach(b){for(const[S,y]of this._entries.entries())b(S,y)}has(b){return this._entries.has(b)}get(b){return this._entries.get(b)}}s.ServiceCollection=g,s.InstantiationService=class{constructor(){this._services=new g,this._services.set(u.IInstantiationService,this)}setService(v,b){this._services.set(v,b)}getService(v){return this._services.get(v)}createInstance(v,...b){const S=(0,f.getServiceDependencies)(v).sort((a,o)=>a.index-o.index),y=[];for(const a of S){const o=this._services.get(a.id);if(!o)throw new Error(`[createInstance] ${v.name} depends on UNKNOWN service ${a.id}.`);y.push(o)}const l=S.length>0?S[0].index:b.length;if(b.length!==l)throw new Error(`[createInstance] First service dependency of ${v.name} at position ${l+1} conflicts with ${b.length} static arguments`);return new v(...b,...y)}}},7866:function(h,s,i){var u=this&&this.__decorate||function(l,a,o,c){var m,w=arguments.length,k=w<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(l,a,o,c);else for(var A=l.length-1;A>=0;A--)(m=l[A])&&(k=(w<3?m(k):w>3?m(a,o,k):m(a,o))||k);return w>3&&k&&Object.defineProperty(a,o,k),k},f=this&&this.__param||function(l,a){return function(o,c){a(o,c,l)}};Object.defineProperty(s,"__esModule",{value:!0}),s.traceCall=s.setTraceLogger=s.LogService=void 0;const g=i(844),v=i(2585),b={trace:v.LogLevelEnum.TRACE,debug:v.LogLevelEnum.DEBUG,info:v.LogLevelEnum.INFO,warn:v.LogLevelEnum.WARN,error:v.LogLevelEnum.ERROR,off:v.LogLevelEnum.OFF};let S,y=s.LogService=class extends g.Disposable{get logLevel(){return this._logLevel}constructor(l){super(),this._optionsService=l,this._logLevel=v.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),S=this}_updateLogLevel(){this._logLevel=b[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(l){for(let a=0;a<l.length;a++)typeof l[a]=="function"&&(l[a]=l[a]())}_log(l,a,o){this._evalLazyOptionalParams(o),l.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+a,...o)}trace(l,...a){var o,c;this._logLevel<=v.LogLevelEnum.TRACE&&this._log((c=(o=this._optionsService.options.logger)===null||o===void 0?void 0:o.trace.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.log,l,a)}debug(l,...a){var o,c;this._logLevel<=v.LogLevelEnum.DEBUG&&this._log((c=(o=this._optionsService.options.logger)===null||o===void 0?void 0:o.debug.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.log,l,a)}info(l,...a){var o,c;this._logLevel<=v.LogLevelEnum.INFO&&this._log((c=(o=this._optionsService.options.logger)===null||o===void 0?void 0:o.info.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.info,l,a)}warn(l,...a){var o,c;this._logLevel<=v.LogLevelEnum.WARN&&this._log((c=(o=this._optionsService.options.logger)===null||o===void 0?void 0:o.warn.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.warn,l,a)}error(l,...a){var o,c;this._logLevel<=v.LogLevelEnum.ERROR&&this._log((c=(o=this._optionsService.options.logger)===null||o===void 0?void 0:o.error.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.error,l,a)}};s.LogService=y=u([f(0,v.IOptionsService)],y),s.setTraceLogger=function(l){S=l},s.traceCall=function(l,a,o){if(typeof o.value!="function")throw new Error("not supported");const c=o.value;o.value=function(...m){if(S.logLevel!==v.LogLevelEnum.TRACE)return c.apply(this,m);S.trace(`GlyphRenderer#${c.name}(${m.map(k=>JSON.stringify(k)).join(", ")})`);const w=c.apply(this,m);return S.trace(`GlyphRenderer#${c.name} return`,w),w}}},7302:(h,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OptionsService=s.DEFAULT_OPTIONS=void 0;const u=i(8460),f=i(844),g=i(6114);s.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:g.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const v=["normal","bold","100","200","300","400","500","600","700","800","900"];class b extends f.Disposable{constructor(y){super(),this._onOptionChange=this.register(new u.EventEmitter),this.onOptionChange=this._onOptionChange.event;const l=Object.assign({},s.DEFAULT_OPTIONS);for(const a in y)if(a in l)try{const o=y[a];l[a]=this._sanitizeAndValidateOption(a,o)}catch(o){console.error(o)}this.rawOptions=l,this.options=Object.assign({},l),this._setupOptions()}onSpecificOptionChange(y,l){return this.onOptionChange(a=>{a===y&&l(this.rawOptions[y])})}onMultipleOptionChange(y,l){return this.onOptionChange(a=>{y.indexOf(a)!==-1&&l()})}_setupOptions(){const y=a=>{if(!(a in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${a}"`);return this.rawOptions[a]},l=(a,o)=>{if(!(a in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${a}"`);o=this._sanitizeAndValidateOption(a,o),this.rawOptions[a]!==o&&(this.rawOptions[a]=o,this._onOptionChange.fire(a))};for(const a in this.rawOptions){const o={get:y.bind(this,a),set:l.bind(this,a)};Object.defineProperty(this.options,a,o)}}_sanitizeAndValidateOption(y,l){switch(y){case"cursorStyle":if(l||(l=s.DEFAULT_OPTIONS[y]),!function(a){return a==="block"||a==="underline"||a==="bar"}(l))throw new Error(`"${l}" is not a valid value for ${y}`);break;case"wordSeparator":l||(l=s.DEFAULT_OPTIONS[y]);break;case"fontWeight":case"fontWeightBold":if(typeof l=="number"&&1<=l&&l<=1e3)break;l=v.includes(l)?l:s.DEFAULT_OPTIONS[y];break;case"cursorWidth":l=Math.floor(l);case"lineHeight":case"tabStopWidth":if(l<1)throw new Error(`${y} cannot be less than 1, value: ${l}`);break;case"minimumContrastRatio":l=Math.max(1,Math.min(21,Math.round(10*l)/10));break;case"scrollback":if((l=Math.min(l,4294967295))<0)throw new Error(`${y} cannot be less than 0, value: ${l}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(l<=0)throw new Error(`${y} cannot be less than or equal to 0, value: ${l}`);break;case"rows":case"cols":if(!l&&l!==0)throw new Error(`${y} must be numeric, value: ${l}`);break;case"windowsPty":l=l??{}}return l}}s.OptionsService=b},2660:function(h,s,i){var u=this&&this.__decorate||function(b,S,y,l){var a,o=arguments.length,c=o<3?S:l===null?l=Object.getOwnPropertyDescriptor(S,y):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(b,S,y,l);else for(var m=b.length-1;m>=0;m--)(a=b[m])&&(c=(o<3?a(c):o>3?a(S,y,c):a(S,y))||c);return o>3&&c&&Object.defineProperty(S,y,c),c},f=this&&this.__param||function(b,S){return function(y,l){S(y,l,b)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkService=void 0;const g=i(2585);let v=s.OscLinkService=class{constructor(b){this._bufferService=b,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(b){const S=this._bufferService.buffer;if(b.id===void 0){const m=S.addMarker(S.ybase+S.y),w={data:b,id:this._nextId++,lines:[m]};return m.onDispose(()=>this._removeMarkerFromLink(w,m)),this._dataByLinkId.set(w.id,w),w.id}const y=b,l=this._getEntryIdKey(y),a=this._entriesWithId.get(l);if(a)return this.addLineToLink(a.id,S.ybase+S.y),a.id;const o=S.addMarker(S.ybase+S.y),c={id:this._nextId++,key:this._getEntryIdKey(y),data:y,lines:[o]};return o.onDispose(()=>this._removeMarkerFromLink(c,o)),this._entriesWithId.set(c.key,c),this._dataByLinkId.set(c.id,c),c.id}addLineToLink(b,S){const y=this._dataByLinkId.get(b);if(y&&y.lines.every(l=>l.line!==S)){const l=this._bufferService.buffer.addMarker(S);y.lines.push(l),l.onDispose(()=>this._removeMarkerFromLink(y,l))}}getLinkData(b){var S;return(S=this._dataByLinkId.get(b))===null||S===void 0?void 0:S.data}_getEntryIdKey(b){return`${b.id};;${b.uri}`}_removeMarkerFromLink(b,S){const y=b.lines.indexOf(S);y!==-1&&(b.lines.splice(y,1),b.lines.length===0&&(b.data.id!==void 0&&this._entriesWithId.delete(b.key),this._dataByLinkId.delete(b.id)))}};s.OscLinkService=v=u([f(0,g.IBufferService)],v)},8343:(h,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createDecorator=s.getServiceDependencies=s.serviceRegistry=void 0;const i="di$target",u="di$dependencies";s.serviceRegistry=new Map,s.getServiceDependencies=function(f){return f[u]||[]},s.createDecorator=function(f){if(s.serviceRegistry.has(f))return s.serviceRegistry.get(f);const g=function(v,b,S){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(y,l,a){l[i]===l?l[u].push({id:y,index:a}):(l[u]=[{id:y,index:a}],l[i]=l)})(g,v,S)};return g.toString=()=>f,s.serviceRegistry.set(f,g),g}},2585:(h,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IDecorationService=s.IUnicodeService=s.IOscLinkService=s.IOptionsService=s.ILogService=s.LogLevelEnum=s.IInstantiationService=s.ICharsetService=s.ICoreService=s.ICoreMouseService=s.IBufferService=void 0;const u=i(8343);var f;s.IBufferService=(0,u.createDecorator)("BufferService"),s.ICoreMouseService=(0,u.createDecorator)("CoreMouseService"),s.ICoreService=(0,u.createDecorator)("CoreService"),s.ICharsetService=(0,u.createDecorator)("CharsetService"),s.IInstantiationService=(0,u.createDecorator)("InstantiationService"),function(g){g[g.TRACE=0]="TRACE",g[g.DEBUG=1]="DEBUG",g[g.INFO=2]="INFO",g[g.WARN=3]="WARN",g[g.ERROR=4]="ERROR",g[g.OFF=5]="OFF"}(f||(s.LogLevelEnum=f={})),s.ILogService=(0,u.createDecorator)("LogService"),s.IOptionsService=(0,u.createDecorator)("OptionsService"),s.IOscLinkService=(0,u.createDecorator)("OscLinkService"),s.IUnicodeService=(0,u.createDecorator)("UnicodeService"),s.IDecorationService=(0,u.createDecorator)("DecorationService")},1480:(h,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeService=void 0;const u=i(8460),f=i(225);s.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new u.EventEmitter,this.onChange=this._onChange.event;const g=new f.UnicodeV6;this.register(g),this._active=g.version,this._activeProvider=g}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(g){if(!this._providers[g])throw new Error(`unknown Unicode version "${g}"`);this._active=g,this._activeProvider=this._providers[g],this._onChange.fire(g)}register(g){this._providers[g.version]=g}wcwidth(g){return this._activeProvider.wcwidth(g)}getStringCellWidth(g){let v=0;const b=g.length;for(let S=0;S<b;++S){let y=g.charCodeAt(S);if(55296<=y&&y<=56319){if(++S>=b)return v+this.wcwidth(y);const l=g.charCodeAt(S);56320<=l&&l<=57343?y=1024*(y-55296)+l-56320+65536:v+=this.wcwidth(l)}v+=this.wcwidth(y)}return v}}}},n={};function d(h){var s=n[h];if(s!==void 0)return s.exports;var i=n[h]={exports:{}};return r[h].call(i.exports,i,i.exports,d),i.exports}var _={};return(()=>{var h=_;Object.defineProperty(h,"__esModule",{value:!0}),h.Terminal=void 0;const s=d(9042),i=d(3236),u=d(844),f=d(5741),g=d(8285),v=d(7975),b=d(7090),S=["cols","rows"];class y extends u.Disposable{constructor(a){super(),this._core=this.register(new i.Terminal(a)),this._addonManager=this.register(new f.AddonManager),this._publicOptions=Object.assign({},this._core.options);const o=m=>this._core.options[m],c=(m,w)=>{this._checkReadonlyOptions(m),this._core.options[m]=w};for(const m in this._core.options){const w={get:o.bind(this,m),set:c.bind(this,m)};Object.defineProperty(this._publicOptions,m,w)}}_checkReadonlyOptions(a){if(S.includes(a))throw new Error(`Option "${a}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new v.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new b.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new g.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const a=this._core.coreService.decPrivateModes;let o="none";switch(this._core.coreMouseService.activeProtocol){case"X10":o="x10";break;case"VT200":o="vt200";break;case"DRAG":o="drag";break;case"ANY":o="any"}return{applicationCursorKeysMode:a.applicationCursorKeys,applicationKeypadMode:a.applicationKeypad,bracketedPasteMode:a.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:o,originMode:a.origin,reverseWraparoundMode:a.reverseWraparound,sendFocusMode:a.sendFocus,wraparoundMode:a.wraparound}}get options(){return this._publicOptions}set options(a){for(const o in a)this._publicOptions[o]=a[o]}blur(){this._core.blur()}focus(){this._core.focus()}resize(a,o){this._verifyIntegers(a,o),this._core.resize(a,o)}open(a){this._core.open(a)}attachCustomKeyEventHandler(a){this._core.attachCustomKeyEventHandler(a)}registerLinkProvider(a){return this._core.registerLinkProvider(a)}registerCharacterJoiner(a){return this._checkProposedApi(),this._core.registerCharacterJoiner(a)}deregisterCharacterJoiner(a){this._checkProposedApi(),this._core.deregisterCharacterJoiner(a)}registerMarker(a=0){return this._verifyIntegers(a),this._core.registerMarker(a)}registerDecoration(a){var o,c,m;return this._checkProposedApi(),this._verifyPositiveIntegers((o=a.x)!==null&&o!==void 0?o:0,(c=a.width)!==null&&c!==void 0?c:0,(m=a.height)!==null&&m!==void 0?m:0),this._core.registerDecoration(a)}hasSelection(){return this._core.hasSelection()}select(a,o,c){this._verifyIntegers(a,o,c),this._core.select(a,o,c)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(a,o){this._verifyIntegers(a,o),this._core.selectLines(a,o)}dispose(){super.dispose()}scrollLines(a){this._verifyIntegers(a),this._core.scrollLines(a)}scrollPages(a){this._verifyIntegers(a),this._core.scrollPages(a)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(a){this._verifyIntegers(a),this._core.scrollToLine(a)}clear(){this._core.clear()}write(a,o){this._core.write(a,o)}writeln(a,o){this._core.write(a),this._core.write(`\r
`,o)}paste(a){this._core.paste(a)}refresh(a,o){this._verifyIntegers(a,o),this._core.refresh(a,o)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(a){this._addonManager.loadAddon(this,a)}static get strings(){return s}_verifyIntegers(...a){for(const o of a)if(o===1/0||isNaN(o)||o%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...a){for(const o of a)if(o&&(o===1/0||isNaN(o)||o%1!=0||o<0))throw new Error("This API only accepts positive integers")}}h.Terminal=y})(),_})())})(lo);var ac=lo.exports,ao={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(self,()=>(()=>{var r={};return(()=>{var n=r;Object.defineProperty(n,"__esModule",{value:!0}),n.FitAddon=void 0,n.FitAddon=class{activate(d){this._terminal=d}dispose(){}fit(){const d=this.proposeDimensions();if(!d||!this._terminal||isNaN(d.cols)||isNaN(d.rows))return;const _=this._terminal._core;this._terminal.rows===d.rows&&this._terminal.cols===d.cols||(_._renderService.clear(),this._terminal.resize(d.cols,d.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const d=this._terminal._core,_=d._renderService.dimensions;if(_.css.cell.width===0||_.css.cell.height===0)return;const h=this._terminal.options.scrollback===0?0:d.viewport.scrollBarWidth,s=window.getComputedStyle(this._terminal.element.parentElement),i=parseInt(s.getPropertyValue("height")),u=Math.max(0,parseInt(s.getPropertyValue("width"))),f=window.getComputedStyle(this._terminal.element),g=i-(parseInt(f.getPropertyValue("padding-top"))+parseInt(f.getPropertyValue("padding-bottom"))),v=u-(parseInt(f.getPropertyValue("padding-right"))+parseInt(f.getPropertyValue("padding-left")))-h;return{cols:Math.max(2,Math.floor(v/_.css.cell.width)),rows:Math.max(1,Math.floor(g/_.css.cell.height))}}}})(),r})())})(ao);var cc=ao.exports,dc=O('<div class="mb-2 px-3 py-2 rounded-lg text-sm"style="background:rgba(239, 68, 68, 0.1);color:var(--error-color)">'),hc=O('<div class="flex flex-col"style=height:80vh;minHeight:600px><div class="flex items-center gap-2 mb-2 px-3 py-2 rounded-lg"style=background:var(--bg-tertiary)><span></span><span class=text-sm style=color:var(--text-secondary)></span><span class="text-sm ml-auto"style=color:var(--text-muted)>Local System Terminal</span><button class="ml-2 px-3 py-1.5 rounded text-xs font-medium transition-all hover:opacity-80"title="Open in new window (recommended)"style=background:var(--accent-primary);color:white>Open in New Window</button></div><div class="flex-1 rounded-lg overflow-hidden"data-terminal=true tabindex=0 style="background:#0d1117;border:1px solid var(--border-color);padding:8px;minHeight:500px;height:100%;outline:none">');const co=e=>{const[t,r]=J(!1),[n,d]=J(null);let _=null,h,s=null,i=null;const u=()=>{if(!h||s){console.log("Terminal init skipped - container:",!!h,"term:",!!s);return}console.log("Initializing terminal...");try{if(s=new ac.Terminal({theme:{background:"#0d1117",foreground:"#c9d1d9",cursor:"#58a6ff",cursorAccent:"#0d1117",selection:"rgba(88, 166, 255, 0.3)",black:"#484f58",red:"#ff7b72",green:"#3fb950",yellow:"#d29922",blue:"#58a6ff",magenta:"#bc8cff",cyan:"#39c5cf",white:"#b1bac4"},fontFamily:'"SF Mono", Monaco, "Cascadia Code", "Fira Code", monospace',fontSize:13,cursorBlink:!0,cursorStyle:"bar"}),console.log("Terminal created:",s),i=new cc.FitAddon,s.loadAddon(i),s.open(h),console.log("Terminal opened in container, element:",s.element),setTimeout(()=>{i?.fit(),s.element&&(s.element.focus(),s.element.setAttribute("tabindex","0")),s.focus(),console.log("Terminal fitted and focused, activeElement:",document.activeElement)},100),s.onData(b=>{if(console.log("TERMINAL INPUT CAPTURED:",b,"char codes:",Array.from(b).map(S=>S.charCodeAt(0))),_&&_.readyState===WebSocket.OPEN){const S=JSON.stringify({type:"input",data:b});console.log("Sending to WebSocket:",S),_.send(S)}else console.warn("WebSocket not ready, state:",_?.readyState)}),console.log("Input handler attached to terminal"),h){const b=S=>{console.log("Direct keydown on container:",S.key,"code:",S.code),s&&!s.element?.contains(document.activeElement)&&s.focus()};h.addEventListener("keydown",b),h._keydownHandler=b}}catch(b){console.error("Failed to initialize terminal:",b),d(`Failed to load terminal: ${b}`)}},f=()=>{const S=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/api/local/terminal`;console.log("Connecting to WebSocket:",S);try{_=new WebSocket(S),_.onopen=()=>{console.log("WebSocket connected!"),r(!0),d(null),s&&(s.write(`\r
\x1B[32mConnected to local terminal\x1B[0m\r
\r
`),i&&(i.fit(),_?.send(JSON.stringify({type:"resize",cols:s.cols,rows:s.rows}))),setTimeout(()=>{s.focus(),console.log("Terminal focused after connection, element:",s.element)},100))},_.onmessage=y=>{s&&s.write(y.data)},_.onerror=y=>{console.error("WebSocket error:",y),d("WebSocket connection failed"),r(!1),s&&s.write(`\r
\x1B[31mConnection error\x1B[0m\r
`)},_.onclose=()=>{console.log("WebSocket closed"),r(!1),s&&s.write(`\r
\x1B[31mConnection closed\x1B[0m\r
`)}}catch(y){console.error("Failed to create WebSocket:",y),d(`Failed to connect: ${y}`)}};Dt(()=>{e.isOpen?(console.log("Modal opened, initializing terminal..."),setTimeout(()=>{u(),setTimeout(()=>{f()},200)},100)):(console.log("Modal closed, cleaning up..."),_&&(_.close(),_=null),s&&(s.dispose(),s=null),h&&h._keydownHandler&&(h.removeEventListener("keydown",h._keydownHandler),delete h._keydownHandler),i=null,r(!1),d(null))}),cr(()=>{const b=()=>{i&&s&&(i.fit(),_&&_.readyState===WebSocket.OPEN&&_.send(JSON.stringify({type:"resize",cols:s.cols,rows:s.rows})))};window.addEventListener("resize",b),tr(()=>{window.removeEventListener("resize",b)})}),tr(()=>{_&&(_.close(),_=null),s&&(s.dispose(),s=null),i=null});const g=()=>{_&&(_.close(),_=null),s&&(s.dispose(),s=null),h&&h._keydownHandler&&(h.removeEventListener("keydown",h._keydownHandler),delete h._keydownHandler),i=null,r(!1),d(null),e.onClose()},v=()=>{window.open("/terminal","_blank","width=1200,height=800"),e.onClose()};return T(st,{get isOpen(){return e.isOpen},onClose:g,title:"Local Terminal",size:"full",get children(){var b=hc(),S=b.firstChild,y=S.firstChild,l=y.nextSibling,a=l.nextSibling,o=a.nextSibling,c=S.nextSibling;p(l,()=>t()?"Connected":"Disconnected"),o.$$click=v,p(b,T(ee,{get when(){return n()},get children(){var w=dc();return p(w,n),w}}),c),c.$$keydown=w=>{console.log("Container keydown:",w.key,"target:",w.target),w.stopPropagation()},c.$$click=w=>{console.log("Container clicked, focusing terminal..."),w.stopPropagation(),s&&(s.focus(),h?.focus(),console.log("Terminal focused, element:",s.element,"activeElement:",document.activeElement))};var m=h;return typeof m=="function"?qt(m,c):h=c,ne(()=>Ue(y,`w-2 h-2 rounded-full ${t()?"bg-green-500":"bg-red-500"}`)),b}})};lt(["click","keydown"]);var uc=O('<button class="w-full flex items-center justify-between px-2.5 py-2 rounded-md hover:bg-white/5 transition-colors group"><span class="text-xs font-bold uppercase tracking-wide"style=color:var(--text-primary)></span><svg fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 9l-7 7-7-7">'),fc=O("<div>"),gc=O("<div class=mb-1>"),pc=O("<span>"),vc=O('<div class="fixed px-2 py-1 rounded text-xs font-medium whitespace-nowrap z-[9999]"style="transform:translateY(-50%);background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color);box-shadow:0 2px 8px rgba(0,0,0,0.3)">'),mc=O('<button><svg class="w-4 h-4 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2>'),_c=O('<span class="font-bold text-lg gradient-text">KubeGraf'),bc=O("<span class=text-sm>Settings"),yc=O('<div class="flex items-center gap-1.5 px-2.5 mt-2 text-xs"style=color:var(--text-muted)><span class="w-1.5 h-1.5 rounded-full bg-green-500"></span><span>v1.0.0'),xc=O('<aside><div class="h-14 flex items-center justify-between px-3 border-b"style=border-color:rgba(255,255,255,0.08)><button class="flex items-center gap-2.5 hover:opacity-80 transition-opacity"title="Go to Dashboard"><svg viewBox="0 0 100 100"width=32 height=32 xmlns=http://www.w3.org/2000/svg><defs><linearGradient id=gGrad x1=0% y1=0% x2=100% y2=100%><stop offset=0% stop-color=#22d3ee></stop><stop offset=50% stop-color=#3b82f6></stop><stop offset=100% stop-color=#d946ef></stop></linearGradient><filter id=glow><feGaussianBlur stdDeviation=1.5 result=coloredBlur></feGaussianBlur><feMerge><feMergeNode in=coloredBlur></feMergeNode><feMergeNode in=SourceGraphic></feMergeNode></feMerge></filter></defs><g filter=url(#glow)><line x1=80 y1=30 x2=60 y2=12 stroke=#22d3ee stroke-width=3.5 stroke-linecap=round></line><line x1=60 y1=12 x2=35 y2=12 stroke=#06b6d4 stroke-width=3.5 stroke-linecap=round></line><line x1=35 y1=12 x2=12 y2=30 stroke=#3b82f6 stroke-width=3.5 stroke-linecap=round></line><line x1=12 y1=30 x2=12 y2=70 stroke=#3b82f6 stroke-width=3.5 stroke-linecap=round></line><line x1=12 y1=70 x2=35 y2=88 stroke=#6366f1 stroke-width=3.5 stroke-linecap=round></line><line x1=35 y1=88 x2=60 y2=88 stroke=#8b5cf6 stroke-width=3.5 stroke-linecap=round></line><line x1=60 y1=88 x2=80 y2=70 stroke=#a855f7 stroke-width=3.5 stroke-linecap=round></line><line x1=80 y1=70 x2=80 y2=50 stroke=#c026d3 stroke-width=3.5 stroke-linecap=round></line><line x1=80 y1=50 x2=55 y2=50 stroke=#d946ef stroke-width=3.5 stroke-linecap=round></line></g><circle cx=80 cy=30 r=5 fill=#22d3ee></circle><circle cx=60 cy=12 r=5 fill=#06b6d4></circle><circle cx=35 cy=12 r=5 fill=#3b82f6></circle><circle cx=12 cy=30 r=5 fill=#3b82f6></circle><circle cx=12 cy=70 r=5 fill=#6366f1></circle><circle cx=35 cy=88 r=5 fill=#8b5cf6></circle><circle cx=60 cy=88 r=5 fill=#a855f7></circle><circle cx=80 cy=70 r=5 fill=#c026d3></circle><circle cx=80 cy=50 r=5 fill=#d946ef></circle><circle cx=55 cy=50 r=5 fill=#d946ef></circle><g filter=url(#glow)><path d="M42 22 L62 34 L42 46 L22 34 Z"fill=#22d3ee stroke=#fff stroke-width=1.5></path><path d="M42 46 L62 34 L62 54 L42 66 Z"fill=#8b5cf6 stroke=#fff stroke-width=1.5></path><path d="M42 46 L22 34 L22 54 L42 66 Z"fill=#3b82f6 stroke=#fff stroke-width=1.5></path></g></svg></button><button class="p-1 rounded hover:bg-white/10 transition-colors"><svg fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M11 19l-7-7 7-7m8 14l-7-7 7-7"></path></svg></button></div><nav class="p-1.5 overflow-y-auto"style="height:calc(100% - 3.5rem - 4rem)"></nav><div class="absolute bottom-0 left-0 right-0 p-2 border-t"style=border-color:rgba(255,255,255,0.08)><button><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M15 12a3 3 0 11-6 0 3 3 0 016 0z">');const wc=[{title:"Overview",items:[{id:"dashboard",label:"Dashboard",icon:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"}]},{title:"Insights",items:[{id:"anomalies",label:"AI Insights",icon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},{id:"cost",label:"Cost Analysis",icon:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},{id:"security",label:"Security Insights",icon:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"},{id:"drift",label:"Drift Detection",icon:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"}]},{title:"Deployments",items:[{id:"deployapp",label:"Deploy App",icon:"M12 6v6m0 0v6m0-6h6m-6 0H6"},{id:"releases",label:"Releases",icon:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"},{id:"rollouts",label:"Rollouts (Canary / Blue-Green)",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},{id:"gitops",label:"GitOps Sync (Argo / Flux)",icon:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},{id:"apps",label:"Marketplace",icon:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"},{id:"customapps",label:"Custom Apps",icon:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"}]},{title:"Workloads",items:[{id:"pods",label:"Pods",icon:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"},{id:"deployments",label:"Deployments",icon:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"},{id:"statefulsets",label:"StatefulSets",icon:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"},{id:"daemonsets",label:"DaemonSets",icon:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"},{id:"jobs",label:"Jobs",icon:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"},{id:"cronjobs",label:"CronJobs",icon:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"}]},{title:"Networking",items:[{id:"services",label:"Services",icon:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"},{id:"ingresses",label:"Ingresses",icon:"M13 10V3L4 14h7v7l9-11h-7z"},{id:"networkpolicies",label:"Network Policies",icon:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"}]},{title:"Config & Storage",items:[{id:"configmaps",label:"ConfigMaps",icon:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"},{id:"secrets",label:"Secrets",icon:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"},{id:"certificates",label:"Certificates",icon:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"},{id:"storage",label:"Storage",icon:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"}]},{title:"Cluster",items:[{id:"nodes",label:"Nodes",icon:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"},{id:"rbac",label:"RBAC",icon:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"},{id:"resourcemap",label:"Resource Map",icon:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"}]},{title:"Extensions",items:[{id:"plugins",label:"Plugins",icon:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"}]}],Sc=e=>{const[t,r]=J(e.defaultExpanded??!0);return(()=>{var n=gc();return p(n,T(ee,{get when(){return!Bt()},get children(){var d=uc(),_=d.firstChild,h=_.nextSibling;return d.$$click=()=>r(!t()),p(_,()=>e.section.title),ne(()=>et(h,"class",`w-3.5 h-3.5 transition-transform duration-200 ${t()?"":"-rotate-90"}`)),d}}),null),p(n,T(ee,{get when(){return t()||Bt()},get children(){var d=fc();return p(d,T(Ve,{get each(){return e.section.items},children:_=>{const[h,s]=J(!1),[i,u]=J({top:0,left:0});return(()=>{var f=mc(),g=f.firstChild,v=g.firstChild;return f.addEventListener("mouseleave",()=>s(!1)),f.addEventListener("mouseenter",b=>{if(Bt()){const S=b.currentTarget.getBoundingClientRect();u({top:S.top+S.height/2,left:S.right+8}),s(!0)}}),f.$$click=b=>{b.preventDefault(),b.stopPropagation(),_.id==="terminal"?handleTerminalClick():Vt(_.id)},p(f,T(ee,{get when(){return!Bt()},get children(){var b=pc();return p(b,()=>_.label),ne(()=>Ue(b,`text-sm ${Gt()===_.id?"font-medium":""}`)),b}}),null),p(f,T(ee,{get when(){return Fe(()=>!!Bt())()&&h()},get children(){return T(wi,{get children(){var b=vc();return p(b,()=>_.label),ne(S=>{var y=`${i().top}px`,l=`${i().left}px`;return y!==S.e&&ve(b,"top",S.e=y),l!==S.t&&ve(b,"left",S.t=l),S},{e:void 0,t:void 0}),b}})}}),null),ne(b=>{var S=`w-full flex items-center gap-2.5 px-2.5 py-1.5 rounded-md transition-all ${Gt()===_.id?"bg-white/10":"hover:bg-white/5"}`,y=Gt()===_.id?"var(--text-primary)":"var(--text-secondary)",l=_.icon;return S!==b.e&&Ue(f,b.e=S),y!==b.t&&ve(f,"color",b.t=y),l!==b.a&&et(v,"d",b.a=l),b},{e:void 0,t:void 0,a:void 0}),f})()}})),ne(()=>Ue(d,`space-y-px ${Bt()?"":"mt-0.5"}`)),d}}),null),n})()},$c=()=>{const[e,t]=J(!1);return(()=>{var r=xc(),n=r.firstChild,d=n.firstChild;d.firstChild;var _=d.nextSibling,h=_.firstChild,s=n.nextSibling,i=s.nextSibling,u=i.firstChild;return u.firstChild,d.$$click=()=>Vt("dashboard"),p(d,T(ee,{get when(){return!Bt()},get children(){return _c()}}),null),jr(_,"click",nc,!0),p(s,T(Ve,{each:wc,children:(f,g)=>T(Sc,{section:f,get defaultExpanded(){return g()<3}})})),u.$$click=()=>Vt("settings"),p(u,T(ee,{get when(){return!Bt()},get children(){return bc()}}),null),p(i,T(ee,{get when(){return!Bt()},get children(){return yc()}}),null),p(r,T(co,{get isOpen(){return e()},onClose:()=>t(!1)}),null),ne(f=>{var g=`fixed left-0 top-0 h-full sidebar-glass transition-all duration-300 z-40 ${Bt()?"w-16":"w-52"}`,v=Bt()?"Expand":"Collapse",b=`w-4 h-4 transition-transform ${Bt()?"rotate-180":""}`,S=`w-full flex items-center gap-2.5 px-2.5 py-1.5 rounded-md transition-all ${Gt()==="settings"?"bg-white/10":"hover:bg-white/5"}`,y=Gt()==="settings"?"var(--text-primary)":"var(--text-secondary)";return g!==f.e&&Ue(r,f.e=g),v!==f.t&&et(_,"title",f.t=v),b!==f.a&&et(h,"class",f.a=b),S!==f.o&&Ue(u,f.o=S),y!==f.i&&ve(u,"color",f.i=y),f},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),r})()};lt(["click"]);const[tt,un]=J("_all"),[Zs,ho]=J(["default"]),[hs,uo]=J([]),[es,fo]=J(""),[Cc,zi]=J(!1),[kc,Qr]=J(""),[Vn,Ec]=J({connected:!1,context:"",server:"",namespace:"default",nodeCount:0,podCount:0,cpuUsage:0,memoryUsage:0});async function Ac(){const e=await fetch("/api/namespaces");if(!e.ok)throw new Error("Failed to fetch namespaces");return(await e.json()).namespaces||[]}async function Lc(e){const t=e==="_all"?"/api/pods?all=true":`/api/pods?namespace=${e}`,r=await fetch(t);if(!r.ok)throw new Error("Failed to fetch pods");const n=await r.json();return Array.isArray(n)?n:n.pods||[]}async function Mc(e){const t=e==="_all"?"/api/deployments?all=true":`/api/deployments?namespace=${e}`,r=await fetch(t);if(!r.ok)throw new Error("Failed to fetch deployments");const n=await r.json();return Array.isArray(n)?n:n.deployments||[]}async function Dc(e){const t=e==="_all"?"/api/services?all=true":`/api/services?namespace=${e}`,r=await fetch(t);if(!r.ok)throw new Error("Failed to fetch services");const n=await r.json();return Array.isArray(n)?n:n.services||[]}async function Rc(){const e=await fetch("/api/nodes");if(!e.ok)throw new Error("Failed to fetch nodes");const t=await e.json();return Array.isArray(t)?t:t.nodes||[]}async function Tc(){const e=await fetch("/api/status");if(!e.ok)throw new Error("Failed to fetch status");const t=await e.json();return{connected:t.connected||!1,context:t.cluster||t.context||"",server:t.server||"",namespace:t.namespace||"default",nodeCount:t.nodeCount||0,podCount:t.podCount||0,cpuUsage:t.cpuUsage||0,memoryUsage:t.memoryUsage||0}}async function go(){const e=await fetch("/api/contexts");if(!e.ok)throw new Error("Failed to fetch contexts");return(await e.json()).contexts||[]}async function Pc(e){zi(!0),Qr(`Switching to ${e}...`);try{if(!(await fetch("/api/contexts/switch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({context:e})})).ok)throw new Error("Failed to switch context");fo(e),Qr(`Loading resources from ${e}...`),vo();const r=await go();uo(r);const n=await fetch("/api/namespaces");if(n.ok){const d=await n.json();ho(d.namespaces||[])}Qr(`Connected to ${e}`),setTimeout(()=>{zi(!1),Qr("")},1e3)}catch(t){throw Qr(`Failed to switch to ${e}`),setTimeout(()=>{zi(!1),Qr("")},2e3),t}}const[di]=Ke(Ac),[Wn,{refetch:Ic}]=Ke(tt,Lc),[H2,{refetch:Bc}]=Ke(tt,Mc),[N2,{refetch:Oc}]=Ke(tt,Dc),[bs,{refetch:po}]=Ke(Rc),[Zi,{refetch:Hc}]=Ke(Tc),[Qi,{refetch:z2}]=Ke(go);Dt(()=>{const e=di();e&&ho(e)});Dt(()=>{const e=Zi();console.log("Status resource loaded:",e),e&&(Ec(e),fo(e.context))});Dt(()=>{const e=Qi();console.log("Contexts resource loaded:",e),e&&uo(e)});Dt(()=>{Zi.error&&console.error("Status error:",Zi.error),di.error&&console.error("Namespaces error:",di.error),Wn.error&&console.error("Pods error:",Wn.error),bs.error&&console.error("Nodes error:",bs.error)});function vo(){Ic(),Bc(),Oc(),po(),Hc()}const zr={dark:{name:"dark",label:"Dark",icon:"moon",colors:{bgPrimary:"#0f172a",bgSecondary:"#1e293b",bgTertiary:"#334155",bgCard:"rgba(30, 41, 59, 0.8)",bgNavbar:"rgba(15, 23, 42, 0.95)",bgInput:"rgba(30, 41, 59, 0.8)",textPrimary:"#ffffff",textSecondary:"#94a3b8",textMuted:"#64748b",borderColor:"rgba(100, 116, 139, 0.3)",borderLight:"rgba(100, 116, 139, 0.5)",accentPrimary:"#06b6d4",accentSecondary:"#3b82f6",accentGradient:"linear-gradient(135deg, #06b6d4 0%, #3b82f6 50%, #8b5cf6 100%)",successColor:"#22c55e",warningColor:"#f59e0b",errorColor:"#ef4444"}},light:{name:"light",label:"Light",icon:"sun",colors:{bgPrimary:"#f8fafc",bgSecondary:"#e2e8f0",bgTertiary:"#cbd5e1",bgCard:"rgba(255, 255, 255, 0.95)",bgNavbar:"rgba(248, 250, 252, 0.95)",bgInput:"rgba(255, 255, 255, 0.9)",textPrimary:"#0f172a",textSecondary:"#475569",textMuted:"#64748b",borderColor:"rgba(148, 163, 184, 0.4)",borderLight:"rgba(148, 163, 184, 0.6)",accentPrimary:"#0891b2",accentSecondary:"#2563eb",accentGradient:"linear-gradient(135deg, #0891b2 0%, #2563eb 100%)",successColor:"#16a34a",warningColor:"#d97706",errorColor:"#dc2626"}},midnight:{name:"midnight",label:"Midnight",icon:"stars",colors:{bgPrimary:"#030712",bgSecondary:"#111827",bgTertiary:"#1f2937",bgCard:"rgba(17, 24, 39, 0.9)",bgNavbar:"rgba(3, 7, 18, 0.98)",bgInput:"rgba(17, 24, 39, 0.9)",textPrimary:"#f9fafb",textSecondary:"#9ca3af",textMuted:"#6b7280",borderColor:"rgba(75, 85, 99, 0.4)",borderLight:"rgba(75, 85, 99, 0.6)",accentPrimary:"#8b5cf6",accentSecondary:"#a855f7",accentGradient:"linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%)",successColor:"#10b981",warningColor:"#f59e0b",errorColor:"#f43f5e"}},cyberpunk:{name:"cyberpunk",label:"Cyberpunk",icon:"bolt",colors:{bgPrimary:"#0a0a0f",bgSecondary:"#12121a",bgTertiary:"#1a1a25",bgCard:"rgba(18, 18, 26, 0.95)",bgNavbar:"rgba(10, 10, 15, 0.98)",bgInput:"rgba(18, 18, 26, 0.9)",textPrimary:"#00ff9f",textSecondary:"#ff00ff",textMuted:"#00d4ff",borderColor:"rgba(0, 255, 159, 0.3)",borderLight:"rgba(255, 0, 255, 0.4)",accentPrimary:"#00ff9f",accentSecondary:"#ff00ff",accentGradient:"linear-gradient(135deg, #00ff9f 0%, #ff00ff 100%)",successColor:"#00ff9f",warningColor:"#ffff00",errorColor:"#ff0055"}},ocean:{name:"ocean",label:"Ocean",icon:"wave",colors:{bgPrimary:"#0c1929",bgSecondary:"#132f4c",bgTertiary:"#1a4971",bgCard:"rgba(19, 47, 76, 0.9)",bgNavbar:"rgba(12, 25, 41, 0.98)",bgInput:"rgba(19, 47, 76, 0.9)",textPrimary:"#ffffff",textSecondary:"#b2bac2",textMuted:"#8b949e",borderColor:"rgba(48, 98, 139, 0.5)",borderLight:"rgba(48, 98, 139, 0.7)",accentPrimary:"#29b6f6",accentSecondary:"#4fc3f7",accentGradient:"linear-gradient(135deg, #29b6f6 0%, #4fc3f7 100%)",successColor:"#66bb6a",warningColor:"#ffa726",errorColor:"#ef5350"}},terminal:{name:"terminal",label:"Terminal",icon:"terminal",colors:{bgPrimary:"#000000",bgSecondary:"#1a1a1a",bgTertiary:"#2d2d2d",bgCard:"rgba(26, 26, 26, 0.95)",bgNavbar:"rgba(0, 0, 0, 0.98)",bgInput:"rgba(26, 26, 26, 0.9)",textPrimary:"#ffffff",textSecondary:"#e5e5e5",textMuted:"#999999",borderColor:"rgba(255, 255, 255, 0.1)",borderLight:"rgba(255, 255, 255, 0.15)",accentPrimary:"#007aff",accentSecondary:"#5ac8fa",accentGradient:"linear-gradient(135deg, #007aff 0%, #5ac8fa 100%)",successColor:"#34c759",warningColor:"#ff9500",errorColor:"#ff3b30"}}};function Nc(){if(typeof window<"u"){const e=localStorage.getItem("kubegraf-theme");if(e&&zr[e])return e}return"dark"}const[ts,zc]=J(Nc());function mo(e){const t=zr[e],r=document.documentElement;Object.entries(t.colors).forEach(([n,d])=>{const _=n.replace(/([A-Z])/g,"-$1").toLowerCase();r.style.setProperty(`--${_}`,d)}),document.body.setAttribute("data-theme",e),localStorage.setItem("kubegraf-theme",e)}function _o(e){zc(e),mo(e)}typeof window<"u"&&mo(ts());var Fc=O('<svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="w-5 h-5"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z">'),jc=O('<svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="w-5 h-5"><circle cx=12 cy=12 r=5></circle><line x1=12 y1=1 x2=12 y2=3></line><line x1=12 y1=21 x2=12 y2=23></line><line x1=4.22 y1=4.22 x2=5.64 y2=5.64></line><line x1=18.36 y1=18.36 x2=19.78 y2=19.78></line><line x1=1 y1=12 x2=3 y2=12></line><line x1=21 y1=12 x2=23 y2=12></line><line x1=4.22 y1=19.78 x2=5.64 y2=18.36></line><line x1=18.36 y1=5.64 x2=19.78 y2=4.22>'),Uc=O('<svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="w-5 h-5"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2">'),Vc=O('<svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="w-5 h-5"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2">'),Wc=O('<svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="w-5 h-5"><path d="M2 12c2-2 4-4 6-4s4 2 6 4 4 4 6 4 4-2 6-4"></path><path d="M2 6c2-2 4-4 6-4s4 2 6 4 4 4 6 4 4-2 6-4"></path><path d="M2 18c2-2 4-4 6-4s4 2 6 4 4 4 6 4 4-2 6-4">'),qc=O('<svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="w-5 h-5"><polyline points="4 17 10 11 4 5"></polyline><line x1=12 y1=19 x2=20 y2=19>'),Kc=O('<div class="fixed inset-0"style=z-index:99998>'),Yc=O('<div class="fixed w-48 rounded-lg border border-[var(--border-color)] shadow-xl"style=background:var(--bg-secondary);z-index:99999>'),Gc=O('<div class=relative><button class="icon-btn border border-[var(--border-color)] hover:border-[var(--accent-primary)]">'),Xc=O("<button><span class=font-medium>"),Jc=O('<svg class="w-4 h-4 ml-auto"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"clip-rule=evenodd>');const Zc=()=>{const[e,t]=J(!1),[r,n]=J({top:0,right:0});let d;const _={dark:Fc(),light:jc(),midnight:Uc(),cyberpunk:Vc(),ocean:Wc(),terminal:qc()},h=()=>{if(!e()&&d){const s=d.getBoundingClientRect();n({top:s.bottom+8,right:window.innerWidth-s.right})}t(!e())};return(()=>{var s=Gc(),i=s.firstChild;i.$$click=h;var u=d;return typeof u=="function"?qt(u,i):d=i,p(i,()=>_[ts()]),p(s,T(wi,{get children(){return T(ee,{get when(){return e()},get children(){return[(()=>{var f=Kc();return f.$$click=()=>t(!1),f})(),(()=>{var f=Yc();return p(f,()=>Object.keys(zr).map(g=>(()=>{var v=Xc(),b=v.firstChild;return v.$$click=()=>{_o(g),t(!1)},p(v,()=>_[g],b),p(b,()=>zr[g].label),p(v,(()=>{var S=Fe(()=>ts()===g);return()=>S()&&Jc()})(),null),ne(()=>Ue(v,`w-full flex items-center gap-3 px-4 py-3 transition-colors hover:bg-[var(--bg-tertiary)] ${ts()===g?"text-[var(--accent-primary)]":"text-[var(--text-primary)]"} ${g==="dark"?"rounded-t-lg":""} ${g==="terminal"?"rounded-b-lg":""}`)),v})())),ne(g=>{var v=`${r().top}px`,b=`${r().right}px`;return v!==g.e&&ve(f,"top",g.e=v),b!==g.t&&ve(f,"right",g.t=b),g},{e:void 0,t:void 0}),f})()]}})}}),null),ne(()=>et(i,"title",`Theme: ${zr[ts()].label}`)),s})()};lt(["click"]);const Er="/api";async function Le(e,t){const r=await fetch(`${Er}${e}`,{headers:{"Content-Type":"application/json",...t?.headers},...t});if(!r.ok){const n=await r.text();throw new Error(n||`API error: ${r.status}`)}return r.json()}async function Qt(e){const r=await(await fetch(`${Er}${e}`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();if(!r.success)throw new Error(r.error||"Delete operation failed");return r}const De={getStatus:()=>Le("/status"),getMetrics:()=>Le("/metrics"),getNamespaces:async()=>(await Le("/namespaces")).namespaces||[],getPods:async e=>{const t=e&&e!=="_all"?`/pods?namespace=${e}`:"/pods?namespace=",r=await Le(t);return Array.isArray(r)?r:[]},getPodDetails:(e,t)=>Le(`/pod/details?name=${e}&namespace=${t}`),getPodYAML:(e,t)=>Le(`/pod/yaml?name=${e}&namespace=${t}`),updatePod:async(e,t,r)=>{const n=await fetch(`/api/pod/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"text/yaml"},body:r});if(!n.ok){const d=await n.json().catch(()=>({message:"Unknown error"}));throw new Error(d.error||d.message||`API error: ${n.statusText}`)}return n.json()},getPodDescribe:(e,t)=>Le(`/pod/describe?name=${e}&namespace=${t}`),deletePod:(e,t)=>Qt(`/pod/delete?name=${e}&namespace=${t}`),restartPod:(e,t)=>Le(`/pod/restart?name=${e}&namespace=${t}`,{method:"POST"}),getPodMetrics:async e=>{const t=e&&e!=="_all"?`/pods/metrics?namespace=${e}`:"/pods/metrics?namespace=";return await Le(t)||{}},getDeployments:async e=>{const t=e&&e!=="_all"?`/deployments?namespace=${e}`:"/deployments?namespace=",r=await Le(t);return Array.isArray(r)?r:[]},getDeploymentDetails:(e,t)=>Le(`/deployment/details?name=${e}&namespace=${t}`),getDeploymentYAML:(e,t)=>Le(`/deployment/yaml?name=${e}&namespace=${t}`),updateDeployment:async(e,t,r)=>{const n=await fetch(`/api/deployment/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"text/yaml"},body:r});if(!n.ok){const d=await n.json().catch(()=>({message:"Unknown error"}));throw new Error(d.error||d.message||`API error: ${n.statusText}`)}return n.json()},getDeploymentDescribe:(e,t)=>Le(`/deployment/describe?name=${e}&namespace=${t}`),deleteDeployment:(e,t)=>Qt(`/deployment/delete?name=${e}&namespace=${t}`),restartDeployment:(e,t)=>Le(`/deployment/restart?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST"}),scaleDeployment:(e,t,r)=>Le(`/deployment/scale?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}&replicas=${r}`,{method:"POST"}),getStatefulSets:async e=>{const t=e&&e!=="_all"?`/statefulsets?namespace=${e}`:"/statefulsets?namespace=",r=await Le(t);return Array.isArray(r)?r:[]},getStatefulSetYAML:(e,t)=>Le(`/statefulset/yaml?name=${e}&namespace=${t}`),getStatefulSetDescribe:(e,t)=>Le(`/statefulset/describe?name=${e}&namespace=${t}`),deleteStatefulSet:(e,t)=>Qt(`/statefulset/delete?name=${e}&namespace=${t}`),restartStatefulSet:(e,t)=>Le(`/statefulset/restart?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST"}),scaleStatefulSet:(e,t,r)=>Le(`/statefulset/scale?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}&replicas=${r}`,{method:"POST"}),getDaemonSets:async e=>{const t=e&&e!=="_all"?`/daemonsets?namespace=${e}`:"/daemonsets?namespace=",r=await Le(t);return Array.isArray(r)?r:[]},getDaemonSetYAML:(e,t)=>Le(`/daemonset/yaml?name=${e}&namespace=${t}`),updateDaemonSet:(e,t,r)=>fetch(`${Er}/daemonset/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"application/yaml"},body:r}).then(n=>n.json()),getDaemonSetDescribe:(e,t)=>Le(`/daemonset/describe?name=${e}&namespace=${t}`),deleteDaemonSet:(e,t)=>Qt(`/daemonset/delete?name=${e}&namespace=${t}`),getCronJobs:async e=>{const t=e&&e!=="_all"?`/cronjobs?namespace=${e}`:"/cronjobs?namespace=",r=await Le(t);return Array.isArray(r)?r:[]},getCronJobYAML:(e,t)=>Le(`/cronjob/yaml?name=${e}&namespace=${t}`),updateCronJob:(e,t,r)=>fetch(`${Er}/cronjob/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"application/yaml"},body:r}).then(n=>n.json()),deleteCronJob:(e,t)=>Qt(`/cronjob/delete?name=${e}&namespace=${t}`),getJobs:async e=>{const t=e&&e!=="_all"?`/jobs?namespace=${e}`:"/jobs?namespace=",r=await Le(t);return Array.isArray(r)?r:[]},getJobYAML:(e,t)=>Le(`/job/yaml?name=${e}&namespace=${t}`),updateJob:(e,t,r)=>fetch(`${Er}/job/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"application/yaml"},body:r}).then(n=>n.json()),deleteJob:(e,t)=>Qt(`/job/delete?name=${e}&namespace=${t}`),getServices:async e=>{const t=e&&e!=="_all"?`/services?namespace=${e}`:"/services?namespace=",r=await Le(t);return Array.isArray(r)?r:[]},getServiceYAML:(e,t)=>Le(`/service/yaml?name=${e}&namespace=${t}`),updateService:(e,t,r)=>fetch(`${Er}/service/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"application/yaml"},body:r}).then(n=>n.json()),getServiceDescribe:(e,t)=>Le(`/service/describe?name=${e}&namespace=${t}`),deleteService:(e,t)=>Qt(`/service/delete?name=${e}&namespace=${t}`),getIngresses:async e=>{const t=e&&e!=="_all"?`/ingresses?namespace=${e}`:"/ingresses?namespace=",r=await Le(t);return Array.isArray(r)?r:[]},getIngressYAML:(e,t)=>Le(`/ingress/yaml?name=${e}&namespace=${t}`),updateIngress:(e,t,r)=>fetch(`${Er}/ingress/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"application/yaml"},body:r}).then(n=>n.json()),getIngressDescribe:(e,t)=>Le(`/ingress/describe?name=${e}&namespace=${t}`),deleteIngress:(e,t)=>Qt(`/ingress/delete?name=${e}&namespace=${t}`),getConfigMaps:async e=>{const t=e&&e!=="_all"?`/configmaps?namespace=${e}`:"/configmaps?namespace=",r=await Le(t);return Array.isArray(r)?r:[]},getConfigMapYAML:(e,t)=>Le(`/configmap/yaml?name=${e}&namespace=${t}`),getConfigMapDescribe:(e,t)=>Le(`/configmap/describe?name=${e}&namespace=${t}`),deleteConfigMap:(e,t)=>Qt(`/configmap/delete?name=${e}&namespace=${t}`),getSecrets:async e=>{const t=e&&e!=="_all"?`/secrets?namespace=${e}`:"/secrets?namespace=",r=await Le(t);return Array.isArray(r)?r:[]},getSecretYAML:(e,t)=>Le(`/secret/yaml?name=${e}&namespace=${t}`),updateSecret:async(e,t,r)=>{const n=await fetch(`/api/secret/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"text/yaml"},body:r});if(!n.ok){const d=await n.json().catch(()=>({message:"Unknown error"}));throw new Error(d.error||d.message||`API error: ${n.statusText}`)}return n.json()},getSecretDescribe:(e,t)=>Le(`/secret/describe?name=${e}&namespace=${t}`),deleteSecret:(e,t)=>Qt(`/secret/delete?name=${e}&namespace=${t}`),getCertificates:async e=>{const t=e&&e!=="_all"?`/certificates?namespace=${e}`:"/certificates?namespace=",r=await Le(t);return Array.isArray(r)?r:[]},getCertificateYAML:(e,t)=>Le(`/certificate/yaml?name=${e}&namespace=${t}`),updateCertificate:(e,t,r)=>fetch(`${Er}/certificate/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"application/yaml"},body:r}).then(n=>n.json()),getCertificateDescribe:(e,t)=>Le(`/certificate/describe?name=${e}&namespace=${t}`),deleteCertificate:(e,t)=>Qt(`/certificate/delete?name=${e}&namespace=${t}`),getNodes:async()=>{const e=await Le("/nodes");return Array.isArray(e)?e:[]},getNodeDetails:e=>Le(`/node/details?name=${e}`),getNodeYAML:e=>Le(`/node/yaml?name=${e}`),getNodeDescribe:e=>Le(`/node/describe?name=${e}`),getTopology:e=>{const t=e&&e!=="All Namespaces"?`/topology?namespace=${e}`:"/topology";return Le(t)},getResourceMap:()=>Le("/resourcemap"),getImpactAnalysis:(e,t,r)=>Le(`/impact?kind=${e}&name=${t}&namespace=${r}`),getSecurityAnalysis:()=>Le("/security"),startPortForward:(e,t,r,n,d)=>Le("/portforward/start",{method:"POST",body:JSON.stringify({type:e,name:t,namespace:r,localPort:n,remotePort:d})}),stopPortForward:e=>Le(`/portforward/stop?id=${e}`,{method:"POST"}),listPortForwards:()=>Le("/portforward/list"),getAIStatus:()=>Le("/ai/status"),queryAI:e=>Le("/ai/query",{method:"POST",body:JSON.stringify({query:e})}),analyzePod:(e,t)=>Le(`/ai/analyze/pod?name=${e}&namespace=${t}`),explainError:(e,t)=>Le("/ai/explain",{method:"POST",body:JSON.stringify({error:e,resourceType:t})}),runDiagnostics:(e,t)=>{const r=new URLSearchParams;e&&r.append("namespace",e),t&&r.append("category",t);const n=r.toString()?`?${r.toString()}`:"";return Le(`/diagnostics/run${n}`)},getDiagnosticsCategories:()=>Le("/diagnostics/categories"),scanVulnerabilities:e=>{const t=new URLSearchParams;e&&t.append("severity",e);const r=t.toString()?`?${t.toString()}`:"";return Le(`/vulnerabilities/scan${r}`)},refreshVulnerabilities:()=>Le("/vulnerabilities/refresh",{method:"POST"}),getVulnerabilityStats:()=>Le("/vulnerabilities/stats"),detectAnomalies:e=>{const t=e?`/anomalies/detect?severity=${e}`:"/anomalies/detect";return Le(t)},getAnomalyStats:()=>Le("/anomalies/stats"),remediateAnomaly:e=>Le("/anomalies/remediate",{method:"POST",body:JSON.stringify({anomalyId:e})}),getAnomalyMetrics:e=>{const t=e?`/anomalies/metrics?limit=${e}`:"/anomalies/metrics";return Le(t)},getClusterCost:()=>Le("/cost/cluster"),getNamespaceCost:e=>Le(`/cost/namespace?namespace=${e}`),getPodCost:(e,t)=>Le(`/cost/pod?name=${e}&namespace=${t}`),getDeploymentCost:(e,t)=>Le(`/cost/deployment?name=${e}&namespace=${t}`),getIdleResources:(e,t,r)=>{const n=new URLSearchParams;e&&n.append("namespace",e),t&&n.append("cpuThreshold",t.toString()),r&&n.append("memThreshold",r.toString());const d=n.toString()?`?${n.toString()}`:"";return Le(`/cost/idle${d}`)},checkDrift:(e,t,r)=>{const n=new URLSearchParams({kind:e,name:t});return r&&n.append("namespace",r),Le(`/drift/check?${n.toString()}`)},getNamespaceDrift:e=>Le(`/drift/namespace?namespace=${e}`),getDriftSummary:e=>Le(`/drift/summary?namespace=${e}`),revertDrift:(e,t,r)=>Le("/drift/revert",{method:"POST",body:JSON.stringify({kind:e,name:t,namespace:r})}),getNetworkTopology:()=>Le("/network/topology"),getPodHeatmap:()=>Le("/heatmap/pods"),getNodeHeatmap:()=>Le("/heatmap/nodes"),getPluginsList:()=>Le("/plugins/list"),installPlugin:e=>Le("/plugins/install",{method:"POST",body:JSON.stringify({source:e})}),uninstallPlugin:e=>Le("/plugins/uninstall",{method:"POST",body:JSON.stringify({name:e})}),getHelmReleases:async e=>{const t=e?`/plugins/helm/releases?namespace=${e}`:"/plugins/helm/releases";return(await Le(t)).releases||[]},getHelmReleaseDetails:(e,t)=>Le(`/plugins/helm/release?name=${e}&namespace=${t}`),getHelmReleaseHistory:(e,t)=>Le(`/plugins/helm/history?name=${e}&namespace=${t}`),rollbackHelmRelease:(e,t,r)=>Le("/plugins/helm/rollback",{method:"POST",body:JSON.stringify({name:e,namespace:t,revision:r})}),getArgoCDApps:async()=>(await Le("/plugins/argocd/apps")).apps||[],getArgoCDAppDetails:(e,t)=>Le(`/plugins/argocd/app?name=${e}&namespace=${t}`),syncArgoCDApp:(e,t)=>Le("/plugins/argocd/sync",{method:"POST",body:JSON.stringify({name:e,namespace:t})}),refreshArgoCDApp:(e,t)=>Le("/plugins/argocd/refresh",{method:"POST",body:JSON.stringify({name:e,namespace:t})}),getFluxResources:async()=>(await Le("/plugins/flux/resources")).resources||[],getKustomizeResources:()=>Le("/plugins/kustomize/resources"),getCloudInfo:()=>Le("/cloud"),getContexts:()=>Le("/contexts"),getCurrentContext:()=>Le("/contexts/current"),switchContext:e=>Le("/contexts/switch",{method:"POST",body:JSON.stringify({context:e})}),getEvents:async(e,t)=>{const r=new URLSearchParams;return e&&e!=="All Namespaces"&&r.set("namespace",e),t&&r.set("limit",t.toString()),Le(`/events?${r.toString()}`)},getApps:()=>Le("/apps"),getAppDetails:e=>Le(`/apps/${e}`),installApp:(e,t,r)=>Le("/apps/install",{method:"POST",body:JSON.stringify({name:e,namespace:t,values:r})}),uninstallApp:(e,t)=>Le("/apps/uninstall",{method:"POST",body:JSON.stringify({name:e,namespace:t})}),getInstalledApps:()=>Le("/apps/installed"),analyzePodsLogs:e=>Le(`/ai/analyze/logs${e?`?namespace=${e}`:""}`),analyzePodLogs:(e,t)=>Le(`/ai/analyze/pod-logs?name=${e}&namespace=${t}`)};var Qc=O('<svg viewBox="0 0 256 206"class="w-5 h-5"fill=none><path d="M170.252 56.819l22.253-22.253 1.483-9.37C153.437-11.677 88.976-7.496 52.42 33.92 42.267 45.423 34.734 59.764 30.717 74.573l7.97-1.123 44.505-7.34 3.436-3.513c19.797-21.742 53.27-24.667 76.128-5.632l7.496-.146z"fill=#EA4335></path><path d="M224.205 73.918a100.249 100.249 0 00-30.217-48.722l-31.232 31.232a55.515 55.515 0 0120.379 44.037v5.544c15.35 0 27.797 12.446 27.797 27.796 0 15.352-12.446 27.573-27.797 27.573h-55.671l-5.466 5.621v33.339l5.466 5.389h55.67c40.143.312 73.076-31.857 73.388-72 .178-23.106-10.736-44.898-29.84-59.653l-2.477.844z"fill=#4285F4></path><path d="M71.87 205.796h55.593V161.29H71.87a27.275 27.275 0 01-11.467-2.545l-7.97 2.468-22.331 22.253-1.949 7.65c12.758 9.603 28.39 14.758 44.484 14.68h-.767z"fill=#34A853></path><path d="M71.87 50.525C31.727 50.837-1.207 84.447.081 124.59c.72 22.632 11.389 43.821 28.925 57.476l32.25-32.25c-16.292-7.378-23.503-26.672-16.125-42.964a31.86 31.86 0 0116.125-16.125l-32.25-32.25A72.002 72.002 0 0071.87 50.525z"fill=#FBBC05>'),ed=O('<svg viewBox="0 0 256 153"class="w-5 h-5"fill=none><path d="M72.392 55.438c0 3.137.34 5.68.933 7.545a45.373 45.373 0 002.712 6.103c.424.678.593 1.356.593 1.95 0 .847-.508 1.695-1.61 2.543l-5.34 3.56c-.763.509-1.526.763-2.205.763-.847 0-1.695-.424-2.543-1.187a26.224 26.224 0 01-3.051-3.984 65.48 65.48 0 01-2.628-5.001c-6.612 7.798-14.92 11.698-24.922 11.698-7.12 0-12.8-2.035-16.954-6.103-4.153-4.07-6.272-9.495-6.272-16.277 0-7.206 2.543-13.054 7.714-17.462 5.17-4.408 12.037-6.612 20.682-6.612 2.882 0 5.849.254 8.985.678 3.137.424 6.358 1.102 9.749 1.865V29.33c0-6.443-1.356-10.935-3.984-13.563-2.712-2.628-7.29-3.9-13.817-3.9-2.967 0-6.018.34-9.155 1.103-3.136.762-6.188 1.695-9.155 2.882-.763.34-1.441.593-1.95.763-.508.17-.932.254-1.271.254-1.102 0-1.61-.763-1.61-2.374v-4.153c0-1.272.17-2.205.593-2.713.424-.508 1.187-1.017 2.374-1.525 2.967-1.526 6.527-2.798 10.68-3.815C24.922.678 29.33.085 33.992.085c10.256 0 17.716 2.374 22.463 7.12 4.662 4.747 7.036 11.952 7.036 21.615v28.618h-.1z"fill=#252F3E></path><path d="M30.94 67.052c2.798 0 5.68-.509 8.731-1.526 3.052-1.017 5.765-2.882 8.054-5.425 1.356-1.61 2.374-3.39 2.882-5.51.509-2.12.848-4.661.848-7.629v-3.646a70.732 70.732 0 00-7.799-1.44 63.56 63.56 0 00-7.968-.509c-5.68 0-9.833 1.102-12.63 3.39-2.798 2.289-4.154 5.51-4.154 9.749 0 3.984 1.017 6.95 3.136 8.985 2.035 2.12 5.001 3.137 8.9 3.137v.424z"fill=#252F3E></path><path d="M126.434 74.087c-1.441 0-2.374-.254-2.967-.847-.593-.509-1.102-1.61-1.525-3.052l-17.039-56.05c-.424-1.526-.678-2.543-.678-3.136 0-1.272.593-1.95 1.78-1.95h8.308c1.526 0 2.543.254 3.052.847.593.509 1.017 1.61 1.44 3.052l12.206 48.082 11.359-48.082c.34-1.526.763-2.543 1.356-3.052.593-.508 1.695-.847 3.136-.847h6.782c1.526 0 2.543.254 3.136.847.593.509 1.102 1.61 1.357 3.052l11.528 48.675 12.545-48.675c.424-1.526.932-2.543 1.441-3.052.593-.508 1.61-.847 3.051-.847h7.883c1.187 0 1.865.678 1.865 1.95 0 .338-.085.678-.17 1.101-.084.424-.254 1.017-.508 1.78l-17.378 56.219c-.424 1.526-.932 2.543-1.526 3.052-.593.508-1.61.847-2.966.847h-7.29c-1.526 0-2.544-.254-3.137-.847-.593-.593-1.102-1.61-1.356-3.136l-11.274-46.877-11.19 46.793c-.339 1.526-.763 2.543-1.356 3.136-.593.593-1.695.848-3.137.848h-7.29z"fill=#252F3E></path><path d="M201.462 78.325c-4.408 0-8.816-.508-13.055-1.525-4.238-1.017-7.544-2.12-9.748-3.39-1.357-.763-2.29-1.61-2.629-2.374-.339-.763-.508-1.61-.508-2.374v-4.322c0-1.61.593-2.374 1.695-2.374.423 0 .847.085 1.271.254.424.17 1.102.424 1.865.763 2.543 1.187 5.34 2.12 8.308 2.798 3.051.678 6.018 1.017 9.07 1.017 4.831 0 8.562-.847 11.105-2.543 2.543-1.695 3.9-4.153 3.9-7.29 0-2.119-.678-3.9-2.035-5.34-1.356-1.441-3.984-2.713-7.798-3.9l-11.19-3.475c-5.68-1.78-9.918-4.408-12.546-7.883-2.628-3.39-3.984-7.205-3.984-11.274 0-3.306.678-6.188 2.035-8.731 1.356-2.543 3.136-4.747 5.425-6.527 2.288-1.865 4.916-3.221 8.053-4.153 3.136-.932 6.442-1.356 9.918-1.356 1.78 0 3.645.085 5.425.339 1.865.254 3.56.593 5.255.932 1.61.424 3.136.847 4.577 1.356 1.44.508 2.543 1.017 3.305 1.525.932.593 1.61 1.187 1.95 1.865.339.593.508 1.44.508 2.458v3.984c0 1.61-.593 2.458-1.695 2.458-.593 0-1.526-.254-2.798-.763-4.238-1.95-9.07-2.882-14.495-2.882-4.408 0-7.883.678-10.341 2.12-2.459 1.44-3.73 3.645-3.73 6.781 0 2.12.763 3.9 2.289 5.34 1.525 1.441 4.408 2.882 8.562 4.153l10.935 3.475c5.595 1.78 9.665 4.238 12.122 7.374 2.459 3.136 3.646 6.697 3.646 10.681 0 3.39-.678 6.442-1.95 9.155-1.356 2.713-3.22 5.086-5.594 7.036-2.374 2.035-5.255 3.56-8.647 4.577-3.56 1.102-7.374 1.61-11.444 1.61z"fill=#252F3E></path><path d="M237.596 145.256c-29.126 21.531-71.418 32.974-107.813 32.974-50.996 0-96.927-18.853-131.65-50.235-2.713-2.459-.339-5.849 2.967-3.9 37.517 21.785 83.787 34.922 131.65 34.922 32.296 0 67.78-6.697 100.414-20.598 4.916-2.12 9.07 3.221 4.432 6.837z"fill=#FF9900></path><path d="M249.548 131.524c-3.73-4.747-24.668-2.289-34.078-1.102-2.882.339-3.306-2.12-.678-3.9 16.7-11.698 43.99-8.308 47.127-4.408 3.136 3.984-.848 31.314-16.531 44.369-2.374 2.035-4.662.932-3.56-1.78 3.475-8.562 11.189-28.449 7.72-33.179z"fill=#FF9900>'),td=O('<svg viewBox="0 0 96 96"class="w-5 h-5"fill=none><path d="M33.337 6.11L2.305 81.954h21.792L57.67 6.11H33.337z"fill=#0078D4></path><path d="M71.175 26.316H43.09L20.97 82.097h22.125l28.08-55.781z"fill=#0078D4></path><path d="M79.04 6.11L57.8 89.9h18.41l21.484-83.79H79.04z"fill=#0078D4>'),rd=O('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#0530AD><path d="M0 7.5h4.05v.9H0zm5.4 0v.9H6.3v-.9h-.9zm3.6 0v.9h4.05v-.9H9zm8.1 0v.9h.9v-.9h-.9zm3.6 0v.9H24v-.9h-3.3zM0 9.3h4.05v.9H0zm5.4 0v.9H6.3v-.9h-.9zm3.6 0v.9h4.05v-.9H9zm8.1 0v.9h.9v-.9h-.9zm3.6 0v.9H24v-.9h-3.3zM0 11.1h2.7v.9H0zm3.6 0v.9h1.35c.124-.31.248-.6.45-.9H3.6zm5.4 0v.9h1.35c.186.31.31.6.45.9H9zm8.1 0c.124.31.248.6.45.9h1.35v-.9h-.9zm2.7 0v.9h.9c.186-.31.31-.6.45-.9h-.45zm2.7 0c.124.31.248.6.45.9H24v-.9h-3.3zM0 12.9h2.7v.9H0zm3.6 0v.9h.45c-.186-.31-.31-.6-.45-.9zm5.4 0c-.124-.31-.248-.6-.45-.9v.9H9zm8.1 0v.9c.124-.31.248-.6.45-.9h-.45zm2.7 0c-.186.31-.31.6-.45.9h.45v-.9zm2.7 0v.9H24v-.9h-3.3zM0 14.7h4.05v.9H0zm5.4 0v.9H6.3v-.9h-.9zm3.6 0v.9h4.05v-.9H9zm8.1 0v.9h.9v-.9h-.9zm3.6 0v.9H24v-.9h-3.3zM0 16.5h4.05v.9H0zm5.4 0v.9H6.3v-.9h-.9zm3.6 0v.9h4.05v-.9H9zm8.1 0v.9h.9v-.9h-.9zm3.6 0v.9H24v-.9h-3.3z">'),sd=O('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#F80000><path d="M6.754 16.15h10.492c2.294 0 4.254-1.96 4.254-4.254S19.54 7.642 17.246 7.642H6.754C4.46 7.642 2.5 9.602 2.5 11.896s1.96 4.254 4.254 4.254zm0-6.204h10.492c1.078 0 1.95.872 1.95 1.95s-.872 1.95-1.95 1.95H6.754c-1.078 0-1.95-.872-1.95-1.95s.872-1.95 1.95-1.95z">'),id=O('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#0080FF><path d="M12.04 24v-4.8h-4.8V24H12zm-4.8-4.8v-3.6H3.6v3.6h3.64zm0-3.6v-3.6H3.6v3.6h3.64zm6-3.6v-3.6H9.6v3.6h3.64zm0 0a7.2 7.2 0 007.2-7.2H12.04v4.8h4.8v-4.8h-4.8v7.2z"></path><path d="M12 0C5.37 0 0 5.37 0 12h4.8A7.2 7.2 0 0112 4.8V0z">'),nd=O('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#FF6A00><path d="M21.692 18.5L12 13.5l-9.692 5L0 17l12-6.154L24 17l-2.308 1.5zm0-6L12 7.5l-9.692 5L0 11l12-6.154L24 11l-2.308 1.5z">'),ld=O('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#00A95C><path d="M12 2L2 7l10 5 10-5-10-5zm0 7.5L4.5 7 12 4.5l7.5 2.5L12 9.5zm0 3L4.5 10 12 7.5l7.5 2.5L12 12.5zm0 3L4.5 13 12 10.5l7.5 2.5L12 15.5zm0 3L4.5 16 12 13.5l7.5 2.5L12 18.5zm0 3L2 17v2l10 5 10-5v-2l-10 4.5z">'),od=O('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#007BFC><path d="M19.743 6H23.5l-7 12h-3.757L19.743 6zM.5 6h3.757l7 12H7.5L.5 6zm7.28 0h3.757l5.723 9.8h-3.757L7.78 6z">'),ad=O('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#123F6D><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-4h2v2h-2zm0-8h2v6h-2z">'),cd=O('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#D50C2D><path d="M4 4h16v16H4V4zm2 2v12h12V6H6zm2 2h3v8H8V8zm5 0h3v8h-3V8z">'),dd=O('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#326CE5><path d="M12 2L2 7l10 5 10-5-10-5zm0 12l-8-4v7l8 4 8-4v-7l-8 4z">'),hd=O('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#326CE5><path d="M12 2a10 10 0 100 20 10 10 0 000-20zm0 18a8 8 0 110-16 8 8 0 010 16zm-2-6l5-3-5-3v6z">'),ud=O('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#2496ED><path d="M13.983 11.078h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.185.185 0 00-.185.185v1.888c0 .102.083.185.185.185zm-2.954-5.43h2.118a.186.186 0 00.186-.186V3.574a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.186zm0 2.716h2.118a.187.187 0 00.186-.186V6.29a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.887c0 .102.082.185.185.186zm-2.93 0h2.12a.186.186 0 00.184-.186V6.29a.185.185 0 00-.185-.185H8.1a.185.185 0 00-.185.185v1.887c0 .102.083.185.185.186zm-2.964 0h2.119a.186.186 0 00.185-.186V6.29a.185.185 0 00-.185-.185H5.136a.186.186 0 00-.186.185v1.887c0 .102.084.185.186.186zm5.893 2.715h2.118a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185zm-2.93 0h2.12a.185.185 0 00.184-.185V9.006a.185.185 0 00-.184-.186h-2.12a.185.185 0 00-.184.185v1.888c0 .102.083.185.185.185zm-2.964 0h2.119a.185.185 0 00.185-.185V9.006a.185.185 0 00-.185-.186h-2.12a.186.186 0 00-.185.186v1.887c0 .102.084.185.186.185zm-2.92 0h2.12a.185.185 0 00.184-.185V9.006a.185.185 0 00-.184-.186h-2.12a.185.185 0 00-.184.185v1.888c0 .102.082.185.185.185zM23.763 9.89c-.065-.051-.672-.51-1.954-.51-.338.001-.676.03-1.01.087-.248-1.7-1.653-2.53-1.716-2.566l-.344-.199-.226.327c-.284.438-.49.922-.612 1.43-.23.97-.09 1.882.403 2.661-.595.332-1.55.413-1.744.42H.751a.751.751 0 00-.75.748 11.376 11.376 0 00.692 4.062c.545 1.428 1.355 2.48 2.41 3.124 1.18.723 3.1 1.137 5.275 1.137.983.003 1.963-.086 2.93-.266a12.248 12.248 0 003.823-1.389c.98-.567 1.86-1.288 2.61-2.136 1.252-1.418 1.998-2.997 2.553-4.4h.221c1.372 0 2.215-.549 2.68-1.009.309-.293.55-.65.707-1.046l.098-.288z">'),fd=O('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#FFC61C><path d="M12 2L2 7v10l10 5 10-5V7L12 2zm0 2.5L19 8l-7 3.5L5 8l7-3.5zM4 9.5l7 3.5v7l-7-3.5v-7zm16 0v7l-7 3.5v-7l7-3.5z">'),gd=O('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#0075A8><path d="M12 2L2 7v10l10 5 10-5V7L12 2zm0 3l6 3-6 3-6-3 6-3zm-7 5l6 3v5l-6-3v-5zm14 0v5l-6 3v-5l6-3z">'),pd=O('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#EE0000><path d="M21.665 11.812l-9.027-3.046a.67.67 0 00-.423 0l-9.027 3.046a.67.67 0 00-.445.631v5.545c0 .286.18.542.445.632l9.027 3.046a.67.67 0 00.423 0l9.027-3.046a.67.67 0 00.445-.632v-5.545a.67.67 0 00-.445-.631zm-9.242 7.726l-7.37-2.49v-3.62l7.37 2.488v3.622zm.408-4.97l-7.576-2.558 7.576-2.558 7.576 2.558-7.576 2.558zm8.03 2.48l-7.37 2.49v-3.622l7.37-2.488v3.62z">'),vd=O('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=currentColor><path d="M19.35 10.04A7.49 7.49 0 0012 4C9.11 4 6.6 5.64 5.35 8.04A5.994 5.994 0 000 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z">'),md=O('<svg class="w-4 h-4 ml-auto"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"clip-rule=evenodd>'),_d=O('<button class="w-full px-3 py-2 text-sm text-left flex items-center gap-2 transition-colors"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path></svg>All Namespaces'),bd=O('<div class="px-3 py-4 text-sm text-center"style=color:var(--text-muted)>No namespaces found'),yd=O('<div class="absolute top-full left-0 mt-1 w-64 rounded-lg shadow-xl z-[200] overflow-hidden"style="background:var(--bg-card);border:1px solid var(--border-color)"><div class="p-2 border-b"style=border-color:var(--border-color)><div class=relative><svg class="absolute left-2.5 top-1/2 -translate-y-1/2 w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg><input type=text placeholder="Search namespaces..."class="w-full rounded-md pl-8 pr-3 py-1.5 text-sm"autofocus style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div></div><div class="max-h-64 overflow-y-auto"></div><div class="px-3 py-2 text-xs border-t"style=border-color:var(--border-color);color:var(--text-muted)> namespaces available'),xd=O('<kbd class="absolute right-3 top-1/2 -translate-y-1/2 px-1.5 py-0.5 rounded text-xs font-mono"style="background:var(--bg-tertiary);color:var(--text-muted);border:1px solid var(--border-color)">âK'),qn=O("<span class=text-xs style=color:var(--text-muted)>"),wd=O('<div class="px-3 py-4 text-sm text-center"style=color:var(--text-muted)>No clusters found'),Sd=O('<div class="px-3 py-4 text-sm text-center"style=color:var(--text-muted)>No clusters available'),$d=O('<div class="absolute top-full right-0 mt-1 w-72 rounded-lg shadow-xl z-[200] overflow-hidden"style="background:var(--bg-card);border:1px solid var(--border-color)"><div class="p-2 border-b"style=border-color:var(--border-color)><div class=relative><svg class="absolute left-2.5 top-1/2 -translate-y-1/2 w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg><input type=text placeholder="Search clusters..."class="w-full rounded-md pl-8 pr-3 py-1.5 text-sm"autofocus style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div></div><div class="max-h-64 overflow-y-auto"></div><div class="px-3 py-2 text-xs border-t"style=border-color:var(--border-color);color:var(--text-muted)> cluster<!> available'),Cd=O('<header class="h-16 header-glass flex items-center justify-between px-6 relative"style=z-index:100><div class="flex items-center gap-4"><div class="flex items-center gap-2 relative"><label class=text-sm style=color:var(--text-secondary)>Namespace:</label><button class="flex items-center gap-2 rounded-lg px-3 py-1.5 text-sm min-w-[180px] justify-between"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><span class=truncate></span><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 9l-7 7-7-7"></path></svg></button></div><div class=relative><svg class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg><input id=global-search type=text placeholder="Search resources..."class="w-72 rounded-lg pl-10 pr-16 py-1.5 text-sm"></div></div><div class="flex items-center gap-4"><div class="flex items-center gap-2 relative"><label class=text-sm style=color:var(--text-secondary)>Cluster:</label><button class="flex items-center gap-2 rounded-lg px-3 py-1.5 text-sm min-w-[200px] justify-between"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><div class="flex items-center gap-2"><div class="flex flex-col items-start"><span class=truncate></span></div></div><div class="flex items-center gap-1"><span></span><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 9l-7 7-7-7"></path></svg></div></button></div><button class=icon-btn title="Open Local Terminal"style=display:flex;alignItems:center;justifyContent:center;minWidth:40px;minHeight:40px><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></button><button class=icon-btn title="Refresh all data"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button><button class="flex items-center gap-2 px-4 py-2 btn-accent rounded-lg"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg><span>AI</span></button><div class="flex items-center gap-2 px-3 py-1.5 rounded-lg"style="background:var(--bg-secondary);border:1px solid var(--border-color)"><span class="text-sm font-medium"style=color:var(--text-primary)>'),kd=O('<div class="px-3 py-2 text-sm"style=color:var(--text-muted)>Loading...'),Kn=O('<svg class="w-4 h-4 flex-shrink-0"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"clip-rule=evenodd>'),Ed=O('<button class="w-full px-3 py-2 text-sm text-left flex items-center gap-2 transition-colors"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg><span class="truncate flex-1">'),Ad=O("<span>"),Ld=O('<div class="px-3 py-2 text-sm"style=color:var(--text-muted)>Loading clusters...'),Md=O('<button class="w-full px-3 py-2 text-sm text-left flex items-center gap-2 transition-colors"><span></span><div class="flex-1 min-w-0"><span class="truncate block">');const Yn={gcp:()=>Qc(),aws:()=>ed(),azure:()=>td(),ibm:()=>rd(),oracle:()=>sd(),digitalocean:()=>id(),alibaba:()=>nd(),linode:()=>ld(),vultr:()=>od(),ovh:()=>ad(),hetzner:()=>cd(),kind:()=>dd(),minikube:()=>hd(),"docker-desktop":()=>ud(),k3s:()=>fd(),rancher:()=>gd(),openshift:()=>pd(),generic:()=>vd()},Dd=()=>{const[e,t]=J(!1),[r,n]=J(!1),[d,_]=J(""),[h,s]=J(!1),[i,u]=J(""),[f,g]=J(!1),[v,b]=J(!1);let S,y,l,a;const[o]=Ke(()=>De.getCloudInfo().catch(()=>null)),c=()=>{const I=o()?.provider?.toLowerCase()||"generic";return Yn[I]||Yn.generic},m=()=>{const I=o()?.provider?.toLowerCase();return{gcp:"GCP",aws:"AWS",azure:"Azure",ibm:"IBM",oracle:"Oracle",digitalocean:"DO",alibaba:"Alibaba",linode:"Linode",vultr:"Vultr",ovh:"OVH",hetzner:"Hetzner",kind:"Kind",minikube:"Minikube","docker-desktop":"Docker",k3s:"K3s",rancher:"Rancher",openshift:"OpenShift"}[I||""]||o()?.displayName||"Cloud"},w=Oe(()=>{const I=d().toLowerCase();return I?Zs().filter(R=>R.toLowerCase().includes(I)):Zs()}),k=Oe(()=>{const I=i().toLowerCase();return I?hs().filter(R=>R.name.toLowerCase().includes(I)):hs()});if(typeof window<"u"){document.addEventListener("keydown",R=>{(R.ctrlKey||R.metaKey)&&R.key==="k"&&(R.preventDefault(),document.getElementById("global-search")?.focus())});const I=R=>{r()&&S&&!S.contains(R.target)&&y&&!y.contains(R.target)&&(n(!1),_("")),h()&&l&&!l.contains(R.target)&&a&&!a.contains(R.target)&&(s(!1),u(""))};document.addEventListener("mousedown",I),tr(()=>document.removeEventListener("mousedown",I))}const A=I=>{un(I),n(!1),_("")},x=async I=>{if(I!==es()){g(!0);try{await Pc(I)}catch(R){console.error("Failed to switch context:",R)}finally{g(!1),s(!1),u("")}}},C=()=>tt()==="_all"?"All Namespaces":tt();return(()=>{var I=Cd(),R=I.firstChild,D=R.firstChild,j=D.firstChild,M=j.nextSibling,P=M.firstChild,L=P.nextSibling,F=D.nextSibling,$=F.firstChild,B=$.nextSibling,H=R.nextSibling,z=H.firstChild,X=z.firstChild,V=X.nextSibling,Y=V.firstChild,K=Y.firstChild,ce=K.firstChild,E=Y.nextSibling,N=E.firstChild,U=N.nextSibling,W=z.nextSibling,q=W.nextSibling,G=q.nextSibling,Q=G.nextSibling,oe=Q.firstChild;M.$$click=()=>n(!r());var ge=y;typeof ge=="function"?qt(ge,M):y=M,p(P,C),p(D,T(ee,{get when(){return r()},get children(){var Z=yd(),te=Z.firstChild,re=te.firstChild,me=re.firstChild,ye=me.nextSibling,we=te.nextSibling,ke=we.nextSibling,Se=ke.firstChild,$e=S;return typeof $e=="function"?qt($e,Z):S=Z,ye.$$input=he=>_(he.target.value),p(we,T(ee,{get when(){return!d()||"all namespaces".includes(d().toLowerCase())},get children(){var he=_d(),ue=he.firstChild;return ue.nextSibling,he.addEventListener("mouseleave",le=>le.currentTarget.style.background=tt()==="_all"?"var(--bg-tertiary)":"transparent"),he.addEventListener("mouseenter",le=>le.currentTarget.style.background="var(--bg-tertiary)"),he.$$click=()=>A("_all"),p(he,T(ee,{get when(){return tt()==="_all"},get children(){return md()}}),null),ne(le=>{var ie=tt()==="_all"?"var(--bg-tertiary)":"transparent",ae=tt()==="_all"?"var(--accent-primary)":"var(--text-primary)";return ie!==le.e&&ve(he,"background",le.e=ie),ae!==le.t&&ve(he,"color",le.t=ae),le},{e:void 0,t:void 0}),he}}),null),p(we,T(ee,{get when(){return!di.loading},get fallback(){return kd()},get children(){return T(Ve,{get each(){return w()},children:he=>(()=>{var ue=Ed(),le=ue.firstChild,ie=le.nextSibling;return ue.addEventListener("mouseleave",ae=>ae.currentTarget.style.background=tt()===he?"var(--bg-tertiary)":"transparent"),ue.addEventListener("mouseenter",ae=>ae.currentTarget.style.background="var(--bg-tertiary)"),ue.$$click=()=>A(he),p(ie,he),p(ue,T(ee,{get when(){return tt()===he},get children(){return Kn()}}),null),ne(ae=>{var _e=tt()===he?"var(--bg-tertiary)":"transparent",se=tt()===he?"var(--accent-primary)":"var(--text-primary)";return _e!==ae.e&&ve(ue,"background",ae.e=_e),se!==ae.t&&ve(ue,"color",ae.t=se),ae},{e:void 0,t:void 0}),ue})()})}}),null),p(we,T(ee,{get when(){return Fe(()=>!!d())()&&w().length===0},get children(){return bd()}}),null),p(ke,()=>Zs().length,Se),ne(()=>ye.value=d()),Z}}),null),B.addEventListener("blur",()=>t(!1)),B.addEventListener("focus",()=>t(!0)),B.$$input=Z=>rc(Z.target.value),p(F,T(ee,{get when(){return!e()},get children(){return xd()}}),null),V.$$click=()=>s(!h());var Ce=a;return typeof Ce=="function"?qt(Ce,V):a=V,p(Y,T(ee,{get when(){return Fe(()=>!!o())()&&!o.loading},get fallback(){return(()=>{var Z=Ad();return ne(()=>Ue(Z,`w-2 h-2 rounded-full ${Vn().connected?"bg-green-500":"bg-red-500"}`)),Z})()},get children(){return c()()}}),K),p(ce,(()=>{var Z=Fe(()=>!!f());return()=>Z()?"Switching...":es()||"Select cluster"})()),p(K,T(ee,{get when(){return Fe(()=>!!o())()&&!o.loading},get children(){var Z=qn();return p(Z,()=>o()?.region||""),Z}}),null),p(z,T(ee,{get when(){return h()},get children(){var Z=$d(),te=Z.firstChild,re=te.firstChild,me=re.firstChild,ye=me.nextSibling,we=te.nextSibling,ke=we.nextSibling,Se=ke.firstChild,$e=Se.nextSibling;$e.nextSibling;var he=l;return typeof he=="function"?qt(he,Z):l=Z,ye.$$input=ue=>u(ue.target.value),p(we,T(ee,{get when(){return!Qi.loading},get fallback(){return Ld()},get children(){return T(Ve,{get each(){return k()},children:ue=>(()=>{var le=Md(),ie=le.firstChild,ae=ie.nextSibling,_e=ae.firstChild;return le.addEventListener("mouseleave",se=>se.currentTarget.style.background=ue.isCurrent?"var(--bg-tertiary)":"transparent"),le.addEventListener("mouseenter",se=>se.currentTarget.style.background="var(--bg-tertiary)"),le.$$click=()=>x(ue.name),p(_e,()=>ue.name),p(ae,T(ee,{get when(){return ue.serverVersion},get children(){var se=qn();return p(se,()=>ue.serverVersion),se}}),null),p(le,T(ee,{get when(){return ue.isCurrent},get children(){return Kn()}}),null),ne(se=>{var fe=ue.isCurrent?"var(--bg-tertiary)":"transparent",de=ue.isCurrent?"var(--accent-primary)":"var(--text-primary)",pe=`w-2 h-2 rounded-full flex-shrink-0 ${ue.connected?"bg-green-500":"bg-red-500"}`;return fe!==se.e&&ve(le,"background",se.e=fe),de!==se.t&&ve(le,"color",se.t=de),pe!==se.a&&Ue(ie,se.a=pe),se},{e:void 0,t:void 0,a:void 0}),le})()})}}),null),p(we,T(ee,{get when(){return Fe(()=>!!i())()&&k().length===0},get children(){return wd()}}),null),p(we,T(ee,{get when(){return Fe(()=>!Qi.loading)()&&hs().length===0},get children(){return Sd()}}),null),p(ke,()=>hs().length,Se),p(ke,()=>hs().length!==1?"s":"",$e),ne(()=>ye.value=i()),Z}}),null),W.$$click=()=>b(!0),q.$$click=Z=>{const te=Z.currentTarget;te.classList.add("refreshing"),setTimeout(()=>te.classList.remove("refreshing"),500),vo()},p(H,T(Zc,{}),G),jr(G,"click",lc,!0),p(Q,()=>c()(),oe),p(oe,(()=>{var Z=Fe(()=>!!o.loading);return()=>Z()?"...":m()})()),p(I,T(co,{get isOpen(){return v()},onClose:()=>b(!1)}),null),ne(Z=>{var te=`w-4 h-4 transition-transform ${r()?"rotate-180":""}`,re=f(),me=f()?.7:1,ye=`w-2 h-2 rounded-full ${Vn().connected?"bg-green-500":"bg-red-500"}`,we=`w-4 h-4 transition-transform ${h()?"rotate-180":""}`,ke=`${o()?.displayName||"Cloud"} - ${o()?.region||""}`;return te!==Z.e&&et(L,"class",Z.e=te),re!==Z.t&&(V.disabled=Z.t=re),me!==Z.a&&ve(V,"opacity",Z.a=me),ye!==Z.o&&Ue(N,Z.o=ye),we!==Z.i&&et(U,"class",Z.i=we),ke!==Z.n&&et(Q,"title",Z.n=ke),Z},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),ne(()=>B.value=no()),I})()};lt(["click","input"]);var Rd=O('<svg class="w-6 h-6"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><rect x=4 y=4 width=16 height=16 rx=2></rect><rect x=9 y=9 width=6 height=6></rect><line x1=9 y1=1 x2=9 y2=4></line><line x1=15 y1=1 x2=15 y2=4></line><line x1=9 y1=20 x2=9 y2=23></line><line x1=15 y1=20 x2=15 y2=23></line><line x1=20 y1=9 x2=23 y2=9></line><line x1=20 y1=14 x2=23 y2=14></line><line x1=1 y1=9 x2=4 y2=9></line><line x1=1 y1=14 x2=4 y2=14>'),Td=O('<svg class="w-6 h-6"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><rect x=3 y=4 width=18 height=16 rx=2></rect><line x1=7 y1=8 x2=7 y2=16></line><line x1=11 y1=8 x2=11 y2=16></line><line x1=15 y1=8 x2=15 y2=16></line><line x1=3 y1=12 x2=21 y2=12>'),Pd=O('<svg class="w-6 h-6"viewBox="0 0 24 24"fill=currentColor><path d="M12 2L3 7v10l9 5 9-5V7l-9-5zm0 2.18l6.9 3.85L12 11.9 5.1 8.03 12 4.18zM5 9.48l6 3.35v6.7l-6-3.35v-6.7zm8 10.05v-6.7l6-3.35v6.7l-6 3.35z">'),Id=O('<svg class="w-6 h-6"viewBox="0 0 24 24"fill=currentColor><path d="M4 4h16v4H4V4zm0 6h16v4H4v-4zm0 6h16v4H4v-4z"></path><circle cx=6 cy=6 r=1></circle><circle cx=6 cy=12 r=1></circle><circle cx=6 cy=18 r=1>'),Bd=O('<svg class="w-5 h-5"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z">'),Od=O('<svg class="w-5 h-5"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1=12 y1=9 x2=12 y2=13></line><line x1=12 y1=17 x2=12.01 y2=17>'),Hd=O('<svg class="w-4 h-4"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><polyline points="20 6 9 17 4 12">'),Nd=O('<svg class="w-4 h-4"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><line x1=18 y1=6 x2=6 y2=18></line><line x1=6 y1=6 x2=18 y2=18>'),zd=O('<div class="text-sm mt-1"style=color:var(--text-muted)>'),Fd=O('<div class="card p-5 cursor-pointer transition-all hover:scale-[1.02] hover:shadow-lg"><div class="flex items-start justify-between"><div><div class="text-sm font-medium"style=color:var(--text-muted)></div><div class="text-3xl font-bold mt-2"></div></div><div class="w-12 h-12 rounded-xl flex items-center justify-center">'),jd=O('<div class="space-y-2 max-h-64 overflow-auto">'),Ud=O('<div class=space-y-6><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Dashboard</h1><p style=color:var(--text-secondary)>Cluster overview and health monitoring</p></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"></div><div class="card p-6"><h2 class="text-lg font-semibold mb-4"style=color:var(--text-primary)>Resource Overview</h2><div class="grid grid-cols-2 md:grid-cols-5 gap-4"><div class="p-4 rounded-lg text-center cursor-pointer hover:opacity-80 transition-opacity"style=background:var(--bg-tertiary)><div class="text-3xl font-bold"style=color:#06b6d4></div><div class="text-sm mt-1"style=color:var(--text-secondary)>Pods</div></div><div class="p-4 rounded-lg text-center cursor-pointer hover:opacity-80 transition-opacity"style=background:var(--bg-tertiary)><div class="text-3xl font-bold"style=color:#3b82f6></div><div class="text-sm mt-1"style=color:var(--text-secondary)>Deployments</div></div><div class="p-4 rounded-lg text-center cursor-pointer hover:opacity-80 transition-opacity"style=background:var(--bg-tertiary)><div class="text-3xl font-bold"style=color:#8b5cf6></div><div class="text-sm mt-1"style=color:var(--text-secondary)>Services</div></div><div class="p-4 rounded-lg text-center cursor-pointer hover:opacity-80 transition-opacity"style=background:var(--bg-tertiary)><div class="text-3xl font-bold"style=color:#22c55e></div><div class="text-sm mt-1"style=color:var(--text-secondary)>Nodes</div></div><div class="p-4 rounded-lg text-center cursor-pointer hover:opacity-80 transition-opacity"style=background:var(--bg-tertiary)><div class="text-3xl font-bold"style=color:#f59e0b>$</div><div class="text-sm mt-1"style=color:var(--text-secondary)>Est. Monthly Cost</div></div></div></div><div class="grid grid-cols-1 lg:grid-cols-2 gap-6"><div class="card p-6"><h2 class="text-lg font-semibold mb-4 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><path d="M12 2a10 10 0 1 0 10 10H12V2z"></path><path d="M12 2a10 10 0 0 1 10 10"></path><circle cx=12 cy=12 r=3></circle></svg>AI Insights & Recommendations</h2><div class=space-y-3></div></div><div class="card p-6"><h2 class="text-lg font-semibold mb-4 flex items-center gap-2 cursor-pointer hover:opacity-80"style=color:var(--text-primary)>Security Overview<svg class="w-4 h-4 ml-auto"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><path d="M9 18l6-6-6-6"></path></svg></h2><div class=space-y-4><div class="flex items-center justify-between p-4 rounded-lg"style=background:var(--bg-tertiary)><span style=color:var(--text-secondary)>Security Score</span><span class="text-2xl font-bold">/100</span></div><div class=space-y-2></div></div></div></div><div class="card p-6"><h2 class="text-lg font-semibold mb-4"style=color:var(--text-primary)>Recent Events'),Vd=O('<ul class="mt-2 text-xs space-y-1"style=color:var(--text-muted)>'),Wd=O('<button class="mt-3 px-3 py-1.5 text-xs font-medium rounded-md transition-all hover:opacity-80"> â'),qd=O('<div class="p-4 rounded-lg border"><div class="flex items-start gap-3"><div></div><div class=flex-1><div class=font-medium></div><div class="text-sm mt-1"style=color:var(--text-secondary)>'),Kd=O('<li class="flex items-center gap-2"><span class="w-1 h-1 rounded-full">'),Yd=O('<span class="text-xs px-1.5 py-0.5 rounded"style=background:var(--bg-tertiary);color:var(--text-muted)>'),Gd=O('<div class="flex items-center justify-between p-3 rounded-lg"style=background:var(--bg-secondary)><div class="flex items-center gap-2"><span></span><span style=color:var(--text-primary)></span></div><span>'),Xd=O('<div class="text-center py-8"style=color:var(--text-muted)>No recent events'),Jd=O('<div class="flex items-start gap-3 p-3 rounded-lg"style=background:var(--bg-secondary)><span></span><div class="flex-1 min-w-0"><div class="text-sm font-medium truncate"style=color:var(--text-primary)>: </div><div class="text-xs truncate"style=color:var(--text-muted)>');const Zd=()=>Rd(),Qd=()=>Td(),eh=()=>Pd(),th=()=>Id(),Gn=()=>Bd(),Fs=()=>Od(),Fi=()=>Hd(),Xn=()=>Nd(),js=e=>(()=>{var t=Fd(),r=t.firstChild,n=r.firstChild,d=n.firstChild,_=d.nextSibling,h=n.nextSibling;return jr(t,"click",e.onClick,!0),p(d,()=>e.label),p(_,()=>e.value),p(n,T(ee,{get when(){return e.subtext},get children(){var s=zd();return p(s,()=>e.subtext),s}}),null),p(h,()=>e.icon({})),ne(s=>{var i=`4px solid ${e.color}`,u=e.color,f=`${e.color}20`,g=e.color;return i!==s.e&&ve(t,"border-left",s.e=i),u!==s.t&&ve(_,"color",s.t=u),f!==s.a&&ve(h,"background",s.a=f),g!==s.o&&ve(h,"color",s.o=g),s},{e:void 0,t:void 0,a:void 0,o:void 0}),t})(),Jn=()=>{const[e]=Ke(De.getMetrics),[t]=Ke(()=>De.getPods("_all")),[r]=Ke(()=>De.getDeployments("_all")),[n]=Ke(()=>De.getServices("_all")),[d]=Ke(De.getNodes),[_]=Ke(De.getEvents),[h]=Ke(De.getClusterCost),s=()=>(t()||[]).filter(l=>l.status==="Running").length,i=()=>(t()||[]).length,u=()=>(d()||[]).filter(l=>l.status==="Ready").length,f=()=>(d()||[]).length,g=()=>(_()||[]).slice(0,10),v=Oe(()=>{const l=t()||[],a=[],o=l.filter(A=>!A.securityContext);o.length>0?a.push({name:"Security Context Missing",status:"fail",severity:"critical",count:o.length,details:`${o.length} pods have no security context defined`}):l.length>0&&a.push({name:"Security Context",status:"pass",severity:"critical",details:"All pods have security context configured"});const c=l.filter(A=>A.securityContext?.runAsRoot===!0||!A.securityContext?.runAsNonRoot&&!A.securityContext?.runAsUser);c.length>0?a.push({name:"Running as Root",status:"fail",severity:"critical",count:c.length,details:`${c.length} pods may run as root user`}):l.length>0&&a.push({name:"Non-Root User",status:"pass",severity:"critical",details:"All pods run as non-root"});const m=l.filter(A=>A.privileged===!0);m.length>0?a.push({name:"Privileged Containers",status:"fail",severity:"critical",count:m.length,details:`${m.length} containers running in privileged mode`}):l.length>0&&a.push({name:"No Privileged Containers",status:"pass",severity:"critical",details:"No privileged containers detected"});const w=l.filter(A=>!A.resources?.limits);w.length>0?a.push({name:"Resource Limits Missing",status:"warning",severity:"high",count:w.length,details:`${w.length} pods without resource limits`}):l.length>0&&a.push({name:"Resource Limits",status:"pass",severity:"high",details:"All pods have resource limits configured"});const k=l.filter(A=>A.securityContext?.readOnlyRootFilesystem!==!0);return k.length>0&&l.length>0&&a.push({name:"Writable Root Filesystem",status:"warning",severity:"medium",count:k.length,details:`${k.length} pods have writable root filesystem`}),l.length===0&&a.push({name:"No Pods to Analyze",status:"warning",severity:"low",details:"No pods found for security analysis"}),a}),b=Oe(()=>{const l=v();if(l.length===0)return 100;const a={critical:25,high:15,medium:10,low:5};let o=0,c=0;return l.forEach(m=>{const w=a[m.severity];o+=w,m.status==="pass"?c+=w:m.status==="warning"&&(c+=w*.5)}),o>0?Math.round(c/o*100):100}),S=()=>{const l=[],a=t()||[],o=d()||[],c=e(),m=a.filter(R=>R.status==="Pending");m.length>0&&l.push({type:"warning",title:"Pending Pods Detected",message:`${m.length} pods are in Pending state.`,details:m.slice(0,3).map(R=>`${R.namespace}/${R.name}`),navigateTo:"pods",actionLabel:"View Pods"});const w=a.filter(R=>R.status==="Failed"||R.status==="Error"||R.status==="CrashLoopBackOff");w.length>0&&l.push({type:"error",title:"Failed Pods Alert",message:`${w.length} pods are failing. Immediate attention recommended.`,details:w.slice(0,3).map(R=>`${R.namespace}/${R.name} (${R.status})`),navigateTo:"pods",actionLabel:"View Failed Pods"});const k=o.filter(R=>R.status!=="Ready");k.length>0&&l.push({type:"error",title:"Node Health Issue",message:`${k.length} nodes are not ready.`,details:k.slice(0,3).map(R=>R.name),navigateTo:"nodes",actionLabel:"View Nodes"});const A=c?.cpu!=null?typeof c.cpu=="object"?c.cpu.percentage:Number(c.cpu):null,x=c?.memory!=null?typeof c.memory=="object"?c.memory.percentage:Number(c.memory):null;A&&A>80&&l.push({type:"warning",title:"High CPU Usage",message:`Cluster CPU at ${A.toFixed(1)}%. Consider scaling or optimizing workloads.`}),x&&x>85&&l.push({type:"warning",title:"High Memory Usage",message:`Cluster memory at ${x.toFixed(1)}%. Consider adding capacity.`});const C=v().filter(R=>R.status==="fail"&&R.severity==="critical");C.length>0&&l.push({type:"error",title:"Critical Security Issues",message:`${C.length} critical security findings require immediate attention.`,details:C.map(R=>`${R.name}${R.count?` (${R.count} affected)`:""}`),navigateTo:"security",actionLabel:"View Security Details"});const I=v().filter(R=>R.status==="fail"&&R.severity==="high");return I.length>0&&C.length===0&&l.push({type:"warning",title:"Security Warnings",message:`${I.length} high-severity security findings detected.`,details:I.map(R=>R.name),navigateTo:"security",actionLabel:"View Security Details"}),l.length===0&&l.push({type:"success",title:"Cluster Healthy",message:"All systems operating normally. No issues detected."}),l},y=l=>l>=80?"var(--success-color)":l>=60?"var(--warning-color)":"var(--error-color)";return(()=>{var l=Ud(),a=l.firstChild,o=a.firstChild;o.nextSibling;var c=a.nextSibling,m=c.nextSibling,w=m.firstChild,k=w.nextSibling,A=k.firstChild,x=A.firstChild;x.nextSibling;var C=A.nextSibling,I=C.firstChild;I.nextSibling;var R=C.nextSibling,D=R.firstChild;D.nextSibling;var j=R.nextSibling,M=j.firstChild;M.nextSibling;var P=j.nextSibling,L=P.firstChild;L.firstChild,L.nextSibling;var F=m.nextSibling,$=F.firstChild,B=$.firstChild,H=B.nextSibling,z=$.nextSibling,X=z.firstChild,V=X.firstChild,Y=X.nextSibling,K=Y.firstChild,ce=K.firstChild,E=ce.nextSibling,N=E.firstChild,U=K.nextSibling,W=F.nextSibling;return W.firstChild,p(c,T(js,{label:"CPU Usage",get value(){return Fe(()=>e()?.cpu!=null)()?`${typeof e().cpu=="object"?e().cpu.percentage?.toFixed(1):Number(e().cpu).toFixed(1)}%`:"--"},subtext:"Cluster average",color:"#06b6d4",icon:Zd}),null),p(c,T(js,{label:"Memory Usage",get value(){return Fe(()=>e()?.memory!=null)()?`${typeof e().memory=="object"?e().memory.percentage?.toFixed(1):Number(e().memory).toFixed(1)}%`:"--"},subtext:"Cluster average",color:"#8b5cf6",icon:Qd}),null),p(c,T(js,{label:"Running Pods",get value(){return`${s()}/${i()}`},get subtext(){return`${i()>0?(s()/i()*100).toFixed(0):0}% healthy`},color:"#22c55e",icon:eh,onClick:()=>Vt("pods")}),null),p(c,T(js,{label:"Nodes",get value(){return`${u()}/${f()}`},get subtext(){return u()===f()?"All healthy":"Some unhealthy"},get color(){return u()===f()?"#22c55e":"#f59e0b"},icon:th,onClick:()=>Vt("nodes")}),null),A.$$click=()=>Vt("pods"),p(x,i),C.$$click=()=>Vt("deployments"),p(I,()=>(r()||[]).length),R.$$click=()=>Vt("services"),p(D,()=>(n()||[]).length),j.$$click=()=>Vt("nodes"),p(M,f),P.$$click=()=>Vt("cost"),p(L,()=>h()?.monthlyCost?.toFixed(0)||"--",null),p(H,T(Ve,{get each(){return S()},children:q=>(()=>{var G=qd(),Q=G.firstChild,oe=Q.firstChild,ge=oe.nextSibling,Ce=ge.firstChild,Z=Ce.nextSibling;return p(oe,(()=>{var te=Fe(()=>q.type==="error");return()=>te()?T(Fs,{}):Fe(()=>q.type==="warning")()?T(Fs,{}):Fe(()=>q.type==="success")()?T(Fi,{}):T(Gn,{})})()),p(Ce,()=>q.title),p(Z,()=>q.message),p(ge,T(ee,{get when(){return Fe(()=>!!q.details)()&&q.details.length>0},get children(){var te=Vd();return p(te,T(Ve,{get each(){return q.details},children:re=>(()=>{var me=Kd(),ye=me.firstChild;return p(me,re,null),ne(we=>ve(ye,"background",q.type==="error"?"var(--error-color)":q.type==="warning"?"var(--warning-color)":"var(--accent-primary)")),me})()})),te}}),null),p(ge,T(ee,{get when(){return Fe(()=>!!q.navigateTo)()&&q.actionLabel},get children(){var te=Wd(),re=te.firstChild;return te.$$click=()=>Vt(q.navigateTo),p(te,()=>q.actionLabel,re),ne(me=>{var ye=q.type==="error"?"rgba(239, 68, 68, 0.2)":q.type==="warning"?"rgba(245, 158, 11, 0.2)":"rgba(6, 182, 212, 0.2)",we=q.type==="error"?"var(--error-color)":q.type==="warning"?"var(--warning-color)":"var(--accent-primary)",ke=`1px solid ${q.type==="error"?"rgba(239, 68, 68, 0.3)":q.type==="warning"?"rgba(245, 158, 11, 0.3)":"rgba(6, 182, 212, 0.3)"}`;return ye!==me.e&&ve(te,"background",me.e=ye),we!==me.t&&ve(te,"color",me.t=we),ke!==me.a&&ve(te,"border",me.a=ke),me},{e:void 0,t:void 0,a:void 0}),te}}),null),ne(te=>{var re=q.type==="error"?"rgba(239, 68, 68, 0.1)":q.type==="warning"?"rgba(245, 158, 11, 0.1)":q.type==="success"?"rgba(34, 197, 94, 0.1)":"rgba(6, 182, 212, 0.1)",me=q.type==="error"?"rgba(239, 68, 68, 0.3)":q.type==="warning"?"rgba(245, 158, 11, 0.3)":q.type==="success"?"rgba(34, 197, 94, 0.3)":"rgba(6, 182, 212, 0.3)",ye=q.type==="error"?"var(--error-color)":q.type==="warning"?"var(--warning-color)":q.type==="success"?"var(--success-color)":"var(--accent-primary)",we=q.type==="error"?"var(--error-color)":q.type==="warning"?"var(--warning-color)":q.type==="success"?"var(--success-color)":"var(--accent-primary)";return re!==te.e&&ve(G,"background",te.e=re),me!==te.t&&ve(G,"border-color",te.t=me),ye!==te.a&&ve(oe,"color",te.a=ye),we!==te.o&&ve(Ce,"color",te.o=we),te},{e:void 0,t:void 0,a:void 0,o:void 0}),G})()})),X.$$click=()=>Vt("security"),p(X,T(Gn,{}),V),p(E,b,N),p(U,T(Ve,{get each(){return v()},children:q=>(()=>{var G=Gd(),Q=G.firstChild,oe=Q.firstChild,ge=oe.nextSibling,Ce=Q.nextSibling;return p(oe,()=>q.severity.toUpperCase()),p(ge,()=>q.name),p(Q,T(ee,{get when(){return q.count},get children(){var Z=Yd();return p(Z,()=>q.count),Z}}),null),p(Ce,(()=>{var Z=Fe(()=>q.status==="pass");return()=>Z()?T(Fi,{}):Fe(()=>q.status==="fail")()?T(Xn,{}):T(Fs,{})})(),null),p(Ce,(()=>{var Z=Fe(()=>q.status==="pass");return()=>Z()?"Pass":q.status==="fail"?"Fail":"Warning"})(),null),ne(Z=>{var te=`px-1.5 py-0.5 rounded text-xs font-medium ${q.severity==="critical"?"bg-red-500/20 text-red-400":q.severity==="high"?"bg-orange-500/20 text-orange-400":q.severity==="medium"?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"}`,re=`flex items-center gap-1 text-sm ${q.status==="pass"?"text-green-400":q.status==="fail"?"text-red-400":"text-yellow-400"}`;return te!==Z.e&&Ue(oe,Z.e=te),re!==Z.t&&Ue(Ce,Z.t=re),Z},{e:void 0,t:void 0}),G})()})),p(W,T(ee,{get when(){return g().length>0},get fallback(){return Xd()},get children(){var q=jd();return p(q,T(Ve,{get each(){return g()},children:G=>(()=>{var Q=Jd(),oe=Q.firstChild,ge=oe.nextSibling,Ce=ge.firstChild,Z=Ce.firstChild,te=Ce.nextSibling;return p(oe,(()=>{var re=Fe(()=>G.type==="Warning");return()=>re()?T(Fs,{}):Fe(()=>G.type==="Normal")()?T(Fi,{}):T(Xn,{})})()),p(Ce,()=>G.reason,Z),p(Ce,()=>G.object,null),p(te,()=>G.message),ne(()=>Ue(oe,`mt-0.5 ${G.type==="Warning"?"text-yellow-400":G.type==="Normal"?"text-green-400":"text-red-400"}`)),Q})()})),q}}),null),ne(q=>ve(E,"color",y(b()))),l})()};lt(["click"]);var rh=O('<svg class="w-4 h-4 text-green-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 13l4 4L19 7">'),sh=O("<span class=text-green-400>Copied!"),ih=O('<div class=relative><div class="flex items-center justify-end gap-2 mb-2"><button class="flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm transition-colors"style=background:var(--bg-tertiary);color:var(--text-secondary)></button><button class="flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm transition-colors"style=background:var(--bg-tertiary);color:var(--text-secondary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>Download</button></div><div class="code-block overflow-auto max-h-[60vh]"><pre class="text-sm leading-relaxed">'),nh=O('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z">');const rr=e=>{const[t,r]=J(!1),n=async()=>{await navigator.clipboard.writeText(e.yaml),r(!0),e.onCopy?.(),setTimeout(()=>r(!1),2e3)},d=()=>{const s=new Blob([e.yaml],{type:"text/yaml"}),i=URL.createObjectURL(s),u=document.createElement("a");u.href=i,u.download=`${e.title||"resource"}.yaml`,u.click(),URL.revokeObjectURL(i)},_=s=>s.split(`
`).map(i=>{if(i.trim().startsWith("#"))return`<span class="text-gray-500">${h(i)}</span>`;const u=i.match(/^(\s*)([a-zA-Z0-9_-]+)(:)/);if(u){const[,f,g,v]=u,b=i.slice(u[0].length);return`${f}<span class="text-cyan-400">${h(g)}</span>${v}<span class="text-amber-300">${h(b)}</span>`}return i.trim().startsWith("-")?`<span class="text-purple-400">${h(i)}</span>`:h(i)}).join(`
`),h=s=>s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");return(()=>{var s=ih(),i=s.firstChild,u=i.firstChild,f=u.nextSibling,g=i.nextSibling,v=g.firstChild;return u.$$click=n,p(u,T(ee,{get when(){return t()},get fallback(){return[nh(),"Copy"]},get children(){return[rh(),sh()]}})),f.$$click=d,ne(()=>v.innerHTML=_(e.yaml)),s})()};lt(["click"]);var lh=O("<div class=text-red-400>Error: "),oh=O("<pre class=whitespace-pre-wrap>"),ah=O('<div class="flex flex-col h-[60vh]"><div class="flex items-center justify-end gap-2 mb-2"><button class="flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm transition-colors"style=background:var(--bg-tertiary);color:var(--text-secondary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="flex-1 font-mono text-sm p-4 rounded-lg overflow-auto"style="background:#0d1117;color:#c9d1d9;border:1px solid var(--border-color)">'),ch=O('<div class="flex items-center justify-center h-full"><div class=spinner>');const Jt=e=>{const[t]=Ke(()=>({type:e.resourceType,name:e.name,ns:e.namespace,open:e.isOpen}),async _=>{if(!_.open||!_.name)return"";const h=_.ns?`&namespace=${_.ns}`:"",s=await fetch(`/api/${_.type}/describe?name=${_.name}${h}`);if(!s.ok)throw new Error("Failed to fetch describe output");return(await s.json()).describe||""}),r=async()=>{await navigator.clipboard.writeText(t()||"")},n=_=>_.split(`
`).map(h=>{const s=h.match(/^([A-Za-z][A-Za-z\s]+):\s*(.*)$/);if(s&&h.indexOf(":")<30){const[,u,f]=s;return`<span class="text-cyan-400">${d(u)}:</span> <span class="text-amber-300">${d(f)}</span>`}const i=h.match(/^(\s+)([A-Za-z][A-Za-z\s-]+):\s*(.*)$/);if(i){const[,u,f,g]=i;return`${u}<span class="text-blue-400">${d(f)}:</span> ${d(g)}`}return d(h)}).join(`
`),d=_=>_.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");return T(st,{get isOpen(){return e.isOpen},get onClose(){return e.onClose},get title(){return`Describe: ${e.name}`},size:"xl",get children(){var _=ah(),h=_.firstChild,s=h.firstChild,i=h.nextSibling;return s.$$click=r,p(i,T(ee,{get when(){return!t.loading},get fallback(){return ch()},get children(){return[T(ee,{get when(){return t.error},get children(){var u=lh();return u.firstChild,p(u,()=>t.error?.message,null),u}}),(()=>{var u=oh();return ne(()=>u.innerHTML=n(t()||"")),u})()]}})),_}})};lt(["click"]);var dh=O('<div class="fixed z-50 py-2 rounded-lg shadow-xl min-w-[180px]"style="background:var(--bg-card);border:1px solid var(--border-color);box-shadow:0 10px 40px rgba(0, 0, 0, 0.3)">'),hh=O('<div class=relative><button class="flex items-center justify-center p-1 rounded transition-all hover:bg-opacity-80"title=Actions style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z">'),uh=O('<div class="my-1 border-t"style=border-color:var(--border-color)>'),fh=O("<div class=spinner style=width:16px;height:16px>"),gh=O('<button class="w-full flex items-center gap-3 px-4 py-2 text-sm transition-colors"style=background:transparent>'),ph=O('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2>');const Zn={shell:"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z",portforward:"M13 10V3L4 14h7v7l9-11h-7z",logs:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",yaml:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4",describe:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",restart:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15",delete:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",scale:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4",details:"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z",edit:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"},sr=e=>{const[t,r]=J(!1),[n,d]=J({top:0,left:0});let _;const h=u=>{if(u.stopPropagation(),_){const f=_.getBoundingClientRect();d({top:f.bottom+4,left:f.right-180})}r(!t())},s=u=>{r(!1),u.onClick()},i=u=>{t()&&_&&!_.contains(u.target)&&r(!1)};return typeof window<"u"&&(document.addEventListener("click",i),tr(()=>document.removeEventListener("click",i))),(()=>{var u=hh(),f=u.firstChild;f.$$click=h;var g=_;return typeof g=="function"?qt(g,f):_=f,p(u,T(ee,{get when(){return t()},get children(){return T(wi,{get children(){var v=dh();return p(v,T(Ve,{get each(){return e.actions},children:b=>[T(ee,{get when(){return b.divider},get children(){return uh()}}),(()=>{var S=gh();return S.addEventListener("mouseleave",y=>{y.currentTarget.style.background="transparent"}),S.addEventListener("mouseenter",y=>{!b.disabled&&!b.loading&&(y.currentTarget.style.background=b.variant==="danger"?"rgba(239, 68, 68, 0.1)":"var(--bg-tertiary)")}),S.$$click=()=>!b.disabled&&!b.loading&&s(b),p(S,T(ee,{get when(){return b.loading},get fallback(){return(()=>{var y=ph(),l=y.firstChild;return ne(()=>et(l,"d",Zn[b.icon]||Zn.details)),y})()},get children(){return fh()}}),null),p(S,(()=>{var y=Fe(()=>!!b.loading);return()=>y()?`${b.label}...`:b.label})(),null),ne(y=>{var l=b.disabled||b.loading,a={"opacity-50 cursor-not-allowed":b.disabled||b.loading,"hover:bg-opacity-50":!b.disabled&&!b.loading},o=b.variant==="danger"?"var(--error-color)":"var(--text-primary)";return l!==y.e&&(S.disabled=y.e=l),y.t=to(S,a,y.t),o!==y.a&&ve(S,"color",y.a=o),y},{e:void 0,t:void 0,a:void 0}),S})()]})),ne(b=>{var S=`${n().top}px`,y=`${n().left}px`;return S!==b.e&&ve(v,"top",b.e=S),y!==b.t&&ve(v,"left",b.t=y),b},{e:void 0,t:void 0}),v}})}}),null),u})()};lt(["click"]);var vh=O('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>â²</span><span>â¼'),mh=O('<div class="card p-4"><h3 class="font-semibold mb-3 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>Active Port Forwards</h3><div class="flex flex-wrap gap-2">'),_h=O('<div class=overflow-x-auto><table style=table-layout:auto><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Status </div></th><th class=whitespace-nowrap>Ready</th><th class=whitespace-nowrap>IP</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">CPU </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Mem </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Restarts </div></th><th class=whitespace-nowrap>Node</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),bh=O('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:#161b22><div style=color:#8b949e>Showing <!> - <!> of <!> pods</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>â Prev</button><span class="px-3 py-1"style=color:#c9d1d9>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Next â</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Last'),yh=O('<div class="text-red-400 mb-2">Error: '),xh=O("<pre class=whitespace-pre-wrap>"),wh=O('<div class="flex flex-col h-[60vh]"><div class="flex flex-wrap items-center gap-3 mb-3"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=50>Last 50 lines</option><option value=100>Last 100 lines</option><option value=500>Last 500 lines</option><option value=1000>Last 1000 lines</option></select><label class="flex items-center gap-2 px-3 py-2 rounded-lg cursor-pointer"><input type=checkbox class=hidden><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg><span class="text-sm font-medium"></span></label><input type=text placeholder="Search logs..."class="px-3 py-2 rounded-lg text-sm flex-1 min-w-[150px]"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><button class="p-2 rounded-lg hover:bg-[var(--bg-secondary)]"title="Refresh Logs"style=background:var(--bg-tertiary);color:var(--text-secondary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button><button class="px-3 py-2 rounded-lg text-sm flex items-center gap-1"style=background:var(--bg-tertiary);color:var(--text-secondary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>Download</button></div><div class="flex-1 font-mono text-xs p-4 rounded-lg overflow-auto"style="background:#0d1117;color:#c9d1d9;border:1px solid var(--border-color)">'),Sh=O('<div class=space-y-4><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Local Port</label><input type=number min=1024 max=65535 class="w-full px-4 py-2 rounded-lg"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Remote Port</label><input type=number min=1 max=65535 class="w-full px-4 py-2 rounded-lg"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div class="p-3 rounded-lg text-sm"style=background:var(--bg-tertiary);color:var(--text-muted)>This will forward <code class="px-1 rounded"style=background:var(--bg-secondary)>localhost:</code> to <code class="px-1 rounded"style=background:var(--bg-secondary)>:</code></div><div class="flex gap-2"><button class="btn-secondary flex-1">Cancel</button><button class="btn-primary flex-1">Start'),$h=O('<div class=space-y-4><div class="flex items-start gap-3"><div class="flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center"style="background:rgba(239, 68, 68, 0.15)"><svg class="w-6 h-6"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--error-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div><div class=flex-1><p class="text-sm mb-2"style=color:var(--text-primary)>Are you sure you want to delete this pod?</p><div class="p-3 rounded-lg mb-4"style=background:var(--bg-tertiary)><div class="text-sm font-medium mb-1"style=color:var(--text-primary)></div><div class=text-xs style=color:var(--text-muted)>Namespace: </div></div><p class="text-xs mb-4"style=color:var(--text-muted)>This action cannot be undone. The pod will be permanently deleted from the cluster.</p></div></div><div class="flex items-center justify-end gap-3 pt-4 border-t"style=border-color:var(--border-color)><button class="px-4 py-2 rounded-lg text-sm font-medium transition-all hover:opacity-80"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)">Cancel</button><button class="px-4 py-2 rounded-lg text-sm font-medium transition-all hover:opacity-80 flex items-center gap-2"style=background:var(--error-color);color:white><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>Delete Pod'),Ch=O('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Pods</h1><p style=color:var(--text-secondary)>Manage and monitor your Kubernetes pods</p></div><div class="flex items-center gap-3"><button class=icon-btn><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></button><button class=icon-btn title="Refresh Pods (Auto-refresh: 2s)"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Running</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--warning-color)"><span class=text-sm style=color:var(--text-secondary)>Pending</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--error-color)"><span class=text-sm style=color:var(--text-secondary)>Failed</span><span class="text-xl font-bold"style=color:var(--error-color)></span></div><div class=flex-1></div><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=all>All Status</option><option value=running>Running</option><option value=pending>Pending</option><option value=failed>Failed/Error</option><option value=succeeded>Succeeded</option></select><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class="overflow-hidden rounded-lg">'),kh=O('<div class="flex items-center gap-2 px-3 py-2 rounded-lg"style=background:var(--bg-tertiary)><span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span><span style=color:var(--text-primary)></span><span style=color:var(--text-muted)>localhost:<!> â </span><a target=_blank class="text-xs px-2 py-1 rounded"style=background:var(--accent-primary);color:white>Open</a><button class="text-red-400 hover:text-red-300"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12">'),Eh=O('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading pods...'),Ah=O('<tr><td colspan=10 class="text-center py-8"style=color:var(--text-muted)>No pods found'),Lh=O('<tr style="cursor:pointer;outlineOffset:-2px;transition:background-color 0.2s ease"><td><span class="font-medium text-xs"></span></td><td></td><td></td><td class=font-mono></td><td><span class="flex items-center"style=font-weight:600></span></td><td><span class="flex items-center"style=font-weight:600></span></td><td></td><td></td><td></td><td>'),Mh=O("<span style=font-weight:bold> "),Dh=O("<span>"),Qn=O("<span style=color:#ef4444;font-size:0.6rem>â²"),el=O("<span style=color:#22c55e;font-size:0.6rem>â¼"),Rh=O('<div class="spinner mx-auto">'),Th=O('<span class="w-2 h-2 rounded-full bg-green-400 animate-pulse">'),Ph=O('<div class="flex items-center justify-center h-full"><div class=spinner>'),Ih=O("<div class=space-y-3>"),Bh=O('<div class=space-y-6><div><h3 class="text-sm font-semibold mb-3"style=color:var(--text-secondary)>Basic Information</h3><div class="grid grid-cols-2 md:grid-cols-4 gap-3"><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>Status</div><div><span></span></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>Ready</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>CPU</div><div style=color:#ec4899;font-weight:600></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>Memory</div><div style=color:#f59e0b;font-weight:600></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>Restarts</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>Age</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>IP</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>Namespace</div><div style=color:var(--text-primary)></div></div></div><div class="mt-3 p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>Node</div><div class="text-sm break-all"style=color:var(--text-primary)></div></div></div><div><h3 class="text-sm font-semibold mb-3"style=color:var(--text-secondary)>Containers</h3></div><div class="grid grid-cols-2 sm:grid-cols-3 gap-3 pt-4"><button class="btn-primary flex items-center justify-center gap-2 px-4 py-3 rounded-lg"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>Shell</button><button class="btn-primary flex items-center justify-center gap-2 px-4 py-3 rounded-lg"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>Port Forward</button><button class="btn-secondary flex items-center justify-center gap-2 px-4 py-3 rounded-lg"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>Logs</button><button class="btn-secondary flex items-center justify-center gap-2 px-4 py-3 rounded-lg"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg>YAML</button><button class="btn-secondary flex items-center justify-center gap-2 px-4 py-3 rounded-lg"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>Describe'),Oh=O('<div class="p-4 text-center"><div class="spinner mx-auto">'),Hh=O('<div class="p-4 rounded-lg border"style=background:var(--bg-secondary);border-color:var(--border-color)><div class="flex items-center justify-between mb-3"><div class="flex items-center gap-2"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg><span class=font-medium style=color:var(--text-primary)></span></div><span></span></div><div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm"><div><div class="text-xs mb-1"style=color:var(--text-muted)>Image</div><div class="p-2 rounded text-xs font-mono break-all"style=background:var(--bg-tertiary);color:var(--accent-primary)></div></div><div><div class="text-xs mb-1"style=color:var(--text-muted)>Container ID</div><div class="p-2 rounded text-xs font-mono truncate"style=background:var(--bg-tertiary);color:var(--text-secondary)>...</div></div><div><div class="text-xs mb-1"style=color:var(--text-muted)>Restart Count</div><div></div></div><div><div class="text-xs mb-1"style=color:var(--text-muted)>Started At</div><div style=color:var(--text-secondary)>');const Nh=()=>{const[e,t]=J(""),[r,n]=J("all"),[d,_]=J("name"),[h,s]=J("asc"),[i,u]=J(1),[f,g]=J(20),[v,b]=J(null),[S,y]=J(!1),[l,a]=J(!1),[o,c]=J(!1),[m,w]=J(!1),[k,A]=J(!1),[x,C]=J(!1),[I,R]=J(!1),[D,j]=J(!1),[M,P]=J(null),[L,F]=J(8080),[$,B]=J(80),[H,{refetch:z}]=Ke(De.listPortForwards),[X,V]=J(""),[Y,K]=J(!1),[ce,E]=J(null),[N,U]=J(100),[W,q]=J(""),[G,Q]=J(!1);let oe=null;const[ge,Ce]=J({}),[Z,te]=J({});let re=null;const[me,ye]=J(!1),[we,ke]=J(null);let Se;const $e=xe=>{if(!xe||xe==="-")return 0;const Be=xe.match(/^(\d+)/);return Be?parseInt(Be[1]):0},he=(xe,Be)=>{const it=ge()[xe]?.[Be],gt=Z()[xe]?.[Be];if(!it||!gt)return null;const ht=$e(it),Ze=$e(gt);return ht>Ze?"up":ht<Ze?"down":null},ue=async()=>{try{const xe=ge(),Be=await De.getPodMetrics(tt());Object.keys(xe).length>0&&te(xe),Ce(Be)}catch(xe){console.error("Failed to fetch metrics:",xe)}},[le,ie]=J(0);let ae=null;const _e=(xe,Be)=>{if(!xe)return"-";const it=new Date(xe),ht=new Date().getTime()-it.getTime();if(ht<0)return"0s";const Ze=Math.floor(ht/1e3),wt=Math.floor(Ze/60),kt=Math.floor(wt/60),os=Math.floor(kt/24);if(Ze<120)return`${Ze}s`;if(wt<60){const as=Ze%60;return`${wt}m${as}s`}if(kt<24){const as=wt%60;return`${kt}h${as}m`}const Ei=kt%24;return`${os}d${Ei}h`};let se=null,fe=null;cr(()=>{ue(),re=setInterval(ue,1e4),ae=setInterval(()=>ie(xe=>xe+1),5e3),se=setInterval(()=>{pe().catch(xe=>console.error("Background refresh error:",xe)),ue()},2e3),fe=xe=>{if(xe.target.tagName==="INPUT"||xe.target.tagName==="TEXTAREA")return;const Be=Te();if(Be.length===0)return;const it=we();switch(xe.key){case"ArrowDown":xe.preventDefault(),ke(gt=>gt===null?0:Math.min(gt+1,Be.length-1));break;case"ArrowUp":xe.preventDefault(),ke(gt=>gt===null||gt===0?null:gt-1);break;case"Enter":xe.preventDefault(),it!==null&&Be[it]&&Me(Be[it],"details");break;case"Escape":ke(null);break}},document.addEventListener("keydown",fe)}),tr(()=>{re&&clearInterval(re),ae&&clearInterval(ae),se&&clearInterval(se),fe&&document.removeEventListener("keydown",fe)}),Dt(()=>{const xe=we();if(xe!==null&&Se){const Be=Se.querySelectorAll("tbody tr");Be[xe]&&Be[xe].scrollIntoView({behavior:"smooth",block:"nearest"})}}),Ke(De.getNamespaces);const[de,{refetch:pe}]=Ke(tt,De.getPods),[Ee,be]=J(!0);Dt(()=>{de()!==void 0&&Ee()&&be(!1)});const[Pe]=Ke(()=>(S()||l())&&v()?{name:v().name,ns:v().namespace}:null,async xe=>xe&&(await De.getPodYAML(xe.name,xe.ns)).yaml||""),Ne=xe=>{if(!xe)return 0;const Be=xe.match(/^(\d+)m?$/);return Be?parseInt(Be[1]):0},Ie=xe=>{if(!xe)return 0;const Be=xe.match(/^(\d+)(Ki|Mi|Gi)?$/);if(!Be)return 0;const it=parseInt(Be[1]),gt=Be[2];return gt==="Gi"?it*1024:gt==="Ki"?it/1024:it},Ae=xe=>{if(!xe)return 0;let Be=0;const it=xe.match(/(\d+)d/),gt=xe.match(/(\d+)h/),ht=xe.match(/(\d+)m/);return it&&(Be+=parseInt(it[1])*24*60),gt&&(Be+=parseInt(gt[1])*60),ht&&(Be+=parseInt(ht[1])),Be},Re=Oe(()=>{let xe=de()||[];const Be=e().toLowerCase(),it=r();Be&&(xe=xe.filter(Ze=>Ze.name.toLowerCase().includes(Be)||Ze.namespace.toLowerCase().includes(Be)||Ze.node?.toLowerCase().includes(Be)||Ze.ip?.toLowerCase().includes(Be))),it!=="all"&&(it==="running"?xe=xe.filter(Ze=>Ze.status==="Running"):it==="pending"?xe=xe.filter(Ze=>Ze.status==="Pending"):it==="failed"?xe=xe.filter(Ze=>["Failed","Error","CrashLoopBackOff"].includes(Ze.status)):it==="succeeded"&&(xe=xe.filter(Ze=>Ze.status==="Succeeded")));const gt=d(),ht=h();return xe=[...xe].sort((Ze,wt)=>{let kt=0;switch(gt){case"name":kt=Ze.name.localeCompare(wt.name);break;case"namespace":kt=Ze.namespace.localeCompare(wt.namespace);break;case"status":kt=Ze.status.localeCompare(wt.status);break;case"cpu":kt=Ne(Ze.cpu)-Ne(wt.cpu);break;case"memory":kt=Ie(Ze.memory)-Ie(wt.memory);break;case"restarts":kt=Ze.restarts-wt.restarts;break;case"age":kt=Ae(Ze.age)-Ae(wt.age);break}return ht==="asc"?kt:-kt}),xe}),je=Oe(()=>Math.ceil(Re().length/f())),Te=Oe(()=>{const xe=(i()-1)*f();return Re().slice(xe,xe+f())}),He=Oe(()=>{const xe=de()||[];return{running:xe.filter(Be=>Be.status==="Running").length,pending:xe.filter(Be=>Be.status==="Pending").length,failed:xe.filter(Be=>["Failed","Error","CrashLoopBackOff"].includes(Be.status)).length,total:xe.length}}),ze=xe=>{d()===xe?s(Be=>Be==="asc"?"desc":"asc"):(_(xe),s("asc")),u(1)},Xe=xe=>(()=>{var Be=vh(),it=Be.firstChild,gt=it.nextSibling;return ne(ht=>{var Ze=d()===xe.field&&h()==="asc"?"var(--accent-primary)":"var(--text-muted)",wt=d()===xe.field&&h()==="desc"?"var(--accent-primary)":"var(--text-muted)";return Ze!==ht.e&&ve(it,"color",ht.e=Ze),wt!==ht.t&&ve(gt,"color",ht.t=wt),ht},{e:void 0,t:void 0}),Be})(),Me=(xe,Be)=>{switch(b(xe),Be){case"yaml":y(!0);break;case"describe":c(!0);break;case"logs":ft(xe,G()),w(!0);break;case"details":A(!0);break;case"shell":C(!0);break;case"portforward":R(!0);break}},We=async()=>{const xe=v();if(xe)try{await De.startPortForward("pod",xe.name,xe.namespace,L(),$()),R(!1),z()}catch(Be){console.error("Failed to start port forward:",Be)}},Ge=async xe=>{try{await De.stopPortForward(xe),z()}catch(Be){console.error("Failed to stop port forward:",Be)}},Je=xe=>{const Be=xe.containers?.[0]||"";window.open(`/api/pod/exec?name=${xe.name}&namespace=${xe.namespace}&container=${Be}`,"_blank")},ot=()=>{oe&&(oe.close(),oe=null)},ft=async(xe,Be=!1)=>{ot(),K(!0),E(null);const it=xe.containers?.[0]||"",gt=`/api/pod/logs?name=${xe.name}&namespace=${xe.namespace}&container=${it}&tail=${N()}${Be?"&follow=true":""}`;if(Be)V(""),oe=new EventSource(gt),oe.onmessage=ht=>{V(Ze=>Ze+ht.data+`
`),K(!1)},oe.onerror=()=>{E("Stream connection lost"),K(!1),ot()},oe.onopen=()=>{K(!1)};else try{const ht=await fetch(gt);if(!ht.ok){const wt=await ht.text();throw new Error(wt||`HTTP ${ht.status}`)}const Ze=await ht.json();V(Ze.logs||"No logs available")}catch(ht){E(ht.message||"Failed to fetch logs"),V("")}finally{K(!1)}},Rt=Oe(()=>{const xe=X(),Be=W().toLowerCase();return Be?xe.split(`
`).filter(it=>it.toLowerCase().includes(Be)).join(`
`):xe}),hr=()=>{const xe=new Blob([X()],{type:"text/plain"}),Be=URL.createObjectURL(xe),it=document.createElement("a");it.href=Be,it.download=`${v()?.name}-logs.txt`,it.click(),URL.revokeObjectURL(Be)},Sr=xe=>{P(xe),j(!0)},qr=async()=>{const xe=M();if(xe){j(!1);try{await De.deletePod(xe.name,xe.namespace),qe(`Pod ${xe.name} deleted successfully`,"success"),setTimeout(()=>pe(),500)}catch(Be){console.error("Failed to delete pod:",Be),qe(`Failed to delete pod: ${Be instanceof Error?Be.message:"Unknown error"}`,"error")}finally{P(null)}}};return(()=>{var xe=Ch(),Be=xe.firstChild,it=Be.firstChild,gt=it.firstChild;gt.nextSibling;var ht=it.nextSibling,Ze=ht.firstChild,wt=Ze.nextSibling,kt=Be.nextSibling,os=kt.firstChild,Ei=os.firstChild,as=Ei.nextSibling,Ai=os.nextSibling,na=Ai.firstChild,la=na.nextSibling,Li=Ai.nextSibling,oa=Li.firstChild,aa=oa.nextSibling,Mi=Li.nextSibling,ca=Mi.firstChild,da=ca.nextSibling,ha=Mi.nextSibling,Di=ha.nextSibling,Ri=Di.nextSibling,Mn=Ri.nextSibling,Ti=kt.nextSibling;return Ze.$$click=()=>ye(!me()),wt.$$click=Qe=>{const rt=Qe.currentTarget;rt.classList.add("refreshing"),setTimeout(()=>rt.classList.remove("refreshing"),500),pe(),ue()},os.$$click=()=>n("all"),p(as,()=>He().total),Ai.$$click=()=>n("running"),p(la,()=>He().running),Li.$$click=()=>n("pending"),p(aa,()=>He().pending),Mi.$$click=()=>n("failed"),p(da,()=>He().failed),Di.addEventListener("change",Qe=>{n(Qe.currentTarget.value),u(1)}),Ri.$$input=Qe=>{t(Qe.currentTarget.value),u(1)},Mn.addEventListener("change",Qe=>{g(parseInt(Qe.currentTarget.value)),u(1)}),p(xe,T(ee,{get when(){return(H()||[]).length>0},get children(){var Qe=mh(),rt=Qe.firstChild,_t=rt.nextSibling;return p(_t,T(Ve,{get each(){return H()||[]},children:ut=>(()=>{var yt=kh(),St=yt.firstChild,$t=St.nextSibling,xt=$t.nextSibling,At=xt.firstChild,bt=At.nextSibling;bt.nextSibling;var Ct=xt.nextSibling,Et=Ct.nextSibling;return p($t,()=>ut.name),p(xt,()=>ut.localPort,bt),p(xt,()=>ut.remotePort,null),Et.$$click=()=>Ge(ut.id),ne(()=>et(Ct,"href",`http://localhost:${ut.localPort}`)),yt})()})),Qe}}),Ti),p(Ti,T(ee,{get when(){return!Ee()||de()!==void 0},get fallback(){return(()=>{var Qe=Eh(),rt=Qe.firstChild;return rt.nextSibling,Qe})()},get children(){return[(()=>{var Qe=_h(),rt=Qe.firstChild,_t=rt.firstChild,ut=_t.firstChild,yt=ut.firstChild,St=yt.firstChild;St.firstChild;var $t=yt.nextSibling,xt=$t.firstChild;xt.firstChild;var At=$t.nextSibling,bt=At.nextSibling,Ct=bt.nextSibling,Et=Ct.firstChild;Et.firstChild;var nt=Ct.nextSibling,Tt=nt.firstChild;Tt.firstChild;var Pt=nt.nextSibling,Ut=Pt.firstChild;Ut.firstChild;var mt=Pt.nextSibling,Dr=mt.nextSibling,$r=Dr.firstChild;$r.firstChild;var Kr=_t.nextSibling,Rr=Se;return typeof Rr=="function"?qt(Rr,rt):Se=rt,yt.$$click=()=>ze("name"),p(St,T(Xe,{field:"name"}),null),$t.$$click=()=>ze("status"),p(xt,T(Xe,{field:"status"}),null),Ct.$$click=()=>ze("cpu"),p(Et,T(Xe,{field:"cpu"}),null),nt.$$click=()=>ze("memory"),p(Tt,T(Xe,{field:"memory"}),null),Pt.$$click=()=>ze("restarts"),p(Ut,T(Xe,{field:"restarts"}),null),Dr.$$click=()=>ze("age"),p($r,T(Xe,{field:"age"}),null),p(Kr,T(Ve,{get each(){return Te()},get fallback(){return(()=>{var Ye=Ah();return Ye.firstChild,Ye})()},children:(Ye,ur)=>{const Cr=()=>we()===ur(),fr=Ye.status==="Failed"||Ye.status==="CrashLoopBackOff"||Ye.status==="Error",cs=Ye.status==="Pending",[Pi,Ps]=J(!1),Ii=()=>{if(fr)return"#ef4444";if(cs)return"#f59e0b"},Bi=()=>Pi()?Cr()?me()?"#1f2937":"var(--bg-tertiary)":fr?"rgba(239, 68, 68, 0.2)":cs?"rgba(251, 191, 36, 0.2)":"rgba(255, 255, 255, 0.05)":"transparent",Zt=Ii();return(()=>{var Yt=Lh(),Is=Yt.firstChild,Tr=Is.firstChild,Bs=Is.nextSibling,Yr=Bs.nextSibling,Gr=Yr.nextSibling,ds=Gr.nextSibling,Pr=ds.firstChild,Os=ds.nextSibling,Ir=Os.firstChild,It=Os.nextSibling,Xr=It.nextSibling,Jr=Xr.nextSibling,Hs=Jr.nextSibling;return Yt.addEventListener("mouseleave",()=>Ps(!1)),Yt.addEventListener("mouseenter",()=>{Ps(!0),we()!==ur()&&ke(ur())}),Yt.$$click=()=>{ke(ur()),Me(Ye,"details")},ve(Yt,"borderLeft",fr?"3px solid #ef4444":cs?"3px solid #f59e0b":"none"),ve(Yt,"color",Zt),p(Tr,()=>me()?"â¶ ":"",null),p(Tr,(()=>{var at=Fe(()=>Ye.name.length>40);return()=>at()?Ye.name.slice(0,37)+"...":Ye.name})(),null),p(Bs,()=>{const at=Ye.status==="Failed"||Ye.status==="CrashLoopBackOff"||Ye.status==="Error",gr=Ye.status==="Pending",pr=Ye.status==="Running",Br=Ye.status==="Succeeded";return me()?(()=>{var Lt=Mh(),kr=Lt.firstChild;return ve(Lt,"color",pr?"#22c55e":gr?"#f59e0b":Br?"#06b6d4":"#ef4444"),p(Lt,pr?"â":gr?"â":at?"â":"â",kr),p(Lt,()=>Ye.status,null),Lt})():(()=>{var Lt=Dh();return Ue(Lt,`badge ${pr?"badge-success":gr?"badge-warning":Br?"badge-info":"badge-error"}`),p(Lt,()=>Ye.status),ne(kr=>hn(Lt,{...gr&&{background:"rgba(251, 191, 36, 0.2)",color:"#fbbf24",border:"1px solid rgba(251, 191, 36, 0.3)"},...at&&{background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)"}},kr)),Lt})()}),ve(Yr,"color",Zt||"inherit"),p(Yr,()=>Ye.ready),ve(Gr,"color",Zt||"var(--text-secondary)"),p(Gr,()=>Ye.ip||"-"),ve(Pr,"color",Zt||"#ec4899"),p(Pr,()=>ge()[`${Ye.namespace}/${Ye.name}`]?.cpu||Ye.cpu||"-",null),p(Pr,(()=>{var at=Fe(()=>he(`${Ye.namespace}/${Ye.name}`,"cpu")==="up");return()=>at()&&Qn()})(),null),p(Pr,(()=>{var at=Fe(()=>he(`${Ye.namespace}/${Ye.name}`,"cpu")==="down");return()=>at()&&el()})(),null),ve(Ir,"color",Zt||"#f59e0b"),p(Ir,()=>ge()[`${Ye.namespace}/${Ye.name}`]?.memory||Ye.memory||"-",null),p(Ir,(()=>{var at=Fe(()=>he(`${Ye.namespace}/${Ye.name}`,"memory")==="up");return()=>at()&&Qn()})(),null),p(Ir,(()=>{var at=Fe(()=>he(`${Ye.namespace}/${Ye.name}`,"memory")==="down");return()=>at()&&el()})(),null),p(It,()=>Ye.restarts),ve(Xr,"color",Zt||"var(--text-muted)"),p(Xr,()=>Ye.node),ve(Jr,"color",Zt||"inherit"),p(Jr,()=>_e(Ye.createdAt,le())),p(Hs,T(sr,{actions:[{label:"Shell",icon:"shell",onClick:()=>Je(Ye)},{label:"Port Forward",icon:"portforward",onClick:()=>Me(Ye,"portforward")},{label:"View Logs",icon:"logs",onClick:()=>Me(Ye,"logs")},{label:"View YAML",icon:"yaml",onClick:()=>Me(Ye,"yaml")},{label:"Edit YAML",icon:"edit",onClick:()=>{b(Ye),a(!0)}},{label:"Describe",icon:"describe",onClick:()=>Me(Ye,"describe")},{label:"Delete",icon:"delete",onClick:()=>Sr(Ye),variant:"danger"}]})),ne(at=>{var gr=Cr()?"selected-row":"",pr=Bi(),Br=Cr()?`2px solid ${me()?"#06b6d4":"var(--accent-primary)"}`:"none",Lt=Zt||(me()?Ye.status==="Running"?"#22c55e":"var(--text-primary)":"#60a5fa"),kr=Zt||(Ye.restarts>0?"#fbbf24":"inherit"),Ns=Ye.restarts>0?"font-semibold":"";return gr!==at.e&&Ue(Yt,at.e=gr),pr!==at.t&&ve(Yt,"background",at.t=pr),Br!==at.a&&ve(Yt,"outline",at.a=Br),Lt!==at.o&&ve(Tr,"color",at.o=Lt),kr!==at.i&&ve(It,"color",at.i=kr),Ns!==at.n&&Ue(It,at.n=Ns),at},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),Yt})()}})),ne(Ye=>{var ur=`data-table ${me()?"terminal-table":""}`,Cr=me()?"monospace":"inherit",fr=me()?"#0d1117":"transparent";return ur!==Ye.e&&Ue(rt,Ye.e=ur),Cr!==Ye.t&&ve(rt,"font-family",Ye.t=Cr),fr!==Ye.a&&ve(rt,"background",Ye.a=fr),Ye},{e:void 0,t:void 0,a:void 0}),Qe})(),T(ee,{get when(){return je()>1},get children(){var Qe=bh(),rt=Qe.firstChild,_t=rt.firstChild,ut=_t.nextSibling,yt=ut.nextSibling,St=yt.nextSibling,$t=St.nextSibling,xt=$t.nextSibling;xt.nextSibling;var At=rt.nextSibling,bt=At.firstChild,Ct=bt.nextSibling,Et=Ct.nextSibling,nt=Et.firstChild,Tt=nt.nextSibling;Tt.nextSibling;var Pt=Et.nextSibling,Ut=Pt.nextSibling;return p(rt,()=>(i()-1)*f()+1,ut),p(rt,()=>Math.min(i()*f(),Re().length),St),p(rt,()=>Re().length,xt),bt.$$click=()=>u(1),Ct.$$click=()=>u(mt=>Math.max(1,mt-1)),p(Et,i,Tt),p(Et,je,null),Pt.$$click=()=>u(mt=>Math.min(je(),mt+1)),Ut.$$click=()=>u(je()),ne(mt=>{var Dr=i()===1,$r=i()===1,Kr=i()===je(),Rr=i()===je();return Dr!==mt.e&&(bt.disabled=mt.e=Dr),$r!==mt.t&&(Ct.disabled=mt.t=$r),Kr!==mt.a&&(Pt.disabled=mt.a=Kr),Rr!==mt.o&&(Ut.disabled=mt.o=Rr),mt},{e:void 0,t:void 0,a:void 0,o:void 0}),Qe}})]}})),p(xe,T(st,{get isOpen(){return S()},onClose:()=>y(!1),get title(){return`YAML: ${v()?.name}`},size:"xl",get children(){return T(ee,{get when(){return!Pe.loading},get fallback(){return Rh()},get children(){return T(rr,{get yaml(){return Pe()||""},get title(){return v()?.name}})}})}}),null),p(xe,T(Jt,{get isOpen(){return o()},onClose:()=>c(!1),resourceType:"pod",get name(){return v()?.name||""},get namespace(){return v()?.namespace}}),null),p(xe,T(st,{get isOpen(){return m()},onClose:()=>{ot(),w(!1)},get title(){return`Logs: ${v()?.name}`},size:"xl",get children(){var Qe=wh(),rt=Qe.firstChild,_t=rt.firstChild,ut=_t.nextSibling,yt=ut.firstChild,St=yt.nextSibling,$t=St.firstChild,xt=St.nextSibling,At=ut.nextSibling,bt=At.nextSibling,Ct=bt.nextSibling,Et=rt.nextSibling;return _t.addEventListener("change",nt=>{U(parseInt(nt.currentTarget.value)),v()&&ft(v(),G())}),yt.addEventListener("change",nt=>{const Tt=nt.currentTarget.checked;Q(Tt),v()&&ft(v(),Tt)}),p(xt,()=>G()?"Live":"Follow"),p(ut,(()=>{var nt=Fe(()=>!!G());return()=>nt()&&Th()})(),null),At.$$input=nt=>q(nt.currentTarget.value),bt.$$click=()=>v()&&ft(v(),G()),Ct.$$click=hr,p(Et,T(ee,{get when(){return!Y()},get fallback(){return Ph()},get children(){return[T(ee,{get when(){return ce()},get children(){var nt=yh();return nt.firstChild,p(nt,ce,null),nt}}),(()=>{var nt=xh();return p(nt,()=>Rt()||"No logs available"),nt})()]}})),ne(nt=>{var Tt=G(),Pt=G()?"var(--accent-primary)":"var(--bg-tertiary)",Ut=G()?"white":"var(--text-primary)",mt=G()?"M21 12a9 9 0 11-18 0 9 9 0 0118 0z M10 9v6m4-6v6":"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z M21 12a9 9 0 11-18 0 9 9 0 0118 0z";return Tt!==nt.e&&(_t.disabled=nt.e=Tt),Pt!==nt.t&&ve(ut,"background",nt.t=Pt),Ut!==nt.a&&ve(ut,"color",nt.a=Ut),mt!==nt.o&&et($t,"d",nt.o=mt),nt},{e:void 0,t:void 0,a:void 0,o:void 0}),ne(()=>_t.value=N()),ne(()=>yt.checked=G()),ne(()=>At.value=W()),Qe}}),null),p(xe,T(st,{get isOpen(){return k()},onClose:()=>A(!1),get title(){return`Pod: ${v()?.name}`},size:"xl",get children(){return T(ee,{get when(){return v()},get children(){return(()=>{const[Qe]=Ke(()=>v()?{name:v().name,ns:v().namespace}:null,async rt=>rt?De.getPodDetails(rt.name,rt.ns):null);return(()=>{var rt=Bh(),_t=rt.firstChild,ut=_t.firstChild,yt=ut.nextSibling,St=yt.firstChild,$t=St.firstChild,xt=$t.nextSibling,At=xt.firstChild,bt=St.nextSibling,Ct=bt.firstChild,Et=Ct.nextSibling,nt=bt.nextSibling,Tt=nt.firstChild,Pt=Tt.nextSibling,Ut=nt.nextSibling,mt=Ut.firstChild,Dr=mt.nextSibling,$r=Ut.nextSibling,Kr=$r.firstChild,Rr=Kr.nextSibling,Ye=$r.nextSibling,ur=Ye.firstChild,Cr=ur.nextSibling,fr=Ye.nextSibling,cs=fr.firstChild,Pi=cs.nextSibling,Ps=fr.nextSibling,Ii=Ps.firstChild,Bi=Ii.nextSibling,Zt=yt.nextSibling,Yt=Zt.firstChild,Is=Yt.nextSibling,Tr=_t.nextSibling;Tr.firstChild;var Bs=Tr.nextSibling,Yr=Bs.firstChild,Gr=Yr.nextSibling,ds=Gr.nextSibling,Pr=ds.nextSibling,Os=Pr.nextSibling;return p(At,()=>v()?.status),p(Et,()=>v()?.ready),p(Pt,()=>v()?.cpu||"-"),p(Dr,()=>v()?.memory||"-"),p(Rr,()=>v()?.restarts),p(Cr,()=>v()?.age),p(Pi,()=>v()?.ip||"-"),p(Bi,()=>v()?.namespace),p(Is,()=>v()?.node),p(Tr,T(ee,{get when(){return Fe(()=>!Qe.loading)()&&Qe()?.containers},get fallback(){return Oh()},get children(){var Ir=Ih();return p(Ir,T(Ve,{get each(){return Qe()?.containers||[]},children:It=>(()=>{var Xr=Hh(),Jr=Xr.firstChild,Hs=Jr.firstChild,at=Hs.firstChild,gr=at.nextSibling,pr=Hs.nextSibling,Br=Jr.nextSibling,Lt=Br.firstChild,kr=Lt.firstChild,Ns=kr.nextSibling,Dn=Lt.nextSibling,ua=Dn.firstChild,Oi=ua.nextSibling,fa=Oi.firstChild,Rn=Dn.nextSibling,ga=Rn.firstChild,Tn=ga.nextSibling,pa=Rn.nextSibling,va=pa.firstChild,ma=va.nextSibling;return p(gr,()=>It.name),p(pr,()=>It.state||(It.ready?"Running":"Not Ready")),p(Ns,()=>It.image),p(Oi,()=>It.containerID?.split("//")[1]?.substring(0,24)||"-",fa),p(Tn,()=>It.restartCount),p(ma,()=>It.startedAt||"-"),ne(Or=>{var Pn=`badge ${It.ready?"badge-success":"badge-error"}`,In=It.containerID,Bn=It.restartCount>0?"var(--warning-color)":"var(--text-primary)";return Pn!==Or.e&&Ue(pr,Or.e=Pn),In!==Or.t&&et(Oi,"title",Or.t=In),Bn!==Or.a&&ve(Tn,"color",Or.a=Bn),Or},{e:void 0,t:void 0,a:void 0}),Xr})()})),Ir}}),null),Yr.$$click=()=>Je(v()),Gr.$$click=()=>{A(!1),Me(v(),"portforward")},ds.$$click=()=>{A(!1),Me(v(),"logs")},Pr.$$click=()=>{A(!1),Me(v(),"yaml")},Os.$$click=()=>{A(!1),Me(v(),"describe")},ne(()=>Ue(At,`badge ${v()?.status==="Running"?"badge-success":"badge-warning"}`)),rt})()})()}})}}),null),p(xe,T(st,{get isOpen(){return I()},onClose:()=>R(!1),get title(){return`Port Forward: ${v()?.name}`},size:"sm",get children(){var Qe=Sh(),rt=Qe.firstChild,_t=rt.firstChild,ut=_t.nextSibling,yt=rt.nextSibling,St=yt.firstChild,$t=St.nextSibling,xt=yt.nextSibling,At=xt.firstChild,bt=At.nextSibling;bt.firstChild;var Ct=bt.nextSibling,Et=Ct.nextSibling,nt=Et.firstChild,Tt=xt.nextSibling,Pt=Tt.firstChild,Ut=Pt.nextSibling;return ut.$$input=mt=>F(parseInt(mt.currentTarget.value)||8080),$t.$$input=mt=>B(parseInt(mt.currentTarget.value)||80),p(bt,L,null),p(Et,()=>v()?.name,nt),p(Et,$,null),Pt.$$click=()=>R(!1),Ut.$$click=We,ne(()=>ut.value=L()),ne(()=>$t.value=$()),Qe}}),null),p(xe,T(st,{get isOpen(){return D()},onClose:()=>{j(!1),P(null)},title:"Delete Pod",size:"md",get children(){var Qe=$h(),rt=Qe.firstChild,_t=rt.firstChild;_t.firstChild;var ut=_t.nextSibling,yt=ut.firstChild,St=yt.nextSibling,$t=St.firstChild,xt=$t.nextSibling;xt.firstChild,St.nextSibling;var At=rt.nextSibling,bt=At.firstChild,Ct=bt.nextSibling;return p($t,()=>M()?.name),p(xt,()=>M()?.namespace,null),bt.$$click=()=>{j(!1),P(null)},Ct.$$click=qr,Qe}}),null),ne(Qe=>{var rt=me()?"var(--accent-primary)":"var(--bg-secondary)",_t=me()?"Switch to Normal View":"Switch to Terminal View",ut=me()?"#0d1117":"var(--bg-primary)";return rt!==Qe.e&&ve(Ze,"background",Qe.e=rt),_t!==Qe.t&&et(Ze,"title",Qe.t=_t),ut!==Qe.a&&ve(Ti,"background",Qe.a=ut),Qe},{e:void 0,t:void 0,a:void 0}),ne(()=>Di.value=r()),ne(()=>Ri.value=e()),ne(()=>Mn.value=f()),xe})()};lt(["click","input"]);var zh=O('<div class="px-3 py-1.5 rounded-lg text-sm"style="background:rgba(239, 68, 68, 0.1);color:var(--error-color)">'),Fh=O("<div class=spinner style=width:16px;height:16px>"),jh=O('<div class="flex flex-col h-full"><div class="flex items-center justify-between mb-2"><div class="flex items-center gap-2"></div><div class="flex items-center gap-2"><button class="px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)">Cancel</button><button class="px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"style=background:var(--accent-primary);color:white></button></div></div><textarea class="flex-1 w-full p-4 rounded-lg font-mono text-sm leading-relaxed resize-none focus:outline-none focus:ring-2 focus:ring-[var(--accent-primary)]"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color);fontFamily:ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace">');const wr=e=>{const[t,r]=J(e.yaml),[n,d]=J(!1),[_,h]=J(null),s=async()=>{h(null),d(!0);try{await e.onSave?.(t())}catch(u){h(u instanceof Error?u.message:"Failed to save YAML")}finally{d(!1)}},i=()=>{r(e.yaml),h(null),e.onCancel?.()};return(()=>{var u=jh(),f=u.firstChild,g=f.firstChild,v=g.nextSibling,b=v.firstChild,S=b.nextSibling,y=f.nextSibling;return p(g,T(ee,{get when(){return _()},get children(){var l=zh();return p(l,_),l}})),b.$$click=i,S.$$click=s,p(S,T(ee,{get when(){return n()||e.loading},fallback:"Save",get children(){return[Fh(),"Saving..."]}})),y.$$input=l=>r(l.currentTarget.value),et(y,"spellcheck",!1),ne(l=>{var a=n()||e.loading,o=n()||e.loading||t()===e.yaml;return a!==l.e&&(b.disabled=l.e=a),o!==l.t&&(S.disabled=l.t=o),l},{e:void 0,t:void 0}),ne(()=>y.value=t()),u})()};lt(["click","input"]);var Uh=O('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>â²</span><span>â¼'),Vh=O('<div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Ready </div></th><th class=whitespace-nowrap>Up-to-date</th><th class=whitespace-nowrap>Available</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),Wh=O('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:#161b22><div style=color:#8b949e>Showing <!> - <!> of <!> deployments</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>â Prev</button><span class="px-3 py-1"style=color:#c9d1d9>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Next â</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Last'),qh=O("<div style=height:70vh>"),Kh=O('<div class=space-y-4><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Replicas</label><input type=number min=0 max=100 class="w-full px-4 py-2 rounded-lg"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div class="flex gap-2"><button class="btn-secondary flex-1">Cancel</button><button class="btn-primary flex-1">Scale'),Yh=O('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Deployments</h1><p style=color:var(--text-secondary)>Manage application deployments</p></div><div class="flex items-center gap-3"><button class=icon-btn title="Refresh Deployments"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Ready</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--warning-color)"><span class=text-sm style=color:var(--text-secondary)>Partial</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--error-color)"><span class=text-sm style=color:var(--text-secondary)>Unavailable</span><span class="text-xl font-bold"style=color:var(--error-color)></span></div><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class="overflow-hidden rounded-lg"style=background:#0d1117>'),Gh=O('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading deployments...'),Xh=O('<tr><td colspan=7 class="text-center py-8"style=color:var(--text-muted)>No deployments found'),Jh=O('<tr><td><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td></td><td><span></span></td><td></td><td></td><td></td><td>'),tl=O('<div class="spinner mx-auto">');const Zh=()=>{const[e,t]=J(""),[r,n]=J("name"),[d,_]=J("asc"),[h,s]=J(1),[i,u]=J(20),[f,g]=J(null),[v,b]=J(!1),[S,y]=J(!1),[l,a]=J(!1),[o,c]=J(!1),[m,w]=J(1),[k,A]=J(null),[x,{refetch:C}]=Ke(tt,De.getDeployments),[I]=Ke(()=>(v()||S())&&f()?{name:f().name,ns:f().namespace}:null,async V=>V&&(await De.getDeploymentYAML(V.name,V.ns)).yaml||""),R=async V=>{const Y=f();if(Y)try{await De.updateDeployment(Y.name,Y.namespace,V),qe(`â Deployment ${Y.name} updated successfully`,"success"),y(!1),setTimeout(()=>C(),500),setTimeout(()=>C(),2e3)}catch(K){const ce=K instanceof Error?K.message:"Unknown error";throw qe(`â Failed to update deployment: ${ce}`,"error"),K}},D=V=>{if(!V)return 0;let Y=0;const K=V.match(/(\d+)d/),ce=V.match(/(\d+)h/),E=V.match(/(\d+)m/);return K&&(Y+=parseInt(K[1])*24*60),ce&&(Y+=parseInt(ce[1])*60),E&&(Y+=parseInt(E[1])),Y},j=Oe(()=>{let V=x()||[];const Y=e().toLowerCase();Y&&(V=V.filter(E=>E.name.toLowerCase().includes(Y)||E.namespace.toLowerCase().includes(Y)));const K=r(),ce=d();return V=[...V].sort((E,N)=>{let U=0;switch(K){case"name":U=E.name.localeCompare(N.name);break;case"namespace":U=E.namespace.localeCompare(N.namespace);break;case"ready":U=E.ready.localeCompare(N.ready);break;case"age":U=D(E.age)-D(N.age);break}return ce==="asc"?U:-U}),V}),M=Oe(()=>Math.ceil(j().length/i())),P=Oe(()=>{const V=(h()-1)*i();return j().slice(V,V+i())}),L=Oe(()=>{const V=x()||[];return{total:V.length,ready:V.filter(Y=>{const K=Y.ready?.split("/")||["0","0"];return K[0]===K[1]&&parseInt(K[0])>0}).length,partial:V.filter(Y=>{const K=Y.ready?.split("/")||["0","0"];return K[0]!==K[1]&&parseInt(K[0])>0}).length,unavailable:V.filter(Y=>{const K=Y.ready?.split("/")||["0","0"];return parseInt(K[0])===0}).length}}),F=V=>{r()===V?_(Y=>Y==="asc"?"desc":"asc"):(n(V),_("asc")),s(1)},$=V=>(()=>{var Y=Uh(),K=Y.firstChild,ce=K.nextSibling;return ne(E=>{var N=r()===V.field&&d()==="asc"?"var(--accent-primary)":"var(--text-muted)",U=r()===V.field&&d()==="desc"?"var(--accent-primary)":"var(--text-muted)";return N!==E.e&&ve(K,"color",E.e=N),U!==E.t&&ve(ce,"color",E.t=U),E},{e:void 0,t:void 0}),Y})(),B=async V=>{const Y=`${V.namespace}/${V.name}`;A(Y);try{const K=await De.restartDeployment(V.name,V.namespace);K?.success?qe(`â Deployment ${V.name} restart initiated - pods will restart shortly`,"success"):qe(`â ï¸ Restart initiated but may not have completed: ${K?.message||"Unknown status"}`,"warning"),setTimeout(()=>C(),500),setTimeout(()=>C(),2e3),setTimeout(()=>C(),5e3)}catch(K){console.error("Failed to restart deployment:",K);const ce=K instanceof Error?K.message:"Unknown error";qe(`â Failed to restart deployment ${V.name}: ${ce}`,"error")}finally{setTimeout(()=>A(null),2e3)}},H=async()=>{const V=f();if(V)try{const Y=await De.scaleDeployment(V.name,V.namespace,m());Y?.success?qe(`â Deployment ${V.name} scaled to ${m()} replicas`,"success"):qe(`â ï¸ Scale may not have completed: ${Y?.message||"Unknown status"}`,"warning"),c(!1),setTimeout(()=>C(),500),setTimeout(()=>C(),2e3)}catch(Y){console.error("Failed to scale deployment:",Y);const K=Y instanceof Error?Y.message:"Unknown error";qe(`â Failed to scale deployment: ${K}`,"error")}},z=async V=>{if(confirm(`Are you sure you want to delete deployment "${V.name}" in namespace "${V.namespace}"?`))try{await De.deleteDeployment(V.name,V.namespace),qe(`Deployment ${V.name} deleted successfully`,"success"),C()}catch(Y){console.error("Failed to delete deployment:",Y),qe(`Failed to delete deployment: ${Y instanceof Error?Y.message:"Unknown error"}`,"error")}},X=V=>{g(V);const Y=V.ready?.split("/")||["1","1"];w(parseInt(Y[1])||1),c(!0)};return(()=>{var V=Yh(),Y=V.firstChild,K=Y.firstChild,ce=K.firstChild;ce.nextSibling;var E=K.nextSibling,N=E.firstChild,U=Y.nextSibling,W=U.firstChild,q=W.firstChild,G=q.nextSibling,Q=W.nextSibling,oe=Q.firstChild,ge=oe.nextSibling,Ce=Q.nextSibling,Z=Ce.firstChild,te=Z.nextSibling,re=Ce.nextSibling,me=re.firstChild,ye=me.nextSibling,we=re.nextSibling,ke=we.nextSibling,Se=ke.nextSibling,$e=U.nextSibling;return N.$$click=he=>{const ue=he.currentTarget;ue.classList.add("refreshing"),setTimeout(()=>ue.classList.remove("refreshing"),500),C()},p(G,()=>L().total),p(ge,()=>L().ready),p(te,()=>L().partial),p(ye,()=>L().unavailable),ke.$$input=he=>{t(he.currentTarget.value),s(1)},Se.addEventListener("change",he=>{u(parseInt(he.currentTarget.value)),s(1)}),p($e,T(ee,{get when(){return!x.loading},get fallback(){return(()=>{var he=Gh(),ue=he.firstChild;return ue.nextSibling,he})()},get children(){return[(()=>{var he=Vh(),ue=he.firstChild,le=ue.firstChild,ie=le.firstChild,ae=ie.firstChild,_e=ae.firstChild;_e.firstChild;var se=ae.nextSibling,fe=se.firstChild;fe.firstChild;var de=se.nextSibling,pe=de.firstChild;pe.firstChild;var Ee=de.nextSibling,be=Ee.nextSibling,Pe=be.nextSibling,Ne=Pe.firstChild;Ne.firstChild;var Ie=le.nextSibling;return ae.$$click=()=>F("name"),p(_e,T($,{field:"name"}),null),se.$$click=()=>F("namespace"),p(fe,T($,{field:"namespace"}),null),de.$$click=()=>F("ready"),p(pe,T($,{field:"ready"}),null),Pe.$$click=()=>F("age"),p(Ne,T($,{field:"age"}),null),p(Ie,T(Ve,{get each(){return P()},get fallback(){return(()=>{var Ae=Xh();return Ae.firstChild,Ae})()},children:Ae=>(()=>{var Re=Jh(),je=Re.firstChild,Te=je.firstChild,He=je.nextSibling,ze=He.nextSibling,Xe=ze.firstChild,Me=ze.nextSibling,We=Me.nextSibling,Ge=We.nextSibling,Je=Ge.nextSibling;return Te.$$click=()=>{g(Ae),a(!0)},p(Te,(()=>{var ot=Fe(()=>Ae.name.length>40);return()=>ot()?Ae.name.slice(0,37)+"...":Ae.name})()),p(He,()=>Ae.namespace),p(Xe,()=>Ae.ready),p(Me,()=>Ae.upToDate),p(We,()=>Ae.available),p(Ge,()=>Ae.age),p(Je,T(sr,{get actions(){return[{label:"Scale",icon:"scale",onClick:()=>X(Ae)},{label:"Restart",icon:"restart",onClick:()=>B(Ae),loading:k()===`${Ae.namespace}/${Ae.name}`},{label:"View YAML",icon:"yaml",onClick:()=>{g(Ae),b(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{g(Ae),y(!0)}},{label:"Delete",icon:"delete",onClick:()=>z(Ae),variant:"danger",divider:!0}]}})),ne(()=>Ue(Xe,`badge ${Ae.ready.split("/")[0]===Ae.ready.split("/")[1]?"badge-success":"badge-warning"}`)),Re})()})),he})(),T(ee,{get when(){return M()>1},get children(){var he=Wh(),ue=he.firstChild,le=ue.firstChild,ie=le.nextSibling,ae=ie.nextSibling,_e=ae.nextSibling,se=_e.nextSibling,fe=se.nextSibling;fe.nextSibling;var de=ue.nextSibling,pe=de.firstChild,Ee=pe.nextSibling,be=Ee.nextSibling,Pe=be.firstChild,Ne=Pe.nextSibling;Ne.nextSibling;var Ie=be.nextSibling,Ae=Ie.nextSibling;return p(ue,()=>(h()-1)*i()+1,ie),p(ue,()=>Math.min(h()*i(),j().length),_e),p(ue,()=>j().length,fe),pe.$$click=()=>s(1),Ee.$$click=()=>s(Re=>Math.max(1,Re-1)),p(be,h,Ne),p(be,M,null),Ie.$$click=()=>s(Re=>Math.min(M(),Re+1)),Ae.$$click=()=>s(M()),ne(Re=>{var je=h()===1,Te=h()===1,He=h()===M(),ze=h()===M();return je!==Re.e&&(pe.disabled=Re.e=je),Te!==Re.t&&(Ee.disabled=Re.t=Te),He!==Re.a&&(Ie.disabled=Re.a=He),ze!==Re.o&&(Ae.disabled=Re.o=ze),Re},{e:void 0,t:void 0,a:void 0,o:void 0}),he}})]}})),p(V,T(st,{get isOpen(){return v()},onClose:()=>b(!1),get title(){return`YAML: ${f()?.name}`},size:"xl",get children(){return T(ee,{get when(){return!I.loading},get fallback(){return tl()},get children(){return T(rr,{get yaml(){return I()||""},get title(){return f()?.name}})}})}}),null),p(V,T(st,{get isOpen(){return S()},onClose:()=>y(!1),get title(){return`Edit YAML: ${f()?.name}`},size:"xl",get children(){return T(ee,{get when(){return!I.loading},get fallback(){return tl()},get children(){var he=qh();return p(he,T(wr,{get yaml(){return I()||""},get title(){return f()?.name},onSave:R,onCancel:()=>y(!1)})),he}})}}),null),p(V,T(Jt,{get isOpen(){return l()},onClose:()=>a(!1),resourceType:"deployment",get name(){return f()?.name||""},get namespace(){return f()?.namespace}}),null),p(V,T(st,{get isOpen(){return o()},onClose:()=>c(!1),get title(){return`Scale: ${f()?.name}`},size:"sm",get children(){var he=Kh(),ue=he.firstChild,le=ue.firstChild,ie=le.nextSibling,ae=ue.nextSibling,_e=ae.firstChild,se=_e.nextSibling;return ie.$$input=fe=>w(parseInt(fe.currentTarget.value)||0),_e.$$click=()=>c(!1),se.$$click=H,ne(()=>ie.value=m()),he}}),null),ne(()=>ke.value=e()),ne(()=>Se.value=i()),V})()};lt(["click","input"]);var Qh=O('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>â²</span><span>â¼'),eu=O('<div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Ready </div></th><th class=whitespace-nowrap>Replicas</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),tu=O('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:#161b22><div style=color:#8b949e>Showing <!> - <!> of <!> StatefulSets</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>â Prev</button><span class="px-3 py-1"style=color:#c9d1d9>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Next â</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Last'),ru=O("<div style=height:70vh>"),su=O('<div class=space-y-4><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Replicas</label><input type=number min=0 max=100 class="w-full px-4 py-2 rounded-lg"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div class="flex gap-2"><button class="btn-secondary flex-1">Cancel</button><button class="btn-primary flex-1">Scale'),iu=O('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>StatefulSets</h1><p style=color:var(--text-secondary)>Manage stateful applications</p></div><div class="flex items-center gap-3"><button class=icon-btn title="Refresh StatefulSets"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Ready</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--warning-color)"><span class=text-sm style=color:var(--text-secondary)>Partial</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--error-color)"><span class=text-sm style=color:var(--text-secondary)>Unavailable</span><span class="text-xl font-bold"style=color:var(--error-color)></span></div><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class="overflow-hidden rounded-lg"style=background:#0d1117>'),nu=O('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading StatefulSets...'),lu=O('<tr><td colspan=6 class="text-center py-8"style=color:var(--text-muted)>No StatefulSets found'),ou=O('<tr><td><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td></td><td><span></span></td><td></td><td></td><td>'),rl=O('<div class="spinner mx-auto">');const au=()=>{const[e,t]=J(""),[r,n]=J("name"),[d,_]=J("asc"),[h,s]=J(1),[i,u]=J(20),[f,g]=J(null),[v,b]=J(!1),[S,y]=J(!1),[l,a]=J(!1),[o,c]=J(!1),[m,w]=J(1),[k,A]=J(null),[x,{refetch:C}]=Ke(tt,De.getStatefulSets),[I]=Ke(()=>(v()||S())&&f()?{name:f().name,ns:f().namespace}:null,async V=>V&&(await De.getStatefulSetYAML(V.name,V.ns)).yaml||""),R=async V=>{const Y=f();if(Y)try{await De.updateStatefulSet(Y.name,Y.namespace,V),qe(`â StatefulSet ${Y.name} updated successfully`,"success"),y(!1),setTimeout(()=>C(),500),setTimeout(()=>C(),2e3)}catch(K){const ce=K instanceof Error?K.message:"Unknown error";throw qe(`â Failed to update StatefulSet: ${ce}`,"error"),K}},D=V=>{if(!V)return 0;let Y=0;const K=V.match(/(\d+)d/),ce=V.match(/(\d+)h/),E=V.match(/(\d+)m/);return K&&(Y+=parseInt(K[1])*24*60),ce&&(Y+=parseInt(ce[1])*60),E&&(Y+=parseInt(E[1])),Y},j=Oe(()=>{let V=x()||[];const Y=e().toLowerCase();Y&&(V=V.filter(E=>E.name.toLowerCase().includes(Y)||E.namespace.toLowerCase().includes(Y)));const K=r(),ce=d();return V=[...V].sort((E,N)=>{let U=0;switch(K){case"name":U=E.name.localeCompare(N.name);break;case"namespace":U=E.namespace.localeCompare(N.namespace);break;case"ready":U=E.ready.localeCompare(N.ready);break;case"age":U=D(E.age)-D(N.age);break}return ce==="asc"?U:-U}),V}),M=Oe(()=>Math.ceil(j().length/i())),P=Oe(()=>{const V=(h()-1)*i();return j().slice(V,V+i())}),L=Oe(()=>{const V=x()||[];return{total:V.length,ready:V.filter(Y=>{const K=Y.ready?.split("/")||["0","0"];return K[0]===K[1]&&parseInt(K[0])>0}).length,partial:V.filter(Y=>{const K=Y.ready?.split("/")||["0","0"];return K[0]!==K[1]&&parseInt(K[0])>0}).length,unavailable:V.filter(Y=>{const K=Y.ready?.split("/")||["0","0"];return parseInt(K[0])===0}).length}}),F=V=>{r()===V?_(Y=>Y==="asc"?"desc":"asc"):(n(V),_("asc")),s(1)},$=V=>(()=>{var Y=Qh(),K=Y.firstChild,ce=K.nextSibling;return ne(E=>{var N=r()===V.field&&d()==="asc"?"var(--accent-primary)":"var(--text-muted)",U=r()===V.field&&d()==="desc"?"var(--accent-primary)":"var(--text-muted)";return N!==E.e&&ve(K,"color",E.e=N),U!==E.t&&ve(ce,"color",E.t=U),E},{e:void 0,t:void 0}),Y})(),B=async V=>{const Y=`${V.namespace}/${V.name}`;A(Y);try{const K=await De.restartStatefulSet(V.name,V.namespace);K?.success?qe(`â StatefulSet ${V.name} restart initiated - pods will restart shortly`,"success"):qe(`â ï¸ Restart initiated but may not have completed: ${K?.message||"Unknown status"}`,"warning"),setTimeout(()=>C(),500),setTimeout(()=>C(),2e3),setTimeout(()=>C(),5e3)}catch(K){console.error("Failed to restart StatefulSet:",K);const ce=K instanceof Error?K.message:"Unknown error";qe(`â Failed to restart StatefulSet ${V.name}: ${ce}`,"error")}finally{setTimeout(()=>A(null),2e3)}},H=async()=>{const V=f();if(V)try{const Y=await De.scaleStatefulSet(V.name,V.namespace,m());Y?.success?qe(`â StatefulSet ${V.name} scaled to ${m()} replicas`,"success"):qe(`â ï¸ Scale may not have completed: ${Y?.message||"Unknown status"}`,"warning"),c(!1),setTimeout(()=>C(),500),setTimeout(()=>C(),2e3)}catch(Y){console.error("Failed to scale StatefulSet:",Y);const K=Y instanceof Error?Y.message:"Unknown error";qe(`â Failed to scale StatefulSet: ${K}`,"error")}},z=async V=>{if(confirm(`Are you sure you want to delete StatefulSet "${V.name}" in namespace "${V.namespace}"?`))try{await De.deleteStatefulSet(V.name,V.namespace),qe(`StatefulSet ${V.name} deleted successfully`,"success"),C()}catch(Y){console.error("Failed to delete StatefulSet:",Y),qe(`Failed to delete StatefulSet: ${Y instanceof Error?Y.message:"Unknown error"}`,"error")}},X=V=>{g(V);const Y=V.ready?.split("/")||["1","1"];w(parseInt(Y[1])||1),c(!0)};return(()=>{var V=iu(),Y=V.firstChild,K=Y.firstChild,ce=K.firstChild;ce.nextSibling;var E=K.nextSibling,N=E.firstChild,U=Y.nextSibling,W=U.firstChild,q=W.firstChild,G=q.nextSibling,Q=W.nextSibling,oe=Q.firstChild,ge=oe.nextSibling,Ce=Q.nextSibling,Z=Ce.firstChild,te=Z.nextSibling,re=Ce.nextSibling,me=re.firstChild,ye=me.nextSibling,we=re.nextSibling,ke=we.nextSibling,Se=ke.nextSibling,$e=U.nextSibling;return N.$$click=he=>{const ue=he.currentTarget;ue.classList.add("refreshing"),setTimeout(()=>ue.classList.remove("refreshing"),500),C()},p(G,()=>L().total),p(ge,()=>L().ready),p(te,()=>L().partial),p(ye,()=>L().unavailable),ke.$$input=he=>{t(he.currentTarget.value),s(1)},Se.addEventListener("change",he=>{u(parseInt(he.currentTarget.value)),s(1)}),p($e,T(ee,{get when(){return!x.loading},get fallback(){return(()=>{var he=nu(),ue=he.firstChild;return ue.nextSibling,he})()},get children(){return[(()=>{var he=eu(),ue=he.firstChild,le=ue.firstChild,ie=le.firstChild,ae=ie.firstChild,_e=ae.firstChild;_e.firstChild;var se=ae.nextSibling,fe=se.firstChild;fe.firstChild;var de=se.nextSibling,pe=de.firstChild;pe.firstChild;var Ee=de.nextSibling,be=Ee.nextSibling,Pe=be.firstChild;Pe.firstChild;var Ne=le.nextSibling;return ae.$$click=()=>F("name"),p(_e,T($,{field:"name"}),null),se.$$click=()=>F("namespace"),p(fe,T($,{field:"namespace"}),null),de.$$click=()=>F("ready"),p(pe,T($,{field:"ready"}),null),be.$$click=()=>F("age"),p(Pe,T($,{field:"age"}),null),p(Ne,T(Ve,{get each(){return P()},get fallback(){return(()=>{var Ie=lu();return Ie.firstChild,Ie})()},children:Ie=>(()=>{var Ae=ou(),Re=Ae.firstChild,je=Re.firstChild,Te=Re.nextSibling,He=Te.nextSibling,ze=He.firstChild,Xe=He.nextSibling,Me=Xe.nextSibling,We=Me.nextSibling;return je.$$click=()=>{g(Ie),a(!0)},p(je,(()=>{var Ge=Fe(()=>Ie.name.length>40);return()=>Ge()?Ie.name.slice(0,37)+"...":Ie.name})()),p(Te,()=>Ie.namespace),p(ze,()=>Ie.ready),p(Xe,()=>Ie.replicas),p(Me,()=>Ie.age),p(We,T(sr,{get actions(){return[{label:"Scale",icon:"scale",onClick:()=>X(Ie)},{label:"Restart",icon:"restart",onClick:()=>B(Ie),loading:k()===`${Ie.namespace}/${Ie.name}`},{label:"View YAML",icon:"yaml",onClick:()=>{g(Ie),b(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{g(Ie),y(!0)}},{label:"Delete",icon:"delete",onClick:()=>z(Ie),variant:"danger",divider:!0}]}})),ne(()=>Ue(ze,`badge ${Ie.ready.split("/")[0]===Ie.ready.split("/")[1]?"badge-success":"badge-warning"}`)),Ae})()})),he})(),T(ee,{get when(){return M()>1},get children(){var he=tu(),ue=he.firstChild,le=ue.firstChild,ie=le.nextSibling,ae=ie.nextSibling,_e=ae.nextSibling,se=_e.nextSibling,fe=se.nextSibling;fe.nextSibling;var de=ue.nextSibling,pe=de.firstChild,Ee=pe.nextSibling,be=Ee.nextSibling,Pe=be.firstChild,Ne=Pe.nextSibling;Ne.nextSibling;var Ie=be.nextSibling,Ae=Ie.nextSibling;return p(ue,()=>(h()-1)*i()+1,ie),p(ue,()=>Math.min(h()*i(),j().length),_e),p(ue,()=>j().length,fe),pe.$$click=()=>s(1),Ee.$$click=()=>s(Re=>Math.max(1,Re-1)),p(be,h,Ne),p(be,M,null),Ie.$$click=()=>s(Re=>Math.min(M(),Re+1)),Ae.$$click=()=>s(M()),ne(Re=>{var je=h()===1,Te=h()===1,He=h()===M(),ze=h()===M();return je!==Re.e&&(pe.disabled=Re.e=je),Te!==Re.t&&(Ee.disabled=Re.t=Te),He!==Re.a&&(Ie.disabled=Re.a=He),ze!==Re.o&&(Ae.disabled=Re.o=ze),Re},{e:void 0,t:void 0,a:void 0,o:void 0}),he}})]}})),p(V,T(st,{get isOpen(){return v()},onClose:()=>b(!1),get title(){return`YAML: ${f()?.name}`},size:"xl",get children(){return T(ee,{get when(){return!I.loading},get fallback(){return rl()},get children(){return T(rr,{get yaml(){return I()||""},get title(){return f()?.name}})}})}}),null),p(V,T(st,{get isOpen(){return S()},onClose:()=>y(!1),get title(){return`Edit YAML: ${f()?.name}`},size:"xl",get children(){return T(ee,{get when(){return!I.loading},get fallback(){return rl()},get children(){var he=ru();return p(he,T(wr,{get yaml(){return I()||""},get title(){return f()?.name},onSave:R,onCancel:()=>y(!1)})),he}})}}),null),p(V,T(Jt,{get isOpen(){return l()},onClose:()=>a(!1),resourceType:"statefulset",get name(){return f()?.name||""},get namespace(){return f()?.namespace}}),null),p(V,T(st,{get isOpen(){return o()},onClose:()=>c(!1),get title(){return`Scale: ${f()?.name}`},size:"sm",get children(){var he=su(),ue=he.firstChild,le=ue.firstChild,ie=le.nextSibling,ae=ue.nextSibling,_e=ae.firstChild,se=_e.nextSibling;return ie.$$input=fe=>w(parseInt(fe.currentTarget.value)||0),_e.$$click=()=>c(!1),se.$$click=H,ne(()=>ie.value=m()),he}}),null),ne(()=>ke.value=e()),ne(()=>Se.value=i()),V})()};lt(["click","input"]);var cu=O('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>â²</span><span>â¼'),du=O('<div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class=whitespace-nowrap>Desired</th><th class=whitespace-nowrap>Current</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Ready </div></th><th class=whitespace-nowrap>Available</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),hu=O('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:#161b22><div style=color:#8b949e>Showing <!> - <!> of <!> DaemonSets</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>â Prev</button><span class="px-3 py-1"style=color:#c9d1d9>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Next â</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Last'),uu=O("<div style=height:70vh>"),fu=O('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>DaemonSets</h1><p style=color:var(--text-secondary)>Node-level workloads running on all or selected nodes</p></div><div class="flex items-center gap-3"><button class=icon-btn title="Refresh DaemonSets"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Ready</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--warning-color)"><span class=text-sm style=color:var(--text-secondary)>Partial</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--error-color)"><span class=text-sm style=color:var(--text-secondary)>Unavailable</span><span class="text-xl font-bold"style=color:var(--error-color)></span></div><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class="overflow-hidden rounded-lg"style=background:#0d1117>'),gu=O('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading DaemonSets...'),pu=O('<tr><td colspan=8 class="text-center py-8"style=color:var(--text-muted)>No DaemonSets found'),vu=O('<tr><td><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td></td><td></td><td></td><td><span></span></td><td></td><td></td><td>'),sl=O('<div class="spinner mx-auto">');const mu=()=>{const[e,t]=J(""),[r,n]=J("name"),[d,_]=J("asc"),[h,s]=J(1),[i,u]=J(20),[f,g]=J(null),[v,b]=J(!1),[S,y]=J(!1),[l,a]=J(!1),[o,{refetch:c}]=Ke(tt,De.getDaemonSets),[m]=Ke(()=>(v()||S())&&f()?{name:f().name,ns:f().namespace}:null,async P=>P&&(await De.getDaemonSetYAML(P.name,P.ns)).yaml||""),w=async P=>{const L=f();if(L)try{await De.updateDaemonSet(L.name,L.namespace,P),qe(`â DaemonSet ${L.name} updated successfully`,"success"),y(!1),setTimeout(()=>c(),500),setTimeout(()=>c(),2e3)}catch(F){const $=F instanceof Error?F.message:"Unknown error";throw qe(`â Failed to update daemonset: ${$}`,"error"),F}},k=P=>{if(!P)return 0;let L=0;const F=P.match(/(\d+)d/),$=P.match(/(\d+)h/),B=P.match(/(\d+)m/);return F&&(L+=parseInt(F[1])*24*60),$&&(L+=parseInt($[1])*60),B&&(L+=parseInt(B[1])),L},A=Oe(()=>{let P=o()||[];const L=e().toLowerCase();L&&(P=P.filter(B=>B.name.toLowerCase().includes(L)||B.namespace.toLowerCase().includes(L)));const F=r(),$=d();return P=[...P].sort((B,H)=>{let z=0;switch(F){case"name":z=B.name.localeCompare(H.name);break;case"namespace":z=B.namespace.localeCompare(H.namespace);break;case"ready":z=B.ready-H.ready;break;case"age":z=k(B.age)-k(H.age);break}return $==="asc"?z:-z}),P}),x=Oe(()=>Math.ceil(A().length/i())),C=Oe(()=>{const P=(h()-1)*i();return A().slice(P,P+i())}),I=Oe(()=>{const P=o()||[];return{total:P.length,ready:P.filter(L=>L.ready===L.desired&&L.ready>0).length,partial:P.filter(L=>L.ready!==L.desired&&L.ready>0).length,unavailable:P.filter(L=>L.ready===0).length}}),R=P=>{r()===P?_(L=>L==="asc"?"desc":"asc"):(n(P),_("asc")),s(1)},D=P=>(()=>{var L=cu(),F=L.firstChild,$=F.nextSibling;return ne(B=>{var H=r()===P.field&&d()==="asc"?"var(--accent-primary)":"var(--text-muted)",z=r()===P.field&&d()==="desc"?"var(--accent-primary)":"var(--text-muted)";return H!==B.e&&ve(F,"color",B.e=H),z!==B.t&&ve($,"color",B.t=z),B},{e:void 0,t:void 0}),L})(),j=async P=>{try{await De.restartDaemonSet(P.name,P.namespace),c()}catch(L){console.error("Failed to restart DaemonSet:",L)}},M=async P=>{if(confirm(`Are you sure you want to delete DaemonSet "${P.name}" in namespace "${P.namespace}"?`))try{await De.deleteDaemonSet(P.name,P.namespace),qe(`DaemonSet ${P.name} deleted successfully`,"success"),c()}catch(L){console.error("Failed to delete DaemonSet:",L),qe(`Failed to delete DaemonSet: ${L instanceof Error?L.message:"Unknown error"}`,"error")}};return(()=>{var P=fu(),L=P.firstChild,F=L.firstChild,$=F.firstChild;$.nextSibling;var B=F.nextSibling,H=B.firstChild,z=L.nextSibling,X=z.firstChild,V=X.firstChild,Y=V.nextSibling,K=X.nextSibling,ce=K.firstChild,E=ce.nextSibling,N=K.nextSibling,U=N.firstChild,W=U.nextSibling,q=N.nextSibling,G=q.firstChild,Q=G.nextSibling,oe=q.nextSibling,ge=oe.nextSibling,Ce=ge.nextSibling,Z=z.nextSibling;return H.$$click=te=>{const re=te.currentTarget;re.classList.add("refreshing"),setTimeout(()=>re.classList.remove("refreshing"),500),c()},p(Y,()=>I().total),p(E,()=>I().ready),p(W,()=>I().partial),p(Q,()=>I().unavailable),ge.$$input=te=>{t(te.currentTarget.value),s(1)},Ce.addEventListener("change",te=>{u(parseInt(te.currentTarget.value)),s(1)}),p(Z,T(ee,{get when(){return!o.loading},get fallback(){return(()=>{var te=gu(),re=te.firstChild;return re.nextSibling,te})()},get children(){return[(()=>{var te=du(),re=te.firstChild,me=re.firstChild,ye=me.firstChild,we=ye.firstChild,ke=we.firstChild;ke.firstChild;var Se=we.nextSibling,$e=Se.firstChild;$e.firstChild;var he=Se.nextSibling,ue=he.nextSibling,le=ue.nextSibling,ie=le.firstChild;ie.firstChild;var ae=le.nextSibling,_e=ae.nextSibling,se=_e.firstChild;se.firstChild;var fe=me.nextSibling;return we.$$click=()=>R("name"),p(ke,T(D,{field:"name"}),null),Se.$$click=()=>R("namespace"),p($e,T(D,{field:"namespace"}),null),le.$$click=()=>R("ready"),p(ie,T(D,{field:"ready"}),null),_e.$$click=()=>R("age"),p(se,T(D,{field:"age"}),null),p(fe,T(Ve,{get each(){return C()},get fallback(){return(()=>{var de=pu();return de.firstChild,de})()},children:de=>(()=>{var pe=vu(),Ee=pe.firstChild,be=Ee.firstChild,Pe=Ee.nextSibling,Ne=Pe.nextSibling,Ie=Ne.nextSibling,Ae=Ie.nextSibling,Re=Ae.firstChild,je=Ae.nextSibling,Te=je.nextSibling,He=Te.nextSibling;return be.$$click=()=>{g(de),a(!0)},p(be,(()=>{var ze=Fe(()=>de.name.length>40);return()=>ze()?de.name.slice(0,37)+"...":de.name})()),p(Pe,()=>de.namespace),p(Ne,()=>de.desired),p(Ie,()=>de.current),p(Re,()=>de.ready),p(je,()=>de.available),p(Te,()=>de.age),p(He,T(sr,{actions:[{label:"Restart",icon:"restart",onClick:()=>j(de)},{label:"View YAML",icon:"yaml",onClick:()=>{g(de),b(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{g(de),y(!0)}},{label:"Delete",icon:"delete",onClick:()=>M(de),variant:"danger",divider:!0}]})),ne(()=>Ue(Re,`badge ${de.ready===de.desired?"badge-success":"badge-warning"}`)),pe})()})),te})(),T(ee,{get when(){return x()>1},get children(){var te=hu(),re=te.firstChild,me=re.firstChild,ye=me.nextSibling,we=ye.nextSibling,ke=we.nextSibling,Se=ke.nextSibling,$e=Se.nextSibling;$e.nextSibling;var he=re.nextSibling,ue=he.firstChild,le=ue.nextSibling,ie=le.nextSibling,ae=ie.firstChild,_e=ae.nextSibling;_e.nextSibling;var se=ie.nextSibling,fe=se.nextSibling;return p(re,()=>(h()-1)*i()+1,ye),p(re,()=>Math.min(h()*i(),A().length),ke),p(re,()=>A().length,$e),ue.$$click=()=>s(1),le.$$click=()=>s(de=>Math.max(1,de-1)),p(ie,h,_e),p(ie,x,null),se.$$click=()=>s(de=>Math.min(x(),de+1)),fe.$$click=()=>s(x()),ne(de=>{var pe=h()===1,Ee=h()===1,be=h()===x(),Pe=h()===x();return pe!==de.e&&(ue.disabled=de.e=pe),Ee!==de.t&&(le.disabled=de.t=Ee),be!==de.a&&(se.disabled=de.a=be),Pe!==de.o&&(fe.disabled=de.o=Pe),de},{e:void 0,t:void 0,a:void 0,o:void 0}),te}})]}})),p(P,T(st,{get isOpen(){return v()},onClose:()=>b(!1),get title(){return`YAML: ${f()?.name}`},size:"xl",get children(){return T(ee,{get when(){return!m.loading},get fallback(){return sl()},get children(){return T(rr,{get yaml(){return m()||""},get title(){return f()?.name}})}})}}),null),p(P,T(st,{get isOpen(){return S()},onClose:()=>y(!1),get title(){return`Edit YAML: ${f()?.name}`},size:"xl",get children(){return T(ee,{get when(){return!m.loading},get fallback(){return sl()},get children(){var te=uu();return p(te,T(wr,{get yaml(){return m()||""},get title(){return f()?.name},onSave:w,onCancel:()=>y(!1)})),te}})}}),null),p(P,T(Jt,{get isOpen(){return l()},onClose:()=>a(!1),resourceType:"daemonset",get name(){return f()?.name||""},get namespace(){return f()?.namespace}}),null),ne(()=>ge.value=e()),ne(()=>Ce.value=i()),P})()};lt(["click","input"]);var _u=O('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>â²</span><span>â¼'),bu=O('<div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class=whitespace-nowrap>Schedule</th><th class=whitespace-nowrap>Suspend</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Active </div></th><th class=whitespace-nowrap>Last Schedule</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),yu=O('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:#161b22><div style=color:#8b949e>Showing <!> - <!> of <!> CronJobs</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>â Prev</button><span class="px-3 py-1"style=color:#c9d1d9>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Next â</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Last'),xu=O("<div style=height:70vh>"),wu=O('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>CronJobs</h1><p style=color:var(--text-secondary)>Scheduled job management</p></div><div class="flex items-center gap-3"><button class=icon-btn title="Refresh CronJobs"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Active</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--warning-color)"><span class=text-sm style=color:var(--text-secondary)>Suspended</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid #3b82f6"><span class=text-sm style=color:var(--text-secondary)>Scheduled</span><span class="text-xl font-bold"style=color:#3b82f6></span></div><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class="overflow-hidden rounded-lg"style=background:#0d1117>'),Su=O('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading CronJobs...'),$u=O('<tr><td colspan=8 class="text-center py-8"style=color:var(--text-muted)>No CronJobs found'),Cu=O('<tr><td><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td></td><td><code class="px-2 py-1 rounded text-xs"style=background:var(--bg-tertiary)></code></td><td><span></span></td><td></td><td></td><td></td><td>'),il=O('<div class="spinner mx-auto">');const ku=()=>{const[e,t]=J(""),[r,n]=J("name"),[d,_]=J("asc"),[h,s]=J(1),[i,u]=J(20),[f,g]=J(null),[v,b]=J(!1),[S,y]=J(!1),[l,a]=J(!1),[o,{refetch:c}]=Ke(tt,De.getCronJobs),[m]=Ke(()=>(v()||S())&&f()?{name:f().name,ns:f().namespace}:null,async L=>L&&(await De.getCronJobYAML(L.name,L.ns)).yaml||""),w=async L=>{const F=f();if(F)try{await De.updateCronJob(F.name,F.namespace,L),qe(`â CronJob ${F.name} updated successfully`,"success"),y(!1),setTimeout(()=>c(),500),setTimeout(()=>c(),2e3)}catch($){const B=$ instanceof Error?$.message:"Unknown error";throw qe(`â Failed to update cronjob: ${B}`,"error"),$}},k=L=>{if(!L)return 0;let F=0;const $=L.match(/(\d+)d/),B=L.match(/(\d+)h/),H=L.match(/(\d+)m/);return $&&(F+=parseInt($[1])*24*60),B&&(F+=parseInt(B[1])*60),H&&(F+=parseInt(H[1])),F},A=Oe(()=>{let L=o()||[];const F=e().toLowerCase();F&&(L=L.filter(H=>H.name.toLowerCase().includes(F)||H.namespace.toLowerCase().includes(F)));const $=r(),B=d();return L=[...L].sort((H,z)=>{let X=0;switch($){case"name":X=H.name.localeCompare(z.name);break;case"namespace":X=H.namespace.localeCompare(z.namespace);break;case"active":X=H.active-z.active;break;case"age":X=k(H.age)-k(z.age);break}return B==="asc"?X:-X}),L}),x=Oe(()=>Math.ceil(A().length/i())),C=Oe(()=>{const L=(h()-1)*i();return A().slice(L,L+i())}),I=Oe(()=>{const L=o()||[];return{total:L.length,active:L.filter(F=>F.active>0).length,suspended:L.filter(F=>F.suspend).length,scheduled:L.filter(F=>!F.suspend&&F.active===0).length}}),R=L=>{r()===L?_(F=>F==="asc"?"desc":"asc"):(n(L),_("asc")),s(1)},D=L=>(()=>{var F=_u(),$=F.firstChild,B=$.nextSibling;return ne(H=>{var z=r()===L.field&&d()==="asc"?"var(--accent-primary)":"var(--text-muted)",X=r()===L.field&&d()==="desc"?"var(--accent-primary)":"var(--text-muted)";return z!==H.e&&ve($,"color",H.e=z),X!==H.t&&ve(B,"color",H.t=X),H},{e:void 0,t:void 0}),F})(),j=async L=>{try{await De.triggerCronJob(L.name,L.namespace),c()}catch(F){console.error("Failed to trigger CronJob:",F)}},M=async L=>{try{await De.suspendCronJob(L.name,L.namespace,!L.suspend),c()}catch(F){console.error("Failed to toggle suspend CronJob:",F)}},P=async L=>{if(confirm(`Are you sure you want to delete CronJob "${L.name}" in namespace "${L.namespace}"?`))try{await De.deleteCronJob(L.name,L.namespace),qe(`CronJob ${L.name} deleted successfully`,"success"),c()}catch(F){console.error("Failed to delete CronJob:",F),qe(`Failed to delete CronJob: ${F instanceof Error?F.message:"Unknown error"}`,"error")}};return(()=>{var L=wu(),F=L.firstChild,$=F.firstChild,B=$.firstChild;B.nextSibling;var H=$.nextSibling,z=H.firstChild,X=F.nextSibling,V=X.firstChild,Y=V.firstChild,K=Y.nextSibling,ce=V.nextSibling,E=ce.firstChild,N=E.nextSibling,U=ce.nextSibling,W=U.firstChild,q=W.nextSibling,G=U.nextSibling,Q=G.firstChild,oe=Q.nextSibling,ge=G.nextSibling,Ce=ge.nextSibling,Z=Ce.nextSibling,te=X.nextSibling;return z.$$click=re=>{const me=re.currentTarget;me.classList.add("refreshing"),setTimeout(()=>me.classList.remove("refreshing"),500),c()},p(K,()=>I().total),p(N,()=>I().active),p(q,()=>I().suspended),p(oe,()=>I().scheduled),Ce.$$input=re=>{t(re.currentTarget.value),s(1)},Z.addEventListener("change",re=>{u(parseInt(re.currentTarget.value)),s(1)}),p(te,T(ee,{get when(){return!o.loading},get fallback(){return(()=>{var re=Su(),me=re.firstChild;return me.nextSibling,re})()},get children(){return[(()=>{var re=bu(),me=re.firstChild,ye=me.firstChild,we=ye.firstChild,ke=we.firstChild,Se=ke.firstChild;Se.firstChild;var $e=ke.nextSibling,he=$e.firstChild;he.firstChild;var ue=$e.nextSibling,le=ue.nextSibling,ie=le.nextSibling,ae=ie.firstChild;ae.firstChild;var _e=ie.nextSibling,se=_e.nextSibling,fe=se.firstChild;fe.firstChild;var de=ye.nextSibling;return ke.$$click=()=>R("name"),p(Se,T(D,{field:"name"}),null),$e.$$click=()=>R("namespace"),p(he,T(D,{field:"namespace"}),null),ie.$$click=()=>R("active"),p(ae,T(D,{field:"active"}),null),se.$$click=()=>R("age"),p(fe,T(D,{field:"age"}),null),p(de,T(Ve,{get each(){return C()},get fallback(){return(()=>{var pe=$u();return pe.firstChild,pe})()},children:pe=>(()=>{var Ee=Cu(),be=Ee.firstChild,Pe=be.firstChild,Ne=be.nextSibling,Ie=Ne.nextSibling,Ae=Ie.firstChild,Re=Ie.nextSibling,je=Re.firstChild,Te=Re.nextSibling,He=Te.nextSibling,ze=He.nextSibling,Xe=ze.nextSibling;return Pe.$$click=()=>{g(pe),a(!0)},p(Pe,(()=>{var Me=Fe(()=>pe.name.length>40);return()=>Me()?pe.name.slice(0,37)+"...":pe.name})()),p(Ne,()=>pe.namespace),p(Ae,()=>pe.schedule),p(je,()=>pe.suspend?"Yes":"No"),p(Te,()=>pe.active),p(He,()=>pe.lastSchedule||"Never"),p(ze,()=>pe.age),p(Xe,T(sr,{get actions(){return[{label:"Trigger",icon:"restart",onClick:()=>j(pe)},{label:pe.suspend?"Resume":"Suspend",icon:"restart",onClick:()=>M(pe)},{label:"View YAML",icon:"yaml",onClick:()=>{g(pe),b(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{g(pe),y(!0)}},{label:"Delete",icon:"delete",onClick:()=>P(pe),variant:"danger",divider:!0}]}})),ne(()=>Ue(je,`badge ${pe.suspend?"badge-warning":"badge-success"}`)),Ee})()})),re})(),T(ee,{get when(){return x()>1},get children(){var re=yu(),me=re.firstChild,ye=me.firstChild,we=ye.nextSibling,ke=we.nextSibling,Se=ke.nextSibling,$e=Se.nextSibling,he=$e.nextSibling;he.nextSibling;var ue=me.nextSibling,le=ue.firstChild,ie=le.nextSibling,ae=ie.nextSibling,_e=ae.firstChild,se=_e.nextSibling;se.nextSibling;var fe=ae.nextSibling,de=fe.nextSibling;return p(me,()=>(h()-1)*i()+1,we),p(me,()=>Math.min(h()*i(),A().length),Se),p(me,()=>A().length,he),le.$$click=()=>s(1),ie.$$click=()=>s(pe=>Math.max(1,pe-1)),p(ae,h,se),p(ae,x,null),fe.$$click=()=>s(pe=>Math.min(x(),pe+1)),de.$$click=()=>s(x()),ne(pe=>{var Ee=h()===1,be=h()===1,Pe=h()===x(),Ne=h()===x();return Ee!==pe.e&&(le.disabled=pe.e=Ee),be!==pe.t&&(ie.disabled=pe.t=be),Pe!==pe.a&&(fe.disabled=pe.a=Pe),Ne!==pe.o&&(de.disabled=pe.o=Ne),pe},{e:void 0,t:void 0,a:void 0,o:void 0}),re}})]}})),p(L,T(st,{get isOpen(){return v()},onClose:()=>b(!1),get title(){return`YAML: ${f()?.name}`},size:"xl",get children(){return T(ee,{get when(){return!m.loading},get fallback(){return il()},get children(){return T(rr,{get yaml(){return m()||""},get title(){return f()?.name}})}})}}),null),p(L,T(st,{get isOpen(){return S()},onClose:()=>y(!1),get title(){return`Edit YAML: ${f()?.name}`},size:"xl",get children(){return T(ee,{get when(){return!m.loading},get fallback(){return il()},get children(){var re=xu();return p(re,T(wr,{get yaml(){return m()||""},get title(){return f()?.name},onSave:w,onCancel:()=>y(!1)})),re}})}}),null),p(L,T(Jt,{get isOpen(){return l()},onClose:()=>a(!1),resourceType:"cronjob",get name(){return f()?.name||""},get namespace(){return f()?.namespace}}),null),ne(()=>Ce.value=e()),ne(()=>Z.value=i()),L})()};lt(["click","input"]);var Eu=O('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>â²</span><span>â¼'),Au=O('<div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class=whitespace-nowrap>Completions</th><th class=whitespace-nowrap>Duration</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Status </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),Lu=O('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:#161b22><div style=color:#8b949e>Showing <!> - <!> of <!> jobs</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>â Prev</button><span class="px-3 py-1"style=color:#c9d1d9>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Next â</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Last'),Mu=O("<div style=height:70vh>"),Du=O('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Jobs</h1><p style=color:var(--text-secondary)>One-time task execution</p></div><div class="flex items-center gap-3"><button class=icon-btn title="Refresh Jobs"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Complete</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid #3b82f6"><span class=text-sm style=color:var(--text-secondary)>Running</span><span class="text-xl font-bold"style=color:#3b82f6></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--error-color)"><span class=text-sm style=color:var(--text-secondary)>Failed</span><span class="text-xl font-bold"style=color:var(--error-color)></span></div><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class="overflow-hidden rounded-lg"style=background:#0d1117>'),Ru=O('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading jobs...'),Tu=O('<tr><td colspan=7 class="text-center py-8"style=color:var(--text-muted)>No jobs found'),Pu=O('<tr><td><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td></td><td></td><td></td><td></td><td><span></span></td><td>'),nl=O('<div class="spinner mx-auto">');const Iu=()=>{const[e,t]=J(""),[r,n]=J("name"),[d,_]=J("asc"),[h,s]=J(1),[i,u]=J(20),[f,g]=J(null),[v,b]=J(!1),[S,y]=J(!1),[l,a]=J(!1),[o,{refetch:c}]=Ke(tt,De.getJobs),[m]=Ke(()=>(v()||S())&&f()?{name:f().name,ns:f().namespace}:null,async M=>M&&(await De.getJobYAML(M.name,M.ns)).yaml||""),w=async M=>{const P=f();if(P)try{await De.updateJob(P.name,P.namespace,M),qe(`â Job ${P.name} updated successfully`,"success"),y(!1),setTimeout(()=>c(),500),setTimeout(()=>c(),2e3)}catch(L){const F=L instanceof Error?L.message:"Unknown error";throw qe(`â Failed to update job: ${F}`,"error"),L}},k=M=>{if(!M)return 0;let P=0;const L=M.match(/(\d+)d/),F=M.match(/(\d+)h/),$=M.match(/(\d+)m/);return L&&(P+=parseInt(L[1])*24*60),F&&(P+=parseInt(F[1])*60),$&&(P+=parseInt($[1])),P},A=Oe(()=>{let M=o()||[];const P=e().toLowerCase();P&&(M=M.filter($=>$.name.toLowerCase().includes(P)||$.namespace.toLowerCase().includes(P)));const L=r(),F=d();return M=[...M].sort(($,B)=>{let H=0;switch(L){case"name":H=$.name.localeCompare(B.name);break;case"namespace":H=$.namespace.localeCompare(B.namespace);break;case"status":H=$.status.localeCompare(B.status);break;case"age":H=k($.age)-k(B.age);break}return F==="asc"?H:-H}),M}),x=Oe(()=>Math.ceil(A().length/i())),C=Oe(()=>{const M=(h()-1)*i();return A().slice(M,M+i())}),I=Oe(()=>{const M=o()||[];return{total:M.length,complete:M.filter(P=>P.status==="Complete").length,running:M.filter(P=>P.status==="Running"||P.status==="Active").length,failed:M.filter(P=>P.status==="Failed").length}}),R=M=>{r()===M?_(P=>P==="asc"?"desc":"asc"):(n(M),_("asc")),s(1)},D=M=>(()=>{var P=Eu(),L=P.firstChild,F=L.nextSibling;return ne($=>{var B=r()===M.field&&d()==="asc"?"var(--accent-primary)":"var(--text-muted)",H=r()===M.field&&d()==="desc"?"var(--accent-primary)":"var(--text-muted)";return B!==$.e&&ve(L,"color",$.e=B),H!==$.t&&ve(F,"color",$.t=H),$},{e:void 0,t:void 0}),P})(),j=async M=>{if(confirm(`Are you sure you want to delete job "${M.name}" in namespace "${M.namespace}"?`))try{await De.deleteJob(M.name,M.namespace),qe(`Job ${M.name} deleted successfully`,"success"),c()}catch(P){console.error("Failed to delete job:",P),qe(`Failed to delete job: ${P instanceof Error?P.message:"Unknown error"}`,"error")}};return(()=>{var M=Du(),P=M.firstChild,L=P.firstChild,F=L.firstChild;F.nextSibling;var $=L.nextSibling,B=$.firstChild,H=P.nextSibling,z=H.firstChild,X=z.firstChild,V=X.nextSibling,Y=z.nextSibling,K=Y.firstChild,ce=K.nextSibling,E=Y.nextSibling,N=E.firstChild,U=N.nextSibling,W=E.nextSibling,q=W.firstChild,G=q.nextSibling,Q=W.nextSibling,oe=Q.nextSibling,ge=oe.nextSibling,Ce=H.nextSibling;return B.$$click=Z=>{const te=Z.currentTarget;te.classList.add("refreshing"),setTimeout(()=>te.classList.remove("refreshing"),500),c()},p(V,()=>I().total),p(ce,()=>I().complete),p(U,()=>I().running),p(G,()=>I().failed),oe.$$input=Z=>{t(Z.currentTarget.value),s(1)},ge.addEventListener("change",Z=>{u(parseInt(Z.currentTarget.value)),s(1)}),p(Ce,T(ee,{get when(){return!o.loading},get fallback(){return(()=>{var Z=Ru(),te=Z.firstChild;return te.nextSibling,Z})()},get children(){return[(()=>{var Z=Au(),te=Z.firstChild,re=te.firstChild,me=re.firstChild,ye=me.firstChild,we=ye.firstChild;we.firstChild;var ke=ye.nextSibling,Se=ke.firstChild;Se.firstChild;var $e=ke.nextSibling,he=$e.nextSibling,ue=he.nextSibling,le=ue.firstChild;le.firstChild;var ie=ue.nextSibling,ae=ie.firstChild;ae.firstChild;var _e=re.nextSibling;return ye.$$click=()=>R("name"),p(we,T(D,{field:"name"}),null),ke.$$click=()=>R("namespace"),p(Se,T(D,{field:"namespace"}),null),ue.$$click=()=>R("age"),p(le,T(D,{field:"age"}),null),ie.$$click=()=>R("status"),p(ae,T(D,{field:"status"}),null),p(_e,T(Ve,{get each(){return C()},get fallback(){return(()=>{var se=Tu();return se.firstChild,se})()},children:se=>(()=>{var fe=Pu(),de=fe.firstChild,pe=de.firstChild,Ee=de.nextSibling,be=Ee.nextSibling,Pe=be.nextSibling,Ne=Pe.nextSibling,Ie=Ne.nextSibling,Ae=Ie.firstChild,Re=Ie.nextSibling;return pe.$$click=()=>{g(se),a(!0)},p(pe,(()=>{var je=Fe(()=>se.name.length>40);return()=>je()?se.name.slice(0,37)+"...":se.name})()),p(Ee,()=>se.namespace),p(be,()=>se.completions),p(Pe,()=>se.duration||"-"),p(Ne,()=>se.age),p(Ae,()=>se.status),p(Re,T(sr,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{g(se),b(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{g(se),y(!0)}},{label:"Delete",icon:"delete",onClick:()=>j(se),variant:"danger",divider:!0}]})),ne(()=>Ue(Ae,`badge ${se.status==="Complete"?"badge-success":se.status==="Failed"?"badge-error":"badge-warning"}`)),fe})()})),Z})(),T(ee,{get when(){return x()>1},get children(){var Z=Lu(),te=Z.firstChild,re=te.firstChild,me=re.nextSibling,ye=me.nextSibling,we=ye.nextSibling,ke=we.nextSibling,Se=ke.nextSibling;Se.nextSibling;var $e=te.nextSibling,he=$e.firstChild,ue=he.nextSibling,le=ue.nextSibling,ie=le.firstChild,ae=ie.nextSibling;ae.nextSibling;var _e=le.nextSibling,se=_e.nextSibling;return p(te,()=>(h()-1)*i()+1,me),p(te,()=>Math.min(h()*i(),A().length),we),p(te,()=>A().length,Se),he.$$click=()=>s(1),ue.$$click=()=>s(fe=>Math.max(1,fe-1)),p(le,h,ae),p(le,x,null),_e.$$click=()=>s(fe=>Math.min(x(),fe+1)),se.$$click=()=>s(x()),ne(fe=>{var de=h()===1,pe=h()===1,Ee=h()===x(),be=h()===x();return de!==fe.e&&(he.disabled=fe.e=de),pe!==fe.t&&(ue.disabled=fe.t=pe),Ee!==fe.a&&(_e.disabled=fe.a=Ee),be!==fe.o&&(se.disabled=fe.o=be),fe},{e:void 0,t:void 0,a:void 0,o:void 0}),Z}})]}})),p(M,T(st,{get isOpen(){return v()},onClose:()=>b(!1),get title(){return`YAML: ${f()?.name}`},size:"xl",get children(){return T(ee,{get when(){return!m.loading},get fallback(){return nl()},get children(){return T(rr,{get yaml(){return m()||""},get title(){return f()?.name}})}})}}),null),p(M,T(st,{get isOpen(){return S()},onClose:()=>y(!1),get title(){return`Edit YAML: ${f()?.name}`},size:"xl",get children(){return T(ee,{get when(){return!m.loading},get fallback(){return nl()},get children(){var Z=Mu();return p(Z,T(wr,{get yaml(){return m()||""},get title(){return f()?.name},onSave:w,onCancel:()=>y(!1)})),Z}})}}),null),p(M,T(Jt,{get isOpen(){return l()},onClose:()=>a(!1),resourceType:"job",get name(){return f()?.name||""},get namespace(){return f()?.namespace}}),null),ne(()=>oe.value=e()),ne(()=>ge.value=i()),M})()};lt(["click","input"]);var Bu=O('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>â²</span><span>â¼'),Ou=O('<div class="card p-4"><h3 class="font-semibold mb-3 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>Active Port Forwards</h3><div class="flex flex-wrap gap-2">'),Hu=O('<div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Type </div></th><th class=whitespace-nowrap>Cluster IP</th><th class=whitespace-nowrap>External IP</th><th class=whitespace-nowrap>Ports</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),Nu=O('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:#161b22><div style=color:#8b949e>Showing <!> - <!> of <!> services</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>â Prev</button><span class="px-3 py-1"style=color:#c9d1d9>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Next â</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Last'),zu=O("<div style=height:70vh>"),Fu=O('<div class=space-y-4><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Local Port</label><input type=number min=1024 max=65535 class="w-full px-4 py-2 rounded-lg"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Remote Port</label><input type=number min=1 max=65535 class="w-full px-4 py-2 rounded-lg"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div class="p-3 rounded-lg text-sm"style=background:var(--bg-tertiary);color:var(--text-muted)>This will forward <code>localhost:</code> to <code>:</code></div><div class="flex gap-2"><button class="btn-secondary flex-1">Cancel</button><button class="btn-primary flex-1">Start'),ju=O('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Services</h1><p style=color:var(--text-secondary)>Network services and load balancers</p></div><div class="flex items-center gap-3"><button class=icon-btn title="Refresh Services"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>ClusterIP</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--warning-color)"><span class=text-sm style=color:var(--text-secondary)>NodePort</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid #3b82f6"><span class=text-sm style=color:var(--text-secondary)>LoadBalancer</span><span class="text-xl font-bold"style=color:#3b82f6></span></div><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class="overflow-hidden rounded-lg"style=background:#0d1117>'),Uu=O('<div class="flex items-center gap-2 px-3 py-2 rounded-lg"style=background:var(--bg-tertiary)><span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span><span style=color:var(--text-primary)></span><span style=color:var(--text-muted)>localhost:<!> â </span><a target=_blank class="text-xs px-2 py-1 rounded"style=background:var(--accent-primary);color:white>Open</a><button class="text-red-400 hover:text-red-300"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12">'),Vu=O('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading services...'),Wu=O('<tr><td colspan=8 class="text-center py-8"style=color:var(--text-muted)>No services found'),qu=O('<tr><td><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td></td><td><span></span></td><td class="font-mono text-sm"></td><td class="font-mono text-sm"></td><td class=text-sm></td><td></td><td>'),ll=O('<div class="spinner mx-auto">');const Ku=()=>{const[e,t]=J(""),[r,n]=J("name"),[d,_]=J("asc"),[h,s]=J(1),[i,u]=J(20),[f,g]=J(null),[v,b]=J(!1),[S,y]=J(!1),[l,a]=J(!1),[o,c]=J(!1),[m,w]=J(8080),[k,A]=J(80),[x,{refetch:C}]=Ke(tt,De.getServices),[I,{refetch:R}]=Ke(De.listPortForwards),[D]=Ke(()=>(v()||S())&&f()?{name:f().name,ns:f().namespace}:null,async K=>K&&(await De.getServiceYAML(K.name,K.ns)).yaml||""),j=async K=>{const ce=f();if(ce)try{await De.updateService(ce.name,ce.namespace,K),qe(`â Service ${ce.name} updated successfully`,"success"),y(!1),setTimeout(()=>C(),500),setTimeout(()=>C(),2e3)}catch(E){const N=E instanceof Error?E.message:"Unknown error";throw qe(`â Failed to update service: ${N}`,"error"),E}},M=K=>{if(!K)return 0;let ce=0;const E=K.match(/(\d+)d/),N=K.match(/(\d+)h/),U=K.match(/(\d+)m/);return E&&(ce+=parseInt(E[1])*24*60),N&&(ce+=parseInt(N[1])*60),U&&(ce+=parseInt(U[1])),ce},P=Oe(()=>{let K=x()||[];const ce=e().toLowerCase();ce&&(K=K.filter(U=>U.name.toLowerCase().includes(ce)||U.namespace.toLowerCase().includes(ce)||U.type.toLowerCase().includes(ce)));const E=r(),N=d();return K=[...K].sort((U,W)=>{let q=0;switch(E){case"name":q=U.name.localeCompare(W.name);break;case"namespace":q=U.namespace.localeCompare(W.namespace);break;case"type":q=U.type.localeCompare(W.type);break;case"age":q=M(U.age)-M(W.age);break}return N==="asc"?q:-q}),K}),L=Oe(()=>Math.ceil(P().length/i())),F=Oe(()=>{const K=(h()-1)*i();return P().slice(K,K+i())}),$=Oe(()=>{const K=x()||[];return{total:K.length,clusterIP:K.filter(ce=>ce.type==="ClusterIP").length,nodePort:K.filter(ce=>ce.type==="NodePort").length,loadBalancer:K.filter(ce=>ce.type==="LoadBalancer").length}}),B=K=>{r()===K?_(ce=>ce==="asc"?"desc":"asc"):(n(K),_("asc")),s(1)},H=K=>(()=>{var ce=Bu(),E=ce.firstChild,N=E.nextSibling;return ne(U=>{var W=r()===K.field&&d()==="asc"?"var(--accent-primary)":"var(--text-muted)",q=r()===K.field&&d()==="desc"?"var(--accent-primary)":"var(--text-muted)";return W!==U.e&&ve(E,"color",U.e=W),q!==U.t&&ve(N,"color",U.t=q),U},{e:void 0,t:void 0}),ce})(),z=async()=>{const K=f();if(K)try{await De.startPortForward("service",K.name,K.namespace,m(),k()),c(!1),R()}catch(ce){console.error("Failed to start port forward:",ce)}},X=async K=>{try{await De.stopPortForward(K.id),R()}catch(ce){console.error("Failed to stop port forward:",ce)}},V=K=>{g(K);const ce=K.ports?.match(/(\d+)/);ce&&A(parseInt(ce[1])),c(!0)},Y=async K=>{if(confirm(`Are you sure you want to delete service "${K.name}" in namespace "${K.namespace}"?`))try{await De.deleteService(K.name,K.namespace),qe(`Service ${K.name} deleted successfully`,"success"),C()}catch(ce){console.error("Failed to delete service:",ce),qe(`Failed to delete service: ${ce instanceof Error?ce.message:"Unknown error"}`,"error")}};return(()=>{var K=ju(),ce=K.firstChild,E=ce.firstChild,N=E.firstChild;N.nextSibling;var U=E.nextSibling,W=U.firstChild,q=ce.nextSibling,G=q.firstChild,Q=G.firstChild,oe=Q.nextSibling,ge=G.nextSibling,Ce=ge.firstChild,Z=Ce.nextSibling,te=ge.nextSibling,re=te.firstChild,me=re.nextSibling,ye=te.nextSibling,we=ye.firstChild,ke=we.nextSibling,Se=ye.nextSibling,$e=Se.nextSibling,he=$e.nextSibling,ue=q.nextSibling;return W.$$click=le=>{const ie=le.currentTarget;ie.classList.add("refreshing"),setTimeout(()=>ie.classList.remove("refreshing"),500),C()},p(oe,()=>$().total),p(Z,()=>$().clusterIP),p(me,()=>$().nodePort),p(ke,()=>$().loadBalancer),$e.$$input=le=>{t(le.currentTarget.value),s(1)},he.addEventListener("change",le=>{u(parseInt(le.currentTarget.value)),s(1)}),p(K,T(ee,{get when(){return(I()||[]).length>0},get children(){var le=Ou(),ie=le.firstChild,ae=ie.nextSibling;return p(ae,T(Ve,{get each(){return I()||[]},children:_e=>(()=>{var se=Uu(),fe=se.firstChild,de=fe.nextSibling,pe=de.nextSibling,Ee=pe.firstChild,be=Ee.nextSibling;be.nextSibling;var Pe=pe.nextSibling,Ne=Pe.nextSibling;return p(de,()=>_e.name),p(pe,()=>_e.localPort,be),p(pe,()=>_e.remotePort,null),Ne.$$click=()=>X(_e),ne(()=>et(Pe,"href",`http://localhost:${_e.localPort}`)),se})()})),le}}),ue),p(ue,T(ee,{get when(){return!x.loading},get fallback(){return(()=>{var le=Vu(),ie=le.firstChild;return ie.nextSibling,le})()},get children(){return[(()=>{var le=Hu(),ie=le.firstChild,ae=ie.firstChild,_e=ae.firstChild,se=_e.firstChild,fe=se.firstChild;fe.firstChild;var de=se.nextSibling,pe=de.firstChild;pe.firstChild;var Ee=de.nextSibling,be=Ee.firstChild;be.firstChild;var Pe=Ee.nextSibling,Ne=Pe.nextSibling,Ie=Ne.nextSibling,Ae=Ie.nextSibling,Re=Ae.firstChild;Re.firstChild;var je=ae.nextSibling;return se.$$click=()=>B("name"),p(fe,T(H,{field:"name"}),null),de.$$click=()=>B("namespace"),p(pe,T(H,{field:"namespace"}),null),Ee.$$click=()=>B("type"),p(be,T(H,{field:"type"}),null),Ae.$$click=()=>B("age"),p(Re,T(H,{field:"age"}),null),p(je,T(Ve,{get each(){return F()},get fallback(){return(()=>{var Te=Wu();return Te.firstChild,Te})()},children:Te=>(()=>{var He=qu(),ze=He.firstChild,Xe=ze.firstChild,Me=ze.nextSibling,We=Me.nextSibling,Ge=We.firstChild,Je=We.nextSibling,ot=Je.nextSibling,ft=ot.nextSibling,Rt=ft.nextSibling,hr=Rt.nextSibling;return Xe.$$click=()=>{g(Te),a(!0)},p(Xe,(()=>{var Sr=Fe(()=>Te.name.length>40);return()=>Sr()?Te.name.slice(0,37)+"...":Te.name})()),p(Me,()=>Te.namespace),p(Ge,()=>Te.type),p(Je,()=>Te.clusterIP),p(ot,()=>Te.externalIP||"-"),p(ft,()=>Te.ports),p(Rt,()=>Te.age),p(hr,T(sr,{actions:[{label:"Port Forward",icon:"portforward",onClick:()=>V(Te)},{label:"View YAML",icon:"yaml",onClick:()=>{g(Te),b(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{g(Te),y(!0)}},{label:"Delete",icon:"delete",onClick:()=>Y(Te),variant:"danger",divider:!0}]})),ne(()=>Ue(Ge,`badge ${Te.type==="LoadBalancer"?"badge-info":Te.type==="NodePort"?"badge-warning":"badge-success"}`)),He})()})),le})(),T(ee,{get when(){return L()>1},get children(){var le=Nu(),ie=le.firstChild,ae=ie.firstChild,_e=ae.nextSibling,se=_e.nextSibling,fe=se.nextSibling,de=fe.nextSibling,pe=de.nextSibling;pe.nextSibling;var Ee=ie.nextSibling,be=Ee.firstChild,Pe=be.nextSibling,Ne=Pe.nextSibling,Ie=Ne.firstChild,Ae=Ie.nextSibling;Ae.nextSibling;var Re=Ne.nextSibling,je=Re.nextSibling;return p(ie,()=>(h()-1)*i()+1,_e),p(ie,()=>Math.min(h()*i(),P().length),fe),p(ie,()=>P().length,pe),be.$$click=()=>s(1),Pe.$$click=()=>s(Te=>Math.max(1,Te-1)),p(Ne,h,Ae),p(Ne,L,null),Re.$$click=()=>s(Te=>Math.min(L(),Te+1)),je.$$click=()=>s(L()),ne(Te=>{var He=h()===1,ze=h()===1,Xe=h()===L(),Me=h()===L();return He!==Te.e&&(be.disabled=Te.e=He),ze!==Te.t&&(Pe.disabled=Te.t=ze),Xe!==Te.a&&(Re.disabled=Te.a=Xe),Me!==Te.o&&(je.disabled=Te.o=Me),Te},{e:void 0,t:void 0,a:void 0,o:void 0}),le}})]}})),p(K,T(st,{get isOpen(){return v()},onClose:()=>b(!1),get title(){return`YAML: ${f()?.name}`},size:"xl",get children(){return T(ee,{get when(){return!D.loading},get fallback(){return ll()},get children(){return T(rr,{get yaml(){return D()||""},get title(){return f()?.name}})}})}}),null),p(K,T(st,{get isOpen(){return S()},onClose:()=>y(!1),get title(){return`Edit YAML: ${f()?.name}`},size:"xl",get children(){return T(ee,{get when(){return!D.loading},get fallback(){return ll()},get children(){var le=zu();return p(le,T(wr,{get yaml(){return D()||""},get title(){return f()?.name},onSave:j,onCancel:()=>y(!1)})),le}})}}),null),p(K,T(Jt,{get isOpen(){return l()},onClose:()=>a(!1),resourceType:"service",get name(){return f()?.name||""},get namespace(){return f()?.namespace}}),null),p(K,T(st,{get isOpen(){return o()},onClose:()=>c(!1),get title(){return`Port Forward: ${f()?.name}`},size:"sm",get children(){var le=Fu(),ie=le.firstChild,ae=ie.firstChild,_e=ae.nextSibling,se=ie.nextSibling,fe=se.firstChild,de=fe.nextSibling,pe=se.nextSibling,Ee=pe.firstChild,be=Ee.nextSibling;be.firstChild;var Pe=be.nextSibling,Ne=Pe.nextSibling,Ie=Ne.firstChild,Ae=pe.nextSibling,Re=Ae.firstChild,je=Re.nextSibling;return _e.$$input=Te=>w(parseInt(Te.currentTarget.value)||8080),de.$$input=Te=>A(parseInt(Te.currentTarget.value)||80),p(be,m,null),p(Ne,()=>f()?.name,Ie),p(Ne,k,null),Re.$$click=()=>c(!1),je.$$click=z,ne(()=>_e.value=m()),ne(()=>de.value=k()),le}}),null),ne(()=>$e.value=e()),ne(()=>he.value=i()),K})()};lt(["click","input"]);var Yu=O('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>â²</span><span>â¼'),Gu=O('<div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Class </div></th><th class=whitespace-nowrap>Hosts</th><th class=whitespace-nowrap>Address</th><th class=whitespace-nowrap>Ports</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),Xu=O('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:#161b22><div style=color:#8b949e>Showing <!> - <!> of <!> ingresses</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>â Prev</button><span class="px-3 py-1"style=color:#c9d1d9>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Next â</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Last'),Ju=O("<div style=height:70vh>"),Zu=O('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Ingresses</h1><p style=color:var(--text-secondary)>External access to services</p></div><div class="flex items-center gap-3"><button class=icon-btn title="Refresh Ingresses"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>With Address</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--warning-color)"><span class=text-sm style=color:var(--text-secondary)>Without Address</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid #3b82f6"><span class=text-sm style=color:var(--text-secondary)>Total Hosts</span><span class="text-xl font-bold"style=color:#3b82f6></span></div><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class="overflow-hidden rounded-lg"style=background:#0d1117>'),Qu=O('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading ingresses...'),ef=O('<tr><td colspan=8 class="text-center py-8"style=color:var(--text-muted)>No ingresses found'),tf=O('<tr><td><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td></td><td></td><td><div class="flex flex-wrap gap-1"></div></td><td></td><td></td><td></td><td>'),rf=O('<a target=_blank class="text-xs px-2 py-1 rounded hover:opacity-80"style=background:var(--bg-tertiary);color:var(--accent-primary)>'),ol=O('<div class="spinner mx-auto">');const sf=()=>{const[e,t]=J(""),[r,n]=J("name"),[d,_]=J("asc"),[h,s]=J(1),[i,u]=J(20),[f,g]=J(null),[v,b]=J(!1),[S,y]=J(!1),[l,a]=J(!1),[o,{refetch:c}]=Ke(tt,De.getIngresses),[m]=Ke(()=>(v()||S())&&f()?{name:f().name,ns:f().namespace}:null,async M=>M&&(await De.getIngressYAML(M.name,M.ns)).yaml||""),w=async M=>{const P=f();if(P)try{await De.updateIngress(P.name,P.namespace,M),qe(`â Ingress ${P.name} updated successfully`,"success"),y(!1),setTimeout(()=>c(),500),setTimeout(()=>c(),2e3)}catch(L){const F=L instanceof Error?L.message:"Unknown error";throw qe(`â Failed to update ingress: ${F}`,"error"),L}},k=M=>{if(!M)return 0;let P=0;const L=M.match(/(\d+)d/),F=M.match(/(\d+)h/),$=M.match(/(\d+)m/);return L&&(P+=parseInt(L[1])*24*60),F&&(P+=parseInt(F[1])*60),$&&(P+=parseInt($[1])),P},A=Oe(()=>{let M=o()||[];const P=e().toLowerCase();P&&(M=M.filter($=>$.name.toLowerCase().includes(P)||$.namespace.toLowerCase().includes(P)||$.hosts?.some(B=>B.toLowerCase().includes(P))));const L=r(),F=d();return M=[...M].sort(($,B)=>{let H=0;switch(L){case"name":H=$.name.localeCompare(B.name);break;case"namespace":H=$.namespace.localeCompare(B.namespace);break;case"class":H=($.class||"").localeCompare(B.class||"");break;case"age":H=k($.age)-k(B.age);break}return F==="asc"?H:-H}),M}),x=Oe(()=>Math.ceil(A().length/i())),C=Oe(()=>{const M=(h()-1)*i();return A().slice(M,M+i())}),I=Oe(()=>{const M=o()||[];return{total:M.length,withAddress:M.filter(P=>P.address&&P.address!=="-").length,withoutAddress:M.filter(P=>!P.address||P.address==="-").length,totalHosts:M.reduce((P,L)=>P+(L.hosts?.length||0),0)}}),R=M=>{r()===M?_(P=>P==="asc"?"desc":"asc"):(n(M),_("asc")),s(1)},D=M=>(()=>{var P=Yu(),L=P.firstChild,F=L.nextSibling;return ne($=>{var B=r()===M.field&&d()==="asc"?"var(--accent-primary)":"var(--text-muted)",H=r()===M.field&&d()==="desc"?"var(--accent-primary)":"var(--text-muted)";return B!==$.e&&ve(L,"color",$.e=B),H!==$.t&&ve(F,"color",$.t=H),$},{e:void 0,t:void 0}),P})(),j=async M=>{if(confirm(`Are you sure you want to delete ingress "${M.name}" in namespace "${M.namespace}"?`))try{await De.deleteIngress(M.name,M.namespace),qe(`Ingress ${M.name} deleted successfully`,"success"),c()}catch(P){console.error("Failed to delete ingress:",P),qe(`Failed to delete ingress: ${P instanceof Error?P.message:"Unknown error"}`,"error")}};return(()=>{var M=Zu(),P=M.firstChild,L=P.firstChild,F=L.firstChild;F.nextSibling;var $=L.nextSibling,B=$.firstChild,H=P.nextSibling,z=H.firstChild,X=z.firstChild,V=X.nextSibling,Y=z.nextSibling,K=Y.firstChild,ce=K.nextSibling,E=Y.nextSibling,N=E.firstChild,U=N.nextSibling,W=E.nextSibling,q=W.firstChild,G=q.nextSibling,Q=W.nextSibling,oe=Q.nextSibling,ge=oe.nextSibling,Ce=H.nextSibling;return B.$$click=Z=>{const te=Z.currentTarget;te.classList.add("refreshing"),setTimeout(()=>te.classList.remove("refreshing"),500),c()},p(V,()=>I().total),p(ce,()=>I().withAddress),p(U,()=>I().withoutAddress),p(G,()=>I().totalHosts),oe.$$input=Z=>{t(Z.currentTarget.value),s(1)},ge.addEventListener("change",Z=>{u(parseInt(Z.currentTarget.value)),s(1)}),p(Ce,T(ee,{get when(){return!o.loading},get fallback(){return(()=>{var Z=Qu(),te=Z.firstChild;return te.nextSibling,Z})()},get children(){return[(()=>{var Z=Gu(),te=Z.firstChild,re=te.firstChild,me=re.firstChild,ye=me.firstChild,we=ye.firstChild;we.firstChild;var ke=ye.nextSibling,Se=ke.firstChild;Se.firstChild;var $e=ke.nextSibling,he=$e.firstChild;he.firstChild;var ue=$e.nextSibling,le=ue.nextSibling,ie=le.nextSibling,ae=ie.nextSibling,_e=ae.firstChild;_e.firstChild;var se=re.nextSibling;return ye.$$click=()=>R("name"),p(we,T(D,{field:"name"}),null),ke.$$click=()=>R("namespace"),p(Se,T(D,{field:"namespace"}),null),$e.$$click=()=>R("class"),p(he,T(D,{field:"class"}),null),ae.$$click=()=>R("age"),p(_e,T(D,{field:"age"}),null),p(se,T(Ve,{get each(){return C()},get fallback(){return(()=>{var fe=ef();return fe.firstChild,fe})()},children:fe=>(()=>{var de=tf(),pe=de.firstChild,Ee=pe.firstChild,be=pe.nextSibling,Pe=be.nextSibling,Ne=Pe.nextSibling,Ie=Ne.firstChild,Ae=Ne.nextSibling,Re=Ae.nextSibling,je=Re.nextSibling,Te=je.nextSibling;return Ee.$$click=()=>{g(fe),a(!0)},p(Ee,(()=>{var He=Fe(()=>fe.name.length>40);return()=>He()?fe.name.slice(0,37)+"...":fe.name})()),p(be,()=>fe.namespace),p(Pe,()=>fe.class||"-"),p(Ie,T(Ve,{get each(){return fe.hosts||[]},children:He=>(()=>{var ze=rf();return et(ze,"href",`https://${He}`),p(ze,He),ze})()})),p(Ae,()=>fe.address||"-"),p(Re,()=>fe.ports),p(je,()=>fe.age),p(Te,T(sr,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{g(fe),b(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{g(fe),y(!0)}},{label:"Delete",icon:"delete",onClick:()=>j(fe),variant:"danger",divider:!0}]})),de})()})),Z})(),T(ee,{get when(){return x()>1},get children(){var Z=Xu(),te=Z.firstChild,re=te.firstChild,me=re.nextSibling,ye=me.nextSibling,we=ye.nextSibling,ke=we.nextSibling,Se=ke.nextSibling;Se.nextSibling;var $e=te.nextSibling,he=$e.firstChild,ue=he.nextSibling,le=ue.nextSibling,ie=le.firstChild,ae=ie.nextSibling;ae.nextSibling;var _e=le.nextSibling,se=_e.nextSibling;return p(te,()=>(h()-1)*i()+1,me),p(te,()=>Math.min(h()*i(),A().length),we),p(te,()=>A().length,Se),he.$$click=()=>s(1),ue.$$click=()=>s(fe=>Math.max(1,fe-1)),p(le,h,ae),p(le,x,null),_e.$$click=()=>s(fe=>Math.min(x(),fe+1)),se.$$click=()=>s(x()),ne(fe=>{var de=h()===1,pe=h()===1,Ee=h()===x(),be=h()===x();return de!==fe.e&&(he.disabled=fe.e=de),pe!==fe.t&&(ue.disabled=fe.t=pe),Ee!==fe.a&&(_e.disabled=fe.a=Ee),be!==fe.o&&(se.disabled=fe.o=be),fe},{e:void 0,t:void 0,a:void 0,o:void 0}),Z}})]}})),p(M,T(st,{get isOpen(){return v()},onClose:()=>b(!1),get title(){return`YAML: ${f()?.name}`},size:"xl",get children(){return T(ee,{get when(){return!m.loading},get fallback(){return ol()},get children(){return T(rr,{get yaml(){return m()||""},get title(){return f()?.name}})}})}}),null),p(M,T(st,{get isOpen(){return S()},onClose:()=>y(!1),get title(){return`Edit YAML: ${f()?.name}`},size:"xl",get children(){return T(ee,{get when(){return!m.loading},get fallback(){return ol()},get children(){var Z=Ju();return p(Z,T(wr,{get yaml(){return m()||""},get title(){return f()?.name},onSave:w,onCancel:()=>y(!1)})),Z}})}}),null),p(M,T(Jt,{get isOpen(){return l()},onClose:()=>a(!1),resourceType:"ingress",get name(){return f()?.name||""},get namespace(){return f()?.namespace}}),null),ne(()=>oe.value=e()),ne(()=>ge.value=i()),M})()};lt(["click","input"]);var nf=O('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>â²</span><span>â¼'),lf=O('<div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Data </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),of=O('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:#161b22><div style=color:#8b949e>Showing <!> - <!> of <!> ConfigMaps</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>â Prev</button><span class="px-3 py-1"style=color:#c9d1d9>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Next â</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Last'),af=O('<div class=space-y-4><div class="grid grid-cols-2 gap-4"><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Name</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Namespace</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Data Keys</div><div class=font-semibold style=color:var(--accent-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Age</div><div style=color:var(--text-primary)></div></div></div><div class="flex gap-2 pt-4"><button class="btn-primary flex-1">View YAML</button><button class="btn-secondary flex-1">Describe'),cf=O('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>ConfigMaps</h1><p style=color:var(--text-secondary)>Configuration data storage</p></div><div class="flex items-center gap-3"><button class=icon-btn title="Refresh ConfigMaps"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid #8b5cf6"><span class=text-sm style=color:var(--text-secondary)>Filtered</span><span class="text-xl font-bold"style=color:#8b5cf6></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid #22c55e"><span class=text-sm style=color:var(--text-secondary)>Namespaces</span><span class="text-xl font-bold"style=color:#22c55e></span></div><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class="overflow-hidden rounded-lg"style=background:#0d1117>'),df=O('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading ConfigMaps...'),hf=O('<tr><td colspan=5 class="text-center py-8"style=color:var(--text-muted)>No ConfigMaps found'),uf=O('<tr><td><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td></td><td><span class="badge badge-info"> keys</span></td><td></td><td>'),ff=O('<div class="spinner mx-auto">');const gf=()=>{const[e,t]=J(""),[r,n]=J("name"),[d,_]=J("asc"),[h,s]=J(1),[i,u]=J(20),[f,g]=J(null),[v,b]=J(!1),[S,y]=J(!1),[l,a]=J(!1),[o,c]=J(!1),[m,{refetch:w}]=Ke(tt,De.getConfigMaps),[k]=Ke(()=>(v()||S())&&f()?{name:f().name,ns:f().namespace}:null,async M=>M&&(await De.getConfigMapYAML(M.name,M.ns)).yaml||""),A=M=>{if(!M)return 0;let P=0;const L=M.match(/(\d+)d/),F=M.match(/(\d+)h/),$=M.match(/(\d+)m/);return L&&(P+=parseInt(L[1])*24*60),F&&(P+=parseInt(F[1])*60),$&&(P+=parseInt($[1])),P},x=Oe(()=>{let M=m()||[];const P=e().toLowerCase();P&&(M=M.filter($=>$.name.toLowerCase().includes(P)||$.namespace.toLowerCase().includes(P)));const L=r(),F=d();return M=[...M].sort(($,B)=>{let H=0;switch(L){case"name":H=$.name.localeCompare(B.name);break;case"namespace":H=$.namespace.localeCompare(B.namespace);break;case"data":H=$.data-B.data;break;case"age":H=A($.age)-A(B.age);break}return F==="asc"?H:-H}),M}),C=Oe(()=>Math.ceil(x().length/i())),I=Oe(()=>{const M=(h()-1)*i();return x().slice(M,M+i())}),R=M=>{r()===M?_(P=>P==="asc"?"desc":"asc"):(n(M),_("asc")),s(1)},D=M=>(()=>{var P=nf(),L=P.firstChild,F=L.nextSibling;return ne($=>{var B=r()===M.field&&d()==="asc"?"var(--accent-primary)":"var(--text-muted)",H=r()===M.field&&d()==="desc"?"var(--accent-primary)":"var(--text-muted)";return B!==$.e&&ve(L,"color",$.e=B),H!==$.t&&ve(F,"color",$.t=H),$},{e:void 0,t:void 0}),P})(),j=async M=>{if(confirm(`Are you sure you want to delete ConfigMap "${M.name}" in namespace "${M.namespace}"?`))try{await De.deleteConfigMap(M.name,M.namespace),qe(`ConfigMap ${M.name} deleted successfully`,"success"),w()}catch(P){console.error("Failed to delete ConfigMap:",P),qe(`Failed to delete ConfigMap: ${P instanceof Error?P.message:"Unknown error"}`,"error")}};return(()=>{var M=cf(),P=M.firstChild,L=P.firstChild,F=L.firstChild;F.nextSibling;var $=L.nextSibling,B=$.firstChild,H=P.nextSibling,z=H.firstChild,X=z.firstChild,V=X.nextSibling,Y=z.nextSibling,K=Y.firstChild,ce=K.nextSibling,E=Y.nextSibling,N=E.firstChild,U=N.nextSibling,W=E.nextSibling,q=W.nextSibling,G=q.nextSibling,Q=H.nextSibling;return B.$$click=oe=>{const ge=oe.currentTarget;ge.classList.add("refreshing"),setTimeout(()=>ge.classList.remove("refreshing"),500),w()},p(V,()=>(m()||[]).length),p(ce,()=>x().length),p(U,()=>new Set((m()||[]).map(oe=>oe.namespace)).size),q.$$input=oe=>{t(oe.currentTarget.value),s(1)},G.addEventListener("change",oe=>{u(parseInt(oe.currentTarget.value)),s(1)}),p(Q,T(ee,{get when(){return!m.loading},get fallback(){return(()=>{var oe=df(),ge=oe.firstChild;return ge.nextSibling,oe})()},get children(){return[(()=>{var oe=lf(),ge=oe.firstChild,Ce=ge.firstChild,Z=Ce.firstChild,te=Z.firstChild,re=te.firstChild;re.firstChild;var me=te.nextSibling,ye=me.firstChild;ye.firstChild;var we=me.nextSibling,ke=we.firstChild;ke.firstChild;var Se=we.nextSibling,$e=Se.firstChild;$e.firstChild;var he=Ce.nextSibling;return te.$$click=()=>R("name"),p(re,T(D,{field:"name"}),null),me.$$click=()=>R("namespace"),p(ye,T(D,{field:"namespace"}),null),we.$$click=()=>R("data"),p(ke,T(D,{field:"data"}),null),Se.$$click=()=>R("age"),p($e,T(D,{field:"age"}),null),p(he,T(Ve,{get each(){return I()},get fallback(){return(()=>{var ue=hf();return ue.firstChild,ue})()},children:ue=>(()=>{var le=uf(),ie=le.firstChild,ae=ie.firstChild,_e=ie.nextSibling,se=_e.nextSibling,fe=se.firstChild,de=fe.firstChild,pe=se.nextSibling,Ee=pe.nextSibling;return ae.$$click=()=>{g(ue),c(!0)},p(ae,(()=>{var be=Fe(()=>ue.name.length>40);return()=>be()?ue.name.slice(0,37)+"...":ue.name})()),p(_e,()=>ue.namespace),p(fe,()=>ue.data,de),p(pe,()=>ue.age),p(Ee,T(sr,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{g(ue),b(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{g(ue),y(!0)}},{label:"Delete",icon:"delete",onClick:()=>j(ue),variant:"danger",divider:!0}]})),le})()})),oe})(),T(ee,{get when(){return C()>1},get children(){var oe=of(),ge=oe.firstChild,Ce=ge.firstChild,Z=Ce.nextSibling,te=Z.nextSibling,re=te.nextSibling,me=re.nextSibling,ye=me.nextSibling;ye.nextSibling;var we=ge.nextSibling,ke=we.firstChild,Se=ke.nextSibling,$e=Se.nextSibling,he=$e.firstChild,ue=he.nextSibling;ue.nextSibling;var le=$e.nextSibling,ie=le.nextSibling;return p(ge,()=>(h()-1)*i()+1,Z),p(ge,()=>Math.min(h()*i(),x().length),re),p(ge,()=>x().length,ye),ke.$$click=()=>s(1),Se.$$click=()=>s(ae=>Math.max(1,ae-1)),p($e,h,ue),p($e,C,null),le.$$click=()=>s(ae=>Math.min(C(),ae+1)),ie.$$click=()=>s(C()),ne(ae=>{var _e=h()===1,se=h()===1,fe=h()===C(),de=h()===C();return _e!==ae.e&&(ke.disabled=ae.e=_e),se!==ae.t&&(Se.disabled=ae.t=se),fe!==ae.a&&(le.disabled=ae.a=fe),de!==ae.o&&(ie.disabled=ae.o=de),ae},{e:void 0,t:void 0,a:void 0,o:void 0}),oe}})]}})),p(M,T(st,{get isOpen(){return l()},onClose:()=>a(!1),get title(){return`ConfigMap: ${f()?.name}`},size:"lg",get children(){return T(ee,{get when(){return f()},get children(){var oe=af(),ge=oe.firstChild,Ce=ge.firstChild,Z=Ce.firstChild,te=Z.nextSibling,re=Ce.nextSibling,me=re.firstChild,ye=me.nextSibling,we=re.nextSibling,ke=we.firstChild,Se=ke.nextSibling,$e=we.nextSibling,he=$e.firstChild,ue=he.nextSibling,le=ge.nextSibling,ie=le.firstChild,ae=ie.nextSibling;return p(te,()=>f()?.name),p(ye,()=>f()?.namespace),p(Se,()=>f()?.data),p(ue,()=>f()?.age),ie.$$click=()=>{a(!1),b(!0)},ae.$$click=()=>{a(!1),c(!0)},oe}})}}),null),p(M,T(st,{get isOpen(){return v()},onClose:()=>b(!1),get title(){return`ConfigMap: ${f()?.name}`},size:"xl",get children(){return T(ee,{get when(){return!k.loading},get fallback(){return ff()},get children(){return T(rr,{get yaml(){return k()||""},get title(){return f()?.name}})}})}}),null),p(M,T(Jt,{get isOpen(){return o()},onClose:()=>c(!1),resourceType:"configmap",get name(){return f()?.name||""},get namespace(){return f()?.namespace}}),null),ne(()=>q.value=e()),ne(()=>G.value=i()),M})()};lt(["click","input"]);var pf=O('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>â²</span><span>â¼'),vf=O('<div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Type </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Data </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),mf=O('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:#161b22><div style=color:#8b949e>Showing <!> - <!> of <!> Secrets</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>â Prev</button><span class="px-3 py-1"style=color:#c9d1d9>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Next â</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Last'),_f=O("<div style=height:70vh>"),bf=O('<div class=space-y-4 style=background:var(--bg-primary);minHeight:100%><div class="flex items-center justify-between"><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Secrets</h1><div class="flex items-center gap-3"><input type=text placeholder="Search secrets..."class="px-3 py-2 rounded-lg bg-[var(--bg-alt)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent-primary)]"style="border:1px solid var(--border-color);color:var(--text-primary)"><button class="px-3 py-2 rounded-lg bg-[var(--accent-primary)] text-white text-sm font-medium hover:opacity-90 transition-opacity">Refresh</button></div></div><div class="overflow-hidden rounded-lg w-full"style=background:#0d1117>'),yf=O('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading Secrets...'),xf=O('<tr><td colspan=6 class="text-center py-8"style=color:var(--text-muted)>No secrets found'),wf=O('<tr><td><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td></td><td><span></span></td><td></td><td></td><td>'),al=O('<div class="spinner mx-auto">');const Sf=()=>{const[e,t]=J(""),[r,n]=J("name"),[d,_]=J("asc"),[h,s]=J(1),[i,u]=J(20),[f,g]=J(null),[v,b]=J(!1),[S,y]=J(!1),[l,a]=J(!1),[o,c]=J(!1),[m,{refetch:w}]=Ke(tt,De.getSecrets),[k]=Ke(()=>(v()||S())&&f()?{name:f().name,ns:f().namespace}:null,async L=>L&&(await De.getSecretYAML(L.name,L.ns)).yaml||""),A=async L=>{const F=f();if(F)try{await De.updateSecret(F.name,F.namespace,L),qe(`â Secret ${F.name} updated successfully`,"success"),y(!1),setTimeout(()=>w(),500),setTimeout(()=>w(),2e3)}catch($){const B=$ instanceof Error?$.message:"Unknown error";throw qe(`â Failed to update secret: ${B}`,"error"),$}},x=L=>{if(!L)return 0;let F=0;const $=L.match(/(\d+)d/),B=L.match(/(\d+)h/),H=L.match(/(\d+)m/);return $&&(F+=parseInt($[1])*24*60),B&&(F+=parseInt(B[1])*60),H&&(F+=parseInt(H[1])),F},C=Oe(()=>{let L=m()||[];const F=e().toLowerCase();F&&(L=L.filter(H=>H.name.toLowerCase().includes(F)||H.namespace.toLowerCase().includes(F)||H.type.toLowerCase().includes(F)));const $=r(),B=d();return L=[...L].sort((H,z)=>{let X=0;switch($){case"name":X=H.name.localeCompare(z.name);break;case"namespace":X=H.namespace.localeCompare(z.namespace);break;case"type":X=H.type.localeCompare(z.type);break;case"data":X=H.data-z.data;break;case"age":X=x(H.age)-x(z.age);break}return B==="asc"?X:-X}),L}),I=Oe(()=>Math.ceil(C().length/i())),R=Oe(()=>{const L=(h()-1)*i();return C().slice(L,L+i())}),D=L=>{r()===L?_(F=>F==="asc"?"desc":"asc"):(n(L),_("asc")),s(1)},j=L=>(()=>{var F=pf(),$=F.firstChild,B=$.nextSibling;return ne(H=>{var z=r()===L.field&&d()==="asc"?"var(--accent-primary)":"var(--text-muted)",X=r()===L.field&&d()==="desc"?"var(--accent-primary)":"var(--text-muted)";return z!==H.e&&ve($,"color",H.e=z),X!==H.t&&ve(B,"color",H.t=X),H},{e:void 0,t:void 0}),F})(),M=async L=>{if(confirm(`Are you sure you want to delete secret "${L.name}" in namespace "${L.namespace}"?`))try{await De.deleteSecret(L.name,L.namespace),qe(`Secret ${L.name} deleted successfully`,"success"),w()}catch(F){console.error("Failed to delete secret:",F),qe(`Failed to delete secret: ${F instanceof Error?F.message:"Unknown error"}`,"error")}},P=L=>L.includes("tls")?"badge-success":L.includes("Opaque")?"badge-default":L.includes("helm")?"badge-info":"badge-default";return(()=>{var L=bf(),F=L.firstChild,$=F.firstChild,B=$.nextSibling,H=B.firstChild,z=H.nextSibling,X=F.nextSibling;return H.$$input=V=>t(V.currentTarget.value),z.$$click=()=>w(),p(X,T(ee,{get when(){return!m.loading},get fallback(){return(()=>{var V=yf(),Y=V.firstChild;return Y.nextSibling,V})()},get children(){return[(()=>{var V=vf(),Y=V.firstChild,K=Y.firstChild,ce=K.firstChild,E=ce.firstChild,N=E.firstChild;N.firstChild;var U=E.nextSibling,W=U.firstChild;W.firstChild;var q=U.nextSibling,G=q.firstChild;G.firstChild;var Q=q.nextSibling,oe=Q.firstChild;oe.firstChild;var ge=Q.nextSibling,Ce=ge.firstChild;Ce.firstChild;var Z=K.nextSibling;return E.$$click=()=>D("name"),p(N,T(j,{field:"name"}),null),U.$$click=()=>D("namespace"),p(W,T(j,{field:"namespace"}),null),q.$$click=()=>D("type"),p(G,T(j,{field:"type"}),null),Q.$$click=()=>D("data"),p(oe,T(j,{field:"data"}),null),ge.$$click=()=>D("age"),p(Ce,T(j,{field:"age"}),null),p(Z,T(Ve,{get each(){return R()},get fallback(){return(()=>{var te=xf();return te.firstChild,te})()},children:te=>(()=>{var re=wf(),me=re.firstChild,ye=me.firstChild,we=me.nextSibling,ke=we.nextSibling,Se=ke.firstChild,$e=ke.nextSibling,he=$e.nextSibling,ue=he.nextSibling;return ye.$$click=()=>{g(te),c(!0)},p(ye,(()=>{var le=Fe(()=>te.name.length>40);return()=>le()?te.name.slice(0,37)+"...":te.name})()),p(we,()=>te.namespace),p(Se,()=>te.type),p($e,()=>te.data),p(he,()=>te.age),p(ue,T(sr,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{g(te),b(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{g(te),y(!0)}},{label:"Describe",icon:"describe",onClick:()=>{g(te),c(!0)}},{label:"Delete",icon:"delete",onClick:()=>M(te),variant:"danger",divider:!0}]})),ne(()=>Ue(Se,`badge ${P(te.type)}`)),re})()})),V})(),T(ee,{get when(){return I()>1},get children(){var V=mf(),Y=V.firstChild,K=Y.firstChild,ce=K.nextSibling,E=ce.nextSibling,N=E.nextSibling,U=N.nextSibling,W=U.nextSibling;W.nextSibling;var q=Y.nextSibling,G=q.firstChild,Q=G.nextSibling,oe=Q.nextSibling,ge=oe.firstChild,Ce=ge.nextSibling;Ce.nextSibling;var Z=oe.nextSibling,te=Z.nextSibling;return p(Y,()=>(h()-1)*i()+1,ce),p(Y,()=>Math.min(h()*i(),C().length),N),p(Y,()=>C().length,W),G.$$click=()=>s(1),Q.$$click=()=>s(re=>Math.max(1,re-1)),p(oe,h,Ce),p(oe,I,null),Z.$$click=()=>s(re=>Math.min(I(),re+1)),te.$$click=()=>s(I()),ne(re=>{var me=h()===1,ye=h()===1,we=h()===I(),ke=h()===I();return me!==re.e&&(G.disabled=re.e=me),ye!==re.t&&(Q.disabled=re.t=ye),we!==re.a&&(Z.disabled=re.a=we),ke!==re.o&&(te.disabled=re.o=ke),re},{e:void 0,t:void 0,a:void 0,o:void 0}),V}})]}})),p(L,T(st,{get isOpen(){return v()},onClose:()=>b(!1),get title(){return`YAML: ${f()?.name}`},size:"xl",get children(){return T(ee,{get when(){return!k.loading},get fallback(){return al()},get children(){return T(rr,{get yaml(){return k()||""},get title(){return f()?.name}})}})}}),null),p(L,T(st,{get isOpen(){return S()},onClose:()=>y(!1),get title(){return`Edit YAML: ${f()?.name}`},size:"xl",get children(){return T(ee,{get when(){return!k.loading},get fallback(){return al()},get children(){var V=_f();return p(V,T(wr,{get yaml(){return k()||""},get title(){return f()?.name},onSave:A,onCancel:()=>y(!1)})),V}})}}),null),p(L,T(Jt,{get isOpen(){return o()},onClose:()=>c(!1),resourceType:"secret",get name(){return f()?.name||""},get namespace(){return f()?.namespace||""}}),null),L})()};lt(["input","click"]);var $f=O('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>&#9650;</span><span>&#9660;'),Cf=O('<div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class=whitespace-nowrap>Secret</th><th class=whitespace-nowrap>Issuer</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Status </div></th><th class=whitespace-nowrap>Expires</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),kf=O('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:#161b22><div style=color:#8b949e>Showing <!> - <!> of <!> certificates</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Prev</button><span class="px-3 py-1"style=color:#c9d1d9>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Next</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Last'),Ef=O("<div style=height:70vh>"),Af=O('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Certificates</h1><p style=color:var(--text-secondary)>TLS certificates managed by cert-manager</p></div><div class="flex items-center gap-3"><button class=icon-btn title="Refresh Certificates"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Ready</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--warning-color)"><span class=text-sm style=color:var(--text-secondary)>Pending</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--error-color)"><span class=text-sm style=color:var(--text-secondary)>Failed</span><span class="text-xl font-bold"style=color:var(--error-color)></span></div><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class="overflow-hidden rounded-lg"style=background:#0d1117>'),Lf=O('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading certificates...'),Mf=O('<tr><td colspan=8 class="text-center py-8"style=color:var(--text-muted)>No certificates found. Make sure cert-manager is installed.'),Df=O('<tr><td><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td></td><td><code class="px-2 py-1 rounded text-xs"style=background:var(--bg-tertiary)></code></td><td></td><td><span></span></td><td></td><td></td><td>'),cl=O('<div class="spinner mx-auto">');const Rf=()=>{const[e,t]=J(""),[r,n]=J("name"),[d,_]=J("asc"),[h,s]=J(1),[i,u]=J(20),[f,g]=J(null),[v,b]=J(!1),[S,y]=J(!1),[l,a]=J(!1),[o,{refetch:c}]=Ke(tt,De.getCertificates),[m]=Ke(()=>(v()||S())&&f()?{name:f().name,ns:f().namespace}:null,async P=>P&&(await De.getCertificateYAML(P.name,P.ns)).yaml||""),w=async P=>{const L=f();if(L)try{await De.updateCertificate(L.name,L.namespace,P),qe(`â Certificate ${L.name} updated successfully`,"success"),y(!1),setTimeout(()=>c(),500),setTimeout(()=>c(),2e3)}catch(F){const $=F instanceof Error?F.message:"Unknown error";throw qe(`â Failed to update certificate: ${$}`,"error"),F}},k=P=>{if(!P)return 0;let L=0;const F=P.match(/(\d+)d/),$=P.match(/(\d+)h/),B=P.match(/(\d+)m/);return F&&(L+=parseInt(F[1])*24*60),$&&(L+=parseInt($[1])*60),B&&(L+=parseInt(B[1])),L},A=Oe(()=>{let P=o()||[];const L=e().toLowerCase();L&&(P=P.filter(B=>B.name.toLowerCase().includes(L)||B.namespace.toLowerCase().includes(L)||B.issuer?.toLowerCase().includes(L)||B.dnsNames?.some(H=>H.toLowerCase().includes(L))));const F=r(),$=d();return P=[...P].sort((B,H)=>{let z=0;switch(F){case"name":z=B.name.localeCompare(H.name);break;case"namespace":z=B.namespace.localeCompare(H.namespace);break;case"status":z=B.status.localeCompare(H.status);break;case"age":z=k(B.age)-k(H.age);break}return $==="asc"?z:-z}),P}),x=Oe(()=>Math.ceil(A().length/i())),C=Oe(()=>{const P=(h()-1)*i();return A().slice(P,P+i())}),I=Oe(()=>{const P=o()||[];return{total:P.length,ready:P.filter(L=>L.status==="Ready"||L.status==="True").length,pending:P.filter(L=>L.status==="Pending"||L.status==="Unknown").length,failed:P.filter(L=>L.status==="Failed"||L.status==="False").length}}),R=P=>{r()===P?_(L=>L==="asc"?"desc":"asc"):(n(P),_("asc")),s(1)},D=P=>(()=>{var L=$f(),F=L.firstChild,$=F.nextSibling;return ne(B=>{var H=r()===P.field&&d()==="asc"?"var(--accent-primary)":"var(--text-muted)",z=r()===P.field&&d()==="desc"?"var(--accent-primary)":"var(--text-muted)";return H!==B.e&&ve(F,"color",B.e=H),z!==B.t&&ve($,"color",B.t=z),B},{e:void 0,t:void 0}),L})(),j=async P=>{if(confirm(`Are you sure you want to delete certificate ${P.name}?`))try{await De.deleteCertificate(P.name,P.namespace),qe(`Certificate ${P.name} deleted successfully`,"success"),c()}catch(L){console.error("Failed to delete certificate:",L),qe(`Failed to delete certificate: ${L instanceof Error?L.message:"Unknown error"}`,"error")}},M=P=>P==="Ready"||P==="True"?"badge-success":P==="Failed"||P==="False"?"badge-error":"badge-warning";return(()=>{var P=Af(),L=P.firstChild,F=L.firstChild,$=F.firstChild;$.nextSibling;var B=F.nextSibling,H=B.firstChild,z=L.nextSibling,X=z.firstChild,V=X.firstChild,Y=V.nextSibling,K=X.nextSibling,ce=K.firstChild,E=ce.nextSibling,N=K.nextSibling,U=N.firstChild,W=U.nextSibling,q=N.nextSibling,G=q.firstChild,Q=G.nextSibling,oe=q.nextSibling,ge=oe.nextSibling,Ce=ge.nextSibling,Z=z.nextSibling;return H.$$click=te=>{const re=te.currentTarget;re.classList.add("refreshing"),setTimeout(()=>re.classList.remove("refreshing"),500),c()},p(Y,()=>I().total),p(E,()=>I().ready),p(W,()=>I().pending),p(Q,()=>I().failed),ge.$$input=te=>{t(te.currentTarget.value),s(1)},Ce.addEventListener("change",te=>{u(parseInt(te.currentTarget.value)),s(1)}),p(Z,T(ee,{get when(){return!o.loading},get fallback(){return(()=>{var te=Lf(),re=te.firstChild;return re.nextSibling,te})()},get children(){return[(()=>{var te=Cf(),re=te.firstChild,me=re.firstChild,ye=me.firstChild,we=ye.firstChild,ke=we.firstChild;ke.firstChild;var Se=we.nextSibling,$e=Se.firstChild;$e.firstChild;var he=Se.nextSibling,ue=he.nextSibling,le=ue.nextSibling,ie=le.firstChild;ie.firstChild;var ae=le.nextSibling,_e=ae.nextSibling,se=_e.firstChild;se.firstChild;var fe=me.nextSibling;return we.$$click=()=>R("name"),p(ke,T(D,{field:"name"}),null),Se.$$click=()=>R("namespace"),p($e,T(D,{field:"namespace"}),null),le.$$click=()=>R("status"),p(ie,T(D,{field:"status"}),null),_e.$$click=()=>R("age"),p(se,T(D,{field:"age"}),null),p(fe,T(Ve,{get each(){return C()},get fallback(){return(()=>{var de=Mf();return de.firstChild,de})()},children:de=>(()=>{var pe=Df(),Ee=pe.firstChild,be=Ee.firstChild,Pe=Ee.nextSibling,Ne=Pe.nextSibling,Ie=Ne.firstChild,Ae=Ne.nextSibling,Re=Ae.nextSibling,je=Re.firstChild,Te=Re.nextSibling,He=Te.nextSibling,ze=He.nextSibling;return be.$$click=()=>{g(de),a(!0)},p(be,(()=>{var Xe=Fe(()=>de.name.length>40);return()=>Xe()?de.name.slice(0,37)+"...":de.name})()),p(Pe,()=>de.namespace),p(Ie,()=>de.secretName||"-"),p(Ae,()=>de.issuer||"-"),p(je,()=>de.status),p(Te,()=>de.notAfter||"-"),p(He,()=>de.age),p(ze,T(sr,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{g(de),b(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{g(de),y(!0)}},{label:"Delete",icon:"delete",onClick:()=>j(de),variant:"danger",divider:!0}]})),ne(()=>Ue(je,`badge ${M(de.status)}`)),pe})()})),te})(),T(ee,{get when(){return x()>1},get children(){var te=kf(),re=te.firstChild,me=re.firstChild,ye=me.nextSibling,we=ye.nextSibling,ke=we.nextSibling,Se=ke.nextSibling,$e=Se.nextSibling;$e.nextSibling;var he=re.nextSibling,ue=he.firstChild,le=ue.nextSibling,ie=le.nextSibling,ae=ie.firstChild,_e=ae.nextSibling;_e.nextSibling;var se=ie.nextSibling,fe=se.nextSibling;return p(re,()=>(h()-1)*i()+1,ye),p(re,()=>Math.min(h()*i(),A().length),ke),p(re,()=>A().length,$e),ue.$$click=()=>s(1),le.$$click=()=>s(de=>Math.max(1,de-1)),p(ie,h,_e),p(ie,x,null),se.$$click=()=>s(de=>Math.min(x(),de+1)),fe.$$click=()=>s(x()),ne(de=>{var pe=h()===1,Ee=h()===1,be=h()===x(),Pe=h()===x();return pe!==de.e&&(ue.disabled=de.e=pe),Ee!==de.t&&(le.disabled=de.t=Ee),be!==de.a&&(se.disabled=de.a=be),Pe!==de.o&&(fe.disabled=de.o=Pe),de},{e:void 0,t:void 0,a:void 0,o:void 0}),te}})]}})),p(P,T(st,{get isOpen(){return v()},onClose:()=>b(!1),get title(){return`YAML: ${f()?.name}`},size:"xl",get children(){return T(ee,{get when(){return!m.loading},get fallback(){return cl()},get children(){return T(rr,{get yaml(){return m()||""},get title(){return f()?.name}})}})}}),null),p(P,T(st,{get isOpen(){return S()},onClose:()=>y(!1),get title(){return`Edit YAML: ${f()?.name}`},size:"xl",get children(){return T(ee,{get when(){return!m.loading},get fallback(){return cl()},get children(){var te=Ef();return p(te,T(wr,{get yaml(){return m()||""},get title(){return f()?.name},onSave:w,onCancel:()=>y(!1)})),te}})}}),null),p(P,T(Jt,{get isOpen(){return l()},onClose:()=>a(!1),resourceType:"certificate",get name(){return f()?.name||""},get namespace(){return f()?.namespace}}),null),ne(()=>ge.value=e()),ne(()=>Ce.value=i()),P})()};lt(["click","input"]);var Tf=O('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z">'),Pf=O('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 6h16M4 10h16M4 14h16M4 18h16">'),If=O('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1v-4zM14 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z">'),Bf=O('<div class="grid grid-cols-1 lg:grid-cols-2 gap-4">'),Of=O('<div><div class="flex items-start justify-between mb-4"><div class="flex items-center gap-3"><div><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path></svg></div><div><button class="text-white font-semibold hover:underline text-left"></button><p class="text-gray-500 text-sm"></p></div></div><span></span></div><div class="grid grid-cols-2 gap-4 mb-4"><div class="bg-k8s-dark rounded-lg p-3"><div class="flex items-center justify-between mb-2"><span class="text-gray-400 text-sm">CPU</span><span class="text-white font-medium"></span></div><div class="h-2 bg-k8s-border rounded-full overflow-hidden"><div class="h-full bg-blue-500 rounded-full"style=width:45%></div></div></div><div class="bg-k8s-dark rounded-lg p-3"><div class="flex items-center justify-between mb-2"><span class="text-gray-400 text-sm">Memory</span><span class="text-white font-medium"></span></div><div class="h-2 bg-k8s-border rounded-full overflow-hidden"><div class="h-full bg-purple-500 rounded-full"style=width:60%></div></div></div></div><div class="flex items-center justify-between text-sm text-gray-400 pt-4 border-t border-k8s-border"><span>Version: </span><span>Age: '),Hf=O('<div class="overflow-hidden rounded-lg"style=background:#0d1117><div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class=whitespace-nowrap>Name</th><th class=whitespace-nowrap>Status</th><th class=whitespace-nowrap>Roles</th><th class=whitespace-nowrap>CPU</th><th class=whitespace-nowrap>Memory</th><th class=whitespace-nowrap>Version</th><th class=whitespace-nowrap>Age</th></tr></thead><tbody>'),Nf=O('<tr><td colspan=7 class="text-center py-8"style=color:var(--text-muted)>No nodes found'),zf=O('<tr><td><div class="flex items-center gap-2"><div><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path></svg></div><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></div></td><td><span></span></td><td><span></span></td><td class="font-mono text-sm"></td><td class="font-mono text-sm"></td><td class="font-mono text-sm"></td><td>'),Ff=O('<div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3">'),jf=O('<button><div class="flex items-center gap-2 mb-2"><div><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path></svg></div><span></span></div><h4 class="text-white font-medium text-sm truncate mb-1"></h4><p class="text-gray-500 text-xs truncate"></p><div class="mt-2 pt-2 border-t border-k8s-border"><div class="flex justify-between text-xs"><span class=text-gray-500>CPU</span><span class=text-gray-300></span></div><div class="flex justify-between text-xs mt-1"><span class=text-gray-500>Mem</span><span class=text-gray-300>'),Uf=O('<div class=space-y-6><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold text-white">Nodes</h1><p class="text-gray-400 mt-1">Cluster node management</p></div><div class="flex items-center gap-3"><div class="flex items-center rounded-lg overflow-hidden"style="background:var(--bg-secondary);border:1px solid var(--border-color)"></div><button class=icon-btn title="Refresh Nodes"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="grid grid-cols-2 md:grid-cols-4 gap-4"><div class="bg-k8s-card border border-k8s-border rounded-lg p-4"><div class="text-gray-400 text-sm">Total Nodes</div><div class="text-2xl font-bold text-white"></div></div><div class="bg-k8s-card border border-green-500/30 rounded-lg p-4"><div class="text-gray-400 text-sm">Ready</div><div class="text-2xl font-bold text-green-400"></div></div><div class="bg-k8s-card border border-red-500/30 rounded-lg p-4"><div class="text-gray-400 text-sm">Not Ready</div><div class="text-2xl font-bold text-red-400"></div></div><div class="bg-k8s-card border border-cyan-500/30 rounded-lg p-4"><div class="text-gray-400 text-sm">Control Plane</div><div class="text-2xl font-bold text-cyan-400">'),Vf=O('<button><span class="hidden sm:inline capitalize">'),Wf=O('<div class="p-8 text-center text-gray-500"><svg class="w-8 h-8 animate-spin mx-auto mb-2"fill=none viewBox="0 0 24 24"><circle class=opacity-25 cx=12 cy=12 r=10 stroke=currentColor stroke-width=4></circle><path class=opacity-75 fill=currentColor d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>Loading nodes...');const qf=()=>{const[e,t]=J(null),[r,n]=J(!1),[d,_]=J("card"),h=Oe(()=>{const v=bs()||[],b=no().toLowerCase();return b?v.filter(S=>S.name.toLowerCase().includes(b)||S.roles.toLowerCase().includes(b)||S.status.toLowerCase().includes(b)):v}),s=Oe(()=>{const v=bs()||[];return{total:v.length,ready:v.filter(b=>b.status==="Ready").length,notReady:v.filter(b=>b.status!=="Ready").length,controlPlane:v.filter(b=>b.roles.includes("control-plane")||b.roles.includes("master")).length}}),i=v=>T(ci,{get children(){return[T(Xt,{get when(){return v.mode==="card"},get children(){return Tf()}}),T(Xt,{get when(){return v.mode==="list"},get children(){return Pf()}}),T(Xt,{get when(){return v.mode==="grid"},get children(){return If()}})]}}),u=()=>(()=>{var v=Bf();return p(v,T(Ve,{get each(){return h()},children:b=>{const S=b.status==="Ready",y=b.roles.includes("control-plane")||b.roles.includes("master");return(()=>{var l=Of(),a=l.firstChild,o=a.firstChild,c=o.firstChild,m=c.firstChild,w=c.nextSibling,k=w.firstChild,A=k.nextSibling,x=o.nextSibling,C=a.nextSibling,I=C.firstChild,R=I.firstChild,D=R.firstChild,j=D.nextSibling,M=R.nextSibling;M.firstChild;var P=I.nextSibling,L=P.firstChild,F=L.firstChild,$=F.nextSibling,B=L.nextSibling;B.firstChild;var H=C.nextSibling,z=H.firstChild;z.firstChild;var X=z.nextSibling;return X.firstChild,Ue(l,`bg-k8s-card border rounded-xl p-6 card-hover ${S?"border-k8s-border":"border-red-500/30"}`),Ue(c,`p-2 rounded-lg ${y?"bg-cyan-500/20":"bg-k8s-dark"}`),et(m,"class",`w-6 h-6 ${y?"text-cyan-400":"text-gray-400"}`),k.$$click=()=>{t(b),n(!0)},p(k,()=>b.name),p(A,()=>b.roles||"worker"),Ue(x,`px-2 py-1 rounded text-xs font-medium ${S?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`),p(x,()=>b.status),p(j,()=>b.cpu||"N/A"),p($,()=>b.memory||"N/A"),p(z,()=>b.version,null),p(X,()=>b.age,null),l})()}})),v})(),f=()=>(()=>{var v=Hf(),b=v.firstChild,S=b.firstChild,y=S.firstChild,l=y.nextSibling;return p(l,T(Ve,{get each(){return h()},get fallback(){return(()=>{var a=Nf();return a.firstChild,a})()},children:a=>{const o=a.status==="Ready",c=a.roles.includes("control-plane")||a.roles.includes("master");return(()=>{var m=zf(),w=m.firstChild,k=w.firstChild,A=k.firstChild,x=A.firstChild,C=A.nextSibling,I=w.nextSibling,R=I.firstChild,D=I.nextSibling,j=D.firstChild,M=D.nextSibling,P=M.nextSibling,L=P.nextSibling,F=L.nextSibling;return Ue(A,`p-1 rounded ${c?"bg-cyan-500/20":"bg-k8s-dark"}`),et(x,"class",`w-4 h-4 ${c?"text-cyan-400":"text-gray-400"}`),C.$$click=()=>{t(a),n(!0)},p(C,()=>a.name),Ue(R,`badge ${o?"badge-success":"badge-error"}`),p(R,()=>a.status),Ue(j,`text-sm ${c?"text-cyan-400":"text-gray-400"}`),p(j,()=>a.roles||"worker"),p(M,()=>a.cpu||"N/A"),p(P,()=>a.memory||"N/A"),p(L,()=>a.version),p(F,()=>a.age),m})()}})),v})(),g=()=>(()=>{var v=Ff();return p(v,T(Ve,{get each(){return h()},children:b=>{const S=b.status==="Ready",y=b.roles.includes("control-plane")||b.roles.includes("master");return(()=>{var l=jf(),a=l.firstChild,o=a.firstChild,c=o.firstChild,m=o.nextSibling,w=a.nextSibling,k=w.nextSibling,A=k.nextSibling,x=A.firstChild,C=x.firstChild,I=C.nextSibling,R=x.nextSibling,D=R.firstChild,j=D.nextSibling;return l.$$click=()=>{t(b),n(!0)},Ue(l,`bg-k8s-card border rounded-lg p-4 text-left hover:bg-k8s-dark transition-colors ${S?"border-k8s-border":"border-red-500/30"}`),Ue(o,`p-1.5 rounded ${y?"bg-cyan-500/20":"bg-k8s-dark"}`),et(c,"class",`w-4 h-4 ${y?"text-cyan-400":"text-gray-400"}`),Ue(m,`px-1.5 py-0.5 rounded text-xs font-medium ${S?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`),p(m,()=>b.status),p(w,()=>b.name),p(k,()=>b.roles||"worker"),p(I,()=>b.cpu||"N/A"),p(j,()=>b.memory||"N/A"),ne(()=>et(w,"title",b.name)),l})()}})),v})();return(()=>{var v=Uf(),b=v.firstChild,S=b.firstChild,y=S.nextSibling,l=y.firstChild,a=l.nextSibling,o=b.nextSibling,c=o.firstChild,m=c.firstChild,w=m.nextSibling,k=c.nextSibling,A=k.firstChild,x=A.nextSibling,C=k.nextSibling,I=C.firstChild,R=I.nextSibling,D=C.nextSibling,j=D.firstChild,M=j.nextSibling;return p(l,T(Ve,{each:["card","list","grid"],children:P=>(()=>{var L=Vf(),F=L.firstChild;return L.$$click=()=>_(P),p(L,T(i,{mode:P}),F),p(F,P),ne($=>{var B=`px-3 py-2 flex items-center gap-2 text-sm transition-colors ${d()===P?"bg-k8s-blue text-white":"text-gray-400 hover:text-white hover:bg-k8s-dark"}`,H=`${P.charAt(0).toUpperCase()+P.slice(1)} View`;return B!==$.e&&Ue(L,$.e=B),H!==$.t&&et(L,"title",$.t=H),$},{e:void 0,t:void 0}),L})()})),a.$$click=P=>{const L=P.currentTarget;L.classList.add("refreshing"),setTimeout(()=>L.classList.remove("refreshing"),500),po()},p(w,()=>s().total),p(x,()=>s().ready),p(R,()=>s().notReady),p(M,()=>s().controlPlane),p(v,T(ee,{get when(){return!bs.loading},get fallback(){return Wf()},get children(){return T(ci,{get children(){return[T(Xt,{get when(){return d()==="card"},get children(){return T(u,{})}}),T(Xt,{get when(){return d()==="list"},get children(){return T(f,{})}}),T(Xt,{get when(){return d()==="grid"},get children(){return T(g,{})}})]}})}}),null),p(v,T(Jt,{get isOpen(){return r()},onClose:()=>n(!1),resourceType:"node",get name(){return e()?.name||""}}),null),v})()};lt(["click"]);var Kf={value:()=>{}};function Ls(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new Qs(r)}function Qs(e){this._=e}function Yf(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",d=r.indexOf(".");if(d>=0&&(n=r.slice(d+1),r=r.slice(0,d)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}Qs.prototype=Ls.prototype={constructor:Qs,on:function(e,t){var r=this._,n=Yf(e+"",r),d,_=-1,h=n.length;if(arguments.length<2){for(;++_<h;)if((d=(e=n[_]).type)&&(d=Gf(r[d],e.name)))return d;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++_<h;)if(d=(e=n[_]).type)r[d]=dl(r[d],e.name,t);else if(t==null)for(d in r)r[d]=dl(r[d],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new Qs(e)},call:function(e,t){if((d=arguments.length-2)>0)for(var r=new Array(d),n=0,d,_;n<d;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(_=this._[e],n=0,d=_.length;n<d;++n)_[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],d=0,_=n.length;d<_;++d)n[d].value.apply(t,r)}};function Gf(e,t){for(var r=0,n=e.length,d;r<n;++r)if((d=e[r]).name===t)return d.value}function dl(e,t,r){for(var n=0,d=e.length;n<d;++n)if(e[n].name===t){e[n]=Kf,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var en="http://www.w3.org/1999/xhtml";const hl={svg:"http://www.w3.org/2000/svg",xhtml:en,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Si(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),hl.hasOwnProperty(t)?{space:hl[t],local:e}:e}function Xf(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===en&&t.documentElement.namespaceURI===en?t.createElement(e):t.createElementNS(r,e)}}function Jf(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function bo(e){var t=Si(e);return(t.local?Jf:Xf)(t)}function Zf(){}function fn(e){return e==null?Zf:function(){return this.querySelector(e)}}function Qf(e){typeof e!="function"&&(e=fn(e));for(var t=this._groups,r=t.length,n=new Array(r),d=0;d<r;++d)for(var _=t[d],h=_.length,s=n[d]=new Array(h),i,u,f=0;f<h;++f)(i=_[f])&&(u=e.call(i,i.__data__,f,_))&&("__data__"in i&&(u.__data__=i.__data__),s[f]=u);return new Kt(n,this._parents)}function eg(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function tg(){return[]}function yo(e){return e==null?tg:function(){return this.querySelectorAll(e)}}function rg(e){return function(){return eg(e.apply(this,arguments))}}function sg(e){typeof e=="function"?e=rg(e):e=yo(e);for(var t=this._groups,r=t.length,n=[],d=[],_=0;_<r;++_)for(var h=t[_],s=h.length,i,u=0;u<s;++u)(i=h[u])&&(n.push(e.call(i,i.__data__,u,h)),d.push(i));return new Kt(n,d)}function xo(e){return function(){return this.matches(e)}}function wo(e){return function(t){return t.matches(e)}}var ig=Array.prototype.find;function ng(e){return function(){return ig.call(this.children,e)}}function lg(){return this.firstElementChild}function og(e){return this.select(e==null?lg:ng(typeof e=="function"?e:wo(e)))}var ag=Array.prototype.filter;function cg(){return Array.from(this.children)}function dg(e){return function(){return ag.call(this.children,e)}}function hg(e){return this.selectAll(e==null?cg:dg(typeof e=="function"?e:wo(e)))}function ug(e){typeof e!="function"&&(e=xo(e));for(var t=this._groups,r=t.length,n=new Array(r),d=0;d<r;++d)for(var _=t[d],h=_.length,s=n[d]=[],i,u=0;u<h;++u)(i=_[u])&&e.call(i,i.__data__,u,_)&&s.push(i);return new Kt(n,this._parents)}function So(e){return new Array(e.length)}function fg(){return new Kt(this._enter||this._groups.map(So),this._parents)}function hi(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}hi.prototype={constructor:hi,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function gg(e){return function(){return e}}function pg(e,t,r,n,d,_){for(var h=0,s,i=t.length,u=_.length;h<u;++h)(s=t[h])?(s.__data__=_[h],n[h]=s):r[h]=new hi(e,_[h]);for(;h<i;++h)(s=t[h])&&(d[h]=s)}function vg(e,t,r,n,d,_,h){var s,i,u=new Map,f=t.length,g=_.length,v=new Array(f),b;for(s=0;s<f;++s)(i=t[s])&&(v[s]=b=h.call(i,i.__data__,s,t)+"",u.has(b)?d[s]=i:u.set(b,i));for(s=0;s<g;++s)b=h.call(e,_[s],s,_)+"",(i=u.get(b))?(n[s]=i,i.__data__=_[s],u.delete(b)):r[s]=new hi(e,_[s]);for(s=0;s<f;++s)(i=t[s])&&u.get(v[s])===i&&(d[s]=i)}function mg(e){return e.__data__}function _g(e,t){if(!arguments.length)return Array.from(this,mg);var r=t?vg:pg,n=this._parents,d=this._groups;typeof e!="function"&&(e=gg(e));for(var _=d.length,h=new Array(_),s=new Array(_),i=new Array(_),u=0;u<_;++u){var f=n[u],g=d[u],v=g.length,b=bg(e.call(f,f&&f.__data__,u,n)),S=b.length,y=s[u]=new Array(S),l=h[u]=new Array(S),a=i[u]=new Array(v);r(f,g,y,l,a,b,t);for(var o=0,c=0,m,w;o<S;++o)if(m=y[o]){for(o>=c&&(c=o+1);!(w=l[c])&&++c<S;);m._next=w||null}}return h=new Kt(h,n),h._enter=s,h._exit=i,h}function bg(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function yg(){return new Kt(this._exit||this._groups.map(So),this._parents)}function xg(e,t,r){var n=this.enter(),d=this,_=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(d=t(d),d&&(d=d.selection())),r==null?_.remove():r(_),n&&d?n.merge(d).order():d}function wg(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,d=r.length,_=n.length,h=Math.min(d,_),s=new Array(d),i=0;i<h;++i)for(var u=r[i],f=n[i],g=u.length,v=s[i]=new Array(g),b,S=0;S<g;++S)(b=u[S]||f[S])&&(v[S]=b);for(;i<d;++i)s[i]=r[i];return new Kt(s,this._parents)}function Sg(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],d=n.length-1,_=n[d],h;--d>=0;)(h=n[d])&&(_&&h.compareDocumentPosition(_)^4&&_.parentNode.insertBefore(h,_),_=h);return this}function $g(e){e||(e=Cg);function t(g,v){return g&&v?e(g.__data__,v.__data__):!g-!v}for(var r=this._groups,n=r.length,d=new Array(n),_=0;_<n;++_){for(var h=r[_],s=h.length,i=d[_]=new Array(s),u,f=0;f<s;++f)(u=h[f])&&(i[f]=u);i.sort(t)}return new Kt(d,this._parents).order()}function Cg(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function kg(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Eg(){return Array.from(this)}function Ag(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],d=0,_=n.length;d<_;++d){var h=n[d];if(h)return h}return null}function Lg(){let e=0;for(const t of this)++e;return e}function Mg(){return!this.node()}function Dg(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var d=t[r],_=0,h=d.length,s;_<h;++_)(s=d[_])&&e.call(s,s.__data__,_,d);return this}function Rg(e){return function(){this.removeAttribute(e)}}function Tg(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Pg(e,t){return function(){this.setAttribute(e,t)}}function Ig(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Bg(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function Og(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function Hg(e,t){var r=Si(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?Tg:Rg:typeof t=="function"?r.local?Og:Bg:r.local?Ig:Pg)(r,t))}function $o(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ng(e){return function(){this.style.removeProperty(e)}}function zg(e,t,r){return function(){this.style.setProperty(e,t,r)}}function Fg(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function jg(e,t,r){return arguments.length>1?this.each((t==null?Ng:typeof t=="function"?Fg:zg)(e,t,r??"")):is(this.node(),e)}function is(e,t){return e.style.getPropertyValue(t)||$o(e).getComputedStyle(e,null).getPropertyValue(t)}function Ug(e){return function(){delete this[e]}}function Vg(e,t){return function(){this[e]=t}}function Wg(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function qg(e,t){return arguments.length>1?this.each((t==null?Ug:typeof t=="function"?Wg:Vg)(e,t)):this.node()[e]}function Co(e){return e.trim().split(/^|\s+/)}function gn(e){return e.classList||new ko(e)}function ko(e){this._node=e,this._names=Co(e.getAttribute("class")||"")}ko.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Eo(e,t){for(var r=gn(e),n=-1,d=t.length;++n<d;)r.add(t[n])}function Ao(e,t){for(var r=gn(e),n=-1,d=t.length;++n<d;)r.remove(t[n])}function Kg(e){return function(){Eo(this,e)}}function Yg(e){return function(){Ao(this,e)}}function Gg(e,t){return function(){(t.apply(this,arguments)?Eo:Ao)(this,e)}}function Xg(e,t){var r=Co(e+"");if(arguments.length<2){for(var n=gn(this.node()),d=-1,_=r.length;++d<_;)if(!n.contains(r[d]))return!1;return!0}return this.each((typeof t=="function"?Gg:t?Kg:Yg)(r,t))}function Jg(){this.textContent=""}function Zg(e){return function(){this.textContent=e}}function Qg(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function ep(e){return arguments.length?this.each(e==null?Jg:(typeof e=="function"?Qg:Zg)(e)):this.node().textContent}function tp(){this.innerHTML=""}function rp(e){return function(){this.innerHTML=e}}function sp(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ip(e){return arguments.length?this.each(e==null?tp:(typeof e=="function"?sp:rp)(e)):this.node().innerHTML}function np(){this.nextSibling&&this.parentNode.appendChild(this)}function lp(){return this.each(np)}function op(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ap(){return this.each(op)}function cp(e){var t=typeof e=="function"?e:bo(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function dp(){return null}function hp(e,t){var r=typeof e=="function"?e:bo(e),n=t==null?dp:typeof t=="function"?t:fn(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function up(){var e=this.parentNode;e&&e.removeChild(this)}function fp(){return this.each(up)}function gp(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function pp(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function vp(e){return this.select(e?pp:gp)}function mp(e){return arguments.length?this.property("__data__",e):this.node().__data__}function _p(e){return function(t){e.call(this,t,this.__data__)}}function bp(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function yp(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,d=t.length,_;r<d;++r)_=t[r],(!e.type||_.type===e.type)&&_.name===e.name?this.removeEventListener(_.type,_.listener,_.options):t[++n]=_;++n?t.length=n:delete this.__on}}}function xp(e,t,r){return function(){var n=this.__on,d,_=_p(t);if(n){for(var h=0,s=n.length;h<s;++h)if((d=n[h]).type===e.type&&d.name===e.name){this.removeEventListener(d.type,d.listener,d.options),this.addEventListener(d.type,d.listener=_,d.options=r),d.value=t;return}}this.addEventListener(e.type,_,r),d={type:e.type,name:e.name,value:t,listener:_,options:r},n?n.push(d):this.__on=[d]}}function wp(e,t,r){var n=bp(e+""),d,_=n.length,h;if(arguments.length<2){var s=this.node().__on;if(s){for(var i=0,u=s.length,f;i<u;++i)for(d=0,f=s[i];d<_;++d)if((h=n[d]).type===f.type&&h.name===f.name)return f.value}return}for(s=t?xp:yp,d=0;d<_;++d)this.each(s(n[d],t,r));return this}function Lo(e,t,r){var n=$o(e),d=n.CustomEvent;typeof d=="function"?d=new d(t,r):(d=n.document.createEvent("Event"),r?(d.initEvent(t,r.bubbles,r.cancelable),d.detail=r.detail):d.initEvent(t,!1,!1)),e.dispatchEvent(d)}function Sp(e,t){return function(){return Lo(this,e,t)}}function $p(e,t){return function(){return Lo(this,e,t.apply(this,arguments))}}function Cp(e,t){return this.each((typeof t=="function"?$p:Sp)(e,t))}function*kp(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],d=0,_=n.length,h;d<_;++d)(h=n[d])&&(yield h)}var Mo=[null];function Kt(e,t){this._groups=e,this._parents=t}function Ms(){return new Kt([[document.documentElement]],Mo)}function Ep(){return this}Kt.prototype=Ms.prototype={constructor:Kt,select:Qf,selectAll:sg,selectChild:og,selectChildren:hg,filter:ug,data:_g,enter:fg,exit:yg,join:xg,merge:wg,selection:Ep,order:Sg,sort:$g,call:kg,nodes:Eg,node:Ag,size:Lg,empty:Mg,each:Dg,attr:Hg,style:jg,property:qg,classed:Xg,text:ep,html:ip,raise:lp,lower:ap,append:cp,insert:hp,remove:fp,clone:vp,datum:mp,on:wp,dispatch:Cp,[Symbol.iterator]:kp};function Ot(e){return typeof e=="string"?new Kt([[document.querySelector(e)]],[document.documentElement]):new Kt([[e]],Mo)}function Ap(e){let t;for(;t=e.sourceEvent;)e=t;return e}function mr(e,t){if(e=Ap(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var d=t.getBoundingClientRect();return[e.clientX-d.left-t.clientLeft,e.clientY-d.top-t.clientTop]}}return[e.pageX,e.pageY]}const Lp={passive:!1},$s={capture:!0,passive:!1};function ji(e){e.stopImmediatePropagation()}function rs(e){e.preventDefault(),e.stopImmediatePropagation()}function Do(e){var t=e.document.documentElement,r=Ot(e).on("dragstart.drag",rs,$s);"onselectstart"in t?r.on("selectstart.drag",rs,$s):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ro(e,t){var r=e.document.documentElement,n=Ot(e).on("dragstart.drag",null);t&&(n.on("click.drag",rs,$s),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const Us=e=>()=>e;function tn(e,{sourceEvent:t,subject:r,target:n,identifier:d,active:_,x:h,y:s,dx:i,dy:u,dispatch:f}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:d,enumerable:!0,configurable:!0},active:{value:_,enumerable:!0,configurable:!0},x:{value:h,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:i,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:f}})}tn.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Mp(e){return!e.ctrlKey&&!e.button}function Dp(){return this.parentNode}function Rp(e,t){return t??{x:e.x,y:e.y}}function Tp(){return navigator.maxTouchPoints||"ontouchstart"in this}function Pp(){var e=Mp,t=Dp,r=Rp,n=Tp,d={},_=Ls("start","drag","end"),h=0,s,i,u,f,g=0;function v(m){m.on("mousedown.drag",b).filter(n).on("touchstart.drag",l).on("touchmove.drag",a,Lp).on("touchend.drag touchcancel.drag",o).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(m,w){if(!(f||!e.call(this,m,w))){var k=c(this,t.call(this,m,w),m,w,"mouse");k&&(Ot(m.view).on("mousemove.drag",S,$s).on("mouseup.drag",y,$s),Do(m.view),ji(m),u=!1,s=m.clientX,i=m.clientY,k("start",m))}}function S(m){if(rs(m),!u){var w=m.clientX-s,k=m.clientY-i;u=w*w+k*k>g}d.mouse("drag",m)}function y(m){Ot(m.view).on("mousemove.drag mouseup.drag",null),Ro(m.view,u),rs(m),d.mouse("end",m)}function l(m,w){if(e.call(this,m,w)){var k=m.changedTouches,A=t.call(this,m,w),x=k.length,C,I;for(C=0;C<x;++C)(I=c(this,A,m,w,k[C].identifier,k[C]))&&(ji(m),I("start",m,k[C]))}}function a(m){var w=m.changedTouches,k=w.length,A,x;for(A=0;A<k;++A)(x=d[w[A].identifier])&&(rs(m),x("drag",m,w[A]))}function o(m){var w=m.changedTouches,k=w.length,A,x;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),A=0;A<k;++A)(x=d[w[A].identifier])&&(ji(m),x("end",m,w[A]))}function c(m,w,k,A,x,C){var I=_.copy(),R=mr(C||k,w),D,j,M;if((M=r.call(m,new tn("beforestart",{sourceEvent:k,target:v,identifier:x,active:h,x:R[0],y:R[1],dx:0,dy:0,dispatch:I}),A))!=null)return D=M.x-R[0]||0,j=M.y-R[1]||0,function P(L,F,$){var B=R,H;switch(L){case"start":d[x]=P,H=h++;break;case"end":delete d[x],--h;case"drag":R=mr($||F,w),H=h;break}I.call(L,m,new tn(L,{sourceEvent:F,subject:M,target:v,identifier:x,active:H,x:R[0]+D,y:R[1]+j,dx:R[0]-B[0],dy:R[1]-B[1],dispatch:I}),A)}}return v.filter=function(m){return arguments.length?(e=typeof m=="function"?m:Us(!!m),v):e},v.container=function(m){return arguments.length?(t=typeof m=="function"?m:Us(m),v):t},v.subject=function(m){return arguments.length?(r=typeof m=="function"?m:Us(m),v):r},v.touchable=function(m){return arguments.length?(n=typeof m=="function"?m:Us(!!m),v):n},v.on=function(){var m=_.on.apply(_,arguments);return m===_?v:m},v.clickDistance=function(m){return arguments.length?(g=(m=+m)*m,v):Math.sqrt(g)},v}function pn(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function To(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Ds(){}var Cs=.7,ui=1/Cs,ss="\\s*([+-]?\\d+)\\s*",ks="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ar="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ip=/^#([0-9a-f]{3,8})$/,Bp=new RegExp(`^rgb\\(${ss},${ss},${ss}\\)$`),Op=new RegExp(`^rgb\\(${ar},${ar},${ar}\\)$`),Hp=new RegExp(`^rgba\\(${ss},${ss},${ss},${ks}\\)$`),Np=new RegExp(`^rgba\\(${ar},${ar},${ar},${ks}\\)$`),zp=new RegExp(`^hsl\\(${ks},${ar},${ar}\\)$`),Fp=new RegExp(`^hsla\\(${ks},${ar},${ar},${ks}\\)$`),ul={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};pn(Ds,Es,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:fl,formatHex:fl,formatHex8:jp,formatHsl:Up,formatRgb:gl,toString:gl});function fl(){return this.rgb().formatHex()}function jp(){return this.rgb().formatHex8()}function Up(){return Po(this).formatHsl()}function gl(){return this.rgb().formatRgb()}function Es(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Ip.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?pl(t):r===3?new jt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Vs(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Vs(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Bp.exec(e))?new jt(t[1],t[2],t[3],1):(t=Op.exec(e))?new jt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Hp.exec(e))?Vs(t[1],t[2],t[3],t[4]):(t=Np.exec(e))?Vs(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=zp.exec(e))?_l(t[1],t[2]/100,t[3]/100,1):(t=Fp.exec(e))?_l(t[1],t[2]/100,t[3]/100,t[4]):ul.hasOwnProperty(e)?pl(ul[e]):e==="transparent"?new jt(NaN,NaN,NaN,0):null}function pl(e){return new jt(e>>16&255,e>>8&255,e&255,1)}function Vs(e,t,r,n){return n<=0&&(e=t=r=NaN),new jt(e,t,r,n)}function Vp(e){return e instanceof Ds||(e=Es(e)),e?(e=e.rgb(),new jt(e.r,e.g,e.b,e.opacity)):new jt}function rn(e,t,r,n){return arguments.length===1?Vp(e):new jt(e,t,r,n??1)}function jt(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}pn(jt,rn,To(Ds,{brighter(e){return e=e==null?ui:Math.pow(ui,e),new jt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Cs:Math.pow(Cs,e),new jt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new jt(Fr(this.r),Fr(this.g),Fr(this.b),fi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vl,formatHex:vl,formatHex8:Wp,formatRgb:ml,toString:ml}));function vl(){return`#${Nr(this.r)}${Nr(this.g)}${Nr(this.b)}`}function Wp(){return`#${Nr(this.r)}${Nr(this.g)}${Nr(this.b)}${Nr((isNaN(this.opacity)?1:this.opacity)*255)}`}function ml(){const e=fi(this.opacity);return`${e===1?"rgb(":"rgba("}${Fr(this.r)}, ${Fr(this.g)}, ${Fr(this.b)}${e===1?")":`, ${e})`}`}function fi(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Fr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Nr(e){return e=Fr(e),(e<16?"0":"")+e.toString(16)}function _l(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new er(e,t,r,n)}function Po(e){if(e instanceof er)return new er(e.h,e.s,e.l,e.opacity);if(e instanceof Ds||(e=Es(e)),!e)return new er;if(e instanceof er)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,d=Math.min(t,r,n),_=Math.max(t,r,n),h=NaN,s=_-d,i=(_+d)/2;return s?(t===_?h=(r-n)/s+(r<n)*6:r===_?h=(n-t)/s+2:h=(t-r)/s+4,s/=i<.5?_+d:2-_-d,h*=60):s=i>0&&i<1?0:h,new er(h,s,i,e.opacity)}function qp(e,t,r,n){return arguments.length===1?Po(e):new er(e,t,r,n??1)}function er(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}pn(er,qp,To(Ds,{brighter(e){return e=e==null?ui:Math.pow(ui,e),new er(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Cs:Math.pow(Cs,e),new er(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,d=2*r-n;return new jt(Ui(e>=240?e-240:e+120,d,n),Ui(e,d,n),Ui(e<120?e+240:e-120,d,n),this.opacity)},clamp(){return new er(bl(this.h),Ws(this.s),Ws(this.l),fi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=fi(this.opacity);return`${e===1?"hsl(":"hsla("}${bl(this.h)}, ${Ws(this.s)*100}%, ${Ws(this.l)*100}%${e===1?")":`, ${e})`}`}}));function bl(e){return e=(e||0)%360,e<0?e+360:e}function Ws(e){return Math.max(0,Math.min(1,e||0))}function Ui(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Io=e=>()=>e;function Kp(e,t){return function(r){return e+r*t}}function Yp(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function Gp(e){return(e=+e)==1?Bo:function(t,r){return r-t?Yp(t,r,e):Io(isNaN(t)?r:t)}}function Bo(e,t){var r=t-e;return r?Kp(e,r):Io(isNaN(e)?t:e)}const yl=function e(t){var r=Gp(t);function n(d,_){var h=r((d=rn(d)).r,(_=rn(_)).r),s=r(d.g,_.g),i=r(d.b,_.b),u=Bo(d.opacity,_.opacity);return function(f){return d.r=h(f),d.g=s(f),d.b=i(f),d.opacity=u(f),d+""}}return n.gamma=e,n}(1);function Ar(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var sn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vi=new RegExp(sn.source,"g");function Xp(e){return function(){return e}}function Jp(e){return function(t){return e(t)+""}}function Zp(e,t){var r=sn.lastIndex=Vi.lastIndex=0,n,d,_,h=-1,s=[],i=[];for(e=e+"",t=t+"";(n=sn.exec(e))&&(d=Vi.exec(t));)(_=d.index)>r&&(_=t.slice(r,_),s[h]?s[h]+=_:s[++h]=_),(n=n[0])===(d=d[0])?s[h]?s[h]+=d:s[++h]=d:(s[++h]=null,i.push({i:h,x:Ar(n,d)})),r=Vi.lastIndex;return r<t.length&&(_=t.slice(r),s[h]?s[h]+=_:s[++h]=_),s.length<2?i[0]?Jp(i[0].x):Xp(t):(t=i.length,function(u){for(var f=0,g;f<t;++f)s[(g=i[f]).i]=g.x(u);return s.join("")})}var xl=180/Math.PI,nn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Oo(e,t,r,n,d,_){var h,s,i;return(h=Math.sqrt(e*e+t*t))&&(e/=h,t/=h),(i=e*r+t*n)&&(r-=e*i,n-=t*i),(s=Math.sqrt(r*r+n*n))&&(r/=s,n/=s,i/=s),e*n<t*r&&(e=-e,t=-t,i=-i,h=-h),{translateX:d,translateY:_,rotate:Math.atan2(t,e)*xl,skewX:Math.atan(i)*xl,scaleX:h,scaleY:s}}var qs;function Qp(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?nn:Oo(t.a,t.b,t.c,t.d,t.e,t.f)}function ev(e){return e==null||(qs||(qs=document.createElementNS("http://www.w3.org/2000/svg","g")),qs.setAttribute("transform",e),!(e=qs.transform.baseVal.consolidate()))?nn:(e=e.matrix,Oo(e.a,e.b,e.c,e.d,e.e,e.f))}function Ho(e,t,r,n){function d(u){return u.length?u.pop()+" ":""}function _(u,f,g,v,b,S){if(u!==g||f!==v){var y=b.push("translate(",null,t,null,r);S.push({i:y-4,x:Ar(u,g)},{i:y-2,x:Ar(f,v)})}else(g||v)&&b.push("translate("+g+t+v+r)}function h(u,f,g,v){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),v.push({i:g.push(d(g)+"rotate(",null,n)-2,x:Ar(u,f)})):f&&g.push(d(g)+"rotate("+f+n)}function s(u,f,g,v){u!==f?v.push({i:g.push(d(g)+"skewX(",null,n)-2,x:Ar(u,f)}):f&&g.push(d(g)+"skewX("+f+n)}function i(u,f,g,v,b,S){if(u!==g||f!==v){var y=b.push(d(b)+"scale(",null,",",null,")");S.push({i:y-4,x:Ar(u,g)},{i:y-2,x:Ar(f,v)})}else(g!==1||v!==1)&&b.push(d(b)+"scale("+g+","+v+")")}return function(u,f){var g=[],v=[];return u=e(u),f=e(f),_(u.translateX,u.translateY,f.translateX,f.translateY,g,v),h(u.rotate,f.rotate,g,v),s(u.skewX,f.skewX,g,v),i(u.scaleX,u.scaleY,f.scaleX,f.scaleY,g,v),u=f=null,function(b){for(var S=-1,y=v.length,l;++S<y;)g[(l=v[S]).i]=l.x(b);return g.join("")}}}var tv=Ho(Qp,"px, ","px)","deg)"),rv=Ho(ev,", ",")",")"),sv=1e-12;function wl(e){return((e=Math.exp(e))+1/e)/2}function iv(e){return((e=Math.exp(e))-1/e)/2}function nv(e){return((e=Math.exp(2*e))-1)/(e+1)}const lv=function e(t,r,n){function d(_,h){var s=_[0],i=_[1],u=_[2],f=h[0],g=h[1],v=h[2],b=f-s,S=g-i,y=b*b+S*S,l,a;if(y<sv)a=Math.log(v/u)/t,l=function(A){return[s+A*b,i+A*S,u*Math.exp(t*A*a)]};else{var o=Math.sqrt(y),c=(v*v-u*u+n*y)/(2*u*r*o),m=(v*v-u*u-n*y)/(2*v*r*o),w=Math.log(Math.sqrt(c*c+1)-c),k=Math.log(Math.sqrt(m*m+1)-m);a=(k-w)/t,l=function(A){var x=A*a,C=wl(w),I=u/(r*o)*(C*nv(t*x+w)-iv(w));return[s+I*b,i+I*S,u*C/wl(t*x+w)]}}return l.duration=a*1e3*t/Math.SQRT2,l}return d.rho=function(_){var h=Math.max(.001,+_),s=h*h,i=s*s;return e(h,s,i)},d}(Math.SQRT2,2,4);var ns=0,vs=0,us=0,No=1e3,gi,ms,pi=0,Ur=0,$i=0,As=typeof performance=="object"&&performance.now?performance:Date,zo=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function vn(){return Ur||(zo(ov),Ur=As.now()+$i)}function ov(){Ur=0}function vi(){this._call=this._time=this._next=null}vi.prototype=mn.prototype={constructor:vi,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?vn():+r)+(t==null?0:+t),!this._next&&ms!==this&&(ms?ms._next=this:gi=this,ms=this),this._call=e,this._time=r,ln()},stop:function(){this._call&&(this._call=null,this._time=1/0,ln())}};function mn(e,t,r){var n=new vi;return n.restart(e,t,r),n}function av(){vn(),++ns;for(var e=gi,t;e;)(t=Ur-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ns}function Sl(){Ur=(pi=As.now())+$i,ns=vs=0;try{av()}finally{ns=0,dv(),Ur=0}}function cv(){var e=As.now(),t=e-pi;t>No&&($i-=t,pi=e)}function dv(){for(var e,t=gi,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:gi=r);ms=e,ln(n)}function ln(e){if(!ns){vs&&(vs=clearTimeout(vs));var t=e-Ur;t>24?(e<1/0&&(vs=setTimeout(Sl,e-As.now()-$i)),us&&(us=clearInterval(us))):(us||(pi=As.now(),us=setInterval(cv,No)),ns=1,zo(Sl))}}function $l(e,t,r){var n=new vi;return t=t==null?0:+t,n.restart(d=>{n.stop(),e(d+t)},t,r),n}var hv=Ls("start","end","cancel","interrupt"),uv=[],Fo=0,Cl=1,on=2,ei=3,kl=4,an=5,ti=6;function Ci(e,t,r,n,d,_){var h=e.__transition;if(!h)e.__transition={};else if(r in h)return;fv(e,r,{name:t,index:n,group:d,on:hv,tween:uv,time:_.time,delay:_.delay,duration:_.duration,ease:_.ease,timer:null,state:Fo})}function _n(e,t){var r=ir(e,t);if(r.state>Fo)throw new Error("too late; already scheduled");return r}function dr(e,t){var r=ir(e,t);if(r.state>ei)throw new Error("too late; already running");return r}function ir(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function fv(e,t,r){var n=e.__transition,d;n[t]=r,r.timer=mn(_,0,r.time);function _(u){r.state=Cl,r.timer.restart(h,r.delay,r.time),r.delay<=u&&h(u-r.delay)}function h(u){var f,g,v,b;if(r.state!==Cl)return i();for(f in n)if(b=n[f],b.name===r.name){if(b.state===ei)return $l(h);b.state===kl?(b.state=ti,b.timer.stop(),b.on.call("interrupt",e,e.__data__,b.index,b.group),delete n[f]):+f<t&&(b.state=ti,b.timer.stop(),b.on.call("cancel",e,e.__data__,b.index,b.group),delete n[f])}if($l(function(){r.state===ei&&(r.state=kl,r.timer.restart(s,r.delay,r.time),s(u))}),r.state=on,r.on.call("start",e,e.__data__,r.index,r.group),r.state===on){for(r.state=ei,d=new Array(v=r.tween.length),f=0,g=-1;f<v;++f)(b=r.tween[f].value.call(e,e.__data__,r.index,r.group))&&(d[++g]=b);d.length=g+1}}function s(u){for(var f=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(i),r.state=an,1),g=-1,v=d.length;++g<v;)d[g].call(e,f);r.state===an&&(r.on.call("end",e,e.__data__,r.index,r.group),i())}function i(){r.state=ti,r.timer.stop(),delete n[t];for(var u in n)return;delete e.__transition}}function ri(e,t){var r=e.__transition,n,d,_=!0,h;if(r){t=t==null?null:t+"";for(h in r){if((n=r[h]).name!==t){_=!1;continue}d=n.state>on&&n.state<an,n.state=ti,n.timer.stop(),n.on.call(d?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[h]}_&&delete e.__transition}}function gv(e){return this.each(function(){ri(this,e)})}function pv(e,t){var r,n;return function(){var d=dr(this,e),_=d.tween;if(_!==r){n=r=_;for(var h=0,s=n.length;h<s;++h)if(n[h].name===t){n=n.slice(),n.splice(h,1);break}}d.tween=n}}function vv(e,t,r){var n,d;if(typeof r!="function")throw new Error;return function(){var _=dr(this,e),h=_.tween;if(h!==n){d=(n=h).slice();for(var s={name:t,value:r},i=0,u=d.length;i<u;++i)if(d[i].name===t){d[i]=s;break}i===u&&d.push(s)}_.tween=d}}function mv(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=ir(this.node(),r).tween,d=0,_=n.length,h;d<_;++d)if((h=n[d]).name===e)return h.value;return null}return this.each((t==null?pv:vv)(r,e,t))}function bn(e,t,r){var n=e._id;return e.each(function(){var d=dr(this,n);(d.value||(d.value={}))[t]=r.apply(this,arguments)}),function(d){return ir(d,n).value[t]}}function jo(e,t){var r;return(typeof t=="number"?Ar:t instanceof Es?yl:(r=Es(t))?(t=r,yl):Zp)(e,t)}function _v(e){return function(){this.removeAttribute(e)}}function bv(e){return function(){this.removeAttributeNS(e.space,e.local)}}function yv(e,t,r){var n,d=r+"",_;return function(){var h=this.getAttribute(e);return h===d?null:h===n?_:_=t(n=h,r)}}function xv(e,t,r){var n,d=r+"",_;return function(){var h=this.getAttributeNS(e.space,e.local);return h===d?null:h===n?_:_=t(n=h,r)}}function wv(e,t,r){var n,d,_;return function(){var h,s=r(this),i;return s==null?void this.removeAttribute(e):(h=this.getAttribute(e),i=s+"",h===i?null:h===n&&i===d?_:(d=i,_=t(n=h,s)))}}function Sv(e,t,r){var n,d,_;return function(){var h,s=r(this),i;return s==null?void this.removeAttributeNS(e.space,e.local):(h=this.getAttributeNS(e.space,e.local),i=s+"",h===i?null:h===n&&i===d?_:(d=i,_=t(n=h,s)))}}function $v(e,t){var r=Si(e),n=r==="transform"?rv:jo;return this.attrTween(e,typeof t=="function"?(r.local?Sv:wv)(r,n,bn(this,"attr."+e,t)):t==null?(r.local?bv:_v)(r):(r.local?xv:yv)(r,n,t))}function Cv(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function kv(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function Ev(e,t){var r,n;function d(){var _=t.apply(this,arguments);return _!==n&&(r=(n=_)&&kv(e,_)),r}return d._value=t,d}function Av(e,t){var r,n;function d(){var _=t.apply(this,arguments);return _!==n&&(r=(n=_)&&Cv(e,_)),r}return d._value=t,d}function Lv(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=Si(e);return this.tween(r,(n.local?Ev:Av)(n,t))}function Mv(e,t){return function(){_n(this,e).delay=+t.apply(this,arguments)}}function Dv(e,t){return t=+t,function(){_n(this,e).delay=t}}function Rv(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Mv:Dv)(t,e)):ir(this.node(),t).delay}function Tv(e,t){return function(){dr(this,e).duration=+t.apply(this,arguments)}}function Pv(e,t){return t=+t,function(){dr(this,e).duration=t}}function Iv(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Tv:Pv)(t,e)):ir(this.node(),t).duration}function Bv(e,t){if(typeof t!="function")throw new Error;return function(){dr(this,e).ease=t}}function Ov(e){var t=this._id;return arguments.length?this.each(Bv(t,e)):ir(this.node(),t).ease}function Hv(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;dr(this,e).ease=r}}function Nv(e){if(typeof e!="function")throw new Error;return this.each(Hv(this._id,e))}function zv(e){typeof e!="function"&&(e=xo(e));for(var t=this._groups,r=t.length,n=new Array(r),d=0;d<r;++d)for(var _=t[d],h=_.length,s=n[d]=[],i,u=0;u<h;++u)(i=_[u])&&e.call(i,i.__data__,u,_)&&s.push(i);return new yr(n,this._parents,this._name,this._id)}function Fv(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,d=r.length,_=Math.min(n,d),h=new Array(n),s=0;s<_;++s)for(var i=t[s],u=r[s],f=i.length,g=h[s]=new Array(f),v,b=0;b<f;++b)(v=i[b]||u[b])&&(g[b]=v);for(;s<n;++s)h[s]=t[s];return new yr(h,this._parents,this._name,this._id)}function jv(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function Uv(e,t,r){var n,d,_=jv(t)?_n:dr;return function(){var h=_(this,e),s=h.on;s!==n&&(d=(n=s).copy()).on(t,r),h.on=d}}function Vv(e,t){var r=this._id;return arguments.length<2?ir(this.node(),r).on.on(e):this.each(Uv(r,e,t))}function Wv(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function qv(){return this.on("end.remove",Wv(this._id))}function Kv(e){var t=this._name,r=this._id;typeof e!="function"&&(e=fn(e));for(var n=this._groups,d=n.length,_=new Array(d),h=0;h<d;++h)for(var s=n[h],i=s.length,u=_[h]=new Array(i),f,g,v=0;v<i;++v)(f=s[v])&&(g=e.call(f,f.__data__,v,s))&&("__data__"in f&&(g.__data__=f.__data__),u[v]=g,Ci(u[v],t,r,v,u,ir(f,r)));return new yr(_,this._parents,t,r)}function Yv(e){var t=this._name,r=this._id;typeof e!="function"&&(e=yo(e));for(var n=this._groups,d=n.length,_=[],h=[],s=0;s<d;++s)for(var i=n[s],u=i.length,f,g=0;g<u;++g)if(f=i[g]){for(var v=e.call(f,f.__data__,g,i),b,S=ir(f,r),y=0,l=v.length;y<l;++y)(b=v[y])&&Ci(b,t,r,y,v,S);_.push(v),h.push(f)}return new yr(_,h,t,r)}var Gv=Ms.prototype.constructor;function Xv(){return new Gv(this._groups,this._parents)}function Jv(e,t){var r,n,d;return function(){var _=is(this,e),h=(this.style.removeProperty(e),is(this,e));return _===h?null:_===r&&h===n?d:d=t(r=_,n=h)}}function Uo(e){return function(){this.style.removeProperty(e)}}function Zv(e,t,r){var n,d=r+"",_;return function(){var h=is(this,e);return h===d?null:h===n?_:_=t(n=h,r)}}function Qv(e,t,r){var n,d,_;return function(){var h=is(this,e),s=r(this),i=s+"";return s==null&&(i=s=(this.style.removeProperty(e),is(this,e))),h===i?null:h===n&&i===d?_:(d=i,_=t(n=h,s))}}function e0(e,t){var r,n,d,_="style."+t,h="end."+_,s;return function(){var i=dr(this,e),u=i.on,f=i.value[_]==null?s||(s=Uo(t)):void 0;(u!==r||d!==f)&&(n=(r=u).copy()).on(h,d=f),i.on=n}}function t0(e,t,r){var n=(e+="")=="transform"?tv:jo;return t==null?this.styleTween(e,Jv(e,n)).on("end.style."+e,Uo(e)):typeof t=="function"?this.styleTween(e,Qv(e,n,bn(this,"style."+e,t))).each(e0(this._id,e)):this.styleTween(e,Zv(e,n,t),r).on("end.style."+e,null)}function r0(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function s0(e,t,r){var n,d;function _(){var h=t.apply(this,arguments);return h!==d&&(n=(d=h)&&r0(e,h,r)),n}return _._value=t,_}function i0(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,s0(e,t,r??""))}function n0(e){return function(){this.textContent=e}}function l0(e){return function(){var t=e(this);this.textContent=t??""}}function o0(e){return this.tween("text",typeof e=="function"?l0(bn(this,"text",e)):n0(e==null?"":e+""))}function a0(e){return function(t){this.textContent=e.call(this,t)}}function c0(e){var t,r;function n(){var d=e.apply(this,arguments);return d!==r&&(t=(r=d)&&a0(d)),t}return n._value=e,n}function d0(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,c0(e))}function h0(){for(var e=this._name,t=this._id,r=Vo(),n=this._groups,d=n.length,_=0;_<d;++_)for(var h=n[_],s=h.length,i,u=0;u<s;++u)if(i=h[u]){var f=ir(i,t);Ci(i,e,r,u,h,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new yr(n,this._parents,e,r)}function u0(){var e,t,r=this,n=r._id,d=r.size();return new Promise(function(_,h){var s={value:h},i={value:function(){--d===0&&_()}};r.each(function(){var u=dr(this,n),f=u.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(i)),u.on=t}),d===0&&_()})}var f0=0;function yr(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function Vo(){return++f0}var vr=Ms.prototype;yr.prototype={constructor:yr,select:Kv,selectAll:Yv,selectChild:vr.selectChild,selectChildren:vr.selectChildren,filter:zv,merge:Fv,selection:Xv,transition:h0,call:vr.call,nodes:vr.nodes,node:vr.node,size:vr.size,empty:vr.empty,each:vr.each,on:Vv,attr:$v,attrTween:Lv,style:t0,styleTween:i0,text:o0,textTween:d0,remove:qv,tween:mv,delay:Rv,duration:Iv,ease:Ov,easeVarying:Nv,end:u0,[Symbol.iterator]:vr[Symbol.iterator]};function g0(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var p0={time:null,delay:0,duration:250,ease:g0};function v0(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function m0(e){var t,r;e instanceof yr?(t=e._id,e=e._name):(t=Vo(),(r=p0).time=vn(),e=e==null?null:e+"");for(var n=this._groups,d=n.length,_=0;_<d;++_)for(var h=n[_],s=h.length,i,u=0;u<s;++u)(i=h[u])&&Ci(i,e,t,u,h,r||v0(i,t));return new yr(n,this._parents,e,t)}Ms.prototype.interrupt=gv;Ms.prototype.transition=m0;function _0(e,t){var r,n=1;e==null&&(e=0),t==null&&(t=0);function d(){var _,h=r.length,s,i=0,u=0;for(_=0;_<h;++_)s=r[_],i+=s.x,u+=s.y;for(i=(i/h-e)*n,u=(u/h-t)*n,_=0;_<h;++_)s=r[_],s.x-=i,s.y-=u}return d.initialize=function(_){r=_},d.x=function(_){return arguments.length?(e=+_,d):e},d.y=function(_){return arguments.length?(t=+_,d):t},d.strength=function(_){return arguments.length?(n=+_,d):n},d}function b0(e){const t=+this._x.call(null,e),r=+this._y.call(null,e);return Wo(this.cover(t,r),t,r,e)}function Wo(e,t,r,n){if(isNaN(t)||isNaN(r))return e;var d,_=e._root,h={data:n},s=e._x0,i=e._y0,u=e._x1,f=e._y1,g,v,b,S,y,l,a,o;if(!_)return e._root=h,e;for(;_.length;)if((y=t>=(g=(s+u)/2))?s=g:u=g,(l=r>=(v=(i+f)/2))?i=v:f=v,d=_,!(_=_[a=l<<1|y]))return d[a]=h,e;if(b=+e._x.call(null,_.data),S=+e._y.call(null,_.data),t===b&&r===S)return h.next=_,d?d[a]=h:e._root=h,e;do d=d?d[a]=new Array(4):e._root=new Array(4),(y=t>=(g=(s+u)/2))?s=g:u=g,(l=r>=(v=(i+f)/2))?i=v:f=v;while((a=l<<1|y)===(o=(S>=v)<<1|b>=g));return d[o]=_,d[a]=h,e}function y0(e){var t,r,n=e.length,d,_,h=new Array(n),s=new Array(n),i=1/0,u=1/0,f=-1/0,g=-1/0;for(r=0;r<n;++r)isNaN(d=+this._x.call(null,t=e[r]))||isNaN(_=+this._y.call(null,t))||(h[r]=d,s[r]=_,d<i&&(i=d),d>f&&(f=d),_<u&&(u=_),_>g&&(g=_));if(i>f||u>g)return this;for(this.cover(i,u).cover(f,g),r=0;r<n;++r)Wo(this,h[r],s[r],e[r]);return this}function x0(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var r=this._x0,n=this._y0,d=this._x1,_=this._y1;if(isNaN(r))d=(r=Math.floor(e))+1,_=(n=Math.floor(t))+1;else{for(var h=d-r||1,s=this._root,i,u;r>e||e>=d||n>t||t>=_;)switch(u=(t<n)<<1|e<r,i=new Array(4),i[u]=s,s=i,h*=2,u){case 0:d=r+h,_=n+h;break;case 1:r=d-h,_=n+h;break;case 2:d=r+h,n=_-h;break;case 3:r=d-h,n=_-h;break}this._root&&this._root.length&&(this._root=s)}return this._x0=r,this._y0=n,this._x1=d,this._y1=_,this}function w0(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function S0(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ht(e,t,r,n,d){this.node=e,this.x0=t,this.y0=r,this.x1=n,this.y1=d}function $0(e,t,r){var n,d=this._x0,_=this._y0,h,s,i,u,f=this._x1,g=this._y1,v=[],b=this._root,S,y;for(b&&v.push(new Ht(b,d,_,f,g)),r==null?r=1/0:(d=e-r,_=t-r,f=e+r,g=t+r,r*=r);S=v.pop();)if(!(!(b=S.node)||(h=S.x0)>f||(s=S.y0)>g||(i=S.x1)<d||(u=S.y1)<_))if(b.length){var l=(h+i)/2,a=(s+u)/2;v.push(new Ht(b[3],l,a,i,u),new Ht(b[2],h,a,l,u),new Ht(b[1],l,s,i,a),new Ht(b[0],h,s,l,a)),(y=(t>=a)<<1|e>=l)&&(S=v[v.length-1],v[v.length-1]=v[v.length-1-y],v[v.length-1-y]=S)}else{var o=e-+this._x.call(null,b.data),c=t-+this._y.call(null,b.data),m=o*o+c*c;if(m<r){var w=Math.sqrt(r=m);d=e-w,_=t-w,f=e+w,g=t+w,n=b.data}}return n}function C0(e){if(isNaN(f=+this._x.call(null,e))||isNaN(g=+this._y.call(null,e)))return this;var t,r=this._root,n,d,_,h=this._x0,s=this._y0,i=this._x1,u=this._y1,f,g,v,b,S,y,l,a;if(!r)return this;if(r.length)for(;;){if((S=f>=(v=(h+i)/2))?h=v:i=v,(y=g>=(b=(s+u)/2))?s=b:u=b,t=r,!(r=r[l=y<<1|S]))return this;if(!r.length)break;(t[l+1&3]||t[l+2&3]||t[l+3&3])&&(n=t,a=l)}for(;r.data!==e;)if(d=r,!(r=r.next))return this;return(_=r.next)&&delete r.next,d?(_?d.next=_:delete d.next,this):t?(_?t[l]=_:delete t[l],(r=t[0]||t[1]||t[2]||t[3])&&r===(t[3]||t[2]||t[1]||t[0])&&!r.length&&(n?n[a]=r:this._root=r),this):(this._root=_,this)}function k0(e){for(var t=0,r=e.length;t<r;++t)this.remove(e[t]);return this}function E0(){return this._root}function A0(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function L0(e){var t=[],r,n=this._root,d,_,h,s,i;for(n&&t.push(new Ht(n,this._x0,this._y0,this._x1,this._y1));r=t.pop();)if(!e(n=r.node,_=r.x0,h=r.y0,s=r.x1,i=r.y1)&&n.length){var u=(_+s)/2,f=(h+i)/2;(d=n[3])&&t.push(new Ht(d,u,f,s,i)),(d=n[2])&&t.push(new Ht(d,_,f,u,i)),(d=n[1])&&t.push(new Ht(d,u,h,s,f)),(d=n[0])&&t.push(new Ht(d,_,h,u,f))}return this}function M0(e){var t=[],r=[],n;for(this._root&&t.push(new Ht(this._root,this._x0,this._y0,this._x1,this._y1));n=t.pop();){var d=n.node;if(d.length){var _,h=n.x0,s=n.y0,i=n.x1,u=n.y1,f=(h+i)/2,g=(s+u)/2;(_=d[0])&&t.push(new Ht(_,h,s,f,g)),(_=d[1])&&t.push(new Ht(_,f,s,i,g)),(_=d[2])&&t.push(new Ht(_,h,g,f,u)),(_=d[3])&&t.push(new Ht(_,f,g,i,u))}r.push(n)}for(;n=r.pop();)e(n.node,n.x0,n.y0,n.x1,n.y1);return this}function D0(e){return e[0]}function R0(e){return arguments.length?(this._x=e,this):this._x}function T0(e){return e[1]}function P0(e){return arguments.length?(this._y=e,this):this._y}function yn(e,t,r){var n=new xn(t??D0,r??T0,NaN,NaN,NaN,NaN);return e==null?n:n.addAll(e)}function xn(e,t,r,n,d,_){this._x=e,this._y=t,this._x0=r,this._y0=n,this._x1=d,this._y1=_,this._root=void 0}function El(e){for(var t={data:e.data},r=t;e=e.next;)r=r.next={data:e.data};return t}var Ft=yn.prototype=xn.prototype;Ft.copy=function(){var e=new xn(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,r,n;if(!t)return e;if(!t.length)return e._root=El(t),e;for(r=[{source:t,target:e._root=new Array(4)}];t=r.pop();)for(var d=0;d<4;++d)(n=t.source[d])&&(n.length?r.push({source:n,target:t.target[d]=new Array(4)}):t.target[d]=El(n));return e};Ft.add=b0;Ft.addAll=y0;Ft.cover=x0;Ft.data=w0;Ft.extent=S0;Ft.find=$0;Ft.remove=C0;Ft.removeAll=k0;Ft.root=E0;Ft.size=A0;Ft.visit=L0;Ft.visitAfter=M0;Ft.x=R0;Ft.y=P0;function Nt(e){return function(){return e}}function Lr(e){return(e()-.5)*1e-6}function I0(e){return e.x+e.vx}function B0(e){return e.y+e.vy}function O0(e){var t,r,n,d=1,_=1;typeof e!="function"&&(e=Nt(e==null?1:+e));function h(){for(var u,f=t.length,g,v,b,S,y,l,a=0;a<_;++a)for(g=yn(t,I0,B0).visitAfter(s),u=0;u<f;++u)v=t[u],y=r[v.index],l=y*y,b=v.x+v.vx,S=v.y+v.vy,g.visit(o);function o(c,m,w,k,A){var x=c.data,C=c.r,I=y+C;if(x){if(x.index>v.index){var R=b-x.x-x.vx,D=S-x.y-x.vy,j=R*R+D*D;j<I*I&&(R===0&&(R=Lr(n),j+=R*R),D===0&&(D=Lr(n),j+=D*D),j=(I-(j=Math.sqrt(j)))/j*d,v.vx+=(R*=j)*(I=(C*=C)/(l+C)),v.vy+=(D*=j)*I,x.vx-=R*(I=1-I),x.vy-=D*I)}return}return m>b+I||k<b-I||w>S+I||A<S-I}}function s(u){if(u.data)return u.r=r[u.data.index];for(var f=u.r=0;f<4;++f)u[f]&&u[f].r>u.r&&(u.r=u[f].r)}function i(){if(t){var u,f=t.length,g;for(r=new Array(f),u=0;u<f;++u)g=t[u],r[g.index]=+e(g,u,t)}}return h.initialize=function(u,f){t=u,n=f,i()},h.iterations=function(u){return arguments.length?(_=+u,h):_},h.strength=function(u){return arguments.length?(d=+u,h):d},h.radius=function(u){return arguments.length?(e=typeof u=="function"?u:Nt(+u),i(),h):e},h}function H0(e){return e.index}function Al(e,t){var r=e.get(t);if(!r)throw new Error("node not found: "+t);return r}function N0(e){var t=H0,r=g,n,d=Nt(30),_,h,s,i,u,f=1;e==null&&(e=[]);function g(l){return 1/Math.min(s[l.source.index],s[l.target.index])}function v(l){for(var a=0,o=e.length;a<f;++a)for(var c=0,m,w,k,A,x,C,I;c<o;++c)m=e[c],w=m.source,k=m.target,A=k.x+k.vx-w.x-w.vx||Lr(u),x=k.y+k.vy-w.y-w.vy||Lr(u),C=Math.sqrt(A*A+x*x),C=(C-_[c])/C*l*n[c],A*=C,x*=C,k.vx-=A*(I=i[c]),k.vy-=x*I,w.vx+=A*(I=1-I),w.vy+=x*I}function b(){if(h){var l,a=h.length,o=e.length,c=new Map(h.map((w,k)=>[t(w,k,h),w])),m;for(l=0,s=new Array(a);l<o;++l)m=e[l],m.index=l,typeof m.source!="object"&&(m.source=Al(c,m.source)),typeof m.target!="object"&&(m.target=Al(c,m.target)),s[m.source.index]=(s[m.source.index]||0)+1,s[m.target.index]=(s[m.target.index]||0)+1;for(l=0,i=new Array(o);l<o;++l)m=e[l],i[l]=s[m.source.index]/(s[m.source.index]+s[m.target.index]);n=new Array(o),S(),_=new Array(o),y()}}function S(){if(h)for(var l=0,a=e.length;l<a;++l)n[l]=+r(e[l],l,e)}function y(){if(h)for(var l=0,a=e.length;l<a;++l)_[l]=+d(e[l],l,e)}return v.initialize=function(l,a){h=l,u=a,b()},v.links=function(l){return arguments.length?(e=l,b(),v):e},v.id=function(l){return arguments.length?(t=l,v):t},v.iterations=function(l){return arguments.length?(f=+l,v):f},v.strength=function(l){return arguments.length?(r=typeof l=="function"?l:Nt(+l),S(),v):r},v.distance=function(l){return arguments.length?(d=typeof l=="function"?l:Nt(+l),y(),v):d},v}const z0=1664525,F0=1013904223,Ll=4294967296;function j0(){let e=1;return()=>(e=(z0*e+F0)%Ll)/Ll}function U0(e){return e.x}function V0(e){return e.y}var W0=10,q0=Math.PI*(3-Math.sqrt(5));function K0(e){var t,r=1,n=.001,d=1-Math.pow(n,1/300),_=0,h=.6,s=new Map,i=mn(g),u=Ls("tick","end"),f=j0();e==null&&(e=[]);function g(){v(),u.call("tick",t),r<n&&(i.stop(),u.call("end",t))}function v(y){var l,a=e.length,o;y===void 0&&(y=1);for(var c=0;c<y;++c)for(r+=(_-r)*d,s.forEach(function(m){m(r)}),l=0;l<a;++l)o=e[l],o.fx==null?o.x+=o.vx*=h:(o.x=o.fx,o.vx=0),o.fy==null?o.y+=o.vy*=h:(o.y=o.fy,o.vy=0);return t}function b(){for(var y=0,l=e.length,a;y<l;++y){if(a=e[y],a.index=y,a.fx!=null&&(a.x=a.fx),a.fy!=null&&(a.y=a.fy),isNaN(a.x)||isNaN(a.y)){var o=W0*Math.sqrt(.5+y),c=y*q0;a.x=o*Math.cos(c),a.y=o*Math.sin(c)}(isNaN(a.vx)||isNaN(a.vy))&&(a.vx=a.vy=0)}}function S(y){return y.initialize&&y.initialize(e,f),y}return b(),t={tick:v,restart:function(){return i.restart(g),t},stop:function(){return i.stop(),t},nodes:function(y){return arguments.length?(e=y,b(),s.forEach(S),t):e},alpha:function(y){return arguments.length?(r=+y,t):r},alphaMin:function(y){return arguments.length?(n=+y,t):n},alphaDecay:function(y){return arguments.length?(d=+y,t):+d},alphaTarget:function(y){return arguments.length?(_=+y,t):_},velocityDecay:function(y){return arguments.length?(h=1-y,t):1-h},randomSource:function(y){return arguments.length?(f=y,s.forEach(S),t):f},force:function(y,l){return arguments.length>1?(l==null?s.delete(y):s.set(y,S(l)),t):s.get(y)},find:function(y,l,a){var o=0,c=e.length,m,w,k,A,x;for(a==null?a=1/0:a*=a,o=0;o<c;++o)A=e[o],m=y-A.x,w=l-A.y,k=m*m+w*w,k<a&&(x=A,a=k);return x},on:function(y,l){return arguments.length>1?(u.on(y,l),t):u.on(y)}}}function Y0(){var e,t,r,n,d=Nt(-30),_,h=1,s=1/0,i=.81;function u(b){var S,y=e.length,l=yn(e,U0,V0).visitAfter(g);for(n=b,S=0;S<y;++S)t=e[S],l.visit(v)}function f(){if(e){var b,S=e.length,y;for(_=new Array(S),b=0;b<S;++b)y=e[b],_[y.index]=+d(y,b,e)}}function g(b){var S=0,y,l,a=0,o,c,m;if(b.length){for(o=c=m=0;m<4;++m)(y=b[m])&&(l=Math.abs(y.value))&&(S+=y.value,a+=l,o+=l*y.x,c+=l*y.y);b.x=o/a,b.y=c/a}else{y=b,y.x=y.data.x,y.y=y.data.y;do S+=_[y.data.index];while(y=y.next)}b.value=S}function v(b,S,y,l){if(!b.value)return!0;var a=b.x-t.x,o=b.y-t.y,c=l-S,m=a*a+o*o;if(c*c/i<m)return m<s&&(a===0&&(a=Lr(r),m+=a*a),o===0&&(o=Lr(r),m+=o*o),m<h&&(m=Math.sqrt(h*m)),t.vx+=a*b.value*n/m,t.vy+=o*b.value*n/m),!0;if(b.length||m>=s)return;(b.data!==t||b.next)&&(a===0&&(a=Lr(r),m+=a*a),o===0&&(o=Lr(r),m+=o*o),m<h&&(m=Math.sqrt(h*m)));do b.data!==t&&(c=_[b.data.index]*n/m,t.vx+=a*c,t.vy+=o*c);while(b=b.next)}return u.initialize=function(b,S){e=b,r=S,f()},u.strength=function(b){return arguments.length?(d=typeof b=="function"?b:Nt(+b),f(),u):d},u.distanceMin=function(b){return arguments.length?(h=b*b,u):Math.sqrt(h)},u.distanceMax=function(b){return arguments.length?(s=b*b,u):Math.sqrt(s)},u.theta=function(b){return arguments.length?(i=b*b,u):Math.sqrt(i)},u}function G0(e){var t=Nt(.1),r,n,d;typeof e!="function"&&(e=Nt(e==null?0:+e));function _(s){for(var i=0,u=r.length,f;i<u;++i)f=r[i],f.vx+=(d[i]-f.x)*n[i]*s}function h(){if(r){var s,i=r.length;for(n=new Array(i),d=new Array(i),s=0;s<i;++s)n[s]=isNaN(d[s]=+e(r[s],s,r))?0:+t(r[s],s,r)}}return _.initialize=function(s){r=s,h()},_.strength=function(s){return arguments.length?(t=typeof s=="function"?s:Nt(+s),h(),_):t},_.x=function(s){return arguments.length?(e=typeof s=="function"?s:Nt(+s),h(),_):e},_}function X0(e){var t=Nt(.1),r,n,d;typeof e!="function"&&(e=Nt(e==null?0:+e));function _(s){for(var i=0,u=r.length,f;i<u;++i)f=r[i],f.vy+=(d[i]-f.y)*n[i]*s}function h(){if(r){var s,i=r.length;for(n=new Array(i),d=new Array(i),s=0;s<i;++s)n[s]=isNaN(d[s]=+e(r[s],s,r))?0:+t(r[s],s,r)}}return _.initialize=function(s){r=s,h()},_.strength=function(s){return arguments.length?(t=typeof s=="function"?s:Nt(+s),h(),_):t},_.y=function(s){return arguments.length?(e=typeof s=="function"?s:Nt(+s),h(),_):e},_}const Ks=e=>()=>e;function J0(e,{sourceEvent:t,target:r,transform:n,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:d}})}function _r(e,t,r){this.k=e,this.x=t,this.y=r}_r.prototype={constructor:_r,scale:function(e){return e===1?this:new _r(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new _r(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var wn=new _r(1,0,0);_r.prototype;function Wi(e){e.stopImmediatePropagation()}function fs(e){e.preventDefault(),e.stopImmediatePropagation()}function Z0(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Q0(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Ml(){return this.__zoom||wn}function em(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function tm(){return navigator.maxTouchPoints||"ontouchstart"in this}function rm(e,t,r){var n=e.invertX(t[0][0])-r[0][0],d=e.invertX(t[1][0])-r[1][0],_=e.invertY(t[0][1])-r[0][1],h=e.invertY(t[1][1])-r[1][1];return e.translate(d>n?(n+d)/2:Math.min(0,n)||Math.max(0,d),h>_?(_+h)/2:Math.min(0,_)||Math.max(0,h))}function sm(){var e=Z0,t=Q0,r=rm,n=em,d=tm,_=[0,1/0],h=[[-1/0,-1/0],[1/0,1/0]],s=250,i=lv,u=Ls("start","zoom","end"),f,g,v,b=500,S=150,y=0,l=10;function a(M){M.property("__zoom",Ml).on("wheel.zoom",x,{passive:!1}).on("mousedown.zoom",C).on("dblclick.zoom",I).filter(d).on("touchstart.zoom",R).on("touchmove.zoom",D).on("touchend.zoom touchcancel.zoom",j).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}a.transform=function(M,P,L,F){var $=M.selection?M.selection():M;$.property("__zoom",Ml),M!==$?w(M,P,L,F):$.interrupt().each(function(){k(this,arguments).event(F).start().zoom(null,typeof P=="function"?P.apply(this,arguments):P).end()})},a.scaleBy=function(M,P,L,F){a.scaleTo(M,function(){var $=this.__zoom.k,B=typeof P=="function"?P.apply(this,arguments):P;return $*B},L,F)},a.scaleTo=function(M,P,L,F){a.transform(M,function(){var $=t.apply(this,arguments),B=this.__zoom,H=L==null?m($):typeof L=="function"?L.apply(this,arguments):L,z=B.invert(H),X=typeof P=="function"?P.apply(this,arguments):P;return r(c(o(B,X),H,z),$,h)},L,F)},a.translateBy=function(M,P,L,F){a.transform(M,function(){return r(this.__zoom.translate(typeof P=="function"?P.apply(this,arguments):P,typeof L=="function"?L.apply(this,arguments):L),t.apply(this,arguments),h)},null,F)},a.translateTo=function(M,P,L,F,$){a.transform(M,function(){var B=t.apply(this,arguments),H=this.__zoom,z=F==null?m(B):typeof F=="function"?F.apply(this,arguments):F;return r(wn.translate(z[0],z[1]).scale(H.k).translate(typeof P=="function"?-P.apply(this,arguments):-P,typeof L=="function"?-L.apply(this,arguments):-L),B,h)},F,$)};function o(M,P){return P=Math.max(_[0],Math.min(_[1],P)),P===M.k?M:new _r(P,M.x,M.y)}function c(M,P,L){var F=P[0]-L[0]*M.k,$=P[1]-L[1]*M.k;return F===M.x&&$===M.y?M:new _r(M.k,F,$)}function m(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function w(M,P,L,F){M.on("start.zoom",function(){k(this,arguments).event(F).start()}).on("interrupt.zoom end.zoom",function(){k(this,arguments).event(F).end()}).tween("zoom",function(){var $=this,B=arguments,H=k($,B).event(F),z=t.apply($,B),X=L==null?m(z):typeof L=="function"?L.apply($,B):L,V=Math.max(z[1][0]-z[0][0],z[1][1]-z[0][1]),Y=$.__zoom,K=typeof P=="function"?P.apply($,B):P,ce=i(Y.invert(X).concat(V/Y.k),K.invert(X).concat(V/K.k));return function(E){if(E===1)E=K;else{var N=ce(E),U=V/N[2];E=new _r(U,X[0]-N[0]*U,X[1]-N[1]*U)}H.zoom(null,E)}})}function k(M,P,L){return!L&&M.__zooming||new A(M,P)}function A(M,P){this.that=M,this.args=P,this.active=0,this.sourceEvent=null,this.extent=t.apply(M,P),this.taps=0}A.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,P){return this.mouse&&M!=="mouse"&&(this.mouse[1]=P.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=P.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=P.invert(this.touch1[0])),this.that.__zoom=P,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var P=Ot(this.that).datum();u.call(M,this.that,new J0(M,{sourceEvent:this.sourceEvent,target:a,transform:this.that.__zoom,dispatch:u}),P)}};function x(M,...P){if(!e.apply(this,arguments))return;var L=k(this,P).event(M),F=this.__zoom,$=Math.max(_[0],Math.min(_[1],F.k*Math.pow(2,n.apply(this,arguments)))),B=mr(M);if(L.wheel)(L.mouse[0][0]!==B[0]||L.mouse[0][1]!==B[1])&&(L.mouse[1]=F.invert(L.mouse[0]=B)),clearTimeout(L.wheel);else{if(F.k===$)return;L.mouse=[B,F.invert(B)],ri(this),L.start()}fs(M),L.wheel=setTimeout(H,S),L.zoom("mouse",r(c(o(F,$),L.mouse[0],L.mouse[1]),L.extent,h));function H(){L.wheel=null,L.end()}}function C(M,...P){if(v||!e.apply(this,arguments))return;var L=M.currentTarget,F=k(this,P,!0).event(M),$=Ot(M.view).on("mousemove.zoom",X,!0).on("mouseup.zoom",V,!0),B=mr(M,L),H=M.clientX,z=M.clientY;Do(M.view),Wi(M),F.mouse=[B,this.__zoom.invert(B)],ri(this),F.start();function X(Y){if(fs(Y),!F.moved){var K=Y.clientX-H,ce=Y.clientY-z;F.moved=K*K+ce*ce>y}F.event(Y).zoom("mouse",r(c(F.that.__zoom,F.mouse[0]=mr(Y,L),F.mouse[1]),F.extent,h))}function V(Y){$.on("mousemove.zoom mouseup.zoom",null),Ro(Y.view,F.moved),fs(Y),F.event(Y).end()}}function I(M,...P){if(e.apply(this,arguments)){var L=this.__zoom,F=mr(M.changedTouches?M.changedTouches[0]:M,this),$=L.invert(F),B=L.k*(M.shiftKey?.5:2),H=r(c(o(L,B),F,$),t.apply(this,P),h);fs(M),s>0?Ot(this).transition().duration(s).call(w,H,F,M):Ot(this).call(a.transform,H,F,M)}}function R(M,...P){if(e.apply(this,arguments)){var L=M.touches,F=L.length,$=k(this,P,M.changedTouches.length===F).event(M),B,H,z,X;for(Wi(M),H=0;H<F;++H)z=L[H],X=mr(z,this),X=[X,this.__zoom.invert(X),z.identifier],$.touch0?!$.touch1&&$.touch0[2]!==X[2]&&($.touch1=X,$.taps=0):($.touch0=X,B=!0,$.taps=1+!!f);f&&(f=clearTimeout(f)),B&&($.taps<2&&(g=X[0],f=setTimeout(function(){f=null},b)),ri(this),$.start())}}function D(M,...P){if(this.__zooming){var L=k(this,P).event(M),F=M.changedTouches,$=F.length,B,H,z,X;for(fs(M),B=0;B<$;++B)H=F[B],z=mr(H,this),L.touch0&&L.touch0[2]===H.identifier?L.touch0[0]=z:L.touch1&&L.touch1[2]===H.identifier&&(L.touch1[0]=z);if(H=L.that.__zoom,L.touch1){var V=L.touch0[0],Y=L.touch0[1],K=L.touch1[0],ce=L.touch1[1],E=(E=K[0]-V[0])*E+(E=K[1]-V[1])*E,N=(N=ce[0]-Y[0])*N+(N=ce[1]-Y[1])*N;H=o(H,Math.sqrt(E/N)),z=[(V[0]+K[0])/2,(V[1]+K[1])/2],X=[(Y[0]+ce[0])/2,(Y[1]+ce[1])/2]}else if(L.touch0)z=L.touch0[0],X=L.touch0[1];else return;L.zoom("touch",r(c(H,z,X),L.extent,h))}}function j(M,...P){if(this.__zooming){var L=k(this,P).event(M),F=M.changedTouches,$=F.length,B,H;for(Wi(M),v&&clearTimeout(v),v=setTimeout(function(){v=null},b),B=0;B<$;++B)H=F[B],L.touch0&&L.touch0[2]===H.identifier?delete L.touch0:L.touch1&&L.touch1[2]===H.identifier&&delete L.touch1;if(L.touch1&&!L.touch0&&(L.touch0=L.touch1,delete L.touch1),L.touch0)L.touch0[1]=this.__zoom.invert(L.touch0[0]);else if(L.end(),L.taps===2&&(H=mr(H,this),Math.hypot(g[0]-H[0],g[1]-H[1])<l)){var z=Ot(this).on("dblclick.zoom");z&&z.apply(this,arguments)}}}return a.wheelDelta=function(M){return arguments.length?(n=typeof M=="function"?M:Ks(+M),a):n},a.filter=function(M){return arguments.length?(e=typeof M=="function"?M:Ks(!!M),a):e},a.touchable=function(M){return arguments.length?(d=typeof M=="function"?M:Ks(!!M),a):d},a.extent=function(M){return arguments.length?(t=typeof M=="function"?M:Ks([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),a):t},a.scaleExtent=function(M){return arguments.length?(_[0]=+M[0],_[1]=+M[1],a):[_[0],_[1]]},a.translateExtent=function(M){return arguments.length?(h[0][0]=+M[0][0],h[1][0]=+M[1][0],h[0][1]=+M[0][1],h[1][1]=+M[1][1],a):[[h[0][0],h[0][1]],[h[1][0],h[1][1]]]},a.constrain=function(M){return arguments.length?(r=M,a):r},a.duration=function(M){return arguments.length?(s=+M,a):s},a.interpolate=function(M){return arguments.length?(i=M,a):i},a.on=function(){var M=u.on.apply(u,arguments);return M===u?a:M},a.clickDistance=function(M){return arguments.length?(y=(M=+M)*M,a):Math.sqrt(y)},a.tapDistance=function(M){return arguments.length?(l=+M,a):l},a}var im=O("<svg style=width:100%;height:100%;background:var(--bg-primary)>"),nm=O('<div class="p-4 text-center text-sm rounded-lg"style=background:var(--bg-tertiary);color:var(--text-muted)>No connected resources'),lm=O('<div class=space-y-4><div class="flex items-center gap-4 p-4 rounded-lg"><div class="w-16 h-16 rounded-xl flex items-center justify-center text-3xl"></div><div><div class="font-bold text-lg"style=color:var(--text-primary)></div><div class="flex items-center gap-2 mt-1"><span class="px-2 py-0.5 rounded text-xs font-medium uppercase"style=color:white></span><span class=text-sm style=color:var(--text-muted)>in </span></div></div></div><div><h4 class="font-semibold mb-3 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg>Connected Resources (<!>)</h4><div class="grid gap-2 max-h-64 overflow-auto">'),om=O('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Resource Map</h1><p style=color:var(--text-secondary)>D3.js force-directed graph â¢ Drag nodes â¢ Scroll to zoom â¢ Hover to highlight</p></div><div class="flex items-center gap-3"><button class=icon-btn title=Refresh style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button><button class="px-3 py-2 rounded-lg text-sm hover:bg-[var(--bg-tertiary)]"style=background:var(--bg-secondary);color:var(--text-primary)>Reset Layout</button></div></div><div class="grid grid-cols-2 md:grid-cols-6 gap-3"><div class="card p-3 flex items-center gap-3"><div class="w-10 h-10 rounded-lg flex items-center justify-center"style=background:var(--bg-tertiary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg></div><div><div class="text-xl font-bold"style=color:var(--accent-primary)></div><div class=text-xs style=color:var(--text-muted)>Connections</div></div></div></div><div class="card overflow-hidden relative"style=height:650px><div class="absolute bottom-4 left-4 p-3 rounded-lg text-xs"style="background:var(--bg-secondary);border:1px solid var(--border-color)"><div class="font-semibold mb-2"style=color:var(--text-primary)>Legend</div><div class="grid grid-cols-3 gap-x-4 gap-y-1"></div></div><div class="absolute bottom-4 right-4 px-3 py-2 rounded-lg text-xs"style=background:var(--bg-secondary);color:var(--text-muted)>ð±ï¸ Drag nodes â¢ Scroll to zoom â¢ Click for details'),am=O('<div class="card p-3 flex items-center gap-3"><div class="w-10 h-10 rounded-lg flex items-center justify-center text-lg"></div><div><div class="text-xl font-bold"></div><div class="text-xs capitalize"style=color:var(--text-muted)>s'),cm=O('<div class="h-full flex items-center justify-center"><div class=spinner>'),dm=O('<div class="h-full flex items-center justify-center flex-col gap-4"style=color:var(--text-muted)><svg class="w-20 h-20 opacity-30"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"></path></svg><p class=text-lg>No resources found</p><p class=text-sm>Select a namespace with deployments and services'),hm=O('<div class="flex items-center gap-1.5"><span></span><span class=capitalize style=color:var(--text-muted)>'),um=O('<div class="p-3 rounded-lg flex items-center gap-3 cursor-pointer hover:scale-[1.02] transition-transform"style=background:var(--bg-tertiary)><div class="w-10 h-10 rounded-lg flex items-center justify-center text-lg"></div><div class="flex-1 min-w-0"><div class="font-medium truncate"style=color:var(--accent-primary)></div><div class="text-xs capitalize"style=color:var(--text-muted)></div></div><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 5l7 7-7 7">');const fm=()=>{const[e,{refetch:t}]=Ke(()=>tt(),S=>De.getTopology(S==="_all"?"":S)),[r,n]=J(null),[d,_]=J(!1);let h,s,i=null;const u={node:"#22c55e",deployment:"#3b82f6",statefulset:"#8b5cf6",daemonset:"#f59e0b",service:"#06b6d4",pod:"#ec4899",configmap:"#84cc16",secret:"#ef4444",ingress:"#14b8a6",replicaset:"#6366f1",job:"#f97316",cronjob:"#a855f7"},f=()=>{if(!h||!e())return;const S=e();if(!S?.nodes||S.nodes.length===0)return;Ot(h).selectAll("*").remove(),i&&i.stop();const y=s?.clientWidth||1e3,l=650,a=Ot(h).attr("width",y).attr("height",l).attr("viewBox",[0,0,y,l]),o=a.append("g"),c=sm().scaleExtent([.2,4]).on("zoom",$=>{o.attr("transform",$.transform)});a.call(c);const m=S.nodes.map($=>({...$})),w=S.links.map($=>({source:$.source,target:$.target,value:$.value||1}));i=K0(m).force("link",N0(w).id($=>$.id).distance(120).strength(.5)).force("charge",Y0().strength(-400)).force("center",_0(y/2,l/2)).force("collision",O0().radius(60)).force("x",G0(y/2).strength(.05)).force("y",X0(l/2).strength(.05));const k=a.append("defs");k.append("marker").attr("id","arrowhead").attr("viewBox","-0 -5 10 10").attr("refX",25).attr("refY",0).attr("orient","auto").attr("markerWidth",8).attr("markerHeight",8).append("path").attr("d","M 0,-5 L 10 ,0 L 0,5").attr("fill","#06b6d4").style("opacity",.8);const A=k.append("linearGradient").attr("id","linkGradient").attr("gradientUnits","userSpaceOnUse");A.append("stop").attr("offset","0%").attr("stop-color","#06b6d4").attr("stop-opacity",.6),A.append("stop").attr("offset","100%").attr("stop-color","#8b5cf6").attr("stop-opacity",.6);const x=k.append("filter").attr("id","glow").attr("x","-50%").attr("y","-50%").attr("width","200%").attr("height","200%");x.append("feGaussianBlur").attr("stdDeviation","3").attr("result","coloredBlur");const C=x.append("feMerge");C.append("feMergeNode").attr("in","coloredBlur"),C.append("feMergeNode").attr("in","SourceGraphic");const I=o.append("g").attr("class","links").selectAll("path").data(w).join("path").attr("fill","none").attr("stroke","url(#linkGradient)").attr("stroke-width",2).attr("stroke-opacity",.6).attr("marker-end","url(#arrowhead)"),R=o.append("g").attr("class","nodes").selectAll("g").data(m).join("g").attr("cursor","pointer").call(Pp().on("start",M).on("drag",P).on("end",L));R.append("circle").attr("class","node-ring").attr("r",45).attr("fill",$=>u[$.type]||"#6b7280").attr("fill-opacity",0).attr("stroke",$=>u[$.type]||"#6b7280").attr("stroke-width",0).attr("stroke-dasharray","4 4"),R.append("circle").attr("class","node-circle").attr("r",32).attr("fill",$=>`${u[$.type]||"#6b7280"}20`).attr("stroke",$=>u[$.type]||"#6b7280").attr("stroke-width",2.5),R.append("circle").attr("r",22).attr("fill",$=>`${u[$.type]||"#6b7280"}30`);const D={node:"ð¥ï¸",deployment:"ð¦",statefulset:"ðï¸",daemonset:"ð¹",service:"ð",pod:"ð«",configmap:"âï¸",secret:"ð",ingress:"ðª",replicaset:"ð",job:"â¡",cronjob:"â°"};R.append("text").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size","20px").text($=>D[$.type]||"â"),R.append("text").attr("class","node-label").attr("text-anchor","middle").attr("dy",48).attr("font-size","10px").attr("fill","var(--text-primary)").attr("font-weight","500").text($=>$.name.length>18?$.name.slice(0,15)+"...":$.name),R.append("rect").attr("x",-20).attr("y",55).attr("width",40).attr("height",14).attr("rx",7).attr("fill",$=>u[$.type]||"#6b7280").attr("fill-opacity",.9),R.append("text").attr("text-anchor","middle").attr("y",65).attr("font-size","8px").attr("fill","white").attr("font-weight","600").text($=>$.type.toUpperCase().slice(0,6)),R.on("mouseenter",function($,B){Ot(this).select(".node-circle").attr("filter","url(#glow)").attr("stroke-width",3.5),Ot(this).select(".node-ring").attr("fill-opacity",.1).attr("stroke-width",2),I.attr("stroke-opacity",z=>{const X=typeof z.source=="object"?z.source.id:z.source,V=typeof z.target=="object"?z.target.id:z.target;return X===B.id||V===B.id?1:.1}).attr("stroke-width",z=>{const X=typeof z.source=="object"?z.source.id:z.source,V=typeof z.target=="object"?z.target.id:z.target;return X===B.id||V===B.id?3:1});const H=new Set;H.add(B.id),w.forEach(z=>{const X=typeof z.source=="object"?z.source.id:z.source,V=typeof z.target=="object"?z.target.id:z.target;X===B.id&&H.add(V),V===B.id&&H.add(X)}),R.attr("opacity",z=>H.has(z.id)?1:.3)}).on("mouseleave",function(){Ot(this).select(".node-circle").attr("filter",null).attr("stroke-width",2.5),Ot(this).select(".node-ring").attr("fill-opacity",0).attr("stroke-width",0),I.attr("stroke-opacity",.6).attr("stroke-width",2),R.attr("opacity",1)});let j=!1;function M($){j=!1,$.active||i?.alphaTarget(.3).restart(),$.subject.fx=$.subject.x,$.subject.fy=$.subject.y}function P($){j=!0,$.subject.fx=$.x,$.subject.fy=$.y}function L($){$.active||i?.alphaTarget(0)}R.on("click",function($,B){if(j){j=!1;return}$.stopPropagation(),n(B),_(!0)}),i.on("tick",()=>{I.attr("d",$=>{const B=$.source.x,H=$.source.y,z=$.target.x,X=$.target.y,V=z-B,Y=X-H,K=Math.sqrt(V*V+Y*Y)*.8;return`M${B},${H}A${K},${K} 0 0,1 ${z},${X}`}),R.attr("transform",$=>`translate(${$.x},${$.y})`)});const F=wn.translate(0,0).scale(.9);a.call(c.transform,F)},g=S=>{const y=e();if(!y?.links)return[];const l=[],a=new Map(y.nodes.map(o=>[o.id,o]));return y.links.forEach(o=>{if(o.source===S||typeof o.source=="object"&&o.source.id===S){const c=typeof o.target=="object"?o.target.id:o.target,m=a.get(c);m&&l.push(m)}if(o.target===S||typeof o.target=="object"&&o.target.id===S){const c=typeof o.source=="object"?o.source.id:o.source,m=a.get(c);m&&l.push(m)}}),l};Dt(Ca(()=>e(),()=>{f()})),cr(()=>{const S=()=>f();window.addEventListener("resize",S),tr(()=>{window.removeEventListener("resize",S),i&&i.stop()})});const v=()=>{const S=e();return S?.nodes?S.nodes.reduce((y,l)=>(y[l.type]=(y[l.type]||0)+1,y),{}):{}},b={node:"ð¥ï¸",deployment:"ð¦",statefulset:"ðï¸",daemonset:"ð¹",service:"ð",pod:"ð«",configmap:"âï¸",secret:"ð",ingress:"ðª",replicaset:"ð",job:"â¡",cronjob:"â°"};return(()=>{var S=om(),y=S.firstChild,l=y.firstChild,a=l.firstChild;a.nextSibling;var o=l.nextSibling,c=o.firstChild,m=c.nextSibling,w=y.nextSibling,k=w.firstChild,A=k.firstChild;A.firstChild;var x=A.nextSibling,C=x.firstChild;C.nextSibling;var I=w.nextSibling,R=I.firstChild,D=R.firstChild,j=D.nextSibling;R.nextSibling,c.$$click=P=>{const L=P.currentTarget;L.classList.add("refreshing"),setTimeout(()=>L.classList.remove("refreshing"),500),t()},m.$$click=()=>f(),p(w,T(Ve,{get each(){return Object.entries(v())},children:([P,L])=>(()=>{var F=am(),$=F.firstChild,B=$.nextSibling,H=B.firstChild,z=H.nextSibling,X=z.firstChild;return p($,()=>b[P]||"â"),p(H,L),p(z,P,X),ne(V=>{var Y=`${u[P]}20`,K=u[P],ce=u[P];return Y!==V.e&&ve($,"background",V.e=Y),K!==V.t&&ve($,"color",V.t=K),ce!==V.a&&ve(H,"color",V.a=ce),V},{e:void 0,t:void 0,a:void 0}),F})()}),k),p(C,()=>(e()?.links||[]).length);var M=s;return typeof M=="function"?qt(M,I):s=I,p(I,T(ee,{get when(){return!e.loading},get fallback(){return cm()},get children(){return T(ee,{get when(){return e()?.nodes?.length>0},get fallback(){return dm()},get children(){var P=im(),L=h;return typeof L=="function"?qt(L,P):h=P,P}})}}),R),p(j,T(Ve,{get each(){return Object.entries(b).slice(0,6)},children:([P,L])=>(()=>{var F=hm(),$=F.firstChild,B=$.nextSibling;return p($,L),p(B,P),F})()})),p(S,T(st,{get isOpen(){return d()},onClose:()=>_(!1),get title(){return`${r()?.type}: ${r()?.name}`},size:"lg",get children(){return T(ee,{get when(){return r()},get children(){var P=lm(),L=P.firstChild,F=L.firstChild,$=F.nextSibling,B=$.firstChild,H=B.nextSibling,z=H.firstChild,X=z.nextSibling;X.firstChild;var V=L.nextSibling,Y=V.firstChild,K=Y.firstChild,ce=K.nextSibling,E=ce.nextSibling;E.nextSibling;var N=Y.nextSibling;return p(F,()=>b[r().type]||"â"),p(B,()=>r().name),p(z,()=>r().type),p(X,()=>r().namespace||tt(),null),p(Y,()=>g(r().id).length,E),p(N,T(Ve,{get each(){return g(r().id)},children:U=>(()=>{var W=um(),q=W.firstChild,G=q.nextSibling,Q=G.firstChild,oe=Q.nextSibling;return G.nextSibling,W.$$click=()=>n(U),p(q,()=>b[U.type]||"â"),p(Q,()=>U.name),p(oe,()=>U.type),ne(ge=>ve(q,"background",`${u[U.type]}20`)),W})()}),null),p(N,T(ee,{get when(){return g(r().id).length===0},get children(){return nm()}}),null),ne(U=>{var W=`${u[r().type]}15`,q=`${u[r().type]}25`,G=u[r().type];return W!==U.e&&ve(L,"background",U.e=W),q!==U.t&&ve(F,"background",U.t=q),G!==U.a&&ve(z,"background",U.a=G),U},{e:void 0,t:void 0,a:void 0}),P}})}}),null),S})()};lt(["click"]);var gm=O('<button class="px-3 py-1.5 rounded-lg text-sm transition-colors flex items-center gap-2"title="Show single replica workloads"style="background:rgba(245, 158, 11, 0.2);color:var(--warning-color);border:1px solid rgba(245, 158, 11, 0.4)"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>Single Replica Issues<span class="px-1.5 py-0.5 rounded text-xs"style="background:rgba(245, 158, 11, 0.3)">'),pm=O('<div class="text-center py-8"><div class="spinner mx-auto mb-4"></div><p style=color:var(--text-muted)></p><p class="text-xs mt-2"style=color:var(--text-muted)>Optimized with parallel execution and caching'),vm=O('<div class="text-center py-8"style=color:var(--text-muted)><svg class="w-12 h-12 mx-auto mb-4 text-green-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><p class=text-lg>All checks passed!</p><p class=text-sm>No issues found in the selected scope.'),Dl=O("<div class=space-y-3>"),mm=O('<div class="flex items-center justify-between mt-6 pt-4 border-t"style=border-color:var(--border-color)><div class=text-sm style=color:var(--text-secondary)>Showing <!>-<!> of <!> findings</div><div class="flex items-center gap-2"><button class="px-3 py-1.5 rounded text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed">Previous</button><div class="flex items-center gap-1"></div><button class="px-3 py-1.5 rounded text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed">Next'),_m=O('<div class="card p-6"><h3 class="font-semibold mb-4 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg>Findings (<!>)'),bm=O('<div class="card p-6"><div class="text-center py-8"style=color:var(--text-muted)><svg class="w-12 h-12 mx-auto mb-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg><p class="text-lg mb-2">Diagnostics are disabled</p><p class=text-sm>Enable Diagnostics in Settings to run health checks'),ym=O('<div class="card p-6 mt-6"><h3 class="font-semibold mb-4 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg>High Availability (HA) Recommendations</h3><div class=space-y-4><div class="p-4 rounded-lg border-l-4"style="background:rgba(245, 158, 11, 0.1);border-color:var(--warning-color)"><div class="flex items-start gap-3"><svg class="w-5 h-5 mt-0.5 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--warning-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div class=flex-1><h4 class="font-medium mb-2"style=color:var(--text-primary)>Single Replica Workloads</h4><p class="text-sm mb-3"style=color:var(--text-secondary)>Deployments and StatefulSets with only 1 replica are at high risk. At least 2 replicas are recommended for production workloads to ensure high availability.</p><div class="text-xs space-y-1"style=color:var(--text-muted)><p><strong>Check:</strong> REL005 - Single Replica Deployment/StatefulSet</p><p><strong>Impact:</strong> No redundancy - single point of failure</p></div></div></div></div><div class="p-4 rounded-lg border-l-4"style="background:rgba(6, 182, 212, 0.1);border-color:var(--accent-primary)"><div class="flex items-start gap-3"><svg class="w-5 h-5 mt-0.5 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div class=flex-1><h4 class="font-medium mb-2"style=color:var(--text-primary)>Pod Anti-Affinity</h4><p class="text-sm mb-3"style=color:var(--text-secondary)>Multi-replica workloads should use podAntiAffinity to spread pods across different nodes, preventing all replicas from being on the same node.</p><div class="text-xs space-y-1"style=color:var(--text-muted)><p><strong>Check:</strong> REL007 - No Anti-Affinity</p><p><strong>Recommendation:</strong> Add podAntiAffinity rules to pod templates</p></div></div></div></div><div class="p-4 rounded-lg border-l-4"style="background:rgba(6, 182, 212, 0.1);border-color:var(--accent-primary)"><div class="flex items-start gap-3"><svg class="w-5 h-5 mt-0.5 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div class=flex-1><h4 class="font-medium mb-2"style=color:var(--text-primary)>Pod Disruption Budget (PDB)</h4><p class="text-sm mb-3"style=color:var(--text-secondary)>PodDisruptionBudgets ensure that a minimum number of pods remain available during voluntary disruptions (node drains, cluster upgrades, etc.).</p><div class="text-xs space-y-1"style=color:var(--text-muted)><p><strong>Check:</strong> REL006 - Missing PDB</p><p><strong>Recommendation:</strong> Create PDBs for all production workloads with 2+ replicas</p></div></div></div></div><div class="mt-4 p-4 rounded-lg"style=background:var(--bg-tertiary)><h4 class="font-medium mb-2"style=color:var(--text-primary)>Best Practices Summary</h4><ul class="text-sm space-y-1"style=color:var(--text-secondary)><li>â¢ Use at least 2 replicas for production workloads</li><li>â¢ Configure podAntiAffinity to spread pods across nodes</li><li>â¢ Create PodDisruptionBudgets for multi-replica workloads</li><li>â¢ Consider using topologySpreadConstraints for advanced placement</li><li>â¢ Monitor pod distribution across nodes regularly'),xm=O('<div class="text-center py-4"style=color:var(--text-secondary)>Loading vulnerability stats...'),wm=O('<div class="text-center py-8"style=color:var(--text-secondary)><div class="spinner mx-auto mb-4"></div><p>Scanning cluster for vulnerabilities...</p><p class="text-xs mt-2"style=color:var(--text-muted)>This may take a few moments'),Sm=O('<div class="text-center py-8"style=color:var(--error-color)><p class=mb-2>Error scanning for vulnerabilities</p><p class=text-xs style=color:var(--text-muted)></p><button class="mt-4 px-4 py-2 rounded text-sm transition-colors"style=background:var(--accent-primary);color:white>Retry Scan'),$m=O('<div class="text-center py-8"style=color:var(--text-secondary)><svg class="w-12 h-12 mx-auto mb-4 text-green-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><p class=mb-2>No vulnerabilities found matching the selected criteria.</p><p class=text-xs style=color:var(--text-muted)>Click "Scan Cluster" to scan for vulnerabilities.'),Cm=O('<div class="flex items-center justify-between mt-6 pt-4 border-t"style=border-color:var(--border-color)><div class=text-sm style=color:var(--text-secondary)>Showing <!>-<!> of <!> vulnerabilities</div><div class="flex items-center gap-2"><button class="px-3 py-1.5 rounded text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed">Previous</button><div class="flex items-center gap-1"></div><button class="px-3 py-1.5 rounded text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed">Next'),km=O('<div class="mt-4 text-xs text-center"style=color:var(--text-muted)>Last NVD refresh: '),Em=O('<div class="card p-6 mt-6"><div class="flex items-center justify-between mb-4"><h3 class="font-semibold flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>CVE Vulnerabilities (NIST NVD)</h3><div class="flex items-center gap-2"><select class="px-3 py-1.5 rounded text-sm"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><option value>All Severities</option><option value=CRITICAL>Critical</option><option value=HIGH>High</option><option value=MEDIUM>Medium</option><option value=LOW>Low</option></select><button class="px-3 py-1.5 rounded text-sm transition-colors"title="Refresh NVD data"style=background:var(--bg-tertiary);color:var(--text-primary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button><button class="px-3 py-1.5 rounded text-sm transition-colors"style=background:var(--accent-primary);color:white>Scan Cluster'),Am=O('<div class="card p-6 mt-6"><div class="text-center py-8"style=color:var(--text-muted)><svg class="w-12 h-12 mx-auto mb-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><p class="text-lg mb-2">CVE Vulnerabilities are disabled</p><p class=text-sm>Enable CVE Vulnerabilities (NIST NVD) in Settings to scan for vulnerabilities'),Lm=O('<div class=space-y-6><div class="flex items-center justify-between"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Security & Diagnostics</h1><p style=color:var(--text-secondary)>Cluster health checks, security posture, vulnerability scanning, and best practices analysis</p></div><div class="flex items-center gap-2"><button class="flex items-center gap-2 px-4 py-2 rounded-lg transition-colors"title="Export diagnostic report"style=background:var(--bg-tertiary);color:var(--text-primary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>Export Report</button><button class="flex items-center gap-2 px-4 py-2 rounded-lg transition-colors"style=background:var(--accent-primary);color:white><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>Run Diagnostics</button></div></div><div class="grid grid-cols-1 md:grid-cols-4 gap-6"><div class="card p-6"><div class=text-center><div class="text-5xl font-bold mb-2"></div><div style=color:var(--text-secondary)>Health Score</div><div class="mt-4 h-2 rounded-full overflow-hidden"style=background:var(--bg-tertiary)><div class="h-full rounded-full transition-all"></div></div></div></div><div class="card p-6"><div class=text-center><div class="text-3xl font-bold"style=color:var(--error-color)></div><div class=text-sm style=color:var(--text-secondary)>Critical Issues</div></div></div><div class="card p-6"><div class=text-center><div class="text-3xl font-bold"style=color:var(--warning-color)></div><div class=text-sm style=color:var(--text-secondary)>Warnings</div></div></div><div class="card p-6"><div class=text-center><div class="text-3xl font-bold"style=color:var(--accent-primary)></div><div class=text-sm style=color:var(--text-secondary)>Info</div></div></div></div><div class="flex gap-2 flex-wrap items-center"><button class="px-3 py-1.5 rounded-lg text-sm transition-colors">All Categories</button><div class=flex-1></div></div><div class="card p-6 mt-6"><h3 class="font-semibold mb-4 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg>Security Best Practices</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="p-4 rounded-lg"style=background:var(--bg-tertiary)><h4 class="font-medium mb-2"style=color:var(--text-primary)>Pod Security</h4><ul class="space-y-1 text-sm"style=color:var(--text-secondary)><li>- Run containers as non-root user</li><li>- Use read-only root filesystem</li><li>- Drop all capabilities and add only needed ones</li><li>- Use Pod Security Standards</li></ul></div><div class="p-4 rounded-lg"style=background:var(--bg-tertiary)><h4 class="font-medium mb-2"style=color:var(--text-primary)>Network Security</h4><ul class="space-y-1 text-sm"style=color:var(--text-secondary)><li>- Implement NetworkPolicies</li><li>- Use TLS for all communications</li><li>- Restrict egress traffic</li><li>- Use service mesh for mTLS</li></ul></div><div class="p-4 rounded-lg"style=background:var(--bg-tertiary)><h4 class="font-medium mb-2"style=color:var(--text-primary)>Access Control</h4><ul class="space-y-1 text-sm"style=color:var(--text-secondary)><li>- Use RBAC with least privilege</li><li>- Avoid cluster-admin bindings</li><li>- Use dedicated service accounts</li><li>- Enable audit logging</li></ul></div><div class="p-4 rounded-lg"style=background:var(--bg-tertiary)><h4 class="font-medium mb-2"style=color:var(--text-primary)>Image Security</h4><ul class="space-y-1 text-sm"style=color:var(--text-secondary)><li>- Scan images for vulnerabilities</li><li>- Use trusted base images</li><li>- Sign and verify images</li><li>- Keep images up to date'),Mm=O('<span class="ml-1 opacity-70">(<!>)'),Dm=O('<button class="px-3 py-1.5 rounded-lg text-sm transition-colors">'),Rl=O('<div class="mt-2 text-xs flex items-start gap-1"style=color:var(--accent-primary)><svg class="w-3 h-3 mt-0.5 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>'),Rm=O('<div class="p-4 rounded-lg border"><div class="flex items-start justify-between gap-4"><div class="flex items-start gap-3 flex-1"><div class=mt-0.5></div><div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-1"><span class=font-medium style=color:var(--text-primary)></span><span class="px-2 py-0.5 rounded text-xs"></span><span class="px-2 py-0.5 rounded text-xs"style=background:var(--bg-tertiary);color:var(--text-muted)></span></div><div class="text-sm mb-1"style=color:var(--text-secondary)></div><div class=text-xs style=color:var(--text-muted)><span class=font-mono>'),Tm=O('<svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--error-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z">'),Pm=O('<svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--warning-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z">'),Im=O('<svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z">'),Bm=O("<span> in "),Tl=O("<button>"),Om=O('<div class="grid grid-cols-2 md:grid-cols-5 gap-4 mb-6"><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class="text-2xl font-bold"style=color:var(--text-primary)></div><div class=text-xs style=color:var(--text-secondary)>Total CVEs</div></div><div class="p-3 rounded-lg"style="background:rgba(239, 68, 68, 0.1)"><div class="text-2xl font-bold"style=color:var(--error-color)></div><div class=text-xs style=color:var(--text-secondary)>Critical</div></div><div class="p-3 rounded-lg"style="background:rgba(245, 158, 11, 0.1)"><div class="text-2xl font-bold"style=color:var(--warning-color)></div><div class=text-xs style=color:var(--text-secondary)>High</div></div><div class="p-3 rounded-lg"style="background:rgba(6, 182, 212, 0.1)"><div class="text-2xl font-bold"style=color:var(--accent-primary)></div><div class=text-xs style=color:var(--text-secondary)>Medium</div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class="text-2xl font-bold"style=color:var(--text-primary)></div><div class=text-xs style=color:var(--text-secondary)>CVE Cache'),Hm=O('<div class="mt-2 flex flex-wrap gap-2">'),Nm=O('<div class="p-4 rounded-lg border"><div class="flex items-start justify-between gap-4"><div class=flex-1><div class="flex items-center gap-2 mb-2"><span class="font-mono font-bold"style=color:var(--text-primary)></span><span class="px-2 py-0.5 rounded text-xs font-medium"style=color:white></span><span class=text-sm style=color:var(--text-secondary)>CVSS: </span></div><div class="text-sm mb-2"style=color:var(--text-secondary)></div><div class="text-xs mb-2"style=color:var(--text-muted)><span class=font-mono>'),zm=O("<span> in <!>/"),Fm=O("<span> (<!>)"),jm=O('<a target=_blank rel="noopener noreferrer"class="text-xs px-2 py-1 rounded"style=background:var(--bg-tertiary);color:var(--accent-primary)>Reference');const Um=()=>{const[e,t]=J(""),[r,n]=J(""),[d,_]=J(1),[h,s]=J(1),[i,u]=J(""),f=10,g=()=>{const D=localStorage.getItem("kubegraf-enable-diagnostics");return D===null||D==="true"},v=()=>{const D=localStorage.getItem("kubegraf-enable-cve-vulnerabilities");return D===null||D==="true"},b=()=>{const D=localStorage.getItem("kubegraf-enable-security-checks");return D===null||D==="true"},[S]=Ke(De.getDiagnosticsCategories),[y,{refetch:l}]=Ke(()=>({ns:tt(),cat:e(),enabled:g()}),async D=>{if(!D.enabled)return{findings:[],summary:{total:0,critical:0,warning:0,info:0,byCategory:{}},total:0};_(1),u("Initializing diagnostics...");const j=D.ns==="_all"?void 0:D.ns,M=D.cat||void 0;try{u(M?`Running ${M} checks in parallel...`:"Running all diagnostic checks in parallel...");const P=await De.runDiagnostics(j,M);return u(""),P}catch(P){throw u(""),P}}),[a,o]=J(0),[c,{refetch:m}]=Ke(()=>{const D=r(),j=a();return j>0?{severity:D,key:j}:null},async D=>{try{console.log("[Security] Fetching vulnerabilities with params:",D);const j=Date.now(),M=await De.scanVulnerabilities(D.severity||void 0),P=Date.now()-j;console.log(`[Security] Vulnerabilities fetched in ${P}ms:`,M?.vulnerabilities?.length||0,"vulnerabilities"),console.log("[Security] Result structure:",{hasVulnerabilities:!!M?.vulnerabilities,vulnArray:Array.isArray(M?.vulnerabilities),vulnLength:M?.vulnerabilities?.length,hasStats:!!M?.stats,hasLastRefresh:!!M?.lastRefresh,resultKeys:M?Object.keys(M):[]}),s(1);const L={vulnerabilities:Array.isArray(M?.vulnerabilities)?M.vulnerabilities:[],stats:M?.stats||{},lastRefresh:M?.lastRefresh||null};return console.log("[Security] Returning response:",{vulnCount:L.vulnerabilities.length,hasStats:!!L.stats,hasLastRefresh:!!L.lastRefresh}),L}catch(j){return console.error("[Security] Failed to scan vulnerabilities:",j),{vulnerabilities:[],stats:{},lastRefresh:null}}}),[w]=Ke(De.getVulnerabilityStats),k=Oe(()=>{const D=y();if(!D||!Array.isArray(D.findings)||D.findings.length===0)return{list:[],totalPages:0,startIdx:0,endIdx:0,total:0};const j=D.findings,M=Math.ceil(j.length/f),L=(d()-1)*f,F=L+f;return{list:j.slice(L,F),totalPages:M,startIdx:L,endIdx:F,total:j.length}}),A=Oe(()=>{const D=c();if(console.log("[Security] paginatedVulnerabilities memo - data:",{hasData:!!D,hasVulnerabilities:!!D?.vulnerabilities,isArray:Array.isArray(D?.vulnerabilities),length:D?.vulnerabilities?.length||0}),!D||!Array.isArray(D.vulnerabilities)||D.vulnerabilities.length===0)return console.log("[Security] paginatedVulnerabilities - returning empty"),{list:[],totalPages:0,startIdx:0,endIdx:0,total:0};const j=D.vulnerabilities,M=Math.ceil(j.length/f),L=(h()-1)*f,F=L+f,$={list:j.slice(L,F),totalPages:M,startIdx:L,endIdx:F,total:j.length};return console.log("[Security] paginatedVulnerabilities - result:",$),$});cr(()=>{console.log("[Security] Component mounted, triggering initial scan"),o(1)}),Dt(()=>{const D=c(),j=A();console.log("[Security] Vulnerabilities resource state:",{loading:c.loading,error:c.error,hasData:!!D,vulnCount:D?.vulnerabilities?.length||0,scanKey:a(),selectedSeverity:r(),paginatedTotal:j.total,paginatedListLength:j.list.length,dataStructure:D?{hasVulnerabilities:!!D.vulnerabilities,vulnArrayLength:D.vulnerabilities?.length,isArray:Array.isArray(D.vulnerabilities),hasStats:!!D.stats,hasLastRefresh:!!D.lastRefresh}:null})});const x=D=>{switch(D){case"critical":return"var(--error-color)";case"warning":return"var(--warning-color)";case"info":return"var(--accent-primary)";default:return"var(--text-secondary)"}},C=D=>{switch(D){case"critical":return"rgba(239, 68, 68, 0.1)";case"warning":return"rgba(245, 158, 11, 0.1)";case"info":return"rgba(6, 182, 212, 0.1)";default:return"var(--bg-tertiary)"}},I=D=>{switch(D){case"critical":return"rgba(239, 68, 68, 0.3)";case"warning":return"rgba(245, 158, 11, 0.3)";case"info":return"rgba(6, 182, 212, 0.3)";default:return"var(--border-color)"}},R=()=>{const D=y()?.summary;if(!D||D.total===0)return 100;const j=D.critical*25,M=D.warning*8,P=D.info*1,L=Math.max(0,100-j-M-P);return Math.round(L)};return(()=>{var D=Lm(),j=D.firstChild,M=j.firstChild,P=M.firstChild;P.nextSibling;var L=M.nextSibling,F=L.firstChild,$=F.nextSibling,B=j.nextSibling,H=B.firstChild,z=H.firstChild,X=z.firstChild,V=X.nextSibling,Y=V.nextSibling,K=Y.firstChild,ce=H.nextSibling,E=ce.firstChild,N=E.firstChild;N.nextSibling;var U=ce.nextSibling,W=U.firstChild,q=W.firstChild;q.nextSibling;var G=U.nextSibling,Q=G.firstChild,oe=Q.firstChild;oe.nextSibling;var ge=B.nextSibling,Ce=ge.firstChild,Z=Ce.nextSibling,te=ge.nextSibling,re=te.firstChild,me=re.nextSibling,ye=me.firstChild,we=ye.firstChild;we.nextSibling;var ke=ye.nextSibling,Se=ke.firstChild;Se.nextSibling;var $e=ke.nextSibling,he=$e.firstChild;he.nextSibling;var ue=$e.nextSibling,le=ue.firstChild;return le.nextSibling,F.$$click=()=>{const ie=y();if(ie){const ae={timestamp:new Date().toISOString(),summary:ie.summary,findings:ie.findings},_e=new Blob([JSON.stringify(ae,null,2)],{type:"application/json"}),se=URL.createObjectURL(_e),fe=document.createElement("a");fe.href=se,fe.download=`kubegraf-diagnostics-${new Date().toISOString().split("T")[0]}.json`,fe.click(),URL.revokeObjectURL(se)}},$.$$click=()=>l(),p(X,R),p(N,()=>y()?.summary?.critical||0),p(q,()=>y()?.summary?.warning||0),p(oe,()=>y()?.summary?.info||0),Ce.$$click=()=>t(""),p(ge,T(Ve,{get each(){return S()||[]},children:ie=>(()=>{var ae=Dm();return ae.$$click=()=>t(ie.id),p(ae,()=>ie.name,null),p(ae,T(ee,{get when(){return y()?.summary?.byCategory?.[ie.id]},get children(){var _e=Mm(),se=_e.firstChild,fe=se.nextSibling;return fe.nextSibling,p(_e,()=>y()?.summary?.byCategory?.[ie.id],fe),_e}}),null),ne(_e=>{var se=e()===ie.id?"var(--accent-primary)":"var(--bg-tertiary)",fe=e()===ie.id?"white":"var(--text-secondary)";return se!==_e.e&&ve(ae,"background",_e.e=se),fe!==_e.t&&ve(ae,"color",_e.t=fe),_e},{e:void 0,t:void 0}),ae})()}),Z),p(ge,T(ee,{get when(){return Fe(()=>!!y())()&&(y()?.findings||[]).some(ie=>ie.rule==="REL005")},get children(){var ie=gm(),ae=ie.firstChild,_e=ae.nextSibling,se=_e.nextSibling;return ie.$$click=()=>{const de=(y()?.findings||[]).filter(pe=>pe.rule==="REL005");e()==="reliability"&&de.length>0?document.querySelector('[data-rule="REL005"]')?.scrollIntoView({behavior:"smooth",block:"center"}):(t("reliability"),setTimeout(()=>{document.querySelector('[data-rule="REL005"]')?.scrollIntoView({behavior:"smooth",block:"center"})},300))},p(se,()=>(y()?.findings||[]).filter(fe=>fe.rule==="REL005").length),ie}}),null),p(D,T(ee,{get when(){return g()},get children(){var ie=_m(),ae=ie.firstChild,_e=ae.firstChild,se=_e.nextSibling,fe=se.nextSibling;return fe.nextSibling,p(ae,()=>y()?.total||0,fe),p(ie,T(ee,{get when(){return y.loading},get children(){var de=pm(),pe=de.firstChild,Ee=pe.nextSibling;return Ee.nextSibling,p(Ee,()=>i()||"Running diagnostics in parallel..."),de}}),null),p(ie,T(ee,{get when(){return Fe(()=>!y.loading)()&&(y()?.findings?.length||0)===0},get children(){return vm()}}),null),p(ie,T(ee,{get when(){return Fe(()=>!y.loading)()&&k().total>0},get children(){return[(()=>{var de=Dl();return p(de,T(Ve,{get each(){return k().list},children:pe=>(()=>{var Ee=Rm(),be=Ee.firstChild,Pe=be.firstChild,Ne=Pe.firstChild,Ie=Ne.nextSibling,Ae=Ie.firstChild,Re=Ae.firstChild,je=Re.nextSibling,Te=je.nextSibling,He=Ae.nextSibling,ze=He.nextSibling,Xe=ze.firstChild;return p(Ne,(()=>{var Me=Fe(()=>pe.severity==="critical");return()=>Me()?Tm():Fe(()=>pe.severity==="warning")()?Pm():Im()})()),p(Re,()=>pe.rule),p(je,()=>pe.severity),p(Te,()=>pe.category),p(He,()=>pe.message),p(Xe,()=>pe.resource),p(ze,(()=>{var Me=Fe(()=>!!pe.namespace);return()=>Me()&&(()=>{var We=Bm();return We.firstChild,p(We,()=>pe.namespace,null),We})()})(),null),p(Ie,T(ee,{get when(){return pe.remediation},get children(){var Me=Rl(),We=Me.firstChild,Ge=We.nextSibling;return p(Ge,()=>pe.remediation),Me}}),null),ne(Me=>{var We=pe.rule,Ge=C(pe.severity),Je=I(pe.severity),ot=C(pe.severity),ft=x(pe.severity),Rt=`1px solid ${I(pe.severity)}`;return We!==Me.e&&et(Ee,"data-rule",Me.e=We),Ge!==Me.t&&ve(Ee,"background",Me.t=Ge),Je!==Me.a&&ve(Ee,"border-color",Me.a=Je),ot!==Me.o&&ve(je,"background",Me.o=ot),ft!==Me.i&&ve(je,"color",Me.i=ft),Rt!==Me.n&&ve(je,"border",Me.n=Rt),Me},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),Ee})()})),de})(),(()=>{var de=mm(),pe=de.firstChild,Ee=pe.firstChild,be=Ee.nextSibling,Pe=be.nextSibling,Ne=Pe.nextSibling,Ie=Ne.nextSibling,Ae=Ie.nextSibling;Ae.nextSibling;var Re=pe.nextSibling,je=Re.firstChild,Te=je.nextSibling,He=Te.nextSibling;return p(pe,()=>k().startIdx+1,be),p(pe,()=>Math.min(k().endIdx,k().total),Ne),p(pe,()=>k().total,Ae),je.$$click=()=>_(Math.max(1,d()-1)),p(Te,()=>Array.from({length:Math.min(5,k().totalPages)},(ze,Xe)=>{const Me=k().totalPages,We=d();let Ge;return Me<=5||We<=3?Ge=Xe+1:We>=Me-2?Ge=Me-4+Xe:Ge=We-2+Xe,(()=>{var Je=Tl();return Je.$$click=()=>_(Ge),Ue(Je,`px-3 py-1.5 rounded text-sm transition-colors ${Ge===We?"font-bold":""}`),ve(Je,"background",Ge===We?"var(--accent-primary)":"var(--bg-tertiary)"),ve(Je,"color",Ge===We?"white":"var(--text-primary)"),p(Je,Ge),Je})()})),He.$$click=()=>_(Math.min(k().totalPages,d()+1)),ne(ze=>{var Xe=d()===1,Me=d()===1?"var(--bg-tertiary)":"var(--accent-primary)",We=d()===1?"var(--text-muted)":"white",Ge=d()===k().totalPages,Je=d()===k().totalPages?"var(--bg-tertiary)":"var(--accent-primary)",ot=d()===k().totalPages?"var(--text-muted)":"white";return Xe!==ze.e&&(je.disabled=ze.e=Xe),Me!==ze.t&&ve(je,"background",ze.t=Me),We!==ze.a&&ve(je,"color",ze.a=We),Ge!==ze.o&&(He.disabled=ze.o=Ge),Je!==ze.i&&ve(He,"background",ze.i=Je),ot!==ze.n&&ve(He,"color",ze.n=ot),ze},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),de})()]}}),null),ie}}),te),p(D,T(ee,{get when(){return!g()},get children(){var ie=bm();return ie.firstChild,ie}}),te),p(D,T(ee,{get when(){return b()},get children(){var ie=ym(),ae=ie.firstChild,_e=ae.nextSibling,se=_e.firstChild,fe=se.firstChild,de=fe.firstChild,pe=de.nextSibling,Ee=pe.firstChild,be=Ee.nextSibling;be.nextSibling;var Pe=se.nextSibling,Ne=Pe.firstChild,Ie=Ne.firstChild,Ae=Ie.nextSibling,Re=Ae.firstChild,je=Re.nextSibling;je.nextSibling;var Te=Pe.nextSibling,He=Te.firstChild,ze=He.firstChild,Xe=ze.nextSibling,Me=Xe.firstChild,We=Me.nextSibling;We.nextSibling;var Ge=Te.nextSibling,Je=Ge.firstChild;return Je.nextSibling,ie}}),te),p(D,T(ee,{get when(){return v()},get children(){var ie=Em(),ae=ie.firstChild,_e=ae.firstChild,se=_e.nextSibling,fe=se.firstChild,de=fe.nextSibling,pe=de.nextSibling;return fe.addEventListener("change",Ee=>n(Ee.currentTarget.value)),de.$$click=()=>De.refreshVulnerabilities().then(()=>m()),pe.$$click=async()=>{console.log("[Security] Scan Cluster button clicked"),n(""),o(Ee=>Ee+1),setTimeout(()=>{console.log("[Security] Manually refetching vulnerabilities"),m()},50)},p(ie,T(ee,{get when(){return w.loading},get fallback(){return T(ee,{get when(){return w()},children:Ee=>(()=>{var be=Om(),Pe=be.firstChild,Ne=Pe.firstChild;Ne.nextSibling;var Ie=Pe.nextSibling,Ae=Ie.firstChild;Ae.nextSibling;var Re=Ie.nextSibling,je=Re.firstChild;je.nextSibling;var Te=Re.nextSibling,He=Te.firstChild;He.nextSibling;var ze=Te.nextSibling,Xe=ze.firstChild;return Xe.nextSibling,p(Ne,()=>Ee().total||0),p(Ae,()=>Ee().critical||0),p(je,()=>Ee().high||0),p(He,()=>Ee().medium||0),p(Xe,()=>Ee().cveCount||0),be})()})},get children(){return xm()}}),null),p(ie,T(ee,{get when(){return c.loading},get children(){var Ee=wm(),be=Ee.firstChild,Pe=be.nextSibling;return Pe.nextSibling,Ee}}),null),p(ie,T(ee,{get when(){return c.error},get children(){var Ee=Sm(),be=Ee.firstChild,Pe=be.nextSibling,Ne=Pe.nextSibling;return p(Pe,()=>String(c.error)),Ne.$$click=()=>{o(Ie=>Ie+1),setTimeout(()=>m(),50)},Ee}}),null),p(ie,()=>{const Ee=c(),be=A();return console.log("[Security] Render check - vulnerabilities:",{loading:c.loading,error:c.error,hasData:!!Ee,vulnCount:Ee?.vulnerabilities?.length||0,paginatedTotal:be.total,shouldShowList:!c.loading&&!c.error&&be.total>0}),null},null),p(ie,T(ee,{get when(){return Fe(()=>!!(!c.loading&&!c.error&&c()))()&&(c()?.vulnerabilities||[]).length===0},get children(){var Ee=$m(),be=Ee.firstChild,Pe=be.nextSibling;return Pe.nextSibling,Ee}}),null),p(ie,T(ee,{get when(){return Fe(()=>!c.loading&&!c.error)()&&A().total>0},get children(){return[(()=>{var Ee=Dl();return p(Ee,T(Ve,{get each(){return A().list},children:be=>(()=>{var Pe=Nm(),Ne=Pe.firstChild,Ie=Ne.firstChild,Ae=Ie.firstChild,Re=Ae.firstChild,je=Re.nextSibling,Te=je.nextSibling;Te.firstChild;var He=Ae.nextSibling,ze=He.nextSibling,Xe=ze.firstChild;return p(Re,()=>be.cveId),p(je,()=>be.severity),p(Te,()=>be.cvssScore?.toFixed(1)||"N/A",null),p(He,()=>be.description),p(Xe,()=>be.affectedImage),p(ze,(()=>{var Me=Fe(()=>!!be.namespace);return()=>Me()&&(()=>{var We=zm(),Ge=We.firstChild,Je=Ge.nextSibling;return Je.nextSibling,p(We,()=>be.namespace,Je),p(We,()=>be.podName,null),We})()})(),null),p(ze,(()=>{var Me=Fe(()=>!!be.containerName);return()=>Me()&&(()=>{var We=Fm(),Ge=We.firstChild,Je=Ge.nextSibling;return Je.nextSibling,p(We,()=>be.containerName,Je),We})()})(),null),p(Ie,T(ee,{get when(){return be.remediation},get children(){var Me=Rl(),We=Me.firstChild,Ge=We.nextSibling;return p(Ge,()=>be.remediation),Me}}),null),p(Ie,T(ee,{get when(){return Fe(()=>!!be.references)()&&be.references.length>0},get children(){var Me=Hm();return p(Me,T(Ve,{get each(){return be.references.slice(0,3)},children:We=>(()=>{var Ge=jm();return et(Ge,"href",We),Ge})()})),Me}}),null),ne(Me=>{var We=be.severity==="CRITICAL"?"rgba(239, 68, 68, 0.1)":be.severity==="HIGH"?"rgba(245, 158, 11, 0.1)":"rgba(6, 182, 212, 0.1)",Ge=be.severity==="CRITICAL"?"rgba(239, 68, 68, 0.3)":be.severity==="HIGH"?"rgba(245, 158, 11, 0.3)":"rgba(6, 182, 212, 0.3)",Je=be.severity==="CRITICAL"?"var(--error-color)":be.severity==="HIGH"?"var(--warning-color)":"var(--accent-primary)";return We!==Me.e&&ve(Pe,"background",Me.e=We),Ge!==Me.t&&ve(Pe,"border-color",Me.t=Ge),Je!==Me.a&&ve(je,"background",Me.a=Je),Me},{e:void 0,t:void 0,a:void 0}),Pe})()})),Ee})(),(()=>{var Ee=Cm(),be=Ee.firstChild,Pe=be.firstChild,Ne=Pe.nextSibling,Ie=Ne.nextSibling,Ae=Ie.nextSibling,Re=Ae.nextSibling,je=Re.nextSibling;je.nextSibling;var Te=be.nextSibling,He=Te.firstChild,ze=He.nextSibling,Xe=ze.nextSibling;return p(be,()=>A().startIdx+1,Ne),p(be,()=>Math.min(A().endIdx,A().total),Ae),p(be,()=>A().total,je),He.$$click=()=>s(Math.max(1,h()-1)),p(ze,()=>Array.from({length:Math.min(5,A().totalPages)},(Me,We)=>{const Ge=A().totalPages,Je=h();let ot;return Ge<=5||Je<=3?ot=We+1:Je>=Ge-2?ot=Ge-4+We:ot=Je-2+We,(()=>{var ft=Tl();return ft.$$click=()=>s(ot),Ue(ft,`px-3 py-1.5 rounded text-sm transition-colors ${ot===Je?"font-bold":""}`),ve(ft,"background",ot===Je?"var(--accent-primary)":"var(--bg-tertiary)"),ve(ft,"color",ot===Je?"white":"var(--text-primary)"),p(ft,ot),ft})()})),Xe.$$click=()=>s(Math.min(A().totalPages,h()+1)),ne(Me=>{var We=h()===1,Ge=h()===1?"var(--bg-tertiary)":"var(--accent-primary)",Je=h()===1?"var(--text-muted)":"white",ot=h()===A().totalPages,ft=h()===A().totalPages?"var(--bg-tertiary)":"var(--accent-primary)",Rt=h()===A().totalPages?"var(--text-muted)":"white";return We!==Me.e&&(He.disabled=Me.e=We),Ge!==Me.t&&ve(He,"background",Me.t=Ge),Je!==Me.a&&ve(He,"color",Me.a=Je),ot!==Me.o&&(Xe.disabled=Me.o=ot),ft!==Me.i&&ve(Xe,"background",Me.i=ft),Rt!==Me.n&&ve(Xe,"color",Me.n=Rt),Me},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),Ee})()]}}),null),p(ie,T(ee,{get when(){return Fe(()=>!!c())()&&c()?.lastRefresh},get children(){var Ee=km();return Ee.firstChild,p(Ee,()=>new Date(c()?.lastRefresh||"").toLocaleString(),null),Ee}}),null),ne(()=>fe.value=r()),ie}}),null),p(D,T(ee,{get when(){return!v()},get children(){var ie=Am();return ie.firstChild,ie}}),null),ne(ie=>{var ae=R()>=80?"var(--success-color)":R()>=60?"var(--warning-color)":"var(--error-color)",_e=`${R()}%`,se=R()>=80?"var(--success-color)":R()>=60?"var(--warning-color)":"var(--error-color)",fe=e()===""?"var(--accent-primary)":"var(--bg-tertiary)",de=e()===""?"white":"var(--text-secondary)";return ae!==ie.e&&ve(X,"color",ie.e=ae),_e!==ie.t&&ve(K,"width",ie.t=_e),se!==ie.a&&ve(K,"background",ie.a=se),fe!==ie.o&&ve(Ce,"background",ie.o=fe),de!==ie.i&&ve(Ce,"color",ie.i=de),ie},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),D})()};lt(["click"]);var Vm=O('<svg viewBox="0 0 512 512"class="w-8 h-8"><path fill=#0F1689 d="M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256 256-114.6 256-256S397.4 0 256 0z"></path><g fill=#fff><circle cx=256 cy=256 r=50></circle><rect x=248 y=96 width=16 height=80 rx=8></rect><rect x=248 y=336 width=16 height=80 rx=8></rect><rect x=96 y=248 width=80 height=16 rx=8></rect><rect x=336 y=248 width=80 height=16 rx=8></rect><rect x=132 y=132 width=16 height=80 rx=8 transform="rotate(-45 140 172)"></rect><rect x=364 y=300 width=16 height=80 rx=8 transform="rotate(-45 372 340)"></rect><rect x=300 y=132 width=16 height=80 rx=8 transform="rotate(45 308 172)"></rect><rect x=132 y=300 width=16 height=80 rx=8 transform="rotate(45 140 340)">'),Wm=O('<svg viewBox="0 0 128 128"class="w-8 h-8"><defs><linearGradient id=argoGrad x1=0% y1=0% x2=100% y2=100%><stop offset=0% style=stop-color:#EF7B4D></stop><stop offset=100% style=stop-color:#E96D3F></stop></linearGradient></defs><circle cx=64 cy=64 r=60 fill=url(#argoGrad)></circle><g fill=#fff><ellipse cx=64 cy=52 rx=28 ry=24></ellipse><circle cx=52 cy=48 r=6 fill=#E96D3F></circle><circle cx=76 cy=48 r=6 fill=#E96D3F></circle><circle cx=52 cy=48 r=3 fill=#1a1a1a></circle><circle cx=76 cy=48 r=3 fill=#1a1a1a></circle><path d="M44 76 Q34 90 28 100"stroke=#fff stroke-width=8 stroke-linecap=round fill=none></path><path d="M52 78 Q48 94 44 106"stroke=#fff stroke-width=8 stroke-linecap=round fill=none></path><path d="M64 80 Q64 96 64 108"stroke=#fff stroke-width=8 stroke-linecap=round fill=none></path><path d="M76 78 Q80 94 84 106"stroke=#fff stroke-width=8 stroke-linecap=round fill=none></path><path d="M84 76 Q94 90 100 100"stroke=#fff stroke-width=8 stroke-linecap=round fill=none>'),qm=O('<svg viewBox="0 0 128 128"class="w-8 h-8"><defs><linearGradient id=fluxGrad x1=0% y1=0% x2=100% y2=100%><stop offset=0% style=stop-color:#5468FF></stop><stop offset=100% style=stop-color:#316CE6></stop></linearGradient></defs><circle cx=64 cy=64 r=60 fill=url(#fluxGrad)></circle><g fill=none stroke=#fff stroke-width=8 stroke-linecap=round><path d="M24 44 Q44 28 64 44 Q84 60 104 44"></path><path d="M24 64 Q44 48 64 64 Q84 80 104 64"></path><path d="M24 84 Q44 68 64 84 Q84 100 104 84">'),Km=O('<svg viewBox="0 0 128 128"class="w-8 h-8"><defs><linearGradient id=kustomizeGrad x1=0% y1=0% x2=100% y2=100%><stop offset=0% style=stop-color:#326CE5></stop><stop offset=100% style=stop-color:#1D4ED8></stop></linearGradient></defs><circle cx=64 cy=64 r=60 fill=url(#kustomizeGrad)></circle><g fill=#fff><rect x=32 y=28 width=16 height=72 rx=2></rect><polygon points="48,64 80,28 96,28 56,72 96,100 80,100"></polygon></g><g fill=none stroke=#fff stroke-width=3><rect x=76 y=52 width=20 height=20 rx=2></rect><rect x=86 y=62 width=20 height=20 rx=2>'),Ym=O('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">'),Gm=O('<div class="card p-6"><h3 class="font-semibold mb-4"style=color:var(--text-primary)>Quick Stats</h3><div class="grid grid-cols-2 md:grid-cols-4 gap-4"><div class="p-4 rounded-lg text-center"style=background:var(--bg-tertiary)><div class="text-2xl font-bold"style=color:var(--accent-primary)>--</div><div class=text-sm style=color:var(--text-secondary)>Helm Releases</div></div><div class="p-4 rounded-lg text-center"style=background:var(--bg-tertiary)><div class="text-2xl font-bold"style=color:var(--accent-secondary)>--</div><div class=text-sm style=color:var(--text-secondary)>ArgoCD Apps</div></div><div class="p-4 rounded-lg text-center"style=background:var(--bg-tertiary)><div class="text-2xl font-bold"style=color:#8b5cf6>--</div><div class=text-sm style=color:var(--text-secondary)>Flux Resources</div></div><div class="p-4 rounded-lg text-center"style=background:var(--bg-tertiary)><div class="text-2xl font-bold"style=color:var(--success-color)></div><div class=text-sm style=color:var(--text-secondary)>Active Plugins'),Xm=O('<div class="flex items-center justify-between mb-4"><div class=text-sm style=color:var(--text-muted)> releases</div><button class="flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-colors"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>Refresh'),Jm=O("<table class=data-table><thead><tr><th>Name</th><th>Namespace</th><th>Chart</th><th>Revision</th><th>Status</th><th>Updated</th><th>Actions</th></tr></thead><tbody>"),qi=O('<div class="card overflow-hidden">'),Zm=O('<div class="flex items-center justify-between mb-4"><div class=text-sm style=color:var(--text-muted)> applications</div><button class="flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-colors"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>Refresh'),Qm=O("<table class=data-table><thead><tr><th>Name</th><th>Project</th><th>Sync Status</th><th>Health</th><th>Age</th><th>Actions</th></tr></thead><tbody>"),e1=O('<div class="flex items-center justify-between mb-4"><div class=text-sm style=color:var(--text-muted)> resources</div><button class="flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-colors"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>Refresh'),t1=O("<table class=data-table><thead><tr><th>Name</th><th>Kind</th><th>Namespace</th><th>Ready</th><th>Status</th></tr></thead><tbody>"),Pl=O("<div>"),r1=O('<div class="border rounded-lg overflow-hidden"style=border-color:var(--border-color)><table class="data-table w-full"><thead><tr><th>Revision</th><th>Status</th><th>Updated</th><th>Description</th><th>Actions</th></tr></thead><tbody>'),s1=O('<div class=space-y-4><div class="grid grid-cols-2 gap-4"><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Chart</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Current Revision</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Namespace</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Status</div><div><span class="badge badge-success"></span></div></div><div class="p-3 rounded-lg col-span-2"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Last Updated</div><div style=color:var(--text-primary)></div></div></div><div><h4 class="font-semibold mb-3 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>Release History'),i1=O('<div class=space-y-4><div class="flex gap-2"><button class="flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors"title="Apply changes from Git repository"style=background:var(--accent-primary);color:#fff><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg></button><button title="Fetch latest state from cluster"class="flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div><div class="grid grid-cols-2 gap-4"><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Project</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Namespace</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Sync Status</div><div><span></span></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Health</div><div><span></span></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Age</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Revision</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg col-span-2"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Repository</div><div class="text-sm break-all"style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Path</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Cluster</div><div class="text-sm break-all"style=color:var(--text-primary)>'),n1=O('<div class=space-y-6><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Plugins</h1><p style=color:var(--text-secondary)>GitOps and package management integrations</p></div><div class="flex gap-2 border-b"style=border-color:var(--border-color)>'),l1=O('<button class="px-4 py-2 -mb-px transition-colors">'),o1=O('<div class="card p-6"><div class="flex items-center gap-3 mb-4"><div class=flex-shrink-0></div><div><div class=font-semibold style=color:var(--text-primary)></div><div class=text-sm style=color:var(--text-muted)></div></div></div><p class="text-sm mb-4"style=color:var(--text-secondary)></p><div class="flex items-center justify-between"><span></span><button class=text-sm style=color:var(--accent-primary)>View â'),Ki=O('<div class="p-8 text-center"><div class="spinner mx-auto">'),a1=O('<tr><td colspan=7 class="text-center py-8"style=color:var(--text-muted)>No Helm releases found'),c1=O('<tr class="cursor-pointer hover:bg-[var(--bg-tertiary)]"><td class=font-medium style=color:var(--accent-primary)></td><td></td><td></td><td></td><td><span></span></td><td></td><td><button class=action-btn title="Details &amp; History"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z">'),d1=O('<div class="p-8 text-center"style=color:var(--text-muted)><svg class="w-12 h-12 mx-auto mb-4 opacity-50"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg><p>No ArgoCD applications found</p><p class="text-sm mt-2">ArgoCD may not be installed or configured'),h1=O('<tr class="cursor-pointer hover:bg-[var(--bg-tertiary)]"><td class=font-medium style=color:var(--accent-primary)></td><td></td><td><span></span></td><td><span></span></td><td></td><td class="flex gap-1"><button class=action-btn title="Sync - Apply changes from Git"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg></button><button class=action-btn title="Refresh - Fetch latest state"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button><button class=action-btn title=Details><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z">'),u1=O('<div class="p-8 text-center"style=color:var(--text-muted)><svg class="w-12 h-12 mx-auto mb-4 opacity-50"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg><p>No Flux resources found</p><p class="text-sm mt-2">Flux may not be installed or configured'),f1=O("<tr><td class=font-medium style=color:var(--accent-primary)></td><td></td><td></td><td><span></span></td><td>"),g1=O('<div class="p-4 text-center"><div class="spinner mx-auto">'),p1=O('<div class="p-4 text-center"style=color:var(--text-muted)>No history available'),v1=O('<span class="ml-2 badge badge-success">current'),m1=O('<button class="px-3 py-1.5 rounded transition-colors font-medium"style=background:var(--warning-color);color:#000>'),_1=O('<tr><td style=color:var(--accent-primary)></td><td><span></span></td><td style=color:var(--text-secondary)></td><td class="max-w-xs truncate"style=color:var(--text-muted)></td><td>');const b1=()=>{const[e,t]=J("overview"),[r,n]=J(null),[d,_]=J(null),[h,s]=J(!1),[i,u]=J(!1),[f,g]=J([]),[v,b]=J(!1),[S,y]=J(!1),[l,a]=J(null),[o,{refetch:c,mutate:m}]=Ke(()=>e()==="helm"?es():!1,async()=>De.getHelmReleases()),[w,{refetch:k,mutate:A}]=Ke(()=>e()==="argocd"?es():!1,async()=>De.getArgoCDApps()),[x,{refetch:C,mutate:I}]=Ke(()=>e()==="flux"?es():!1,async()=>De.getFluxResources());Dt(()=>{es()&&(m(void 0),A(void 0),I(void 0))});const R=async(V,Y)=>{b(!0);try{const K=await De.getHelmReleaseHistory(V,Y);g(K.history||[])}catch(K){console.error("Failed to fetch release history:",K),g([])}b(!1)},D=async V=>{const Y=r();if(Y){y(!0),a(null);try{await De.rollbackHelmRelease(Y.name,Y.namespace,V),a({type:"success",text:`Rolled back to revision ${V}`}),R(Y.name,Y.namespace),c()}catch(K){a({type:"error",text:K.message||"Rollback failed"})}y(!1)}},j=async()=>{const V=d();if(V){y(!0),a(null);try{await De.syncArgoCDApp(V.name,V.namespace),a({type:"success",text:"Sync triggered successfully"}),k()}catch(Y){a({type:"error",text:Y.message||"Sync failed"})}y(!1)}},M=async()=>{const V=d();if(V){y(!0),a(null);try{await De.refreshArgoCDApp(V.name,V.namespace),a({type:"success",text:"Refresh triggered successfully"}),k()}catch(Y){a({type:"error",text:Y.message||"Refresh failed"})}y(!1)}},P=V=>{n(V),s(!0),a(null),R(V.name,V.namespace)},L=V=>{_(V),u(!0),a(null)},F=()=>Vm(),$=()=>Wm(),B=()=>qm(),H=()=>Km(),z=[{name:"Helm",version:"v3",enabled:!0,description:"Package manager for Kubernetes",icon:T(F,{})},{name:"ArgoCD",version:"v2",enabled:!0,description:"GitOps continuous delivery",icon:T($,{})},{name:"Flux",version:"v2",enabled:!0,description:"GitOps toolkit for Kubernetes",icon:T(B,{})},{name:"Kustomize",version:"v5",enabled:!0,description:"Kubernetes native configuration management",icon:T(H,{})}],X=[{id:"overview",label:"Overview"},{id:"helm",label:"Helm Releases"},{id:"argocd",label:"ArgoCD Apps"},{id:"flux",label:"Flux Resources"}];return(()=>{var V=n1(),Y=V.firstChild,K=Y.firstChild;K.nextSibling;var ce=Y.nextSibling;return p(ce,T(Ve,{each:X,children:E=>(()=>{var N=l1();return N.$$click=()=>t(E.id),p(N,()=>E.label),ne(U=>{var W=e()===E.id?"var(--accent-primary)":"var(--text-secondary)",q=e()===E.id?"2px solid var(--accent-primary)":"2px solid transparent";return W!==U.e&&ve(N,"color",U.e=W),q!==U.t&&ve(N,"border-bottom",U.t=q),U},{e:void 0,t:void 0}),N})()})),p(V,T(ee,{get when(){return e()==="overview"},get children(){return[(()=>{var E=Ym();return p(E,T(Ve,{each:z,children:N=>(()=>{var U=o1(),W=U.firstChild,q=W.firstChild,G=q.nextSibling,Q=G.firstChild,oe=Q.nextSibling,ge=W.nextSibling,Ce=ge.nextSibling,Z=Ce.firstChild,te=Z.nextSibling;return p(q,()=>N.icon),p(Q,()=>N.name),p(oe,()=>N.version),p(ge,()=>N.description),p(Z,()=>N.enabled?"Enabled":"Disabled"),te.$$click=()=>t(N.name.toLowerCase()),ne(()=>Ue(Z,`badge ${N.enabled?"badge-success":"badge-warning"}`)),U})()})),E})(),(()=>{var E=Gm(),N=E.firstChild,U=N.nextSibling,W=U.firstChild,q=W.firstChild;q.nextSibling;var G=W.nextSibling,Q=G.firstChild;Q.nextSibling;var oe=G.nextSibling,ge=oe.firstChild;ge.nextSibling;var Ce=oe.nextSibling,Z=Ce.firstChild;return Z.nextSibling,p(Z,()=>z.filter(te=>te.enabled).length),E})()]}}),null),p(V,T(ee,{get when(){return e()==="helm"},get children(){return[(()=>{var E=Xm(),N=E.firstChild,U=N.firstChild,W=N.nextSibling,q=W.firstChild;return p(N,()=>o()?.length||0,U),W.$$click=()=>c(),ne(G=>{var Q=o.loading,oe=o.loading?.5:1,ge=`w-4 h-4 ${o.loading?"animate-spin":""}`;return Q!==G.e&&(W.disabled=G.e=Q),oe!==G.t&&ve(W,"opacity",G.t=oe),ge!==G.a&&et(q,"class",G.a=ge),G},{e:void 0,t:void 0,a:void 0}),E})(),(()=>{var E=qi();return p(E,T(ee,{get when(){return!o.loading},get fallback(){return Ki()},get children(){var N=Jm(),U=N.firstChild,W=U.nextSibling;return p(W,T(Ve,{get each(){return o()||[]},get fallback(){return(()=>{var q=a1();return q.firstChild,q})()},children:q=>(()=>{var G=c1(),Q=G.firstChild,oe=Q.nextSibling,ge=oe.nextSibling,Ce=ge.nextSibling,Z=Ce.nextSibling,te=Z.firstChild,re=Z.nextSibling,me=re.nextSibling,ye=me.firstChild;return G.$$click=()=>P(q),p(Q,()=>q.name),p(oe,()=>q.namespace),p(ge,()=>q.chart),p(Ce,()=>q.revision),p(te,()=>q.status),p(re,()=>q.updated),ye.$$click=we=>{we.stopPropagation(),P(q)},ne(()=>Ue(te,`badge ${q.status==="deployed"?"badge-success":"badge-warning"}`)),G})()})),N}})),E})()]}}),null),p(V,T(ee,{get when(){return e()==="argocd"},get children(){return[(()=>{var E=Zm(),N=E.firstChild,U=N.firstChild,W=N.nextSibling,q=W.firstChild;return p(N,()=>w()?.length||0,U),W.$$click=()=>k(),ne(G=>{var Q=w.loading,oe=w.loading?.5:1,ge=`w-4 h-4 ${w.loading?"animate-spin":""}`;return Q!==G.e&&(W.disabled=G.e=Q),oe!==G.t&&ve(W,"opacity",G.t=oe),ge!==G.a&&et(q,"class",G.a=ge),G},{e:void 0,t:void 0,a:void 0}),E})(),(()=>{var E=qi();return p(E,T(ee,{get when(){return!w.loading},get fallback(){return Ki()},get children(){return T(ee,{get when(){return(w()||[]).length>0},get fallback(){return d1()},get children(){var N=Qm(),U=N.firstChild,W=U.nextSibling;return p(W,T(Ve,{get each(){return w()||[]},children:q=>(()=>{var G=h1(),Q=G.firstChild,oe=Q.nextSibling,ge=oe.nextSibling,Ce=ge.firstChild,Z=ge.nextSibling,te=Z.firstChild,re=Z.nextSibling,me=re.nextSibling,ye=me.firstChild,we=ye.nextSibling,ke=we.nextSibling;return G.$$click=()=>L(q),p(Q,()=>q.name),p(oe,()=>q.project),p(Ce,()=>q.syncStatus),p(te,()=>q.health),p(re,()=>q.age),ye.$$click=Se=>{Se.stopPropagation(),_(q),j()},we.$$click=Se=>{Se.stopPropagation(),_(q),M()},ke.$$click=Se=>{Se.stopPropagation(),L(q)},ne(Se=>{var $e=`badge ${q.syncStatus==="Synced"?"badge-success":"badge-warning"}`,he=`badge ${q.health==="Healthy"?"badge-success":"badge-error"}`;return $e!==Se.e&&Ue(Ce,Se.e=$e),he!==Se.t&&Ue(te,Se.t=he),Se},{e:void 0,t:void 0}),G})()})),N}})}})),E})()]}}),null),p(V,T(ee,{get when(){return e()==="flux"},get children(){return[(()=>{var E=e1(),N=E.firstChild,U=N.firstChild,W=N.nextSibling,q=W.firstChild;return p(N,()=>x()?.length||0,U),W.$$click=()=>C(),ne(G=>{var Q=x.loading,oe=x.loading?.5:1,ge=`w-4 h-4 ${x.loading?"animate-spin":""}`;return Q!==G.e&&(W.disabled=G.e=Q),oe!==G.t&&ve(W,"opacity",G.t=oe),ge!==G.a&&et(q,"class",G.a=ge),G},{e:void 0,t:void 0,a:void 0}),E})(),(()=>{var E=qi();return p(E,T(ee,{get when(){return!x.loading},get fallback(){return Ki()},get children(){return T(ee,{get when(){return(x()||[]).length>0},get fallback(){return u1()},get children(){var N=t1(),U=N.firstChild,W=U.nextSibling;return p(W,T(Ve,{get each(){return x()||[]},children:q=>(()=>{var G=f1(),Q=G.firstChild,oe=Q.nextSibling,ge=oe.nextSibling,Ce=ge.nextSibling,Z=Ce.firstChild,te=Ce.nextSibling;return p(Q,()=>q.name),p(oe,()=>q.kind),p(ge,()=>q.namespace),p(Z,()=>q.ready?"True":"False"),p(te,()=>q.status),ne(()=>Ue(Z,`badge ${q.ready?"badge-success":"badge-error"}`)),G})()})),N}})}})),E})()]}}),null),p(V,T(st,{get isOpen(){return h()},onClose:()=>s(!1),get title(){return`Helm Release: ${r()?.name}`},size:"lg",get children(){return T(ee,{get when(){return r()},get children(){var E=s1(),N=E.firstChild,U=N.firstChild,W=U.firstChild,q=W.nextSibling,G=U.nextSibling,Q=G.firstChild,oe=Q.nextSibling,ge=G.nextSibling,Ce=ge.firstChild,Z=Ce.nextSibling,te=ge.nextSibling,re=te.firstChild,me=re.nextSibling,ye=me.firstChild,we=te.nextSibling,ke=we.firstChild,Se=ke.nextSibling,$e=N.nextSibling;return $e.firstChild,p(E,T(ee,{get when(){return l()},get children(){var he=Pl();return p(he,()=>l()?.text),ne(()=>Ue(he,`p-3 rounded-lg ${l()?.type==="success"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`)),he}}),N),p(q,()=>r()?.chart),p(oe,()=>r()?.revision),p(Z,()=>r()?.namespace),p(ye,()=>r()?.status),p(Se,()=>r()?.updated),p($e,T(ee,{get when(){return!v()},get fallback(){return g1()},get children(){return T(ee,{get when(){return f().length>0},get fallback(){return p1()},get children(){var he=r1(),ue=he.firstChild,le=ue.firstChild,ie=le.nextSibling;return p(ie,T(Ve,{get each(){return f()},children:ae=>(()=>{var _e=_1(),se=_e.firstChild,fe=se.nextSibling,de=fe.firstChild,pe=fe.nextSibling,Ee=pe.nextSibling,be=Ee.nextSibling;return p(se,()=>ae.revision,null),p(se,T(ee,{get when(){return ae.revision===r()?.revision},get children(){return v1()}}),null),p(de,()=>ae.status),p(pe,()=>ae.updated),p(Ee,()=>ae.description||"-"),p(be,T(ee,{get when(){return ae.revision!==r()?.revision},get children(){var Pe=m1();return Pe.$$click=()=>D(ae.revision),p(Pe,()=>S()?"Rolling back...":"Rollback"),ne(Ne=>{var Ie=S(),Ae=S()?.5:1;return Ie!==Ne.e&&(Pe.disabled=Ne.e=Ie),Ae!==Ne.t&&ve(Pe,"opacity",Ne.t=Ae),Ne},{e:void 0,t:void 0}),Pe}})),ne(()=>Ue(de,`badge ${ae.status==="deployed"?"badge-success":ae.status==="superseded"?"badge-secondary":"badge-warning"}`)),_e})()})),he}})}}),null),E}})}}),null),p(V,T(st,{get isOpen(){return i()},onClose:()=>u(!1),get title(){return`ArgoCD App: ${d()?.name}`},size:"lg",get children(){return T(ee,{get when(){return d()},get children(){var E=i1(),N=E.firstChild,U=N.firstChild;U.firstChild;var W=U.nextSibling;W.firstChild;var q=N.nextSibling,G=q.firstChild,Q=G.firstChild,oe=Q.nextSibling,ge=G.nextSibling,Ce=ge.firstChild,Z=Ce.nextSibling,te=ge.nextSibling,re=te.firstChild,me=re.nextSibling,ye=me.firstChild,we=te.nextSibling,ke=we.firstChild,Se=ke.nextSibling,$e=Se.firstChild,he=we.nextSibling,ue=he.firstChild,le=ue.nextSibling,ie=he.nextSibling,ae=ie.firstChild,_e=ae.nextSibling,se=ie.nextSibling,fe=se.firstChild,de=fe.nextSibling,pe=se.nextSibling,Ee=pe.firstChild,be=Ee.nextSibling,Pe=pe.nextSibling,Ne=Pe.firstChild,Ie=Ne.nextSibling;return p(E,T(ee,{get when(){return l()},get children(){var Ae=Pl();return p(Ae,()=>l()?.text),ne(()=>Ue(Ae,`p-3 rounded-lg ${l()?.type==="success"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`)),Ae}}),N),U.$$click=j,p(U,()=>S()?"Syncing...":"Sync",null),W.$$click=M,p(W,()=>S()?"Refreshing...":"Refresh",null),p(oe,()=>d()?.project),p(Z,()=>d()?.namespace),p(ye,()=>d()?.syncStatus),p($e,()=>d()?.health),p(le,()=>d()?.age),p(_e,()=>d()?.revision||"-"),p(de,()=>d()?.repoURL||"-"),p(be,()=>d()?.path||"-"),p(Ie,()=>d()?.cluster||"-"),ne(Ae=>{var Re=S(),je=S()?.5:1,Te=S(),He=S()?.5:1,ze=`badge ${d()?.syncStatus==="Synced"?"badge-success":"badge-warning"}`,Xe=`badge ${d()?.health==="Healthy"?"badge-success":"badge-error"}`;return Re!==Ae.e&&(U.disabled=Ae.e=Re),je!==Ae.t&&ve(U,"opacity",Ae.t=je),Te!==Ae.a&&(W.disabled=Ae.a=Te),He!==Ae.o&&ve(W,"opacity",Ae.o=He),ze!==Ae.i&&Ue(ye,Ae.i=ze),Xe!==Ae.n&&Ue($e,Ae.n=Xe),Ae},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),E}})}}),null),V})()};lt(["click"]);var y1=O('<svg class="w-8 h-8"viewBox="0 0 48 48"><path fill=#4285F4 d="M24 4L6 14v20l18 10 18-10V14L24 4z"></path><path fill=#EA4335 d="M24 4L6 14l18 10 18-10L24 4z"></path><path fill=#34A853 d="M6 34l18 10V24L6 14v20z"></path><path fill=#FBBC05 d="M42 34V14L24 24v20l18-10z"></path><path fill=#fff d="M24 17l-7 4v8l7 4 7-4v-8l-7-4z"opacity=.3>'),x1=O('<svg class="w-8 h-8"viewBox="0 0 48 48"><path fill=#FF9900 d="M8 24c0-8.8 7.2-16 16-16s16 7.2 16 16-7.2 16-16 16S8 32.8 8 24z"></path><path fill=#252F3E d="M16 22c0-4.4 3.6-8 8-8s8 3.6 8 8-3.6 8-8 8-8-3.6-8-8z">'),w1=O('<svg class="w-8 h-8"viewBox="0 0 48 48"><path fill=#0089D6 d="M24 4L8 24l8 16h16l8-16L24 4z">'),S1=O('<svg class="w-8 h-8"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z">'),$1=O('<div class="text-center py-8"style=color:var(--text-muted)>No namespace cost data available'),C1=O('<span class="text-xs px-1.5 py-0.5 rounded"style="background:rgba(34, 197, 94, 0.2);color:var(--success-color)">~70% savings'),k1=O('<div class="mt-4 pt-3 border-t"style=border-color:var(--border-color)><div class="flex justify-between text-sm"><span style=color:var(--text-secondary)>On-Demand Nodes</span><span style=color:var(--text-primary)></span></div><div class="flex justify-between text-sm mt-1"><span style=color:var(--text-secondary)>Spot/Preemptible Nodes</span><span class="flex items-center gap-1"><span style=color:var(--success-color)>'),E1=O('<div class="grid grid-cols-1 lg:grid-cols-2 gap-6"><div class="card p-6"><h3 class="font-semibold mb-4"style=color:var(--text-primary)>Cost by Namespace</h3><div class=space-y-3></div></div><div class="card p-6"><h3 class="font-semibold mb-4"style=color:var(--text-primary)>Resource Allocation</h3><div class=space-y-4><div><div class="flex justify-between text-sm mb-2"><span style=color:var(--text-secondary)>CPU (<!>)</span><span style=color:var(--text-muted)>Cluster Total</span></div><div class="h-3 rounded-full overflow-hidden"style=background:var(--bg-tertiary)><div class="h-full rounded-full"style=width:100%;background:var(--accent-primary)></div></div></div><div><div class="flex justify-between text-sm mb-2"><span style=color:var(--text-secondary)>Memory (<!>)</span><span style=color:var(--text-muted)>Cluster Total</span></div><div class="h-3 rounded-full overflow-hidden"style=background:var(--bg-tertiary)><div class="h-full rounded-full"style=width:100%;background:var(--accent-secondary)></div></div></div><div><div class="flex justify-between text-sm mb-2"><span style=color:var(--text-secondary)>Nodes</span><span style=color:var(--text-muted)></span></div></div></div><div class="mt-6 pt-4 border-t"style=border-color:var(--border-color)><h4 class="text-sm font-medium mb-3"style=color:var(--text-primary)>Pricing Rates (<!>)</h4><div class="space-y-2 text-sm"><div class="flex justify-between"><span style=color:var(--text-secondary)>CPU (per core/hour)</span><span style=color:var(--text-primary)>$</span></div><div class="flex justify-between"><span style=color:var(--text-secondary)>Memory (per GB/hour)</span><span style=color:var(--text-primary)>$</span></div><div class="flex justify-between"><span style=color:var(--text-secondary)>Storage (per GB/month)</span><span style=color:var(--text-primary)>$</span></div></div><p class="text-xs mt-3"style=color:var(--text-muted)>'),A1=O('<div class="card overflow-hidden"><table class=data-table><thead><tr><th>Namespace</th><th>Pods</th><th>CPU</th><th>Memory</th><th>Hourly</th><th>Daily</th><th>Monthly</th></tr></thead><tbody>'),L1=O('<div class="card p-6 mb-6"><div class="flex items-center gap-3"><svg class="w-6 h-6"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--success-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h3 class=font-semibold style=color:var(--text-primary)>Optimization Opportunities</h3><p class=text-sm style=color:var(--text-secondary)>Resources using less than 10% of their requests could be scaled down to save costs'),M1=O('<div class="card overflow-hidden"><table class=data-table><thead><tr><th>Resource</th><th>Namespace</th><th>Kind</th><th>CPU Usage</th><th>Memory Usage</th><th>Wasted Cost/hr</th></tr></thead><tbody>'),D1=O('<div class=space-y-6><div class="flex items-center justify-between"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Cost Analysis</h1><p style=color:var(--text-secondary)></p></div><div class="flex items-center gap-3 px-4 py-2 rounded-lg"style=background:var(--bg-tertiary)><div><div class=font-medium style=color:var(--text-primary)></div><div class=text-xs style=color:var(--text-muted)></div></div></div></div><div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div class="card p-6"><div class=text-sm style=color:var(--text-muted)>Hourly Cost</div><div class="text-3xl font-bold mt-2"style=color:var(--accent-primary)></div><div class="text-xs mt-1"style=color:var(--text-secondary)> nodes</div></div><div class="card p-6"><div class=text-sm style=color:var(--text-muted)>Daily Cost</div><div class="text-3xl font-bold mt-2"style=color:var(--accent-secondary)></div><div class="text-xs mt-1"style=color:var(--text-secondary)> CPU</div></div><div class="card p-6"><div class=text-sm style=color:var(--text-muted)>Monthly Estimate</div><div class="text-3xl font-bold mt-2"style=color:#f59e0b></div><div class="text-xs mt-1"style=color:var(--text-secondary)> Memory</div></div><div class="card p-6"><div class=text-sm style=color:var(--text-muted)>Potential Savings</div><div class="text-3xl font-bold mt-2"style=color:var(--success-color)></div><div class="text-xs mt-1"style=color:var(--text-secondary)> idle resources</div></div></div><div class="flex gap-2 border-b"style=border-color:var(--border-color)>'),R1=O('<button class="px-4 py-2 -mb-px transition-colors">'),T1=O('<div class="flex items-center justify-between p-3 rounded-lg"style=background:var(--bg-tertiary)><div><div class=font-medium style=color:var(--text-primary)></div><div class=text-xs style=color:var(--text-muted)> pods â¢ <!> CPU â¢ <!> mem</div></div><div class=text-right><div class=font-bold style=color:var(--warning-color)>/mo</div><div class=text-xs style=color:var(--text-muted)>/day'),P1=O('<tr><td colspan=7 class="text-center py-8"style=color:var(--text-muted)>No namespace cost data available'),I1=O("<tr class=hover:bg-[var(--bg-tertiary)]><td class=font-medium style=color:var(--accent-primary)></td><td></td><td></td><td></td><td></td><td></td><td class=font-bold style=color:var(--warning-color)>"),B1=O('<tr><td colspan=6 class="text-center py-8"style=color:var(--text-muted)><svg class="w-12 h-12 mx-auto mb-4 text-green-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><p>No idle resources found</p><p class=text-sm>All resources are being utilized efficiently'),O1=O('<tr class=hover:bg-[var(--bg-tertiary)]><td class=font-medium style=color:var(--accent-primary)></td><td></td><td><span class="badge badge-info"></span></td><td><div class="flex items-center gap-2"><div class="w-16 h-2 rounded-full overflow-hidden"style=background:var(--bg-tertiary)><div class="h-full rounded-full"style=background:var(--warning-color)></div></div><span class=text-xs style=color:var(--text-muted)>%</span></div></td><td><div class="flex items-center gap-2"><div class="w-16 h-2 rounded-full overflow-hidden"style=background:var(--bg-tertiary)><div class="h-full rounded-full"style=background:var(--accent-secondary)></div></div><span class=text-xs style=color:var(--text-muted)>%</span></div></td><td class=font-bold style=color:var(--success-color)>');const H1=()=>{const[e,t]=J("overview"),[r,n]=J(null),[d,{refetch:_}]=Ke(async()=>{try{const v=await De.getClusterCost();return console.log("Cost API response:",v),v}catch(v){return console.error("Cost API error:",v),null}}),[h]=Ke(De.getStatus),[s]=Ke(()=>De.getIdleResources());Ke(De.getNamespaces);const i=v=>v==null?"--":`$${v.toFixed(2)}`,u=v=>v==null?"--":v<1?`${(v*1e3).toFixed(0)}m`:`${v.toFixed(2)} cores`,f=v=>v==null?"--":v<1?`${(v*1024).toFixed(0)} Mi`:`${v.toFixed(2)} Gi`,g=[{id:"overview",label:"Overview"},{id:"namespaces",label:"By Namespace"},{id:"idle",label:"Idle Resources"}];return(()=>{var v=D1(),b=v.firstChild,S=b.firstChild,y=S.firstChild,l=y.nextSibling,a=S.nextSibling,o=a.firstChild,c=o.firstChild,m=c.nextSibling,w=b.nextSibling,k=w.firstChild,A=k.firstChild,x=A.nextSibling,C=x.nextSibling,I=C.firstChild,R=k.nextSibling,D=R.firstChild,j=D.nextSibling,M=j.nextSibling,P=M.firstChild,L=R.nextSibling,F=L.firstChild,$=F.nextSibling,B=$.nextSibling,H=B.firstChild,z=L.nextSibling,X=z.firstChild,V=X.nextSibling,Y=V.nextSibling,K=Y.firstChild,ce=w.nextSibling;return p(l,(()=>{var E=Fe(()=>!!h()?.cluster);return()=>E()?`Cluster: ${h()?.cluster}`:"Cluster cost estimation and optimization opportunities"})()),p(a,T(ee,{get when(){return d()?.cloud?.provider==="gcp"},get children(){return y1()}}),o),p(a,T(ee,{get when(){return d()?.cloud?.provider==="aws"},get children(){return x1()}}),o),p(a,T(ee,{get when(){return d()?.cloud?.provider==="azure"},get children(){return w1()}}),o),p(a,T(ee,{get when(){return!d()?.cloud?.provider||d()?.cloud?.provider==="unknown"},get children(){return S1()}}),o),p(c,(()=>{var E=Fe(()=>!!d.loading);return()=>E()?"Loading...":d()?.cloud?.displayName||"Unknown Cloud"})()),p(m,(()=>{var E=Fe(()=>!!d.loading);return()=>E()?"...":d()?.cloud?.region||"Unknown region"})()),p(x,()=>i(d()?.hourlyCost)),p(C,()=>d()?.nodeCount||0,I),p(j,()=>i(d()?.dailyCost)),p(M,()=>u(d()?.totalCpu),P),p($,()=>i(d()?.monthlyCost)),p(B,()=>f(d()?.totalMemory),H),p(V,()=>i((s()?.idleResources||[]).reduce((E,N)=>E+(N.wastedCost||0),0)*720)),p(Y,()=>(s()?.idleResources||[]).length,K),p(ce,T(Ve,{each:g,children:E=>(()=>{var N=R1();return N.$$click=()=>t(E.id),p(N,()=>E.label),ne(U=>{var W=e()===E.id?"var(--accent-primary)":"var(--text-secondary)",q=e()===E.id?"2px solid var(--accent-primary)":"2px solid transparent";return W!==U.e&&ve(N,"color",U.e=W),q!==U.t&&ve(N,"border-bottom",U.t=q),U},{e:void 0,t:void 0}),N})()})),p(v,T(ee,{get when(){return e()==="overview"},get children(){var E=E1(),N=E.firstChild,U=N.firstChild,W=U.nextSibling,q=N.nextSibling,G=q.firstChild,Q=G.nextSibling,oe=Q.firstChild,ge=oe.firstChild,Ce=ge.firstChild,Z=Ce.firstChild,te=Z.nextSibling;te.nextSibling,Ce.nextSibling;var re=ge.nextSibling;re.firstChild;var me=oe.nextSibling,ye=me.firstChild,we=ye.firstChild,ke=we.firstChild,Se=ke.nextSibling;Se.nextSibling,we.nextSibling;var $e=ye.nextSibling;$e.firstChild;var he=me.nextSibling,ue=he.firstChild,le=ue.firstChild,ie=le.nextSibling,ae=Q.nextSibling,_e=ae.firstChild,se=_e.firstChild,fe=se.nextSibling;fe.nextSibling;var de=_e.nextSibling,pe=de.firstChild,Ee=pe.firstChild,be=Ee.nextSibling;be.firstChild;var Pe=pe.nextSibling,Ne=Pe.firstChild,Ie=Ne.nextSibling;Ie.firstChild;var Ae=Pe.nextSibling,Re=Ae.firstChild,je=Re.nextSibling;je.firstChild;var Te=de.nextSibling;return p(W,T(Ve,{get each(){return(d()?.namespaceCosts||[]).slice(0,8)},children:He=>(()=>{var ze=T1(),Xe=ze.firstChild,Me=Xe.firstChild,We=Me.nextSibling,Ge=We.firstChild,Je=Ge.nextSibling,ot=Je.nextSibling,ft=ot.nextSibling;ft.nextSibling;var Rt=Xe.nextSibling,hr=Rt.firstChild,Sr=hr.firstChild,qr=hr.nextSibling,xe=qr.firstChild;return p(Me,()=>He.namespace),p(We,()=>He.podCount,Ge),p(We,()=>u(He.totalCpu),Je),p(We,()=>f(He.totalMemory),ft),p(hr,()=>i(He.monthlyCost),Sr),p(qr,()=>i(He.dailyCost),xe),ze})()}),null),p(W,T(ee,{get when(){return(d()?.namespaceCosts||[]).length===0},get children(){return $1()}}),null),p(Ce,()=>u(d()?.totalCpu),te),p(we,()=>f(d()?.totalMemory),Se),p(ie,()=>d()?.nodeCount||0),p(_e,()=>d()?.pricing?.provider||"Generic",fe),p(_e,(()=>{var He=Fe(()=>!!d()?.pricing?.region);return()=>He()?` - ${d()?.pricing?.region}`:""})(),fe),p(be,()=>(d()?.pricing?.cpuPerCoreHour||.0336).toFixed(4),null),p(Ie,()=>(d()?.pricing?.memoryPerGBHour||.0045).toFixed(4),null),p(je,()=>(d()?.pricing?.storagePerGBMonth||.1).toFixed(2),null),p(ae,T(ee,{get when(){return d()?.pricing?.spotNodesCount!==void 0},get children(){var He=k1(),ze=He.firstChild,Xe=ze.firstChild,Me=Xe.nextSibling,We=ze.nextSibling,Ge=We.firstChild,Je=Ge.nextSibling,ot=Je.firstChild;return p(Me,()=>d()?.pricing?.onDemandNodesCount||0),p(ot,()=>d()?.pricing?.spotNodesCount||0),p(Je,T(ee,{get when(){return(d()?.pricing?.spotNodesCount||0)>0},get children(){return C1()}}),null),He}}),Te),p(Te,T(ee,{get when(){return d()?.cloud?.provider==="gcp"},fallback:"Rates auto-detected from cluster. Actual costs may vary.",get children(){return["GCP ",Fe(()=>d()?.cloud?.region)," region pricing applied automatically."]}})),E}}),null),p(v,T(ee,{get when(){return e()==="namespaces"},get children(){var E=A1(),N=E.firstChild,U=N.firstChild,W=U.nextSibling;return p(W,T(Ve,{get each(){return d()?.namespaceCosts||[]},get fallback(){return(()=>{var q=P1();return q.firstChild,q})()},children:q=>(()=>{var G=I1(),Q=G.firstChild,oe=Q.nextSibling,ge=oe.nextSibling,Ce=ge.nextSibling,Z=Ce.nextSibling,te=Z.nextSibling,re=te.nextSibling;return p(Q,()=>q.namespace),p(oe,()=>q.podCount),p(ge,()=>u(q.totalCpu)),p(Ce,()=>f(q.totalMemory)),p(Z,()=>i(q.hourlyCost)),p(te,()=>i(q.dailyCost)),p(re,()=>i(q.monthlyCost)),G})()})),E}}),null),p(v,T(ee,{get when(){return e()==="idle"},get children(){return[(()=>{var E=L1(),N=E.firstChild,U=N.firstChild,W=U.nextSibling,q=W.firstChild;return q.nextSibling,E})(),(()=>{var E=M1(),N=E.firstChild,U=N.firstChild,W=U.nextSibling;return p(W,T(Ve,{get each(){return s()?.idleResources||[]},get fallback(){return(()=>{var q=B1();return q.firstChild,q})()},children:q=>(()=>{var G=O1(),Q=G.firstChild,oe=Q.nextSibling,ge=oe.nextSibling,Ce=ge.firstChild,Z=ge.nextSibling,te=Z.firstChild,re=te.firstChild,me=re.firstChild,ye=re.nextSibling,we=ye.firstChild,ke=Z.nextSibling,Se=ke.firstChild,$e=Se.firstChild,he=$e.firstChild,ue=$e.nextSibling,le=ue.firstChild,ie=ke.nextSibling;return p(Q,()=>q.name),p(oe,()=>q.namespace),p(Ce,()=>q.kind),p(ye,()=>(q.cpuUsage/q.cpuRequest*100).toFixed(1),we),p(ue,()=>(q.memoryUsage/q.memoryRequest*100).toFixed(1),le),p(ie,()=>i(q.wastedCost)),ne(ae=>{var _e=`${Math.min(100,q.cpuUsage/q.cpuRequest*100)}%`,se=`${Math.min(100,q.memoryUsage/q.memoryRequest*100)}%`;return _e!==ae.e&&ve(me,"width",ae.e=_e),se!==ae.t&&ve(he,"width",ae.t=se),ae},{e:void 0,t:void 0}),G})()})),E})()]}}),null),v})()};lt(["click"]);var N1=O('<div class="card p-8"><div class=text-center><div class="spinner mx-auto mb-4"></div><p style=color:var(--text-muted)>Checking for configuration drift...'),z1=O('<div class="card p-8"><div class=text-center><svg class="w-16 h-16 mx-auto mb-4"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--success-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><h3 class="text-lg font-semibold"style=color:var(--text-primary)>No Configuration Drift Detected</h3><p style=color:var(--text-secondary)>All resources are in sync with their expected state'),F1=O('<div class="card overflow-hidden"><div class="p-4 border-b"style=border-color:var(--border-color)><h3 class="font-semibold flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--error-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>Drifted Resources (<!>)</h3></div><table class=data-table><thead><tr><th>Resource</th><th>Kind</th><th>Namespace</th><th>Changes</th><th>Last Checked</th><th>Actions</th></tr></thead><tbody>'),j1=O("<div class=space-y-3>"),U1=O('<div class=space-y-4><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Namespace</div><div style=color:var(--text-primary)></div></div><h4 class=font-medium style=color:var(--text-primary)>Changes Detected</h4><div class="flex justify-end gap-2 mt-4"><button class="px-4 py-2 rounded-lg"style=background:var(--bg-tertiary);color:var(--text-primary)>Close</button><button class="px-4 py-2 rounded-lg"style=background:var(--success-color);color:white>Revert to Expected'),V1=O('<div class=space-y-6><div class="flex items-center justify-between"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Configuration Drift</h1><p style=color:var(--text-secondary)>Detect and remediate configuration drift from desired state</p></div><button class="flex items-center gap-2 px-4 py-2 rounded-lg transition-colors"style=background:var(--bg-tertiary);color:var(--text-primary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>Check Drift</button></div><div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div class="card p-6"><div class=text-sm style=color:var(--text-muted)>Resources Checked</div><div class="text-3xl font-bold mt-2"style=color:var(--accent-primary)></div></div><div class="card p-6"><div class=text-sm style=color:var(--text-muted)>In Sync</div><div class="text-3xl font-bold mt-2"style=color:var(--success-color)></div></div><div class="card p-6"><div class=text-sm style=color:var(--text-muted)>Drifted</div><div class="text-3xl font-bold mt-2"></div></div><div class="card p-6"><div class=text-sm style=color:var(--text-muted)>Health</div><div class="text-3xl font-bold mt-2">%</div></div></div><div class="card p-6"><h3 class="font-semibold mb-4 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>About Configuration Drift</h3><div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="p-4 rounded-lg"style=background:var(--bg-tertiary)><h4 class="font-medium mb-2"style=color:var(--text-primary)>What is Drift?</h4><p class=text-sm style=color:var(--text-secondary)>Configuration drift occurs when the actual state of a resource differs from its expected or desired state, often due to manual changes.</p></div><div class="p-4 rounded-lg"style=background:var(--bg-tertiary)><h4 class="font-medium mb-2"style=color:var(--text-primary)>Detection Method</h4><p class=text-sm style=color:var(--text-secondary)>We compare resource specifications against their last-applied-configuration annotation or GitOps source of truth.</p></div><div class="p-4 rounded-lg"style=background:var(--bg-tertiary)><h4 class="font-medium mb-2"style=color:var(--text-primary)>Remediation</h4><p class=text-sm style=color:var(--text-secondary)>Revert drifted resources to their expected state automatically, or use GitOps to sync from your repository.'),W1=O('<tr class=hover:bg-[var(--bg-tertiary)]><td class=font-medium style=color:var(--accent-primary)></td><td><span class="badge badge-info"></span></td><td></td><td><span class="badge badge-warning"> changes</span></td><td class=text-sm style=color:var(--text-muted)></td><td><div class="flex items-center gap-2"><button class=action-btn title="View Diff"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></button><button class=action-btn title="Revert to Expected"style=color:var(--success-color)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6">'),q1=O('<div class="text-center py-4"style=color:var(--text-muted)>No detailed changes available'),K1=O('<div class="p-3 rounded-lg border"style=background:var(--bg-secondary);border-color:var(--border-color)><div class="font-mono text-sm mb-2"style=color:var(--accent-primary)></div><div class="grid grid-cols-2 gap-4 text-sm"><div><div class="text-xs mb-1"style=color:var(--text-muted)>Expected</div><div class="p-2 rounded font-mono text-xs break-all"style="background:rgba(34, 197, 94, 0.1);color:var(--success-color)"></div></div><div><div class="text-xs mb-1"style=color:var(--text-muted)>Actual</div><div class="p-2 rounded font-mono text-xs break-all"style="background:rgba(239, 68, 68, 0.1);color:var(--error-color)">');const Y1=()=>{const[e,t]=J(!1),[r,n]=J(null),[d,{refetch:_}]=Ke(()=>tt(),async f=>{const g=f==="_all"?"default":f;return De.getDriftSummary(g)}),h=f=>{n(f),t(!0)},s=async f=>{if(confirm(`Revert ${f.kind}/${f.name} to its expected state?`))try{await De.revertDrift(f.kind,f.name,f.namespace),_()}catch(g){console.error("Failed to revert drift:",g),alert("Failed to revert. Check console for details.")}},i=()=>(d()?.drifted||[]).length,u=()=>d()?.total||0;return(()=>{var f=V1(),g=f.firstChild,v=g.firstChild,b=v.firstChild;b.nextSibling;var S=v.nextSibling,y=g.nextSibling,l=y.firstChild,a=l.firstChild,o=a.nextSibling,c=l.nextSibling,m=c.firstChild,w=m.nextSibling,k=c.nextSibling,A=k.firstChild,x=A.nextSibling,C=k.nextSibling,I=C.firstChild,R=I.nextSibling,D=R.firstChild,j=y.nextSibling,M=j.firstChild,P=M.nextSibling,L=P.firstChild,F=L.firstChild;F.nextSibling;var $=L.nextSibling,B=$.firstChild;B.nextSibling;var H=$.nextSibling,z=H.firstChild;return z.nextSibling,S.$$click=()=>_(),p(o,u),p(w,()=>u()-i()),p(x,i),p(R,(()=>{var X=Fe(()=>u()>0);return()=>X()?Math.round((u()-i())/u()*100):100})(),D),p(f,T(ee,{get when(){return d.loading},get children(){var X=N1(),V=X.firstChild,Y=V.firstChild;return Y.nextSibling,X}}),j),p(f,T(ee,{get when(){return Fe(()=>!d.loading)()&&i()===0},get children(){var X=z1(),V=X.firstChild,Y=V.firstChild,K=Y.nextSibling;return K.nextSibling,X}}),j),p(f,T(ee,{get when(){return Fe(()=>!d.loading)()&&i()>0},get children(){var X=F1(),V=X.firstChild,Y=V.firstChild,K=Y.firstChild,ce=K.nextSibling,E=ce.nextSibling;E.nextSibling;var N=V.nextSibling,U=N.firstChild,W=U.nextSibling;return p(Y,i,E),p(W,T(Ve,{get each(){return d()?.drifted||[]},children:q=>(()=>{var G=W1(),Q=G.firstChild,oe=Q.nextSibling,ge=oe.firstChild,Ce=oe.nextSibling,Z=Ce.nextSibling,te=Z.firstChild,re=te.firstChild,me=Z.nextSibling,ye=me.nextSibling,we=ye.firstChild,ke=we.firstChild,Se=ke.nextSibling;return p(Q,()=>q.name),p(ge,()=>q.kind),p(Ce,()=>q.namespace),p(te,()=>q.driftDetails?.length||0,re),p(me,()=>q.lastChecked||"Just now"),ke.$$click=()=>h(q),Se.$$click=()=>s(q),G})()})),X}}),j),p(f,T(st,{get isOpen(){return e()},onClose:()=>t(!1),get title(){return`Drift Details: ${r()?.kind}/${r()?.name}`},size:"lg",get children(){return T(ee,{get when(){return r()},get children(){var X=U1(),V=X.firstChild,Y=V.firstChild,K=Y.nextSibling,ce=V.nextSibling,E=ce.nextSibling,N=E.firstChild,U=N.nextSibling;return p(K,()=>r()?.namespace),p(X,T(ee,{get when(){return(r()?.driftDetails||[]).length>0},get fallback(){return q1()},get children(){var W=j1();return p(W,T(Ve,{get each(){return r()?.driftDetails||[]},children:q=>(()=>{var G=K1(),Q=G.firstChild,oe=Q.nextSibling,ge=oe.firstChild,Ce=ge.firstChild,Z=Ce.nextSibling,te=ge.nextSibling,re=te.firstChild,me=re.nextSibling;return p(Q,()=>q.field),p(Z,()=>q.expected||"(not set)"),p(me,()=>q.actual||"(not set)"),G})()})),W}}),E),N.$$click=()=>t(!1),U.$$click=()=>{r()&&s(r()),t(!1)},X}})}}),null),ne(X=>{var V=i()>0?"var(--error-color)":"var(--success-color)",Y=i()===0?"var(--success-color)":i()<5?"var(--warning-color)":"var(--error-color)";return V!==X.e&&ve(x,"color",X.e=V),Y!==X.t&&ve(R,"color",X.t=Y),X},{e:void 0,t:void 0}),f})()};lt(["click"]);class G1{ws=null;reconnectAttempts=0;maxReconnectAttempts=10;reconnectDelay=1e3;handlers=new Set;pingInterval=null;connect(){if(this.ws?.readyState===WebSocket.OPEN)return;const r=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`;try{this.ws=new WebSocket(r),this.ws.onopen=()=>{console.log("WebSocket connected"),this.reconnectAttempts=0,this.startPing(),this.notifyHandlers({type:"connection",data:{connected:!0}})},this.ws.onmessage=n=>{try{const d=JSON.parse(n.data);this.notifyHandlers(d)}catch(d){console.error("Failed to parse WebSocket message:",d)}},this.ws.onclose=()=>{console.log("WebSocket disconnected"),this.stopPing(),this.notifyHandlers({type:"connection",data:{connected:!1}}),this.attemptReconnect()},this.ws.onerror=n=>{console.error("WebSocket error:",n)}}catch(n){console.error("Failed to create WebSocket:",n),this.attemptReconnect()}}disconnect(){this.stopPing(),this.ws&&(this.ws.close(),this.ws=null)}attemptReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.log("Max reconnect attempts reached");return}this.reconnectAttempts++;const t=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);console.log(`Reconnecting in ${t}ms (attempt ${this.reconnectAttempts})`),setTimeout(()=>this.connect(),t)}startPing(){this.pingInterval=window.setInterval(()=>{this.ws?.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify({type:"ping"}))},3e4)}stopPing(){this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null)}subscribe(t){return this.handlers.add(t),()=>this.handlers.delete(t)}notifyHandlers(t){this.handlers.forEach(r=>{try{r(t)}catch(n){console.error("Handler error:",n)}})}send(t){this.ws?.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify(t))}}const ys=new G1,[F2,X1]=J(!1);ys.subscribe(e=>{e.type==="connection"&&X1(e.data.connected)});var J1=O('<svg class="w-4 h-4"fill=currentColor viewBox="0 0 24 24"><path d="M8 5v14l11-7z">'),Z1=O('<div class=overflow-y-auto style="max-height:calc(100vh - 320px)">'),Q1=O('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Events</h1><p style=color:var(--text-secondary)>Real-time cluster events stream</p></div><div class="flex items-center gap-3"><button></button><button class=icon-btn title="Refresh Events"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div><span></span><span class=text-sm style=color:var(--text-secondary)></span><span class="text-xl font-bold"style=color:var(--text-primary)></span><span class=text-xs style=color:var(--text-muted)>new</span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Normal</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--warning-color)"><span class=text-sm style=color:var(--text-secondary)>Warning</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class=flex-1></div><input type=text placeholder="Search events..."class="px-3 py-2 rounded-lg text-sm w-64"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=all>All Types</option><option value=Normal>Normal</option><option value=Warning>Warning</option></select></div><div class="card overflow-hidden">'),e_=O('<svg class="w-4 h-4"fill=currentColor viewBox="0 0 24 24"><path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z">'),t_=O('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading events...'),r_=O('<div class="p-8 text-center"style=color:var(--text-muted)>No events found'),s_=O('<span class="text-xs px-2 py-0.5 rounded"style=background:var(--bg-tertiary);color:var(--text-secondary)>'),i_=O('<span class="px-2 py-0.5 rounded"style=background:var(--bg-tertiary)>x'),n_=O("<span>Source: "),l_=O('<div style=border-color:var(--border-color)><div class="flex items-start gap-4"><div class="flex-shrink-0 p-2 rounded-lg"style=background:var(--bg-tertiary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></div><div class="flex-1 min-w-0"><div class="flex items-center gap-2 flex-wrap"><span></span><span class="px-2 py-0.5 rounded text-xs"style=background:var(--bg-tertiary);color:var(--accent-primary)></span><span class=text-xs style=color:var(--text-muted)>/</span></div><p class="mt-1 text-sm"style=color:var(--text-primary)></p><div class="mt-2 flex items-center gap-4 text-xs"style=color:var(--text-muted)><span>');const o_=()=>{const[e,t]=J([]),[r,n]=J("all"),[d,_]=J(""),[h,s]=J(!1),[i,u]=J([]),[f,g]=J(0),[v,{refetch:b}]=Ke(()=>({ns:tt(),trigger:f()}),async({ns:o})=>{try{console.log("[Events] Fetching events for namespace:",o);const c=o==="_all"||o==="All Namespaces"||!o?void 0:o,m=await De.getEvents(c,200);return console.log("[Events] Received events:",m?.events?.length||0,"total:",m?.total||0),m?.events||[]}catch(c){return console.error("[Events] Failed to fetch events:",c),[]}});Dt(()=>{const o=v(),c=v.loading,m=v.error;console.log("[Events] createEffect triggered:",{hasInitial:!!o,initialLength:o?.length||0,loading:c,error:m?String(m):null}),o&&Array.isArray(o)?o.length>0?(console.log("[Events] Setting events:",o.length),t(o)):console.log("[Events] Initial events array is empty"):!c&&m?console.error("[Events] Error loading events:",m):!c&&!o&&console.log("[Events] No initial events data")}),cr(()=>{g(o=>o+1)}),cr(()=>{const o=ys.subscribe(c=>{if(c.type==="event"&&!h()){const m=c.data,w=tt();if(w&&w!=="All Namespaces"&&m.namespace!==w)return;u(k=>{const A=Array.isArray(k)?k:[];return[m,...A].slice(0,50)}),t(k=>{const A=Array.isArray(k)?k:[];return[m,...A].slice(0,500)})}});return()=>o()});const S=Oe(()=>{let o=e();Array.isArray(o)||(console.warn("[Events] events() is not an array:",typeof o,o),o=[]);const c=r(),m=d().toLowerCase();return console.log("[Events] filteredEvents memo:",{totalEvents:o.length,filterType:c,query:m,hasQuery:!!m}),c!=="all"&&(o=o.filter(w=>w.type===c)),m&&(o=o.filter(w=>w.message?.toLowerCase().includes(m)||w.object?.toLowerCase().includes(m)||w.reason?.toLowerCase().includes(m)||w.namespace?.toLowerCase().includes(m))),console.log("[Events] Filtered result:",o.length),o}),y=Oe(()=>{const o=e();return{total:o.length,normal:o.filter(c=>c.type==="Normal").length,warning:o.filter(c=>c.type==="Warning").length}}),l=o=>{if(!o)return"Unknown";const c=new Date(o);if(isNaN(c.getTime()))return"Unknown";const w=new Date().getTime()-c.getTime();return w<6e4?"Just now":w<36e5?`${Math.floor(w/6e4)}m ago`:w<864e5?`${Math.floor(w/36e5)}h ago`:`${Math.floor(w/864e5)}d ago`},a=o=>{switch(o?.toLowerCase()){case"pod":return"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4";case"deployment":return"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10";case"service":return"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9";case"node":return"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01";case"replicaset":return"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4";default:return"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}};return(()=>{var o=Q1(),c=o.firstChild,m=c.firstChild,w=m.firstChild;w.nextSibling;var k=m.nextSibling,A=k.firstChild,x=A.nextSibling,C=c.nextSibling,I=C.firstChild,R=I.firstChild,D=R.nextSibling,j=D.nextSibling;j.nextSibling;var M=I.nextSibling,P=M.firstChild,L=P.nextSibling,F=M.nextSibling,$=F.firstChild,B=$.nextSibling,H=F.nextSibling,z=H.firstChild,X=z.nextSibling,V=H.nextSibling,Y=V.nextSibling,K=Y.nextSibling,ce=C.nextSibling;return A.$$click=()=>s(!h()),p(A,T(ee,{get when(){return h()},get fallback(){return[e_(),"Pause"]},get children(){return[J1(),"Resume"]}})),x.$$click=()=>b(),p(D,()=>h()?"Paused":"Live"),p(j,()=>i().length),M.$$click=()=>n("all"),p(L,()=>y().total),F.$$click=()=>n("Normal"),p(B,()=>y().normal),H.$$click=()=>n("Warning"),p(X,()=>y().warning),Y.$$input=E=>_(E.currentTarget.value),K.addEventListener("change",E=>n(E.currentTarget.value)),p(ce,T(ee,{get when(){return!v.loading},get fallback(){return(()=>{var E=t_(),N=E.firstChild;return N.nextSibling,E})()},get children(){var E=Z1();return p(E,T(Ve,{get each(){return S()},get fallback(){return r_()},children:(N,U)=>(()=>{var W=l_(),q=W.firstChild,G=q.firstChild,Q=G.firstChild,oe=Q.firstChild,ge=G.nextSibling,Ce=ge.firstChild,Z=Ce.firstChild,te=Z.nextSibling,re=te.nextSibling,me=re.firstChild,ye=Ce.nextSibling,we=ye.nextSibling,ke=we.firstChild;return p(Z,()=>N.type),p(te,()=>N.reason),p(re,()=>N.kind,me),p(re,()=>N.object,null),p(Ce,T(ee,{get when(){return N.namespace},get children(){var Se=s_();return p(Se,()=>N.namespace),Se}}),null),p(ye,()=>N.message),p(ke,()=>l(N.time)),p(we,T(ee,{get when(){return N.count>1},get children(){var Se=i_();return Se.firstChild,p(Se,()=>N.count,null),Se}}),null),p(we,T(ee,{get when(){return N.source},get children(){var Se=n_();return Se.firstChild,p(Se,()=>N.source,null),Se}}),null),ne(Se=>{var $e=`p-4 border-b transition-all hover:bg-white/5 ${U()<i().length&&!h()?"animate-slide-in":""}`,he=`4px solid ${N.type==="Warning"?"var(--warning-color)":"var(--success-color)"}`,ue=N.type==="Warning"?"var(--warning-color)":"var(--accent-primary)",le=a(N.kind),ie=`px-2 py-0.5 rounded text-xs font-medium ${N.type==="Warning"?"bg-amber-500/20 text-amber-400":"bg-green-500/20 text-green-400"}`;return $e!==Se.e&&Ue(W,Se.e=$e),he!==Se.t&&ve(W,"border-left",Se.t=he),ue!==Se.a&&ve(Q,"color",Se.a=ue),le!==Se.o&&et(oe,"d",Se.o=le),ie!==Se.i&&Ue(Z,Se.i=ie),Se},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),W})()})),E}})),ne(E=>{var N=`px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-all ${h()?"bg-gradient-to-r from-green-500/20 to-emerald-500/20 border border-green-500/40":"bg-gradient-to-r from-amber-500/20 to-orange-500/20 border border-amber-500/40"}`,U=h()?"var(--success-color)":"var(--warning-color)",W=`card px-4 py-2 flex items-center gap-2 ${h()?"":"animate-pulse"}`,q=`3px solid ${h()?"var(--warning-color)":"var(--success-color)"}`,G=`w-3 h-3 rounded-full ${h()?"bg-amber-500":"bg-green-500 animate-pulse"}`;return N!==E.e&&Ue(A,E.e=N),U!==E.t&&ve(A,"color",E.t=U),W!==E.a&&Ue(I,E.a=W),q!==E.o&&ve(I,"border-left",E.o=q),G!==E.i&&Ue(R,E.i=G),E},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),ne(()=>Y.value=d()),ne(()=>K.value=r()),o})()};lt(["click","input"]);var a_=O("<option disabled>Loading pods..."),c_=O("<option disabled>Loading containers..."),d_=O("<option disabled>No containers found"),h_=O('<div class="p-4 bg-red-500/10 border-l-4 border-red-500"><p style=color:var(--error-color)>'),u_=O('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading logs...'),f_=O('<div class="p-8 text-center"style=color:var(--text-muted)><svg class="w-12 h-12 mx-auto mb-4 opacity-50"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg><p>Select a pod and container, then click "Fetch Logs"'),g_=O('<div id=logs-container class="p-4 font-mono text-sm overflow-auto"style="background:#0d1117;color:#c9d1d9;max-height:calc(100vh - 400px);white-space:pre-wrap;word-break:break-word">'),p_=O('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Logs</h1><p style=color:var(--text-secondary)>View and stream pod container logs</p></div><div class="flex items-center gap-2"><button class="px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"style=background:var(--accent-primary);color:white></button><button class="px-4 py-2 rounded-lg text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed"style=background:var(--bg-tertiary);color:var(--text-primary)>Download</button></div></div><div class="card p-4"><div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Namespace</label><select class="w-full px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option></option></select></div><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Pod</label><select class="w-full px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value>Select a pod</option></select></div><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Container</label><select class="w-full px-3 py-2 rounded-lg text-sm disabled:opacity-50"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value>Select a container</option></select></div><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Tail Lines</label><input type=number min=10 max=10000 class="w-full px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div></div><div class="flex items-center gap-4 mt-4"><label class="flex items-center gap-2 cursor-pointer"><input type=checkbox class="w-4 h-4 rounded"><span class=text-sm style=color:var(--text-secondary)>Follow logs (stream)</span></label></div></div><div class="card p-4"><input type=text placeholder="Search logs..."class="w-full px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div class="card overflow-hidden">'),v_=O("<option> (<!>)"),m_=O("<option>");const __=()=>{console.log("[Logs] Component rendering");const[e,t]=J(""),[r,n]=J(""),[d,_]=J(""),[h,s]=J(100),[i,u]=J(!1),[f,g]=J(""),[v,b]=J(""),[S,y]=J(!1),[l,a]=J(null);let o=null;const[c]=Ke(()=>tt(),async R=>{try{console.log("[Logs] Fetching pods for namespace:",R);const D=R==="_all"?void 0:R,j=await De.getPods(D);return console.log("[Logs] Fetched pods:",j?.length||0),Array.isArray(j)?j:[]}catch(D){return console.error("[Logs] Failed to fetch pods:",D),[]}}),[m]=Ke(()=>{const R=e(),D=d()||tt();return R?{pod:R,namespace:(D==="_all"?void 0:D)||"default"}:null},async R=>{if(!R)return null;try{console.log("[Logs] Fetching pod details:",R);const D=await De.getPodDetails(R.pod,R.namespace);return console.log("[Logs] Pod details:",D),D}catch(D){return console.error("[Logs] Failed to fetch pod details:",D),null}}),w=Oe(()=>{try{const R=m();if(!R||!R.containers)return[];if(!Array.isArray(R.containers))return console.warn("[Logs] podDetails.containers is not an array:",typeof R.containers,R.containers),[];const D=R.containers.map(j=>j.name||j).filter(Boolean);return console.log("[Logs] Containers:",D),D}catch(R){return console.error("[Logs] Error in containers memo:",R),[]}}),k=()=>{o&&(o.close(),o=null)},A=async()=>{const R=e(),D=r(),j=d()||tt();if(!R||!D){a("Please select a pod and container");return}k(),y(!0),a(null);const L=`/api/pod/logs?name=${R}&namespace=${(j==="_all"?void 0:j)||"default"}&container=${D}&tail=${h()}${i()?"&follow=true":""}`;if(i())b(""),o=new EventSource(L),o.onmessage=F=>{b($=>$+F.data+`
`),y(!1),setTimeout(()=>{const $=document.getElementById("logs-container");$&&($.scrollTop=$.scrollHeight)},50)},o.onerror=()=>{a("Stream connection lost"),y(!1),k()},o.onopen=()=>{y(!1)};else try{const F=await fetch(L);if(!F.ok){const B=await F.text();throw new Error(B||`HTTP ${F.status}`)}const $=await F.json();b($.logs||"No logs available")}catch(F){a(F.message||"Failed to fetch logs"),b("")}finally{y(!1)}},x=Oe(()=>{const R=v(),D=f().toLowerCase();return D?R.split(`
`).filter(j=>j.toLowerCase().includes(D)).join(`
`):R}),C=()=>{const R=new Blob([v()],{type:"text/plain"}),D=URL.createObjectURL(R),j=document.createElement("a");j.href=D,j.download=`${e()}-${r()||"logs"}.txt`,j.click(),URL.revokeObjectURL(D)};Oe(()=>{const R=w();R.length>0&&!r()&&n(R[0])}),cr(()=>{console.log("[Logs] Component mounted successfully")}),tr(()=>{k()});const I=Oe(()=>{try{if(c.loading)return[];if(c.error)return console.error("[Logs] pods resource error:",c.error),[];const R=c();return R==null?[]:Array.isArray(R)?R:(console.warn("[Logs] pods() returned non-array:",typeof R,R),[])}catch(R){return console.error("[Logs] Error in podsList memo:",R),[]}});return console.log("[Logs] Component rendering - RETURNING JSX"),(()=>{var R=p_(),D=R.firstChild,j=D.firstChild,M=j.firstChild;M.nextSibling;var P=j.nextSibling,L=P.firstChild,F=L.nextSibling,$=D.nextSibling,B=$.firstChild,H=B.firstChild,z=H.firstChild,X=z.nextSibling,V=X.firstChild,Y=H.nextSibling,K=Y.firstChild,ce=K.nextSibling;ce.firstChild;var E=Y.nextSibling,N=E.firstChild,U=N.nextSibling;U.firstChild;var W=E.nextSibling,q=W.firstChild,G=q.nextSibling,Q=B.nextSibling,oe=Q.firstChild,ge=oe.firstChild;ge.nextSibling;var Ce=$.nextSibling,Z=Ce.firstChild,te=Ce.nextSibling;return L.$$click=A,p(L,()=>S()?"Loading...":"Fetch Logs"),F.$$click=C,X.addEventListener("change",re=>{_(re.currentTarget.value),t(""),n("")}),p(V,(()=>{var re=Fe(()=>tt()==="_all");return()=>re()?"All Namespaces":tt()})()),ce.addEventListener("change",re=>{t(re.currentTarget.value),n("")}),p(ce,T(ee,{get when(){return c.loading},get children(){return a_()}}),null),p(ce,T(ee,{get when(){return Fe(()=>!!(!c.loading&&Array.isArray(I())))()&&I().length>0},get children(){return T(Ve,{get each(){return I()},children:re=>(()=>{var me=v_(),ye=me.firstChild,we=ye.nextSibling;return we.nextSibling,p(me,()=>re.name,ye),p(me,()=>re.namespace||"default",we),ne(()=>me.value=re.name),me})()})}}),null),U.addEventListener("change",re=>n(re.currentTarget.value)),p(U,T(ee,{get when(){return m.loading},get children(){return c_()}}),null),p(U,T(ee,{get when(){return Fe(()=>!m.loading)()&&w().length>0},get children(){return T(Ve,{get each(){return w()},children:re=>(()=>{var me=m_();return me.value=re,p(me,re),me})()})}}),null),p(U,T(ee,{get when(){return Fe(()=>!!(!m.loading&&e()))()&&w().length===0},get children(){return d_()}}),null),G.addEventListener("change",re=>s(parseInt(re.currentTarget.value)||100)),ge.addEventListener("change",re=>{u(re.currentTarget.checked),re.currentTarget.checked&&e()&&r()?A():k()}),Z.$$input=re=>g(re.currentTarget.value),p(te,T(ee,{get when(){return l()},get children(){var re=h_(),me=re.firstChild;return p(me,l),re}}),null),p(te,T(ee,{get when(){return Fe(()=>!!S())()&&!v()},get children(){var re=u_(),me=re.firstChild;return me.nextSibling,re}}),null),p(te,T(ee,{get when(){return Fe(()=>!v()&&!S())()&&!l()},get children(){return f_()}}),null),p(te,T(ee,{get when(){return v()},get children(){var re=g_();return p(re,()=>x()||"No logs available"),re}}),null),ne(re=>{var me=!e()||!r()||S(),ye=!v(),we=!e(),ke=!e()||!r();return me!==re.e&&(L.disabled=re.e=me),ye!==re.t&&(F.disabled=re.t=ye),we!==re.a&&(U.disabled=re.a=we),ke!==re.o&&(ge.disabled=re.o=ke),re},{e:void 0,t:void 0,a:void 0,o:void 0}),ne(()=>V.value=tt()),ne(()=>X.value=d()||tt()),ne(()=>ce.value=e()),ne(()=>U.value=r()),ne(()=>G.value=h()),ne(()=>ge.checked=i()),ne(()=>Z.value=f()),R})()};lt(["click","input"]);var b_=O("<span class=text-sm style=color:var(--text-muted)>Detection time: "),y_=O('<div class="card p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Detecting anomalies...'),x_=O("<div class=space-y-4>"),w_=O('<div class="flex items-center justify-center gap-2 mt-4"><button class="px-3 py-1 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed"style=background:var(--bg-secondary);color:var(--text-primary)>Previous</button><span class=text-sm style=color:var(--text-secondary)>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed"style=background:var(--bg-secondary);color:var(--text-primary)>Next'),S_=O('<div class="card p-8 text-center"><svg class="w-16 h-16 mx-auto mb-4 opacity-50"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><p class="text-lg font-medium mb-2"style=color:var(--text-primary)>No Anomalies Detected</p><p style=color:var(--text-secondary)>Your cluster appears to be healthy!'),$_=O('<div class="card p-4 bg-red-500/10 border-l-4 border-red-500"><p style=color:var(--error-color)>Error: '),C_=O('<div class="space-y-6 p-6"style=minHeight:100vh;background:var(--bg-primary)><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-3xl font-bold"style=color:var(--text-primary)>AI/ML Anomaly Detection</h1><p style=color:var(--text-secondary)>Real-time anomaly detection using Isolation Forest algorithm</p></div><div class="flex items-center gap-2"><button class="px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"style=background:var(--accent-primary);color:white></button></div></div><div class="card p-4"><div class="flex items-center gap-4"><label class="text-sm font-medium"style=color:var(--text-secondary)>Filter by Severity:</label><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value>All Severities</option><option value=critical>Critical</option><option value=warning>Warning</option><option value=info>Info'),k_=O('<div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div class="card p-4"><div class=text-sm style=color:var(--text-secondary)>Total Anomalies</div><div class="text-2xl font-bold"style=color:var(--text-primary)></div></div><div class="card p-4"><div class=text-sm style=color:var(--text-secondary)>Critical</div><div class="text-2xl font-bold"style=color:#ef4444></div></div><div class="card p-4"><div class=text-sm style=color:var(--text-secondary)>Warning</div><div class="text-2xl font-bold"style=color:#f59e0b></div></div><div class="card p-4"><div class=text-sm style=color:var(--text-secondary)>Info</div><div class="text-2xl font-bold"style=color:#3b82f6>'),E_=O('<button class="px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap"style=background:var(--accent-primary);color:white>'),A_=O('<div class="card p-4 border-l-4"><div class="flex items-start justify-between gap-4"><div class=flex-1><div class="flex items-center gap-2 mb-2"><span class=text-xl></span><span class="px-2 py-1 rounded text-xs font-medium uppercase"></span><span class=text-sm style=color:var(--text-secondary)></span><span class="text-sm font-mono"style=color:var(--text-muted)>Score: <!>%</span></div><h3 class="font-semibold mb-1"style=color:var(--text-primary)></h3><p class="text-sm mb-2"style=color:var(--text-secondary)><strong>Namespace:</strong> <!> | <strong>Pod:</strong> </p><p class="text-sm mb-2"style=color:var(--text-secondary)><strong>Recommendation:</strong> </p><div class=text-xs style=color:var(--text-muted)>Detected: ');const L_=()=>{const[e,t]=J(""),[r,n]=J(0),[d,_]=J(null),[h]=Ke(()=>{const S=e(),y=r();return{severity:S,key:y}},async({severity:S})=>{try{const y=await De.detectAnomalies(S||void 0);return console.log("[Anomalies] Fetched anomalies:",y.anomalies.length),y}catch(y){return console.error("[Anomalies] Failed to fetch anomalies:",y),{anomalies:[],stats:{total:0,critical:0,warning:0,info:0},duration:"0s"}}}),[s,i]=J(1),u=10,f=Oe(()=>{const S=h()?.anomalies||[],y=(s()-1)*u,l=y+u;return{list:S.slice(y,l),total:S.length,pages:Math.ceil(S.length/u)}}),g=async S=>{if(!S.autoRemediate){alert("Auto-remediation is not available for this anomaly type.");return}if(confirm(`Are you sure you want to auto-remediate this anomaly?

${S.message}

Recommendation: ${S.recommendation}`)){_(S.id);try{const y=await De.remediateAnomaly(S.id);y.success?(alert(y.message||"Anomaly remediated successfully!"),n(l=>l+1)):alert("Failed to remediate anomaly.")}catch(y){alert(`Failed to remediate: ${y.message}`)}finally{_(null)}}},v=S=>{switch(S){case"critical":return"#ef4444";case"warning":return"#f59e0b";case"info":return"#3b82f6";default:return"#6b7280"}},b=S=>{switch(S){case"crash_loop":return"ð";case"cpu_spike":return"â¡";case"memory_spike":return"ð¾";case"hpa_maxed":return"ð";case"pod_not_ready":return"â ï¸";case"frequent_restarts":return"ð";default:return"ð"}};return cr(()=>{n(1)}),(()=>{var S=C_(),y=S.firstChild,l=y.firstChild,a=l.firstChild;a.nextSibling;var o=l.nextSibling,c=o.firstChild,m=y.nextSibling,w=m.firstChild,k=w.firstChild,A=k.nextSibling;return c.$$click=()=>{n(x=>x+1),t(""),i(1)},p(c,()=>h.loading?"Detecting...":"Detect Anomalies"),p(S,T(ee,{get when(){return h()?.stats},children:x=>(()=>{var C=k_(),I=C.firstChild,R=I.firstChild,D=R.nextSibling,j=I.nextSibling,M=j.firstChild,P=M.nextSibling,L=j.nextSibling,F=L.firstChild,$=F.nextSibling,B=L.nextSibling,H=B.firstChild,z=H.nextSibling;return p(D,()=>x().total),p(P,()=>x().critical),p($,()=>x().warning),p(z,()=>x().info),C})()}),m),A.addEventListener("change",x=>{t(x.currentTarget.value),i(1)}),p(w,T(ee,{get when(){return h()?.duration},get children(){var x=b_();return x.firstChild,p(x,()=>h()?.duration,null),x}}),null),p(S,T(ee,{get when(){return h.loading},get children(){var x=y_(),C=x.firstChild;return C.nextSibling,x}}),null),p(S,T(ee,{get when(){return Fe(()=>!h.loading&&!h.error)()&&f().total>0},get children(){return[(()=>{var x=x_();return p(x,T(Ve,{get each(){return f().list},children:C=>(()=>{var I=A_(),R=I.firstChild,D=R.firstChild,j=D.firstChild,M=j.firstChild,P=M.nextSibling,L=P.nextSibling,F=L.nextSibling,$=F.firstChild,B=$.nextSibling;B.nextSibling;var H=j.nextSibling,z=H.nextSibling,X=z.firstChild,V=X.nextSibling,Y=V.nextSibling,K=Y.nextSibling,ce=K.nextSibling;ce.nextSibling;var E=z.nextSibling,N=E.firstChild;N.nextSibling;var U=E.nextSibling;return U.firstChild,p(M,()=>b(C.type)),p(P,()=>C.severity),p(L,()=>C.type.replace(/_/g," ")),p(F,()=>(C.score*100).toFixed(1),B),p(H,()=>C.message),p(z,()=>C.namespace,Y),p(z,()=>C.podName,null),p(z,(()=>{var W=Fe(()=>!!C.deployment);return()=>W()&&` | <strong>Deployment:</strong> ${C.deployment}`})(),null),p(E,()=>C.recommendation,null),p(U,()=>new Date(C.timestamp).toLocaleString(),null),p(R,T(ee,{get when(){return C.autoRemediate},get children(){var W=E_();return W.$$click=()=>g(C),p(W,()=>d()===C.id?"Remediating...":"Auto-Remediate"),ne(()=>W.disabled=d()===C.id),W}}),null),ne(W=>{var q=v(C.severity),G=`${v(C.severity)}20`,Q=v(C.severity);return q!==W.e&&ve(I,"border-left-color",W.e=q),G!==W.t&&ve(P,"background",W.t=G),Q!==W.a&&ve(P,"color",W.a=Q),W},{e:void 0,t:void 0,a:void 0}),I})()})),x})(),T(ee,{get when(){return f().pages>1},get children(){var x=w_(),C=x.firstChild,I=C.nextSibling,R=I.firstChild,D=R.nextSibling;D.nextSibling;var j=I.nextSibling;return C.$$click=()=>i(M=>Math.max(1,M-1)),p(I,s,D),p(I,()=>f().pages,null),j.$$click=()=>i(M=>Math.min(f().pages,M+1)),ne(M=>{var P=s()===1,L=s()===f().pages;return P!==M.e&&(C.disabled=M.e=P),L!==M.t&&(j.disabled=M.t=L),M},{e:void 0,t:void 0}),x}})]}}),null),p(S,T(ee,{get when(){return Fe(()=>!h.loading&&!h.error)()&&f().total===0},get children(){var x=S_(),C=x.firstChild,I=C.nextSibling;return I.nextSibling,x}}),null),p(S,T(ee,{get when(){return h.error},get children(){var x=$_(),C=x.firstChild;return C.firstChild,p(C,(()=>{var I=Fe(()=>h.error instanceof Error);return()=>I()?h.error.message:String(h.error)})(),null),x}}),null),ne(()=>c.disabled=h.loading),ne(()=>A.value=e()),S})()};lt(["click"]);var M_=O('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z">'),D_=O('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 6h16M4 10h16M4 14h16M4 18h16">'),R_=O('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1v-4zM14 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z">'),T_=O('<div class=space-y-4><h2 class="text-lg font-semibold flex items-center gap-2"><span class="w-3 h-3 rounded-full"></span></h2><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">'),P_=O('<div class="absolute top-2 right-2 px-2 py-1 rounded text-xs font-medium flex items-center gap-1"style="background:rgba(6, 182, 212, 0.2);color:var(--accent-primary)"><div class=spinner style=width:12px;height:12px></div>Deploying...'),I_=O('<div class="absolute top-2 right-2 px-2 py-1 rounded text-xs font-medium flex items-center gap-1"style="background:rgba(34, 197, 94, 0.2);color:var(--success-color)"><svg class="w-3 h-3"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"clip-rule=evenodd></path></svg>Installed'),B_=O("<div class=spinner style=width:24px;height:24px>"),O_=O('<div class="flex items-center gap-2"><span class=text-xs style=color:var(--accent-primary)>to '),H_=O('<div class="flex items-center gap-2"><button class="px-3 py-1.5 rounded-lg text-sm font-medium transition-all hover:opacity-80 flex items-center gap-1"style="background:rgba(34, 197, 94, 0.2);color:var(--success-color)"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>View Pods</button><button class="px-3 py-1.5 rounded-lg text-sm font-medium transition-all hover:opacity-80"style="background:rgba(239, 68, 68, 0.2);color:var(--error-color)">Uninstall'),N_=O('<div class="mt-2 pt-2 border-t flex items-center gap-1 text-xs"style=border-color:var(--border-color);color:var(--text-muted)><svg class="w-3 h-3"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg>Namespace: <span style=color:var(--text-secondary)>'),z_=O('<div><div class="flex items-start gap-3"><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)></div><div class="flex-1 min-w-0"><h3 class=font-semibold style=color:var(--text-primary)></h3><p class="text-xs mt-0.5"style=color:var(--text-muted)>v</p></div></div><p class="mt-3 text-sm line-clamp-2"style=color:var(--text-secondary)></p><div class="mt-4 flex items-center justify-between"><span class="text-xs px-2 py-1 rounded"style=background:var(--bg-tertiary);color:var(--text-muted)>'),F_=O('<svg class="w-6 h-6"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2>'),j_=O('<button class="p-1.5 rounded-lg text-sm transition-all hover:opacity-80"title="Remove custom app"style="background:rgba(239, 68, 68, 0.2);color:var(--error-color)"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">'),U_=O('<div class="flex items-center gap-2"><button class="px-3 py-1.5 rounded-lg text-sm font-medium transition-all hover:opacity-80"style=background:var(--accent-primary);color:#000>Install'),V_=O('<div class="overflow-hidden rounded-lg"style=background:#0d1117><div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class=whitespace-nowrap>App</th><th class=whitespace-nowrap>Category</th><th class=whitespace-nowrap>Version</th><th class=whitespace-nowrap>Chart</th><th class=whitespace-nowrap>Status</th><th class=whitespace-nowrap>Namespace</th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),W_=O('<tr><td colspan=7 class="text-center py-8"style=color:var(--text-muted)>No apps found'),q_=O('<span class="badge badge-info flex items-center gap-1"><div class=spinner style=width:12px;height:12px></div>Deploying'),K_=O('<button class="px-3 py-1 rounded text-sm transition-all hover:opacity-80"style="background:rgba(34, 197, 94, 0.2);color:var(--success-color)">View'),Y_=O('<button class="px-3 py-1 rounded text-sm transition-all hover:opacity-80"style="background:rgba(239, 68, 68, 0.2);color:var(--error-color)">Uninstall'),G_=O('<tr><td><div class="flex items-center gap-3"><div class="p-2 rounded-lg"style=background:var(--bg-tertiary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></div><div><div class=font-medium style=color:var(--text-primary)></div><div class=text-xs style=color:var(--text-muted)></div></div></div></td><td><span class="text-xs px-2 py-1 rounded"></span></td><td class="font-mono text-sm"></td><td class="font-mono text-sm"></td><td></td><td class=text-sm></td><td><div class="flex items-center gap-2">'),X_=O('<span class="badge badge-success">Installed'),J_=O('<span class="badge badge-default">Available'),Z_=O('<button class="px-3 py-1 rounded text-sm transition-all hover:opacity-80"style=background:var(--accent-primary);color:#000>Install'),Q_=O('<div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3">'),eb=O("<div class=spinner style=width:12px;height:12px>"),tb=O('<div class="absolute top-1 right-1">'),rb=O('<button class="px-2 py-0.5 rounded text-xs transition-all hover:opacity-80"style=background:var(--accent-primary);color:#000>Install'),sb=O('<button><div class="flex items-center gap-2 mb-2"><div class="p-1.5 rounded"style=background:var(--bg-tertiary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></div></div><h4 class="font-medium text-sm truncate mb-1"style=color:var(--text-primary)></h4><p class="text-xs truncate mb-2"style=color:var(--text-muted)></p><div class="flex items-center justify-between text-xs"><span style=color:var(--text-muted)>v'),ib=O('<div class="w-2 h-2 rounded-full bg-green-500"title=Installed>'),nb=O('<button class="px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-all hover:opacity-80"style=background:var(--accent-primary);color:#000><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 4v16m8-8H4"></path></svg>Add Custom App'),lb=O('<div class="flex items-center gap-1 p-1 rounded-lg"style=background:var(--bg-secondary)><button><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg>Marketplace<span class="px-2 py-0.5 rounded text-xs"style=background:var(--bg-primary);color:var(--text-muted)></span></button><button><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"></path></svg>Custom Apps<span class="px-2 py-0.5 rounded text-xs"style=background:var(--bg-primary);color:var(--text-muted)>'),ob=O('<div class="card p-12 text-center"><div class="w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center"style=background:var(--bg-tertiary)><svg class="w-8 h-8"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"></path></svg></div><h3 class="text-lg font-semibold mb-2"style=color:var(--text-primary)>No Custom Apps</h3><p class=mb-4 style=color:var(--text-secondary)>Add your own Helm charts to deploy custom applications.</p><button class="px-4 py-2 rounded-lg text-sm font-medium transition-all hover:opacity-80"style=background:var(--accent-primary);color:#000>Add Your First Custom App'),ab=O("<div class=spinner style=width:16px;height:16px>"),cb=O('<div class=space-y-4><p style=color:var(--text-secondary)></p><div class="p-4 rounded-lg"style=background:var(--bg-tertiary)><div class="flex items-center justify-between text-sm"><span style=color:var(--text-muted)>Chart</span><span style=color:var(--text-primary)></span></div><div class="flex items-center justify-between text-sm mt-2"><span style=color:var(--text-muted)>Version</span><span style=color:var(--text-primary)></span></div><div class="flex items-center justify-between text-sm mt-2"><span style=color:var(--text-muted)>Repository</span><span class="text-xs truncate max-w-xs"style=color:var(--accent-primary)></span></div></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Target Namespace</label><input type=text class="w-full px-3 py-2 rounded-lg text-sm"placeholder=default style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div class="flex justify-end gap-3 mt-6"><button class="px-4 py-2 rounded-lg text-sm font-medium"style=background:var(--bg-secondary);color:var(--text-secondary)>Cancel</button><button class="px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 disabled:opacity-50"style=background:var(--accent-primary);color:#000>'),db=O('<div class=space-y-4><p style=color:var(--text-secondary)>Add your own Helm chart to the marketplace. Custom apps are stored locally in your browser.</p><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>App Name <span style=color:var(--error-color)>*</span></label><input type=text class="w-full px-3 py-2 rounded-lg text-sm"placeholder=my-app style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Display Name</label><input type=text class="w-full px-3 py-2 rounded-lg text-sm"placeholder="My Application"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Chart Repository URL <span style=color:var(--error-color)>*</span></label><input type=text class="w-full px-3 py-2 rounded-lg text-sm"placeholder=https://charts.example.com style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Chart Name <span style=color:var(--error-color)>*</span></label><input type=text class="w-full px-3 py-2 rounded-lg text-sm"placeholder=my-chart style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div class="grid grid-cols-2 gap-4"><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Category</label><select class="w-full px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=Custom>Custom</option><option value=Networking>Networking</option><option value=CI/CD>CI/CD</option><option value=Observability>Observability</option><option value=Security>Security</option><option value=Data>Data</option></select></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Version</label><input type=text class="w-full px-3 py-2 rounded-lg text-sm"placeholder=1.0.0 style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Description</label><textarea class="w-full px-3 py-2 rounded-lg text-sm resize-none"placeholder="Optional description for the app"rows=3 style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></textarea></div><div class="flex justify-end gap-3 mt-6"><button class="px-4 py-2 rounded-lg text-sm font-medium"style=background:var(--bg-secondary);color:var(--text-secondary)>Cancel</button><button class="px-4 py-2 rounded-lg text-sm font-medium"style=background:var(--accent-primary);color:#000>Add App'),hb=O('<div class=space-y-6><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Apps Marketplace</h1><p style=color:var(--text-secondary)>Deploy platform tools and applications with one click</p></div><div class="flex items-center gap-3"><div class="flex items-center rounded-lg overflow-hidden"style="background:var(--bg-secondary);border:1px solid var(--border-color)"></div><button class=icon-btn title=Refresh style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total Apps</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Installed</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 flex items-center gap-2"style="border-left:3px solid #8b5cf6"><span class=text-sm style=color:var(--text-secondary)>Available</span><span class="text-xl font-bold"style=color:#8b5cf6></span></div><div class=flex-1></div><input type=text placeholder="Search apps..."class="px-3 py-2 rounded-lg text-sm w-64"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div class="flex flex-wrap gap-2">'),ub=O('<button><span class="hidden sm:inline capitalize">'),fb=O("<button>");const gb=()=>{try{const e=localStorage.getItem("kubegraf-custom-apps");return e?JSON.parse(e):[]}catch{return[]}},Il=e=>{localStorage.setItem("kubegraf-custom-apps",JSON.stringify(e))},Ys=[{name:"nginx-ingress",displayName:"NGINX Ingress",description:"Ingress controller for Kubernetes using NGINX as a reverse proxy",category:"Networking",icon:"M13 10V3L4 14h7v7l9-11h-7z",version:"4.9.0",chartRepo:"https://kubernetes.github.io/ingress-nginx",chartName:"ingress-nginx"},{name:"istio",displayName:"Istio Service Mesh",description:"Connect, secure, control, and observe services across your cluster",category:"Networking",icon:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9",version:"1.20.0",chartRepo:"https://istio-release.storage.googleapis.com/charts",chartName:"istiod"},{name:"cilium",displayName:"Cilium CNI",description:"eBPF-based networking, observability, and security for Kubernetes",category:"Networking",icon:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z",version:"1.14.5",chartRepo:"https://helm.cilium.io/",chartName:"cilium"},{name:"argocd",displayName:"Argo CD",description:"Declarative GitOps continuous delivery tool for Kubernetes",category:"CI/CD",icon:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15",version:"5.51.0",chartRepo:"https://argoproj.github.io/argo-helm",chartName:"argo-cd"},{name:"fluxcd",displayName:"Flux CD",description:"GitOps toolkit for continuous and progressive delivery",category:"CI/CD",icon:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4",version:"2.12.0",chartRepo:"https://fluxcd-community.github.io/helm-charts",chartName:"flux2"},{name:"prometheus",displayName:"Prometheus",description:"Monitoring system and time series database for metrics",category:"Observability",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z",version:"25.8.0",chartRepo:"https://prometheus-community.github.io/helm-charts",chartName:"prometheus"},{name:"grafana",displayName:"Grafana",description:"Analytics & monitoring dashboards for all your metrics",category:"Observability",icon:"M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z",version:"7.0.19",chartRepo:"https://grafana.github.io/helm-charts",chartName:"grafana"},{name:"loki",displayName:"Loki",description:"Like Prometheus, but for logs - scalable log aggregation",category:"Observability",icon:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",version:"5.41.4",chartRepo:"https://grafana.github.io/helm-charts",chartName:"loki-stack"},{name:"tempo",displayName:"Tempo",description:"High-scale distributed tracing backend",category:"Observability",icon:"M13 10V3L4 14h7v7l9-11h-7z",version:"1.7.1",chartRepo:"https://grafana.github.io/helm-charts",chartName:"tempo"},{name:"cert-manager",displayName:"cert-manager",description:"Automatically provision and manage TLS certificates",category:"Security",icon:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z",version:"1.13.3",chartRepo:"https://charts.jetstack.io",chartName:"cert-manager"},{name:"vault",displayName:"HashiCorp Vault",description:"Secrets management, encryption, and privileged access",category:"Security",icon:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z",version:"0.27.0",chartRepo:"https://helm.releases.hashicorp.com",chartName:"vault"},{name:"redis",displayName:"Redis",description:"In-memory data structure store, cache, and message broker",category:"Data",icon:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4",version:"18.6.1",chartRepo:"https://charts.bitnami.com/bitnami",chartName:"redis"},{name:"postgresql",displayName:"PostgreSQL",description:"Advanced open source relational database",category:"Data",icon:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4",version:"14.0.5",chartRepo:"https://charts.bitnami.com/bitnami",chartName:"postgresql"},{name:"memcached",displayName:"Memcached",description:"High-performance distributed memory caching system",category:"Data",icon:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z",version:"6.7.2",chartRepo:"https://charts.bitnami.com/bitnami",chartName:"memcached"},{name:"kube-prometheus-stack",displayName:"Kube Prometheus Stack",description:"Full Prometheus + Grafana + Alertmanager observability stack",category:"Observability",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z",version:"55.5.0",chartRepo:"https://prometheus-community.github.io/helm-charts",chartName:"kube-prometheus-stack"}],nr={Networking:"#22d3ee","CI/CD":"#a855f7",Observability:"#f97316",Security:"#22c55e",Data:"#3b82f6"},qo=e=>{const[t,r]=J(""),[n,d]=J("all"),[_,h]=J(null),[s,i]=J(!1),[u,f]=J("default"),[g,v]=J(!1),[b,S]=J("card"),[y,l]=J({}),[a,o]=J(e.defaultTab||"marketplace"),[c,m]=J(gb()),[w,k]=J(!1),[A,x]=J({name:"",displayName:"",description:"",category:"Custom",chartRepo:"",chartName:"",version:"1.0.0"}),[C,{refetch:I}]=Ke(async()=>{try{return await De.getInstalledApps()}catch{return[]}}),R=Oe(()=>{const N=C()||[];return Ys.map(U=>{const W=N.find(q=>q.name===U.name);return{...U,installed:!!W,installedNamespace:W?.namespace}})}),D=Oe(()=>{const N=new Set(Ys.map(U=>U.category));return["all",...Array.from(N)]}),j=Oe(()=>{let N=R();const U=t().toLowerCase(),W=n();return W!=="all"&&(N=N.filter(q=>q.category===W)),U&&(N=N.filter(q=>q.displayName.toLowerCase().includes(U)||q.description.toLowerCase().includes(U)||q.category.toLowerCase().includes(U))),N});Oe(()=>{const N=j(),U={};return N.forEach(W=>{U[W.category]||(U[W.category]=[]),U[W.category].push(W)}),Object.entries(U).map(([W,q])=>({name:W,apps:q}))});const M=Oe(()=>{const N=R();return{total:N.length,installed:N.filter(U=>U.installed).length,available:N.filter(U=>!U.installed).length}}),P=(N,U,W)=>{const q=setInterval(async()=>{try{(await De.getInstalledApps())?.some(oe=>oe.name===N)&&(clearInterval(q),l(oe=>{const ge={...oe};return delete ge[N],ge}),qe(`${U} deployed successfully to ${W}`,"success"),I())}catch{}},5e3);setTimeout(()=>{clearInterval(q),l(G=>{const Q={...G};return delete Q[N],Q})},3e5)},L=async()=>{const N=_();if(!N)return;v(!0);const U=u()||"default";try{await De.installApp(N.name,U),qe(`${N.displayName} installation started in ${U}`,"info"),l(W=>({...W,[N.name]:{namespace:U,startTime:Date.now()}})),P(N.name,N.displayName,U),i(!1)}catch(W){qe(`Failed to install ${N.displayName}: ${W instanceof Error?W.message:"Unknown error"}`,"error")}finally{v(!1)}},F=N=>{const U=N.installedNamespace||"default";console.log("Navigating to pods for app:",N.name,"in namespace:",U),un(U),Vt("pods")},$=async N=>{if(confirm(`Are you sure you want to uninstall ${N.displayName}?`))try{await De.uninstallApp(N.name,N.installedNamespace||"default"),qe(`${N.displayName} uninstalled successfully`,"success"),I()}catch(U){qe(`Failed to uninstall ${N.displayName}: ${U instanceof Error?U.message:"Unknown error"}`,"error")}},B=()=>{const N=A();if(!N.name||!N.chartRepo||!N.chartName){qe("Please fill in all required fields","error");return}const W={name:N.name.toLowerCase().replace(/[^a-z0-9-]/g,"-"),displayName:N.displayName||N.name,description:N.description||`Custom Helm chart: ${N.chartName}`,category:N.category||"Custom",icon:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4",version:N.version||"1.0.0",chartRepo:N.chartRepo,chartName:N.chartName,isCustom:!0},q=[...c(),W];m(q),Il(q),x({name:"",displayName:"",description:"",category:"Custom",chartRepo:"",chartName:"",version:"1.0.0"}),k(!1),qe(`${W.displayName} added to custom apps`,"success")},H=N=>{if(!confirm(`Are you sure you want to remove ${N.displayName} from your custom apps?`))return;const U=c().filter(W=>W.name!==N.name);m(U),Il(U),qe(`${N.displayName} removed from custom apps`,"success")},z=Oe(()=>{const N=C()||[],U=Ys.map(q=>{const G=N.find(Q=>Q.name===q.name);return{...q,installed:!!G,installedNamespace:G?.namespace}}),W=c().map(q=>{const G=N.find(Q=>Q.name===q.name);return{...q,installed:!!G,installedNamespace:G?.namespace}});return{marketplace:U,custom:W}}),X=Oe(()=>{const{marketplace:N,custom:U}=z(),W=a()==="marketplace"?N:U,q=t().toLowerCase(),G=n();let Q=W;return G!=="all"&&(Q=Q.filter(oe=>oe.category===G)),q&&(Q=Q.filter(oe=>oe.displayName.toLowerCase().includes(q)||oe.description.toLowerCase().includes(q)||oe.category.toLowerCase().includes(q))),Q}),V=Oe(()=>{const N=X(),U={};return N.forEach(W=>{U[W.category]||(U[W.category]=[]),U[W.category].push(W)}),Object.entries(U).map(([W,q])=>({name:W,apps:q}))}),Y=N=>T(ci,{get children(){return[T(Xt,{get when(){return N.mode==="card"},get children(){return M_()}}),T(Xt,{get when(){return N.mode==="list"},get children(){return D_()}}),T(Xt,{get when(){return N.mode==="grid"},get children(){return R_()}})]}}),K=()=>T(Ve,{get each(){return V()},children:N=>(()=>{var U=T_(),W=U.firstChild,q=W.firstChild,G=W.nextSibling;return p(W,()=>N.name,null),p(G,T(Ve,{get each(){return N.apps},children:Q=>{const oe=()=>!!y()[Q.name],ge=()=>y()[Q.name];return(()=>{var Ce=z_(),Z=Ce.firstChild,te=Z.firstChild,re=te.nextSibling,me=re.firstChild,ye=me.nextSibling;ye.firstChild;var we=Z.nextSibling,ke=we.nextSibling,Se=ke.firstChild;return Ce.$$click=()=>Q.installed&&F(Q),p(Ce,T(ee,{get when(){return oe()},get children(){var $e=P_();return $e.firstChild,$e}}),Z),p(Ce,T(ee,{get when(){return Fe(()=>!!Q.installed)()&&!oe()},get children(){return I_()}}),Z),p(te,T(ee,{get when(){return oe()},get fallback(){return(()=>{var $e=F_(),he=$e.firstChild;return ne(ue=>{var le=nr[Q.category]||"var(--accent-primary)",ie=Q.icon;return le!==ue.e&&ve($e,"color",ue.e=le),ie!==ue.t&&et(he,"d",ue.t=ie),ue},{e:void 0,t:void 0}),$e})()},get children(){return B_()}})),p(me,()=>Q.displayName),p(ye,()=>Q.version,null),p(we,()=>Q.description),p(Se,()=>Q.chartName),p(ke,T(ee,{get when(){return oe()},get children(){var $e=O_(),he=$e.firstChild;return he.firstChild,p(he,()=>ge()?.namespace,null),$e}}),null),p(ke,T(ee,{get when(){return!oe()},get children(){return T(ee,{get when(){return Q.installed},get fallback(){return(()=>{var $e=U_(),he=$e.firstChild;return he.$$click=ue=>{ue.stopPropagation(),h(Q),i(!0)},p($e,T(ee,{get when(){return Q.isCustom},get children(){var ue=j_();return ue.$$click=le=>{le.stopPropagation(),H(Q)},ue}}),null),$e})()},get children(){var $e=H_(),he=$e.firstChild,ue=he.nextSibling;return he.$$click=le=>{le.stopPropagation(),F(Q)},ue.$$click=le=>{le.stopPropagation(),$(Q)},$e}})}}),null),p(Ce,T(ee,{get when(){return Fe(()=>!!Q.installed)()&&!oe()},get children(){var $e=N_(),he=$e.firstChild,ue=he.nextSibling,le=ue.nextSibling;return p(le,()=>Q.installedNamespace||"default"),$e}}),null),ne($e=>{var he=`card p-4 relative overflow-hidden group transition-all ${Q.installed?"cursor-pointer hover:border-green-500/50":"hover:border-cyan-500/30"} ${oe()?"animate-pulse":""}`,ue=`4px solid ${nr[Q.category]||"var(--accent-primary)"}`;return he!==$e.e&&Ue(Ce,$e.e=he),ue!==$e.t&&ve(Ce,"border-left",$e.t=ue),$e},{e:void 0,t:void 0}),Ce})()}})),ne(Q=>{var oe=nr[N.name]||"var(--text-primary)",ge=nr[N.name]||"var(--accent-primary)";return oe!==Q.e&&ve(W,"color",Q.e=oe),ge!==Q.t&&ve(q,"background",Q.t=ge),Q},{e:void 0,t:void 0}),U})()}),ce=()=>(()=>{var N=V_(),U=N.firstChild,W=U.firstChild,q=W.firstChild,G=q.nextSibling;return p(G,T(Ve,{get each(){return X()},get fallback(){return(()=>{var Q=W_();return Q.firstChild,Q})()},children:Q=>{const oe=()=>!!y()[Q.name];return(()=>{var ge=G_(),Ce=ge.firstChild,Z=Ce.firstChild,te=Z.firstChild,re=te.firstChild,me=re.firstChild,ye=te.nextSibling,we=ye.firstChild,ke=we.nextSibling,Se=Ce.nextSibling,$e=Se.firstChild,he=Se.nextSibling,ue=he.nextSibling,le=ue.nextSibling,ie=le.nextSibling,ae=ie.nextSibling,_e=ae.firstChild;return p(we,()=>Q.displayName),p(ke,()=>Q.description),p($e,()=>Q.category),p(he,()=>Q.version),p(ue,()=>Q.chartName),p(le,T(ee,{get when(){return oe()},get fallback(){return T(ee,{get when(){return Q.installed},get fallback(){return J_()},get children(){return X_()}})},get children(){var se=q_();return se.firstChild,se}})),p(ie,()=>Q.installedNamespace||"-"),p(_e,T(ee,{get when(){return!oe()},get children(){return T(ee,{get when(){return Q.installed},get fallback(){return(()=>{var se=Z_();return se.$$click=()=>{h(Q),i(!0)},se})()},get children(){return[(()=>{var se=K_();return se.$$click=()=>F(Q),se})(),(()=>{var se=Y_();return se.$$click=()=>$(Q),se})()]}})}})),ne(se=>{var fe=nr[Q.category]||"var(--accent-primary)",de=Q.icon,pe=`${nr[Q.category]||"var(--accent-primary)"}20`,Ee=nr[Q.category]||"var(--accent-primary)";return fe!==se.e&&ve(re,"color",se.e=fe),de!==se.t&&et(me,"d",se.t=de),pe!==se.a&&ve($e,"background",se.a=pe),Ee!==se.o&&ve($e,"color",se.o=Ee),se},{e:void 0,t:void 0,a:void 0,o:void 0}),ge})()}})),N})(),E=()=>(()=>{var N=Q_();return p(N,T(Ve,{get each(){return X()},children:U=>{const W=()=>!!y()[U.name],q=()=>U.installed&&!W();return(()=>{var G=sb(),Q=G.firstChild,oe=Q.firstChild,ge=oe.firstChild,Ce=ge.firstChild,Z=Q.nextSibling,te=Z.nextSibling,re=te.nextSibling,me=re.firstChild;return me.firstChild,G.$$click=()=>q()&&F(U),p(G,T(ee,{get when(){return W()||q()},get children(){var ye=tb();return p(ye,T(ee,{get when(){return W()},get fallback(){return ib()},get children(){return eb()}})),ye}}),Q),p(Z,()=>U.displayName),p(te,()=>U.description),p(me,()=>U.version,null),p(re,T(ee,{get when(){return Fe(()=>!W())()&&!q()},get children(){var ye=rb();return ye.$$click=we=>{we.stopPropagation(),h(U),i(!0)},ye}}),null),ne(ye=>{var we=`card p-3 text-left hover:border-cyan-500/30 transition-colors relative ${q()?"cursor-pointer":""} ${W()?"animate-pulse":""}`,ke=`3px solid ${nr[U.category]||"var(--accent-primary)"}`,Se=nr[U.category]||"var(--accent-primary)",$e=U.icon,he=U.displayName,ue=U.description;return we!==ye.e&&Ue(G,ye.e=we),ke!==ye.t&&ve(G,"border-left",ye.t=ke),Se!==ye.a&&ve(ge,"color",ye.a=Se),$e!==ye.o&&et(Ce,"d",ye.o=$e),he!==ye.i&&et(Z,"title",ye.i=he),ue!==ye.n&&et(te,"title",ye.n=ue),ye},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),G})()}})),N})();return(()=>{var N=hb(),U=N.firstChild,W=U.firstChild,q=W.firstChild;q.nextSibling;var G=W.nextSibling,Q=G.firstChild,oe=Q.nextSibling,ge=U.nextSibling,Ce=ge.firstChild,Z=Ce.firstChild,te=Z.nextSibling,re=Ce.nextSibling,me=re.firstChild,ye=me.nextSibling,we=re.nextSibling,ke=we.firstChild,Se=ke.nextSibling,$e=we.nextSibling,he=$e.nextSibling,ue=ge.nextSibling;return p(Q,T(Ve,{each:["card","list","grid"],children:le=>(()=>{var ie=ub(),ae=ie.firstChild;return ie.$$click=()=>S(le),p(ie,T(Y,{mode:le}),ae),p(ae,le),ne(_e=>{var se=`px-3 py-2 flex items-center gap-2 text-sm transition-colors ${b()===le?"text-white":"text-gray-400 hover:text-white"}`,fe=b()===le?{background:"var(--accent-primary)"}:{background:"transparent"},de=`${le.charAt(0).toUpperCase()+le.slice(1)} View`;return se!==_e.e&&Ue(ie,_e.e=se),_e.t=hn(ie,fe,_e.t),de!==_e.a&&et(ie,"title",_e.a=de),_e},{e:void 0,t:void 0,a:void 0}),ie})()})),p(G,T(ee,{get when(){return a()==="custom"},get children(){var le=nb();return le.$$click=()=>k(!0),le}}),oe),oe.$$click=()=>I(),p(N,T(ee,{get when(){return!e.defaultTab},get children(){var le=lb(),ie=le.firstChild,ae=ie.firstChild,_e=ae.nextSibling,se=_e.nextSibling,fe=ie.nextSibling,de=fe.firstChild,pe=de.nextSibling,Ee=pe.nextSibling;return ie.$$click=()=>o("marketplace"),p(se,()=>Ys.length),fe.$$click=()=>o("custom"),p(Ee,()=>c().length),ne(be=>{var Pe=`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all flex items-center justify-center gap-2 ${a()==="marketplace"?"shadow-sm":"hover:opacity-80"}`,Ne=a()==="marketplace"?"var(--bg-tertiary)":"transparent",Ie=a()==="marketplace"?"var(--accent-primary)":"var(--text-secondary)",Ae=`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all flex items-center justify-center gap-2 ${a()==="custom"?"shadow-sm":"hover:opacity-80"}`,Re=a()==="custom"?"var(--bg-tertiary)":"transparent",je=a()==="custom"?"var(--accent-primary)":"var(--text-secondary)";return Pe!==be.e&&Ue(ie,be.e=Pe),Ne!==be.t&&ve(ie,"background",be.t=Ne),Ie!==be.a&&ve(ie,"color",be.a=Ie),Ae!==be.o&&Ue(fe,be.o=Ae),Re!==be.i&&ve(fe,"background",be.i=Re),je!==be.n&&ve(fe,"color",be.n=je),be},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),le}}),ge),p(te,()=>M().total),p(ye,()=>M().installed),p(Se,()=>M().available),he.$$input=le=>r(le.currentTarget.value),p(ue,T(Ve,{get each(){return D()},children:le=>(()=>{var ie=fb();return ie.$$click=()=>d(le),p(ie,le==="all"?"All Categories":le),ne(ae=>{var _e=`px-4 py-2 rounded-lg text-sm font-medium transition-all ${n()===le?"bg-gradient-to-r from-cyan-500/20 to-blue-500/20 border border-cyan-500/40":"bg-white/5 border border-transparent hover:border-white/10"}`,se=n()===le?le==="all"?"var(--accent-primary)":nr[le]||"var(--accent-primary)":"var(--text-secondary)";return _e!==ae.e&&Ue(ie,ae.e=_e),se!==ae.t&&ve(ie,"color",ae.t=se),ae},{e:void 0,t:void 0}),ie})()})),p(N,T(ee,{get when(){return Fe(()=>a()==="custom")()&&c().length===0},get children(){var le=ob(),ie=le.firstChild;ie.firstChild;var ae=ie.nextSibling,_e=ae.nextSibling,se=_e.nextSibling;return se.$$click=()=>k(!0),le}}),null),p(N,T(ci,{get children(){return[T(Xt,{get when(){return b()==="card"},get children(){return T(K,{})}}),T(Xt,{get when(){return b()==="list"},get children(){return T(ce,{})}}),T(Xt,{get when(){return b()==="grid"},get children(){return T(E,{})}})]}}),null),p(N,T(st,{get isOpen(){return s()},onClose:()=>i(!1),get title(){return`Install ${_()?.displayName}`},get children(){var le=cb(),ie=le.firstChild,ae=ie.nextSibling,_e=ae.firstChild,se=_e.firstChild,fe=se.nextSibling,de=_e.nextSibling,pe=de.firstChild,Ee=pe.nextSibling,be=de.nextSibling,Pe=be.firstChild,Ne=Pe.nextSibling,Ie=ae.nextSibling,Ae=Ie.firstChild,Re=Ae.nextSibling,je=Ie.nextSibling,Te=je.firstChild,He=Te.nextSibling;return p(ie,()=>_()?.description),p(fe,()=>_()?.chartName),p(Ee,()=>_()?.version),p(Ne,()=>_()?.chartRepo),Re.$$input=ze=>f(ze.currentTarget.value),Te.$$click=()=>i(!1),He.$$click=L,p(He,T(ee,{get when(){return g()},get children(){return ab()}}),null),p(He,()=>g()?"Installing...":"Install",null),ne(()=>He.disabled=g()),ne(()=>Re.value=u()),le}}),null),p(N,T(st,{get isOpen(){return w()},onClose:()=>k(!1),title:"Add Custom App",get children(){var le=db(),ie=le.firstChild,ae=ie.nextSibling,_e=ae.firstChild,se=_e.firstChild;se.nextSibling;var fe=_e.nextSibling,de=ae.nextSibling,pe=de.firstChild,Ee=pe.nextSibling,be=de.nextSibling,Pe=be.firstChild,Ne=Pe.firstChild;Ne.nextSibling;var Ie=Pe.nextSibling,Ae=be.nextSibling,Re=Ae.firstChild,je=Re.firstChild;je.nextSibling;var Te=Re.nextSibling,He=Ae.nextSibling,ze=He.firstChild,Xe=ze.firstChild,Me=Xe.nextSibling,We=ze.nextSibling,Ge=We.firstChild,Je=Ge.nextSibling,ot=He.nextSibling,ft=ot.firstChild,Rt=ft.nextSibling,hr=ot.nextSibling,Sr=hr.firstChild,qr=Sr.nextSibling;return fe.$$input=xe=>x(Be=>({...Be,name:xe.currentTarget.value})),Ee.$$input=xe=>x(Be=>({...Be,displayName:xe.currentTarget.value})),Ie.$$input=xe=>x(Be=>({...Be,chartRepo:xe.currentTarget.value})),Te.$$input=xe=>x(Be=>({...Be,chartName:xe.currentTarget.value})),Me.addEventListener("change",xe=>x(Be=>({...Be,category:xe.currentTarget.value}))),Je.$$input=xe=>x(Be=>({...Be,version:xe.currentTarget.value})),Rt.$$input=xe=>x(Be=>({...Be,description:xe.currentTarget.value})),Sr.$$click=()=>k(!1),qr.$$click=B,ne(()=>fe.value=A().name),ne(()=>Ee.value=A().displayName),ne(()=>Ie.value=A().chartRepo),ne(()=>Te.value=A().chartName),ne(()=>Me.value=A().category),ne(()=>Je.value=A().version),ne(()=>Rt.value=A().description),le}}),null),ne(()=>he.value=t()),N})()};lt(["click","input"]);var pb=O("<p class=text-xs style=color:var(--text-muted)>"),vb=O("<button type=button style=outline:none><span>"),mb=O('<select class="rounded-lg px-3 py-1.5 text-sm"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)">'),_b=O('<div class="flex items-center gap-2"><input type=number class="w-24 rounded-lg px-3 py-1.5 text-sm text-right"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><span class=text-xs style=color:var(--text-muted)>'),bb=O('<div class="card p-4"><div class="flex items-start justify-between gap-4"><div class=flex-1><label class="block text-sm font-medium mb-1"style=color:var(--text-primary)></label></div><div class=flex-shrink-0>'),yb=O("<option>"),xb=O('<div class="card p-4 space-y-4"><div><label class="block text-sm font-medium mb-2"style=color:var(--text-primary)>Reset All Settings</label><p class="text-xs mb-3"style=color:var(--text-muted)>Reset all settings to their default values</p><button class="px-4 py-2 rounded-lg text-sm font-medium"style=background:var(--error-color);color:white>Reset to Defaults</button></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-primary)>Application Version</label><p class=text-xs style=color:var(--text-muted)>KubeGraf v1.0.0</p></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-primary)>Documentation</label><div class="flex gap-2"><a href=https://kubegraf.io target=_blank class="text-sm underline"style=color:var(--accent-primary)>Website</a><a href=https://github.com/kubegraf/kubegraf target=_blank class="text-sm underline"style=color:var(--accent-primary)>GitHub'),wb=O('<div class="max-w-4xl mx-auto"><div class=mb-6><h1 class="text-3xl font-bold mb-2"style=color:var(--text-primary)>Settings</h1><p class=text-sm style=color:var(--text-muted)>Configure KubeGraf to match your preferences</p></div><div class=mb-8><button class="flex items-center gap-2 text-sm font-medium mb-4"style=color:var(--accent-primary)><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 5l7 7-7 7"></path></svg>Advanced Settings'),Sb=O("<p class=text-sm style=color:var(--text-muted)>"),$b=O('<div class=mb-8><div class=mb-4><h2 class="text-xl font-semibold mb-1"style=color:var(--text-primary)></h2></div><div class=space-y-3>');const Cb=()=>{const[e,t]=J(!0),[r,n]=J(30),[d,_]=J(50),[h,s]=J(!1),[i,u]=J(!1),[f,g]=J(!0),[v,b]=J(!1),[S,y]=J(tt()),[l,a]=J(!0),[o,c]=J(!0),[m,w]=J(!0);Dt(()=>{const z=localStorage.getItem("kubegraf-auto-refresh");z!==null&&t(z==="true");const X=localStorage.getItem("kubegraf-refresh-interval");X&&n(parseInt(X,10));const V=localStorage.getItem("kubegraf-items-per-page");V&&_(parseInt(V,10));const Y=localStorage.getItem("kubegraf-compact-mode");Y!==null&&u(Y==="true");const K=localStorage.getItem("kubegraf-notifications");K!==null&&g(K==="true");const ce=localStorage.getItem("kubegraf-sound");ce!==null&&b(ce==="true");const E=localStorage.getItem("kubegraf-default-namespace");E&&y(E);const N=localStorage.getItem("kubegraf-enable-diagnostics");N!==null&&a(N==="true");const U=localStorage.getItem("kubegraf-enable-cve-vulnerabilities");U!==null&&c(U==="true");const W=localStorage.getItem("kubegraf-enable-security-checks");W!==null&&w(W==="true")});const k=(z,X)=>{localStorage.setItem(`kubegraf-${z}`,String(X)),qe(`Setting saved: ${z}`,"success")},A=z=>{_o(z),k("theme",z)},x=z=>{y(z),un(z),k("default-namespace",z)},C=z=>{t(z),k("auto-refresh",z)},I=z=>{n(z),k("refresh-interval",z)},R=z=>{_(z),k("items-per-page",z)},D=z=>{u(z),k("compact-mode",z),document.documentElement.classList.toggle("compact-mode",z)},j=z=>{g(z),k("notifications",z)},M=z=>{b(z),k("sound",z)},P=z=>{a(z),k("enable-diagnostics",z)},L=z=>{c(z),k("enable-cve-vulnerabilities",z)},F=z=>{w(z),k("enable-security-checks",z)},$=()=>{confirm("Are you sure you want to reset all settings to defaults?")&&(localStorage.removeItem("kubegraf-auto-refresh"),localStorage.removeItem("kubegraf-refresh-interval"),localStorage.removeItem("kubegraf-items-per-page"),localStorage.removeItem("kubegraf-compact-mode"),localStorage.removeItem("kubegraf-notifications"),localStorage.removeItem("kubegraf-sound"),localStorage.removeItem("kubegraf-default-namespace"),localStorage.removeItem("kubegraf-enable-diagnostics"),localStorage.removeItem("kubegraf-enable-cve-vulnerabilities"),localStorage.removeItem("kubegraf-enable-security-checks"),location.reload())},B=[{title:"Appearance",description:"Customize the look and feel of KubeGraf",items:[{id:"theme",label:"Theme",description:"Choose your preferred color theme",type:"select",value:()=>ts(),onChange:A,options:Object.keys(zr).map(z=>({label:zr[z].label,value:z}))},{id:"compact-mode",label:"Compact Mode",description:"Reduce spacing and padding for a more compact view",type:"toggle",value:()=>i(),onChange:D}]},{title:"General",description:"General application settings",items:[{id:"default-namespace",label:"Default Namespace",description:"Set the default namespace to load on startup",type:"select",value:()=>S(),onChange:x,options:[{label:"All Namespaces",value:"_all"},...Zs().map(z=>({label:z,value:z}))]},{id:"items-per-page",label:"Items Per Page",description:"Number of items to display per page in resource lists",type:"number",value:()=>d(),onChange:R,min:10,max:200,step:10}]},{title:"Refresh & Updates",description:"Configure automatic refresh and update intervals",items:[{id:"auto-refresh",label:"Auto Refresh",description:"Automatically refresh resource data",type:"toggle",value:()=>e(),onChange:C},{id:"refresh-interval",label:"Refresh Interval",description:"Time between automatic refreshes (seconds)",type:"number",value:()=>r(),onChange:I,min:5,max:300,step:5}]},{title:"Notifications",description:"Configure notification preferences",items:[{id:"notifications",label:"Enable Notifications",description:"Show toast notifications for actions and events",type:"toggle",value:()=>f(),onChange:j},{id:"sound",label:"Sound Effects",description:"Play sound effects for notifications",type:"toggle",value:()=>v(),onChange:M}]},{title:"Security Features",description:"Enable or disable security-related features",items:[{id:"enable-diagnostics",label:"Enable Diagnostics",description:"Run cluster diagnostics and health checks",type:"toggle",value:()=>l(),onChange:P},{id:"enable-cve-vulnerabilities",label:"Enable CVE Vulnerabilities (NIST NVD)",description:"Scan cluster for CVE vulnerabilities using NIST NVD database",type:"toggle",value:()=>o(),onChange:L},{id:"enable-security-checks",label:"Enable Security Checks",description:"Run security-related diagnostic checks",type:"toggle",value:()=>m(),onChange:F}]}],H=z=>{const X=z.item,V=Oe(()=>X.value());return(()=>{var Y=bb(),K=Y.firstChild,ce=K.firstChild,E=ce.firstChild,N=ce.nextSibling;return p(E,()=>X.label),p(ce,T(ee,{get when(){return X.description},get children(){var U=pb();return p(U,()=>X.description),U}}),null),p(N,T(ee,{get when(){return X.type==="toggle"},get children(){var U=vb(),W=U.firstChild;return U.$$click=q=>{q.preventDefault(),q.stopPropagation();const G=X.value();X.onChange(!G)},ne(q=>{var G=`relative inline-flex h-6 w-11 items-center rounded-full transition-colors cursor-pointer ${V()?"bg-[var(--accent-primary)]":"bg-[var(--bg-tertiary)]"}`,Q=`inline-block h-4 w-4 transform rounded-full bg-white transition-transform pointer-events-none ${V()?"translate-x-6":"translate-x-1"}`;return G!==q.e&&Ue(U,q.e=G),Q!==q.t&&Ue(W,q.t=Q),q},{e:void 0,t:void 0}),U}}),null),p(N,T(ee,{get when(){return X.type==="select"},get children(){var U=mb();return U.addEventListener("change",W=>X.onChange(W.currentTarget.value)),U.value=V,p(U,T(Ve,{get each(){return X.options},children:W=>(()=>{var q=yb();return p(q,()=>W.label),ne(()=>q.value=W.value),q})()})),U}}),null),p(N,T(ee,{get when(){return X.type==="number"},get children(){var U=_b(),W=U.firstChild,q=W.nextSibling;return W.addEventListener("change",G=>X.onChange(parseInt(G.currentTarget.value,10))),W.value=V,p(q,()=>X.id==="refresh-interval"?"sec":"items"),ne(G=>{var Q=X.min,oe=X.max,ge=X.step;return Q!==G.e&&et(W,"min",G.e=Q),oe!==G.t&&et(W,"max",G.t=oe),ge!==G.a&&et(W,"step",G.a=ge),G},{e:void 0,t:void 0,a:void 0}),U}}),null),Y})()};return(()=>{var z=wb(),X=z.firstChild,V=X.firstChild;V.nextSibling;var Y=X.nextSibling,K=Y.firstChild,ce=K.firstChild;return p(z,T(Ve,{each:B,children:E=>(()=>{var N=$b(),U=N.firstChild,W=U.firstChild,q=U.nextSibling;return p(W,()=>E.title),p(U,T(ee,{get when(){return E.description},get children(){var G=Sb();return p(G,()=>E.description),G}}),null),p(q,T(Ve,{get each(){return E.items},children:G=>T(H,{item:G})})),N})()}),Y),K.$$click=()=>s(!h()),p(Y,T(ee,{get when(){return h()},get children(){var E=xb(),N=E.firstChild,U=N.firstChild,W=U.nextSibling,q=W.nextSibling,G=N.nextSibling,Q=G.firstChild;Q.nextSibling;var oe=G.nextSibling,ge=oe.firstChild,Ce=ge.nextSibling,Z=Ce.firstChild;return Z.nextSibling,q.$$click=$,E}}),null),ne(()=>et(ce,"class",`w-4 h-4 transition-transform ${h()?"rotate-90":""}`)),z})()};lt(["click"]);function Sn(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Wr=Sn();function Ko(e){Wr=e}const Yo=/[&<>"']/,kb=new RegExp(Yo.source,"g"),Go=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Eb=new RegExp(Go.source,"g"),Ab={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Bl=e=>Ab[e];function Wt(e,t){if(t){if(Yo.test(e))return e.replace(kb,Bl)}else if(Go.test(e))return e.replace(Eb,Bl);return e}const Lb=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Mb(e){return e.replace(Lb,(t,r)=>(r=r.toLowerCase(),r==="colon"?":":r.charAt(0)==="#"?r.charAt(1)==="x"?String.fromCharCode(parseInt(r.substring(2),16)):String.fromCharCode(+r.substring(1)):""))}const Db=/(^|[^\[])\^/g;function dt(e,t){let r=typeof e=="string"?e:e.source;t=t||"";const n={replace:(d,_)=>{let h=typeof _=="string"?_:_.source;return h=h.replace(Db,"$1"),r=r.replace(d,h),n},getRegex:()=>new RegExp(r,t)};return n}function Ol(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}const xs={exec:()=>null};function Hl(e,t){const r=e.replace(/\|/g,(_,h,s)=>{let i=!1,u=h;for(;--u>=0&&s[u]==="\\";)i=!i;return i?"|":" |"}),n=r.split(/ \|/);let d=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),t)if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;d<n.length;d++)n[d]=n[d].trim().replace(/\\\|/g,"|");return n}function Gs(e,t,r){const n=e.length;if(n===0)return"";let d=0;for(;d<n&&e.charAt(n-d-1)===t;)d++;return e.slice(0,n-d)}function Rb(e,t){if(e.indexOf(t[1])===-1)return-1;let r=0;for(let n=0;n<e.length;n++)if(e[n]==="\\")n++;else if(e[n]===t[0])r++;else if(e[n]===t[1]&&(r--,r<0))return n;return-1}function Nl(e,t,r,n){const d=t.href,_=t.title?Wt(t.title):null,h=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){n.state.inLink=!0;const s={type:"link",raw:r,href:d,title:_,text:h,tokens:n.inlineTokens(h)};return n.state.inLink=!1,s}return{type:"image",raw:r,href:d,title:_,text:Wt(h)}}function Tb(e,t){const r=e.match(/^(\s+)(?:```)/);if(r===null)return t;const n=r[1];return t.split(`
`).map(d=>{const _=d.match(/^\s+/);if(_===null)return d;const[h]=_;return h.length>=n.length?d.slice(n.length):d}).join(`
`)}class mi{options;rules;lexer;constructor(t){this.options=t||Wr}space(t){const r=this.rules.block.newline.exec(t);if(r&&r[0].length>0)return{type:"space",raw:r[0]}}code(t){const r=this.rules.block.code.exec(t);if(r){const n=r[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:r[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Gs(n,`
`)}}}fences(t){const r=this.rules.block.fences.exec(t);if(r){const n=r[0],d=Tb(n,r[3]||"");return{type:"code",raw:n,lang:r[2]?r[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):r[2],text:d}}}heading(t){const r=this.rules.block.heading.exec(t);if(r){let n=r[2].trim();if(/#$/.test(n)){const d=Gs(n,"#");(this.options.pedantic||!d||/ $/.test(d))&&(n=d.trim())}return{type:"heading",raw:r[0],depth:r[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){const r=this.rules.block.hr.exec(t);if(r)return{type:"hr",raw:r[0]}}blockquote(t){const r=this.rules.block.blockquote.exec(t);if(r){let n=r[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`);n=Gs(n.replace(/^ *>[ \t]?/gm,""),`
`);const d=this.lexer.state.top;this.lexer.state.top=!0;const _=this.lexer.blockTokens(n);return this.lexer.state.top=d,{type:"blockquote",raw:r[0],tokens:_,text:n}}}list(t){let r=this.rules.block.list.exec(t);if(r){let n=r[1].trim();const d=n.length>1,_={type:"list",raw:"",ordered:d,start:d?+n.slice(0,-1):"",loose:!1,items:[]};n=d?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=d?n:"[*+-]");const h=new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`);let s="",i="",u=!1;for(;t;){let f=!1;if(!(r=h.exec(t))||this.rules.block.hr.test(t))break;s=r[0],t=t.substring(s.length);let g=r[2].split(`
`,1)[0].replace(/^\t+/,a=>" ".repeat(3*a.length)),v=t.split(`
`,1)[0],b=0;this.options.pedantic?(b=2,i=g.trimStart()):(b=r[2].search(/[^ ]/),b=b>4?1:b,i=g.slice(b),b+=r[1].length);let S=!1;if(!g&&/^ *$/.test(v)&&(s+=v+`
`,t=t.substring(v.length+1),f=!0),!f){const a=new RegExp(`^ {0,${Math.min(3,b-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),o=new RegExp(`^ {0,${Math.min(3,b-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),c=new RegExp(`^ {0,${Math.min(3,b-1)}}(?:\`\`\`|~~~)`),m=new RegExp(`^ {0,${Math.min(3,b-1)}}#`);for(;t;){const w=t.split(`
`,1)[0];if(v=w,this.options.pedantic&&(v=v.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),c.test(v)||m.test(v)||a.test(v)||o.test(t))break;if(v.search(/[^ ]/)>=b||!v.trim())i+=`
`+v.slice(b);else{if(S||g.search(/[^ ]/)>=4||c.test(g)||m.test(g)||o.test(g))break;i+=`
`+v}!S&&!v.trim()&&(S=!0),s+=w+`
`,t=t.substring(w.length+1),g=v.slice(b)}}_.loose||(u?_.loose=!0:/\n *\n *$/.test(s)&&(u=!0));let y=null,l;this.options.gfm&&(y=/^\[[ xX]\] /.exec(i),y&&(l=y[0]!=="[ ] ",i=i.replace(/^\[[ xX]\] +/,""))),_.items.push({type:"list_item",raw:s,task:!!y,checked:l,loose:!1,text:i,tokens:[]}),_.raw+=s}_.items[_.items.length-1].raw=s.trimEnd(),_.items[_.items.length-1].text=i.trimEnd(),_.raw=_.raw.trimEnd();for(let f=0;f<_.items.length;f++)if(this.lexer.state.top=!1,_.items[f].tokens=this.lexer.blockTokens(_.items[f].text,[]),!_.loose){const g=_.items[f].tokens.filter(b=>b.type==="space"),v=g.length>0&&g.some(b=>/\n.*\n/.test(b.raw));_.loose=v}if(_.loose)for(let f=0;f<_.items.length;f++)_.items[f].loose=!0;return _}}html(t){const r=this.rules.block.html.exec(t);if(r)return{type:"html",block:!0,raw:r[0],pre:r[1]==="pre"||r[1]==="script"||r[1]==="style",text:r[0]}}def(t){const r=this.rules.block.def.exec(t);if(r){const n=r[1].toLowerCase().replace(/\s+/g," "),d=r[2]?r[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",_=r[3]?r[3].substring(1,r[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):r[3];return{type:"def",tag:n,raw:r[0],href:d,title:_}}}table(t){const r=this.rules.block.table.exec(t);if(!r||!/[:|]/.test(r[2]))return;const n=Hl(r[1]),d=r[2].replace(/^\||\| *$/g,"").split("|"),_=r[3]&&r[3].trim()?r[3].replace(/\n[ \t]*$/,"").split(`
`):[],h={type:"table",raw:r[0],header:[],align:[],rows:[]};if(n.length===d.length){for(const s of d)/^ *-+: *$/.test(s)?h.align.push("right"):/^ *:-+: *$/.test(s)?h.align.push("center"):/^ *:-+ *$/.test(s)?h.align.push("left"):h.align.push(null);for(const s of n)h.header.push({text:s,tokens:this.lexer.inline(s)});for(const s of _)h.rows.push(Hl(s,h.header.length).map(i=>({text:i,tokens:this.lexer.inline(i)})));return h}}lheading(t){const r=this.rules.block.lheading.exec(t);if(r)return{type:"heading",raw:r[0],depth:r[2].charAt(0)==="="?1:2,text:r[1],tokens:this.lexer.inline(r[1])}}paragraph(t){const r=this.rules.block.paragraph.exec(t);if(r){const n=r[1].charAt(r[1].length-1)===`
`?r[1].slice(0,-1):r[1];return{type:"paragraph",raw:r[0],text:n,tokens:this.lexer.inline(n)}}}text(t){const r=this.rules.block.text.exec(t);if(r)return{type:"text",raw:r[0],text:r[0],tokens:this.lexer.inline(r[0])}}escape(t){const r=this.rules.inline.escape.exec(t);if(r)return{type:"escape",raw:r[0],text:Wt(r[1])}}tag(t){const r=this.rules.inline.tag.exec(t);if(r)return!this.lexer.state.inLink&&/^<a /i.test(r[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(r[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:r[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:r[0]}}link(t){const r=this.rules.inline.link.exec(t);if(r){const n=r[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;const h=Gs(n.slice(0,-1),"\\");if((n.length-h.length)%2===0)return}else{const h=Rb(r[2],"()");if(h>-1){const i=(r[0].indexOf("!")===0?5:4)+r[1].length+h;r[2]=r[2].substring(0,h),r[0]=r[0].substring(0,i).trim(),r[3]=""}}let d=r[2],_="";if(this.options.pedantic){const h=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(d);h&&(d=h[1],_=h[3])}else _=r[3]?r[3].slice(1,-1):"";return d=d.trim(),/^</.test(d)&&(this.options.pedantic&&!/>$/.test(n)?d=d.slice(1):d=d.slice(1,-1)),Nl(r,{href:d&&d.replace(this.rules.inline.anyPunctuation,"$1"),title:_&&_.replace(this.rules.inline.anyPunctuation,"$1")},r[0],this.lexer)}}reflink(t,r){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){const d=(n[2]||n[1]).replace(/\s+/g," "),_=r[d.toLowerCase()];if(!_){const h=n[0].charAt(0);return{type:"text",raw:h,text:h}}return Nl(n,_,n[0],this.lexer)}}emStrong(t,r,n=""){let d=this.rules.inline.emStrongLDelim.exec(t);if(!d||d[3]&&n.match(/[\p{L}\p{N}]/u))return;if(!(d[1]||d[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const h=[...d[0]].length-1;let s,i,u=h,f=0;const g=d[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(g.lastIndex=0,r=r.slice(-1*t.length+h);(d=g.exec(r))!=null;){if(s=d[1]||d[2]||d[3]||d[4]||d[5]||d[6],!s)continue;if(i=[...s].length,d[3]||d[4]){u+=i;continue}else if((d[5]||d[6])&&h%3&&!((h+i)%3)){f+=i;continue}if(u-=i,u>0)continue;i=Math.min(i,i+u+f);const v=[...d[0]][0].length,b=t.slice(0,h+d.index+v+i);if(Math.min(h,i)%2){const y=b.slice(1,-1);return{type:"em",raw:b,text:y,tokens:this.lexer.inlineTokens(y)}}const S=b.slice(2,-2);return{type:"strong",raw:b,text:S,tokens:this.lexer.inlineTokens(S)}}}}codespan(t){const r=this.rules.inline.code.exec(t);if(r){let n=r[2].replace(/\n/g," ");const d=/[^ ]/.test(n),_=/^ /.test(n)&&/ $/.test(n);return d&&_&&(n=n.substring(1,n.length-1)),n=Wt(n,!0),{type:"codespan",raw:r[0],text:n}}}br(t){const r=this.rules.inline.br.exec(t);if(r)return{type:"br",raw:r[0]}}del(t){const r=this.rules.inline.del.exec(t);if(r)return{type:"del",raw:r[0],text:r[2],tokens:this.lexer.inlineTokens(r[2])}}autolink(t){const r=this.rules.inline.autolink.exec(t);if(r){let n,d;return r[2]==="@"?(n=Wt(r[1]),d="mailto:"+n):(n=Wt(r[1]),d=n),{type:"link",raw:r[0],text:n,href:d,tokens:[{type:"text",raw:n,text:n}]}}}url(t){let r;if(r=this.rules.inline.url.exec(t)){let n,d;if(r[2]==="@")n=Wt(r[0]),d="mailto:"+n;else{let _;do _=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])?.[0]??"";while(_!==r[0]);n=Wt(r[0]),r[1]==="www."?d="http://"+r[0]:d=r[0]}return{type:"link",raw:r[0],text:n,href:d,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(t){const r=this.rules.inline.text.exec(t);if(r){let n;return this.lexer.state.inRawBlock?n=r[0]:n=Wt(r[0]),{type:"text",raw:r[0],text:n}}}}const Pb=/^(?: *(?:\n|$))+/,Ib=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,Bb=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Rs=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Ob=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Xo=/(?:[*+-]|\d{1,9}[.)])/,Jo=dt(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Xo).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),$n=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Hb=/^[^\n]+/,Cn=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Nb=dt(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Cn).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),zb=dt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Xo).getRegex(),ki="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",kn=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Fb=dt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",kn).replace("tag",ki).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Zo=dt($n).replace("hr",Rs).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ki).getRegex(),jb=dt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Zo).getRegex(),En={blockquote:jb,code:Ib,def:Nb,fences:Bb,heading:Ob,hr:Rs,html:Fb,lheading:Jo,list:zb,newline:Pb,paragraph:Zo,table:xs,text:Hb},zl=dt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Rs).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ki).getRegex(),Ub={...En,table:zl,paragraph:dt($n).replace("hr",Rs).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",zl).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ki).getRegex()},Vb={...En,html:dt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",kn).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:xs,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:dt($n).replace("hr",Rs).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Jo).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Qo=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Wb=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,ea=/^( {2,}|\\)\n(?!\s*$)/,qb=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Ts="\\p{P}\\p{S}",Kb=dt(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Ts).getRegex(),Yb=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,Gb=dt(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Ts).getRegex(),Xb=dt("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Ts).getRegex(),Jb=dt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Ts).getRegex(),Zb=dt(/\\([punct])/,"gu").replace(/punct/g,Ts).getRegex(),Qb=dt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),e2=dt(kn).replace("(?:-->|$)","-->").getRegex(),t2=dt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",e2).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),_i=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,r2=dt(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",_i).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),ta=dt(/^!?\[(label)\]\[(ref)\]/).replace("label",_i).replace("ref",Cn).getRegex(),ra=dt(/^!?\[(ref)\](?:\[\])?/).replace("ref",Cn).getRegex(),s2=dt("reflink|nolink(?!\\()","g").replace("reflink",ta).replace("nolink",ra).getRegex(),An={_backpedal:xs,anyPunctuation:Zb,autolink:Qb,blockSkip:Yb,br:ea,code:Wb,del:xs,emStrongLDelim:Gb,emStrongRDelimAst:Xb,emStrongRDelimUnd:Jb,escape:Qo,link:r2,nolink:ra,punctuation:Kb,reflink:ta,reflinkSearch:s2,tag:t2,text:qb,url:xs},i2={...An,link:dt(/^!?\[(label)\]\((.*?)\)/).replace("label",_i).getRegex(),reflink:dt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",_i).getRegex()},cn={...An,escape:dt(Qo).replace("])","~|])").getRegex(),url:dt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},n2={...cn,br:dt(ea).replace("{2,}","*").getRegex(),text:dt(cn.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Xs={normal:En,gfm:Ub,pedantic:Vb},gs={normal:An,gfm:cn,breaks:n2,pedantic:i2};class lr{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Wr,this.options.tokenizer=this.options.tokenizer||new mi,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const r={block:Xs.normal,inline:gs.normal};this.options.pedantic?(r.block=Xs.pedantic,r.inline=gs.pedantic):this.options.gfm&&(r.block=Xs.gfm,this.options.breaks?r.inline=gs.breaks:r.inline=gs.gfm),this.tokenizer.rules=r}static get rules(){return{block:Xs,inline:gs}}static lex(t,r){return new lr(r).lex(t)}static lexInline(t,r){return new lr(r).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){const n=this.inlineQueue[r];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,r=[]){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(s,i,u)=>i+"    ".repeat(u.length));let n,d,_,h;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(s=>(n=s.call({lexer:this},t,r))?(t=t.substring(n.raw.length),r.push(n),!0):!1))){if(n=this.tokenizer.space(t)){t=t.substring(n.raw.length),n.raw.length===1&&r.length>0?r[r.length-1].raw+=`
`:r.push(n);continue}if(n=this.tokenizer.code(t)){t=t.substring(n.raw.length),d=r[r.length-1],d&&(d.type==="paragraph"||d.type==="text")?(d.raw+=`
`+n.raw,d.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=d.text):r.push(n);continue}if(n=this.tokenizer.fences(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.heading(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.hr(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.blockquote(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.list(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.html(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.def(t)){t=t.substring(n.raw.length),d=r[r.length-1],d&&(d.type==="paragraph"||d.type==="text")?(d.raw+=`
`+n.raw,d.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=d.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.lheading(t)){t=t.substring(n.raw.length),r.push(n);continue}if(_=t,this.options.extensions&&this.options.extensions.startBlock){let s=1/0;const i=t.slice(1);let u;this.options.extensions.startBlock.forEach(f=>{u=f.call({lexer:this},i),typeof u=="number"&&u>=0&&(s=Math.min(s,u))}),s<1/0&&s>=0&&(_=t.substring(0,s+1))}if(this.state.top&&(n=this.tokenizer.paragraph(_))){d=r[r.length-1],h&&d.type==="paragraph"?(d.raw+=`
`+n.raw,d.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=d.text):r.push(n),h=_.length!==t.length,t=t.substring(n.raw.length);continue}if(n=this.tokenizer.text(t)){t=t.substring(n.raw.length),d=r[r.length-1],d&&d.type==="text"?(d.raw+=`
`+n.raw,d.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=d.text):r.push(n);continue}if(t){const s="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(s);break}else throw new Error(s)}}return this.state.top=!0,r}inline(t,r=[]){return this.inlineQueue.push({src:t,tokens:r}),r}inlineTokens(t,r=[]){let n,d,_,h=t,s,i,u;if(this.tokens.links){const f=Object.keys(this.tokens.links);if(f.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(h))!=null;)f.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(h=h.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+h.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.blockSkip.exec(h))!=null;)h=h.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+h.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(s=this.tokenizer.rules.inline.anyPunctuation.exec(h))!=null;)h=h.slice(0,s.index)+"++"+h.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(i||(u=""),i=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(f=>(n=f.call({lexer:this},t,r))?(t=t.substring(n.raw.length),r.push(n),!0):!1))){if(n=this.tokenizer.escape(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.tag(t)){t=t.substring(n.raw.length),d=r[r.length-1],d&&n.type==="text"&&d.type==="text"?(d.raw+=n.raw,d.text+=n.text):r.push(n);continue}if(n=this.tokenizer.link(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(n.raw.length),d=r[r.length-1],d&&n.type==="text"&&d.type==="text"?(d.raw+=n.raw,d.text+=n.text):r.push(n);continue}if(n=this.tokenizer.emStrong(t,h,u)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.codespan(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.br(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.del(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.autolink(t)){t=t.substring(n.raw.length),r.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(t))){t=t.substring(n.raw.length),r.push(n);continue}if(_=t,this.options.extensions&&this.options.extensions.startInline){let f=1/0;const g=t.slice(1);let v;this.options.extensions.startInline.forEach(b=>{v=b.call({lexer:this},g),typeof v=="number"&&v>=0&&(f=Math.min(f,v))}),f<1/0&&f>=0&&(_=t.substring(0,f+1))}if(n=this.tokenizer.inlineText(_)){t=t.substring(n.raw.length),n.raw.slice(-1)!=="_"&&(u=n.raw.slice(-1)),i=!0,d=r[r.length-1],d&&d.type==="text"?(d.raw+=n.raw,d.text+=n.text):r.push(n);continue}if(t){const f="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(f);break}else throw new Error(f)}}return r}}class bi{options;constructor(t){this.options=t||Wr}code(t,r,n){const d=(r||"").match(/^\S*/)?.[0];return t=t.replace(/\n$/,"")+`
`,d?'<pre><code class="language-'+Wt(d)+'">'+(n?t:Wt(t,!0))+`</code></pre>
`:"<pre><code>"+(n?t:Wt(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t,r){return t}heading(t,r,n){return`<h${r}>${t}</h${r}>
`}hr(){return`<hr>
`}list(t,r,n){const d=r?"ol":"ul",_=r&&n!==1?' start="'+n+'"':"";return"<"+d+_+`>
`+t+"</"+d+`>
`}listitem(t,r,n){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(t){return`<p>${t}</p>
`}table(t,r){return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+r+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,r){const n=r.header?"th":"td";return(r.align?`<${n} align="${r.align}">`:`<${n}>`)+t+`</${n}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return"<br>"}del(t){return`<del>${t}</del>`}link(t,r,n){const d=Ol(t);if(d===null)return n;t=d;let _='<a href="'+t+'"';return r&&(_+=' title="'+r+'"'),_+=">"+n+"</a>",_}image(t,r,n){const d=Ol(t);if(d===null)return n;t=d;let _=`<img src="${t}" alt="${n}"`;return r&&(_+=` title="${r}"`),_+=">",_}text(t){return t}}class Ln{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,r,n){return""+n}image(t,r,n){return""+n}br(){return""}}class or{options;renderer;textRenderer;constructor(t){this.options=t||Wr,this.options.renderer=this.options.renderer||new bi,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Ln}static parse(t,r){return new or(r).parse(t)}static parseInline(t,r){return new or(r).parseInline(t)}parse(t,r=!0){let n="";for(let d=0;d<t.length;d++){const _=t[d];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[_.type]){const h=_,s=this.options.extensions.renderers[h.type].call({parser:this},h);if(s!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(h.type)){n+=s||"";continue}}switch(_.type){case"space":continue;case"hr":{n+=this.renderer.hr();continue}case"heading":{const h=_;n+=this.renderer.heading(this.parseInline(h.tokens),h.depth,Mb(this.parseInline(h.tokens,this.textRenderer)));continue}case"code":{const h=_;n+=this.renderer.code(h.text,h.lang,!!h.escaped);continue}case"table":{const h=_;let s="",i="";for(let f=0;f<h.header.length;f++)i+=this.renderer.tablecell(this.parseInline(h.header[f].tokens),{header:!0,align:h.align[f]});s+=this.renderer.tablerow(i);let u="";for(let f=0;f<h.rows.length;f++){const g=h.rows[f];i="";for(let v=0;v<g.length;v++)i+=this.renderer.tablecell(this.parseInline(g[v].tokens),{header:!1,align:h.align[v]});u+=this.renderer.tablerow(i)}n+=this.renderer.table(s,u);continue}case"blockquote":{const h=_,s=this.parse(h.tokens);n+=this.renderer.blockquote(s);continue}case"list":{const h=_,s=h.ordered,i=h.start,u=h.loose;let f="";for(let g=0;g<h.items.length;g++){const v=h.items[g],b=v.checked,S=v.task;let y="";if(v.task){const l=this.renderer.checkbox(!!b);u?v.tokens.length>0&&v.tokens[0].type==="paragraph"?(v.tokens[0].text=l+" "+v.tokens[0].text,v.tokens[0].tokens&&v.tokens[0].tokens.length>0&&v.tokens[0].tokens[0].type==="text"&&(v.tokens[0].tokens[0].text=l+" "+v.tokens[0].tokens[0].text)):v.tokens.unshift({type:"text",text:l+" "}):y+=l+" "}y+=this.parse(v.tokens,u),f+=this.renderer.listitem(y,S,!!b)}n+=this.renderer.list(f,s,i);continue}case"html":{const h=_;n+=this.renderer.html(h.text,h.block);continue}case"paragraph":{const h=_;n+=this.renderer.paragraph(this.parseInline(h.tokens));continue}case"text":{let h=_,s=h.tokens?this.parseInline(h.tokens):h.text;for(;d+1<t.length&&t[d+1].type==="text";)h=t[++d],s+=`
`+(h.tokens?this.parseInline(h.tokens):h.text);n+=r?this.renderer.paragraph(s):s;continue}default:{const h='Token with "'+_.type+'" type was not found.';if(this.options.silent)return console.error(h),"";throw new Error(h)}}}return n}parseInline(t,r){r=r||this.renderer;let n="";for(let d=0;d<t.length;d++){const _=t[d];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[_.type]){const h=this.options.extensions.renderers[_.type].call({parser:this},_);if(h!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(_.type)){n+=h||"";continue}}switch(_.type){case"escape":{const h=_;n+=r.text(h.text);break}case"html":{const h=_;n+=r.html(h.text);break}case"link":{const h=_;n+=r.link(h.href,h.title,this.parseInline(h.tokens,r));break}case"image":{const h=_;n+=r.image(h.href,h.title,h.text);break}case"strong":{const h=_;n+=r.strong(this.parseInline(h.tokens,r));break}case"em":{const h=_;n+=r.em(this.parseInline(h.tokens,r));break}case"codespan":{const h=_;n+=r.codespan(h.text);break}case"br":{n+=r.br();break}case"del":{const h=_;n+=r.del(this.parseInline(h.tokens,r));break}case"text":{const h=_;n+=r.text(h.text);break}default:{const h='Token with "'+_.type+'" type was not found.';if(this.options.silent)return console.error(h),"";throw new Error(h)}}}return n}}class si{options;constructor(t){this.options=t||Wr}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}}class l2{defaults=Sn();options=this.setOptions;parse=this.#e(lr.lex,or.parse);parseInline=this.#e(lr.lexInline,or.parseInline);Parser=or;Renderer=bi;TextRenderer=Ln;Lexer=lr;Tokenizer=mi;Hooks=si;constructor(...t){this.use(...t)}walkTokens(t,r){let n=[];for(const d of t)switch(n=n.concat(r.call(this,d)),d.type){case"table":{const _=d;for(const h of _.header)n=n.concat(this.walkTokens(h.tokens,r));for(const h of _.rows)for(const s of h)n=n.concat(this.walkTokens(s.tokens,r));break}case"list":{const _=d;n=n.concat(this.walkTokens(_.items,r));break}default:{const _=d;this.defaults.extensions?.childTokens?.[_.type]?this.defaults.extensions.childTokens[_.type].forEach(h=>{const s=_[h].flat(1/0);n=n.concat(this.walkTokens(s,r))}):_.tokens&&(n=n.concat(this.walkTokens(_.tokens,r)))}}return n}use(...t){const r=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{const d={...n};if(d.async=this.defaults.async||d.async||!1,n.extensions&&(n.extensions.forEach(_=>{if(!_.name)throw new Error("extension name required");if("renderer"in _){const h=r.renderers[_.name];h?r.renderers[_.name]=function(...s){let i=_.renderer.apply(this,s);return i===!1&&(i=h.apply(this,s)),i}:r.renderers[_.name]=_.renderer}if("tokenizer"in _){if(!_.level||_.level!=="block"&&_.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const h=r[_.level];h?h.unshift(_.tokenizer):r[_.level]=[_.tokenizer],_.start&&(_.level==="block"?r.startBlock?r.startBlock.push(_.start):r.startBlock=[_.start]:_.level==="inline"&&(r.startInline?r.startInline.push(_.start):r.startInline=[_.start]))}"childTokens"in _&&_.childTokens&&(r.childTokens[_.name]=_.childTokens)}),d.extensions=r),n.renderer){const _=this.defaults.renderer||new bi(this.defaults);for(const h in n.renderer){if(!(h in _))throw new Error(`renderer '${h}' does not exist`);if(h==="options")continue;const s=h,i=n.renderer[s],u=_[s];_[s]=(...f)=>{let g=i.apply(_,f);return g===!1&&(g=u.apply(_,f)),g||""}}d.renderer=_}if(n.tokenizer){const _=this.defaults.tokenizer||new mi(this.defaults);for(const h in n.tokenizer){if(!(h in _))throw new Error(`tokenizer '${h}' does not exist`);if(["options","rules","lexer"].includes(h))continue;const s=h,i=n.tokenizer[s],u=_[s];_[s]=(...f)=>{let g=i.apply(_,f);return g===!1&&(g=u.apply(_,f)),g}}d.tokenizer=_}if(n.hooks){const _=this.defaults.hooks||new si;for(const h in n.hooks){if(!(h in _))throw new Error(`hook '${h}' does not exist`);if(h==="options")continue;const s=h,i=n.hooks[s],u=_[s];si.passThroughHooks.has(h)?_[s]=f=>{if(this.defaults.async)return Promise.resolve(i.call(_,f)).then(v=>u.call(_,v));const g=i.call(_,f);return u.call(_,g)}:_[s]=(...f)=>{let g=i.apply(_,f);return g===!1&&(g=u.apply(_,f)),g}}d.hooks=_}if(n.walkTokens){const _=this.defaults.walkTokens,h=n.walkTokens;d.walkTokens=function(s){let i=[];return i.push(h.call(this,s)),_&&(i=i.concat(_.call(this,s))),i}}this.defaults={...this.defaults,...d}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,r){return lr.lex(t,r??this.defaults)}parser(t,r){return or.parse(t,r??this.defaults)}#e(t,r){return(n,d)=>{const _={...d},h={...this.defaults,..._};this.defaults.async===!0&&_.async===!1&&(h.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),h.async=!0);const s=this.#t(!!h.silent,!!h.async);if(typeof n>"u"||n===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(h.hooks&&(h.hooks.options=h),h.async)return Promise.resolve(h.hooks?h.hooks.preprocess(n):n).then(i=>t(i,h)).then(i=>h.hooks?h.hooks.processAllTokens(i):i).then(i=>h.walkTokens?Promise.all(this.walkTokens(i,h.walkTokens)).then(()=>i):i).then(i=>r(i,h)).then(i=>h.hooks?h.hooks.postprocess(i):i).catch(s);try{h.hooks&&(n=h.hooks.preprocess(n));let i=t(n,h);h.hooks&&(i=h.hooks.processAllTokens(i)),h.walkTokens&&this.walkTokens(i,h.walkTokens);let u=r(i,h);return h.hooks&&(u=h.hooks.postprocess(u)),u}catch(i){return s(i)}}}#t(t,r){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const d="<p>An error occurred:</p><pre>"+Wt(n.message+"",!0)+"</pre>";return r?Promise.resolve(d):d}if(r)return Promise.reject(n);throw n}}}const Vr=new l2;function ct(e,t){return Vr.parse(e,t)}ct.options=ct.setOptions=function(e){return Vr.setOptions(e),ct.defaults=Vr.defaults,Ko(ct.defaults),ct};ct.getDefaults=Sn;ct.defaults=Wr;ct.use=function(...e){return Vr.use(...e),ct.defaults=Vr.defaults,Ko(ct.defaults),ct};ct.walkTokens=function(e,t){return Vr.walkTokens(e,t)};ct.parseInline=Vr.parseInline;ct.Parser=or;ct.parser=or.parse;ct.Renderer=bi;ct.TextRenderer=Ln;ct.Lexer=lr;ct.lexer=lr.lex;ct.Tokenizer=mi;ct.Hooks=si;ct.parse=ct;ct.options;ct.setOptions;ct.use;ct.walkTokens;ct.parseInline;or.parse;lr.lex;const[j2,o2]=J(null),[Yi,Hr]=J([]),[ii,Fl]=J(!1),[jl,sa]=J("ollama"),[Ul,U2]=J([{id:"ollama",name:"Ollama (Local)",icon:"llama"},{id:"openai",name:"OpenAI GPT-4",icon:"openai"},{id:"anthropic",name:"Claude",icon:"anthropic"}]);async function a2(){try{const e=await fetch("/api/ai/status");if(e.ok){const t=await e.json();if(t.available&&t.provider){const r=t.provider.split(" ")[0];sa(r)}}}catch(e){console.error("Failed to fetch AI status:",e)}}async function Vl(e){if(!e.trim()||ii())return;const t={id:crypto.randomUUID(),role:"user",content:e,timestamp:new Date};Hr(r=>[...r,t]),Fl(!0);try{if(!(await(await fetch("/api/ai/status")).json()).available){const _={id:crypto.randomUUID(),role:"assistant",content:"No AI provider available. Configure Ollama (local), OpenAI (OPENAI_API_KEY), or Claude (ANTHROPIC_API_KEY) to enable AI features.",timestamp:new Date};Hr(h=>[...h,_]);return}const d=await fetch("/api/ai/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e})});if(d.ok){const _=await d.json();if(_.error){const h={id:crypto.randomUUID(),role:"assistant",content:`Error: ${_.error}`,timestamp:new Date};Hr(s=>[...s,h])}else{const h={id:crypto.randomUUID(),role:"assistant",content:_.response,timestamp:new Date};Hr(s=>[...s,h])}}else{const _=await d.text(),h={id:crypto.randomUUID(),role:"assistant",content:`Error: ${_}`,timestamp:new Date};Hr(s=>[...s,h])}}catch(r){const n={id:crypto.randomUUID(),role:"assistant",content:`Failed to send message: ${r}`,timestamp:new Date};Hr(d=>[...d,n])}finally{Fl(!1)}}function ia(){Hr([]),o2(null)}function c2(e){sa(e),ia()}var d2=O('<div class="text-center py-8"><div class="w-16 h-16 rounded-full bg-gradient-to-br from-purple-600/20 to-indigo-600/20 flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8 text-purple-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path></svg></div><h3 class="text-white font-medium mb-2">How can I help?</h3><p class="text-gray-500 text-sm mb-6">Ask me about your Kubernetes cluster, resources, or troubleshooting</p><div class=space-y-2>'),h2=O('<div class="flex justify-start"><div class="bg-k8s-dark rounded-lg px-4 py-3"><div class="flex items-center gap-2"><div class="flex gap-1"><div class="w-2 h-2 rounded-full bg-purple-500 animate-bounce"style=animation-delay:0ms></div><div class="w-2 h-2 rounded-full bg-purple-500 animate-bounce"style=animation-delay:150ms></div><div class="w-2 h-2 rounded-full bg-purple-500 animate-bounce"style=animation-delay:300ms></div></div><span class="text-gray-500 text-sm">Thinking...'),u2=O('<div class="fixed top-0 right-0 w-[420px] h-full bg-k8s-card border-l border-k8s-border flex flex-col z-50 animate-slide-in"><div class="flex items-center justify-between px-4 py-3 border-b border-k8s-border"><div class="flex items-center gap-3"><div class="w-10 h-10 rounded-lg bg-gradient-to-br from-purple-600 to-indigo-600 flex items-center justify-center"><svg class="w-6 h-6 text-white"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg></div><div><h2 class="text-white font-semibold">AI Assistant</h2><p class="text-gray-500 text-xs">Kubernetes expert</p></div></div><div class="flex items-center gap-2"><select class="bg-k8s-dark border border-k8s-border rounded-lg px-2 py-1 text-sm text-gray-400 focus:border-k8s-blue focus:outline-none"></select><button class="p-2 rounded-lg hover:bg-k8s-border/50 transition-colors text-gray-400 hover:text-white"title="Clear chat"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button><button class="p-2 rounded-lg hover:bg-k8s-border/50 transition-colors text-gray-400 hover:text-white"title=Close><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div><div class="flex-1 overflow-y-auto p-4 space-y-4"><div></div></div><form class="p-4 border-t border-k8s-border"><div class="flex items-center gap-2"><input type=text placeholder="Ask about your cluster..."class="flex-1 bg-k8s-dark border border-k8s-border rounded-lg px-4 py-2.5 text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none disabled:opacity-50"><button type=submit class="p-2.5 bg-gradient-to-r from-purple-600 to-indigo-600 rounded-lg text-white hover:from-purple-700 hover:to-indigo-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg></button></div><p class="mt-2 text-xs text-gray-500 text-center">Using '),f2=O("<option>"),g2=O('<button class="w-full text-left px-4 py-2 bg-k8s-dark hover:bg-k8s-border/50 rounded-lg text-sm text-gray-400 hover:text-white transition-colors">'),p2=O('<div class="prose prose-invert prose-sm max-w-none">'),v2=O('<div class="mt-2 pt-2 border-t border-k8s-border/50 text-xs text-gray-500">Tokens: '),m2=O("<div><div>"),_2=O('<p class="text-sm whitespace-pre-wrap">');const b2=()=>{let e,t;const[r,n]=J(""),d=["Show me pods with high restart counts","List deployments not fully available","What services expose port 80?","Show cluster resource usage"];cr(()=>{a2(),t?.focus()}),Dt(()=>{Yi(),setTimeout(()=>{e?.scrollIntoView({behavior:"smooth"})},100)});async function _(i){i.preventDefault();const u=r().trim();u&&(n(""),await Vl(u))}function h(i){Vl(i)}function s(i){try{return ct.parse(i,{async:!1})}catch{return i}}return(()=>{var i=u2(),u=i.firstChild,f=u.firstChild,g=f.nextSibling,v=g.firstChild,b=v.nextSibling,S=b.nextSibling,y=u.nextSibling,l=y.firstChild,a=y.nextSibling,o=a.firstChild,c=o.firstChild,m=c.nextSibling,w=o.nextSibling;w.firstChild,v.addEventListener("change",x=>c2(x.target.value)),p(v,T(Ve,{get each(){return Ul()},children:x=>(()=>{var C=f2();return p(C,()=>x.name),ne(()=>C.value=x.id),C})()})),jr(b,"click",ia,!0),S.$$click=()=>io(!1),p(y,T(ee,{get when(){return Yi().length===0},get children(){var x=d2(),C=x.firstChild,I=C.nextSibling,R=I.nextSibling,D=R.nextSibling;return p(D,T(Ve,{each:d,children:j=>(()=>{var M=g2();return M.$$click=()=>h(j),p(M,j),M})()})),x}}),l),p(y,T(Ve,{get each(){return Yi()},children:x=>(()=>{var C=m2(),I=C.firstChild;return p(I,T(ee,{get when(){return x.role==="assistant"},get fallback(){return(()=>{var R=_2();return p(R,()=>x.content),R})()},get children(){return[(()=>{var R=p2();return ne(()=>R.innerHTML=s(x.content)),R})(),T(ee,{get when(){return x.usage},get children(){var R=v2();return R.firstChild,p(R,()=>x.usage?.totalTokens,null),R}})]}})),ne(R=>{var D=`flex ${x.role==="user"?"justify-end":"justify-start"}`,j=`max-w-[85%] rounded-lg px-4 py-3 ${x.role==="user"?"bg-k8s-blue text-white":"bg-k8s-dark text-gray-300"}`;return D!==R.e&&Ue(C,R.e=D),j!==R.t&&Ue(I,R.t=j),R},{e:void 0,t:void 0}),C})()}),l),p(y,T(ee,{get when(){return ii()},get children(){var x=h2(),C=x.firstChild,I=C.firstChild,R=I.firstChild,D=R.firstChild,j=D.nextSibling;return j.nextSibling,x}}),l);var k=e;typeof k=="function"?qt(k,l):e=l,a.addEventListener("submit",_),c.$$input=x=>n(x.target.value);var A=t;return typeof A=="function"?qt(A,c):t=c,p(w,()=>Ul().find(x=>x.id===jl())?.name||"AI",null),ne(x=>{var C=ii(),I=ii()||!r().trim();return C!==x.e&&(c.disabled=x.e=C),I!==x.t&&(m.disabled=x.t=I),x},{e:void 0,t:void 0}),ne(()=>v.value=jl()),ne(()=>c.value=r()),i})()};lt(["click","input"]);var y2=O('<div class="px-6 py-3 flex items-center gap-3"style="background:rgba(239, 68, 68, 0.1);border-bottom:1px solid rgba(239, 68, 68, 0.2)"><svg class="w-5 h-5 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--error-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div class="flex-1 min-w-0"><span class=font-medium style=color:var(--error-color)>Cluster not connected</span><span class="text-sm ml-2"style=color:var(--text-muted)>â Connect to a Kubernetes cluster to use KubeGraf</span></div><button class="px-3 py-1.5 rounded text-sm font-medium transition-all hover:opacity-80 flex items-center gap-1.5"style="background:rgba(239, 68, 68, 0.2);color:var(--error-color)"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>Retry'),x2=O('<div class="px-4 py-2 flex items-center gap-3"style="background:rgba(6, 182, 212, 0.1);border-bottom:1px solid rgba(6, 182, 212, 0.3);color:var(--accent-primary)"><div class=spinner style=width:16px;height:16px></div><span class="text-sm font-medium">'),w2=O('<div class="card p-4 mb-6 text-left max-w-lg mx-auto"><div class="text-xs font-semibold mb-2 uppercase tracking-wide"style=color:var(--error-color)>Error</div><div class="text-xs font-mono break-all mb-2"style=color:var(--text-secondary)></div><div class="text-sm font-medium mt-3"style=color:var(--text-primary)><div class=mb-2>Check your kubeconfig at:</div><code class="block px-3 py-2 rounded mb-3 text-xs font-mono"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)">~/.kube/config</code><div class=mb-2>Or run this command to verify access:</div><code class="block px-3 py-2 rounded text-xs font-mono"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)">kubectl cluster-info'),S2=O('<div class="absolute inset-0 z-10 flex items-center justify-center p-8"style=background:var(--bg-primary);pointer-events:auto><div class="max-w-2xl w-full text-center"><div class="w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center"style="background:rgba(239, 68, 68, 0.15)"><svg class="w-10 h-10"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--error-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"></path></svg></div><h2 class="text-2xl font-bold mb-2"style=color:var(--text-primary)>Connect to Kubernetes Cluster</h2><p class="text-sm mb-6"style=color:var(--text-muted)>KubeGraf needs an active cluster connection to function</p><div class="flex items-center justify-center gap-3"><button class="px-5 py-2.5 rounded-lg font-medium transition-all hover:opacity-90 flex items-center gap-2"style=background:var(--error-color);color:white><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>Retry Connection</button><a href=https://kubegraf.io/docs target=_blank class="px-5 py-2.5 rounded-lg font-medium transition-all hover:opacity-90 flex items-center gap-2"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg>Documentation'),$2=O("<div class=p-6 style=background:yellow;color:black;font-size:20px;z-index:9999;position:relative>DEBUG: Not rendering because isConnected=<!>, currentView="),C2=O('<div class="flex items-center gap-2 px-3 py-2 rounded-lg text-xs"style=background:var(--bg-secondary);color:var(--text-muted)><span></span><span>'),k2=O('<div class="flex h-screen overflow-hidden"style=background:var(--bg-primary)><div><main class="flex-1 overflow-auto p-6 relative"></main><footer class="px-6 py-2 border-t flex items-center justify-end text-xs"style=background:var(--bg-secondary);border-color:var(--border-color);color:var(--text-muted)><div class="flex items-center gap-4"><span class="flex items-center gap-1"><span></span></span><a href=https://github.com/kubegraf/kubegraf target=_blank class=hover:underline style=color:var(--accent-primary)>GitHub</a></div></footer></div><div class="fixed bottom-4 right-4 z-50 flex flex-col gap-2"></div><div class="fixed bottom-4 z-50"style=left:80px>'),E2=O('<div class=p-6 style=background:red;color:white;font-size:20px;z-index:9999;position:relative>Error: Component not found for view "<!>"'),A2=O("<div class=p-6 style=background:red;color:white;font-size:20px>Error rendering <!>: "),L2=O('<div class="animate-slide-in px-4 py-3 rounded-lg shadow-lg border max-w-sm"><div class="flex items-start gap-2"><span></span><span class=text-sm>');const ps=()=>T(qo,{defaultTab:"marketplace"}),M2=()=>T(qo,{defaultTab:"custom"}),Wl={dashboard:Jn,pods:Nh,deployments:Zh,statefulsets:au,daemonsets:mu,cronjobs:ku,jobs:Iu,services:Ku,ingresses:sf,configmaps:gf,secrets:Sf,certificates:Rf,nodes:qf,resourcemap:fm,security:Um,plugins:b1,cost:H1,drift:Y1,events:o_,logs:__,anomalies:L_,apps:ps,customapps:M2,settings:Cb,deployapp:ps,releases:ps,rollouts:ps,gitops:ps,terminal:Jn},D2=()=>{const[e]=Ke(De.getStatus),[t,r]=J(!1);cr(()=>{ys.connect();const d=ys.subscribe(_=>{_.type==="connection"&&r(_.data.connected)});return()=>{d(),ys.disconnect()}});const n=()=>e()?.connected!==!1;return(()=>{var d=k2(),_=d.firstChild,h=_.firstChild,s=h.nextSibling,i=s.firstChild,u=i.firstChild,f=u.firstChild;u.nextSibling;var g=_.nextSibling,v=g.nextSibling;return p(d,T($c,{}),_),p(_,T(Dd,{}),h),p(_,T(ee,{get when(){return!n()},get children(){var b=y2(),S=b.firstChild,y=S.nextSibling,l=y.firstChild;l.nextSibling;var a=y.nextSibling;return a.$$click=()=>location.reload(),b}}),h),p(_,T(ee,{get when(){return Cc()},get children(){var b=x2(),S=b.firstChild,y=S.nextSibling;return p(y,kc),b}}),h),p(h,T(ee,{get when(){return Fe(()=>!n())()&&Gt()!=="settings"},get children(){var b=S2(),S=b.firstChild,y=S.firstChild;y.firstChild;var l=y.nextSibling,a=l.nextSibling,o=a.nextSibling,c=o.firstChild;return c.nextSibling,p(S,T(ee,{get when(){return e()?.error},get children(){var m=w2(),w=m.firstChild,k=w.nextSibling,A=k.nextSibling,x=A.firstChild,C=x.nextSibling,I=C.nextSibling;return I.nextSibling,p(k,()=>e()?.error),m}}),o),c.$$click=()=>location.reload(),b}}),null),p(h,T(ee,{get when(){return n()||Gt()==="settings"||Gt()==="logs"},get children(){return(()=>{const b=Gt();console.log("[App] Current view:",b,"isConnected:",n());const S=Wl[b];if(!S)return console.error("[App] Component not found for view:",b,"Available views:",Object.keys(Wl)),(()=>{var y=E2(),l=y.firstChild,a=l.nextSibling;return a.nextSibling,p(y,b,a),y})();console.log("[App] Rendering view:",b,"Component exists:",!!S);try{return T(ec,{component:S})}catch(y){return console.error("[App] Error rendering component:",y),(()=>{var l=A2(),a=l.firstChild,o=a.nextSibling;return o.nextSibling,p(l,b,o),p(l,()=>String(y),null),l})()}})()}}),null),p(h,T(ee,{get when(){return Fe(()=>!n()&&Gt()!=="settings")()&&Gt()!=="logs"},get children(){var b=$2(),S=b.firstChild,y=S.nextSibling;return y.nextSibling,p(b,()=>String(n()),y),p(b,Gt,null),b}}),null),p(u,()=>e()?.connected?"Connected":"Disconnected",null),p(d,T(ee,{get when(){return so()},get children(){return T(b2,{})}}),g),p(g,T(Ve,{get each(){return sc()},children:b=>(()=>{var S=L2(),y=S.firstChild,l=y.firstChild,a=l.nextSibling;return p(l,(()=>{var o=Fe(()=>b.type==="error");return()=>o()?"â":Fe(()=>b.type==="warning")()?"â ï¸":b.type==="success"?"â":"â¹ï¸"})()),p(a,()=>b.message),ne(o=>{var c=b.type==="error"?"rgba(239, 68, 68, 0.1)":b.type==="warning"?"rgba(245, 158, 11, 0.1)":b.type==="success"?"rgba(34, 197, 94, 0.1)":"rgba(6, 182, 212, 0.1)",m=b.type==="error"?"rgba(239, 68, 68, 0.3)":b.type==="warning"?"rgba(245, 158, 11, 0.3)":b.type==="success"?"rgba(34, 197, 94, 0.3)":"rgba(6, 182, 212, 0.3)",w=b.type==="error"?"var(--error-color)":b.type==="warning"?"var(--warning-color)":b.type==="success"?"var(--success-color)":"var(--accent-primary)";return c!==o.e&&ve(S,"background",o.e=c),m!==o.t&&ve(S,"border-color",o.t=m),w!==o.a&&ve(S,"color",o.a=w),o},{e:void 0,t:void 0,a:void 0}),S})()})),p(v,T(ee,{get when(){return Bt()},get children(){var b=C2(),S=b.firstChild,y=S.nextSibling;return p(y,()=>t()?"Live":"Offline"),ne(()=>Ue(S,`w-2 h-2 rounded-full ${t()?"bg-green-500":"bg-red-500"}`)),b}})),ne(b=>{var S=`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${Bt()?"ml-16":"ml-52"}`,y=`w-2 h-2 rounded-full ${e()?.connected?"bg-green-500":"bg-red-500"}`;return S!==b.e&&Ue(_,b.e=S),y!==b.t&&Ue(f,b.t=y),b},{e:void 0,t:void 0}),d})()};lt(["click"]);const ql=document.getElementById("root");ql&&Wa(()=>T(D2,{}),ql);
