{"version":3,"file":"TrafficMapPage-DR7Ahwmw.js","sources":["../../src/features/kiali/TrafficMap.tsx","../../src/routes/TrafficMapPage.tsx"],"sourcesContent":["// Copyright 2025 KubeGraf Contributors\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n\nimport { Component, createSignal, createResource, createEffect, For, Show } from 'solid-js';\nimport { api } from '../../services/api';\nimport { namespace } from '../../stores/cluster';\nimport * as d3 from 'd3';\n\ninterface ServiceNode extends d3.SimulationNodeDatum {\n  id: string;\n  name: string;\n  namespace: string;\n  type: 'service' | 'pod' | 'deployment';\n  status?: string;\n  endpoints?: number;\n}\n\ninterface TrafficLink extends d3.SimulationLinkDatum<ServiceNode> {\n  source: string | ServiceNode;\n  target: string | ServiceNode;\n  protocol?: string;\n  port?: number;\n}\n\nconst TrafficMap: Component = () => {\n  const [services] = createResource(\n    () => namespace(),\n    async (ns) => {\n      const svcs = await api.getServices(ns === '_all' ? undefined : ns);\n      const pods = await api.getPods(ns === '_all' ? undefined : ns);\n      const deployments = await api.getDeployments(ns === '_all' ? undefined : ns);\n      \n      return { services: svcs || [], pods: pods || [], deployments: deployments || [] };\n    }\n  );\n\n  let svgRef: SVGSVGElement | undefined;\n  let containerRef: HTMLDivElement | undefined;\n  let simulation: d3.Simulation<ServiceNode, TrafficLink> | null = null;\n\n  const setupVisualization = () => {\n    if (!svgRef || !services() || !containerRef) return;\n\n    const data = services();\n    if (!data || data.services.length === 0) return;\n\n    // Clear previous\n    d3.select(svgRef).selectAll('*').remove();\n    if (simulation) simulation.stop();\n\n    const width = containerRef.clientWidth || 1000;\n    const height = 600;\n\n    const svg = d3.select(svgRef)\n      .attr('width', width)\n      .attr('height', height)\n      .attr('viewBox', [0, 0, width, height]);\n\n    const g = svg.append('g');\n\n    // Zoom behavior\n    const zoom = d3.zoom<SVGSVGElement, unknown>()\n      .scaleExtent([0.2, 4])\n      .on('zoom', (event) => {\n        g.attr('transform', event.transform);\n      });\n\n    svg.call(zoom);\n\n    // Build nodes from services\n    const nodes: ServiceNode[] = data.services.map((svc: any) => ({\n      id: `service-${svc.namespace}-${svc.name}`,\n      name: svc.name,\n      namespace: svc.namespace || 'default',\n      type: 'service',\n      status: 'running',\n      endpoints: svc.endpoints?.length || 0,\n      x: Math.random() * width,\n      y: Math.random() * height,\n    }));\n\n    // Add deployment nodes\n    data.deployments.forEach((dep: any) => {\n      nodes.push({\n        id: `deployment-${dep.namespace}-${dep.name}`,\n        name: dep.name,\n        namespace: dep.namespace || 'default',\n        type: 'deployment',\n        status: dep.status || 'unknown',\n        x: Math.random() * width,\n        y: Math.random() * height,\n      });\n    });\n\n    // Build links - connect services to their pods/deployments\n    const links: TrafficLink[] = [];\n    data.services.forEach((svc: any) => {\n      const svcId = `service-${svc.namespace}-${svc.name}`;\n      \n      // Find pods that match service selectors\n      if (svc.selectors) {\n        data.pods.forEach((pod: any) => {\n          if (pod.namespace === svc.namespace) {\n            let matches = true;\n            for (const [key, value] of Object.entries(svc.selectors)) {\n              if (pod.labels?.[key] !== value) {\n                matches = false;\n                break;\n              }\n            }\n            if (matches) {\n              const podId = `pod-${pod.namespace}-${pod.name}`;\n              // Add pod node if not exists\n              if (!nodes.find(n => n.id === podId)) {\n                nodes.push({\n                  id: podId,\n                  name: pod.name,\n                  namespace: pod.namespace,\n                  type: 'pod',\n                  status: pod.status,\n                  x: Math.random() * width,\n                  y: Math.random() * height,\n                });\n              }\n              links.push({\n                source: svcId,\n                target: podId,\n                protocol: 'TCP',\n                port: svc.ports?.[0]?.port || 80,\n              });\n            }\n          }\n        });\n      }\n\n      // Connect to deployments\n      data.deployments.forEach((dep: any) => {\n        if (dep.namespace === svc.namespace && dep.labels) {\n          let matches = true;\n          if (svc.selectors) {\n            for (const [key, value] of Object.entries(svc.selectors)) {\n              if (dep.labels[key] !== value) {\n                matches = false;\n                break;\n              }\n            }\n          }\n          if (matches) {\n            const depId = `deployment-${dep.namespace}-${dep.name}`;\n            links.push({\n              source: svcId,\n              target: depId,\n              protocol: 'TCP',\n            });\n          }\n        }\n      });\n    });\n\n    // Create simulation\n    simulation = d3.forceSimulation<ServiceNode>(nodes)\n      .force('link', d3.forceLink<TrafficLink, ServiceNode>(links).id(d => d.id).distance(100))\n      .force('charge', d3.forceManyBody().strength(-300))\n      .force('center', d3.forceCenter(width / 2, height / 2))\n      .force('collision', d3.forceCollide().radius(40));\n\n    // Draw links\n    const link = g.append('g')\n      .selectAll('line')\n      .data(links)\n      .enter()\n      .append('line')\n      .attr('stroke', '#94a3b8')\n      .attr('stroke-width', 2)\n      .attr('stroke-opacity', 0.6)\n      .attr('marker-end', 'url(#arrowhead)');\n\n    // Add arrow marker\n    svg.append('defs').append('marker')\n      .attr('id', 'arrowhead')\n      .attr('viewBox', '0 -5 10 10')\n      .attr('refX', 25)\n      .attr('refY', 0)\n      .attr('markerWidth', 6)\n      .attr('markerHeight', 6)\n      .attr('orient', 'auto')\n      .append('path')\n      .attr('d', 'M0,-5L10,0L0,5')\n      .attr('fill', '#94a3b8');\n\n    // Draw nodes\n    const node = g.append('g')\n      .selectAll('g')\n      .data(nodes)\n      .enter()\n      .append('g')\n      .call(d3.drag<SVGGElement, ServiceNode>()\n        .on('start', (event, d) => {\n          if (!event.active) simulation?.alphaTarget(0.3).restart();\n          d.fx = d.x;\n          d.fy = d.y;\n        })\n        .on('drag', (event, d) => {\n          d.fx = event.x;\n          d.fy = event.y;\n        })\n        .on('end', (event, d) => {\n          if (!event.active) simulation?.alphaTarget(0);\n          d.fx = undefined;\n          d.fy = undefined;\n        })\n      );\n\n    // Add circles for nodes\n    node.append('circle')\n      .attr('r', (d) => d.type === 'service' ? 20 : d.type === 'deployment' ? 15 : 12)\n      .attr('fill', (d) => {\n        if (d.type === 'service') return '#06b6d4';\n        if (d.type === 'deployment') return '#3b82f6';\n        return '#ec4899';\n      })\n      .attr('stroke', '#fff')\n      .attr('stroke-width', 2);\n\n    // Add labels\n    node.append('text')\n      .text(d => d.name)\n      .attr('dx', (d) => d.type === 'service' ? 25 : 20)\n      .attr('dy', 5)\n      .attr('font-size', '12px')\n      .attr('fill', 'var(--text-primary)')\n      .style('pointer-events', 'none');\n\n    // Update positions on simulation tick\n    simulation.on('tick', () => {\n      link\n        .attr('x1', (d: any) => d.source.x)\n        .attr('y1', (d: any) => d.source.y)\n        .attr('x2', (d: any) => d.target.x)\n        .attr('y2', (d: any) => d.target.y);\n\n      node.attr('transform', d => `translate(${d.x},${d.y})`);\n    });\n  };\n\n  // Setup visualization when data is ready\n  createEffect(() => {\n    if (services() && !services.loading) {\n      setTimeout(() => setupVisualization(), 100);\n    }\n  });\n\n  return (\n    <div class=\"space-y-4\">\n      <div class=\"flex items-center justify-between\">\n        <div>\n          <h2 class=\"text-xl font-bold\" style={{ color: 'var(--text-primary)' }}>Traffic Map</h2>\n          <p class=\"text-sm\" style={{ color: 'var(--text-secondary)' }}>\n            Service mesh traffic visualization • Services → Pods → Deployments\n          </p>\n        </div>\n        <button\n          onClick={() => setupVisualization()}\n          class=\"px-3 py-2 rounded-lg text-sm hover:bg-[var(--bg-tertiary)]\"\n          style={{ background: 'var(--bg-secondary)', color: 'var(--text-primary)' }}\n        >\n          Reset Layout\n        </button>\n      </div>\n\n      <Show when={services.loading}>\n        <div class=\"flex items-center justify-center h-64\">\n          <div class=\"text-center\">\n            <div class=\"inline-block w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\" />\n            <p style={{ color: 'var(--text-muted)' }}>Loading traffic data...</p>\n          </div>\n        </div>\n      </Show>\n\n      <Show when={!services.loading && services()}>\n        <div\n          ref={containerRef}\n          class=\"rounded-lg border overflow-hidden\"\n          style={{\n            background: 'var(--bg-card)',\n            borderColor: 'var(--border-color)',\n            minHeight: '600px',\n          }}\n        >\n          <svg ref={svgRef} class=\"w-full h-full\" />\n        </div>\n\n        {/* Legend */}\n        <div class=\"flex items-center gap-6 p-4 rounded-lg\" style={{ background: 'var(--bg-secondary)' }}>\n          <div class=\"flex items-center gap-2\">\n            <div class=\"w-4 h-4 rounded-full\" style={{ background: '#06b6d4' }} />\n            <span class=\"text-sm\" style={{ color: 'var(--text-secondary)' }}>Services</span>\n          </div>\n          <div class=\"flex items-center gap-2\">\n            <div class=\"w-4 h-4 rounded-full\" style={{ background: '#3b82f6' }} />\n            <span class=\"text-sm\" style={{ color: 'var(--text-secondary)' }}>Deployments</span>\n          </div>\n          <div class=\"flex items-center gap-2\">\n            <div class=\"w-4 h-4 rounded-full\" style={{ background: '#ec4899' }} />\n            <span class=\"text-sm\" style={{ color: 'var(--text-secondary)' }}>Pods</span>\n          </div>\n          <div class=\"flex items-center gap-2\">\n            <svg class=\"w-4 h-4\" style={{ color: '#94a3b8' }}>\n              <line x1=\"0\" y1=\"0\" x2=\"20\" y2=\"0\" stroke=\"currentColor\" stroke-width=\"2\" />\n            </svg>\n            <span class=\"text-sm\" style={{ color: 'var(--text-secondary)' }}>Traffic Flow</span>\n          </div>\n        </div>\n      </Show>\n\n      <Show when={!services.loading && services() && services()!.services.length === 0}>\n        <div class=\"flex items-center justify-center h-64\">\n          <p style={{ color: 'var(--text-muted)' }}>No services found in this namespace</p>\n        </div>\n      </Show>\n    </div>\n  );\n};\n\nexport default TrafficMap;\n\n","import { Component } from 'solid-js';\nimport TrafficMap from '../features/kiali/TrafficMap';\n\nconst TrafficMapPage: Component = () => {\n  return (\n    <div class=\"h-full flex flex-col\">\n      {/* Header */}\n      <div class=\"flex items-center justify-between mb-4\">\n        <div>\n          <h1 class=\"text-2xl font-bold\" style={{ color: 'var(--text-primary)' }}>Service Mesh Traffic Map</h1>\n          <p style={{ color: 'var(--text-secondary)' }}>Live traffic visualization powered by Kiali • Real-time metrics from Istio service mesh</p>\n        </div>\n      </div>\n\n      {/* Kiali Traffic Map - Full screen */}\n      <div class=\"flex-1\">\n        <TrafficMap />\n      </div>\n    </div>\n  );\n};\n\nexport default TrafficMapPage;\n"],"names":["TrafficMap","services","createResource","namespace","ns","svcs","api","getServices","undefined","pods","getPods","deployments","getDeployments","svgRef","containerRef","simulation","setupVisualization","data","length","d3","selectAll","remove","stop","width","clientWidth","height","svg","select","attr","g","append","zoom","scaleExtent","on","event","transform","call","nodes","map","svc","id","name","type","status","endpoints","x","Math","random","y","forEach","dep","push","links","svcId","selectors","pod","matches","key","value","Object","entries","labels","podId","find","n","source","target","protocol","port","ports","depId","force","d","distance","strength","forceCollide","radius","link","enter","node","drag","active","alphaTarget","restart","fx","fy","text","style","createEffect","loading","setTimeout","_el$","_tmpl$5","_el$2","firstChild","_el$3","_el$4","nextSibling","_el$6","$$click","_$insert","_$createComponent","Show","when","children","_el$7","_tmpl$","_el$8","_el$9","_$memo","_el$1","_tmpl$2","_el$10","_ref$","_$use","_ref$2","_el$11","_tmpl$3","_el$12","_el$13","_el$15","_el$16","_el$18","_el$19","_el$21","_el$22","_el$24","_tmpl$4","_$delegateEvents","TrafficMapPage"],"mappings":"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"}