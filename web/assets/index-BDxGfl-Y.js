(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))i(h);new MutationObserver(h=>{for(const _ of h)if(_.type==="childList")for(const f of _.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function r(h){const _={};return h.integrity&&(_.integrity=h.integrity),h.referrerPolicy&&(_.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?_.credentials="include":h.crossOrigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function i(h){if(h.ep)return;h.ep=!0;const _=r(h);fetch(h.href,_)}})();const Ra=!1,Da=(e,t)=>e===t,Qi=Symbol("solid-proxy"),Ta=typeof Proxy=="function",Pa=Symbol("solid-track"),oi={equals:Da};let so=ao;const Mr=1,ai=2,io={owned:null,cleanups:null,context:null,owner:null},Fi={};var mt=null;let ji=null,Ia=null,vt=null,Nt=null,Cr=null,$i=0;function xs(e,t){const r=vt,i=mt,h=e.length===0,_=t===void 0?i:t,f=h?io:{owned:null,cleanups:null,context:_?_.context:null,owner:_},s=h?e:()=>e(()=>qt(()=>ws(f)));mt=f,vt=null;try{return Ir(s,!0)}finally{vt=r,mt=i}}function J(e,t){t=t?Object.assign({},oi,t):oi;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},i=h=>(typeof h=="function"&&(h=h(r.value)),oo(r,h));return[lo.bind(r),i]}function Ba(e,t,r){const i=wi(e,t,!0,Mr);cs(i)}function ie(e,t,r){const i=wi(e,t,!1,Mr);cs(i)}function Tt(e,t,r){so=Va;const i=wi(e,t,!1,Mr);(!r||!r.render)&&(i.user=!0),Cr?Cr.push(i):cs(i)}function Ne(e,t,r){r=r?Object.assign({},oi,r):oi;const i=wi(e,t,!0,0);return i.observers=null,i.observerSlots=null,i.comparator=r.equals||void 0,cs(i),lo.bind(i)}function Oa(e){return e&&typeof e=="object"&&"then"in e}function qe(e,t,r){let i,h,_;typeof t=="function"?(i=e,h=t,_={}):(i=!0,h=e,_=t||{});let f=null,s=Fi,l=!1,u="initialValue"in _,g=typeof i=="function"&&Ne(i);const p=new Set,[b,m]=(_.storage||J)(_.initialValue),[C,y]=J(void 0),[n,d]=J(void 0,{equals:!1}),[a,c]=J(u?"ready":"unresolved");function v(k,O,B,D){return f===k&&(f=null,D!==void 0&&(u=!0),(k===s||O===s)&&_.onHydrated&&queueMicrotask(()=>_.onHydrated(D,{value:O})),s=Fi,x(O,B)),O}function x(k,O){Ir(()=>{O===void 0&&m(()=>k),c(O!==void 0?"errored":u?"ready":"unresolved"),y(O);for(const B of p.keys())B.decrement();p.clear()},!1)}function S(){const k=Fa,O=b(),B=C();if(B!==void 0&&!f)throw B;return vt&&vt.user,O}function E(k=!0){if(k!==!1&&l)return;l=!1;const O=g?g():i;if(O==null||O===!1){v(f,qt(b));return}let B;const D=s!==Fi?s:qt(()=>{try{return h(O,{value:b(),refetching:k})}catch(I){B=I}});if(B!==void 0){v(f,void 0,Qs(B),O);return}else if(!Oa(D))return v(f,D,void 0,O),D;return f=D,"v"in D?(D.s===1?v(f,D.v,void 0,O):v(f,void 0,Qs(D.v),O),D):(l=!0,queueMicrotask(()=>l=!1),Ir(()=>{c(u?"refreshing":"pending"),d()},!1),D.then(I=>v(D,I,void 0,O),I=>v(D,void 0,Qs(I),O)))}Object.defineProperties(S,{state:{get:()=>a()},error:{get:()=>C()},loading:{get(){const k=a();return k==="pending"||k==="refreshing"}},latest:{get(){if(!u)return S();const k=C();if(k&&!f)throw k;return b()}}});let $=mt;return g?Ba(()=>($=mt,E(!1))):E(!1),[S,{refetch:k=>no($,()=>E(k)),mutate:m}]}function qt(e){if(vt===null)return e();const t=vt;vt=null;try{return e()}finally{vt=t}}function Na(e,t,r){const i=Array.isArray(e);let h;return _=>{let f;if(i){f=Array(e.length);for(let l=0;l<e.length;l++)f[l]=e[l]()}else f=e();const s=qt(()=>t(f,h,_));return h=f,s}}function Qt(e){Tt(()=>qt(e))}function nr(e){return mt===null||(mt.cleanups===null?mt.cleanups=[e]:mt.cleanups.push(e)),e}function Ha(){return mt}function no(e,t){const r=mt,i=vt;mt=e,vt=null;try{return Ir(t,!0)}catch(h){pn(h)}finally{mt=r,vt=i}}const[g$,p$]=J(!1);function za(e){const t=Ne(e),r=Ne(()=>en(t()));return r.toArray=()=>{const i=r();return Array.isArray(i)?i:i!=null?[i]:[]},r}let Fa;function lo(){if(this.sources&&this.state)if(this.state===Mr)cs(this);else{const e=Nt;Nt=null,Ir(()=>di(this),!1),Nt=e}if(vt){const e=this.observers?this.observers.length:0;vt.sources?(vt.sources.push(this),vt.sourceSlots.push(e)):(vt.sources=[this],vt.sourceSlots=[e]),this.observers?(this.observers.push(vt),this.observerSlots.push(vt.sources.length-1)):(this.observers=[vt],this.observerSlots=[vt.sources.length-1])}return this.value}function oo(e,t,r){let i=e.value;return(!e.comparator||!e.comparator(i,t))&&(e.value=t,e.observers&&e.observers.length&&Ir(()=>{for(let h=0;h<e.observers.length;h+=1){const _=e.observers[h],f=ji&&ji.running;f&&ji.disposed.has(_),(f?!_.tState:!_.state)&&(_.pure?Nt.push(_):Cr.push(_),_.observers&&co(_)),f||(_.state=Mr)}if(Nt.length>1e6)throw Nt=[],new Error},!1)),t}function cs(e){if(!e.fn)return;ws(e);const t=$i;ja(e,e.value,t)}function ja(e,t,r){let i;const h=mt,_=vt;vt=mt=e;try{i=e.fn(t)}catch(f){return e.pure&&(e.state=Mr,e.owned&&e.owned.forEach(ws),e.owned=null),e.updatedAt=r+1,pn(f)}finally{vt=_,mt=h}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?oo(e,i):e.value=i,e.updatedAt=r)}function wi(e,t,r,i=Mr,h){const _={fn:e,state:i,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:mt,context:mt?mt.context:null,pure:r};return mt===null||mt!==io&&(mt.owned?mt.owned.push(_):mt.owned=[_]),_}function ci(e){if(e.state===0)return;if(e.state===ai)return di(e);if(e.suspense&&qt(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<$i);)e.state&&t.push(e);for(let r=t.length-1;r>=0;r--)if(e=t[r],e.state===Mr)cs(e);else if(e.state===ai){const i=Nt;Nt=null,Ir(()=>di(e,t[0]),!1),Nt=i}}function Ir(e,t){if(Nt)return e();let r=!1;t||(Nt=[]),Cr?r=!0:Cr=[],$i++;try{const i=e();return Ua(r),i}catch(i){r||(Cr=null),Nt=null,pn(i)}}function Ua(e){if(Nt&&(ao(Nt),Nt=null),e)return;const t=Cr;Cr=null,t.length&&Ir(()=>so(t),!1)}function ao(e){for(let t=0;t<e.length;t++)ci(e[t])}function Va(e){let t,r=0;for(t=0;t<e.length;t++){const i=e[t];i.user?e[r++]=i:ci(i)}for(t=0;t<r;t++)ci(e[t])}function di(e,t){e.state=0;for(let r=0;r<e.sources.length;r+=1){const i=e.sources[r];if(i.sources){const h=i.state;h===Mr?i!==t&&(!i.updatedAt||i.updatedAt<$i)&&ci(i):h===ai&&di(i,t)}}}function co(e){for(let t=0;t<e.observers.length;t+=1){const r=e.observers[t];r.state||(r.state=ai,r.pure?Nt.push(r):Cr.push(r),r.observers&&co(r))}}function ws(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),i=e.sourceSlots.pop(),h=r.observers;if(h&&h.length){const _=h.pop(),f=r.observerSlots.pop();i<h.length&&(_.sourceSlots[f]=i,h[i]=_,r.observerSlots[i]=f)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)ws(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)ws(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function Qs(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function pn(e,t=mt){throw Qs(e)}function en(e){if(typeof e=="function"&&!e.length)return en(e());if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++){const i=en(e[r]);Array.isArray(i)?t.push.apply(t,i):t.push(i)}return t}return e}const Wa=Symbol("fallback");function Fn(e){for(let t=0;t<e.length;t++)e[t]()}function qa(e,t,r={}){let i=[],h=[],_=[],f=0,s=t.length>1?[]:null;return nr(()=>Fn(_)),()=>{let l=e()||[],u=l.length,g,p;return l[Pa],qt(()=>{let m,C,y,n,d,a,c,v,x;if(u===0)f!==0&&(Fn(_),_=[],i=[],h=[],f=0,s&&(s=[])),r.fallback&&(i=[Wa],h[0]=xs(S=>(_[0]=S,r.fallback())),f=1);else if(f===0){for(h=new Array(u),p=0;p<u;p++)i[p]=l[p],h[p]=xs(b);f=u}else{for(y=new Array(u),n=new Array(u),s&&(d=new Array(u)),a=0,c=Math.min(f,u);a<c&&i[a]===l[a];a++);for(c=f-1,v=u-1;c>=a&&v>=a&&i[c]===l[v];c--,v--)y[v]=h[c],n[v]=_[c],s&&(d[v]=s[c]);for(m=new Map,C=new Array(v+1),p=v;p>=a;p--)x=l[p],g=m.get(x),C[p]=g===void 0?-1:g,m.set(x,p);for(g=a;g<=c;g++)x=i[g],p=m.get(x),p!==void 0&&p!==-1?(y[p]=h[g],n[p]=_[g],s&&(d[p]=s[g]),p=C[p],m.set(x,p)):_[g]();for(p=a;p<u;p++)p in y?(h[p]=y[p],_[p]=n[p],s&&(s[p]=d[p],s[p](p))):h[p]=xs(b);h=h.slice(0,f=u),i=l.slice(0)}return h});function b(m){if(_[p]=m,s){const[C,y]=J(p);return s[p]=y,t(l[p],C)}return t(l[p])}}}function L(e,t){return qt(()=>e(t||{}))}function Fs(){return!0}const jn={get(e,t,r){return t===Qi?r:e.get(t)},has(e,t){return t===Qi?!0:e.has(t)},set:Fs,deleteProperty:Fs,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:Fs,deleteProperty:Fs}},ownKeys(e){return e.keys()}};function Ka(e,...t){const r=t.length;if(Ta&&Qi in e){const h=r>1?t.flat():t[0],_=t.map(f=>new Proxy({get(s){return f.includes(s)?e[s]:void 0},has(s){return f.includes(s)&&s in e},keys(){return f.filter(s=>s in e)}},jn));return _.push(new Proxy({get(f){return h.includes(f)?void 0:e[f]},has(f){return h.includes(f)?!1:f in e},keys(){return Object.keys(e).filter(f=>!h.includes(f))}},jn)),_}const i=[];for(let h=0;h<=r;h++)i[h]={};for(const h of Object.getOwnPropertyNames(e)){let _=r;for(let l=0;l<t.length;l++)if(t[l].includes(h)){_=l;break}const f=Object.getOwnPropertyDescriptor(e,h);!f.get&&!f.set&&f.enumerable&&f.writable&&f.configurable?i[_][h]=f.value:Object.defineProperty(i[_],h,f)}return i}const ho=e=>`Stale read from <${e}>.`;function He(e){const t="fallback"in e&&{fallback:()=>e.fallback};return Ne(qa(()=>e.each,e.children,t||void 0))}function G(e){const t=e.keyed,r=Ne(()=>e.when,void 0,void 0),i=t?r:Ne(r,void 0,{equals:(h,_)=>!h==!_});return Ne(()=>{const h=i();if(h){const _=e.children;return typeof _=="function"&&_.length>0?qt(()=>_(t?h:()=>{if(!qt(i))throw ho("Show");return r()})):_}return e.fallback},void 0,void 0)}function hi(e){const t=za(()=>e.children),r=Ne(()=>{const i=t(),h=Array.isArray(i)?i:[i];let _=()=>{};for(let f=0;f<h.length;f++){const s=f,l=h[f],u=_,g=Ne(()=>u()?void 0:l.when,void 0,void 0),p=l.keyed?g:Ne(g,void 0,{equals:(b,m)=>!b==!m});_=()=>u()||(p()?[s,g,l]:void 0)}return _});return Ne(()=>{const i=r()();if(!i)return e.fallback;const[h,_,f]=i,s=f.children;return typeof s=="function"&&s.length>0?qt(()=>s(f.keyed?_():()=>{if(qt(r)()?.[0]!==h)throw ho("Match");return _()})):s},void 0,void 0)}function ir(e){return e}const Ya=["allowfullscreen","async","alpha","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","adauctionheaders","browsingtopics","credentialless","defaultchecked","defaultmuted","defaultselected","defer","disablepictureinpicture","disableremoteplayback","preservespitch","shadowrootclonable","shadowrootcustomelementregistry","shadowrootdelegatesfocus","shadowrootserializable","sharedstoragewritable"],Ga=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline","adAuctionHeaders","allowFullscreen","browsingTopics","defaultChecked","defaultMuted","defaultSelected","disablePictureInPicture","disableRemotePlayback","preservesPitch","shadowRootClonable","shadowRootCustomElementRegistry","shadowRootDelegatesFocus","shadowRootSerializable","sharedStorageWritable",...Ya]),Ja=new Set(["innerHTML","textContent","innerText","children"]),Xa=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Za=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1},adauctionheaders:{$:"adAuctionHeaders",IFRAME:1},allowfullscreen:{$:"allowFullscreen",IFRAME:1},browsingtopics:{$:"browsingTopics",IMG:1},defaultchecked:{$:"defaultChecked",INPUT:1},defaultmuted:{$:"defaultMuted",AUDIO:1,VIDEO:1},defaultselected:{$:"defaultSelected",OPTION:1},disablepictureinpicture:{$:"disablePictureInPicture",VIDEO:1},disableremoteplayback:{$:"disableRemotePlayback",AUDIO:1,VIDEO:1},preservespitch:{$:"preservesPitch",AUDIO:1,VIDEO:1},shadowrootclonable:{$:"shadowRootClonable",TEMPLATE:1},shadowrootdelegatesfocus:{$:"shadowRootDelegatesFocus",TEMPLATE:1},shadowrootserializable:{$:"shadowRootSerializable",TEMPLATE:1},sharedstoragewritable:{$:"sharedStorageWritable",IFRAME:1,IMG:1}});function Qa(e,t){const r=Za[e];return typeof r=="object"?r[t]?r.$:void 0:r}const ec=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),tc=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),rc={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},Re=e=>Ne(()=>e());function sc(e,t,r){let i=r.length,h=t.length,_=i,f=0,s=0,l=t[h-1].nextSibling,u=null;for(;f<h||s<_;){if(t[f]===r[s]){f++,s++;continue}for(;t[h-1]===r[_-1];)h--,_--;if(h===f){const g=_<i?s?r[s-1].nextSibling:r[_-s]:l;for(;s<_;)e.insertBefore(r[s++],g)}else if(_===s)for(;f<h;)(!u||!u.has(t[f]))&&t[f].remove(),f++;else if(t[f]===r[_-1]&&r[s]===t[h-1]){const g=t[--h].nextSibling;e.insertBefore(r[s++],t[f++].nextSibling),e.insertBefore(r[--_],g),t[h]=r[_]}else{if(!u){u=new Map;let p=s;for(;p<_;)u.set(r[p],p++)}const g=u.get(t[f]);if(g!=null)if(s<g&&g<_){let p=f,b=1,m;for(;++p<h&&p<_&&!((m=u.get(t[p]))==null||m!==g+b);)b++;if(b>g-s){const C=t[f];for(;s<g;)e.insertBefore(r[s++],C)}else e.replaceChild(r[s++],t[f++])}else f++;else t[f++].remove()}}}const Un="_$DX_DELEGATE";function ic(e,t,r,i={}){let h;return xs(_=>{h=_,t===document?e():o(t,e(),t.firstChild?null:void 0,r)},i.owner),()=>{h(),t.textContent=""}}function T(e,t,r,i){let h;const _=()=>{const s=document.createElement("template");return s.innerHTML=e,s.content.firstChild},f=()=>(h||(h=_())).cloneNode(!0);return f.cloneNode=f,f}function et(e,t=window.document){const r=t[Un]||(t[Un]=new Set);for(let i=0,h=e.length;i<h;i++){const _=e[i];r.has(_)||(r.add(_),t.addEventListener(_,dc))}}function Xe(e,t,r){r==null?e.removeAttribute(t):e.setAttribute(t,r)}function nc(e,t,r,i){i==null?e.removeAttributeNS(t,r):e.setAttributeNS(t,r,i)}function lc(e,t,r){r?e.setAttribute(t,""):e.removeAttribute(t)}function ze(e,t){t==null?e.removeAttribute("class"):e.className=t}function kr(e,t,r,i){if(i)Array.isArray(r)?(e[`$$${t}`]=r[0],e[`$$${t}Data`]=r[1]):e[`$$${t}`]=r;else if(Array.isArray(r)){const h=r[0];e.addEventListener(t,r[0]=_=>h.call(e,r[1],_))}else e.addEventListener(t,r,typeof r!="function"&&r)}function uo(e,t,r={}){const i=Object.keys(t||{}),h=Object.keys(r);let _,f;for(_=0,f=h.length;_<f;_++){const s=h[_];!s||s==="undefined"||t[s]||(Vn(e,s,!1),delete r[s])}for(_=0,f=i.length;_<f;_++){const s=i[_],l=!!t[s];!s||s==="undefined"||r[s]===l||!l||(Vn(e,s,!0),r[s]=l)}return r}function vn(e,t,r){if(!t)return r?Xe(e,"style"):t;const i=e.style;if(typeof t=="string")return i.cssText=t;typeof r=="string"&&(i.cssText=r=void 0),r||(r={}),t||(t={});let h,_;for(_ in r)t[_]==null&&i.removeProperty(_),delete r[_];for(_ in t)h=t[_],h!==r[_]&&(i.setProperty(_,h),r[_]=h);return r}function ce(e,t,r){r!=null?e.style.setProperty(t,r):e.style.removeProperty(t)}function oc(e,t={},r,i){const h={};return ie(()=>h.children=Ss(e,t.children,h.children)),ie(()=>typeof t.ref=="function"&&Zt(t.ref,e)),ie(()=>ac(e,t,r,!0,h,!0)),h}function Zt(e,t,r){return qt(()=>e(t,r))}function o(e,t,r,i){if(r!==void 0&&!i&&(i=[]),typeof t!="function")return Ss(e,t,i,r);ie(h=>Ss(e,t(),h,r),i)}function ac(e,t,r,i,h={},_=!1){t||(t={});for(const f in h)if(!(f in t)){if(f==="children")continue;h[f]=Wn(e,f,null,h[f],r,_,t)}for(const f in t){if(f==="children")continue;const s=t[f];h[f]=Wn(e,f,s,h[f],r,_,t)}}function cc(e){return e.toLowerCase().replace(/-([a-z])/g,(t,r)=>r.toUpperCase())}function Vn(e,t,r){const i=t.trim().split(/\s+/);for(let h=0,_=i.length;h<_;h++)e.classList.toggle(i[h],r)}function Wn(e,t,r,i,h,_,f){let s,l,u,g,p;if(t==="style")return vn(e,r,i);if(t==="classList")return uo(e,r,i);if(r===i)return i;if(t==="ref")_||r(e);else if(t.slice(0,3)==="on:"){const b=t.slice(3);i&&e.removeEventListener(b,i,typeof i!="function"&&i),r&&e.addEventListener(b,r,typeof r!="function"&&r)}else if(t.slice(0,10)==="oncapture:"){const b=t.slice(10);i&&e.removeEventListener(b,i,!0),r&&e.addEventListener(b,r,!0)}else if(t.slice(0,2)==="on"){const b=t.slice(2).toLowerCase(),m=ec.has(b);if(!m&&i){const C=Array.isArray(i)?i[0]:i;e.removeEventListener(b,C)}(m||r)&&(kr(e,b,r,m),m&&et([b]))}else if(t.slice(0,5)==="attr:")Xe(e,t.slice(5),r);else if(t.slice(0,5)==="bool:")lc(e,t.slice(5),r);else if((p=t.slice(0,5)==="prop:")||(u=Ja.has(t))||!h&&((g=Qa(t,e.tagName))||(l=Ga.has(t)))||(s=e.nodeName.includes("-")||"is"in f))p&&(t=t.slice(5),l=!0),t==="class"||t==="className"?ze(e,r):s&&!l&&!u?e[cc(t)]=r:e[g||t]=r;else{const b=h&&t.indexOf(":")>-1&&rc[t.split(":")[0]];b?nc(e,b,t,r):Xe(e,Xa[t]||t,r)}return r}function dc(e){let t=e.target;const r=`$$${e.type}`,i=e.target,h=e.currentTarget,_=l=>Object.defineProperty(e,"target",{configurable:!0,value:l}),f=()=>{const l=t[r];if(l&&!t.disabled){const u=t[`${r}Data`];if(u!==void 0?l.call(t,u,e):l.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&_(t.host),!0},s=()=>{for(;f()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const l=e.composedPath();_(l[0]);for(let u=0;u<l.length-2&&(t=l[u],!!f());u++){if(t._$host){t=t._$host,s();break}if(t.parentNode===h)break}}else s();_(i)}function Ss(e,t,r,i,h){for(;typeof r=="function";)r=r();if(t===r)return r;const _=typeof t,f=i!==void 0;if(e=f&&r[0]&&r[0].parentNode||e,_==="string"||_==="number"){if(_==="number"&&(t=t.toString(),t===r))return r;if(f){let s=r[0];s&&s.nodeType===3?s.data!==t&&(s.data=t):s=document.createTextNode(t),r=ts(e,r,i,s)}else r!==""&&typeof r=="string"?r=e.firstChild.data=t:r=e.textContent=t}else if(t==null||_==="boolean")r=ts(e,r,i);else{if(_==="function")return ie(()=>{let s=t();for(;typeof s=="function";)s=s();r=Ss(e,s,r,i)}),()=>r;if(Array.isArray(t)){const s=[],l=r&&Array.isArray(r);if(tn(s,t,r,h))return ie(()=>r=Ss(e,s,r,i,!0)),()=>r;if(s.length===0){if(r=ts(e,r,i),f)return r}else l?r.length===0?qn(e,s,i):sc(e,r,s):(r&&ts(e),qn(e,s));r=s}else if(t.nodeType){if(Array.isArray(r)){if(f)return r=ts(e,r,i,t);ts(e,r,null,t)}else r==null||r===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);r=t}}return r}function tn(e,t,r,i){let h=!1;for(let _=0,f=t.length;_<f;_++){let s=t[_],l=r&&r[e.length],u;if(!(s==null||s===!0||s===!1))if((u=typeof s)=="object"&&s.nodeType)e.push(s);else if(Array.isArray(s))h=tn(e,s,l)||h;else if(u==="function")if(i){for(;typeof s=="function";)s=s();h=tn(e,Array.isArray(s)?s:[s],Array.isArray(l)?l:[l])||h}else e.push(s),h=!0;else{const g=String(s);l&&l.nodeType===3&&l.data===g?e.push(l):e.push(document.createTextNode(g))}}return h}function qn(e,t,r=null){for(let i=0,h=t.length;i<h;i++)e.insertBefore(t[i],r)}function ts(e,t,r,i){if(r===void 0)return e.textContent="";const h=i||document.createTextNode("");if(t.length){let _=!1;for(let f=t.length-1;f>=0;f--){const s=t[f];if(h!==s){const l=s.parentNode===e;!_&&!f?l?e.replaceChild(h,s):e.insertBefore(h,r):l&&s.remove()}else _=!0}}else e.insertBefore(h,r);return[h]}const hc="http://www.w3.org/2000/svg";function fo(e,t=!1,r=void 0){return t?document.createElementNS(hc,e):document.createElement(e,{is:r})}function Si(e){const{useShadow:t}=e,r=document.createTextNode(""),i=()=>e.mount||document.body,h=Ha();let _;return Tt(()=>{_||(_=no(h,()=>Ne(()=>e.children)));const f=i();if(f instanceof HTMLHeadElement){const[s,l]=J(!1),u=()=>l(!0);xs(g=>o(f,()=>s()?g():_(),null)),nr(u)}else{const s=fo(e.isSVG?"g":"div",e.isSVG),l=t&&s.attachShadow?s.attachShadow({mode:"open"}):s;Object.defineProperty(s,"_$host",{get(){return r.parentNode},configurable:!0}),o(l,_),f.appendChild(s),e.ref&&e.ref(s),nr(()=>f.removeChild(s))}},void 0,{render:!0}),r}function uc(e,t){const r=Ne(e);return Ne(()=>{const i=r();switch(typeof i){case"function":return qt(()=>i(t));case"string":const h=tc.has(i),_=fo(i,h,qt(()=>t.is));return oc(_,t,h),_}})}function fc(e){const[,t]=Ka(e,["component"]);return uc(()=>e.component,t)}const[wr,At]=J("dashboard"),[It,gc]=J(!1),[go,po]=J(!1),[v$,pc]=J(null),[m$,_$]=J(!1),[vo,vc]=J(""),[mc,Kn]=J([]);function _c(e){try{if(localStorage.getItem("kubegraf-sound")!=="true")return;const r=new(window.AudioContext||window.webkitAudioContext),h={success:800,error:300,warning:500,info:600}[e]||600,_=r.createOscillator(),f=r.createGain();_.connect(f),f.connect(r.destination),_.frequency.value=h,_.type="sine",f.gain.setValueAtTime(.3,r.currentTime),f.gain.exponentialRampToValueAtTime(.01,r.currentTime+.3),_.start(r.currentTime),_.stop(r.currentTime+.3)}catch(t){console.debug("Could not play notification sound:",t)}}function Ve(e,t="info"){const r={id:crypto.randomUUID(),type:t,message:e,timestamp:new Date};Kn(i=>[r,...i].slice(0,10)),_c(t),setTimeout(()=>{Kn(i=>i.filter(h=>h.id!==r.id))},5e3)}function bc(){gc(!It())}function yc(){po(!go())}var xc=T('<div class="modal-overlay animate-fade-in"><div><div class="flex items-center justify-between p-4 border-b"style=border-color:var(--border-color)><h2 class="text-lg font-semibold"style=color:var(--text-primary)></h2><button class="p-1 rounded-lg transition-colors hover:bg-[var(--bg-tertiary)]"style=color:var(--text-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12"></path></svg></button></div><div>');const it=e=>{Tt(()=>{if(e.isOpen){const r=i=>{const h=i.target;h.tagName==="INPUT"||h.tagName==="TEXTAREA"||h.closest(".xterm")||h.closest("[data-terminal]")||i.key==="Escape"&&e.onClose()};document.addEventListener("keydown",r),document.body.style.overflow="hidden",nr(()=>{document.removeEventListener("keydown",r),document.body.style.overflow=""})}});const t={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-[90vw] w-full"};return L(G,{get when(){return e.isOpen},get children(){return L(Si,{get children(){var r=xc(),i=r.firstChild,h=i.firstChild,_=h.firstChild,f=_.nextSibling,s=h.nextSibling;return kr(r,"click",e.onClose,!0),i.$$click=l=>l.stopPropagation(),o(_,()=>e.title),kr(f,"click",e.onClose,!0),o(s,()=>e.children),ie(l=>{var u=`modal-content ${t[e.size||"lg"]} animate-slide-up`,g=`p-4 overflow-auto ${e.size==="full"?"max-h-[85vh]":"max-h-[70vh]"}`;return u!==l.e&&ze(i,l.e=u),g!==l.t&&ze(s,l.t=g),l},{e:void 0,t:void 0}),r}})}})};et(["click"]);var mo={exports:{}};(function(e,t){(function(r,i){e.exports=i()})(self,()=>(()=>{var r={4567:function(f,s,l){var u=this&&this.__decorate||function(c,v,x,S){var E,$=arguments.length,k=$<3?v:S===null?S=Object.getOwnPropertyDescriptor(v,x):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(c,v,x,S);else for(var O=c.length-1;O>=0;O--)(E=c[O])&&(k=($<3?E(k):$>3?E(v,x,k):E(v,x))||k);return $>3&&k&&Object.defineProperty(v,x,k),k},g=this&&this.__param||function(c,v){return function(x,S){v(x,S,c)}};Object.defineProperty(s,"__esModule",{value:!0}),s.AccessibilityManager=void 0;const p=l(9042),b=l(6114),m=l(9924),C=l(844),y=l(5596),n=l(4725),d=l(3656);let a=s.AccessibilityManager=class extends C.Disposable{constructor(c,v){super(),this._terminal=c,this._renderService=v,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let x=0;x<this._terminal.rows;x++)this._rowElements[x]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[x]);if(this._topBoundaryFocusListener=x=>this._handleBoundaryFocus(x,0),this._bottomBoundaryFocusListener=x=>this._handleBoundaryFocus(x,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new m.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(x=>this._handleResize(x.rows))),this.register(this._terminal.onRender(x=>this._refreshRows(x.start,x.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(x=>this._handleChar(x))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(x=>this._handleTab(x))),this.register(this._terminal.onKey(x=>this._handleKey(x.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new y.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,d.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,C.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(c){for(let v=0;v<c;v++)this._handleChar(" ")}_handleChar(c){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==c&&(this._charsToAnnounce+=c):this._charsToAnnounce+=c,c===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=p.tooMuchOutput)),b.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,b.isMac&&this._liveRegion.remove()}_handleKey(c){this._clearLiveRegion(),/\p{Control}/u.test(c)||this._charsToConsume.push(c)}_refreshRows(c,v){this._liveRegionDebouncer.refresh(c,v,this._terminal.rows)}_renderRows(c,v){const x=this._terminal.buffer,S=x.lines.length.toString();for(let E=c;E<=v;E++){const $=x.translateBufferLineToString(x.ydisp+E,!0),k=(x.ydisp+E+1).toString(),O=this._rowElements[E];O&&($.length===0?O.innerText="Â ":O.textContent=$,O.setAttribute("aria-posinset",k),O.setAttribute("aria-setsize",S))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(c,v){const x=c.target,S=this._rowElements[v===0?1:this._rowElements.length-2];if(x.getAttribute("aria-posinset")===(v===0?"1":`${this._terminal.buffer.lines.length}`)||c.relatedTarget!==S)return;let E,$;if(v===0?(E=x,$=this._rowElements.pop(),this._rowContainer.removeChild($)):(E=this._rowElements.shift(),$=x,this._rowContainer.removeChild(E)),E.removeEventListener("focus",this._topBoundaryFocusListener),$.removeEventListener("focus",this._bottomBoundaryFocusListener),v===0){const k=this._createAccessibilityTreeNode();this._rowElements.unshift(k),this._rowContainer.insertAdjacentElement("afterbegin",k)}else{const k=this._createAccessibilityTreeNode();this._rowElements.push(k),this._rowContainer.appendChild(k)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(v===0?-1:1),this._rowElements[v===0?1:this._rowElements.length-2].focus(),c.preventDefault(),c.stopImmediatePropagation()}_handleResize(c){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let v=this._rowContainer.children.length;v<this._terminal.rows;v++)this._rowElements[v]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[v]);for(;this._rowElements.length>c;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const c=document.createElement("div");return c.setAttribute("role","listitem"),c.tabIndex=-1,this._refreshRowDimensions(c),c}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let c=0;c<this._terminal.rows;c++)this._refreshRowDimensions(this._rowElements[c])}}_refreshRowDimensions(c){c.style.height=`${this._renderService.dimensions.css.cell.height}px`}};s.AccessibilityManager=a=u([g(1,n.IRenderService)],a)},3614:(f,s)=>{function l(b){return b.replace(/\r?\n/g,"\r")}function u(b,m){return m?"\x1B[200~"+b+"\x1B[201~":b}function g(b,m,C,y){b=u(b=l(b),C.decPrivateModes.bracketedPasteMode&&y.rawOptions.ignoreBracketedPasteMode!==!0),C.triggerDataEvent(b,!0),m.value=""}function p(b,m,C){const y=C.getBoundingClientRect(),n=b.clientX-y.left-10,d=b.clientY-y.top-10;m.style.width="20px",m.style.height="20px",m.style.left=`${n}px`,m.style.top=`${d}px`,m.style.zIndex="1000",m.focus()}Object.defineProperty(s,"__esModule",{value:!0}),s.rightClickHandler=s.moveTextAreaUnderMouseCursor=s.paste=s.handlePasteEvent=s.copyHandler=s.bracketTextForPaste=s.prepareTextForTerminal=void 0,s.prepareTextForTerminal=l,s.bracketTextForPaste=u,s.copyHandler=function(b,m){b.clipboardData&&b.clipboardData.setData("text/plain",m.selectionText),b.preventDefault()},s.handlePasteEvent=function(b,m,C,y){b.stopPropagation(),b.clipboardData&&g(b.clipboardData.getData("text/plain"),m,C,y)},s.paste=g,s.moveTextAreaUnderMouseCursor=p,s.rightClickHandler=function(b,m,C,y,n){p(b,m,C),n&&y.rightClickSelect(b),m.value=y.selectionText,m.select()}},7239:(f,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorContrastCache=void 0;const u=l(1505);s.ColorContrastCache=class{constructor(){this._color=new u.TwoKeyMap,this._css=new u.TwoKeyMap}setCss(g,p,b){this._css.set(g,p,b)}getCss(g,p){return this._css.get(g,p)}setColor(g,p,b){this._color.set(g,p,b)}getColor(g,p){return this._color.get(g,p)}clear(){this._color.clear(),this._css.clear()}}},3656:(f,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(l,u,g,p){l.addEventListener(u,g,p);let b=!1;return{dispose:()=>{b||(b=!0,l.removeEventListener(u,g,p))}}}},6465:function(f,s,l){var u=this&&this.__decorate||function(n,d,a,c){var v,x=arguments.length,S=x<3?d:c===null?c=Object.getOwnPropertyDescriptor(d,a):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(n,d,a,c);else for(var E=n.length-1;E>=0;E--)(v=n[E])&&(S=(x<3?v(S):x>3?v(d,a,S):v(d,a))||S);return x>3&&S&&Object.defineProperty(d,a,S),S},g=this&&this.__param||function(n,d){return function(a,c){d(a,c,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Linkifier2=void 0;const p=l(3656),b=l(8460),m=l(844),C=l(2585);let y=s.Linkifier2=class extends m.Disposable{get currentLink(){return this._currentLink}constructor(n){super(),this._bufferService=n,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new b.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new b.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,m.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,m.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(n){return this._linkProviders.push(n),{dispose:()=>{const d=this._linkProviders.indexOf(n);d!==-1&&this._linkProviders.splice(d,1)}}}attachToDom(n,d,a){this._element=n,this._mouseService=d,this._renderService=a,this.register((0,p.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,p.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,p.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,p.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(n){if(this._lastMouseEvent=n,!this._element||!this._mouseService)return;const d=this._positionFromMouseEvent(n,this._element,this._mouseService);if(!d)return;this._isMouseOut=!1;const a=n.composedPath();for(let c=0;c<a.length;c++){const v=a[c];if(v.classList.contains("xterm"))break;if(v.classList.contains("xterm-hover"))return}this._lastBufferCell&&d.x===this._lastBufferCell.x&&d.y===this._lastBufferCell.y||(this._handleHover(d),this._lastBufferCell=d)}_handleHover(n){if(this._activeLine!==n.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(n,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,n)||(this._clearCurrentLink(),this._askForLink(n,!0))}_askForLink(n,d){var a,c;this._activeProviderReplies&&d||((a=this._activeProviderReplies)===null||a===void 0||a.forEach(x=>{x?.forEach(S=>{S.link.dispose&&S.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=n.y);let v=!1;for(const[x,S]of this._linkProviders.entries())d?!((c=this._activeProviderReplies)===null||c===void 0)&&c.get(x)&&(v=this._checkLinkProviderResult(x,n,v)):S.provideLinks(n.y,E=>{var $,k;if(this._isMouseOut)return;const O=E?.map(B=>({link:B}));($=this._activeProviderReplies)===null||$===void 0||$.set(x,O),v=this._checkLinkProviderResult(x,n,v),((k=this._activeProviderReplies)===null||k===void 0?void 0:k.size)===this._linkProviders.length&&this._removeIntersectingLinks(n.y,this._activeProviderReplies)})}_removeIntersectingLinks(n,d){const a=new Set;for(let c=0;c<d.size;c++){const v=d.get(c);if(v)for(let x=0;x<v.length;x++){const S=v[x],E=S.link.range.start.y<n?0:S.link.range.start.x,$=S.link.range.end.y>n?this._bufferService.cols:S.link.range.end.x;for(let k=E;k<=$;k++){if(a.has(k)){v.splice(x--,1);break}a.add(k)}}}}_checkLinkProviderResult(n,d,a){var c;if(!this._activeProviderReplies)return a;const v=this._activeProviderReplies.get(n);let x=!1;for(let S=0;S<n;S++)this._activeProviderReplies.has(S)&&!this._activeProviderReplies.get(S)||(x=!0);if(!x&&v){const S=v.find(E=>this._linkAtPosition(E.link,d));S&&(a=!0,this._handleNewLink(S))}if(this._activeProviderReplies.size===this._linkProviders.length&&!a)for(let S=0;S<this._activeProviderReplies.size;S++){const E=(c=this._activeProviderReplies.get(S))===null||c===void 0?void 0:c.find($=>this._linkAtPosition($.link,d));if(E){a=!0,this._handleNewLink(E);break}}return a}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(n){if(!this._element||!this._mouseService||!this._currentLink)return;const d=this._positionFromMouseEvent(n,this._element,this._mouseService);d&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,d)&&this._currentLink.link.activate(n,this._currentLink.link.text)}_clearCurrentLink(n,d){this._element&&this._currentLink&&this._lastMouseEvent&&(!n||!d||this._currentLink.link.range.start.y>=n&&this._currentLink.link.range.end.y<=d)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,m.disposeArray)(this._linkCacheDisposables))}_handleNewLink(n){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const d=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);d&&this._linkAtPosition(n.link,d)&&(this._currentLink=n,this._currentLink.state={decorations:{underline:n.link.decorations===void 0||n.link.decorations.underline,pointerCursor:n.link.decorations===void 0||n.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,n.link,this._lastMouseEvent),n.link.decorations={},Object.defineProperties(n.link.decorations,{pointerCursor:{get:()=>{var a,c;return(c=(a=this._currentLink)===null||a===void 0?void 0:a.state)===null||c===void 0?void 0:c.decorations.pointerCursor},set:a=>{var c,v;!((c=this._currentLink)===null||c===void 0)&&c.state&&this._currentLink.state.decorations.pointerCursor!==a&&(this._currentLink.state.decorations.pointerCursor=a,this._currentLink.state.isHovered&&((v=this._element)===null||v===void 0||v.classList.toggle("xterm-cursor-pointer",a)))}},underline:{get:()=>{var a,c;return(c=(a=this._currentLink)===null||a===void 0?void 0:a.state)===null||c===void 0?void 0:c.decorations.underline},set:a=>{var c,v,x;!((c=this._currentLink)===null||c===void 0)&&c.state&&((x=(v=this._currentLink)===null||v===void 0?void 0:v.state)===null||x===void 0?void 0:x.decorations.underline)!==a&&(this._currentLink.state.decorations.underline=a,this._currentLink.state.isHovered&&this._fireUnderlineEvent(n.link,a))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(a=>{if(!this._currentLink)return;const c=a.start===0?0:a.start+1+this._bufferService.buffer.ydisp,v=this._bufferService.buffer.ydisp+1+a.end;if(this._currentLink.link.range.start.y>=c&&this._currentLink.link.range.end.y<=v&&(this._clearCurrentLink(c,v),this._lastMouseEvent&&this._element)){const x=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);x&&this._askForLink(x,!1)}})))}_linkHover(n,d,a){var c;!((c=this._currentLink)===null||c===void 0)&&c.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(d,!0),this._currentLink.state.decorations.pointerCursor&&n.classList.add("xterm-cursor-pointer")),d.hover&&d.hover(a,d.text)}_fireUnderlineEvent(n,d){const a=n.range,c=this._bufferService.buffer.ydisp,v=this._createLinkUnderlineEvent(a.start.x-1,a.start.y-c-1,a.end.x,a.end.y-c-1,void 0);(d?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(v)}_linkLeave(n,d,a){var c;!((c=this._currentLink)===null||c===void 0)&&c.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(d,!1),this._currentLink.state.decorations.pointerCursor&&n.classList.remove("xterm-cursor-pointer")),d.leave&&d.leave(a,d.text)}_linkAtPosition(n,d){const a=n.range.start.y*this._bufferService.cols+n.range.start.x,c=n.range.end.y*this._bufferService.cols+n.range.end.x,v=d.y*this._bufferService.cols+d.x;return a<=v&&v<=c}_positionFromMouseEvent(n,d,a){const c=a.getCoords(n,d,this._bufferService.cols,this._bufferService.rows);if(c)return{x:c[0],y:c[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(n,d,a,c,v){return{x1:n,y1:d,x2:a,y2:c,cols:this._bufferService.cols,fg:v}}};s.Linkifier2=y=u([g(0,C.IBufferService)],y)},9042:(f,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tooMuchOutput=s.promptLabel=void 0,s.promptLabel="Terminal input",s.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(f,s,l){var u=this&&this.__decorate||function(y,n,d,a){var c,v=arguments.length,x=v<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,d):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(y,n,d,a);else for(var S=y.length-1;S>=0;S--)(c=y[S])&&(x=(v<3?c(x):v>3?c(n,d,x):c(n,d))||x);return v>3&&x&&Object.defineProperty(n,d,x),x},g=this&&this.__param||function(y,n){return function(d,a){n(d,a,y)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkProvider=void 0;const p=l(511),b=l(2585);let m=s.OscLinkProvider=class{constructor(y,n,d){this._bufferService=y,this._optionsService=n,this._oscLinkService=d}provideLinks(y,n){var d;const a=this._bufferService.buffer.lines.get(y-1);if(!a)return void n(void 0);const c=[],v=this._optionsService.rawOptions.linkHandler,x=new p.CellData,S=a.getTrimmedLength();let E=-1,$=-1,k=!1;for(let O=0;O<S;O++)if($!==-1||a.hasContent(O)){if(a.loadCell(O,x),x.hasExtendedAttrs()&&x.extended.urlId){if($===-1){$=O,E=x.extended.urlId;continue}k=x.extended.urlId!==E}else $!==-1&&(k=!0);if(k||$!==-1&&O===S-1){const B=(d=this._oscLinkService.getLinkData(E))===null||d===void 0?void 0:d.uri;if(B){const D={start:{x:$+1,y},end:{x:O+(k||O!==S-1?0:1),y}};let I=!1;if(!v?.allowNonHttpProtocols)try{const A=new URL(B);["http:","https:"].includes(A.protocol)||(I=!0)}catch{I=!0}I||c.push({text:B,range:D,activate:(A,P)=>v?v.activate(A,P,D):C(0,P),hover:(A,P)=>{var R;return(R=v?.hover)===null||R===void 0?void 0:R.call(v,A,P,D)},leave:(A,P)=>{var R;return(R=v?.leave)===null||R===void 0?void 0:R.call(v,A,P,D)}})}k=!1,x.hasExtendedAttrs()&&x.extended.urlId?($=O,E=x.extended.urlId):($=-1,E=-1)}}n(c)}};function C(y,n){if(confirm(`Do you want to navigate to ${n}?

WARNING: This link could potentially be dangerous`)){const d=window.open();if(d){try{d.opener=null}catch{}d.location.href=n}else console.warn("Opening link blocked as opener could not be cleared")}}s.OscLinkProvider=m=u([g(0,b.IBufferService),g(1,b.IOptionsService),g(2,b.IOscLinkService)],m)},6193:(f,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderDebouncer=void 0,s.RenderDebouncer=class{constructor(l,u){this._parentWindow=l,this._renderCallback=u,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(l){return this._refreshCallbacks.push(l),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(l,u,g){this._rowCount=g,l=l!==void 0?l:0,u=u!==void 0?u:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,l):l,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,u):u,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const l=Math.max(this._rowStart,0),u=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(l,u),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const l of this._refreshCallbacks)l(0);this._refreshCallbacks=[]}}},5596:(f,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ScreenDprMonitor=void 0;const u=l(844);class g extends u.Disposable{constructor(b){super(),this._parentWindow=b,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,u.toDisposable)(()=>{this.clearListener()}))}setListener(b){this._listener&&this.clearListener(),this._listener=b,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var b;this._outerListener&&((b=this._resolutionMediaMatchList)===null||b===void 0||b.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}s.ScreenDprMonitor=g},3236:(f,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Terminal=void 0;const u=l(3614),g=l(3656),p=l(6465),b=l(9042),m=l(3730),C=l(1680),y=l(3107),n=l(5744),d=l(2950),a=l(1296),c=l(428),v=l(4269),x=l(5114),S=l(8934),E=l(3230),$=l(9312),k=l(4725),O=l(6731),B=l(8055),D=l(8969),I=l(8460),A=l(844),P=l(6114),R=l(8437),N=l(2584),w=l(7399),H=l(5941),z=l(9074),U=l(2585),te=l(5435),F=l(4567),W=typeof window<"u"?window.document:null;class V extends D.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(M={}){super(M),this.browser=P,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new A.MutableDisposable),this._onCursorMove=this.register(new I.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new I.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new I.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new I.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new I.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new I.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new I.EventEmitter),this._onBlur=this.register(new I.EventEmitter),this._onA11yCharEmitter=this.register(new I.EventEmitter),this._onA11yTabEmitter=this.register(new I.EventEmitter),this._onWillOpen=this.register(new I.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(p.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(m.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(z.DecorationService),this._instantiationService.setService(U.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((j,K)=>this.refresh(j,K))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(j=>this._reportWindowsOptions(j))),this.register(this._inputHandler.onColor(j=>this._handleColorEvent(j))),this.register((0,I.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,I.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,I.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,I.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(j=>this._afterResize(j.cols,j.rows))),this.register((0,A.toDisposable)(()=>{var j,K;this._customKeyEventHandler=void 0,(K=(j=this.element)===null||j===void 0?void 0:j.parentNode)===null||K===void 0||K.removeChild(this.element)}))}_handleColorEvent(M){if(this._themeService)for(const j of M){let K,Z="";switch(j.index){case 256:K="foreground",Z="10";break;case 257:K="background",Z="11";break;case 258:K="cursor",Z="12";break;default:K="ansi",Z="4;"+j.index}switch(j.type){case 0:const se=B.color.toColorRGB(K==="ansi"?this._themeService.colors.ansi[j.index]:this._themeService.colors[K]);this.coreService.triggerDataEvent(`${N.C0.ESC}]${Z};${(0,H.toRgbString)(se)}${N.C1_ESCAPED.ST}`);break;case 1:if(K==="ansi")this._themeService.modifyColors(ee=>ee.ansi[j.index]=B.rgba.toColor(...j.color));else{const ee=K;this._themeService.modifyColors(ae=>ae[ee]=B.rgba.toColor(...j.color))}break;case 2:this._themeService.restoreColor(j.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(M){M?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(F.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(M){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(N.C0.ESC+"[I"),this.updateCursorStyle(M),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var M;return(M=this.textarea)===null||M===void 0?void 0:M.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(N.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const M=this.buffer.ybase+this.buffer.y,j=this.buffer.lines.get(M);if(!j)return;const K=Math.min(this.buffer.x,this.cols-1),Z=this._renderService.dimensions.css.cell.height,se=j.getWidth(K),ee=this._renderService.dimensions.css.cell.width*se,ae=this.buffer.y*this._renderService.dimensions.css.cell.height,X=K*this._renderService.dimensions.css.cell.width;this.textarea.style.left=X+"px",this.textarea.style.top=ae+"px",this.textarea.style.width=ee+"px",this.textarea.style.height=Z+"px",this.textarea.style.lineHeight=Z+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,g.addDisposableDomListener)(this.element,"copy",j=>{this.hasSelection()&&(0,u.copyHandler)(j,this._selectionService)}));const M=j=>(0,u.handlePasteEvent)(j,this.textarea,this.coreService,this.optionsService);this.register((0,g.addDisposableDomListener)(this.textarea,"paste",M)),this.register((0,g.addDisposableDomListener)(this.element,"paste",M)),P.isFirefox?this.register((0,g.addDisposableDomListener)(this.element,"mousedown",j=>{j.button===2&&(0,u.rightClickHandler)(j,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,g.addDisposableDomListener)(this.element,"contextmenu",j=>{(0,u.rightClickHandler)(j,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),P.isLinux&&this.register((0,g.addDisposableDomListener)(this.element,"auxclick",j=>{j.button===1&&(0,u.moveTextAreaUnderMouseCursor)(j,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,g.addDisposableDomListener)(this.textarea,"keyup",M=>this._keyUp(M),!0)),this.register((0,g.addDisposableDomListener)(this.textarea,"keydown",M=>this._keyDown(M),!0)),this.register((0,g.addDisposableDomListener)(this.textarea,"keypress",M=>this._keyPress(M),!0)),this.register((0,g.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,g.addDisposableDomListener)(this.textarea,"compositionupdate",M=>this._compositionHelper.compositionupdate(M))),this.register((0,g.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,g.addDisposableDomListener)(this.textarea,"input",M=>this._inputEvent(M),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(M){var j;if(!M)throw new Error("Terminal requires a parent element.");M.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=M.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),M.appendChild(this.element);const K=W.createDocumentFragment();this._viewportElement=W.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),K.appendChild(this._viewportElement),this._viewportScrollArea=W.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=W.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=W.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),K.appendChild(this.screenElement),this.textarea=W.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",b.promptLabel),P.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(x.CoreBrowserService,this.textarea,(j=this._document.defaultView)!==null&&j!==void 0?j:window),this._instantiationService.setService(k.ICoreBrowserService,this._coreBrowserService),this.register((0,g.addDisposableDomListener)(this.textarea,"focus",Z=>this._handleTextAreaFocus(Z))),this.register((0,g.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(c.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(k.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(O.ThemeService),this._instantiationService.setService(k.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(v.CharacterJoinerService),this._instantiationService.setService(k.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(E.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(k.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(Z=>this._onRender.fire(Z))),this.onResize(Z=>this._renderService.resize(Z.cols,Z.rows)),this._compositionView=W.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(d.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(K);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(S.MouseService),this._instantiationService.setService(k.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(C.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(Z=>this.scrollLines(Z.amount,Z.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance($.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(k.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(Z=>this.scrollLines(Z.amount,Z.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(Z=>this._renderService.handleSelectionChanged(Z.start,Z.end,Z.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(Z=>{this.textarea.value=Z,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(Z=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,g.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(y.BufferDecorationRenderer,this.screenElement)),this.register((0,g.addDisposableDomListener)(this.element,"mousedown",Z=>this._selectionService.handleMouseDown(Z))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(F.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",Z=>this._handleScreenReaderModeOptionChange(Z))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(n.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",Z=>{!this._overviewRulerRenderer&&Z&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(n.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(a.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const M=this,j=this.element;function K(ee){const ae=M._mouseService.getMouseReportCoords(ee,M.screenElement);if(!ae)return!1;let X,q;switch(ee.overrideType||ee.type){case"mousemove":q=32,ee.buttons===void 0?(X=3,ee.button!==void 0&&(X=ee.button<3?ee.button:3)):X=1&ee.buttons?0:4&ee.buttons?1:2&ee.buttons?2:3;break;case"mouseup":q=0,X=ee.button<3?ee.button:3;break;case"mousedown":q=1,X=ee.button<3?ee.button:3;break;case"wheel":if(M.viewport.getLinesScrolled(ee)===0)return!1;q=ee.deltaY<0?0:1,X=4;break;default:return!1}return!(q===void 0||X===void 0||X>4)&&M.coreMouseService.triggerMouseEvent({col:ae.col,row:ae.row,x:ae.x,y:ae.y,button:X,action:q,ctrl:ee.ctrlKey,alt:ee.altKey,shift:ee.shiftKey})}const Z={mouseup:null,wheel:null,mousedrag:null,mousemove:null},se={mouseup:ee=>(K(ee),ee.buttons||(this._document.removeEventListener("mouseup",Z.mouseup),Z.mousedrag&&this._document.removeEventListener("mousemove",Z.mousedrag)),this.cancel(ee)),wheel:ee=>(K(ee),this.cancel(ee,!0)),mousedrag:ee=>{ee.buttons&&K(ee)},mousemove:ee=>{ee.buttons||K(ee)}};this.register(this.coreMouseService.onProtocolChange(ee=>{ee?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(ee)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&ee?Z.mousemove||(j.addEventListener("mousemove",se.mousemove),Z.mousemove=se.mousemove):(j.removeEventListener("mousemove",Z.mousemove),Z.mousemove=null),16&ee?Z.wheel||(j.addEventListener("wheel",se.wheel,{passive:!1}),Z.wheel=se.wheel):(j.removeEventListener("wheel",Z.wheel),Z.wheel=null),2&ee?Z.mouseup||(j.addEventListener("mouseup",se.mouseup),Z.mouseup=se.mouseup):(this._document.removeEventListener("mouseup",Z.mouseup),j.removeEventListener("mouseup",Z.mouseup),Z.mouseup=null),4&ee?Z.mousedrag||(Z.mousedrag=se.mousedrag):(this._document.removeEventListener("mousemove",Z.mousedrag),Z.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,g.addDisposableDomListener)(j,"mousedown",ee=>{if(ee.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(ee))return K(ee),Z.mouseup&&this._document.addEventListener("mouseup",Z.mouseup),Z.mousedrag&&this._document.addEventListener("mousemove",Z.mousedrag),this.cancel(ee)})),this.register((0,g.addDisposableDomListener)(j,"wheel",ee=>{if(!Z.wheel){if(!this.buffer.hasScrollback){const ae=this.viewport.getLinesScrolled(ee);if(ae===0)return;const X=N.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(ee.deltaY<0?"A":"B");let q="";for(let ne=0;ne<Math.abs(ae);ne++)q+=X;return this.coreService.triggerDataEvent(q,!0),this.cancel(ee,!0)}return this.viewport.handleWheel(ee)?this.cancel(ee):void 0}},{passive:!1})),this.register((0,g.addDisposableDomListener)(j,"touchstart",ee=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(ee),this.cancel(ee)},{passive:!0})),this.register((0,g.addDisposableDomListener)(j,"touchmove",ee=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(ee)?void 0:this.cancel(ee)},{passive:!1}))}refresh(M,j){var K;(K=this._renderService)===null||K===void 0||K.refreshRows(M,j)}updateCursorStyle(M){var j;!((j=this._selectionService)===null||j===void 0)&&j.shouldColumnSelect(M)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(M,j,K=0){var Z;K===1?(super.scrollLines(M,j,K),this.refresh(0,this.rows-1)):(Z=this.viewport)===null||Z===void 0||Z.scrollLines(M)}paste(M){(0,u.paste)(M,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(M){this._customKeyEventHandler=M}registerLinkProvider(M){return this.linkifier2.registerLinkProvider(M)}registerCharacterJoiner(M){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const j=this._characterJoinerService.register(M);return this.refresh(0,this.rows-1),j}deregisterCharacterJoiner(M){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(M)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(M){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+M)}registerDecoration(M){return this._decorationService.registerDecoration(M)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(M,j,K){this._selectionService.setSelection(M,j,K)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var M;(M=this._selectionService)===null||M===void 0||M.clearSelection()}selectAll(){var M;(M=this._selectionService)===null||M===void 0||M.selectAll()}selectLines(M,j){var K;(K=this._selectionService)===null||K===void 0||K.selectLines(M,j)}_keyDown(M){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(M)===!1)return!1;const j=this.browser.isMac&&this.options.macOptionIsMeta&&M.altKey;if(!j&&!this._compositionHelper.keydown(M))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;j||M.key!=="Dead"&&M.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const K=(0,w.evaluateKeyboardEvent)(M,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(M),K.type===3||K.type===2){const Z=this.rows-1;return this.scrollLines(K.type===2?-Z:Z),this.cancel(M,!0)}return K.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,M)||(K.cancel&&this.cancel(M,!0),!K.key||!!(M.key&&!M.ctrlKey&&!M.altKey&&!M.metaKey&&M.key.length===1&&M.key.charCodeAt(0)>=65&&M.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(K.key!==N.C0.ETX&&K.key!==N.C0.CR||(this.textarea.value=""),this._onKey.fire({key:K.key,domEvent:M}),this._showCursor(),this.coreService.triggerDataEvent(K.key,!0),!this.optionsService.rawOptions.screenReaderMode||M.altKey||M.ctrlKey?this.cancel(M,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(M,j){const K=M.isMac&&!this.options.macOptionIsMeta&&j.altKey&&!j.ctrlKey&&!j.metaKey||M.isWindows&&j.altKey&&j.ctrlKey&&!j.metaKey||M.isWindows&&j.getModifierState("AltGraph");return j.type==="keypress"?K:K&&(!j.keyCode||j.keyCode>47)}_keyUp(M){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(M)===!1||(function(j){return j.keyCode===16||j.keyCode===17||j.keyCode===18}(M)||this.focus(),this.updateCursorStyle(M),this._keyPressHandled=!1)}_keyPress(M){let j;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(M)===!1)return!1;if(this.cancel(M),M.charCode)j=M.charCode;else if(M.which===null||M.which===void 0)j=M.keyCode;else{if(M.which===0||M.charCode===0)return!1;j=M.which}return!(!j||(M.altKey||M.ctrlKey||M.metaKey)&&!this._isThirdLevelShift(this.browser,M)||(j=String.fromCharCode(j),this._onKey.fire({key:j,domEvent:M}),this._showCursor(),this.coreService.triggerDataEvent(j,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(M){if(M.data&&M.inputType==="insertText"&&(!M.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const j=M.data;return this.coreService.triggerDataEvent(j,!0),this.cancel(M),!0}return!1}resize(M,j){M!==this.cols||j!==this.rows?super.resize(M,j):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(M,j){var K,Z;(K=this._charSizeService)===null||K===void 0||K.measure(),(Z=this.viewport)===null||Z===void 0||Z.syncScrollArea(!0)}clear(){var M;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let j=1;j<this.rows;j++)this.buffer.lines.push(this.buffer.getBlankLine(R.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(M=this.viewport)===null||M===void 0||M.reset(),this.refresh(0,this.rows-1)}}reset(){var M,j;this.options.rows=this.rows,this.options.cols=this.cols;const K=this._customKeyEventHandler;this._setup(),super.reset(),(M=this._selectionService)===null||M===void 0||M.reset(),this._decorationService.reset(),(j=this.viewport)===null||j===void 0||j.reset(),this._customKeyEventHandler=K,this.refresh(0,this.rows-1)}clearTextureAtlas(){var M;(M=this._renderService)===null||M===void 0||M.clearTextureAtlas()}_reportFocus(){var M;!((M=this.element)===null||M===void 0)&&M.classList.contains("focus")?this.coreService.triggerDataEvent(N.C0.ESC+"[I"):this.coreService.triggerDataEvent(N.C0.ESC+"[O")}_reportWindowsOptions(M){if(this._renderService)switch(M){case te.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const j=this._renderService.dimensions.css.canvas.width.toFixed(0),K=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${N.C0.ESC}[4;${K};${j}t`);break;case te.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const Z=this._renderService.dimensions.css.cell.width.toFixed(0),se=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${N.C0.ESC}[6;${se};${Z}t`)}}cancel(M,j){if(this.options.cancelEvents||j)return M.preventDefault(),M.stopPropagation(),!1}}s.Terminal=V},9924:(f,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TimeBasedDebouncer=void 0,s.TimeBasedDebouncer=class{constructor(l,u=1e3){this._renderCallback=l,this._debounceThresholdMS=u,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(l,u,g){this._rowCount=g,l=l!==void 0?l:0,u=u!==void 0?u:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,l):l,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,u):u;const p=Date.now();if(p-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=p,this._innerRefresh();else if(!this._additionalRefreshRequested){const b=p-this._lastRefreshMs,m=this._debounceThresholdMS-b;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},m)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const l=Math.max(this._rowStart,0),u=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(l,u)}}},1680:function(f,s,l){var u=this&&this.__decorate||function(d,a,c,v){var x,S=arguments.length,E=S<3?a:v===null?v=Object.getOwnPropertyDescriptor(a,c):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(d,a,c,v);else for(var $=d.length-1;$>=0;$--)(x=d[$])&&(E=(S<3?x(E):S>3?x(a,c,E):x(a,c))||E);return S>3&&E&&Object.defineProperty(a,c,E),E},g=this&&this.__param||function(d,a){return function(c,v){a(c,v,d)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Viewport=void 0;const p=l(3656),b=l(4725),m=l(8460),C=l(844),y=l(2585);let n=s.Viewport=class extends C.Disposable{constructor(d,a,c,v,x,S,E,$){super(),this._viewportElement=d,this._scrollArea=a,this._bufferService=c,this._optionsService=v,this._charSizeService=x,this._renderService=S,this._coreBrowserService=E,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new m.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,p.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(k=>this._activeBuffer=k.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(k=>this._renderDimensions=k)),this._handleThemeChange($.colors),this.register($.onChangeColors(k=>this._handleThemeChange(k))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(d){this._viewportElement.style.backgroundColor=d.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(d){if(d)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const a=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==a&&(this._lastRecordedBufferHeight=a,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const d=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==d&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=d),this._refreshAnimationFrame=null}syncScrollArea(d=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(d);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(d)}_handleScroll(d){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const a=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:a,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const d=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(d*(this._smoothScrollState.target-this._smoothScrollState.origin)),d<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(d,a){const c=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(a<0&&this._viewportElement.scrollTop!==0||a>0&&c<this._lastRecordedBufferHeight)||(d.cancelable&&d.preventDefault(),!1)}handleWheel(d){const a=this._getPixelsScrolled(d);return a!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+a:this._smoothScrollState.target+=a,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=a,this._bubbleScroll(d,a))}scrollLines(d){if(d!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const a=d*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+a,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:d,suppressScrollEvent:!1})}_getPixelsScrolled(d){if(d.deltaY===0||d.shiftKey)return 0;let a=this._applyScrollModifier(d.deltaY,d);return d.deltaMode===WheelEvent.DOM_DELTA_LINE?a*=this._currentRowHeight:d.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(a*=this._currentRowHeight*this._bufferService.rows),a}getBufferElements(d,a){var c;let v,x="";const S=[],E=a??this._bufferService.buffer.lines.length,$=this._bufferService.buffer.lines;for(let k=d;k<E;k++){const O=$.get(k);if(!O)continue;const B=(c=$.get(k+1))===null||c===void 0?void 0:c.isWrapped;if(x+=O.translateToString(!B),!B||k===$.length-1){const D=document.createElement("div");D.textContent=x,S.push(D),x.length>0&&(v=D),x=""}}return{bufferElements:S,cursorElement:v}}getLinesScrolled(d){if(d.deltaY===0||d.shiftKey)return 0;let a=this._applyScrollModifier(d.deltaY,d);return d.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(a/=this._currentRowHeight+0,this._wheelPartialScroll+=a,a=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):d.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(a*=this._bufferService.rows),a}_applyScrollModifier(d,a){const c=this._optionsService.rawOptions.fastScrollModifier;return c==="alt"&&a.altKey||c==="ctrl"&&a.ctrlKey||c==="shift"&&a.shiftKey?d*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:d*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(d){this._lastTouchY=d.touches[0].pageY}handleTouchMove(d){const a=this._lastTouchY-d.touches[0].pageY;return this._lastTouchY=d.touches[0].pageY,a!==0&&(this._viewportElement.scrollTop+=a,this._bubbleScroll(d,a))}};s.Viewport=n=u([g(2,y.IBufferService),g(3,y.IOptionsService),g(4,b.ICharSizeService),g(5,b.IRenderService),g(6,b.ICoreBrowserService),g(7,b.IThemeService)],n)},3107:function(f,s,l){var u=this&&this.__decorate||function(n,d,a,c){var v,x=arguments.length,S=x<3?d:c===null?c=Object.getOwnPropertyDescriptor(d,a):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(n,d,a,c);else for(var E=n.length-1;E>=0;E--)(v=n[E])&&(S=(x<3?v(S):x>3?v(d,a,S):v(d,a))||S);return x>3&&S&&Object.defineProperty(d,a,S),S},g=this&&this.__param||function(n,d){return function(a,c){d(a,c,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferDecorationRenderer=void 0;const p=l(3656),b=l(4725),m=l(844),C=l(2585);let y=s.BufferDecorationRenderer=class extends m.Disposable{constructor(n,d,a,c){super(),this._screenElement=n,this._bufferService=d,this._decorationService=a,this._renderService=c,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,p.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(v=>this._removeDecoration(v))),this.register((0,m.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const n of this._decorationService.decorations)this._renderDecoration(n);this._dimensionsChanged=!1}_renderDecoration(n){this._refreshStyle(n),this._dimensionsChanged&&this._refreshXPosition(n)}_createElement(n){var d,a;const c=document.createElement("div");c.classList.add("xterm-decoration"),c.classList.toggle("xterm-decoration-top-layer",((d=n?.options)===null||d===void 0?void 0:d.layer)==="top"),c.style.width=`${Math.round((n.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,c.style.height=(n.options.height||1)*this._renderService.dimensions.css.cell.height+"px",c.style.top=(n.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",c.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const v=(a=n.options.x)!==null&&a!==void 0?a:0;return v&&v>this._bufferService.cols&&(c.style.display="none"),this._refreshXPosition(n,c),c}_refreshStyle(n){const d=n.marker.line-this._bufferService.buffers.active.ydisp;if(d<0||d>=this._bufferService.rows)n.element&&(n.element.style.display="none",n.onRenderEmitter.fire(n.element));else{let a=this._decorationElements.get(n);a||(a=this._createElement(n),n.element=a,this._decorationElements.set(n,a),this._container.appendChild(a),n.onDispose(()=>{this._decorationElements.delete(n),a.remove()})),a.style.top=d*this._renderService.dimensions.css.cell.height+"px",a.style.display=this._altBufferIsActive?"none":"block",n.onRenderEmitter.fire(a)}}_refreshXPosition(n,d=n.element){var a;if(!d)return;const c=(a=n.options.x)!==null&&a!==void 0?a:0;(n.options.anchor||"left")==="right"?d.style.right=c?c*this._renderService.dimensions.css.cell.width+"px":"":d.style.left=c?c*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(n){var d;(d=this._decorationElements.get(n))===null||d===void 0||d.remove(),this._decorationElements.delete(n),n.dispose()}};s.BufferDecorationRenderer=y=u([g(1,C.IBufferService),g(2,C.IDecorationService),g(3,b.IRenderService)],y)},5871:(f,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorZoneStore=void 0,s.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(l){if(l.options.overviewRulerOptions){for(const u of this._zones)if(u.color===l.options.overviewRulerOptions.color&&u.position===l.options.overviewRulerOptions.position){if(this._lineIntersectsZone(u,l.marker.line))return;if(this._lineAdjacentToZone(u,l.marker.line,l.options.overviewRulerOptions.position))return void this._addLineToZone(u,l.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=l.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=l.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=l.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=l.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:l.options.overviewRulerOptions.color,position:l.options.overviewRulerOptions.position,startBufferLine:l.marker.line,endBufferLine:l.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(l){this._linePadding=l}_lineIntersectsZone(l,u){return u>=l.startBufferLine&&u<=l.endBufferLine}_lineAdjacentToZone(l,u,g){return u>=l.startBufferLine-this._linePadding[g||"full"]&&u<=l.endBufferLine+this._linePadding[g||"full"]}_addLineToZone(l,u){l.startBufferLine=Math.min(l.startBufferLine,u),l.endBufferLine=Math.max(l.endBufferLine,u)}}},5744:function(f,s,l){var u=this&&this.__decorate||function(v,x,S,E){var $,k=arguments.length,O=k<3?x:E===null?E=Object.getOwnPropertyDescriptor(x,S):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(v,x,S,E);else for(var B=v.length-1;B>=0;B--)($=v[B])&&(O=(k<3?$(O):k>3?$(x,S,O):$(x,S))||O);return k>3&&O&&Object.defineProperty(x,S,O),O},g=this&&this.__param||function(v,x){return function(S,E){x(S,E,v)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OverviewRulerRenderer=void 0;const p=l(5871),b=l(3656),m=l(4725),C=l(844),y=l(2585),n={full:0,left:0,center:0,right:0},d={full:0,left:0,center:0,right:0},a={full:0,left:0,center:0,right:0};let c=s.OverviewRulerRenderer=class extends C.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(v,x,S,E,$,k,O){var B;super(),this._viewportElement=v,this._screenElement=x,this._bufferService=S,this._decorationService=E,this._renderService=$,this._optionsService=k,this._coreBrowseService=O,this._colorZoneStore=new p.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(B=this._viewportElement.parentElement)===null||B===void 0||B.insertBefore(this._canvas,this._viewportElement);const D=this._canvas.getContext("2d");if(!D)throw new Error("Ctx cannot be null");this._ctx=D,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,C.toDisposable)(()=>{var I;(I=this._canvas)===null||I===void 0||I.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,b.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const v=Math.floor(this._canvas.width/3),x=Math.ceil(this._canvas.width/3);d.full=this._canvas.width,d.left=v,d.center=x,d.right=v,this._refreshDrawHeightConstants(),a.full=0,a.left=0,a.center=d.left,a.right=d.left+d.center}_refreshDrawHeightConstants(){n.full=Math.round(2*this._coreBrowseService.dpr);const v=this._canvas.height/this._bufferService.buffer.lines.length,x=Math.round(Math.max(Math.min(v,12),6)*this._coreBrowseService.dpr);n.left=x,n.center=x,n.right=x}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*n.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*n.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*n.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*n.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const x of this._decorationService.decorations)this._colorZoneStore.addDecoration(x);this._ctx.lineWidth=1;const v=this._colorZoneStore.zones;for(const x of v)x.position!=="full"&&this._renderColorZone(x);for(const x of v)x.position==="full"&&this._renderColorZone(x);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(v){this._ctx.fillStyle=v.color,this._ctx.fillRect(a[v.position||"full"],Math.round((this._canvas.height-1)*(v.startBufferLine/this._bufferService.buffers.active.lines.length)-n[v.position||"full"]/2),d[v.position||"full"],Math.round((this._canvas.height-1)*((v.endBufferLine-v.startBufferLine)/this._bufferService.buffers.active.lines.length)+n[v.position||"full"]))}_queueRefresh(v,x){this._shouldUpdateDimensions=v||this._shouldUpdateDimensions,this._shouldUpdateAnchor=x||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};s.OverviewRulerRenderer=c=u([g(2,y.IBufferService),g(3,y.IDecorationService),g(4,m.IRenderService),g(5,y.IOptionsService),g(6,m.ICoreBrowserService)],c)},2950:function(f,s,l){var u=this&&this.__decorate||function(y,n,d,a){var c,v=arguments.length,x=v<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,d):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(y,n,d,a);else for(var S=y.length-1;S>=0;S--)(c=y[S])&&(x=(v<3?c(x):v>3?c(n,d,x):c(n,d))||x);return v>3&&x&&Object.defineProperty(n,d,x),x},g=this&&this.__param||function(y,n){return function(d,a){n(d,a,y)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CompositionHelper=void 0;const p=l(4725),b=l(2585),m=l(2584);let C=s.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(y,n,d,a,c,v){this._textarea=y,this._compositionView=n,this._bufferService=d,this._optionsService=a,this._coreService=c,this._renderService=v,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(y){this._compositionView.textContent=y.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(y){if(this._isComposing||this._isSendingComposition){if(y.keyCode===229||y.keyCode===16||y.keyCode===17||y.keyCode===18)return!1;this._finalizeComposition(!1)}return y.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(y){if(this._compositionView.classList.remove("active"),this._isComposing=!1,y){const n={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let d;this._isSendingComposition=!1,n.start+=this._dataAlreadySent.length,d=this._isComposing?this._textarea.value.substring(n.start,n.end):this._textarea.value.substring(n.start),d.length>0&&this._coreService.triggerDataEvent(d,!0)}},0)}else{this._isSendingComposition=!1;const n=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(n,!0)}}_handleAnyTextareaChanges(){const y=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const n=this._textarea.value,d=n.replace(y,"");this._dataAlreadySent=d,n.length>y.length?this._coreService.triggerDataEvent(d,!0):n.length<y.length?this._coreService.triggerDataEvent(`${m.C0.DEL}`,!0):n.length===y.length&&n!==y&&this._coreService.triggerDataEvent(n,!0)}},0)}updateCompositionElements(y){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const n=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),d=this._renderService.dimensions.css.cell.height,a=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,c=n*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=c+"px",this._compositionView.style.top=a+"px",this._compositionView.style.height=d+"px",this._compositionView.style.lineHeight=d+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const v=this._compositionView.getBoundingClientRect();this._textarea.style.left=c+"px",this._textarea.style.top=a+"px",this._textarea.style.width=Math.max(v.width,1)+"px",this._textarea.style.height=Math.max(v.height,1)+"px",this._textarea.style.lineHeight=v.height+"px"}y||setTimeout(()=>this.updateCompositionElements(!0),0)}}};s.CompositionHelper=C=u([g(2,b.IBufferService),g(3,b.IOptionsService),g(4,b.ICoreService),g(5,p.IRenderService)],C)},9806:(f,s)=>{function l(u,g,p){const b=p.getBoundingClientRect(),m=u.getComputedStyle(p),C=parseInt(m.getPropertyValue("padding-left")),y=parseInt(m.getPropertyValue("padding-top"));return[g.clientX-b.left-C,g.clientY-b.top-y]}Object.defineProperty(s,"__esModule",{value:!0}),s.getCoords=s.getCoordsRelativeToElement=void 0,s.getCoordsRelativeToElement=l,s.getCoords=function(u,g,p,b,m,C,y,n,d){if(!C)return;const a=l(u,g,p);return a?(a[0]=Math.ceil((a[0]+(d?y/2:0))/y),a[1]=Math.ceil(a[1]/n),a[0]=Math.min(Math.max(a[0],1),b+(d?1:0)),a[1]=Math.min(Math.max(a[1],1),m),a):void 0}},9504:(f,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.moveToCellSequence=void 0;const u=l(2584);function g(n,d,a,c){const v=n-p(n,a),x=d-p(d,a),S=Math.abs(v-x)-function(E,$,k){let O=0;const B=E-p(E,k),D=$-p($,k);for(let I=0;I<Math.abs(B-D);I++){const A=b(E,$)==="A"?-1:1,P=k.buffer.lines.get(B+A*I);P?.isWrapped&&O++}return O}(n,d,a);return y(S,C(b(n,d),c))}function p(n,d){let a=0,c=d.buffer.lines.get(n),v=c?.isWrapped;for(;v&&n>=0&&n<d.rows;)a++,c=d.buffer.lines.get(--n),v=c?.isWrapped;return a}function b(n,d){return n>d?"A":"B"}function m(n,d,a,c,v,x){let S=n,E=d,$="";for(;S!==a||E!==c;)S+=v?1:-1,v&&S>x.cols-1?($+=x.buffer.translateBufferLineToString(E,!1,n,S),S=0,n=0,E++):!v&&S<0&&($+=x.buffer.translateBufferLineToString(E,!1,0,n+1),S=x.cols-1,n=S,E--);return $+x.buffer.translateBufferLineToString(E,!1,n,S)}function C(n,d){const a=d?"O":"[";return u.C0.ESC+a+n}function y(n,d){n=Math.floor(n);let a="";for(let c=0;c<n;c++)a+=d;return a}s.moveToCellSequence=function(n,d,a,c){const v=a.buffer.x,x=a.buffer.y;if(!a.buffer.hasScrollback)return function($,k,O,B,D,I){return g(k,B,D,I).length===0?"":y(m($,k,$,k-p(k,D),!1,D).length,C("D",I))}(v,x,0,d,a,c)+g(x,d,a,c)+function($,k,O,B,D,I){let A;A=g(k,B,D,I).length>0?B-p(B,D):k;const P=B,R=function(N,w,H,z,U,te){let F;return F=g(H,z,U,te).length>0?z-p(z,U):w,N<H&&F<=z||N>=H&&F<z?"C":"D"}($,k,O,B,D,I);return y(m($,A,O,P,R==="C",D).length,C(R,I))}(v,x,n,d,a,c);let S;if(x===d)return S=v>n?"D":"C",y(Math.abs(v-n),C(S,c));S=x>d?"D":"C";const E=Math.abs(x-d);return y(function($,k){return k.cols-$}(x>d?n:v,a)+(E-1)*a.cols+1+((x>d?v:n)-1),C(S,c))}},1296:function(f,s,l){var u=this&&this.__decorate||function(D,I,A,P){var R,N=arguments.length,w=N<3?I:P===null?P=Object.getOwnPropertyDescriptor(I,A):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(D,I,A,P);else for(var H=D.length-1;H>=0;H--)(R=D[H])&&(w=(N<3?R(w):N>3?R(I,A,w):R(I,A))||w);return N>3&&w&&Object.defineProperty(I,A,w),w},g=this&&this.__param||function(D,I){return function(A,P){I(A,P,D)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRenderer=void 0;const p=l(3787),b=l(2550),m=l(2223),C=l(6171),y=l(4725),n=l(8055),d=l(8460),a=l(844),c=l(2585),v="xterm-dom-renderer-owner-",x="xterm-rows",S="xterm-fg-",E="xterm-bg-",$="xterm-focus",k="xterm-selection";let O=1,B=s.DomRenderer=class extends a.Disposable{constructor(D,I,A,P,R,N,w,H,z,U){super(),this._element=D,this._screenElement=I,this._viewportElement=A,this._linkifier2=P,this._charSizeService=N,this._optionsService=w,this._bufferService=H,this._coreBrowserService=z,this._themeService=U,this._terminalClass=O++,this._rowElements=[],this.onRequestRedraw=this.register(new d.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(x),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(k),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,C.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(te=>this._injectCss(te))),this._injectCss(this._themeService.colors),this._rowFactory=R.createInstance(p.DomRendererRowFactory,document),this._element.classList.add(v+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(te=>this._handleLinkHover(te))),this.register(this._linkifier2.onHideLinkUnderline(te=>this._handleLinkLeave(te))),this.register((0,a.toDisposable)(()=>{this._element.classList.remove(v+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new b.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const D=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*D,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*D),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/D),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/D),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const A of this._rowElements)A.style.width=`${this.dimensions.css.canvas.width}px`,A.style.height=`${this.dimensions.css.cell.height}px`,A.style.lineHeight=`${this.dimensions.css.cell.height}px`,A.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const I=`${this._terminalSelector} .${x} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=I,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(D){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let I=`${this._terminalSelector} .${x} { color: ${D.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;I+=`${this._terminalSelector} .${x} .xterm-dim { color: ${n.color.multiplyOpacity(D.foreground,.5).css};}`,I+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,I+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",I+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${D.cursor.css};  color: ${D.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${D.cursor.css}; }}`,I+=`${this._terminalSelector} .${x}.${$} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${x}.${$} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-block { background-color: ${D.cursor.css}; color: ${D.cursorAccent.css};}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${D.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${D.cursor.css} inset;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${D.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,I+=`${this._terminalSelector} .${k} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${k} div { position: absolute; background-color: ${D.selectionBackgroundOpaque.css};}${this._terminalSelector} .${k} div { position: absolute; background-color: ${D.selectionInactiveBackgroundOpaque.css};}`;for(const[A,P]of D.ansi.entries())I+=`${this._terminalSelector} .${S}${A} { color: ${P.css}; }${this._terminalSelector} .${S}${A}.xterm-dim { color: ${n.color.multiplyOpacity(P,.5).css}; }${this._terminalSelector} .${E}${A} { background-color: ${P.css}; }`;I+=`${this._terminalSelector} .${S}${m.INVERTED_DEFAULT_COLOR} { color: ${n.color.opaque(D.background).css}; }${this._terminalSelector} .${S}${m.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${n.color.multiplyOpacity(n.color.opaque(D.background),.5).css}; }${this._terminalSelector} .${E}${m.INVERTED_DEFAULT_COLOR} { background-color: ${D.foreground.css}; }`,this._themeStyleElement.textContent=I}_setDefaultSpacing(){const D=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${D}px`,this._rowFactory.defaultSpacing=D}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(D,I){for(let A=this._rowElements.length;A<=I;A++){const P=document.createElement("div");this._rowContainer.appendChild(P),this._rowElements.push(P)}for(;this._rowElements.length>I;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(D,I){this._refreshRowElements(D,I),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove($)}handleFocus(){this._rowContainer.classList.add($),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(D,I,A){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(D,I,A),this.renderRows(0,this._bufferService.rows-1),!D||!I)return;const P=D[1]-this._bufferService.buffer.ydisp,R=I[1]-this._bufferService.buffer.ydisp,N=Math.max(P,0),w=Math.min(R,this._bufferService.rows-1);if(N>=this._bufferService.rows||w<0)return;const H=document.createDocumentFragment();if(A){const z=D[0]>I[0];H.appendChild(this._createSelectionElement(N,z?I[0]:D[0],z?D[0]:I[0],w-N+1))}else{const z=P===N?D[0]:0,U=N===R?I[0]:this._bufferService.cols;H.appendChild(this._createSelectionElement(N,z,U));const te=w-N-1;if(H.appendChild(this._createSelectionElement(N+1,0,this._bufferService.cols,te)),N!==w){const F=R===w?I[0]:this._bufferService.cols;H.appendChild(this._createSelectionElement(w,0,F))}}this._selectionContainer.appendChild(H)}_createSelectionElement(D,I,A,P=1){const R=document.createElement("div");return R.style.height=P*this.dimensions.css.cell.height+"px",R.style.top=D*this.dimensions.css.cell.height+"px",R.style.left=I*this.dimensions.css.cell.width+"px",R.style.width=this.dimensions.css.cell.width*(A-I)+"px",R}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const D of this._rowElements)D.replaceChildren()}renderRows(D,I){const A=this._bufferService.buffer,P=A.ybase+A.y,R=Math.min(A.x,this._bufferService.cols-1),N=this._optionsService.rawOptions.cursorBlink,w=this._optionsService.rawOptions.cursorStyle,H=this._optionsService.rawOptions.cursorInactiveStyle;for(let z=D;z<=I;z++){const U=z+A.ydisp,te=this._rowElements[z],F=A.lines.get(U);if(!te||!F)break;te.replaceChildren(...this._rowFactory.createRow(F,U,U===P,w,H,R,N,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${v}${this._terminalClass}`}_handleLinkHover(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!0)}_handleLinkLeave(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!1)}_setCellUnderline(D,I,A,P,R,N){A<0&&(D=0),P<0&&(I=0);const w=this._bufferService.rows-1;A=Math.max(Math.min(A,w),0),P=Math.max(Math.min(P,w),0),R=Math.min(R,this._bufferService.cols);const H=this._bufferService.buffer,z=H.ybase+H.y,U=Math.min(H.x,R-1),te=this._optionsService.rawOptions.cursorBlink,F=this._optionsService.rawOptions.cursorStyle,W=this._optionsService.rawOptions.cursorInactiveStyle;for(let V=A;V<=P;++V){const de=V+H.ydisp,M=this._rowElements[V],j=H.lines.get(de);if(!M||!j)break;M.replaceChildren(...this._rowFactory.createRow(j,de,de===z,F,W,U,te,this.dimensions.css.cell.width,this._widthCache,N?V===A?D:0:-1,N?(V===P?I:R)-1:-1))}}};s.DomRenderer=B=u([g(4,c.IInstantiationService),g(5,y.ICharSizeService),g(6,c.IOptionsService),g(7,c.IBufferService),g(8,y.ICoreBrowserService),g(9,y.IThemeService)],B)},3787:function(f,s,l){var u=this&&this.__decorate||function(S,E,$,k){var O,B=arguments.length,D=B<3?E:k===null?k=Object.getOwnPropertyDescriptor(E,$):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(S,E,$,k);else for(var I=S.length-1;I>=0;I--)(O=S[I])&&(D=(B<3?O(D):B>3?O(E,$,D):O(E,$))||D);return B>3&&D&&Object.defineProperty(E,$,D),D},g=this&&this.__param||function(S,E){return function($,k){E($,k,S)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRendererRowFactory=void 0;const p=l(2223),b=l(643),m=l(511),C=l(2585),y=l(8055),n=l(4725),d=l(4269),a=l(6171),c=l(3734);let v=s.DomRendererRowFactory=class{constructor(S,E,$,k,O,B,D){this._document=S,this._characterJoinerService=E,this._optionsService=$,this._coreBrowserService=k,this._coreService=O,this._decorationService=B,this._themeService=D,this._workCell=new m.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(S,E,$){this._selectionStart=S,this._selectionEnd=E,this._columnSelectMode=$}createRow(S,E,$,k,O,B,D,I,A,P,R){const N=[],w=this._characterJoinerService.getJoinedCharacters(E),H=this._themeService.colors;let z,U=S.getNoBgTrimmedLength();$&&U<B+1&&(U=B+1);let te=0,F="",W=0,V=0,de=0,M=!1,j=0,K=!1,Z=0;const se=[],ee=P!==-1&&R!==-1;for(let ae=0;ae<U;ae++){S.loadCell(ae,this._workCell);let X=this._workCell.getWidth();if(X===0)continue;let q=!1,ne=ae,Y=this._workCell;if(w.length>0&&ae===w[0][0]){q=!0;const pe=w.shift();Y=new d.JoinedCellData(this._workCell,S.translateToString(!0,pe[0],pe[1]),pe[1]-pe[0]),ne=pe[1]-1,X=Y.getWidth()}const re=this._isCellInSelection(ae,E),Q=$&&ae===B,ve=ee&&ae>=P&&ae<=R;let Ae=!1;this._decorationService.forEachDecorationAtCell(ae,E,void 0,pe=>{Ae=!0});let Ce=Y.getChars()||b.WHITESPACE_CELL_CHAR;if(Ce===" "&&(Y.isUnderline()||Y.isOverline())&&(Ce="Â "),Z=X*I-A.get(Ce,Y.isBold(),Y.isItalic()),z){if(te&&(re&&K||!re&&!K&&Y.bg===W)&&(re&&K&&H.selectionForeground||Y.fg===V)&&Y.extended.ext===de&&ve===M&&Z===j&&!Q&&!q&&!Ae){F+=Ce,te++;continue}te&&(z.textContent=F),z=this._document.createElement("span"),te=0,F=""}else z=this._document.createElement("span");if(W=Y.bg,V=Y.fg,de=Y.extended.ext,M=ve,j=Z,K=re,q&&B>=ae&&B<=ne&&(B=ae),!this._coreService.isCursorHidden&&Q){if(se.push("xterm-cursor"),this._coreBrowserService.isFocused)D&&se.push("xterm-cursor-blink"),se.push(k==="bar"?"xterm-cursor-bar":k==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(O)switch(O){case"outline":se.push("xterm-cursor-outline");break;case"block":se.push("xterm-cursor-block");break;case"bar":se.push("xterm-cursor-bar");break;case"underline":se.push("xterm-cursor-underline")}}if(Y.isBold()&&se.push("xterm-bold"),Y.isItalic()&&se.push("xterm-italic"),Y.isDim()&&se.push("xterm-dim"),F=Y.isInvisible()?b.WHITESPACE_CELL_CHAR:Y.getChars()||b.WHITESPACE_CELL_CHAR,Y.isUnderline()&&(se.push(`xterm-underline-${Y.extended.underlineStyle}`),F===" "&&(F="Â "),!Y.isUnderlineColorDefault()))if(Y.isUnderlineColorRGB())z.style.textDecorationColor=`rgb(${c.AttributeData.toColorRGB(Y.getUnderlineColor()).join(",")})`;else{let pe=Y.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Y.isBold()&&pe<8&&(pe+=8),z.style.textDecorationColor=H.ansi[pe].css}Y.isOverline()&&(se.push("xterm-overline"),F===" "&&(F="Â ")),Y.isStrikethrough()&&se.push("xterm-strikethrough"),ve&&(z.style.textDecoration="underline");let we=Y.getFgColor(),_e=Y.getFgColorMode(),ge=Y.getBgColor(),le=Y.getBgColorMode();const ue=!!Y.isInverse();if(ue){const pe=we;we=ge,ge=pe;const he=_e;_e=le,le=he}let Se,be,oe,ye=!1;switch(this._decorationService.forEachDecorationAtCell(ae,E,void 0,pe=>{pe.options.layer!=="top"&&ye||(pe.backgroundColorRGB&&(le=50331648,ge=pe.backgroundColorRGB.rgba>>8&16777215,Se=pe.backgroundColorRGB),pe.foregroundColorRGB&&(_e=50331648,we=pe.foregroundColorRGB.rgba>>8&16777215,be=pe.foregroundColorRGB),ye=pe.options.layer==="top")}),!ye&&re&&(Se=this._coreBrowserService.isFocused?H.selectionBackgroundOpaque:H.selectionInactiveBackgroundOpaque,ge=Se.rgba>>8&16777215,le=50331648,ye=!0,H.selectionForeground&&(_e=50331648,we=H.selectionForeground.rgba>>8&16777215,be=H.selectionForeground)),ye&&se.push("xterm-decoration-top"),le){case 16777216:case 33554432:oe=H.ansi[ge],se.push(`xterm-bg-${ge}`);break;case 50331648:oe=y.rgba.toColor(ge>>16,ge>>8&255,255&ge),this._addStyle(z,`background-color:#${x((ge>>>0).toString(16),"0",6)}`);break;default:ue?(oe=H.foreground,se.push(`xterm-bg-${p.INVERTED_DEFAULT_COLOR}`)):oe=H.background}switch(Se||Y.isDim()&&(Se=y.color.multiplyOpacity(oe,.5)),_e){case 16777216:case 33554432:Y.isBold()&&we<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(we+=8),this._applyMinimumContrast(z,oe,H.ansi[we],Y,Se,void 0)||se.push(`xterm-fg-${we}`);break;case 50331648:const pe=y.rgba.toColor(we>>16&255,we>>8&255,255&we);this._applyMinimumContrast(z,oe,pe,Y,Se,be)||this._addStyle(z,`color:#${x(we.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(z,oe,H.foreground,Y,Se,void 0)||ue&&se.push(`xterm-fg-${p.INVERTED_DEFAULT_COLOR}`)}se.length&&(z.className=se.join(" "),se.length=0),Q||q||Ae?z.textContent=F:te++,Z!==this.defaultSpacing&&(z.style.letterSpacing=`${Z}px`),N.push(z),ae=ne}return z&&te&&(z.textContent=F),N}_applyMinimumContrast(S,E,$,k,O,B){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,a.excludeFromContrastRatioDemands)(k.getCode()))return!1;const D=this._getContrastCache(k);let I;if(O||B||(I=D.getColor(E.rgba,$.rgba)),I===void 0){const A=this._optionsService.rawOptions.minimumContrastRatio/(k.isDim()?2:1);I=y.color.ensureContrastRatio(O||E,B||$,A),D.setColor((O||E).rgba,(B||$).rgba,I??null)}return!!I&&(this._addStyle(S,`color:${I.css}`),!0)}_getContrastCache(S){return S.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(S,E){S.setAttribute("style",`${S.getAttribute("style")||""}${E};`)}_isCellInSelection(S,E){const $=this._selectionStart,k=this._selectionEnd;return!(!$||!k)&&(this._columnSelectMode?$[0]<=k[0]?S>=$[0]&&E>=$[1]&&S<k[0]&&E<=k[1]:S<$[0]&&E>=$[1]&&S>=k[0]&&E<=k[1]:E>$[1]&&E<k[1]||$[1]===k[1]&&E===$[1]&&S>=$[0]&&S<k[0]||$[1]<k[1]&&E===k[1]&&S<k[0]||$[1]<k[1]&&E===$[1]&&S>=$[0])}};function x(S,E,$){for(;S.length<$;)S=E+S;return S}s.DomRendererRowFactory=v=u([g(1,n.ICharacterJoinerService),g(2,C.IOptionsService),g(3,n.ICoreBrowserService),g(4,C.ICoreService),g(5,C.IDecorationService),g(6,n.IThemeService)],v)},2550:(f,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WidthCache=void 0,s.WidthCache=class{constructor(l){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=l.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const u=l.createElement("span"),g=l.createElement("span");g.style.fontWeight="bold";const p=l.createElement("span");p.style.fontStyle="italic";const b=l.createElement("span");b.style.fontWeight="bold",b.style.fontStyle="italic",this._measureElements=[u,g,p,b],this._container.appendChild(u),this._container.appendChild(g),this._container.appendChild(p),this._container.appendChild(b),l.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(l,u,g,p){l===this._font&&u===this._fontSize&&g===this._weight&&p===this._weightBold||(this._font=l,this._fontSize=u,this._weight=g,this._weightBold=p,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${g}`,this._measureElements[1].style.fontWeight=`${p}`,this._measureElements[2].style.fontWeight=`${g}`,this._measureElements[3].style.fontWeight=`${p}`,this.clear())}get(l,u,g){let p=0;if(!u&&!g&&l.length===1&&(p=l.charCodeAt(0))<256)return this._flat[p]!==-9999?this._flat[p]:this._flat[p]=this._measure(l,0);let b=l;u&&(b+="B"),g&&(b+="I");let m=this._holey.get(b);if(m===void 0){let C=0;u&&(C|=1),g&&(C|=2),m=this._measure(l,C),this._holey.set(b,m)}return m}_measure(l,u){const g=this._measureElements[u];return g.textContent=l.repeat(32),g.offsetWidth/32}}},2223:(f,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TEXT_BASELINE=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0;const u=l(6114);s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.TEXT_BASELINE=u.isFirefox||u.isLegacyEdge?"bottom":"ideographic"},6171:(f,s)=>{function l(u){return 57508<=u&&u<=57558}Object.defineProperty(s,"__esModule",{value:!0}),s.createRenderDimensions=s.excludeFromContrastRatioDemands=s.isRestrictedPowerlineGlyph=s.isPowerlineGlyph=s.throwIfFalsy=void 0,s.throwIfFalsy=function(u){if(!u)throw new Error("value must not be falsy");return u},s.isPowerlineGlyph=l,s.isRestrictedPowerlineGlyph=function(u){return 57520<=u&&u<=57527},s.excludeFromContrastRatioDemands=function(u){return l(u)||function(g){return 9472<=g&&g<=9631}(u)},s.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(f,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionModel=void 0,s.SelectionModel=class{constructor(l){this._bufferService=l,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const l=this.selectionStart[0]+this.selectionStartLength;return l>this._bufferService.cols?l%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)-1]:[l%this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)]:[l,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const l=this.selectionStart[0]+this.selectionStartLength;return l>this._bufferService.cols?[l%this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)]:[Math.max(l,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const l=this.selectionStart,u=this.selectionEnd;return!(!l||!u)&&(l[1]>u[1]||l[1]===u[1]&&l[0]>u[0])}handleTrim(l){return this.selectionStart&&(this.selectionStart[1]-=l),this.selectionEnd&&(this.selectionEnd[1]-=l),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(f,s,l){var u=this&&this.__decorate||function(n,d,a,c){var v,x=arguments.length,S=x<3?d:c===null?c=Object.getOwnPropertyDescriptor(d,a):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(n,d,a,c);else for(var E=n.length-1;E>=0;E--)(v=n[E])&&(S=(x<3?v(S):x>3?v(d,a,S):v(d,a))||S);return x>3&&S&&Object.defineProperty(d,a,S),S},g=this&&this.__param||function(n,d){return function(a,c){d(a,c,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharSizeService=void 0;const p=l(2585),b=l(8460),m=l(844);let C=s.CharSizeService=class extends m.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(n,d,a){super(),this._optionsService=a,this.width=0,this.height=0,this._onCharSizeChange=this.register(new b.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new y(n,d,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const n=this._measureStrategy.measure();n.width===this.width&&n.height===this.height||(this.width=n.width,this.height=n.height,this._onCharSizeChange.fire())}};s.CharSizeService=C=u([g(2,p.IOptionsService)],C);class y{constructor(d,a,c){this._document=d,this._parentElement=a,this._optionsService=c,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const d={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return d.width!==0&&d.height!==0&&(this._result.width=d.width/32,this._result.height=Math.ceil(d.height)),this._result}}},4269:function(f,s,l){var u=this&&this.__decorate||function(d,a,c,v){var x,S=arguments.length,E=S<3?a:v===null?v=Object.getOwnPropertyDescriptor(a,c):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(d,a,c,v);else for(var $=d.length-1;$>=0;$--)(x=d[$])&&(E=(S<3?x(E):S>3?x(a,c,E):x(a,c))||E);return S>3&&E&&Object.defineProperty(a,c,E),E},g=this&&this.__param||function(d,a){return function(c,v){a(c,v,d)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharacterJoinerService=s.JoinedCellData=void 0;const p=l(3734),b=l(643),m=l(511),C=l(2585);class y extends p.AttributeData{constructor(a,c,v){super(),this.content=0,this.combinedData="",this.fg=a.fg,this.bg=a.bg,this.combinedData=c,this._width=v}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(a){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.JoinedCellData=y;let n=s.CharacterJoinerService=class _o{constructor(a){this._bufferService=a,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new m.CellData}register(a){const c={id:this._nextCharacterJoinerId++,handler:a};return this._characterJoiners.push(c),c.id}deregister(a){for(let c=0;c<this._characterJoiners.length;c++)if(this._characterJoiners[c].id===a)return this._characterJoiners.splice(c,1),!0;return!1}getJoinedCharacters(a){if(this._characterJoiners.length===0)return[];const c=this._bufferService.buffer.lines.get(a);if(!c||c.length===0)return[];const v=[],x=c.translateToString(!0);let S=0,E=0,$=0,k=c.getFg(0),O=c.getBg(0);for(let B=0;B<c.getTrimmedLength();B++)if(c.loadCell(B,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==k||this._workCell.bg!==O){if(B-S>1){const D=this._getJoinedRanges(x,$,E,c,S);for(let I=0;I<D.length;I++)v.push(D[I])}S=B,$=E,k=this._workCell.fg,O=this._workCell.bg}E+=this._workCell.getChars().length||b.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-S>1){const B=this._getJoinedRanges(x,$,E,c,S);for(let D=0;D<B.length;D++)v.push(B[D])}return v}_getJoinedRanges(a,c,v,x,S){const E=a.substring(c,v);let $=[];try{$=this._characterJoiners[0].handler(E)}catch(k){console.error(k)}for(let k=1;k<this._characterJoiners.length;k++)try{const O=this._characterJoiners[k].handler(E);for(let B=0;B<O.length;B++)_o._mergeRanges($,O[B])}catch(O){console.error(O)}return this._stringRangesToCellRanges($,x,S),$}_stringRangesToCellRanges(a,c,v){let x=0,S=!1,E=0,$=a[x];if($){for(let k=v;k<this._bufferService.cols;k++){const O=c.getWidth(k),B=c.getString(k).length||b.WHITESPACE_CELL_CHAR.length;if(O!==0){if(!S&&$[0]<=E&&($[0]=k,S=!0),$[1]<=E){if($[1]=k,$=a[++x],!$)break;$[0]<=E?($[0]=k,S=!0):S=!1}E+=B}}$&&($[1]=this._bufferService.cols)}}static _mergeRanges(a,c){let v=!1;for(let x=0;x<a.length;x++){const S=a[x];if(v){if(c[1]<=S[0])return a[x-1][1]=c[1],a;if(c[1]<=S[1])return a[x-1][1]=Math.max(c[1],S[1]),a.splice(x,1),a;a.splice(x,1),x--}else{if(c[1]<=S[0])return a.splice(x,0,c),a;if(c[1]<=S[1])return S[0]=Math.min(c[0],S[0]),a;c[0]<S[1]&&(S[0]=Math.min(c[0],S[0]),v=!0)}}return v?a[a.length-1][1]=c[1]:a.push(c),a}};s.CharacterJoinerService=n=u([g(0,C.IBufferService)],n)},5114:(f,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreBrowserService=void 0,s.CoreBrowserService=class{constructor(l,u){this._textarea=l,this.window=u,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(f,s,l){var u=this&&this.__decorate||function(C,y,n,d){var a,c=arguments.length,v=c<3?y:d===null?d=Object.getOwnPropertyDescriptor(y,n):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(C,y,n,d);else for(var x=C.length-1;x>=0;x--)(a=C[x])&&(v=(c<3?a(v):c>3?a(y,n,v):a(y,n))||v);return c>3&&v&&Object.defineProperty(y,n,v),v},g=this&&this.__param||function(C,y){return function(n,d){y(n,d,C)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseService=void 0;const p=l(4725),b=l(9806);let m=s.MouseService=class{constructor(C,y){this._renderService=C,this._charSizeService=y}getCoords(C,y,n,d,a){return(0,b.getCoords)(window,C,y,n,d,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,a)}getMouseReportCoords(C,y){const n=(0,b.getCoordsRelativeToElement)(window,C,y);if(this._charSizeService.hasValidSize)return n[0]=Math.min(Math.max(n[0],0),this._renderService.dimensions.css.canvas.width-1),n[1]=Math.min(Math.max(n[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(n[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(n[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(n[0]),y:Math.floor(n[1])}}};s.MouseService=m=u([g(0,p.IRenderService),g(1,p.ICharSizeService)],m)},3230:function(f,s,l){var u=this&&this.__decorate||function(v,x,S,E){var $,k=arguments.length,O=k<3?x:E===null?E=Object.getOwnPropertyDescriptor(x,S):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(v,x,S,E);else for(var B=v.length-1;B>=0;B--)($=v[B])&&(O=(k<3?$(O):k>3?$(x,S,O):$(x,S))||O);return k>3&&O&&Object.defineProperty(x,S,O),O},g=this&&this.__param||function(v,x){return function(S,E){x(S,E,v)}};Object.defineProperty(s,"__esModule",{value:!0}),s.RenderService=void 0;const p=l(3656),b=l(6193),m=l(5596),C=l(4725),y=l(8460),n=l(844),d=l(7226),a=l(2585);let c=s.RenderService=class extends n.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(v,x,S,E,$,k,O,B){if(super(),this._rowCount=v,this._charSizeService=E,this._renderer=this.register(new n.MutableDisposable),this._pausedResizeTask=new d.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new y.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new y.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new y.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new y.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new b.RenderDebouncer(O.window,(D,I)=>this._renderRows(D,I)),this.register(this._renderDebouncer),this._screenDprMonitor=new m.ScreenDprMonitor(O.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(k.onResize(()=>this._fullRefresh())),this.register(k.buffers.onBufferActivate(()=>{var D;return(D=this._renderer.value)===null||D===void 0?void 0:D.clear()})),this.register(S.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register($.onDecorationRegistered(()=>this._fullRefresh())),this.register($.onDecorationRemoved(()=>this._fullRefresh())),this.register(S.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(k.cols,k.rows),this._fullRefresh()})),this.register(S.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(k.buffer.y,k.buffer.y,!0))),this.register((0,p.addDisposableDomListener)(O.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(B.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in O.window){const D=new O.window.IntersectionObserver(I=>this._handleIntersectionChange(I[I.length-1]),{threshold:0});D.observe(x),this.register({dispose:()=>D.disconnect()})}}_handleIntersectionChange(v){this._isPaused=v.isIntersecting===void 0?v.intersectionRatio===0:!v.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(v,x,S=!1){this._isPaused?this._needsFullRefresh=!0:(S||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(v,x,this._rowCount))}_renderRows(v,x){this._renderer.value&&(v=Math.min(v,this._rowCount-1),x=Math.min(x,this._rowCount-1),this._renderer.value.renderRows(v,x),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:v,end:x}),this._onRender.fire({start:v,end:x}),this._isNextRenderRedrawOnly=!0)}resize(v,x){this._rowCount=x,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(v){this._renderer.value=v,this._renderer.value.onRequestRedraw(x=>this.refreshRows(x.start,x.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(v){return this._renderDebouncer.addRefreshCallback(v)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var v,x;this._renderer.value&&((x=(v=this._renderer.value).clearTextureAtlas)===null||x===void 0||x.call(v),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(v,x){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(v,x)):this._renderer.value.handleResize(v,x),this._fullRefresh())}handleCharSizeChanged(){var v;(v=this._renderer.value)===null||v===void 0||v.handleCharSizeChanged()}handleBlur(){var v;(v=this._renderer.value)===null||v===void 0||v.handleBlur()}handleFocus(){var v;(v=this._renderer.value)===null||v===void 0||v.handleFocus()}handleSelectionChanged(v,x,S){var E;this._selectionState.start=v,this._selectionState.end=x,this._selectionState.columnSelectMode=S,(E=this._renderer.value)===null||E===void 0||E.handleSelectionChanged(v,x,S)}handleCursorMove(){var v;(v=this._renderer.value)===null||v===void 0||v.handleCursorMove()}clear(){var v;(v=this._renderer.value)===null||v===void 0||v.clear()}};s.RenderService=c=u([g(2,a.IOptionsService),g(3,C.ICharSizeService),g(4,a.IDecorationService),g(5,a.IBufferService),g(6,C.ICoreBrowserService),g(7,C.IThemeService)],c)},9312:function(f,s,l){var u=this&&this.__decorate||function($,k,O,B){var D,I=arguments.length,A=I<3?k:B===null?B=Object.getOwnPropertyDescriptor(k,O):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate($,k,O,B);else for(var P=$.length-1;P>=0;P--)(D=$[P])&&(A=(I<3?D(A):I>3?D(k,O,A):D(k,O))||A);return I>3&&A&&Object.defineProperty(k,O,A),A},g=this&&this.__param||function($,k){return function(O,B){k(O,B,$)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionService=void 0;const p=l(9806),b=l(9504),m=l(456),C=l(4725),y=l(8460),n=l(844),d=l(6114),a=l(4841),c=l(511),v=l(2585),x="Â ",S=new RegExp(x,"g");let E=s.SelectionService=class extends n.Disposable{constructor($,k,O,B,D,I,A,P,R){super(),this._element=$,this._screenElement=k,this._linkifier=O,this._bufferService=B,this._coreService=D,this._mouseService=I,this._optionsService=A,this._renderService=P,this._coreBrowserService=R,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new c.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new y.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new y.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new y.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new y.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=N=>this._handleMouseMove(N),this._mouseUpListener=N=>this._handleMouseUp(N),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(N=>this._handleTrim(N)),this.register(this._bufferService.buffers.onBufferActivate(N=>this._handleBufferActivate(N))),this.enable(),this._model=new m.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,n.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const $=this._model.finalSelectionStart,k=this._model.finalSelectionEnd;return!(!$||!k||$[0]===k[0]&&$[1]===k[1])}get selectionText(){const $=this._model.finalSelectionStart,k=this._model.finalSelectionEnd;if(!$||!k)return"";const O=this._bufferService.buffer,B=[];if(this._activeSelectionMode===3){if($[0]===k[0])return"";const D=$[0]<k[0]?$[0]:k[0],I=$[0]<k[0]?k[0]:$[0];for(let A=$[1];A<=k[1];A++){const P=O.translateBufferLineToString(A,!0,D,I);B.push(P)}}else{const D=$[1]===k[1]?k[0]:void 0;B.push(O.translateBufferLineToString($[1],!0,$[0],D));for(let I=$[1]+1;I<=k[1]-1;I++){const A=O.lines.get(I),P=O.translateBufferLineToString(I,!0);A?.isWrapped?B[B.length-1]+=P:B.push(P)}if($[1]!==k[1]){const I=O.lines.get(k[1]),A=O.translateBufferLineToString(k[1],!0,0,k[0]);I&&I.isWrapped?B[B.length-1]+=A:B.push(A)}}return B.map(D=>D.replace(S," ")).join(d.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh($){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),d.isLinux&&$&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection($){const k=this._getMouseBufferCoords($),O=this._model.finalSelectionStart,B=this._model.finalSelectionEnd;return!!(O&&B&&k)&&this._areCoordsInSelection(k,O,B)}isCellInSelection($,k){const O=this._model.finalSelectionStart,B=this._model.finalSelectionEnd;return!(!O||!B)&&this._areCoordsInSelection([$,k],O,B)}_areCoordsInSelection($,k,O){return $[1]>k[1]&&$[1]<O[1]||k[1]===O[1]&&$[1]===k[1]&&$[0]>=k[0]&&$[0]<O[0]||k[1]<O[1]&&$[1]===O[1]&&$[0]<O[0]||k[1]<O[1]&&$[1]===k[1]&&$[0]>=k[0]}_selectWordAtCursor($,k){var O,B;const D=(B=(O=this._linkifier.currentLink)===null||O===void 0?void 0:O.link)===null||B===void 0?void 0:B.range;if(D)return this._model.selectionStart=[D.start.x-1,D.start.y-1],this._model.selectionStartLength=(0,a.getRangeLength)(D,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const I=this._getMouseBufferCoords($);return!!I&&(this._selectWordAt(I,k),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines($,k){this._model.clearSelection(),$=Math.max($,0),k=Math.min(k,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,$],this._model.selectionEnd=[this._bufferService.cols,k],this.refresh(),this._onSelectionChange.fire()}_handleTrim($){this._model.handleTrim($)&&this.refresh()}_getMouseBufferCoords($){const k=this._mouseService.getCoords($,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(k)return k[0]--,k[1]--,k[1]+=this._bufferService.buffer.ydisp,k}_getMouseEventScrollAmount($){let k=(0,p.getCoordsRelativeToElement)(this._coreBrowserService.window,$,this._screenElement)[1];const O=this._renderService.dimensions.css.canvas.height;return k>=0&&k<=O?0:(k>O&&(k-=O),k=Math.min(Math.max(k,-50),50),k/=50,k/Math.abs(k)+Math.round(14*k))}shouldForceSelection($){return d.isMac?$.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:$.shiftKey}handleMouseDown($){if(this._mouseDownTimeStamp=$.timeStamp,($.button!==2||!this.hasSelection)&&$.button===0){if(!this._enabled){if(!this.shouldForceSelection($))return;$.stopPropagation()}$.preventDefault(),this._dragScrollAmount=0,this._enabled&&$.shiftKey?this._handleIncrementalClick($):$.detail===1?this._handleSingleClick($):$.detail===2?this._handleDoubleClick($):$.detail===3&&this._handleTripleClick($),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick($){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords($))}_handleSingleClick($){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect($)?3:0,this._model.selectionStart=this._getMouseBufferCoords($),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const k=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);k&&k.length!==this._model.selectionStart[0]&&k.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick($){this._selectWordAtCursor($,!0)&&(this._activeSelectionMode=1)}_handleTripleClick($){const k=this._getMouseBufferCoords($);k&&(this._activeSelectionMode=2,this._selectLineAt(k[1]))}shouldColumnSelect($){return $.altKey&&!(d.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove($){if($.stopImmediatePropagation(),!this._model.selectionStart)return;const k=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords($),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount($),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const O=this._bufferService.buffer;if(this._model.selectionEnd[1]<O.lines.length){const B=O.lines.get(this._model.selectionEnd[1]);B&&B.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}k&&k[0]===this._model.selectionEnd[0]&&k[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const $=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min($.ydisp+this._bufferService.rows,$.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=$.ydisp),this.refresh()}}_handleMouseUp($){const k=$.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&k<500&&$.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const O=this._mouseService.getCoords($,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(O&&O[0]!==void 0&&O[1]!==void 0){const B=(0,b.moveToCellSequence)(O[0]-1,O[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(B,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const $=this._model.finalSelectionStart,k=this._model.finalSelectionEnd,O=!(!$||!k||$[0]===k[0]&&$[1]===k[1]);O?$&&k&&(this._oldSelectionStart&&this._oldSelectionEnd&&$[0]===this._oldSelectionStart[0]&&$[1]===this._oldSelectionStart[1]&&k[0]===this._oldSelectionEnd[0]&&k[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange($,k,O)):this._oldHasSelection&&this._fireOnSelectionChange($,k,O)}_fireOnSelectionChange($,k,O){this._oldSelectionStart=$,this._oldSelectionEnd=k,this._oldHasSelection=O,this._onSelectionChange.fire()}_handleBufferActivate($){this.clearSelection(),this._trimListener.dispose(),this._trimListener=$.activeBuffer.lines.onTrim(k=>this._handleTrim(k))}_convertViewportColToCharacterIndex($,k){let O=k;for(let B=0;k>=B;B++){const D=$.loadCell(B,this._workCell).getChars().length;this._workCell.getWidth()===0?O--:D>1&&k!==B&&(O+=D-1)}return O}setSelection($,k,O){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[$,k],this._model.selectionStartLength=O,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect($){this._isClickInSelection($)||(this._selectWordAtCursor($,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt($,k,O=!0,B=!0){if($[0]>=this._bufferService.cols)return;const D=this._bufferService.buffer,I=D.lines.get($[1]);if(!I)return;const A=D.translateBufferLineToString($[1],!1);let P=this._convertViewportColToCharacterIndex(I,$[0]),R=P;const N=$[0]-P;let w=0,H=0,z=0,U=0;if(A.charAt(P)===" "){for(;P>0&&A.charAt(P-1)===" ";)P--;for(;R<A.length&&A.charAt(R+1)===" ";)R++}else{let W=$[0],V=$[0];I.getWidth(W)===0&&(w++,W--),I.getWidth(V)===2&&(H++,V++);const de=I.getString(V).length;for(de>1&&(U+=de-1,R+=de-1);W>0&&P>0&&!this._isCharWordSeparator(I.loadCell(W-1,this._workCell));){I.loadCell(W-1,this._workCell);const M=this._workCell.getChars().length;this._workCell.getWidth()===0?(w++,W--):M>1&&(z+=M-1,P-=M-1),P--,W--}for(;V<I.length&&R+1<A.length&&!this._isCharWordSeparator(I.loadCell(V+1,this._workCell));){I.loadCell(V+1,this._workCell);const M=this._workCell.getChars().length;this._workCell.getWidth()===2?(H++,V++):M>1&&(U+=M-1,R+=M-1),R++,V++}}R++;let te=P+N-w+z,F=Math.min(this._bufferService.cols,R-P+w+H-z-U);if(k||A.slice(P,R).trim()!==""){if(O&&te===0&&I.getCodePoint(0)!==32){const W=D.lines.get($[1]-1);if(W&&I.isWrapped&&W.getCodePoint(this._bufferService.cols-1)!==32){const V=this._getWordAt([this._bufferService.cols-1,$[1]-1],!1,!0,!1);if(V){const de=this._bufferService.cols-V.start;te-=de,F+=de}}}if(B&&te+F===this._bufferService.cols&&I.getCodePoint(this._bufferService.cols-1)!==32){const W=D.lines.get($[1]+1);if(W?.isWrapped&&W.getCodePoint(0)!==32){const V=this._getWordAt([0,$[1]+1],!1,!1,!0);V&&(F+=V.length)}}return{start:te,length:F}}}_selectWordAt($,k){const O=this._getWordAt($,k);if(O){for(;O.start<0;)O.start+=this._bufferService.cols,$[1]--;this._model.selectionStart=[O.start,$[1]],this._model.selectionStartLength=O.length}}_selectToWordAt($){const k=this._getWordAt($,!0);if(k){let O=$[1];for(;k.start<0;)k.start+=this._bufferService.cols,O--;if(!this._model.areSelectionValuesReversed())for(;k.start+k.length>this._bufferService.cols;)k.length-=this._bufferService.cols,O++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?k.start:k.start+k.length,O]}}_isCharWordSeparator($){return $.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf($.getChars())>=0}_selectLineAt($){const k=this._bufferService.buffer.getWrappedRangeForLine($),O={start:{x:0,y:k.first},end:{x:this._bufferService.cols-1,y:k.last}};this._model.selectionStart=[0,k.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,a.getRangeLength)(O,this._bufferService.cols)}};s.SelectionService=E=u([g(3,v.IBufferService),g(4,v.ICoreService),g(5,C.IMouseService),g(6,v.IOptionsService),g(7,C.IRenderService),g(8,C.ICoreBrowserService)],E)},4725:(f,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IThemeService=s.ICharacterJoinerService=s.ISelectionService=s.IRenderService=s.IMouseService=s.ICoreBrowserService=s.ICharSizeService=void 0;const u=l(8343);s.ICharSizeService=(0,u.createDecorator)("CharSizeService"),s.ICoreBrowserService=(0,u.createDecorator)("CoreBrowserService"),s.IMouseService=(0,u.createDecorator)("MouseService"),s.IRenderService=(0,u.createDecorator)("RenderService"),s.ISelectionService=(0,u.createDecorator)("SelectionService"),s.ICharacterJoinerService=(0,u.createDecorator)("CharacterJoinerService"),s.IThemeService=(0,u.createDecorator)("ThemeService")},6731:function(f,s,l){var u=this&&this.__decorate||function(E,$,k,O){var B,D=arguments.length,I=D<3?$:O===null?O=Object.getOwnPropertyDescriptor($,k):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(E,$,k,O);else for(var A=E.length-1;A>=0;A--)(B=E[A])&&(I=(D<3?B(I):D>3?B($,k,I):B($,k))||I);return D>3&&I&&Object.defineProperty($,k,I),I},g=this&&this.__param||function(E,$){return function(k,O){$(k,O,E)}};Object.defineProperty(s,"__esModule",{value:!0}),s.ThemeService=s.DEFAULT_ANSI_COLORS=void 0;const p=l(7239),b=l(8055),m=l(8460),C=l(844),y=l(2585),n=b.css.toColor("#ffffff"),d=b.css.toColor("#000000"),a=b.css.toColor("#ffffff"),c=b.css.toColor("#000000"),v={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};s.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const E=[b.css.toColor("#2e3436"),b.css.toColor("#cc0000"),b.css.toColor("#4e9a06"),b.css.toColor("#c4a000"),b.css.toColor("#3465a4"),b.css.toColor("#75507b"),b.css.toColor("#06989a"),b.css.toColor("#d3d7cf"),b.css.toColor("#555753"),b.css.toColor("#ef2929"),b.css.toColor("#8ae234"),b.css.toColor("#fce94f"),b.css.toColor("#729fcf"),b.css.toColor("#ad7fa8"),b.css.toColor("#34e2e2"),b.css.toColor("#eeeeec")],$=[0,95,135,175,215,255];for(let k=0;k<216;k++){const O=$[k/36%6|0],B=$[k/6%6|0],D=$[k%6];E.push({css:b.channels.toCss(O,B,D),rgba:b.channels.toRgba(O,B,D)})}for(let k=0;k<24;k++){const O=8+10*k;E.push({css:b.channels.toCss(O,O,O),rgba:b.channels.toRgba(O,O,O)})}return E})());let x=s.ThemeService=class extends C.Disposable{get colors(){return this._colors}constructor(E){super(),this._optionsService=E,this._contrastCache=new p.ColorContrastCache,this._halfContrastCache=new p.ColorContrastCache,this._onChangeColors=this.register(new m.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:n,background:d,cursor:a,cursorAccent:c,selectionForeground:void 0,selectionBackgroundTransparent:v,selectionBackgroundOpaque:b.color.blend(d,v),selectionInactiveBackgroundTransparent:v,selectionInactiveBackgroundOpaque:b.color.blend(d,v),ansi:s.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(E={}){const $=this._colors;if($.foreground=S(E.foreground,n),$.background=S(E.background,d),$.cursor=S(E.cursor,a),$.cursorAccent=S(E.cursorAccent,c),$.selectionBackgroundTransparent=S(E.selectionBackground,v),$.selectionBackgroundOpaque=b.color.blend($.background,$.selectionBackgroundTransparent),$.selectionInactiveBackgroundTransparent=S(E.selectionInactiveBackground,$.selectionBackgroundTransparent),$.selectionInactiveBackgroundOpaque=b.color.blend($.background,$.selectionInactiveBackgroundTransparent),$.selectionForeground=E.selectionForeground?S(E.selectionForeground,b.NULL_COLOR):void 0,$.selectionForeground===b.NULL_COLOR&&($.selectionForeground=void 0),b.color.isOpaque($.selectionBackgroundTransparent)&&($.selectionBackgroundTransparent=b.color.opacity($.selectionBackgroundTransparent,.3)),b.color.isOpaque($.selectionInactiveBackgroundTransparent)&&($.selectionInactiveBackgroundTransparent=b.color.opacity($.selectionInactiveBackgroundTransparent,.3)),$.ansi=s.DEFAULT_ANSI_COLORS.slice(),$.ansi[0]=S(E.black,s.DEFAULT_ANSI_COLORS[0]),$.ansi[1]=S(E.red,s.DEFAULT_ANSI_COLORS[1]),$.ansi[2]=S(E.green,s.DEFAULT_ANSI_COLORS[2]),$.ansi[3]=S(E.yellow,s.DEFAULT_ANSI_COLORS[3]),$.ansi[4]=S(E.blue,s.DEFAULT_ANSI_COLORS[4]),$.ansi[5]=S(E.magenta,s.DEFAULT_ANSI_COLORS[5]),$.ansi[6]=S(E.cyan,s.DEFAULT_ANSI_COLORS[6]),$.ansi[7]=S(E.white,s.DEFAULT_ANSI_COLORS[7]),$.ansi[8]=S(E.brightBlack,s.DEFAULT_ANSI_COLORS[8]),$.ansi[9]=S(E.brightRed,s.DEFAULT_ANSI_COLORS[9]),$.ansi[10]=S(E.brightGreen,s.DEFAULT_ANSI_COLORS[10]),$.ansi[11]=S(E.brightYellow,s.DEFAULT_ANSI_COLORS[11]),$.ansi[12]=S(E.brightBlue,s.DEFAULT_ANSI_COLORS[12]),$.ansi[13]=S(E.brightMagenta,s.DEFAULT_ANSI_COLORS[13]),$.ansi[14]=S(E.brightCyan,s.DEFAULT_ANSI_COLORS[14]),$.ansi[15]=S(E.brightWhite,s.DEFAULT_ANSI_COLORS[15]),E.extendedAnsi){const k=Math.min($.ansi.length-16,E.extendedAnsi.length);for(let O=0;O<k;O++)$.ansi[O+16]=S(E.extendedAnsi[O],s.DEFAULT_ANSI_COLORS[O+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(E){this._restoreColor(E),this._onChangeColors.fire(this.colors)}_restoreColor(E){if(E!==void 0)switch(E){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[E]=this._restoreColors.ansi[E]}else for(let $=0;$<this._restoreColors.ansi.length;++$)this._colors.ansi[$]=this._restoreColors.ansi[$]}modifyColors(E){E(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function S(E,$){if(E!==void 0)try{return b.css.toColor(E)}catch{}return $}s.ThemeService=x=u([g(0,y.IOptionsService)],x)},6349:(f,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CircularList=void 0;const u=l(8460),g=l(844);class p extends g.Disposable{constructor(m){super(),this._maxLength=m,this.onDeleteEmitter=this.register(new u.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new u.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new u.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(m){if(this._maxLength===m)return;const C=new Array(m);for(let y=0;y<Math.min(m,this.length);y++)C[y]=this._array[this._getCyclicIndex(y)];this._array=C,this._maxLength=m,this._startIndex=0}get length(){return this._length}set length(m){if(m>this._length)for(let C=this._length;C<m;C++)this._array[C]=void 0;this._length=m}get(m){return this._array[this._getCyclicIndex(m)]}set(m,C){this._array[this._getCyclicIndex(m)]=C}push(m){this._array[this._getCyclicIndex(this._length)]=m,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(m,C,...y){if(C){for(let n=m;n<this._length-C;n++)this._array[this._getCyclicIndex(n)]=this._array[this._getCyclicIndex(n+C)];this._length-=C,this.onDeleteEmitter.fire({index:m,amount:C})}for(let n=this._length-1;n>=m;n--)this._array[this._getCyclicIndex(n+y.length)]=this._array[this._getCyclicIndex(n)];for(let n=0;n<y.length;n++)this._array[this._getCyclicIndex(m+n)]=y[n];if(y.length&&this.onInsertEmitter.fire({index:m,amount:y.length}),this._length+y.length>this._maxLength){const n=this._length+y.length-this._maxLength;this._startIndex+=n,this._length=this._maxLength,this.onTrimEmitter.fire(n)}else this._length+=y.length}trimStart(m){m>this._length&&(m=this._length),this._startIndex+=m,this._length-=m,this.onTrimEmitter.fire(m)}shiftElements(m,C,y){if(!(C<=0)){if(m<0||m>=this._length)throw new Error("start argument out of range");if(m+y<0)throw new Error("Cannot shift elements in list beyond index 0");if(y>0){for(let d=C-1;d>=0;d--)this.set(m+d+y,this.get(m+d));const n=m+C+y-this._length;if(n>0)for(this._length+=n;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let n=0;n<C;n++)this.set(m+n+y,this.get(m+n))}}_getCyclicIndex(m){return(this._startIndex+m)%this._maxLength}}s.CircularList=p},1439:(f,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.clone=void 0,s.clone=function l(u,g=5){if(typeof u!="object")return u;const p=Array.isArray(u)?[]:{};for(const b in u)p[b]=g<=1?u[b]:u[b]&&l(u[b],g-1);return p}},8055:(f,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=s.NULL_COLOR=void 0;const u=l(6114);let g=0,p=0,b=0,m=0;var C,y,n,d,a;function c(x){const S=x.toString(16);return S.length<2?"0"+S:S}function v(x,S){return x<S?(S+.05)/(x+.05):(x+.05)/(S+.05)}s.NULL_COLOR={css:"#00000000",rgba:0},function(x){x.toCss=function(S,E,$,k){return k!==void 0?`#${c(S)}${c(E)}${c($)}${c(k)}`:`#${c(S)}${c(E)}${c($)}`},x.toRgba=function(S,E,$,k=255){return(S<<24|E<<16|$<<8|k)>>>0}}(C||(s.channels=C={})),function(x){function S(E,$){return m=Math.round(255*$),[g,p,b]=a.toChannels(E.rgba),{css:C.toCss(g,p,b,m),rgba:C.toRgba(g,p,b,m)}}x.blend=function(E,$){if(m=(255&$.rgba)/255,m===1)return{css:$.css,rgba:$.rgba};const k=$.rgba>>24&255,O=$.rgba>>16&255,B=$.rgba>>8&255,D=E.rgba>>24&255,I=E.rgba>>16&255,A=E.rgba>>8&255;return g=D+Math.round((k-D)*m),p=I+Math.round((O-I)*m),b=A+Math.round((B-A)*m),{css:C.toCss(g,p,b),rgba:C.toRgba(g,p,b)}},x.isOpaque=function(E){return(255&E.rgba)==255},x.ensureContrastRatio=function(E,$,k){const O=a.ensureContrastRatio(E.rgba,$.rgba,k);if(O)return a.toColor(O>>24&255,O>>16&255,O>>8&255)},x.opaque=function(E){const $=(255|E.rgba)>>>0;return[g,p,b]=a.toChannels($),{css:C.toCss(g,p,b),rgba:$}},x.opacity=S,x.multiplyOpacity=function(E,$){return m=255&E.rgba,S(E,m*$/255)},x.toColorRGB=function(E){return[E.rgba>>24&255,E.rgba>>16&255,E.rgba>>8&255]}}(y||(s.color=y={})),function(x){let S,E;if(!u.isNode){const $=document.createElement("canvas");$.width=1,$.height=1;const k=$.getContext("2d",{willReadFrequently:!0});k&&(S=k,S.globalCompositeOperation="copy",E=S.createLinearGradient(0,0,1,1))}x.toColor=function($){if($.match(/#[\da-f]{3,8}/i))switch($.length){case 4:return g=parseInt($.slice(1,2).repeat(2),16),p=parseInt($.slice(2,3).repeat(2),16),b=parseInt($.slice(3,4).repeat(2),16),a.toColor(g,p,b);case 5:return g=parseInt($.slice(1,2).repeat(2),16),p=parseInt($.slice(2,3).repeat(2),16),b=parseInt($.slice(3,4).repeat(2),16),m=parseInt($.slice(4,5).repeat(2),16),a.toColor(g,p,b,m);case 7:return{css:$,rgba:(parseInt($.slice(1),16)<<8|255)>>>0};case 9:return{css:$,rgba:parseInt($.slice(1),16)>>>0}}const k=$.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(k)return g=parseInt(k[1]),p=parseInt(k[2]),b=parseInt(k[3]),m=Math.round(255*(k[5]===void 0?1:parseFloat(k[5]))),a.toColor(g,p,b,m);if(!S||!E)throw new Error("css.toColor: Unsupported css format");if(S.fillStyle=E,S.fillStyle=$,typeof S.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(S.fillRect(0,0,1,1),[g,p,b,m]=S.getImageData(0,0,1,1).data,m!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:C.toRgba(g,p,b,m),css:$}}}(n||(s.css=n={})),function(x){function S(E,$,k){const O=E/255,B=$/255,D=k/255;return .2126*(O<=.03928?O/12.92:Math.pow((O+.055)/1.055,2.4))+.7152*(B<=.03928?B/12.92:Math.pow((B+.055)/1.055,2.4))+.0722*(D<=.03928?D/12.92:Math.pow((D+.055)/1.055,2.4))}x.relativeLuminance=function(E){return S(E>>16&255,E>>8&255,255&E)},x.relativeLuminance2=S}(d||(s.rgb=d={})),function(x){function S($,k,O){const B=$>>24&255,D=$>>16&255,I=$>>8&255;let A=k>>24&255,P=k>>16&255,R=k>>8&255,N=v(d.relativeLuminance2(A,P,R),d.relativeLuminance2(B,D,I));for(;N<O&&(A>0||P>0||R>0);)A-=Math.max(0,Math.ceil(.1*A)),P-=Math.max(0,Math.ceil(.1*P)),R-=Math.max(0,Math.ceil(.1*R)),N=v(d.relativeLuminance2(A,P,R),d.relativeLuminance2(B,D,I));return(A<<24|P<<16|R<<8|255)>>>0}function E($,k,O){const B=$>>24&255,D=$>>16&255,I=$>>8&255;let A=k>>24&255,P=k>>16&255,R=k>>8&255,N=v(d.relativeLuminance2(A,P,R),d.relativeLuminance2(B,D,I));for(;N<O&&(A<255||P<255||R<255);)A=Math.min(255,A+Math.ceil(.1*(255-A))),P=Math.min(255,P+Math.ceil(.1*(255-P))),R=Math.min(255,R+Math.ceil(.1*(255-R))),N=v(d.relativeLuminance2(A,P,R),d.relativeLuminance2(B,D,I));return(A<<24|P<<16|R<<8|255)>>>0}x.ensureContrastRatio=function($,k,O){const B=d.relativeLuminance($>>8),D=d.relativeLuminance(k>>8);if(v(B,D)<O){if(D<B){const P=S($,k,O),R=v(B,d.relativeLuminance(P>>8));if(R<O){const N=E($,k,O);return R>v(B,d.relativeLuminance(N>>8))?P:N}return P}const I=E($,k,O),A=v(B,d.relativeLuminance(I>>8));if(A<O){const P=S($,k,O);return A>v(B,d.relativeLuminance(P>>8))?I:P}return I}},x.reduceLuminance=S,x.increaseLuminance=E,x.toChannels=function($){return[$>>24&255,$>>16&255,$>>8&255,255&$]},x.toColor=function($,k,O,B){return{css:C.toCss($,k,O,B),rgba:C.toRgba($,k,O,B)}}}(a||(s.rgba=a={})),s.toPaddedHex=c,s.contrastRatio=v},8969:(f,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreTerminal=void 0;const u=l(844),g=l(2585),p=l(4348),b=l(7866),m=l(744),C=l(7302),y=l(6975),n=l(8460),d=l(1753),a=l(1480),c=l(7994),v=l(9282),x=l(5435),S=l(5981),E=l(2660);let $=!1;class k extends u.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new n.EventEmitter),this._onScroll.event(B=>{var D;(D=this._onScrollApi)===null||D===void 0||D.fire(B.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(B){for(const D in B)this.optionsService.options[D]=B[D]}constructor(B){super(),this._windowsWrappingHeuristics=this.register(new u.MutableDisposable),this._onBinary=this.register(new n.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new n.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new n.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new n.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new n.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new n.EventEmitter),this._instantiationService=new p.InstantiationService,this.optionsService=this.register(new C.OptionsService(B)),this._instantiationService.setService(g.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(m.BufferService)),this._instantiationService.setService(g.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(b.LogService)),this._instantiationService.setService(g.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(y.CoreService)),this._instantiationService.setService(g.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(d.CoreMouseService)),this._instantiationService.setService(g.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(a.UnicodeService)),this._instantiationService.setService(g.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(c.CharsetService),this._instantiationService.setService(g.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(E.OscLinkService),this._instantiationService.setService(g.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new x.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,n.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,n.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,n.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,n.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(D=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(D=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new S.WriteBuffer((D,I)=>this._inputHandler.parse(D,I))),this.register((0,n.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(B,D){this._writeBuffer.write(B,D)}writeSync(B,D){this._logService.logLevel<=g.LogLevelEnum.WARN&&!$&&(this._logService.warn("writeSync is unreliable and will be removed soon."),$=!0),this._writeBuffer.writeSync(B,D)}resize(B,D){isNaN(B)||isNaN(D)||(B=Math.max(B,m.MINIMUM_COLS),D=Math.max(D,m.MINIMUM_ROWS),this._bufferService.resize(B,D))}scroll(B,D=!1){this._bufferService.scroll(B,D)}scrollLines(B,D,I){this._bufferService.scrollLines(B,D,I)}scrollPages(B){this.scrollLines(B*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(B){const D=B-this._bufferService.buffer.ydisp;D!==0&&this.scrollLines(D)}registerEscHandler(B,D){return this._inputHandler.registerEscHandler(B,D)}registerDcsHandler(B,D){return this._inputHandler.registerDcsHandler(B,D)}registerCsiHandler(B,D){return this._inputHandler.registerCsiHandler(B,D)}registerOscHandler(B,D){return this._inputHandler.registerOscHandler(B,D)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let B=!1;const D=this.optionsService.rawOptions.windowsPty;D&&D.buildNumber!==void 0&&D.buildNumber!==void 0?B=D.backend==="conpty"&&D.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(B=!0),B?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const B=[];B.push(this.onLineFeed(v.updateWindowsModeWrappedState.bind(null,this._bufferService))),B.push(this.registerCsiHandler({final:"H"},()=>((0,v.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,u.toDisposable)(()=>{for(const D of B)D.dispose()})}}}s.CoreTerminal=k},8460:(f,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.forwardEvent=s.EventEmitter=void 0,s.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=l=>(this._listeners.push(l),{dispose:()=>{if(!this._disposed){for(let u=0;u<this._listeners.length;u++)if(this._listeners[u]===l)return void this._listeners.splice(u,1)}}})),this._event}fire(l,u){const g=[];for(let p=0;p<this._listeners.length;p++)g.push(this._listeners[p]);for(let p=0;p<g.length;p++)g[p].call(void 0,l,u)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},s.forwardEvent=function(l,u){return l(g=>u.fire(g))}},5435:function(f,s,l){var u=this&&this.__decorate||function(N,w,H,z){var U,te=arguments.length,F=te<3?w:z===null?z=Object.getOwnPropertyDescriptor(w,H):z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(N,w,H,z);else for(var W=N.length-1;W>=0;W--)(U=N[W])&&(F=(te<3?U(F):te>3?U(w,H,F):U(w,H))||F);return te>3&&F&&Object.defineProperty(w,H,F),F},g=this&&this.__param||function(N,w){return function(H,z){w(H,z,N)}};Object.defineProperty(s,"__esModule",{value:!0}),s.InputHandler=s.WindowsOptionsReportType=void 0;const p=l(2584),b=l(7116),m=l(2015),C=l(844),y=l(482),n=l(8437),d=l(8460),a=l(643),c=l(511),v=l(3734),x=l(2585),S=l(6242),E=l(6351),$=l(5941),k={"(":0,")":1,"*":2,"+":3,"-":1,".":2},O=131072;function B(N,w){if(N>24)return w.setWinLines||!1;switch(N){case 1:return!!w.restoreWin;case 2:return!!w.minimizeWin;case 3:return!!w.setWinPosition;case 4:return!!w.setWinSizePixels;case 5:return!!w.raiseWin;case 6:return!!w.lowerWin;case 7:return!!w.refreshWin;case 8:return!!w.setWinSizeChars;case 9:return!!w.maximizeWin;case 10:return!!w.fullscreenWin;case 11:return!!w.getWinState;case 13:return!!w.getWinPosition;case 14:return!!w.getWinSizePixels;case 15:return!!w.getScreenSizePixels;case 16:return!!w.getCellSizePixels;case 18:return!!w.getWinSizeChars;case 19:return!!w.getScreenSizeChars;case 20:return!!w.getIconTitle;case 21:return!!w.getWinTitle;case 22:return!!w.pushTitle;case 23:return!!w.popTitle;case 24:return!!w.setWinLines}return!1}var D;(function(N){N[N.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",N[N.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(D||(s.WindowsOptionsReportType=D={}));let I=0;class A extends C.Disposable{getAttrData(){return this._curAttrData}constructor(w,H,z,U,te,F,W,V,de=new m.EscapeSequenceParser){super(),this._bufferService=w,this._charsetService=H,this._coreService=z,this._logService=U,this._optionsService=te,this._oscLinkService=F,this._coreMouseService=W,this._unicodeService=V,this._parser=de,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new y.StringToUtf32,this._utf8Decoder=new y.Utf8ToUtf32,this._workCell=new c.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new d.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new d.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new d.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new d.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new d.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new d.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new d.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new d.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new d.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new d.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new d.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new d.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new P(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(M=>this._activeBuffer=M.activeBuffer)),this._parser.setCsiHandlerFallback((M,j)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(M),params:j.toArray()})}),this._parser.setEscHandlerFallback(M=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(M)})}),this._parser.setExecuteHandlerFallback(M=>{this._logService.debug("Unknown EXECUTE code: ",{code:M})}),this._parser.setOscHandlerFallback((M,j,K)=>{this._logService.debug("Unknown OSC code: ",{identifier:M,action:j,data:K})}),this._parser.setDcsHandlerFallback((M,j,K)=>{j==="HOOK"&&(K=K.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(M),action:j,payload:K})}),this._parser.setPrintHandler((M,j,K)=>this.print(M,j,K)),this._parser.registerCsiHandler({final:"@"},M=>this.insertChars(M)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},M=>this.scrollLeft(M)),this._parser.registerCsiHandler({final:"A"},M=>this.cursorUp(M)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},M=>this.scrollRight(M)),this._parser.registerCsiHandler({final:"B"},M=>this.cursorDown(M)),this._parser.registerCsiHandler({final:"C"},M=>this.cursorForward(M)),this._parser.registerCsiHandler({final:"D"},M=>this.cursorBackward(M)),this._parser.registerCsiHandler({final:"E"},M=>this.cursorNextLine(M)),this._parser.registerCsiHandler({final:"F"},M=>this.cursorPrecedingLine(M)),this._parser.registerCsiHandler({final:"G"},M=>this.cursorCharAbsolute(M)),this._parser.registerCsiHandler({final:"H"},M=>this.cursorPosition(M)),this._parser.registerCsiHandler({final:"I"},M=>this.cursorForwardTab(M)),this._parser.registerCsiHandler({final:"J"},M=>this.eraseInDisplay(M,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},M=>this.eraseInDisplay(M,!0)),this._parser.registerCsiHandler({final:"K"},M=>this.eraseInLine(M,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},M=>this.eraseInLine(M,!0)),this._parser.registerCsiHandler({final:"L"},M=>this.insertLines(M)),this._parser.registerCsiHandler({final:"M"},M=>this.deleteLines(M)),this._parser.registerCsiHandler({final:"P"},M=>this.deleteChars(M)),this._parser.registerCsiHandler({final:"S"},M=>this.scrollUp(M)),this._parser.registerCsiHandler({final:"T"},M=>this.scrollDown(M)),this._parser.registerCsiHandler({final:"X"},M=>this.eraseChars(M)),this._parser.registerCsiHandler({final:"Z"},M=>this.cursorBackwardTab(M)),this._parser.registerCsiHandler({final:"`"},M=>this.charPosAbsolute(M)),this._parser.registerCsiHandler({final:"a"},M=>this.hPositionRelative(M)),this._parser.registerCsiHandler({final:"b"},M=>this.repeatPrecedingCharacter(M)),this._parser.registerCsiHandler({final:"c"},M=>this.sendDeviceAttributesPrimary(M)),this._parser.registerCsiHandler({prefix:">",final:"c"},M=>this.sendDeviceAttributesSecondary(M)),this._parser.registerCsiHandler({final:"d"},M=>this.linePosAbsolute(M)),this._parser.registerCsiHandler({final:"e"},M=>this.vPositionRelative(M)),this._parser.registerCsiHandler({final:"f"},M=>this.hVPosition(M)),this._parser.registerCsiHandler({final:"g"},M=>this.tabClear(M)),this._parser.registerCsiHandler({final:"h"},M=>this.setMode(M)),this._parser.registerCsiHandler({prefix:"?",final:"h"},M=>this.setModePrivate(M)),this._parser.registerCsiHandler({final:"l"},M=>this.resetMode(M)),this._parser.registerCsiHandler({prefix:"?",final:"l"},M=>this.resetModePrivate(M)),this._parser.registerCsiHandler({final:"m"},M=>this.charAttributes(M)),this._parser.registerCsiHandler({final:"n"},M=>this.deviceStatus(M)),this._parser.registerCsiHandler({prefix:"?",final:"n"},M=>this.deviceStatusPrivate(M)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},M=>this.softReset(M)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},M=>this.setCursorStyle(M)),this._parser.registerCsiHandler({final:"r"},M=>this.setScrollRegion(M)),this._parser.registerCsiHandler({final:"s"},M=>this.saveCursor(M)),this._parser.registerCsiHandler({final:"t"},M=>this.windowOptions(M)),this._parser.registerCsiHandler({final:"u"},M=>this.restoreCursor(M)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},M=>this.insertColumns(M)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},M=>this.deleteColumns(M)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},M=>this.selectProtected(M)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},M=>this.requestMode(M,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},M=>this.requestMode(M,!1)),this._parser.setExecuteHandler(p.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(p.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(p.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(p.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(p.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(p.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(p.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(p.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(p.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(p.C1.IND,()=>this.index()),this._parser.setExecuteHandler(p.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(p.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new S.OscHandler(M=>(this.setTitle(M),this.setIconName(M),!0))),this._parser.registerOscHandler(1,new S.OscHandler(M=>this.setIconName(M))),this._parser.registerOscHandler(2,new S.OscHandler(M=>this.setTitle(M))),this._parser.registerOscHandler(4,new S.OscHandler(M=>this.setOrReportIndexedColor(M))),this._parser.registerOscHandler(8,new S.OscHandler(M=>this.setHyperlink(M))),this._parser.registerOscHandler(10,new S.OscHandler(M=>this.setOrReportFgColor(M))),this._parser.registerOscHandler(11,new S.OscHandler(M=>this.setOrReportBgColor(M))),this._parser.registerOscHandler(12,new S.OscHandler(M=>this.setOrReportCursorColor(M))),this._parser.registerOscHandler(104,new S.OscHandler(M=>this.restoreIndexedColor(M))),this._parser.registerOscHandler(110,new S.OscHandler(M=>this.restoreFgColor(M))),this._parser.registerOscHandler(111,new S.OscHandler(M=>this.restoreBgColor(M))),this._parser.registerOscHandler(112,new S.OscHandler(M=>this.restoreCursorColor(M))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const M in b.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:M},()=>this.selectCharset("("+M)),this._parser.registerEscHandler({intermediates:")",final:M},()=>this.selectCharset(")"+M)),this._parser.registerEscHandler({intermediates:"*",final:M},()=>this.selectCharset("*"+M)),this._parser.registerEscHandler({intermediates:"+",final:M},()=>this.selectCharset("+"+M)),this._parser.registerEscHandler({intermediates:"-",final:M},()=>this.selectCharset("-"+M)),this._parser.registerEscHandler({intermediates:".",final:M},()=>this.selectCharset("."+M)),this._parser.registerEscHandler({intermediates:"/",final:M},()=>this.selectCharset("/"+M));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(M=>(this._logService.error("Parsing error: ",M),M)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new E.DcsHandler((M,j)=>this.requestStatusString(M,j)))}_preserveStack(w,H,z,U){this._parseStack.paused=!0,this._parseStack.cursorStartX=w,this._parseStack.cursorStartY=H,this._parseStack.decodedLength=z,this._parseStack.position=U}_logSlowResolvingAsync(w){this._logService.logLevel<=x.LogLevelEnum.WARN&&Promise.race([w,new Promise((H,z)=>setTimeout(()=>z("#SLOW_TIMEOUT"),5e3))]).catch(H=>{if(H!=="#SLOW_TIMEOUT")throw H;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(w,H){let z,U=this._activeBuffer.x,te=this._activeBuffer.y,F=0;const W=this._parseStack.paused;if(W){if(z=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,H))return this._logSlowResolvingAsync(z),z;U=this._parseStack.cursorStartX,te=this._parseStack.cursorStartY,this._parseStack.paused=!1,w.length>O&&(F=this._parseStack.position+O)}if(this._logService.logLevel<=x.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof w=="string"?` "${w}"`:` "${Array.prototype.map.call(w,V=>String.fromCharCode(V)).join("")}"`),typeof w=="string"?w.split("").map(V=>V.charCodeAt(0)):w),this._parseBuffer.length<w.length&&this._parseBuffer.length<O&&(this._parseBuffer=new Uint32Array(Math.min(w.length,O))),W||this._dirtyRowTracker.clearRange(),w.length>O)for(let V=F;V<w.length;V+=O){const de=V+O<w.length?V+O:w.length,M=typeof w=="string"?this._stringDecoder.decode(w.substring(V,de),this._parseBuffer):this._utf8Decoder.decode(w.subarray(V,de),this._parseBuffer);if(z=this._parser.parse(this._parseBuffer,M))return this._preserveStack(U,te,M,V),this._logSlowResolvingAsync(z),z}else if(!W){const V=typeof w=="string"?this._stringDecoder.decode(w,this._parseBuffer):this._utf8Decoder.decode(w,this._parseBuffer);if(z=this._parser.parse(this._parseBuffer,V))return this._preserveStack(U,te,V,0),this._logSlowResolvingAsync(z),z}this._activeBuffer.x===U&&this._activeBuffer.y===te||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(w,H,z){let U,te;const F=this._charsetService.charset,W=this._optionsService.rawOptions.screenReaderMode,V=this._bufferService.cols,de=this._coreService.decPrivateModes.wraparound,M=this._coreService.modes.insertMode,j=this._curAttrData;let K=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&z-H>0&&K.getWidth(this._activeBuffer.x-1)===2&&K.setCellFromCodePoint(this._activeBuffer.x-1,0,1,j.fg,j.bg,j.extended);for(let Z=H;Z<z;++Z){if(U=w[Z],te=this._unicodeService.wcwidth(U),U<127&&F){const se=F[String.fromCharCode(U)];se&&(U=se.charCodeAt(0))}if(W&&this._onA11yChar.fire((0,y.stringFromCodePoint)(U)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),te||!this._activeBuffer.x){if(this._activeBuffer.x+te-1>=V){if(de){for(;this._activeBuffer.x<V;)K.setCellFromCodePoint(this._activeBuffer.x++,0,1,j.fg,j.bg,j.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),K=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=V-1,te===2)continue}if(M&&(K.insertCells(this._activeBuffer.x,te,this._activeBuffer.getNullCell(j),j),K.getWidth(V-1)===2&&K.setCellFromCodePoint(V-1,a.NULL_CELL_CODE,a.NULL_CELL_WIDTH,j.fg,j.bg,j.extended)),K.setCellFromCodePoint(this._activeBuffer.x++,U,te,j.fg,j.bg,j.extended),te>0)for(;--te;)K.setCellFromCodePoint(this._activeBuffer.x++,0,0,j.fg,j.bg,j.extended)}else K.getWidth(this._activeBuffer.x-1)?K.addCodepointToCell(this._activeBuffer.x-1,U):K.addCodepointToCell(this._activeBuffer.x-2,U)}z-H>0&&(K.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<V&&z-H>0&&K.getWidth(this._activeBuffer.x)===0&&!K.hasContent(this._activeBuffer.x)&&K.setCellFromCodePoint(this._activeBuffer.x,0,1,j.fg,j.bg,j.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(w,H){return w.final!=="t"||w.prefix||w.intermediates?this._parser.registerCsiHandler(w,H):this._parser.registerCsiHandler(w,z=>!B(z.params[0],this._optionsService.rawOptions.windowOptions)||H(z))}registerDcsHandler(w,H){return this._parser.registerDcsHandler(w,new E.DcsHandler(H))}registerEscHandler(w,H){return this._parser.registerEscHandler(w,H)}registerOscHandler(w,H){return this._parser.registerOscHandler(w,new S.OscHandler(H))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var w;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((w=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||w===void 0)&&w.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);H.hasWidth(this._activeBuffer.x)&&!H.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const w=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-w),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(w=this._bufferService.cols-1){this._activeBuffer.x=Math.min(w,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(w,H){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=w,this._activeBuffer.y=this._activeBuffer.scrollTop+H):(this._activeBuffer.x=w,this._activeBuffer.y=H),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(w,H){this._restrictCursor(),this._setCursor(this._activeBuffer.x+w,this._activeBuffer.y+H)}cursorUp(w){const H=this._activeBuffer.y-this._activeBuffer.scrollTop;return H>=0?this._moveCursor(0,-Math.min(H,w.params[0]||1)):this._moveCursor(0,-(w.params[0]||1)),!0}cursorDown(w){const H=this._activeBuffer.scrollBottom-this._activeBuffer.y;return H>=0?this._moveCursor(0,Math.min(H,w.params[0]||1)):this._moveCursor(0,w.params[0]||1),!0}cursorForward(w){return this._moveCursor(w.params[0]||1,0),!0}cursorBackward(w){return this._moveCursor(-(w.params[0]||1),0),!0}cursorNextLine(w){return this.cursorDown(w),this._activeBuffer.x=0,!0}cursorPrecedingLine(w){return this.cursorUp(w),this._activeBuffer.x=0,!0}cursorCharAbsolute(w){return this._setCursor((w.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(w){return this._setCursor(w.length>=2?(w.params[1]||1)-1:0,(w.params[0]||1)-1),!0}charPosAbsolute(w){return this._setCursor((w.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(w){return this._moveCursor(w.params[0]||1,0),!0}linePosAbsolute(w){return this._setCursor(this._activeBuffer.x,(w.params[0]||1)-1),!0}vPositionRelative(w){return this._moveCursor(0,w.params[0]||1),!0}hVPosition(w){return this.cursorPosition(w),!0}tabClear(w){const H=w.params[0];return H===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:H===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(w){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let H=w.params[0]||1;for(;H--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(w){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let H=w.params[0]||1;for(;H--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(w){const H=w.params[0];return H===1&&(this._curAttrData.bg|=536870912),H!==2&&H!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(w,H,z,U=!1,te=!1){const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+w);F.replaceCells(H,z,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),te),U&&(F.isWrapped=!1)}_resetBufferLine(w,H=!1){const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+w);z&&(z.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),H),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+w),z.isWrapped=!1)}eraseInDisplay(w,H=!1){let z;switch(this._restrictCursor(this._bufferService.cols),w.params[0]){case 0:for(z=this._activeBuffer.y,this._dirtyRowTracker.markDirty(z),this._eraseInBufferLine(z++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,H);z<this._bufferService.rows;z++)this._resetBufferLine(z,H);this._dirtyRowTracker.markDirty(z);break;case 1:for(z=this._activeBuffer.y,this._dirtyRowTracker.markDirty(z),this._eraseInBufferLine(z,0,this._activeBuffer.x+1,!0,H),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(z+1).isWrapped=!1);z--;)this._resetBufferLine(z,H);this._dirtyRowTracker.markDirty(0);break;case 2:for(z=this._bufferService.rows,this._dirtyRowTracker.markDirty(z-1);z--;)this._resetBufferLine(z,H);this._dirtyRowTracker.markDirty(0);break;case 3:const U=this._activeBuffer.lines.length-this._bufferService.rows;U>0&&(this._activeBuffer.lines.trimStart(U),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-U,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-U,0),this._onScroll.fire(0))}return!0}eraseInLine(w,H=!1){switch(this._restrictCursor(this._bufferService.cols),w.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,H);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,H);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,H)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(w){this._restrictCursor();let H=w.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const z=this._activeBuffer.ybase+this._activeBuffer.y,U=this._bufferService.rows-1-this._activeBuffer.scrollBottom,te=this._bufferService.rows-1+this._activeBuffer.ybase-U+1;for(;H--;)this._activeBuffer.lines.splice(te-1,1),this._activeBuffer.lines.splice(z,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(w){this._restrictCursor();let H=w.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const z=this._activeBuffer.ybase+this._activeBuffer.y;let U;for(U=this._bufferService.rows-1-this._activeBuffer.scrollBottom,U=this._bufferService.rows-1+this._activeBuffer.ybase-U;H--;)this._activeBuffer.lines.splice(z,1),this._activeBuffer.lines.splice(U,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(w){this._restrictCursor();const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return H&&(H.insertCells(this._activeBuffer.x,w.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(w){this._restrictCursor();const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return H&&(H.deleteCells(this._activeBuffer.x,w.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(w){let H=w.params[0]||1;for(;H--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(w){let H=w.params[0]||1;for(;H--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(n.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(w){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=w.params[0]||1;for(let z=this._activeBuffer.scrollTop;z<=this._activeBuffer.scrollBottom;++z){const U=this._activeBuffer.lines.get(this._activeBuffer.ybase+z);U.deleteCells(0,H,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),U.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(w){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=w.params[0]||1;for(let z=this._activeBuffer.scrollTop;z<=this._activeBuffer.scrollBottom;++z){const U=this._activeBuffer.lines.get(this._activeBuffer.ybase+z);U.insertCells(0,H,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),U.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(w){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=w.params[0]||1;for(let z=this._activeBuffer.scrollTop;z<=this._activeBuffer.scrollBottom;++z){const U=this._activeBuffer.lines.get(this._activeBuffer.ybase+z);U.insertCells(this._activeBuffer.x,H,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),U.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(w){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=w.params[0]||1;for(let z=this._activeBuffer.scrollTop;z<=this._activeBuffer.scrollBottom;++z){const U=this._activeBuffer.lines.get(this._activeBuffer.ybase+z);U.deleteCells(this._activeBuffer.x,H,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),U.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(w){this._restrictCursor();const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return H&&(H.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(w.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(w){if(!this._parser.precedingCodepoint)return!0;const H=w.params[0]||1,z=new Uint32Array(H);for(let U=0;U<H;++U)z[U]=this._parser.precedingCodepoint;return this.print(z,0,z.length),!0}sendDeviceAttributesPrimary(w){return w.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(p.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(p.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(w){return w.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(p.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(p.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(w.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(p.C0.ESC+"[>83;40003;0c")),!0}_is(w){return(this._optionsService.rawOptions.termName+"").indexOf(w)===0}setMode(w){for(let H=0;H<w.length;H++)switch(w.params[H]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(w){for(let H=0;H<w.length;H++)switch(w.params[H]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,b.DEFAULT_CHARSET),this._charsetService.setgCharset(1,b.DEFAULT_CHARSET),this._charsetService.setgCharset(2,b.DEFAULT_CHARSET),this._charsetService.setgCharset(3,b.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(w){for(let H=0;H<w.length;H++)switch(w.params[H]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(w){for(let H=0;H<w.length;H++)switch(w.params[H]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),w.params[H]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(w,H){const z=this._coreService.decPrivateModes,{activeProtocol:U,activeEncoding:te}=this._coreMouseService,F=this._coreService,{buffers:W,cols:V}=this._bufferService,{active:de,alt:M}=W,j=this._optionsService.rawOptions,K=ae=>ae?1:2,Z=w.params[0];return se=Z,ee=H?Z===2?4:Z===4?K(F.modes.insertMode):Z===12?3:Z===20?K(j.convertEol):0:Z===1?K(z.applicationCursorKeys):Z===3?j.windowOptions.setWinLines?V===80?2:V===132?1:0:0:Z===6?K(z.origin):Z===7?K(z.wraparound):Z===8?3:Z===9?K(U==="X10"):Z===12?K(j.cursorBlink):Z===25?K(!F.isCursorHidden):Z===45?K(z.reverseWraparound):Z===66?K(z.applicationKeypad):Z===67?4:Z===1e3?K(U==="VT200"):Z===1002?K(U==="DRAG"):Z===1003?K(U==="ANY"):Z===1004?K(z.sendFocus):Z===1005?4:Z===1006?K(te==="SGR"):Z===1015?4:Z===1016?K(te==="SGR_PIXELS"):Z===1048?1:Z===47||Z===1047||Z===1049?K(de===M):Z===2004?K(z.bracketedPasteMode):0,F.triggerDataEvent(`${p.C0.ESC}[${H?"":"?"}${se};${ee}$y`),!0;var se,ee}_updateAttrColor(w,H,z,U,te){return H===2?(w|=50331648,w&=-16777216,w|=v.AttributeData.fromColorRGB([z,U,te])):H===5&&(w&=-50331904,w|=33554432|255&z),w}_extractColor(w,H,z){const U=[0,0,-1,0,0,0];let te=0,F=0;do{if(U[F+te]=w.params[H+F],w.hasSubParams(H+F)){const W=w.getSubParams(H+F);let V=0;do U[1]===5&&(te=1),U[F+V+1+te]=W[V];while(++V<W.length&&V+F+1+te<U.length);break}if(U[1]===5&&F+te>=2||U[1]===2&&F+te>=5)break;U[1]&&(te=1)}while(++F+H<w.length&&F+te<U.length);for(let W=2;W<U.length;++W)U[W]===-1&&(U[W]=0);switch(U[0]){case 38:z.fg=this._updateAttrColor(z.fg,U[1],U[3],U[4],U[5]);break;case 48:z.bg=this._updateAttrColor(z.bg,U[1],U[3],U[4],U[5]);break;case 58:z.extended=z.extended.clone(),z.extended.underlineColor=this._updateAttrColor(z.extended.underlineColor,U[1],U[3],U[4],U[5])}return F}_processUnderline(w,H){H.extended=H.extended.clone(),(!~w||w>5)&&(w=1),H.extended.underlineStyle=w,H.fg|=268435456,w===0&&(H.fg&=-268435457),H.updateExtended()}_processSGR0(w){w.fg=n.DEFAULT_ATTR_DATA.fg,w.bg=n.DEFAULT_ATTR_DATA.bg,w.extended=w.extended.clone(),w.extended.underlineStyle=0,w.extended.underlineColor&=-67108864,w.updateExtended()}charAttributes(w){if(w.length===1&&w.params[0]===0)return this._processSGR0(this._curAttrData),!0;const H=w.length;let z;const U=this._curAttrData;for(let te=0;te<H;te++)z=w.params[te],z>=30&&z<=37?(U.fg&=-50331904,U.fg|=16777216|z-30):z>=40&&z<=47?(U.bg&=-50331904,U.bg|=16777216|z-40):z>=90&&z<=97?(U.fg&=-50331904,U.fg|=16777224|z-90):z>=100&&z<=107?(U.bg&=-50331904,U.bg|=16777224|z-100):z===0?this._processSGR0(U):z===1?U.fg|=134217728:z===3?U.bg|=67108864:z===4?(U.fg|=268435456,this._processUnderline(w.hasSubParams(te)?w.getSubParams(te)[0]:1,U)):z===5?U.fg|=536870912:z===7?U.fg|=67108864:z===8?U.fg|=1073741824:z===9?U.fg|=2147483648:z===2?U.bg|=134217728:z===21?this._processUnderline(2,U):z===22?(U.fg&=-134217729,U.bg&=-134217729):z===23?U.bg&=-67108865:z===24?(U.fg&=-268435457,this._processUnderline(0,U)):z===25?U.fg&=-536870913:z===27?U.fg&=-67108865:z===28?U.fg&=-1073741825:z===29?U.fg&=2147483647:z===39?(U.fg&=-67108864,U.fg|=16777215&n.DEFAULT_ATTR_DATA.fg):z===49?(U.bg&=-67108864,U.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):z===38||z===48||z===58?te+=this._extractColor(w,te,U):z===53?U.bg|=1073741824:z===55?U.bg&=-1073741825:z===59?(U.extended=U.extended.clone(),U.extended.underlineColor=-1,U.updateExtended()):z===100?(U.fg&=-67108864,U.fg|=16777215&n.DEFAULT_ATTR_DATA.fg,U.bg&=-67108864,U.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",z);return!0}deviceStatus(w){switch(w.params[0]){case 5:this._coreService.triggerDataEvent(`${p.C0.ESC}[0n`);break;case 6:const H=this._activeBuffer.y+1,z=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${p.C0.ESC}[${H};${z}R`)}return!0}deviceStatusPrivate(w){if(w.params[0]===6){const H=this._activeBuffer.y+1,z=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${p.C0.ESC}[?${H};${z}R`)}return!0}softReset(w){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(w){const H=w.params[0]||1;switch(H){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const z=H%2==1;return this._optionsService.options.cursorBlink=z,!0}setScrollRegion(w){const H=w.params[0]||1;let z;return(w.length<2||(z=w.params[1])>this._bufferService.rows||z===0)&&(z=this._bufferService.rows),z>H&&(this._activeBuffer.scrollTop=H-1,this._activeBuffer.scrollBottom=z-1,this._setCursor(0,0)),!0}windowOptions(w){if(!B(w.params[0],this._optionsService.rawOptions.windowOptions))return!0;const H=w.length>1?w.params[1]:0;switch(w.params[0]){case 14:H!==2&&this._onRequestWindowsOptionsReport.fire(D.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(D.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${p.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:H!==0&&H!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),H!==0&&H!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:H!==0&&H!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),H!==0&&H!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(w){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(w){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(w){return this._windowTitle=w,this._onTitleChange.fire(w),!0}setIconName(w){return this._iconName=w,!0}setOrReportIndexedColor(w){const H=[],z=w.split(";");for(;z.length>1;){const U=z.shift(),te=z.shift();if(/^\d+$/.exec(U)){const F=parseInt(U);if(R(F))if(te==="?")H.push({type:0,index:F});else{const W=(0,$.parseColor)(te);W&&H.push({type:1,index:F,color:W})}}}return H.length&&this._onColor.fire(H),!0}setHyperlink(w){const H=w.split(";");return!(H.length<2)&&(H[1]?this._createHyperlink(H[0],H[1]):!H[0]&&this._finishHyperlink())}_createHyperlink(w,H){this._getCurrentLinkId()&&this._finishHyperlink();const z=w.split(":");let U;const te=z.findIndex(F=>F.startsWith("id="));return te!==-1&&(U=z[te].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:U,uri:H}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(w,H){const z=w.split(";");for(let U=0;U<z.length&&!(H>=this._specialColors.length);++U,++H)if(z[U]==="?")this._onColor.fire([{type:0,index:this._specialColors[H]}]);else{const te=(0,$.parseColor)(z[U]);te&&this._onColor.fire([{type:1,index:this._specialColors[H],color:te}])}return!0}setOrReportFgColor(w){return this._setOrReportSpecialColor(w,0)}setOrReportBgColor(w){return this._setOrReportSpecialColor(w,1)}setOrReportCursorColor(w){return this._setOrReportSpecialColor(w,2)}restoreIndexedColor(w){if(!w)return this._onColor.fire([{type:2}]),!0;const H=[],z=w.split(";");for(let U=0;U<z.length;++U)if(/^\d+$/.exec(z[U])){const te=parseInt(z[U]);R(te)&&H.push({type:2,index:te})}return H.length&&this._onColor.fire(H),!0}restoreFgColor(w){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(w){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(w){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,b.DEFAULT_CHARSET),!0}selectCharset(w){return w.length!==2?(this.selectDefaultCharset(),!0):(w[0]==="/"||this._charsetService.setgCharset(k[w[0]],b.CHARSETS[w[1]]||b.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const w=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,w,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(w){return this._charsetService.setgLevel(w),!0}screenAlignmentPattern(){const w=new c.CellData;w.content=4194373,w.fg=this._curAttrData.fg,w.bg=this._curAttrData.bg,this._setCursor(0,0);for(let H=0;H<this._bufferService.rows;++H){const z=this._activeBuffer.ybase+this._activeBuffer.y+H,U=this._activeBuffer.lines.get(z);U&&(U.fill(w),U.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(w,H){const z=this._bufferService.buffer,U=this._optionsService.rawOptions;return(te=>(this._coreService.triggerDataEvent(`${p.C0.ESC}${te}${p.C0.ESC}\\`),!0))(w==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:w==='"p'?'P1$r61;1"p':w==="r"?`P1$r${z.scrollTop+1};${z.scrollBottom+1}r`:w==="m"?"P1$r0m":w===" q"?`P1$r${{block:2,underline:4,bar:6}[U.cursorStyle]-(U.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(w,H){this._dirtyRowTracker.markRangeDirty(w,H)}}s.InputHandler=A;let P=class{constructor(N){this._bufferService=N,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(N){N<this.start?this.start=N:N>this.end&&(this.end=N)}markRangeDirty(N,w){N>w&&(I=N,N=w,w=I),N<this.start&&(this.start=N),w>this.end&&(this.end=w)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function R(N){return 0<=N&&N<256}P=u([g(0,x.IBufferService)],P)},844:(f,s)=>{function l(u){for(const g of u)g.dispose();u.length=0}Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.toDisposable=s.MutableDisposable=s.Disposable=void 0,s.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const u of this._disposables)u.dispose();this._disposables.length=0}register(u){return this._disposables.push(u),u}unregister(u){const g=this._disposables.indexOf(u);g!==-1&&this._disposables.splice(g,1)}},s.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(u){var g;this._isDisposed||u===this._value||((g=this._value)===null||g===void 0||g.dispose(),this._value=u)}clear(){this.value=void 0}dispose(){var u;this._isDisposed=!0,(u=this._value)===null||u===void 0||u.dispose(),this._value=void 0}},s.toDisposable=function(u){return{dispose:u}},s.disposeArray=l,s.getDisposeArrayDisposable=function(u){return{dispose:()=>l(u)}}},1505:(f,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FourKeyMap=s.TwoKeyMap=void 0;class l{constructor(){this._data={}}set(g,p,b){this._data[g]||(this._data[g]={}),this._data[g][p]=b}get(g,p){return this._data[g]?this._data[g][p]:void 0}clear(){this._data={}}}s.TwoKeyMap=l,s.FourKeyMap=class{constructor(){this._data=new l}set(u,g,p,b,m){this._data.get(u,g)||this._data.set(u,g,new l),this._data.get(u,g).set(p,b,m)}get(u,g,p,b){var m;return(m=this._data.get(u,g))===null||m===void 0?void 0:m.get(p,b)}clear(){this._data.clear()}}},6114:(f,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isChromeOS=s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.getSafariVersion=s.isSafari=s.isLegacyEdge=s.isFirefox=s.isNode=void 0,s.isNode=typeof navigator>"u";const l=s.isNode?"node":navigator.userAgent,u=s.isNode?"node":navigator.platform;s.isFirefox=l.includes("Firefox"),s.isLegacyEdge=l.includes("Edge"),s.isSafari=/^((?!chrome|android).)*safari/i.test(l),s.getSafariVersion=function(){if(!s.isSafari)return 0;const g=l.match(/Version\/(\d+)/);return g===null||g.length<2?0:parseInt(g[1])},s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(u),s.isIpad=u==="iPad",s.isIphone=u==="iPhone",s.isWindows=["Windows","Win16","Win32","WinCE"].includes(u),s.isLinux=u.indexOf("Linux")>=0,s.isChromeOS=/\bCrOS\b/.test(l)},6106:(f,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SortedList=void 0;let l=0;s.SortedList=class{constructor(u){this._getKey=u,this._array=[]}clear(){this._array.length=0}insert(u){this._array.length!==0?(l=this._search(this._getKey(u)),this._array.splice(l,0,u)):this._array.push(u)}delete(u){if(this._array.length===0)return!1;const g=this._getKey(u);if(g===void 0||(l=this._search(g),l===-1)||this._getKey(this._array[l])!==g)return!1;do if(this._array[l]===u)return this._array.splice(l,1),!0;while(++l<this._array.length&&this._getKey(this._array[l])===g);return!1}*getKeyIterator(u){if(this._array.length!==0&&(l=this._search(u),!(l<0||l>=this._array.length)&&this._getKey(this._array[l])===u))do yield this._array[l];while(++l<this._array.length&&this._getKey(this._array[l])===u)}forEachByKey(u,g){if(this._array.length!==0&&(l=this._search(u),!(l<0||l>=this._array.length)&&this._getKey(this._array[l])===u))do g(this._array[l]);while(++l<this._array.length&&this._getKey(this._array[l])===u)}values(){return[...this._array].values()}_search(u){let g=0,p=this._array.length-1;for(;p>=g;){let b=g+p>>1;const m=this._getKey(this._array[b]);if(m>u)p=b-1;else{if(!(m<u)){for(;b>0&&this._getKey(this._array[b-1])===u;)b--;return b}g=b+1}}return g}}},7226:(f,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DebouncedIdleTask=s.IdleTaskQueue=s.PriorityTaskQueue=void 0;const u=l(6114);class g{constructor(){this._tasks=[],this._i=0}enqueue(m){this._tasks.push(m),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(m){this._idleCallback=void 0;let C=0,y=0,n=m.timeRemaining(),d=0;for(;this._i<this._tasks.length;){if(C=Date.now(),this._tasks[this._i]()||this._i++,C=Math.max(1,Date.now()-C),y=Math.max(C,y),d=m.timeRemaining(),1.5*y>d)return n-C<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-C))}ms`),void this._start();n=d}this.clear()}}class p extends g{_requestCallback(m){return setTimeout(()=>m(this._createDeadline(16)))}_cancelCallback(m){clearTimeout(m)}_createDeadline(m){const C=Date.now()+m;return{timeRemaining:()=>Math.max(0,C-Date.now())}}}s.PriorityTaskQueue=p,s.IdleTaskQueue=!u.isNode&&"requestIdleCallback"in window?class extends g{_requestCallback(b){return requestIdleCallback(b)}_cancelCallback(b){cancelIdleCallback(b)}}:p,s.DebouncedIdleTask=class{constructor(){this._queue=new s.IdleTaskQueue}set(b){this._queue.clear(),this._queue.enqueue(b)}flush(){this._queue.flush()}}},9282:(f,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.updateWindowsModeWrappedState=void 0;const u=l(643);s.updateWindowsModeWrappedState=function(g){const p=g.buffer.lines.get(g.buffer.ybase+g.buffer.y-1),b=p?.get(g.cols-1),m=g.buffer.lines.get(g.buffer.ybase+g.buffer.y);m&&b&&(m.isWrapped=b[u.CHAR_DATA_CODE_INDEX]!==u.NULL_CELL_CODE&&b[u.CHAR_DATA_CODE_INDEX]!==u.WHITESPACE_CELL_CODE)}},3734:(f,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;class l{constructor(){this.fg=0,this.bg=0,this.extended=new u}static toColorRGB(p){return[p>>>16&255,p>>>8&255,255&p]}static fromColorRGB(p){return(255&p[0])<<16|(255&p[1])<<8|255&p[2]}clone(){const p=new l;return p.fg=this.fg,p.bg=this.bg,p.extended=this.extended.clone(),p}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}s.AttributeData=l;class u{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(p){this._ext=p}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(p){this._ext&=-469762049,this._ext|=p<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(p){this._ext&=-67108864,this._ext|=67108863&p}get urlId(){return this._urlId}set urlId(p){this._urlId=p}constructor(p=0,b=0){this._ext=0,this._urlId=0,this._ext=p,this._urlId=b}clone(){return new u(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}s.ExtendedAttrs=u},9092:(f,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Buffer=s.MAX_BUFFER_SIZE=void 0;const u=l(6349),g=l(7226),p=l(3734),b=l(8437),m=l(4634),C=l(511),y=l(643),n=l(4863),d=l(7116);s.MAX_BUFFER_SIZE=4294967295,s.Buffer=class{constructor(a,c,v){this._hasScrollback=a,this._optionsService=c,this._bufferService=v,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=b.DEFAULT_ATTR_DATA.clone(),this.savedCharset=d.DEFAULT_CHARSET,this.markers=[],this._nullCell=C.CellData.fromCharData([0,y.NULL_CELL_CHAR,y.NULL_CELL_WIDTH,y.NULL_CELL_CODE]),this._whitespaceCell=C.CellData.fromCharData([0,y.WHITESPACE_CELL_CHAR,y.WHITESPACE_CELL_WIDTH,y.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new g.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(a){return a?(this._nullCell.fg=a.fg,this._nullCell.bg=a.bg,this._nullCell.extended=a.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new p.ExtendedAttrs),this._nullCell}getWhitespaceCell(a){return a?(this._whitespaceCell.fg=a.fg,this._whitespaceCell.bg=a.bg,this._whitespaceCell.extended=a.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new p.ExtendedAttrs),this._whitespaceCell}getBlankLine(a,c){return new b.BufferLine(this._bufferService.cols,this.getNullCell(a),c)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const a=this.ybase+this.y-this.ydisp;return a>=0&&a<this._rows}_getCorrectBufferLength(a){if(!this._hasScrollback)return a;const c=a+this._optionsService.rawOptions.scrollback;return c>s.MAX_BUFFER_SIZE?s.MAX_BUFFER_SIZE:c}fillViewportRows(a){if(this.lines.length===0){a===void 0&&(a=b.DEFAULT_ATTR_DATA);let c=this._rows;for(;c--;)this.lines.push(this.getBlankLine(a))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(a,c){const v=this.getNullCell(b.DEFAULT_ATTR_DATA);let x=0;const S=this._getCorrectBufferLength(c);if(S>this.lines.maxLength&&(this.lines.maxLength=S),this.lines.length>0){if(this._cols<a)for(let $=0;$<this.lines.length;$++)x+=+this.lines.get($).resize(a,v);let E=0;if(this._rows<c)for(let $=this._rows;$<c;$++)this.lines.length<c+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new b.BufferLine(a,v)):this.ybase>0&&this.lines.length<=this.ybase+this.y+E+1?(this.ybase--,E++,this.ydisp>0&&this.ydisp--):this.lines.push(new b.BufferLine(a,v)));else for(let $=this._rows;$>c;$--)this.lines.length>c+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(S<this.lines.maxLength){const $=this.lines.length-S;$>0&&(this.lines.trimStart($),this.ybase=Math.max(this.ybase-$,0),this.ydisp=Math.max(this.ydisp-$,0),this.savedY=Math.max(this.savedY-$,0)),this.lines.maxLength=S}this.x=Math.min(this.x,a-1),this.y=Math.min(this.y,c-1),E&&(this.y+=E),this.savedX=Math.min(this.savedX,a-1),this.scrollTop=0}if(this.scrollBottom=c-1,this._isReflowEnabled&&(this._reflow(a,c),this._cols>a))for(let E=0;E<this.lines.length;E++)x+=+this.lines.get(E).resize(a,v);this._cols=a,this._rows=c,this._memoryCleanupQueue.clear(),x>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let a=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,a=!1);let c=0;for(;this._memoryCleanupPosition<this.lines.length;)if(c+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),c>100)return!0;return a}get _isReflowEnabled(){const a=this._optionsService.rawOptions.windowsPty;return a&&a.buildNumber?this._hasScrollback&&a.backend==="conpty"&&a.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(a,c){this._cols!==a&&(a>this._cols?this._reflowLarger(a,c):this._reflowSmaller(a,c))}_reflowLarger(a,c){const v=(0,m.reflowLargerGetLinesToRemove)(this.lines,this._cols,a,this.ybase+this.y,this.getNullCell(b.DEFAULT_ATTR_DATA));if(v.length>0){const x=(0,m.reflowLargerCreateNewLayout)(this.lines,v);(0,m.reflowLargerApplyNewLayout)(this.lines,x.layout),this._reflowLargerAdjustViewport(a,c,x.countRemoved)}}_reflowLargerAdjustViewport(a,c,v){const x=this.getNullCell(b.DEFAULT_ATTR_DATA);let S=v;for(;S-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<c&&this.lines.push(new b.BufferLine(a,x))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-v,0)}_reflowSmaller(a,c){const v=this.getNullCell(b.DEFAULT_ATTR_DATA),x=[];let S=0;for(let E=this.lines.length-1;E>=0;E--){let $=this.lines.get(E);if(!$||!$.isWrapped&&$.getTrimmedLength()<=a)continue;const k=[$];for(;$.isWrapped&&E>0;)$=this.lines.get(--E),k.unshift($);const O=this.ybase+this.y;if(O>=E&&O<E+k.length)continue;const B=k[k.length-1].getTrimmedLength(),D=(0,m.reflowSmallerGetNewLineLengths)(k,this._cols,a),I=D.length-k.length;let A;A=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+I):Math.max(0,this.lines.length-this.lines.maxLength+I);const P=[];for(let U=0;U<I;U++){const te=this.getBlankLine(b.DEFAULT_ATTR_DATA,!0);P.push(te)}P.length>0&&(x.push({start:E+k.length+S,newLines:P}),S+=P.length),k.push(...P);let R=D.length-1,N=D[R];N===0&&(R--,N=D[R]);let w=k.length-I-1,H=B;for(;w>=0;){const U=Math.min(H,N);if(k[R]===void 0)break;if(k[R].copyCellsFrom(k[w],H-U,N-U,U,!0),N-=U,N===0&&(R--,N=D[R]),H-=U,H===0){w--;const te=Math.max(w,0);H=(0,m.getWrappedLineTrimmedLength)(k,te,this._cols)}}for(let U=0;U<k.length;U++)D[U]<a&&k[U].setCell(D[U],v);let z=I-A;for(;z-- >0;)this.ybase===0?this.y<c-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+S)-c&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+I,this.ybase+c-1)}if(x.length>0){const E=[],$=[];for(let R=0;R<this.lines.length;R++)$.push(this.lines.get(R));const k=this.lines.length;let O=k-1,B=0,D=x[B];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+S);let I=0;for(let R=Math.min(this.lines.maxLength-1,k+S-1);R>=0;R--)if(D&&D.start>O+I){for(let N=D.newLines.length-1;N>=0;N--)this.lines.set(R--,D.newLines[N]);R++,E.push({index:O+1,amount:D.newLines.length}),I+=D.newLines.length,D=x[++B]}else this.lines.set(R,$[O--]);let A=0;for(let R=E.length-1;R>=0;R--)E[R].index+=A,this.lines.onInsertEmitter.fire(E[R]),A+=E[R].amount;const P=Math.max(0,k+S-this.lines.maxLength);P>0&&this.lines.onTrimEmitter.fire(P)}}translateBufferLineToString(a,c,v=0,x){const S=this.lines.get(a);return S?S.translateToString(c,v,x):""}getWrappedRangeForLine(a){let c=a,v=a;for(;c>0&&this.lines.get(c).isWrapped;)c--;for(;v+1<this.lines.length&&this.lines.get(v+1).isWrapped;)v++;return{first:c,last:v}}setupTabStops(a){for(a!=null?this.tabs[a]||(a=this.prevStop(a)):(this.tabs={},a=0);a<this._cols;a+=this._optionsService.rawOptions.tabStopWidth)this.tabs[a]=!0}prevStop(a){for(a==null&&(a=this.x);!this.tabs[--a]&&a>0;);return a>=this._cols?this._cols-1:a<0?0:a}nextStop(a){for(a==null&&(a=this.x);!this.tabs[++a]&&a<this._cols;);return a>=this._cols?this._cols-1:a<0?0:a}clearMarkers(a){this._isClearing=!0;for(let c=0;c<this.markers.length;c++)this.markers[c].line===a&&(this.markers[c].dispose(),this.markers.splice(c--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let a=0;a<this.markers.length;a++)this.markers[a].dispose(),this.markers.splice(a--,1);this._isClearing=!1}addMarker(a){const c=new n.Marker(a);return this.markers.push(c),c.register(this.lines.onTrim(v=>{c.line-=v,c.line<0&&c.dispose()})),c.register(this.lines.onInsert(v=>{c.line>=v.index&&(c.line+=v.amount)})),c.register(this.lines.onDelete(v=>{c.line>=v.index&&c.line<v.index+v.amount&&c.dispose(),c.line>v.index&&(c.line-=v.amount)})),c.register(c.onDispose(()=>this._removeMarker(c))),c}_removeMarker(a){this._isClearing||this.markers.splice(this.markers.indexOf(a),1)}}},8437:(f,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLine=s.DEFAULT_ATTR_DATA=void 0;const u=l(3734),g=l(511),p=l(643),b=l(482);s.DEFAULT_ATTR_DATA=Object.freeze(new u.AttributeData);let m=0;class C{constructor(n,d,a=!1){this.isWrapped=a,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*n);const c=d||g.CellData.fromCharData([0,p.NULL_CELL_CHAR,p.NULL_CELL_WIDTH,p.NULL_CELL_CODE]);for(let v=0;v<n;++v)this.setCell(v,c);this.length=n}get(n){const d=this._data[3*n+0],a=2097151&d;return[this._data[3*n+1],2097152&d?this._combined[n]:a?(0,b.stringFromCodePoint)(a):"",d>>22,2097152&d?this._combined[n].charCodeAt(this._combined[n].length-1):a]}set(n,d){this._data[3*n+1]=d[p.CHAR_DATA_ATTR_INDEX],d[p.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[n]=d[1],this._data[3*n+0]=2097152|n|d[p.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*n+0]=d[p.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|d[p.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(n){return this._data[3*n+0]>>22}hasWidth(n){return 12582912&this._data[3*n+0]}getFg(n){return this._data[3*n+1]}getBg(n){return this._data[3*n+2]}hasContent(n){return 4194303&this._data[3*n+0]}getCodePoint(n){const d=this._data[3*n+0];return 2097152&d?this._combined[n].charCodeAt(this._combined[n].length-1):2097151&d}isCombined(n){return 2097152&this._data[3*n+0]}getString(n){const d=this._data[3*n+0];return 2097152&d?this._combined[n]:2097151&d?(0,b.stringFromCodePoint)(2097151&d):""}isProtected(n){return 536870912&this._data[3*n+2]}loadCell(n,d){return m=3*n,d.content=this._data[m+0],d.fg=this._data[m+1],d.bg=this._data[m+2],2097152&d.content&&(d.combinedData=this._combined[n]),268435456&d.bg&&(d.extended=this._extendedAttrs[n]),d}setCell(n,d){2097152&d.content&&(this._combined[n]=d.combinedData),268435456&d.bg&&(this._extendedAttrs[n]=d.extended),this._data[3*n+0]=d.content,this._data[3*n+1]=d.fg,this._data[3*n+2]=d.bg}setCellFromCodePoint(n,d,a,c,v,x){268435456&v&&(this._extendedAttrs[n]=x),this._data[3*n+0]=d|a<<22,this._data[3*n+1]=c,this._data[3*n+2]=v}addCodepointToCell(n,d){let a=this._data[3*n+0];2097152&a?this._combined[n]+=(0,b.stringFromCodePoint)(d):(2097151&a?(this._combined[n]=(0,b.stringFromCodePoint)(2097151&a)+(0,b.stringFromCodePoint)(d),a&=-2097152,a|=2097152):a=d|4194304,this._data[3*n+0]=a)}insertCells(n,d,a,c){if((n%=this.length)&&this.getWidth(n-1)===2&&this.setCellFromCodePoint(n-1,0,1,c?.fg||0,c?.bg||0,c?.extended||new u.ExtendedAttrs),d<this.length-n){const v=new g.CellData;for(let x=this.length-n-d-1;x>=0;--x)this.setCell(n+d+x,this.loadCell(n+x,v));for(let x=0;x<d;++x)this.setCell(n+x,a)}else for(let v=n;v<this.length;++v)this.setCell(v,a);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,c?.fg||0,c?.bg||0,c?.extended||new u.ExtendedAttrs)}deleteCells(n,d,a,c){if(n%=this.length,d<this.length-n){const v=new g.CellData;for(let x=0;x<this.length-n-d;++x)this.setCell(n+x,this.loadCell(n+d+x,v));for(let x=this.length-d;x<this.length;++x)this.setCell(x,a)}else for(let v=n;v<this.length;++v)this.setCell(v,a);n&&this.getWidth(n-1)===2&&this.setCellFromCodePoint(n-1,0,1,c?.fg||0,c?.bg||0,c?.extended||new u.ExtendedAttrs),this.getWidth(n)!==0||this.hasContent(n)||this.setCellFromCodePoint(n,0,1,c?.fg||0,c?.bg||0,c?.extended||new u.ExtendedAttrs)}replaceCells(n,d,a,c,v=!1){if(v)for(n&&this.getWidth(n-1)===2&&!this.isProtected(n-1)&&this.setCellFromCodePoint(n-1,0,1,c?.fg||0,c?.bg||0,c?.extended||new u.ExtendedAttrs),d<this.length&&this.getWidth(d-1)===2&&!this.isProtected(d)&&this.setCellFromCodePoint(d,0,1,c?.fg||0,c?.bg||0,c?.extended||new u.ExtendedAttrs);n<d&&n<this.length;)this.isProtected(n)||this.setCell(n,a),n++;else for(n&&this.getWidth(n-1)===2&&this.setCellFromCodePoint(n-1,0,1,c?.fg||0,c?.bg||0,c?.extended||new u.ExtendedAttrs),d<this.length&&this.getWidth(d-1)===2&&this.setCellFromCodePoint(d,0,1,c?.fg||0,c?.bg||0,c?.extended||new u.ExtendedAttrs);n<d&&n<this.length;)this.setCell(n++,a)}resize(n,d){if(n===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const a=3*n;if(n>this.length){if(this._data.buffer.byteLength>=4*a)this._data=new Uint32Array(this._data.buffer,0,a);else{const c=new Uint32Array(a);c.set(this._data),this._data=c}for(let c=this.length;c<n;++c)this.setCell(c,d)}else{this._data=this._data.subarray(0,a);const c=Object.keys(this._combined);for(let x=0;x<c.length;x++){const S=parseInt(c[x],10);S>=n&&delete this._combined[S]}const v=Object.keys(this._extendedAttrs);for(let x=0;x<v.length;x++){const S=parseInt(v[x],10);S>=n&&delete this._extendedAttrs[S]}}return this.length=n,4*a*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const n=new Uint32Array(this._data.length);return n.set(this._data),this._data=n,1}return 0}fill(n,d=!1){if(d)for(let a=0;a<this.length;++a)this.isProtected(a)||this.setCell(a,n);else{this._combined={},this._extendedAttrs={};for(let a=0;a<this.length;++a)this.setCell(a,n)}}copyFrom(n){this.length!==n.length?this._data=new Uint32Array(n._data):this._data.set(n._data),this.length=n.length,this._combined={};for(const d in n._combined)this._combined[d]=n._combined[d];this._extendedAttrs={};for(const d in n._extendedAttrs)this._extendedAttrs[d]=n._extendedAttrs[d];this.isWrapped=n.isWrapped}clone(){const n=new C(0);n._data=new Uint32Array(this._data),n.length=this.length;for(const d in this._combined)n._combined[d]=this._combined[d];for(const d in this._extendedAttrs)n._extendedAttrs[d]=this._extendedAttrs[d];return n.isWrapped=this.isWrapped,n}getTrimmedLength(){for(let n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0])return n+(this._data[3*n+0]>>22);return 0}getNoBgTrimmedLength(){for(let n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0]||50331648&this._data[3*n+2])return n+(this._data[3*n+0]>>22);return 0}copyCellsFrom(n,d,a,c,v){const x=n._data;if(v)for(let E=c-1;E>=0;E--){for(let $=0;$<3;$++)this._data[3*(a+E)+$]=x[3*(d+E)+$];268435456&x[3*(d+E)+2]&&(this._extendedAttrs[a+E]=n._extendedAttrs[d+E])}else for(let E=0;E<c;E++){for(let $=0;$<3;$++)this._data[3*(a+E)+$]=x[3*(d+E)+$];268435456&x[3*(d+E)+2]&&(this._extendedAttrs[a+E]=n._extendedAttrs[d+E])}const S=Object.keys(n._combined);for(let E=0;E<S.length;E++){const $=parseInt(S[E],10);$>=d&&(this._combined[$-d+a]=n._combined[$])}}translateToString(n=!1,d=0,a=this.length){n&&(a=Math.min(a,this.getTrimmedLength()));let c="";for(;d<a;){const v=this._data[3*d+0],x=2097151&v;c+=2097152&v?this._combined[d]:x?(0,b.stringFromCodePoint)(x):p.WHITESPACE_CELL_CHAR,d+=v>>22||1}return c}}s.BufferLine=C},4841:(f,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getRangeLength=void 0,s.getRangeLength=function(l,u){if(l.start.y>l.end.y)throw new Error(`Buffer range end (${l.end.x}, ${l.end.y}) cannot be before start (${l.start.x}, ${l.start.y})`);return u*(l.end.y-l.start.y)+(l.end.x-l.start.x+1)}},4634:(f,s)=>{function l(u,g,p){if(g===u.length-1)return u[g].getTrimmedLength();const b=!u[g].hasContent(p-1)&&u[g].getWidth(p-1)===1,m=u[g+1].getWidth(0)===2;return b&&m?p-1:p}Object.defineProperty(s,"__esModule",{value:!0}),s.getWrappedLineTrimmedLength=s.reflowSmallerGetNewLineLengths=s.reflowLargerApplyNewLayout=s.reflowLargerCreateNewLayout=s.reflowLargerGetLinesToRemove=void 0,s.reflowLargerGetLinesToRemove=function(u,g,p,b,m){const C=[];for(let y=0;y<u.length-1;y++){let n=y,d=u.get(++n);if(!d.isWrapped)continue;const a=[u.get(y)];for(;n<u.length&&d.isWrapped;)a.push(d),d=u.get(++n);if(b>=y&&b<n){y+=a.length-1;continue}let c=0,v=l(a,c,g),x=1,S=0;for(;x<a.length;){const $=l(a,x,g),k=$-S,O=p-v,B=Math.min(k,O);a[c].copyCellsFrom(a[x],S,v,B,!1),v+=B,v===p&&(c++,v=0),S+=B,S===$&&(x++,S=0),v===0&&c!==0&&a[c-1].getWidth(p-1)===2&&(a[c].copyCellsFrom(a[c-1],p-1,v++,1,!1),a[c-1].setCell(p-1,m))}a[c].replaceCells(v,p,m);let E=0;for(let $=a.length-1;$>0&&($>c||a[$].getTrimmedLength()===0);$--)E++;E>0&&(C.push(y+a.length-E),C.push(E)),y+=a.length-1}return C},s.reflowLargerCreateNewLayout=function(u,g){const p=[];let b=0,m=g[b],C=0;for(let y=0;y<u.length;y++)if(m===y){const n=g[++b];u.onDeleteEmitter.fire({index:y-C,amount:n}),y+=n-1,C+=n,m=g[++b]}else p.push(y);return{layout:p,countRemoved:C}},s.reflowLargerApplyNewLayout=function(u,g){const p=[];for(let b=0;b<g.length;b++)p.push(u.get(g[b]));for(let b=0;b<p.length;b++)u.set(b,p[b]);u.length=g.length},s.reflowSmallerGetNewLineLengths=function(u,g,p){const b=[],m=u.map((d,a)=>l(u,a,g)).reduce((d,a)=>d+a);let C=0,y=0,n=0;for(;n<m;){if(m-n<p){b.push(m-n);break}C+=p;const d=l(u,y,g);C>d&&(C-=d,y++);const a=u[y].getWidth(C-1)===2;a&&C--;const c=a?p-1:p;b.push(c),n+=c}return b},s.getWrappedLineTrimmedLength=l},5295:(f,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferSet=void 0;const u=l(8460),g=l(844),p=l(9092);class b extends g.Disposable{constructor(C,y){super(),this._optionsService=C,this._bufferService=y,this._onBufferActivate=this.register(new u.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new p.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new p.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(C){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(C),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(C,y){this._normal.resize(C,y),this._alt.resize(C,y),this.setupTabStops(C)}setupTabStops(C){this._normal.setupTabStops(C),this._alt.setupTabStops(C)}}s.BufferSet=b},511:(f,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;const u=l(482),g=l(643),p=l(3734);class b extends p.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new p.ExtendedAttrs,this.combinedData=""}static fromCharData(C){const y=new b;return y.setFromCharData(C),y}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,u.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(C){this.fg=C[g.CHAR_DATA_ATTR_INDEX],this.bg=0;let y=!1;if(C[g.CHAR_DATA_CHAR_INDEX].length>2)y=!0;else if(C[g.CHAR_DATA_CHAR_INDEX].length===2){const n=C[g.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){const d=C[g.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=d&&d<=57343?this.content=1024*(n-55296)+d-56320+65536|C[g.CHAR_DATA_WIDTH_INDEX]<<22:y=!0}else y=!0}else this.content=C[g.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|C[g.CHAR_DATA_WIDTH_INDEX]<<22;y&&(this.combinedData=C[g.CHAR_DATA_CHAR_INDEX],this.content=2097152|C[g.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.CellData=b},643:(f,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_EXT=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=0,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.DEFAULT_EXT=0,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},4863:(f,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Marker=void 0;const u=l(8460),g=l(844);class p{get id(){return this._id}constructor(m){this.line=m,this.isDisposed=!1,this._disposables=[],this._id=p._nextId++,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,g.disposeArray)(this._disposables),this._disposables.length=0)}register(m){return this._disposables.push(m),m}}s.Marker=p,p._nextId=1},7116:(f,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DEFAULT_CHARSET=s.CHARSETS=void 0,s.CHARSETS={},s.DEFAULT_CHARSET=s.CHARSETS.B,s.CHARSETS[0]={"`":"â",a:"â",b:"â",c:"â",d:"â",e:"â",f:"Â°",g:"Â±",h:"â¤",i:"â",j:"â",k:"â",l:"â",m:"â",n:"â¼",o:"âº",p:"â»",q:"â",r:"â¼",s:"â½",t:"â",u:"â¤",v:"â´",w:"â¬",x:"â",y:"â¤",z:"â¥","{":"Ï","|":"â ","}":"Â£","~":"Â·"},s.CHARSETS.A={"#":"Â£"},s.CHARSETS.B=void 0,s.CHARSETS[4]={"#":"Â£","@":"Â¾","[":"ij","\\":"Â½","]":"|","{":"Â¨","|":"f","}":"Â¼","~":"Â´"},s.CHARSETS.C=s.CHARSETS[5]={"[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã©","{":"Ã¤","|":"Ã¶","}":"Ã¥","~":"Ã¼"},s.CHARSETS.R={"#":"Â£","@":"Ã ","[":"Â°","\\":"Ã§","]":"Â§","{":"Ã©","|":"Ã¹","}":"Ã¨","~":"Â¨"},s.CHARSETS.Q={"@":"Ã ","[":"Ã¢","\\":"Ã§","]":"Ãª","^":"Ã®","`":"Ã´","{":"Ã©","|":"Ã¹","}":"Ã¨","~":"Ã»"},s.CHARSETS.K={"@":"Â§","[":"Ã","\\":"Ã","]":"Ã","{":"Ã¤","|":"Ã¶","}":"Ã¼","~":"Ã"},s.CHARSETS.Y={"#":"Â£","@":"Â§","[":"Â°","\\":"Ã§","]":"Ã©","`":"Ã¹","{":"Ã ","|":"Ã²","}":"Ã¨","~":"Ã¬"},s.CHARSETS.E=s.CHARSETS[6]={"@":"Ã","[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã¤","{":"Ã¦","|":"Ã¸","}":"Ã¥","~":"Ã¼"},s.CHARSETS.Z={"#":"Â£","@":"Â§","[":"Â¡","\\":"Ã","]":"Â¿","{":"Â°","|":"Ã±","}":"Ã§"},s.CHARSETS.H=s.CHARSETS[7]={"@":"Ã","[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã©","{":"Ã¤","|":"Ã¶","}":"Ã¥","~":"Ã¼"},s.CHARSETS["="]={"#":"Ã¹","@":"Ã ","[":"Ã©","\\":"Ã§","]":"Ãª","^":"Ã®",_:"Ã¨","`":"Ã´","{":"Ã¤","|":"Ã¶","}":"Ã¼","~":"Ã»"}},2584:(f,s)=>{var l,u,g;Object.defineProperty(s,"__esModule",{value:!0}),s.C1_ESCAPED=s.C1=s.C0=void 0,function(p){p.NUL="\0",p.SOH="",p.STX="",p.ETX="",p.EOT="",p.ENQ="",p.ACK="",p.BEL="\x07",p.BS="\b",p.HT="	",p.LF=`
`,p.VT="\v",p.FF="\f",p.CR="\r",p.SO="",p.SI="",p.DLE="",p.DC1="",p.DC2="",p.DC3="",p.DC4="",p.NAK="",p.SYN="",p.ETB="",p.CAN="",p.EM="",p.SUB="",p.ESC="\x1B",p.FS="",p.GS="",p.RS="",p.US="",p.SP=" ",p.DEL=""}(l||(s.C0=l={})),function(p){p.PAD="Â",p.HOP="Â",p.BPH="Â",p.NBH="Â",p.IND="Â",p.NEL="Â",p.SSA="Â",p.ESA="Â",p.HTS="Â",p.HTJ="Â",p.VTS="Â",p.PLD="Â",p.PLU="Â",p.RI="Â",p.SS2="Â",p.SS3="Â",p.DCS="Â",p.PU1="Â",p.PU2="Â",p.STS="Â",p.CCH="Â",p.MW="Â",p.SPA="Â",p.EPA="Â",p.SOS="Â",p.SGCI="Â",p.SCI="Â",p.CSI="Â",p.ST="Â",p.OSC="Â",p.PM="Â",p.APC="Â"}(u||(s.C1=u={})),function(p){p.ST=`${l.ESC}\\`}(g||(s.C1_ESCAPED=g={}))},7399:(f,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.evaluateKeyboardEvent=void 0;const u=l(2584),g={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};s.evaluateKeyboardEvent=function(p,b,m,C){const y={type:0,cancel:!1,key:void 0},n=(p.shiftKey?1:0)|(p.altKey?2:0)|(p.ctrlKey?4:0)|(p.metaKey?8:0);switch(p.keyCode){case 0:p.key==="UIKeyInputUpArrow"?y.key=b?u.C0.ESC+"OA":u.C0.ESC+"[A":p.key==="UIKeyInputLeftArrow"?y.key=b?u.C0.ESC+"OD":u.C0.ESC+"[D":p.key==="UIKeyInputRightArrow"?y.key=b?u.C0.ESC+"OC":u.C0.ESC+"[C":p.key==="UIKeyInputDownArrow"&&(y.key=b?u.C0.ESC+"OB":u.C0.ESC+"[B");break;case 8:if(p.altKey){y.key=u.C0.ESC+u.C0.DEL;break}y.key=u.C0.DEL;break;case 9:if(p.shiftKey){y.key=u.C0.ESC+"[Z";break}y.key=u.C0.HT,y.cancel=!0;break;case 13:y.key=p.altKey?u.C0.ESC+u.C0.CR:u.C0.CR,y.cancel=!0;break;case 27:y.key=u.C0.ESC,p.altKey&&(y.key=u.C0.ESC+u.C0.ESC),y.cancel=!0;break;case 37:if(p.metaKey)break;n?(y.key=u.C0.ESC+"[1;"+(n+1)+"D",y.key===u.C0.ESC+"[1;3D"&&(y.key=u.C0.ESC+(m?"b":"[1;5D"))):y.key=b?u.C0.ESC+"OD":u.C0.ESC+"[D";break;case 39:if(p.metaKey)break;n?(y.key=u.C0.ESC+"[1;"+(n+1)+"C",y.key===u.C0.ESC+"[1;3C"&&(y.key=u.C0.ESC+(m?"f":"[1;5C"))):y.key=b?u.C0.ESC+"OC":u.C0.ESC+"[C";break;case 38:if(p.metaKey)break;n?(y.key=u.C0.ESC+"[1;"+(n+1)+"A",m||y.key!==u.C0.ESC+"[1;3A"||(y.key=u.C0.ESC+"[1;5A")):y.key=b?u.C0.ESC+"OA":u.C0.ESC+"[A";break;case 40:if(p.metaKey)break;n?(y.key=u.C0.ESC+"[1;"+(n+1)+"B",m||y.key!==u.C0.ESC+"[1;3B"||(y.key=u.C0.ESC+"[1;5B")):y.key=b?u.C0.ESC+"OB":u.C0.ESC+"[B";break;case 45:p.shiftKey||p.ctrlKey||(y.key=u.C0.ESC+"[2~");break;case 46:y.key=n?u.C0.ESC+"[3;"+(n+1)+"~":u.C0.ESC+"[3~";break;case 36:y.key=n?u.C0.ESC+"[1;"+(n+1)+"H":b?u.C0.ESC+"OH":u.C0.ESC+"[H";break;case 35:y.key=n?u.C0.ESC+"[1;"+(n+1)+"F":b?u.C0.ESC+"OF":u.C0.ESC+"[F";break;case 33:p.shiftKey?y.type=2:p.ctrlKey?y.key=u.C0.ESC+"[5;"+(n+1)+"~":y.key=u.C0.ESC+"[5~";break;case 34:p.shiftKey?y.type=3:p.ctrlKey?y.key=u.C0.ESC+"[6;"+(n+1)+"~":y.key=u.C0.ESC+"[6~";break;case 112:y.key=n?u.C0.ESC+"[1;"+(n+1)+"P":u.C0.ESC+"OP";break;case 113:y.key=n?u.C0.ESC+"[1;"+(n+1)+"Q":u.C0.ESC+"OQ";break;case 114:y.key=n?u.C0.ESC+"[1;"+(n+1)+"R":u.C0.ESC+"OR";break;case 115:y.key=n?u.C0.ESC+"[1;"+(n+1)+"S":u.C0.ESC+"OS";break;case 116:y.key=n?u.C0.ESC+"[15;"+(n+1)+"~":u.C0.ESC+"[15~";break;case 117:y.key=n?u.C0.ESC+"[17;"+(n+1)+"~":u.C0.ESC+"[17~";break;case 118:y.key=n?u.C0.ESC+"[18;"+(n+1)+"~":u.C0.ESC+"[18~";break;case 119:y.key=n?u.C0.ESC+"[19;"+(n+1)+"~":u.C0.ESC+"[19~";break;case 120:y.key=n?u.C0.ESC+"[20;"+(n+1)+"~":u.C0.ESC+"[20~";break;case 121:y.key=n?u.C0.ESC+"[21;"+(n+1)+"~":u.C0.ESC+"[21~";break;case 122:y.key=n?u.C0.ESC+"[23;"+(n+1)+"~":u.C0.ESC+"[23~";break;case 123:y.key=n?u.C0.ESC+"[24;"+(n+1)+"~":u.C0.ESC+"[24~";break;default:if(!p.ctrlKey||p.shiftKey||p.altKey||p.metaKey)if(m&&!C||!p.altKey||p.metaKey)!m||p.altKey||p.ctrlKey||p.shiftKey||!p.metaKey?p.key&&!p.ctrlKey&&!p.altKey&&!p.metaKey&&p.keyCode>=48&&p.key.length===1?y.key=p.key:p.key&&p.ctrlKey&&(p.key==="_"&&(y.key=u.C0.US),p.key==="@"&&(y.key=u.C0.NUL)):p.keyCode===65&&(y.type=1);else{const d=g[p.keyCode],a=d?.[p.shiftKey?1:0];if(a)y.key=u.C0.ESC+a;else if(p.keyCode>=65&&p.keyCode<=90){const c=p.ctrlKey?p.keyCode-64:p.keyCode+32;let v=String.fromCharCode(c);p.shiftKey&&(v=v.toUpperCase()),y.key=u.C0.ESC+v}else if(p.keyCode===32)y.key=u.C0.ESC+(p.ctrlKey?u.C0.NUL:" ");else if(p.key==="Dead"&&p.code.startsWith("Key")){let c=p.code.slice(3,4);p.shiftKey||(c=c.toLowerCase()),y.key=u.C0.ESC+c,y.cancel=!0}}else p.keyCode>=65&&p.keyCode<=90?y.key=String.fromCharCode(p.keyCode-64):p.keyCode===32?y.key=u.C0.NUL:p.keyCode>=51&&p.keyCode<=55?y.key=String.fromCharCode(p.keyCode-51+27):p.keyCode===56?y.key=u.C0.DEL:p.keyCode===219?y.key=u.C0.ESC:p.keyCode===220?y.key=u.C0.FS:p.keyCode===221&&(y.key=u.C0.GS)}return y}},482:(f,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(l){return l>65535?(l-=65536,String.fromCharCode(55296+(l>>10))+String.fromCharCode(l%1024+56320)):String.fromCharCode(l)},s.utf32ToString=function(l,u=0,g=l.length){let p="";for(let b=u;b<g;++b){let m=l[b];m>65535?(m-=65536,p+=String.fromCharCode(55296+(m>>10))+String.fromCharCode(m%1024+56320)):p+=String.fromCharCode(m)}return p},s.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(l,u){const g=l.length;if(!g)return 0;let p=0,b=0;if(this._interim){const m=l.charCodeAt(b++);56320<=m&&m<=57343?u[p++]=1024*(this._interim-55296)+m-56320+65536:(u[p++]=this._interim,u[p++]=m),this._interim=0}for(let m=b;m<g;++m){const C=l.charCodeAt(m);if(55296<=C&&C<=56319){if(++m>=g)return this._interim=C,p;const y=l.charCodeAt(m);56320<=y&&y<=57343?u[p++]=1024*(C-55296)+y-56320+65536:(u[p++]=C,u[p++]=y)}else C!==65279&&(u[p++]=C)}return p}},s.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(l,u){const g=l.length;if(!g)return 0;let p,b,m,C,y=0,n=0,d=0;if(this.interim[0]){let v=!1,x=this.interim[0];x&=(224&x)==192?31:(240&x)==224?15:7;let S,E=0;for(;(S=63&this.interim[++E])&&E<4;)x<<=6,x|=S;const $=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,k=$-E;for(;d<k;){if(d>=g)return 0;if(S=l[d++],(192&S)!=128){d--,v=!0;break}this.interim[E++]=S,x<<=6,x|=63&S}v||($===2?x<128?d--:u[y++]=x:$===3?x<2048||x>=55296&&x<=57343||x===65279||(u[y++]=x):x<65536||x>1114111||(u[y++]=x)),this.interim.fill(0)}const a=g-4;let c=d;for(;c<g;){for(;!(!(c<a)||128&(p=l[c])||128&(b=l[c+1])||128&(m=l[c+2])||128&(C=l[c+3]));)u[y++]=p,u[y++]=b,u[y++]=m,u[y++]=C,c+=4;if(p=l[c++],p<128)u[y++]=p;else if((224&p)==192){if(c>=g)return this.interim[0]=p,y;if(b=l[c++],(192&b)!=128){c--;continue}if(n=(31&p)<<6|63&b,n<128){c--;continue}u[y++]=n}else if((240&p)==224){if(c>=g)return this.interim[0]=p,y;if(b=l[c++],(192&b)!=128){c--;continue}if(c>=g)return this.interim[0]=p,this.interim[1]=b,y;if(m=l[c++],(192&m)!=128){c--;continue}if(n=(15&p)<<12|(63&b)<<6|63&m,n<2048||n>=55296&&n<=57343||n===65279)continue;u[y++]=n}else if((248&p)==240){if(c>=g)return this.interim[0]=p,y;if(b=l[c++],(192&b)!=128){c--;continue}if(c>=g)return this.interim[0]=p,this.interim[1]=b,y;if(m=l[c++],(192&m)!=128){c--;continue}if(c>=g)return this.interim[0]=p,this.interim[1]=b,this.interim[2]=m,y;if(C=l[c++],(192&C)!=128){c--;continue}if(n=(7&p)<<18|(63&b)<<12|(63&m)<<6|63&C,n<65536||n>1114111)continue;u[y++]=n}}return y}}},225:(f,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeV6=void 0;const l=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],u=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let g;s.UnicodeV6=class{constructor(){if(this.version="6",!g){g=new Uint8Array(65536),g.fill(1),g[0]=0,g.fill(0,1,32),g.fill(0,127,160),g.fill(2,4352,4448),g[9001]=2,g[9002]=2,g.fill(2,11904,42192),g[12351]=1,g.fill(2,44032,55204),g.fill(2,63744,64256),g.fill(2,65040,65050),g.fill(2,65072,65136),g.fill(2,65280,65377),g.fill(2,65504,65511);for(let p=0;p<l.length;++p)g.fill(0,l[p][0],l[p][1]+1)}}wcwidth(p){return p<32?0:p<127?1:p<65536?g[p]:function(b,m){let C,y=0,n=m.length-1;if(b<m[0][0]||b>m[n][1])return!1;for(;n>=y;)if(C=y+n>>1,b>m[C][1])y=C+1;else{if(!(b<m[C][0]))return!0;n=C-1}return!1}(p,u)?0:p>=131072&&p<=196605||p>=196608&&p<=262141?2:1}}},5981:(f,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WriteBuffer=void 0;const u=l(8460),g=l(844);class p extends g.Disposable{constructor(m){super(),this._action=m,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new u.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(m,C){if(C!==void 0&&this._syncCalls>C)return void(this._syncCalls=0);if(this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let y;for(this._isSyncWriting=!0;y=this._writeBuffer.shift();){this._action(y);const n=this._callbacks.shift();n&&n()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(m,C){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(C),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(C)}_innerWrite(m=0,C=!0){const y=m||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const n=this._writeBuffer[this._bufferOffset],d=this._action(n,C);if(d){const c=v=>Date.now()-y>=12?setTimeout(()=>this._innerWrite(0,v)):this._innerWrite(y,v);return void d.catch(v=>(queueMicrotask(()=>{throw v}),Promise.resolve(!1))).then(c)}const a=this._callbacks[this._bufferOffset];if(a&&a(),this._bufferOffset++,this._pendingData-=n.length,Date.now()-y>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}s.WriteBuffer=p},5941:(f,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.toRgbString=s.parseColor=void 0;const l=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,u=/^[\da-f]+$/;function g(p,b){const m=p.toString(16),C=m.length<2?"0"+m:m;switch(b){case 4:return m[0];case 8:return C;case 12:return(C+C).slice(0,3);default:return C+C}}s.parseColor=function(p){if(!p)return;let b=p.toLowerCase();if(b.indexOf("rgb:")===0){b=b.slice(4);const m=l.exec(b);if(m){const C=m[1]?15:m[4]?255:m[7]?4095:65535;return[Math.round(parseInt(m[1]||m[4]||m[7]||m[10],16)/C*255),Math.round(parseInt(m[2]||m[5]||m[8]||m[11],16)/C*255),Math.round(parseInt(m[3]||m[6]||m[9]||m[12],16)/C*255)]}}else if(b.indexOf("#")===0&&(b=b.slice(1),u.exec(b)&&[3,6,9,12].includes(b.length))){const m=b.length/3,C=[0,0,0];for(let y=0;y<3;++y){const n=parseInt(b.slice(m*y,m*y+m),16);C[y]=m===1?n<<4:m===2?n:m===3?n>>4:n>>8}return C}},s.toRgbString=function(p,b=16){const[m,C,y]=p;return`rgb:${g(m,b)}/${g(C,b)}/${g(y,b)}`}},5770:(f,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PAYLOAD_LIMIT=void 0,s.PAYLOAD_LIMIT=1e7},6351:(f,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DcsHandler=s.DcsParser=void 0;const u=l(482),g=l(8742),p=l(5770),b=[];s.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=b,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=b}registerHandler(C,y){this._handlers[C]===void 0&&(this._handlers[C]=[]);const n=this._handlers[C];return n.push(y),{dispose:()=>{const d=n.indexOf(y);d!==-1&&n.splice(d,1)}}}clearHandler(C){this._handlers[C]&&delete this._handlers[C]}setHandlerFallback(C){this._handlerFb=C}reset(){if(this._active.length)for(let C=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;C>=0;--C)this._active[C].unhook(!1);this._stack.paused=!1,this._active=b,this._ident=0}hook(C,y){if(this.reset(),this._ident=C,this._active=this._handlers[C]||b,this._active.length)for(let n=this._active.length-1;n>=0;n--)this._active[n].hook(y);else this._handlerFb(this._ident,"HOOK",y)}put(C,y,n){if(this._active.length)for(let d=this._active.length-1;d>=0;d--)this._active[d].put(C,y,n);else this._handlerFb(this._ident,"PUT",(0,u.utf32ToString)(C,y,n))}unhook(C,y=!0){if(this._active.length){let n=!1,d=this._active.length-1,a=!1;if(this._stack.paused&&(d=this._stack.loopPosition-1,n=y,a=this._stack.fallThrough,this._stack.paused=!1),!a&&n===!1){for(;d>=0&&(n=this._active[d].unhook(C),n!==!0);d--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!1,n;d--}for(;d>=0;d--)if(n=this._active[d].unhook(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!0,n}else this._handlerFb(this._ident,"UNHOOK",C);this._active=b,this._ident=0}};const m=new g.Params;m.addParam(0),s.DcsHandler=class{constructor(C){this._handler=C,this._data="",this._params=m,this._hitLimit=!1}hook(C){this._params=C.length>1||C.params[0]?C.clone():m,this._data="",this._hitLimit=!1}put(C,y,n){this._hitLimit||(this._data+=(0,u.utf32ToString)(C,y,n),this._data.length>p.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(C){let y=!1;if(this._hitLimit)y=!1;else if(C&&(y=this._handler(this._data,this._params),y instanceof Promise))return y.then(n=>(this._params=m,this._data="",this._hitLimit=!1,n));return this._params=m,this._data="",this._hitLimit=!1,y}}},2015:(f,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.EscapeSequenceParser=s.VT500_TRANSITION_TABLE=s.TransitionTable=void 0;const u=l(844),g=l(8742),p=l(6242),b=l(6351);class m{constructor(d){this.table=new Uint8Array(d)}setDefault(d,a){this.table.fill(d<<4|a)}add(d,a,c,v){this.table[a<<8|d]=c<<4|v}addMany(d,a,c,v){for(let x=0;x<d.length;x++)this.table[a<<8|d[x]]=c<<4|v}}s.TransitionTable=m;const C=160;s.VT500_TRANSITION_TABLE=function(){const n=new m(4095),d=Array.apply(null,Array(256)).map((E,$)=>$),a=(E,$)=>d.slice(E,$),c=a(32,127),v=a(0,24);v.push(25),v.push.apply(v,a(28,32));const x=a(0,14);let S;for(S in n.setDefault(1,0),n.addMany(c,0,2,0),x)n.addMany([24,26,153,154],S,3,0),n.addMany(a(128,144),S,3,0),n.addMany(a(144,152),S,3,0),n.add(156,S,0,0),n.add(27,S,11,1),n.add(157,S,4,8),n.addMany([152,158,159],S,0,7),n.add(155,S,11,3),n.add(144,S,11,9);return n.addMany(v,0,3,0),n.addMany(v,1,3,1),n.add(127,1,0,1),n.addMany(v,8,0,8),n.addMany(v,3,3,3),n.add(127,3,0,3),n.addMany(v,4,3,4),n.add(127,4,0,4),n.addMany(v,6,3,6),n.addMany(v,5,3,5),n.add(127,5,0,5),n.addMany(v,2,3,2),n.add(127,2,0,2),n.add(93,1,4,8),n.addMany(c,8,5,8),n.add(127,8,5,8),n.addMany([156,27,24,26,7],8,6,0),n.addMany(a(28,32),8,0,8),n.addMany([88,94,95],1,0,7),n.addMany(c,7,0,7),n.addMany(v,7,0,7),n.add(156,7,0,0),n.add(127,7,0,7),n.add(91,1,11,3),n.addMany(a(64,127),3,7,0),n.addMany(a(48,60),3,8,4),n.addMany([60,61,62,63],3,9,4),n.addMany(a(48,60),4,8,4),n.addMany(a(64,127),4,7,0),n.addMany([60,61,62,63],4,0,6),n.addMany(a(32,64),6,0,6),n.add(127,6,0,6),n.addMany(a(64,127),6,0,0),n.addMany(a(32,48),3,9,5),n.addMany(a(32,48),5,9,5),n.addMany(a(48,64),5,0,6),n.addMany(a(64,127),5,7,0),n.addMany(a(32,48),4,9,5),n.addMany(a(32,48),1,9,2),n.addMany(a(32,48),2,9,2),n.addMany(a(48,127),2,10,0),n.addMany(a(48,80),1,10,0),n.addMany(a(81,88),1,10,0),n.addMany([89,90,92],1,10,0),n.addMany(a(96,127),1,10,0),n.add(80,1,11,9),n.addMany(v,9,0,9),n.add(127,9,0,9),n.addMany(a(28,32),9,0,9),n.addMany(a(32,48),9,9,12),n.addMany(a(48,60),9,8,10),n.addMany([60,61,62,63],9,9,10),n.addMany(v,11,0,11),n.addMany(a(32,128),11,0,11),n.addMany(a(28,32),11,0,11),n.addMany(v,10,0,10),n.add(127,10,0,10),n.addMany(a(28,32),10,0,10),n.addMany(a(48,60),10,8,10),n.addMany([60,61,62,63],10,0,11),n.addMany(a(32,48),10,9,12),n.addMany(v,12,0,12),n.add(127,12,0,12),n.addMany(a(28,32),12,0,12),n.addMany(a(32,48),12,9,12),n.addMany(a(48,64),12,0,11),n.addMany(a(64,127),12,12,13),n.addMany(a(64,127),10,12,13),n.addMany(a(64,127),9,12,13),n.addMany(v,13,13,13),n.addMany(c,13,13,13),n.add(127,13,0,13),n.addMany([27,156,24,26],13,14,0),n.add(C,0,2,0),n.add(C,8,5,8),n.add(C,6,0,6),n.add(C,11,0,11),n.add(C,13,13,13),n}();class y extends u.Disposable{constructor(d=s.VT500_TRANSITION_TABLE){super(),this._transitions=d,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new g.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(a,c,v)=>{},this._executeHandlerFb=a=>{},this._csiHandlerFb=(a,c)=>{},this._escHandlerFb=a=>{},this._errorHandlerFb=a=>a,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,u.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new p.OscParser),this._dcsParser=this.register(new b.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(d,a=[64,126]){let c=0;if(d.prefix){if(d.prefix.length>1)throw new Error("only one byte as prefix supported");if(c=d.prefix.charCodeAt(0),c&&60>c||c>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(d.intermediates){if(d.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let x=0;x<d.intermediates.length;++x){const S=d.intermediates.charCodeAt(x);if(32>S||S>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");c<<=8,c|=S}}if(d.final.length!==1)throw new Error("final must be a single byte");const v=d.final.charCodeAt(0);if(a[0]>v||v>a[1])throw new Error(`final must be in range ${a[0]} .. ${a[1]}`);return c<<=8,c|=v,c}identToString(d){const a=[];for(;d;)a.push(String.fromCharCode(255&d)),d>>=8;return a.reverse().join("")}setPrintHandler(d){this._printHandler=d}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(d,a){const c=this._identifier(d,[48,126]);this._escHandlers[c]===void 0&&(this._escHandlers[c]=[]);const v=this._escHandlers[c];return v.push(a),{dispose:()=>{const x=v.indexOf(a);x!==-1&&v.splice(x,1)}}}clearEscHandler(d){this._escHandlers[this._identifier(d,[48,126])]&&delete this._escHandlers[this._identifier(d,[48,126])]}setEscHandlerFallback(d){this._escHandlerFb=d}setExecuteHandler(d,a){this._executeHandlers[d.charCodeAt(0)]=a}clearExecuteHandler(d){this._executeHandlers[d.charCodeAt(0)]&&delete this._executeHandlers[d.charCodeAt(0)]}setExecuteHandlerFallback(d){this._executeHandlerFb=d}registerCsiHandler(d,a){const c=this._identifier(d);this._csiHandlers[c]===void 0&&(this._csiHandlers[c]=[]);const v=this._csiHandlers[c];return v.push(a),{dispose:()=>{const x=v.indexOf(a);x!==-1&&v.splice(x,1)}}}clearCsiHandler(d){this._csiHandlers[this._identifier(d)]&&delete this._csiHandlers[this._identifier(d)]}setCsiHandlerFallback(d){this._csiHandlerFb=d}registerDcsHandler(d,a){return this._dcsParser.registerHandler(this._identifier(d),a)}clearDcsHandler(d){this._dcsParser.clearHandler(this._identifier(d))}setDcsHandlerFallback(d){this._dcsParser.setHandlerFallback(d)}registerOscHandler(d,a){return this._oscParser.registerHandler(d,a)}clearOscHandler(d){this._oscParser.clearHandler(d)}setOscHandlerFallback(d){this._oscParser.setHandlerFallback(d)}setErrorHandler(d){this._errorHandler=d}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(d,a,c,v,x){this._parseStack.state=d,this._parseStack.handlers=a,this._parseStack.handlerPos=c,this._parseStack.transition=v,this._parseStack.chunkPos=x}parse(d,a,c){let v,x=0,S=0,E=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,E=this._parseStack.chunkPos+1;else{if(c===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const $=this._parseStack.handlers;let k=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(c===!1&&k>-1){for(;k>=0&&(v=$[k](this._params),v!==!0);k--)if(v instanceof Promise)return this._parseStack.handlerPos=k,v}this._parseStack.handlers=[];break;case 4:if(c===!1&&k>-1){for(;k>=0&&(v=$[k](),v!==!0);k--)if(v instanceof Promise)return this._parseStack.handlerPos=k,v}this._parseStack.handlers=[];break;case 6:if(x=d[this._parseStack.chunkPos],v=this._dcsParser.unhook(x!==24&&x!==26,c),v)return v;x===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(x=d[this._parseStack.chunkPos],v=this._oscParser.end(x!==24&&x!==26,c),v)return v;x===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,E=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let $=E;$<a;++$){switch(x=d[$],S=this._transitions.table[this.currentState<<8|(x<160?x:C)],S>>4){case 2:for(let I=$+1;;++I){if(I>=a||(x=d[I])<32||x>126&&x<C){this._printHandler(d,$,I),$=I-1;break}if(++I>=a||(x=d[I])<32||x>126&&x<C){this._printHandler(d,$,I),$=I-1;break}if(++I>=a||(x=d[I])<32||x>126&&x<C){this._printHandler(d,$,I),$=I-1;break}if(++I>=a||(x=d[I])<32||x>126&&x<C){this._printHandler(d,$,I),$=I-1;break}}break;case 3:this._executeHandlers[x]?this._executeHandlers[x]():this._executeHandlerFb(x),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:$,code:x,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const k=this._csiHandlers[this._collect<<8|x];let O=k?k.length-1:-1;for(;O>=0&&(v=k[O](this._params),v!==!0);O--)if(v instanceof Promise)return this._preserveStack(3,k,O,S,$),v;O<0&&this._csiHandlerFb(this._collect<<8|x,this._params),this.precedingCodepoint=0;break;case 8:do switch(x){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(x-48)}while(++$<a&&(x=d[$])>47&&x<60);$--;break;case 9:this._collect<<=8,this._collect|=x;break;case 10:const B=this._escHandlers[this._collect<<8|x];let D=B?B.length-1:-1;for(;D>=0&&(v=B[D](),v!==!0);D--)if(v instanceof Promise)return this._preserveStack(4,B,D,S,$),v;D<0&&this._escHandlerFb(this._collect<<8|x),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|x,this._params);break;case 13:for(let I=$+1;;++I)if(I>=a||(x=d[I])===24||x===26||x===27||x>127&&x<C){this._dcsParser.put(d,$,I),$=I-1;break}break;case 14:if(v=this._dcsParser.unhook(x!==24&&x!==26),v)return this._preserveStack(6,[],0,S,$),v;x===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let I=$+1;;I++)if(I>=a||(x=d[I])<32||x>127&&x<C){this._oscParser.put(d,$,I),$=I-1;break}break;case 6:if(v=this._oscParser.end(x!==24&&x!==26),v)return this._preserveStack(5,[],0,S,$),v;x===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&S}}}s.EscapeSequenceParser=y},6242:(f,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OscHandler=s.OscParser=void 0;const u=l(5770),g=l(482),p=[];s.OscParser=class{constructor(){this._state=0,this._active=p,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(b,m){this._handlers[b]===void 0&&(this._handlers[b]=[]);const C=this._handlers[b];return C.push(m),{dispose:()=>{const y=C.indexOf(m);y!==-1&&C.splice(y,1)}}}clearHandler(b){this._handlers[b]&&delete this._handlers[b]}setHandlerFallback(b){this._handlerFb=b}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=p}reset(){if(this._state===2)for(let b=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;b>=0;--b)this._active[b].end(!1);this._stack.paused=!1,this._active=p,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||p,this._active.length)for(let b=this._active.length-1;b>=0;b--)this._active[b].start();else this._handlerFb(this._id,"START")}_put(b,m,C){if(this._active.length)for(let y=this._active.length-1;y>=0;y--)this._active[y].put(b,m,C);else this._handlerFb(this._id,"PUT",(0,g.utf32ToString)(b,m,C))}start(){this.reset(),this._state=1}put(b,m,C){if(this._state!==3){if(this._state===1)for(;m<C;){const y=b[m++];if(y===59){this._state=2,this._start();break}if(y<48||57<y)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+y-48}this._state===2&&C-m>0&&this._put(b,m,C)}}end(b,m=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let C=!1,y=this._active.length-1,n=!1;if(this._stack.paused&&(y=this._stack.loopPosition-1,C=m,n=this._stack.fallThrough,this._stack.paused=!1),!n&&C===!1){for(;y>=0&&(C=this._active[y].end(b),C!==!0);y--)if(C instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=y,this._stack.fallThrough=!1,C;y--}for(;y>=0;y--)if(C=this._active[y].end(!1),C instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=y,this._stack.fallThrough=!0,C}else this._handlerFb(this._id,"END",b);this._active=p,this._id=-1,this._state=0}}},s.OscHandler=class{constructor(b){this._handler=b,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(b,m,C){this._hitLimit||(this._data+=(0,g.utf32ToString)(b,m,C),this._data.length>u.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(b){let m=!1;if(this._hitLimit)m=!1;else if(b&&(m=this._handler(this._data),m instanceof Promise))return m.then(C=>(this._data="",this._hitLimit=!1,C));return this._data="",this._hitLimit=!1,m}}},8742:(f,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Params=void 0;const l=2147483647;class u{static fromArray(p){const b=new u;if(!p.length)return b;for(let m=Array.isArray(p[0])?1:0;m<p.length;++m){const C=p[m];if(Array.isArray(C))for(let y=0;y<C.length;++y)b.addSubParam(C[y]);else b.addParam(C)}return b}constructor(p=32,b=32){if(this.maxLength=p,this.maxSubParamsLength=b,b>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(p),this.length=0,this._subParams=new Int32Array(b),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(p),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const p=new u(this.maxLength,this.maxSubParamsLength);return p.params.set(this.params),p.length=this.length,p._subParams.set(this._subParams),p._subParamsLength=this._subParamsLength,p._subParamsIdx.set(this._subParamsIdx),p._rejectDigits=this._rejectDigits,p._rejectSubDigits=this._rejectSubDigits,p._digitIsSub=this._digitIsSub,p}toArray(){const p=[];for(let b=0;b<this.length;++b){p.push(this.params[b]);const m=this._subParamsIdx[b]>>8,C=255&this._subParamsIdx[b];C-m>0&&p.push(Array.prototype.slice.call(this._subParams,m,C))}return p}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(p){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(p<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=p>l?l:p}}addSubParam(p){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(p<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=p>l?l:p,this._subParamsIdx[this.length-1]++}}hasSubParams(p){return(255&this._subParamsIdx[p])-(this._subParamsIdx[p]>>8)>0}getSubParams(p){const b=this._subParamsIdx[p]>>8,m=255&this._subParamsIdx[p];return m-b>0?this._subParams.subarray(b,m):null}getSubParamsAll(){const p={};for(let b=0;b<this.length;++b){const m=this._subParamsIdx[b]>>8,C=255&this._subParamsIdx[b];C-m>0&&(p[b]=this._subParams.slice(m,C))}return p}addDigit(p){let b;if(this._rejectDigits||!(b=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const m=this._digitIsSub?this._subParams:this.params,C=m[b-1];m[b-1]=~C?Math.min(10*C+p,l):p}}s.Params=u},5741:(f,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AddonManager=void 0,s.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let l=this._addons.length-1;l>=0;l--)this._addons[l].instance.dispose()}loadAddon(l,u){const g={instance:u,dispose:u.dispose,isDisposed:!1};this._addons.push(g),u.dispose=()=>this._wrappedAddonDispose(g),u.activate(l)}_wrappedAddonDispose(l){if(l.isDisposed)return;let u=-1;for(let g=0;g<this._addons.length;g++)if(this._addons[g]===l){u=g;break}if(u===-1)throw new Error("Could not dispose an addon that has not been loaded");l.isDisposed=!0,l.dispose.apply(l.instance),this._addons.splice(u,1)}}},8771:(f,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferApiView=void 0;const u=l(3785),g=l(511);s.BufferApiView=class{constructor(p,b){this._buffer=p,this.type=b}init(p){return this._buffer=p,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(p){const b=this._buffer.lines.get(p);if(b)return new u.BufferLineApiView(b)}getNullCell(){return new g.CellData}}},3785:(f,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLineApiView=void 0;const u=l(511);s.BufferLineApiView=class{constructor(g){this._line=g}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(g,p){if(!(g<0||g>=this._line.length))return p?(this._line.loadCell(g,p),p):this._line.loadCell(g,new u.CellData)}translateToString(g,p,b){return this._line.translateToString(g,p,b)}}},8285:(f,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferNamespaceApi=void 0;const u=l(8771),g=l(8460),p=l(844);class b extends p.Disposable{constructor(C){super(),this._core=C,this._onBufferChange=this.register(new g.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new u.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new u.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}s.BufferNamespaceApi=b},7975:(f,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ParserApi=void 0,s.ParserApi=class{constructor(l){this._core=l}registerCsiHandler(l,u){return this._core.registerCsiHandler(l,g=>u(g.toArray()))}addCsiHandler(l,u){return this.registerCsiHandler(l,u)}registerDcsHandler(l,u){return this._core.registerDcsHandler(l,(g,p)=>u(g,p.toArray()))}addDcsHandler(l,u){return this.registerDcsHandler(l,u)}registerEscHandler(l,u){return this._core.registerEscHandler(l,u)}addEscHandler(l,u){return this.registerEscHandler(l,u)}registerOscHandler(l,u){return this._core.registerOscHandler(l,u)}addOscHandler(l,u){return this.registerOscHandler(l,u)}}},7090:(f,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeApi=void 0,s.UnicodeApi=class{constructor(l){this._core=l}register(l){this._core.unicodeService.register(l)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(l){this._core.unicodeService.activeVersion=l}}},744:function(f,s,l){var u=this&&this.__decorate||function(n,d,a,c){var v,x=arguments.length,S=x<3?d:c===null?c=Object.getOwnPropertyDescriptor(d,a):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(n,d,a,c);else for(var E=n.length-1;E>=0;E--)(v=n[E])&&(S=(x<3?v(S):x>3?v(d,a,S):v(d,a))||S);return x>3&&S&&Object.defineProperty(d,a,S),S},g=this&&this.__param||function(n,d){return function(a,c){d(a,c,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferService=s.MINIMUM_ROWS=s.MINIMUM_COLS=void 0;const p=l(8460),b=l(844),m=l(5295),C=l(2585);s.MINIMUM_COLS=2,s.MINIMUM_ROWS=1;let y=s.BufferService=class extends b.Disposable{get buffer(){return this.buffers.active}constructor(n){super(),this.isUserScrolling=!1,this._onResize=this.register(new p.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new p.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(n.rawOptions.cols||0,s.MINIMUM_COLS),this.rows=Math.max(n.rawOptions.rows||0,s.MINIMUM_ROWS),this.buffers=this.register(new m.BufferSet(n,this))}resize(n,d){this.cols=n,this.rows=d,this.buffers.resize(n,d),this._onResize.fire({cols:n,rows:d})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(n,d=!1){const a=this.buffer;let c;c=this._cachedBlankLine,c&&c.length===this.cols&&c.getFg(0)===n.fg&&c.getBg(0)===n.bg||(c=a.getBlankLine(n,d),this._cachedBlankLine=c),c.isWrapped=d;const v=a.ybase+a.scrollTop,x=a.ybase+a.scrollBottom;if(a.scrollTop===0){const S=a.lines.isFull;x===a.lines.length-1?S?a.lines.recycle().copyFrom(c):a.lines.push(c.clone()):a.lines.splice(x+1,0,c.clone()),S?this.isUserScrolling&&(a.ydisp=Math.max(a.ydisp-1,0)):(a.ybase++,this.isUserScrolling||a.ydisp++)}else{const S=x-v+1;a.lines.shiftElements(v+1,S-1,-1),a.lines.set(x,c.clone())}this.isUserScrolling||(a.ydisp=a.ybase),this._onScroll.fire(a.ydisp)}scrollLines(n,d,a){const c=this.buffer;if(n<0){if(c.ydisp===0)return;this.isUserScrolling=!0}else n+c.ydisp>=c.ybase&&(this.isUserScrolling=!1);const v=c.ydisp;c.ydisp=Math.max(Math.min(c.ydisp+n,c.ybase),0),v!==c.ydisp&&(d||this._onScroll.fire(c.ydisp))}};s.BufferService=y=u([g(0,C.IOptionsService)],y)},7994:(f,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CharsetService=void 0,s.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(l){this.glevel=l,this.charset=this._charsets[l]}setgCharset(l,u){this._charsets[l]=u,this.glevel===l&&(this.charset=u)}}},1753:function(f,s,l){var u=this&&this.__decorate||function(c,v,x,S){var E,$=arguments.length,k=$<3?v:S===null?S=Object.getOwnPropertyDescriptor(v,x):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(c,v,x,S);else for(var O=c.length-1;O>=0;O--)(E=c[O])&&(k=($<3?E(k):$>3?E(v,x,k):E(v,x))||k);return $>3&&k&&Object.defineProperty(v,x,k),k},g=this&&this.__param||function(c,v){return function(x,S){v(x,S,c)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreMouseService=void 0;const p=l(2585),b=l(8460),m=l(844),C={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:c=>c.button!==4&&c.action===1&&(c.ctrl=!1,c.alt=!1,c.shift=!1,!0)},VT200:{events:19,restrict:c=>c.action!==32},DRAG:{events:23,restrict:c=>c.action!==32||c.button!==3},ANY:{events:31,restrict:c=>!0}};function y(c,v){let x=(c.ctrl?16:0)|(c.shift?4:0)|(c.alt?8:0);return c.button===4?(x|=64,x|=c.action):(x|=3&c.button,4&c.button&&(x|=64),8&c.button&&(x|=128),c.action===32?x|=32:c.action!==0||v||(x|=3)),x}const n=String.fromCharCode,d={DEFAULT:c=>{const v=[y(c,!1)+32,c.col+32,c.row+32];return v[0]>255||v[1]>255||v[2]>255?"":`\x1B[M${n(v[0])}${n(v[1])}${n(v[2])}`},SGR:c=>{const v=c.action===0&&c.button!==4?"m":"M";return`\x1B[<${y(c,!0)};${c.col};${c.row}${v}`},SGR_PIXELS:c=>{const v=c.action===0&&c.button!==4?"m":"M";return`\x1B[<${y(c,!0)};${c.x};${c.y}${v}`}};let a=s.CoreMouseService=class extends m.Disposable{constructor(c,v){super(),this._bufferService=c,this._coreService=v,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new b.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const x of Object.keys(C))this.addProtocol(x,C[x]);for(const x of Object.keys(d))this.addEncoding(x,d[x]);this.reset()}addProtocol(c,v){this._protocols[c]=v}addEncoding(c,v){this._encodings[c]=v}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(c){if(!this._protocols[c])throw new Error(`unknown protocol "${c}"`);this._activeProtocol=c,this._onProtocolChange.fire(this._protocols[c].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(c){if(!this._encodings[c])throw new Error(`unknown encoding "${c}"`);this._activeEncoding=c}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(c){if(c.col<0||c.col>=this._bufferService.cols||c.row<0||c.row>=this._bufferService.rows||c.button===4&&c.action===32||c.button===3&&c.action!==32||c.button!==4&&(c.action===2||c.action===3)||(c.col++,c.row++,c.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,c,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(c))return!1;const v=this._encodings[this._activeEncoding](c);return v&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(v):this._coreService.triggerDataEvent(v,!0)),this._lastEvent=c,!0}explainEvents(c){return{down:!!(1&c),up:!!(2&c),drag:!!(4&c),move:!!(8&c),wheel:!!(16&c)}}_equalEvents(c,v,x){if(x){if(c.x!==v.x||c.y!==v.y)return!1}else if(c.col!==v.col||c.row!==v.row)return!1;return c.button===v.button&&c.action===v.action&&c.ctrl===v.ctrl&&c.alt===v.alt&&c.shift===v.shift}};s.CoreMouseService=a=u([g(0,p.IBufferService),g(1,p.ICoreService)],a)},6975:function(f,s,l){var u=this&&this.__decorate||function(a,c,v,x){var S,E=arguments.length,$=E<3?c:x===null?x=Object.getOwnPropertyDescriptor(c,v):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$=Reflect.decorate(a,c,v,x);else for(var k=a.length-1;k>=0;k--)(S=a[k])&&($=(E<3?S($):E>3?S(c,v,$):S(c,v))||$);return E>3&&$&&Object.defineProperty(c,v,$),$},g=this&&this.__param||function(a,c){return function(v,x){c(v,x,a)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreService=void 0;const p=l(1439),b=l(8460),m=l(844),C=l(2585),y=Object.freeze({insertMode:!1}),n=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let d=s.CoreService=class extends m.Disposable{constructor(a,c,v){super(),this._bufferService=a,this._logService=c,this._optionsService=v,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new b.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new b.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new b.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new b.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,p.clone)(y),this.decPrivateModes=(0,p.clone)(n)}reset(){this.modes=(0,p.clone)(y),this.decPrivateModes=(0,p.clone)(n)}triggerDataEvent(a,c=!1){if(this._optionsService.rawOptions.disableStdin)return;const v=this._bufferService.buffer;c&&this._optionsService.rawOptions.scrollOnUserInput&&v.ybase!==v.ydisp&&this._onRequestScrollToBottom.fire(),c&&this._onUserInput.fire(),this._logService.debug(`sending data "${a}"`,()=>a.split("").map(x=>x.charCodeAt(0))),this._onData.fire(a)}triggerBinaryEvent(a){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${a}"`,()=>a.split("").map(c=>c.charCodeAt(0))),this._onBinary.fire(a))}};s.CoreService=d=u([g(0,C.IBufferService),g(1,C.ILogService),g(2,C.IOptionsService)],d)},9074:(f,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DecorationService=void 0;const u=l(8055),g=l(8460),p=l(844),b=l(6106);let m=0,C=0;class y extends p.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new b.SortedList(a=>a?.marker.line),this._onDecorationRegistered=this.register(new g.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new g.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,p.toDisposable)(()=>this.reset()))}registerDecoration(a){if(a.marker.isDisposed)return;const c=new n(a);if(c){const v=c.marker.onDispose(()=>c.dispose());c.onDispose(()=>{c&&(this._decorations.delete(c)&&this._onDecorationRemoved.fire(c),v.dispose())}),this._decorations.insert(c),this._onDecorationRegistered.fire(c)}return c}reset(){for(const a of this._decorations.values())a.dispose();this._decorations.clear()}*getDecorationsAtCell(a,c,v){var x,S,E;let $=0,k=0;for(const O of this._decorations.getKeyIterator(c))$=(x=O.options.x)!==null&&x!==void 0?x:0,k=$+((S=O.options.width)!==null&&S!==void 0?S:1),a>=$&&a<k&&(!v||((E=O.options.layer)!==null&&E!==void 0?E:"bottom")===v)&&(yield O)}forEachDecorationAtCell(a,c,v,x){this._decorations.forEachByKey(c,S=>{var E,$,k;m=(E=S.options.x)!==null&&E!==void 0?E:0,C=m+(($=S.options.width)!==null&&$!==void 0?$:1),a>=m&&a<C&&(!v||((k=S.options.layer)!==null&&k!==void 0?k:"bottom")===v)&&x(S)})}}s.DecorationService=y;class n extends p.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=u.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=u.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(a){super(),this.options=a,this.onRenderEmitter=this.register(new g.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new g.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=a.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(f,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.InstantiationService=s.ServiceCollection=void 0;const u=l(2585),g=l(8343);class p{constructor(...m){this._entries=new Map;for(const[C,y]of m)this.set(C,y)}set(m,C){const y=this._entries.get(m);return this._entries.set(m,C),y}forEach(m){for(const[C,y]of this._entries.entries())m(C,y)}has(m){return this._entries.has(m)}get(m){return this._entries.get(m)}}s.ServiceCollection=p,s.InstantiationService=class{constructor(){this._services=new p,this._services.set(u.IInstantiationService,this)}setService(b,m){this._services.set(b,m)}getService(b){return this._services.get(b)}createInstance(b,...m){const C=(0,g.getServiceDependencies)(b).sort((d,a)=>d.index-a.index),y=[];for(const d of C){const a=this._services.get(d.id);if(!a)throw new Error(`[createInstance] ${b.name} depends on UNKNOWN service ${d.id}.`);y.push(a)}const n=C.length>0?C[0].index:m.length;if(m.length!==n)throw new Error(`[createInstance] First service dependency of ${b.name} at position ${n+1} conflicts with ${m.length} static arguments`);return new b(...m,...y)}}},7866:function(f,s,l){var u=this&&this.__decorate||function(n,d,a,c){var v,x=arguments.length,S=x<3?d:c===null?c=Object.getOwnPropertyDescriptor(d,a):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(n,d,a,c);else for(var E=n.length-1;E>=0;E--)(v=n[E])&&(S=(x<3?v(S):x>3?v(d,a,S):v(d,a))||S);return x>3&&S&&Object.defineProperty(d,a,S),S},g=this&&this.__param||function(n,d){return function(a,c){d(a,c,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.traceCall=s.setTraceLogger=s.LogService=void 0;const p=l(844),b=l(2585),m={trace:b.LogLevelEnum.TRACE,debug:b.LogLevelEnum.DEBUG,info:b.LogLevelEnum.INFO,warn:b.LogLevelEnum.WARN,error:b.LogLevelEnum.ERROR,off:b.LogLevelEnum.OFF};let C,y=s.LogService=class extends p.Disposable{get logLevel(){return this._logLevel}constructor(n){super(),this._optionsService=n,this._logLevel=b.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),C=this}_updateLogLevel(){this._logLevel=m[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(n){for(let d=0;d<n.length;d++)typeof n[d]=="function"&&(n[d]=n[d]())}_log(n,d,a){this._evalLazyOptionalParams(a),n.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+d,...a)}trace(n,...d){var a,c;this._logLevel<=b.LogLevelEnum.TRACE&&this._log((c=(a=this._optionsService.options.logger)===null||a===void 0?void 0:a.trace.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.log,n,d)}debug(n,...d){var a,c;this._logLevel<=b.LogLevelEnum.DEBUG&&this._log((c=(a=this._optionsService.options.logger)===null||a===void 0?void 0:a.debug.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.log,n,d)}info(n,...d){var a,c;this._logLevel<=b.LogLevelEnum.INFO&&this._log((c=(a=this._optionsService.options.logger)===null||a===void 0?void 0:a.info.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.info,n,d)}warn(n,...d){var a,c;this._logLevel<=b.LogLevelEnum.WARN&&this._log((c=(a=this._optionsService.options.logger)===null||a===void 0?void 0:a.warn.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.warn,n,d)}error(n,...d){var a,c;this._logLevel<=b.LogLevelEnum.ERROR&&this._log((c=(a=this._optionsService.options.logger)===null||a===void 0?void 0:a.error.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.error,n,d)}};s.LogService=y=u([g(0,b.IOptionsService)],y),s.setTraceLogger=function(n){C=n},s.traceCall=function(n,d,a){if(typeof a.value!="function")throw new Error("not supported");const c=a.value;a.value=function(...v){if(C.logLevel!==b.LogLevelEnum.TRACE)return c.apply(this,v);C.trace(`GlyphRenderer#${c.name}(${v.map(S=>JSON.stringify(S)).join(", ")})`);const x=c.apply(this,v);return C.trace(`GlyphRenderer#${c.name} return`,x),x}}},7302:(f,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OptionsService=s.DEFAULT_OPTIONS=void 0;const u=l(8460),g=l(844),p=l(6114);s.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:p.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const b=["normal","bold","100","200","300","400","500","600","700","800","900"];class m extends g.Disposable{constructor(y){super(),this._onOptionChange=this.register(new u.EventEmitter),this.onOptionChange=this._onOptionChange.event;const n=Object.assign({},s.DEFAULT_OPTIONS);for(const d in y)if(d in n)try{const a=y[d];n[d]=this._sanitizeAndValidateOption(d,a)}catch(a){console.error(a)}this.rawOptions=n,this.options=Object.assign({},n),this._setupOptions()}onSpecificOptionChange(y,n){return this.onOptionChange(d=>{d===y&&n(this.rawOptions[y])})}onMultipleOptionChange(y,n){return this.onOptionChange(d=>{y.indexOf(d)!==-1&&n()})}_setupOptions(){const y=d=>{if(!(d in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${d}"`);return this.rawOptions[d]},n=(d,a)=>{if(!(d in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${d}"`);a=this._sanitizeAndValidateOption(d,a),this.rawOptions[d]!==a&&(this.rawOptions[d]=a,this._onOptionChange.fire(d))};for(const d in this.rawOptions){const a={get:y.bind(this,d),set:n.bind(this,d)};Object.defineProperty(this.options,d,a)}}_sanitizeAndValidateOption(y,n){switch(y){case"cursorStyle":if(n||(n=s.DEFAULT_OPTIONS[y]),!function(d){return d==="block"||d==="underline"||d==="bar"}(n))throw new Error(`"${n}" is not a valid value for ${y}`);break;case"wordSeparator":n||(n=s.DEFAULT_OPTIONS[y]);break;case"fontWeight":case"fontWeightBold":if(typeof n=="number"&&1<=n&&n<=1e3)break;n=b.includes(n)?n:s.DEFAULT_OPTIONS[y];break;case"cursorWidth":n=Math.floor(n);case"lineHeight":case"tabStopWidth":if(n<1)throw new Error(`${y} cannot be less than 1, value: ${n}`);break;case"minimumContrastRatio":n=Math.max(1,Math.min(21,Math.round(10*n)/10));break;case"scrollback":if((n=Math.min(n,4294967295))<0)throw new Error(`${y} cannot be less than 0, value: ${n}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(n<=0)throw new Error(`${y} cannot be less than or equal to 0, value: ${n}`);break;case"rows":case"cols":if(!n&&n!==0)throw new Error(`${y} must be numeric, value: ${n}`);break;case"windowsPty":n=n??{}}return n}}s.OptionsService=m},2660:function(f,s,l){var u=this&&this.__decorate||function(m,C,y,n){var d,a=arguments.length,c=a<3?C:n===null?n=Object.getOwnPropertyDescriptor(C,y):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(m,C,y,n);else for(var v=m.length-1;v>=0;v--)(d=m[v])&&(c=(a<3?d(c):a>3?d(C,y,c):d(C,y))||c);return a>3&&c&&Object.defineProperty(C,y,c),c},g=this&&this.__param||function(m,C){return function(y,n){C(y,n,m)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkService=void 0;const p=l(2585);let b=s.OscLinkService=class{constructor(m){this._bufferService=m,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(m){const C=this._bufferService.buffer;if(m.id===void 0){const v=C.addMarker(C.ybase+C.y),x={data:m,id:this._nextId++,lines:[v]};return v.onDispose(()=>this._removeMarkerFromLink(x,v)),this._dataByLinkId.set(x.id,x),x.id}const y=m,n=this._getEntryIdKey(y),d=this._entriesWithId.get(n);if(d)return this.addLineToLink(d.id,C.ybase+C.y),d.id;const a=C.addMarker(C.ybase+C.y),c={id:this._nextId++,key:this._getEntryIdKey(y),data:y,lines:[a]};return a.onDispose(()=>this._removeMarkerFromLink(c,a)),this._entriesWithId.set(c.key,c),this._dataByLinkId.set(c.id,c),c.id}addLineToLink(m,C){const y=this._dataByLinkId.get(m);if(y&&y.lines.every(n=>n.line!==C)){const n=this._bufferService.buffer.addMarker(C);y.lines.push(n),n.onDispose(()=>this._removeMarkerFromLink(y,n))}}getLinkData(m){var C;return(C=this._dataByLinkId.get(m))===null||C===void 0?void 0:C.data}_getEntryIdKey(m){return`${m.id};;${m.uri}`}_removeMarkerFromLink(m,C){const y=m.lines.indexOf(C);y!==-1&&(m.lines.splice(y,1),m.lines.length===0&&(m.data.id!==void 0&&this._entriesWithId.delete(m.key),this._dataByLinkId.delete(m.id)))}};s.OscLinkService=b=u([g(0,p.IBufferService)],b)},8343:(f,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createDecorator=s.getServiceDependencies=s.serviceRegistry=void 0;const l="di$target",u="di$dependencies";s.serviceRegistry=new Map,s.getServiceDependencies=function(g){return g[u]||[]},s.createDecorator=function(g){if(s.serviceRegistry.has(g))return s.serviceRegistry.get(g);const p=function(b,m,C){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(y,n,d){n[l]===n?n[u].push({id:y,index:d}):(n[u]=[{id:y,index:d}],n[l]=n)})(p,b,C)};return p.toString=()=>g,s.serviceRegistry.set(g,p),p}},2585:(f,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IDecorationService=s.IUnicodeService=s.IOscLinkService=s.IOptionsService=s.ILogService=s.LogLevelEnum=s.IInstantiationService=s.ICharsetService=s.ICoreService=s.ICoreMouseService=s.IBufferService=void 0;const u=l(8343);var g;s.IBufferService=(0,u.createDecorator)("BufferService"),s.ICoreMouseService=(0,u.createDecorator)("CoreMouseService"),s.ICoreService=(0,u.createDecorator)("CoreService"),s.ICharsetService=(0,u.createDecorator)("CharsetService"),s.IInstantiationService=(0,u.createDecorator)("InstantiationService"),function(p){p[p.TRACE=0]="TRACE",p[p.DEBUG=1]="DEBUG",p[p.INFO=2]="INFO",p[p.WARN=3]="WARN",p[p.ERROR=4]="ERROR",p[p.OFF=5]="OFF"}(g||(s.LogLevelEnum=g={})),s.ILogService=(0,u.createDecorator)("LogService"),s.IOptionsService=(0,u.createDecorator)("OptionsService"),s.IOscLinkService=(0,u.createDecorator)("OscLinkService"),s.IUnicodeService=(0,u.createDecorator)("UnicodeService"),s.IDecorationService=(0,u.createDecorator)("DecorationService")},1480:(f,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeService=void 0;const u=l(8460),g=l(225);s.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new u.EventEmitter,this.onChange=this._onChange.event;const p=new g.UnicodeV6;this.register(p),this._active=p.version,this._activeProvider=p}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(p){if(!this._providers[p])throw new Error(`unknown Unicode version "${p}"`);this._active=p,this._activeProvider=this._providers[p],this._onChange.fire(p)}register(p){this._providers[p.version]=p}wcwidth(p){return this._activeProvider.wcwidth(p)}getStringCellWidth(p){let b=0;const m=p.length;for(let C=0;C<m;++C){let y=p.charCodeAt(C);if(55296<=y&&y<=56319){if(++C>=m)return b+this.wcwidth(y);const n=p.charCodeAt(C);56320<=n&&n<=57343?y=1024*(y-55296)+n-56320+65536:b+=this.wcwidth(n)}b+=this.wcwidth(y)}return b}}}},i={};function h(f){var s=i[f];if(s!==void 0)return s.exports;var l=i[f]={exports:{}};return r[f].call(l.exports,l,l.exports,h),l.exports}var _={};return(()=>{var f=_;Object.defineProperty(f,"__esModule",{value:!0}),f.Terminal=void 0;const s=h(9042),l=h(3236),u=h(844),g=h(5741),p=h(8285),b=h(7975),m=h(7090),C=["cols","rows"];class y extends u.Disposable{constructor(d){super(),this._core=this.register(new l.Terminal(d)),this._addonManager=this.register(new g.AddonManager),this._publicOptions=Object.assign({},this._core.options);const a=v=>this._core.options[v],c=(v,x)=>{this._checkReadonlyOptions(v),this._core.options[v]=x};for(const v in this._core.options){const x={get:a.bind(this,v),set:c.bind(this,v)};Object.defineProperty(this._publicOptions,v,x)}}_checkReadonlyOptions(d){if(C.includes(d))throw new Error(`Option "${d}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new b.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new m.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new p.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const d=this._core.coreService.decPrivateModes;let a="none";switch(this._core.coreMouseService.activeProtocol){case"X10":a="x10";break;case"VT200":a="vt200";break;case"DRAG":a="drag";break;case"ANY":a="any"}return{applicationCursorKeysMode:d.applicationCursorKeys,applicationKeypadMode:d.applicationKeypad,bracketedPasteMode:d.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:a,originMode:d.origin,reverseWraparoundMode:d.reverseWraparound,sendFocusMode:d.sendFocus,wraparoundMode:d.wraparound}}get options(){return this._publicOptions}set options(d){for(const a in d)this._publicOptions[a]=d[a]}blur(){this._core.blur()}focus(){this._core.focus()}resize(d,a){this._verifyIntegers(d,a),this._core.resize(d,a)}open(d){this._core.open(d)}attachCustomKeyEventHandler(d){this._core.attachCustomKeyEventHandler(d)}registerLinkProvider(d){return this._core.registerLinkProvider(d)}registerCharacterJoiner(d){return this._checkProposedApi(),this._core.registerCharacterJoiner(d)}deregisterCharacterJoiner(d){this._checkProposedApi(),this._core.deregisterCharacterJoiner(d)}registerMarker(d=0){return this._verifyIntegers(d),this._core.registerMarker(d)}registerDecoration(d){var a,c,v;return this._checkProposedApi(),this._verifyPositiveIntegers((a=d.x)!==null&&a!==void 0?a:0,(c=d.width)!==null&&c!==void 0?c:0,(v=d.height)!==null&&v!==void 0?v:0),this._core.registerDecoration(d)}hasSelection(){return this._core.hasSelection()}select(d,a,c){this._verifyIntegers(d,a,c),this._core.select(d,a,c)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(d,a){this._verifyIntegers(d,a),this._core.selectLines(d,a)}dispose(){super.dispose()}scrollLines(d){this._verifyIntegers(d),this._core.scrollLines(d)}scrollPages(d){this._verifyIntegers(d),this._core.scrollPages(d)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(d){this._verifyIntegers(d),this._core.scrollToLine(d)}clear(){this._core.clear()}write(d,a){this._core.write(d,a)}writeln(d,a){this._core.write(d),this._core.write(`\r
`,a)}paste(d){this._core.paste(d)}refresh(d,a){this._verifyIntegers(d,a),this._core.refresh(d,a)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(d){this._addonManager.loadAddon(this,d)}static get strings(){return s}_verifyIntegers(...d){for(const a of d)if(a===1/0||isNaN(a)||a%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...d){for(const a of d)if(a&&(a===1/0||isNaN(a)||a%1!=0||a<0))throw new Error("This API only accepts positive integers")}}f.Terminal=y})(),_})())})(mo);var $c=mo.exports,bo={exports:{}};(function(e,t){(function(r,i){e.exports=i()})(self,()=>(()=>{var r={};return(()=>{var i=r;Object.defineProperty(i,"__esModule",{value:!0}),i.FitAddon=void 0,i.FitAddon=class{activate(h){this._terminal=h}dispose(){}fit(){const h=this.proposeDimensions();if(!h||!this._terminal||isNaN(h.cols)||isNaN(h.rows))return;const _=this._terminal._core;this._terminal.rows===h.rows&&this._terminal.cols===h.cols||(_._renderService.clear(),this._terminal.resize(h.cols,h.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const h=this._terminal._core,_=h._renderService.dimensions;if(_.css.cell.width===0||_.css.cell.height===0)return;const f=this._terminal.options.scrollback===0?0:h.viewport.scrollBarWidth,s=window.getComputedStyle(this._terminal.element.parentElement),l=parseInt(s.getPropertyValue("height")),u=Math.max(0,parseInt(s.getPropertyValue("width"))),g=window.getComputedStyle(this._terminal.element),p=l-(parseInt(g.getPropertyValue("padding-top"))+parseInt(g.getPropertyValue("padding-bottom"))),b=u-(parseInt(g.getPropertyValue("padding-right"))+parseInt(g.getPropertyValue("padding-left")))-f;return{cols:Math.max(2,Math.floor(b/_.css.cell.width)),rows:Math.max(1,Math.floor(p/_.css.cell.height))}}}})(),r})())})(bo);var wc=bo.exports,Sc=T('<div class="mb-2 px-3 py-2 rounded-lg text-sm"style="background:rgba(239, 68, 68, 0.1);color:var(--error-color)">'),Cc=T('<div class="flex flex-col"style=height:80vh;minHeight:600px><div class="flex items-center gap-2 mb-2 px-3 py-2 rounded-lg"style=background:var(--bg-tertiary)><span></span><span class=text-sm style=color:var(--text-secondary)></span><span class="text-sm ml-auto"style=color:var(--text-muted)>Local System Terminal</span><button class="ml-2 px-3 py-1.5 rounded text-xs font-medium transition-all hover:opacity-80"title="Open in new window (recommended)"style=background:var(--accent-primary);color:white>Open in New Window</button></div><div class="flex-1 rounded-lg overflow-hidden"data-terminal=true tabindex=0 style="background:#0d1117;border:1px solid var(--border-color);padding:8px;minHeight:500px;height:100%;outline:none">');const yo=e=>{const[t,r]=J(!1),[i,h]=J(null);let _=null,f,s=null,l=null;const u=()=>{if(!f||s){console.log("Terminal init skipped - container:",!!f,"term:",!!s);return}console.log("Initializing terminal...");try{if(s=new $c.Terminal({theme:{background:"#0d1117",foreground:"#c9d1d9",cursor:"#58a6ff",cursorAccent:"#0d1117",selection:"rgba(88, 166, 255, 0.3)",black:"#484f58",red:"#ff7b72",green:"#3fb950",yellow:"#d29922",blue:"#58a6ff",magenta:"#bc8cff",cyan:"#39c5cf",white:"#b1bac4"},fontFamily:'"SF Mono", Monaco, "Cascadia Code", "Fira Code", monospace',fontSize:13,cursorBlink:!0,cursorStyle:"bar"}),console.log("Terminal created:",s),l=new wc.FitAddon,s.loadAddon(l),s.open(f),console.log("Terminal opened in container, element:",s.element),setTimeout(()=>{l?.fit(),s.element&&(s.element.focus(),s.element.setAttribute("tabindex","0")),s.focus(),console.log("Terminal fitted and focused, activeElement:",document.activeElement)},100),s.onData(m=>{if(console.log("TERMINAL INPUT CAPTURED:",m,"char codes:",Array.from(m).map(C=>C.charCodeAt(0))),_&&_.readyState===WebSocket.OPEN){const C=JSON.stringify({type:"input",data:m});console.log("Sending to WebSocket:",C),_.send(C)}else console.warn("WebSocket not ready, state:",_?.readyState)}),console.log("Input handler attached to terminal"),f){const m=C=>{console.log("Direct keydown on container:",C.key,"code:",C.code),s&&!s.element?.contains(document.activeElement)&&s.focus()};f.addEventListener("keydown",m),f._keydownHandler=m}}catch(m){console.error("Failed to initialize terminal:",m),h(`Failed to load terminal: ${m}`)}},g=()=>{const C=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/api/local/terminal`;console.log("Connecting to WebSocket:",C);try{_=new WebSocket(C),_.onopen=()=>{console.log("WebSocket connected!"),r(!0),h(null),s&&(s.write(`\r
\x1B[32mConnected to local terminal\x1B[0m\r
\r
`),l&&(l.fit(),_?.send(JSON.stringify({type:"resize",cols:s.cols,rows:s.rows}))),setTimeout(()=>{s.focus(),console.log("Terminal focused after connection, element:",s.element)},100))},_.onmessage=y=>{s&&s.write(y.data)},_.onerror=y=>{console.error("WebSocket error:",y),h("WebSocket connection failed"),r(!1),s&&s.write(`\r
\x1B[31mConnection error\x1B[0m\r
`)},_.onclose=()=>{console.log("WebSocket closed"),r(!1),s&&s.write(`\r
\x1B[31mConnection closed\x1B[0m\r
`)}}catch(y){console.error("Failed to create WebSocket:",y),h(`Failed to connect: ${y}`)}};Tt(()=>{e.isOpen?(console.log("Modal opened, initializing terminal..."),setTimeout(()=>{u(),setTimeout(()=>{g()},200)},100)):(console.log("Modal closed, cleaning up..."),_&&(_.close(),_=null),s&&(s.dispose(),s=null),f&&f._keydownHandler&&(f.removeEventListener("keydown",f._keydownHandler),delete f._keydownHandler),l=null,r(!1),h(null))}),Qt(()=>{const m=()=>{l&&s&&(l.fit(),_&&_.readyState===WebSocket.OPEN&&_.send(JSON.stringify({type:"resize",cols:s.cols,rows:s.rows})))};window.addEventListener("resize",m),nr(()=>{window.removeEventListener("resize",m)})}),nr(()=>{_&&(_.close(),_=null),s&&(s.dispose(),s=null),l=null});const p=()=>{_&&(_.close(),_=null),s&&(s.dispose(),s=null),f&&f._keydownHandler&&(f.removeEventListener("keydown",f._keydownHandler),delete f._keydownHandler),l=null,r(!1),h(null),e.onClose()},b=()=>{window.open("/terminal","_blank","width=1200,height=800"),e.onClose()};return L(it,{get isOpen(){return e.isOpen},onClose:p,title:"Local Terminal",size:"full",get children(){var m=Cc(),C=m.firstChild,y=C.firstChild,n=y.nextSibling,d=n.nextSibling,a=d.nextSibling,c=C.nextSibling;o(n,()=>t()?"Connected":"Disconnected"),a.$$click=b,o(m,L(G,{get when(){return i()},get children(){var x=Sc();return o(x,i),x}}),c),c.$$keydown=x=>{console.log("Container keydown:",x.key,"target:",x.target),x.stopPropagation()},c.$$click=x=>{console.log("Container clicked, focusing terminal..."),x.stopPropagation(),s&&(s.focus(),f?.focus(),console.log("Terminal focused, element:",s.element,"activeElement:",document.activeElement))};var v=f;return typeof v=="function"?Zt(v,c):f=c,ie(()=>ze(y,`w-2 h-2 rounded-full ${t()?"bg-green-500":"bg-red-500"}`)),m}})};et(["click","keydown"]);var kc=T('<button class="w-full flex items-center justify-between px-2.5 py-2 rounded-md hover:bg-white/5 transition-colors group"><span class="text-xs font-bold uppercase tracking-wide"style=color:var(--text-primary)></span><svg fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 9l-7 7-7-7">'),Ac=T("<div>"),Mc=T("<div class=mb-1>"),Ec=T("<span>"),Lc=T('<div class="fixed px-2 py-1 rounded text-xs font-medium whitespace-nowrap z-[9999]"style="transform:translateY(-50%);background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color);box-shadow:0 2px 8px rgba(0,0,0,0.3)">'),Rc=T('<button><svg class="w-4 h-4 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2>'),Dc=T('<span class="font-bold text-lg gradient-text">KubeGraf'),Tc=T('<button class="absolute right-2.5 top-1/2 transform -translate-y-1/2 p-0.5 rounded hover:bg-white/10"style=color:var(--text-muted)><svg class="w-3.5 h-3.5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12">'),Pc=T('<div class="px-2.5 py-2 border-b"style=border-color:rgba(255,255,255,0.08)><div class=relative><svg class="absolute left-2.5 top-1/2 transform -translate-y-1/2 w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg><input type=text placeholder=Search... class="w-full pl-8 pr-2.5 py-1.5 rounded-md text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)">'),Ic=T('<div class="px-2.5 py-8 text-center"><p class=text-sm style=color:var(--text-muted)>No results found'),Bc=T("<span class=text-sm>Settings"),Oc=T('<div class="flex items-center gap-1.5 px-2.5 mt-2 text-xs"style=color:var(--text-muted)><span class="w-1.5 h-1.5 rounded-full bg-green-500"></span><span>v1.0.0'),Nc=T('<aside><div class="h-14 flex items-center justify-between px-3 border-b"style=border-color:rgba(255,255,255,0.08)><button class="flex items-center gap-2.5 hover:opacity-80 transition-opacity"title="Go to Dashboard"><svg viewBox="0 0 100 100"width=32 height=32 xmlns=http://www.w3.org/2000/svg><defs><linearGradient id=gGrad x1=0% y1=0% x2=100% y2=100%><stop offset=0% stop-color=#22d3ee></stop><stop offset=50% stop-color=#3b82f6></stop><stop offset=100% stop-color=#d946ef></stop></linearGradient><filter id=glow><feGaussianBlur stdDeviation=1.5 result=coloredBlur></feGaussianBlur><feMerge><feMergeNode in=coloredBlur></feMergeNode><feMergeNode in=SourceGraphic></feMergeNode></feMerge></filter></defs><g filter=url(#glow)><line x1=80 y1=30 x2=60 y2=12 stroke=#22d3ee stroke-width=3.5 stroke-linecap=round></line><line x1=60 y1=12 x2=35 y2=12 stroke=#06b6d4 stroke-width=3.5 stroke-linecap=round></line><line x1=35 y1=12 x2=12 y2=30 stroke=#3b82f6 stroke-width=3.5 stroke-linecap=round></line><line x1=12 y1=30 x2=12 y2=70 stroke=#3b82f6 stroke-width=3.5 stroke-linecap=round></line><line x1=12 y1=70 x2=35 y2=88 stroke=#6366f1 stroke-width=3.5 stroke-linecap=round></line><line x1=35 y1=88 x2=60 y2=88 stroke=#8b5cf6 stroke-width=3.5 stroke-linecap=round></line><line x1=60 y1=88 x2=80 y2=70 stroke=#a855f7 stroke-width=3.5 stroke-linecap=round></line><line x1=80 y1=70 x2=80 y2=50 stroke=#c026d3 stroke-width=3.5 stroke-linecap=round></line><line x1=80 y1=50 x2=55 y2=50 stroke=#d946ef stroke-width=3.5 stroke-linecap=round></line></g><circle cx=80 cy=30 r=5 fill=#22d3ee></circle><circle cx=60 cy=12 r=5 fill=#06b6d4></circle><circle cx=35 cy=12 r=5 fill=#3b82f6></circle><circle cx=12 cy=30 r=5 fill=#3b82f6></circle><circle cx=12 cy=70 r=5 fill=#6366f1></circle><circle cx=35 cy=88 r=5 fill=#8b5cf6></circle><circle cx=60 cy=88 r=5 fill=#a855f7></circle><circle cx=80 cy=70 r=5 fill=#c026d3></circle><circle cx=80 cy=50 r=5 fill=#d946ef></circle><circle cx=55 cy=50 r=5 fill=#d946ef></circle><g filter=url(#glow)><path d="M42 22 L62 34 L42 46 L22 34 Z"fill=#22d3ee stroke=#fff stroke-width=1.5></path><path d="M42 46 L62 34 L62 54 L42 66 Z"fill=#8b5cf6 stroke=#fff stroke-width=1.5></path><path d="M42 46 L22 34 L22 54 L42 66 Z"fill=#3b82f6 stroke=#fff stroke-width=1.5></path></g></svg></button><button class="p-1 rounded hover:bg-white/10 transition-colors"><svg fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M11 19l-7-7 7-7m8 14l-7-7 7-7"></path></svg></button></div><nav class="p-1.5 overflow-y-auto"></nav><div class="absolute bottom-0 left-0 right-0 p-2 border-t"style=border-color:rgba(255,255,255,0.08)><button><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M15 12a3 3 0 11-6 0 3 3 0 016 0z">');const Yn=[{title:"Overview",items:[{id:"dashboard",label:"Dashboard",icon:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"}]},{title:"Insights",items:[{id:"anomalies",label:"AI Insights",icon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},{id:"cost",label:"Cost Analysis",icon:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},{id:"security",label:"Security Insights",icon:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"},{id:"drift",label:"Drift Detection",icon:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"}]},{title:"Deployments",items:[{id:"apps",label:"Deploy",icon:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"},{id:"rollouts",label:"Rollouts",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"}]},{title:"Workloads",items:[{id:"pods",label:"Pods",icon:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"},{id:"deployments",label:"Deployments",icon:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"},{id:"statefulsets",label:"StatefulSets",icon:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"},{id:"daemonsets",label:"DaemonSets",icon:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"},{id:"jobs",label:"Jobs",icon:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"},{id:"cronjobs",label:"CronJobs",icon:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"}]},{title:"Networking",items:[{id:"services",label:"Services",icon:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"},{id:"ingresses",label:"Ingresses",icon:"M13 10V3L4 14h7v7l9-11h-7z"},{id:"networkpolicies",label:"Network Policies",icon:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"}]},{title:"Config & Storage",items:[{id:"configmaps",label:"ConfigMaps",icon:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"},{id:"secrets",label:"Secrets",icon:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"},{id:"certificates",label:"Certificates",icon:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"},{id:"storage",label:"Storage",icon:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"}]},{title:"Cluster",items:[{id:"nodes",label:"Nodes",icon:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"},{id:"rbac",label:"RBAC",icon:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"},{id:"usermanagement",label:"User Management",icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"},{id:"events",label:"Events",icon:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"},{id:"monitoredevents",label:"Event Monitor",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},{id:"resourcemap",label:"Resource Map",icon:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"}]},{title:"Integrations",items:[{id:"connectors",label:"Connectors",icon:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"},{id:"aiagents",label:"AI Agents",icon:"M9.75 3.104v5.714a2.25 2.25 0 01-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 014.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0112 15a9.065 9.065 0 00-6.23-.693L5 14.5m14.8.8l1.57.393A9.065 9.065 0 0021.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.065 9.065 0 003.464 3.693M19.8 15.3l-1.464-1.464M5 14.5l-1.464-1.464"}]},{title:"Extensions",items:[{id:"plugins",label:"Plugins",icon:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"},{id:"terminal",label:"Terminal",icon:"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"}]}],Hc=e=>{const[t,r]=J(e.defaultExpanded??!0);return(()=>{var i=Mc();return o(i,L(G,{get when(){return!It()},get children(){var h=kc(),_=h.firstChild,f=_.nextSibling;return h.$$click=()=>r(!t()),o(_,()=>e.section.title),ie(()=>Xe(f,"class",`w-3.5 h-3.5 transition-transform duration-200 ${t()?"":"-rotate-90"}`)),h}}),null),o(i,L(G,{get when(){return t()||It()},get children(){var h=Ac();return o(h,L(He,{get each(){return e.section.items},children:_=>{const[f,s]=J(!1),[l,u]=J({top:0,left:0});return(()=>{var g=Rc(),p=g.firstChild,b=p.firstChild;return g.addEventListener("mouseleave",()=>s(!1)),g.addEventListener("mouseenter",m=>{if(It()){const C=m.currentTarget.getBoundingClientRect();u({top:C.top+C.height/2,left:C.right+8}),s(!0)}}),g.$$click=m=>{m.preventDefault(),m.stopPropagation(),_.id==="terminal"?handleTerminalClick():At(_.id)},o(g,L(G,{get when(){return!It()},get children(){var m=Ec();return o(m,()=>_.label),ie(()=>ze(m,`text-sm ${wr()===_.id?"font-medium":""}`)),m}}),null),o(g,L(G,{get when(){return Re(()=>!!It())()&&f()},get children(){return L(Si,{get children(){var m=Lc();return o(m,()=>_.label),ie(C=>{var y=`${l().top}px`,n=`${l().left}px`;return y!==C.e&&ce(m,"top",C.e=y),n!==C.t&&ce(m,"left",C.t=n),C},{e:void 0,t:void 0}),m}})}}),null),ie(m=>{var C=`w-full flex items-center gap-2.5 px-2.5 py-1.5 rounded-md transition-all ${wr()===_.id?"bg-white/10":"hover:bg-white/5"}`,y=wr()===_.id?"var(--text-primary)":"var(--text-secondary)",n=_.icon;return C!==m.e&&ze(g,m.e=C),y!==m.t&&ce(g,"color",m.t=y),n!==m.a&&Xe(b,"d",m.a=n),m},{e:void 0,t:void 0,a:void 0}),g})()}})),ie(()=>ze(h,`space-y-px ${It()?"":"mt-0.5"}`)),h}}),null),i})()},zc=()=>{const[e,t]=J(!1),[r,i]=J(""),h=Ne(()=>{const _=r().toLowerCase().trim();return _?Yn.map(f=>({...f,items:f.items.filter(s=>s.label.toLowerCase().includes(_)||f.title.toLowerCase().includes(_))})).filter(f=>f.items.length>0):Yn});return(()=>{var _=Nc(),f=_.firstChild,s=f.firstChild;s.firstChild;var l=s.nextSibling,u=l.firstChild,g=f.nextSibling,p=g.nextSibling,b=p.firstChild;return b.firstChild,s.$$click=()=>At("dashboard"),o(s,L(G,{get when(){return!It()},get children(){return Dc()}}),null),kr(l,"click",bc,!0),o(_,L(G,{get when(){return!It()},get children(){var m=Pc(),C=m.firstChild,y=C.firstChild,n=y.nextSibling;return n.$$input=d=>i(d.currentTarget.value),o(C,L(G,{get when(){return r()},get children(){var d=Tc();return d.$$click=()=>i(""),d}}),null),ie(()=>n.value=r()),m}}),g),o(g,L(He,{get each(){return h()},children:(m,C)=>(console.log(`[Sidebar] Rendering section: ${m.title} with ${m.items.length} items:`,m.items.map(y=>y.label)),m.title==="Integrations"&&(console.log("[Sidebar] â INTEGRATIONS SECTION FOUND with items:",m.items.map(y=>y.label)),console.log("[Sidebar] Full section object:",JSON.stringify(m,null,2))),L(Hc,{section:m,get defaultExpanded(){return C()<3||m.title==="Integrations"}}))}),null),o(g,L(G,{get when(){return Re(()=>!!r())()&&h().length===0},get children(){var m=Ic();return m.firstChild,m}}),null),b.$$click=()=>At("settings"),o(b,L(G,{get when(){return!It()},get children(){return Bc()}}),null),o(p,L(G,{get when(){return!It()},get children(){return Oc()}}),null),o(_,L(yo,{get isOpen(){return e()},onClose:()=>t(!1)}),null),ie(m=>{var C=`fixed left-0 top-0 h-full sidebar-glass transition-all duration-300 z-40 ${It()?"w-16":"w-52"}`,y=It()?"Expand":"Collapse",n=`w-4 h-4 transition-transform ${It()?"rotate-180":""}`,d=It()?"calc(100% - 3.5rem - 4rem)":"calc(100% - 3.5rem - 4rem - 3rem)",a=`w-full flex items-center gap-2.5 px-2.5 py-1.5 rounded-md transition-all ${wr()==="settings"?"bg-white/10":"hover:bg-white/5"}`,c=wr()==="settings"?"var(--text-primary)":"var(--text-secondary)";return C!==m.e&&ze(_,m.e=C),y!==m.t&&Xe(l,"title",m.t=y),n!==m.a&&Xe(u,"class",m.a=n),d!==m.o&&ce(g,"height",m.o=d),a!==m.i&&ze(b,m.i=a),c!==m.n&&ce(b,"color",m.n=c),m},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),_})()};et(["click","input"]);const[tt,xo]=J("_all"),[ei,$o]=J(["default"]),[fs,wo]=J([]),[St,So]=J(""),[Fc,Ui]=J(!1),[jc,rs]=J(""),[Gn,Uc]=J({connected:!1,context:"",server:"",namespace:"default",nodeCount:0,podCount:0,cpuUsage:0,memoryUsage:0});async function Vc(){const e=await fetch("/api/namespaces");if(!e.ok)throw new Error("Failed to fetch namespaces");return(await e.json()).namespaces||[]}async function Wc(e){const t=e==="_all"?"/api/pods?all=true":`/api/pods?namespace=${e}`,r=await fetch(t);if(!r.ok)throw new Error("Failed to fetch pods");const i=await r.json();return Array.isArray(i)?i:i.pods||[]}async function qc(e){const t=e==="_all"?"/api/deployments?all=true":`/api/deployments?namespace=${e}`,r=await fetch(t);if(!r.ok)throw new Error("Failed to fetch deployments");const i=await r.json();return Array.isArray(i)?i:i.deployments||[]}async function Kc(e){const t=e==="_all"?"/api/services?all=true":`/api/services?namespace=${e}`,r=await fetch(t);if(!r.ok)throw new Error("Failed to fetch services");const i=await r.json();return Array.isArray(i)?i:i.services||[]}async function Yc(){const e=await fetch("/api/nodes");if(!e.ok)throw new Error("Failed to fetch nodes");const t=await e.json();return Array.isArray(t)?t:t.nodes||[]}async function Gc(){const e=await fetch("/api/status");if(!e.ok)throw new Error("Failed to fetch status");const t=await e.json();return{connected:t.connected||!1,context:t.cluster||t.context||"",server:t.server||"",namespace:t.namespace||"default",nodeCount:t.nodeCount||0,podCount:t.podCount||0,cpuUsage:t.cpuUsage||0,memoryUsage:t.memoryUsage||0}}async function Co(){const e=await fetch("/api/contexts");if(!e.ok)throw new Error("Failed to fetch contexts");return(await e.json()).contexts||[]}async function Jc(e){Ui(!0),rs(`Switching to ${e}...`);try{if(!(await fetch("/api/contexts/switch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({context:e})})).ok)throw new Error("Failed to switch context");So(e),rs(`Loading resources from ${e}...`),Ao();const r=await Co();wo(r);const i=await fetch("/api/namespaces");if(i.ok){const h=await i.json();$o(h.namespaces||[])}rs(`Connected to ${e}`),setTimeout(()=>{Ui(!1),rs("")},1e3)}catch(t){throw rs(`Failed to switch to ${e}`),setTimeout(()=>{Ui(!1),rs("")},2e3),t}}const[ui]=qe(Vc),[Jn,{refetch:Xc}]=qe(tt,Wc),[b$,{refetch:Zc}]=qe(tt,qc),[y$,{refetch:Qc}]=qe(tt,Kc),[ss,{refetch:ko}]=qe(Yc),[rn,{refetch:ed}]=qe(Gc),[sn,{refetch:x$}]=qe(Co);Tt(()=>{const e=ui();e&&$o(e)});Tt(()=>{const e=rn();console.log("Status resource loaded:",e),e&&(Uc(e),So(e.context))});Tt(()=>{const e=sn();console.log("Contexts resource loaded:",e),e&&wo(e)});Tt(()=>{rn.error&&console.error("Status error:",rn.error),ui.error&&console.error("Namespaces error:",ui.error),Jn.error&&console.error("Pods error:",Jn.error),ss.error&&console.error("Nodes error:",ss.error)});const[Yt,td]=J(0);function Ao(){Xc(),Zc(),Qc(),ko(),ed(),td(e=>e+1)}const Wr={dark:{name:"dark",label:"Dark",icon:"moon",colors:{bgPrimary:"#0f172a",bgSecondary:"#1e293b",bgTertiary:"#334155",bgCard:"rgba(30, 41, 59, 0.8)",bgNavbar:"rgba(15, 23, 42, 0.95)",bgInput:"rgba(30, 41, 59, 0.8)",textPrimary:"#ffffff",textSecondary:"#94a3b8",textMuted:"#64748b",borderColor:"rgba(100, 116, 139, 0.3)",borderLight:"rgba(100, 116, 139, 0.5)",accentPrimary:"#06b6d4",accentSecondary:"#3b82f6",accentGradient:"linear-gradient(135deg, #06b6d4 0%, #3b82f6 50%, #8b5cf6 100%)",successColor:"#22c55e",warningColor:"#f59e0b",errorColor:"#ef4444"}},light:{name:"light",label:"Light",icon:"sun",colors:{bgPrimary:"#f8fafc",bgSecondary:"#e2e8f0",bgTertiary:"#cbd5e1",bgCard:"rgba(255, 255, 255, 0.95)",bgNavbar:"rgba(248, 250, 252, 0.95)",bgInput:"rgba(255, 255, 255, 0.9)",textPrimary:"#0f172a",textSecondary:"#475569",textMuted:"#64748b",borderColor:"rgba(148, 163, 184, 0.4)",borderLight:"rgba(148, 163, 184, 0.6)",accentPrimary:"#0891b2",accentSecondary:"#2563eb",accentGradient:"linear-gradient(135deg, #0891b2 0%, #2563eb 100%)",successColor:"#16a34a",warningColor:"#d97706",errorColor:"#dc2626"}},midnight:{name:"midnight",label:"Midnight",icon:"stars",colors:{bgPrimary:"#030712",bgSecondary:"#111827",bgTertiary:"#1f2937",bgCard:"rgba(17, 24, 39, 0.9)",bgNavbar:"rgba(3, 7, 18, 0.98)",bgInput:"rgba(17, 24, 39, 0.9)",textPrimary:"#f9fafb",textSecondary:"#9ca3af",textMuted:"#6b7280",borderColor:"rgba(75, 85, 99, 0.4)",borderLight:"rgba(75, 85, 99, 0.6)",accentPrimary:"#8b5cf6",accentSecondary:"#a855f7",accentGradient:"linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%)",successColor:"#10b981",warningColor:"#f59e0b",errorColor:"#f43f5e"}},cyberpunk:{name:"cyberpunk",label:"Cyberpunk",icon:"bolt",colors:{bgPrimary:"#0a0a0f",bgSecondary:"#12121a",bgTertiary:"#1a1a25",bgCard:"rgba(18, 18, 26, 0.95)",bgNavbar:"rgba(10, 10, 15, 0.98)",bgInput:"rgba(18, 18, 26, 0.9)",textPrimary:"#00ff9f",textSecondary:"#ff00ff",textMuted:"#00d4ff",borderColor:"rgba(0, 255, 159, 0.3)",borderLight:"rgba(255, 0, 255, 0.4)",accentPrimary:"#00ff9f",accentSecondary:"#ff00ff",accentGradient:"linear-gradient(135deg, #00ff9f 0%, #ff00ff 100%)",successColor:"#00ff9f",warningColor:"#ffff00",errorColor:"#ff0055"}},ocean:{name:"ocean",label:"Ocean",icon:"wave",colors:{bgPrimary:"#0c1929",bgSecondary:"#132f4c",bgTertiary:"#1a4971",bgCard:"rgba(19, 47, 76, 0.9)",bgNavbar:"rgba(12, 25, 41, 0.98)",bgInput:"rgba(19, 47, 76, 0.9)",textPrimary:"#ffffff",textSecondary:"#b2bac2",textMuted:"#8b949e",borderColor:"rgba(48, 98, 139, 0.5)",borderLight:"rgba(48, 98, 139, 0.7)",accentPrimary:"#29b6f6",accentSecondary:"#4fc3f7",accentGradient:"linear-gradient(135deg, #29b6f6 0%, #4fc3f7 100%)",successColor:"#66bb6a",warningColor:"#ffa726",errorColor:"#ef5350"}},terminal:{name:"terminal",label:"Terminal",icon:"terminal",colors:{bgPrimary:"#000000",bgSecondary:"#1a1a1a",bgTertiary:"#2d2d2d",bgCard:"rgba(26, 26, 26, 0.95)",bgNavbar:"rgba(0, 0, 0, 0.98)",bgInput:"rgba(26, 26, 26, 0.9)",textPrimary:"#ffffff",textSecondary:"#e5e5e5",textMuted:"#999999",borderColor:"rgba(255, 255, 255, 0.1)",borderLight:"rgba(255, 255, 255, 0.15)",accentPrimary:"#007aff",accentSecondary:"#5ac8fa",accentGradient:"linear-gradient(135deg, #007aff 0%, #5ac8fa 100%)",successColor:"#34c759",warningColor:"#ff9500",errorColor:"#ff3b30"}}};function rd(){if(typeof window<"u"){const e=localStorage.getItem("kubegraf-theme");if(e&&Wr[e])return e}return"dark"}const[_s,sd]=J(rd());function Mo(e){const t=Wr[e],r=document.documentElement;Object.entries(t.colors).forEach(([i,h])=>{const _=i.replace(/([A-Z])/g,"-$1").toLowerCase();r.style.setProperty(`--${_}`,h)}),document.body.setAttribute("data-theme",e),localStorage.setItem("kubegraf-theme",e)}function Eo(e){sd(e),Mo(e)}typeof window<"u"&&Mo(_s());var id=T('<svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="w-5 h-5"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z">'),nd=T('<svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="w-5 h-5"><circle cx=12 cy=12 r=5></circle><line x1=12 y1=1 x2=12 y2=3></line><line x1=12 y1=21 x2=12 y2=23></line><line x1=4.22 y1=4.22 x2=5.64 y2=5.64></line><line x1=18.36 y1=18.36 x2=19.78 y2=19.78></line><line x1=1 y1=12 x2=3 y2=12></line><line x1=21 y1=12 x2=23 y2=12></line><line x1=4.22 y1=19.78 x2=5.64 y2=18.36></line><line x1=18.36 y1=5.64 x2=19.78 y2=4.22>'),ld=T('<svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="w-5 h-5"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2">'),od=T('<svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="w-5 h-5"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2">'),ad=T('<svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="w-5 h-5"><path d="M2 12c2-2 4-4 6-4s4 2 6 4 4 4 6 4 4-2 6-4"></path><path d="M2 6c2-2 4-4 6-4s4 2 6 4 4 4 6 4 4-2 6-4"></path><path d="M2 18c2-2 4-4 6-4s4 2 6 4 4 4 6 4 4-2 6-4">'),cd=T('<svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="w-5 h-5"><polyline points="4 17 10 11 4 5"></polyline><line x1=12 y1=19 x2=20 y2=19>'),dd=T('<div class="fixed inset-0"style=z-index:99998>'),hd=T('<div class="fixed w-48 rounded-lg border border-[var(--border-color)] shadow-xl"style=background:var(--bg-secondary);z-index:99999>'),ud=T('<div class=relative><button class="icon-btn border border-[var(--border-color)] hover:border-[var(--accent-primary)]">'),fd=T("<button><span class=font-medium>"),gd=T('<svg class="w-4 h-4 ml-auto"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"clip-rule=evenodd>');const pd=()=>{const[e,t]=J(!1),[r,i]=J({top:0,right:0});let h;const _={dark:id(),light:nd(),midnight:ld(),cyberpunk:od(),ocean:ad(),terminal:cd()},f=()=>{if(!e()&&h){const s=h.getBoundingClientRect();i({top:s.bottom+8,right:window.innerWidth-s.right})}t(!e())};return(()=>{var s=ud(),l=s.firstChild;l.$$click=f;var u=h;return typeof u=="function"?Zt(u,l):h=l,o(l,()=>_[_s()]),o(s,L(Si,{get children(){return L(G,{get when(){return e()},get children(){return[(()=>{var g=dd();return g.$$click=()=>t(!1),g})(),(()=>{var g=hd();return o(g,()=>Object.keys(Wr).map(p=>(()=>{var b=fd(),m=b.firstChild;return b.$$click=()=>{Eo(p),t(!1)},o(b,()=>_[p],m),o(m,()=>Wr[p].label),o(b,(()=>{var C=Re(()=>_s()===p);return()=>C()&&gd()})(),null),ie(()=>ze(b,`w-full flex items-center gap-3 px-4 py-3 transition-colors hover:bg-[var(--bg-tertiary)] ${_s()===p?"text-[var(--accent-primary)]":"text-[var(--text-primary)]"} ${p==="dark"?"rounded-t-lg":""} ${p==="terminal"?"rounded-b-lg":""}`)),b})())),ie(p=>{var b=`${r().top}px`,m=`${r().right}px`;return b!==p.e&&ce(g,"top",p.e=b),m!==p.t&&ce(g,"right",p.t=m),p},{e:void 0,t:void 0}),g})()]}})}}),null),ie(()=>Xe(l,"title",`Theme: ${Wr[_s()].label}`)),s})()};et(["click"]);const Dr="/api";async function Me(e,t){const i=new AbortController,h=setTimeout(()=>i.abort(),15e3);try{const _=await fetch(`${Dr}${e}`,{headers:{"Content-Type":"application/json",...t?.headers},signal:i.signal,...t});if(clearTimeout(h),!_.ok){const f=await _.text();throw new Error(f||`API error: ${_.status}`)}return _.json()}catch(_){throw clearTimeout(h),_.name==="AbortError"?new Error("Request timed out. The server may be processing a large amount of data."):_}}async function Rt(e){const r=await(await fetch(`${Dr}${e}`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();if(!r.success)throw new Error(r.error||"Delete operation failed");return r}const De={getStatus:()=>Me("/status"),checkForUpdates:()=>Me("/updates/check"),installUpdate:e=>Me("/updates/install",{method:"POST",body:JSON.stringify({downloadUrl:e})}),getMetrics:()=>Me("/metrics"),getNamespaces:async()=>(await Me("/namespaces")).namespaces||[],getPods:async e=>{const t=e&&e!=="_all"?`/pods?namespace=${e}`:"/pods?namespace=",r=await Me(t);return Array.isArray(r)?r:[]},getPodDetails:(e,t)=>Me(`/pod/details?name=${e}&namespace=${t}`),getPodYAML:(e,t)=>Me(`/pod/yaml?name=${e}&namespace=${t}`),updatePod:async(e,t,r)=>{const i=await fetch(`/api/pod/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"text/yaml"},body:r});if(!i.ok){const h=await i.json().catch(()=>({message:"Unknown error"}));throw new Error(h.error||h.message||`API error: ${i.statusText}`)}return i.json()},getPodDescribe:(e,t)=>Me(`/pod/describe?name=${e}&namespace=${t}`),deletePod:(e,t)=>Rt(`/pod/delete?name=${e}&namespace=${t}`),restartPod:(e,t)=>Me(`/pod/restart?name=${e}&namespace=${t}`,{method:"POST"}),getPodMetrics:async e=>{const t=e&&e!=="_all"?`/pods/metrics?namespace=${e}`:"/pods/metrics?namespace=";return await Me(t)||{}},getDeployments:async e=>{const t=e&&e!=="_all"?`/deployments?namespace=${e}`:"/deployments?namespace=",r=await Me(t);return Array.isArray(r)?r:[]},getDeploymentDetails:(e,t)=>Me(`/deployment/details?name=${e}&namespace=${t}`),getDeploymentYAML:(e,t)=>Me(`/deployment/yaml?name=${e}&namespace=${t}`),updateDeployment:async(e,t,r)=>{const i=await fetch(`/api/deployment/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"text/yaml"},body:r});if(!i.ok){const h=await i.json().catch(()=>({message:"Unknown error"}));throw new Error(h.error||h.message||`API error: ${i.statusText}`)}return i.json()},getDeploymentDescribe:(e,t)=>Me(`/deployment/describe?name=${e}&namespace=${t}`),deleteDeployment:(e,t)=>Rt(`/deployment/delete?name=${e}&namespace=${t}`),restartDeployment:(e,t)=>Me(`/deployment/restart?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST"}),scaleDeployment:(e,t,r)=>Me(`/deployment/scale?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}&replicas=${r}`,{method:"POST"}),getStatefulSets:async e=>{const t=e&&e!=="_all"?`/statefulsets?namespace=${e}`:"/statefulsets?namespace=",r=await Me(t);return Array.isArray(r)?r:[]},getStatefulSetYAML:(e,t)=>Me(`/statefulset/yaml?name=${e}&namespace=${t}`),getStatefulSetDescribe:(e,t)=>Me(`/statefulset/describe?name=${e}&namespace=${t}`),deleteStatefulSet:(e,t)=>Rt(`/statefulset/delete?name=${e}&namespace=${t}`),restartStatefulSet:(e,t)=>Me(`/statefulset/restart?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST"}),scaleStatefulSet:(e,t,r)=>Me(`/statefulset/scale?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}&replicas=${r}`,{method:"POST"}),getDaemonSets:async e=>{const t=e&&e!=="_all"?`/daemonsets?namespace=${e}`:"/daemonsets?namespace=",r=await Me(t);return Array.isArray(r)?r:[]},getDaemonSetYAML:(e,t)=>Me(`/daemonset/yaml?name=${e}&namespace=${t}`),updateDaemonSet:(e,t,r)=>fetch(`${Dr}/daemonset/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"application/yaml"},body:r}).then(i=>i.json()),getDaemonSetDescribe:(e,t)=>Me(`/daemonset/describe?name=${e}&namespace=${t}`),deleteDaemonSet:(e,t)=>Rt(`/daemonset/delete?name=${e}&namespace=${t}`),getCronJobs:async e=>{const t=e&&e!=="_all"?`/cronjobs?namespace=${e}`:"/cronjobs?namespace=",r=await Me(t);return Array.isArray(r)?r:[]},getCronJobYAML:(e,t)=>Me(`/cronjob/yaml?name=${e}&namespace=${t}`),updateCronJob:(e,t,r)=>fetch(`${Dr}/cronjob/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"application/yaml"},body:r}).then(i=>i.json()),deleteCronJob:(e,t)=>Rt(`/cronjob/delete?name=${e}&namespace=${t}`),getJobs:async e=>{const t=e&&e!=="_all"?`/jobs?namespace=${e}`:"/jobs?namespace=",r=await Me(t);return Array.isArray(r)?r:[]},getJobYAML:(e,t)=>Me(`/job/yaml?name=${e}&namespace=${t}`),updateJob:(e,t,r)=>fetch(`${Dr}/job/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"application/yaml"},body:r}).then(i=>i.json()),deleteJob:(e,t)=>Rt(`/job/delete?name=${e}&namespace=${t}`),getServices:async e=>{const t=e&&e!=="_all"?`/services?namespace=${e}`:"/services?namespace=",r=await Me(t);return Array.isArray(r)?r:[]},getServiceYAML:(e,t)=>Me(`/service/yaml?name=${e}&namespace=${t}`),updateService:(e,t,r)=>fetch(`${Dr}/service/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"application/yaml"},body:r}).then(i=>i.json()),getServiceDescribe:(e,t)=>Me(`/service/describe?name=${e}&namespace=${t}`),deleteService:(e,t)=>Rt(`/service/delete?name=${e}&namespace=${t}`),getIngresses:async e=>{const t=e&&e!=="_all"?`/ingresses?namespace=${e}`:"/ingresses?namespace=",r=await Me(t);return Array.isArray(r)?r:[]},getIngressYAML:(e,t)=>Me(`/ingress/yaml?name=${e}&namespace=${t}`),updateIngress:(e,t,r)=>fetch(`${Dr}/ingress/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"application/yaml"},body:r}).then(i=>i.json()),getIngressDescribe:(e,t)=>Me(`/ingress/describe?name=${e}&namespace=${t}`),deleteIngress:(e,t)=>Rt(`/ingress/delete?name=${e}&namespace=${t}`),getConfigMaps:async e=>{const t=e&&e!=="_all"?`/configmaps?namespace=${e}`:"/configmaps?namespace=",r=await Me(t);return Array.isArray(r)?r:[]},getConfigMapYAML:(e,t)=>Me(`/configmap/yaml?name=${e}&namespace=${t}`),getConfigMapDescribe:(e,t)=>Me(`/configmap/describe?name=${e}&namespace=${t}`),deleteConfigMap:(e,t)=>Rt(`/configmap/delete?name=${e}&namespace=${t}`),getSecrets:async e=>{const t=e&&e!=="_all"?`/secrets?namespace=${e}`:"/secrets?namespace=",r=await Me(t);return Array.isArray(r)?r:[]},getSecretYAML:(e,t)=>Me(`/secret/yaml?name=${e}&namespace=${t}`),updateSecret:async(e,t,r)=>{const i=await fetch(`/api/secret/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"text/yaml"},body:r});if(!i.ok){const h=await i.json().catch(()=>({message:"Unknown error"}));throw new Error(h.error||h.message||`API error: ${i.statusText}`)}return i.json()},getSecretDescribe:(e,t)=>Me(`/secret/describe?name=${e}&namespace=${t}`),deleteSecret:(e,t)=>Rt(`/secret/delete?name=${e}&namespace=${t}`),getCertificates:async e=>{const t=e&&e!=="_all"?`/certificates?namespace=${e}`:"/certificates?namespace=",r=await Me(t);return Array.isArray(r)?r:[]},getCertificateYAML:(e,t)=>Me(`/certificate/yaml?name=${e}&namespace=${t}`),updateCertificate:(e,t,r)=>fetch(`${Dr}/certificate/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"application/yaml"},body:r}).then(i=>i.json()),getCertificateDescribe:(e,t)=>Me(`/certificate/describe?name=${e}&namespace=${t}`),deleteCertificate:(e,t)=>Rt(`/certificate/delete?name=${e}&namespace=${t}`),getNodes:async()=>{const e=await Me("/nodes");return Array.isArray(e)?e:[]},getNodeDetails:e=>Me(`/node/details?name=${e}`),getNodeYAML:e=>Me(`/node/yaml?name=${e}`),getNodeDescribe:e=>Me(`/node/describe?name=${e}`),getTopology:e=>{const t=e&&e!=="All Namespaces"?`/topology?namespace=${e}`:"/topology";return Me(t)},getResourceMap:()=>Me("/resourcemap"),getImpactAnalysis:(e,t,r)=>Me(`/impact?kind=${e}&name=${t}&namespace=${r}`),getSecurityAnalysis:()=>Me("/security"),startPortForward:(e,t,r,i,h)=>Me("/portforward/start",{method:"POST",body:JSON.stringify({type:e,name:t,namespace:r,localPort:i,remotePort:h})}),stopPortForward:e=>Me(`/portforward/stop?id=${e}`,{method:"POST"}),listPortForwards:()=>Me("/portforward/list"),getAIStatus:()=>Me("/ai/status"),queryAI:e=>Me("/ai/query",{method:"POST",body:JSON.stringify({query:e})}),analyzePod:(e,t)=>Me(`/ai/analyze/pod?name=${e}&namespace=${t}`),explainError:(e,t)=>Me("/ai/explain",{method:"POST",body:JSON.stringify({error:e,resourceType:t})}),runDiagnostics:(e,t)=>{const r=new URLSearchParams;e&&r.append("namespace",e),t&&r.append("category",t);const i=r.toString()?`?${r.toString()}`:"";return Me(`/diagnostics/run${i}`)},getDiagnosticsCategories:()=>Me("/diagnostics/categories"),scanVulnerabilities:e=>{const t=new URLSearchParams;e&&t.append("severity",e);const r=t.toString()?`?${t.toString()}`:"";return Me(`/vulnerabilities/scan${r}`)},refreshVulnerabilities:()=>Me("/vulnerabilities/refresh",{method:"POST"}),getVulnerabilityStats:()=>Me("/vulnerabilities/stats"),detectAnomalies:e=>{const t=e?`/anomalies/detect?severity=${e}`:"/anomalies/detect";return Me(t)},getAnomalyStats:()=>Me("/anomalies/stats"),remediateAnomaly:e=>Me("/anomalies/remediate",{method:"POST",body:JSON.stringify({anomalyId:e})}),getMLRecommendations:()=>Me("/ml/recommendations"),predictResourceNeeds:(e,t,r)=>{const i=new URLSearchParams({namespace:e,deployment:t});return r&&i.append("hours",r.toString()),Me(`/ml/predict?${i.toString()}`)},getAnomalyMetrics:e=>{const t=e?`/anomalies/metrics?limit=${e}`:"/anomalies/metrics";return Me(t)},getMonitoredEvents:e=>{const t=new URLSearchParams;e?.type&&t.append("type",e.type),e?.category&&t.append("category",e.category),e?.severity&&t.append("severity",e.severity),e?.namespace&&t.append("namespace",e.namespace),e?.since&&t.append("since",e.since),e?.limit&&t.append("limit",e.limit.toString());const r=t.toString()?`?${t.toString()}`:"";return Me(`/events/monitored${r}`)},getLogErrors:e=>{const t=new URLSearchParams;e?.namespace&&t.append("namespace",e.namespace),e?.since&&t.append("since",e.since),e?.limit&&t.append("limit",e.limit.toString());const r=t.toString()?`?${t.toString()}`:"";return Me(`/events/log-errors${r}`)},getEventStats:()=>Me("/events/stats"),getGroupedEvents:e=>{const t=new URLSearchParams;e&&t.append("period",e);const r=t.toString()?`?${t.toString()}`:"";return Me(`/events/grouped${r}`)},getClusterCost:()=>Me("/cost/cluster"),getNamespaceCost:e=>Me(`/cost/namespace?namespace=${e}`),getPodCost:(e,t)=>Me(`/cost/pod?name=${e}&namespace=${t}`),getDeploymentCost:(e,t)=>Me(`/cost/deployment?name=${e}&namespace=${t}`),getIdleResources:(e,t,r)=>{const i=new URLSearchParams;e&&i.append("namespace",e),t&&i.append("cpuThreshold",t.toString()),r&&i.append("memThreshold",r.toString());const h=i.toString()?`?${i.toString()}`:"";return Me(`/cost/idle${h}`)},checkDrift:(e,t,r)=>{const i=new URLSearchParams({kind:e,name:t});return r&&i.append("namespace",r),Me(`/drift/check?${i.toString()}`)},getNamespaceDrift:e=>Me(`/drift/namespace?namespace=${e}`),getDriftSummary:e=>Me(`/drift/summary?namespace=${e}`),revertDrift:(e,t,r)=>Me("/drift/revert",{method:"POST",body:JSON.stringify({kind:e,name:t,namespace:r})}),getNetworkTopology:()=>Me("/network/topology"),getPodHeatmap:()=>Me("/heatmap/pods"),getNodeHeatmap:()=>Me("/heatmap/nodes"),getPluginsList:()=>Me("/plugins/list"),installPlugin:e=>Me("/plugins/install",{method:"POST",body:JSON.stringify({source:e})}),uninstallPlugin:e=>Me("/plugins/uninstall",{method:"POST",body:JSON.stringify({name:e})}),getHelmReleases:async e=>{const t=e?`/plugins/helm/releases?namespace=${e}`:"/plugins/helm/releases";return(await Me(t)).releases||[]},getHelmReleaseDetails:(e,t)=>Me(`/plugins/helm/release?name=${e}&namespace=${t}`),getHelmReleaseHistory:(e,t)=>Me(`/plugins/helm/history?name=${e}&namespace=${t}`),rollbackHelmRelease:(e,t,r)=>Me("/plugins/helm/rollback",{method:"POST",body:JSON.stringify({name:e,namespace:t,revision:r})}),getArgoCDApps:async()=>(await Me("/plugins/argocd/apps")).apps||[],getArgoCDAppDetails:(e,t)=>Me(`/plugins/argocd/app?name=${e}&namespace=${t}`),syncArgoCDApp:(e,t)=>Me("/plugins/argocd/sync",{method:"POST",body:JSON.stringify({name:e,namespace:t})}),refreshArgoCDApp:(e,t)=>Me("/plugins/argocd/refresh",{method:"POST",body:JSON.stringify({name:e,namespace:t})}),getFluxResources:async()=>(await Me("/plugins/flux/resources")).resources||[],getKustomizeResources:()=>Me("/plugins/kustomize/resources"),getCloudInfo:()=>Me("/cloud"),getContexts:()=>Me("/contexts"),getCurrentContext:()=>Me("/contexts/current"),switchContext:e=>Me("/contexts/switch",{method:"POST",body:JSON.stringify({context:e})}),getEvents:async(e,t)=>{const r=new URLSearchParams;return e&&e!=="All Namespaces"&&r.set("namespace",e),t&&r.set("limit",t.toString()),Me(`/events?${r.toString()}`)},getApps:()=>Me("/apps"),getAppDetails:e=>Me(`/apps/${e}`),installApp:(e,t,r)=>Me("/apps/install",{method:"POST",body:JSON.stringify({name:e,namespace:t,values:r})}),uninstallApp:(e,t)=>Me("/apps/uninstall",{method:"POST",body:JSON.stringify({name:e,namespace:t})}),getInstalledApps:()=>Me("/apps/installed"),getLocalClusters:()=>Me("/apps/local-clusters"),analyzePodsLogs:e=>Me(`/ai/analyze/logs${e?`?namespace=${e}`:""}`),analyzePodLogs:(e,t)=>Me(`/ai/analyze/pod-logs?name=${e}&namespace=${t}`),getPVYAML:e=>Me(`/storage/pv/yaml?name=${encodeURIComponent(e)}`),updatePV:async(e,t)=>{const r=await fetch(`/api/storage/pv/update?name=${encodeURIComponent(e)}`,{method:"POST",headers:{"Content-Type":"text/yaml"},body:t});if(!r.ok){const i=await r.json().catch(()=>({message:"Unknown error"}));throw new Error(i.error||i.message||`API error: ${r.statusText}`)}return r.json()},deletePV:e=>Rt(`/storage/pv/delete?name=${e}`),getPVCYAML:(e,t)=>Me(`/storage/pvc/yaml?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`),updatePVC:async(e,t,r)=>{const i=await fetch(`/api/storage/pvc/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"text/yaml"},body:r});if(!i.ok){const h=await i.json().catch(()=>({message:"Unknown error"}));throw new Error(h.error||h.message||`API error: ${i.statusText}`)}return i.json()},deletePVC:(e,t)=>Rt(`/storage/pvc/delete?name=${e}&namespace=${t}`),getStorageClassYAML:e=>Me(`/storage/storageclass/yaml?name=${encodeURIComponent(e)}`),updateStorageClass:async(e,t)=>{const r=await fetch(`/api/storage/storageclass/update?name=${encodeURIComponent(e)}`,{method:"POST",headers:{"Content-Type":"text/yaml"},body:t});if(!r.ok){const i=await r.json().catch(()=>({message:"Unknown error"}));throw new Error(i.error||i.message||`API error: ${r.statusText}`)}return r.json()},deleteStorageClass:e=>Rt(`/storage/storageclass/delete?name=${e}`),getRoleYAML:(e,t)=>Me(`/rbac/role/yaml?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`),updateRole:async(e,t,r)=>{const i=await fetch(`/api/rbac/role/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"text/yaml"},body:r});if(!i.ok){const h=await i.json().catch(()=>({message:"Unknown error"}));throw new Error(h.error||h.message||`API error: ${i.statusText}`)}return i.json()},deleteRole:(e,t)=>Rt(`/rbac/role/delete?name=${e}&namespace=${t}`),getRoleBindingYAML:(e,t)=>Me(`/rbac/rolebinding/yaml?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`),updateRoleBinding:async(e,t,r)=>{const i=await fetch(`/api/rbac/rolebinding/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"text/yaml"},body:r});if(!i.ok){const h=await i.json().catch(()=>({message:"Unknown error"}));throw new Error(h.error||h.message||`API error: ${i.statusText}`)}return i.json()},deleteRoleBinding:(e,t)=>Rt(`/rbac/rolebinding/delete?name=${e}&namespace=${t}`),getClusterRoleYAML:e=>Me(`/rbac/clusterrole/yaml?name=${encodeURIComponent(e)}`),updateClusterRole:async(e,t)=>{const r=await fetch(`/api/rbac/clusterrole/update?name=${encodeURIComponent(e)}`,{method:"POST",headers:{"Content-Type":"text/yaml"},body:t});if(!r.ok){const i=await r.json().catch(()=>({message:"Unknown error"}));throw new Error(i.error||i.message||`API error: ${r.statusText}`)}return r.json()},deleteClusterRole:e=>Rt(`/rbac/clusterrole/delete?name=${e}`),getClusterRoleBindingYAML:e=>Me(`/rbac/clusterrolebinding/yaml?name=${encodeURIComponent(e)}`),updateClusterRoleBinding:async(e,t)=>{const r=await fetch(`/api/rbac/clusterrolebinding/update?name=${encodeURIComponent(e)}`,{method:"POST",headers:{"Content-Type":"text/yaml"},body:t});if(!r.ok){const i=await r.json().catch(()=>({message:"Unknown error"}));throw new Error(i.error||i.message||`API error: ${r.statusText}`)}return r.json()},deleteClusterRoleBinding:e=>Rt(`/rbac/clusterrolebinding/delete?name=${e}`),applyRecommendation:async e=>Me("/ml/recommendations/apply",{method:"POST",body:JSON.stringify({id:e})}),getConnectors:()=>Me("/connectors"),createConnector:e=>Me("/connectors",{method:"POST",body:JSON.stringify(e)}),updateConnector:(e,t)=>Me(`/connectors/${e}`,{method:"PUT",body:JSON.stringify(t)}),deleteConnector:e=>Me(`/connectors/${e}`,{method:"DELETE"}),testConnector:e=>Me(`/connectors/${e}/test`,{method:"POST"})};var vd=T('<svg viewBox="0 0 256 206"class="w-5 h-5"fill=none><path d="M170.252 56.819l22.253-22.253 1.483-9.37C153.437-11.677 88.976-7.496 52.42 33.92 42.267 45.423 34.734 59.764 30.717 74.573l7.97-1.123 44.505-7.34 3.436-3.513c19.797-21.742 53.27-24.667 76.128-5.632l7.496-.146z"fill=#EA4335></path><path d="M224.205 73.918a100.249 100.249 0 00-30.217-48.722l-31.232 31.232a55.515 55.515 0 0120.379 44.037v5.544c15.35 0 27.797 12.446 27.797 27.796 0 15.352-12.446 27.573-27.797 27.573h-55.671l-5.466 5.621v33.339l5.466 5.389h55.67c40.143.312 73.076-31.857 73.388-72 .178-23.106-10.736-44.898-29.84-59.653l-2.477.844z"fill=#4285F4></path><path d="M71.87 205.796h55.593V161.29H71.87a27.275 27.275 0 01-11.467-2.545l-7.97 2.468-22.331 22.253-1.949 7.65c12.758 9.603 28.39 14.758 44.484 14.68h-.767z"fill=#34A853></path><path d="M71.87 50.525C31.727 50.837-1.207 84.447.081 124.59c.72 22.632 11.389 43.821 28.925 57.476l32.25-32.25c-16.292-7.378-23.503-26.672-16.125-42.964a31.86 31.86 0 0116.125-16.125l-32.25-32.25A72.002 72.002 0 0071.87 50.525z"fill=#FBBC05>'),md=T('<svg viewBox="0 0 256 153"class="w-5 h-5"fill=none><path d="M72.392 55.438c0 3.137.34 5.68.933 7.545a45.373 45.373 0 002.712 6.103c.424.678.593 1.356.593 1.95 0 .847-.508 1.695-1.61 2.543l-5.34 3.56c-.763.509-1.526.763-2.205.763-.847 0-1.695-.424-2.543-1.187a26.224 26.224 0 01-3.051-3.984 65.48 65.48 0 01-2.628-5.001c-6.612 7.798-14.92 11.698-24.922 11.698-7.12 0-12.8-2.035-16.954-6.103-4.153-4.07-6.272-9.495-6.272-16.277 0-7.206 2.543-13.054 7.714-17.462 5.17-4.408 12.037-6.612 20.682-6.612 2.882 0 5.849.254 8.985.678 3.137.424 6.358 1.102 9.749 1.865V29.33c0-6.443-1.356-10.935-3.984-13.563-2.712-2.628-7.29-3.9-13.817-3.9-2.967 0-6.018.34-9.155 1.103-3.136.762-6.188 1.695-9.155 2.882-.763.34-1.441.593-1.95.763-.508.17-.932.254-1.271.254-1.102 0-1.61-.763-1.61-2.374v-4.153c0-1.272.17-2.205.593-2.713.424-.508 1.187-1.017 2.374-1.525 2.967-1.526 6.527-2.798 10.68-3.815C24.922.678 29.33.085 33.992.085c10.256 0 17.716 2.374 22.463 7.12 4.662 4.747 7.036 11.952 7.036 21.615v28.618h-.1z"fill=#252F3E></path><path d="M30.94 67.052c2.798 0 5.68-.509 8.731-1.526 3.052-1.017 5.765-2.882 8.054-5.425 1.356-1.61 2.374-3.39 2.882-5.51.509-2.12.848-4.661.848-7.629v-3.646a70.732 70.732 0 00-7.799-1.44 63.56 63.56 0 00-7.968-.509c-5.68 0-9.833 1.102-12.63 3.39-2.798 2.289-4.154 5.51-4.154 9.749 0 3.984 1.017 6.95 3.136 8.985 2.035 2.12 5.001 3.137 8.9 3.137v.424z"fill=#252F3E></path><path d="M126.434 74.087c-1.441 0-2.374-.254-2.967-.847-.593-.509-1.102-1.61-1.525-3.052l-17.039-56.05c-.424-1.526-.678-2.543-.678-3.136 0-1.272.593-1.95 1.78-1.95h8.308c1.526 0 2.543.254 3.052.847.593.509 1.017 1.61 1.44 3.052l12.206 48.082 11.359-48.082c.34-1.526.763-2.543 1.356-3.052.593-.508 1.695-.847 3.136-.847h6.782c1.526 0 2.543.254 3.136.847.593.509 1.102 1.61 1.357 3.052l11.528 48.675 12.545-48.675c.424-1.526.932-2.543 1.441-3.052.593-.508 1.61-.847 3.051-.847h7.883c1.187 0 1.865.678 1.865 1.95 0 .338-.085.678-.17 1.101-.084.424-.254 1.017-.508 1.78l-17.378 56.219c-.424 1.526-.932 2.543-1.526 3.052-.593.508-1.61.847-2.966.847h-7.29c-1.526 0-2.544-.254-3.137-.847-.593-.593-1.102-1.61-1.356-3.136l-11.274-46.877-11.19 46.793c-.339 1.526-.763 2.543-1.356 3.136-.593.593-1.695.848-3.137.848h-7.29z"fill=#252F3E></path><path d="M201.462 78.325c-4.408 0-8.816-.508-13.055-1.525-4.238-1.017-7.544-2.12-9.748-3.39-1.357-.763-2.29-1.61-2.629-2.374-.339-.763-.508-1.61-.508-2.374v-4.322c0-1.61.593-2.374 1.695-2.374.423 0 .847.085 1.271.254.424.17 1.102.424 1.865.763 2.543 1.187 5.34 2.12 8.308 2.798 3.051.678 6.018 1.017 9.07 1.017 4.831 0 8.562-.847 11.105-2.543 2.543-1.695 3.9-4.153 3.9-7.29 0-2.119-.678-3.9-2.035-5.34-1.356-1.441-3.984-2.713-7.798-3.9l-11.19-3.475c-5.68-1.78-9.918-4.408-12.546-7.883-2.628-3.39-3.984-7.205-3.984-11.274 0-3.306.678-6.188 2.035-8.731 1.356-2.543 3.136-4.747 5.425-6.527 2.288-1.865 4.916-3.221 8.053-4.153 3.136-.932 6.442-1.356 9.918-1.356 1.78 0 3.645.085 5.425.339 1.865.254 3.56.593 5.255.932 1.61.424 3.136.847 4.577 1.356 1.44.508 2.543 1.017 3.305 1.525.932.593 1.61 1.187 1.95 1.865.339.593.508 1.44.508 2.458v3.984c0 1.61-.593 2.458-1.695 2.458-.593 0-1.526-.254-2.798-.763-4.238-1.95-9.07-2.882-14.495-2.882-4.408 0-7.883.678-10.341 2.12-2.459 1.44-3.73 3.645-3.73 6.781 0 2.12.763 3.9 2.289 5.34 1.525 1.441 4.408 2.882 8.562 4.153l10.935 3.475c5.595 1.78 9.665 4.238 12.122 7.374 2.459 3.136 3.646 6.697 3.646 10.681 0 3.39-.678 6.442-1.95 9.155-1.356 2.713-3.22 5.086-5.594 7.036-2.374 2.035-5.255 3.56-8.647 4.577-3.56 1.102-7.374 1.61-11.444 1.61z"fill=#252F3E></path><path d="M237.596 145.256c-29.126 21.531-71.418 32.974-107.813 32.974-50.996 0-96.927-18.853-131.65-50.235-2.713-2.459-.339-5.849 2.967-3.9 37.517 21.785 83.787 34.922 131.65 34.922 32.296 0 67.78-6.697 100.414-20.598 4.916-2.12 9.07 3.221 4.432 6.837z"fill=#FF9900></path><path d="M249.548 131.524c-3.73-4.747-24.668-2.289-34.078-1.102-2.882.339-3.306-2.12-.678-3.9 16.7-11.698 43.99-8.308 47.127-4.408 3.136 3.984-.848 31.314-16.531 44.369-2.374 2.035-4.662.932-3.56-1.78 3.475-8.562 11.189-28.449 7.72-33.179z"fill=#FF9900>'),_d=T('<svg viewBox="0 0 96 96"class="w-5 h-5"fill=none><path d="M33.337 6.11L2.305 81.954h21.792L57.67 6.11H33.337z"fill=#0078D4></path><path d="M71.175 26.316H43.09L20.97 82.097h22.125l28.08-55.781z"fill=#0078D4></path><path d="M79.04 6.11L57.8 89.9h18.41l21.484-83.79H79.04z"fill=#0078D4>'),bd=T('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#0530AD><path d="M0 7.5h4.05v.9H0zm5.4 0v.9H6.3v-.9h-.9zm3.6 0v.9h4.05v-.9H9zm8.1 0v.9h.9v-.9h-.9zm3.6 0v.9H24v-.9h-3.3zM0 9.3h4.05v.9H0zm5.4 0v.9H6.3v-.9h-.9zm3.6 0v.9h4.05v-.9H9zm8.1 0v.9h.9v-.9h-.9zm3.6 0v.9H24v-.9h-3.3zM0 11.1h2.7v.9H0zm3.6 0v.9h1.35c.124-.31.248-.6.45-.9H3.6zm5.4 0v.9h1.35c.186.31.31.6.45.9H9zm8.1 0c.124.31.248.6.45.9h1.35v-.9h-.9zm2.7 0v.9h.9c.186-.31.31-.6.45-.9h-.45zm2.7 0c.124.31.248.6.45.9H24v-.9h-3.3zM0 12.9h2.7v.9H0zm3.6 0v.9h.45c-.186-.31-.31-.6-.45-.9zm5.4 0c-.124-.31-.248-.6-.45-.9v.9H9zm8.1 0v.9c.124-.31.248-.6.45-.9h-.45zm2.7 0c-.186.31-.31.6-.45.9h.45v-.9zm2.7 0v.9H24v-.9h-3.3zM0 14.7h4.05v.9H0zm5.4 0v.9H6.3v-.9h-.9zm3.6 0v.9h4.05v-.9H9zm8.1 0v.9h.9v-.9h-.9zm3.6 0v.9H24v-.9h-3.3zM0 16.5h4.05v.9H0zm5.4 0v.9H6.3v-.9h-.9zm3.6 0v.9h4.05v-.9H9zm8.1 0v.9h.9v-.9h-.9zm3.6 0v.9H24v-.9h-3.3z">'),yd=T('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#F80000><path d="M6.754 16.15h10.492c2.294 0 4.254-1.96 4.254-4.254S19.54 7.642 17.246 7.642H6.754C4.46 7.642 2.5 9.602 2.5 11.896s1.96 4.254 4.254 4.254zm0-6.204h10.492c1.078 0 1.95.872 1.95 1.95s-.872 1.95-1.95 1.95H6.754c-1.078 0-1.95-.872-1.95-1.95s.872-1.95 1.95-1.95z">'),xd=T('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#0080FF><path d="M12.04 24v-4.8h-4.8V24H12zm-4.8-4.8v-3.6H3.6v3.6h3.64zm0-3.6v-3.6H3.6v3.6h3.64zm6-3.6v-3.6H9.6v3.6h3.64zm0 0a7.2 7.2 0 007.2-7.2H12.04v4.8h4.8v-4.8h-4.8v7.2z"></path><path d="M12 0C5.37 0 0 5.37 0 12h4.8A7.2 7.2 0 0112 4.8V0z">'),$d=T('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#FF6A00><path d="M21.692 18.5L12 13.5l-9.692 5L0 17l12-6.154L24 17l-2.308 1.5zm0-6L12 7.5l-9.692 5L0 11l12-6.154L24 11l-2.308 1.5z">'),wd=T('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#00A95C><path d="M12 2L2 7l10 5 10-5-10-5zm0 7.5L4.5 7 12 4.5l7.5 2.5L12 9.5zm0 3L4.5 10 12 7.5l7.5 2.5L12 12.5zm0 3L4.5 13 12 10.5l7.5 2.5L12 15.5zm0 3L4.5 16 12 13.5l7.5 2.5L12 18.5zm0 3L2 17v2l10 5 10-5v-2l-10 4.5z">'),Sd=T('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#007BFC><path d="M19.743 6H23.5l-7 12h-3.757L19.743 6zM.5 6h3.757l7 12H7.5L.5 6zm7.28 0h3.757l5.723 9.8h-3.757L7.78 6z">'),Cd=T('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#123F6D><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-4h2v2h-2zm0-8h2v6h-2z">'),kd=T('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#D50C2D><path d="M4 4h16v16H4V4zm2 2v12h12V6H6zm2 2h3v8H8V8zm5 0h3v8h-3V8z">'),Ad=T('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#326CE5><path d="M12 2L2 7l10 5 10-5-10-5zm0 12l-8-4v7l8 4 8-4v-7l-8 4z">'),Md=T('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#326CE5><path d="M12 2a10 10 0 100 20 10 10 0 000-20zm0 18a8 8 0 110-16 8 8 0 010 16zm-2-6l5-3-5-3v6z">'),Ed=T('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#2496ED><path d="M13.983 11.078h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.185.185 0 00-.185.185v1.888c0 .102.083.185.185.185zm-2.954-5.43h2.118a.186.186 0 00.186-.186V3.574a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.186zm0 2.716h2.118a.187.187 0 00.186-.186V6.29a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.887c0 .102.082.185.185.186zm-2.93 0h2.12a.186.186 0 00.184-.186V6.29a.185.185 0 00-.185-.185H8.1a.185.185 0 00-.185.185v1.887c0 .102.083.185.185.186zm-2.964 0h2.119a.186.186 0 00.185-.186V6.29a.185.185 0 00-.185-.185H5.136a.186.186 0 00-.186.185v1.887c0 .102.084.185.186.186zm5.893 2.715h2.118a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185zm-2.93 0h2.12a.185.185 0 00.184-.185V9.006a.185.185 0 00-.184-.186h-2.12a.185.185 0 00-.184.185v1.888c0 .102.083.185.185.185zm-2.964 0h2.119a.185.185 0 00.185-.185V9.006a.185.185 0 00-.185-.186h-2.12a.186.186 0 00-.185.186v1.887c0 .102.084.185.186.185zm-2.92 0h2.12a.185.185 0 00.184-.185V9.006a.185.185 0 00-.184-.186h-2.12a.185.185 0 00-.184.185v1.888c0 .102.082.185.185.185zM23.763 9.89c-.065-.051-.672-.51-1.954-.51-.338.001-.676.03-1.01.087-.248-1.7-1.653-2.53-1.716-2.566l-.344-.199-.226.327c-.284.438-.49.922-.612 1.43-.23.97-.09 1.882.403 2.661-.595.332-1.55.413-1.744.42H.751a.751.751 0 00-.75.748 11.376 11.376 0 00.692 4.062c.545 1.428 1.355 2.48 2.41 3.124 1.18.723 3.1 1.137 5.275 1.137.983.003 1.963-.086 2.93-.266a12.248 12.248 0 003.823-1.389c.98-.567 1.86-1.288 2.61-2.136 1.252-1.418 1.998-2.997 2.553-4.4h.221c1.372 0 2.215-.549 2.68-1.009.309-.293.55-.65.707-1.046l.098-.288z">'),Ld=T('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#FFC61C><path d="M12 2L2 7v10l10 5 10-5V7L12 2zm0 2.5L19 8l-7 3.5L5 8l7-3.5zM4 9.5l7 3.5v7l-7-3.5v-7zm16 0v7l-7 3.5v-7l7-3.5z">'),Rd=T('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#0075A8><path d="M12 2L2 7v10l10 5 10-5V7L12 2zm0 3l6 3-6 3-6-3 6-3zm-7 5l6 3v5l-6-3v-5zm14 0v5l-6 3v-5l6-3z">'),Dd=T('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#EE0000><path d="M21.665 11.812l-9.027-3.046a.67.67 0 00-.423 0l-9.027 3.046a.67.67 0 00-.445.631v5.545c0 .286.18.542.445.632l9.027 3.046a.67.67 0 00.423 0l9.027-3.046a.67.67 0 00.445-.632v-5.545a.67.67 0 00-.445-.631zm-9.242 7.726l-7.37-2.49v-3.62l7.37 2.488v3.622zm.408-4.97l-7.576-2.558 7.576-2.558 7.576 2.558-7.576 2.558zm8.03 2.48l-7.37 2.49v-3.622l7.37-2.488v3.62z">'),Td=T('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=currentColor><path d="M19.35 10.04A7.49 7.49 0 0012 4C9.11 4 6.6 5.64 5.35 8.04A5.994 5.994 0 000 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z">'),Pd=T('<svg class="w-4 h-4 ml-auto"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"clip-rule=evenodd>'),Id=T('<button class="w-full px-3 py-2 text-sm text-left flex items-center gap-2 transition-colors"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path></svg>All Namespaces'),Bd=T('<div class="px-3 py-4 text-sm text-center"style=color:var(--text-muted)>No namespaces found'),Od=T('<div class="absolute top-full left-0 mt-1 w-64 rounded-lg shadow-xl z-[200] overflow-hidden"style="background:var(--bg-card);border:1px solid var(--border-color)"><div class="p-2 border-b"style=border-color:var(--border-color)><div class=relative><svg class="absolute left-2.5 top-1/2 -translate-y-1/2 w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg><input type=text placeholder="Search namespaces..."class="w-full rounded-md pl-8 pr-3 py-1.5 text-sm"autofocus style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div></div><div class="max-h-64 overflow-y-auto"></div><div class="px-3 py-2 text-xs border-t"style=border-color:var(--border-color);color:var(--text-muted)> namespaces available'),Nd=T('<kbd class="absolute right-3 top-1/2 -translate-y-1/2 px-1.5 py-0.5 rounded text-xs font-mono"style="background:var(--bg-tertiary);color:var(--text-muted);border:1px solid var(--border-color)">âK'),Xn=T("<span class=text-xs style=color:var(--text-muted)>"),Hd=T('<div class="px-3 py-4 text-sm text-center"style=color:var(--text-muted)>No clusters found'),zd=T('<div class="px-3 py-4 text-sm text-center"style=color:var(--text-muted)>No clusters available'),Fd=T('<div class="absolute top-full right-0 mt-1 w-72 rounded-lg shadow-xl z-[200] overflow-hidden"style="background:var(--bg-card);border:1px solid var(--border-color)"><div class="p-2 border-b"style=border-color:var(--border-color)><div class=relative><svg class="absolute left-2.5 top-1/2 -translate-y-1/2 w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg><input type=text placeholder="Search clusters..."class="w-full rounded-md pl-8 pr-3 py-1.5 text-sm"autofocus style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div></div><div class="max-h-64 overflow-y-auto"></div><div class="px-3 py-2 text-xs border-t"style=border-color:var(--border-color);color:var(--text-muted)> cluster<!> available'),jd=T('<header class="h-16 header-glass flex items-center justify-between px-6 relative"style=z-index:100><div class="flex items-center gap-4"><div class="flex items-center gap-2 relative"><label class=text-sm style=color:var(--text-secondary)>Namespace:</label><button class="flex items-center gap-2 rounded-lg px-3 py-1.5 text-sm min-w-[180px] justify-between"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><span class=truncate></span><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 9l-7 7-7-7"></path></svg></button></div><div class=relative><svg class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg><input id=global-search type=text placeholder="Search resources..."class="w-72 rounded-lg pl-10 pr-16 py-1.5 text-sm"></div></div><div class="flex items-center gap-4"><div class="flex items-center gap-2 relative"><label class=text-sm style=color:var(--text-secondary)>Cluster:</label><button class="flex items-center gap-2 rounded-lg px-3 py-1.5 text-sm min-w-[200px] justify-between"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><div class="flex items-center gap-2"><div class="flex flex-col items-start"><span class=truncate></span></div></div><div class="flex items-center gap-1"><span></span><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 9l-7 7-7-7"></path></svg></div></button></div><button class=icon-btn title="Open Local Terminal"style=display:flex;alignItems:center;justifyContent:center;minWidth:40px;minHeight:40px><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></button><button class=icon-btn title="Refresh all data"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button><button class="flex items-center gap-2 px-4 py-2 btn-accent rounded-lg"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg><span>AI'),Ud=T('<div class="px-3 py-2 text-sm"style=color:var(--text-muted)>Loading...'),Zn=T('<svg class="w-4 h-4 flex-shrink-0"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"clip-rule=evenodd>'),Vd=T('<button class="w-full px-3 py-2 text-sm text-left flex items-center gap-2 transition-colors"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg><span class="truncate flex-1">'),Wd=T("<span>"),qd=T('<button class="cursor-pointer hover:opacity-80 transition-opacity">'),Kd=T("<div class=opacity-70>"),Yd=T('<div class="px-3 py-2 text-sm"style=color:var(--text-muted)>Loading clusters...'),Gd=T('<button class="w-full px-3 py-2 text-sm text-left flex items-center gap-2 transition-colors"><span></span><div class="flex-1 min-w-0"><span class="truncate block">'),Jd=T('<div class="flex items-center gap-2 px-3 py-1.5 rounded-lg"title="Loading cloud provider info..."style="background:var(--bg-secondary);border:1px solid var(--border-color)"><span class="text-sm font-medium"style=color:var(--text-primary)>...'),Xd=T('<button class="flex items-center gap-2 px-3 py-1.5 rounded-lg cursor-pointer hover:opacity-80 transition-opacity"style="background:var(--bg-secondary);border:1px solid var(--border-color)"><span class="text-sm font-medium"style=color:var(--text-primary)></span><svg class="w-3 h-3 ml-1"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14">'),Zd=T('<div class="flex items-center gap-2 px-3 py-1.5 rounded-lg opacity-90"style="background:var(--bg-secondary);border:1px solid var(--border-color)"><span class="text-sm font-medium"style=color:var(--text-primary)>');const Qn={gcp:()=>vd(),aws:()=>md(),azure:()=>_d(),ibm:()=>bd(),oracle:()=>yd(),digitalocean:()=>xd(),alibaba:()=>$d(),linode:()=>wd(),vultr:()=>Sd(),ovh:()=>Cd(),hetzner:()=>kd(),kind:()=>Ad(),minikube:()=>Md(),"docker-desktop":()=>Ed(),k3s:()=>Ld(),rancher:()=>Rd(),openshift:()=>Dd(),generic:()=>Td()},Qd=()=>{const[e,t]=J(!1),[r,i]=J(!1),[h,_]=J(""),[f,s]=J(!1),[l,u]=J(""),[g,p]=J(!1),[b,m]=J(!1);let C,y,n,d;const[a]=qe(()=>De.getCloudInfo().catch(()=>null)),c=()=>{const O=a()?.provider?.toLowerCase()||"generic";return Qn[O]||Qn.generic},v=()=>{const O=a()?.provider?.toLowerCase();return{gcp:"GCP",aws:"AWS",azure:"Azure",ibm:"IBM",oracle:"Oracle",digitalocean:"DO",alibaba:"Alibaba",linode:"Linode",vultr:"Vultr",ovh:"OVH",hetzner:"Hetzner",kind:"Kind",minikube:"Minikube","docker-desktop":"Docker",k3s:"K3s",rancher:"Rancher",openshift:"OpenShift"}[O||""]||a()?.displayName||"Cloud"},x=Ne(()=>{const O=h().toLowerCase();return O?ei().filter(B=>B.toLowerCase().includes(O)):ei()}),S=Ne(()=>{const O=l().toLowerCase();return O?fs().filter(B=>B.name.toLowerCase().includes(O)):fs()});if(typeof window<"u"){document.addEventListener("keydown",B=>{(B.ctrlKey||B.metaKey)&&B.key==="k"&&(B.preventDefault(),document.getElementById("global-search")?.focus())});const O=B=>{r()&&C&&!C.contains(B.target)&&y&&!y.contains(B.target)&&(i(!1),_("")),f()&&n&&!n.contains(B.target)&&d&&!d.contains(B.target)&&(s(!1),u(""))};document.addEventListener("mousedown",O),nr(()=>document.removeEventListener("mousedown",O))}const E=O=>{xo(O),i(!1),_("")},$=async O=>{if(O!==St()){p(!0);try{await Jc(O)}catch(B){console.error("Failed to switch context:",B)}finally{p(!1),s(!1),u("")}}},k=()=>tt()==="_all"?"All Namespaces":tt();return(()=>{var O=jd(),B=O.firstChild,D=B.firstChild,I=D.firstChild,A=I.nextSibling,P=A.firstChild,R=P.nextSibling,N=D.nextSibling,w=N.firstChild,H=w.nextSibling,z=B.nextSibling,U=z.firstChild,te=U.firstChild,F=te.nextSibling,W=F.firstChild,V=W.firstChild,de=V.firstChild,M=W.nextSibling,j=M.firstChild,K=j.nextSibling,Z=U.nextSibling,se=Z.nextSibling,ee=se.nextSibling;A.$$click=()=>i(!r());var ae=y;typeof ae=="function"?Zt(ae,A):y=A,o(P,k),o(D,L(G,{get when(){return r()},get children(){var q=Od(),ne=q.firstChild,Y=ne.firstChild,re=Y.firstChild,Q=re.nextSibling,ve=ne.nextSibling,Ae=ve.nextSibling,Ce=Ae.firstChild,we=C;return typeof we=="function"?Zt(we,q):C=q,Q.$$input=_e=>_(_e.target.value),o(ve,L(G,{get when(){return!h()||"all namespaces".includes(h().toLowerCase())},get children(){var _e=Id(),ge=_e.firstChild;return ge.nextSibling,_e.addEventListener("mouseleave",le=>le.currentTarget.style.background=tt()==="_all"?"var(--bg-tertiary)":"transparent"),_e.addEventListener("mouseenter",le=>le.currentTarget.style.background="var(--bg-tertiary)"),_e.$$click=()=>E("_all"),o(_e,L(G,{get when(){return tt()==="_all"},get children(){return Pd()}}),null),ie(le=>{var ue=tt()==="_all"?"var(--bg-tertiary)":"transparent",Se=tt()==="_all"?"var(--accent-primary)":"var(--text-primary)";return ue!==le.e&&ce(_e,"background",le.e=ue),Se!==le.t&&ce(_e,"color",le.t=Se),le},{e:void 0,t:void 0}),_e}}),null),o(ve,L(G,{get when(){return!ui.loading},get fallback(){return Ud()},get children(){return L(He,{get each(){return x()},children:_e=>(()=>{var ge=Vd(),le=ge.firstChild,ue=le.nextSibling;return ge.addEventListener("mouseleave",Se=>Se.currentTarget.style.background=tt()===_e?"var(--bg-tertiary)":"transparent"),ge.addEventListener("mouseenter",Se=>Se.currentTarget.style.background="var(--bg-tertiary)"),ge.$$click=()=>E(_e),o(ue,_e),o(ge,L(G,{get when(){return tt()===_e},get children(){return Zn()}}),null),ie(Se=>{var be=tt()===_e?"var(--bg-tertiary)":"transparent",oe=tt()===_e?"var(--accent-primary)":"var(--text-primary)";return be!==Se.e&&ce(ge,"background",Se.e=be),oe!==Se.t&&ce(ge,"color",Se.t=oe),Se},{e:void 0,t:void 0}),ge})()})}}),null),o(ve,L(G,{get when(){return Re(()=>!!h())()&&x().length===0},get children(){return Bd()}}),null),o(Ae,()=>ei().length,Ce),ie(()=>Q.value=h()),q}}),null),H.addEventListener("blur",()=>t(!1)),H.addEventListener("focus",()=>t(!0)),H.$$input=q=>vc(q.target.value),o(N,L(G,{get when(){return!e()},get children(){return Nd()}}),null),F.$$click=()=>s(!f());var X=d;return typeof X=="function"?Zt(X,F):d=F,o(W,L(G,{get when(){return Re(()=>!!a())()&&!a.loading},get fallback(){return(()=>{var q=Wd();return ie(()=>ze(q,`w-2 h-2 rounded-full ${Gn().connected?"bg-green-500":"bg-red-500"}`)),q})()},get children(){return(()=>{const q=a();return q?.consoleUrl&&q.consoleUrl.trim()!==""?(()=>{var Y=qd();return Y.$$click=re=>{re.stopPropagation(),q.consoleUrl&&window.open(q.consoleUrl,"_blank","noopener,noreferrer")},o(Y,()=>c()()),ie(()=>Xe(Y,"title",`Open ${q?.displayName||"Cloud"} Console`)),Y})():(()=>{var Y=Kd();return o(Y,()=>c()()),ie(()=>Xe(Y,"title",`${q?.displayName||"Local"} Cluster (no console available)`)),Y})()})()}}),V),o(de,(()=>{var q=Re(()=>!!g());return()=>q()?"Switching...":St()||"Select cluster"})()),o(V,L(G,{get when(){return Re(()=>!!a())()&&!a.loading},get children(){var q=Xn();return o(q,()=>a()?.region||""),q}}),null),o(U,L(G,{get when(){return f()},get children(){var q=Fd(),ne=q.firstChild,Y=ne.firstChild,re=Y.firstChild,Q=re.nextSibling,ve=ne.nextSibling,Ae=ve.nextSibling,Ce=Ae.firstChild,we=Ce.nextSibling;we.nextSibling;var _e=n;return typeof _e=="function"?Zt(_e,q):n=q,Q.$$input=ge=>u(ge.target.value),o(ve,L(G,{get when(){return!sn.loading},get fallback(){return Yd()},get children(){return L(He,{get each(){return S()},children:ge=>(()=>{var le=Gd(),ue=le.firstChild,Se=ue.nextSibling,be=Se.firstChild;return le.addEventListener("mouseleave",oe=>oe.currentTarget.style.background=ge.isCurrent?"var(--bg-tertiary)":"transparent"),le.addEventListener("mouseenter",oe=>oe.currentTarget.style.background="var(--bg-tertiary)"),le.$$click=()=>$(ge.name),o(be,()=>ge.name),o(Se,L(G,{get when(){return ge.serverVersion},get children(){var oe=Xn();return o(oe,()=>ge.serverVersion),oe}}),null),o(le,L(G,{get when(){return ge.isCurrent},get children(){return Zn()}}),null),ie(oe=>{var ye=ge.isCurrent?"var(--bg-tertiary)":"transparent",pe=ge.isCurrent?"var(--accent-primary)":"var(--text-primary)",he=`w-2 h-2 rounded-full flex-shrink-0 ${ge.connected?"bg-green-500":"bg-red-500"}`;return ye!==oe.e&&ce(le,"background",oe.e=ye),pe!==oe.t&&ce(le,"color",oe.t=pe),he!==oe.a&&ze(ue,oe.a=he),oe},{e:void 0,t:void 0,a:void 0}),le})()})}}),null),o(ve,L(G,{get when(){return Re(()=>!!l())()&&S().length===0},get children(){return Hd()}}),null),o(ve,L(G,{get when(){return Re(()=>!sn.loading)()&&fs().length===0},get children(){return zd()}}),null),o(Ae,()=>fs().length,Ce),o(Ae,()=>fs().length!==1?"s":"",we),ie(()=>Q.value=l()),q}}),null),Z.$$click=()=>m(!0),se.$$click=q=>{const ne=q.currentTarget;ne.classList.add("refreshing"),setTimeout(()=>ne.classList.remove("refreshing"),500),Ao()},o(z,L(pd,{}),ee),kr(ee,"click",yc,!0),o(z,L(G,{get when(){return Re(()=>!!a())()&&!a.loading},get fallback(){return(()=>{var q=Jd(),ne=q.firstChild;return o(q,()=>c()(),ne),q})()},get children(){return(()=>{const q=a();return q?.consoleUrl&&q.consoleUrl.trim()!==""?(()=>{var Y=Xd(),re=Y.firstChild;return Y.$$click=()=>{q.consoleUrl&&window.open(q.consoleUrl,"_blank","noopener,noreferrer")},o(Y,()=>c()(),re),o(re,v),ie(()=>Xe(Y,"title",`Click to open ${q?.displayName||"Cloud"} Console - ${q?.region||""}`)),Y})():(()=>{var Y=Zd(),re=Y.firstChild;return o(Y,()=>c()(),re),o(re,v),ie(()=>Xe(Y,"title",`${q?.displayName||"Local"} Cluster - ${q?.region||""} (no cloud console available)`)),Y})()})()}}),null),o(O,L(yo,{get isOpen(){return b()},onClose:()=>m(!1)}),null),ie(q=>{var ne=`w-4 h-4 transition-transform ${r()?"rotate-180":""}`,Y=g(),re=g()?.7:1,Q=`w-2 h-2 rounded-full ${Gn().connected?"bg-green-500":"bg-red-500"}`,ve=`w-4 h-4 transition-transform ${f()?"rotate-180":""}`;return ne!==q.e&&Xe(R,"class",q.e=ne),Y!==q.t&&(F.disabled=q.t=Y),re!==q.a&&ce(F,"opacity",q.a=re),Q!==q.o&&ze(j,q.o=Q),ve!==q.i&&Xe(K,"class",q.i=ve),q},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),ie(()=>H.value=vo()),O})()};et(["click","input"]);var eh=T('<svg class="w-6 h-6"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><rect x=4 y=4 width=16 height=16 rx=2></rect><rect x=9 y=9 width=6 height=6></rect><line x1=9 y1=1 x2=9 y2=4></line><line x1=15 y1=1 x2=15 y2=4></line><line x1=9 y1=20 x2=9 y2=23></line><line x1=15 y1=20 x2=15 y2=23></line><line x1=20 y1=9 x2=23 y2=9></line><line x1=20 y1=14 x2=23 y2=14></line><line x1=1 y1=9 x2=4 y2=9></line><line x1=1 y1=14 x2=4 y2=14>'),th=T('<svg class="w-6 h-6"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><rect x=3 y=4 width=18 height=16 rx=2></rect><line x1=7 y1=8 x2=7 y2=16></line><line x1=11 y1=8 x2=11 y2=16></line><line x1=15 y1=8 x2=15 y2=16></line><line x1=3 y1=12 x2=21 y2=12>'),rh=T('<svg class="w-6 h-6"viewBox="0 0 24 24"fill=currentColor><path d="M12 2L3 7v10l9 5 9-5V7l-9-5zm0 2.18l6.9 3.85L12 11.9 5.1 8.03 12 4.18zM5 9.48l6 3.35v6.7l-6-3.35v-6.7zm8 10.05v-6.7l6-3.35v6.7l-6 3.35z">'),sh=T('<svg class="w-6 h-6"viewBox="0 0 24 24"fill=currentColor><path d="M4 4h16v4H4V4zm0 6h16v4H4v-4zm0 6h16v4H4v-4z"></path><circle cx=6 cy=6 r=1></circle><circle cx=6 cy=12 r=1></circle><circle cx=6 cy=18 r=1>'),ih=T('<svg class="w-5 h-5"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z">'),nh=T('<svg class="w-5 h-5"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1=12 y1=9 x2=12 y2=13></line><line x1=12 y1=17 x2=12.01 y2=17>'),lh=T('<svg class="w-4 h-4"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><polyline points="20 6 9 17 4 12">'),oh=T('<svg class="w-4 h-4"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><line x1=18 y1=6 x2=6 y2=18></line><line x1=6 y1=6 x2=18 y2=18>'),ah=T('<div class="text-sm mt-1"style=color:var(--text-muted)>'),ch=T('<div class="card p-5 cursor-pointer transition-all hover:scale-[1.02] hover:shadow-lg"><div class="flex items-start justify-between"><div><div class="text-sm font-medium"style=color:var(--text-muted)></div><div class="text-3xl font-bold mt-2"></div></div><div class="w-12 h-12 rounded-xl flex items-center justify-center">'),dh=T('<div class="space-y-2 max-h-64 overflow-auto">'),hh=T('<div class=space-y-6><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Dashboard</h1><p style=color:var(--text-secondary)>Cluster overview and health monitoring</p></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"></div><div class="card p-6"><h2 class="text-lg font-semibold mb-4"style=color:var(--text-primary)>Resource Overview</h2><div class="grid grid-cols-2 md:grid-cols-5 gap-4"><div class="p-4 rounded-lg text-center cursor-pointer hover:opacity-80 transition-opacity"style=background:var(--bg-tertiary)><div class="text-3xl font-bold"style=color:#06b6d4></div><div class="text-sm mt-1"style=color:var(--text-secondary)>Pods</div></div><div class="p-4 rounded-lg text-center cursor-pointer hover:opacity-80 transition-opacity"style=background:var(--bg-tertiary)><div class="text-3xl font-bold"style=color:#3b82f6></div><div class="text-sm mt-1"style=color:var(--text-secondary)>Deployments</div></div><div class="p-4 rounded-lg text-center cursor-pointer hover:opacity-80 transition-opacity"style=background:var(--bg-tertiary)><div class="text-3xl font-bold"style=color:#8b5cf6></div><div class="text-sm mt-1"style=color:var(--text-secondary)>Services</div></div><div class="p-4 rounded-lg text-center cursor-pointer hover:opacity-80 transition-opacity"style=background:var(--bg-tertiary)><div class="text-3xl font-bold"style=color:#22c55e></div><div class="text-sm mt-1"style=color:var(--text-secondary)>Nodes</div></div><div class="p-4 rounded-lg text-center cursor-pointer hover:opacity-80 transition-opacity"style=background:var(--bg-tertiary)><div class="text-3xl font-bold"style=color:#f59e0b>$</div><div class="text-sm mt-1"style=color:var(--text-secondary)>Est. Monthly Cost</div></div></div></div><div class="grid grid-cols-1 lg:grid-cols-2 gap-6"><div class="card p-6"><h2 class="text-lg font-semibold mb-4 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><path d="M12 2a10 10 0 1 0 10 10H12V2z"></path><path d="M12 2a10 10 0 0 1 10 10"></path><circle cx=12 cy=12 r=3></circle></svg>AI Insights & Recommendations</h2><div class=space-y-3></div></div><div class="card p-6"><h2 class="text-lg font-semibold mb-4 flex items-center gap-2 cursor-pointer hover:opacity-80"style=color:var(--text-primary)>Security Overview<svg class="w-4 h-4 ml-auto"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><path d="M9 18l6-6-6-6"></path></svg></h2><div class=space-y-4><div class="flex items-center justify-between p-4 rounded-lg"style=background:var(--bg-tertiary)><span style=color:var(--text-secondary)>Security Score</span><span class="text-2xl font-bold">/100</span></div><div class=space-y-2></div></div></div></div><div class="card p-6"><h2 class="text-lg font-semibold mb-4"style=color:var(--text-primary)>Recent Events'),uh=T('<ul class="mt-2 text-xs space-y-1"style=color:var(--text-muted)>'),fh=T('<button class="mt-3 px-3 py-1.5 text-xs font-medium rounded-md transition-all hover:opacity-80"> â'),gh=T('<div class="p-4 rounded-lg border"><div class="flex items-start gap-3"><div></div><div class=flex-1><div class=font-medium></div><div class="text-sm mt-1"style=color:var(--text-secondary)>'),ph=T('<li class="flex items-center gap-2"><span class="w-1 h-1 rounded-full">'),vh=T('<span class="text-xs px-1.5 py-0.5 rounded"style=background:var(--bg-tertiary);color:var(--text-muted)>'),mh=T('<div class="flex items-center justify-between p-3 rounded-lg"style=background:var(--bg-secondary)><div class="flex items-center gap-2"><span></span><span style=color:var(--text-primary)></span></div><span>'),_h=T('<div class="text-center py-8"style=color:var(--text-muted)>No recent events'),bh=T('<div class="flex items-start gap-3 p-3 rounded-lg"style=background:var(--bg-secondary)><span></span><div class="flex-1 min-w-0"><div class="text-sm font-medium truncate"style=color:var(--text-primary)>: </div><div class="text-xs truncate"style=color:var(--text-muted)>');const yh=()=>eh(),xh=()=>th(),$h=()=>rh(),wh=()=>sh(),el=()=>ih(),js=()=>nh(),Vi=()=>lh(),tl=()=>oh(),Us=e=>(()=>{var t=ch(),r=t.firstChild,i=r.firstChild,h=i.firstChild,_=h.nextSibling,f=i.nextSibling;return kr(t,"click",e.onClick,!0),o(h,()=>e.label),o(_,()=>e.value),o(i,L(G,{get when(){return e.subtext},get children(){var s=ah();return o(s,()=>e.subtext),s}}),null),o(f,()=>e.icon({})),ie(s=>{var l=`4px solid ${e.color}`,u=e.color,g=`${e.color}20`,p=e.color;return l!==s.e&&ce(t,"border-left",s.e=l),u!==s.t&&ce(_,"color",s.t=u),g!==s.a&&ce(f,"background",s.a=g),p!==s.o&&ce(f,"color",s.o=p),s},{e:void 0,t:void 0,a:void 0,o:void 0}),t})(),rl=()=>{const[e,{refetch:t}]=qe(()=>{const S=St(),E=Yt();return{context:S,refresh:E}},async()=>De.getMetrics()),[r,{refetch:i}]=qe(()=>{const S=St(),E=Yt();return{context:S,refresh:E}},async()=>De.getPods("_all")),[h,{refetch:_}]=qe(()=>{const S=St(),E=Yt();return{context:S,refresh:E}},async()=>De.getDeployments("_all")),[f,{refetch:s}]=qe(()=>{const S=St(),E=Yt();return{context:S,refresh:E}},async()=>De.getServices("_all")),l=ss,[u,{refetch:g}]=qe(()=>{const S=St(),E=Yt();return{context:S,refresh:E}},async()=>De.getEvents()),[p,{refetch:b}]=qe(()=>{const S=St(),E=Yt();return{context:S,refresh:E}},async()=>{try{return await De.getClusterCost()}catch(S){return console.error("Dashboard cost API error:",S),null}}),m=()=>{const S=r();return!S||!Array.isArray(S)?0:S.filter(E=>E.status==="Running").length},C=()=>{const S=r();return Array.isArray(S)?S.length:0},y=()=>{const S=l();return!S||!Array.isArray(S)?0:S.filter(E=>E.status==="Ready").length},n=()=>{const S=l();return Array.isArray(S)?S.length:0},d=()=>{const S=u();return Array.isArray(S)?S.slice(0,10):[]},a=Ne(()=>{const S=r()||[],E=[],$=S.filter(I=>!I.securityContext);$.length>0?E.push({name:"Security Context Missing",status:"fail",severity:"critical",count:$.length,details:`${$.length} pods have no security context defined`}):S.length>0&&E.push({name:"Security Context",status:"pass",severity:"critical",details:"All pods have security context configured"});const k=S.filter(I=>I.securityContext?.runAsRoot===!0||!I.securityContext?.runAsNonRoot&&!I.securityContext?.runAsUser);k.length>0?E.push({name:"Running as Root",status:"fail",severity:"critical",count:k.length,details:`${k.length} pods may run as root user`}):S.length>0&&E.push({name:"Non-Root User",status:"pass",severity:"critical",details:"All pods run as non-root"});const O=S.filter(I=>I.privileged===!0);O.length>0?E.push({name:"Privileged Containers",status:"fail",severity:"critical",count:O.length,details:`${O.length} containers running in privileged mode`}):S.length>0&&E.push({name:"No Privileged Containers",status:"pass",severity:"critical",details:"No privileged containers detected"});const B=S.filter(I=>!I.resources?.limits);B.length>0?E.push({name:"Resource Limits Missing",status:"warning",severity:"high",count:B.length,details:`${B.length} pods without resource limits`}):S.length>0&&E.push({name:"Resource Limits",status:"pass",severity:"high",details:"All pods have resource limits configured"});const D=S.filter(I=>I.securityContext?.readOnlyRootFilesystem!==!0);return D.length>0&&S.length>0&&E.push({name:"Writable Root Filesystem",status:"warning",severity:"medium",count:D.length,details:`${D.length} pods have writable root filesystem`}),S.length===0&&E.push({name:"No Pods to Analyze",status:"warning",severity:"low",details:"No pods found for security analysis"}),E}),c=Ne(()=>{const S=a();if(S.length===0)return 100;const E={critical:25,high:15,medium:10,low:5};let $=0,k=0;return S.forEach(O=>{const B=E[O.severity];$+=B,O.status==="pass"?k+=B:O.status==="warning"&&(k+=B*.5)}),$>0?Math.round(k/$*100):100}),v=()=>{const S=[],E=r()||[],$=l()||[],k=e(),O=E.filter(N=>N.status==="Pending");O.length>0&&S.push({type:"warning",title:"Pending Pods Detected",message:`${O.length} pods are in Pending state.`,details:O.slice(0,3).map(N=>`${N.namespace}/${N.name}`),navigateTo:"pods",actionLabel:"View Pods"});const B=E.filter(N=>N.status==="Failed"||N.status==="Error"||N.status==="CrashLoopBackOff");B.length>0&&S.push({type:"error",title:"Failed Pods Alert",message:`${B.length} pods are failing. Immediate attention recommended.`,details:B.slice(0,3).map(N=>`${N.namespace}/${N.name} (${N.status})`),navigateTo:"pods",actionLabel:"View Failed Pods"});const D=$.filter(N=>N.status!=="Ready");D.length>0&&S.push({type:"error",title:"Node Health Issue",message:`${D.length} nodes are not ready.`,details:D.slice(0,3).map(N=>N.name),navigateTo:"nodes",actionLabel:"View Nodes"});const I=k?.cpu!=null?typeof k.cpu=="object"?k.cpu.percentage:Number(k.cpu):null,A=k?.memory!=null?typeof k.memory=="object"?k.memory.percentage:Number(k.memory):null;I&&I>80&&S.push({type:"warning",title:"High CPU Usage",message:`Cluster CPU at ${I.toFixed(1)}%. Consider scaling or optimizing workloads.`}),A&&A>85&&S.push({type:"warning",title:"High Memory Usage",message:`Cluster memory at ${A.toFixed(1)}%. Consider adding capacity.`});const P=a().filter(N=>N.status==="fail"&&N.severity==="critical");P.length>0&&S.push({type:"error",title:"Critical Security Issues",message:`${P.length} critical security findings require immediate attention.`,details:P.map(N=>`${N.name}${N.count?` (${N.count} affected)`:""}`),navigateTo:"security",actionLabel:"View Security Details"});const R=a().filter(N=>N.status==="fail"&&N.severity==="high");return R.length>0&&P.length===0&&S.push({type:"warning",title:"Security Warnings",message:`${R.length} high-severity security findings detected.`,details:R.map(N=>N.name),navigateTo:"security",actionLabel:"View Security Details"}),S.length===0&&S.push({type:"success",title:"Cluster Healthy",message:"All systems operating normally. No issues detected."}),S},x=S=>S>=80?"var(--success-color)":S>=60?"var(--warning-color)":"var(--error-color)";return(()=>{var S=hh(),E=S.firstChild,$=E.firstChild;$.nextSibling;var k=E.nextSibling,O=k.nextSibling,B=O.firstChild,D=B.nextSibling,I=D.firstChild,A=I.firstChild;A.nextSibling;var P=I.nextSibling,R=P.firstChild;R.nextSibling;var N=P.nextSibling,w=N.firstChild;w.nextSibling;var H=N.nextSibling,z=H.firstChild;z.nextSibling;var U=H.nextSibling,te=U.firstChild;te.firstChild,te.nextSibling;var F=O.nextSibling,W=F.firstChild,V=W.firstChild,de=V.nextSibling,M=W.nextSibling,j=M.firstChild,K=j.firstChild,Z=j.nextSibling,se=Z.firstChild,ee=se.firstChild,ae=ee.nextSibling,X=ae.firstChild,q=se.nextSibling,ne=F.nextSibling;return ne.firstChild,o(k,L(Us,{label:"CPU Usage",get value(){return Re(()=>e()?.cpu!=null)()?`${typeof e().cpu=="object"?e().cpu.percentage?.toFixed(1):Number(e().cpu).toFixed(1)}%`:"--"},subtext:"Cluster average",color:"#06b6d4",icon:yh}),null),o(k,L(Us,{label:"Memory Usage",get value(){return Re(()=>e()?.memory!=null)()?`${typeof e().memory=="object"?e().memory.percentage?.toFixed(1):Number(e().memory).toFixed(1)}%`:"--"},subtext:"Cluster average",color:"#8b5cf6",icon:xh}),null),o(k,L(Us,{label:"Running Pods",get value(){return`${m()}/${C()}`},get subtext(){return`${C()>0?(m()/C()*100).toFixed(0):0}% healthy`},color:"#22c55e",icon:$h,onClick:()=>At("pods")}),null),o(k,L(Us,{label:"Nodes",get value(){return Re(()=>!!l.loading)()?"...":`${y()}/${n()}`},get subtext(){return Re(()=>!!l.loading)()?"Loading...":Re(()=>y()===n()&&n()>0)()?"All healthy":n()===0?"No nodes":"Some unhealthy"},get color(){return Re(()=>!!l.loading)()?"#6b7280":y()===n()&&n()>0?"#22c55e":"#f59e0b"},icon:wh,onClick:()=>At("nodes")}),null),I.$$click=()=>At("pods"),o(A,C),P.$$click=()=>At("deployments"),o(R,()=>(h()||[]).length),N.$$click=()=>At("services"),o(w,()=>(f()||[]).length),H.$$click=()=>At("nodes"),o(z,(()=>{var Y=Re(()=>!!l.loading);return()=>Y()?"...":n()})()),U.$$click=()=>At("cost"),o(te,()=>p()?.monthlyCost?.toFixed(0)||"--",null),o(de,L(He,{get each(){return v()},children:Y=>(()=>{var re=gh(),Q=re.firstChild,ve=Q.firstChild,Ae=ve.nextSibling,Ce=Ae.firstChild,we=Ce.nextSibling;return o(ve,(()=>{var _e=Re(()=>Y.type==="error");return()=>_e()?L(js,{}):Re(()=>Y.type==="warning")()?L(js,{}):Re(()=>Y.type==="success")()?L(Vi,{}):L(el,{})})()),o(Ce,()=>Y.title),o(we,()=>Y.message),o(Ae,L(G,{get when(){return Re(()=>!!Y.details)()&&Y.details.length>0},get children(){var _e=uh();return o(_e,L(He,{get each(){return Y.details},children:ge=>(()=>{var le=ph(),ue=le.firstChild;return o(le,ge,null),ie(Se=>ce(ue,"background",Y.type==="error"?"var(--error-color)":Y.type==="warning"?"var(--warning-color)":"var(--accent-primary)")),le})()})),_e}}),null),o(Ae,L(G,{get when(){return Re(()=>!!Y.navigateTo)()&&Y.actionLabel},get children(){var _e=fh(),ge=_e.firstChild;return _e.$$click=()=>At(Y.navigateTo),o(_e,()=>Y.actionLabel,ge),ie(le=>{var ue=Y.type==="error"?"rgba(239, 68, 68, 0.2)":Y.type==="warning"?"rgba(245, 158, 11, 0.2)":"rgba(6, 182, 212, 0.2)",Se=Y.type==="error"?"var(--error-color)":Y.type==="warning"?"var(--warning-color)":"var(--accent-primary)",be=`1px solid ${Y.type==="error"?"rgba(239, 68, 68, 0.3)":Y.type==="warning"?"rgba(245, 158, 11, 0.3)":"rgba(6, 182, 212, 0.3)"}`;return ue!==le.e&&ce(_e,"background",le.e=ue),Se!==le.t&&ce(_e,"color",le.t=Se),be!==le.a&&ce(_e,"border",le.a=be),le},{e:void 0,t:void 0,a:void 0}),_e}}),null),ie(_e=>{var ge=Y.type==="error"?"rgba(239, 68, 68, 0.1)":Y.type==="warning"?"rgba(245, 158, 11, 0.1)":Y.type==="success"?"rgba(34, 197, 94, 0.1)":"rgba(6, 182, 212, 0.1)",le=Y.type==="error"?"rgba(239, 68, 68, 0.3)":Y.type==="warning"?"rgba(245, 158, 11, 0.3)":Y.type==="success"?"rgba(34, 197, 94, 0.3)":"rgba(6, 182, 212, 0.3)",ue=Y.type==="error"?"var(--error-color)":Y.type==="warning"?"var(--warning-color)":Y.type==="success"?"var(--success-color)":"var(--accent-primary)",Se=Y.type==="error"?"var(--error-color)":Y.type==="warning"?"var(--warning-color)":Y.type==="success"?"var(--success-color)":"var(--accent-primary)";return ge!==_e.e&&ce(re,"background",_e.e=ge),le!==_e.t&&ce(re,"border-color",_e.t=le),ue!==_e.a&&ce(ve,"color",_e.a=ue),Se!==_e.o&&ce(Ce,"color",_e.o=Se),_e},{e:void 0,t:void 0,a:void 0,o:void 0}),re})()})),j.$$click=()=>At("security"),o(j,L(el,{}),K),o(ae,c,X),o(q,L(He,{get each(){return a()},children:Y=>(()=>{var re=mh(),Q=re.firstChild,ve=Q.firstChild,Ae=ve.nextSibling,Ce=Q.nextSibling;return o(ve,()=>Y.severity.toUpperCase()),o(Ae,()=>Y.name),o(Q,L(G,{get when(){return Y.count},get children(){var we=vh();return o(we,()=>Y.count),we}}),null),o(Ce,(()=>{var we=Re(()=>Y.status==="pass");return()=>we()?L(Vi,{}):Re(()=>Y.status==="fail")()?L(tl,{}):L(js,{})})(),null),o(Ce,(()=>{var we=Re(()=>Y.status==="pass");return()=>we()?"Pass":Y.status==="fail"?"Fail":"Warning"})(),null),ie(we=>{var _e=`px-1.5 py-0.5 rounded text-xs font-medium ${Y.severity==="critical"?"bg-red-500/20 text-red-400":Y.severity==="high"?"bg-orange-500/20 text-orange-400":Y.severity==="medium"?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"}`,ge=`flex items-center gap-1 text-sm ${Y.status==="pass"?"text-green-400":Y.status==="fail"?"text-red-400":"text-yellow-400"}`;return _e!==we.e&&ze(ve,we.e=_e),ge!==we.t&&ze(Ce,we.t=ge),we},{e:void 0,t:void 0}),re})()})),o(ne,L(G,{get when(){return d().length>0},get fallback(){return _h()},get children(){var Y=dh();return o(Y,L(He,{get each(){return d()},children:re=>(()=>{var Q=bh(),ve=Q.firstChild,Ae=ve.nextSibling,Ce=Ae.firstChild,we=Ce.firstChild,_e=Ce.nextSibling;return o(ve,(()=>{var ge=Re(()=>re.type==="Warning");return()=>ge()?L(js,{}):Re(()=>re.type==="Normal")()?L(Vi,{}):L(tl,{})})()),o(Ce,()=>re.reason,we),o(Ce,()=>re.object,null),o(_e,()=>re.message),ie(()=>ze(ve,`mt-0.5 ${re.type==="Warning"?"text-yellow-400":re.type==="Normal"?"text-green-400":"text-red-400"}`)),Q})()})),Y}}),null),ie(Y=>ce(ae,"color",x(c()))),S})()};et(["click"]);var Sh=T('<svg class="w-4 h-4 text-green-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 13l4 4L19 7">'),Ch=T("<span class=text-green-400>Copied!"),kh=T('<div class=relative><div class="flex items-center justify-end gap-2 mb-2"><button class="flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm transition-colors"style=background:var(--bg-tertiary);color:var(--text-secondary)></button><button class="flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm transition-colors"style=background:var(--bg-tertiary);color:var(--text-secondary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>Download</button></div><div class="code-block overflow-auto max-h-[60vh]"><pre class="text-sm leading-relaxed">'),Ah=T('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z">');const tr=e=>{const[t,r]=J(!1),i=async()=>{await navigator.clipboard.writeText(e.yaml),r(!0),e.onCopy?.(),setTimeout(()=>r(!1),2e3)},h=()=>{const s=new Blob([e.yaml],{type:"text/yaml"}),l=URL.createObjectURL(s),u=document.createElement("a");u.href=l,u.download=`${e.title||"resource"}.yaml`,u.click(),URL.revokeObjectURL(l)},_=s=>s.split(`
`).map(l=>{if(l.trim().startsWith("#"))return`<span class="text-gray-500">${f(l)}</span>`;const u=l.match(/^(\s*)([a-zA-Z0-9_-]+)(:)/);if(u){const[,g,p,b]=u,m=l.slice(u[0].length);return`${g}<span class="text-cyan-400">${f(p)}</span>${b}<span class="text-amber-300">${f(m)}</span>`}return l.trim().startsWith("-")?`<span class="text-purple-400">${f(l)}</span>`:f(l)}).join(`
`),f=s=>s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");return(()=>{var s=kh(),l=s.firstChild,u=l.firstChild,g=u.nextSibling,p=l.nextSibling,b=p.firstChild;return u.$$click=i,o(u,L(G,{get when(){return t()},get fallback(){return[Ah(),"Copy"]},get children(){return[Sh(),Ch()]}})),g.$$click=h,ie(()=>b.innerHTML=_(e.yaml)),s})()};et(["click"]);var Mh=T("<div class=text-red-400>Error: "),Eh=T("<pre class=whitespace-pre-wrap>"),Lh=T('<div class="flex flex-col h-[60vh]"><div class="flex items-center justify-end gap-2 mb-2"><button class="flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm transition-colors"style=background:var(--bg-tertiary);color:var(--text-secondary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="flex-1 font-mono text-sm p-4 rounded-lg overflow-auto"style="background:#0d1117;color:#c9d1d9;border:1px solid var(--border-color)">'),Rh=T('<div class="flex items-center justify-center h-full"><div class=spinner>');const lr=e=>{const[t]=qe(()=>({type:e.resourceType,name:e.name,ns:e.namespace,open:e.isOpen}),async _=>{if(!_.open||!_.name)return"";const f=_.ns?`&namespace=${_.ns}`:"",s=await fetch(`/api/${_.type}/describe?name=${_.name}${f}`);if(!s.ok)throw new Error("Failed to fetch describe output");return(await s.json()).describe||""}),r=async()=>{await navigator.clipboard.writeText(t()||"")},i=_=>_.split(`
`).map(f=>{const s=f.match(/^([A-Za-z][A-Za-z\s]+):\s*(.*)$/);if(s&&f.indexOf(":")<30){const[,u,g]=s;return`<span class="text-cyan-400">${h(u)}:</span> <span class="text-amber-300">${h(g)}</span>`}const l=f.match(/^(\s+)([A-Za-z][A-Za-z\s-]+):\s*(.*)$/);if(l){const[,u,g,p]=l;return`${u}<span class="text-blue-400">${h(g)}:</span> ${h(p)}`}return h(f)}).join(`
`),h=_=>_.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");return L(it,{get isOpen(){return e.isOpen},get onClose(){return e.onClose},get title(){return`Describe: ${e.name}`},size:"xl",get children(){var _=Lh(),f=_.firstChild,s=f.firstChild,l=f.nextSibling;return s.$$click=r,o(l,L(G,{get when(){return!t.loading},get fallback(){return Rh()},get children(){return[L(G,{get when(){return t.error},get children(){var u=Mh();return u.firstChild,o(u,()=>t.error?.message,null),u}}),(()=>{var u=Eh();return ie(()=>u.innerHTML=i(t()||"")),u})()]}})),_}})};et(["click"]);var Dh=T('<div class="fixed z-50 py-2 rounded-lg shadow-xl min-w-[180px]"style="background:var(--bg-card);border:1px solid var(--border-color);box-shadow:0 10px 40px rgba(0, 0, 0, 0.3)">'),Th=T('<div class=relative><button class="flex items-center justify-center p-1 rounded transition-all hover:bg-opacity-80"title=Actions style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z">'),Ph=T('<div class="my-1 border-t"style=border-color:var(--border-color)>'),Ih=T("<div class=spinner style=width:16px;height:16px>"),Bh=T('<button class="w-full flex items-center gap-3 px-4 py-2 text-sm transition-colors"style=background:transparent>'),Oh=T('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2>');const sl={shell:"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z",portforward:"M13 10V3L4 14h7v7l9-11h-7z",logs:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",yaml:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4",describe:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",restart:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15",delete:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",scale:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4",details:"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z",edit:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"},Dt=e=>{const[t,r]=J(!1),[i,h]=J({top:0,left:0});let _;const f=u=>{if(u.stopPropagation(),_){const g=_.getBoundingClientRect();h({top:g.bottom+4,left:g.right-180})}r(!t())},s=u=>{r(!1),u.onClick()},l=u=>{t()&&_&&!_.contains(u.target)&&r(!1)};return typeof window<"u"&&(document.addEventListener("click",l),nr(()=>document.removeEventListener("click",l))),(()=>{var u=Th(),g=u.firstChild;g.$$click=f;var p=_;return typeof p=="function"?Zt(p,g):_=g,o(u,L(G,{get when(){return t()},get children(){return L(Si,{get children(){var b=Dh();return o(b,L(He,{get each(){return e.actions},children:m=>[L(G,{get when(){return m.divider},get children(){return Ph()}}),(()=>{var C=Bh();return C.addEventListener("mouseleave",y=>{y.currentTarget.style.background="transparent"}),C.addEventListener("mouseenter",y=>{!m.disabled&&!m.loading&&(y.currentTarget.style.background=m.variant==="danger"?"rgba(239, 68, 68, 0.1)":"var(--bg-tertiary)")}),C.$$click=()=>!m.disabled&&!m.loading&&s(m),o(C,L(G,{get when(){return m.loading},get fallback(){return(()=>{var y=Oh(),n=y.firstChild;return ie(()=>Xe(n,"d",sl[m.icon]||sl.details)),y})()},get children(){return Ih()}}),null),o(C,(()=>{var y=Re(()=>!!m.loading);return()=>y()?`${m.label}...`:m.label})(),null),ie(y=>{var n=m.disabled||m.loading,d={"opacity-50 cursor-not-allowed":m.disabled||m.loading,"hover:bg-opacity-50":!m.disabled&&!m.loading},a=m.variant==="danger"?"var(--error-color)":"var(--text-primary)";return n!==y.e&&(C.disabled=y.e=n),y.t=uo(C,d,y.t),a!==y.a&&ce(C,"color",y.a=a),y},{e:void 0,t:void 0,a:void 0}),C})()]})),ie(m=>{var C=`${i().top}px`,y=`${i().left}px`;return C!==m.e&&ce(b,"top",m.e=C),y!==m.t&&ce(b,"left",m.t=y),m},{e:void 0,t:void 0}),b}})}}),null),u})()};et(["click"]);var Nh=T('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>â²</span><span>â¼'),Hh=T('<div class="card p-4"><h3 class="font-semibold mb-3 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>Active Port Forwards</h3><div class="flex flex-wrap gap-2">'),zh=T('<div class=overflow-x-auto><table style=table-layout:auto><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Status </div></th><th class=whitespace-nowrap>Ready</th><th class=whitespace-nowrap>IP</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">CPU </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Mem </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Restarts </div></th><th class=whitespace-nowrap>Node</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),Fh=T('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:#161b22><div style=color:#8b949e>Showing <!> - <!> of <!> pods</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>â Prev</button><span class="px-3 py-1"style=color:#c9d1d9>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Next â</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Last'),jh=T('<div class="text-red-400 mb-2">Error: '),Uh=T("<pre class=whitespace-pre-wrap>"),Vh=T('<div class="flex flex-col h-[60vh]"><div class="flex flex-wrap items-center gap-3 mb-3"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=50>Last 50 lines</option><option value=100>Last 100 lines</option><option value=500>Last 500 lines</option><option value=1000>Last 1000 lines</option></select><label class="flex items-center gap-2 px-3 py-2 rounded-lg cursor-pointer"><input type=checkbox class=hidden><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg><span class="text-sm font-medium"></span></label><input type=text placeholder="Search logs..."class="px-3 py-2 rounded-lg text-sm flex-1 min-w-[150px]"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><button class="p-2 rounded-lg hover:bg-[var(--bg-secondary)]"title="Refresh Logs"style=background:var(--bg-tertiary);color:var(--text-secondary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button><button class="px-3 py-2 rounded-lg text-sm flex items-center gap-1"style=background:var(--bg-tertiary);color:var(--text-secondary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>Download</button></div><div class="flex-1 font-mono text-xs p-4 rounded-lg overflow-auto"style="background:#0d1117;color:#c9d1d9;border:1px solid var(--border-color)">'),Wh=T('<div class=space-y-4><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Local Port</label><input type=number min=1024 max=65535 class="w-full px-4 py-2 rounded-lg"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Remote Port</label><input type=number min=1 max=65535 class="w-full px-4 py-2 rounded-lg"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div class="p-3 rounded-lg text-sm"style=background:var(--bg-tertiary);color:var(--text-muted)>This will forward <code class="px-1 rounded"style=background:var(--bg-secondary)>localhost:</code> to <code class="px-1 rounded"style=background:var(--bg-secondary)>:</code></div><div class="flex gap-2"><button class="btn-secondary flex-1">Cancel</button><button class="btn-primary flex-1">Start'),qh=T('<div class=space-y-4><div class="flex items-start gap-3"><div class="flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center"style="background:rgba(239, 68, 68, 0.15)"><svg class="w-6 h-6"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--error-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div><div class=flex-1><p class="text-sm mb-2"style=color:var(--text-primary)>Are you sure you want to delete this pod?</p><div class="p-3 rounded-lg mb-4"style=background:var(--bg-tertiary)><div class="text-sm font-medium mb-1"style=color:var(--text-primary)></div><div class=text-xs style=color:var(--text-muted)>Namespace: </div></div><p class="text-xs mb-4"style=color:var(--text-muted)>This action cannot be undone. The pod will be permanently deleted from the cluster.</p></div></div><div class="flex items-center justify-end gap-3 pt-4 border-t"style=border-color:var(--border-color)><button class="px-4 py-2 rounded-lg text-sm font-medium transition-all hover:opacity-80"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)">Cancel</button><button class="px-4 py-2 rounded-lg text-sm font-medium transition-all hover:opacity-80 flex items-center gap-2"style=background:var(--error-color);color:white><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>Delete Pod'),Kh=T('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Pods</h1><p style=color:var(--text-secondary)>Manage and monitor your Kubernetes pods</p></div><div class="flex items-center gap-3"><button class=icon-btn><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></button><button class=icon-btn title="Refresh Pods (Auto-refresh: 2s)"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Running</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--warning-color)"><span class=text-sm style=color:var(--text-secondary)>Pending</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--error-color)"><span class=text-sm style=color:var(--text-secondary)>Failed</span><span class="text-xl font-bold"style=color:var(--error-color)></span></div><div class=flex-1></div><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=all>All Status</option><option value=running>Running</option><option value=pending>Pending</option><option value=failed>Failed/Error</option><option value=succeeded>Succeeded</option></select><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class="overflow-hidden rounded-lg">'),Yh=T('<div class="flex items-center gap-2 px-3 py-2 rounded-lg"style=background:var(--bg-tertiary)><span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span><span style=color:var(--text-primary)></span><span style=color:var(--text-muted)>localhost:<!> â </span><a target=_blank class="text-xs px-2 py-1 rounded"style=background:var(--accent-primary);color:white>Open</a><button class="text-red-400 hover:text-red-300"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12">'),Gh=T('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading pods...'),Jh=T('<tr><td colspan=10 class="text-center py-8"style=color:var(--text-muted)>No pods found'),Xh=T('<tr style="cursor:pointer;outlineOffset:-2px;transition:background-color 0.2s ease"><td><span class="font-medium text-xs"></span></td><td></td><td></td><td class=font-mono></td><td><span class="flex items-center"style=font-weight:600></span></td><td><span class="flex items-center"style=font-weight:600></span></td><td></td><td></td><td></td><td>'),Zh=T("<span style=font-weight:bold> "),Qh=T("<span>"),il=T("<span style=color:#ef4444;font-size:0.6rem>â²"),nl=T("<span style=color:#22c55e;font-size:0.6rem>â¼"),eu=T('<div class="spinner mx-auto">'),tu=T('<span class="w-2 h-2 rounded-full bg-green-400 animate-pulse">'),ru=T('<div class="flex items-center justify-center h-full"><div class=spinner>'),su=T("<div class=space-y-3>"),iu=T('<div class=space-y-6><div><h3 class="text-sm font-semibold mb-3"style=color:var(--text-secondary)>Basic Information</h3><div class="grid grid-cols-2 md:grid-cols-4 gap-3"><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>Status</div><div><span></span></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>Ready</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>CPU</div><div style=color:#ec4899;font-weight:600></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>Memory</div><div style=color:#f59e0b;font-weight:600></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>Restarts</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>Age</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>IP</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>Namespace</div><div style=color:var(--text-primary)></div></div></div><div class="mt-3 p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>Node</div><div class="text-sm break-all"style=color:var(--text-primary)></div></div></div><div><h3 class="text-sm font-semibold mb-3"style=color:var(--text-secondary)>Containers</h3></div><div class="grid grid-cols-2 sm:grid-cols-3 gap-3 pt-4"><button class="btn-primary flex items-center justify-center gap-2 px-4 py-3 rounded-lg"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>Shell</button><button class="btn-primary flex items-center justify-center gap-2 px-4 py-3 rounded-lg"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>Port Forward</button><button class="btn-secondary flex items-center justify-center gap-2 px-4 py-3 rounded-lg"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>Logs</button><button class="btn-secondary flex items-center justify-center gap-2 px-4 py-3 rounded-lg"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg>YAML</button><button class="btn-secondary flex items-center justify-center gap-2 px-4 py-3 rounded-lg"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>Describe'),nu=T('<div class="p-4 text-center"><div class="spinner mx-auto">'),lu=T('<div class="p-4 rounded-lg border"style=background:var(--bg-secondary);border-color:var(--border-color)><div class="flex items-center justify-between mb-3"><div class="flex items-center gap-2"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg><span class=font-medium style=color:var(--text-primary)></span></div><span></span></div><div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm"><div><div class="text-xs mb-1"style=color:var(--text-muted)>Image</div><div class="p-2 rounded text-xs font-mono break-all"style=background:var(--bg-tertiary);color:var(--accent-primary)></div></div><div><div class="text-xs mb-1"style=color:var(--text-muted)>Container ID</div><div class="p-2 rounded text-xs font-mono truncate"style=background:var(--bg-tertiary);color:var(--text-secondary)>...</div></div><div><div class="text-xs mb-1"style=color:var(--text-muted)>Restart Count</div><div></div></div><div><div class="text-xs mb-1"style=color:var(--text-muted)>Started At</div><div style=color:var(--text-secondary)>');const ou=()=>{const[e,t]=J(""),[r,i]=J("all"),[h,_]=J("name"),[f,s]=J("asc"),[l,u]=J(1),[g,p]=J(20),[b,m]=J(null),[C,y]=J(!1),[n,d]=J(!1),[a,c]=J(!1),[v,x]=J(!1),[S,E]=J(!1),[$,k]=J(!1),[O,B]=J(!1),[D,I]=J(!1),[A,P]=J(null),[R,N]=J(8080),[w,H]=J(80),[z,{refetch:U}]=qe(De.listPortForwards),[te,F]=J(""),[W,V]=J(!1),[de,M]=J(null),[j,K]=J(100),[Z,se]=J(""),[ee,ae]=J(!1);let X=null;const[q,ne]=J({}),[Y,re]=J({});let Q=null;const[ve,Ae]=J(!1),[Ce,we]=J(null);let _e;const ge=Ee=>{if(!Ee||Ee==="-")return 0;const Ue=Ee.match(/^(\d+)/);return Ue?parseInt(Ue[1]):0},le=(Ee,Ue)=>{const nt=q()[Ee]?.[Ue],ct=Y()[Ee]?.[Ue];if(!nt||!ct)return null;const dt=ge(nt),Qe=ge(ct);return dt>Qe?"up":dt<Qe?"down":null},ue=async()=>{try{const Ee=q(),Ue=await De.getPodMetrics(tt());Object.keys(Ee).length>0&&re(Ee),ne(Ue)}catch(Ee){console.error("Failed to fetch metrics:",Ee)}},[Se,be]=J(0);let oe=null;const ye=(Ee,Ue)=>{if(!Ee)return"-";const nt=new Date(Ee),dt=new Date().getTime()-nt.getTime();if(dt<0)return"0s";const Qe=Math.floor(dt/1e3),yt=Math.floor(Qe/60),ht=Math.floor(yt/60),kt=Math.floor(ht/24);if(Qe<120)return`${Qe}s`;if(yt<60){const ds=Qe%60;return`${yt}m${ds}s`}if(ht<24){const ds=yt%60;return`${ht}h${ds}m`}const Li=ht%24;return`${kt}d${Li}h`};let pe=null,he=null;Qt(()=>{ue(),Q=setInterval(ue,1e4),oe=setInterval(()=>be(Ee=>Ee+1),5e3),pe=setInterval(()=>{fe().catch(Ee=>console.error("Background refresh error:",Ee)),ue()},2e3),he=Ee=>{if(Ee.target.tagName==="INPUT"||Ee.target.tagName==="TEXTAREA")return;const Ue=je();if(Ue.length===0)return;const nt=Ce();switch(Ee.key){case"ArrowDown":Ee.preventDefault(),we(ct=>ct===null?0:Math.min(ct+1,Ue.length-1));break;case"ArrowUp":Ee.preventDefault(),we(ct=>ct===null||ct===0?null:ct-1);break;case"Enter":Ee.preventDefault(),nt!==null&&Ue[nt]&&Ie(Ue[nt],"details");break;case"Escape":we(null);break}},document.addEventListener("keydown",he)}),nr(()=>{Q&&clearInterval(Q),oe&&clearInterval(oe),pe&&clearInterval(pe),he&&document.removeEventListener("keydown",he)}),Tt(()=>{const Ee=Ce();if(Ee!==null&&_e){const Ue=_e.querySelectorAll("tbody tr");Ue[Ee]&&Ue[Ee].scrollIntoView({behavior:"smooth",block:"nearest"})}}),qe(De.getNamespaces);const[me,{refetch:fe}]=qe(tt,De.getPods),[xe,$e]=J(!0);Tt(()=>{me()!==void 0&&xe()&&$e(!1)});const[ke]=qe(()=>(C()||n())&&b()?{name:b().name,ns:b().namespace}:null,async Ee=>Ee&&(await De.getPodYAML(Ee.name,Ee.ns)).yaml||""),Be=Ee=>{if(!Ee)return 0;const Ue=Ee.match(/^(\d+)m?$/);return Ue?parseInt(Ue[1]):0},Pe=Ee=>{if(!Ee)return 0;const Ue=Ee.match(/^(\d+)(Ki|Mi|Gi)?$/);if(!Ue)return 0;const nt=parseInt(Ue[1]),ct=Ue[2];return ct==="Gi"?nt*1024:ct==="Ki"?nt/1024:nt},Le=Ee=>{if(!Ee)return 0;let Ue=0;const nt=Ee.match(/(\d+)d/),ct=Ee.match(/(\d+)h/),dt=Ee.match(/(\d+)m/);return nt&&(Ue+=parseInt(nt[1])*24*60),ct&&(Ue+=parseInt(ct[1])*60),dt&&(Ue+=parseInt(dt[1])),Ue},Oe=Ne(()=>{let Ee=me()||[];const Ue=e().toLowerCase(),nt=r();Ue&&(Ee=Ee.filter(Qe=>Qe.name.toLowerCase().includes(Ue)||Qe.namespace.toLowerCase().includes(Ue)||Qe.node?.toLowerCase().includes(Ue)||Qe.ip?.toLowerCase().includes(Ue))),nt!=="all"&&(nt==="running"?Ee=Ee.filter(Qe=>Qe.status==="Running"):nt==="pending"?Ee=Ee.filter(Qe=>Qe.status==="Pending"):nt==="failed"?Ee=Ee.filter(Qe=>["Failed","Error","CrashLoopBackOff"].includes(Qe.status)):nt==="succeeded"&&(Ee=Ee.filter(Qe=>Qe.status==="Succeeded")));const ct=h(),dt=f();return Ee=[...Ee].sort((Qe,yt)=>{let ht=0;switch(ct){case"name":ht=Qe.name.localeCompare(yt.name);break;case"namespace":ht=Qe.namespace.localeCompare(yt.namespace);break;case"status":ht=Qe.status.localeCompare(yt.status);break;case"cpu":ht=Be(Qe.cpu)-Be(yt.cpu);break;case"memory":ht=Pe(Qe.memory)-Pe(yt.memory);break;case"restarts":ht=Qe.restarts-yt.restarts;break;case"age":ht=Le(Qe.age)-Le(yt.age);break}return dt==="asc"?ht:-ht}),Ee}),Fe=Ne(()=>Math.ceil(Oe().length/g())),je=Ne(()=>{const Ee=(l()-1)*g();return Oe().slice(Ee,Ee+g())}),Ke=Ne(()=>{const Ee=me()||[];return{running:Ee.filter(Ue=>Ue.status==="Running").length,pending:Ee.filter(Ue=>Ue.status==="Pending").length,failed:Ee.filter(Ue=>["Failed","Error","CrashLoopBackOff"].includes(Ue.status)).length,total:Ee.length}}),Te=Ee=>{h()===Ee?s(Ue=>Ue==="asc"?"desc":"asc"):(_(Ee),s("asc")),u(1)},Ge=Ee=>(()=>{var Ue=Nh(),nt=Ue.firstChild,ct=nt.nextSibling;return ie(dt=>{var Qe=h()===Ee.field&&f()==="asc"?"var(--accent-primary)":"var(--text-muted)",yt=h()===Ee.field&&f()==="desc"?"var(--accent-primary)":"var(--text-muted)";return Qe!==dt.e&&ce(nt,"color",dt.e=Qe),yt!==dt.t&&ce(ct,"color",dt.t=yt),dt},{e:void 0,t:void 0}),Ue})(),Ie=(Ee,Ue)=>{switch(m(Ee),Ue){case"yaml":y(!0);break;case"describe":c(!0);break;case"logs":ot(Ee,ee()),x(!0);break;case"details":E(!0);break;case"shell":k(!0);break;case"portforward":B(!0);break}},We=async()=>{const Ee=b();if(Ee)try{await De.startPortForward("pod",Ee.name,Ee.namespace,R(),w()),B(!1),U()}catch(Ue){console.error("Failed to start port forward:",Ue)}},Ye=async Ee=>{try{await De.stopPortForward(Ee),U()}catch(Ue){console.error("Failed to stop port forward:",Ue)}},Ze=Ee=>{const Ue=Ee.containers?.[0]||"";window.open(`/api/pod/exec?name=${Ee.name}&namespace=${Ee.namespace}&container=${Ue}`,"_blank")},rt=()=>{X&&(X.close(),X=null)},ot=async(Ee,Ue=!1)=>{rt(),V(!0),M(null);const nt=Ee.containers?.[0]||"",ct=`/api/pod/logs?name=${Ee.name}&namespace=${Ee.namespace}&container=${nt}&tail=${j()}${Ue?"&follow=true":""}`;if(Ue)F(""),X=new EventSource(ct),X.onmessage=dt=>{F(Qe=>Qe+dt.data+`
`),V(!1)},X.onerror=()=>{M("Stream connection lost"),V(!1),rt()},X.onopen=()=>{V(!1)};else try{const dt=await fetch(ct);if(!dt.ok){const yt=await dt.text();throw new Error(yt||`HTTP ${dt.status}`)}const Qe=await dt.json();F(Qe.logs||"No logs available")}catch(dt){M(dt.message||"Failed to fetch logs"),F("")}finally{V(!1)}},Ct=Ne(()=>{const Ee=te(),Ue=Z().toLowerCase();return Ue?Ee.split(`
`).filter(nt=>nt.toLowerCase().includes(Ue)).join(`
`):Ee}),Ht=()=>{const Ee=new Blob([te()],{type:"text/plain"}),Ue=URL.createObjectURL(Ee),nt=document.createElement("a");nt.href=Ue,nt.download=`${b()?.name}-logs.txt`,nt.click(),URL.revokeObjectURL(Ue)},rr=Ee=>{P(Ee),I(!0)},hr=async()=>{const Ee=A();if(Ee){I(!1);try{await De.deletePod(Ee.name,Ee.namespace),Ve(`Pod ${Ee.name} deleted successfully`,"success"),setTimeout(()=>fe(),500)}catch(Ue){console.error("Failed to delete pod:",Ue),Ve(`Failed to delete pod: ${Ue instanceof Error?Ue.message:"Unknown error"}`,"error")}finally{P(null)}}};return(()=>{var Ee=Kh(),Ue=Ee.firstChild,nt=Ue.firstChild,ct=nt.firstChild;ct.nextSibling;var dt=nt.nextSibling,Qe=dt.firstChild,yt=Qe.nextSibling,ht=Ue.nextSibling,kt=ht.firstChild,Li=kt.firstChild,ds=Li.nextSibling,Ri=kt.nextSibling,_a=Ri.firstChild,ba=_a.nextSibling,Di=Ri.nextSibling,ya=Di.firstChild,xa=ya.nextSibling,Ti=Di.nextSibling,$a=Ti.firstChild,wa=$a.nextSibling,Sa=Ti.nextSibling,Pi=Sa.nextSibling,Ii=Pi.nextSibling,Pn=Ii.nextSibling,Bi=ht.nextSibling;return Qe.$$click=()=>Ae(!ve()),yt.$$click=st=>{const lt=st.currentTarget;lt.classList.add("refreshing"),setTimeout(()=>lt.classList.remove("refreshing"),500),fe(),ue()},kt.$$click=()=>i("all"),o(ds,()=>Ke().total),Ri.$$click=()=>i("running"),o(ba,()=>Ke().running),Di.$$click=()=>i("pending"),o(xa,()=>Ke().pending),Ti.$$click=()=>i("failed"),o(wa,()=>Ke().failed),Pi.addEventListener("change",st=>{i(st.currentTarget.value),u(1)}),Ii.$$input=st=>{t(st.currentTarget.value),u(1)},Pn.addEventListener("change",st=>{p(parseInt(st.currentTarget.value)),u(1)}),o(Ee,L(G,{get when(){return(z()||[]).length>0},get children(){var st=Hh(),lt=st.firstChild,bt=lt.nextSibling;return o(bt,L(He,{get each(){return z()||[]},children:pt=>(()=>{var $t=Yh(),Mt=$t.firstChild,Et=Mt.nextSibling,wt=Et.nextSibling,Bt=wt.firstChild,xt=Bt.nextSibling;xt.nextSibling;var Lt=wt.nextSibling,Pt=Lt.nextSibling;return o(Et,()=>pt.name),o(wt,()=>pt.localPort,xt),o(wt,()=>pt.remotePort,null),Pt.$$click=()=>Ye(pt.id),ie(()=>Xe(Lt,"href",`http://localhost:${pt.localPort}`)),$t})()})),st}}),Bi),o(Bi,L(G,{get when(){return!xe()||me()!==void 0},get fallback(){return(()=>{var st=Gh(),lt=st.firstChild;return lt.nextSibling,st})()},get children(){return[(()=>{var st=zh(),lt=st.firstChild,bt=lt.firstChild,pt=bt.firstChild,$t=pt.firstChild,Mt=$t.firstChild;Mt.firstChild;var Et=$t.nextSibling,wt=Et.firstChild;wt.firstChild;var Bt=Et.nextSibling,xt=Bt.nextSibling,Lt=xt.nextSibling,Pt=Lt.firstChild;Pt.firstChild;var at=Lt.nextSibling,zt=at.firstChild;zt.firstChild;var Ft=at.nextSibling,Jt=Ft.firstChild;Jt.firstChild;var _t=Ft.nextSibling,Br=_t.nextSibling,Er=Br.firstChild;Er.firstChild;var Jr=bt.nextSibling,Or=_e;return typeof Or=="function"?Zt(Or,lt):_e=lt,$t.$$click=()=>Te("name"),o(Mt,L(Ge,{field:"name"}),null),Et.$$click=()=>Te("status"),o(wt,L(Ge,{field:"status"}),null),Lt.$$click=()=>Te("cpu"),o(Pt,L(Ge,{field:"cpu"}),null),at.$$click=()=>Te("memory"),o(zt,L(Ge,{field:"memory"}),null),Ft.$$click=()=>Te("restarts"),o(Jt,L(Ge,{field:"restarts"}),null),Br.$$click=()=>Te("age"),o(Er,L(Ge,{field:"age"}),null),o(Jr,L(He,{get each(){return je()},get fallback(){return(()=>{var Je=Jh();return Je.firstChild,Je})()},children:(Je,mr)=>{const Lr=()=>Ce()===mr(),_r=Je.status==="Failed"||Je.status==="CrashLoopBackOff"||Je.status==="Error",hs=Je.status==="Pending",[Oi,Is]=J(!1),Ni=()=>{if(_r)return"#ef4444";if(hs)return"#f59e0b"},Hi=()=>Oi()?Lr()?ve()?"#1f2937":"var(--bg-tertiary)":_r?"rgba(239, 68, 68, 0.2)":hs?"rgba(251, 191, 36, 0.2)":"rgba(255, 255, 255, 0.05)":"transparent",or=Ni();return(()=>{var sr=Xh(),Bs=sr.firstChild,Nr=Bs.firstChild,Os=Bs.nextSibling,Xr=Os.nextSibling,Zr=Xr.nextSibling,us=Zr.nextSibling,Hr=us.firstChild,Ns=us.nextSibling,zr=Ns.firstChild,jt=Ns.nextSibling,Qr=jt.nextSibling,es=Qr.nextSibling,Hs=es.nextSibling;return sr.addEventListener("mouseleave",()=>Is(!1)),sr.addEventListener("mouseenter",()=>{Is(!0),Ce()!==mr()&&we(mr())}),sr.$$click=()=>{we(mr()),Ie(Je,"details")},ce(sr,"borderLeft",_r?"3px solid #ef4444":hs?"3px solid #f59e0b":"none"),ce(sr,"color",or),o(Nr,()=>ve()?"â¶ ":"",null),o(Nr,(()=>{var ut=Re(()=>Je.name.length>40);return()=>ut()?Je.name.slice(0,37)+"...":Je.name})(),null),o(Os,()=>{const ut=Je.status==="Failed"||Je.status==="CrashLoopBackOff"||Je.status==="Error",br=Je.status==="Pending",yr=Je.status==="Running",Fr=Je.status==="Succeeded";return ve()?(()=>{var Ot=Zh(),Rr=Ot.firstChild;return ce(Ot,"color",yr?"#22c55e":br?"#f59e0b":Fr?"#06b6d4":"#ef4444"),o(Ot,yr?"â":br?"â":ut?"â":"â",Rr),o(Ot,()=>Je.status,null),Ot})():(()=>{var Ot=Qh();return ze(Ot,`badge ${yr?"badge-success":br?"badge-warning":Fr?"badge-info":"badge-error"}`),o(Ot,()=>Je.status),ie(Rr=>vn(Ot,{...br&&{background:"rgba(251, 191, 36, 0.2)",color:"#fbbf24",border:"1px solid rgba(251, 191, 36, 0.3)"},...ut&&{background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)"}},Rr)),Ot})()}),ce(Xr,"color",or||"inherit"),o(Xr,()=>Je.ready),ce(Zr,"color",or||"var(--text-secondary)"),o(Zr,()=>Je.ip||"-"),ce(Hr,"color",or||"#ec4899"),o(Hr,()=>q()[`${Je.namespace}/${Je.name}`]?.cpu||Je.cpu||"-",null),o(Hr,(()=>{var ut=Re(()=>le(`${Je.namespace}/${Je.name}`,"cpu")==="up");return()=>ut()&&il()})(),null),o(Hr,(()=>{var ut=Re(()=>le(`${Je.namespace}/${Je.name}`,"cpu")==="down");return()=>ut()&&nl()})(),null),ce(zr,"color",or||"#f59e0b"),o(zr,()=>q()[`${Je.namespace}/${Je.name}`]?.memory||Je.memory||"-",null),o(zr,(()=>{var ut=Re(()=>le(`${Je.namespace}/${Je.name}`,"memory")==="up");return()=>ut()&&il()})(),null),o(zr,(()=>{var ut=Re(()=>le(`${Je.namespace}/${Je.name}`,"memory")==="down");return()=>ut()&&nl()})(),null),o(jt,()=>Je.restarts),ce(Qr,"color",or||"var(--text-muted)"),o(Qr,()=>Je.node),ce(es,"color",or||"inherit"),o(es,()=>ye(Je.createdAt,Se())),o(Hs,L(Dt,{actions:[{label:"Shell",icon:"shell",onClick:()=>Ze(Je)},{label:"Port Forward",icon:"portforward",onClick:()=>Ie(Je,"portforward")},{label:"View Logs",icon:"logs",onClick:()=>Ie(Je,"logs")},{label:"View YAML",icon:"yaml",onClick:()=>Ie(Je,"yaml")},{label:"Edit YAML",icon:"edit",onClick:()=>{m(Je),d(!0)}},{label:"Describe",icon:"describe",onClick:()=>Ie(Je,"describe")},{label:"Delete",icon:"delete",onClick:()=>rr(Je),variant:"danger"}]})),ie(ut=>{var br=Lr()?"selected-row":"",yr=Hi(),Fr=Lr()?`2px solid ${ve()?"#06b6d4":"var(--accent-primary)"}`:"none",Ot=or||(ve()?Je.status==="Running"?"#22c55e":"var(--text-primary)":"#60a5fa"),Rr=or||(Je.restarts>0?"#fbbf24":"inherit"),zs=Je.restarts>0?"font-semibold":"";return br!==ut.e&&ze(sr,ut.e=br),yr!==ut.t&&ce(sr,"background",ut.t=yr),Fr!==ut.a&&ce(sr,"outline",ut.a=Fr),Ot!==ut.o&&ce(Nr,"color",ut.o=Ot),Rr!==ut.i&&ce(jt,"color",ut.i=Rr),zs!==ut.n&&ze(jt,ut.n=zs),ut},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),sr})()}})),ie(Je=>{var mr=`data-table ${ve()?"terminal-table":""}`,Lr=ve()?"monospace":"inherit",_r=ve()?"#0d1117":"transparent";return mr!==Je.e&&ze(lt,Je.e=mr),Lr!==Je.t&&ce(lt,"font-family",Je.t=Lr),_r!==Je.a&&ce(lt,"background",Je.a=_r),Je},{e:void 0,t:void 0,a:void 0}),st})(),L(G,{get when(){return Fe()>1},get children(){var st=Fh(),lt=st.firstChild,bt=lt.firstChild,pt=bt.nextSibling,$t=pt.nextSibling,Mt=$t.nextSibling,Et=Mt.nextSibling,wt=Et.nextSibling;wt.nextSibling;var Bt=lt.nextSibling,xt=Bt.firstChild,Lt=xt.nextSibling,Pt=Lt.nextSibling,at=Pt.firstChild,zt=at.nextSibling;zt.nextSibling;var Ft=Pt.nextSibling,Jt=Ft.nextSibling;return o(lt,()=>(l()-1)*g()+1,pt),o(lt,()=>Math.min(l()*g(),Oe().length),Mt),o(lt,()=>Oe().length,wt),xt.$$click=()=>u(1),Lt.$$click=()=>u(_t=>Math.max(1,_t-1)),o(Pt,l,zt),o(Pt,Fe,null),Ft.$$click=()=>u(_t=>Math.min(Fe(),_t+1)),Jt.$$click=()=>u(Fe()),ie(_t=>{var Br=l()===1,Er=l()===1,Jr=l()===Fe(),Or=l()===Fe();return Br!==_t.e&&(xt.disabled=_t.e=Br),Er!==_t.t&&(Lt.disabled=_t.t=Er),Jr!==_t.a&&(Ft.disabled=_t.a=Jr),Or!==_t.o&&(Jt.disabled=_t.o=Or),_t},{e:void 0,t:void 0,a:void 0,o:void 0}),st}})]}})),o(Ee,L(it,{get isOpen(){return C()},onClose:()=>y(!1),get title(){return`YAML: ${b()?.name}`},size:"xl",get children(){return L(G,{get when(){return!ke.loading},get fallback(){return eu()},get children(){return L(tr,{get yaml(){return ke()||""},get title(){return b()?.name}})}})}}),null),o(Ee,L(lr,{get isOpen(){return a()},onClose:()=>c(!1),resourceType:"pod",get name(){return b()?.name||""},get namespace(){return b()?.namespace}}),null),o(Ee,L(it,{get isOpen(){return v()},onClose:()=>{rt(),x(!1)},get title(){return`Logs: ${b()?.name}`},size:"xl",get children(){var st=Vh(),lt=st.firstChild,bt=lt.firstChild,pt=bt.nextSibling,$t=pt.firstChild,Mt=$t.nextSibling,Et=Mt.firstChild,wt=Mt.nextSibling,Bt=pt.nextSibling,xt=Bt.nextSibling,Lt=xt.nextSibling,Pt=lt.nextSibling;return bt.addEventListener("change",at=>{K(parseInt(at.currentTarget.value)),b()&&ot(b(),ee())}),$t.addEventListener("change",at=>{const zt=at.currentTarget.checked;ae(zt),b()&&ot(b(),zt)}),o(wt,()=>ee()?"Live":"Follow"),o(pt,(()=>{var at=Re(()=>!!ee());return()=>at()&&tu()})(),null),Bt.$$input=at=>se(at.currentTarget.value),xt.$$click=()=>b()&&ot(b(),ee()),Lt.$$click=Ht,o(Pt,L(G,{get when(){return!W()},get fallback(){return ru()},get children(){return[L(G,{get when(){return de()},get children(){var at=jh();return at.firstChild,o(at,de,null),at}}),(()=>{var at=Uh();return o(at,()=>Ct()||"No logs available"),at})()]}})),ie(at=>{var zt=ee(),Ft=ee()?"var(--accent-primary)":"var(--bg-tertiary)",Jt=ee()?"white":"var(--text-primary)",_t=ee()?"M21 12a9 9 0 11-18 0 9 9 0 0118 0z M10 9v6m4-6v6":"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z M21 12a9 9 0 11-18 0 9 9 0 0118 0z";return zt!==at.e&&(bt.disabled=at.e=zt),Ft!==at.t&&ce(pt,"background",at.t=Ft),Jt!==at.a&&ce(pt,"color",at.a=Jt),_t!==at.o&&Xe(Et,"d",at.o=_t),at},{e:void 0,t:void 0,a:void 0,o:void 0}),ie(()=>bt.value=j()),ie(()=>$t.checked=ee()),ie(()=>Bt.value=Z()),st}}),null),o(Ee,L(it,{get isOpen(){return S()},onClose:()=>E(!1),get title(){return`Pod: ${b()?.name}`},size:"xl",get children(){return L(G,{get when(){return b()},get children(){return(()=>{const[st]=qe(()=>b()?{name:b().name,ns:b().namespace}:null,async lt=>lt?De.getPodDetails(lt.name,lt.ns):null);return(()=>{var lt=iu(),bt=lt.firstChild,pt=bt.firstChild,$t=pt.nextSibling,Mt=$t.firstChild,Et=Mt.firstChild,wt=Et.nextSibling,Bt=wt.firstChild,xt=Mt.nextSibling,Lt=xt.firstChild,Pt=Lt.nextSibling,at=xt.nextSibling,zt=at.firstChild,Ft=zt.nextSibling,Jt=at.nextSibling,_t=Jt.firstChild,Br=_t.nextSibling,Er=Jt.nextSibling,Jr=Er.firstChild,Or=Jr.nextSibling,Je=Er.nextSibling,mr=Je.firstChild,Lr=mr.nextSibling,_r=Je.nextSibling,hs=_r.firstChild,Oi=hs.nextSibling,Is=_r.nextSibling,Ni=Is.firstChild,Hi=Ni.nextSibling,or=$t.nextSibling,sr=or.firstChild,Bs=sr.nextSibling,Nr=bt.nextSibling;Nr.firstChild;var Os=Nr.nextSibling,Xr=Os.firstChild,Zr=Xr.nextSibling,us=Zr.nextSibling,Hr=us.nextSibling,Ns=Hr.nextSibling;return o(Bt,()=>b()?.status),o(Pt,()=>b()?.ready),o(Ft,()=>b()?.cpu||"-"),o(Br,()=>b()?.memory||"-"),o(Or,()=>b()?.restarts),o(Lr,()=>b()?.age),o(Oi,()=>b()?.ip||"-"),o(Hi,()=>b()?.namespace),o(Bs,()=>b()?.node),o(Nr,L(G,{get when(){return Re(()=>!st.loading)()&&st()?.containers},get fallback(){return nu()},get children(){var zr=su();return o(zr,L(He,{get each(){return st()?.containers||[]},children:jt=>(()=>{var Qr=lu(),es=Qr.firstChild,Hs=es.firstChild,ut=Hs.firstChild,br=ut.nextSibling,yr=Hs.nextSibling,Fr=es.nextSibling,Ot=Fr.firstChild,Rr=Ot.firstChild,zs=Rr.nextSibling,In=Ot.nextSibling,Ca=In.firstChild,zi=Ca.nextSibling,ka=zi.firstChild,Bn=In.nextSibling,Aa=Bn.firstChild,On=Aa.nextSibling,Ma=Bn.nextSibling,Ea=Ma.firstChild,La=Ea.nextSibling;return o(br,()=>jt.name),o(yr,()=>jt.state||(jt.ready?"Running":"Not Ready")),o(zs,()=>jt.image),o(zi,()=>jt.containerID?.split("//")[1]?.substring(0,24)||"-",ka),o(On,()=>jt.restartCount),o(La,()=>jt.startedAt||"-"),ie(jr=>{var Nn=`badge ${jt.ready?"badge-success":"badge-error"}`,Hn=jt.containerID,zn=jt.restartCount>0?"var(--warning-color)":"var(--text-primary)";return Nn!==jr.e&&ze(yr,jr.e=Nn),Hn!==jr.t&&Xe(zi,"title",jr.t=Hn),zn!==jr.a&&ce(On,"color",jr.a=zn),jr},{e:void 0,t:void 0,a:void 0}),Qr})()})),zr}}),null),Xr.$$click=()=>Ze(b()),Zr.$$click=()=>{E(!1),Ie(b(),"portforward")},us.$$click=()=>{E(!1),Ie(b(),"logs")},Hr.$$click=()=>{E(!1),Ie(b(),"yaml")},Ns.$$click=()=>{E(!1),Ie(b(),"describe")},ie(()=>ze(Bt,`badge ${b()?.status==="Running"?"badge-success":"badge-warning"}`)),lt})()})()}})}}),null),o(Ee,L(it,{get isOpen(){return O()},onClose:()=>B(!1),get title(){return`Port Forward: ${b()?.name}`},size:"sm",get children(){var st=Wh(),lt=st.firstChild,bt=lt.firstChild,pt=bt.nextSibling,$t=lt.nextSibling,Mt=$t.firstChild,Et=Mt.nextSibling,wt=$t.nextSibling,Bt=wt.firstChild,xt=Bt.nextSibling;xt.firstChild;var Lt=xt.nextSibling,Pt=Lt.nextSibling,at=Pt.firstChild,zt=wt.nextSibling,Ft=zt.firstChild,Jt=Ft.nextSibling;return pt.$$input=_t=>N(parseInt(_t.currentTarget.value)||8080),Et.$$input=_t=>H(parseInt(_t.currentTarget.value)||80),o(xt,R,null),o(Pt,()=>b()?.name,at),o(Pt,w,null),Ft.$$click=()=>B(!1),Jt.$$click=We,ie(()=>pt.value=R()),ie(()=>Et.value=w()),st}}),null),o(Ee,L(it,{get isOpen(){return D()},onClose:()=>{I(!1),P(null)},title:"Delete Pod",size:"md",get children(){var st=qh(),lt=st.firstChild,bt=lt.firstChild;bt.firstChild;var pt=bt.nextSibling,$t=pt.firstChild,Mt=$t.nextSibling,Et=Mt.firstChild,wt=Et.nextSibling;wt.firstChild,Mt.nextSibling;var Bt=lt.nextSibling,xt=Bt.firstChild,Lt=xt.nextSibling;return o(Et,()=>A()?.name),o(wt,()=>A()?.namespace,null),xt.$$click=()=>{I(!1),P(null)},Lt.$$click=hr,st}}),null),ie(st=>{var lt=ve()?"var(--accent-primary)":"var(--bg-secondary)",bt=ve()?"Switch to Normal View":"Switch to Terminal View",pt=ve()?"#0d1117":"var(--bg-primary)";return lt!==st.e&&ce(Qe,"background",st.e=lt),bt!==st.t&&Xe(Qe,"title",st.t=bt),pt!==st.a&&ce(Bi,"background",st.a=pt),st},{e:void 0,t:void 0,a:void 0}),ie(()=>Pi.value=r()),ie(()=>Ii.value=e()),ie(()=>Pn.value=g()),Ee})()};et(["click","input"]);var au=T('<div class="px-3 py-1.5 rounded-lg text-sm"style="background:rgba(239, 68, 68, 0.1);color:var(--error-color)">'),cu=T("<div class=spinner style=width:16px;height:16px>"),du=T('<div class="flex flex-col h-full"><div class="flex items-center justify-between mb-2"><div class="flex items-center gap-2"></div><div class="flex items-center gap-2"><button class="px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)">Cancel</button><button class="px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"style=background:var(--accent-primary);color:white></button></div></div><textarea class="flex-1 w-full p-4 rounded-lg font-mono text-sm leading-relaxed resize-none focus:outline-none focus:ring-2 focus:ring-[var(--accent-primary)]"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color);fontFamily:ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace">');const cr=e=>{const[t,r]=J(e.yaml),[i,h]=J(!1),[_,f]=J(null),s=async()=>{f(null),h(!0);try{await e.onSave?.(t())}catch(u){f(u instanceof Error?u.message:"Failed to save YAML")}finally{h(!1)}},l=()=>{r(e.yaml),f(null),e.onCancel?.()};return(()=>{var u=du(),g=u.firstChild,p=g.firstChild,b=p.nextSibling,m=b.firstChild,C=m.nextSibling,y=g.nextSibling;return o(p,L(G,{get when(){return _()},get children(){var n=au();return o(n,_),n}})),m.$$click=l,C.$$click=s,o(C,L(G,{get when(){return i()||e.loading},fallback:"Save",get children(){return[cu(),"Saving..."]}})),y.$$input=n=>r(n.currentTarget.value),Xe(y,"spellcheck",!1),ie(n=>{var d=i()||e.loading,a=i()||e.loading||t()===e.yaml;return d!==n.e&&(m.disabled=n.e=d),a!==n.t&&(C.disabled=n.t=a),n},{e:void 0,t:void 0}),ie(()=>y.value=t()),u})()};et(["click","input"]);var hu=T('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>â²</span><span>â¼'),uu=T('<div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Ready </div></th><th class=whitespace-nowrap>Up-to-date</th><th class=whitespace-nowrap>Available</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),fu=T('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:#161b22><div style=color:#8b949e>Showing <!> - <!> of <!> deployments</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>â Prev</button><span class="px-3 py-1"style=color:#c9d1d9>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Next â</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Last'),gu=T("<div style=height:70vh>"),pu=T('<div class=space-y-4><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Replicas</label><input type=number min=0 max=100 class="w-full px-4 py-2 rounded-lg"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div class="flex gap-2"><button class="btn-secondary flex-1">Cancel</button><button class="btn-primary flex-1">Scale'),vu=T('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Deployments</h1><p style=color:var(--text-secondary)>Manage application deployments</p></div><div class="flex items-center gap-3"><button class=icon-btn title="Refresh Deployments"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Ready</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--warning-color)"><span class=text-sm style=color:var(--text-secondary)>Partial</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--error-color)"><span class=text-sm style=color:var(--text-secondary)>Unavailable</span><span class="text-xl font-bold"style=color:var(--error-color)></span></div><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class="overflow-hidden rounded-lg"style=background:#0d1117>'),mu=T('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading deployments...'),_u=T('<tr><td colspan=7 class="text-center py-8"style=color:var(--text-muted)>No deployments found'),bu=T('<tr><td><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td></td><td><span></span></td><td></td><td></td><td></td><td>'),ll=T('<div class="spinner mx-auto">');const yu=()=>{const[e,t]=J(""),[r,i]=J("name"),[h,_]=J("asc"),[f,s]=J(1),[l,u]=J(20),[g,p]=J(null),[b,m]=J(!1),[C,y]=J(!1),[n,d]=J(!1),[a,c]=J(!1),[v,x]=J(1),[S,E]=J(null),[$,{refetch:k}]=qe(tt,De.getDeployments),[O]=qe(()=>(b()||C())&&g()?{name:g().name,ns:g().namespace}:null,async F=>F&&(await De.getDeploymentYAML(F.name,F.ns)).yaml||""),B=async F=>{const W=g();if(W)try{await De.updateDeployment(W.name,W.namespace,F),Ve(`â Deployment ${W.name} updated successfully`,"success"),y(!1),setTimeout(()=>k(),500),setTimeout(()=>k(),2e3)}catch(V){const de=V instanceof Error?V.message:"Unknown error";throw Ve(`â Failed to update deployment: ${de}`,"error"),V}},D=F=>{if(!F)return 0;let W=0;const V=F.match(/(\d+)d/),de=F.match(/(\d+)h/),M=F.match(/(\d+)m/);return V&&(W+=parseInt(V[1])*24*60),de&&(W+=parseInt(de[1])*60),M&&(W+=parseInt(M[1])),W},I=Ne(()=>{let F=$()||[];const W=e().toLowerCase();W&&(F=F.filter(M=>M.name.toLowerCase().includes(W)||M.namespace.toLowerCase().includes(W)));const V=r(),de=h();return F=[...F].sort((M,j)=>{let K=0;switch(V){case"name":K=M.name.localeCompare(j.name);break;case"namespace":K=M.namespace.localeCompare(j.namespace);break;case"ready":K=M.ready.localeCompare(j.ready);break;case"age":K=D(M.age)-D(j.age);break}return de==="asc"?K:-K}),F}),A=Ne(()=>Math.ceil(I().length/l())),P=Ne(()=>{const F=(f()-1)*l();return I().slice(F,F+l())}),R=Ne(()=>{const F=$()||[];return{total:F.length,ready:F.filter(W=>{const V=W.ready?.split("/")||["0","0"];return V[0]===V[1]&&parseInt(V[0])>0}).length,partial:F.filter(W=>{const V=W.ready?.split("/")||["0","0"];return V[0]!==V[1]&&parseInt(V[0])>0}).length,unavailable:F.filter(W=>{const V=W.ready?.split("/")||["0","0"];return parseInt(V[0])===0}).length}}),N=F=>{r()===F?_(W=>W==="asc"?"desc":"asc"):(i(F),_("asc")),s(1)},w=F=>(()=>{var W=hu(),V=W.firstChild,de=V.nextSibling;return ie(M=>{var j=r()===F.field&&h()==="asc"?"var(--accent-primary)":"var(--text-muted)",K=r()===F.field&&h()==="desc"?"var(--accent-primary)":"var(--text-muted)";return j!==M.e&&ce(V,"color",M.e=j),K!==M.t&&ce(de,"color",M.t=K),M},{e:void 0,t:void 0}),W})(),H=async F=>{const W=`${F.namespace}/${F.name}`;E(W);try{const V=await De.restartDeployment(F.name,F.namespace);V?.success?Ve(`â Deployment ${F.name} restart initiated - pods will restart shortly`,"success"):Ve(`â ï¸ Restart initiated but may not have completed: ${V?.message||"Unknown status"}`,"warning"),setTimeout(()=>k(),500),setTimeout(()=>k(),2e3),setTimeout(()=>k(),5e3)}catch(V){console.error("Failed to restart deployment:",V);const de=V instanceof Error?V.message:"Unknown error";Ve(`â Failed to restart deployment ${F.name}: ${de}`,"error")}finally{setTimeout(()=>E(null),2e3)}},z=async()=>{const F=g();if(F)try{const W=await De.scaleDeployment(F.name,F.namespace,v());W?.success?Ve(`â Deployment ${F.name} scaled to ${v()} replicas`,"success"):Ve(`â ï¸ Scale may not have completed: ${W?.message||"Unknown status"}`,"warning"),c(!1),setTimeout(()=>k(),500),setTimeout(()=>k(),2e3)}catch(W){console.error("Failed to scale deployment:",W);const V=W instanceof Error?W.message:"Unknown error";Ve(`â Failed to scale deployment: ${V}`,"error")}},U=async F=>{if(confirm(`Are you sure you want to delete deployment "${F.name}" in namespace "${F.namespace}"?`))try{await De.deleteDeployment(F.name,F.namespace),Ve(`Deployment ${F.name} deleted successfully`,"success"),k()}catch(W){console.error("Failed to delete deployment:",W),Ve(`Failed to delete deployment: ${W instanceof Error?W.message:"Unknown error"}`,"error")}},te=F=>{p(F);const W=F.ready?.split("/")||["1","1"];x(parseInt(W[1])||1),c(!0)};return(()=>{var F=vu(),W=F.firstChild,V=W.firstChild,de=V.firstChild;de.nextSibling;var M=V.nextSibling,j=M.firstChild,K=W.nextSibling,Z=K.firstChild,se=Z.firstChild,ee=se.nextSibling,ae=Z.nextSibling,X=ae.firstChild,q=X.nextSibling,ne=ae.nextSibling,Y=ne.firstChild,re=Y.nextSibling,Q=ne.nextSibling,ve=Q.firstChild,Ae=ve.nextSibling,Ce=Q.nextSibling,we=Ce.nextSibling,_e=we.nextSibling,ge=K.nextSibling;return j.$$click=le=>{const ue=le.currentTarget;ue.classList.add("refreshing"),setTimeout(()=>ue.classList.remove("refreshing"),500),k()},o(ee,()=>R().total),o(q,()=>R().ready),o(re,()=>R().partial),o(Ae,()=>R().unavailable),we.$$input=le=>{t(le.currentTarget.value),s(1)},_e.addEventListener("change",le=>{u(parseInt(le.currentTarget.value)),s(1)}),o(ge,L(G,{get when(){return!$.loading},get fallback(){return(()=>{var le=mu(),ue=le.firstChild;return ue.nextSibling,le})()},get children(){return[(()=>{var le=uu(),ue=le.firstChild,Se=ue.firstChild,be=Se.firstChild,oe=be.firstChild,ye=oe.firstChild;ye.firstChild;var pe=oe.nextSibling,he=pe.firstChild;he.firstChild;var me=pe.nextSibling,fe=me.firstChild;fe.firstChild;var xe=me.nextSibling,$e=xe.nextSibling,ke=$e.nextSibling,Be=ke.firstChild;Be.firstChild;var Pe=Se.nextSibling;return oe.$$click=()=>N("name"),o(ye,L(w,{field:"name"}),null),pe.$$click=()=>N("namespace"),o(he,L(w,{field:"namespace"}),null),me.$$click=()=>N("ready"),o(fe,L(w,{field:"ready"}),null),ke.$$click=()=>N("age"),o(Be,L(w,{field:"age"}),null),o(Pe,L(He,{get each(){return P()},get fallback(){return(()=>{var Le=_u();return Le.firstChild,Le})()},children:Le=>(()=>{var Oe=bu(),Fe=Oe.firstChild,je=Fe.firstChild,Ke=Fe.nextSibling,Te=Ke.nextSibling,Ge=Te.firstChild,Ie=Te.nextSibling,We=Ie.nextSibling,Ye=We.nextSibling,Ze=Ye.nextSibling;return je.$$click=()=>{p(Le),d(!0)},o(je,(()=>{var rt=Re(()=>Le.name.length>40);return()=>rt()?Le.name.slice(0,37)+"...":Le.name})()),o(Ke,()=>Le.namespace),o(Ge,()=>Le.ready),o(Ie,()=>Le.upToDate),o(We,()=>Le.available),o(Ye,()=>Le.age),o(Ze,L(Dt,{get actions(){return[{label:"Scale",icon:"scale",onClick:()=>te(Le)},{label:"Restart",icon:"restart",onClick:()=>H(Le),loading:S()===`${Le.namespace}/${Le.name}`},{label:"View YAML",icon:"yaml",onClick:()=>{p(Le),m(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{p(Le),y(!0)}},{label:"Delete",icon:"delete",onClick:()=>U(Le),variant:"danger",divider:!0}]}})),ie(()=>ze(Ge,`badge ${Le.ready.split("/")[0]===Le.ready.split("/")[1]?"badge-success":"badge-warning"}`)),Oe})()})),le})(),L(G,{get when(){return A()>1},get children(){var le=fu(),ue=le.firstChild,Se=ue.firstChild,be=Se.nextSibling,oe=be.nextSibling,ye=oe.nextSibling,pe=ye.nextSibling,he=pe.nextSibling;he.nextSibling;var me=ue.nextSibling,fe=me.firstChild,xe=fe.nextSibling,$e=xe.nextSibling,ke=$e.firstChild,Be=ke.nextSibling;Be.nextSibling;var Pe=$e.nextSibling,Le=Pe.nextSibling;return o(ue,()=>(f()-1)*l()+1,be),o(ue,()=>Math.min(f()*l(),I().length),ye),o(ue,()=>I().length,he),fe.$$click=()=>s(1),xe.$$click=()=>s(Oe=>Math.max(1,Oe-1)),o($e,f,Be),o($e,A,null),Pe.$$click=()=>s(Oe=>Math.min(A(),Oe+1)),Le.$$click=()=>s(A()),ie(Oe=>{var Fe=f()===1,je=f()===1,Ke=f()===A(),Te=f()===A();return Fe!==Oe.e&&(fe.disabled=Oe.e=Fe),je!==Oe.t&&(xe.disabled=Oe.t=je),Ke!==Oe.a&&(Pe.disabled=Oe.a=Ke),Te!==Oe.o&&(Le.disabled=Oe.o=Te),Oe},{e:void 0,t:void 0,a:void 0,o:void 0}),le}})]}})),o(F,L(it,{get isOpen(){return b()},onClose:()=>m(!1),get title(){return`YAML: ${g()?.name}`},size:"xl",get children(){return L(G,{get when(){return!O.loading},get fallback(){return ll()},get children(){return L(tr,{get yaml(){return O()||""},get title(){return g()?.name}})}})}}),null),o(F,L(it,{get isOpen(){return C()},onClose:()=>y(!1),get title(){return`Edit YAML: ${g()?.name}`},size:"xl",get children(){return L(G,{get when(){return!O.loading},get fallback(){return ll()},get children(){var le=gu();return o(le,L(cr,{get yaml(){return O()||""},get title(){return g()?.name},onSave:B,onCancel:()=>y(!1)})),le}})}}),null),o(F,L(lr,{get isOpen(){return n()},onClose:()=>d(!1),resourceType:"deployment",get name(){return g()?.name||""},get namespace(){return g()?.namespace}}),null),o(F,L(it,{get isOpen(){return a()},onClose:()=>c(!1),get title(){return`Scale: ${g()?.name}`},size:"sm",get children(){var le=pu(),ue=le.firstChild,Se=ue.firstChild,be=Se.nextSibling,oe=ue.nextSibling,ye=oe.firstChild,pe=ye.nextSibling;return be.$$input=he=>x(parseInt(he.currentTarget.value)||0),ye.$$click=()=>c(!1),pe.$$click=z,ie(()=>be.value=v()),le}}),null),ie(()=>we.value=e()),ie(()=>_e.value=l()),F})()};et(["click","input"]);var xu=T('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>â²</span><span>â¼'),$u=T('<div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Ready </div></th><th class=whitespace-nowrap>Replicas</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),wu=T('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:#161b22><div style=color:#8b949e>Showing <!> - <!> of <!> StatefulSets</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>â Prev</button><span class="px-3 py-1"style=color:#c9d1d9>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Next â</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Last'),Su=T("<div style=height:70vh>"),Cu=T('<div class=space-y-4><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Replicas</label><input type=number min=0 max=100 class="w-full px-4 py-2 rounded-lg"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div class="flex gap-2"><button class="btn-secondary flex-1">Cancel</button><button class="btn-primary flex-1">Scale'),ku=T('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>StatefulSets</h1><p style=color:var(--text-secondary)>Manage stateful applications</p></div><div class="flex items-center gap-3"><button class=icon-btn title="Refresh StatefulSets"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Ready</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--warning-color)"><span class=text-sm style=color:var(--text-secondary)>Partial</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--error-color)"><span class=text-sm style=color:var(--text-secondary)>Unavailable</span><span class="text-xl font-bold"style=color:var(--error-color)></span></div><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class="overflow-hidden rounded-lg"style=background:#0d1117>'),Au=T('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading StatefulSets...'),Mu=T('<tr><td colspan=6 class="text-center py-8"style=color:var(--text-muted)>No StatefulSets found'),Eu=T('<tr><td><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td></td><td><span></span></td><td></td><td></td><td>'),ol=T('<div class="spinner mx-auto">');const Lu=()=>{const[e,t]=J(""),[r,i]=J("name"),[h,_]=J("asc"),[f,s]=J(1),[l,u]=J(20),[g,p]=J(null),[b,m]=J(!1),[C,y]=J(!1),[n,d]=J(!1),[a,c]=J(!1),[v,x]=J(1),[S,E]=J(null),[$,{refetch:k}]=qe(tt,De.getStatefulSets),[O]=qe(()=>(b()||C())&&g()?{name:g().name,ns:g().namespace}:null,async F=>F&&(await De.getStatefulSetYAML(F.name,F.ns)).yaml||""),B=async F=>{const W=g();if(W)try{await De.updateStatefulSet(W.name,W.namespace,F),Ve(`â StatefulSet ${W.name} updated successfully`,"success"),y(!1),setTimeout(()=>k(),500),setTimeout(()=>k(),2e3)}catch(V){const de=V instanceof Error?V.message:"Unknown error";throw Ve(`â Failed to update StatefulSet: ${de}`,"error"),V}},D=F=>{if(!F)return 0;let W=0;const V=F.match(/(\d+)d/),de=F.match(/(\d+)h/),M=F.match(/(\d+)m/);return V&&(W+=parseInt(V[1])*24*60),de&&(W+=parseInt(de[1])*60),M&&(W+=parseInt(M[1])),W},I=Ne(()=>{let F=$()||[];const W=e().toLowerCase();W&&(F=F.filter(M=>M.name.toLowerCase().includes(W)||M.namespace.toLowerCase().includes(W)));const V=r(),de=h();return F=[...F].sort((M,j)=>{let K=0;switch(V){case"name":K=M.name.localeCompare(j.name);break;case"namespace":K=M.namespace.localeCompare(j.namespace);break;case"ready":K=M.ready.localeCompare(j.ready);break;case"age":K=D(M.age)-D(j.age);break}return de==="asc"?K:-K}),F}),A=Ne(()=>Math.ceil(I().length/l())),P=Ne(()=>{const F=(f()-1)*l();return I().slice(F,F+l())}),R=Ne(()=>{const F=$()||[];return{total:F.length,ready:F.filter(W=>{const V=W.ready?.split("/")||["0","0"];return V[0]===V[1]&&parseInt(V[0])>0}).length,partial:F.filter(W=>{const V=W.ready?.split("/")||["0","0"];return V[0]!==V[1]&&parseInt(V[0])>0}).length,unavailable:F.filter(W=>{const V=W.ready?.split("/")||["0","0"];return parseInt(V[0])===0}).length}}),N=F=>{r()===F?_(W=>W==="asc"?"desc":"asc"):(i(F),_("asc")),s(1)},w=F=>(()=>{var W=xu(),V=W.firstChild,de=V.nextSibling;return ie(M=>{var j=r()===F.field&&h()==="asc"?"var(--accent-primary)":"var(--text-muted)",K=r()===F.field&&h()==="desc"?"var(--accent-primary)":"var(--text-muted)";return j!==M.e&&ce(V,"color",M.e=j),K!==M.t&&ce(de,"color",M.t=K),M},{e:void 0,t:void 0}),W})(),H=async F=>{const W=`${F.namespace}/${F.name}`;E(W);try{const V=await De.restartStatefulSet(F.name,F.namespace);V?.success?Ve(`â StatefulSet ${F.name} restart initiated - pods will restart shortly`,"success"):Ve(`â ï¸ Restart initiated but may not have completed: ${V?.message||"Unknown status"}`,"warning"),setTimeout(()=>k(),500),setTimeout(()=>k(),2e3),setTimeout(()=>k(),5e3)}catch(V){console.error("Failed to restart StatefulSet:",V);const de=V instanceof Error?V.message:"Unknown error";Ve(`â Failed to restart StatefulSet ${F.name}: ${de}`,"error")}finally{setTimeout(()=>E(null),2e3)}},z=async()=>{const F=g();if(F)try{const W=await De.scaleStatefulSet(F.name,F.namespace,v());W?.success?Ve(`â StatefulSet ${F.name} scaled to ${v()} replicas`,"success"):Ve(`â ï¸ Scale may not have completed: ${W?.message||"Unknown status"}`,"warning"),c(!1),setTimeout(()=>k(),500),setTimeout(()=>k(),2e3)}catch(W){console.error("Failed to scale StatefulSet:",W);const V=W instanceof Error?W.message:"Unknown error";Ve(`â Failed to scale StatefulSet: ${V}`,"error")}},U=async F=>{if(confirm(`Are you sure you want to delete StatefulSet "${F.name}" in namespace "${F.namespace}"?`))try{await De.deleteStatefulSet(F.name,F.namespace),Ve(`StatefulSet ${F.name} deleted successfully`,"success"),k()}catch(W){console.error("Failed to delete StatefulSet:",W),Ve(`Failed to delete StatefulSet: ${W instanceof Error?W.message:"Unknown error"}`,"error")}},te=F=>{p(F);const W=F.ready?.split("/")||["1","1"];x(parseInt(W[1])||1),c(!0)};return(()=>{var F=ku(),W=F.firstChild,V=W.firstChild,de=V.firstChild;de.nextSibling;var M=V.nextSibling,j=M.firstChild,K=W.nextSibling,Z=K.firstChild,se=Z.firstChild,ee=se.nextSibling,ae=Z.nextSibling,X=ae.firstChild,q=X.nextSibling,ne=ae.nextSibling,Y=ne.firstChild,re=Y.nextSibling,Q=ne.nextSibling,ve=Q.firstChild,Ae=ve.nextSibling,Ce=Q.nextSibling,we=Ce.nextSibling,_e=we.nextSibling,ge=K.nextSibling;return j.$$click=le=>{const ue=le.currentTarget;ue.classList.add("refreshing"),setTimeout(()=>ue.classList.remove("refreshing"),500),k()},o(ee,()=>R().total),o(q,()=>R().ready),o(re,()=>R().partial),o(Ae,()=>R().unavailable),we.$$input=le=>{t(le.currentTarget.value),s(1)},_e.addEventListener("change",le=>{u(parseInt(le.currentTarget.value)),s(1)}),o(ge,L(G,{get when(){return!$.loading},get fallback(){return(()=>{var le=Au(),ue=le.firstChild;return ue.nextSibling,le})()},get children(){return[(()=>{var le=$u(),ue=le.firstChild,Se=ue.firstChild,be=Se.firstChild,oe=be.firstChild,ye=oe.firstChild;ye.firstChild;var pe=oe.nextSibling,he=pe.firstChild;he.firstChild;var me=pe.nextSibling,fe=me.firstChild;fe.firstChild;var xe=me.nextSibling,$e=xe.nextSibling,ke=$e.firstChild;ke.firstChild;var Be=Se.nextSibling;return oe.$$click=()=>N("name"),o(ye,L(w,{field:"name"}),null),pe.$$click=()=>N("namespace"),o(he,L(w,{field:"namespace"}),null),me.$$click=()=>N("ready"),o(fe,L(w,{field:"ready"}),null),$e.$$click=()=>N("age"),o(ke,L(w,{field:"age"}),null),o(Be,L(He,{get each(){return P()},get fallback(){return(()=>{var Pe=Mu();return Pe.firstChild,Pe})()},children:Pe=>(()=>{var Le=Eu(),Oe=Le.firstChild,Fe=Oe.firstChild,je=Oe.nextSibling,Ke=je.nextSibling,Te=Ke.firstChild,Ge=Ke.nextSibling,Ie=Ge.nextSibling,We=Ie.nextSibling;return Fe.$$click=()=>{p(Pe),d(!0)},o(Fe,(()=>{var Ye=Re(()=>Pe.name.length>40);return()=>Ye()?Pe.name.slice(0,37)+"...":Pe.name})()),o(je,()=>Pe.namespace),o(Te,()=>Pe.ready),o(Ge,()=>Pe.replicas),o(Ie,()=>Pe.age),o(We,L(Dt,{get actions(){return[{label:"Scale",icon:"scale",onClick:()=>te(Pe)},{label:"Restart",icon:"restart",onClick:()=>H(Pe),loading:S()===`${Pe.namespace}/${Pe.name}`},{label:"View YAML",icon:"yaml",onClick:()=>{p(Pe),m(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{p(Pe),y(!0)}},{label:"Delete",icon:"delete",onClick:()=>U(Pe),variant:"danger",divider:!0}]}})),ie(()=>ze(Te,`badge ${Pe.ready.split("/")[0]===Pe.ready.split("/")[1]?"badge-success":"badge-warning"}`)),Le})()})),le})(),L(G,{get when(){return A()>1},get children(){var le=wu(),ue=le.firstChild,Se=ue.firstChild,be=Se.nextSibling,oe=be.nextSibling,ye=oe.nextSibling,pe=ye.nextSibling,he=pe.nextSibling;he.nextSibling;var me=ue.nextSibling,fe=me.firstChild,xe=fe.nextSibling,$e=xe.nextSibling,ke=$e.firstChild,Be=ke.nextSibling;Be.nextSibling;var Pe=$e.nextSibling,Le=Pe.nextSibling;return o(ue,()=>(f()-1)*l()+1,be),o(ue,()=>Math.min(f()*l(),I().length),ye),o(ue,()=>I().length,he),fe.$$click=()=>s(1),xe.$$click=()=>s(Oe=>Math.max(1,Oe-1)),o($e,f,Be),o($e,A,null),Pe.$$click=()=>s(Oe=>Math.min(A(),Oe+1)),Le.$$click=()=>s(A()),ie(Oe=>{var Fe=f()===1,je=f()===1,Ke=f()===A(),Te=f()===A();return Fe!==Oe.e&&(fe.disabled=Oe.e=Fe),je!==Oe.t&&(xe.disabled=Oe.t=je),Ke!==Oe.a&&(Pe.disabled=Oe.a=Ke),Te!==Oe.o&&(Le.disabled=Oe.o=Te),Oe},{e:void 0,t:void 0,a:void 0,o:void 0}),le}})]}})),o(F,L(it,{get isOpen(){return b()},onClose:()=>m(!1),get title(){return`YAML: ${g()?.name}`},size:"xl",get children(){return L(G,{get when(){return!O.loading},get fallback(){return ol()},get children(){return L(tr,{get yaml(){return O()||""},get title(){return g()?.name}})}})}}),null),o(F,L(it,{get isOpen(){return C()},onClose:()=>y(!1),get title(){return`Edit YAML: ${g()?.name}`},size:"xl",get children(){return L(G,{get when(){return!O.loading},get fallback(){return ol()},get children(){var le=Su();return o(le,L(cr,{get yaml(){return O()||""},get title(){return g()?.name},onSave:B,onCancel:()=>y(!1)})),le}})}}),null),o(F,L(lr,{get isOpen(){return n()},onClose:()=>d(!1),resourceType:"statefulset",get name(){return g()?.name||""},get namespace(){return g()?.namespace}}),null),o(F,L(it,{get isOpen(){return a()},onClose:()=>c(!1),get title(){return`Scale: ${g()?.name}`},size:"sm",get children(){var le=Cu(),ue=le.firstChild,Se=ue.firstChild,be=Se.nextSibling,oe=ue.nextSibling,ye=oe.firstChild,pe=ye.nextSibling;return be.$$input=he=>x(parseInt(he.currentTarget.value)||0),ye.$$click=()=>c(!1),pe.$$click=z,ie(()=>be.value=v()),le}}),null),ie(()=>we.value=e()),ie(()=>_e.value=l()),F})()};et(["click","input"]);var Ru=T('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>â²</span><span>â¼'),Du=T('<div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class=whitespace-nowrap>Desired</th><th class=whitespace-nowrap>Current</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Ready </div></th><th class=whitespace-nowrap>Available</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),Tu=T('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:#161b22><div style=color:#8b949e>Showing <!> - <!> of <!> DaemonSets</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>â Prev</button><span class="px-3 py-1"style=color:#c9d1d9>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Next â</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Last'),Pu=T("<div style=height:70vh>"),Iu=T('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>DaemonSets</h1><p style=color:var(--text-secondary)>Node-level workloads running on all or selected nodes</p></div><div class="flex items-center gap-3"><button class=icon-btn title="Refresh DaemonSets"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Ready</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--warning-color)"><span class=text-sm style=color:var(--text-secondary)>Partial</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--error-color)"><span class=text-sm style=color:var(--text-secondary)>Unavailable</span><span class="text-xl font-bold"style=color:var(--error-color)></span></div><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class="overflow-hidden rounded-lg"style=background:#0d1117>'),Bu=T('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading DaemonSets...'),Ou=T('<tr><td colspan=8 class="text-center py-8"style=color:var(--text-muted)>No DaemonSets found'),Nu=T('<tr><td><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td></td><td></td><td></td><td><span></span></td><td></td><td></td><td>'),al=T('<div class="spinner mx-auto">');const Hu=()=>{const[e,t]=J(""),[r,i]=J("name"),[h,_]=J("asc"),[f,s]=J(1),[l,u]=J(20),[g,p]=J(null),[b,m]=J(!1),[C,y]=J(!1),[n,d]=J(!1),[a,{refetch:c}]=qe(tt,De.getDaemonSets),[v]=qe(()=>(b()||C())&&g()?{name:g().name,ns:g().namespace}:null,async P=>P&&(await De.getDaemonSetYAML(P.name,P.ns)).yaml||""),x=async P=>{const R=g();if(R)try{await De.updateDaemonSet(R.name,R.namespace,P),Ve(`â DaemonSet ${R.name} updated successfully`,"success"),y(!1),setTimeout(()=>c(),500),setTimeout(()=>c(),2e3)}catch(N){const w=N instanceof Error?N.message:"Unknown error";throw Ve(`â Failed to update daemonset: ${w}`,"error"),N}},S=P=>{if(!P)return 0;let R=0;const N=P.match(/(\d+)d/),w=P.match(/(\d+)h/),H=P.match(/(\d+)m/);return N&&(R+=parseInt(N[1])*24*60),w&&(R+=parseInt(w[1])*60),H&&(R+=parseInt(H[1])),R},E=Ne(()=>{let P=a()||[];const R=e().toLowerCase();R&&(P=P.filter(H=>H.name.toLowerCase().includes(R)||H.namespace.toLowerCase().includes(R)));const N=r(),w=h();return P=[...P].sort((H,z)=>{let U=0;switch(N){case"name":U=H.name.localeCompare(z.name);break;case"namespace":U=H.namespace.localeCompare(z.namespace);break;case"ready":U=H.ready-z.ready;break;case"age":U=S(H.age)-S(z.age);break}return w==="asc"?U:-U}),P}),$=Ne(()=>Math.ceil(E().length/l())),k=Ne(()=>{const P=(f()-1)*l();return E().slice(P,P+l())}),O=Ne(()=>{const P=a()||[];return{total:P.length,ready:P.filter(R=>R.ready===R.desired&&R.ready>0).length,partial:P.filter(R=>R.ready!==R.desired&&R.ready>0).length,unavailable:P.filter(R=>R.ready===0).length}}),B=P=>{r()===P?_(R=>R==="asc"?"desc":"asc"):(i(P),_("asc")),s(1)},D=P=>(()=>{var R=Ru(),N=R.firstChild,w=N.nextSibling;return ie(H=>{var z=r()===P.field&&h()==="asc"?"var(--accent-primary)":"var(--text-muted)",U=r()===P.field&&h()==="desc"?"var(--accent-primary)":"var(--text-muted)";return z!==H.e&&ce(N,"color",H.e=z),U!==H.t&&ce(w,"color",H.t=U),H},{e:void 0,t:void 0}),R})(),I=async P=>{try{await De.restartDaemonSet(P.name,P.namespace),c()}catch(R){console.error("Failed to restart DaemonSet:",R)}},A=async P=>{if(confirm(`Are you sure you want to delete DaemonSet "${P.name}" in namespace "${P.namespace}"?`))try{await De.deleteDaemonSet(P.name,P.namespace),Ve(`DaemonSet ${P.name} deleted successfully`,"success"),c()}catch(R){console.error("Failed to delete DaemonSet:",R),Ve(`Failed to delete DaemonSet: ${R instanceof Error?R.message:"Unknown error"}`,"error")}};return(()=>{var P=Iu(),R=P.firstChild,N=R.firstChild,w=N.firstChild;w.nextSibling;var H=N.nextSibling,z=H.firstChild,U=R.nextSibling,te=U.firstChild,F=te.firstChild,W=F.nextSibling,V=te.nextSibling,de=V.firstChild,M=de.nextSibling,j=V.nextSibling,K=j.firstChild,Z=K.nextSibling,se=j.nextSibling,ee=se.firstChild,ae=ee.nextSibling,X=se.nextSibling,q=X.nextSibling,ne=q.nextSibling,Y=U.nextSibling;return z.$$click=re=>{const Q=re.currentTarget;Q.classList.add("refreshing"),setTimeout(()=>Q.classList.remove("refreshing"),500),c()},o(W,()=>O().total),o(M,()=>O().ready),o(Z,()=>O().partial),o(ae,()=>O().unavailable),q.$$input=re=>{t(re.currentTarget.value),s(1)},ne.addEventListener("change",re=>{u(parseInt(re.currentTarget.value)),s(1)}),o(Y,L(G,{get when(){return!a.loading},get fallback(){return(()=>{var re=Bu(),Q=re.firstChild;return Q.nextSibling,re})()},get children(){return[(()=>{var re=Du(),Q=re.firstChild,ve=Q.firstChild,Ae=ve.firstChild,Ce=Ae.firstChild,we=Ce.firstChild;we.firstChild;var _e=Ce.nextSibling,ge=_e.firstChild;ge.firstChild;var le=_e.nextSibling,ue=le.nextSibling,Se=ue.nextSibling,be=Se.firstChild;be.firstChild;var oe=Se.nextSibling,ye=oe.nextSibling,pe=ye.firstChild;pe.firstChild;var he=ve.nextSibling;return Ce.$$click=()=>B("name"),o(we,L(D,{field:"name"}),null),_e.$$click=()=>B("namespace"),o(ge,L(D,{field:"namespace"}),null),Se.$$click=()=>B("ready"),o(be,L(D,{field:"ready"}),null),ye.$$click=()=>B("age"),o(pe,L(D,{field:"age"}),null),o(he,L(He,{get each(){return k()},get fallback(){return(()=>{var me=Ou();return me.firstChild,me})()},children:me=>(()=>{var fe=Nu(),xe=fe.firstChild,$e=xe.firstChild,ke=xe.nextSibling,Be=ke.nextSibling,Pe=Be.nextSibling,Le=Pe.nextSibling,Oe=Le.firstChild,Fe=Le.nextSibling,je=Fe.nextSibling,Ke=je.nextSibling;return $e.$$click=()=>{p(me),d(!0)},o($e,(()=>{var Te=Re(()=>me.name.length>40);return()=>Te()?me.name.slice(0,37)+"...":me.name})()),o(ke,()=>me.namespace),o(Be,()=>me.desired),o(Pe,()=>me.current),o(Oe,()=>me.ready),o(Fe,()=>me.available),o(je,()=>me.age),o(Ke,L(Dt,{actions:[{label:"Restart",icon:"restart",onClick:()=>I(me)},{label:"View YAML",icon:"yaml",onClick:()=>{p(me),m(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{p(me),y(!0)}},{label:"Delete",icon:"delete",onClick:()=>A(me),variant:"danger",divider:!0}]})),ie(()=>ze(Oe,`badge ${me.ready===me.desired?"badge-success":"badge-warning"}`)),fe})()})),re})(),L(G,{get when(){return $()>1},get children(){var re=Tu(),Q=re.firstChild,ve=Q.firstChild,Ae=ve.nextSibling,Ce=Ae.nextSibling,we=Ce.nextSibling,_e=we.nextSibling,ge=_e.nextSibling;ge.nextSibling;var le=Q.nextSibling,ue=le.firstChild,Se=ue.nextSibling,be=Se.nextSibling,oe=be.firstChild,ye=oe.nextSibling;ye.nextSibling;var pe=be.nextSibling,he=pe.nextSibling;return o(Q,()=>(f()-1)*l()+1,Ae),o(Q,()=>Math.min(f()*l(),E().length),we),o(Q,()=>E().length,ge),ue.$$click=()=>s(1),Se.$$click=()=>s(me=>Math.max(1,me-1)),o(be,f,ye),o(be,$,null),pe.$$click=()=>s(me=>Math.min($(),me+1)),he.$$click=()=>s($()),ie(me=>{var fe=f()===1,xe=f()===1,$e=f()===$(),ke=f()===$();return fe!==me.e&&(ue.disabled=me.e=fe),xe!==me.t&&(Se.disabled=me.t=xe),$e!==me.a&&(pe.disabled=me.a=$e),ke!==me.o&&(he.disabled=me.o=ke),me},{e:void 0,t:void 0,a:void 0,o:void 0}),re}})]}})),o(P,L(it,{get isOpen(){return b()},onClose:()=>m(!1),get title(){return`YAML: ${g()?.name}`},size:"xl",get children(){return L(G,{get when(){return!v.loading},get fallback(){return al()},get children(){return L(tr,{get yaml(){return v()||""},get title(){return g()?.name}})}})}}),null),o(P,L(it,{get isOpen(){return C()},onClose:()=>y(!1),get title(){return`Edit YAML: ${g()?.name}`},size:"xl",get children(){return L(G,{get when(){return!v.loading},get fallback(){return al()},get children(){var re=Pu();return o(re,L(cr,{get yaml(){return v()||""},get title(){return g()?.name},onSave:x,onCancel:()=>y(!1)})),re}})}}),null),o(P,L(lr,{get isOpen(){return n()},onClose:()=>d(!1),resourceType:"daemonset",get name(){return g()?.name||""},get namespace(){return g()?.namespace}}),null),ie(()=>q.value=e()),ie(()=>ne.value=l()),P})()};et(["click","input"]);var zu=T('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>â²</span><span>â¼'),Fu=T('<div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class=whitespace-nowrap>Schedule</th><th class=whitespace-nowrap>Suspend</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Active </div></th><th class=whitespace-nowrap>Last Schedule</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),ju=T('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:#161b22><div style=color:#8b949e>Showing <!> - <!> of <!> CronJobs</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>â Prev</button><span class="px-3 py-1"style=color:#c9d1d9>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Next â</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Last'),Uu=T("<div style=height:70vh>"),Vu=T('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>CronJobs</h1><p style=color:var(--text-secondary)>Scheduled job management</p></div><div class="flex items-center gap-3"><button class=icon-btn title="Refresh CronJobs"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Active</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--warning-color)"><span class=text-sm style=color:var(--text-secondary)>Suspended</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid #3b82f6"><span class=text-sm style=color:var(--text-secondary)>Scheduled</span><span class="text-xl font-bold"style=color:#3b82f6></span></div><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class="overflow-hidden rounded-lg"style=background:#0d1117>'),Wu=T('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading CronJobs...'),qu=T('<tr><td colspan=8 class="text-center py-8"style=color:var(--text-muted)>No CronJobs found'),Ku=T('<tr><td><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td></td><td><code class="px-2 py-1 rounded text-xs"style=background:var(--bg-tertiary)></code></td><td><span></span></td><td></td><td></td><td></td><td>'),cl=T('<div class="spinner mx-auto">');const Yu=()=>{const[e,t]=J(""),[r,i]=J("name"),[h,_]=J("asc"),[f,s]=J(1),[l,u]=J(20),[g,p]=J(null),[b,m]=J(!1),[C,y]=J(!1),[n,d]=J(!1),[a,{refetch:c}]=qe(tt,De.getCronJobs),[v]=qe(()=>(b()||C())&&g()?{name:g().name,ns:g().namespace}:null,async R=>R&&(await De.getCronJobYAML(R.name,R.ns)).yaml||""),x=async R=>{const N=g();if(N)try{await De.updateCronJob(N.name,N.namespace,R),Ve(`â CronJob ${N.name} updated successfully`,"success"),y(!1),setTimeout(()=>c(),500),setTimeout(()=>c(),2e3)}catch(w){const H=w instanceof Error?w.message:"Unknown error";throw Ve(`â Failed to update cronjob: ${H}`,"error"),w}},S=R=>{if(!R)return 0;let N=0;const w=R.match(/(\d+)d/),H=R.match(/(\d+)h/),z=R.match(/(\d+)m/);return w&&(N+=parseInt(w[1])*24*60),H&&(N+=parseInt(H[1])*60),z&&(N+=parseInt(z[1])),N},E=Ne(()=>{let R=a()||[];const N=e().toLowerCase();N&&(R=R.filter(z=>z.name.toLowerCase().includes(N)||z.namespace.toLowerCase().includes(N)));const w=r(),H=h();return R=[...R].sort((z,U)=>{let te=0;switch(w){case"name":te=z.name.localeCompare(U.name);break;case"namespace":te=z.namespace.localeCompare(U.namespace);break;case"active":te=z.active-U.active;break;case"age":te=S(z.age)-S(U.age);break}return H==="asc"?te:-te}),R}),$=Ne(()=>Math.ceil(E().length/l())),k=Ne(()=>{const R=(f()-1)*l();return E().slice(R,R+l())}),O=Ne(()=>{const R=a()||[];return{total:R.length,active:R.filter(N=>N.active>0).length,suspended:R.filter(N=>N.suspend).length,scheduled:R.filter(N=>!N.suspend&&N.active===0).length}}),B=R=>{r()===R?_(N=>N==="asc"?"desc":"asc"):(i(R),_("asc")),s(1)},D=R=>(()=>{var N=zu(),w=N.firstChild,H=w.nextSibling;return ie(z=>{var U=r()===R.field&&h()==="asc"?"var(--accent-primary)":"var(--text-muted)",te=r()===R.field&&h()==="desc"?"var(--accent-primary)":"var(--text-muted)";return U!==z.e&&ce(w,"color",z.e=U),te!==z.t&&ce(H,"color",z.t=te),z},{e:void 0,t:void 0}),N})(),I=async R=>{try{await De.triggerCronJob(R.name,R.namespace),c()}catch(N){console.error("Failed to trigger CronJob:",N)}},A=async R=>{try{await De.suspendCronJob(R.name,R.namespace,!R.suspend),c()}catch(N){console.error("Failed to toggle suspend CronJob:",N)}},P=async R=>{if(confirm(`Are you sure you want to delete CronJob "${R.name}" in namespace "${R.namespace}"?`))try{await De.deleteCronJob(R.name,R.namespace),Ve(`CronJob ${R.name} deleted successfully`,"success"),c()}catch(N){console.error("Failed to delete CronJob:",N),Ve(`Failed to delete CronJob: ${N instanceof Error?N.message:"Unknown error"}`,"error")}};return(()=>{var R=Vu(),N=R.firstChild,w=N.firstChild,H=w.firstChild;H.nextSibling;var z=w.nextSibling,U=z.firstChild,te=N.nextSibling,F=te.firstChild,W=F.firstChild,V=W.nextSibling,de=F.nextSibling,M=de.firstChild,j=M.nextSibling,K=de.nextSibling,Z=K.firstChild,se=Z.nextSibling,ee=K.nextSibling,ae=ee.firstChild,X=ae.nextSibling,q=ee.nextSibling,ne=q.nextSibling,Y=ne.nextSibling,re=te.nextSibling;return U.$$click=Q=>{const ve=Q.currentTarget;ve.classList.add("refreshing"),setTimeout(()=>ve.classList.remove("refreshing"),500),c()},o(V,()=>O().total),o(j,()=>O().active),o(se,()=>O().suspended),o(X,()=>O().scheduled),ne.$$input=Q=>{t(Q.currentTarget.value),s(1)},Y.addEventListener("change",Q=>{u(parseInt(Q.currentTarget.value)),s(1)}),o(re,L(G,{get when(){return!a.loading},get fallback(){return(()=>{var Q=Wu(),ve=Q.firstChild;return ve.nextSibling,Q})()},get children(){return[(()=>{var Q=Fu(),ve=Q.firstChild,Ae=ve.firstChild,Ce=Ae.firstChild,we=Ce.firstChild,_e=we.firstChild;_e.firstChild;var ge=we.nextSibling,le=ge.firstChild;le.firstChild;var ue=ge.nextSibling,Se=ue.nextSibling,be=Se.nextSibling,oe=be.firstChild;oe.firstChild;var ye=be.nextSibling,pe=ye.nextSibling,he=pe.firstChild;he.firstChild;var me=Ae.nextSibling;return we.$$click=()=>B("name"),o(_e,L(D,{field:"name"}),null),ge.$$click=()=>B("namespace"),o(le,L(D,{field:"namespace"}),null),be.$$click=()=>B("active"),o(oe,L(D,{field:"active"}),null),pe.$$click=()=>B("age"),o(he,L(D,{field:"age"}),null),o(me,L(He,{get each(){return k()},get fallback(){return(()=>{var fe=qu();return fe.firstChild,fe})()},children:fe=>(()=>{var xe=Ku(),$e=xe.firstChild,ke=$e.firstChild,Be=$e.nextSibling,Pe=Be.nextSibling,Le=Pe.firstChild,Oe=Pe.nextSibling,Fe=Oe.firstChild,je=Oe.nextSibling,Ke=je.nextSibling,Te=Ke.nextSibling,Ge=Te.nextSibling;return ke.$$click=()=>{p(fe),d(!0)},o(ke,(()=>{var Ie=Re(()=>fe.name.length>40);return()=>Ie()?fe.name.slice(0,37)+"...":fe.name})()),o(Be,()=>fe.namespace),o(Le,()=>fe.schedule),o(Fe,()=>fe.suspend?"Yes":"No"),o(je,()=>fe.active),o(Ke,()=>fe.lastSchedule||"Never"),o(Te,()=>fe.age),o(Ge,L(Dt,{get actions(){return[{label:"Trigger",icon:"restart",onClick:()=>I(fe)},{label:fe.suspend?"Resume":"Suspend",icon:"restart",onClick:()=>A(fe)},{label:"View YAML",icon:"yaml",onClick:()=>{p(fe),m(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{p(fe),y(!0)}},{label:"Delete",icon:"delete",onClick:()=>P(fe),variant:"danger",divider:!0}]}})),ie(()=>ze(Fe,`badge ${fe.suspend?"badge-warning":"badge-success"}`)),xe})()})),Q})(),L(G,{get when(){return $()>1},get children(){var Q=ju(),ve=Q.firstChild,Ae=ve.firstChild,Ce=Ae.nextSibling,we=Ce.nextSibling,_e=we.nextSibling,ge=_e.nextSibling,le=ge.nextSibling;le.nextSibling;var ue=ve.nextSibling,Se=ue.firstChild,be=Se.nextSibling,oe=be.nextSibling,ye=oe.firstChild,pe=ye.nextSibling;pe.nextSibling;var he=oe.nextSibling,me=he.nextSibling;return o(ve,()=>(f()-1)*l()+1,Ce),o(ve,()=>Math.min(f()*l(),E().length),_e),o(ve,()=>E().length,le),Se.$$click=()=>s(1),be.$$click=()=>s(fe=>Math.max(1,fe-1)),o(oe,f,pe),o(oe,$,null),he.$$click=()=>s(fe=>Math.min($(),fe+1)),me.$$click=()=>s($()),ie(fe=>{var xe=f()===1,$e=f()===1,ke=f()===$(),Be=f()===$();return xe!==fe.e&&(Se.disabled=fe.e=xe),$e!==fe.t&&(be.disabled=fe.t=$e),ke!==fe.a&&(he.disabled=fe.a=ke),Be!==fe.o&&(me.disabled=fe.o=Be),fe},{e:void 0,t:void 0,a:void 0,o:void 0}),Q}})]}})),o(R,L(it,{get isOpen(){return b()},onClose:()=>m(!1),get title(){return`YAML: ${g()?.name}`},size:"xl",get children(){return L(G,{get when(){return!v.loading},get fallback(){return cl()},get children(){return L(tr,{get yaml(){return v()||""},get title(){return g()?.name}})}})}}),null),o(R,L(it,{get isOpen(){return C()},onClose:()=>y(!1),get title(){return`Edit YAML: ${g()?.name}`},size:"xl",get children(){return L(G,{get when(){return!v.loading},get fallback(){return cl()},get children(){var Q=Uu();return o(Q,L(cr,{get yaml(){return v()||""},get title(){return g()?.name},onSave:x,onCancel:()=>y(!1)})),Q}})}}),null),o(R,L(lr,{get isOpen(){return n()},onClose:()=>d(!1),resourceType:"cronjob",get name(){return g()?.name||""},get namespace(){return g()?.namespace}}),null),ie(()=>ne.value=e()),ie(()=>Y.value=l()),R})()};et(["click","input"]);var Gu=T('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>â²</span><span>â¼'),Ju=T('<div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class=whitespace-nowrap>Completions</th><th class=whitespace-nowrap>Duration</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Status </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),Xu=T('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:#161b22><div style=color:#8b949e>Showing <!> - <!> of <!> jobs</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>â Prev</button><span class="px-3 py-1"style=color:#c9d1d9>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Next â</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Last'),Zu=T("<div style=height:70vh>"),Qu=T('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Jobs</h1><p style=color:var(--text-secondary)>One-time task execution</p></div><div class="flex items-center gap-3"><button class=icon-btn title="Refresh Jobs"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Complete</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid #3b82f6"><span class=text-sm style=color:var(--text-secondary)>Running</span><span class="text-xl font-bold"style=color:#3b82f6></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--error-color)"><span class=text-sm style=color:var(--text-secondary)>Failed</span><span class="text-xl font-bold"style=color:var(--error-color)></span></div><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class="overflow-hidden rounded-lg"style=background:#0d1117>'),ef=T('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading jobs...'),tf=T('<tr><td colspan=7 class="text-center py-8"style=color:var(--text-muted)>No jobs found'),rf=T('<tr><td><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td></td><td></td><td></td><td></td><td><span></span></td><td>'),dl=T('<div class="spinner mx-auto">');const sf=()=>{const[e,t]=J(""),[r,i]=J("name"),[h,_]=J("asc"),[f,s]=J(1),[l,u]=J(20),[g,p]=J(null),[b,m]=J(!1),[C,y]=J(!1),[n,d]=J(!1),[a,{refetch:c}]=qe(tt,De.getJobs),[v]=qe(()=>(b()||C())&&g()?{name:g().name,ns:g().namespace}:null,async A=>A&&(await De.getJobYAML(A.name,A.ns)).yaml||""),x=async A=>{const P=g();if(P)try{await De.updateJob(P.name,P.namespace,A),Ve(`â Job ${P.name} updated successfully`,"success"),y(!1),setTimeout(()=>c(),500),setTimeout(()=>c(),2e3)}catch(R){const N=R instanceof Error?R.message:"Unknown error";throw Ve(`â Failed to update job: ${N}`,"error"),R}},S=A=>{if(!A)return 0;let P=0;const R=A.match(/(\d+)d/),N=A.match(/(\d+)h/),w=A.match(/(\d+)m/);return R&&(P+=parseInt(R[1])*24*60),N&&(P+=parseInt(N[1])*60),w&&(P+=parseInt(w[1])),P},E=Ne(()=>{let A=a()||[];const P=e().toLowerCase();P&&(A=A.filter(w=>w.name.toLowerCase().includes(P)||w.namespace.toLowerCase().includes(P)));const R=r(),N=h();return A=[...A].sort((w,H)=>{let z=0;switch(R){case"name":z=w.name.localeCompare(H.name);break;case"namespace":z=w.namespace.localeCompare(H.namespace);break;case"status":z=w.status.localeCompare(H.status);break;case"age":z=S(w.age)-S(H.age);break}return N==="asc"?z:-z}),A}),$=Ne(()=>Math.ceil(E().length/l())),k=Ne(()=>{const A=(f()-1)*l();return E().slice(A,A+l())}),O=Ne(()=>{const A=a()||[];return{total:A.length,complete:A.filter(P=>P.status==="Complete").length,running:A.filter(P=>P.status==="Running"||P.status==="Active").length,failed:A.filter(P=>P.status==="Failed").length}}),B=A=>{r()===A?_(P=>P==="asc"?"desc":"asc"):(i(A),_("asc")),s(1)},D=A=>(()=>{var P=Gu(),R=P.firstChild,N=R.nextSibling;return ie(w=>{var H=r()===A.field&&h()==="asc"?"var(--accent-primary)":"var(--text-muted)",z=r()===A.field&&h()==="desc"?"var(--accent-primary)":"var(--text-muted)";return H!==w.e&&ce(R,"color",w.e=H),z!==w.t&&ce(N,"color",w.t=z),w},{e:void 0,t:void 0}),P})(),I=async A=>{if(confirm(`Are you sure you want to delete job "${A.name}" in namespace "${A.namespace}"?`))try{await De.deleteJob(A.name,A.namespace),Ve(`Job ${A.name} deleted successfully`,"success"),c()}catch(P){console.error("Failed to delete job:",P),Ve(`Failed to delete job: ${P instanceof Error?P.message:"Unknown error"}`,"error")}};return(()=>{var A=Qu(),P=A.firstChild,R=P.firstChild,N=R.firstChild;N.nextSibling;var w=R.nextSibling,H=w.firstChild,z=P.nextSibling,U=z.firstChild,te=U.firstChild,F=te.nextSibling,W=U.nextSibling,V=W.firstChild,de=V.nextSibling,M=W.nextSibling,j=M.firstChild,K=j.nextSibling,Z=M.nextSibling,se=Z.firstChild,ee=se.nextSibling,ae=Z.nextSibling,X=ae.nextSibling,q=X.nextSibling,ne=z.nextSibling;return H.$$click=Y=>{const re=Y.currentTarget;re.classList.add("refreshing"),setTimeout(()=>re.classList.remove("refreshing"),500),c()},o(F,()=>O().total),o(de,()=>O().complete),o(K,()=>O().running),o(ee,()=>O().failed),X.$$input=Y=>{t(Y.currentTarget.value),s(1)},q.addEventListener("change",Y=>{u(parseInt(Y.currentTarget.value)),s(1)}),o(ne,L(G,{get when(){return!a.loading},get fallback(){return(()=>{var Y=ef(),re=Y.firstChild;return re.nextSibling,Y})()},get children(){return[(()=>{var Y=Ju(),re=Y.firstChild,Q=re.firstChild,ve=Q.firstChild,Ae=ve.firstChild,Ce=Ae.firstChild;Ce.firstChild;var we=Ae.nextSibling,_e=we.firstChild;_e.firstChild;var ge=we.nextSibling,le=ge.nextSibling,ue=le.nextSibling,Se=ue.firstChild;Se.firstChild;var be=ue.nextSibling,oe=be.firstChild;oe.firstChild;var ye=Q.nextSibling;return Ae.$$click=()=>B("name"),o(Ce,L(D,{field:"name"}),null),we.$$click=()=>B("namespace"),o(_e,L(D,{field:"namespace"}),null),ue.$$click=()=>B("age"),o(Se,L(D,{field:"age"}),null),be.$$click=()=>B("status"),o(oe,L(D,{field:"status"}),null),o(ye,L(He,{get each(){return k()},get fallback(){return(()=>{var pe=tf();return pe.firstChild,pe})()},children:pe=>(()=>{var he=rf(),me=he.firstChild,fe=me.firstChild,xe=me.nextSibling,$e=xe.nextSibling,ke=$e.nextSibling,Be=ke.nextSibling,Pe=Be.nextSibling,Le=Pe.firstChild,Oe=Pe.nextSibling;return fe.$$click=()=>{p(pe),d(!0)},o(fe,(()=>{var Fe=Re(()=>pe.name.length>40);return()=>Fe()?pe.name.slice(0,37)+"...":pe.name})()),o(xe,()=>pe.namespace),o($e,()=>pe.completions),o(ke,()=>pe.duration||"-"),o(Be,()=>pe.age),o(Le,()=>pe.status),o(Oe,L(Dt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{p(pe),m(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{p(pe),y(!0)}},{label:"Delete",icon:"delete",onClick:()=>I(pe),variant:"danger",divider:!0}]})),ie(()=>ze(Le,`badge ${pe.status==="Complete"?"badge-success":pe.status==="Failed"?"badge-error":"badge-warning"}`)),he})()})),Y})(),L(G,{get when(){return $()>1},get children(){var Y=Xu(),re=Y.firstChild,Q=re.firstChild,ve=Q.nextSibling,Ae=ve.nextSibling,Ce=Ae.nextSibling,we=Ce.nextSibling,_e=we.nextSibling;_e.nextSibling;var ge=re.nextSibling,le=ge.firstChild,ue=le.nextSibling,Se=ue.nextSibling,be=Se.firstChild,oe=be.nextSibling;oe.nextSibling;var ye=Se.nextSibling,pe=ye.nextSibling;return o(re,()=>(f()-1)*l()+1,ve),o(re,()=>Math.min(f()*l(),E().length),Ce),o(re,()=>E().length,_e),le.$$click=()=>s(1),ue.$$click=()=>s(he=>Math.max(1,he-1)),o(Se,f,oe),o(Se,$,null),ye.$$click=()=>s(he=>Math.min($(),he+1)),pe.$$click=()=>s($()),ie(he=>{var me=f()===1,fe=f()===1,xe=f()===$(),$e=f()===$();return me!==he.e&&(le.disabled=he.e=me),fe!==he.t&&(ue.disabled=he.t=fe),xe!==he.a&&(ye.disabled=he.a=xe),$e!==he.o&&(pe.disabled=he.o=$e),he},{e:void 0,t:void 0,a:void 0,o:void 0}),Y}})]}})),o(A,L(it,{get isOpen(){return b()},onClose:()=>m(!1),get title(){return`YAML: ${g()?.name}`},size:"xl",get children(){return L(G,{get when(){return!v.loading},get fallback(){return dl()},get children(){return L(tr,{get yaml(){return v()||""},get title(){return g()?.name}})}})}}),null),o(A,L(it,{get isOpen(){return C()},onClose:()=>y(!1),get title(){return`Edit YAML: ${g()?.name}`},size:"xl",get children(){return L(G,{get when(){return!v.loading},get fallback(){return dl()},get children(){var Y=Zu();return o(Y,L(cr,{get yaml(){return v()||""},get title(){return g()?.name},onSave:x,onCancel:()=>y(!1)})),Y}})}}),null),o(A,L(lr,{get isOpen(){return n()},onClose:()=>d(!1),resourceType:"job",get name(){return g()?.name||""},get namespace(){return g()?.namespace}}),null),ie(()=>X.value=e()),ie(()=>q.value=l()),A})()};et(["click","input"]);var nf=T('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>â²</span><span>â¼'),lf=T('<div class="card p-4"><h3 class="font-semibold mb-3 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>Active Port Forwards</h3><div class="flex flex-wrap gap-2">'),of=T('<div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Type </div></th><th class=whitespace-nowrap>Cluster IP</th><th class=whitespace-nowrap>External IP</th><th class=whitespace-nowrap>Ports</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),af=T('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:#161b22><div style=color:#8b949e>Showing <!> - <!> of <!> services</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>â Prev</button><span class="px-3 py-1"style=color:#c9d1d9>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Next â</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Last'),cf=T("<div style=height:70vh>"),df=T('<div class=space-y-4><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Local Port</label><input type=number min=1024 max=65535 class="w-full px-4 py-2 rounded-lg"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Remote Port</label><input type=number min=1 max=65535 class="w-full px-4 py-2 rounded-lg"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div class="p-3 rounded-lg text-sm"style=background:var(--bg-tertiary);color:var(--text-muted)>This will forward <code>localhost:</code> to <code>:</code></div><div class="flex gap-2"><button class="btn-secondary flex-1">Cancel</button><button class="btn-primary flex-1">Start'),hf=T('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Services</h1><p style=color:var(--text-secondary)>Network services and load balancers</p></div><div class="flex items-center gap-3"><button class=icon-btn title="Refresh Services"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2 transition-all"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2 transition-all"><span class=text-sm style=color:var(--text-secondary)>ClusterIP</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2 transition-all"><span class=text-sm style=color:var(--text-secondary)>NodePort</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2 transition-all"><span class=text-sm style=color:var(--text-secondary)>LoadBalancer</span><span class="text-xl font-bold"style=color:#3b82f6></span></div><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class="overflow-hidden rounded-lg"style=background:#0d1117>'),uf=T('<div class="flex items-center gap-2 px-3 py-2 rounded-lg"style=background:var(--bg-tertiary)><span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span><span style=color:var(--text-primary)></span><span style=color:var(--text-muted)>localhost:<!> â </span><a target=_blank class="text-xs px-2 py-1 rounded"style=background:var(--accent-primary);color:white>Open</a><button class="text-red-400 hover:text-red-300"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12">'),ff=T('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading services...'),gf=T('<tr><td colspan=8 class="text-center py-8"style=color:var(--text-muted)>No services found'),pf=T('<tr><td><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td></td><td><span></span></td><td class="font-mono text-sm"></td><td class="font-mono text-sm"></td><td class=text-sm></td><td></td><td>'),hl=T('<div class="spinner mx-auto">');const vf=()=>{const[e,t]=J(""),[r,i]=J("all"),[h,_]=J("name"),[f,s]=J("asc"),[l,u]=J(1),[g,p]=J(20),[b,m]=J(null),[C,y]=J(!1),[n,d]=J(!1),[a,c]=J(!1),[v,x]=J(!1),[S,E]=J(8080),[$,k]=J(80),[O,{refetch:B}]=qe(tt,De.getServices),[D,{refetch:I}]=qe(De.listPortForwards),[A]=qe(()=>(C()||n())&&b()?{name:b().name,ns:b().namespace}:null,async M=>M&&(await De.getServiceYAML(M.name,M.ns)).yaml||""),P=async M=>{const j=b();if(j)try{await De.updateService(j.name,j.namespace,M),Ve(`â Service ${j.name} updated successfully`,"success"),d(!1),setTimeout(()=>B(),500),setTimeout(()=>B(),2e3)}catch(K){const Z=K instanceof Error?K.message:"Unknown error";throw Ve(`â Failed to update service: ${Z}`,"error"),K}},R=M=>{if(!M)return 0;let j=0;const K=M.match(/(\d+)d/),Z=M.match(/(\d+)h/),se=M.match(/(\d+)m/);return K&&(j+=parseInt(K[1])*24*60),Z&&(j+=parseInt(Z[1])*60),se&&(j+=parseInt(se[1])),j},N=Ne(()=>{let M=O()||[];const j=e().toLowerCase(),K=r();K!=="all"&&(M=M.filter(ee=>ee.type===K)),j&&(M=M.filter(ee=>ee.name.toLowerCase().includes(j)||ee.namespace.toLowerCase().includes(j)||ee.type.toLowerCase().includes(j)));const Z=h(),se=f();return M=[...M].sort((ee,ae)=>{let X=0;switch(Z){case"name":X=ee.name.localeCompare(ae.name);break;case"namespace":X=ee.namespace.localeCompare(ae.namespace);break;case"type":X=ee.type.localeCompare(ae.type);break;case"age":X=R(ee.age)-R(ae.age);break}return se==="asc"?X:-X}),M}),w=Ne(()=>Math.ceil(N().length/g())),H=Ne(()=>{const M=(l()-1)*g();return N().slice(M,M+g())}),z=Ne(()=>{const M=O()||[];return{total:M.length,clusterIP:M.filter(j=>j.type==="ClusterIP").length,nodePort:M.filter(j=>j.type==="NodePort").length,loadBalancer:M.filter(j=>j.type==="LoadBalancer").length}}),U=M=>{h()===M?s(j=>j==="asc"?"desc":"asc"):(_(M),s("asc")),u(1)},te=M=>(()=>{var j=nf(),K=j.firstChild,Z=K.nextSibling;return ie(se=>{var ee=h()===M.field&&f()==="asc"?"var(--accent-primary)":"var(--text-muted)",ae=h()===M.field&&f()==="desc"?"var(--accent-primary)":"var(--text-muted)";return ee!==se.e&&ce(K,"color",se.e=ee),ae!==se.t&&ce(Z,"color",se.t=ae),se},{e:void 0,t:void 0}),j})(),F=async()=>{const M=b();if(M)try{await De.startPortForward("service",M.name,M.namespace,S(),$()),x(!1),I()}catch(j){console.error("Failed to start port forward:",j)}},W=async M=>{try{await De.stopPortForward(M.id),I()}catch(j){console.error("Failed to stop port forward:",j)}},V=M=>{m(M);const j=M.ports?.match(/(\d+)/);j&&k(parseInt(j[1])),x(!0)},de=async M=>{if(confirm(`Are you sure you want to delete service "${M.name}" in namespace "${M.namespace}"?`))try{await De.deleteService(M.name,M.namespace),Ve(`Service ${M.name} deleted successfully`,"success"),B()}catch(j){console.error("Failed to delete service:",j),Ve(`Failed to delete service: ${j instanceof Error?j.message:"Unknown error"}`,"error")}};return(()=>{var M=hf(),j=M.firstChild,K=j.firstChild,Z=K.firstChild;Z.nextSibling;var se=K.nextSibling,ee=se.firstChild,ae=j.nextSibling,X=ae.firstChild,q=X.firstChild,ne=q.nextSibling,Y=X.nextSibling,re=Y.firstChild,Q=re.nextSibling,ve=Y.nextSibling,Ae=ve.firstChild,Ce=Ae.nextSibling,we=ve.nextSibling,_e=we.firstChild,ge=_e.nextSibling,le=we.nextSibling,ue=le.nextSibling,Se=ue.nextSibling,be=ae.nextSibling;return ee.$$click=oe=>{const ye=oe.currentTarget;ye.classList.add("refreshing"),setTimeout(()=>ye.classList.remove("refreshing"),500),B()},X.$$click=()=>{i("all"),u(1)},o(ne,()=>z().total),Y.$$click=()=>{i("ClusterIP"),u(1)},o(Q,()=>z().clusterIP),ve.$$click=()=>{i("NodePort"),u(1)},o(Ce,()=>z().nodePort),we.$$click=()=>{i("LoadBalancer"),u(1)},o(ge,()=>z().loadBalancer),ue.$$input=oe=>{t(oe.currentTarget.value),u(1)},Se.addEventListener("change",oe=>{p(parseInt(oe.currentTarget.value)),u(1)}),o(M,L(G,{get when(){return(D()||[]).length>0},get children(){var oe=lf(),ye=oe.firstChild,pe=ye.nextSibling;return o(pe,L(He,{get each(){return D()||[]},children:he=>(()=>{var me=uf(),fe=me.firstChild,xe=fe.nextSibling,$e=xe.nextSibling,ke=$e.firstChild,Be=ke.nextSibling;Be.nextSibling;var Pe=$e.nextSibling,Le=Pe.nextSibling;return o(xe,()=>he.name),o($e,()=>he.localPort,Be),o($e,()=>he.remotePort,null),Le.$$click=()=>W(he),ie(()=>Xe(Pe,"href",`http://localhost:${he.localPort}`)),me})()})),oe}}),be),o(be,L(G,{get when(){return!O.loading},get fallback(){return(()=>{var oe=ff(),ye=oe.firstChild;return ye.nextSibling,oe})()},get children(){return[(()=>{var oe=of(),ye=oe.firstChild,pe=ye.firstChild,he=pe.firstChild,me=he.firstChild,fe=me.firstChild;fe.firstChild;var xe=me.nextSibling,$e=xe.firstChild;$e.firstChild;var ke=xe.nextSibling,Be=ke.firstChild;Be.firstChild;var Pe=ke.nextSibling,Le=Pe.nextSibling,Oe=Le.nextSibling,Fe=Oe.nextSibling,je=Fe.firstChild;je.firstChild;var Ke=pe.nextSibling;return me.$$click=()=>U("name"),o(fe,L(te,{field:"name"}),null),xe.$$click=()=>U("namespace"),o($e,L(te,{field:"namespace"}),null),ke.$$click=()=>U("type"),o(Be,L(te,{field:"type"}),null),Fe.$$click=()=>U("age"),o(je,L(te,{field:"age"}),null),o(Ke,L(He,{get each(){return H()},get fallback(){return(()=>{var Te=gf();return Te.firstChild,Te})()},children:Te=>(()=>{var Ge=pf(),Ie=Ge.firstChild,We=Ie.firstChild,Ye=Ie.nextSibling,Ze=Ye.nextSibling,rt=Ze.firstChild,ot=Ze.nextSibling,Ct=ot.nextSibling,Ht=Ct.nextSibling,rr=Ht.nextSibling,hr=rr.nextSibling;return We.$$click=()=>{m(Te),c(!0)},o(We,(()=>{var Ee=Re(()=>Te.name.length>40);return()=>Ee()?Te.name.slice(0,37)+"...":Te.name})()),o(Ye,()=>Te.namespace),o(rt,()=>Te.type),o(ot,()=>Te.clusterIP),o(Ct,()=>Te.externalIP||"-"),o(Ht,()=>Te.ports),o(rr,()=>Te.age),o(hr,L(Dt,{actions:[{label:"Port Forward",icon:"portforward",onClick:()=>V(Te)},{label:"View YAML",icon:"yaml",onClick:()=>{m(Te),y(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{m(Te),d(!0)}},{label:"Delete",icon:"delete",onClick:()=>de(Te),variant:"danger",divider:!0}]})),ie(()=>ze(rt,`badge ${Te.type==="LoadBalancer"?"badge-info":Te.type==="NodePort"?"badge-warning":"badge-success"}`)),Ge})()})),oe})(),L(G,{get when(){return w()>1},get children(){var oe=af(),ye=oe.firstChild,pe=ye.firstChild,he=pe.nextSibling,me=he.nextSibling,fe=me.nextSibling,xe=fe.nextSibling,$e=xe.nextSibling;$e.nextSibling;var ke=ye.nextSibling,Be=ke.firstChild,Pe=Be.nextSibling,Le=Pe.nextSibling,Oe=Le.firstChild,Fe=Oe.nextSibling;Fe.nextSibling;var je=Le.nextSibling,Ke=je.nextSibling;return o(ye,()=>(l()-1)*g()+1,he),o(ye,()=>Math.min(l()*g(),N().length),fe),o(ye,()=>N().length,$e),Be.$$click=()=>u(1),Pe.$$click=()=>u(Te=>Math.max(1,Te-1)),o(Le,l,Fe),o(Le,w,null),je.$$click=()=>u(Te=>Math.min(w(),Te+1)),Ke.$$click=()=>u(w()),ie(Te=>{var Ge=l()===1,Ie=l()===1,We=l()===w(),Ye=l()===w();return Ge!==Te.e&&(Be.disabled=Te.e=Ge),Ie!==Te.t&&(Pe.disabled=Te.t=Ie),We!==Te.a&&(je.disabled=Te.a=We),Ye!==Te.o&&(Ke.disabled=Te.o=Ye),Te},{e:void 0,t:void 0,a:void 0,o:void 0}),oe}})]}})),o(M,L(it,{get isOpen(){return C()},onClose:()=>y(!1),get title(){return`YAML: ${b()?.name}`},size:"xl",get children(){return L(G,{get when(){return!A.loading},get fallback(){return hl()},get children(){return L(tr,{get yaml(){return A()||""},get title(){return b()?.name}})}})}}),null),o(M,L(it,{get isOpen(){return n()},onClose:()=>d(!1),get title(){return`Edit YAML: ${b()?.name}`},size:"xl",get children(){return L(G,{get when(){return!A.loading},get fallback(){return hl()},get children(){var oe=cf();return o(oe,L(cr,{get yaml(){return A()||""},get title(){return b()?.name},onSave:P,onCancel:()=>d(!1)})),oe}})}}),null),o(M,L(lr,{get isOpen(){return a()},onClose:()=>c(!1),resourceType:"service",get name(){return b()?.name||""},get namespace(){return b()?.namespace}}),null),o(M,L(it,{get isOpen(){return v()},onClose:()=>x(!1),get title(){return`Port Forward: ${b()?.name}`},size:"sm",get children(){var oe=df(),ye=oe.firstChild,pe=ye.firstChild,he=pe.nextSibling,me=ye.nextSibling,fe=me.firstChild,xe=fe.nextSibling,$e=me.nextSibling,ke=$e.firstChild,Be=ke.nextSibling;Be.firstChild;var Pe=Be.nextSibling,Le=Pe.nextSibling,Oe=Le.firstChild,Fe=$e.nextSibling,je=Fe.firstChild,Ke=je.nextSibling;return he.$$input=Te=>E(parseInt(Te.currentTarget.value)||8080),xe.$$input=Te=>k(parseInt(Te.currentTarget.value)||80),o(Be,S,null),o(Le,()=>b()?.name,Oe),o(Le,$,null),je.$$click=()=>x(!1),Ke.$$click=F,ie(()=>he.value=S()),ie(()=>xe.value=$()),oe}}),null),ie(oe=>{var ye=r()==="all"?"3px solid var(--accent-primary)":"3px solid transparent",pe=r()==="all"?1:.7,he=r()==="ClusterIP"?"3px solid var(--success-color)":"3px solid transparent",me=r()==="ClusterIP"?1:.7,fe=r()==="NodePort"?"3px solid var(--warning-color)":"3px solid transparent",xe=r()==="NodePort"?1:.7,$e=r()==="LoadBalancer"?"3px solid #3b82f6":"3px solid transparent",ke=r()==="LoadBalancer"?1:.7;return ye!==oe.e&&ce(X,"border-left",oe.e=ye),pe!==oe.t&&ce(X,"opacity",oe.t=pe),he!==oe.a&&ce(Y,"border-left",oe.a=he),me!==oe.o&&ce(Y,"opacity",oe.o=me),fe!==oe.i&&ce(ve,"border-left",oe.i=fe),xe!==oe.n&&ce(ve,"opacity",oe.n=xe),$e!==oe.s&&ce(we,"border-left",oe.s=$e),ke!==oe.h&&ce(we,"opacity",oe.h=ke),oe},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),ie(()=>ue.value=e()),ie(()=>Se.value=g()),M})()};et(["click","input"]);var mf=T('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>â²</span><span>â¼'),_f=T('<div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Class </div></th><th class=whitespace-nowrap>Hosts</th><th class=whitespace-nowrap>Address</th><th class=whitespace-nowrap>Ports</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),bf=T('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:#161b22><div style=color:#8b949e>Showing <!> - <!> of <!> ingresses</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>â Prev</button><span class="px-3 py-1"style=color:#c9d1d9>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Next â</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Last'),yf=T("<div style=height:70vh>"),xf=T('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Ingresses</h1><p style=color:var(--text-secondary)>External access to services</p></div><div class="flex items-center gap-3"><button class=icon-btn title="Refresh Ingresses"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>With Address</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--warning-color)"><span class=text-sm style=color:var(--text-secondary)>Without Address</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid #3b82f6"><span class=text-sm style=color:var(--text-secondary)>Total Hosts</span><span class="text-xl font-bold"style=color:#3b82f6></span></div><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class="overflow-hidden rounded-lg"style=background:#0d1117>'),$f=T('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading ingresses...'),wf=T('<tr><td colspan=8 class="text-center py-8"style=color:var(--text-muted)>No ingresses found'),Sf=T('<tr><td><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td></td><td></td><td><div class="flex flex-wrap gap-1"></div></td><td></td><td></td><td></td><td>'),Cf=T('<a target=_blank class="text-xs px-2 py-1 rounded hover:opacity-80"style=background:var(--bg-tertiary);color:var(--accent-primary)>'),ul=T('<div class="spinner mx-auto">');const kf=()=>{const[e,t]=J(""),[r,i]=J("name"),[h,_]=J("asc"),[f,s]=J(1),[l,u]=J(20),[g,p]=J(null),[b,m]=J(!1),[C,y]=J(!1),[n,d]=J(!1),[a,{refetch:c}]=qe(tt,De.getIngresses),[v]=qe(()=>(b()||C())&&g()?{name:g().name,ns:g().namespace}:null,async A=>A&&(await De.getIngressYAML(A.name,A.ns)).yaml||""),x=async A=>{const P=g();if(P)try{await De.updateIngress(P.name,P.namespace,A),Ve(`â Ingress ${P.name} updated successfully`,"success"),y(!1),setTimeout(()=>c(),500),setTimeout(()=>c(),2e3)}catch(R){const N=R instanceof Error?R.message:"Unknown error";throw Ve(`â Failed to update ingress: ${N}`,"error"),R}},S=A=>{if(!A)return 0;let P=0;const R=A.match(/(\d+)d/),N=A.match(/(\d+)h/),w=A.match(/(\d+)m/);return R&&(P+=parseInt(R[1])*24*60),N&&(P+=parseInt(N[1])*60),w&&(P+=parseInt(w[1])),P},E=Ne(()=>{let A=a()||[];const P=e().toLowerCase();P&&(A=A.filter(w=>w.name.toLowerCase().includes(P)||w.namespace.toLowerCase().includes(P)||w.hosts?.some(H=>H.toLowerCase().includes(P))));const R=r(),N=h();return A=[...A].sort((w,H)=>{let z=0;switch(R){case"name":z=w.name.localeCompare(H.name);break;case"namespace":z=w.namespace.localeCompare(H.namespace);break;case"class":z=(w.class||"").localeCompare(H.class||"");break;case"age":z=S(w.age)-S(H.age);break}return N==="asc"?z:-z}),A}),$=Ne(()=>Math.ceil(E().length/l())),k=Ne(()=>{const A=(f()-1)*l();return E().slice(A,A+l())}),O=Ne(()=>{const A=a()||[];return{total:A.length,withAddress:A.filter(P=>P.address&&P.address!=="-").length,withoutAddress:A.filter(P=>!P.address||P.address==="-").length,totalHosts:A.reduce((P,R)=>P+(R.hosts?.length||0),0)}}),B=A=>{r()===A?_(P=>P==="asc"?"desc":"asc"):(i(A),_("asc")),s(1)},D=A=>(()=>{var P=mf(),R=P.firstChild,N=R.nextSibling;return ie(w=>{var H=r()===A.field&&h()==="asc"?"var(--accent-primary)":"var(--text-muted)",z=r()===A.field&&h()==="desc"?"var(--accent-primary)":"var(--text-muted)";return H!==w.e&&ce(R,"color",w.e=H),z!==w.t&&ce(N,"color",w.t=z),w},{e:void 0,t:void 0}),P})(),I=async A=>{if(confirm(`Are you sure you want to delete ingress "${A.name}" in namespace "${A.namespace}"?`))try{await De.deleteIngress(A.name,A.namespace),Ve(`Ingress ${A.name} deleted successfully`,"success"),c()}catch(P){console.error("Failed to delete ingress:",P),Ve(`Failed to delete ingress: ${P instanceof Error?P.message:"Unknown error"}`,"error")}};return(()=>{var A=xf(),P=A.firstChild,R=P.firstChild,N=R.firstChild;N.nextSibling;var w=R.nextSibling,H=w.firstChild,z=P.nextSibling,U=z.firstChild,te=U.firstChild,F=te.nextSibling,W=U.nextSibling,V=W.firstChild,de=V.nextSibling,M=W.nextSibling,j=M.firstChild,K=j.nextSibling,Z=M.nextSibling,se=Z.firstChild,ee=se.nextSibling,ae=Z.nextSibling,X=ae.nextSibling,q=X.nextSibling,ne=z.nextSibling;return H.$$click=Y=>{const re=Y.currentTarget;re.classList.add("refreshing"),setTimeout(()=>re.classList.remove("refreshing"),500),c()},o(F,()=>O().total),o(de,()=>O().withAddress),o(K,()=>O().withoutAddress),o(ee,()=>O().totalHosts),X.$$input=Y=>{t(Y.currentTarget.value),s(1)},q.addEventListener("change",Y=>{u(parseInt(Y.currentTarget.value)),s(1)}),o(ne,L(G,{get when(){return!a.loading},get fallback(){return(()=>{var Y=$f(),re=Y.firstChild;return re.nextSibling,Y})()},get children(){return[(()=>{var Y=_f(),re=Y.firstChild,Q=re.firstChild,ve=Q.firstChild,Ae=ve.firstChild,Ce=Ae.firstChild;Ce.firstChild;var we=Ae.nextSibling,_e=we.firstChild;_e.firstChild;var ge=we.nextSibling,le=ge.firstChild;le.firstChild;var ue=ge.nextSibling,Se=ue.nextSibling,be=Se.nextSibling,oe=be.nextSibling,ye=oe.firstChild;ye.firstChild;var pe=Q.nextSibling;return Ae.$$click=()=>B("name"),o(Ce,L(D,{field:"name"}),null),we.$$click=()=>B("namespace"),o(_e,L(D,{field:"namespace"}),null),ge.$$click=()=>B("class"),o(le,L(D,{field:"class"}),null),oe.$$click=()=>B("age"),o(ye,L(D,{field:"age"}),null),o(pe,L(He,{get each(){return k()},get fallback(){return(()=>{var he=wf();return he.firstChild,he})()},children:he=>(()=>{var me=Sf(),fe=me.firstChild,xe=fe.firstChild,$e=fe.nextSibling,ke=$e.nextSibling,Be=ke.nextSibling,Pe=Be.firstChild,Le=Be.nextSibling,Oe=Le.nextSibling,Fe=Oe.nextSibling,je=Fe.nextSibling;return xe.$$click=()=>{p(he),d(!0)},o(xe,(()=>{var Ke=Re(()=>he.name.length>40);return()=>Ke()?he.name.slice(0,37)+"...":he.name})()),o($e,()=>he.namespace),o(ke,()=>he.class||"-"),o(Pe,L(He,{get each(){return he.hosts||[]},children:Ke=>(()=>{var Te=Cf();return Xe(Te,"href",`https://${Ke}`),o(Te,Ke),Te})()})),o(Le,()=>he.address||"-"),o(Oe,()=>he.ports),o(Fe,()=>he.age),o(je,L(Dt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{p(he),m(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{p(he),y(!0)}},{label:"Delete",icon:"delete",onClick:()=>I(he),variant:"danger",divider:!0}]})),me})()})),Y})(),L(G,{get when(){return $()>1},get children(){var Y=bf(),re=Y.firstChild,Q=re.firstChild,ve=Q.nextSibling,Ae=ve.nextSibling,Ce=Ae.nextSibling,we=Ce.nextSibling,_e=we.nextSibling;_e.nextSibling;var ge=re.nextSibling,le=ge.firstChild,ue=le.nextSibling,Se=ue.nextSibling,be=Se.firstChild,oe=be.nextSibling;oe.nextSibling;var ye=Se.nextSibling,pe=ye.nextSibling;return o(re,()=>(f()-1)*l()+1,ve),o(re,()=>Math.min(f()*l(),E().length),Ce),o(re,()=>E().length,_e),le.$$click=()=>s(1),ue.$$click=()=>s(he=>Math.max(1,he-1)),o(Se,f,oe),o(Se,$,null),ye.$$click=()=>s(he=>Math.min($(),he+1)),pe.$$click=()=>s($()),ie(he=>{var me=f()===1,fe=f()===1,xe=f()===$(),$e=f()===$();return me!==he.e&&(le.disabled=he.e=me),fe!==he.t&&(ue.disabled=he.t=fe),xe!==he.a&&(ye.disabled=he.a=xe),$e!==he.o&&(pe.disabled=he.o=$e),he},{e:void 0,t:void 0,a:void 0,o:void 0}),Y}})]}})),o(A,L(it,{get isOpen(){return b()},onClose:()=>m(!1),get title(){return`YAML: ${g()?.name}`},size:"xl",get children(){return L(G,{get when(){return!v.loading},get fallback(){return ul()},get children(){return L(tr,{get yaml(){return v()||""},get title(){return g()?.name}})}})}}),null),o(A,L(it,{get isOpen(){return C()},onClose:()=>y(!1),get title(){return`Edit YAML: ${g()?.name}`},size:"xl",get children(){return L(G,{get when(){return!v.loading},get fallback(){return ul()},get children(){var Y=yf();return o(Y,L(cr,{get yaml(){return v()||""},get title(){return g()?.name},onSave:x,onCancel:()=>y(!1)})),Y}})}}),null),o(A,L(lr,{get isOpen(){return n()},onClose:()=>d(!1),resourceType:"ingress",get name(){return g()?.name||""},get namespace(){return g()?.namespace}}),null),ie(()=>X.value=e()),ie(()=>q.value=l()),A})()};et(["click","input"]);var Af=T('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>â²</span><span>â¼'),Mf=T('<div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Data </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),Ef=T('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:#161b22><div style=color:#8b949e>Showing <!> - <!> of <!> ConfigMaps</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>â Prev</button><span class="px-3 py-1"style=color:#c9d1d9>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Next â</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Last'),Lf=T('<div class=space-y-4><div class="grid grid-cols-2 gap-4"><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Name</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Namespace</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Data Keys</div><div class=font-semibold style=color:var(--accent-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Age</div><div style=color:var(--text-primary)></div></div></div><div class="flex gap-2 pt-4"><button class="btn-primary flex-1">View YAML</button><button class="btn-secondary flex-1">Describe'),Rf=T('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>ConfigMaps</h1><p style=color:var(--text-secondary)>Configuration data storage</p></div><div class="flex items-center gap-3"><button class=icon-btn title="Refresh ConfigMaps"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid #8b5cf6"><span class=text-sm style=color:var(--text-secondary)>Filtered</span><span class="text-xl font-bold"style=color:#8b5cf6></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid #22c55e"><span class=text-sm style=color:var(--text-secondary)>Namespaces</span><span class="text-xl font-bold"style=color:#22c55e></span></div><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class="overflow-hidden rounded-lg"style=background:#0d1117>'),Df=T('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading ConfigMaps...'),Tf=T('<tr><td colspan=5 class="text-center py-8"style=color:var(--text-muted)>No ConfigMaps found'),Pf=T('<tr><td><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td></td><td><span class="badge badge-info"> keys</span></td><td></td><td>'),If=T('<div class="spinner mx-auto">');const Bf=()=>{const[e,t]=J(""),[r,i]=J("name"),[h,_]=J("asc"),[f,s]=J(1),[l,u]=J(20),[g,p]=J(null),[b,m]=J(!1),[C,y]=J(!1),[n,d]=J(!1),[a,c]=J(!1),[v,{refetch:x}]=qe(tt,De.getConfigMaps),[S]=qe(()=>(b()||C())&&g()?{name:g().name,ns:g().namespace}:null,async A=>A&&(await De.getConfigMapYAML(A.name,A.ns)).yaml||""),E=A=>{if(!A)return 0;let P=0;const R=A.match(/(\d+)d/),N=A.match(/(\d+)h/),w=A.match(/(\d+)m/);return R&&(P+=parseInt(R[1])*24*60),N&&(P+=parseInt(N[1])*60),w&&(P+=parseInt(w[1])),P},$=Ne(()=>{let A=v()||[];const P=e().toLowerCase();P&&(A=A.filter(w=>w.name.toLowerCase().includes(P)||w.namespace.toLowerCase().includes(P)));const R=r(),N=h();return A=[...A].sort((w,H)=>{let z=0;switch(R){case"name":z=w.name.localeCompare(H.name);break;case"namespace":z=w.namespace.localeCompare(H.namespace);break;case"data":z=w.data-H.data;break;case"age":z=E(w.age)-E(H.age);break}return N==="asc"?z:-z}),A}),k=Ne(()=>Math.ceil($().length/l())),O=Ne(()=>{const A=(f()-1)*l();return $().slice(A,A+l())}),B=A=>{r()===A?_(P=>P==="asc"?"desc":"asc"):(i(A),_("asc")),s(1)},D=A=>(()=>{var P=Af(),R=P.firstChild,N=R.nextSibling;return ie(w=>{var H=r()===A.field&&h()==="asc"?"var(--accent-primary)":"var(--text-muted)",z=r()===A.field&&h()==="desc"?"var(--accent-primary)":"var(--text-muted)";return H!==w.e&&ce(R,"color",w.e=H),z!==w.t&&ce(N,"color",w.t=z),w},{e:void 0,t:void 0}),P})(),I=async A=>{if(confirm(`Are you sure you want to delete ConfigMap "${A.name}" in namespace "${A.namespace}"?`))try{await De.deleteConfigMap(A.name,A.namespace),Ve(`ConfigMap ${A.name} deleted successfully`,"success"),x()}catch(P){console.error("Failed to delete ConfigMap:",P),Ve(`Failed to delete ConfigMap: ${P instanceof Error?P.message:"Unknown error"}`,"error")}};return(()=>{var A=Rf(),P=A.firstChild,R=P.firstChild,N=R.firstChild;N.nextSibling;var w=R.nextSibling,H=w.firstChild,z=P.nextSibling,U=z.firstChild,te=U.firstChild,F=te.nextSibling,W=U.nextSibling,V=W.firstChild,de=V.nextSibling,M=W.nextSibling,j=M.firstChild,K=j.nextSibling,Z=M.nextSibling,se=Z.nextSibling,ee=se.nextSibling,ae=z.nextSibling;return H.$$click=X=>{const q=X.currentTarget;q.classList.add("refreshing"),setTimeout(()=>q.classList.remove("refreshing"),500),x()},o(F,()=>(v()||[]).length),o(de,()=>$().length),o(K,()=>new Set((v()||[]).map(X=>X.namespace)).size),se.$$input=X=>{t(X.currentTarget.value),s(1)},ee.addEventListener("change",X=>{u(parseInt(X.currentTarget.value)),s(1)}),o(ae,L(G,{get when(){return!v.loading},get fallback(){return(()=>{var X=Df(),q=X.firstChild;return q.nextSibling,X})()},get children(){return[(()=>{var X=Mf(),q=X.firstChild,ne=q.firstChild,Y=ne.firstChild,re=Y.firstChild,Q=re.firstChild;Q.firstChild;var ve=re.nextSibling,Ae=ve.firstChild;Ae.firstChild;var Ce=ve.nextSibling,we=Ce.firstChild;we.firstChild;var _e=Ce.nextSibling,ge=_e.firstChild;ge.firstChild;var le=ne.nextSibling;return re.$$click=()=>B("name"),o(Q,L(D,{field:"name"}),null),ve.$$click=()=>B("namespace"),o(Ae,L(D,{field:"namespace"}),null),Ce.$$click=()=>B("data"),o(we,L(D,{field:"data"}),null),_e.$$click=()=>B("age"),o(ge,L(D,{field:"age"}),null),o(le,L(He,{get each(){return O()},get fallback(){return(()=>{var ue=Tf();return ue.firstChild,ue})()},children:ue=>(()=>{var Se=Pf(),be=Se.firstChild,oe=be.firstChild,ye=be.nextSibling,pe=ye.nextSibling,he=pe.firstChild,me=he.firstChild,fe=pe.nextSibling,xe=fe.nextSibling;return oe.$$click=()=>{p(ue),c(!0)},o(oe,(()=>{var $e=Re(()=>ue.name.length>40);return()=>$e()?ue.name.slice(0,37)+"...":ue.name})()),o(ye,()=>ue.namespace),o(he,()=>ue.data,me),o(fe,()=>ue.age),o(xe,L(Dt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{p(ue),m(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{p(ue),y(!0)}},{label:"Delete",icon:"delete",onClick:()=>I(ue),variant:"danger",divider:!0}]})),Se})()})),X})(),L(G,{get when(){return k()>1},get children(){var X=Ef(),q=X.firstChild,ne=q.firstChild,Y=ne.nextSibling,re=Y.nextSibling,Q=re.nextSibling,ve=Q.nextSibling,Ae=ve.nextSibling;Ae.nextSibling;var Ce=q.nextSibling,we=Ce.firstChild,_e=we.nextSibling,ge=_e.nextSibling,le=ge.firstChild,ue=le.nextSibling;ue.nextSibling;var Se=ge.nextSibling,be=Se.nextSibling;return o(q,()=>(f()-1)*l()+1,Y),o(q,()=>Math.min(f()*l(),$().length),Q),o(q,()=>$().length,Ae),we.$$click=()=>s(1),_e.$$click=()=>s(oe=>Math.max(1,oe-1)),o(ge,f,ue),o(ge,k,null),Se.$$click=()=>s(oe=>Math.min(k(),oe+1)),be.$$click=()=>s(k()),ie(oe=>{var ye=f()===1,pe=f()===1,he=f()===k(),me=f()===k();return ye!==oe.e&&(we.disabled=oe.e=ye),pe!==oe.t&&(_e.disabled=oe.t=pe),he!==oe.a&&(Se.disabled=oe.a=he),me!==oe.o&&(be.disabled=oe.o=me),oe},{e:void 0,t:void 0,a:void 0,o:void 0}),X}})]}})),o(A,L(it,{get isOpen(){return n()},onClose:()=>d(!1),get title(){return`ConfigMap: ${g()?.name}`},size:"lg",get children(){return L(G,{get when(){return g()},get children(){var X=Lf(),q=X.firstChild,ne=q.firstChild,Y=ne.firstChild,re=Y.nextSibling,Q=ne.nextSibling,ve=Q.firstChild,Ae=ve.nextSibling,Ce=Q.nextSibling,we=Ce.firstChild,_e=we.nextSibling,ge=Ce.nextSibling,le=ge.firstChild,ue=le.nextSibling,Se=q.nextSibling,be=Se.firstChild,oe=be.nextSibling;return o(re,()=>g()?.name),o(Ae,()=>g()?.namespace),o(_e,()=>g()?.data),o(ue,()=>g()?.age),be.$$click=()=>{d(!1),m(!0)},oe.$$click=()=>{d(!1),c(!0)},X}})}}),null),o(A,L(it,{get isOpen(){return b()},onClose:()=>m(!1),get title(){return`ConfigMap: ${g()?.name}`},size:"xl",get children(){return L(G,{get when(){return!S.loading},get fallback(){return If()},get children(){return L(tr,{get yaml(){return S()||""},get title(){return g()?.name}})}})}}),null),o(A,L(lr,{get isOpen(){return a()},onClose:()=>c(!1),resourceType:"configmap",get name(){return g()?.name||""},get namespace(){return g()?.namespace}}),null),ie(()=>se.value=e()),ie(()=>ee.value=l()),A})()};et(["click","input"]);var Of=T('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>â²</span><span>â¼'),Nf=T('<div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Type </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Data </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),Hf=T('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:#161b22><div style=color:#8b949e>Showing <!> - <!> of <!> Secrets</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>â Prev</button><span class="px-3 py-1"style=color:#c9d1d9>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Next â</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Last'),zf=T("<div style=height:70vh>"),Ff=T('<div class=space-y-4 style=background:var(--bg-primary);minHeight:100%><div class="flex items-center justify-between"><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Secrets</h1><div class="flex items-center gap-3"><input type=text placeholder="Search secrets..."class="px-3 py-2 rounded-lg bg-[var(--bg-alt)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent-primary)]"style="border:1px solid var(--border-color);color:var(--text-primary)"><button class="px-3 py-2 rounded-lg bg-[var(--accent-primary)] text-white text-sm font-medium hover:opacity-90 transition-opacity">Refresh</button></div></div><div class="overflow-hidden rounded-lg w-full"style=background:#0d1117>'),jf=T('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading Secrets...'),Uf=T('<tr><td colspan=6 class="text-center py-8"style=color:var(--text-muted)>No secrets found'),Vf=T('<tr><td><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td></td><td><span></span></td><td></td><td></td><td>'),fl=T('<div class="spinner mx-auto">');const Wf=()=>{const[e,t]=J(""),[r,i]=J("name"),[h,_]=J("asc"),[f,s]=J(1),[l,u]=J(20),[g,p]=J(null),[b,m]=J(!1),[C,y]=J(!1),[n,d]=J(!1),[a,c]=J(!1),[v,{refetch:x}]=qe(tt,De.getSecrets),[S]=qe(()=>(b()||C())&&g()?{name:g().name,ns:g().namespace}:null,async R=>R&&(await De.getSecretYAML(R.name,R.ns)).yaml||""),E=async R=>{const N=g();if(N)try{await De.updateSecret(N.name,N.namespace,R),Ve(`â Secret ${N.name} updated successfully`,"success"),y(!1),setTimeout(()=>x(),500),setTimeout(()=>x(),2e3)}catch(w){const H=w instanceof Error?w.message:"Unknown error";throw Ve(`â Failed to update secret: ${H}`,"error"),w}},$=R=>{if(!R)return 0;let N=0;const w=R.match(/(\d+)d/),H=R.match(/(\d+)h/),z=R.match(/(\d+)m/);return w&&(N+=parseInt(w[1])*24*60),H&&(N+=parseInt(H[1])*60),z&&(N+=parseInt(z[1])),N},k=Ne(()=>{let R=v()||[];const N=e().toLowerCase();N&&(R=R.filter(z=>z.name.toLowerCase().includes(N)||z.namespace.toLowerCase().includes(N)||z.type.toLowerCase().includes(N)));const w=r(),H=h();return R=[...R].sort((z,U)=>{let te=0;switch(w){case"name":te=z.name.localeCompare(U.name);break;case"namespace":te=z.namespace.localeCompare(U.namespace);break;case"type":te=z.type.localeCompare(U.type);break;case"data":te=z.data-U.data;break;case"age":te=$(z.age)-$(U.age);break}return H==="asc"?te:-te}),R}),O=Ne(()=>Math.ceil(k().length/l())),B=Ne(()=>{const R=(f()-1)*l();return k().slice(R,R+l())}),D=R=>{r()===R?_(N=>N==="asc"?"desc":"asc"):(i(R),_("asc")),s(1)},I=R=>(()=>{var N=Of(),w=N.firstChild,H=w.nextSibling;return ie(z=>{var U=r()===R.field&&h()==="asc"?"var(--accent-primary)":"var(--text-muted)",te=r()===R.field&&h()==="desc"?"var(--accent-primary)":"var(--text-muted)";return U!==z.e&&ce(w,"color",z.e=U),te!==z.t&&ce(H,"color",z.t=te),z},{e:void 0,t:void 0}),N})(),A=async R=>{if(confirm(`Are you sure you want to delete secret "${R.name}" in namespace "${R.namespace}"?`))try{await De.deleteSecret(R.name,R.namespace),Ve(`Secret ${R.name} deleted successfully`,"success"),x()}catch(N){console.error("Failed to delete secret:",N),Ve(`Failed to delete secret: ${N instanceof Error?N.message:"Unknown error"}`,"error")}},P=R=>R.includes("tls")?"badge-success":R.includes("Opaque")?"badge-default":R.includes("helm")?"badge-info":"badge-default";return(()=>{var R=Ff(),N=R.firstChild,w=N.firstChild,H=w.nextSibling,z=H.firstChild,U=z.nextSibling,te=N.nextSibling;return z.$$input=F=>t(F.currentTarget.value),U.$$click=()=>x(),o(te,L(G,{get when(){return!v.loading},get fallback(){return(()=>{var F=jf(),W=F.firstChild;return W.nextSibling,F})()},get children(){return[(()=>{var F=Nf(),W=F.firstChild,V=W.firstChild,de=V.firstChild,M=de.firstChild,j=M.firstChild;j.firstChild;var K=M.nextSibling,Z=K.firstChild;Z.firstChild;var se=K.nextSibling,ee=se.firstChild;ee.firstChild;var ae=se.nextSibling,X=ae.firstChild;X.firstChild;var q=ae.nextSibling,ne=q.firstChild;ne.firstChild;var Y=V.nextSibling;return M.$$click=()=>D("name"),o(j,L(I,{field:"name"}),null),K.$$click=()=>D("namespace"),o(Z,L(I,{field:"namespace"}),null),se.$$click=()=>D("type"),o(ee,L(I,{field:"type"}),null),ae.$$click=()=>D("data"),o(X,L(I,{field:"data"}),null),q.$$click=()=>D("age"),o(ne,L(I,{field:"age"}),null),o(Y,L(He,{get each(){return B()},get fallback(){return(()=>{var re=Uf();return re.firstChild,re})()},children:re=>(()=>{var Q=Vf(),ve=Q.firstChild,Ae=ve.firstChild,Ce=ve.nextSibling,we=Ce.nextSibling,_e=we.firstChild,ge=we.nextSibling,le=ge.nextSibling,ue=le.nextSibling;return Ae.$$click=()=>{p(re),c(!0)},o(Ae,(()=>{var Se=Re(()=>re.name.length>40);return()=>Se()?re.name.slice(0,37)+"...":re.name})()),o(Ce,()=>re.namespace),o(_e,()=>re.type),o(ge,()=>re.data),o(le,()=>re.age),o(ue,L(Dt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{p(re),m(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{p(re),y(!0)}},{label:"Describe",icon:"describe",onClick:()=>{p(re),c(!0)}},{label:"Delete",icon:"delete",onClick:()=>A(re),variant:"danger",divider:!0}]})),ie(()=>ze(_e,`badge ${P(re.type)}`)),Q})()})),F})(),L(G,{get when(){return O()>1},get children(){var F=Hf(),W=F.firstChild,V=W.firstChild,de=V.nextSibling,M=de.nextSibling,j=M.nextSibling,K=j.nextSibling,Z=K.nextSibling;Z.nextSibling;var se=W.nextSibling,ee=se.firstChild,ae=ee.nextSibling,X=ae.nextSibling,q=X.firstChild,ne=q.nextSibling;ne.nextSibling;var Y=X.nextSibling,re=Y.nextSibling;return o(W,()=>(f()-1)*l()+1,de),o(W,()=>Math.min(f()*l(),k().length),j),o(W,()=>k().length,Z),ee.$$click=()=>s(1),ae.$$click=()=>s(Q=>Math.max(1,Q-1)),o(X,f,ne),o(X,O,null),Y.$$click=()=>s(Q=>Math.min(O(),Q+1)),re.$$click=()=>s(O()),ie(Q=>{var ve=f()===1,Ae=f()===1,Ce=f()===O(),we=f()===O();return ve!==Q.e&&(ee.disabled=Q.e=ve),Ae!==Q.t&&(ae.disabled=Q.t=Ae),Ce!==Q.a&&(Y.disabled=Q.a=Ce),we!==Q.o&&(re.disabled=Q.o=we),Q},{e:void 0,t:void 0,a:void 0,o:void 0}),F}})]}})),o(R,L(it,{get isOpen(){return b()},onClose:()=>m(!1),get title(){return`YAML: ${g()?.name}`},size:"xl",get children(){return L(G,{get when(){return!S.loading},get fallback(){return fl()},get children(){return L(tr,{get yaml(){return S()||""},get title(){return g()?.name}})}})}}),null),o(R,L(it,{get isOpen(){return C()},onClose:()=>y(!1),get title(){return`Edit YAML: ${g()?.name}`},size:"xl",get children(){return L(G,{get when(){return!S.loading},get fallback(){return fl()},get children(){var F=zf();return o(F,L(cr,{get yaml(){return S()||""},get title(){return g()?.name},onSave:E,onCancel:()=>y(!1)})),F}})}}),null),o(R,L(lr,{get isOpen(){return a()},onClose:()=>c(!1),resourceType:"secret",get name(){return g()?.name||""},get namespace(){return g()?.namespace||""}}),null),R})()};et(["input","click"]);var qf=T('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>&#9650;</span><span>&#9660;'),Kf=T('<div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class=whitespace-nowrap>Secret</th><th class=whitespace-nowrap>Issuer</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Status </div></th><th class=whitespace-nowrap>Expires</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),Yf=T('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:#161b22><div style=color:#8b949e>Showing <!> - <!> of <!> certificates</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Prev</button><span class="px-3 py-1"style=color:#c9d1d9>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Next</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:#21262d;color:#c9d1d9>Last'),Gf=T("<div style=height:70vh>"),Jf=T('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Certificates</h1><p style=color:var(--text-secondary)>TLS certificates managed by cert-manager</p></div><div class="flex items-center gap-3"><button class=icon-btn title="Refresh Certificates"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Ready</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--warning-color)"><span class=text-sm style=color:var(--text-secondary)>Pending</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--error-color)"><span class=text-sm style=color:var(--text-secondary)>Failed</span><span class="text-xl font-bold"style=color:var(--error-color)></span></div><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class="overflow-hidden rounded-lg"style=background:#0d1117>'),Xf=T('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading certificates...'),Zf=T('<tr><td colspan=8 class="text-center py-8"style=color:var(--text-muted)>No certificates found. Make sure cert-manager is installed.'),Qf=T('<tr><td><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td></td><td><code class="px-2 py-1 rounded text-xs"style=background:var(--bg-tertiary)></code></td><td></td><td><span></span></td><td></td><td></td><td>'),gl=T('<div class="spinner mx-auto">');const eg=()=>{const[e,t]=J(""),[r,i]=J("name"),[h,_]=J("asc"),[f,s]=J(1),[l,u]=J(20),[g,p]=J(null),[b,m]=J(!1),[C,y]=J(!1),[n,d]=J(!1),[a,{refetch:c}]=qe(tt,De.getCertificates),[v]=qe(()=>(b()||C())&&g()?{name:g().name,ns:g().namespace}:null,async P=>P&&(await De.getCertificateYAML(P.name,P.ns)).yaml||""),x=async P=>{const R=g();if(R)try{await De.updateCertificate(R.name,R.namespace,P),Ve(`â Certificate ${R.name} updated successfully`,"success"),y(!1),setTimeout(()=>c(),500),setTimeout(()=>c(),2e3)}catch(N){const w=N instanceof Error?N.message:"Unknown error";throw Ve(`â Failed to update certificate: ${w}`,"error"),N}},S=P=>{if(!P)return 0;let R=0;const N=P.match(/(\d+)d/),w=P.match(/(\d+)h/),H=P.match(/(\d+)m/);return N&&(R+=parseInt(N[1])*24*60),w&&(R+=parseInt(w[1])*60),H&&(R+=parseInt(H[1])),R},E=Ne(()=>{let P=a()||[];const R=e().toLowerCase();R&&(P=P.filter(H=>H.name.toLowerCase().includes(R)||H.namespace.toLowerCase().includes(R)||H.issuer?.toLowerCase().includes(R)||H.dnsNames?.some(z=>z.toLowerCase().includes(R))));const N=r(),w=h();return P=[...P].sort((H,z)=>{let U=0;switch(N){case"name":U=H.name.localeCompare(z.name);break;case"namespace":U=H.namespace.localeCompare(z.namespace);break;case"status":U=H.status.localeCompare(z.status);break;case"age":U=S(H.age)-S(z.age);break}return w==="asc"?U:-U}),P}),$=Ne(()=>Math.ceil(E().length/l())),k=Ne(()=>{const P=(f()-1)*l();return E().slice(P,P+l())}),O=Ne(()=>{const P=a()||[];return{total:P.length,ready:P.filter(R=>R.status==="Ready"||R.status==="True").length,pending:P.filter(R=>R.status==="Pending"||R.status==="Unknown").length,failed:P.filter(R=>R.status==="Failed"||R.status==="False").length}}),B=P=>{r()===P?_(R=>R==="asc"?"desc":"asc"):(i(P),_("asc")),s(1)},D=P=>(()=>{var R=qf(),N=R.firstChild,w=N.nextSibling;return ie(H=>{var z=r()===P.field&&h()==="asc"?"var(--accent-primary)":"var(--text-muted)",U=r()===P.field&&h()==="desc"?"var(--accent-primary)":"var(--text-muted)";return z!==H.e&&ce(N,"color",H.e=z),U!==H.t&&ce(w,"color",H.t=U),H},{e:void 0,t:void 0}),R})(),I=async P=>{if(confirm(`Are you sure you want to delete certificate ${P.name}?`))try{await De.deleteCertificate(P.name,P.namespace),Ve(`Certificate ${P.name} deleted successfully`,"success"),c()}catch(R){console.error("Failed to delete certificate:",R),Ve(`Failed to delete certificate: ${R instanceof Error?R.message:"Unknown error"}`,"error")}},A=P=>P==="Ready"||P==="True"?"badge-success":P==="Failed"||P==="False"?"badge-error":"badge-warning";return(()=>{var P=Jf(),R=P.firstChild,N=R.firstChild,w=N.firstChild;w.nextSibling;var H=N.nextSibling,z=H.firstChild,U=R.nextSibling,te=U.firstChild,F=te.firstChild,W=F.nextSibling,V=te.nextSibling,de=V.firstChild,M=de.nextSibling,j=V.nextSibling,K=j.firstChild,Z=K.nextSibling,se=j.nextSibling,ee=se.firstChild,ae=ee.nextSibling,X=se.nextSibling,q=X.nextSibling,ne=q.nextSibling,Y=U.nextSibling;return z.$$click=re=>{const Q=re.currentTarget;Q.classList.add("refreshing"),setTimeout(()=>Q.classList.remove("refreshing"),500),c()},o(W,()=>O().total),o(M,()=>O().ready),o(Z,()=>O().pending),o(ae,()=>O().failed),q.$$input=re=>{t(re.currentTarget.value),s(1)},ne.addEventListener("change",re=>{u(parseInt(re.currentTarget.value)),s(1)}),o(Y,L(G,{get when(){return!a.loading},get fallback(){return(()=>{var re=Xf(),Q=re.firstChild;return Q.nextSibling,re})()},get children(){return[(()=>{var re=Kf(),Q=re.firstChild,ve=Q.firstChild,Ae=ve.firstChild,Ce=Ae.firstChild,we=Ce.firstChild;we.firstChild;var _e=Ce.nextSibling,ge=_e.firstChild;ge.firstChild;var le=_e.nextSibling,ue=le.nextSibling,Se=ue.nextSibling,be=Se.firstChild;be.firstChild;var oe=Se.nextSibling,ye=oe.nextSibling,pe=ye.firstChild;pe.firstChild;var he=ve.nextSibling;return Ce.$$click=()=>B("name"),o(we,L(D,{field:"name"}),null),_e.$$click=()=>B("namespace"),o(ge,L(D,{field:"namespace"}),null),Se.$$click=()=>B("status"),o(be,L(D,{field:"status"}),null),ye.$$click=()=>B("age"),o(pe,L(D,{field:"age"}),null),o(he,L(He,{get each(){return k()},get fallback(){return(()=>{var me=Zf();return me.firstChild,me})()},children:me=>(()=>{var fe=Qf(),xe=fe.firstChild,$e=xe.firstChild,ke=xe.nextSibling,Be=ke.nextSibling,Pe=Be.firstChild,Le=Be.nextSibling,Oe=Le.nextSibling,Fe=Oe.firstChild,je=Oe.nextSibling,Ke=je.nextSibling,Te=Ke.nextSibling;return $e.$$click=()=>{p(me),d(!0)},o($e,(()=>{var Ge=Re(()=>me.name.length>40);return()=>Ge()?me.name.slice(0,37)+"...":me.name})()),o(ke,()=>me.namespace),o(Pe,()=>me.secretName||"-"),o(Le,()=>me.issuer||"-"),o(Fe,()=>me.status),o(je,()=>me.notAfter||"-"),o(Ke,()=>me.age),o(Te,L(Dt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{p(me),m(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{p(me),y(!0)}},{label:"Delete",icon:"delete",onClick:()=>I(me),variant:"danger",divider:!0}]})),ie(()=>ze(Fe,`badge ${A(me.status)}`)),fe})()})),re})(),L(G,{get when(){return $()>1},get children(){var re=Yf(),Q=re.firstChild,ve=Q.firstChild,Ae=ve.nextSibling,Ce=Ae.nextSibling,we=Ce.nextSibling,_e=we.nextSibling,ge=_e.nextSibling;ge.nextSibling;var le=Q.nextSibling,ue=le.firstChild,Se=ue.nextSibling,be=Se.nextSibling,oe=be.firstChild,ye=oe.nextSibling;ye.nextSibling;var pe=be.nextSibling,he=pe.nextSibling;return o(Q,()=>(f()-1)*l()+1,Ae),o(Q,()=>Math.min(f()*l(),E().length),we),o(Q,()=>E().length,ge),ue.$$click=()=>s(1),Se.$$click=()=>s(me=>Math.max(1,me-1)),o(be,f,ye),o(be,$,null),pe.$$click=()=>s(me=>Math.min($(),me+1)),he.$$click=()=>s($()),ie(me=>{var fe=f()===1,xe=f()===1,$e=f()===$(),ke=f()===$();return fe!==me.e&&(ue.disabled=me.e=fe),xe!==me.t&&(Se.disabled=me.t=xe),$e!==me.a&&(pe.disabled=me.a=$e),ke!==me.o&&(he.disabled=me.o=ke),me},{e:void 0,t:void 0,a:void 0,o:void 0}),re}})]}})),o(P,L(it,{get isOpen(){return b()},onClose:()=>m(!1),get title(){return`YAML: ${g()?.name}`},size:"xl",get children(){return L(G,{get when(){return!v.loading},get fallback(){return gl()},get children(){return L(tr,{get yaml(){return v()||""},get title(){return g()?.name}})}})}}),null),o(P,L(it,{get isOpen(){return C()},onClose:()=>y(!1),get title(){return`Edit YAML: ${g()?.name}`},size:"xl",get children(){return L(G,{get when(){return!v.loading},get fallback(){return gl()},get children(){var re=Gf();return o(re,L(cr,{get yaml(){return v()||""},get title(){return g()?.name},onSave:x,onCancel:()=>y(!1)})),re}})}}),null),o(P,L(lr,{get isOpen(){return n()},onClose:()=>d(!1),resourceType:"certificate",get name(){return g()?.name||""},get namespace(){return g()?.namespace}}),null),ie(()=>q.value=e()),ie(()=>ne.value=l()),P})()};et(["click","input"]);var tg=T('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z">'),rg=T('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 6h16M4 10h16M4 14h16M4 18h16">'),sg=T('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1v-4zM14 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z">'),ig=T('<div class="grid grid-cols-1 lg:grid-cols-2 gap-4">'),ng=T('<div><div class="flex items-start justify-between mb-4"><div class="flex items-center gap-3"><div><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path></svg></div><div><button class="text-white font-semibold hover:underline text-left"></button><p class="text-gray-500 text-sm"></p></div></div><span></span></div><div class="grid grid-cols-2 gap-4 mb-4"><div class="bg-k8s-dark rounded-lg p-3"><div class="flex items-center justify-between mb-2"><span class="text-gray-400 text-sm">CPU</span><span class="text-white font-medium"></span></div><div class="h-2 bg-k8s-border rounded-full overflow-hidden"><div class="h-full bg-blue-500 rounded-full"style=width:45%></div></div></div><div class="bg-k8s-dark rounded-lg p-3"><div class="flex items-center justify-between mb-2"><span class="text-gray-400 text-sm">Memory</span><span class="text-white font-medium"></span></div><div class="h-2 bg-k8s-border rounded-full overflow-hidden"><div class="h-full bg-purple-500 rounded-full"style=width:60%></div></div></div></div><div class="flex items-center justify-between text-sm text-gray-400 pt-4 border-t border-k8s-border"><span>Version: </span><span>Age: '),lg=T('<div class="overflow-hidden rounded-lg"style=background:#0d1117><div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class=whitespace-nowrap>Name</th><th class=whitespace-nowrap>Status</th><th class=whitespace-nowrap>Roles</th><th class=whitespace-nowrap>CPU</th><th class=whitespace-nowrap>Memory</th><th class=whitespace-nowrap>Version</th><th class=whitespace-nowrap>Age</th></tr></thead><tbody>'),og=T('<tr><td colspan=7 class="text-center py-8"style=color:var(--text-muted)>No nodes found'),ag=T('<tr><td><div class="flex items-center gap-2"><div><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path></svg></div><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></div></td><td><span></span></td><td><span></span></td><td class="font-mono text-sm"></td><td class="font-mono text-sm"></td><td class="font-mono text-sm"></td><td>'),cg=T('<div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3">'),dg=T('<button><div class="flex items-center gap-2 mb-2"><div><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path></svg></div><span></span></div><h4 class="text-white font-medium text-sm truncate mb-1"></h4><p class="text-gray-500 text-xs truncate"></p><div class="mt-2 pt-2 border-t border-k8s-border"><div class="flex justify-between text-xs"><span class=text-gray-500>CPU</span><span class=text-gray-300></span></div><div class="flex justify-between text-xs mt-1"><span class=text-gray-500>Mem</span><span class=text-gray-300>'),hg=T('<div class=space-y-6><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold text-white">Nodes</h1><p class="text-gray-400 mt-1">Cluster node management</p></div><div class="flex items-center gap-3"><div class="flex items-center rounded-lg overflow-hidden"style="background:var(--bg-secondary);border:1px solid var(--border-color)"></div><button class=icon-btn title="Refresh Nodes"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="grid grid-cols-2 md:grid-cols-4 gap-4"><div class="bg-k8s-card border border-k8s-border rounded-lg p-4"><div class="text-gray-400 text-sm">Total Nodes</div><div class="text-2xl font-bold text-white"></div></div><div class="bg-k8s-card border border-green-500/30 rounded-lg p-4"><div class="text-gray-400 text-sm">Ready</div><div class="text-2xl font-bold text-green-400"></div></div><div class="bg-k8s-card border border-red-500/30 rounded-lg p-4"><div class="text-gray-400 text-sm">Not Ready</div><div class="text-2xl font-bold text-red-400"></div></div><div class="bg-k8s-card border border-cyan-500/30 rounded-lg p-4"><div class="text-gray-400 text-sm">Control Plane</div><div class="text-2xl font-bold text-cyan-400">'),ug=T('<button><span class="hidden sm:inline capitalize">'),fg=T('<div class="p-8 text-center text-gray-500"><svg class="w-8 h-8 animate-spin mx-auto mb-2"fill=none viewBox="0 0 24 24"><circle class=opacity-25 cx=12 cy=12 r=10 stroke=currentColor stroke-width=4></circle><path class=opacity-75 fill=currentColor d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>Loading nodes...');const gg=()=>{const[e,t]=J(null),[r,i]=J(!1),[h,_]=J("card"),f=Ne(()=>{const b=ss()||[],m=vo().toLowerCase();return m?b.filter(C=>C.name.toLowerCase().includes(m)||C.roles.toLowerCase().includes(m)||C.status.toLowerCase().includes(m)):b}),s=Ne(()=>{const b=ss()||[];return{total:b.length,ready:b.filter(m=>m.status==="Ready").length,notReady:b.filter(m=>m.status!=="Ready").length,controlPlane:b.filter(m=>m.roles.includes("control-plane")||m.roles.includes("master")).length}}),l=b=>L(hi,{get children(){return[L(ir,{get when(){return b.mode==="card"},get children(){return tg()}}),L(ir,{get when(){return b.mode==="list"},get children(){return rg()}}),L(ir,{get when(){return b.mode==="grid"},get children(){return sg()}})]}}),u=()=>(()=>{var b=ig();return o(b,L(He,{get each(){return f()},children:m=>{const C=m.status==="Ready",y=m.roles.includes("control-plane")||m.roles.includes("master");return(()=>{var n=ng(),d=n.firstChild,a=d.firstChild,c=a.firstChild,v=c.firstChild,x=c.nextSibling,S=x.firstChild,E=S.nextSibling,$=a.nextSibling,k=d.nextSibling,O=k.firstChild,B=O.firstChild,D=B.firstChild,I=D.nextSibling,A=B.nextSibling;A.firstChild;var P=O.nextSibling,R=P.firstChild,N=R.firstChild,w=N.nextSibling,H=R.nextSibling;H.firstChild;var z=k.nextSibling,U=z.firstChild;U.firstChild;var te=U.nextSibling;return te.firstChild,ze(n,`bg-k8s-card border rounded-xl p-6 card-hover ${C?"border-k8s-border":"border-red-500/30"}`),ze(c,`p-2 rounded-lg ${y?"bg-cyan-500/20":"bg-k8s-dark"}`),Xe(v,"class",`w-6 h-6 ${y?"text-cyan-400":"text-gray-400"}`),S.$$click=()=>{t(m),i(!0)},o(S,()=>m.name),o(E,()=>m.roles||"worker"),ze($,`px-2 py-1 rounded text-xs font-medium ${C?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`),o($,()=>m.status),o(I,()=>m.cpu||"N/A"),o(w,()=>m.memory||"N/A"),o(U,()=>m.version,null),o(te,()=>m.age,null),n})()}})),b})(),g=()=>(()=>{var b=lg(),m=b.firstChild,C=m.firstChild,y=C.firstChild,n=y.nextSibling;return o(n,L(He,{get each(){return f()},get fallback(){return(()=>{var d=og();return d.firstChild,d})()},children:d=>{const a=d.status==="Ready",c=d.roles.includes("control-plane")||d.roles.includes("master");return(()=>{var v=ag(),x=v.firstChild,S=x.firstChild,E=S.firstChild,$=E.firstChild,k=E.nextSibling,O=x.nextSibling,B=O.firstChild,D=O.nextSibling,I=D.firstChild,A=D.nextSibling,P=A.nextSibling,R=P.nextSibling,N=R.nextSibling;return ze(E,`p-1 rounded ${c?"bg-cyan-500/20":"bg-k8s-dark"}`),Xe($,"class",`w-4 h-4 ${c?"text-cyan-400":"text-gray-400"}`),k.$$click=()=>{t(d),i(!0)},o(k,()=>d.name),ze(B,`badge ${a?"badge-success":"badge-error"}`),o(B,()=>d.status),ze(I,`text-sm ${c?"text-cyan-400":"text-gray-400"}`),o(I,()=>d.roles||"worker"),o(A,()=>d.cpu||"N/A"),o(P,()=>d.memory||"N/A"),o(R,()=>d.version),o(N,()=>d.age),v})()}})),b})(),p=()=>(()=>{var b=cg();return o(b,L(He,{get each(){return f()},children:m=>{const C=m.status==="Ready",y=m.roles.includes("control-plane")||m.roles.includes("master");return(()=>{var n=dg(),d=n.firstChild,a=d.firstChild,c=a.firstChild,v=a.nextSibling,x=d.nextSibling,S=x.nextSibling,E=S.nextSibling,$=E.firstChild,k=$.firstChild,O=k.nextSibling,B=$.nextSibling,D=B.firstChild,I=D.nextSibling;return n.$$click=()=>{t(m),i(!0)},ze(n,`bg-k8s-card border rounded-lg p-4 text-left hover:bg-k8s-dark transition-colors ${C?"border-k8s-border":"border-red-500/30"}`),ze(a,`p-1.5 rounded ${y?"bg-cyan-500/20":"bg-k8s-dark"}`),Xe(c,"class",`w-4 h-4 ${y?"text-cyan-400":"text-gray-400"}`),ze(v,`px-1.5 py-0.5 rounded text-xs font-medium ${C?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`),o(v,()=>m.status),o(x,()=>m.name),o(S,()=>m.roles||"worker"),o(O,()=>m.cpu||"N/A"),o(I,()=>m.memory||"N/A"),ie(()=>Xe(x,"title",m.name)),n})()}})),b})();return(()=>{var b=hg(),m=b.firstChild,C=m.firstChild,y=C.nextSibling,n=y.firstChild,d=n.nextSibling,a=m.nextSibling,c=a.firstChild,v=c.firstChild,x=v.nextSibling,S=c.nextSibling,E=S.firstChild,$=E.nextSibling,k=S.nextSibling,O=k.firstChild,B=O.nextSibling,D=k.nextSibling,I=D.firstChild,A=I.nextSibling;return o(n,L(He,{each:["card","list","grid"],children:P=>(()=>{var R=ug(),N=R.firstChild;return R.$$click=()=>_(P),o(R,L(l,{mode:P}),N),o(N,P),ie(w=>{var H=`px-3 py-2 flex items-center gap-2 text-sm transition-colors ${h()===P?"bg-k8s-blue text-white":"text-gray-400 hover:text-white hover:bg-k8s-dark"}`,z=`${P.charAt(0).toUpperCase()+P.slice(1)} View`;return H!==w.e&&ze(R,w.e=H),z!==w.t&&Xe(R,"title",w.t=z),w},{e:void 0,t:void 0}),R})()})),d.$$click=P=>{const R=P.currentTarget;R.classList.add("refreshing"),setTimeout(()=>R.classList.remove("refreshing"),500),ko()},o(x,()=>s().total),o($,()=>s().ready),o(B,()=>s().notReady),o(A,()=>s().controlPlane),o(b,L(G,{get when(){return!ss.loading},get fallback(){return fg()},get children(){return L(hi,{get children(){return[L(ir,{get when(){return h()==="card"},get children(){return L(u,{})}}),L(ir,{get when(){return h()==="list"},get children(){return L(g,{})}}),L(ir,{get when(){return h()==="grid"},get children(){return L(p,{})}})]}})}}),null),o(b,L(lr,{get isOpen(){return r()},onClose:()=>i(!1),resourceType:"node",get name(){return e()?.name||""}}),null),b})()};et(["click"]);var pg={value:()=>{}};function Ls(){for(var e=0,t=arguments.length,r={},i;e<t;++e){if(!(i=arguments[e]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new ti(r)}function ti(e){this._=e}function vg(e,t){return e.trim().split(/^|\s+/).map(function(r){var i="",h=r.indexOf(".");if(h>=0&&(i=r.slice(h+1),r=r.slice(0,h)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}ti.prototype=Ls.prototype={constructor:ti,on:function(e,t){var r=this._,i=vg(e+"",r),h,_=-1,f=i.length;if(arguments.length<2){for(;++_<f;)if((h=(e=i[_]).type)&&(h=mg(r[h],e.name)))return h;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++_<f;)if(h=(e=i[_]).type)r[h]=pl(r[h],e.name,t);else if(t==null)for(h in r)r[h]=pl(r[h],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new ti(e)},call:function(e,t){if((h=arguments.length-2)>0)for(var r=new Array(h),i=0,h,_;i<h;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(_=this._[e],i=0,h=_.length;i<h;++i)_[i].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],h=0,_=i.length;h<_;++h)i[h].value.apply(t,r)}};function mg(e,t){for(var r=0,i=e.length,h;r<i;++r)if((h=e[r]).name===t)return h.value}function pl(e,t,r){for(var i=0,h=e.length;i<h;++i)if(e[i].name===t){e[i]=pg,e=e.slice(0,i).concat(e.slice(i+1));break}return r!=null&&e.push({name:t,value:r}),e}var nn="http://www.w3.org/1999/xhtml";const vl={svg:"http://www.w3.org/2000/svg",xhtml:nn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ci(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),vl.hasOwnProperty(t)?{space:vl[t],local:e}:e}function _g(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===nn&&t.documentElement.namespaceURI===nn?t.createElement(e):t.createElementNS(r,e)}}function bg(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Lo(e){var t=Ci(e);return(t.local?bg:_g)(t)}function yg(){}function mn(e){return e==null?yg:function(){return this.querySelector(e)}}function xg(e){typeof e!="function"&&(e=mn(e));for(var t=this._groups,r=t.length,i=new Array(r),h=0;h<r;++h)for(var _=t[h],f=_.length,s=i[h]=new Array(f),l,u,g=0;g<f;++g)(l=_[g])&&(u=e.call(l,l.__data__,g,_))&&("__data__"in l&&(u.__data__=l.__data__),s[g]=u);return new er(i,this._parents)}function $g(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function wg(){return[]}function Ro(e){return e==null?wg:function(){return this.querySelectorAll(e)}}function Sg(e){return function(){return $g(e.apply(this,arguments))}}function Cg(e){typeof e=="function"?e=Sg(e):e=Ro(e);for(var t=this._groups,r=t.length,i=[],h=[],_=0;_<r;++_)for(var f=t[_],s=f.length,l,u=0;u<s;++u)(l=f[u])&&(i.push(e.call(l,l.__data__,u,f)),h.push(l));return new er(i,h)}function Do(e){return function(){return this.matches(e)}}function To(e){return function(t){return t.matches(e)}}var kg=Array.prototype.find;function Ag(e){return function(){return kg.call(this.children,e)}}function Mg(){return this.firstElementChild}function Eg(e){return this.select(e==null?Mg:Ag(typeof e=="function"?e:To(e)))}var Lg=Array.prototype.filter;function Rg(){return Array.from(this.children)}function Dg(e){return function(){return Lg.call(this.children,e)}}function Tg(e){return this.selectAll(e==null?Rg:Dg(typeof e=="function"?e:To(e)))}function Pg(e){typeof e!="function"&&(e=Do(e));for(var t=this._groups,r=t.length,i=new Array(r),h=0;h<r;++h)for(var _=t[h],f=_.length,s=i[h]=[],l,u=0;u<f;++u)(l=_[u])&&e.call(l,l.__data__,u,_)&&s.push(l);return new er(i,this._parents)}function Po(e){return new Array(e.length)}function Ig(){return new er(this._enter||this._groups.map(Po),this._parents)}function fi(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}fi.prototype={constructor:fi,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Bg(e){return function(){return e}}function Og(e,t,r,i,h,_){for(var f=0,s,l=t.length,u=_.length;f<u;++f)(s=t[f])?(s.__data__=_[f],i[f]=s):r[f]=new fi(e,_[f]);for(;f<l;++f)(s=t[f])&&(h[f]=s)}function Ng(e,t,r,i,h,_,f){var s,l,u=new Map,g=t.length,p=_.length,b=new Array(g),m;for(s=0;s<g;++s)(l=t[s])&&(b[s]=m=f.call(l,l.__data__,s,t)+"",u.has(m)?h[s]=l:u.set(m,l));for(s=0;s<p;++s)m=f.call(e,_[s],s,_)+"",(l=u.get(m))?(i[s]=l,l.__data__=_[s],u.delete(m)):r[s]=new fi(e,_[s]);for(s=0;s<g;++s)(l=t[s])&&u.get(b[s])===l&&(h[s]=l)}function Hg(e){return e.__data__}function zg(e,t){if(!arguments.length)return Array.from(this,Hg);var r=t?Ng:Og,i=this._parents,h=this._groups;typeof e!="function"&&(e=Bg(e));for(var _=h.length,f=new Array(_),s=new Array(_),l=new Array(_),u=0;u<_;++u){var g=i[u],p=h[u],b=p.length,m=Fg(e.call(g,g&&g.__data__,u,i)),C=m.length,y=s[u]=new Array(C),n=f[u]=new Array(C),d=l[u]=new Array(b);r(g,p,y,n,d,m,t);for(var a=0,c=0,v,x;a<C;++a)if(v=y[a]){for(a>=c&&(c=a+1);!(x=n[c])&&++c<C;);v._next=x||null}}return f=new er(f,i),f._enter=s,f._exit=l,f}function Fg(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function jg(){return new er(this._exit||this._groups.map(Po),this._parents)}function Ug(e,t,r){var i=this.enter(),h=this,_=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(h=t(h),h&&(h=h.selection())),r==null?_.remove():r(_),i&&h?i.merge(h).order():h}function Vg(e){for(var t=e.selection?e.selection():e,r=this._groups,i=t._groups,h=r.length,_=i.length,f=Math.min(h,_),s=new Array(h),l=0;l<f;++l)for(var u=r[l],g=i[l],p=u.length,b=s[l]=new Array(p),m,C=0;C<p;++C)(m=u[C]||g[C])&&(b[C]=m);for(;l<h;++l)s[l]=r[l];return new er(s,this._parents)}function Wg(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var i=e[t],h=i.length-1,_=i[h],f;--h>=0;)(f=i[h])&&(_&&f.compareDocumentPosition(_)^4&&_.parentNode.insertBefore(f,_),_=f);return this}function qg(e){e||(e=Kg);function t(p,b){return p&&b?e(p.__data__,b.__data__):!p-!b}for(var r=this._groups,i=r.length,h=new Array(i),_=0;_<i;++_){for(var f=r[_],s=f.length,l=h[_]=new Array(s),u,g=0;g<s;++g)(u=f[g])&&(l[g]=u);l.sort(t)}return new er(h,this._parents).order()}function Kg(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Yg(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Gg(){return Array.from(this)}function Jg(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i=e[t],h=0,_=i.length;h<_;++h){var f=i[h];if(f)return f}return null}function Xg(){let e=0;for(const t of this)++e;return e}function Zg(){return!this.node()}function Qg(e){for(var t=this._groups,r=0,i=t.length;r<i;++r)for(var h=t[r],_=0,f=h.length,s;_<f;++_)(s=h[_])&&e.call(s,s.__data__,_,h);return this}function ep(e){return function(){this.removeAttribute(e)}}function tp(e){return function(){this.removeAttributeNS(e.space,e.local)}}function rp(e,t){return function(){this.setAttribute(e,t)}}function sp(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ip(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function np(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function lp(e,t){var r=Ci(e);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((t==null?r.local?tp:ep:typeof t=="function"?r.local?np:ip:r.local?sp:rp)(r,t))}function Io(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function op(e){return function(){this.style.removeProperty(e)}}function ap(e,t,r){return function(){this.style.setProperty(e,t,r)}}function cp(e,t,r){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,r)}}function dp(e,t,r){return arguments.length>1?this.each((t==null?op:typeof t=="function"?cp:ap)(e,t,r??"")):os(this.node(),e)}function os(e,t){return e.style.getPropertyValue(t)||Io(e).getComputedStyle(e,null).getPropertyValue(t)}function hp(e){return function(){delete this[e]}}function up(e,t){return function(){this[e]=t}}function fp(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function gp(e,t){return arguments.length>1?this.each((t==null?hp:typeof t=="function"?fp:up)(e,t)):this.node()[e]}function Bo(e){return e.trim().split(/^|\s+/)}function _n(e){return e.classList||new Oo(e)}function Oo(e){this._node=e,this._names=Bo(e.getAttribute("class")||"")}Oo.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function No(e,t){for(var r=_n(e),i=-1,h=t.length;++i<h;)r.add(t[i])}function Ho(e,t){for(var r=_n(e),i=-1,h=t.length;++i<h;)r.remove(t[i])}function pp(e){return function(){No(this,e)}}function vp(e){return function(){Ho(this,e)}}function mp(e,t){return function(){(t.apply(this,arguments)?No:Ho)(this,e)}}function _p(e,t){var r=Bo(e+"");if(arguments.length<2){for(var i=_n(this.node()),h=-1,_=r.length;++h<_;)if(!i.contains(r[h]))return!1;return!0}return this.each((typeof t=="function"?mp:t?pp:vp)(r,t))}function bp(){this.textContent=""}function yp(e){return function(){this.textContent=e}}function xp(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function $p(e){return arguments.length?this.each(e==null?bp:(typeof e=="function"?xp:yp)(e)):this.node().textContent}function wp(){this.innerHTML=""}function Sp(e){return function(){this.innerHTML=e}}function Cp(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function kp(e){return arguments.length?this.each(e==null?wp:(typeof e=="function"?Cp:Sp)(e)):this.node().innerHTML}function Ap(){this.nextSibling&&this.parentNode.appendChild(this)}function Mp(){return this.each(Ap)}function Ep(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Lp(){return this.each(Ep)}function Rp(e){var t=typeof e=="function"?e:Lo(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Dp(){return null}function Tp(e,t){var r=typeof e=="function"?e:Lo(e),i=t==null?Dp:typeof t=="function"?t:mn(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function Pp(){var e=this.parentNode;e&&e.removeChild(this)}function Ip(){return this.each(Pp)}function Bp(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Op(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Np(e){return this.select(e?Op:Bp)}function Hp(e){return arguments.length?this.property("__data__",e):this.node().__data__}function zp(e){return function(t){e.call(this,t,this.__data__)}}function Fp(e){return e.trim().split(/^|\s+/).map(function(t){var r="",i=t.indexOf(".");return i>=0&&(r=t.slice(i+1),t=t.slice(0,i)),{type:t,name:r}})}function jp(e){return function(){var t=this.__on;if(t){for(var r=0,i=-1,h=t.length,_;r<h;++r)_=t[r],(!e.type||_.type===e.type)&&_.name===e.name?this.removeEventListener(_.type,_.listener,_.options):t[++i]=_;++i?t.length=i:delete this.__on}}}function Up(e,t,r){return function(){var i=this.__on,h,_=zp(t);if(i){for(var f=0,s=i.length;f<s;++f)if((h=i[f]).type===e.type&&h.name===e.name){this.removeEventListener(h.type,h.listener,h.options),this.addEventListener(h.type,h.listener=_,h.options=r),h.value=t;return}}this.addEventListener(e.type,_,r),h={type:e.type,name:e.name,value:t,listener:_,options:r},i?i.push(h):this.__on=[h]}}function Vp(e,t,r){var i=Fp(e+""),h,_=i.length,f;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,g;l<u;++l)for(h=0,g=s[l];h<_;++h)if((f=i[h]).type===g.type&&f.name===g.name)return g.value}return}for(s=t?Up:jp,h=0;h<_;++h)this.each(s(i[h],t,r));return this}function zo(e,t,r){var i=Io(e),h=i.CustomEvent;typeof h=="function"?h=new h(t,r):(h=i.document.createEvent("Event"),r?(h.initEvent(t,r.bubbles,r.cancelable),h.detail=r.detail):h.initEvent(t,!1,!1)),e.dispatchEvent(h)}function Wp(e,t){return function(){return zo(this,e,t)}}function qp(e,t){return function(){return zo(this,e,t.apply(this,arguments))}}function Kp(e,t){return this.each((typeof t=="function"?qp:Wp)(e,t))}function*Yp(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i=e[t],h=0,_=i.length,f;h<_;++h)(f=i[h])&&(yield f)}var Fo=[null];function er(e,t){this._groups=e,this._parents=t}function Rs(){return new er([[document.documentElement]],Fo)}function Gp(){return this}er.prototype=Rs.prototype={constructor:er,select:xg,selectAll:Cg,selectChild:Eg,selectChildren:Tg,filter:Pg,data:zg,enter:Ig,exit:jg,join:Ug,merge:Vg,selection:Gp,order:Wg,sort:qg,call:Yg,nodes:Gg,node:Jg,size:Xg,empty:Zg,each:Qg,attr:lp,style:dp,property:gp,classed:_p,text:$p,html:kp,raise:Mp,lower:Lp,append:Rp,insert:Tp,remove:Ip,clone:Np,datum:Hp,on:Vp,dispatch:Kp,[Symbol.iterator]:Yp};function Ut(e){return typeof e=="string"?new er([[document.querySelector(e)]],[document.documentElement]):new er([[e]],Fo)}function Jp(e){let t;for(;t=e.sourceEvent;)e=t;return e}function $r(e,t){if(e=Jp(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var i=r.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var h=t.getBoundingClientRect();return[e.clientX-h.left-t.clientLeft,e.clientY-h.top-t.clientTop]}}return[e.pageX,e.pageY]}const Xp={passive:!1},Cs={capture:!0,passive:!1};function Wi(e){e.stopImmediatePropagation()}function is(e){e.preventDefault(),e.stopImmediatePropagation()}function jo(e){var t=e.document.documentElement,r=Ut(e).on("dragstart.drag",is,Cs);"onselectstart"in t?r.on("selectstart.drag",is,Cs):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Uo(e,t){var r=e.document.documentElement,i=Ut(e).on("dragstart.drag",null);t&&(i.on("click.drag",is,Cs),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const Vs=e=>()=>e;function ln(e,{sourceEvent:t,subject:r,target:i,identifier:h,active:_,x:f,y:s,dx:l,dy:u,dispatch:g}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:h,enumerable:!0,configurable:!0},active:{value:_,enumerable:!0,configurable:!0},x:{value:f,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:g}})}ln.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Zp(e){return!e.ctrlKey&&!e.button}function Qp(){return this.parentNode}function ev(e,t){return t??{x:e.x,y:e.y}}function tv(){return navigator.maxTouchPoints||"ontouchstart"in this}function rv(){var e=Zp,t=Qp,r=ev,i=tv,h={},_=Ls("start","drag","end"),f=0,s,l,u,g,p=0;function b(v){v.on("mousedown.drag",m).filter(i).on("touchstart.drag",n).on("touchmove.drag",d,Xp).on("touchend.drag touchcancel.drag",a).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(v,x){if(!(g||!e.call(this,v,x))){var S=c(this,t.call(this,v,x),v,x,"mouse");S&&(Ut(v.view).on("mousemove.drag",C,Cs).on("mouseup.drag",y,Cs),jo(v.view),Wi(v),u=!1,s=v.clientX,l=v.clientY,S("start",v))}}function C(v){if(is(v),!u){var x=v.clientX-s,S=v.clientY-l;u=x*x+S*S>p}h.mouse("drag",v)}function y(v){Ut(v.view).on("mousemove.drag mouseup.drag",null),Uo(v.view,u),is(v),h.mouse("end",v)}function n(v,x){if(e.call(this,v,x)){var S=v.changedTouches,E=t.call(this,v,x),$=S.length,k,O;for(k=0;k<$;++k)(O=c(this,E,v,x,S[k].identifier,S[k]))&&(Wi(v),O("start",v,S[k]))}}function d(v){var x=v.changedTouches,S=x.length,E,$;for(E=0;E<S;++E)($=h[x[E].identifier])&&(is(v),$("drag",v,x[E]))}function a(v){var x=v.changedTouches,S=x.length,E,$;for(g&&clearTimeout(g),g=setTimeout(function(){g=null},500),E=0;E<S;++E)($=h[x[E].identifier])&&(Wi(v),$("end",v,x[E]))}function c(v,x,S,E,$,k){var O=_.copy(),B=$r(k||S,x),D,I,A;if((A=r.call(v,new ln("beforestart",{sourceEvent:S,target:b,identifier:$,active:f,x:B[0],y:B[1],dx:0,dy:0,dispatch:O}),E))!=null)return D=A.x-B[0]||0,I=A.y-B[1]||0,function P(R,N,w){var H=B,z;switch(R){case"start":h[$]=P,z=f++;break;case"end":delete h[$],--f;case"drag":B=$r(w||N,x),z=f;break}O.call(R,v,new ln(R,{sourceEvent:N,subject:A,target:b,identifier:$,active:z,x:B[0]+D,y:B[1]+I,dx:B[0]-H[0],dy:B[1]-H[1],dispatch:O}),E)}}return b.filter=function(v){return arguments.length?(e=typeof v=="function"?v:Vs(!!v),b):e},b.container=function(v){return arguments.length?(t=typeof v=="function"?v:Vs(v),b):t},b.subject=function(v){return arguments.length?(r=typeof v=="function"?v:Vs(v),b):r},b.touchable=function(v){return arguments.length?(i=typeof v=="function"?v:Vs(!!v),b):i},b.on=function(){var v=_.on.apply(_,arguments);return v===_?b:v},b.clickDistance=function(v){return arguments.length?(p=(v=+v)*v,b):Math.sqrt(p)},b}function bn(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Vo(e,t){var r=Object.create(e.prototype);for(var i in t)r[i]=t[i];return r}function Ds(){}var ks=.7,gi=1/ks,ns="\\s*([+-]?\\d+)\\s*",As="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",pr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sv=/^#([0-9a-f]{3,8})$/,iv=new RegExp(`^rgb\\(${ns},${ns},${ns}\\)$`),nv=new RegExp(`^rgb\\(${pr},${pr},${pr}\\)$`),lv=new RegExp(`^rgba\\(${ns},${ns},${ns},${As}\\)$`),ov=new RegExp(`^rgba\\(${pr},${pr},${pr},${As}\\)$`),av=new RegExp(`^hsl\\(${As},${pr},${pr}\\)$`),cv=new RegExp(`^hsla\\(${As},${pr},${pr},${As}\\)$`),ml={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};bn(Ds,Ms,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_l,formatHex:_l,formatHex8:dv,formatHsl:hv,formatRgb:bl,toString:bl});function _l(){return this.rgb().formatHex()}function dv(){return this.rgb().formatHex8()}function hv(){return Wo(this).formatHsl()}function bl(){return this.rgb().formatRgb()}function Ms(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=sv.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?yl(t):r===3?new Gt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Ws(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Ws(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=iv.exec(e))?new Gt(t[1],t[2],t[3],1):(t=nv.exec(e))?new Gt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=lv.exec(e))?Ws(t[1],t[2],t[3],t[4]):(t=ov.exec(e))?Ws(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=av.exec(e))?wl(t[1],t[2]/100,t[3]/100,1):(t=cv.exec(e))?wl(t[1],t[2]/100,t[3]/100,t[4]):ml.hasOwnProperty(e)?yl(ml[e]):e==="transparent"?new Gt(NaN,NaN,NaN,0):null}function yl(e){return new Gt(e>>16&255,e>>8&255,e&255,1)}function Ws(e,t,r,i){return i<=0&&(e=t=r=NaN),new Gt(e,t,r,i)}function uv(e){return e instanceof Ds||(e=Ms(e)),e?(e=e.rgb(),new Gt(e.r,e.g,e.b,e.opacity)):new Gt}function on(e,t,r,i){return arguments.length===1?uv(e):new Gt(e,t,r,i??1)}function Gt(e,t,r,i){this.r=+e,this.g=+t,this.b=+r,this.opacity=+i}bn(Gt,on,Vo(Ds,{brighter(e){return e=e==null?gi:Math.pow(gi,e),new Gt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ks:Math.pow(ks,e),new Gt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Gt(qr(this.r),qr(this.g),qr(this.b),pi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:xl,formatHex:xl,formatHex8:fv,formatRgb:$l,toString:$l}));function xl(){return`#${Vr(this.r)}${Vr(this.g)}${Vr(this.b)}`}function fv(){return`#${Vr(this.r)}${Vr(this.g)}${Vr(this.b)}${Vr((isNaN(this.opacity)?1:this.opacity)*255)}`}function $l(){const e=pi(this.opacity);return`${e===1?"rgb(":"rgba("}${qr(this.r)}, ${qr(this.g)}, ${qr(this.b)}${e===1?")":`, ${e})`}`}function pi(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function qr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Vr(e){return e=qr(e),(e<16?"0":"")+e.toString(16)}function wl(e,t,r,i){return i<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new ar(e,t,r,i)}function Wo(e){if(e instanceof ar)return new ar(e.h,e.s,e.l,e.opacity);if(e instanceof Ds||(e=Ms(e)),!e)return new ar;if(e instanceof ar)return e;e=e.rgb();var t=e.r/255,r=e.g/255,i=e.b/255,h=Math.min(t,r,i),_=Math.max(t,r,i),f=NaN,s=_-h,l=(_+h)/2;return s?(t===_?f=(r-i)/s+(r<i)*6:r===_?f=(i-t)/s+2:f=(t-r)/s+4,s/=l<.5?_+h:2-_-h,f*=60):s=l>0&&l<1?0:f,new ar(f,s,l,e.opacity)}function gv(e,t,r,i){return arguments.length===1?Wo(e):new ar(e,t,r,i??1)}function ar(e,t,r,i){this.h=+e,this.s=+t,this.l=+r,this.opacity=+i}bn(ar,gv,Vo(Ds,{brighter(e){return e=e==null?gi:Math.pow(gi,e),new ar(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ks:Math.pow(ks,e),new ar(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*t,h=2*r-i;return new Gt(qi(e>=240?e-240:e+120,h,i),qi(e,h,i),qi(e<120?e+240:e-120,h,i),this.opacity)},clamp(){return new ar(Sl(this.h),qs(this.s),qs(this.l),pi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=pi(this.opacity);return`${e===1?"hsl(":"hsla("}${Sl(this.h)}, ${qs(this.s)*100}%, ${qs(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Sl(e){return e=(e||0)%360,e<0?e+360:e}function qs(e){return Math.max(0,Math.min(1,e||0))}function qi(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const qo=e=>()=>e;function pv(e,t){return function(r){return e+r*t}}function vv(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(i){return Math.pow(e+i*t,r)}}function mv(e){return(e=+e)==1?Ko:function(t,r){return r-t?vv(t,r,e):qo(isNaN(t)?r:t)}}function Ko(e,t){var r=t-e;return r?pv(e,r):qo(isNaN(e)?t:e)}const Cl=function e(t){var r=mv(t);function i(h,_){var f=r((h=on(h)).r,(_=on(_)).r),s=r(h.g,_.g),l=r(h.b,_.b),u=Ko(h.opacity,_.opacity);return function(g){return h.r=f(g),h.g=s(g),h.b=l(g),h.opacity=u(g),h+""}}return i.gamma=e,i}(1);function Tr(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var an=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ki=new RegExp(an.source,"g");function _v(e){return function(){return e}}function bv(e){return function(t){return e(t)+""}}function yv(e,t){var r=an.lastIndex=Ki.lastIndex=0,i,h,_,f=-1,s=[],l=[];for(e=e+"",t=t+"";(i=an.exec(e))&&(h=Ki.exec(t));)(_=h.index)>r&&(_=t.slice(r,_),s[f]?s[f]+=_:s[++f]=_),(i=i[0])===(h=h[0])?s[f]?s[f]+=h:s[++f]=h:(s[++f]=null,l.push({i:f,x:Tr(i,h)})),r=Ki.lastIndex;return r<t.length&&(_=t.slice(r),s[f]?s[f]+=_:s[++f]=_),s.length<2?l[0]?bv(l[0].x):_v(t):(t=l.length,function(u){for(var g=0,p;g<t;++g)s[(p=l[g]).i]=p.x(u);return s.join("")})}var kl=180/Math.PI,cn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Yo(e,t,r,i,h,_){var f,s,l;return(f=Math.sqrt(e*e+t*t))&&(e/=f,t/=f),(l=e*r+t*i)&&(r-=e*l,i-=t*l),(s=Math.sqrt(r*r+i*i))&&(r/=s,i/=s,l/=s),e*i<t*r&&(e=-e,t=-t,l=-l,f=-f),{translateX:h,translateY:_,rotate:Math.atan2(t,e)*kl,skewX:Math.atan(l)*kl,scaleX:f,scaleY:s}}var Ks;function xv(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?cn:Yo(t.a,t.b,t.c,t.d,t.e,t.f)}function $v(e){return e==null||(Ks||(Ks=document.createElementNS("http://www.w3.org/2000/svg","g")),Ks.setAttribute("transform",e),!(e=Ks.transform.baseVal.consolidate()))?cn:(e=e.matrix,Yo(e.a,e.b,e.c,e.d,e.e,e.f))}function Go(e,t,r,i){function h(u){return u.length?u.pop()+" ":""}function _(u,g,p,b,m,C){if(u!==p||g!==b){var y=m.push("translate(",null,t,null,r);C.push({i:y-4,x:Tr(u,p)},{i:y-2,x:Tr(g,b)})}else(p||b)&&m.push("translate("+p+t+b+r)}function f(u,g,p,b){u!==g?(u-g>180?g+=360:g-u>180&&(u+=360),b.push({i:p.push(h(p)+"rotate(",null,i)-2,x:Tr(u,g)})):g&&p.push(h(p)+"rotate("+g+i)}function s(u,g,p,b){u!==g?b.push({i:p.push(h(p)+"skewX(",null,i)-2,x:Tr(u,g)}):g&&p.push(h(p)+"skewX("+g+i)}function l(u,g,p,b,m,C){if(u!==p||g!==b){var y=m.push(h(m)+"scale(",null,",",null,")");C.push({i:y-4,x:Tr(u,p)},{i:y-2,x:Tr(g,b)})}else(p!==1||b!==1)&&m.push(h(m)+"scale("+p+","+b+")")}return function(u,g){var p=[],b=[];return u=e(u),g=e(g),_(u.translateX,u.translateY,g.translateX,g.translateY,p,b),f(u.rotate,g.rotate,p,b),s(u.skewX,g.skewX,p,b),l(u.scaleX,u.scaleY,g.scaleX,g.scaleY,p,b),u=g=null,function(m){for(var C=-1,y=b.length,n;++C<y;)p[(n=b[C]).i]=n.x(m);return p.join("")}}}var wv=Go(xv,"px, ","px)","deg)"),Sv=Go($v,", ",")",")"),Cv=1e-12;function Al(e){return((e=Math.exp(e))+1/e)/2}function kv(e){return((e=Math.exp(e))-1/e)/2}function Av(e){return((e=Math.exp(2*e))-1)/(e+1)}const Mv=function e(t,r,i){function h(_,f){var s=_[0],l=_[1],u=_[2],g=f[0],p=f[1],b=f[2],m=g-s,C=p-l,y=m*m+C*C,n,d;if(y<Cv)d=Math.log(b/u)/t,n=function(E){return[s+E*m,l+E*C,u*Math.exp(t*E*d)]};else{var a=Math.sqrt(y),c=(b*b-u*u+i*y)/(2*u*r*a),v=(b*b-u*u-i*y)/(2*b*r*a),x=Math.log(Math.sqrt(c*c+1)-c),S=Math.log(Math.sqrt(v*v+1)-v);d=(S-x)/t,n=function(E){var $=E*d,k=Al(x),O=u/(r*a)*(k*Av(t*$+x)-kv(x));return[s+O*m,l+O*C,u*k/Al(t*$+x)]}}return n.duration=d*1e3*t/Math.SQRT2,n}return h.rho=function(_){var f=Math.max(.001,+_),s=f*f,l=s*s;return e(f,s,l)},h}(Math.SQRT2,2,4);var as=0,bs=0,gs=0,Jo=1e3,vi,ys,mi=0,Kr=0,ki=0,Es=typeof performance=="object"&&performance.now?performance:Date,Xo=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function yn(){return Kr||(Xo(Ev),Kr=Es.now()+ki)}function Ev(){Kr=0}function _i(){this._call=this._time=this._next=null}_i.prototype=xn.prototype={constructor:_i,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?yn():+r)+(t==null?0:+t),!this._next&&ys!==this&&(ys?ys._next=this:vi=this,ys=this),this._call=e,this._time=r,dn()},stop:function(){this._call&&(this._call=null,this._time=1/0,dn())}};function xn(e,t,r){var i=new _i;return i.restart(e,t,r),i}function Lv(){yn(),++as;for(var e=vi,t;e;)(t=Kr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--as}function Ml(){Kr=(mi=Es.now())+ki,as=bs=0;try{Lv()}finally{as=0,Dv(),Kr=0}}function Rv(){var e=Es.now(),t=e-mi;t>Jo&&(ki-=t,mi=e)}function Dv(){for(var e,t=vi,r,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:vi=r);ys=e,dn(i)}function dn(e){if(!as){bs&&(bs=clearTimeout(bs));var t=e-Kr;t>24?(e<1/0&&(bs=setTimeout(Ml,e-Es.now()-ki)),gs&&(gs=clearInterval(gs))):(gs||(mi=Es.now(),gs=setInterval(Rv,Jo)),as=1,Xo(Ml))}}function El(e,t,r){var i=new _i;return t=t==null?0:+t,i.restart(h=>{i.stop(),e(h+t)},t,r),i}var Tv=Ls("start","end","cancel","interrupt"),Pv=[],Zo=0,Ll=1,hn=2,ri=3,Rl=4,un=5,si=6;function Ai(e,t,r,i,h,_){var f=e.__transition;if(!f)e.__transition={};else if(r in f)return;Iv(e,r,{name:t,index:i,group:h,on:Tv,tween:Pv,time:_.time,delay:_.delay,duration:_.duration,ease:_.ease,timer:null,state:Zo})}function $n(e,t){var r=dr(e,t);if(r.state>Zo)throw new Error("too late; already scheduled");return r}function vr(e,t){var r=dr(e,t);if(r.state>ri)throw new Error("too late; already running");return r}function dr(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function Iv(e,t,r){var i=e.__transition,h;i[t]=r,r.timer=xn(_,0,r.time);function _(u){r.state=Ll,r.timer.restart(f,r.delay,r.time),r.delay<=u&&f(u-r.delay)}function f(u){var g,p,b,m;if(r.state!==Ll)return l();for(g in i)if(m=i[g],m.name===r.name){if(m.state===ri)return El(f);m.state===Rl?(m.state=si,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete i[g]):+g<t&&(m.state=si,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete i[g])}if(El(function(){r.state===ri&&(r.state=Rl,r.timer.restart(s,r.delay,r.time),s(u))}),r.state=hn,r.on.call("start",e,e.__data__,r.index,r.group),r.state===hn){for(r.state=ri,h=new Array(b=r.tween.length),g=0,p=-1;g<b;++g)(m=r.tween[g].value.call(e,e.__data__,r.index,r.group))&&(h[++p]=m);h.length=p+1}}function s(u){for(var g=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(l),r.state=un,1),p=-1,b=h.length;++p<b;)h[p].call(e,g);r.state===un&&(r.on.call("end",e,e.__data__,r.index,r.group),l())}function l(){r.state=si,r.timer.stop(),delete i[t];for(var u in i)return;delete e.__transition}}function ii(e,t){var r=e.__transition,i,h,_=!0,f;if(r){t=t==null?null:t+"";for(f in r){if((i=r[f]).name!==t){_=!1;continue}h=i.state>hn&&i.state<un,i.state=si,i.timer.stop(),i.on.call(h?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete r[f]}_&&delete e.__transition}}function Bv(e){return this.each(function(){ii(this,e)})}function Ov(e,t){var r,i;return function(){var h=vr(this,e),_=h.tween;if(_!==r){i=r=_;for(var f=0,s=i.length;f<s;++f)if(i[f].name===t){i=i.slice(),i.splice(f,1);break}}h.tween=i}}function Nv(e,t,r){var i,h;if(typeof r!="function")throw new Error;return function(){var _=vr(this,e),f=_.tween;if(f!==i){h=(i=f).slice();for(var s={name:t,value:r},l=0,u=h.length;l<u;++l)if(h[l].name===t){h[l]=s;break}l===u&&h.push(s)}_.tween=h}}function Hv(e,t){var r=this._id;if(e+="",arguments.length<2){for(var i=dr(this.node(),r).tween,h=0,_=i.length,f;h<_;++h)if((f=i[h]).name===e)return f.value;return null}return this.each((t==null?Ov:Nv)(r,e,t))}function wn(e,t,r){var i=e._id;return e.each(function(){var h=vr(this,i);(h.value||(h.value={}))[t]=r.apply(this,arguments)}),function(h){return dr(h,i).value[t]}}function Qo(e,t){var r;return(typeof t=="number"?Tr:t instanceof Ms?Cl:(r=Ms(t))?(t=r,Cl):yv)(e,t)}function zv(e){return function(){this.removeAttribute(e)}}function Fv(e){return function(){this.removeAttributeNS(e.space,e.local)}}function jv(e,t,r){var i,h=r+"",_;return function(){var f=this.getAttribute(e);return f===h?null:f===i?_:_=t(i=f,r)}}function Uv(e,t,r){var i,h=r+"",_;return function(){var f=this.getAttributeNS(e.space,e.local);return f===h?null:f===i?_:_=t(i=f,r)}}function Vv(e,t,r){var i,h,_;return function(){var f,s=r(this),l;return s==null?void this.removeAttribute(e):(f=this.getAttribute(e),l=s+"",f===l?null:f===i&&l===h?_:(h=l,_=t(i=f,s)))}}function Wv(e,t,r){var i,h,_;return function(){var f,s=r(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(f=this.getAttributeNS(e.space,e.local),l=s+"",f===l?null:f===i&&l===h?_:(h=l,_=t(i=f,s)))}}function qv(e,t){var r=Ci(e),i=r==="transform"?Sv:Qo;return this.attrTween(e,typeof t=="function"?(r.local?Wv:Vv)(r,i,wn(this,"attr."+e,t)):t==null?(r.local?Fv:zv)(r):(r.local?Uv:jv)(r,i,t))}function Kv(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function Yv(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function Gv(e,t){var r,i;function h(){var _=t.apply(this,arguments);return _!==i&&(r=(i=_)&&Yv(e,_)),r}return h._value=t,h}function Jv(e,t){var r,i;function h(){var _=t.apply(this,arguments);return _!==i&&(r=(i=_)&&Kv(e,_)),r}return h._value=t,h}function Xv(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var i=Ci(e);return this.tween(r,(i.local?Gv:Jv)(i,t))}function Zv(e,t){return function(){$n(this,e).delay=+t.apply(this,arguments)}}function Qv(e,t){return t=+t,function(){$n(this,e).delay=t}}function e0(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Zv:Qv)(t,e)):dr(this.node(),t).delay}function t0(e,t){return function(){vr(this,e).duration=+t.apply(this,arguments)}}function r0(e,t){return t=+t,function(){vr(this,e).duration=t}}function s0(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?t0:r0)(t,e)):dr(this.node(),t).duration}function i0(e,t){if(typeof t!="function")throw new Error;return function(){vr(this,e).ease=t}}function n0(e){var t=this._id;return arguments.length?this.each(i0(t,e)):dr(this.node(),t).ease}function l0(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;vr(this,e).ease=r}}function o0(e){if(typeof e!="function")throw new Error;return this.each(l0(this._id,e))}function a0(e){typeof e!="function"&&(e=Do(e));for(var t=this._groups,r=t.length,i=new Array(r),h=0;h<r;++h)for(var _=t[h],f=_.length,s=i[h]=[],l,u=0;u<f;++u)(l=_[u])&&e.call(l,l.__data__,u,_)&&s.push(l);return new Ar(i,this._parents,this._name,this._id)}function c0(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,i=t.length,h=r.length,_=Math.min(i,h),f=new Array(i),s=0;s<_;++s)for(var l=t[s],u=r[s],g=l.length,p=f[s]=new Array(g),b,m=0;m<g;++m)(b=l[m]||u[m])&&(p[m]=b);for(;s<i;++s)f[s]=t[s];return new Ar(f,this._parents,this._name,this._id)}function d0(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function h0(e,t,r){var i,h,_=d0(t)?$n:vr;return function(){var f=_(this,e),s=f.on;s!==i&&(h=(i=s).copy()).on(t,r),f.on=h}}function u0(e,t){var r=this._id;return arguments.length<2?dr(this.node(),r).on.on(e):this.each(h0(r,e,t))}function f0(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function g0(){return this.on("end.remove",f0(this._id))}function p0(e){var t=this._name,r=this._id;typeof e!="function"&&(e=mn(e));for(var i=this._groups,h=i.length,_=new Array(h),f=0;f<h;++f)for(var s=i[f],l=s.length,u=_[f]=new Array(l),g,p,b=0;b<l;++b)(g=s[b])&&(p=e.call(g,g.__data__,b,s))&&("__data__"in g&&(p.__data__=g.__data__),u[b]=p,Ai(u[b],t,r,b,u,dr(g,r)));return new Ar(_,this._parents,t,r)}function v0(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Ro(e));for(var i=this._groups,h=i.length,_=[],f=[],s=0;s<h;++s)for(var l=i[s],u=l.length,g,p=0;p<u;++p)if(g=l[p]){for(var b=e.call(g,g.__data__,p,l),m,C=dr(g,r),y=0,n=b.length;y<n;++y)(m=b[y])&&Ai(m,t,r,y,b,C);_.push(b),f.push(g)}return new Ar(_,f,t,r)}var m0=Rs.prototype.constructor;function _0(){return new m0(this._groups,this._parents)}function b0(e,t){var r,i,h;return function(){var _=os(this,e),f=(this.style.removeProperty(e),os(this,e));return _===f?null:_===r&&f===i?h:h=t(r=_,i=f)}}function ea(e){return function(){this.style.removeProperty(e)}}function y0(e,t,r){var i,h=r+"",_;return function(){var f=os(this,e);return f===h?null:f===i?_:_=t(i=f,r)}}function x0(e,t,r){var i,h,_;return function(){var f=os(this,e),s=r(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),os(this,e))),f===l?null:f===i&&l===h?_:(h=l,_=t(i=f,s))}}function $0(e,t){var r,i,h,_="style."+t,f="end."+_,s;return function(){var l=vr(this,e),u=l.on,g=l.value[_]==null?s||(s=ea(t)):void 0;(u!==r||h!==g)&&(i=(r=u).copy()).on(f,h=g),l.on=i}}function w0(e,t,r){var i=(e+="")=="transform"?wv:Qo;return t==null?this.styleTween(e,b0(e,i)).on("end.style."+e,ea(e)):typeof t=="function"?this.styleTween(e,x0(e,i,wn(this,"style."+e,t))).each($0(this._id,e)):this.styleTween(e,y0(e,i,t),r).on("end.style."+e,null)}function S0(e,t,r){return function(i){this.style.setProperty(e,t.call(this,i),r)}}function C0(e,t,r){var i,h;function _(){var f=t.apply(this,arguments);return f!==h&&(i=(h=f)&&S0(e,f,r)),i}return _._value=t,_}function k0(e,t,r){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,C0(e,t,r??""))}function A0(e){return function(){this.textContent=e}}function M0(e){return function(){var t=e(this);this.textContent=t??""}}function E0(e){return this.tween("text",typeof e=="function"?M0(wn(this,"text",e)):A0(e==null?"":e+""))}function L0(e){return function(t){this.textContent=e.call(this,t)}}function R0(e){var t,r;function i(){var h=e.apply(this,arguments);return h!==r&&(t=(r=h)&&L0(h)),t}return i._value=e,i}function D0(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,R0(e))}function T0(){for(var e=this._name,t=this._id,r=ta(),i=this._groups,h=i.length,_=0;_<h;++_)for(var f=i[_],s=f.length,l,u=0;u<s;++u)if(l=f[u]){var g=dr(l,t);Ai(l,e,r,u,f,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new Ar(i,this._parents,e,r)}function P0(){var e,t,r=this,i=r._id,h=r.size();return new Promise(function(_,f){var s={value:f},l={value:function(){--h===0&&_()}};r.each(function(){var u=vr(this,i),g=u.on;g!==e&&(t=(e=g).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),u.on=t}),h===0&&_()})}var I0=0;function Ar(e,t,r,i){this._groups=e,this._parents=t,this._name=r,this._id=i}function ta(){return++I0}var xr=Rs.prototype;Ar.prototype={constructor:Ar,select:p0,selectAll:v0,selectChild:xr.selectChild,selectChildren:xr.selectChildren,filter:a0,merge:c0,selection:_0,transition:T0,call:xr.call,nodes:xr.nodes,node:xr.node,size:xr.size,empty:xr.empty,each:xr.each,on:u0,attr:qv,attrTween:Xv,style:w0,styleTween:k0,text:E0,textTween:D0,remove:g0,tween:Hv,delay:e0,duration:s0,ease:n0,easeVarying:o0,end:P0,[Symbol.iterator]:xr[Symbol.iterator]};function B0(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var O0={time:null,delay:0,duration:250,ease:B0};function N0(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function H0(e){var t,r;e instanceof Ar?(t=e._id,e=e._name):(t=ta(),(r=O0).time=yn(),e=e==null?null:e+"");for(var i=this._groups,h=i.length,_=0;_<h;++_)for(var f=i[_],s=f.length,l,u=0;u<s;++u)(l=f[u])&&Ai(l,e,t,u,f,r||N0(l,t));return new Ar(i,this._parents,e,t)}Rs.prototype.interrupt=Bv;Rs.prototype.transition=H0;function z0(e,t){var r,i=1;e==null&&(e=0),t==null&&(t=0);function h(){var _,f=r.length,s,l=0,u=0;for(_=0;_<f;++_)s=r[_],l+=s.x,u+=s.y;for(l=(l/f-e)*i,u=(u/f-t)*i,_=0;_<f;++_)s=r[_],s.x-=l,s.y-=u}return h.initialize=function(_){r=_},h.x=function(_){return arguments.length?(e=+_,h):e},h.y=function(_){return arguments.length?(t=+_,h):t},h.strength=function(_){return arguments.length?(i=+_,h):i},h}function F0(e){const t=+this._x.call(null,e),r=+this._y.call(null,e);return ra(this.cover(t,r),t,r,e)}function ra(e,t,r,i){if(isNaN(t)||isNaN(r))return e;var h,_=e._root,f={data:i},s=e._x0,l=e._y0,u=e._x1,g=e._y1,p,b,m,C,y,n,d,a;if(!_)return e._root=f,e;for(;_.length;)if((y=t>=(p=(s+u)/2))?s=p:u=p,(n=r>=(b=(l+g)/2))?l=b:g=b,h=_,!(_=_[d=n<<1|y]))return h[d]=f,e;if(m=+e._x.call(null,_.data),C=+e._y.call(null,_.data),t===m&&r===C)return f.next=_,h?h[d]=f:e._root=f,e;do h=h?h[d]=new Array(4):e._root=new Array(4),(y=t>=(p=(s+u)/2))?s=p:u=p,(n=r>=(b=(l+g)/2))?l=b:g=b;while((d=n<<1|y)===(a=(C>=b)<<1|m>=p));return h[a]=_,h[d]=f,e}function j0(e){var t,r,i=e.length,h,_,f=new Array(i),s=new Array(i),l=1/0,u=1/0,g=-1/0,p=-1/0;for(r=0;r<i;++r)isNaN(h=+this._x.call(null,t=e[r]))||isNaN(_=+this._y.call(null,t))||(f[r]=h,s[r]=_,h<l&&(l=h),h>g&&(g=h),_<u&&(u=_),_>p&&(p=_));if(l>g||u>p)return this;for(this.cover(l,u).cover(g,p),r=0;r<i;++r)ra(this,f[r],s[r],e[r]);return this}function U0(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var r=this._x0,i=this._y0,h=this._x1,_=this._y1;if(isNaN(r))h=(r=Math.floor(e))+1,_=(i=Math.floor(t))+1;else{for(var f=h-r||1,s=this._root,l,u;r>e||e>=h||i>t||t>=_;)switch(u=(t<i)<<1|e<r,l=new Array(4),l[u]=s,s=l,f*=2,u){case 0:h=r+f,_=i+f;break;case 1:r=h-f,_=i+f;break;case 2:h=r+f,i=_-f;break;case 3:r=h-f,i=_-f;break}this._root&&this._root.length&&(this._root=s)}return this._x0=r,this._y0=i,this._x1=h,this._y1=_,this}function V0(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function W0(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Vt(e,t,r,i,h){this.node=e,this.x0=t,this.y0=r,this.x1=i,this.y1=h}function q0(e,t,r){var i,h=this._x0,_=this._y0,f,s,l,u,g=this._x1,p=this._y1,b=[],m=this._root,C,y;for(m&&b.push(new Vt(m,h,_,g,p)),r==null?r=1/0:(h=e-r,_=t-r,g=e+r,p=t+r,r*=r);C=b.pop();)if(!(!(m=C.node)||(f=C.x0)>g||(s=C.y0)>p||(l=C.x1)<h||(u=C.y1)<_))if(m.length){var n=(f+l)/2,d=(s+u)/2;b.push(new Vt(m[3],n,d,l,u),new Vt(m[2],f,d,n,u),new Vt(m[1],n,s,l,d),new Vt(m[0],f,s,n,d)),(y=(t>=d)<<1|e>=n)&&(C=b[b.length-1],b[b.length-1]=b[b.length-1-y],b[b.length-1-y]=C)}else{var a=e-+this._x.call(null,m.data),c=t-+this._y.call(null,m.data),v=a*a+c*c;if(v<r){var x=Math.sqrt(r=v);h=e-x,_=t-x,g=e+x,p=t+x,i=m.data}}return i}function K0(e){if(isNaN(g=+this._x.call(null,e))||isNaN(p=+this._y.call(null,e)))return this;var t,r=this._root,i,h,_,f=this._x0,s=this._y0,l=this._x1,u=this._y1,g,p,b,m,C,y,n,d;if(!r)return this;if(r.length)for(;;){if((C=g>=(b=(f+l)/2))?f=b:l=b,(y=p>=(m=(s+u)/2))?s=m:u=m,t=r,!(r=r[n=y<<1|C]))return this;if(!r.length)break;(t[n+1&3]||t[n+2&3]||t[n+3&3])&&(i=t,d=n)}for(;r.data!==e;)if(h=r,!(r=r.next))return this;return(_=r.next)&&delete r.next,h?(_?h.next=_:delete h.next,this):t?(_?t[n]=_:delete t[n],(r=t[0]||t[1]||t[2]||t[3])&&r===(t[3]||t[2]||t[1]||t[0])&&!r.length&&(i?i[d]=r:this._root=r),this):(this._root=_,this)}function Y0(e){for(var t=0,r=e.length;t<r;++t)this.remove(e[t]);return this}function G0(){return this._root}function J0(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function X0(e){var t=[],r,i=this._root,h,_,f,s,l;for(i&&t.push(new Vt(i,this._x0,this._y0,this._x1,this._y1));r=t.pop();)if(!e(i=r.node,_=r.x0,f=r.y0,s=r.x1,l=r.y1)&&i.length){var u=(_+s)/2,g=(f+l)/2;(h=i[3])&&t.push(new Vt(h,u,g,s,l)),(h=i[2])&&t.push(new Vt(h,_,g,u,l)),(h=i[1])&&t.push(new Vt(h,u,f,s,g)),(h=i[0])&&t.push(new Vt(h,_,f,u,g))}return this}function Z0(e){var t=[],r=[],i;for(this._root&&t.push(new Vt(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var h=i.node;if(h.length){var _,f=i.x0,s=i.y0,l=i.x1,u=i.y1,g=(f+l)/2,p=(s+u)/2;(_=h[0])&&t.push(new Vt(_,f,s,g,p)),(_=h[1])&&t.push(new Vt(_,g,s,l,p)),(_=h[2])&&t.push(new Vt(_,f,p,g,u)),(_=h[3])&&t.push(new Vt(_,g,p,l,u))}r.push(i)}for(;i=r.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function Q0(e){return e[0]}function em(e){return arguments.length?(this._x=e,this):this._x}function tm(e){return e[1]}function rm(e){return arguments.length?(this._y=e,this):this._y}function Sn(e,t,r){var i=new Cn(t??Q0,r??tm,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function Cn(e,t,r,i,h,_){this._x=e,this._y=t,this._x0=r,this._y0=i,this._x1=h,this._y1=_,this._root=void 0}function Dl(e){for(var t={data:e.data},r=t;e=e.next;)r=r.next={data:e.data};return t}var Kt=Sn.prototype=Cn.prototype;Kt.copy=function(){var e=new Cn(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,r,i;if(!t)return e;if(!t.length)return e._root=Dl(t),e;for(r=[{source:t,target:e._root=new Array(4)}];t=r.pop();)for(var h=0;h<4;++h)(i=t.source[h])&&(i.length?r.push({source:i,target:t.target[h]=new Array(4)}):t.target[h]=Dl(i));return e};Kt.add=F0;Kt.addAll=j0;Kt.cover=U0;Kt.data=V0;Kt.extent=W0;Kt.find=q0;Kt.remove=K0;Kt.removeAll=Y0;Kt.root=G0;Kt.size=J0;Kt.visit=X0;Kt.visitAfter=Z0;Kt.x=em;Kt.y=rm;function Wt(e){return function(){return e}}function Pr(e){return(e()-.5)*1e-6}function sm(e){return e.x+e.vx}function im(e){return e.y+e.vy}function nm(e){var t,r,i,h=1,_=1;typeof e!="function"&&(e=Wt(e==null?1:+e));function f(){for(var u,g=t.length,p,b,m,C,y,n,d=0;d<_;++d)for(p=Sn(t,sm,im).visitAfter(s),u=0;u<g;++u)b=t[u],y=r[b.index],n=y*y,m=b.x+b.vx,C=b.y+b.vy,p.visit(a);function a(c,v,x,S,E){var $=c.data,k=c.r,O=y+k;if($){if($.index>b.index){var B=m-$.x-$.vx,D=C-$.y-$.vy,I=B*B+D*D;I<O*O&&(B===0&&(B=Pr(i),I+=B*B),D===0&&(D=Pr(i),I+=D*D),I=(O-(I=Math.sqrt(I)))/I*h,b.vx+=(B*=I)*(O=(k*=k)/(n+k)),b.vy+=(D*=I)*O,$.vx-=B*(O=1-O),$.vy-=D*O)}return}return v>m+O||S<m-O||x>C+O||E<C-O}}function s(u){if(u.data)return u.r=r[u.data.index];for(var g=u.r=0;g<4;++g)u[g]&&u[g].r>u.r&&(u.r=u[g].r)}function l(){if(t){var u,g=t.length,p;for(r=new Array(g),u=0;u<g;++u)p=t[u],r[p.index]=+e(p,u,t)}}return f.initialize=function(u,g){t=u,i=g,l()},f.iterations=function(u){return arguments.length?(_=+u,f):_},f.strength=function(u){return arguments.length?(h=+u,f):h},f.radius=function(u){return arguments.length?(e=typeof u=="function"?u:Wt(+u),l(),f):e},f}function lm(e){return e.index}function Tl(e,t){var r=e.get(t);if(!r)throw new Error("node not found: "+t);return r}function om(e){var t=lm,r=p,i,h=Wt(30),_,f,s,l,u,g=1;e==null&&(e=[]);function p(n){return 1/Math.min(s[n.source.index],s[n.target.index])}function b(n){for(var d=0,a=e.length;d<g;++d)for(var c=0,v,x,S,E,$,k,O;c<a;++c)v=e[c],x=v.source,S=v.target,E=S.x+S.vx-x.x-x.vx||Pr(u),$=S.y+S.vy-x.y-x.vy||Pr(u),k=Math.sqrt(E*E+$*$),k=(k-_[c])/k*n*i[c],E*=k,$*=k,S.vx-=E*(O=l[c]),S.vy-=$*O,x.vx+=E*(O=1-O),x.vy+=$*O}function m(){if(f){var n,d=f.length,a=e.length,c=new Map(f.map((x,S)=>[t(x,S,f),x])),v;for(n=0,s=new Array(d);n<a;++n)v=e[n],v.index=n,typeof v.source!="object"&&(v.source=Tl(c,v.source)),typeof v.target!="object"&&(v.target=Tl(c,v.target)),s[v.source.index]=(s[v.source.index]||0)+1,s[v.target.index]=(s[v.target.index]||0)+1;for(n=0,l=new Array(a);n<a;++n)v=e[n],l[n]=s[v.source.index]/(s[v.source.index]+s[v.target.index]);i=new Array(a),C(),_=new Array(a),y()}}function C(){if(f)for(var n=0,d=e.length;n<d;++n)i[n]=+r(e[n],n,e)}function y(){if(f)for(var n=0,d=e.length;n<d;++n)_[n]=+h(e[n],n,e)}return b.initialize=function(n,d){f=n,u=d,m()},b.links=function(n){return arguments.length?(e=n,m(),b):e},b.id=function(n){return arguments.length?(t=n,b):t},b.iterations=function(n){return arguments.length?(g=+n,b):g},b.strength=function(n){return arguments.length?(r=typeof n=="function"?n:Wt(+n),C(),b):r},b.distance=function(n){return arguments.length?(h=typeof n=="function"?n:Wt(+n),y(),b):h},b}const am=1664525,cm=1013904223,Pl=4294967296;function dm(){let e=1;return()=>(e=(am*e+cm)%Pl)/Pl}function hm(e){return e.x}function um(e){return e.y}var fm=10,gm=Math.PI*(3-Math.sqrt(5));function pm(e){var t,r=1,i=.001,h=1-Math.pow(i,1/300),_=0,f=.6,s=new Map,l=xn(p),u=Ls("tick","end"),g=dm();e==null&&(e=[]);function p(){b(),u.call("tick",t),r<i&&(l.stop(),u.call("end",t))}function b(y){var n,d=e.length,a;y===void 0&&(y=1);for(var c=0;c<y;++c)for(r+=(_-r)*h,s.forEach(function(v){v(r)}),n=0;n<d;++n)a=e[n],a.fx==null?a.x+=a.vx*=f:(a.x=a.fx,a.vx=0),a.fy==null?a.y+=a.vy*=f:(a.y=a.fy,a.vy=0);return t}function m(){for(var y=0,n=e.length,d;y<n;++y){if(d=e[y],d.index=y,d.fx!=null&&(d.x=d.fx),d.fy!=null&&(d.y=d.fy),isNaN(d.x)||isNaN(d.y)){var a=fm*Math.sqrt(.5+y),c=y*gm;d.x=a*Math.cos(c),d.y=a*Math.sin(c)}(isNaN(d.vx)||isNaN(d.vy))&&(d.vx=d.vy=0)}}function C(y){return y.initialize&&y.initialize(e,g),y}return m(),t={tick:b,restart:function(){return l.restart(p),t},stop:function(){return l.stop(),t},nodes:function(y){return arguments.length?(e=y,m(),s.forEach(C),t):e},alpha:function(y){return arguments.length?(r=+y,t):r},alphaMin:function(y){return arguments.length?(i=+y,t):i},alphaDecay:function(y){return arguments.length?(h=+y,t):+h},alphaTarget:function(y){return arguments.length?(_=+y,t):_},velocityDecay:function(y){return arguments.length?(f=1-y,t):1-f},randomSource:function(y){return arguments.length?(g=y,s.forEach(C),t):g},force:function(y,n){return arguments.length>1?(n==null?s.delete(y):s.set(y,C(n)),t):s.get(y)},find:function(y,n,d){var a=0,c=e.length,v,x,S,E,$;for(d==null?d=1/0:d*=d,a=0;a<c;++a)E=e[a],v=y-E.x,x=n-E.y,S=v*v+x*x,S<d&&($=E,d=S);return $},on:function(y,n){return arguments.length>1?(u.on(y,n),t):u.on(y)}}}function vm(){var e,t,r,i,h=Wt(-30),_,f=1,s=1/0,l=.81;function u(m){var C,y=e.length,n=Sn(e,hm,um).visitAfter(p);for(i=m,C=0;C<y;++C)t=e[C],n.visit(b)}function g(){if(e){var m,C=e.length,y;for(_=new Array(C),m=0;m<C;++m)y=e[m],_[y.index]=+h(y,m,e)}}function p(m){var C=0,y,n,d=0,a,c,v;if(m.length){for(a=c=v=0;v<4;++v)(y=m[v])&&(n=Math.abs(y.value))&&(C+=y.value,d+=n,a+=n*y.x,c+=n*y.y);m.x=a/d,m.y=c/d}else{y=m,y.x=y.data.x,y.y=y.data.y;do C+=_[y.data.index];while(y=y.next)}m.value=C}function b(m,C,y,n){if(!m.value)return!0;var d=m.x-t.x,a=m.y-t.y,c=n-C,v=d*d+a*a;if(c*c/l<v)return v<s&&(d===0&&(d=Pr(r),v+=d*d),a===0&&(a=Pr(r),v+=a*a),v<f&&(v=Math.sqrt(f*v)),t.vx+=d*m.value*i/v,t.vy+=a*m.value*i/v),!0;if(m.length||v>=s)return;(m.data!==t||m.next)&&(d===0&&(d=Pr(r),v+=d*d),a===0&&(a=Pr(r),v+=a*a),v<f&&(v=Math.sqrt(f*v)));do m.data!==t&&(c=_[m.data.index]*i/v,t.vx+=d*c,t.vy+=a*c);while(m=m.next)}return u.initialize=function(m,C){e=m,r=C,g()},u.strength=function(m){return arguments.length?(h=typeof m=="function"?m:Wt(+m),g(),u):h},u.distanceMin=function(m){return arguments.length?(f=m*m,u):Math.sqrt(f)},u.distanceMax=function(m){return arguments.length?(s=m*m,u):Math.sqrt(s)},u.theta=function(m){return arguments.length?(l=m*m,u):Math.sqrt(l)},u}function mm(e){var t=Wt(.1),r,i,h;typeof e!="function"&&(e=Wt(e==null?0:+e));function _(s){for(var l=0,u=r.length,g;l<u;++l)g=r[l],g.vx+=(h[l]-g.x)*i[l]*s}function f(){if(r){var s,l=r.length;for(i=new Array(l),h=new Array(l),s=0;s<l;++s)i[s]=isNaN(h[s]=+e(r[s],s,r))?0:+t(r[s],s,r)}}return _.initialize=function(s){r=s,f()},_.strength=function(s){return arguments.length?(t=typeof s=="function"?s:Wt(+s),f(),_):t},_.x=function(s){return arguments.length?(e=typeof s=="function"?s:Wt(+s),f(),_):e},_}function _m(e){var t=Wt(.1),r,i,h;typeof e!="function"&&(e=Wt(e==null?0:+e));function _(s){for(var l=0,u=r.length,g;l<u;++l)g=r[l],g.vy+=(h[l]-g.y)*i[l]*s}function f(){if(r){var s,l=r.length;for(i=new Array(l),h=new Array(l),s=0;s<l;++s)i[s]=isNaN(h[s]=+e(r[s],s,r))?0:+t(r[s],s,r)}}return _.initialize=function(s){r=s,f()},_.strength=function(s){return arguments.length?(t=typeof s=="function"?s:Wt(+s),f(),_):t},_.y=function(s){return arguments.length?(e=typeof s=="function"?s:Wt(+s),f(),_):e},_}const Ys=e=>()=>e;function bm(e,{sourceEvent:t,target:r,transform:i,dispatch:h}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:h}})}function Sr(e,t,r){this.k=e,this.x=t,this.y=r}Sr.prototype={constructor:Sr,scale:function(e){return e===1?this:new Sr(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Sr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var kn=new Sr(1,0,0);Sr.prototype;function Yi(e){e.stopImmediatePropagation()}function ps(e){e.preventDefault(),e.stopImmediatePropagation()}function ym(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function xm(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Il(){return this.__zoom||kn}function $m(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function wm(){return navigator.maxTouchPoints||"ontouchstart"in this}function Sm(e,t,r){var i=e.invertX(t[0][0])-r[0][0],h=e.invertX(t[1][0])-r[1][0],_=e.invertY(t[0][1])-r[0][1],f=e.invertY(t[1][1])-r[1][1];return e.translate(h>i?(i+h)/2:Math.min(0,i)||Math.max(0,h),f>_?(_+f)/2:Math.min(0,_)||Math.max(0,f))}function Cm(){var e=ym,t=xm,r=Sm,i=$m,h=wm,_=[0,1/0],f=[[-1/0,-1/0],[1/0,1/0]],s=250,l=Mv,u=Ls("start","zoom","end"),g,p,b,m=500,C=150,y=0,n=10;function d(A){A.property("__zoom",Il).on("wheel.zoom",$,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",O).filter(h).on("touchstart.zoom",B).on("touchmove.zoom",D).on("touchend.zoom touchcancel.zoom",I).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}d.transform=function(A,P,R,N){var w=A.selection?A.selection():A;w.property("__zoom",Il),A!==w?x(A,P,R,N):w.interrupt().each(function(){S(this,arguments).event(N).start().zoom(null,typeof P=="function"?P.apply(this,arguments):P).end()})},d.scaleBy=function(A,P,R,N){d.scaleTo(A,function(){var w=this.__zoom.k,H=typeof P=="function"?P.apply(this,arguments):P;return w*H},R,N)},d.scaleTo=function(A,P,R,N){d.transform(A,function(){var w=t.apply(this,arguments),H=this.__zoom,z=R==null?v(w):typeof R=="function"?R.apply(this,arguments):R,U=H.invert(z),te=typeof P=="function"?P.apply(this,arguments):P;return r(c(a(H,te),z,U),w,f)},R,N)},d.translateBy=function(A,P,R,N){d.transform(A,function(){return r(this.__zoom.translate(typeof P=="function"?P.apply(this,arguments):P,typeof R=="function"?R.apply(this,arguments):R),t.apply(this,arguments),f)},null,N)},d.translateTo=function(A,P,R,N,w){d.transform(A,function(){var H=t.apply(this,arguments),z=this.__zoom,U=N==null?v(H):typeof N=="function"?N.apply(this,arguments):N;return r(kn.translate(U[0],U[1]).scale(z.k).translate(typeof P=="function"?-P.apply(this,arguments):-P,typeof R=="function"?-R.apply(this,arguments):-R),H,f)},N,w)};function a(A,P){return P=Math.max(_[0],Math.min(_[1],P)),P===A.k?A:new Sr(P,A.x,A.y)}function c(A,P,R){var N=P[0]-R[0]*A.k,w=P[1]-R[1]*A.k;return N===A.x&&w===A.y?A:new Sr(A.k,N,w)}function v(A){return[(+A[0][0]+ +A[1][0])/2,(+A[0][1]+ +A[1][1])/2]}function x(A,P,R,N){A.on("start.zoom",function(){S(this,arguments).event(N).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(N).end()}).tween("zoom",function(){var w=this,H=arguments,z=S(w,H).event(N),U=t.apply(w,H),te=R==null?v(U):typeof R=="function"?R.apply(w,H):R,F=Math.max(U[1][0]-U[0][0],U[1][1]-U[0][1]),W=w.__zoom,V=typeof P=="function"?P.apply(w,H):P,de=l(W.invert(te).concat(F/W.k),V.invert(te).concat(F/V.k));return function(M){if(M===1)M=V;else{var j=de(M),K=F/j[2];M=new Sr(K,te[0]-j[0]*K,te[1]-j[1]*K)}z.zoom(null,M)}})}function S(A,P,R){return!R&&A.__zooming||new E(A,P)}function E(A,P){this.that=A,this.args=P,this.active=0,this.sourceEvent=null,this.extent=t.apply(A,P),this.taps=0}E.prototype={event:function(A){return A&&(this.sourceEvent=A),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(A,P){return this.mouse&&A!=="mouse"&&(this.mouse[1]=P.invert(this.mouse[0])),this.touch0&&A!=="touch"&&(this.touch0[1]=P.invert(this.touch0[0])),this.touch1&&A!=="touch"&&(this.touch1[1]=P.invert(this.touch1[0])),this.that.__zoom=P,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(A){var P=Ut(this.that).datum();u.call(A,this.that,new bm(A,{sourceEvent:this.sourceEvent,target:d,transform:this.that.__zoom,dispatch:u}),P)}};function $(A,...P){if(!e.apply(this,arguments))return;var R=S(this,P).event(A),N=this.__zoom,w=Math.max(_[0],Math.min(_[1],N.k*Math.pow(2,i.apply(this,arguments)))),H=$r(A);if(R.wheel)(R.mouse[0][0]!==H[0]||R.mouse[0][1]!==H[1])&&(R.mouse[1]=N.invert(R.mouse[0]=H)),clearTimeout(R.wheel);else{if(N.k===w)return;R.mouse=[H,N.invert(H)],ii(this),R.start()}ps(A),R.wheel=setTimeout(z,C),R.zoom("mouse",r(c(a(N,w),R.mouse[0],R.mouse[1]),R.extent,f));function z(){R.wheel=null,R.end()}}function k(A,...P){if(b||!e.apply(this,arguments))return;var R=A.currentTarget,N=S(this,P,!0).event(A),w=Ut(A.view).on("mousemove.zoom",te,!0).on("mouseup.zoom",F,!0),H=$r(A,R),z=A.clientX,U=A.clientY;jo(A.view),Yi(A),N.mouse=[H,this.__zoom.invert(H)],ii(this),N.start();function te(W){if(ps(W),!N.moved){var V=W.clientX-z,de=W.clientY-U;N.moved=V*V+de*de>y}N.event(W).zoom("mouse",r(c(N.that.__zoom,N.mouse[0]=$r(W,R),N.mouse[1]),N.extent,f))}function F(W){w.on("mousemove.zoom mouseup.zoom",null),Uo(W.view,N.moved),ps(W),N.event(W).end()}}function O(A,...P){if(e.apply(this,arguments)){var R=this.__zoom,N=$r(A.changedTouches?A.changedTouches[0]:A,this),w=R.invert(N),H=R.k*(A.shiftKey?.5:2),z=r(c(a(R,H),N,w),t.apply(this,P),f);ps(A),s>0?Ut(this).transition().duration(s).call(x,z,N,A):Ut(this).call(d.transform,z,N,A)}}function B(A,...P){if(e.apply(this,arguments)){var R=A.touches,N=R.length,w=S(this,P,A.changedTouches.length===N).event(A),H,z,U,te;for(Yi(A),z=0;z<N;++z)U=R[z],te=$r(U,this),te=[te,this.__zoom.invert(te),U.identifier],w.touch0?!w.touch1&&w.touch0[2]!==te[2]&&(w.touch1=te,w.taps=0):(w.touch0=te,H=!0,w.taps=1+!!g);g&&(g=clearTimeout(g)),H&&(w.taps<2&&(p=te[0],g=setTimeout(function(){g=null},m)),ii(this),w.start())}}function D(A,...P){if(this.__zooming){var R=S(this,P).event(A),N=A.changedTouches,w=N.length,H,z,U,te;for(ps(A),H=0;H<w;++H)z=N[H],U=$r(z,this),R.touch0&&R.touch0[2]===z.identifier?R.touch0[0]=U:R.touch1&&R.touch1[2]===z.identifier&&(R.touch1[0]=U);if(z=R.that.__zoom,R.touch1){var F=R.touch0[0],W=R.touch0[1],V=R.touch1[0],de=R.touch1[1],M=(M=V[0]-F[0])*M+(M=V[1]-F[1])*M,j=(j=de[0]-W[0])*j+(j=de[1]-W[1])*j;z=a(z,Math.sqrt(M/j)),U=[(F[0]+V[0])/2,(F[1]+V[1])/2],te=[(W[0]+de[0])/2,(W[1]+de[1])/2]}else if(R.touch0)U=R.touch0[0],te=R.touch0[1];else return;R.zoom("touch",r(c(z,U,te),R.extent,f))}}function I(A,...P){if(this.__zooming){var R=S(this,P).event(A),N=A.changedTouches,w=N.length,H,z;for(Yi(A),b&&clearTimeout(b),b=setTimeout(function(){b=null},m),H=0;H<w;++H)z=N[H],R.touch0&&R.touch0[2]===z.identifier?delete R.touch0:R.touch1&&R.touch1[2]===z.identifier&&delete R.touch1;if(R.touch1&&!R.touch0&&(R.touch0=R.touch1,delete R.touch1),R.touch0)R.touch0[1]=this.__zoom.invert(R.touch0[0]);else if(R.end(),R.taps===2&&(z=$r(z,this),Math.hypot(p[0]-z[0],p[1]-z[1])<n)){var U=Ut(this).on("dblclick.zoom");U&&U.apply(this,arguments)}}}return d.wheelDelta=function(A){return arguments.length?(i=typeof A=="function"?A:Ys(+A),d):i},d.filter=function(A){return arguments.length?(e=typeof A=="function"?A:Ys(!!A),d):e},d.touchable=function(A){return arguments.length?(h=typeof A=="function"?A:Ys(!!A),d):h},d.extent=function(A){return arguments.length?(t=typeof A=="function"?A:Ys([[+A[0][0],+A[0][1]],[+A[1][0],+A[1][1]]]),d):t},d.scaleExtent=function(A){return arguments.length?(_[0]=+A[0],_[1]=+A[1],d):[_[0],_[1]]},d.translateExtent=function(A){return arguments.length?(f[0][0]=+A[0][0],f[1][0]=+A[1][0],f[0][1]=+A[0][1],f[1][1]=+A[1][1],d):[[f[0][0],f[0][1]],[f[1][0],f[1][1]]]},d.constrain=function(A){return arguments.length?(r=A,d):r},d.duration=function(A){return arguments.length?(s=+A,d):s},d.interpolate=function(A){return arguments.length?(l=A,d):l},d.on=function(){var A=u.on.apply(u,arguments);return A===u?d:A},d.clickDistance=function(A){return arguments.length?(y=(A=+A)*A,d):Math.sqrt(y)},d.tapDistance=function(A){return arguments.length?(n=+A,d):n},d}var km=T("<svg style=width:100%;height:100%;background:var(--bg-primary)>"),Am=T('<div class="p-4 text-center text-sm rounded-lg"style=background:var(--bg-tertiary);color:var(--text-muted)>No connected resources'),Mm=T('<div class=space-y-4><div class="flex items-center gap-4 p-4 rounded-lg"><div class="w-16 h-16 rounded-xl flex items-center justify-center text-3xl"></div><div><div class="font-bold text-lg"style=color:var(--text-primary)></div><div class="flex items-center gap-2 mt-1"><span class="px-2 py-0.5 rounded text-xs font-medium uppercase"style=color:white></span><span class=text-sm style=color:var(--text-muted)>in </span></div></div></div><div><h4 class="font-semibold mb-3 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg>Connected Resources (<!>)</h4><div class="grid gap-2 max-h-64 overflow-auto">'),Em=T('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Resource Map</h1><p style=color:var(--text-secondary)>D3.js force-directed graph â¢ Drag nodes â¢ Scroll to zoom â¢ Hover to highlight</p></div><div class="flex items-center gap-3"><button class=icon-btn title=Refresh style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button><button class="px-3 py-2 rounded-lg text-sm hover:bg-[var(--bg-tertiary)]"style=background:var(--bg-secondary);color:var(--text-primary)>Reset Layout</button></div></div><div class="grid grid-cols-2 md:grid-cols-6 gap-3"><div class="card p-3 flex items-center gap-3"><div class="w-10 h-10 rounded-lg flex items-center justify-center"style=background:var(--bg-tertiary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg></div><div><div class="text-xl font-bold"style=color:var(--accent-primary)></div><div class=text-xs style=color:var(--text-muted)>Connections</div></div></div></div><div class="card overflow-hidden relative"style=height:650px><div class="absolute bottom-4 left-4 p-3 rounded-lg text-xs"style="background:var(--bg-secondary);border:1px solid var(--border-color)"><div class="font-semibold mb-2"style=color:var(--text-primary)>Legend</div><div class="grid grid-cols-3 gap-x-4 gap-y-1"></div></div><div class="absolute bottom-4 right-4 px-3 py-2 rounded-lg text-xs"style=background:var(--bg-secondary);color:var(--text-muted)>ð±ï¸ Drag nodes â¢ Scroll to zoom â¢ Click for details'),Lm=T('<div class="card p-3 flex items-center gap-3"><div class="w-10 h-10 rounded-lg flex items-center justify-center text-lg"></div><div><div class="text-xl font-bold"></div><div class="text-xs capitalize"style=color:var(--text-muted)>s'),Rm=T('<div class="h-full flex items-center justify-center"><div class=spinner>'),Dm=T('<div class="h-full flex items-center justify-center flex-col gap-4"style=color:var(--text-muted)><svg class="w-20 h-20 opacity-30"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"></path></svg><p class=text-lg>No resources found</p><p class=text-sm>Select a namespace with deployments and services'),Tm=T('<div class="flex items-center gap-1.5"><span></span><span class=capitalize style=color:var(--text-muted)>'),Pm=T('<div class="p-3 rounded-lg flex items-center gap-3 cursor-pointer hover:scale-[1.02] transition-transform"style=background:var(--bg-tertiary)><div class="w-10 h-10 rounded-lg flex items-center justify-center text-lg"></div><div class="flex-1 min-w-0"><div class="font-medium truncate"style=color:var(--accent-primary)></div><div class="text-xs capitalize"style=color:var(--text-muted)></div></div><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 5l7 7-7 7">');const Im=()=>{const[e,{refetch:t}]=qe(()=>tt(),C=>De.getTopology(C==="_all"?"":C)),[r,i]=J(null),[h,_]=J(!1);let f,s,l=null;const u={node:"#22c55e",deployment:"#3b82f6",statefulset:"#8b5cf6",daemonset:"#f59e0b",service:"#06b6d4",pod:"#ec4899",configmap:"#84cc16",secret:"#ef4444",ingress:"#14b8a6",replicaset:"#6366f1",job:"#f97316",cronjob:"#a855f7"},g=()=>{if(!f||!e())return;const C=e();if(!C?.nodes||C.nodes.length===0)return;Ut(f).selectAll("*").remove(),l&&l.stop();const y=s?.clientWidth||1e3,n=650,d=Ut(f).attr("width",y).attr("height",n).attr("viewBox",[0,0,y,n]),a=d.append("g"),c=Cm().scaleExtent([.2,4]).on("zoom",w=>{a.attr("transform",w.transform)});d.call(c);const v=C.nodes.map(w=>({...w})),x=C.links.map(w=>({source:w.source,target:w.target,value:w.value||1}));l=pm(v).force("link",om(x).id(w=>w.id).distance(120).strength(.5)).force("charge",vm().strength(-400)).force("center",z0(y/2,n/2)).force("collision",nm().radius(60)).force("x",mm(y/2).strength(.05)).force("y",_m(n/2).strength(.05));const S=d.append("defs");S.append("marker").attr("id","arrowhead").attr("viewBox","-0 -5 10 10").attr("refX",25).attr("refY",0).attr("orient","auto").attr("markerWidth",8).attr("markerHeight",8).append("path").attr("d","M 0,-5 L 10 ,0 L 0,5").attr("fill","#06b6d4").style("opacity",.8);const E=S.append("linearGradient").attr("id","linkGradient").attr("gradientUnits","userSpaceOnUse");E.append("stop").attr("offset","0%").attr("stop-color","#06b6d4").attr("stop-opacity",.6),E.append("stop").attr("offset","100%").attr("stop-color","#8b5cf6").attr("stop-opacity",.6);const $=S.append("filter").attr("id","glow").attr("x","-50%").attr("y","-50%").attr("width","200%").attr("height","200%");$.append("feGaussianBlur").attr("stdDeviation","3").attr("result","coloredBlur");const k=$.append("feMerge");k.append("feMergeNode").attr("in","coloredBlur"),k.append("feMergeNode").attr("in","SourceGraphic");const O=a.append("g").attr("class","links").selectAll("path").data(x).join("path").attr("fill","none").attr("stroke","url(#linkGradient)").attr("stroke-width",2).attr("stroke-opacity",.6).attr("marker-end","url(#arrowhead)"),B=a.append("g").attr("class","nodes").selectAll("g").data(v).join("g").attr("cursor","pointer").call(rv().on("start",A).on("drag",P).on("end",R));B.append("circle").attr("class","node-ring").attr("r",45).attr("fill",w=>u[w.type]||"#6b7280").attr("fill-opacity",0).attr("stroke",w=>u[w.type]||"#6b7280").attr("stroke-width",0).attr("stroke-dasharray","4 4"),B.append("circle").attr("class","node-circle").attr("r",32).attr("fill",w=>`${u[w.type]||"#6b7280"}20`).attr("stroke",w=>u[w.type]||"#6b7280").attr("stroke-width",2.5),B.append("circle").attr("r",22).attr("fill",w=>`${u[w.type]||"#6b7280"}30`);const D={node:"ð¥ï¸",deployment:"ð¦",statefulset:"ðï¸",daemonset:"ð¹",service:"ð",pod:"ð«",configmap:"âï¸",secret:"ð",ingress:"ðª",replicaset:"ð",job:"â¡",cronjob:"â°"};B.append("text").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size","20px").text(w=>D[w.type]||"â"),B.append("text").attr("class","node-label").attr("text-anchor","middle").attr("dy",48).attr("font-size","10px").attr("fill","var(--text-primary)").attr("font-weight","500").text(w=>w.name.length>18?w.name.slice(0,15)+"...":w.name),B.append("rect").attr("x",-20).attr("y",55).attr("width",40).attr("height",14).attr("rx",7).attr("fill",w=>u[w.type]||"#6b7280").attr("fill-opacity",.9),B.append("text").attr("text-anchor","middle").attr("y",65).attr("font-size","8px").attr("fill","white").attr("font-weight","600").text(w=>w.type.toUpperCase().slice(0,6)),B.on("mouseenter",function(w,H){Ut(this).select(".node-circle").attr("filter","url(#glow)").attr("stroke-width",3.5),Ut(this).select(".node-ring").attr("fill-opacity",.1).attr("stroke-width",2),O.attr("stroke-opacity",U=>{const te=typeof U.source=="object"?U.source.id:U.source,F=typeof U.target=="object"?U.target.id:U.target;return te===H.id||F===H.id?1:.1}).attr("stroke-width",U=>{const te=typeof U.source=="object"?U.source.id:U.source,F=typeof U.target=="object"?U.target.id:U.target;return te===H.id||F===H.id?3:1});const z=new Set;z.add(H.id),x.forEach(U=>{const te=typeof U.source=="object"?U.source.id:U.source,F=typeof U.target=="object"?U.target.id:U.target;te===H.id&&z.add(F),F===H.id&&z.add(te)}),B.attr("opacity",U=>z.has(U.id)?1:.3)}).on("mouseleave",function(){Ut(this).select(".node-circle").attr("filter",null).attr("stroke-width",2.5),Ut(this).select(".node-ring").attr("fill-opacity",0).attr("stroke-width",0),O.attr("stroke-opacity",.6).attr("stroke-width",2),B.attr("opacity",1)});let I=!1;function A(w){I=!1,w.active||l?.alphaTarget(.3).restart(),w.subject.fx=w.subject.x,w.subject.fy=w.subject.y}function P(w){I=!0,w.subject.fx=w.x,w.subject.fy=w.y}function R(w){w.active||l?.alphaTarget(0)}B.on("click",function(w,H){if(I){I=!1;return}w.stopPropagation(),i(H),_(!0)}),l.on("tick",()=>{O.attr("d",w=>{const H=w.source.x,z=w.source.y,U=w.target.x,te=w.target.y,F=U-H,W=te-z,V=Math.sqrt(F*F+W*W)*.8;return`M${H},${z}A${V},${V} 0 0,1 ${U},${te}`}),B.attr("transform",w=>`translate(${w.x},${w.y})`)});const N=kn.translate(0,0).scale(.9);d.call(c.transform,N)},p=C=>{const y=e();if(!y?.links)return[];const n=[],d=new Map(y.nodes.map(a=>[a.id,a]));return y.links.forEach(a=>{if(a.source===C||typeof a.source=="object"&&a.source.id===C){const c=typeof a.target=="object"?a.target.id:a.target,v=d.get(c);v&&n.push(v)}if(a.target===C||typeof a.target=="object"&&a.target.id===C){const c=typeof a.source=="object"?a.source.id:a.source,v=d.get(c);v&&n.push(v)}}),n};Tt(Na(()=>e(),()=>{g()})),Qt(()=>{const C=()=>g();window.addEventListener("resize",C),nr(()=>{window.removeEventListener("resize",C),l&&l.stop()})});const b=()=>{const C=e();return C?.nodes?C.nodes.reduce((y,n)=>(y[n.type]=(y[n.type]||0)+1,y),{}):{}},m={node:"ð¥ï¸",deployment:"ð¦",statefulset:"ðï¸",daemonset:"ð¹",service:"ð",pod:"ð«",configmap:"âï¸",secret:"ð",ingress:"ðª",replicaset:"ð",job:"â¡",cronjob:"â°"};return(()=>{var C=Em(),y=C.firstChild,n=y.firstChild,d=n.firstChild;d.nextSibling;var a=n.nextSibling,c=a.firstChild,v=c.nextSibling,x=y.nextSibling,S=x.firstChild,E=S.firstChild;E.firstChild;var $=E.nextSibling,k=$.firstChild;k.nextSibling;var O=x.nextSibling,B=O.firstChild,D=B.firstChild,I=D.nextSibling;B.nextSibling,c.$$click=P=>{const R=P.currentTarget;R.classList.add("refreshing"),setTimeout(()=>R.classList.remove("refreshing"),500),t()},v.$$click=()=>g(),o(x,L(He,{get each(){return Object.entries(b())},children:([P,R])=>(()=>{var N=Lm(),w=N.firstChild,H=w.nextSibling,z=H.firstChild,U=z.nextSibling,te=U.firstChild;return o(w,()=>m[P]||"â"),o(z,R),o(U,P,te),ie(F=>{var W=`${u[P]}20`,V=u[P],de=u[P];return W!==F.e&&ce(w,"background",F.e=W),V!==F.t&&ce(w,"color",F.t=V),de!==F.a&&ce(z,"color",F.a=de),F},{e:void 0,t:void 0,a:void 0}),N})()}),S),o(k,()=>(e()?.links||[]).length);var A=s;return typeof A=="function"?Zt(A,O):s=O,o(O,L(G,{get when(){return!e.loading},get fallback(){return Rm()},get children(){return L(G,{get when(){return e()?.nodes?.length>0},get fallback(){return Dm()},get children(){var P=km(),R=f;return typeof R=="function"?Zt(R,P):f=P,P}})}}),B),o(I,L(He,{get each(){return Object.entries(m).slice(0,6)},children:([P,R])=>(()=>{var N=Tm(),w=N.firstChild,H=w.nextSibling;return o(w,R),o(H,P),N})()})),o(C,L(it,{get isOpen(){return h()},onClose:()=>_(!1),get title(){return`${r()?.type}: ${r()?.name}`},size:"lg",get children(){return L(G,{get when(){return r()},get children(){var P=Mm(),R=P.firstChild,N=R.firstChild,w=N.nextSibling,H=w.firstChild,z=H.nextSibling,U=z.firstChild,te=U.nextSibling;te.firstChild;var F=R.nextSibling,W=F.firstChild,V=W.firstChild,de=V.nextSibling,M=de.nextSibling;M.nextSibling;var j=W.nextSibling;return o(N,()=>m[r().type]||"â"),o(H,()=>r().name),o(U,()=>r().type),o(te,()=>r().namespace||tt(),null),o(W,()=>p(r().id).length,M),o(j,L(He,{get each(){return p(r().id)},children:K=>(()=>{var Z=Pm(),se=Z.firstChild,ee=se.nextSibling,ae=ee.firstChild,X=ae.nextSibling;return ee.nextSibling,Z.$$click=()=>i(K),o(se,()=>m[K.type]||"â"),o(ae,()=>K.name),o(X,()=>K.type),ie(q=>ce(se,"background",`${u[K.type]}20`)),Z})()}),null),o(j,L(G,{get when(){return p(r().id).length===0},get children(){return Am()}}),null),ie(K=>{var Z=`${u[r().type]}15`,se=`${u[r().type]}25`,ee=u[r().type];return Z!==K.e&&ce(R,"background",K.e=Z),se!==K.t&&ce(N,"background",K.t=se),ee!==K.a&&ce(U,"background",K.a=ee),K},{e:void 0,t:void 0,a:void 0}),P}})}}),null),C})()};et(["click"]);var Bm=T('<button class="px-3 py-1.5 rounded-lg text-sm transition-colors flex items-center gap-2"title="Show single replica workloads"style="background:rgba(245, 158, 11, 0.2);color:var(--warning-color);border:1px solid rgba(245, 158, 11, 0.4)"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>Single Replica Issues<span class="px-1.5 py-0.5 rounded text-xs"style="background:rgba(245, 158, 11, 0.3)">'),Om=T('<div class="text-center py-8"><div class="spinner mx-auto mb-4"></div><p style=color:var(--text-muted)></p><p class="text-xs mt-2"style=color:var(--text-muted)>Optimized with parallel execution and caching'),Nm=T('<div class="text-center py-8"style=color:var(--text-muted)><svg class="w-12 h-12 mx-auto mb-4 text-green-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><p class=text-lg>All checks passed!</p><p class=text-sm>No issues found in the selected scope.'),Bl=T("<div class=space-y-3>"),Hm=T('<div class="flex items-center justify-between mt-6 pt-4 border-t"style=border-color:var(--border-color)><div class=text-sm style=color:var(--text-secondary)>Showing <!>-<!> of <!> findings</div><div class="flex items-center gap-2"><button class="px-3 py-1.5 rounded text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed">Previous</button><div class="flex items-center gap-1"></div><button class="px-3 py-1.5 rounded text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed">Next'),zm=T('<div class="card p-6"><h3 class="font-semibold mb-4 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg>Findings (<!>)'),Fm=T('<div class="card p-6"><div class="text-center py-8"style=color:var(--text-muted)><svg class="w-12 h-12 mx-auto mb-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg><p class="text-lg mb-2">Diagnostics are disabled</p><p class=text-sm>Enable Diagnostics in Settings to run health checks'),jm=T('<div class="card p-6 mt-6"><h3 class="font-semibold mb-4 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg>High Availability (HA) Recommendations</h3><div class=space-y-4><div class="p-4 rounded-lg border-l-4"style="background:rgba(245, 158, 11, 0.1);border-color:var(--warning-color)"><div class="flex items-start gap-3"><svg class="w-5 h-5 mt-0.5 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--warning-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div class=flex-1><h4 class="font-medium mb-2"style=color:var(--text-primary)>Single Replica Workloads</h4><p class="text-sm mb-3"style=color:var(--text-secondary)>Deployments and StatefulSets with only 1 replica are at high risk. At least 2 replicas are recommended for production workloads to ensure high availability.</p><div class="text-xs space-y-1"style=color:var(--text-muted)><p><strong>Check:</strong> REL005 - Single Replica Deployment/StatefulSet</p><p><strong>Impact:</strong> No redundancy - single point of failure</p></div></div></div></div><div class="p-4 rounded-lg border-l-4"style="background:rgba(6, 182, 212, 0.1);border-color:var(--accent-primary)"><div class="flex items-start gap-3"><svg class="w-5 h-5 mt-0.5 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div class=flex-1><h4 class="font-medium mb-2"style=color:var(--text-primary)>Pod Anti-Affinity</h4><p class="text-sm mb-3"style=color:var(--text-secondary)>Multi-replica workloads should use podAntiAffinity to spread pods across different nodes, preventing all replicas from being on the same node.</p><div class="text-xs space-y-1"style=color:var(--text-muted)><p><strong>Check:</strong> REL007 - No Anti-Affinity</p><p><strong>Recommendation:</strong> Add podAntiAffinity rules to pod templates</p></div></div></div></div><div class="p-4 rounded-lg border-l-4"style="background:rgba(6, 182, 212, 0.1);border-color:var(--accent-primary)"><div class="flex items-start gap-3"><svg class="w-5 h-5 mt-0.5 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div class=flex-1><h4 class="font-medium mb-2"style=color:var(--text-primary)>Pod Disruption Budget (PDB)</h4><p class="text-sm mb-3"style=color:var(--text-secondary)>PodDisruptionBudgets ensure that a minimum number of pods remain available during voluntary disruptions (node drains, cluster upgrades, etc.).</p><div class="text-xs space-y-1"style=color:var(--text-muted)><p><strong>Check:</strong> REL006 - Missing PDB</p><p><strong>Recommendation:</strong> Create PDBs for all production workloads with 2+ replicas</p></div></div></div></div><div class="mt-4 p-4 rounded-lg"style=background:var(--bg-tertiary)><h4 class="font-medium mb-2"style=color:var(--text-primary)>Best Practices Summary</h4><ul class="text-sm space-y-1"style=color:var(--text-secondary)><li>â¢ Use at least 2 replicas for production workloads</li><li>â¢ Configure podAntiAffinity to spread pods across nodes</li><li>â¢ Create PodDisruptionBudgets for multi-replica workloads</li><li>â¢ Consider using topologySpreadConstraints for advanced placement</li><li>â¢ Monitor pod distribution across nodes regularly'),Um=T('<div class="text-center py-4"style=color:var(--text-secondary)>Loading vulnerability stats...'),Vm=T('<div class="text-center py-8"style=color:var(--text-secondary)><div class="spinner mx-auto mb-4"></div><p>Scanning cluster for vulnerabilities...</p><p class="text-xs mt-2"style=color:var(--text-muted)>This may take a few moments'),Wm=T('<div class="text-center py-8"style=color:var(--error-color)><p class=mb-2>Error scanning for vulnerabilities</p><p class=text-xs style=color:var(--text-muted)></p><button class="mt-4 px-4 py-2 rounded text-sm transition-colors"style=background:var(--accent-primary);color:white>Retry Scan'),qm=T('<div class="text-center py-8"style=color:var(--text-secondary)><svg class="w-12 h-12 mx-auto mb-4 text-green-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><p class=mb-2>No vulnerabilities found matching the selected criteria.</p><p class=text-xs style=color:var(--text-muted)>Click "Scan Cluster" to scan for vulnerabilities.'),Km=T('<div class="flex items-center justify-between mt-6 pt-4 border-t"style=border-color:var(--border-color)><div class=text-sm style=color:var(--text-secondary)>Showing <!>-<!> of <!> vulnerabilities</div><div class="flex items-center gap-2"><button class="px-3 py-1.5 rounded text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed">Previous</button><div class="flex items-center gap-1"></div><button class="px-3 py-1.5 rounded text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed">Next'),Ym=T('<div class="mt-4 text-xs text-center"style=color:var(--text-muted)>Last NVD refresh: '),Gm=T('<div class="card p-6 mt-6"><div class="flex items-center justify-between mb-4"><h3 class="font-semibold flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>CVE Vulnerabilities (NIST NVD)</h3><div class="flex items-center gap-2"><select class="px-3 py-1.5 rounded text-sm"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><option value>All Severities</option><option value=CRITICAL>Critical</option><option value=HIGH>High</option><option value=MEDIUM>Medium</option><option value=LOW>Low</option></select><button class="px-3 py-1.5 rounded text-sm transition-colors"title="Refresh NVD data"style=background:var(--bg-tertiary);color:var(--text-primary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button><button class="px-3 py-1.5 rounded text-sm transition-colors"style=background:var(--accent-primary);color:white>Scan Cluster'),Jm=T('<div class="card p-6 mt-6"><div class="text-center py-8"style=color:var(--text-muted)><svg class="w-12 h-12 mx-auto mb-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><p class="text-lg mb-2">CVE Vulnerabilities are disabled</p><p class=text-sm>Enable CVE Vulnerabilities (NIST NVD) in Settings to scan for vulnerabilities'),Xm=T('<div class=space-y-6><div class="flex items-center justify-between"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Security & Diagnostics</h1><p style=color:var(--text-secondary)>Cluster health checks, security posture, vulnerability scanning, and best practices analysis</p></div><div class="flex items-center gap-2"><button class="flex items-center gap-2 px-4 py-2 rounded-lg transition-colors"title="Export diagnostic report"style=background:var(--bg-tertiary);color:var(--text-primary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>Export Report</button><button class="flex items-center gap-2 px-4 py-2 rounded-lg transition-colors"style=background:var(--accent-primary);color:white><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>Run Diagnostics</button></div></div><div class="grid grid-cols-1 md:grid-cols-4 gap-6"><div class="card p-6"><div class=text-center><div class="text-5xl font-bold mb-2"></div><div style=color:var(--text-secondary)>Health Score</div><div class="mt-4 h-2 rounded-full overflow-hidden"style=background:var(--bg-tertiary)><div class="h-full rounded-full transition-all"></div></div></div></div><div class="card p-6"><div class=text-center><div class="text-3xl font-bold"style=color:var(--error-color)></div><div class=text-sm style=color:var(--text-secondary)>Critical Issues</div></div></div><div class="card p-6"><div class=text-center><div class="text-3xl font-bold"style=color:var(--warning-color)></div><div class=text-sm style=color:var(--text-secondary)>Warnings</div></div></div><div class="card p-6"><div class=text-center><div class="text-3xl font-bold"style=color:var(--accent-primary)></div><div class=text-sm style=color:var(--text-secondary)>Info</div></div></div></div><div class="flex gap-2 flex-wrap items-center"><button class="px-3 py-1.5 rounded-lg text-sm transition-colors">All Categories</button><div class=flex-1></div></div><div class="card p-6 mt-6"><h3 class="font-semibold mb-4 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg>Security Best Practices</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="p-4 rounded-lg"style=background:var(--bg-tertiary)><h4 class="font-medium mb-2"style=color:var(--text-primary)>Pod Security</h4><ul class="space-y-1 text-sm"style=color:var(--text-secondary)><li>- Run containers as non-root user</li><li>- Use read-only root filesystem</li><li>- Drop all capabilities and add only needed ones</li><li>- Use Pod Security Standards</li></ul></div><div class="p-4 rounded-lg"style=background:var(--bg-tertiary)><h4 class="font-medium mb-2"style=color:var(--text-primary)>Network Security</h4><ul class="space-y-1 text-sm"style=color:var(--text-secondary)><li>- Implement NetworkPolicies</li><li>- Use TLS for all communications</li><li>- Restrict egress traffic</li><li>- Use service mesh for mTLS</li></ul></div><div class="p-4 rounded-lg"style=background:var(--bg-tertiary)><h4 class="font-medium mb-2"style=color:var(--text-primary)>Access Control</h4><ul class="space-y-1 text-sm"style=color:var(--text-secondary)><li>- Use RBAC with least privilege</li><li>- Avoid cluster-admin bindings</li><li>- Use dedicated service accounts</li><li>- Enable audit logging</li></ul></div><div class="p-4 rounded-lg"style=background:var(--bg-tertiary)><h4 class="font-medium mb-2"style=color:var(--text-primary)>Image Security</h4><ul class="space-y-1 text-sm"style=color:var(--text-secondary)><li>- Scan images for vulnerabilities</li><li>- Use trusted base images</li><li>- Sign and verify images</li><li>- Keep images up to date'),Zm=T('<span class="ml-1 opacity-70">(<!>)'),Qm=T('<button class="px-3 py-1.5 rounded-lg text-sm transition-colors">'),Ol=T('<div class="mt-2 text-xs flex items-start gap-1"style=color:var(--accent-primary)><svg class="w-3 h-3 mt-0.5 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>'),e1=T('<div class="p-4 rounded-lg border"><div class="flex items-start justify-between gap-4"><div class="flex items-start gap-3 flex-1"><div class=mt-0.5></div><div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-1"><span class=font-medium style=color:var(--text-primary)></span><span class="px-2 py-0.5 rounded text-xs"></span><span class="px-2 py-0.5 rounded text-xs"style=background:var(--bg-tertiary);color:var(--text-muted)></span></div><div class="text-sm mb-1"style=color:var(--text-secondary)></div><div class=text-xs style=color:var(--text-muted)><span class=font-mono>'),t1=T('<svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--error-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z">'),r1=T('<svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--warning-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z">'),s1=T('<svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z">'),i1=T("<span> in "),Nl=T("<button>"),n1=T('<div class="grid grid-cols-2 md:grid-cols-5 gap-4 mb-6"><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class="text-2xl font-bold"style=color:var(--text-primary)></div><div class=text-xs style=color:var(--text-secondary)>Total CVEs</div></div><div class="p-3 rounded-lg"style="background:rgba(239, 68, 68, 0.1)"><div class="text-2xl font-bold"style=color:var(--error-color)></div><div class=text-xs style=color:var(--text-secondary)>Critical</div></div><div class="p-3 rounded-lg"style="background:rgba(245, 158, 11, 0.1)"><div class="text-2xl font-bold"style=color:var(--warning-color)></div><div class=text-xs style=color:var(--text-secondary)>High</div></div><div class="p-3 rounded-lg"style="background:rgba(6, 182, 212, 0.1)"><div class="text-2xl font-bold"style=color:var(--accent-primary)></div><div class=text-xs style=color:var(--text-secondary)>Medium</div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class="text-2xl font-bold"style=color:var(--text-primary)></div><div class=text-xs style=color:var(--text-secondary)>CVE Cache'),l1=T('<div class="mt-2 flex flex-wrap gap-2">'),o1=T('<div class="p-4 rounded-lg border"><div class="flex items-start justify-between gap-4"><div class=flex-1><div class="flex items-center gap-2 mb-2"><span class="font-mono font-bold"style=color:var(--text-primary)></span><span class="px-2 py-0.5 rounded text-xs font-medium"style=color:white></span><span class=text-sm style=color:var(--text-secondary)>CVSS: </span></div><div class="text-sm mb-2"style=color:var(--text-secondary)></div><div class="text-xs mb-2"style=color:var(--text-muted)><span class=font-mono>'),a1=T("<span> in <!>/"),c1=T("<span> (<!>)"),d1=T('<a target=_blank rel="noopener noreferrer"class="text-xs px-2 py-1 rounded"style=background:var(--bg-tertiary);color:var(--accent-primary)>Reference');const h1=()=>{const[e,t]=J(""),[r,i]=J(""),[h,_]=J(1),[f,s]=J(1),[l,u]=J(""),g=10,p=()=>{const D=localStorage.getItem("kubegraf-enable-diagnostics");return D===null||D==="true"},b=()=>{const D=localStorage.getItem("kubegraf-enable-cve-vulnerabilities");return D===null||D==="true"},m=()=>{const D=localStorage.getItem("kubegraf-enable-security-checks");return D===null||D==="true"},[C]=qe(De.getDiagnosticsCategories),[y,{refetch:n}]=qe(()=>({ns:tt(),cat:e(),enabled:p()}),async D=>{if(!D.enabled)return{findings:[],summary:{total:0,critical:0,warning:0,info:0,byCategory:{}},total:0};_(1),u("Initializing diagnostics...");const I=D.ns==="_all"?void 0:D.ns,A=D.cat||void 0;try{u(A?`Running ${A} checks in parallel...`:"Running all diagnostic checks in parallel...");const P=await De.runDiagnostics(I,A);return u(""),P}catch(P){throw u(""),P}}),[d,a]=J(0),[c,{refetch:v}]=qe(()=>{const D=r(),I=d();return I>0?{severity:D,key:I}:null},async D=>{try{console.log("[Security] Fetching vulnerabilities with params:",D);const I=Date.now(),A=await De.scanVulnerabilities(D.severity||void 0),P=Date.now()-I;console.log(`[Security] Vulnerabilities fetched in ${P}ms:`,A?.vulnerabilities?.length||0,"vulnerabilities"),console.log("[Security] Result structure:",{hasVulnerabilities:!!A?.vulnerabilities,vulnArray:Array.isArray(A?.vulnerabilities),vulnLength:A?.vulnerabilities?.length,hasStats:!!A?.stats,hasLastRefresh:!!A?.lastRefresh,resultKeys:A?Object.keys(A):[]}),s(1);const R={vulnerabilities:Array.isArray(A?.vulnerabilities)?A.vulnerabilities:[],stats:A?.stats||{},lastRefresh:A?.lastRefresh||null};return console.log("[Security] Returning response:",{vulnCount:R.vulnerabilities.length,hasStats:!!R.stats,hasLastRefresh:!!R.lastRefresh}),R}catch(I){return console.error("[Security] Failed to scan vulnerabilities:",I),{vulnerabilities:[],stats:{},lastRefresh:null}}}),[x]=qe(De.getVulnerabilityStats),S=Ne(()=>{const D=y();if(!D||!Array.isArray(D.findings)||D.findings.length===0)return{list:[],totalPages:0,startIdx:0,endIdx:0,total:0};const I=D.findings,A=Math.ceil(I.length/g),R=(h()-1)*g,N=R+g;return{list:I.slice(R,N),totalPages:A,startIdx:R,endIdx:N,total:I.length}}),E=Ne(()=>{const D=c();if(console.log("[Security] paginatedVulnerabilities memo - data:",{hasData:!!D,hasVulnerabilities:!!D?.vulnerabilities,isArray:Array.isArray(D?.vulnerabilities),length:D?.vulnerabilities?.length||0}),!D||!Array.isArray(D.vulnerabilities)||D.vulnerabilities.length===0)return console.log("[Security] paginatedVulnerabilities - returning empty"),{list:[],totalPages:0,startIdx:0,endIdx:0,total:0};const I=D.vulnerabilities,A=Math.ceil(I.length/g),R=(f()-1)*g,N=R+g,w={list:I.slice(R,N),totalPages:A,startIdx:R,endIdx:N,total:I.length};return console.log("[Security] paginatedVulnerabilities - result:",w),w});Qt(()=>{console.log("[Security] Component mounted, triggering initial scan"),a(1)}),Tt(()=>{const D=c(),I=E();console.log("[Security] Vulnerabilities resource state:",{loading:c.loading,error:c.error,hasData:!!D,vulnCount:D?.vulnerabilities?.length||0,scanKey:d(),selectedSeverity:r(),paginatedTotal:I.total,paginatedListLength:I.list.length,dataStructure:D?{hasVulnerabilities:!!D.vulnerabilities,vulnArrayLength:D.vulnerabilities?.length,isArray:Array.isArray(D.vulnerabilities),hasStats:!!D.stats,hasLastRefresh:!!D.lastRefresh}:null})});const $=D=>{switch(D){case"critical":return"var(--error-color)";case"warning":return"var(--warning-color)";case"info":return"var(--accent-primary)";default:return"var(--text-secondary)"}},k=D=>{switch(D){case"critical":return"rgba(239, 68, 68, 0.1)";case"warning":return"rgba(245, 158, 11, 0.1)";case"info":return"rgba(6, 182, 212, 0.1)";default:return"var(--bg-tertiary)"}},O=D=>{switch(D){case"critical":return"rgba(239, 68, 68, 0.3)";case"warning":return"rgba(245, 158, 11, 0.3)";case"info":return"rgba(6, 182, 212, 0.3)";default:return"var(--border-color)"}},B=()=>{const D=y()?.summary;if(!D||D.total===0)return 100;const I=D.critical*25,A=D.warning*8,P=D.info*1,R=Math.max(0,100-I-A-P);return Math.round(R)};return(()=>{var D=Xm(),I=D.firstChild,A=I.firstChild,P=A.firstChild;P.nextSibling;var R=A.nextSibling,N=R.firstChild,w=N.nextSibling,H=I.nextSibling,z=H.firstChild,U=z.firstChild,te=U.firstChild,F=te.nextSibling,W=F.nextSibling,V=W.firstChild,de=z.nextSibling,M=de.firstChild,j=M.firstChild;j.nextSibling;var K=de.nextSibling,Z=K.firstChild,se=Z.firstChild;se.nextSibling;var ee=K.nextSibling,ae=ee.firstChild,X=ae.firstChild;X.nextSibling;var q=H.nextSibling,ne=q.firstChild,Y=ne.nextSibling,re=q.nextSibling,Q=re.firstChild,ve=Q.nextSibling,Ae=ve.firstChild,Ce=Ae.firstChild;Ce.nextSibling;var we=Ae.nextSibling,_e=we.firstChild;_e.nextSibling;var ge=we.nextSibling,le=ge.firstChild;le.nextSibling;var ue=ge.nextSibling,Se=ue.firstChild;return Se.nextSibling,N.$$click=()=>{const be=y();if(be){const oe={timestamp:new Date().toISOString(),summary:be.summary,findings:be.findings},ye=new Blob([JSON.stringify(oe,null,2)],{type:"application/json"}),pe=URL.createObjectURL(ye),he=document.createElement("a");he.href=pe,he.download=`kubegraf-diagnostics-${new Date().toISOString().split("T")[0]}.json`,he.click(),URL.revokeObjectURL(pe)}},w.$$click=()=>n(),o(te,B),o(j,()=>y()?.summary?.critical||0),o(se,()=>y()?.summary?.warning||0),o(X,()=>y()?.summary?.info||0),ne.$$click=()=>t(""),o(q,L(He,{get each(){return C()||[]},children:be=>(()=>{var oe=Qm();return oe.$$click=()=>t(be.id),o(oe,()=>be.name,null),o(oe,L(G,{get when(){return y()?.summary?.byCategory?.[be.id]},get children(){var ye=Zm(),pe=ye.firstChild,he=pe.nextSibling;return he.nextSibling,o(ye,()=>y()?.summary?.byCategory?.[be.id],he),ye}}),null),ie(ye=>{var pe=e()===be.id?"var(--accent-primary)":"var(--bg-tertiary)",he=e()===be.id?"white":"var(--text-secondary)";return pe!==ye.e&&ce(oe,"background",ye.e=pe),he!==ye.t&&ce(oe,"color",ye.t=he),ye},{e:void 0,t:void 0}),oe})()}),Y),o(q,L(G,{get when(){return Re(()=>!!y())()&&(y()?.findings||[]).some(be=>be.rule==="REL005")},get children(){var be=Bm(),oe=be.firstChild,ye=oe.nextSibling,pe=ye.nextSibling;return be.$$click=()=>{const me=(y()?.findings||[]).filter(fe=>fe.rule==="REL005");e()==="reliability"&&me.length>0?document.querySelector('[data-rule="REL005"]')?.scrollIntoView({behavior:"smooth",block:"center"}):(t("reliability"),setTimeout(()=>{document.querySelector('[data-rule="REL005"]')?.scrollIntoView({behavior:"smooth",block:"center"})},300))},o(pe,()=>(y()?.findings||[]).filter(he=>he.rule==="REL005").length),be}}),null),o(D,L(G,{get when(){return p()},get children(){var be=zm(),oe=be.firstChild,ye=oe.firstChild,pe=ye.nextSibling,he=pe.nextSibling;return he.nextSibling,o(oe,()=>y()?.total||0,he),o(be,L(G,{get when(){return y.loading},get children(){var me=Om(),fe=me.firstChild,xe=fe.nextSibling;return xe.nextSibling,o(xe,()=>l()||"Running diagnostics in parallel..."),me}}),null),o(be,L(G,{get when(){return Re(()=>!y.loading)()&&(y()?.findings?.length||0)===0},get children(){return Nm()}}),null),o(be,L(G,{get when(){return Re(()=>!y.loading)()&&S().total>0},get children(){return[(()=>{var me=Bl();return o(me,L(He,{get each(){return S().list},children:fe=>(()=>{var xe=e1(),$e=xe.firstChild,ke=$e.firstChild,Be=ke.firstChild,Pe=Be.nextSibling,Le=Pe.firstChild,Oe=Le.firstChild,Fe=Oe.nextSibling,je=Fe.nextSibling,Ke=Le.nextSibling,Te=Ke.nextSibling,Ge=Te.firstChild;return o(Be,(()=>{var Ie=Re(()=>fe.severity==="critical");return()=>Ie()?t1():Re(()=>fe.severity==="warning")()?r1():s1()})()),o(Oe,()=>fe.rule),o(Fe,()=>fe.severity),o(je,()=>fe.category),o(Ke,()=>fe.message),o(Ge,()=>fe.resource),o(Te,(()=>{var Ie=Re(()=>!!fe.namespace);return()=>Ie()&&(()=>{var We=i1();return We.firstChild,o(We,()=>fe.namespace,null),We})()})(),null),o(Pe,L(G,{get when(){return fe.remediation},get children(){var Ie=Ol(),We=Ie.firstChild,Ye=We.nextSibling;return o(Ye,()=>fe.remediation),Ie}}),null),ie(Ie=>{var We=fe.rule,Ye=k(fe.severity),Ze=O(fe.severity),rt=k(fe.severity),ot=$(fe.severity),Ct=`1px solid ${O(fe.severity)}`;return We!==Ie.e&&Xe(xe,"data-rule",Ie.e=We),Ye!==Ie.t&&ce(xe,"background",Ie.t=Ye),Ze!==Ie.a&&ce(xe,"border-color",Ie.a=Ze),rt!==Ie.o&&ce(Fe,"background",Ie.o=rt),ot!==Ie.i&&ce(Fe,"color",Ie.i=ot),Ct!==Ie.n&&ce(Fe,"border",Ie.n=Ct),Ie},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),xe})()})),me})(),(()=>{var me=Hm(),fe=me.firstChild,xe=fe.firstChild,$e=xe.nextSibling,ke=$e.nextSibling,Be=ke.nextSibling,Pe=Be.nextSibling,Le=Pe.nextSibling;Le.nextSibling;var Oe=fe.nextSibling,Fe=Oe.firstChild,je=Fe.nextSibling,Ke=je.nextSibling;return o(fe,()=>S().startIdx+1,$e),o(fe,()=>Math.min(S().endIdx,S().total),Be),o(fe,()=>S().total,Le),Fe.$$click=()=>_(Math.max(1,h()-1)),o(je,()=>Array.from({length:Math.min(5,S().totalPages)},(Te,Ge)=>{const Ie=S().totalPages,We=h();let Ye;return Ie<=5||We<=3?Ye=Ge+1:We>=Ie-2?Ye=Ie-4+Ge:Ye=We-2+Ge,(()=>{var Ze=Nl();return Ze.$$click=()=>_(Ye),ze(Ze,`px-3 py-1.5 rounded text-sm transition-colors ${Ye===We?"font-bold":""}`),ce(Ze,"background",Ye===We?"var(--accent-primary)":"var(--bg-tertiary)"),ce(Ze,"color",Ye===We?"white":"var(--text-primary)"),o(Ze,Ye),Ze})()})),Ke.$$click=()=>_(Math.min(S().totalPages,h()+1)),ie(Te=>{var Ge=h()===1,Ie=h()===1?"var(--bg-tertiary)":"var(--accent-primary)",We=h()===1?"var(--text-muted)":"white",Ye=h()===S().totalPages,Ze=h()===S().totalPages?"var(--bg-tertiary)":"var(--accent-primary)",rt=h()===S().totalPages?"var(--text-muted)":"white";return Ge!==Te.e&&(Fe.disabled=Te.e=Ge),Ie!==Te.t&&ce(Fe,"background",Te.t=Ie),We!==Te.a&&ce(Fe,"color",Te.a=We),Ye!==Te.o&&(Ke.disabled=Te.o=Ye),Ze!==Te.i&&ce(Ke,"background",Te.i=Ze),rt!==Te.n&&ce(Ke,"color",Te.n=rt),Te},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),me})()]}}),null),be}}),re),o(D,L(G,{get when(){return!p()},get children(){var be=Fm();return be.firstChild,be}}),re),o(D,L(G,{get when(){return m()},get children(){var be=jm(),oe=be.firstChild,ye=oe.nextSibling,pe=ye.firstChild,he=pe.firstChild,me=he.firstChild,fe=me.nextSibling,xe=fe.firstChild,$e=xe.nextSibling;$e.nextSibling;var ke=pe.nextSibling,Be=ke.firstChild,Pe=Be.firstChild,Le=Pe.nextSibling,Oe=Le.firstChild,Fe=Oe.nextSibling;Fe.nextSibling;var je=ke.nextSibling,Ke=je.firstChild,Te=Ke.firstChild,Ge=Te.nextSibling,Ie=Ge.firstChild,We=Ie.nextSibling;We.nextSibling;var Ye=je.nextSibling,Ze=Ye.firstChild;return Ze.nextSibling,be}}),re),o(D,L(G,{get when(){return b()},get children(){var be=Gm(),oe=be.firstChild,ye=oe.firstChild,pe=ye.nextSibling,he=pe.firstChild,me=he.nextSibling,fe=me.nextSibling;return he.addEventListener("change",xe=>i(xe.currentTarget.value)),me.$$click=()=>De.refreshVulnerabilities().then(()=>v()),fe.$$click=async()=>{console.log("[Security] Scan Cluster button clicked"),i(""),a(xe=>xe+1),setTimeout(()=>{console.log("[Security] Manually refetching vulnerabilities"),v()},50)},o(be,L(G,{get when(){return x.loading},get fallback(){return L(G,{get when(){return x()},children:xe=>(()=>{var $e=n1(),ke=$e.firstChild,Be=ke.firstChild;Be.nextSibling;var Pe=ke.nextSibling,Le=Pe.firstChild;Le.nextSibling;var Oe=Pe.nextSibling,Fe=Oe.firstChild;Fe.nextSibling;var je=Oe.nextSibling,Ke=je.firstChild;Ke.nextSibling;var Te=je.nextSibling,Ge=Te.firstChild;return Ge.nextSibling,o(Be,()=>xe().total||0),o(Le,()=>xe().critical||0),o(Fe,()=>xe().high||0),o(Ke,()=>xe().medium||0),o(Ge,()=>xe().cveCount||0),$e})()})},get children(){return Um()}}),null),o(be,L(G,{get when(){return c.loading},get children(){var xe=Vm(),$e=xe.firstChild,ke=$e.nextSibling;return ke.nextSibling,xe}}),null),o(be,L(G,{get when(){return c.error},get children(){var xe=Wm(),$e=xe.firstChild,ke=$e.nextSibling,Be=ke.nextSibling;return o(ke,()=>String(c.error)),Be.$$click=()=>{a(Pe=>Pe+1),setTimeout(()=>v(),50)},xe}}),null),o(be,()=>{const xe=c(),$e=E();return console.log("[Security] Render check - vulnerabilities:",{loading:c.loading,error:c.error,hasData:!!xe,vulnCount:xe?.vulnerabilities?.length||0,paginatedTotal:$e.total,shouldShowList:!c.loading&&!c.error&&$e.total>0}),null},null),o(be,L(G,{get when(){return Re(()=>!!(!c.loading&&!c.error&&c()))()&&(c()?.vulnerabilities||[]).length===0},get children(){var xe=qm(),$e=xe.firstChild,ke=$e.nextSibling;return ke.nextSibling,xe}}),null),o(be,L(G,{get when(){return Re(()=>!c.loading&&!c.error)()&&E().total>0},get children(){return[(()=>{var xe=Bl();return o(xe,L(He,{get each(){return E().list},children:$e=>(()=>{var ke=o1(),Be=ke.firstChild,Pe=Be.firstChild,Le=Pe.firstChild,Oe=Le.firstChild,Fe=Oe.nextSibling,je=Fe.nextSibling;je.firstChild;var Ke=Le.nextSibling,Te=Ke.nextSibling,Ge=Te.firstChild;return o(Oe,()=>$e.cveId),o(Fe,()=>$e.severity),o(je,()=>$e.cvssScore?.toFixed(1)||"N/A",null),o(Ke,()=>$e.description),o(Ge,()=>$e.affectedImage),o(Te,(()=>{var Ie=Re(()=>!!$e.namespace);return()=>Ie()&&(()=>{var We=a1(),Ye=We.firstChild,Ze=Ye.nextSibling;return Ze.nextSibling,o(We,()=>$e.namespace,Ze),o(We,()=>$e.podName,null),We})()})(),null),o(Te,(()=>{var Ie=Re(()=>!!$e.containerName);return()=>Ie()&&(()=>{var We=c1(),Ye=We.firstChild,Ze=Ye.nextSibling;return Ze.nextSibling,o(We,()=>$e.containerName,Ze),We})()})(),null),o(Pe,L(G,{get when(){return $e.remediation},get children(){var Ie=Ol(),We=Ie.firstChild,Ye=We.nextSibling;return o(Ye,()=>$e.remediation),Ie}}),null),o(Pe,L(G,{get when(){return Re(()=>!!$e.references)()&&$e.references.length>0},get children(){var Ie=l1();return o(Ie,L(He,{get each(){return $e.references.slice(0,3)},children:We=>(()=>{var Ye=d1();return Xe(Ye,"href",We),Ye})()})),Ie}}),null),ie(Ie=>{var We=$e.severity==="CRITICAL"?"rgba(239, 68, 68, 0.1)":$e.severity==="HIGH"?"rgba(245, 158, 11, 0.1)":"rgba(6, 182, 212, 0.1)",Ye=$e.severity==="CRITICAL"?"rgba(239, 68, 68, 0.3)":$e.severity==="HIGH"?"rgba(245, 158, 11, 0.3)":"rgba(6, 182, 212, 0.3)",Ze=$e.severity==="CRITICAL"?"var(--error-color)":$e.severity==="HIGH"?"var(--warning-color)":"var(--accent-primary)";return We!==Ie.e&&ce(ke,"background",Ie.e=We),Ye!==Ie.t&&ce(ke,"border-color",Ie.t=Ye),Ze!==Ie.a&&ce(Fe,"background",Ie.a=Ze),Ie},{e:void 0,t:void 0,a:void 0}),ke})()})),xe})(),(()=>{var xe=Km(),$e=xe.firstChild,ke=$e.firstChild,Be=ke.nextSibling,Pe=Be.nextSibling,Le=Pe.nextSibling,Oe=Le.nextSibling,Fe=Oe.nextSibling;Fe.nextSibling;var je=$e.nextSibling,Ke=je.firstChild,Te=Ke.nextSibling,Ge=Te.nextSibling;return o($e,()=>E().startIdx+1,Be),o($e,()=>Math.min(E().endIdx,E().total),Le),o($e,()=>E().total,Fe),Ke.$$click=()=>s(Math.max(1,f()-1)),o(Te,()=>Array.from({length:Math.min(5,E().totalPages)},(Ie,We)=>{const Ye=E().totalPages,Ze=f();let rt;return Ye<=5||Ze<=3?rt=We+1:Ze>=Ye-2?rt=Ye-4+We:rt=Ze-2+We,(()=>{var ot=Nl();return ot.$$click=()=>s(rt),ze(ot,`px-3 py-1.5 rounded text-sm transition-colors ${rt===Ze?"font-bold":""}`),ce(ot,"background",rt===Ze?"var(--accent-primary)":"var(--bg-tertiary)"),ce(ot,"color",rt===Ze?"white":"var(--text-primary)"),o(ot,rt),ot})()})),Ge.$$click=()=>s(Math.min(E().totalPages,f()+1)),ie(Ie=>{var We=f()===1,Ye=f()===1?"var(--bg-tertiary)":"var(--accent-primary)",Ze=f()===1?"var(--text-muted)":"white",rt=f()===E().totalPages,ot=f()===E().totalPages?"var(--bg-tertiary)":"var(--accent-primary)",Ct=f()===E().totalPages?"var(--text-muted)":"white";return We!==Ie.e&&(Ke.disabled=Ie.e=We),Ye!==Ie.t&&ce(Ke,"background",Ie.t=Ye),Ze!==Ie.a&&ce(Ke,"color",Ie.a=Ze),rt!==Ie.o&&(Ge.disabled=Ie.o=rt),ot!==Ie.i&&ce(Ge,"background",Ie.i=ot),Ct!==Ie.n&&ce(Ge,"color",Ie.n=Ct),Ie},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),xe})()]}}),null),o(be,L(G,{get when(){return Re(()=>!!c())()&&c()?.lastRefresh},get children(){var xe=Ym();return xe.firstChild,o(xe,()=>new Date(c()?.lastRefresh||"").toLocaleString(),null),xe}}),null),ie(()=>he.value=r()),be}}),null),o(D,L(G,{get when(){return!b()},get children(){var be=Jm();return be.firstChild,be}}),null),ie(be=>{var oe=B()>=80?"var(--success-color)":B()>=60?"var(--warning-color)":"var(--error-color)",ye=`${B()}%`,pe=B()>=80?"var(--success-color)":B()>=60?"var(--warning-color)":"var(--error-color)",he=e()===""?"var(--accent-primary)":"var(--bg-tertiary)",me=e()===""?"white":"var(--text-secondary)";return oe!==be.e&&ce(te,"color",be.e=oe),ye!==be.t&&ce(V,"width",be.t=ye),pe!==be.a&&ce(V,"background",be.a=pe),he!==be.o&&ce(ne,"background",be.o=he),me!==be.i&&ce(ne,"color",be.i=me),be},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),D})()};et(["click"]);var u1=T('<svg viewBox="0 0 512 512"class="w-8 h-8"><path fill=#0F1689 d="M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256 256-114.6 256-256S397.4 0 256 0z"></path><g fill=#fff><circle cx=256 cy=256 r=50></circle><rect x=248 y=96 width=16 height=80 rx=8></rect><rect x=248 y=336 width=16 height=80 rx=8></rect><rect x=96 y=248 width=80 height=16 rx=8></rect><rect x=336 y=248 width=80 height=16 rx=8></rect><rect x=132 y=132 width=16 height=80 rx=8 transform="rotate(-45 140 172)"></rect><rect x=364 y=300 width=16 height=80 rx=8 transform="rotate(-45 372 340)"></rect><rect x=300 y=132 width=16 height=80 rx=8 transform="rotate(45 308 172)"></rect><rect x=132 y=300 width=16 height=80 rx=8 transform="rotate(45 140 340)">'),f1=T('<svg viewBox="0 0 128 128"class="w-8 h-8"><defs><linearGradient id=argoGrad x1=0% y1=0% x2=100% y2=100%><stop offset=0% style=stop-color:#EF7B4D></stop><stop offset=100% style=stop-color:#E96D3F></stop></linearGradient></defs><circle cx=64 cy=64 r=60 fill=url(#argoGrad)></circle><g fill=#fff><ellipse cx=64 cy=52 rx=28 ry=24></ellipse><circle cx=52 cy=48 r=6 fill=#E96D3F></circle><circle cx=76 cy=48 r=6 fill=#E96D3F></circle><circle cx=52 cy=48 r=3 fill=#1a1a1a></circle><circle cx=76 cy=48 r=3 fill=#1a1a1a></circle><path d="M44 76 Q34 90 28 100"stroke=#fff stroke-width=8 stroke-linecap=round fill=none></path><path d="M52 78 Q48 94 44 106"stroke=#fff stroke-width=8 stroke-linecap=round fill=none></path><path d="M64 80 Q64 96 64 108"stroke=#fff stroke-width=8 stroke-linecap=round fill=none></path><path d="M76 78 Q80 94 84 106"stroke=#fff stroke-width=8 stroke-linecap=round fill=none></path><path d="M84 76 Q94 90 100 100"stroke=#fff stroke-width=8 stroke-linecap=round fill=none>'),g1=T('<svg viewBox="0 0 128 128"class="w-8 h-8"><defs><linearGradient id=fluxGrad x1=0% y1=0% x2=100% y2=100%><stop offset=0% style=stop-color:#5468FF></stop><stop offset=100% style=stop-color:#316CE6></stop></linearGradient></defs><circle cx=64 cy=64 r=60 fill=url(#fluxGrad)></circle><g fill=none stroke=#fff stroke-width=8 stroke-linecap=round><path d="M24 44 Q44 28 64 44 Q84 60 104 44"></path><path d="M24 64 Q44 48 64 64 Q84 80 104 64"></path><path d="M24 84 Q44 68 64 84 Q84 100 104 84">'),p1=T('<svg viewBox="0 0 128 128"class="w-8 h-8"><defs><linearGradient id=kustomizeGrad x1=0% y1=0% x2=100% y2=100%><stop offset=0% style=stop-color:#326CE5></stop><stop offset=100% style=stop-color:#1D4ED8></stop></linearGradient></defs><circle cx=64 cy=64 r=60 fill=url(#kustomizeGrad)></circle><g fill=#fff><rect x=32 y=28 width=16 height=72 rx=2></rect><polygon points="48,64 80,28 96,28 56,72 96,100 80,100"></polygon></g><g fill=none stroke=#fff stroke-width=3><rect x=76 y=52 width=20 height=20 rx=2></rect><rect x=86 y=62 width=20 height=20 rx=2>'),v1=T('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">'),m1=T('<div class="text-2xl font-bold flex items-center justify-center"style=color:var(--accent-primary)><div class=spinner style=width:24px;height:24px>'),_1=T('<div class="text-2xl font-bold flex items-center justify-center"style=color:var(--accent-secondary)><div class=spinner style=width:24px;height:24px>'),b1=T('<div class="text-2xl font-bold flex items-center justify-center"style=color:#8b5cf6><div class=spinner style=width:24px;height:24px>'),y1=T('<div class="card p-6"><h3 class="font-semibold mb-4"style=color:var(--text-primary)>Quick Stats</h3><div class="grid grid-cols-2 md:grid-cols-4 gap-4"><div class="p-4 rounded-lg text-center"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-secondary)>Helm Releases</div></div><div class="p-4 rounded-lg text-center"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-secondary)>ArgoCD Apps</div></div><div class="p-4 rounded-lg text-center"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-secondary)>Flux Resources</div></div><div class="p-4 rounded-lg text-center"style=background:var(--bg-tertiary)><div class="text-2xl font-bold"style=color:var(--success-color)></div><div class=text-sm style=color:var(--text-secondary)>Active Plugins'),x1=T('<div class="flex items-center justify-between mb-4"><div class=text-sm style=color:var(--text-muted)> releases</div><button class="flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-colors"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>Refresh'),$1=T("<table class=data-table><thead><tr><th>Name</th><th>Namespace</th><th>Chart</th><th>Revision</th><th>Status</th><th>Updated</th><th>Actions</th></tr></thead><tbody>"),Gi=T('<div class="card overflow-hidden">'),w1=T('<div class="flex items-center justify-between mb-4"><div class=text-sm style=color:var(--text-muted)> applications</div><button class="flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-colors"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>Refresh'),S1=T("<table class=data-table><thead><tr><th>Name</th><th>Project</th><th>Sync Status</th><th>Health</th><th>Age</th><th>Actions</th></tr></thead><tbody>"),C1=T('<div class="flex items-center justify-between mb-4"><div class=text-sm style=color:var(--text-muted)> resources</div><button class="flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-colors"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>Refresh'),k1=T("<table class=data-table><thead><tr><th>Name</th><th>Kind</th><th>Namespace</th><th>Ready</th><th>Status</th></tr></thead><tbody>"),Hl=T("<div>"),A1=T('<div class="border rounded-lg overflow-hidden"style=border-color:var(--border-color)><table class="data-table w-full"><thead><tr><th>Revision</th><th>Status</th><th>Updated</th><th>Description</th><th>Actions</th></tr></thead><tbody>'),M1=T('<div class=space-y-4><div class="grid grid-cols-2 gap-4"><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Chart</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Current Revision</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Namespace</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Status</div><div><span class="badge badge-success"></span></div></div><div class="p-3 rounded-lg col-span-2"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Last Updated</div><div style=color:var(--text-primary)></div></div></div><div><h4 class="font-semibold mb-3 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>Release History'),E1=T('<div class=space-y-4><div class="flex gap-2"><button class="flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors"title="Apply changes from Git repository"style=background:var(--accent-primary);color:#fff><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg></button><button title="Fetch latest state from cluster"class="flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div><div class="grid grid-cols-2 gap-4"><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Project</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Namespace</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Sync Status</div><div><span></span></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Health</div><div><span></span></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Age</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Revision</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg col-span-2"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Repository</div><div class="text-sm break-all"style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Path</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Cluster</div><div class="text-sm break-all"style=color:var(--text-primary)>'),L1=T('<div class=space-y-6><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Plugins</h1><p style=color:var(--text-secondary)>GitOps and package management integrations</p></div><div class="flex gap-2 border-b"style=border-color:var(--border-color)>'),R1=T('<button class="px-4 py-2 -mb-px transition-colors">'),D1=T('<div class="card p-6"><div class="flex items-center gap-3 mb-4"><div class=flex-shrink-0></div><div><div class=font-semibold style=color:var(--text-primary)></div><div class=text-sm style=color:var(--text-muted)></div></div></div><p class="text-sm mb-4"style=color:var(--text-secondary)></p><div class="flex items-center justify-between"><span></span><button class=text-sm style=color:var(--accent-primary)>View â'),T1=T('<div class="text-2xl font-bold"style=color:var(--accent-primary)>'),P1=T('<div class="text-2xl font-bold"style=color:var(--accent-secondary)>'),I1=T('<div class="text-2xl font-bold"style=color:#8b5cf6>'),Ji=T('<div class="p-8 text-center"><div class="spinner mx-auto">'),B1=T('<tr><td colspan=7 class="text-center py-8"style=color:var(--text-muted)>No Helm releases found'),O1=T('<tr class="cursor-pointer hover:bg-[var(--bg-tertiary)]"><td class=font-medium style=color:var(--accent-primary)></td><td></td><td></td><td></td><td><span></span></td><td></td><td><button class=action-btn title="Details &amp; History"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z">'),N1=T('<div class="p-8 text-center"style=color:var(--text-muted)><svg class="w-12 h-12 mx-auto mb-4 opacity-50"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg><p>No ArgoCD applications found</p><p class="text-sm mt-2">ArgoCD may not be installed or configured'),H1=T('<tr class="cursor-pointer hover:bg-[var(--bg-tertiary)]"><td class=font-medium style=color:var(--accent-primary)></td><td></td><td><span></span></td><td><span></span></td><td></td><td class="flex gap-1"><button class=action-btn title="Sync - Apply changes from Git"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg></button><button class=action-btn title="Refresh - Fetch latest state"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button><button class=action-btn title=Details><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z">'),z1=T('<div class="p-8 text-center"style=color:var(--text-muted)><svg class="w-12 h-12 mx-auto mb-4 opacity-50"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg><p>No Flux resources found</p><p class="text-sm mt-2">Flux may not be installed or configured'),F1=T("<tr><td class=font-medium style=color:var(--accent-primary)></td><td></td><td></td><td><span></span></td><td>"),j1=T('<div class="p-4 text-center"><div class="spinner mx-auto">'),U1=T('<div class="p-4 text-center"style=color:var(--text-muted)>No history available'),V1=T('<span class="ml-2 badge badge-success">current'),W1=T('<button class="px-3 py-1.5 rounded transition-colors font-medium"style=background:var(--warning-color);color:#000>'),q1=T('<tr><td style=color:var(--accent-primary)></td><td><span></span></td><td style=color:var(--text-secondary)></td><td class="max-w-xs truncate"style=color:var(--text-muted)></td><td>');const K1=()=>{const[e,t]=J("overview"),[r,i]=J(null),[h,_]=J(null),[f,s]=J(!1),[l,u]=J(!1),[g,p]=J([]),[b,m]=J(!1),[C,y]=J(!1),[n,d]=J(null),[a,{refetch:c,mutate:v}]=qe(()=>e()==="helm"||e()==="overview"?St():!1,async()=>De.getHelmReleases()),[x,{refetch:S,mutate:E}]=qe(()=>e()==="argocd"||e()==="overview"?St():!1,async()=>De.getArgoCDApps()),[$,{refetch:k,mutate:O}]=qe(()=>e()==="flux"||e()==="overview"?St():!1,async()=>De.getFluxResources());Tt(()=>{St()&&(v(void 0),E(void 0),O(void 0))});const B=async(F,W)=>{m(!0);try{const V=await De.getHelmReleaseHistory(F,W);p(V.history||[])}catch(V){console.error("Failed to fetch release history:",V),p([])}m(!1)},D=async F=>{const W=r();if(W){y(!0),d(null);try{await De.rollbackHelmRelease(W.name,W.namespace,F),d({type:"success",text:`Rolled back to revision ${F}`}),B(W.name,W.namespace),c()}catch(V){d({type:"error",text:V.message||"Rollback failed"})}y(!1)}},I=async()=>{const F=h();if(F){y(!0),d(null);try{await De.syncArgoCDApp(F.name,F.namespace),d({type:"success",text:"Sync triggered successfully"}),S()}catch(W){d({type:"error",text:W.message||"Sync failed"})}y(!1)}},A=async()=>{const F=h();if(F){y(!0),d(null);try{await De.refreshArgoCDApp(F.name,F.namespace),d({type:"success",text:"Refresh triggered successfully"}),S()}catch(W){d({type:"error",text:W.message||"Refresh failed"})}y(!1)}},P=F=>{i(F),s(!0),d(null),B(F.name,F.namespace)},R=F=>{_(F),u(!0),d(null)},N=()=>u1(),w=()=>f1(),H=()=>g1(),z=()=>p1(),U=[{name:"Helm",version:"v3",enabled:!0,description:"Package manager for Kubernetes",icon:L(N,{})},{name:"ArgoCD",version:"v2",enabled:!0,description:"GitOps continuous delivery",icon:L(w,{})},{name:"Flux",version:"v2",enabled:!0,description:"GitOps toolkit for Kubernetes",icon:L(H,{})},{name:"Kustomize",version:"v5",enabled:!0,description:"Kubernetes native configuration management",icon:L(z,{})}],te=[{id:"overview",label:"Overview"},{id:"helm",label:"Helm Releases"},{id:"argocd",label:"ArgoCD Apps"},{id:"flux",label:"Flux Resources"}];return(()=>{var F=L1(),W=F.firstChild,V=W.firstChild;V.nextSibling;var de=W.nextSibling;return o(de,L(He,{each:te,children:M=>(()=>{var j=R1();return j.$$click=()=>t(M.id),o(j,()=>M.label),ie(K=>{var Z=e()===M.id?"var(--accent-primary)":"var(--text-secondary)",se=e()===M.id?"2px solid var(--accent-primary)":"2px solid transparent";return Z!==K.e&&ce(j,"color",K.e=Z),se!==K.t&&ce(j,"border-bottom",K.t=se),K},{e:void 0,t:void 0}),j})()})),o(F,L(G,{get when(){return e()==="overview"},get children(){return[(()=>{var M=v1();return o(M,L(He,{each:U,children:j=>(()=>{var K=D1(),Z=K.firstChild,se=Z.firstChild,ee=se.nextSibling,ae=ee.firstChild,X=ae.nextSibling,q=Z.nextSibling,ne=q.nextSibling,Y=ne.firstChild,re=Y.nextSibling;return o(se,()=>j.icon),o(ae,()=>j.name),o(X,()=>j.version),o(q,()=>j.description),o(Y,()=>j.enabled?"Enabled":"Disabled"),re.$$click=()=>t(j.name.toLowerCase()),ie(()=>ze(Y,`badge ${j.enabled?"badge-success":"badge-warning"}`)),K})()})),M})(),(()=>{var M=y1(),j=M.firstChild,K=j.nextSibling,Z=K.firstChild,se=Z.firstChild,ee=Z.nextSibling,ae=ee.firstChild,X=ee.nextSibling,q=X.firstChild,ne=X.nextSibling,Y=ne.firstChild;return Y.nextSibling,o(Z,L(G,{get when(){return a.loading},get fallback(){return(()=>{var re=T1();return o(re,(()=>{var Q=Re(()=>!!Array.isArray(a()));return()=>Q()?a().length:0})()),re})()},get children(){var re=m1();return re.firstChild,re}}),se),o(ee,L(G,{get when(){return x.loading},get fallback(){return(()=>{var re=P1();return o(re,(()=>{var Q=Re(()=>!!Array.isArray(x()));return()=>Q()?x().length:0})()),re})()},get children(){var re=_1();return re.firstChild,re}}),ae),o(X,L(G,{get when(){return $.loading},get fallback(){return(()=>{var re=I1();return o(re,(()=>{var Q=Re(()=>!!Array.isArray($()));return()=>Q()?$().length:0})()),re})()},get children(){var re=b1();return re.firstChild,re}}),q),o(Y,()=>U.filter(re=>re.enabled).length),M})()]}}),null),o(F,L(G,{get when(){return e()==="helm"},get children(){return[(()=>{var M=x1(),j=M.firstChild,K=j.firstChild,Z=j.nextSibling,se=Z.firstChild;return o(j,()=>a()?.length||0,K),Z.$$click=()=>c(),ie(ee=>{var ae=a.loading,X=a.loading?.5:1,q=`w-4 h-4 ${a.loading?"animate-spin":""}`;return ae!==ee.e&&(Z.disabled=ee.e=ae),X!==ee.t&&ce(Z,"opacity",ee.t=X),q!==ee.a&&Xe(se,"class",ee.a=q),ee},{e:void 0,t:void 0,a:void 0}),M})(),(()=>{var M=Gi();return o(M,L(G,{get when(){return!a.loading},get fallback(){return Ji()},get children(){var j=$1(),K=j.firstChild,Z=K.nextSibling;return o(Z,L(He,{get each(){return a()||[]},get fallback(){return(()=>{var se=B1();return se.firstChild,se})()},children:se=>(()=>{var ee=O1(),ae=ee.firstChild,X=ae.nextSibling,q=X.nextSibling,ne=q.nextSibling,Y=ne.nextSibling,re=Y.firstChild,Q=Y.nextSibling,ve=Q.nextSibling,Ae=ve.firstChild;return ee.$$click=()=>P(se),o(ae,()=>se.name),o(X,()=>se.namespace),o(q,()=>se.chart),o(ne,()=>se.revision),o(re,()=>se.status),o(Q,()=>se.updated),Ae.$$click=Ce=>{Ce.stopPropagation(),P(se)},ie(()=>ze(re,`badge ${se.status==="deployed"?"badge-success":"badge-warning"}`)),ee})()})),j}})),M})()]}}),null),o(F,L(G,{get when(){return e()==="argocd"},get children(){return[(()=>{var M=w1(),j=M.firstChild,K=j.firstChild,Z=j.nextSibling,se=Z.firstChild;return o(j,()=>x()?.length||0,K),Z.$$click=()=>S(),ie(ee=>{var ae=x.loading,X=x.loading?.5:1,q=`w-4 h-4 ${x.loading?"animate-spin":""}`;return ae!==ee.e&&(Z.disabled=ee.e=ae),X!==ee.t&&ce(Z,"opacity",ee.t=X),q!==ee.a&&Xe(se,"class",ee.a=q),ee},{e:void 0,t:void 0,a:void 0}),M})(),(()=>{var M=Gi();return o(M,L(G,{get when(){return!x.loading},get fallback(){return Ji()},get children(){return L(G,{get when(){return(x()||[]).length>0},get fallback(){return N1()},get children(){var j=S1(),K=j.firstChild,Z=K.nextSibling;return o(Z,L(He,{get each(){return x()||[]},children:se=>(()=>{var ee=H1(),ae=ee.firstChild,X=ae.nextSibling,q=X.nextSibling,ne=q.firstChild,Y=q.nextSibling,re=Y.firstChild,Q=Y.nextSibling,ve=Q.nextSibling,Ae=ve.firstChild,Ce=Ae.nextSibling,we=Ce.nextSibling;return ee.$$click=()=>R(se),o(ae,()=>se.name),o(X,()=>se.project),o(ne,()=>se.syncStatus),o(re,()=>se.health),o(Q,()=>se.age),Ae.$$click=_e=>{_e.stopPropagation(),_(se),I()},Ce.$$click=_e=>{_e.stopPropagation(),_(se),A()},we.$$click=_e=>{_e.stopPropagation(),R(se)},ie(_e=>{var ge=`badge ${se.syncStatus==="Synced"?"badge-success":"badge-warning"}`,le=`badge ${se.health==="Healthy"?"badge-success":"badge-error"}`;return ge!==_e.e&&ze(ne,_e.e=ge),le!==_e.t&&ze(re,_e.t=le),_e},{e:void 0,t:void 0}),ee})()})),j}})}})),M})()]}}),null),o(F,L(G,{get when(){return e()==="flux"},get children(){return[(()=>{var M=C1(),j=M.firstChild,K=j.firstChild,Z=j.nextSibling,se=Z.firstChild;return o(j,()=>$()?.length||0,K),Z.$$click=()=>k(),ie(ee=>{var ae=$.loading,X=$.loading?.5:1,q=`w-4 h-4 ${$.loading?"animate-spin":""}`;return ae!==ee.e&&(Z.disabled=ee.e=ae),X!==ee.t&&ce(Z,"opacity",ee.t=X),q!==ee.a&&Xe(se,"class",ee.a=q),ee},{e:void 0,t:void 0,a:void 0}),M})(),(()=>{var M=Gi();return o(M,L(G,{get when(){return!$.loading},get fallback(){return Ji()},get children(){return L(G,{get when(){return($()||[]).length>0},get fallback(){return z1()},get children(){var j=k1(),K=j.firstChild,Z=K.nextSibling;return o(Z,L(He,{get each(){return $()||[]},children:se=>(()=>{var ee=F1(),ae=ee.firstChild,X=ae.nextSibling,q=X.nextSibling,ne=q.nextSibling,Y=ne.firstChild,re=ne.nextSibling;return o(ae,()=>se.name),o(X,()=>se.kind),o(q,()=>se.namespace),o(Y,()=>se.ready?"True":"False"),o(re,()=>se.status),ie(()=>ze(Y,`badge ${se.ready?"badge-success":"badge-error"}`)),ee})()})),j}})}})),M})()]}}),null),o(F,L(it,{get isOpen(){return f()},onClose:()=>s(!1),get title(){return`Helm Release: ${r()?.name}`},size:"lg",get children(){return L(G,{get when(){return r()},get children(){var M=M1(),j=M.firstChild,K=j.firstChild,Z=K.firstChild,se=Z.nextSibling,ee=K.nextSibling,ae=ee.firstChild,X=ae.nextSibling,q=ee.nextSibling,ne=q.firstChild,Y=ne.nextSibling,re=q.nextSibling,Q=re.firstChild,ve=Q.nextSibling,Ae=ve.firstChild,Ce=re.nextSibling,we=Ce.firstChild,_e=we.nextSibling,ge=j.nextSibling;return ge.firstChild,o(M,L(G,{get when(){return n()},get children(){var le=Hl();return o(le,()=>n()?.text),ie(()=>ze(le,`p-3 rounded-lg ${n()?.type==="success"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`)),le}}),j),o(se,()=>r()?.chart),o(X,()=>r()?.revision),o(Y,()=>r()?.namespace),o(Ae,()=>r()?.status),o(_e,()=>r()?.updated),o(ge,L(G,{get when(){return!b()},get fallback(){return j1()},get children(){return L(G,{get when(){return g().length>0},get fallback(){return U1()},get children(){var le=A1(),ue=le.firstChild,Se=ue.firstChild,be=Se.nextSibling;return o(be,L(He,{get each(){return g()},children:oe=>(()=>{var ye=q1(),pe=ye.firstChild,he=pe.nextSibling,me=he.firstChild,fe=he.nextSibling,xe=fe.nextSibling,$e=xe.nextSibling;return o(pe,()=>oe.revision,null),o(pe,L(G,{get when(){return oe.revision===r()?.revision},get children(){return V1()}}),null),o(me,()=>oe.status),o(fe,()=>oe.updated),o(xe,()=>oe.description||"-"),o($e,L(G,{get when(){return oe.revision!==r()?.revision},get children(){var ke=W1();return ke.$$click=()=>D(oe.revision),o(ke,()=>C()?"Rolling back...":"Rollback"),ie(Be=>{var Pe=C(),Le=C()?.5:1;return Pe!==Be.e&&(ke.disabled=Be.e=Pe),Le!==Be.t&&ce(ke,"opacity",Be.t=Le),Be},{e:void 0,t:void 0}),ke}})),ie(()=>ze(me,`badge ${oe.status==="deployed"?"badge-success":oe.status==="superseded"?"badge-secondary":"badge-warning"}`)),ye})()})),le}})}}),null),M}})}}),null),o(F,L(it,{get isOpen(){return l()},onClose:()=>u(!1),get title(){return`ArgoCD App: ${h()?.name}`},size:"lg",get children(){return L(G,{get when(){return h()},get children(){var M=E1(),j=M.firstChild,K=j.firstChild;K.firstChild;var Z=K.nextSibling;Z.firstChild;var se=j.nextSibling,ee=se.firstChild,ae=ee.firstChild,X=ae.nextSibling,q=ee.nextSibling,ne=q.firstChild,Y=ne.nextSibling,re=q.nextSibling,Q=re.firstChild,ve=Q.nextSibling,Ae=ve.firstChild,Ce=re.nextSibling,we=Ce.firstChild,_e=we.nextSibling,ge=_e.firstChild,le=Ce.nextSibling,ue=le.firstChild,Se=ue.nextSibling,be=le.nextSibling,oe=be.firstChild,ye=oe.nextSibling,pe=be.nextSibling,he=pe.firstChild,me=he.nextSibling,fe=pe.nextSibling,xe=fe.firstChild,$e=xe.nextSibling,ke=fe.nextSibling,Be=ke.firstChild,Pe=Be.nextSibling;return o(M,L(G,{get when(){return n()},get children(){var Le=Hl();return o(Le,()=>n()?.text),ie(()=>ze(Le,`p-3 rounded-lg ${n()?.type==="success"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`)),Le}}),j),K.$$click=I,o(K,()=>C()?"Syncing...":"Sync",null),Z.$$click=A,o(Z,()=>C()?"Refreshing...":"Refresh",null),o(X,()=>h()?.project),o(Y,()=>h()?.namespace),o(Ae,()=>h()?.syncStatus),o(ge,()=>h()?.health),o(Se,()=>h()?.age),o(ye,()=>h()?.revision||"-"),o(me,()=>h()?.repoURL||"-"),o($e,()=>h()?.path||"-"),o(Pe,()=>h()?.cluster||"-"),ie(Le=>{var Oe=C(),Fe=C()?.5:1,je=C(),Ke=C()?.5:1,Te=`badge ${h()?.syncStatus==="Synced"?"badge-success":"badge-warning"}`,Ge=`badge ${h()?.health==="Healthy"?"badge-success":"badge-error"}`;return Oe!==Le.e&&(K.disabled=Le.e=Oe),Fe!==Le.t&&ce(K,"opacity",Le.t=Fe),je!==Le.a&&(Z.disabled=Le.a=je),Ke!==Le.o&&ce(Z,"opacity",Le.o=Ke),Te!==Le.i&&ze(Ae,Le.i=Te),Ge!==Le.n&&ze(ge,Le.n=Ge),Le},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),M}})}}),null),F})()};et(["click"]);var Y1=T('<svg class="w-8 h-8"viewBox="0 0 48 48"><path fill=#4285F4 d="M24 4L6 14v20l18 10 18-10V14L24 4z"></path><path fill=#EA4335 d="M24 4L6 14l18 10 18-10L24 4z"></path><path fill=#34A853 d="M6 34l18 10V24L6 14v20z"></path><path fill=#FBBC05 d="M42 34V14L24 24v20l18-10z"></path><path fill=#fff d="M24 17l-7 4v8l7 4 7-4v-8l-7-4z"opacity=.3>'),G1=T('<svg class="w-8 h-8"viewBox="0 0 48 48"><path fill=#FF9900 d="M8 24c0-8.8 7.2-16 16-16s16 7.2 16 16-7.2 16-16 16S8 32.8 8 24z"></path><path fill=#252F3E d="M16 22c0-4.4 3.6-8 8-8s8 3.6 8 8-3.6 8-8 8-8-3.6-8-8z">'),J1=T('<svg class="w-8 h-8"viewBox="0 0 48 48"><path fill=#0089D6 d="M24 4L8 24l8 16h16l8-16L24 4z">'),X1=T('<svg class="w-8 h-8"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z">'),Z1=T('<div class="text-center py-8"style=color:var(--text-muted)>No namespace cost data available'),Q1=T('<span class="text-xs px-1.5 py-0.5 rounded"style="background:rgba(34, 197, 94, 0.2);color:var(--success-color)">~70% savings'),e_=T('<div class="mt-4 pt-3 border-t"style=border-color:var(--border-color)><div class="flex justify-between text-sm"><span style=color:var(--text-secondary)>On-Demand Nodes</span><span style=color:var(--text-primary)></span></div><div class="flex justify-between text-sm mt-1"><span style=color:var(--text-secondary)>Spot/Preemptible Nodes</span><span class="flex items-center gap-1"><span style=color:var(--success-color)>'),t_=T('<div class="grid grid-cols-1 lg:grid-cols-2 gap-6"><div class="card p-6"><h3 class="font-semibold mb-4"style=color:var(--text-primary)>Cost by Namespace</h3><div class=space-y-3></div></div><div class="card p-6"><h3 class="font-semibold mb-4"style=color:var(--text-primary)>Resource Allocation</h3><div class=space-y-4><div><div class="flex justify-between text-sm mb-2"><span style=color:var(--text-secondary)>CPU (<!>)</span><span style=color:var(--text-muted)>Cluster Total</span></div><div class="h-3 rounded-full overflow-hidden"style=background:var(--bg-tertiary)><div class="h-full rounded-full"style=width:100%;background:var(--accent-primary)></div></div></div><div><div class="flex justify-between text-sm mb-2"><span style=color:var(--text-secondary)>Memory (<!>)</span><span style=color:var(--text-muted)>Cluster Total</span></div><div class="h-3 rounded-full overflow-hidden"style=background:var(--bg-tertiary)><div class="h-full rounded-full"style=width:100%;background:var(--accent-secondary)></div></div></div><div><div class="flex justify-between text-sm mb-2"><span style=color:var(--text-secondary)>Nodes</span><span style=color:var(--text-muted)></span></div></div></div><div class="mt-6 pt-4 border-t"style=border-color:var(--border-color)><h4 class="text-sm font-medium mb-3"style=color:var(--text-primary)>Pricing Rates (<!>)</h4><div class="space-y-2 text-sm"><div class="flex justify-between"><span style=color:var(--text-secondary)>CPU (per core/hour)</span><span style=color:var(--text-primary)>$</span></div><div class="flex justify-between"><span style=color:var(--text-secondary)>Memory (per GB/hour)</span><span style=color:var(--text-primary)>$</span></div><div class="flex justify-between"><span style=color:var(--text-secondary)>Storage (per GB/month)</span><span style=color:var(--text-primary)>$</span></div></div><p class="text-xs mt-3"style=color:var(--text-muted)>'),r_=T('<div class="card overflow-hidden"><table class=data-table><thead><tr><th>Namespace</th><th>Pods</th><th>CPU</th><th>Memory</th><th>Hourly</th><th>Daily</th><th>Monthly</th></tr></thead><tbody>'),s_=T('<div class="card p-6 mb-6"><div class="flex items-center gap-3"><svg class="w-6 h-6"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--success-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h3 class=font-semibold style=color:var(--text-primary)>Optimization Opportunities</h3><p class=text-sm style=color:var(--text-secondary)>Resources using less than 10% of their requests could be scaled down to save costs'),i_=T('<div class="card overflow-hidden"><table class=data-table><thead><tr><th>Resource</th><th>Namespace</th><th>Kind</th><th>CPU Usage</th><th>Memory Usage</th><th>Wasted Cost/hr</th></tr></thead><tbody>'),n_=T('<div class=space-y-6><div class="flex items-center justify-between"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Cost Analysis</h1><p style=color:var(--text-secondary)></p></div><div class="flex items-center gap-3 px-4 py-2 rounded-lg"style=background:var(--bg-tertiary)><div><div class=font-medium style=color:var(--text-primary)></div><div class=text-xs style=color:var(--text-muted)></div></div></div></div><div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div class="card p-6"><div class=text-sm style=color:var(--text-muted)>Hourly Cost</div><div class="text-3xl font-bold mt-2"style=color:var(--accent-primary)></div><div class="text-xs mt-1"style=color:var(--text-secondary)> nodes</div></div><div class="card p-6"><div class=text-sm style=color:var(--text-muted)>Daily Cost</div><div class="text-3xl font-bold mt-2"style=color:var(--accent-secondary)></div><div class="text-xs mt-1"style=color:var(--text-secondary)> CPU</div></div><div class="card p-6"><div class=text-sm style=color:var(--text-muted)>Monthly Estimate</div><div class="text-3xl font-bold mt-2"style=color:#f59e0b></div><div class="text-xs mt-1"style=color:var(--text-secondary)> Memory</div></div><div class="card p-6"><div class=text-sm style=color:var(--text-muted)>Potential Savings</div><div class="text-3xl font-bold mt-2"style=color:var(--success-color)></div><div class="text-xs mt-1"style=color:var(--text-secondary)> idle resources</div></div></div><div class="flex gap-2 border-b"style=border-color:var(--border-color)>'),l_=T('<button class="px-4 py-2 -mb-px transition-colors">'),o_=T('<div class="flex items-center justify-between p-3 rounded-lg"style=background:var(--bg-tertiary)><div><div class=font-medium style=color:var(--text-primary)></div><div class=text-xs style=color:var(--text-muted)> pods â¢ <!> CPU â¢ <!> mem</div></div><div class=text-right><div class=font-bold style=color:var(--warning-color)>/mo</div><div class=text-xs style=color:var(--text-muted)>/day'),a_=T('<tr><td colspan=7 class="text-center py-8"style=color:var(--text-muted)>No namespace cost data available'),c_=T("<tr class=hover:bg-[var(--bg-tertiary)]><td class=font-medium style=color:var(--accent-primary)></td><td></td><td></td><td></td><td></td><td></td><td class=font-bold style=color:var(--warning-color)>"),d_=T('<tr><td colspan=6 class="text-center py-8"style=color:var(--text-muted)><svg class="w-12 h-12 mx-auto mb-4 text-green-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><p>No idle resources found</p><p class=text-sm>All resources are being utilized efficiently'),h_=T('<tr class=hover:bg-[var(--bg-tertiary)]><td class=font-medium style=color:var(--accent-primary)></td><td></td><td><span class="badge badge-info"></span></td><td><div class="flex items-center gap-2"><div class="w-16 h-2 rounded-full overflow-hidden"style=background:var(--bg-tertiary)><div class="h-full rounded-full"style=background:var(--warning-color)></div></div><span class=text-xs style=color:var(--text-muted)>%</span></div></td><td><div class="flex items-center gap-2"><div class="w-16 h-2 rounded-full overflow-hidden"style=background:var(--bg-tertiary)><div class="h-full rounded-full"style=background:var(--accent-secondary)></div></div><span class=text-xs style=color:var(--text-muted)>%</span></div></td><td class=font-bold style=color:var(--success-color)>');const u_=()=>{const[e,t]=J("overview"),[r,i]=J(null),[h,{refetch:_}]=qe(()=>{const n=St(),d=Yt();return{context:n,refresh:d}},async()=>{try{const n=await De.getClusterCost();return console.log("Cost API response:",n),n}catch(n){return console.error("Cost API error:",n),null}}),[f,{refetch:s}]=qe(()=>{const n=St(),d=Yt();return{context:n,refresh:d}},async()=>De.getStatus()),[l,{refetch:u}]=qe(()=>{const n=St(),d=Yt();return{context:n,refresh:d}},async()=>De.getIdleResources()),[g,{refetch:p}]=qe(()=>{const n=St(),d=Yt();return{context:n,refresh:d}},async()=>De.getNamespaces()),b=n=>n==null?"--":`$${n.toFixed(2)}`,m=n=>n==null?"--":n<1?`${(n*1e3).toFixed(0)}m`:`${n.toFixed(2)} cores`,C=n=>n==null?"--":n<1?`${(n*1024).toFixed(0)} Mi`:`${n.toFixed(2)} Gi`,y=[{id:"overview",label:"Overview"},{id:"namespaces",label:"By Namespace"},{id:"idle",label:"Idle Resources"}];return(()=>{var n=n_(),d=n.firstChild,a=d.firstChild,c=a.firstChild,v=c.nextSibling,x=a.nextSibling,S=x.firstChild,E=S.firstChild,$=E.nextSibling,k=d.nextSibling,O=k.firstChild,B=O.firstChild,D=B.nextSibling,I=D.nextSibling,A=I.firstChild,P=O.nextSibling,R=P.firstChild,N=R.nextSibling,w=N.nextSibling,H=w.firstChild,z=P.nextSibling,U=z.firstChild,te=U.nextSibling,F=te.nextSibling,W=F.firstChild,V=z.nextSibling,de=V.firstChild,M=de.nextSibling,j=M.nextSibling,K=j.firstChild,Z=k.nextSibling;return o(v,(()=>{var se=Re(()=>!!f()?.cluster);return()=>se()?`Cluster: ${f()?.cluster}`:"Cluster cost estimation and optimization opportunities"})()),o(x,L(G,{get when(){return h()?.cloud?.provider==="gcp"},get children(){return Y1()}}),S),o(x,L(G,{get when(){return h()?.cloud?.provider==="aws"},get children(){return G1()}}),S),o(x,L(G,{get when(){return h()?.cloud?.provider==="azure"},get children(){return J1()}}),S),o(x,L(G,{get when(){return!h()?.cloud?.provider||h()?.cloud?.provider==="unknown"},get children(){return X1()}}),S),o(E,(()=>{var se=Re(()=>!!h.loading);return()=>se()?"Loading...":h()?.cloud?.displayName||"Unknown Cloud"})()),o($,(()=>{var se=Re(()=>!!h.loading);return()=>se()?"...":h()?.cloud?.region||"Unknown region"})()),o(D,()=>b(h()?.hourlyCost)),o(I,()=>h()?.nodeCount||0,A),o(N,()=>b(h()?.dailyCost)),o(w,()=>m(h()?.totalCpu),H),o(te,()=>b(h()?.monthlyCost)),o(F,()=>C(h()?.totalMemory),W),o(M,()=>b((l()?.idleResources||[]).reduce((se,ee)=>se+(ee.wastedCost||0),0)*720)),o(j,()=>(l()?.idleResources||[]).length,K),o(Z,L(He,{each:y,children:se=>(()=>{var ee=l_();return ee.$$click=()=>t(se.id),o(ee,()=>se.label),ie(ae=>{var X=e()===se.id?"var(--accent-primary)":"var(--text-secondary)",q=e()===se.id?"2px solid var(--accent-primary)":"2px solid transparent";return X!==ae.e&&ce(ee,"color",ae.e=X),q!==ae.t&&ce(ee,"border-bottom",ae.t=q),ae},{e:void 0,t:void 0}),ee})()})),o(n,L(G,{get when(){return e()==="overview"},get children(){var se=t_(),ee=se.firstChild,ae=ee.firstChild,X=ae.nextSibling,q=ee.nextSibling,ne=q.firstChild,Y=ne.nextSibling,re=Y.firstChild,Q=re.firstChild,ve=Q.firstChild,Ae=ve.firstChild,Ce=Ae.nextSibling;Ce.nextSibling,ve.nextSibling;var we=Q.nextSibling;we.firstChild;var _e=re.nextSibling,ge=_e.firstChild,le=ge.firstChild,ue=le.firstChild,Se=ue.nextSibling;Se.nextSibling,le.nextSibling;var be=ge.nextSibling;be.firstChild;var oe=_e.nextSibling,ye=oe.firstChild,pe=ye.firstChild,he=pe.nextSibling,me=Y.nextSibling,fe=me.firstChild,xe=fe.firstChild,$e=xe.nextSibling;$e.nextSibling;var ke=fe.nextSibling,Be=ke.firstChild,Pe=Be.firstChild,Le=Pe.nextSibling;Le.firstChild;var Oe=Be.nextSibling,Fe=Oe.firstChild,je=Fe.nextSibling;je.firstChild;var Ke=Oe.nextSibling,Te=Ke.firstChild,Ge=Te.nextSibling;Ge.firstChild;var Ie=ke.nextSibling;return o(X,L(He,{get each(){return(h()?.namespaceCosts||[]).slice(0,8)},children:We=>(()=>{var Ye=o_(),Ze=Ye.firstChild,rt=Ze.firstChild,ot=rt.nextSibling,Ct=ot.firstChild,Ht=Ct.nextSibling,rr=Ht.nextSibling,hr=rr.nextSibling;hr.nextSibling;var Ee=Ze.nextSibling,Ue=Ee.firstChild,nt=Ue.firstChild,ct=Ue.nextSibling,dt=ct.firstChild;return o(rt,()=>We.namespace),o(ot,()=>We.podCount,Ct),o(ot,()=>m(We.totalCpu),Ht),o(ot,()=>C(We.totalMemory),hr),o(Ue,()=>b(We.monthlyCost),nt),o(ct,()=>b(We.dailyCost),dt),Ye})()}),null),o(X,L(G,{get when(){return(h()?.namespaceCosts||[]).length===0},get children(){return Z1()}}),null),o(ve,()=>m(h()?.totalCpu),Ce),o(le,()=>C(h()?.totalMemory),Se),o(he,()=>h()?.nodeCount||0),o(fe,()=>h()?.pricing?.provider||"Generic",$e),o(fe,(()=>{var We=Re(()=>!!h()?.pricing?.region);return()=>We()?` - ${h()?.pricing?.region}`:""})(),$e),o(Le,()=>(h()?.pricing?.cpuPerCoreHour||.0336).toFixed(4),null),o(je,()=>(h()?.pricing?.memoryPerGBHour||.0045).toFixed(4),null),o(Ge,()=>(h()?.pricing?.storagePerGBMonth||.1).toFixed(2),null),o(me,L(G,{get when(){return h()?.pricing?.spotNodesCount!==void 0},get children(){var We=e_(),Ye=We.firstChild,Ze=Ye.firstChild,rt=Ze.nextSibling,ot=Ye.nextSibling,Ct=ot.firstChild,Ht=Ct.nextSibling,rr=Ht.firstChild;return o(rt,()=>h()?.pricing?.onDemandNodesCount||0),o(rr,()=>h()?.pricing?.spotNodesCount||0),o(Ht,L(G,{get when(){return(h()?.pricing?.spotNodesCount||0)>0},get children(){return Q1()}}),null),We}}),Ie),o(Ie,L(G,{get when(){return h()?.cloud?.provider==="gcp"},fallback:"Rates auto-detected from cluster. Actual costs may vary.",get children(){return["GCP ",Re(()=>h()?.cloud?.region)," region pricing applied automatically."]}})),se}}),null),o(n,L(G,{get when(){return e()==="namespaces"},get children(){var se=r_(),ee=se.firstChild,ae=ee.firstChild,X=ae.nextSibling;return o(X,L(He,{get each(){return h()?.namespaceCosts||[]},get fallback(){return(()=>{var q=a_();return q.firstChild,q})()},children:q=>(()=>{var ne=c_(),Y=ne.firstChild,re=Y.nextSibling,Q=re.nextSibling,ve=Q.nextSibling,Ae=ve.nextSibling,Ce=Ae.nextSibling,we=Ce.nextSibling;return o(Y,()=>q.namespace),o(re,()=>q.podCount),o(Q,()=>m(q.totalCpu)),o(ve,()=>C(q.totalMemory)),o(Ae,()=>b(q.hourlyCost)),o(Ce,()=>b(q.dailyCost)),o(we,()=>b(q.monthlyCost)),ne})()})),se}}),null),o(n,L(G,{get when(){return e()==="idle"},get children(){return[(()=>{var se=s_(),ee=se.firstChild,ae=ee.firstChild,X=ae.nextSibling,q=X.firstChild;return q.nextSibling,se})(),(()=>{var se=i_(),ee=se.firstChild,ae=ee.firstChild,X=ae.nextSibling;return o(X,L(He,{get each(){return l()?.idleResources||[]},get fallback(){return(()=>{var q=d_();return q.firstChild,q})()},children:q=>(()=>{var ne=h_(),Y=ne.firstChild,re=Y.nextSibling,Q=re.nextSibling,ve=Q.firstChild,Ae=Q.nextSibling,Ce=Ae.firstChild,we=Ce.firstChild,_e=we.firstChild,ge=we.nextSibling,le=ge.firstChild,ue=Ae.nextSibling,Se=ue.firstChild,be=Se.firstChild,oe=be.firstChild,ye=be.nextSibling,pe=ye.firstChild,he=ue.nextSibling;return o(Y,()=>q.name),o(re,()=>q.namespace),o(ve,()=>q.kind),o(ge,()=>(q.cpuUsage/q.cpuRequest*100).toFixed(1),le),o(ye,()=>(q.memoryUsage/q.memoryRequest*100).toFixed(1),pe),o(he,()=>b(q.wastedCost)),ie(me=>{var fe=`${Math.min(100,q.cpuUsage/q.cpuRequest*100)}%`,xe=`${Math.min(100,q.memoryUsage/q.memoryRequest*100)}%`;return fe!==me.e&&ce(_e,"width",me.e=fe),xe!==me.t&&ce(oe,"width",me.t=xe),me},{e:void 0,t:void 0}),ne})()})),se})()]}}),null),n})()};et(["click"]);var f_=T('<div class="card p-8"><div class=text-center><div class="spinner mx-auto mb-4"></div><p style=color:var(--text-muted)>Checking for configuration drift...'),g_=T('<div class="card p-8"><div class=text-center><svg class="w-16 h-16 mx-auto mb-4"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--success-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><h3 class="text-lg font-semibold"style=color:var(--text-primary)>No Configuration Drift Detected</h3><p style=color:var(--text-secondary)>All resources are in sync with their expected state'),p_=T('<div class="card overflow-hidden"><div class="p-4 border-b"style=border-color:var(--border-color)><h3 class="font-semibold flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--error-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>Drifted Resources (<!>)</h3></div><table class=data-table><thead><tr><th>Resource</th><th>Kind</th><th>Namespace</th><th>Changes</th><th>Last Checked</th><th>Actions</th></tr></thead><tbody>'),v_=T("<div class=space-y-3>"),m_=T('<div class=space-y-4><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Namespace</div><div style=color:var(--text-primary)></div></div><h4 class=font-medium style=color:var(--text-primary)>Changes Detected</h4><div class="flex justify-end gap-2 mt-4"><button class="px-4 py-2 rounded-lg"style=background:var(--bg-tertiary);color:var(--text-primary)>Close</button><button class="px-4 py-2 rounded-lg"style=background:var(--success-color);color:white>Revert to Expected'),__=T('<div class=space-y-6><div class="flex items-center justify-between"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Configuration Drift</h1><p style=color:var(--text-secondary)>Detect and remediate configuration drift from desired state</p></div><button class="flex items-center gap-2 px-4 py-2 rounded-lg transition-colors"style=background:var(--bg-tertiary);color:var(--text-primary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>Check Drift</button></div><div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div class="card p-6"><div class=text-sm style=color:var(--text-muted)>Resources Checked</div><div class="text-3xl font-bold mt-2"style=color:var(--accent-primary)></div></div><div class="card p-6"><div class=text-sm style=color:var(--text-muted)>In Sync</div><div class="text-3xl font-bold mt-2"style=color:var(--success-color)></div></div><div class="card p-6"><div class=text-sm style=color:var(--text-muted)>Drifted</div><div class="text-3xl font-bold mt-2"></div></div><div class="card p-6"><div class=text-sm style=color:var(--text-muted)>Health</div><div class="text-3xl font-bold mt-2">%</div></div></div><div class="card p-6"><h3 class="font-semibold mb-4 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>About Configuration Drift</h3><div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="p-4 rounded-lg"style=background:var(--bg-tertiary)><h4 class="font-medium mb-2"style=color:var(--text-primary)>What is Drift?</h4><p class=text-sm style=color:var(--text-secondary)>Configuration drift occurs when the actual state of a resource differs from its expected or desired state, often due to manual changes.</p></div><div class="p-4 rounded-lg"style=background:var(--bg-tertiary)><h4 class="font-medium mb-2"style=color:var(--text-primary)>Detection Method</h4><p class=text-sm style=color:var(--text-secondary)>We compare resource specifications against their last-applied-configuration annotation or GitOps source of truth.</p></div><div class="p-4 rounded-lg"style=background:var(--bg-tertiary)><h4 class="font-medium mb-2"style=color:var(--text-primary)>Remediation</h4><p class=text-sm style=color:var(--text-secondary)>Revert drifted resources to their expected state automatically, or use GitOps to sync from your repository.'),b_=T('<tr class=hover:bg-[var(--bg-tertiary)]><td class=font-medium style=color:var(--accent-primary)></td><td><span class="badge badge-info"></span></td><td></td><td><span class="badge badge-warning"> changes</span></td><td class=text-sm style=color:var(--text-muted)></td><td><div class="flex items-center gap-2"><button class=action-btn title="View Diff"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></button><button class=action-btn title="Revert to Expected"style=color:var(--success-color)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6">'),y_=T('<div class="text-center py-4"style=color:var(--text-muted)>No detailed changes available'),x_=T('<div class="p-3 rounded-lg border"style=background:var(--bg-secondary);border-color:var(--border-color)><div class="font-mono text-sm mb-2"style=color:var(--accent-primary)></div><div class="grid grid-cols-2 gap-4 text-sm"><div><div class="text-xs mb-1"style=color:var(--text-muted)>Expected</div><div class="p-2 rounded font-mono text-xs break-all"style="background:rgba(34, 197, 94, 0.1);color:var(--success-color)"></div></div><div><div class="text-xs mb-1"style=color:var(--text-muted)>Actual</div><div class="p-2 rounded font-mono text-xs break-all"style="background:rgba(239, 68, 68, 0.1);color:var(--error-color)">');const $_=()=>{const[e,t]=J(!1),[r,i]=J(null),[h,{refetch:_}]=qe(()=>tt(),async g=>{const p=g==="_all"?"default":g;return De.getDriftSummary(p)}),f=g=>{i(g),t(!0)},s=async g=>{if(confirm(`Revert ${g.kind}/${g.name} to its expected state?`))try{await De.revertDrift(g.kind,g.name,g.namespace),_()}catch(p){console.error("Failed to revert drift:",p),alert("Failed to revert. Check console for details.")}},l=()=>(h()?.drifted||[]).length,u=()=>h()?.total||0;return(()=>{var g=__(),p=g.firstChild,b=p.firstChild,m=b.firstChild;m.nextSibling;var C=b.nextSibling,y=p.nextSibling,n=y.firstChild,d=n.firstChild,a=d.nextSibling,c=n.nextSibling,v=c.firstChild,x=v.nextSibling,S=c.nextSibling,E=S.firstChild,$=E.nextSibling,k=S.nextSibling,O=k.firstChild,B=O.nextSibling,D=B.firstChild,I=y.nextSibling,A=I.firstChild,P=A.nextSibling,R=P.firstChild,N=R.firstChild;N.nextSibling;var w=R.nextSibling,H=w.firstChild;H.nextSibling;var z=w.nextSibling,U=z.firstChild;return U.nextSibling,C.$$click=()=>_(),o(a,u),o(x,()=>u()-l()),o($,l),o(B,(()=>{var te=Re(()=>u()>0);return()=>te()?Math.round((u()-l())/u()*100):100})(),D),o(g,L(G,{get when(){return h.loading},get children(){var te=f_(),F=te.firstChild,W=F.firstChild;return W.nextSibling,te}}),I),o(g,L(G,{get when(){return Re(()=>!h.loading)()&&l()===0},get children(){var te=g_(),F=te.firstChild,W=F.firstChild,V=W.nextSibling;return V.nextSibling,te}}),I),o(g,L(G,{get when(){return Re(()=>!h.loading)()&&l()>0},get children(){var te=p_(),F=te.firstChild,W=F.firstChild,V=W.firstChild,de=V.nextSibling,M=de.nextSibling;M.nextSibling;var j=F.nextSibling,K=j.firstChild,Z=K.nextSibling;return o(W,l,M),o(Z,L(He,{get each(){return h()?.drifted||[]},children:se=>(()=>{var ee=b_(),ae=ee.firstChild,X=ae.nextSibling,q=X.firstChild,ne=X.nextSibling,Y=ne.nextSibling,re=Y.firstChild,Q=re.firstChild,ve=Y.nextSibling,Ae=ve.nextSibling,Ce=Ae.firstChild,we=Ce.firstChild,_e=we.nextSibling;return o(ae,()=>se.name),o(q,()=>se.kind),o(ne,()=>se.namespace),o(re,()=>se.driftDetails?.length||0,Q),o(ve,()=>se.lastChecked||"Just now"),we.$$click=()=>f(se),_e.$$click=()=>s(se),ee})()})),te}}),I),o(g,L(it,{get isOpen(){return e()},onClose:()=>t(!1),get title(){return`Drift Details: ${r()?.kind}/${r()?.name}`},size:"lg",get children(){return L(G,{get when(){return r()},get children(){var te=m_(),F=te.firstChild,W=F.firstChild,V=W.nextSibling,de=F.nextSibling,M=de.nextSibling,j=M.firstChild,K=j.nextSibling;return o(V,()=>r()?.namespace),o(te,L(G,{get when(){return(r()?.driftDetails||[]).length>0},get fallback(){return y_()},get children(){var Z=v_();return o(Z,L(He,{get each(){return r()?.driftDetails||[]},children:se=>(()=>{var ee=x_(),ae=ee.firstChild,X=ae.nextSibling,q=X.firstChild,ne=q.firstChild,Y=ne.nextSibling,re=q.nextSibling,Q=re.firstChild,ve=Q.nextSibling;return o(ae,()=>se.field),o(Y,()=>se.expected||"(not set)"),o(ve,()=>se.actual||"(not set)"),ee})()})),Z}}),M),j.$$click=()=>t(!1),K.$$click=()=>{r()&&s(r()),t(!1)},te}})}}),null),ie(te=>{var F=l()>0?"var(--error-color)":"var(--success-color)",W=l()===0?"var(--success-color)":l()<5?"var(--warning-color)":"var(--error-color)";return F!==te.e&&ce($,"color",te.e=F),W!==te.t&&ce(B,"color",te.t=W),te},{e:void 0,t:void 0}),g})()};et(["click"]);class w_{ws=null;reconnectAttempts=0;maxReconnectAttempts=10;reconnectDelay=1e3;handlers=new Set;pingInterval=null;connect(){if(this.ws?.readyState===WebSocket.OPEN)return;const r=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`;try{this.ws=new WebSocket(r),this.ws.onopen=()=>{console.log("WebSocket connected"),this.reconnectAttempts=0,this.startPing(),this.notifyHandlers({type:"connection",data:{connected:!0}})},this.ws.onmessage=i=>{try{const h=JSON.parse(i.data);this.notifyHandlers(h)}catch(h){console.error("Failed to parse WebSocket message:",h)}},this.ws.onclose=()=>{console.log("WebSocket disconnected"),this.stopPing(),this.notifyHandlers({type:"connection",data:{connected:!1}}),this.attemptReconnect()},this.ws.onerror=i=>{console.error("WebSocket error:",i)}}catch(i){console.error("Failed to create WebSocket:",i),this.attemptReconnect()}}disconnect(){this.stopPing(),this.ws&&(this.ws.close(),this.ws=null)}attemptReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.log("Max reconnect attempts reached");return}this.reconnectAttempts++;const t=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);console.log(`Reconnecting in ${t}ms (attempt ${this.reconnectAttempts})`),setTimeout(()=>this.connect(),t)}startPing(){this.pingInterval=window.setInterval(()=>{this.ws?.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify({type:"ping"}))},3e4)}stopPing(){this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null)}subscribe(t){return this.handlers.add(t),()=>this.handlers.delete(t)}notifyHandlers(t){this.handlers.forEach(r=>{try{r(t)}catch(i){console.error("Handler error:",i)}})}send(t){this.ws?.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify(t))}}const ls=new w_,[$$,S_]=J(!1);ls.subscribe(e=>{e.type==="connection"&&S_(e.data.connected)});var C_=T('<svg class="w-4 h-4"fill=currentColor viewBox="0 0 24 24"><path d="M8 5v14l11-7z">'),k_=T('<div class=overflow-y-auto style="max-height:calc(100vh - 320px)">'),A_=T('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Events</h1><p style=color:var(--text-secondary)>Real-time cluster events stream</p></div><div class="flex items-center gap-3"><button></button><button class=icon-btn title="Refresh Events"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div><span></span><span class=text-sm style=color:var(--text-secondary)></span><span class="text-xl font-bold"style=color:var(--text-primary)></span><span class=text-xs style=color:var(--text-muted)>new</span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Normal</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--warning-color)"><span class=text-sm style=color:var(--text-secondary)>Warning</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class=flex-1></div><input type=text placeholder="Search events..."class="px-3 py-2 rounded-lg text-sm w-64"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=all>All Types</option><option value=Normal>Normal</option><option value=Warning>Warning</option></select></div><div class="card overflow-hidden">'),M_=T('<svg class="w-4 h-4"fill=currentColor viewBox="0 0 24 24"><path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z">'),E_=T('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading events...'),L_=T('<div class="p-8 text-center"style=color:var(--text-muted)>No events found'),R_=T('<span class="text-xs px-2 py-0.5 rounded"style=background:var(--bg-tertiary);color:var(--text-secondary)>'),D_=T('<span class="px-2 py-0.5 rounded"style=background:var(--bg-tertiary)>x'),T_=T("<span>Source: "),P_=T('<div style=border-color:var(--border-color)><div class="flex items-start gap-4"><div class="flex-shrink-0 p-2 rounded-lg"style=background:var(--bg-tertiary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></div><div class="flex-1 min-w-0"><div class="flex items-center gap-2 flex-wrap"><span></span><span class="px-2 py-0.5 rounded text-xs"style=background:var(--bg-tertiary);color:var(--accent-primary)></span><span class=text-xs style=color:var(--text-muted)>/</span></div><p class="mt-1 text-sm"style=color:var(--text-primary)></p><div class="mt-2 flex items-center gap-4 text-xs"style=color:var(--text-muted)><span>');const I_=()=>{const[e,t]=J([]),[r,i]=J("all"),[h,_]=J(""),[f,s]=J(!1),[l,u]=J([]),[g,p]=J(0),[b,{refetch:m}]=qe(()=>({ns:tt(),trigger:g()}),async({ns:a})=>{try{console.log("[Events] Fetching events for namespace:",a);const c=a==="_all"||a==="All Namespaces"||!a?void 0:a,v=await De.getEvents(c,200);return console.log("[Events] Received events:",v?.events?.length||0,"total:",v?.total||0),v?.events||[]}catch(c){return console.error("[Events] Failed to fetch events:",c),[]}});Tt(()=>{const a=b(),c=b.loading,v=b.error;console.log("[Events] createEffect triggered:",{hasInitial:!!a,initialLength:a?.length||0,loading:c,error:v?String(v):null}),a&&Array.isArray(a)?a.length>0?(console.log("[Events] Setting events:",a.length),t(a)):console.log("[Events] Initial events array is empty"):!c&&v?console.error("[Events] Error loading events:",v):!c&&!a&&console.log("[Events] No initial events data")}),Qt(()=>{p(a=>a+1)}),Qt(()=>{const a=ls.subscribe(c=>{if(c.type==="event"&&!f()){const v=c.data,x=tt();if(x&&x!=="All Namespaces"&&v.namespace!==x)return;u(S=>{const E=Array.isArray(S)?S:[];return[v,...E].slice(0,50)}),t(S=>{const E=Array.isArray(S)?S:[];return[v,...E].slice(0,500)})}});return()=>a()});const C=Ne(()=>{let a=e();Array.isArray(a)||(console.warn("[Events] events() is not an array:",typeof a,a),a=[]);const c=r(),v=h().toLowerCase();return console.log("[Events] filteredEvents memo:",{totalEvents:a.length,filterType:c,query:v,hasQuery:!!v}),c!=="all"&&(a=a.filter(x=>x.type===c)),v&&(a=a.filter(x=>x.message?.toLowerCase().includes(v)||x.object?.toLowerCase().includes(v)||x.reason?.toLowerCase().includes(v)||x.namespace?.toLowerCase().includes(v))),console.log("[Events] Filtered result:",a.length),a}),y=Ne(()=>{const a=e();return{total:a.length,normal:a.filter(c=>c.type==="Normal").length,warning:a.filter(c=>c.type==="Warning").length}}),n=a=>{if(!a)return"Unknown";const c=new Date(a);if(isNaN(c.getTime()))return"Unknown";const x=new Date().getTime()-c.getTime();return x<6e4?"Just now":x<36e5?`${Math.floor(x/6e4)}m ago`:x<864e5?`${Math.floor(x/36e5)}h ago`:`${Math.floor(x/864e5)}d ago`},d=a=>{switch(a?.toLowerCase()){case"pod":return"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4";case"deployment":return"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10";case"service":return"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9";case"node":return"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01";case"replicaset":return"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4";default:return"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}};return(()=>{var a=A_(),c=a.firstChild,v=c.firstChild,x=v.firstChild;x.nextSibling;var S=v.nextSibling,E=S.firstChild,$=E.nextSibling,k=c.nextSibling,O=k.firstChild,B=O.firstChild,D=B.nextSibling,I=D.nextSibling;I.nextSibling;var A=O.nextSibling,P=A.firstChild,R=P.nextSibling,N=A.nextSibling,w=N.firstChild,H=w.nextSibling,z=N.nextSibling,U=z.firstChild,te=U.nextSibling,F=z.nextSibling,W=F.nextSibling,V=W.nextSibling,de=k.nextSibling;return E.$$click=()=>s(!f()),o(E,L(G,{get when(){return f()},get fallback(){return[M_(),"Pause"]},get children(){return[C_(),"Resume"]}})),$.$$click=()=>m(),o(D,()=>f()?"Paused":"Live"),o(I,()=>l().length),A.$$click=()=>i("all"),o(R,()=>y().total),N.$$click=()=>i("Normal"),o(H,()=>y().normal),z.$$click=()=>i("Warning"),o(te,()=>y().warning),W.$$input=M=>_(M.currentTarget.value),V.addEventListener("change",M=>i(M.currentTarget.value)),o(de,L(G,{get when(){return!b.loading},get fallback(){return(()=>{var M=E_(),j=M.firstChild;return j.nextSibling,M})()},get children(){var M=k_();return o(M,L(He,{get each(){return C()},get fallback(){return L_()},children:(j,K)=>(()=>{var Z=P_(),se=Z.firstChild,ee=se.firstChild,ae=ee.firstChild,X=ae.firstChild,q=ee.nextSibling,ne=q.firstChild,Y=ne.firstChild,re=Y.nextSibling,Q=re.nextSibling,ve=Q.firstChild,Ae=ne.nextSibling,Ce=Ae.nextSibling,we=Ce.firstChild;return o(Y,()=>j.type),o(re,()=>j.reason),o(Q,()=>j.kind,ve),o(Q,()=>j.object,null),o(ne,L(G,{get when(){return j.namespace},get children(){var _e=R_();return o(_e,()=>j.namespace),_e}}),null),o(Ae,()=>j.message),o(we,()=>n(j.time)),o(Ce,L(G,{get when(){return j.count>1},get children(){var _e=D_();return _e.firstChild,o(_e,()=>j.count,null),_e}}),null),o(Ce,L(G,{get when(){return j.source},get children(){var _e=T_();return _e.firstChild,o(_e,()=>j.source,null),_e}}),null),ie(_e=>{var ge=`p-4 border-b transition-all hover:bg-white/5 ${K()<l().length&&!f()?"animate-slide-in":""}`,le=`4px solid ${j.type==="Warning"?"var(--warning-color)":"var(--success-color)"}`,ue=j.type==="Warning"?"var(--warning-color)":"var(--accent-primary)",Se=d(j.kind),be=`px-2 py-0.5 rounded text-xs font-medium ${j.type==="Warning"?"bg-amber-500/20 text-amber-400":"bg-green-500/20 text-green-400"}`;return ge!==_e.e&&ze(Z,_e.e=ge),le!==_e.t&&ce(Z,"border-left",_e.t=le),ue!==_e.a&&ce(ae,"color",_e.a=ue),Se!==_e.o&&Xe(X,"d",_e.o=Se),be!==_e.i&&ze(Y,_e.i=be),_e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),Z})()})),M}})),ie(M=>{var j=`px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-all ${f()?"bg-gradient-to-r from-green-500/20 to-emerald-500/20 border border-green-500/40":"bg-gradient-to-r from-amber-500/20 to-orange-500/20 border border-amber-500/40"}`,K=f()?"var(--success-color)":"var(--warning-color)",Z=`card px-4 py-2 flex items-center gap-2 ${f()?"":"animate-pulse"}`,se=`3px solid ${f()?"var(--warning-color)":"var(--success-color)"}`,ee=`w-3 h-3 rounded-full ${f()?"bg-amber-500":"bg-green-500 animate-pulse"}`;return j!==M.e&&ze(E,M.e=j),K!==M.t&&ce(E,"color",M.t=K),Z!==M.a&&ze(O,M.a=Z),se!==M.o&&ce(O,"border-left",M.o=se),ee!==M.i&&ze(B,M.i=ee),M},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),ie(()=>W.value=h()),ie(()=>V.value=r()),a})()};et(["click","input"]);var B_=T('<span class="px-2 py-1 rounded text-xs font-medium">'),O_=T('<div class="p-4 text-center text-sm"style=color:var(--text-muted)>No namespaces found'),N_=T('<div class="p-2 border-t text-xs text-center"style=borderColor:var(--border-color);color:var(--text-muted)> selected'),H_=T('<div class="absolute right-0 mt-2 w-64 rounded-lg border shadow-lg z-50 max-h-96 overflow-hidden flex flex-col"style=background:var(--bg-secondary);borderColor:var(--border-color)><div class="p-2 border-b"style=borderColor:var(--border-color)><input type=text placeholder="Search namespaces..."class="w-full px-3 py-2 rounded border text-sm"style=background:var(--bg-primary);color:var(--text-primary);borderColor:var(--border-color)></div><div class="p-2 border-b flex gap-2"style=borderColor:var(--border-color)><button class="px-3 py-1 text-xs rounded border"style=background:var(--bg-primary);color:var(--text-primary);borderColor:var(--border-color)>Select All</button><button class="px-3 py-1 text-xs rounded border"style=background:var(--bg-primary);color:var(--text-primary);borderColor:var(--border-color)>Clear</button></div><div class="overflow-y-auto flex-1">'),z_=T('<div class="flex items-center gap-2 flex-wrap"><span class=text-sm style=color:var(--text-muted)>Filtering by:</span><button class="text-xs underline"style=color:var(--text-muted)>Clear all'),F_=T('<select class="px-3 py-2 rounded-lg text-sm border"style=background:var(--bg-secondary);color:var(--text-primary)><option value=15m>15 minutes</option><option value=1h>1 hour</option><option value=6h>6 hours</option><option value=24h>24 hours'),j_=T('<div class="card p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading events...'),U_=T('<div class="card p-8 text-center"><p style=color:var(--text-muted)>No events found'),zl=T("<div class=space-y-4>"),V_=T('<div class="card p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading grouped events...'),W_=T('<div class="card p-8 text-center"><p style=color:var(--text-muted)>No grouped events found'),q_=T("<div class=space-y-6>"),K_=T('<div class="card p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading log errors...'),Y_=T('<div class="card p-8 text-center"><p style=color:var(--text-muted)>No log errors found'),G_=T('<div class="space-y-6 p-6"style=minHeight:100vh;background:var(--bg-primary)><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-3xl font-bold"style=color:var(--text-primary)>Event Monitor</h1><p style=color:var(--text-secondary)>Production environment events and alerts</p></div><div class="flex items-center gap-2 flex-wrap"><div class="relative namespace-dropdown-container"><button type=button class="px-4 py-2 rounded-lg border text-sm font-medium flex items-center gap-2"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path></svg><span></span><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 9l-7 7-7-7"></path></svg></button></div><button class="px-4 py-2 rounded-lg text-sm font-medium transition-colors"style=background:var(--accent-primary);color:white>Refresh</button><label class="flex items-center gap-2 px-4 py-2 rounded-lg text-sm cursor-pointer"style=background:var(--bg-secondary)><input type=checkbox class="w-4 h-4"><span style=color:var(--text-secondary)>Auto-refresh</span></label></div></div><div class="flex items-center justify-between flex-wrap gap-4"><div class="flex items-center gap-2"><button>Timeline</button><button>Grouped</button><button>Log Errors</button></div><div class="flex items-center gap-2"><select class="px-3 py-2 rounded-lg text-sm border"style=background:var(--bg-secondary);color:var(--text-primary)><option value=all>All Severities</option><option value=critical>Critical</option><option value=high>High</option><option value=medium>Medium</option><option value=low>Low</option><option value=info>Info</option></select><select class="px-3 py-2 rounded-lg text-sm border"style=background:var(--bg-secondary);color:var(--text-primary)><option value=all>All Types</option><option value=infrastructure>Infrastructure</option><option value=application>Application</option><option value=security>Security'),J_=T('<label class="flex items-center gap-2 p-2 hover:bg-opacity-50 cursor-pointer"><input type=checkbox class="w-4 h-4 rounded"style=accentColor:var(--accent-color)><span class=text-sm style=color:var(--text-primary)>'),X_=T('<span class="px-2 py-1 rounded text-xs font-medium flex items-center gap-1"style=background:var(--accent-color);color:var(--text-primary);opacity:0.8><button class=hover:opacity-70 style=color:var(--text-primary)><svg class="w-3 h-3"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12">'),Z_=T('<div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div class="card p-4"><div class=text-sm style=color:var(--text-secondary)>Total Events</div><div class="text-2xl font-bold"style=color:var(--text-primary)></div></div><div class="card p-4"><div class=text-sm style=color:var(--text-secondary)>Critical</div><div class="text-2xl font-bold"style=color:#ef4444></div></div><div class="card p-4"><div class=text-sm style=color:var(--text-secondary)>High</div><div class="text-2xl font-bold"style=color:#f59e0b></div></div><div class="card p-4"><div class=text-sm style=color:var(--text-secondary)>Log Errors</div><div class="text-2xl font-bold"style=color:var(--text-primary)>'),Q_=T('<div class="card p-4 border-l-4"><div class="flex items-start justify-between gap-4"><div class=flex-1><div class="flex items-center gap-2 mb-2"><span class="text-sm font-medium"style=color:var(--text-primary)></span></div><p class="text-sm mb-2"style=color:var(--text-secondary)></p><div class="flex items-center gap-4 text-xs"style=color:var(--text-muted)><span></span><span></span><span></span><span></span></div></div><div class=text-right><div class="text-sm font-medium"style=color:var(--text-primary)>x</div><div class=text-xs style=color:var(--text-muted)>'),e2=T('<div class="card p-4"><div class="flex items-center justify-between mb-4"><h3 class="text-lg font-semibold"style=color:var(--text-primary)></h3><span class="px-3 py-1 rounded-full text-sm"style=background:var(--bg-secondary);color:var(--text-secondary)> events</span></div><div class=space-y-2>'),t2=T('<div class="p-3 rounded border-l-4"style=background:var(--bg-secondary)><div class="flex items-center gap-2 mb-1"><span class="text-sm font-medium"style=color:var(--text-primary)></span></div><p class=text-xs style=color:var(--text-secondary)>'),r2=T('<div class="card p-4 border-l-4"><div class="flex items-start justify-between gap-4"><div class=flex-1><div class="flex items-center gap-2 mb-2"><span class="px-2 py-1 rounded text-xs font-medium">HTTP </span><span class="text-sm font-medium"style=color:var(--text-primary)> </span></div><p class="text-sm mb-2"style=color:var(--text-secondary)></p><div class="flex items-center gap-4 text-xs"style=color:var(--text-muted)><span>Pod: </span><span>Container: </span><span></span><span></span></div></div><div class=text-right><div class=text-xs style=color:var(--text-muted)>');const s2=()=>{const[e,t]=J("timeline"),[r,i]=J("all"),[h,_]=J("all"),[f,s]=J("1h"),[l,u]=J([]),[g,p]=J([]),[b,m]=J(null),[C,y]=J(!0),[n,d]=J([]),[a,c]=J(!1),[v,x]=J(""),[S]=qe(async()=>{try{return await De.getNamespaces()}catch(V){return console.error("[MonitoredEvents] Failed to fetch namespaces:",V),[]}}),E=Ne(()=>{const V=S()||[],de=v().toLowerCase();return de?V.filter(M=>M.toLowerCase().includes(de)):V}),$=V=>{const de=n();de.includes(V)?d(de.filter(M=>M!==V)):d([...de,V])},k=()=>{const V=S()||[];d([...V])},O=()=>{d([])},[B,{refetch:D}]=qe(()=>({namespaces:n(),severity:r(),type:h(),context:St(),refresh:Yt()}),async({namespaces:V,severity:de,type:M})=>{try{const j={limit:500};V.length===1&&(j.namespace=V[0]),de!=="all"&&(j.severity=de),M!=="all"&&(j.type=M);let Z=(await De.getMonitoredEvents(j))?.events||[];return V.length>1?Z=Z.filter(se=>V.includes(se.namespace||"")):V.length,Z}catch(j){return console.error("[MonitoredEvents] Failed to fetch events:",j),[]}}),[I,{refetch:A}]=qe(()=>({namespaces:n(),context:St(),refresh:Yt()}),async({namespaces:V})=>{try{const de={limit:200};V.length===1&&(de.namespace=V[0]);let j=(await De.getLogErrors(de))?.errors||[];return V.length>1&&(j=j.filter(K=>V.includes(K.namespace||""))),j}catch(de){return console.error("[MonitoredEvents] Failed to fetch log errors:",de),[]}}),[P,{refetch:R}]=qe(async()=>{try{return await De.getEventStats()}catch(V){return console.error("[MonitoredEvents] Failed to fetch stats:",V),null}}),[N,{refetch:w}]=qe(()=>f(),async V=>{try{return(await De.getGroupedEvents(V))?.groups||[]}catch(de){return console.error("[MonitoredEvents] Failed to fetch grouped events:",de),[]}});Ne(()=>{const V=B();V&&Array.isArray(V)?u(V):!B.loading&&!B.error&&u([])}),Ne(()=>{const V=I();V&&Array.isArray(V)?p(V):!I.loading&&!I.error&&p([])}),Ne(()=>{const V=P();V&&m(V)});let H=null;Qt(()=>{C()&&(H=window.setInterval(()=>{D(),A(),R(),e()==="grouped"&&w()},3e4))}),nr(()=>{H&&clearInterval(H)}),Qt(()=>{const V=ls.subscribe(M=>{if(M.type==="monitored_event"&&C()){const j=M.data,K=n();(K.length===0||K.includes(j.namespace||""))&&(u(Z=>{const se=Array.isArray(Z)?Z:[];return[j,...se].slice(0,500)}),R())}}),de=M=>{M.target.closest(".namespace-dropdown-container")||c(!1)};return document.addEventListener("click",de),()=>{V(),document.removeEventListener("click",de)}});const z=V=>{switch(V){case"critical":return"#ef4444";case"high":return"#f59e0b";case"medium":return"#3b82f6";case"low":return"#6b7280";case"info":return"#10b981";default:return"#6b7280"}},U=V=>{const de=z(V);return(()=>{var M=B_();return ce(M,"background",`${de}20`),ce(M,"color",de),ce(M,"border",`1px solid ${de}40`),o(M,()=>V.toUpperCase()),M})()},te=V=>{if(!V)return"Unknown";const de=new Date(V);return isNaN(de.getTime())?"Unknown":de.toLocaleString()},F=V=>{if(!V)return"Unknown";const de=new Date(V);if(isNaN(de.getTime()))return"Unknown";const j=new Date().getTime()-de.getTime();return j<6e4?"Just now":j<36e5?`${Math.floor(j/6e4)}m ago`:j<864e5?`${Math.floor(j/36e5)}h ago`:`${Math.floor(j/864e5)}d ago`},W=Ne(()=>{const V=l();return Array.isArray(V)?V:[]});return(()=>{var V=G_(),de=V.firstChild,M=de.firstChild,j=M.firstChild;j.nextSibling;var K=M.nextSibling,Z=K.firstChild,se=Z.firstChild,ee=se.firstChild,ae=ee.nextSibling,X=Z.nextSibling,q=X.nextSibling,ne=q.firstChild;ne.nextSibling;var Y=de.nextSibling,re=Y.firstChild,Q=re.firstChild,ve=Q.nextSibling,Ae=ve.nextSibling,Ce=re.nextSibling,we=Ce.firstChild,_e=we.nextSibling;return se.$$click=ge=>{ge.stopPropagation(),c(!a())},o(ae,(()=>{var ge=Re(()=>n().length===0);return()=>ge()?"All Namespaces":Re(()=>n().length===1)()?n()[0]:`${n().length} namespaces`})()),o(Z,L(G,{get when(){return a()},get children(){var ge=H_(),le=ge.firstChild,ue=le.firstChild,Se=le.nextSibling,be=Se.firstChild,oe=be.nextSibling,ye=Se.nextSibling;return ge.$$click=pe=>pe.stopPropagation(),ue.$$input=pe=>x(pe.currentTarget.value),be.$$click=k,oe.$$click=O,o(ye,L(G,{get when(){return E().length===0},get children(){return O_()}}),null),o(ye,L(He,{get each(){return E()},children:pe=>(()=>{var he=J_(),me=he.firstChild,fe=me.nextSibling;return me.addEventListener("change",()=>$(pe)),o(fe,pe),ie(xe=>{var $e=n().includes(pe)?"var(--accent-color)":"transparent",ke=n().includes(pe)?"0.1":"0";return $e!==xe.e&&ce(he,"background",xe.e=$e),ke!==xe.t&&ce(he,"--tw-bg-opacity",xe.t=ke),xe},{e:void 0,t:void 0}),ie(()=>me.checked=n().includes(pe)),he})()}),null),o(ge,L(G,{get when(){return n().length>0},get children(){var pe=N_(),he=pe.firstChild;return o(pe,()=>n().length,he),pe}}),null),ie(()=>ue.value=v()),ge}}),null),X.$$click=()=>{D(),A(),R(),e()==="grouped"&&w()},ne.addEventListener("change",ge=>y(ge.currentTarget.checked)),o(V,L(G,{get when(){return n().length>0},get children(){var ge=z_(),le=ge.firstChild,ue=le.nextSibling;return o(ge,L(He,{get each(){return n()},children:Se=>(()=>{var be=X_(),oe=be.firstChild;return o(be,Se,oe),oe.$$click=()=>$(Se),be})()}),ue),ue.$$click=O,ge}}),Y),o(V,L(G,{get when(){return b()},children:ge=>(()=>{var le=Z_(),ue=le.firstChild,Se=ue.firstChild,be=Se.nextSibling,oe=ue.nextSibling,ye=oe.firstChild,pe=ye.nextSibling,he=oe.nextSibling,me=he.firstChild,fe=me.nextSibling,xe=he.nextSibling,$e=xe.firstChild,ke=$e.nextSibling;return o(be,()=>ge().total_events||0),o(pe,()=>ge().by_severity?.critical||0),o(fe,()=>ge().by_severity?.high||0),o(ke,()=>ge().total_errors||0),le})()}),Y),Q.$$click=()=>t("timeline"),ve.$$click=()=>t("grouped"),Ae.$$click=()=>t("errors"),we.addEventListener("change",ge=>i(ge.currentTarget.value)),_e.addEventListener("change",ge=>_(ge.currentTarget.value)),o(Ce,L(G,{get when(){return e()==="grouped"},get children(){var ge=F_();return ge.addEventListener("change",le=>s(le.currentTarget.value)),ie(()=>ge.value=f()),ge}}),null),o(V,L(G,{get when(){return e()==="timeline"},get children(){return[L(G,{get when(){return B.loading},get children(){var ge=j_(),le=ge.firstChild;return le.nextSibling,ge}}),L(G,{get when(){return!B.loading},get children(){var ge=zl();return o(ge,L(He,{get each(){return W()},children:le=>(()=>{var ue=Q_(),Se=ue.firstChild,be=Se.firstChild,oe=be.firstChild,ye=oe.firstChild,pe=oe.nextSibling,he=pe.nextSibling,me=he.firstChild,fe=me.nextSibling,xe=fe.nextSibling,$e=xe.nextSibling,ke=be.nextSibling,Be=ke.firstChild,Pe=Be.firstChild,Le=Be.nextSibling;return o(oe,()=>U(le.severity),ye),o(ye,()=>le.title),o(pe,()=>le.description),o(me,()=>le.resource),o(fe,()=>le.namespace||"cluster-wide"),o(xe,()=>F(le.timestamp)),o($e,()=>le.source),o(Be,()=>le.count,Pe),o(Le,()=>te(le.timestamp)),ie(Oe=>ce(ue,"border-left-color",z(le.severity))),ue})()}),null),o(ge,L(G,{get when(){return W().length===0},get children(){var le=U_();return le.firstChild,le}}),null),ge}})]}}),null),o(V,L(G,{get when(){return e()==="grouped"},get children(){return[L(G,{get when(){return N.loading},get children(){var ge=V_(),le=ge.firstChild;return le.nextSibling,ge}}),L(G,{get when(){return!N.loading},get children(){var ge=q_();return o(ge,L(He,{get each(){return N()||[]},children:le=>(()=>{var ue=e2(),Se=ue.firstChild,be=Se.firstChild,oe=be.nextSibling,ye=oe.firstChild,pe=Se.nextSibling;return o(be,()=>new Date(le.time).toLocaleString()),o(oe,()=>le.count,ye),o(pe,L(He,{get each(){return le.events},children:he=>(()=>{var me=t2(),fe=me.firstChild,xe=fe.firstChild,$e=fe.nextSibling;return o(fe,()=>U(he.severity),xe),o(xe,()=>he.title),o($e,()=>he.resource),ie(ke=>ce(me,"border-left-color",z(he.severity))),me})()})),ue})()}),null),o(ge,L(G,{get when(){return!N()||N()?.length===0},get children(){var le=W_();return le.firstChild,le}}),null),ge}})]}}),null),o(V,L(G,{get when(){return e()==="errors"},get children(){return[L(G,{get when(){return I.loading},get children(){var ge=K_(),le=ge.firstChild;return le.nextSibling,ge}}),L(G,{get when(){return!I.loading},get children(){var ge=zl();return o(ge,L(He,{get each(){return(g()||[]).filter(le=>le.status_code>0)},children:le=>(()=>{var ue=r2(),Se=ue.firstChild,be=Se.firstChild,oe=be.firstChild,ye=oe.firstChild;ye.firstChild;var pe=ye.nextSibling,he=pe.firstChild,me=oe.nextSibling,fe=me.nextSibling,xe=fe.firstChild;xe.firstChild;var $e=xe.nextSibling;$e.firstChild;var ke=$e.nextSibling,Be=ke.nextSibling,Pe=be.nextSibling,Le=Pe.firstChild;return o(ye,()=>le.status_code,null),o(pe,()=>le.method,he),o(pe,()=>le.path,null),o(me,()=>le.message),o(xe,()=>le.pod,null),o($e,()=>le.container,null),o(ke,()=>le.namespace),o(Be,()=>F(le.timestamp)),o(Le,()=>te(le.timestamp)),ie(Oe=>{var Fe=le.status_code>=500?"#ef4444":"#f59e0b",je=le.status_code>=500?"#ef444420":"#f59e0b20",Ke=le.status_code>=500?"#ef4444":"#f59e0b";return Fe!==Oe.e&&ce(ue,"border-left-color",Oe.e=Fe),je!==Oe.t&&ce(ye,"background",Oe.t=je),Ke!==Oe.a&&ce(ye,"color",Oe.a=Ke),Oe},{e:void 0,t:void 0,a:void 0}),ue})()}),null),o(ge,L(G,{get when(){return!g()||g().length===0},get children(){var le=Y_();return le.firstChild,le}}),null),ge}})]}}),null),ie(ge=>{var le=`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${e()==="timeline"?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"}`,ue=`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${e()==="grouped"?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"}`,Se=`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${e()==="errors"?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"}`;return le!==ge.e&&ze(Q,ge.e=le),ue!==ge.t&&ze(ve,ge.t=ue),Se!==ge.a&&ze(Ae,ge.a=Se),ge},{e:void 0,t:void 0,a:void 0}),ie(()=>ne.checked=C()),ie(()=>we.value=r()),ie(()=>_e.value=h()),V})()};et(["click","input"]);var i2=T('<div><h2 class="text-xl font-semibold mb-4"style=color:var(--text-primary)>Configured Connectors</h2><div class=space-y-4>'),n2=T('<div class="space-y-6 p-6"style=minHeight:100vh;background:var(--bg-primary)><div class="flex items-center justify-between"><div><h1 class="text-3xl font-bold"style=color:var(--text-primary)>Connectors</h1><p style=color:var(--text-secondary)>Connect KubeGraf to external services for notifications and integrations</p></div></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">'),l2=T('<div class="card p-4 cursor-pointer hover:scale-105 transition-transform"><div class="flex items-center gap-3 mb-2"><div class="w-10 h-10 rounded-lg flex items-center justify-center"><svg class="w-6 h-6"fill=currentColor viewBox="0 0 24 24"><path></path></svg></div><div class=flex-1><h3 class=font-semibold style=color:var(--text-primary)></h3><p class=text-sm style=color:var(--text-muted)>'),o2=T('<div class="card p-4"><div class="flex items-center justify-between"><div class="flex items-center gap-4 flex-1"><div class="w-12 h-12 rounded-lg flex items-center justify-center"><svg class="w-6 h-6"fill=currentColor viewBox="0 0 24 24"><path></path></svg></div><div class=flex-1><div class="flex items-center gap-2 mb-1"><h3 class=font-semibold style=color:var(--text-primary)></h3><span class="px-2 py-1 rounded text-xs font-medium"></span><span class="px-2 py-1 rounded text-xs font-medium"></span></div><p class=text-sm style=color:var(--text-muted)>Type: <!> | Created: </p></div></div><div class="flex items-center gap-2"><button class="px-3 py-2 rounded text-sm font-medium"style=background:var(--bg-secondary);color:var(--text-primary)></button><button class="px-3 py-2 rounded text-sm font-medium"></button><button class="px-3 py-2 rounded text-sm font-medium"style=background:var(--bg-secondary);color:var(--text-primary)>Edit</button><button class="px-3 py-2 rounded text-sm font-medium"style=background:#ef444420;color:#ef4444>Delete'),a2=T('<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50"><div class="card p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto"><div class="flex items-center justify-between mb-4"><h2 class="text-2xl font-bold"style=color:var(--text-primary)> <!> Connector</h2><button class=text-2xl style=color:var(--text-muted)>Ã</button></div><div class=space-y-4><div><label class="block text-sm font-medium mb-1"style=color:var(--text-secondary)>Connector Name</label><input type=text class="w-full px-3 py-2 rounded border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)></div><div class="flex justify-end gap-2 mt-6"><button class="px-4 py-2 rounded text-sm font-medium"style=background:var(--bg-secondary);color:var(--text-primary)>Cancel</button><button class="px-4 py-2 rounded text-sm font-medium text-white"style=background:var(--accent-primary)> Connector'),c2=T('<div><label class="block text-sm font-medium mb-1"style=color:var(--text-secondary)> '),d2=T("<span style=color:#ef4444>*"),h2=T('<select class="w-full px-3 py-2 rounded border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)><option value>Select...'),u2=T("<option>"),f2=T('<input class="w-full px-3 py-2 rounded border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)>');const vs=[{id:"github",name:"GitHub",description:"Connect to GitHub repositories for issue tracking and webhooks",icon:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z",color:"#24292e",fields:[{key:"token",label:"Personal Access Token",type:"password",required:!0,placeholder:"ghp_..."},{key:"repository",label:"Repository (owner/repo)",type:"text",required:!0,placeholder:"owner/repo"},{key:"webhook_url",label:"Webhook URL (optional)",type:"url",required:!1,placeholder:"https://..."}]},{id:"slack",name:"Slack",description:"Send alerts and notifications to Slack channels",icon:"M5.042 15.165a2.528 2.528 0 01-2.52 2.523A2.528 2.528 0 010 15.165a2.527 2.527 0 012.522-2.52 2.527 2.527 0 012.52 2.52zM9.075 15.165a2.527 2.527 0 01-2.521-2.52 2.527 2.527 0 012.521-2.521 2.528 2.528 0 012.523 2.521 2.528 2.528 0 01-2.523 2.52zM5.042 11.143a2.528 2.528 0 01-2.52-2.523A2.528 2.528 0 015.042 6.098a2.527 2.527 0 012.52 2.522 2.527 2.527 0 01-2.52 2.523z",color:"#4A154B",fields:[{key:"webhook_url",label:"Webhook URL",type:"url",required:!0,placeholder:"https://hooks.slack.com/services/..."},{key:"channel",label:"Channel (optional)",type:"text",required:!1,placeholder:"#alerts"},{key:"username",label:"Bot Username (optional)",type:"text",required:!1,placeholder:"KubeGraf"}]},{id:"pagerduty",name:"PagerDuty",description:"Create incidents and alerts in PagerDuty",icon:"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm0 22c-5.514 0-10-4.486-10-10S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10z",color:"#06AC38",fields:[{key:"integration_key",label:"Integration Key",type:"text",required:!0,placeholder:"Your PagerDuty integration key"},{key:"service_id",label:"Service ID (optional)",type:"text",required:!1,placeholder:"Service ID"}]},{id:"webhook",name:"Generic Webhook",description:"Send events to any webhook endpoint",icon:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1",color:"#6366f1",fields:[{key:"url",label:"Webhook URL",type:"url",required:!0,placeholder:"https://..."},{key:"method",label:"HTTP Method",type:"select",required:!0,options:[{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"PATCH",label:"PATCH"}]},{key:"headers",label:"Custom Headers (JSON)",type:"text",required:!1,placeholder:'{"Authorization": "Bearer token"}'}]},{id:"email",name:"Email",description:"Send email notifications via SMTP",icon:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z",color:"#3b82f6",fields:[{key:"smtp_host",label:"SMTP Host",type:"text",required:!0,placeholder:"smtp.gmail.com"},{key:"smtp_port",label:"SMTP Port",type:"text",required:!0,placeholder:"587"},{key:"username",label:"Username",type:"text",required:!0,placeholder:"your-email@example.com"},{key:"password",label:"Password",type:"password",required:!0},{key:"from_email",label:"From Email",type:"text",required:!0,placeholder:"alerts@example.com"},{key:"to_emails",label:"To Emails (comma-separated)",type:"text",required:!0,placeholder:"admin@example.com,team@example.com"}]},{id:"teams",name:"Microsoft Teams",description:"Send notifications to Microsoft Teams channels",icon:"M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-2 14H6v-4h12v4zm0-6H6v-4h12v4zm0-6H6V6h12v4z",color:"#6264A7",fields:[{key:"webhook_url",label:"Webhook URL",type:"url",required:!0,placeholder:"https://outlook.office.com/webhook/..."},{key:"channel",label:"Channel Name (optional)",type:"text",required:!1,placeholder:"Alerts"}]},{id:"discord",name:"Discord",description:"Send alerts to Discord channels via webhook",icon:"M20.317 4.37a19.791 19.791 0 00-4.885-1.515.074.074 0 00-.079.037c-.21.24-.444.464-.68.7a18.27 18.27 0 00-5.487 0 12.64 12.64 0 00-.68-.7.077.077 0 00-.079-.037A19.736 19.736 0 003.677 4.37a.07.07 0 00-.032.027C2.67 6.018 2.32 7.724 2.11 9.424a.082.082 0 00.031.084 19.9 19.9 0 005.993 3.03.078.078 0 00.084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 00-.041-.106 13.107 13.107 0 01-1.872-.892.077.077 0 01-.007-.128 10.2 10.2 0 00.372-.292.074.074 0 01.077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 01.078.01c.12.098.246.198.373.292a.077.077 0 01-.006.128 12.299 12.299 0 01-1.873.892.077.077 0 00-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 00.084.028 19.839 19.839 0 006.002-3.03.077.077 0 00.032-.083c-.216-1.7-.571-3.406-1.535-5.026a.061.061 0 00-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z",color:"#5865F2",fields:[{key:"webhook_url",label:"Webhook URL",type:"url",required:!0,placeholder:"https://discord.com/api/webhooks/..."},{key:"username",label:"Bot Username (optional)",type:"text",required:!1,placeholder:"KubeGraf Bot"}]}],g2=()=>{const[e,t]=J(null),[r,i]=J(!1),[h,_]=J(null),[f,s]=J({}),[l,u]=J(null),[g,{refetch:p}]=qe(async()=>{try{return await De.getConnectors()}catch(v){return console.error("[Connectors] Failed to fetch connectors:",v),[]}}),b=v=>{t(v),s({}),_(null),i(!0)},m=v=>{t(v.type),s(v.config||{}),_(v),i(!0)},C=async()=>{const v=e();if(v)try{h()?await De.updateConnector(h().id,{name:f().name||vs.find(x=>x.id===v)?.name||"",config:f()}):await De.createConnector({type:v,name:f().name||vs.find(x=>x.id===v)?.name||"",config:f()}),i(!1),p()}catch(x){alert(`Failed to save connector: ${x.message}`)}},y=async v=>{u(v.id);try{const x=await De.testConnector(v.id);x.success?alert("Connector test successful!"):alert(`Connector test failed: ${x.error||"Unknown error"}`),p()}catch(x){alert(`Failed to test connector: ${x.message}`)}finally{u(null)}},n=async v=>{try{await De.updateConnector(v.id,{enabled:!v.enabled}),p()}catch(x){alert(`Failed to toggle connector: ${x.message}`)}},d=async v=>{if(confirm(`Are you sure you want to delete connector "${v.name}"?`))try{await De.deleteConnector(v.id),p()}catch(x){alert(`Failed to delete connector: ${x.message}`)}},a=v=>vs.find(x=>x.id===v),c=v=>{switch(v){case"connected":return"#22c55e";case"error":return"#ef4444";default:return"#6b7280"}};return(()=>{var v=n2(),x=v.firstChild,S=x.firstChild,E=S.firstChild;E.nextSibling;var $=x.nextSibling;return o($,L(He,{each:vs,children:k=>(()=>{var O=l2(),B=O.firstChild,D=B.firstChild,I=D.firstChild,A=I.firstChild,P=D.nextSibling,R=P.firstChild,N=R.nextSibling;return O.$$click=()=>b(k.id),o(R,()=>k.name),o(N,()=>k.description),ie(w=>{var H=`${k.color}20`,z=k.color,U=k.icon;return H!==w.e&&ce(D,"background",w.e=H),z!==w.t&&ce(I,"color",w.t=z),U!==w.a&&Xe(A,"d",w.a=U),w},{e:void 0,t:void 0,a:void 0}),O})()})),o(v,L(G,{get when(){return Re(()=>!!g())()&&g().length>0},get children(){var k=i2(),O=k.firstChild,B=O.nextSibling;return o(B,L(He,{get each(){return g()},children:D=>{const I=a(D.type);return(()=>{var A=o2(),P=A.firstChild,R=P.firstChild,N=R.firstChild,w=N.firstChild,H=w.firstChild,z=N.nextSibling,U=z.firstChild,te=U.firstChild,F=te.nextSibling,W=F.nextSibling,V=U.nextSibling,de=V.firstChild,M=de.nextSibling;M.nextSibling;var j=R.nextSibling,K=j.firstChild,Z=K.nextSibling,se=Z.nextSibling,ee=se.nextSibling;return o(te,()=>D.name),o(F,()=>D.enabled?"Enabled":"Disabled"),o(W,()=>D.status),o(V,()=>I?.name||D.type,M),o(V,()=>new Date(D.createdAt).toLocaleDateString(),null),K.$$click=()=>y(D),o(K,()=>l()===D.id?"Testing...":"Test"),Z.$$click=()=>n(D),o(Z,()=>D.enabled?"Disable":"Enable"),se.$$click=()=>m(D),ee.$$click=()=>d(D),ie(ae=>{var X=`${I?.color||"#6366f1"}20`,q=I?.color||"#6366f1",ne=I?.icon||"",Y=D.enabled?"#22c55e20":"#6b728020",re=D.enabled?"#22c55e":"#6b7280",Q=`${c(D.status)}20`,ve=c(D.status),Ae=l()===D.id,Ce=D.enabled?"#ef444420":"#22c55e20",we=D.enabled?"#ef4444":"#22c55e";return X!==ae.e&&ce(N,"background",ae.e=X),q!==ae.t&&ce(w,"color",ae.t=q),ne!==ae.a&&Xe(H,"d",ae.a=ne),Y!==ae.o&&ce(F,"background",ae.o=Y),re!==ae.i&&ce(F,"color",ae.i=re),Q!==ae.n&&ce(W,"background",ae.n=Q),ve!==ae.s&&ce(W,"color",ae.s=ve),Ae!==ae.h&&(K.disabled=ae.h=Ae),Ce!==ae.r&&ce(Z,"background",ae.r=Ce),we!==ae.d&&ce(Z,"color",ae.d=we),ae},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0}),A})()}})),k}}),null),o(v,L(G,{get when(){return Re(()=>!!r())()&&e()},children:()=>{const k=vs.find(O=>O.id===e());return k?(()=>{var O=a2(),B=O.firstChild,D=B.firstChild,I=D.firstChild,A=I.firstChild,P=A.nextSibling;P.nextSibling;var R=I.nextSibling,N=D.nextSibling,w=N.firstChild,H=w.firstChild,z=H.nextSibling,U=w.nextSibling,te=U.firstChild,F=te.nextSibling,W=F.firstChild;return O.$$click=()=>i(!1),B.$$click=V=>V.stopPropagation(),o(I,()=>h()?"Edit":"Add",A),o(I,()=>k.name,P),R.$$click=()=>i(!1),z.$$input=V=>s({...f(),name:V.currentTarget.value}),o(N,L(He,{get each(){return k.fields},children:V=>(()=>{var de=c2(),M=de.firstChild,j=M.firstChild;return o(M,()=>V.label,j),o(M,(()=>{var K=Re(()=>!!V.required);return()=>K()&&d2()})(),null),o(de,(()=>{var K=Re(()=>V.type==="select");return()=>K()?(()=>{var Z=h2();return Z.firstChild,Z.addEventListener("change",se=>s({...f(),[V.key]:se.currentTarget.value})),o(Z,L(He,{get each(){return V.options},children:se=>(()=>{var ee=u2();return o(ee,()=>se.label),ie(()=>ee.value=se.value),ee})()}),null),ie(()=>Z.value=f()[V.key]||""),Z})():(()=>{var Z=f2();return Z.$$input=se=>s({...f(),[V.key]:se.currentTarget.value}),ie(se=>{var ee=V.type,ae=V.placeholder,X=V.required;return ee!==se.e&&Xe(Z,"type",se.e=ee),ae!==se.t&&Xe(Z,"placeholder",se.t=ae),X!==se.a&&(Z.required=se.a=X),se},{e:void 0,t:void 0,a:void 0}),ie(()=>Z.value=f()[V.key]||""),Z})()})(),null),de})()}),U),te.$$click=()=>i(!1),F.$$click=C,o(F,()=>h()?"Update":"Create",W),ie(()=>Xe(z,"placeholder",k.name)),ie(()=>z.value=f().name||""),O})():null}}),null),v})()};et(["click","input"]);var p2=T('<div class="card p-8 text-center"><div class=text-lg style=color:var(--text-muted)>Loading MCP server status...'),v2=T('<div class="card p-8 text-center"><div class="text-lg font-medium mb-2"style=color:var(--text-primary)>MCP Server Not Available</div><p class=text-sm style=color:var(--text-muted)>The MCP server is not running or not accessible. Make sure KubeGraf is running and the MCP endpoint is enabled.'),m2=T("<div class=text-sm style=color:var(--text-secondary)> v"),_2=T('<div class="card p-6"><div class="flex items-center gap-3 mb-4"><div class="w-3 h-3 rounded-full bg-green-500"></div><div><div class=font-semibold style=color:var(--text-primary)>MCP Server Connected</div></div></div><div class=mb-4><h3 class="text-lg font-semibold mb-2"style=color:var(--text-primary)>Available Tools (<!>)</h3><p class=text-sm style=color:var(--text-secondary)>These tools are available for AI agents to interact with your Kubernetes cluster.</p></div><div class="grid grid-cols-1 md:grid-cols-2 gap-4">'),b2=T('<div class="space-y-3 mb-4"><div class="text-sm font-medium"style=color:var(--text-primary)>Parameters:'),y2=T('<div class="mt-4 p-4 rounded border"style=background:var(--bg-secondary);borderColor:var(--border-color)><div class="text-sm font-medium mb-2"style=color:var(--text-primary)>Result:</div><pre class="text-xs whitespace-pre-wrap"style=color:var(--text-secondary)>'),x2=T('<div class="card p-6"><div class="flex items-center justify-between mb-4"><h3 class="text-lg font-semibold"style=color:var(--text-primary)></h3><button class="px-3 py-1 rounded text-sm"style=background:var(--bg-secondary);color:var(--text-primary)>Close</button></div><p class="text-sm mb-4"style=color:var(--text-secondary)></p><button class="px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50"style=background:var(--accent-primary);color:white>'),$2=T(`<div class="space-y-6 p-6"style=minHeight:100vh;background:var(--bg-primary)><div class="flex items-center justify-between"><div><h1 class="text-3xl font-bold"style=color:var(--text-primary)>AI Agents</h1><p class="text-sm mt-2"style=color:var(--text-secondary)>AI agents powered by Model Context Protocol (MCP) to interact with your Kubernetes cluster</p></div><button class="px-4 py-2 rounded-lg font-medium transition-colors"style=background:var(--accent-primary);color:white>Refresh</button></div><div class="card p-6"><h3 class="text-lg font-semibold mb-3"style=color:var(--text-primary)>Setup Instructions</h3><div class="space-y-3 text-sm"style=color:var(--text-secondary)><div><strong>For Claude Desktop:</strong><pre class="mt-2 p-3 rounded bg-gray-900 text-white text-xs overflow-x-auto">{
  "mcpServers": {
    "kubegraf": {
      "command": "kubegraf",
      "args": ["mcp", "serve"],
      "env": {
        "KUBECONFIG": "/path/to/kubeconfig"
      }
    }
  }
}</pre></div><div class=mt-4><strong>Endpoint:</strong> <code class="px-2 py-1 rounded bg-gray-100 dark:bg-gray-800">/api/mcp</code></div><div><strong>Protocol:</strong> MCP (Model Context Protocol) - JSON-RPC 2.0`),w2=T('<div class="p-4 rounded-lg border cursor-pointer hover:opacity-80 transition-opacity"style=borderColor:var(--border-color)><div class="font-semibold mb-1"style=color:var(--text-primary)></div><div class=text-sm style=color:var(--text-secondary)>'),S2=T('<span class="ml-2 text-xs"style=color:var(--text-muted)>- '),C2=T('<div><label class="block text-sm mb-1"style=color:var(--text-secondary)></label><input class="w-full px-3 py-2 rounded border"style=background:var(--bg-primary);borderColor:var(--border-color);color:var(--text-primary)>');const k2=()=>{const[e,{refetch:t}]=qe(async()=>{try{const b=await fetch("/api/mcp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:1,method:"initialize",params:{}})});if(!b.ok)return{available:!1,tools:[]};const m=await b.json(),C=await fetch("/api/mcp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:2,method:"tools/list",params:{}})});return C.ok?{available:!0,tools:(await C.json()).result?.tools||[],serverInfo:m.result?.serverInfo}:{available:!0,tools:[],serverInfo:m.result?.serverInfo}}catch(b){return console.error("MCP connection error:",b),{available:!1,tools:[]}}}),[r,i]=J(null),[h,_]=J(""),[f,s]=J(!1),[l,u]=J({}),g=async b=>{i(b),_(""),s(!0);try{const m=b.inputSchema?.properties||{},C={},y=l();for(const[a,c]of Object.entries(m))y[a]!==void 0&&(C[a]=y[a]);const n=await fetch("/api/mcp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:Date.now(),method:"tools/call",params:{name:b.name,arguments:C}})});if(!n.ok)throw new Error(`HTTP ${n.status}`);const d=await n.json();if(d.error)_(`Error: ${d.error.message}`);else{const c=(d.result?.content||[]).map(v=>v.text||"").join(`
`);_(c||JSON.stringify(d.result,null,2))}}catch(m){_(`Error: ${m.message}`)}finally{s(!1)}},p=(b,m)=>{u(C=>({...C,[b]:m}))};return(()=>{var b=$2(),m=b.firstChild,C=m.firstChild,y=C.firstChild;y.nextSibling;var n=C.nextSibling,d=m.nextSibling,a=d.firstChild;return a.nextSibling,n.$$click=()=>t(),o(b,L(G,{get when(){return e.loading},get children(){var c=p2();return c.firstChild,c}}),d),o(b,L(G,{get when(){return Re(()=>!e.loading)()&&!e()?.available},get children(){var c=v2(),v=c.firstChild;return v.nextSibling,c}}),d),o(b,L(G,{get when(){return Re(()=>!e.loading)()&&e()?.available},get children(){return[(()=>{var c=_2(),v=c.firstChild,x=v.firstChild,S=x.nextSibling;S.firstChild;var E=v.nextSibling,$=E.firstChild,k=$.firstChild,O=k.nextSibling;O.nextSibling,$.nextSibling;var B=E.nextSibling;return o(S,L(G,{get when(){return e()?.serverInfo},get children(){var D=m2(),I=D.firstChild;return o(D,()=>e()?.serverInfo?.name,I),o(D,()=>e()?.serverInfo?.version,null),D}}),null),o($,()=>e()?.tools.length||0,O),o(B,L(He,{get each(){return e()?.tools||[]},children:D=>(()=>{var I=w2(),A=I.firstChild,P=A.nextSibling;return I.$$click=()=>i(D),o(A,()=>D.name),o(P,()=>D.description),ie(R=>ce(I,"background",r()?.name===D.name?"var(--bg-secondary)":"var(--bg-tertiary)")),I})()})),c})(),L(G,{get when(){return r()},get children(){var c=x2(),v=c.firstChild,x=v.firstChild,S=x.nextSibling,E=v.nextSibling,$=E.nextSibling;return o(x,()=>r()?.name),S.$$click=()=>i(null),o(E,()=>r()?.description),o(c,L(G,{get when(){return r()?.inputSchema?.properties},get children(){var k=b2();return k.firstChild,o(k,L(He,{get each(){return Object.entries(r()?.inputSchema?.properties||{})},children:([O,B])=>(()=>{var D=C2(),I=D.firstChild,A=I.nextSibling;return o(I,O,null),o(I,L(G,{get when(){return B.description},get children(){var P=S2();return P.firstChild,o(P,()=>B.description,null),P}}),null),A.$$input=P=>{const R=B.type==="integer"?parseInt(P.currentTarget.value)||0:P.currentTarget.value;p(O,R)},ie(P=>{var R=B.type==="integer"?"number":"text",N=B.type==="integer"?"0":"Enter value...";return R!==P.e&&Xe(A,"type",P.e=R),N!==P.t&&Xe(A,"placeholder",P.t=N),P},{e:void 0,t:void 0}),ie(()=>A.value=l()[O]||""),D})()}),null),k}}),$),$.$$click=()=>g(r()),o($,()=>f()?"Executing...":"Execute Tool"),o(c,L(G,{get when(){return h()},get children(){var k=y2(),O=k.firstChild,B=O.nextSibling;return o(B,h),k}}),null),ie(()=>$.disabled=f()),c}})]}}),d),b})()};et(["click","input"]);var A2=T("<option disabled>Loading pods..."),M2=T("<option disabled>Loading containers..."),E2=T("<option disabled>No containers found"),L2=T('<div class="p-4 bg-red-500/10 border-l-4 border-red-500"><p style=color:var(--error-color)>'),R2=T('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading logs...'),D2=T('<div class="p-8 text-center"style=color:var(--text-muted)><svg class="w-12 h-12 mx-auto mb-4 opacity-50"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg><p>Select a pod and container, then click "Fetch Logs"'),T2=T('<div id=logs-container class="p-4 font-mono text-sm overflow-auto"style="background:#0d1117;color:#c9d1d9;max-height:calc(100vh - 400px);white-space:pre-wrap;word-break:break-word">'),P2=T('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Logs</h1><p style=color:var(--text-secondary)>View and stream pod container logs</p></div><div class="flex items-center gap-2"><button class="px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"style=background:var(--accent-primary);color:white></button><button class="px-4 py-2 rounded-lg text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed"style=background:var(--bg-tertiary);color:var(--text-primary)>Download</button></div></div><div class="card p-4"><div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Namespace</label><select class="w-full px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option></option></select></div><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Pod</label><select class="w-full px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value>Select a pod</option></select></div><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Container</label><select class="w-full px-3 py-2 rounded-lg text-sm disabled:opacity-50"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value>Select a container</option></select></div><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Tail Lines</label><input type=number min=10 max=10000 class="w-full px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div></div><div class="flex items-center gap-4 mt-4"><label class="flex items-center gap-2 cursor-pointer"><input type=checkbox class="w-4 h-4 rounded"><span class=text-sm style=color:var(--text-secondary)>Follow logs (stream)</span></label></div></div><div class="card p-4"><input type=text placeholder="Search logs..."class="w-full px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div class="card overflow-hidden">'),I2=T("<option> (<!>)"),B2=T("<option>");const O2=()=>{console.log("[Logs] Component rendering");const[e,t]=J(""),[r,i]=J(""),[h,_]=J(""),[f,s]=J(100),[l,u]=J(!1),[g,p]=J(""),[b,m]=J(""),[C,y]=J(!1),[n,d]=J(null);let a=null;const[c]=qe(()=>tt(),async B=>{try{console.log("[Logs] Fetching pods for namespace:",B);const D=B==="_all"?void 0:B,I=await De.getPods(D);return console.log("[Logs] Fetched pods:",I?.length||0),Array.isArray(I)?I:[]}catch(D){return console.error("[Logs] Failed to fetch pods:",D),[]}}),[v]=qe(()=>{const B=e(),D=h()||tt();return B?{pod:B,namespace:(D==="_all"?void 0:D)||"default"}:null},async B=>{if(!B)return null;try{console.log("[Logs] Fetching pod details:",B);const D=await De.getPodDetails(B.pod,B.namespace);return console.log("[Logs] Pod details:",D),D}catch(D){return console.error("[Logs] Failed to fetch pod details:",D),null}}),x=Ne(()=>{try{const B=v();if(!B||!B.containers)return[];if(!Array.isArray(B.containers))return console.warn("[Logs] podDetails.containers is not an array:",typeof B.containers,B.containers),[];const D=B.containers.map(I=>I.name||I).filter(Boolean);return console.log("[Logs] Containers:",D),D}catch(B){return console.error("[Logs] Error in containers memo:",B),[]}}),S=()=>{a&&(a.close(),a=null)},E=async()=>{const B=e(),D=r(),I=h()||tt();if(!B||!D){d("Please select a pod and container");return}S(),y(!0),d(null);const R=`/api/pod/logs?name=${B}&namespace=${(I==="_all"?void 0:I)||"default"}&container=${D}&tail=${f()}${l()?"&follow=true":""}`;if(l())m(""),a=new EventSource(R),a.onmessage=N=>{m(w=>w+N.data+`
`),y(!1),setTimeout(()=>{const w=document.getElementById("logs-container");w&&(w.scrollTop=w.scrollHeight)},50)},a.onerror=()=>{d("Stream connection lost"),y(!1),S()},a.onopen=()=>{y(!1)};else try{const N=await fetch(R);if(!N.ok){const H=await N.text();throw new Error(H||`HTTP ${N.status}`)}const w=await N.json();m(w.logs||"No logs available")}catch(N){d(N.message||"Failed to fetch logs"),m("")}finally{y(!1)}},$=Ne(()=>{const B=b(),D=g().toLowerCase();return D?B.split(`
`).filter(I=>I.toLowerCase().includes(D)).join(`
`):B}),k=()=>{const B=new Blob([b()],{type:"text/plain"}),D=URL.createObjectURL(B),I=document.createElement("a");I.href=D,I.download=`${e()}-${r()||"logs"}.txt`,I.click(),URL.revokeObjectURL(D)};Ne(()=>{const B=x();B.length>0&&!r()&&i(B[0])}),Qt(()=>{console.log("[Logs] Component mounted successfully")}),nr(()=>{S()});const O=Ne(()=>{try{if(c.loading)return[];if(c.error)return console.error("[Logs] pods resource error:",c.error),[];const B=c();return B==null?[]:Array.isArray(B)?B:(console.warn("[Logs] pods() returned non-array:",typeof B,B),[])}catch(B){return console.error("[Logs] Error in podsList memo:",B),[]}});return console.log("[Logs] Component rendering - RETURNING JSX"),(()=>{var B=P2(),D=B.firstChild,I=D.firstChild,A=I.firstChild;A.nextSibling;var P=I.nextSibling,R=P.firstChild,N=R.nextSibling,w=D.nextSibling,H=w.firstChild,z=H.firstChild,U=z.firstChild,te=U.nextSibling,F=te.firstChild,W=z.nextSibling,V=W.firstChild,de=V.nextSibling;de.firstChild;var M=W.nextSibling,j=M.firstChild,K=j.nextSibling;K.firstChild;var Z=M.nextSibling,se=Z.firstChild,ee=se.nextSibling,ae=H.nextSibling,X=ae.firstChild,q=X.firstChild;q.nextSibling;var ne=w.nextSibling,Y=ne.firstChild,re=ne.nextSibling;return R.$$click=E,o(R,()=>C()?"Loading...":"Fetch Logs"),N.$$click=k,te.addEventListener("change",Q=>{_(Q.currentTarget.value),t(""),i("")}),o(F,(()=>{var Q=Re(()=>tt()==="_all");return()=>Q()?"All Namespaces":tt()})()),de.addEventListener("change",Q=>{t(Q.currentTarget.value),i("")}),o(de,L(G,{get when(){return c.loading},get children(){return A2()}}),null),o(de,L(G,{get when(){return Re(()=>!!(!c.loading&&Array.isArray(O())))()&&O().length>0},get children(){return L(He,{get each(){return O()},children:Q=>(()=>{var ve=I2(),Ae=ve.firstChild,Ce=Ae.nextSibling;return Ce.nextSibling,o(ve,()=>Q.name,Ae),o(ve,()=>Q.namespace||"default",Ce),ie(()=>ve.value=Q.name),ve})()})}}),null),K.addEventListener("change",Q=>i(Q.currentTarget.value)),o(K,L(G,{get when(){return v.loading},get children(){return M2()}}),null),o(K,L(G,{get when(){return Re(()=>!v.loading)()&&x().length>0},get children(){return L(He,{get each(){return x()},children:Q=>(()=>{var ve=B2();return ve.value=Q,o(ve,Q),ve})()})}}),null),o(K,L(G,{get when(){return Re(()=>!!(!v.loading&&e()))()&&x().length===0},get children(){return E2()}}),null),ee.addEventListener("change",Q=>s(parseInt(Q.currentTarget.value)||100)),q.addEventListener("change",Q=>{u(Q.currentTarget.checked),Q.currentTarget.checked&&e()&&r()?E():S()}),Y.$$input=Q=>p(Q.currentTarget.value),o(re,L(G,{get when(){return n()},get children(){var Q=L2(),ve=Q.firstChild;return o(ve,n),Q}}),null),o(re,L(G,{get when(){return Re(()=>!!C())()&&!b()},get children(){var Q=R2(),ve=Q.firstChild;return ve.nextSibling,Q}}),null),o(re,L(G,{get when(){return Re(()=>!b()&&!C())()&&!n()},get children(){return D2()}}),null),o(re,L(G,{get when(){return b()},get children(){var Q=T2();return o(Q,()=>$()||"No logs available"),Q}}),null),ie(Q=>{var ve=!e()||!r()||C(),Ae=!b(),Ce=!e(),we=!e()||!r();return ve!==Q.e&&(R.disabled=Q.e=ve),Ae!==Q.t&&(N.disabled=Q.t=Ae),Ce!==Q.a&&(K.disabled=Q.a=Ce),we!==Q.o&&(q.disabled=Q.o=we),Q},{e:void 0,t:void 0,a:void 0,o:void 0}),ie(()=>F.value=tt()),ie(()=>te.value=h()||tt()),ie(()=>de.value=e()),ie(()=>K.value=r()),ie(()=>ee.value=f()),ie(()=>q.checked=l()),ie(()=>Y.value=g()),B})()};et(["click","input"]);var Fl=T('<button class="px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"style=background:var(--accent-primary);color:white>'),N2=T("<span class=text-sm style=color:var(--text-muted)>Detection time: "),H2=T('<div class="card p-4"><div class="flex items-center gap-4"><label class="text-sm font-medium"style=color:var(--text-secondary)>Filter by Severity:</label><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value>All Severities</option><option value=critical>Critical</option><option value=warning>Warning</option><option value=info>Info'),z2=T('<div class="card p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Detecting anomalies...'),F2=T("<div class=space-y-4>"),j2=T('<div class="flex items-center justify-center gap-2 mt-4"><button class="px-3 py-1 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed"style=background:var(--bg-secondary);color:var(--text-primary)>Previous</button><span class=text-sm style=color:var(--text-secondary)>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed"style=background:var(--bg-secondary);color:var(--text-primary)>Next'),U2=T('<div class="card p-8 text-center"><svg class="w-16 h-16 mx-auto mb-4 opacity-50"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><p class="text-lg font-medium mb-2"style=color:var(--text-primary)>No Anomalies Detected</p><p style=color:var(--text-secondary)>Your cluster appears to be healthy!'),V2=T('<div class="card p-4 bg-red-500/10 border-l-4 border-red-500"><p style=color:var(--error-color)>Error: '),W2=T('<div class="card p-8 text-center"><div class="spinner mx-auto mb-2"></div><div class="flex flex-col items-center gap-2"><span style=color:var(--text-muted)>Loading ML recommendations...</span><p class=text-sm style=color:var(--text-muted)>This may take a few seconds'),q2=T('<div class="card p-4 bg-red-500/10 border-l-4 border-red-500"><p style=color:var(--error-color)>Error: </p><p class="text-sm mt-2"style=color:var(--text-muted)>Tip: Run anomaly detection first to collect metrics, then try again.'),K2=T('<div class="card p-8 text-center"style=color:var(--text-muted)><svg class="w-16 h-16 mx-auto mb-4 opacity-50"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg><p class="text-lg font-medium mb-2"style=color:var(--text-primary)>No ML Recommendations Yet</p><p class=text-sm>Recommendations will appear as the system learns from your cluster metrics.</p><p class="text-sm mt-2">The ML model needs historical data (at least 20-50 metric samples) to generate optimization suggestions.</p><p class="text-sm mt-1"style=color:var(--text-muted)>Metrics are collected automatically when you use the anomaly detection feature.'),Y2=T('<div class=space-y-4><div class="card p-4"><div class=text-sm style=color:var(--text-secondary)>Total Recommendations: <strong style=color:var(--text-primary)>'),G2=T('<div class="space-y-6 p-6"style=minHeight:100vh;background:var(--bg-primary)><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-3xl font-bold"style=color:var(--text-primary)>AI/ML Insights</h1><p style=color:var(--text-secondary)>Anomaly detection and ML-powered recommendations</p></div><div class="flex items-center gap-2"></div></div><div class="flex gap-2 border-b"style=border-color:var(--border-color)><button>Anomaly Detection</button><button>ML Recommendations'),J2=T('<div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div class="card p-4"><div class=text-sm style=color:var(--text-secondary)>Total Anomalies</div><div class="text-2xl font-bold"style=color:var(--text-primary)></div></div><div class="card p-4"><div class=text-sm style=color:var(--text-secondary)>Critical</div><div class="text-2xl font-bold"style=color:#ef4444></div></div><div class="card p-4"><div class=text-sm style=color:var(--text-secondary)>Warning</div><div class="text-2xl font-bold"style=color:#f59e0b></div></div><div class="card p-4"><div class=text-sm style=color:var(--text-secondary)>Info</div><div class="text-2xl font-bold"style=color:#3b82f6>'),X2=T('<button class="px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap"style=background:var(--accent-primary);color:white>'),Z2=T('<div class="card p-4 border-l-4"><div class="flex items-start justify-between gap-4"><div class=flex-1><div class="flex items-center gap-2 mb-2"><span class=text-xl></span><span class="px-2 py-1 rounded text-xs font-medium uppercase"></span><span class=text-sm style=color:var(--text-secondary)></span><span class="text-sm font-mono"style=color:var(--text-muted)>Score: <!>%</span></div><h3 class="font-semibold mb-1"style=color:var(--text-primary)></h3><p class="text-sm mb-2"style=color:var(--text-secondary)><strong>Namespace:</strong> <!> | <strong>Pod:</strong> </p><p class="text-sm mb-2"style=color:var(--text-secondary)><strong>Recommendation:</strong> </p><div class=text-xs style=color:var(--text-muted)>Detected: '),Q2=T('<span class="px-2 py-1 rounded text-xs"style=background:#22c55e20;color:#22c55e>Auto-Apply Available'),eb=T('<div class="mt-2 text-sm"style=color:#22c55e>ð° Estimated Savings: '),tb=T('<button class="px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap"style=background:var(--accent-primary);color:white>Auto-Remediate'),rb=T('<div class="card p-4 border-l-4"><div class="flex items-start justify-between gap-4"><div class=flex-1><div class="flex items-center gap-2 mb-2 flex-wrap"><span class="px-2 py-1 rounded text-xs font-medium uppercase"></span><span class="px-2 py-1 rounded text-xs font-medium"></span><span class=text-sm style=color:var(--text-muted)>Confidence: <!>%</span></div><h3 class="font-semibold mb-1"style=color:var(--text-primary)></h3><p class="text-sm mb-2"style=color:var(--text-secondary)><strong>Resource:</strong> <!> | <strong>Namespace:</strong> </p><p class="text-sm mb-2"style=color:var(--text-secondary)></p><div class="flex items-center gap-4 text-sm mb-2"><div><span style=color:var(--text-muted)>Current: </span><strong style=color:var(--text-primary)></strong></div><div>â</div><div><span style=color:var(--text-muted)>Recommended: </span><strong style=color:var(--accent-primary)></strong></div></div><div class="mt-2 flex items-center gap-4 text-xs"style=color:var(--text-muted)><span>Impact: </span><span>Effort: </span></div><div class="text-xs mt-2"style=color:var(--text-muted)>Generated: </div></div><div class="flex flex-col gap-2"><button class="px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)">View Resource');const sb=()=>{const[e,t]=J("anomalies"),[r,i]=J(""),[h,_]=J(0),[f,s]=J(null),[l,{refetch:u}]=qe(()=>{const x=r(),S=h(),E=St(),$=Yt();return{severity:x,key:S,context:E,refresh:$}},async({severity:x})=>{try{const S=await De.detectAnomalies(x||void 0);return console.log("[Anomalies] Fetched anomalies:",S.anomalies.length),S}catch(S){return console.error("[Anomalies] Failed to fetch anomalies:",S),{anomalies:[],stats:{total:0,critical:0,warning:0,info:0},duration:"0s"}}}),[g,p]=J(1),b=10,m=Ne(()=>{const x=l()?.anomalies||[],S=(g()-1)*b,E=S+b;return{list:x.slice(S,E),total:x.length,pages:Math.ceil(x.length/b)}}),C=async x=>{if(!x.autoRemediate){alert("Auto-remediation is not available for this anomaly type.");return}if(confirm(`Are you sure you want to auto-remediate this anomaly?

${x.message}

Recommendation: ${x.recommendation}`)){s(x.id);try{const S=await De.remediateAnomaly(x.id);S.success?(alert(S.message||"Anomaly remediated successfully!"),_(E=>E+1)):alert("Failed to remediate anomaly.")}catch(S){alert(`Failed to remediate: ${S.message}`)}finally{s(null)}}},y=async x=>{if(!x.autoApply){alert("Auto-remediation is not available for this recommendation.");return}if(confirm(`Are you sure you want to apply this recommendation?

${x.title}

${x.description}

Recommended: ${x.recommendedValue}`))try{const S=await De.applyRecommendation(x.id);S?.success?(alert("Recommendation applied successfully!"),v()):alert(S?.error||"Failed to apply recommendation.")}catch(S){alert(`Failed to apply: ${S.message}`)}},n=x=>{const[S,E]=x.resource.split("/"),$=x.namespace;pc({kind:S,name:E,namespace:$}),S==="Deployment"?At("deployments"):S==="Pod"?At("pods"):S==="StatefulSet"?At("statefulsets"):S==="DaemonSet"&&At("daemonsets")},d=x=>{switch(x){case"critical":return"#ef4444";case"warning":return"#f59e0b";case"info":return"#3b82f6";default:return"#6b7280"}},a=x=>{switch(x){case"crash_loop":return"ð";case"cpu_spike":return"â¡";case"memory_spike":return"ð¾";case"hpa_maxed":return"ð";case"pod_not_ready":return"â ï¸";case"frequent_restarts":return"ð";default:return"ð"}},[c,{refetch:v}]=qe(()=>{const x=e()==="recommendations",S=St(),E=Yt();return{shouldFetch:x,context:S,refresh:E}},async({shouldFetch:x})=>{if(!x)return{recommendations:[],total:0,error:void 0};try{return{...await De.getMLRecommendations(),error:void 0}}catch(S){return console.error("[Anomalies] Failed to fetch recommendations:",S),{recommendations:[],total:0,error:S?.message||"Failed to load ML recommendations. This may take a few moments if there is no historical data."}}});return Qt(()=>{_(1)}),(()=>{var x=G2(),S=x.firstChild,E=S.firstChild,$=E.firstChild;$.nextSibling;var k=E.nextSibling,O=S.nextSibling,B=O.firstChild,D=B.nextSibling;return o(k,L(G,{get when(){return e()==="anomalies"},get children(){var I=Fl();return I.$$click=()=>{_(A=>A+1),i(""),p(1)},o(I,()=>l.loading?"Detecting...":"Detect Anomalies"),ie(()=>I.disabled=l.loading),I}}),null),o(k,L(G,{get when(){return e()==="recommendations"},get children(){var I=Fl();return I.$$click=()=>c.refetch(),o(I,()=>c.loading?"Loading...":"Refresh Recommendations"),ie(()=>I.disabled=c.loading),I}}),null),B.$$click=()=>t("anomalies"),D.$$click=()=>t("recommendations"),o(x,L(G,{get when(){return Re(()=>e()==="anomalies")()&&l()?.stats},children:I=>(()=>{var A=J2(),P=A.firstChild,R=P.firstChild,N=R.nextSibling,w=P.nextSibling,H=w.firstChild,z=H.nextSibling,U=w.nextSibling,te=U.firstChild,F=te.nextSibling,W=U.nextSibling,V=W.firstChild,de=V.nextSibling;return o(N,()=>I().total),o(z,()=>I().critical),o(F,()=>I().warning),o(de,()=>I().info),A})()}),null),o(x,L(G,{get when(){return e()==="anomalies"},get children(){var I=H2(),A=I.firstChild,P=A.firstChild,R=P.nextSibling;return R.addEventListener("change",N=>{i(N.currentTarget.value),p(1)}),o(A,L(G,{get when(){return l()?.duration},get children(){var N=N2();return N.firstChild,o(N,()=>l()?.duration,null),N}}),null),ie(()=>R.value=r()),I}}),null),o(x,L(G,{get when(){return e()==="anomalies"},get children(){return[L(G,{get when(){return l.loading},get children(){var I=z2(),A=I.firstChild;return A.nextSibling,I}}),L(G,{get when(){return Re(()=>!l.loading&&!l.error)()&&m().total>0},get children(){return[(()=>{var I=F2();return o(I,L(He,{get each(){return m().list},children:A=>(()=>{var P=Z2(),R=P.firstChild,N=R.firstChild,w=N.firstChild,H=w.firstChild,z=H.nextSibling,U=z.nextSibling,te=U.nextSibling,F=te.firstChild,W=F.nextSibling;W.nextSibling;var V=w.nextSibling,de=V.nextSibling,M=de.firstChild,j=M.nextSibling,K=j.nextSibling,Z=K.nextSibling,se=Z.nextSibling;se.nextSibling;var ee=de.nextSibling,ae=ee.firstChild;ae.nextSibling;var X=ee.nextSibling;return X.firstChild,o(H,()=>a(A.type)),o(z,()=>A.severity),o(U,()=>A.type.replace(/_/g," ")),o(te,()=>(A.score*100).toFixed(1),W),o(V,()=>A.message),o(de,()=>A.namespace,K),o(de,()=>A.podName,null),o(de,(()=>{var q=Re(()=>!!A.deployment);return()=>q()&&` | <strong>Deployment:</strong> ${A.deployment}`})(),null),o(ee,()=>A.recommendation,null),o(X,()=>new Date(A.timestamp).toLocaleString(),null),o(R,L(G,{get when(){return A.autoRemediate},get children(){var q=X2();return q.$$click=()=>C(A),o(q,()=>f()===A.id?"Remediating...":"Auto-Remediate"),ie(()=>q.disabled=f()===A.id),q}}),null),ie(q=>{var ne=d(A.severity),Y=`${d(A.severity)}20`,re=d(A.severity);return ne!==q.e&&ce(P,"border-left-color",q.e=ne),Y!==q.t&&ce(z,"background",q.t=Y),re!==q.a&&ce(z,"color",q.a=re),q},{e:void 0,t:void 0,a:void 0}),P})()})),I})(),L(G,{get when(){return m().pages>1},get children(){var I=j2(),A=I.firstChild,P=A.nextSibling,R=P.firstChild,N=R.nextSibling;N.nextSibling;var w=P.nextSibling;return A.$$click=()=>p(H=>Math.max(1,H-1)),o(P,g,N),o(P,()=>m().pages,null),w.$$click=()=>p(H=>Math.min(m().pages,H+1)),ie(H=>{var z=g()===1,U=g()===m().pages;return z!==H.e&&(A.disabled=H.e=z),U!==H.t&&(w.disabled=H.t=U),H},{e:void 0,t:void 0}),I}})]}}),L(G,{get when(){return Re(()=>!l.loading&&!l.error)()&&m().total===0},get children(){var I=U2(),A=I.firstChild,P=A.nextSibling;return P.nextSibling,I}}),L(G,{get when(){return l.error},get children(){var I=V2(),A=I.firstChild;return A.firstChild,o(A,(()=>{var P=Re(()=>l.error instanceof Error);return()=>P()?l.error.message:String(l.error)})(),null),I}})]}}),null),o(x,L(G,{get when(){return e()==="recommendations"},get children(){return[L(G,{get when(){return c.loading},get children(){var I=W2(),A=I.firstChild,P=A.nextSibling,R=P.firstChild;return R.nextSibling,I}}),L(G,{get when(){return Re(()=>!c.loading)()&&c.error},get children(){var I=q2(),A=I.firstChild;return A.firstChild,A.nextSibling,o(A,()=>c.error,null),I}}),L(G,{get when(){return Re(()=>!c.loading&&!c.error)()&&(!c()||c().recommendations.length===0)},get children(){var I=K2(),A=I.firstChild,P=A.nextSibling,R=P.nextSibling,N=R.nextSibling;return N.nextSibling,I}}),L(G,{get when(){return Re(()=>!!(!c.loading&&c()))()&&c().recommendations.length>0},get children(){var I=Y2(),A=I.firstChild,P=A.firstChild,R=P.firstChild,N=R.nextSibling;return o(N,()=>c().total),o(I,L(He,{get each(){return c().recommendations},children:w=>(()=>{var H=rb(),z=H.firstChild,U=z.firstChild,te=U.firstChild,F=te.firstChild,W=F.nextSibling,V=W.nextSibling,de=V.firstChild,M=de.nextSibling;M.nextSibling;var j=te.nextSibling,K=j.nextSibling,Z=K.firstChild,se=Z.nextSibling,ee=se.nextSibling,ae=ee.nextSibling,X=ae.nextSibling;X.nextSibling;var q=K.nextSibling,ne=q.nextSibling,Y=ne.firstChild,re=Y.firstChild,Q=re.nextSibling,ve=Y.nextSibling,Ae=ve.nextSibling,Ce=Ae.firstChild,we=Ce.nextSibling,_e=ne.nextSibling,ge=_e.firstChild;ge.firstChild;var le=ge.nextSibling;le.firstChild;var ue=_e.nextSibling;ue.firstChild;var Se=U.nextSibling,be=Se.firstChild;return o(F,()=>w.severity),o(W,()=>w.type.replace(/_/g," ")),o(V,()=>(w.confidence*100).toFixed(0),M),o(te,L(G,{get when(){return w.autoApply},get children(){return Q2()}}),null),o(j,()=>w.title),o(K,()=>w.resource,ee),o(K,()=>w.namespace,null),o(q,()=>w.description),o(Q,()=>w.currentValue),o(we,()=>w.recommendedValue),o(U,L(G,{get when(){return w.estimatedSavings},get children(){var oe=eb();return oe.firstChild,o(oe,()=>w.estimatedSavings,null),oe}}),_e),o(ge,()=>w.impact,null),o(le,()=>w.effort,null),o(ue,()=>new Date(w.timestamp).toLocaleString(),null),be.$$click=()=>n(w),o(Se,L(G,{get when(){return w.autoApply},get children(){var oe=tb();return oe.$$click=()=>y(w),oe}}),null),ie(oe=>{var ye=w.severity==="high"?"#ef4444":w.severity==="medium"?"#f59e0b":"#3b82f6",pe=w.severity==="high"?"#ef444420":w.severity==="medium"?"#f59e0b20":"#3b82f620",he=w.severity==="high"?"#ef4444":w.severity==="medium"?"#f59e0b":"#3b82f6",me=w.type==="scaling"?"#a855f720":w.type==="resource_optimization"?"#22c55e20":w.type==="cost_saving"?"#f59e0b20":"#3b82f620",fe=w.type==="scaling"?"#a855f7":w.type==="resource_optimization"?"#22c55e":w.type==="cost_saving"?"#f59e0b":"#3b82f6";return ye!==oe.e&&ce(H,"border-left-color",oe.e=ye),pe!==oe.t&&ce(F,"background",oe.t=pe),he!==oe.a&&ce(F,"color",oe.a=he),me!==oe.o&&ce(W,"background",oe.o=me),fe!==oe.i&&ce(W,"color",oe.i=fe),oe},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),H})()}),null),I}})]}}),null),ie(I=>{var A=`px-4 py-2 text-sm font-medium transition-colors ${e()==="anomalies"?"border-b-2":"opacity-60 hover:opacity-100"}`,P=e()==="anomalies"?"var(--accent-primary)":"var(--text-secondary)",R=e()==="anomalies"?"var(--accent-primary)":"transparent",N=`px-4 py-2 text-sm font-medium transition-colors ${e()==="recommendations"?"border-b-2":"opacity-60 hover:opacity-100"}`,w=e()==="recommendations"?"var(--accent-primary)":"var(--text-secondary)",H=e()==="recommendations"?"var(--accent-primary)":"transparent";return A!==I.e&&ze(B,I.e=A),P!==I.t&&ce(B,"color",I.t=P),R!==I.a&&ce(B,"border-bottom-color",I.a=R),N!==I.o&&ze(D,I.o=N),w!==I.i&&ce(D,"color",I.i=w),H!==I.n&&ce(D,"border-bottom-color",I.n=H),I},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),x})()};et(["click"]);var ib=T('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z">'),nb=T('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 6h16M4 10h16M4 14h16M4 18h16">'),lb=T('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1v-4zM14 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z">'),ob=T('<div class=space-y-4><h2 class="text-lg font-semibold flex items-center gap-2"><span class="w-3 h-3 rounded-full"></span></h2><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">'),ab=T('<div class="absolute top-2 right-2 px-2 py-1 rounded text-xs font-medium flex items-center gap-1"style="background:rgba(6, 182, 212, 0.2);color:var(--accent-primary)"><div class=spinner style=width:12px;height:12px></div>Deploying...'),cb=T('<div class="absolute top-2 right-2 px-2 py-1 rounded text-xs font-medium flex items-center gap-1"style="background:rgba(34, 197, 94, 0.2);color:var(--success-color)"><svg class="w-3 h-3"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"clip-rule=evenodd></path></svg>Installed'),db=T("<div class=spinner style=width:24px;height:24px>"),hb=T('<div class="flex items-center gap-2"><span class=text-xs style=color:var(--accent-primary)>to '),ub=T('<div class="flex items-center gap-2"><button class="px-3 py-1.5 rounded-lg text-sm font-medium transition-all hover:opacity-80 flex items-center gap-1"style="background:rgba(34, 197, 94, 0.2);color:var(--success-color)"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>View Pods</button><button class="px-3 py-1.5 rounded-lg text-sm font-medium transition-all hover:opacity-80"style="background:rgba(239, 68, 68, 0.2);color:var(--error-color)">Uninstall'),fb=T('<div class="mt-2 pt-2 border-t flex items-center gap-1 text-xs"style=border-color:var(--border-color);color:var(--text-muted)><svg class="w-3 h-3"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg>Namespace: <span style=color:var(--text-secondary)>'),gb=T('<div><div class="flex items-start gap-3"><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)></div><div class="flex-1 min-w-0"><h3 class=font-semibold style=color:var(--text-primary)></h3><p class="text-xs mt-0.5"style=color:var(--text-muted)>v</p></div></div><p class="mt-3 text-sm line-clamp-2"style=color:var(--text-secondary)></p><div class="mt-4 flex items-center justify-between"><span class="text-xs px-2 py-1 rounded"style=background:var(--bg-tertiary);color:var(--text-muted)>'),pb=T('<svg class="w-6 h-6"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2>'),vb=T('<button class="p-1.5 rounded-lg text-sm transition-all hover:opacity-80"title="Remove custom app"style="background:rgba(239, 68, 68, 0.2);color:var(--error-color)"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">'),mb=T('<div class="flex items-center gap-2"><button class="px-3 py-1.5 rounded-lg text-sm font-medium transition-all hover:opacity-80"style=background:var(--accent-primary);color:#000>Install'),_b=T('<div class="overflow-hidden rounded-lg"style=background:#0d1117><div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class=whitespace-nowrap>App</th><th class=whitespace-nowrap>Category</th><th class=whitespace-nowrap>Version</th><th class=whitespace-nowrap>Chart</th><th class=whitespace-nowrap>Status</th><th class=whitespace-nowrap>Namespace</th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),bb=T('<tr><td colspan=7 class="text-center py-8"style=color:var(--text-muted)>No apps found'),yb=T('<span class="badge badge-info flex items-center gap-1"><div class=spinner style=width:12px;height:12px></div>Deploying'),xb=T('<button class="px-3 py-1 rounded text-sm transition-all hover:opacity-80"style="background:rgba(34, 197, 94, 0.2);color:var(--success-color)">View'),$b=T('<button class="px-3 py-1 rounded text-sm transition-all hover:opacity-80"style="background:rgba(239, 68, 68, 0.2);color:var(--error-color)">Uninstall'),wb=T('<tr><td><div class="flex items-center gap-3"><div class="p-2 rounded-lg"style=background:var(--bg-tertiary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></div><div><div class=font-medium style=color:var(--text-primary)></div><div class=text-xs style=color:var(--text-muted)></div></div></div></td><td><span class="text-xs px-2 py-1 rounded"></span></td><td class="font-mono text-sm"></td><td class="font-mono text-sm"></td><td></td><td class=text-sm></td><td><div class="flex items-center gap-2">'),Sb=T('<span class="badge badge-success">Installed'),Cb=T('<span class="badge badge-default">Available'),kb=T('<button class="px-3 py-1 rounded text-sm transition-all hover:opacity-80"style=background:var(--accent-primary);color:#000>Install'),Ab=T('<div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3">'),Mb=T("<div class=spinner style=width:12px;height:12px>"),Eb=T('<div class="absolute top-1 right-1">'),Lb=T('<button class="px-2 py-0.5 rounded text-xs transition-all hover:opacity-80"style=background:var(--accent-primary);color:#000>Install'),Rb=T('<button><div class="flex items-center gap-2 mb-2"><div class="p-1.5 rounded"style=background:var(--bg-tertiary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></div></div><h4 class="font-medium text-sm truncate mb-1"style=color:var(--text-primary)></h4><p class="text-xs truncate mb-2"style=color:var(--text-muted)></p><div class="flex items-center justify-between text-xs"><span style=color:var(--text-muted)>v'),Db=T('<div class="w-2 h-2 rounded-full bg-green-500"title=Installed>'),Tb=T('<button class="px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-all hover:opacity-80"style=background:var(--accent-primary);color:#000><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 4v16m8-8H4"></path></svg>Add Custom App'),Pb=T('<div class="flex items-center gap-1 p-1 rounded-lg"style=background:var(--bg-secondary)><button><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg>Marketplace<span class="px-2 py-0.5 rounded text-xs"style=background:var(--bg-primary);color:var(--text-muted)></span></button><button><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"></path></svg>Custom Apps<span class="px-2 py-0.5 rounded text-xs"style=background:var(--bg-primary);color:var(--text-muted)>'),Ib=T('<div class="card p-12 text-center"><div class="w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center"style=background:var(--bg-tertiary)><svg class="w-8 h-8"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"></path></svg></div><h3 class="text-lg font-semibold mb-2"style=color:var(--text-primary)>No Custom Apps</h3><p class=mb-4 style=color:var(--text-secondary)>Add your own Helm charts to deploy custom applications.</p><button class="px-4 py-2 rounded-lg text-sm font-medium transition-all hover:opacity-80"style=background:var(--accent-primary);color:#000>Add Your First Custom App'),Bb=T('<div class="p-4 rounded-lg border-l-4"style="background:rgba(245, 158, 11, 0.1);border-left-color:#f59e0b;color:var(--text-primary)"><div class="flex items-start gap-2"><svg class="w-5 h-5 mt-0.5 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div class=flex-1><h4 class="font-semibold mb-1">Prerequisites Required</h4><p class="text-sm mb-2">This local cluster installer requires <strong>Docker</strong> to be installed and running.</p><ul class="text-sm list-disc list-inside space-y-1 mb-2"style=color:var(--text-secondary)><li>Docker Desktop must be installed</li><li>Docker Desktop must be running</li><li>Docker daemon must be accessible</li></ul><p class=text-xs style=color:var(--text-muted)>If Docker is not installed, the installation will fail. Check server logs for detailed error messages.'),Ob=T("<div class=spinner style=width:16px;height:16px>"),Nb=T('<div class=space-y-4><p style=color:var(--text-secondary)></p><div class="p-4 rounded-lg"style=background:var(--bg-tertiary)><div class="flex items-center justify-between text-sm"><span style=color:var(--text-muted)>Chart</span><span style=color:var(--text-primary)></span></div><div class="flex items-center justify-between text-sm mt-2"><span style=color:var(--text-muted)>Version</span><span style=color:var(--text-primary)></span></div><div class="flex items-center justify-between text-sm mt-2"><span style=color:var(--text-muted)>Repository</span><span class="text-xs truncate max-w-xs"style=color:var(--accent-primary)></span></div></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Target Namespace</label><input type=text class="w-full px-3 py-2 rounded-lg text-sm"placeholder=default style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div class="flex justify-end gap-3 mt-6"><button class="px-4 py-2 rounded-lg text-sm font-medium"style=background:var(--bg-secondary);color:var(--text-secondary)>Cancel</button><button class="px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 disabled:opacity-50"style=background:var(--accent-primary);color:#000>'),Hb=T('<div class=space-y-4><p style=color:var(--text-secondary)>Add your own Helm chart to the marketplace. Custom apps are stored locally in your browser.</p><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>App Name <span style=color:var(--error-color)>*</span></label><input type=text class="w-full px-3 py-2 rounded-lg text-sm"placeholder=my-app style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Display Name</label><input type=text class="w-full px-3 py-2 rounded-lg text-sm"placeholder="My Application"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Chart Repository URL <span style=color:var(--error-color)>*</span></label><input type=text class="w-full px-3 py-2 rounded-lg text-sm"placeholder=https://charts.example.com style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Chart Name <span style=color:var(--error-color)>*</span></label><input type=text class="w-full px-3 py-2 rounded-lg text-sm"placeholder=my-chart style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div class="grid grid-cols-2 gap-4"><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Category</label><select class="w-full px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=Custom>Custom</option><option value=Networking>Networking</option><option value=CI/CD>CI/CD</option><option value=Observability>Observability</option><option value=Security>Security</option><option value=Data>Data</option></select></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Version</label><input type=text class="w-full px-3 py-2 rounded-lg text-sm"placeholder=1.0.0 style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Description</label><textarea class="w-full px-3 py-2 rounded-lg text-sm resize-none"placeholder="Optional description for the app"rows=3 style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></textarea></div><div class="flex justify-end gap-3 mt-6"><button class="px-4 py-2 rounded-lg text-sm font-medium"style=background:var(--bg-secondary);color:var(--text-secondary)>Cancel</button><button class="px-4 py-2 rounded-lg text-sm font-medium"style=background:var(--accent-primary);color:#000>Add App'),zb=T('<div class=space-y-6><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)></h1><p style=color:var(--text-secondary)></p></div><div class="flex items-center gap-3"><div class="flex items-center rounded-lg overflow-hidden"style="background:var(--bg-secondary);border:1px solid var(--border-color)"></div><button class=icon-btn title=Refresh style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total Apps</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Installed</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 flex items-center gap-2"style="border-left:3px solid #8b5cf6"><span class=text-sm style=color:var(--text-secondary)>Available</span><span class="text-xl font-bold"style=color:#8b5cf6></span></div><div class=flex-1></div><input type=text placeholder="Search apps..."class="px-3 py-2 rounded-lg text-sm w-64"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div class="flex flex-wrap gap-2">'),Fb=T('<button><span class="hidden sm:inline capitalize">'),jb=T("<button>");const Ub=()=>{try{const e=localStorage.getItem("kubegraf-custom-apps");return e?JSON.parse(e):[]}catch{return[]}},jl=e=>{localStorage.setItem("kubegraf-custom-apps",JSON.stringify(e))},Gs=[{name:"nginx-ingress",displayName:"NGINX Ingress",description:"Ingress controller for Kubernetes using NGINX as a reverse proxy",category:"Networking",icon:"M13 10V3L4 14h7v7l9-11h-7z",version:"4.9.0",chartRepo:"https://kubernetes.github.io/ingress-nginx",chartName:"ingress-nginx"},{name:"istio",displayName:"Istio Service Mesh",description:"Connect, secure, control, and observe services across your cluster",category:"Networking",icon:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9",version:"1.20.0",chartRepo:"https://istio-release.storage.googleapis.com/charts",chartName:"istiod"},{name:"cilium",displayName:"Cilium CNI",description:"eBPF-based networking, observability, and security for Kubernetes",category:"Networking",icon:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z",version:"1.14.5",chartRepo:"https://helm.cilium.io/",chartName:"cilium"},{name:"argocd",displayName:"Argo CD",description:"Declarative GitOps continuous delivery tool for Kubernetes",category:"CI/CD",icon:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15",version:"5.51.0",chartRepo:"https://argoproj.github.io/argo-helm",chartName:"argo-cd"},{name:"fluxcd",displayName:"Flux CD",description:"GitOps toolkit for continuous and progressive delivery",category:"CI/CD",icon:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4",version:"2.12.0",chartRepo:"https://fluxcd-community.github.io/helm-charts",chartName:"flux2"},{name:"prometheus",displayName:"Prometheus",description:"Monitoring system and time series database for metrics",category:"Observability",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z",version:"25.8.0",chartRepo:"https://prometheus-community.github.io/helm-charts",chartName:"prometheus"},{name:"grafana",displayName:"Grafana",description:"Analytics & monitoring dashboards for all your metrics",category:"Observability",icon:"M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z",version:"7.0.19",chartRepo:"https://grafana.github.io/helm-charts",chartName:"grafana"},{name:"loki",displayName:"Loki",description:"Like Prometheus, but for logs - scalable log aggregation",category:"Observability",icon:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",version:"5.41.4",chartRepo:"https://grafana.github.io/helm-charts",chartName:"loki-stack"},{name:"tempo",displayName:"Tempo",description:"High-scale distributed tracing backend",category:"Observability",icon:"M13 10V3L4 14h7v7l9-11h-7z",version:"1.7.1",chartRepo:"https://grafana.github.io/helm-charts",chartName:"tempo"},{name:"cert-manager",displayName:"cert-manager",description:"Automatically provision and manage TLS certificates",category:"Security",icon:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z",version:"1.13.3",chartRepo:"https://charts.jetstack.io",chartName:"cert-manager"},{name:"vault",displayName:"HashiCorp Vault",description:"Secrets management, encryption, and privileged access",category:"Security",icon:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z",version:"0.27.0",chartRepo:"https://helm.releases.hashicorp.com",chartName:"vault"},{name:"redis",displayName:"Redis",description:"In-memory data structure store, cache, and message broker",category:"Data",icon:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4",version:"18.6.1",chartRepo:"https://charts.bitnami.com/bitnami",chartName:"redis"},{name:"postgresql",displayName:"PostgreSQL",description:"Advanced open source relational database",category:"Data",icon:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4",version:"14.0.5",chartRepo:"https://charts.bitnami.com/bitnami",chartName:"postgresql"},{name:"memcached",displayName:"Memcached",description:"High-performance distributed memory caching system",category:"Data",icon:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z",version:"6.7.2",chartRepo:"https://charts.bitnami.com/bitnami",chartName:"memcached"},{name:"kube-prometheus-stack",displayName:"Kube Prometheus Stack",description:"Full Prometheus + Grafana + Alertmanager observability stack",category:"Observability",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z",version:"55.5.0",chartRepo:"https://prometheus-community.github.io/helm-charts",chartName:"kube-prometheus-stack"},{name:"k3d",displayName:"k3d - Local Kubernetes",description:"Lightweight wrapper to run k3s in Docker. Perfect for local development and testing.",category:"Local Cluster",icon:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01",version:"Latest",chartRepo:"local-cluster",chartName:"k3d"},{name:"kind",displayName:"kind - Kubernetes in Docker",description:"Run local Kubernetes clusters using Docker container nodes. Great for CI/CD and development.",category:"Local Cluster",icon:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01",version:"Latest",chartRepo:"local-cluster",chartName:"kind"},{name:"minikube",displayName:"Minikube - Local Kubernetes",description:"Run Kubernetes locally. Minikube runs a single-node Kubernetes cluster inside a VM on your laptop.",category:"Local Cluster",icon:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01",version:"Latest",chartRepo:"local-cluster",chartName:"minikube"}],ur={Networking:"#22d3ee","CI/CD":"#a855f7",Observability:"#f97316",Security:"#22c55e",Data:"#3b82f6","Local Cluster":"#10b981"},sa=e=>{const[t,r]=J(""),[i,h]=J("all"),[_,f]=J(null),[s,l]=J(!1),[u,g]=J("default"),[p,b]=J("kubegraf-cluster"),[m,C]=J(!1),[y,n]=J([]),[d,a]=J(!1),[c,v]=J("card"),[x,S]=J({});Qt(()=>{const X=sessionStorage.getItem("kubegraf-auto-filter");X&&(h(X),sessionStorage.removeItem("kubegraf-auto-filter"));const q=sessionStorage.getItem("kubegraf-default-tab");q&&(q==="marketplace"||q==="custom")&&($(q),sessionStorage.removeItem("kubegraf-default-tab")),X==="Local Cluster"&&setTimeout(()=>{const ne=document.querySelector('[data-category="Local Cluster"]');ne&&ne.scrollIntoView({behavior:"smooth",block:"start"})},300)});const[E,$]=J(e.defaultTab||"marketplace");Tt(()=>{e.defaultTab&&$(e.defaultTab)});const[k,O]=J(Ub()),[B,D]=J(!1),[I,A]=J({name:"",displayName:"",description:"",category:"Custom",chartRepo:"",chartName:"",version:"1.0.0"}),[P,{refetch:R}]=qe(async()=>{try{return await De.getInstalledApps()}catch{return[]}}),N=Ne(()=>{const X=P()||[];return Gs.map(q=>{const ne=X.find(Y=>Y.name===q.name);return{...q,installed:!!ne,installedNamespace:ne?.namespace}})}),w=Ne(()=>{const X=new Set(Gs.map(q=>q.category));return["all",...Array.from(X)]}),H=Ne(()=>{let X=N();const q=t().toLowerCase(),ne=i();return ne!=="all"&&(X=X.filter(Y=>Y.category===ne)),q&&(X=X.filter(Y=>Y.displayName.toLowerCase().includes(q)||Y.description.toLowerCase().includes(q)||Y.category.toLowerCase().includes(q))),X});Ne(()=>{const X=H(),q={};return X.forEach(ne=>{q[ne.category]||(q[ne.category]=[]),q[ne.category].push(ne)}),Object.entries(q).map(([ne,Y])=>({name:ne,apps:Y}))});const z=Ne(()=>{const X=N();return{total:X.length,installed:X.filter(q=>q.installed).length,available:X.filter(q=>!q.installed).length}}),U=(X,q,ne)=>{const Y=setInterval(async()=>{try{(await De.getInstalledApps())?.some(ve=>ve.name===X)&&(clearInterval(Y),S(ve=>{const Ae={...ve};return delete Ae[X],Ae}),Ve(`${q} deployed successfully to ${ne}`,"success"),R())}catch{}},5e3);setTimeout(()=>{clearInterval(Y),S(re=>{const Q={...re};return delete Q[X],Q})},3e5)},te=async()=>{const X=_();if(!X)return;C(!0);const q=u()||"default";try{await De.installApp(X.name,q),Ve(`${X.displayName} installation started in ${q}`,"info"),S(ne=>({...ne,[X.name]:{namespace:q,startTime:Date.now()}})),U(X.name,X.displayName,q),l(!1)}catch(ne){Ve(`Failed to install ${X.displayName}: ${ne instanceof Error?ne.message:"Unknown error"}`,"error")}finally{C(!1)}},F=X=>{const q=X.installedNamespace||"default";console.log("Navigating to pods for app:",X.name,"in namespace:",q),xo(q),At("pods")},W=async X=>{if(confirm(`Are you sure you want to uninstall ${X.displayName}?`))try{await De.uninstallApp(X.name,X.installedNamespace||"default"),Ve(`${X.displayName} uninstalled successfully`,"success"),R()}catch(q){Ve(`Failed to uninstall ${X.displayName}: ${q instanceof Error?q.message:"Unknown error"}`,"error")}},V=()=>{const X=I();if(!X.name||!X.chartRepo||!X.chartName){Ve("Please fill in all required fields","error");return}const ne={name:X.name.toLowerCase().replace(/[^a-z0-9-]/g,"-"),displayName:X.displayName||X.name,description:X.description||`Custom Helm chart: ${X.chartName}`,category:X.category||"Custom",icon:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4",version:X.version||"1.0.0",chartRepo:X.chartRepo,chartName:X.chartName,isCustom:!0},Y=[...k(),ne];O(Y),jl(Y),A({name:"",displayName:"",description:"",category:"Custom",chartRepo:"",chartName:"",version:"1.0.0"}),D(!1),Ve(`${ne.displayName} added to custom apps`,"success")},de=X=>{if(!confirm(`Are you sure you want to remove ${X.displayName} from your custom apps?`))return;const q=k().filter(ne=>ne.name!==X.name);O(q),jl(q),Ve(`${X.displayName} removed from custom apps`,"success")},M=Ne(()=>{const X=P()||[],q=Gs.map(Y=>{const re=X.find(Q=>Q.name===Y.name);return{...Y,installed:!!re,installedNamespace:re?.namespace}}),ne=k().map(Y=>{const re=X.find(Q=>Q.name===Y.name);return{...Y,installed:!!re,installedNamespace:re?.namespace}});return{marketplace:q,custom:ne}}),j=Ne(()=>{const{marketplace:X,custom:q}=M(),ne=E()==="marketplace"?X:q,Y=t().toLowerCase(),re=i();let Q=ne;return re!=="all"&&(Q=Q.filter(ve=>ve.category===re)),Y&&(Q=Q.filter(ve=>ve.displayName.toLowerCase().includes(Y)||ve.description.toLowerCase().includes(Y)||ve.category.toLowerCase().includes(Y))),Q}),K=Ne(()=>{const X=j(),q={};return X.forEach(ne=>{q[ne.category]||(q[ne.category]=[]),q[ne.category].push(ne)}),Object.entries(q).map(([ne,Y])=>({name:ne,apps:Y}))}),Z=X=>L(hi,{get children(){return[L(ir,{get when(){return X.mode==="card"},get children(){return ib()}}),L(ir,{get when(){return X.mode==="list"},get children(){return nb()}}),L(ir,{get when(){return X.mode==="grid"},get children(){return lb()}})]}}),se=()=>L(He,{get each(){return K()},children:X=>(()=>{var q=ob(),ne=q.firstChild,Y=ne.firstChild,re=ne.nextSibling;return o(ne,()=>X.name,null),o(re,L(He,{get each(){return X.apps},children:Q=>{const ve=()=>!!x()[Q.name],Ae=()=>x()[Q.name];return(()=>{var Ce=gb(),we=Ce.firstChild,_e=we.firstChild,ge=_e.nextSibling,le=ge.firstChild,ue=le.nextSibling;ue.firstChild;var Se=we.nextSibling,be=Se.nextSibling,oe=be.firstChild;return Ce.$$click=()=>Q.installed&&F(Q),o(Ce,L(G,{get when(){return ve()},get children(){var ye=ab();return ye.firstChild,ye}}),we),o(Ce,L(G,{get when(){return Re(()=>!!Q.installed)()&&!ve()},get children(){return cb()}}),we),o(_e,L(G,{get when(){return ve()},get fallback(){return(()=>{var ye=pb(),pe=ye.firstChild;return ie(he=>{var me=ur[Q.category]||"var(--accent-primary)",fe=Q.icon;return me!==he.e&&ce(ye,"color",he.e=me),fe!==he.t&&Xe(pe,"d",he.t=fe),he},{e:void 0,t:void 0}),ye})()},get children(){return db()}})),o(le,()=>Q.displayName),o(ue,()=>Q.version,null),o(Se,()=>Q.description),o(oe,()=>Q.chartName),o(be,L(G,{get when(){return ve()},get children(){var ye=hb(),pe=ye.firstChild;return pe.firstChild,o(pe,()=>Ae()?.namespace,null),ye}}),null),o(be,L(G,{get when(){return!ve()},get children(){return L(G,{get when(){return Q.installed},get fallback(){return(()=>{var ye=mb(),pe=ye.firstChild;return pe.$$click=he=>{he.stopPropagation(),f(Q),l(!0)},o(ye,L(G,{get when(){return Q.isCustom},get children(){var he=vb();return he.$$click=me=>{me.stopPropagation(),de(Q)},he}}),null),ye})()},get children(){var ye=ub(),pe=ye.firstChild,he=pe.nextSibling;return pe.$$click=me=>{me.stopPropagation(),F(Q)},he.$$click=me=>{me.stopPropagation(),W(Q)},ye}})}}),null),o(Ce,L(G,{get when(){return Re(()=>!!Q.installed)()&&!ve()},get children(){var ye=fb(),pe=ye.firstChild,he=pe.nextSibling,me=he.nextSibling;return o(me,()=>Q.installedNamespace||"default"),ye}}),null),ie(ye=>{var pe=`card p-4 relative overflow-hidden group transition-all ${Q.installed?"cursor-pointer hover:border-green-500/50":"hover:border-cyan-500/30"} ${ve()?"animate-pulse":""}`,he=`4px solid ${ur[Q.category]||"var(--accent-primary)"}`;return pe!==ye.e&&ze(Ce,ye.e=pe),he!==ye.t&&ce(Ce,"border-left",ye.t=he),ye},{e:void 0,t:void 0}),Ce})()}})),ie(Q=>{var ve=X.name,Ae=ur[X.name]||"var(--text-primary)",Ce=ur[X.name]||"var(--accent-primary)";return ve!==Q.e&&Xe(q,"data-category",Q.e=ve),Ae!==Q.t&&ce(ne,"color",Q.t=Ae),Ce!==Q.a&&ce(Y,"background",Q.a=Ce),Q},{e:void 0,t:void 0,a:void 0}),q})()}),ee=()=>(()=>{var X=_b(),q=X.firstChild,ne=q.firstChild,Y=ne.firstChild,re=Y.nextSibling;return o(re,L(He,{get each(){return j()},get fallback(){return(()=>{var Q=bb();return Q.firstChild,Q})()},children:Q=>{const ve=()=>!!x()[Q.name];return(()=>{var Ae=wb(),Ce=Ae.firstChild,we=Ce.firstChild,_e=we.firstChild,ge=_e.firstChild,le=ge.firstChild,ue=_e.nextSibling,Se=ue.firstChild,be=Se.nextSibling,oe=Ce.nextSibling,ye=oe.firstChild,pe=oe.nextSibling,he=pe.nextSibling,me=he.nextSibling,fe=me.nextSibling,xe=fe.nextSibling,$e=xe.firstChild;return o(Se,()=>Q.displayName),o(be,()=>Q.description),o(ye,()=>Q.category),o(pe,()=>Q.version),o(he,()=>Q.chartName),o(me,L(G,{get when(){return ve()},get fallback(){return L(G,{get when(){return Q.installed},get fallback(){return Cb()},get children(){return Sb()}})},get children(){var ke=yb();return ke.firstChild,ke}})),o(fe,()=>Q.installedNamespace||"-"),o($e,L(G,{get when(){return!ve()},get children(){return L(G,{get when(){return Q.installed},get fallback(){return(()=>{var ke=kb();return ke.$$click=()=>{f(Q),l(!0)},ke})()},get children(){return[(()=>{var ke=xb();return ke.$$click=()=>F(Q),ke})(),(()=>{var ke=$b();return ke.$$click=()=>W(Q),ke})()]}})}})),ie(ke=>{var Be=ur[Q.category]||"var(--accent-primary)",Pe=Q.icon,Le=`${ur[Q.category]||"var(--accent-primary)"}20`,Oe=ur[Q.category]||"var(--accent-primary)";return Be!==ke.e&&ce(ge,"color",ke.e=Be),Pe!==ke.t&&Xe(le,"d",ke.t=Pe),Le!==ke.a&&ce(ye,"background",ke.a=Le),Oe!==ke.o&&ce(ye,"color",ke.o=Oe),ke},{e:void 0,t:void 0,a:void 0,o:void 0}),Ae})()}})),X})(),ae=()=>(()=>{var X=Ab();return o(X,L(He,{get each(){return j()},children:q=>{const ne=()=>!!x()[q.name],Y=()=>q.installed&&!ne();return(()=>{var re=Rb(),Q=re.firstChild,ve=Q.firstChild,Ae=ve.firstChild,Ce=Ae.firstChild,we=Q.nextSibling,_e=we.nextSibling,ge=_e.nextSibling,le=ge.firstChild;return le.firstChild,re.$$click=()=>Y()&&F(q),o(re,L(G,{get when(){return ne()||Y()},get children(){var ue=Eb();return o(ue,L(G,{get when(){return ne()},get fallback(){return Db()},get children(){return Mb()}})),ue}}),Q),o(we,()=>q.displayName),o(_e,()=>q.description),o(le,()=>q.version,null),o(ge,L(G,{get when(){return Re(()=>!ne())()&&!Y()},get children(){var ue=Lb();return ue.$$click=Se=>{Se.stopPropagation(),f(q),l(!0)},ue}}),null),ie(ue=>{var Se=`card p-3 text-left hover:border-cyan-500/30 transition-colors relative ${Y()?"cursor-pointer":""} ${ne()?"animate-pulse":""}`,be=`3px solid ${ur[q.category]||"var(--accent-primary)"}`,oe=ur[q.category]||"var(--accent-primary)",ye=q.icon,pe=q.displayName,he=q.description;return Se!==ue.e&&ze(re,ue.e=Se),be!==ue.t&&ce(re,"border-left",ue.t=be),oe!==ue.a&&ce(Ae,"color",ue.a=oe),ye!==ue.o&&Xe(Ce,"d",ue.o=ye),pe!==ue.i&&Xe(we,"title",ue.i=pe),he!==ue.n&&Xe(_e,"title",ue.n=he),ue},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),re})()}})),X})();return(()=>{var X=zb(),q=X.firstChild,ne=q.firstChild,Y=ne.firstChild,re=Y.nextSibling,Q=ne.nextSibling,ve=Q.firstChild,Ae=ve.nextSibling,Ce=q.nextSibling,we=Ce.firstChild,_e=we.firstChild,ge=_e.nextSibling,le=we.nextSibling,ue=le.firstChild,Se=ue.nextSibling,be=le.nextSibling,oe=be.firstChild,ye=oe.nextSibling,pe=be.nextSibling,he=pe.nextSibling,me=Ce.nextSibling;return o(Y,L(G,{get when(){return E()==="marketplace"},children:"Apps Marketplace"}),null),o(Y,L(G,{get when(){return E()==="custom"},children:"Custom Apps"}),null),o(re,L(G,{get when(){return E()==="marketplace"},children:"Deploy platform tools and applications with one click"}),null),o(re,L(G,{get when(){return E()==="custom"},children:"Manage your custom application deployments"}),null),o(ve,L(He,{each:["card","list","grid"],children:fe=>(()=>{var xe=Fb(),$e=xe.firstChild;return xe.$$click=()=>v(fe),o(xe,L(Z,{mode:fe}),$e),o($e,fe),ie(ke=>{var Be=`px-3 py-2 flex items-center gap-2 text-sm transition-colors ${c()===fe?"text-white":"text-gray-400 hover:text-white"}`,Pe=c()===fe?{background:"var(--accent-primary)"}:{background:"transparent"},Le=`${fe.charAt(0).toUpperCase()+fe.slice(1)} View`;return Be!==ke.e&&ze(xe,ke.e=Be),ke.t=vn(xe,Pe,ke.t),Le!==ke.a&&Xe(xe,"title",ke.a=Le),ke},{e:void 0,t:void 0,a:void 0}),xe})()})),o(Q,L(G,{get when(){return E()==="custom"},get children(){var fe=Tb();return fe.$$click=()=>D(!0),fe}}),Ae),Ae.$$click=()=>R(),o(X,L(G,{when:!0,get children(){var fe=Pb(),xe=fe.firstChild,$e=xe.firstChild,ke=$e.nextSibling,Be=ke.nextSibling,Pe=xe.nextSibling,Le=Pe.firstChild,Oe=Le.nextSibling,Fe=Oe.nextSibling;return xe.$$click=()=>$("marketplace"),o(Be,()=>Gs.length),Pe.$$click=()=>$("custom"),o(Fe,()=>k().length),ie(je=>{var Ke=`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all flex items-center justify-center gap-2 ${E()==="marketplace"?"shadow-sm":"hover:opacity-80"}`,Te=E()==="marketplace"?"var(--bg-tertiary)":"transparent",Ge=E()==="marketplace"?"var(--accent-primary)":"var(--text-secondary)",Ie=`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all flex items-center justify-center gap-2 ${E()==="custom"?"shadow-sm":"hover:opacity-80"}`,We=E()==="custom"?"var(--bg-tertiary)":"transparent",Ye=E()==="custom"?"var(--accent-primary)":"var(--text-secondary)";return Ke!==je.e&&ze(xe,je.e=Ke),Te!==je.t&&ce(xe,"background",je.t=Te),Ge!==je.a&&ce(xe,"color",je.a=Ge),Ie!==je.o&&ze(Pe,je.o=Ie),We!==je.i&&ce(Pe,"background",je.i=We),Ye!==je.n&&ce(Pe,"color",je.n=Ye),je},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),fe}}),Ce),o(ge,()=>z().total),o(Se,()=>z().installed),o(ye,()=>z().available),he.$$input=fe=>r(fe.currentTarget.value),o(me,L(He,{get each(){return w()},children:fe=>(()=>{var xe=jb();return xe.$$click=()=>h(fe),o(xe,fe==="all"?"All Categories":fe),ie($e=>{var ke=`px-4 py-2 rounded-lg text-sm font-medium transition-all ${i()===fe?"bg-gradient-to-r from-cyan-500/20 to-blue-500/20 border border-cyan-500/40":"bg-white/5 border border-transparent hover:border-white/10"}`,Be=i()===fe?fe==="all"?"var(--accent-primary)":ur[fe]||"var(--accent-primary)":"var(--text-secondary)";return ke!==$e.e&&ze(xe,$e.e=ke),Be!==$e.t&&ce(xe,"color",$e.t=Be),$e},{e:void 0,t:void 0}),xe})()})),o(X,L(G,{get when(){return Re(()=>E()==="custom")()&&k().length===0},get children(){var fe=Ib(),xe=fe.firstChild;xe.firstChild;var $e=xe.nextSibling,ke=$e.nextSibling,Be=ke.nextSibling;return Be.$$click=()=>D(!0),fe}}),null),o(X,L(hi,{get children(){return[L(ir,{get when(){return c()==="card"},get children(){return L(se,{})}}),L(ir,{get when(){return c()==="list"},get children(){return L(ee,{})}}),L(ir,{get when(){return c()==="grid"},get children(){return L(ae,{})}})]}}),null),o(X,L(it,{get isOpen(){return s()},onClose:()=>l(!1),get title(){return`Install ${_()?.displayName}`},get children(){var fe=Nb(),xe=fe.firstChild,$e=xe.nextSibling,ke=$e.firstChild,Be=ke.firstChild,Pe=Be.nextSibling,Le=ke.nextSibling,Oe=Le.firstChild,Fe=Oe.nextSibling,je=Le.nextSibling,Ke=je.firstChild,Te=Ke.nextSibling,Ge=$e.nextSibling,Ie=Ge.firstChild,We=Ie.nextSibling,Ye=Ge.nextSibling,Ze=Ye.firstChild,rt=Ze.nextSibling;return o(xe,()=>_()?.description),o(fe,L(G,{get when(){return _()?.name==="k3d"||_()?.name==="kind"||_()?.name==="minikube"},get children(){var ot=Bb(),Ct=ot.firstChild,Ht=Ct.firstChild,rr=Ht.nextSibling,hr=rr.firstChild,Ee=hr.nextSibling,Ue=Ee.nextSibling;return Ue.nextSibling,ot}}),$e),o(Pe,()=>_()?.chartName),o(Fe,()=>_()?.version),o(Te,()=>_()?.chartRepo),We.$$input=ot=>g(ot.currentTarget.value),Ze.$$click=()=>l(!1),rt.$$click=te,o(rt,L(G,{get when(){return m()},get children(){return Ob()}}),null),o(rt,()=>m()?"Installing...":"Install",null),ie(()=>rt.disabled=m()),ie(()=>We.value=u()),fe}}),null),o(X,L(it,{get isOpen(){return B()},onClose:()=>D(!1),title:"Add Custom App",get children(){var fe=Hb(),xe=fe.firstChild,$e=xe.nextSibling,ke=$e.firstChild,Be=ke.firstChild;Be.nextSibling;var Pe=ke.nextSibling,Le=$e.nextSibling,Oe=Le.firstChild,Fe=Oe.nextSibling,je=Le.nextSibling,Ke=je.firstChild,Te=Ke.firstChild;Te.nextSibling;var Ge=Ke.nextSibling,Ie=je.nextSibling,We=Ie.firstChild,Ye=We.firstChild;Ye.nextSibling;var Ze=We.nextSibling,rt=Ie.nextSibling,ot=rt.firstChild,Ct=ot.firstChild,Ht=Ct.nextSibling,rr=ot.nextSibling,hr=rr.firstChild,Ee=hr.nextSibling,Ue=rt.nextSibling,nt=Ue.firstChild,ct=nt.nextSibling,dt=Ue.nextSibling,Qe=dt.firstChild,yt=Qe.nextSibling;return Pe.$$input=ht=>A(kt=>({...kt,name:ht.currentTarget.value})),Fe.$$input=ht=>A(kt=>({...kt,displayName:ht.currentTarget.value})),Ge.$$input=ht=>A(kt=>({...kt,chartRepo:ht.currentTarget.value})),Ze.$$input=ht=>A(kt=>({...kt,chartName:ht.currentTarget.value})),Ht.addEventListener("change",ht=>A(kt=>({...kt,category:ht.currentTarget.value}))),Ee.$$input=ht=>A(kt=>({...kt,version:ht.currentTarget.value})),ct.$$input=ht=>A(kt=>({...kt,description:ht.currentTarget.value})),Qe.$$click=()=>D(!1),yt.$$click=V,ie(()=>Pe.value=I().name),ie(()=>Fe.value=I().displayName),ie(()=>Ge.value=I().chartRepo),ie(()=>Ze.value=I().chartName),ie(()=>Ht.value=I().category),ie(()=>Ee.value=I().version),ie(()=>ct.value=I().description),fe}}),null),ie(()=>he.value=t()),X})()};et(["click","input"]);var Vb=T('<div class="flex items-center justify-center min-h-screen"style=background:var(--bg-primary)><div class="max-w-2xl mx-auto p-8 text-center"><div class=mb-6><h1 class="text-4xl font-bold mb-4"style=color:var(--text-primary)></h1><p class="text-lg mb-6"style=color:var(--text-secondary)></p></div><div class="mt-8 pt-8 border-t"style=border-color:var(--border-color)><p class=text-sm style=color:var(--text-muted)>This feature is under active development. Check back soon for updates!'),Wb=T('<div class="inline-flex items-center justify-center w-20 h-20 rounded-full mb-4"style=background:var(--bg-secondary)><svg class="w-10 h-10"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2>'),qb=T('<div class="inline-flex items-center gap-2 px-4 py-2 rounded-full mb-8"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span class="text-sm font-medium"style=color:var(--text-primary)>Coming Soon'),Kb=T('<div class="text-left space-y-3"><h2 class="text-xl font-semibold mb-4"style=color:var(--text-primary)>Planned Features:</h2><ul class=space-y-2>'),Yb=T('<li class="flex items-start gap-3"><svg class="w-5 h-5 mt-0.5 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span style=color:var(--text-secondary)>');const Mi=e=>(()=>{var t=Vb(),r=t.firstChild,i=r.firstChild,h=i.firstChild,_=h.nextSibling,f=i.nextSibling;return f.firstChild,o(i,(()=>{var s=Re(()=>!!e.icon);return()=>s()&&(()=>{var l=Wb(),u=l.firstChild,g=u.firstChild;return ie(()=>Xe(g,"d",e.icon)),l})()})(),h),o(h,()=>e.title),o(_,()=>e.description),o(r,(()=>{var s=Re(()=>!!e.comingSoon);return()=>s()&&(()=>{var l=qb(),u=l.firstChild;return u.nextSibling,l})()})(),f),o(r,(()=>{var s=Re(()=>!!(e.features&&e.features.length>0));return()=>s()&&(()=>{var l=Kb(),u=l.firstChild,g=u.nextSibling;return o(g,()=>e.features.map(p=>(()=>{var b=Yb(),m=b.firstChild,C=m.nextSibling;return o(C,p),b})())),l})()})(),f),t})();var Gb=T('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading PersistentVolumes...'),Jb=T('<div class="p-8 text-center"style=color:var(--text-muted)><p>No PersistentVolumes found'),Xb=T('<div class=overflow-x-auto><table class=w-full><thead style=background:var(--bg-secondary)><tr><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Name</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Capacity</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Access Modes</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Reclaim Policy</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Status</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Storage Class</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Claim</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Actions</th></tr></thead><tbody>'),Xi=T('<div class="card overflow-hidden">'),Zb=T('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading PersistentVolumeClaims...'),Qb=T('<div class="p-8 text-center"style=color:var(--text-muted)><p>No PersistentVolumeClaims found'),ey=T('<div class=overflow-x-auto><table class=w-full><thead style=background:var(--bg-secondary)><tr><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Name</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Namespace</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Status</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Volume</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Capacity</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Access Modes</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Storage Class</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Actions</th></tr></thead><tbody>'),ty=T('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading StorageClasses...'),ry=T('<div class="p-8 text-center"style=color:var(--text-muted)><p>No StorageClasses found'),sy=T('<div class=overflow-x-auto><table class=w-full><thead style=background:var(--bg-secondary)><tr><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Name</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Provisioner</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Reclaim Policy</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Volume Binding Mode</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Allow Volume Expansion</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Actions</th></tr></thead><tbody>'),Ul=T('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading YAML...'),iy=T('<div class="space-y-6 p-6"style=minHeight:100vh;background:var(--bg-primary)><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-3xl font-bold"style=color:var(--text-primary)>Storage</h1><p style=color:var(--text-secondary)>Manage PersistentVolumes, PersistentVolumeClaims, and StorageClasses</p></div></div><div class="flex gap-2 border-b"style=border-color:var(--border-color)><button>PersistentVolumes (<!>)</button><button>PersistentVolumeClaims (<!>)</button><button>StorageClasses (<!>)'),ny=T('<tr class=border-t style=border-color:var(--border-color)><td class="px-4 py-3 text-sm"style=color:var(--text-primary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"><span class="px-2 py-1 rounded text-xs font-medium"></span></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm">'),ly=T('<tr class=border-t style=border-color:var(--border-color)><td class="px-4 py-3 text-sm"style=color:var(--text-primary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"><span class="px-2 py-1 rounded text-xs font-medium"></span></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm">'),oy=T('<tr class=border-t style=border-color:var(--border-color)><td class="px-4 py-3 text-sm"style=color:var(--text-primary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm">'),ay=T("<span class=text-green-500>Yes"),cy=T("<span class=text-gray-500>No");const dy=()=>{const[e,t]=J("pvs"),[r,i]=J(null),[h,_]=J(null),[f,s]=J(null),[l,u]=J(!1),[g,p]=J(!1),[b,m]=J(""),[C,y]=J(!1),[n,{refetch:d}]=qe(async()=>{try{const k=await fetch("/api/storage/persistentvolumes");if(!k.ok)throw new Error("Failed to fetch PVs");const O=await k.json();return Array.isArray(O)?O:[]}catch(k){return console.error("Failed to fetch PVs:",k),[]}}),[a,{refetch:c}]=qe(()=>tt(),async k=>{try{const O=k==="_all"?void 0:k,B=await fetch(`/api/storage/persistentvolumeclaims${O?`?namespace=${O}`:""}`);if(!B.ok)throw new Error("Failed to fetch PVCs");const D=await B.json();return Array.isArray(D)?D:[]}catch(O){return console.error("Failed to fetch PVCs:",O),[]}}),[v,{refetch:x}]=qe(async()=>{try{const k=await fetch("/api/storage/storageclasses");if(!k.ok)throw new Error("Failed to fetch StorageClasses");const O=await k.json();return Array.isArray(O)?O:[]}catch(k){return console.error("Failed to fetch StorageClasses:",k),[]}}),S=async(k,O,B)=>{y(!0);try{let D="";k==="pv"?D=(await De.getPVYAML(O)).yaml||"":k==="pvc"?D=(await De.getPVCYAML(O,B||"default")).yaml||"":k==="sc"&&(D=(await De.getStorageClassYAML(O)).yaml||""),m(D)}catch(D){Ve(`Failed to load YAML: ${D instanceof Error?D.message:"Unknown error"}`,"error")}finally{y(!1)}},E=async k=>{try{e()==="pvs"&&r()?(await De.updatePV(r().name,k),Ve(`â PersistentVolume ${r().name} updated successfully`,"success"),d()):e()==="pvcs"&&h()?(await De.updatePVC(h().name,h().namespace||"default",k),Ve(`â PersistentVolumeClaim ${h().name} updated successfully`,"success"),c()):e()==="storageclasses"&&f()&&(await De.updateStorageClass(f().name,k),Ve(`â StorageClass ${f().name} updated successfully`,"success"),x()),p(!1)}catch(O){throw Ve(`â Failed to update: ${O instanceof Error?O.message:"Unknown error"}`,"error"),O}},$=async(k,O,B)=>{if(confirm(`Are you sure you want to delete ${O}?`))try{k==="pv"?(await De.deletePV(O),Ve(`â PersistentVolume ${O} deleted successfully`,"success"),d()):k==="pvc"?(await De.deletePVC(O,B||"default"),Ve(`â PersistentVolumeClaim ${O} deleted successfully`,"success"),c()):k==="sc"&&(await De.deleteStorageClass(O),Ve(`â StorageClass ${O} deleted successfully`,"success"),x())}catch(D){Ve(`â Failed to delete: ${D instanceof Error?D.message:"Unknown error"}`,"error")}};return(()=>{var k=iy(),O=k.firstChild,B=O.firstChild,D=B.firstChild;D.nextSibling;var I=O.nextSibling,A=I.firstChild,P=A.firstChild,R=P.nextSibling;R.nextSibling;var N=A.nextSibling,w=N.firstChild,H=w.nextSibling;H.nextSibling;var z=N.nextSibling,U=z.firstChild,te=U.nextSibling;return te.nextSibling,A.$$click=()=>t("pvs"),o(A,()=>n()?.length||0,R),N.$$click=()=>t("pvcs"),o(N,()=>a()?.length||0,H),z.$$click=()=>t("storageclasses"),o(z,()=>v()?.length||0,te),o(k,L(G,{get when(){return e()==="pvs"},get children(){var F=Xi();return o(F,L(G,{get when(){return n.loading},get children(){var W=Gb(),V=W.firstChild;return V.nextSibling,W}}),null),o(F,L(G,{get when(){return Re(()=>!n.loading)()&&(!n()||n().length===0)},get children(){return Jb()}}),null),o(F,L(G,{get when(){return Re(()=>!!(!n.loading&&n()))()&&n().length>0},get children(){var W=Xb(),V=W.firstChild,de=V.firstChild,M=de.firstChild,j=M.firstChild,K=j.nextSibling,Z=K.nextSibling,se=Z.nextSibling,ee=se.nextSibling,ae=ee.nextSibling,X=ae.nextSibling;X.nextSibling;var q=de.nextSibling;return o(q,L(He,{get each(){return n()},children:ne=>(()=>{var Y=ny(),re=Y.firstChild,Q=re.nextSibling,ve=Q.nextSibling,Ae=ve.nextSibling,Ce=Ae.nextSibling,we=Ce.firstChild,_e=Ce.nextSibling,ge=_e.nextSibling,le=ge.nextSibling;return o(re,()=>ne.name),o(Q,()=>ne.capacity||"N/A"),o(ve,(()=>{var ue=Re(()=>!!Array.isArray(ne.accessModes));return()=>ue()?ne.accessModes.join(", "):ne.accessModes||"N/A"})()),o(Ae,()=>ne.reclaimPolicy||"N/A"),o(we,()=>ne.status||"Unknown"),o(_e,()=>ne.storageClass||"N/A"),o(ge,()=>ne.claim||"-"),o(le,L(Dt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{i(ne),S("pv",ne.name),u(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{i(ne),S("pv",ne.name),p(!0)}},{label:"Delete",icon:"delete",onClick:()=>$("pv",ne.name),variant:"danger",divider:!0}]})),ie(ue=>{var Se=ne.status==="Bound"?"#10b98120":ne.status==="Available"?"#3b82f620":"#ef444420",be=ne.status==="Bound"?"#10b981":ne.status==="Available"?"#3b82f6":"#ef4444";return Se!==ue.e&&ce(we,"background",ue.e=Se),be!==ue.t&&ce(we,"color",ue.t=be),ue},{e:void 0,t:void 0}),Y})()})),W}}),null),F}}),null),o(k,L(G,{get when(){return e()==="pvcs"},get children(){var F=Xi();return o(F,L(G,{get when(){return a.loading},get children(){var W=Zb(),V=W.firstChild;return V.nextSibling,W}}),null),o(F,L(G,{get when(){return Re(()=>!a.loading)()&&(!a()||Array.isArray(a())&&a().length===0)},get children(){return Qb()}}),null),o(F,L(G,{get when(){return Re(()=>!!(!a.loading&&a()&&Array.isArray(a())))()&&a().length>0},get children(){var W=ey(),V=W.firstChild,de=V.firstChild,M=de.firstChild,j=M.firstChild,K=j.nextSibling,Z=K.nextSibling,se=Z.nextSibling,ee=se.nextSibling,ae=ee.nextSibling,X=ae.nextSibling;X.nextSibling;var q=de.nextSibling;return o(q,L(He,{get each(){return a()},children:ne=>(()=>{var Y=ly(),re=Y.firstChild,Q=re.nextSibling,ve=Q.nextSibling,Ae=ve.firstChild,Ce=ve.nextSibling,we=Ce.nextSibling,_e=we.nextSibling,ge=_e.nextSibling,le=ge.nextSibling;return o(re,()=>ne.name),o(Q,()=>ne.namespace||"default"),o(Ae,()=>ne.status||"Unknown"),o(Ce,()=>ne.volume||"-"),o(we,()=>ne.capacity||"N/A"),o(_e,(()=>{var ue=Re(()=>!!Array.isArray(ne.accessModes));return()=>ue()?ne.accessModes.join(", "):ne.accessModes||"N/A"})()),o(ge,()=>ne.storageClass||"N/A"),o(le,L(Dt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{_(ne),S("pvc",ne.name,ne.namespace),u(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{_(ne),S("pvc",ne.name,ne.namespace),p(!0)}},{label:"Delete",icon:"delete",onClick:()=>$("pvc",ne.name,ne.namespace),variant:"danger",divider:!0}]})),ie(ue=>{var Se=ne.status==="Bound"?"#10b98120":"#ef444420",be=ne.status==="Bound"?"#10b981":"#ef4444";return Se!==ue.e&&ce(Ae,"background",ue.e=Se),be!==ue.t&&ce(Ae,"color",ue.t=be),ue},{e:void 0,t:void 0}),Y})()})),W}}),null),F}}),null),o(k,L(G,{get when(){return e()==="storageclasses"},get children(){var F=Xi();return o(F,L(G,{get when(){return v.loading},get children(){var W=ty(),V=W.firstChild;return V.nextSibling,W}}),null),o(F,L(G,{get when(){return Re(()=>!v.loading)()&&(!v()||v().length===0)},get children(){return ry()}}),null),o(F,L(G,{get when(){return Re(()=>!!(!v.loading&&v()))()&&v().length>0},get children(){var W=sy(),V=W.firstChild,de=V.firstChild,M=de.firstChild,j=M.firstChild,K=j.nextSibling,Z=K.nextSibling,se=Z.nextSibling,ee=se.nextSibling;ee.nextSibling;var ae=de.nextSibling;return o(ae,L(He,{get each(){return v()},children:X=>(()=>{var q=oy(),ne=q.firstChild,Y=ne.nextSibling,re=Y.nextSibling,Q=re.nextSibling,ve=Q.nextSibling,Ae=ve.nextSibling;return o(ne,()=>X.name),o(Y,()=>X.provisioner||"N/A"),o(re,()=>X.reclaimPolicy||"N/A"),o(Q,()=>X.volumeBindingMode||"N/A"),o(ve,(()=>{var Ce=Re(()=>!!X.allowVolumeExpansion);return()=>Ce()?ay():cy()})()),o(Ae,L(Dt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{s(X),S("sc",X.name),u(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{s(X),S("sc",X.name),p(!0)}},{label:"Delete",icon:"delete",onClick:()=>$("sc",X.name),variant:"danger",divider:!0}]})),q})()})),W}}),null),F}}),null),o(k,L(G,{get when(){return l()},get children(){return L(it,{size:"large",get title(){return`View YAML - ${e()==="pvs"?r()?.name:e()==="pvcs"?h()?.name:f()?.name}`},onClose:()=>{u(!1),i(null),_(null),s(null)},get children(){return L(G,{get when(){return C()},get fallback(){return L(tr,{get content(){return b()}})},get children(){var F=Ul(),W=F.firstChild;return W.nextSibling,F}})}})}}),null),o(k,L(G,{get when(){return g()},get children(){return L(it,{size:"large",get title(){return`Edit YAML - ${e()==="pvs"?r()?.name:e()==="pvcs"?h()?.name:f()?.name}`},onClose:()=>{p(!1),i(null),_(null),s(null)},get children(){return L(G,{get when(){return C()},get fallback(){return L(cr,{get content(){return b()},onSave:E,onCancel:()=>p(!1)})},get children(){var F=Ul(),W=F.firstChild;return W.nextSibling,F}})}})}}),null),ie(F=>{var W=`px-4 py-2 font-medium transition-colors ${e()==="pvs"?"border-b-2":""}`,V=e()==="pvs"?"var(--accent-primary)":"var(--text-secondary)",de=e()==="pvs"?"var(--accent-primary)":"transparent",M=`px-4 py-2 font-medium transition-colors ${e()==="pvcs"?"border-b-2":""}`,j=e()==="pvcs"?"var(--accent-primary)":"var(--text-secondary)",K=e()==="pvcs"?"var(--accent-primary)":"transparent",Z=`px-4 py-2 font-medium transition-colors ${e()==="storageclasses"?"border-b-2":""}`,se=e()==="storageclasses"?"var(--accent-primary)":"var(--text-secondary)",ee=e()==="storageclasses"?"var(--accent-primary)":"transparent";return W!==F.e&&ze(A,F.e=W),V!==F.t&&ce(A,"color",F.t=V),de!==F.a&&ce(A,"border-bottom-color",F.a=de),M!==F.o&&ze(N,F.o=M),j!==F.i&&ce(N,"color",F.i=j),K!==F.n&&ce(N,"border-bottom-color",F.n=K),Z!==F.s&&ze(z,F.s=Z),se!==F.h&&ce(z,"color",F.h=se),ee!==F.r&&ce(z,"border-bottom-color",F.r=ee),F},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),k})()};et(["click"]);var hy=T('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading Roles...'),uy=T('<div class="p-8 text-center"style=color:var(--text-muted)><p>No Roles found'),fy=T('<div class=overflow-x-auto><table class=w-full><thead style=background:var(--bg-secondary)><tr><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Name</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Namespace</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Rules</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Age</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Actions</th></tr></thead><tbody>'),Js=T('<div class="card overflow-hidden">'),gy=T('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading RoleBindings...'),py=T('<div class="p-8 text-center"style=color:var(--text-muted)><p>No RoleBindings found'),vy=T('<div class=overflow-x-auto><table class=w-full><thead style=background:var(--bg-secondary)><tr><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Name</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Namespace</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Role Ref</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Subjects</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Age</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Actions</th></tr></thead><tbody>'),my=T('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading ClusterRoles...'),_y=T('<div class="p-8 text-center"style=color:var(--text-muted)><p>No ClusterRoles found'),by=T('<div class=overflow-x-auto><table class=w-full><thead style=background:var(--bg-secondary)><tr><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Name</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Rules</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Age</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Actions</th></tr></thead><tbody>'),yy=T('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading ClusterRoleBindings...'),xy=T('<div class="p-8 text-center"style=color:var(--text-muted)><p>No ClusterRoleBindings found'),$y=T('<div class=overflow-x-auto><table class=w-full><thead style=background:var(--bg-secondary)><tr><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Name</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Role Ref</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Subjects</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Age</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Actions</th></tr></thead><tbody>'),Vl=T('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading YAML...'),wy=T('<div class="space-y-6 p-6"style=minHeight:100vh;background:var(--bg-primary)><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-3xl font-bold"style=color:var(--text-primary)>RBAC</h1><p style=color:var(--text-secondary)>Manage Roles, RoleBindings, ClusterRoles, and ClusterRoleBindings</p></div></div><div class="flex gap-2 border-b"style=border-color:var(--border-color)><button>Roles (<!>)</button><button>RoleBindings (<!>)</button><button>ClusterRoles (<!>)</button><button>ClusterRoleBindings (<!>)'),Wl=T('<tr class=border-t style=border-color:var(--border-color)><td class="px-4 py-3 text-sm"style=color:var(--text-primary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm">'),Sy=T('<tr class=border-t style=border-color:var(--border-color)><td class="px-4 py-3 text-sm"style=color:var(--text-primary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm">'),Cy=T('<tr class=border-t style=border-color:var(--border-color)><td class="px-4 py-3 text-sm"style=color:var(--text-primary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm">');const ky=()=>{const[e,t]=J("roles"),[r,i]=J(null),[h,_]=J(null),[f,s]=J(null),[l,u]=J(null),[g,p]=J(!1),[b,m]=J(!1),[C,y]=J(""),[n,d]=J(!1),[a]=qe(()=>tt(),async S=>{try{const E=S==="_all"?void 0:S,$=await fetch(`/api/rbac/roles${E?`?namespace=${E}`:""}`);if(!$.ok)throw new Error("Failed to fetch Roles");const k=await $.json();return Array.isArray(k)?k:[]}catch(E){return console.error("Failed to fetch Roles:",E),[]}}),[c]=qe(()=>tt(),async S=>{try{const E=S==="_all"?void 0:S,$=await fetch(`/api/rbac/rolebindings${E?`?namespace=${E}`:""}`);if(!$.ok)throw new Error("Failed to fetch RoleBindings");const k=await $.json();return Array.isArray(k)?k:[]}catch(E){return console.error("Failed to fetch RoleBindings:",E),[]}}),[v]=qe(async()=>{try{const S=await fetch("/api/rbac/clusterroles");if(!S.ok)throw new Error("Failed to fetch ClusterRoles");const E=await S.json();return Array.isArray(E)?E:[]}catch(S){return console.error("Failed to fetch ClusterRoles:",S),[]}}),[x]=qe(async()=>{try{const S=await fetch("/api/rbac/clusterrolebindings");if(!S.ok)throw new Error("Failed to fetch ClusterRoleBindings");const E=await S.json();return Array.isArray(E)?E:[]}catch(S){return console.error("Failed to fetch ClusterRoleBindings:",S),[]}});return(()=>{var S=wy(),E=S.firstChild,$=E.firstChild,k=$.firstChild;k.nextSibling;var O=E.nextSibling,B=O.firstChild,D=B.firstChild,I=D.nextSibling;I.nextSibling;var A=B.nextSibling,P=A.firstChild,R=P.nextSibling;R.nextSibling;var N=A.nextSibling,w=N.firstChild,H=w.nextSibling;H.nextSibling;var z=N.nextSibling,U=z.firstChild,te=U.nextSibling;return te.nextSibling,B.$$click=()=>t("roles"),o(B,()=>a()?.length||0,I),A.$$click=()=>t("rolebindings"),o(A,()=>c()?.length||0,R),N.$$click=()=>t("clusterroles"),o(N,()=>v()?.length||0,H),z.$$click=()=>t("clusterrolebindings"),o(z,()=>x()?.length||0,te),o(S,L(G,{get when(){return e()==="roles"},get children(){var F=Js();return o(F,L(G,{get when(){return a.loading},get children(){var W=hy(),V=W.firstChild;return V.nextSibling,W}}),null),o(F,L(G,{get when(){return Re(()=>!a.loading)()&&(!a()||a().length===0)},get children(){return uy()}}),null),o(F,L(G,{get when(){return Re(()=>!!(!a.loading&&a()))()&&a().length>0},get children(){var W=fy(),V=W.firstChild,de=V.firstChild,M=de.firstChild,j=M.firstChild,K=j.nextSibling,Z=K.nextSibling,se=Z.nextSibling;se.nextSibling;var ee=de.nextSibling;return o(ee,L(He,{get each(){return a()},children:ae=>(()=>{var X=Wl(),q=X.firstChild,ne=q.nextSibling,Y=ne.nextSibling,re=Y.nextSibling,Q=re.nextSibling;return o(q,()=>ae.name),o(ne,()=>ae.namespace||"default"),o(Y,()=>ae.rules||0),o(re,()=>ae.age||"N/A"),o(Q,L(Dt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{i(ae),loadYAML("role",ae.name,ae.namespace),p(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{i(ae),loadYAML("role",ae.name,ae.namespace),m(!0)}},{label:"Delete",icon:"delete",onClick:()=>handleDelete("role",ae.name,ae.namespace),variant:"danger",divider:!0}]})),X})()})),W}}),null),F}}),null),o(S,L(G,{get when(){return e()==="rolebindings"},get children(){var F=Js();return o(F,L(G,{get when(){return c.loading},get children(){var W=gy(),V=W.firstChild;return V.nextSibling,W}}),null),o(F,L(G,{get when(){return Re(()=>!c.loading)()&&(!c()||c().length===0)},get children(){return py()}}),null),o(F,L(G,{get when(){return Re(()=>!!(!c.loading&&c()))()&&c().length>0},get children(){var W=vy(),V=W.firstChild,de=V.firstChild,M=de.firstChild,j=M.firstChild,K=j.nextSibling,Z=K.nextSibling,se=Z.nextSibling,ee=se.nextSibling;ee.nextSibling;var ae=de.nextSibling;return o(ae,L(He,{get each(){return c()},children:X=>(()=>{var q=Sy(),ne=q.firstChild,Y=ne.nextSibling,re=Y.nextSibling,Q=re.nextSibling,ve=Q.nextSibling,Ae=ve.nextSibling;return o(ne,()=>X.name),o(Y,()=>X.namespace||"default"),o(re,()=>X.roleRef||"N/A"),o(Q,()=>X.subjects||0),o(ve,()=>X.age||"N/A"),o(Ae,L(Dt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{_(X),loadYAML("rb",X.name,X.namespace),p(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{_(X),loadYAML("rb",X.name,X.namespace),m(!0)}},{label:"Delete",icon:"delete",onClick:()=>handleDelete("rb",X.name,X.namespace),variant:"danger",divider:!0}]})),q})()})),W}}),null),F}}),null),o(S,L(G,{get when(){return e()==="clusterroles"},get children(){var F=Js();return o(F,L(G,{get when(){return v.loading},get children(){var W=my(),V=W.firstChild;return V.nextSibling,W}}),null),o(F,L(G,{get when(){return Re(()=>!v.loading)()&&(!v()||v().length===0)},get children(){return _y()}}),null),o(F,L(G,{get when(){return Re(()=>!!(!v.loading&&v()))()&&v().length>0},get children(){var W=by(),V=W.firstChild,de=V.firstChild,M=de.firstChild,j=M.firstChild,K=j.nextSibling,Z=K.nextSibling;Z.nextSibling;var se=de.nextSibling;return o(se,L(He,{get each(){return v()},children:ee=>(()=>{var ae=Cy(),X=ae.firstChild,q=X.nextSibling,ne=q.nextSibling,Y=ne.nextSibling;return o(X,()=>ee.name),o(q,()=>ee.rules||0),o(ne,()=>ee.age||"N/A"),o(Y,L(Dt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{s(ee),loadYAML("cr",ee.name),p(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{s(ee),loadYAML("cr",ee.name),m(!0)}},{label:"Delete",icon:"delete",onClick:()=>handleDelete("cr",ee.name),variant:"danger",divider:!0}]})),ae})()})),W}}),null),F}}),null),o(S,L(G,{get when(){return e()==="clusterrolebindings"},get children(){var F=Js();return o(F,L(G,{get when(){return x.loading},get children(){var W=yy(),V=W.firstChild;return V.nextSibling,W}}),null),o(F,L(G,{get when(){return Re(()=>!x.loading)()&&(!x()||x().length===0)},get children(){return xy()}}),null),o(F,L(G,{get when(){return Re(()=>!!(!x.loading&&x()))()&&x().length>0},get children(){var W=$y(),V=W.firstChild,de=V.firstChild,M=de.firstChild,j=M.firstChild,K=j.nextSibling,Z=K.nextSibling,se=Z.nextSibling;se.nextSibling;var ee=de.nextSibling;return o(ee,L(He,{get each(){return x()},children:ae=>(()=>{var X=Wl(),q=X.firstChild,ne=q.nextSibling,Y=ne.nextSibling,re=Y.nextSibling,Q=re.nextSibling;return o(q,()=>ae.name),o(ne,()=>ae.roleRef||"N/A"),o(Y,()=>ae.subjects||0),o(re,()=>ae.age||"N/A"),o(Q,L(Dt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{u(ae),loadYAML("crb",ae.name),p(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{u(ae),loadYAML("crb",ae.name),m(!0)}},{label:"Delete",icon:"delete",onClick:()=>handleDelete("crb",ae.name),variant:"danger",divider:!0}]})),X})()})),W}}),null),F}}),null),o(S,L(G,{get when(){return g()},get children(){return L(it,{size:"large",get title(){return`View YAML - ${e()==="roles"?r()?.name:e()==="rolebindings"?h()?.name:e()==="clusterroles"?f()?.name:l()?.name}`},onClose:()=>{p(!1),i(null),_(null),s(null),u(null)},get children(){return L(G,{get when(){return n()},get fallback(){return L(tr,{get content(){return C()}})},get children(){var F=Vl(),W=F.firstChild;return W.nextSibling,F}})}})}}),null),o(S,L(G,{get when(){return b()},get children(){return L(it,{size:"large",get title(){return`Edit YAML - ${e()==="roles"?r()?.name:e()==="rolebindings"?h()?.name:e()==="clusterroles"?f()?.name:l()?.name}`},onClose:()=>{m(!1),i(null),_(null),s(null),u(null)},get children(){return L(G,{get when(){return n()},get fallback(){return L(cr,{get content(){return C()},onSave:handleSaveYAML,onCancel:()=>m(!1)})},get children(){var F=Vl(),W=F.firstChild;return W.nextSibling,F}})}})}}),null),ie(F=>{var W=`px-4 py-2 font-medium transition-colors ${e()==="roles"?"border-b-2":""}`,V=e()==="roles"?"var(--accent-primary)":"var(--text-secondary)",de=e()==="roles"?"var(--accent-primary)":"transparent",M=`px-4 py-2 font-medium transition-colors ${e()==="rolebindings"?"border-b-2":""}`,j=e()==="rolebindings"?"var(--accent-primary)":"var(--text-secondary)",K=e()==="rolebindings"?"var(--accent-primary)":"transparent",Z=`px-4 py-2 font-medium transition-colors ${e()==="clusterroles"?"border-b-2":""}`,se=e()==="clusterroles"?"var(--accent-primary)":"var(--text-secondary)",ee=e()==="clusterroles"?"var(--accent-primary)":"transparent",ae=`px-4 py-2 font-medium transition-colors ${e()==="clusterrolebindings"?"border-b-2":""}`,X=e()==="clusterrolebindings"?"var(--accent-primary)":"var(--text-secondary)",q=e()==="clusterrolebindings"?"var(--accent-primary)":"transparent";return W!==F.e&&ze(B,F.e=W),V!==F.t&&ce(B,"color",F.t=V),de!==F.a&&ce(B,"border-bottom-color",F.a=de),M!==F.o&&ze(A,F.o=M),j!==F.i&&ce(A,"color",F.i=j),K!==F.n&&ce(A,"border-bottom-color",F.n=K),Z!==F.s&&ze(N,F.s=Z),se!==F.h&&ce(N,"color",F.h=se),ee!==F.r&&ce(N,"border-bottom-color",F.r=ee),ae!==F.d&&ze(z,F.d=ae),X!==F.l&&ce(z,"color",F.l=X),q!==F.u&&ce(z,"border-bottom-color",F.u=q),F},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0}),S})()};et(["click"]);const Ay=()=>L(Mi,{title:"Network Policies",description:"View and manage Kubernetes Network Policies for controlling pod-to-pod communication.",icon:"M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z",comingSoon:!1,features:["View network policies","Policy visualization","Ingress/Egress rules","Pod selector matching","Policy testing"]});var My=T('<div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Email</label><input type=email class="w-full px-4 py-2 rounded-lg"placeholder=your@email.com style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)">'),Ey=T('<div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Role</label><select class="w-full px-4 py-2 rounded-lg"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=viewer>Viewer (Read-only)</option><option value=developer>Developer (Read/Write)</option><option value=admin>Admin (Full Access)</option></select><p class="text-xs mt-1"style=color:var(--text-muted)>Choose your access level'),Ly=T('<div class="mt-6 p-4 rounded-lg text-sm"style="background:var(--bg-tertiary);border:1px solid var(--border-color)"><p class="font-medium mb-2"style=color:var(--text-primary)>â¹ï¸ First Time Setup</p><p style=color:var(--text-secondary)>If this is your first time, create an admin account by clicking "Create one" below, or use the default credentials if configured.'),Ry=T('<div class="fixed inset-0 z-50 flex items-center justify-center"style="background:rgba(0, 0, 0, 0.7)"><div class="card p-8 max-w-md w-full mx-4"style=background:var(--bg-card)><div class=mb-6><h2 class="text-2xl font-bold mb-2"style=color:var(--text-primary)></h2><p class=text-sm style=color:var(--text-secondary)></p></div><form class=space-y-4><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Username</label><input type=text required class="w-full px-4 py-2 rounded-lg"placeholder="Enter username"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Password</label><input type=password required class="w-full px-4 py-2 rounded-lg"placeholder="Enter password"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div><button type=submit class="w-full py-3 rounded-lg font-medium transition-opacity disabled:opacity-50"style=background:var(--accent-primary);color:white></button></form><div class="mt-4 text-center"><button class="text-sm hover:underline"style=color:var(--accent-primary)>');const Dy=e=>{const[t,r]=J(""),[i,h]=J(""),[_,f]=J(!1),[s,l]=J(!1),[u,g]=J(""),[p,b]=J("viewer"),m=async y=>{y.preventDefault(),f(!0);try{const n=await fetch("http://localhost:3001/api/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:t(),password:i()})});if(!n.ok)throw new Error("Invalid credentials");const d=await n.json();localStorage.setItem("kubegraf_token",d.token),localStorage.setItem("kubegraf_user",JSON.stringify(d.user)),Ve(`â Welcome back, ${d.user.username}!`,"success"),e.onLoginSuccess(d.user),e.onClose()}catch(n){Ve(`â Login failed: ${n instanceof Error?n.message:"Unknown error"}`,"error")}finally{f(!1)}},C=async y=>{y.preventDefault(),f(!0);try{const n=await fetch("http://localhost:3001/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t(),password:i(),email:u(),role:p()})});if(!n.ok){const d=await n.text();throw new Error(d||"Registration failed")}Ve("â Account created! Please login.","success"),l(!1),h("")}catch(n){Ve(`â Registration failed: ${n instanceof Error?n.message:"Unknown error"}`,"error")}finally{f(!1)}};return e.isOpen?(()=>{var y=Ry(),n=y.firstChild,d=n.firstChild,a=d.firstChild,c=a.nextSibling,v=d.nextSibling,x=v.firstChild,S=x.firstChild,E=S.nextSibling,$=x.nextSibling,k=$.firstChild,O=k.nextSibling,B=$.nextSibling,D=v.nextSibling,I=D.firstChild;return kr(y,"click",e.onClose,!0),n.$$click=A=>A.stopPropagation(),o(a,()=>s()?"ð Create Account":"ð Login to KubeGraf"),o(c,()=>s()?"Create a new account to access KubeGraf":"Enter your credentials to continue"),kr(v,"submit",s()?C:m),E.$$input=A=>r(A.currentTarget.value),o(v,L(G,{get when(){return s()},get children(){var A=My(),P=A.firstChild,R=P.nextSibling;return R.$$input=N=>g(N.currentTarget.value),ie(N=>{var w=s(),H=_();return w!==N.e&&(R.required=N.e=w),H!==N.t&&(R.disabled=N.t=H),N},{e:void 0,t:void 0}),ie(()=>R.value=u()),A}}),$),O.$$input=A=>h(A.currentTarget.value),o(v,L(G,{get when(){return s()},get children(){var A=Ey(),P=A.firstChild,R=P.nextSibling;return R.nextSibling,R.addEventListener("change",N=>b(N.currentTarget.value)),ie(()=>R.disabled=_()),ie(()=>R.value=p()),A}}),B),o(B,(()=>{var A=Re(()=>!!_());return()=>A()?"â³ Processing...":s()?"ð Create Account":"ð Login"})()),I.$$click=()=>{l(!s()),h(""),g("")},o(I,()=>s()?"â Back to Login":"Don't have an account? Create one â"),o(n,L(G,{get when(){return!s()},get children(){var A=Ly(),P=A.firstChild;return P.nextSibling,A}}),null),ie(A=>{var P=_(),R=_(),N=_(),w=_();return P!==A.e&&(E.disabled=A.e=P),R!==A.t&&(O.disabled=A.t=R),N!==A.a&&(B.disabled=A.a=N),w!==A.o&&(I.disabled=A.o=w),A},{e:void 0,t:void 0,a:void 0,o:void 0}),ie(()=>E.value=t()),ie(()=>O.value=i()),y})():null};et(["click","input"]);var Ty=T('<div class="flex items-center gap-3"><div class=text-right><div class="text-sm font-medium"style=color:var(--text-primary)></div><div class=text-xs style=color:var(--text-secondary)></div></div><button class="px-4 py-2 rounded-lg text-sm"style="background:var(--bg-tertiary);border:1px solid var(--border-color);color:var(--text-primary)">Logout'),Py=T('<div class="p-4 rounded-lg"style="background:var(--bg-tertiary);border:1px solid var(--border-color)"><div class="grid grid-cols-2 gap-4"><div><div class=text-xs style=color:var(--text-muted)>Username</div><div class=font-medium style=color:var(--text-primary)></div></div><div><div class=text-xs style=color:var(--text-muted)>Email</div><div class=font-medium style=color:var(--text-primary)></div></div><div><div class=text-xs style=color:var(--text-muted)>Role</div><div><span class="inline-flex px-2 py-1 rounded text-xs font-medium"></span></div></div><div><div class=text-xs style=color:var(--text-muted)>Status</div><div class="flex items-center gap-2"><span class="w-2 h-2 rounded-full bg-green-500"></span><span class=text-sm style=color:var(--text-primary)>Active'),Iy=T(`<div class="card p-6"><h3 class="text-lg font-semibold mb-4"style=color:var(--text-primary)>ð Quick Setup Guide</h3><div class=space-y-4><div class="flex items-start gap-3"><div class="w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0"style=background:var(--accent-primary);color:white>1</div><div><div class="font-medium mb-1"style=color:var(--text-primary)>Create Admin Account</div><div class=text-sm style=color:var(--text-secondary)>Click "Login" button â "Create one" â Fill details â Select "Admin" role</div></div></div><div class="flex items-start gap-3"><div class="w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0"style=background:var(--accent-primary);color:white>2</div><div><div class="font-medium mb-1"style=color:var(--text-primary)>Login</div><div class=text-sm style=color:var(--text-secondary)>Use your credentials to login â Session valid for 24 hours</div></div></div><div class="flex items-start gap-3"><div class="w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0"style=background:var(--accent-primary);color:white>3</div><div><div class="font-medium mb-1"style=color:var(--text-primary)>Create Additional Users</div><div class=text-sm style=color:var(--text-secondary)>As admin, create accounts for team members with appropriate roles</div></div></div></div><div class="mt-6 p-4 rounded-lg"style="background:var(--bg-tertiary);border:1px solid var(--border-color)"><div class="flex items-start gap-2"><span>ð¡</span><div class=text-sm style=color:var(--text-secondary)><strong>First Time?</strong> If IAM is enabled but you don't have credentials, you'll need to create the first admin account. Click the Login button above to get started.`),By=T('<div class="space-y-6 p-6"><div class="flex items-center justify-between"><div><h1 class="text-3xl font-bold"style=color:var(--text-primary)>ð¥ User Management</h1><p class="text-sm mt-2"style=color:var(--text-secondary)>Manage users, roles, and authentication</p></div></div><div class="card p-6"><div class="flex items-center justify-between mb-4"><div class="flex items-center gap-3"><div class="w-12 h-12 rounded-full flex items-center justify-center"style=background:var(--accent-primary)><span class=text-2xl>ð</span></div><div><h2 class="text-xl font-semibold"style=color:var(--text-primary)>Local IAM System</h2><p class=text-sm style=color:var(--text-secondary)>Identity and Access Management</p></div></div></div></div><div class="card p-6"><h3 class="text-lg font-semibold mb-4"style=color:var(--text-primary)>ð Roles & Permissions</h3><div class=space-y-3><div class="p-4 rounded-lg"style="background:var(--bg-tertiary);border:1px solid var(--border-color)"><div class="flex items-center gap-3 mb-2"><span class="px-2 py-1 rounded text-xs font-medium"style="background:rgba(239, 68, 68, 0.1);color:#ef4444">Admin</span><span class="text-sm font-medium"style=color:var(--text-primary)>Full Access</span></div><p class=text-sm style=color:var(--text-secondary)>Complete control over all resources, users, and settings. Can create/delete users, modify any resource, and access all namespaces.</p></div><div class="p-4 rounded-lg"style="background:var(--bg-tertiary);border:1px solid var(--border-color)"><div class="flex items-center gap-3 mb-2"><span class="px-2 py-1 rounded text-xs font-medium"style="background:rgba(59, 130, 246, 0.1);color:#3b82f6">Developer</span><span class="text-sm font-medium"style=color:var(--text-primary)>Read/Write Access</span></div><p class=text-sm style=color:var(--text-secondary)>Can create, update, and delete pods, deployments, services, and config maps. Can view all resources but cannot manage users or cluster settings.</p></div><div class="p-4 rounded-lg"style="background:var(--bg-tertiary);border:1px solid var(--border-color)"><div class="flex items-center gap-3 mb-2"><span class="px-2 py-1 rounded text-xs font-medium"style="background:rgba(34, 197, 94, 0.1);color:#22c55b">Viewer</span><span class="text-sm font-medium"style=color:var(--text-primary)>Read-Only Access</span></div><p class=text-sm style=color:var(--text-secondary)>Can view all resources, logs, and metrics. Cannot create, update, or delete any resources. Perfect for monitoring and auditing purposes.'),Oy=T('<button class="px-6 py-2 rounded-lg font-medium"style=background:var(--accent-primary);color:white>ð Login');const Ny=()=>{const[e,t]=J(!1),[r,i]=J(null),[h,_]=J(!1);(()=>{const u=localStorage.getItem("kubegraf_token"),g=localStorage.getItem("kubegraf_user");return u&&g?(i(JSON.parse(g)),!0):!1})();const s=()=>{fetch("http://localhost:3001/api/logout",{method:"POST",credentials:"include"}),localStorage.removeItem("kubegraf_token"),localStorage.removeItem("kubegraf_user"),i(null),Ve("ð Logged out successfully","success")},l=u=>{i(u)};return(()=>{var u=By(),g=u.firstChild,p=g.firstChild,b=p.firstChild;b.nextSibling;var m=g.nextSibling,C=m.firstChild,y=C.firstChild,n=y.firstChild,d=n.nextSibling,a=d.firstChild;a.nextSibling;var c=m.nextSibling,v=c.firstChild,x=v.nextSibling,S=x.firstChild,E=S.firstChild,$=E.firstChild;$.nextSibling,E.nextSibling;var k=S.nextSibling,O=k.firstChild,B=O.firstChild;B.nextSibling,O.nextSibling;var D=k.nextSibling,I=D.firstChild,A=I.firstChild;return A.nextSibling,I.nextSibling,o(C,L(G,{get when(){return r()},get fallback(){return(()=>{var P=Oy();return P.$$click=()=>t(!0),P})()},get children(){var P=Ty(),R=P.firstChild,N=R.firstChild,w=N.nextSibling,H=R.nextSibling;return o(N,()=>r()?.username),o(w,()=>r()?.role),H.$$click=s,P}}),null),o(m,L(G,{get when(){return r()},get children(){var P=Py(),R=P.firstChild,N=R.firstChild,w=N.firstChild,H=w.nextSibling,z=N.nextSibling,U=z.firstChild,te=U.nextSibling,F=z.nextSibling,W=F.firstChild,V=W.nextSibling,de=V.firstChild,M=F.nextSibling,j=M.firstChild,K=j.nextSibling,Z=K.firstChild;return Z.nextSibling,o(H,()=>r()?.username),o(te,()=>r()?.email||"Not set"),o(de,()=>r()?.role),ie(se=>{var ee=r()?.role==="admin"?"rgba(239, 68, 68, 0.1)":r()?.role==="developer"?"rgba(59, 130, 246, 0.1)":"rgba(34, 197, 94, 0.1)",ae=r()?.role==="admin"?"#ef4444":r()?.role==="developer"?"#3b82f6":"#22c55b";return ee!==se.e&&ce(de,"background",se.e=ee),ae!==se.t&&ce(de,"color",se.t=ae),se},{e:void 0,t:void 0}),P}}),null),o(u,L(G,{get when(){return!r()},get children(){var P=Iy(),R=P.firstChild,N=R.nextSibling,w=N.firstChild,H=w.firstChild,z=H.nextSibling,U=z.firstChild;U.nextSibling;var te=w.nextSibling,F=te.firstChild,W=F.nextSibling,V=W.firstChild;V.nextSibling;var de=te.nextSibling,M=de.firstChild,j=M.nextSibling,K=j.firstChild;K.nextSibling;var Z=N.nextSibling,se=Z.firstChild,ee=se.firstChild;return ee.nextSibling,P}}),c),o(u,L(Dy,{get isOpen(){return e()},onClose:()=>t(!1),onLoginSuccess:l}),null),u})()};et(["click"]);const Hy={enableDiagnostics:!0,enableCVEVulnerabilities:!0,enableSecurityChecks:!0,enableMLRecommendations:!0,enableEventMonitoring:!0,enableMCP:!0,enableConnectors:!0,enableAnomalyDetection:!0,enableCostAnalysis:!0,enableDriftDetection:!0,enableTopology:!0,enableResourceMap:!0,enableAIChat:!0,enableWebTerminal:!0,enableLogs:!0,enableMetrics:!0,enableAutoRefresh:!0,enableNotifications:!0,enableSoundEffects:!1,showOverviewSection:!0,showInsightsSection:!0,showDeploymentsSection:!0,showWorkloadsSection:!0,showNetworkingSection:!0,showConfigStorageSection:!0,showClusterSection:!0,showIntegrationsSection:!0,showExtensionsSection:!0,showDashboard:!0,showAIInsights:!0,showCostAnalysisMenu:!0,showSecurityInsights:!0,showDriftDetectionMenu:!0,showConnectorsMenu:!0,showAIAgentsMenu:!0,showPlugins:!0,showTerminalMenu:!0},fn={...Hy,theme:"dark",compactMode:!1,sidebarCollapsed:!1,defaultNamespace:"_all",itemsPerPage:50,refreshInterval:30,enableDebugMode:!1,enablePerformanceMetrics:!1};function zy(){try{const e=localStorage.getItem("kubegraf-settings");if(e){const t=JSON.parse(e);return{...fn,...t}}}catch(e){console.error("Failed to load settings:",e)}return fn}function Fy(e){try{localStorage.setItem("kubegraf-settings",JSON.stringify(e))}catch(t){console.error("Failed to save settings:",t)}}const[ia,na]=J(zy());Tt(()=>{Fy(ia())});function jy(e,t){na(r=>({...r,[e]:t}))}function Uy(){na(fn)}var Vy=T('<span class="px-2 py-0.5 rounded text-xs font-semibold uppercase tracking-wide">'),Wy=T("<p class=text-xs style=color:var(--text-muted)>"),qy=T("<button type=button style=outline:none><span>"),Ky=T('<select class="rounded-lg px-3 py-1.5 text-sm cursor-pointer"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)">'),Yy=T('<div class="flex items-center gap-2"><input type=number class="w-24 rounded-lg px-3 py-1.5 text-sm text-right"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)">'),Gy=T('<div class="card p-4 hover:border-opacity-60 transition-all"><div class="flex items-start justify-between gap-4"><div class=flex-1><div class="flex items-center gap-2 mb-1"><label class="text-sm font-medium"style=color:var(--text-primary)></label></div></div><div class=flex-shrink-0>'),Jy=T("<option>"),Xy=T('<span class="px-3 py-1 rounded-full text-xs font-semibold"style=background:#f59e0b20;color:#f59e0b>Update Available'),Zy=T("<div class=spinner style=width:16px;height:16px>"),Qy=T('<div class=space-y-4><div class="card p-6"><h3 class="text-lg font-semibold mb-4"style=color:var(--text-primary)>Application Version & Updates</h3><div class="flex items-center justify-between mb-4"><div><div class="text-sm font-medium mb-1"style=color:var(--text-primary)>KubeGraf </div><div class=text-xs style=color:var(--text-muted)>Advanced Kubernetes Visualization & Management Platform</div></div></div><button class="px-4 py-2 rounded-lg text-sm font-medium transition-all hover:opacity-90 disabled:opacity-50 flex items-center gap-2"style=background:var(--accent-primary);color:#000></button></div><div class="card p-6"><h3 class="text-lg font-semibold mb-2"style=color:var(--text-primary)>Reset All Settings</h3><p class="text-sm mb-4"style=color:var(--text-muted)>Reset all settings to their default values. This will clear all customizations and preferences.</p><button class="px-4 py-2 rounded-lg text-sm font-medium hover:opacity-90 transition-opacity"style=background:var(--error-color);color:white>Reset to Defaults</button></div><div class="card p-6"><h3 class="text-lg font-semibold mb-4"style=color:var(--text-primary)>Documentation & Links</h3><div class="grid grid-cols-2 gap-3"><a href=https://kubegraf.io target=_blank class="flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium hover:opacity-80 transition-opacity"style=background:var(--bg-tertiary);color:var(--text-primary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>Website</a><a href=https://github.com/kubegraf/kubegraf target=_blank class="flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium hover:opacity-80 transition-opacity"style=background:var(--bg-tertiary);color:var(--text-primary)><svg class="w-4 h-4"fill=currentColor viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>GitHub</a><a href=https://kubegraf.io/docs target=_blank class="flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium hover:opacity-80 transition-opacity"style=background:var(--bg-tertiary);color:var(--text-primary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg>Documentation</a><a href=https://github.com/kubegraf/kubegraf/issues target=_blank class="flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium hover:opacity-80 transition-opacity"style=background:var(--bg-tertiary);color:var(--text-primary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>Report Issue'),ex=T('<div class="max-w-5xl mx-auto"><div class=mb-8><h1 class="text-3xl font-bold mb-2 gradient-text">Settings</h1><p class=text-sm style=color:var(--text-muted)>Configure KubeGraf to match your workflow and preferences</p></div><div class=mb-8><button class="flex items-center gap-2 text-sm font-medium mb-4 hover:opacity-80 transition-opacity"style=color:var(--accent-primary)><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 5l7 7-7 7"></path></svg>Advanced Settings & Information'),tx=T("<p class=text-sm style=color:var(--text-muted)>"),rx=T("<div class=space-y-3>"),sx=T('<div class=mb-8><button class="w-full flex items-center gap-3 mb-4 cursor-pointer hover:opacity-80 transition-opacity"><div class="w-10 h-10 rounded-lg flex items-center justify-center"style="background:rgba(6, 182, 212, 0.1)"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></div><div class="flex-1 text-left"><h2 class="text-xl font-semibold"style=color:var(--text-primary)></h2></div><svg fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 5l7 7-7 7">');const ix=()=>{const[e,t]=J(!1),[r,i]=J(new Set),[h,_]=J("1.2.1"),[f,s]=J(null),[l,u]=J(!1),[g,p]=J(!1);Tt(async()=>{try{const a=await De.getStatus();a&&a.version&&_(a.version)}catch(a){console.error("Failed to get version:",a)}});const b=(a,c)=>{jy(a,c),Ve(`Setting updated: ${a}`,"success")},m=()=>{confirm("Are you sure you want to reset all settings to defaults? This action cannot be undone.")&&(Uy(),Eo("dark"),Ve("All settings have been reset to defaults","success"),setTimeout(()=>location.reload(),1e3))},C=a=>{i(c=>{const v=new Set(c);return v.has(a)?v.delete(a):v.add(a),v})},y=a=>r().has(a),n=[{title:"Appearance",description:"Customize the look and feel of KubeGraf",icon:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01",items:[{id:"theme",label:"Color Theme",description:"Choose your preferred color scheme",type:"select",options:Object.keys(Wr).map(a=>({label:Wr[a].label,value:a}))},{id:"compactMode",label:"Compact Mode",description:"Reduce spacing and padding for a more compact view",type:"toggle"},{id:"sidebarCollapsed",label:"Collapsed Sidebar by Default",description:"Start with sidebar in collapsed state",type:"toggle"}]},{title:"General Settings",description:"Configure basic application behavior",icon:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z",items:[{id:"defaultNamespace",label:"Default Namespace",description:"Set the default namespace to load on startup",type:"select",options:[{label:"All Namespaces",value:"_all"},...ei().map(a=>({label:a,value:a}))]},{id:"itemsPerPage",label:"Items Per Page",description:"Number of items to display per page in resource lists",type:"number",min:10,max:200,step:10},{id:"enableAutoRefresh",label:"Auto Refresh",description:"Automatically refresh resource data at regular intervals",type:"toggle"},{id:"refreshInterval",label:"Refresh Interval (seconds)",description:"Time between automatic refreshes",type:"number",min:5,max:300,step:5}]},{title:"Notifications & Alerts",description:"Configure notification and alert preferences",icon:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9",items:[{id:"enableNotifications",label:"Desktop Notifications",description:"Show toast notifications for important events and actions",type:"toggle"},{id:"enableSoundEffects",label:"Sound Effects",description:"Play sound effects for notifications and alerts",type:"toggle"}]},{title:"Security & Diagnostics",description:"Enable or disable security scanning and diagnostic features",icon:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z",items:[{id:"enableDiagnostics",label:"Cluster Diagnostics",description:"Run automatic cluster health checks and diagnostics",type:"toggle",badge:"Core",badgeColor:"blue"},{id:"enableSecurityChecks",label:"Security Checks",description:"Perform security-related diagnostic checks",type:"toggle",badge:"Security",badgeColor:"red"},{id:"enableCVEVulnerabilities",label:"CVE Vulnerability Scanning",description:"Scan for known CVE vulnerabilities using NIST NVD database",type:"toggle",badge:"NIST NVD",badgeColor:"purple"}]},{title:"AI & ML Features",description:"Control AI-powered features and machine learning capabilities",icon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z",items:[{id:"enableAIChat",label:"AI Chat Assistant",description:"Enable AI-powered chat assistant for cluster management",type:"toggle",badge:"AI",badgeColor:"green"},{id:"enableMLRecommendations",label:"ML Recommendations",description:"Get AI/ML-powered optimization recommendations",type:"toggle",badge:"ML",badgeColor:"green"},{id:"enableAnomalyDetection",label:"Anomaly Detection",description:"Detect anomalies in cluster behavior using machine learning",type:"toggle",badge:"Advanced",badgeColor:"orange"}]},{title:"Monitoring & Analysis",description:"Configure monitoring, cost analysis, and drift detection",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z",items:[{id:"enableEventMonitoring",label:"Event Monitoring",description:"Monitor and track Kubernetes events in real-time",type:"toggle"},{id:"enableCostAnalysis",label:"Cost Analysis",description:"Analyze and track cluster costs across cloud providers",type:"toggle",badge:"Beta",badgeColor:"yellow"},{id:"enableDriftDetection",label:"Configuration Drift Detection",description:"Detect configuration drift in deployments and resources",type:"toggle"},{id:"enableMetrics",label:"Resource Metrics",description:"Display CPU, memory, and other resource metrics",type:"toggle"}]},{title:"Integrations",description:"Enable or disable external integrations and connectors",icon:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1",items:[{id:"enableMCP",label:"AI Agents",description:"Enable Model Context Protocol server for AI agent integration (Claude, Cursor, etc.)",type:"toggle",badge:"New",badgeColor:"cyan"},{id:"enableConnectors",label:"External Connectors",description:"Enable integrations with external services (GitHub, Slack, PagerDuty, Webhooks)",type:"toggle"}]},{title:"Visualization",description:"Configure visualization and topology features",icon:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z",items:[{id:"enableTopology",label:"Topology View",description:"Enable interactive topology visualization",type:"toggle"},{id:"enableResourceMap",label:"Resource Map",description:"Enable resource relationship mapping",type:"toggle"}]},{title:"Developer Tools",description:"Tools for developers and advanced users",icon:"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z",items:[{id:"enableWebTerminal",label:"Web Terminal",description:"Enable built-in web terminal for kubectl commands",type:"toggle"},{id:"enableLogs",label:"Log Viewer",description:"Enable advanced log viewing and streaming",type:"toggle"}]},{title:"Sidebar Visibility",description:"Control which sections and menu items appear in the sidebar",icon:"M4 6h16M4 10h16M4 14h16M4 18h16",items:[{id:"showOverviewSection",label:"Show Overview Section",description:"Display Dashboard in sidebar",type:"toggle"},{id:"showInsightsSection",label:"Show Insights Section",description:"Display AI Insights, Cost Analysis, Security, Drift Detection",type:"toggle"},{id:"showDeploymentsSection",label:"Show Deployments Section",description:"Display Deploy and Rollouts",type:"toggle"},{id:"showWorkloadsSection",label:"Show Workloads Section",description:"Display Pods, Deployments, StatefulSets, DaemonSets, Jobs, CronJobs",type:"toggle"},{id:"showNetworkingSection",label:"Show Networking Section",description:"Display Services, Ingresses, Network Policies",type:"toggle"},{id:"showConfigStorageSection",label:"Show Config & Storage Section",description:"Display ConfigMaps, Secrets, Certificates, Storage",type:"toggle"},{id:"showClusterSection",label:"Show Cluster Section",description:"Display Nodes, RBAC, Events, Resource Map",type:"toggle"},{id:"showIntegrationsSection",label:"Show Integrations Section",description:"Display Connectors and AI Agents menu items",type:"toggle",badge:"Important",badgeColor:"cyan"},{id:"showExtensionsSection",label:"Show Extensions Section",description:"Display Plugins and Terminal",type:"toggle"}]},{title:"Individual Menu Items",description:"Fine-grained control over specific sidebar menu items",icon:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4",items:[{id:"showConnectorsMenu",label:"Show Connectors Menu",description:"Display Connectors in Integrations section",type:"toggle",badge:"Integration",badgeColor:"cyan"},{id:"showAIAgentsMenu",label:"Show AI Agents Menu",description:"Display AI Agents in Integrations section",type:"toggle",badge:"Integration",badgeColor:"cyan"},{id:"showAIInsights",label:"Show AI Insights",description:"Display AI Insights in Insights section",type:"toggle"},{id:"showCostAnalysisMenu",label:"Show Cost Analysis",description:"Display Cost Analysis in Insights section",type:"toggle"},{id:"showSecurityInsights",label:"Show Security Insights",description:"Display Security in Insights section",type:"toggle"},{id:"showDriftDetectionMenu",label:"Show Drift Detection",description:"Display Drift Detection in Insights section",type:"toggle"},{id:"showPlugins",label:"Show Plugins",description:"Display Plugins in Extensions section",type:"toggle"},{id:"showTerminalMenu",label:"Show Terminal",description:"Display Terminal in Extensions section",type:"toggle"}]}],d=a=>{const c=a.item,v=()=>ia()[c.id];return(()=>{var x=Gy(),S=x.firstChild,E=S.firstChild,$=E.firstChild,k=$.firstChild,O=E.nextSibling;return o(k,()=>c.label),o($,L(G,{get when(){return c.badge},get children(){var B=Vy();return o(B,()=>c.badge),ie(D=>{var I=c.badgeColor==="blue"?"#3b82f620":c.badgeColor==="red"?"#ef444420":c.badgeColor==="green"?"#22c55e20":c.badgeColor==="purple"?"#a855f720":c.badgeColor==="orange"?"#f97316 20":c.badgeColor==="yellow"?"#f59e0b20":c.badgeColor==="cyan"?"#06b6d420":"#3b82f620",A=c.badgeColor==="blue"?"#3b82f6":c.badgeColor==="red"?"#ef4444":c.badgeColor==="green"?"#22c55e":c.badgeColor==="purple"?"#a855f7":c.badgeColor==="orange"?"#f97316":c.badgeColor==="yellow"?"#f59e0b":c.badgeColor==="cyan"?"#06b6d4":"#3b82f6";return I!==D.e&&ce(B,"background",D.e=I),A!==D.t&&ce(B,"color",D.t=A),D},{e:void 0,t:void 0}),B}}),null),o(E,L(G,{get when(){return c.description},get children(){var B=Wy();return o(B,()=>c.description),B}}),null),o(O,L(G,{get when(){return c.type==="toggle"},get children(){var B=qy(),D=B.firstChild;return B.$$click=I=>{I.preventDefault(),I.stopPropagation(),b(c.id,!v())},ie(I=>{var A=`relative inline-flex h-6 w-11 items-center rounded-full transition-colors cursor-pointer ${v()?"bg-[var(--accent-primary)]":"bg-[var(--bg-tertiary)]"}`,P=v()?"Enabled":"Disabled",R=`inline-block h-4 w-4 transform rounded-full bg-white transition-transform pointer-events-none ${v()?"translate-x-6":"translate-x-1"}`;return A!==I.e&&ze(B,I.e=A),P!==I.t&&Xe(B,"title",I.t=P),R!==I.a&&ze(D,I.a=R),I},{e:void 0,t:void 0,a:void 0}),B}}),null),o(O,L(G,{get when(){return c.type==="select"},get children(){var B=Ky();return B.addEventListener("change",D=>b(c.id,D.currentTarget.value)),o(B,L(He,{get each(){return c.options},children:D=>(()=>{var I=Jy();return o(I,()=>D.label),ie(()=>I.value=D.value),I})()})),ie(()=>B.value=v()),B}}),null),o(O,L(G,{get when(){return c.type==="number"},get children(){var B=Yy(),D=B.firstChild;return D.addEventListener("change",I=>b(c.id,parseInt(I.currentTarget.value,10))),ie(I=>{var A=c.min,P=c.max,R=c.step;return A!==I.e&&Xe(D,"min",I.e=A),P!==I.t&&Xe(D,"max",I.t=P),R!==I.a&&Xe(D,"step",I.a=R),I},{e:void 0,t:void 0,a:void 0}),ie(()=>D.value=v()),B}}),null),x})()};return(()=>{var a=ex(),c=a.firstChild,v=c.firstChild;v.nextSibling;var x=c.nextSibling,S=x.firstChild,E=S.firstChild;return o(a,L(He,{each:n,children:$=>(()=>{var k=sx(),O=k.firstChild,B=O.firstChild,D=B.firstChild,I=D.firstChild,A=B.nextSibling,P=A.firstChild,R=A.nextSibling;return O.$$click=()=>C($.title),o(P,()=>$.title),o(A,L(G,{get when(){return $.description},get children(){var N=tx();return o(N,()=>$.description),N}}),null),o(k,L(G,{get when(){return!y($.title)},get children(){var N=rx();return o(N,L(He,{get each(){return $.items},children:w=>L(d,{item:w})})),N}}),null),ie(N=>{var w=$.icon,H=`w-5 h-5 transition-transform flex-shrink-0 ${y($.title)?"":"rotate-90"}`;return w!==N.e&&Xe(I,"d",N.e=w),H!==N.t&&Xe(R,"class",N.t=H),N},{e:void 0,t:void 0}),k})()}),x),S.$$click=()=>t(!e()),o(x,L(G,{get when(){return e()},get children(){var $=Qy(),k=$.firstChild,O=k.firstChild,B=O.nextSibling,D=B.firstChild,I=D.firstChild;I.firstChild,I.nextSibling;var A=B.nextSibling,P=k.nextSibling,R=P.firstChild,N=R.nextSibling,w=N.nextSibling,H=P.nextSibling,z=H.firstChild,U=z.nextSibling,te=U.firstChild,F=te.nextSibling,W=F.nextSibling;return W.nextSibling,o(I,h,null),o(B,L(G,{get when(){return Re(()=>!!f())()&&f().updateAvailable},get children(){return Xy()}}),null),A.$$click=async()=>{u(!0);try{const V=await De.checkForUpdates();s(V),V.updateAvailable?Ve(`Update available: ${V.latestVersion}`,"info"):Ve("You are running the latest version","success")}catch(V){Ve(`Failed to check for updates: ${V instanceof Error?V.message:"Unknown error"}`,"error")}finally{u(!1)}},o(A,L(G,{get when(){return l()},get children(){return Zy()}}),null),o(A,()=>l()?"Checking...":"Check for Updates",null),w.$$click=m,ie(()=>A.disabled=l()),$}}),null),ie(()=>Xe(E,"class",`w-4 h-4 transition-transform ${e()?"rotate-90":""}`)),a})()};et(["click"]);function An(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Gr=An();function la(e){Gr=e}const oa=/[&<>"']/,nx=new RegExp(oa.source,"g"),aa=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,lx=new RegExp(aa.source,"g"),ox={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ql=e=>ox[e];function Xt(e,t){if(t){if(oa.test(e))return e.replace(nx,ql)}else if(aa.test(e))return e.replace(lx,ql);return e}const ax=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function cx(e){return e.replace(ax,(t,r)=>(r=r.toLowerCase(),r==="colon"?":":r.charAt(0)==="#"?r.charAt(1)==="x"?String.fromCharCode(parseInt(r.substring(2),16)):String.fromCharCode(+r.substring(1)):""))}const dx=/(^|[^\[])\^/g;function gt(e,t){let r=typeof e=="string"?e:e.source;t=t||"";const i={replace:(h,_)=>{let f=typeof _=="string"?_:_.source;return f=f.replace(dx,"$1"),r=r.replace(h,f),i},getRegex:()=>new RegExp(r,t)};return i}function Kl(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}const $s={exec:()=>null};function Yl(e,t){const r=e.replace(/\|/g,(_,f,s)=>{let l=!1,u=f;for(;--u>=0&&s[u]==="\\";)l=!l;return l?"|":" |"}),i=r.split(/ \|/);let h=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;h<i.length;h++)i[h]=i[h].trim().replace(/\\\|/g,"|");return i}function Xs(e,t,r){const i=e.length;if(i===0)return"";let h=0;for(;h<i&&e.charAt(i-h-1)===t;)h++;return e.slice(0,i-h)}function hx(e,t){if(e.indexOf(t[1])===-1)return-1;let r=0;for(let i=0;i<e.length;i++)if(e[i]==="\\")i++;else if(e[i]===t[0])r++;else if(e[i]===t[1]&&(r--,r<0))return i;return-1}function Gl(e,t,r,i){const h=t.href,_=t.title?Xt(t.title):null,f=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){i.state.inLink=!0;const s={type:"link",raw:r,href:h,title:_,text:f,tokens:i.inlineTokens(f)};return i.state.inLink=!1,s}return{type:"image",raw:r,href:h,title:_,text:Xt(f)}}function ux(e,t){const r=e.match(/^(\s+)(?:```)/);if(r===null)return t;const i=r[1];return t.split(`
`).map(h=>{const _=h.match(/^\s+/);if(_===null)return h;const[f]=_;return f.length>=i.length?h.slice(i.length):h}).join(`
`)}class bi{options;rules;lexer;constructor(t){this.options=t||Gr}space(t){const r=this.rules.block.newline.exec(t);if(r&&r[0].length>0)return{type:"space",raw:r[0]}}code(t){const r=this.rules.block.code.exec(t);if(r){const i=r[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:r[0],codeBlockStyle:"indented",text:this.options.pedantic?i:Xs(i,`
`)}}}fences(t){const r=this.rules.block.fences.exec(t);if(r){const i=r[0],h=ux(i,r[3]||"");return{type:"code",raw:i,lang:r[2]?r[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):r[2],text:h}}}heading(t){const r=this.rules.block.heading.exec(t);if(r){let i=r[2].trim();if(/#$/.test(i)){const h=Xs(i,"#");(this.options.pedantic||!h||/ $/.test(h))&&(i=h.trim())}return{type:"heading",raw:r[0],depth:r[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(t){const r=this.rules.block.hr.exec(t);if(r)return{type:"hr",raw:r[0]}}blockquote(t){const r=this.rules.block.blockquote.exec(t);if(r){let i=r[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`);i=Xs(i.replace(/^ *>[ \t]?/gm,""),`
`);const h=this.lexer.state.top;this.lexer.state.top=!0;const _=this.lexer.blockTokens(i);return this.lexer.state.top=h,{type:"blockquote",raw:r[0],tokens:_,text:i}}}list(t){let r=this.rules.block.list.exec(t);if(r){let i=r[1].trim();const h=i.length>1,_={type:"list",raw:"",ordered:h,start:h?+i.slice(0,-1):"",loose:!1,items:[]};i=h?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=h?i:"[*+-]");const f=new RegExp(`^( {0,3}${i})((?:[	 ][^\\n]*)?(?:\\n|$))`);let s="",l="",u=!1;for(;t;){let g=!1;if(!(r=f.exec(t))||this.rules.block.hr.test(t))break;s=r[0],t=t.substring(s.length);let p=r[2].split(`
`,1)[0].replace(/^\t+/,d=>" ".repeat(3*d.length)),b=t.split(`
`,1)[0],m=0;this.options.pedantic?(m=2,l=p.trimStart()):(m=r[2].search(/[^ ]/),m=m>4?1:m,l=p.slice(m),m+=r[1].length);let C=!1;if(!p&&/^ *$/.test(b)&&(s+=b+`
`,t=t.substring(b.length+1),g=!0),!g){const d=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),a=new RegExp(`^ {0,${Math.min(3,m-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),c=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:\`\`\`|~~~)`),v=new RegExp(`^ {0,${Math.min(3,m-1)}}#`);for(;t;){const x=t.split(`
`,1)[0];if(b=x,this.options.pedantic&&(b=b.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),c.test(b)||v.test(b)||d.test(b)||a.test(t))break;if(b.search(/[^ ]/)>=m||!b.trim())l+=`
`+b.slice(m);else{if(C||p.search(/[^ ]/)>=4||c.test(p)||v.test(p)||a.test(p))break;l+=`
`+b}!C&&!b.trim()&&(C=!0),s+=x+`
`,t=t.substring(x.length+1),p=b.slice(m)}}_.loose||(u?_.loose=!0:/\n *\n *$/.test(s)&&(u=!0));let y=null,n;this.options.gfm&&(y=/^\[[ xX]\] /.exec(l),y&&(n=y[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),_.items.push({type:"list_item",raw:s,task:!!y,checked:n,loose:!1,text:l,tokens:[]}),_.raw+=s}_.items[_.items.length-1].raw=s.trimEnd(),_.items[_.items.length-1].text=l.trimEnd(),_.raw=_.raw.trimEnd();for(let g=0;g<_.items.length;g++)if(this.lexer.state.top=!1,_.items[g].tokens=this.lexer.blockTokens(_.items[g].text,[]),!_.loose){const p=_.items[g].tokens.filter(m=>m.type==="space"),b=p.length>0&&p.some(m=>/\n.*\n/.test(m.raw));_.loose=b}if(_.loose)for(let g=0;g<_.items.length;g++)_.items[g].loose=!0;return _}}html(t){const r=this.rules.block.html.exec(t);if(r)return{type:"html",block:!0,raw:r[0],pre:r[1]==="pre"||r[1]==="script"||r[1]==="style",text:r[0]}}def(t){const r=this.rules.block.def.exec(t);if(r){const i=r[1].toLowerCase().replace(/\s+/g," "),h=r[2]?r[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",_=r[3]?r[3].substring(1,r[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):r[3];return{type:"def",tag:i,raw:r[0],href:h,title:_}}}table(t){const r=this.rules.block.table.exec(t);if(!r||!/[:|]/.test(r[2]))return;const i=Yl(r[1]),h=r[2].replace(/^\||\| *$/g,"").split("|"),_=r[3]&&r[3].trim()?r[3].replace(/\n[ \t]*$/,"").split(`
`):[],f={type:"table",raw:r[0],header:[],align:[],rows:[]};if(i.length===h.length){for(const s of h)/^ *-+: *$/.test(s)?f.align.push("right"):/^ *:-+: *$/.test(s)?f.align.push("center"):/^ *:-+ *$/.test(s)?f.align.push("left"):f.align.push(null);for(const s of i)f.header.push({text:s,tokens:this.lexer.inline(s)});for(const s of _)f.rows.push(Yl(s,f.header.length).map(l=>({text:l,tokens:this.lexer.inline(l)})));return f}}lheading(t){const r=this.rules.block.lheading.exec(t);if(r)return{type:"heading",raw:r[0],depth:r[2].charAt(0)==="="?1:2,text:r[1],tokens:this.lexer.inline(r[1])}}paragraph(t){const r=this.rules.block.paragraph.exec(t);if(r){const i=r[1].charAt(r[1].length-1)===`
`?r[1].slice(0,-1):r[1];return{type:"paragraph",raw:r[0],text:i,tokens:this.lexer.inline(i)}}}text(t){const r=this.rules.block.text.exec(t);if(r)return{type:"text",raw:r[0],text:r[0],tokens:this.lexer.inline(r[0])}}escape(t){const r=this.rules.inline.escape.exec(t);if(r)return{type:"escape",raw:r[0],text:Xt(r[1])}}tag(t){const r=this.rules.inline.tag.exec(t);if(r)return!this.lexer.state.inLink&&/^<a /i.test(r[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(r[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:r[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:r[0]}}link(t){const r=this.rules.inline.link.exec(t);if(r){const i=r[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const f=Xs(i.slice(0,-1),"\\");if((i.length-f.length)%2===0)return}else{const f=hx(r[2],"()");if(f>-1){const l=(r[0].indexOf("!")===0?5:4)+r[1].length+f;r[2]=r[2].substring(0,f),r[0]=r[0].substring(0,l).trim(),r[3]=""}}let h=r[2],_="";if(this.options.pedantic){const f=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(h);f&&(h=f[1],_=f[3])}else _=r[3]?r[3].slice(1,-1):"";return h=h.trim(),/^</.test(h)&&(this.options.pedantic&&!/>$/.test(i)?h=h.slice(1):h=h.slice(1,-1)),Gl(r,{href:h&&h.replace(this.rules.inline.anyPunctuation,"$1"),title:_&&_.replace(this.rules.inline.anyPunctuation,"$1")},r[0],this.lexer)}}reflink(t,r){let i;if((i=this.rules.inline.reflink.exec(t))||(i=this.rules.inline.nolink.exec(t))){const h=(i[2]||i[1]).replace(/\s+/g," "),_=r[h.toLowerCase()];if(!_){const f=i[0].charAt(0);return{type:"text",raw:f,text:f}}return Gl(i,_,i[0],this.lexer)}}emStrong(t,r,i=""){let h=this.rules.inline.emStrongLDelim.exec(t);if(!h||h[3]&&i.match(/[\p{L}\p{N}]/u))return;if(!(h[1]||h[2]||"")||!i||this.rules.inline.punctuation.exec(i)){const f=[...h[0]].length-1;let s,l,u=f,g=0;const p=h[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(p.lastIndex=0,r=r.slice(-1*t.length+f);(h=p.exec(r))!=null;){if(s=h[1]||h[2]||h[3]||h[4]||h[5]||h[6],!s)continue;if(l=[...s].length,h[3]||h[4]){u+=l;continue}else if((h[5]||h[6])&&f%3&&!((f+l)%3)){g+=l;continue}if(u-=l,u>0)continue;l=Math.min(l,l+u+g);const b=[...h[0]][0].length,m=t.slice(0,f+h.index+b+l);if(Math.min(f,l)%2){const y=m.slice(1,-1);return{type:"em",raw:m,text:y,tokens:this.lexer.inlineTokens(y)}}const C=m.slice(2,-2);return{type:"strong",raw:m,text:C,tokens:this.lexer.inlineTokens(C)}}}}codespan(t){const r=this.rules.inline.code.exec(t);if(r){let i=r[2].replace(/\n/g," ");const h=/[^ ]/.test(i),_=/^ /.test(i)&&/ $/.test(i);return h&&_&&(i=i.substring(1,i.length-1)),i=Xt(i,!0),{type:"codespan",raw:r[0],text:i}}}br(t){const r=this.rules.inline.br.exec(t);if(r)return{type:"br",raw:r[0]}}del(t){const r=this.rules.inline.del.exec(t);if(r)return{type:"del",raw:r[0],text:r[2],tokens:this.lexer.inlineTokens(r[2])}}autolink(t){const r=this.rules.inline.autolink.exec(t);if(r){let i,h;return r[2]==="@"?(i=Xt(r[1]),h="mailto:"+i):(i=Xt(r[1]),h=i),{type:"link",raw:r[0],text:i,href:h,tokens:[{type:"text",raw:i,text:i}]}}}url(t){let r;if(r=this.rules.inline.url.exec(t)){let i,h;if(r[2]==="@")i=Xt(r[0]),h="mailto:"+i;else{let _;do _=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])?.[0]??"";while(_!==r[0]);i=Xt(r[0]),r[1]==="www."?h="http://"+r[0]:h=r[0]}return{type:"link",raw:r[0],text:i,href:h,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(t){const r=this.rules.inline.text.exec(t);if(r){let i;return this.lexer.state.inRawBlock?i=r[0]:i=Xt(r[0]),{type:"text",raw:r[0],text:i}}}}const fx=/^(?: *(?:\n|$))+/,gx=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,px=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Ts=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,vx=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,ca=/(?:[*+-]|\d{1,9}[.)])/,da=gt(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,ca).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),Mn=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,mx=/^[^\n]+/,En=/(?!\s*\])(?:\\.|[^\[\]\\])+/,_x=gt(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",En).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),bx=gt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,ca).getRegex(),Ei="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Ln=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,yx=gt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",Ln).replace("tag",Ei).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ha=gt(Mn).replace("hr",Ts).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ei).getRegex(),xx=gt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",ha).getRegex(),Rn={blockquote:xx,code:gx,def:_x,fences:px,heading:vx,hr:Ts,html:yx,lheading:da,list:bx,newline:fx,paragraph:ha,table:$s,text:mx},Jl=gt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Ts).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ei).getRegex(),$x={...Rn,table:Jl,paragraph:gt(Mn).replace("hr",Ts).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Jl).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ei).getRegex()},wx={...Rn,html:gt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Ln).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:$s,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:gt(Mn).replace("hr",Ts).replace("heading",` *#{1,6} *[^
]`).replace("lheading",da).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},ua=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Sx=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,fa=/^( {2,}|\\)\n(?!\s*$)/,Cx=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Ps="\\p{P}\\p{S}",kx=gt(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Ps).getRegex(),Ax=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,Mx=gt(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Ps).getRegex(),Ex=gt("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Ps).getRegex(),Lx=gt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Ps).getRegex(),Rx=gt(/\\([punct])/,"gu").replace(/punct/g,Ps).getRegex(),Dx=gt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Tx=gt(Ln).replace("(?:-->|$)","-->").getRegex(),Px=gt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Tx).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),yi=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Ix=gt(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",yi).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),ga=gt(/^!?\[(label)\]\[(ref)\]/).replace("label",yi).replace("ref",En).getRegex(),pa=gt(/^!?\[(ref)\](?:\[\])?/).replace("ref",En).getRegex(),Bx=gt("reflink|nolink(?!\\()","g").replace("reflink",ga).replace("nolink",pa).getRegex(),Dn={_backpedal:$s,anyPunctuation:Rx,autolink:Dx,blockSkip:Ax,br:fa,code:Sx,del:$s,emStrongLDelim:Mx,emStrongRDelimAst:Ex,emStrongRDelimUnd:Lx,escape:ua,link:Ix,nolink:pa,punctuation:kx,reflink:ga,reflinkSearch:Bx,tag:Px,text:Cx,url:$s},Ox={...Dn,link:gt(/^!?\[(label)\]\((.*?)\)/).replace("label",yi).getRegex(),reflink:gt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",yi).getRegex()},gn={...Dn,escape:gt(ua).replace("])","~|])").getRegex(),url:gt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Nx={...gn,br:gt(fa).replace("{2,}","*").getRegex(),text:gt(gn.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Zs={normal:Rn,gfm:$x,pedantic:wx},ms={normal:Dn,gfm:gn,breaks:Nx,pedantic:Ox};class fr{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Gr,this.options.tokenizer=this.options.tokenizer||new bi,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const r={block:Zs.normal,inline:ms.normal};this.options.pedantic?(r.block=Zs.pedantic,r.inline=ms.pedantic):this.options.gfm&&(r.block=Zs.gfm,this.options.breaks?r.inline=ms.breaks:r.inline=ms.gfm),this.tokenizer.rules=r}static get rules(){return{block:Zs,inline:ms}}static lex(t,r){return new fr(r).lex(t)}static lexInline(t,r){return new fr(r).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){const i=this.inlineQueue[r];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,r=[]){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(s,l,u)=>l+"    ".repeat(u.length));let i,h,_,f;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(s=>(i=s.call({lexer:this},t,r))?(t=t.substring(i.raw.length),r.push(i),!0):!1))){if(i=this.tokenizer.space(t)){t=t.substring(i.raw.length),i.raw.length===1&&r.length>0?r[r.length-1].raw+=`
`:r.push(i);continue}if(i=this.tokenizer.code(t)){t=t.substring(i.raw.length),h=r[r.length-1],h&&(h.type==="paragraph"||h.type==="text")?(h.raw+=`
`+i.raw,h.text+=`
`+i.text,this.inlineQueue[this.inlineQueue.length-1].src=h.text):r.push(i);continue}if(i=this.tokenizer.fences(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.heading(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.hr(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.blockquote(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.list(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.html(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.def(t)){t=t.substring(i.raw.length),h=r[r.length-1],h&&(h.type==="paragraph"||h.type==="text")?(h.raw+=`
`+i.raw,h.text+=`
`+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=h.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.lheading(t)){t=t.substring(i.raw.length),r.push(i);continue}if(_=t,this.options.extensions&&this.options.extensions.startBlock){let s=1/0;const l=t.slice(1);let u;this.options.extensions.startBlock.forEach(g=>{u=g.call({lexer:this},l),typeof u=="number"&&u>=0&&(s=Math.min(s,u))}),s<1/0&&s>=0&&(_=t.substring(0,s+1))}if(this.state.top&&(i=this.tokenizer.paragraph(_))){h=r[r.length-1],f&&h.type==="paragraph"?(h.raw+=`
`+i.raw,h.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=h.text):r.push(i),f=_.length!==t.length,t=t.substring(i.raw.length);continue}if(i=this.tokenizer.text(t)){t=t.substring(i.raw.length),h=r[r.length-1],h&&h.type==="text"?(h.raw+=`
`+i.raw,h.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=h.text):r.push(i);continue}if(t){const s="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(s);break}else throw new Error(s)}}return this.state.top=!0,r}inline(t,r=[]){return this.inlineQueue.push({src:t,tokens:r}),r}inlineTokens(t,r=[]){let i,h,_,f=t,s,l,u;if(this.tokens.links){const g=Object.keys(this.tokens.links);if(g.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(f))!=null;)g.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(f=f.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+f.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.blockSkip.exec(f))!=null;)f=f.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+f.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(s=this.tokenizer.rules.inline.anyPunctuation.exec(f))!=null;)f=f.slice(0,s.index)+"++"+f.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(l||(u=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(g=>(i=g.call({lexer:this},t,r))?(t=t.substring(i.raw.length),r.push(i),!0):!1))){if(i=this.tokenizer.escape(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.tag(t)){t=t.substring(i.raw.length),h=r[r.length-1],h&&i.type==="text"&&h.type==="text"?(h.raw+=i.raw,h.text+=i.text):r.push(i);continue}if(i=this.tokenizer.link(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(i.raw.length),h=r[r.length-1],h&&i.type==="text"&&h.type==="text"?(h.raw+=i.raw,h.text+=i.text):r.push(i);continue}if(i=this.tokenizer.emStrong(t,f,u)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.codespan(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.br(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.del(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.autolink(t)){t=t.substring(i.raw.length),r.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(t))){t=t.substring(i.raw.length),r.push(i);continue}if(_=t,this.options.extensions&&this.options.extensions.startInline){let g=1/0;const p=t.slice(1);let b;this.options.extensions.startInline.forEach(m=>{b=m.call({lexer:this},p),typeof b=="number"&&b>=0&&(g=Math.min(g,b))}),g<1/0&&g>=0&&(_=t.substring(0,g+1))}if(i=this.tokenizer.inlineText(_)){t=t.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(u=i.raw.slice(-1)),l=!0,h=r[r.length-1],h&&h.type==="text"?(h.raw+=i.raw,h.text+=i.text):r.push(i);continue}if(t){const g="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(g);break}else throw new Error(g)}}return r}}class xi{options;constructor(t){this.options=t||Gr}code(t,r,i){const h=(r||"").match(/^\S*/)?.[0];return t=t.replace(/\n$/,"")+`
`,h?'<pre><code class="language-'+Xt(h)+'">'+(i?t:Xt(t,!0))+`</code></pre>
`:"<pre><code>"+(i?t:Xt(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t,r){return t}heading(t,r,i){return`<h${r}>${t}</h${r}>
`}hr(){return`<hr>
`}list(t,r,i){const h=r?"ol":"ul",_=r&&i!==1?' start="'+i+'"':"";return"<"+h+_+`>
`+t+"</"+h+`>
`}listitem(t,r,i){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(t){return`<p>${t}</p>
`}table(t,r){return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+r+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,r){const i=r.header?"th":"td";return(r.align?`<${i} align="${r.align}">`:`<${i}>`)+t+`</${i}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return"<br>"}del(t){return`<del>${t}</del>`}link(t,r,i){const h=Kl(t);if(h===null)return i;t=h;let _='<a href="'+t+'"';return r&&(_+=' title="'+r+'"'),_+=">"+i+"</a>",_}image(t,r,i){const h=Kl(t);if(h===null)return i;t=h;let _=`<img src="${t}" alt="${i}"`;return r&&(_+=` title="${r}"`),_+=">",_}text(t){return t}}class Tn{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,r,i){return""+i}image(t,r,i){return""+i}br(){return""}}class gr{options;renderer;textRenderer;constructor(t){this.options=t||Gr,this.options.renderer=this.options.renderer||new xi,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Tn}static parse(t,r){return new gr(r).parse(t)}static parseInline(t,r){return new gr(r).parseInline(t)}parse(t,r=!0){let i="";for(let h=0;h<t.length;h++){const _=t[h];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[_.type]){const f=_,s=this.options.extensions.renderers[f.type].call({parser:this},f);if(s!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(f.type)){i+=s||"";continue}}switch(_.type){case"space":continue;case"hr":{i+=this.renderer.hr();continue}case"heading":{const f=_;i+=this.renderer.heading(this.parseInline(f.tokens),f.depth,cx(this.parseInline(f.tokens,this.textRenderer)));continue}case"code":{const f=_;i+=this.renderer.code(f.text,f.lang,!!f.escaped);continue}case"table":{const f=_;let s="",l="";for(let g=0;g<f.header.length;g++)l+=this.renderer.tablecell(this.parseInline(f.header[g].tokens),{header:!0,align:f.align[g]});s+=this.renderer.tablerow(l);let u="";for(let g=0;g<f.rows.length;g++){const p=f.rows[g];l="";for(let b=0;b<p.length;b++)l+=this.renderer.tablecell(this.parseInline(p[b].tokens),{header:!1,align:f.align[b]});u+=this.renderer.tablerow(l)}i+=this.renderer.table(s,u);continue}case"blockquote":{const f=_,s=this.parse(f.tokens);i+=this.renderer.blockquote(s);continue}case"list":{const f=_,s=f.ordered,l=f.start,u=f.loose;let g="";for(let p=0;p<f.items.length;p++){const b=f.items[p],m=b.checked,C=b.task;let y="";if(b.task){const n=this.renderer.checkbox(!!m);u?b.tokens.length>0&&b.tokens[0].type==="paragraph"?(b.tokens[0].text=n+" "+b.tokens[0].text,b.tokens[0].tokens&&b.tokens[0].tokens.length>0&&b.tokens[0].tokens[0].type==="text"&&(b.tokens[0].tokens[0].text=n+" "+b.tokens[0].tokens[0].text)):b.tokens.unshift({type:"text",text:n+" "}):y+=n+" "}y+=this.parse(b.tokens,u),g+=this.renderer.listitem(y,C,!!m)}i+=this.renderer.list(g,s,l);continue}case"html":{const f=_;i+=this.renderer.html(f.text,f.block);continue}case"paragraph":{const f=_;i+=this.renderer.paragraph(this.parseInline(f.tokens));continue}case"text":{let f=_,s=f.tokens?this.parseInline(f.tokens):f.text;for(;h+1<t.length&&t[h+1].type==="text";)f=t[++h],s+=`
`+(f.tokens?this.parseInline(f.tokens):f.text);i+=r?this.renderer.paragraph(s):s;continue}default:{const f='Token with "'+_.type+'" type was not found.';if(this.options.silent)return console.error(f),"";throw new Error(f)}}}return i}parseInline(t,r){r=r||this.renderer;let i="";for(let h=0;h<t.length;h++){const _=t[h];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[_.type]){const f=this.options.extensions.renderers[_.type].call({parser:this},_);if(f!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(_.type)){i+=f||"";continue}}switch(_.type){case"escape":{const f=_;i+=r.text(f.text);break}case"html":{const f=_;i+=r.html(f.text);break}case"link":{const f=_;i+=r.link(f.href,f.title,this.parseInline(f.tokens,r));break}case"image":{const f=_;i+=r.image(f.href,f.title,f.text);break}case"strong":{const f=_;i+=r.strong(this.parseInline(f.tokens,r));break}case"em":{const f=_;i+=r.em(this.parseInline(f.tokens,r));break}case"codespan":{const f=_;i+=r.codespan(f.text);break}case"br":{i+=r.br();break}case"del":{const f=_;i+=r.del(this.parseInline(f.tokens,r));break}case"text":{const f=_;i+=r.text(f.text);break}default:{const f='Token with "'+_.type+'" type was not found.';if(this.options.silent)return console.error(f),"";throw new Error(f)}}}return i}}class ni{options;constructor(t){this.options=t||Gr}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}}class Hx{defaults=An();options=this.setOptions;parse=this.#e(fr.lex,gr.parse);parseInline=this.#e(fr.lexInline,gr.parseInline);Parser=gr;Renderer=xi;TextRenderer=Tn;Lexer=fr;Tokenizer=bi;Hooks=ni;constructor(...t){this.use(...t)}walkTokens(t,r){let i=[];for(const h of t)switch(i=i.concat(r.call(this,h)),h.type){case"table":{const _=h;for(const f of _.header)i=i.concat(this.walkTokens(f.tokens,r));for(const f of _.rows)for(const s of f)i=i.concat(this.walkTokens(s.tokens,r));break}case"list":{const _=h;i=i.concat(this.walkTokens(_.items,r));break}default:{const _=h;this.defaults.extensions?.childTokens?.[_.type]?this.defaults.extensions.childTokens[_.type].forEach(f=>{const s=_[f].flat(1/0);i=i.concat(this.walkTokens(s,r))}):_.tokens&&(i=i.concat(this.walkTokens(_.tokens,r)))}}return i}use(...t){const r=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(i=>{const h={...i};if(h.async=this.defaults.async||h.async||!1,i.extensions&&(i.extensions.forEach(_=>{if(!_.name)throw new Error("extension name required");if("renderer"in _){const f=r.renderers[_.name];f?r.renderers[_.name]=function(...s){let l=_.renderer.apply(this,s);return l===!1&&(l=f.apply(this,s)),l}:r.renderers[_.name]=_.renderer}if("tokenizer"in _){if(!_.level||_.level!=="block"&&_.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const f=r[_.level];f?f.unshift(_.tokenizer):r[_.level]=[_.tokenizer],_.start&&(_.level==="block"?r.startBlock?r.startBlock.push(_.start):r.startBlock=[_.start]:_.level==="inline"&&(r.startInline?r.startInline.push(_.start):r.startInline=[_.start]))}"childTokens"in _&&_.childTokens&&(r.childTokens[_.name]=_.childTokens)}),h.extensions=r),i.renderer){const _=this.defaults.renderer||new xi(this.defaults);for(const f in i.renderer){if(!(f in _))throw new Error(`renderer '${f}' does not exist`);if(f==="options")continue;const s=f,l=i.renderer[s],u=_[s];_[s]=(...g)=>{let p=l.apply(_,g);return p===!1&&(p=u.apply(_,g)),p||""}}h.renderer=_}if(i.tokenizer){const _=this.defaults.tokenizer||new bi(this.defaults);for(const f in i.tokenizer){if(!(f in _))throw new Error(`tokenizer '${f}' does not exist`);if(["options","rules","lexer"].includes(f))continue;const s=f,l=i.tokenizer[s],u=_[s];_[s]=(...g)=>{let p=l.apply(_,g);return p===!1&&(p=u.apply(_,g)),p}}h.tokenizer=_}if(i.hooks){const _=this.defaults.hooks||new ni;for(const f in i.hooks){if(!(f in _))throw new Error(`hook '${f}' does not exist`);if(f==="options")continue;const s=f,l=i.hooks[s],u=_[s];ni.passThroughHooks.has(f)?_[s]=g=>{if(this.defaults.async)return Promise.resolve(l.call(_,g)).then(b=>u.call(_,b));const p=l.call(_,g);return u.call(_,p)}:_[s]=(...g)=>{let p=l.apply(_,g);return p===!1&&(p=u.apply(_,g)),p}}h.hooks=_}if(i.walkTokens){const _=this.defaults.walkTokens,f=i.walkTokens;h.walkTokens=function(s){let l=[];return l.push(f.call(this,s)),_&&(l=l.concat(_.call(this,s))),l}}this.defaults={...this.defaults,...h}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,r){return fr.lex(t,r??this.defaults)}parser(t,r){return gr.parse(t,r??this.defaults)}#e(t,r){return(i,h)=>{const _={...h},f={...this.defaults,..._};this.defaults.async===!0&&_.async===!1&&(f.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),f.async=!0);const s=this.#t(!!f.silent,!!f.async);if(typeof i>"u"||i===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof i!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));if(f.hooks&&(f.hooks.options=f),f.async)return Promise.resolve(f.hooks?f.hooks.preprocess(i):i).then(l=>t(l,f)).then(l=>f.hooks?f.hooks.processAllTokens(l):l).then(l=>f.walkTokens?Promise.all(this.walkTokens(l,f.walkTokens)).then(()=>l):l).then(l=>r(l,f)).then(l=>f.hooks?f.hooks.postprocess(l):l).catch(s);try{f.hooks&&(i=f.hooks.preprocess(i));let l=t(i,f);f.hooks&&(l=f.hooks.processAllTokens(l)),f.walkTokens&&this.walkTokens(l,f.walkTokens);let u=r(l,f);return f.hooks&&(u=f.hooks.postprocess(u)),u}catch(l){return s(l)}}}#t(t,r){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const h="<p>An error occurred:</p><pre>"+Xt(i.message+"",!0)+"</pre>";return r?Promise.resolve(h):h}if(r)return Promise.reject(i);throw i}}}const Yr=new Hx;function ft(e,t){return Yr.parse(e,t)}ft.options=ft.setOptions=function(e){return Yr.setOptions(e),ft.defaults=Yr.defaults,la(ft.defaults),ft};ft.getDefaults=An;ft.defaults=Gr;ft.use=function(...e){return Yr.use(...e),ft.defaults=Yr.defaults,la(ft.defaults),ft};ft.walkTokens=function(e,t){return Yr.walkTokens(e,t)};ft.parseInline=Yr.parseInline;ft.Parser=gr;ft.parser=gr.parse;ft.Renderer=xi;ft.TextRenderer=Tn;ft.Lexer=fr;ft.lexer=fr.lex;ft.Tokenizer=bi;ft.Hooks=ni;ft.parse=ft;ft.options;ft.setOptions;ft.use;ft.walkTokens;ft.parseInline;gr.parse;fr.lex;const[w$,zx]=J(null),[Zi,Ur]=J([]),[li,Xl]=J(!1),[Zl,va]=J("ollama"),[Ql,S$]=J([{id:"ollama",name:"Ollama (Local)",icon:"llama"},{id:"openai",name:"OpenAI GPT-4",icon:"openai"},{id:"anthropic",name:"Claude",icon:"anthropic"}]);async function Fx(){try{const e=await fetch("/api/ai/status");if(e.ok){const t=await e.json();if(t.available&&t.provider){const r=t.provider.split(" ")[0];va(r)}}}catch(e){console.error("Failed to fetch AI status:",e)}}async function eo(e){if(!e.trim()||li())return;const t={id:crypto.randomUUID(),role:"user",content:e,timestamp:new Date};Ur(r=>[...r,t]),Xl(!0);try{if(!(await(await fetch("/api/ai/status")).json()).available){const _={id:crypto.randomUUID(),role:"assistant",content:"No AI provider available. Configure Ollama (local), OpenAI (OPENAI_API_KEY), or Claude (ANTHROPIC_API_KEY) to enable AI features.",timestamp:new Date};Ur(f=>[...f,_]);return}const h=await fetch("/api/ai/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e})});if(h.ok){const _=await h.json();if(_.error){const f={id:crypto.randomUUID(),role:"assistant",content:`Error: ${_.error}`,timestamp:new Date};Ur(s=>[...s,f])}else{const f={id:crypto.randomUUID(),role:"assistant",content:_.response,timestamp:new Date};Ur(s=>[...s,f])}}else{const _=await h.text(),f={id:crypto.randomUUID(),role:"assistant",content:`Error: ${_}`,timestamp:new Date};Ur(s=>[...s,f])}}catch(r){const i={id:crypto.randomUUID(),role:"assistant",content:`Failed to send message: ${r}`,timestamp:new Date};Ur(h=>[...h,i])}finally{Xl(!1)}}function ma(){Ur([]),zx(null)}function jx(e){va(e),ma()}var Ux=T('<div class="text-center py-8"><div class="w-16 h-16 rounded-full bg-gradient-to-br from-purple-600/20 to-indigo-600/20 flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8 text-purple-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path></svg></div><h3 class="text-white font-medium mb-2">How can I help?</h3><p class="text-gray-500 text-sm mb-6">Ask me about your Kubernetes cluster, resources, or troubleshooting</p><div class=space-y-2>'),Vx=T('<div class="flex justify-start"><div class="bg-k8s-dark rounded-lg px-4 py-3"><div class="flex items-center gap-2"><div class="flex gap-1"><div class="w-2 h-2 rounded-full bg-purple-500 animate-bounce"style=animation-delay:0ms></div><div class="w-2 h-2 rounded-full bg-purple-500 animate-bounce"style=animation-delay:150ms></div><div class="w-2 h-2 rounded-full bg-purple-500 animate-bounce"style=animation-delay:300ms></div></div><span class="text-gray-500 text-sm">Thinking...'),Wx=T('<div class="fixed top-0 right-0 w-[420px] h-full bg-k8s-card border-l border-k8s-border flex flex-col z-50 animate-slide-in"><div class="flex items-center justify-between px-4 py-3 border-b border-k8s-border"><div class="flex items-center gap-3"><div class="w-10 h-10 rounded-lg bg-gradient-to-br from-purple-600 to-indigo-600 flex items-center justify-center"><svg class="w-6 h-6 text-white"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg></div><div><h2 class="text-white font-semibold">AI Assistant</h2><p class="text-gray-500 text-xs">Kubernetes expert</p></div></div><div class="flex items-center gap-2"><select class="bg-k8s-dark border border-k8s-border rounded-lg px-2 py-1 text-sm text-gray-400 focus:border-k8s-blue focus:outline-none"></select><button class="p-2 rounded-lg hover:bg-k8s-border/50 transition-colors text-gray-400 hover:text-white"title="Clear chat"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button><button class="p-2 rounded-lg hover:bg-k8s-border/50 transition-colors text-gray-400 hover:text-white"title=Close><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div><div class="flex-1 overflow-y-auto p-4 space-y-4"><div></div></div><form class="p-4 border-t border-k8s-border"><div class="flex items-center gap-2"><input type=text placeholder="Ask about your cluster..."class="flex-1 bg-k8s-dark border border-k8s-border rounded-lg px-4 py-2.5 text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none disabled:opacity-50"><button type=submit class="p-2.5 bg-gradient-to-r from-purple-600 to-indigo-600 rounded-lg text-white hover:from-purple-700 hover:to-indigo-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg></button></div><p class="mt-2 text-xs text-gray-500 text-center">Using '),qx=T("<option>"),Kx=T('<button class="w-full text-left px-4 py-2 bg-k8s-dark hover:bg-k8s-border/50 rounded-lg text-sm text-gray-400 hover:text-white transition-colors">'),Yx=T('<div class="prose prose-invert prose-sm max-w-none">'),Gx=T('<div class="mt-2 pt-2 border-t border-k8s-border/50 text-xs text-gray-500">Tokens: '),Jx=T("<div><div>"),Xx=T('<p class="text-sm whitespace-pre-wrap">');const Zx=()=>{let e,t;const[r,i]=J(""),h=["Show me pods with high restart counts","List deployments not fully available","What services expose port 80?","Show cluster resource usage"];Qt(()=>{Fx(),t?.focus()}),Tt(()=>{Zi(),setTimeout(()=>{e?.scrollIntoView({behavior:"smooth"})},100)});async function _(l){l.preventDefault();const u=r().trim();u&&(i(""),await eo(u))}function f(l){eo(l)}function s(l){try{return ft.parse(l,{async:!1})}catch{return l}}return(()=>{var l=Wx(),u=l.firstChild,g=u.firstChild,p=g.nextSibling,b=p.firstChild,m=b.nextSibling,C=m.nextSibling,y=u.nextSibling,n=y.firstChild,d=y.nextSibling,a=d.firstChild,c=a.firstChild,v=c.nextSibling,x=a.nextSibling;x.firstChild,b.addEventListener("change",$=>jx($.target.value)),o(b,L(He,{get each(){return Ql()},children:$=>(()=>{var k=qx();return o(k,()=>$.name),ie(()=>k.value=$.id),k})()})),kr(m,"click",ma,!0),C.$$click=()=>po(!1),o(y,L(G,{get when(){return Zi().length===0},get children(){var $=Ux(),k=$.firstChild,O=k.nextSibling,B=O.nextSibling,D=B.nextSibling;return o(D,L(He,{each:h,children:I=>(()=>{var A=Kx();return A.$$click=()=>f(I),o(A,I),A})()})),$}}),n),o(y,L(He,{get each(){return Zi()},children:$=>(()=>{var k=Jx(),O=k.firstChild;return o(O,L(G,{get when(){return $.role==="assistant"},get fallback(){return(()=>{var B=Xx();return o(B,()=>$.content),B})()},get children(){return[(()=>{var B=Yx();return ie(()=>B.innerHTML=s($.content)),B})(),L(G,{get when(){return $.usage},get children(){var B=Gx();return B.firstChild,o(B,()=>$.usage?.totalTokens,null),B}})]}})),ie(B=>{var D=`flex ${$.role==="user"?"justify-end":"justify-start"}`,I=`max-w-[85%] rounded-lg px-4 py-3 ${$.role==="user"?"bg-k8s-blue text-white":"bg-k8s-dark text-gray-300"}`;return D!==B.e&&ze(k,B.e=D),I!==B.t&&ze(O,B.t=I),B},{e:void 0,t:void 0}),k})()}),n),o(y,L(G,{get when(){return li()},get children(){var $=Vx(),k=$.firstChild,O=k.firstChild,B=O.firstChild,D=B.firstChild,I=D.nextSibling;return I.nextSibling,$}}),n);var S=e;typeof S=="function"?Zt(S,n):e=n,d.addEventListener("submit",_),c.$$input=$=>i($.target.value);var E=t;return typeof E=="function"?Zt(E,c):t=c,o(x,()=>Ql().find($=>$.id===Zl())?.name||"AI",null),ie($=>{var k=li(),O=li()||!r().trim();return k!==$.e&&(c.disabled=$.e=k),O!==$.t&&(v.disabled=$.t=O),$},{e:void 0,t:void 0}),ie(()=>b.value=Zl()),ie(()=>c.value=r()),l})()};et(["click","input"]);var Qx=T('<div class="px-6 py-3 flex items-center gap-3"style="background:rgba(239, 68, 68, 0.1);border-bottom:1px solid rgba(239, 68, 68, 0.2)"><svg class="w-5 h-5 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--error-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div class="flex-1 min-w-0"><span class=font-medium style=color:var(--error-color)>Cluster not connected</span><span class="text-sm ml-2"style=color:var(--text-muted)>â Connect to a Kubernetes cluster to use KubeGraf</span></div><button class="px-3 py-1.5 rounded text-sm font-medium transition-all hover:opacity-80 flex items-center gap-1.5"style="background:rgba(239, 68, 68, 0.2);color:var(--error-color)"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>Retry'),e$=T('<div class="px-4 py-2 flex items-center gap-3"style="background:rgba(6, 182, 212, 0.1);border-bottom:1px solid rgba(6, 182, 212, 0.3);color:var(--accent-primary)"><div class=spinner style=width:16px;height:16px></div><span class="text-sm font-medium">'),t$=T('<div class="card p-4 mb-6 text-left max-w-lg mx-auto"><div class="text-xs font-semibold mb-2 uppercase tracking-wide"style=color:var(--error-color)>Error</div><div class="text-xs font-mono break-all mb-2"style=color:var(--text-secondary)></div><div class="text-sm font-medium mt-3"style=color:var(--text-primary)><div class=mb-2>Check your kubeconfig at:</div><code class="block px-3 py-2 rounded mb-3 text-xs font-mono"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)">~/.kube/config</code><div class=mb-2>Or run this command to verify access:</div><code class="block px-3 py-2 rounded text-xs font-mono"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)">kubectl cluster-info'),r$=T('<div class="absolute inset-0 z-10 flex items-center justify-center p-8"style=background:var(--bg-primary);pointer-events:auto><div class="max-w-3xl w-full"><div class="text-center mb-8"><div class="w-20 h-20 mx-auto mb-6 rounded-full flex items-center justify-center"style="background:rgba(6, 182, 212, 0.15)"><svg class="w-12 h-12"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg></div><h2 class="text-3xl font-bold mb-3"style=color:var(--text-primary)>No Cluster Connected</h2><p class="text-base mb-8"style=color:var(--text-secondary)>Connect to an existing Kubernetes cluster or create a local one to get started</p></div><div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"><div class="card p-6 hover:border-cyan-500/50 transition-all cursor-pointer"style="border:2px solid var(--border-color)"><div class="flex items-center gap-3 mb-4"><div class="w-12 h-12 rounded-lg flex items-center justify-center"style="background:rgba(6, 182, 212, 0.1)"><svg class="w-6 h-6"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg></div><h3 class="text-lg font-semibold"style=color:var(--text-primary)>Connect via kubeconfig</h3></div><p class="text-sm mb-4"style=color:var(--text-secondary)>Connect to an existing Kubernetes cluster using your kubeconfig file</p><ul class="text-xs space-y-2 mb-4"style=color:var(--text-muted)><li class="flex items-start gap-2"><span class=mt-1>â¢</span><span>Ensure kubeconfig is at <code class="px-1 py-0.5 rounded"style=background:var(--bg-tertiary)>~/.kube/config</code></span></li><li class="flex items-start gap-2"><span class=mt-1>â¢</span><span>Verify with: <code class="px-1 py-0.5 rounded"style=background:var(--bg-tertiary)>kubectl cluster-info</code></span></li><li class="flex items-start gap-2"><span class=mt-1>â¢</span><span>Click "Retry Connection" below</span></li></ul><button class="w-full px-4 py-2 rounded-lg text-sm font-medium transition-all hover:opacity-90 flex items-center justify-center gap-2"style=background:var(--accent-primary);color:#000><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>Retry Connection</button></div><div class="card p-6 hover:border-cyan-500/50 transition-all cursor-pointer"style="border:2px solid var(--border-color)"><div class="flex items-center gap-3 mb-4"><div class="w-12 h-12 rounded-lg flex items-center justify-center"style="background:rgba(34, 197, 94, 0.1)"><svg class="w-6 h-6"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:#22c55e><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg></div><h3 class="text-lg font-semibold"style=color:var(--text-primary)>Create Local Cluster</h3></div><p class="text-sm mb-4"style=color:var(--text-secondary)>Set up a local Kubernetes cluster using k3d, kind, or minikube</p><ul class="text-xs space-y-2 mb-4"style=color:var(--text-muted)><li class="flex items-start gap-2"><span class=mt-1>â¢</span><span>Requires Docker Desktop installed and running</span></li><li class="flex items-start gap-2"><span class=mt-1>â¢</span><span>Choose from k3d, kind, or minikube</span></li><li class="flex items-start gap-2"><span class=mt-1>â¢</span><span>Automatically connects after creation</span></li></ul><button class="w-full px-4 py-2 rounded-lg text-sm font-medium transition-all hover:opacity-90 flex items-center justify-center gap-2"style=background:#22c55e;color:#000><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>Go to Marketplace</button></div></div><div class="flex items-center justify-center gap-3"><button class="px-5 py-2.5 rounded-lg font-medium transition-all hover:opacity-90 flex items-center gap-2"style=background:var(--error-color);color:white><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>Retry Connection</button><a href=https://kubegraf.io/docs target=_blank class="px-5 py-2.5 rounded-lg font-medium transition-all hover:opacity-90 flex items-center gap-2"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg>Documentation'),s$=T('<div class="flex items-center gap-2 px-3 py-2 rounded-lg text-xs"style=background:var(--bg-secondary);color:var(--text-muted)><span></span><span>'),i$=T('<div class="flex h-screen overflow-hidden"style=background:var(--bg-primary)><div><main class="flex-1 overflow-auto p-6 relative"></main><footer class="px-6 py-2 border-t flex items-center justify-end text-xs"style=background:var(--bg-secondary);border-color:var(--border-color);color:var(--text-muted)><div class="flex items-center gap-4"><span class="flex items-center gap-1"><span></span></span><a href=https://github.com/kubegraf/kubegraf target=_blank class=hover:underline style=color:var(--accent-primary)>GitHub</a></div></footer></div><div class="fixed bottom-4 right-4 z-50 flex flex-col gap-2"></div><div class="fixed bottom-4 z-50"style=left:80px>'),n$=T('<div class=p-6 style=background:red;color:white;font-size:20px;z-index:9999;position:relative>Error: Component not found for view "<!>"'),l$=T("<div class=p-6 style=background:red;color:white;font-size:20px>Error rendering <!>: "),o$=T('<div class="animate-slide-in px-4 py-3 rounded-lg shadow-lg border max-w-sm"><div class="flex items-start gap-2"><span></span><span class=text-sm>');const a$=()=>L(sa,{}),c$=()=>L(sa,{}),d$=()=>L(Mi,{title:"Deploy App",description:"Deploy applications to your Kubernetes cluster with ease. Choose from templates, Helm charts, or custom YAML configurations.",icon:"M12 6v6m0 0v6m0-6h6m-6 0H6",comingSoon:!0,features:["Deploy from Helm charts","Deploy from YAML manifests","Application templates library","One-click deployment","Deployment validation","Rollback capabilities"]}),h$=()=>L(Mi,{title:"Releases",description:"Manage application releases and track deployment history across your cluster.",icon:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12",comingSoon:!0,features:["Release history tracking","Release comparison","Rollback to previous releases","Release notes and changelog","Release approval workflow"]}),u$=()=>L(Mi,{title:"Rollouts (Canary / Blue-Green)",description:"Advanced deployment strategies including canary and blue-green rollouts for zero-downtime deployments.",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z",comingSoon:!0,features:["Canary deployments","Blue-Green deployments","Traffic splitting","Automatic rollback on errors","Progressive delivery","Integration with Argo Rollouts"]}),to={dashboard:rl,pods:ou,deployments:yu,statefulsets:Lu,daemonsets:Hu,cronjobs:Yu,jobs:sf,services:vf,ingresses:kf,configmaps:Bf,secrets:Wf,certificates:eg,nodes:gg,resourcemap:Im,security:h1,plugins:K1,cost:u_,drift:$_,events:I_,monitoredevents:s2,logs:O2,anomalies:sb,connectors:g2,aiagents:k2,apps:a$,customapps:c$,settings:ix,deployapp:d$,releases:h$,rollouts:u$,storage:dy,rbac:ky,networkpolicies:Ay,usermanagement:Ny,terminal:rl},f$=()=>{const[e]=qe(De.getStatus),[t,r]=J(!1);Qt(()=>{ls.connect();const h=ls.subscribe(_=>{_.type==="connection"&&r(_.data.connected)});return()=>{h(),ls.disconnect()}});const i=()=>e()?.connected!==!1;return(()=>{var h=i$(),_=h.firstChild,f=_.firstChild,s=f.nextSibling,l=s.firstChild,u=l.firstChild,g=u.firstChild;u.nextSibling;var p=_.nextSibling,b=p.nextSibling;return o(h,L(zc,{}),_),o(_,L(Qd,{}),f),o(_,L(G,{get when(){return!i()},get children(){var m=Qx(),C=m.firstChild,y=C.nextSibling,n=y.firstChild;n.nextSibling;var d=y.nextSibling;return d.$$click=()=>location.reload(),m}}),f),o(_,L(G,{get when(){return Fc()},get children(){var m=e$(),C=m.firstChild,y=C.nextSibling;return o(y,jc),m}}),f),o(f,L(G,{get when(){return Re(()=>!i())()&&wr()!=="settings"},get children(){var m=r$(),C=m.firstChild,y=C.firstChild,n=y.firstChild;n.firstChild;var d=n.nextSibling;d.nextSibling;var a=y.nextSibling,c=a.firstChild,v=c.firstChild,x=v.firstChild;x.firstChild,x.nextSibling;var S=v.nextSibling,E=S.nextSibling,$=E.firstChild,k=$.firstChild,O=k.nextSibling,B=O.firstChild;B.nextSibling;var D=$.nextSibling,I=D.firstChild,A=I.nextSibling,P=A.firstChild;P.nextSibling;var R=E.nextSibling,N=c.nextSibling,w=N.firstChild,H=w.firstChild;H.firstChild,H.nextSibling;var z=w.nextSibling,U=z.nextSibling,te=U.nextSibling,F=a.nextSibling,W=F.firstChild;return W.nextSibling,c.$$click=()=>{alert(`To connect to an existing cluster:

1. Ensure your kubeconfig is set up (~/.kube/config)
2. Verify access: kubectl cluster-info
3. Click "Retry Connection" or refresh the page

KubeGraf will automatically detect and connect to your cluster.`)},R.$$click=V=>{V.stopPropagation(),location.reload()},N.$$click=()=>{At("apps"),sessionStorage.setItem("kubegraf-auto-filter","Local Cluster")},te.$$click=V=>{V.stopPropagation(),sessionStorage.setItem("kubegraf-auto-filter","Local Cluster"),sessionStorage.setItem("kubegraf-default-tab","marketplace"),At("apps")},o(C,L(G,{get when(){return e()?.error},get children(){var V=t$(),de=V.firstChild,M=de.nextSibling,j=M.nextSibling,K=j.firstChild,Z=K.nextSibling,se=Z.nextSibling;return se.nextSibling,o(M,()=>e()?.error),V}}),F),W.$$click=()=>location.reload(),m}}),null),o(f,L(G,{get when(){return i()||wr()==="settings"||wr()==="logs"},get children(){return(()=>{const m=wr(),C=to[m];if(!C)return console.error("[App] Component not found for view:",m,"Available views:",Object.keys(to)),(()=>{var y=n$(),n=y.firstChild,d=n.nextSibling;return d.nextSibling,o(y,m,d),y})();try{return L(fc,{component:C})}catch(y){return console.error("[App] Error rendering component:",y),(()=>{var n=l$(),d=n.firstChild,a=d.nextSibling;return a.nextSibling,o(n,m,a),o(n,()=>String(y),null),n})()}})()}}),null),o(u,()=>e()?.connected?"Connected":"Disconnected",null),o(h,L(G,{get when(){return go()},get children(){return L(Zx,{})}}),p),o(p,L(He,{get each(){return mc()},children:m=>(()=>{var C=o$(),y=C.firstChild,n=y.firstChild,d=n.nextSibling;return o(n,(()=>{var a=Re(()=>m.type==="error");return()=>a()?"â":Re(()=>m.type==="warning")()?"â ï¸":m.type==="success"?"â":"â¹ï¸"})()),o(d,()=>m.message),ie(a=>{var c=m.type==="error"?"rgba(239, 68, 68, 0.1)":m.type==="warning"?"rgba(245, 158, 11, 0.1)":m.type==="success"?"rgba(34, 197, 94, 0.1)":"rgba(6, 182, 212, 0.1)",v=m.type==="error"?"rgba(239, 68, 68, 0.3)":m.type==="warning"?"rgba(245, 158, 11, 0.3)":m.type==="success"?"rgba(34, 197, 94, 0.3)":"rgba(6, 182, 212, 0.3)",x=m.type==="error"?"var(--error-color)":m.type==="warning"?"var(--warning-color)":m.type==="success"?"var(--success-color)":"var(--accent-primary)";return c!==a.e&&ce(C,"background",a.e=c),v!==a.t&&ce(C,"border-color",a.t=v),x!==a.a&&ce(C,"color",a.a=x),a},{e:void 0,t:void 0,a:void 0}),C})()})),o(b,L(G,{get when(){return It()},get children(){var m=s$(),C=m.firstChild,y=C.nextSibling;return o(y,()=>t()?"Live":"Offline"),ie(()=>ze(C,`w-2 h-2 rounded-full ${t()?"bg-green-500":"bg-red-500"}`)),m}})),ie(m=>{var C=`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${It()?"ml-16":"ml-52"}`,y=`w-2 h-2 rounded-full ${e()?.connected?"bg-green-500":"bg-red-500"}`;return C!==m.e&&ze(_,m.e=C),y!==m.t&&ze(g,m.t=y),m},{e:void 0,t:void 0}),h})()};et(["click"]);const ro=document.getElementById("root");ro&&ic(()=>L(f$,{}),ro);
