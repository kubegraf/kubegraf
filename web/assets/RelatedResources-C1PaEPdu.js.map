{"version":3,"file":"RelatedResources-C1PaEPdu.js","sources":["../../src/components/RelatedResources.tsx"],"sourcesContent":["// Copyright 2025 KubeGraf Contributors\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component, Show, For, createResource } from 'solid-js';\nimport { api } from '../services/api';\nimport { setCurrentView } from '../stores/ui';\nimport { buildPodFilterQuery } from '../utils/workload-navigation';\n\ninterface RelatedResourcesProps {\n  namespace: string;\n  kind: string; // deployment, statefulset, daemonset, job, cronjob\n  name: string;\n}\n\nconst RelatedResources: Component<RelatedResourcesProps> = (props) => {\n  const [related] = createResource(\n    () => ({ namespace: props.namespace, kind: props.kind, name: props.name }),\n    async (params) => {\n      try {\n        return await api.getWorkloadRelated(params.namespace, params.kind, params.name);\n      } catch (error) {\n        console.error('Failed to fetch related resources:', error);\n        return { pods: [], services: [], ingresses: [], replicasets: [] };\n      }\n    }\n  );\n\n  const handleNavigateToPods = () => {\n    const query = buildPodFilterQuery({\n      kind: props.kind,\n      name: props.name,\n      namespace: props.namespace,\n    });\n    setCurrentView('pods');\n    // Update URL with filter params\n    const url = new URL(window.location.href);\n    url.search = query;\n    window.history.pushState({}, '', url.toString());\n  };\n\n  const handleNavigateToServices = () => {\n    setCurrentView('services');\n    // TODO: Add filtering for services when implemented\n  };\n\n  const handleNavigateToIngresses = () => {\n    setCurrentView('ingresses');\n    // TODO: Add filtering for ingresses when implemented\n  };\n\n  return (\n    <Show when={related()}>\n      {(data) => {\n        const pods = data().pods || [];\n        const services = data().services || [];\n        const ingresses = data().ingresses || [];\n        const replicasets = data().replicasets || [];\n        const hasRelated = pods.length > 0 || services.length > 0 || ingresses.length > 0 || replicasets.length > 0;\n\n        return (\n          <Show when={hasRelated}>\n            <div class=\"space-y-3\">\n              <h3 class=\"text-sm font-semibold\" style={{ color: 'var(--text-primary)' }}>Related</h3>\n              <div class=\"flex flex-wrap gap-2\">\n                <Show when={pods.length > 0}>\n                  <button\n                    onClick={handleNavigateToPods}\n                    class=\"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium transition-colors hover:opacity-80 focus:outline-none focus:ring-1 focus:ring-offset-1\"\n                    style={{\n                      background: 'rgba(14, 165, 233, 0.15)',\n                      color: '#0ea5e9',\n                      border: '1px solid rgba(14, 165, 233, 0.3)',\n                    }}\n                  >\n                    Pods ({pods.length})\n                  </button>\n                </Show>\n                <Show when={props.kind === 'deployment' && replicasets.length > 0}>\n                  <button\n                    onClick={() => setCurrentView('deployments')}\n                    class=\"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium transition-colors hover:opacity-80 focus:outline-none focus:ring-1 focus:ring-offset-1\"\n                    style={{\n                      background: 'rgba(14, 165, 233, 0.15)',\n                      color: '#0ea5e9',\n                      border: '1px solid rgba(14, 165, 233, 0.3)',\n                    }}\n                  >\n                    ReplicaSets ({replicasets.length})\n                  </button>\n                </Show>\n                <Show when={services.length > 0}>\n                  <button\n                    onClick={handleNavigateToServices}\n                    class=\"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium transition-colors hover:opacity-80 focus:outline-none focus:ring-1 focus:ring-offset-1\"\n                    style={{\n                      background: 'rgba(14, 165, 233, 0.15)',\n                      color: '#0ea5e9',\n                      border: '1px solid rgba(14, 165, 233, 0.3)',\n                    }}\n                  >\n                    Services ({services.length})\n                  </button>\n                </Show>\n                <Show when={ingresses.length > 0}>\n                  <button\n                    onClick={handleNavigateToIngresses}\n                    class=\"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium transition-colors hover:opacity-80 focus:outline-none focus:ring-1 focus:ring-offset-1\"\n                    style={{\n                      background: 'rgba(14, 165, 233, 0.15)',\n                      color: '#0ea5e9',\n                      border: '1px solid rgba(14, 165, 233, 0.3)',\n                    }}\n                  >\n                    Ingresses ({ingresses.length})\n                  </button>\n                </Show>\n              </div>\n            </div>\n          </Show>\n        );\n      }}\n    </Show>\n  );\n};\n\nexport default RelatedResources;\n\n\n"],"names":["RelatedResources","props","related","createResource","namespace","kind","name","params","api","getWorkloadRelated","error","console","pods","services","ingresses","replicasets","handleNavigateToPods","query","buildPodFilterQuery","setCurrentView","url","URL","window","location","href","search","history","pushState","toString","handleNavigateToServices","handleNavigateToIngresses","_$createComponent","Show","when","children","data","hasRelated","length","_el$","_tmpl$5","_el$2","firstChild","_el$3","nextSibling","_$insert","_el$4","_tmpl$","_el$5","_el$7","$$click","_$memo","_el$8","_tmpl$2","_el$9","_el$1","_el$10","_tmpl$3","_el$11","_el$13","_el$14","_tmpl$4","_el$15","_el$17","_$delegateEvents"],"mappings":"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"}