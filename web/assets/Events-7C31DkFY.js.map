{"version":3,"file":"Events-7C31DkFY.js","sources":["../../src/routes/Events.tsx"],"sourcesContent":["import { Component, For, Show, createSignal, createMemo, onMount, onCleanup, createResource, createEffect } from 'solid-js';\nimport { api } from '../services/api';\nimport { wsService } from '../services/websocket';\nimport { namespace } from '../stores/cluster';\n\ninterface KubeEvent {\n  time: string;\n  type: string;\n  reason: string;\n  object: string;\n  kind: string;\n  message: string;\n  namespace: string;\n  count: number;\n  source: string;\n}\n\ntype FilterType = 'all' | 'Normal' | 'Warning';\n\nconst Events: Component = () => {\n  const [events, setEvents] = createSignal<KubeEvent[]>([]);\n  const [filter, setFilter] = createSignal<FilterType>('all');\n  const [search, setSearch] = createSignal('');\n  const [paused, setPaused] = createSignal(false);\n  const [liveEvents, setLiveEvents] = createSignal<KubeEvent[]>([]);\n\n  // Signal to trigger refetch\n  const [fetchTrigger, setFetchTrigger] = createSignal(0);\n\n  // Fetch initial events - use a combined dependency to ensure we always fetch\n  const [initialEvents, { refetch }] = createResource(\n    () => ({ ns: namespace(), trigger: fetchTrigger() }),\n    async ({ ns }) => {\n      try {\n        console.log('[Events] Fetching events for namespace:', ns);\n        // Pass undefined for \"All Namespaces\" or empty string\n        const nsParam = (ns === '_all' || ns === 'All Namespaces' || !ns) ? undefined : ns;\n        const response = await api.getEvents(nsParam, 200);\n        console.log('[Events] Received events:', response?.events?.length || 0, 'total:', response?.total || 0);\n        return response?.events || [];\n      } catch (err) {\n        console.error('[Events] Failed to fetch events:', err);\n        return [];\n      }\n    }\n  );\n\n  // Initialize events when initial data loads\n  createEffect(() => {\n    const initial = initialEvents();\n    const loading = initialEvents.loading;\n    const error = initialEvents.error;\n    \n    console.log('[Events] createEffect triggered:', {\n      hasInitial: !!initial,\n      initialLength: initial?.length || 0,\n      loading,\n      error: error ? String(error) : null\n    });\n    \n    if (initial && Array.isArray(initial)) {\n      if (initial.length > 0) {\n        console.log('[Events] Setting events:', initial.length);\n        setEvents(initial);\n      } else {\n        console.log('[Events] Initial events array is empty');\n      }\n    } else if (!loading && error) {\n      console.error('[Events] Error loading events:', error);\n    } else if (!loading && !initial) {\n      console.log('[Events] No initial events data');\n    }\n  });\n\n  // Trigger initial fetch on mount\n  onMount(() => {\n    // Force a refetch to ensure events load\n    setFetchTrigger(prev => prev + 1);\n  });\n\n  // Subscribe to real-time events via WebSocket\n  onMount(() => {\n    const unsubscribe = wsService.subscribe((msg) => {\n      if (msg.type === 'event' && !paused()) {\n        const newEvent = msg.data as KubeEvent;\n        // Filter by namespace if selected\n        const ns = namespace();\n        if (ns && ns !== 'All Namespaces' && newEvent.namespace !== ns) {\n          return;\n        }\n        setLiveEvents(prev => {\n          const current = Array.isArray(prev) ? prev : [];\n          return [newEvent, ...current].slice(0, 50);\n        });\n        setEvents(prev => {\n          const current = Array.isArray(prev) ? prev : [];\n          return [newEvent, ...current].slice(0, 500);\n        });\n      }\n    });\n\n    return () => unsubscribe();\n  });\n\n  const filteredEvents = createMemo(() => {\n    let all = events();\n    // Ensure all is always an array\n    if (!Array.isArray(all)) {\n      console.warn('[Events] events() is not an array:', typeof all, all);\n      all = [];\n    }\n    const filterType = filter();\n    const query = search().toLowerCase();\n\n    console.log('[Events] filteredEvents memo:', {\n      totalEvents: all.length,\n      filterType,\n      query,\n      hasQuery: !!query\n    });\n\n    if (filterType !== 'all') {\n      all = all.filter(e => e.type === filterType);\n    }\n\n    if (query) {\n      all = all.filter(e =>\n        e.message?.toLowerCase().includes(query) ||\n        e.object?.toLowerCase().includes(query) ||\n        e.reason?.toLowerCase().includes(query) ||\n        e.namespace?.toLowerCase().includes(query)\n      );\n    }\n\n    console.log('[Events] Filtered result:', all.length);\n    return all;\n  });\n\n  const eventCounts = createMemo(() => {\n    const all = events();\n    return {\n      total: all.length,\n      normal: all.filter(e => e.type === 'Normal').length,\n      warning: all.filter(e => e.type === 'Warning').length,\n    };\n  });\n\n  const formatTime = (timeStr: string) => {\n    if (!timeStr) return 'Unknown';\n    const date = new Date(timeStr);\n    if (isNaN(date.getTime())) return 'Unknown';\n    const now = new Date();\n    const diff = now.getTime() - date.getTime();\n\n    if (diff < 60000) return 'Just now';\n    if (diff < 3600000) return `${Math.floor(diff / 60000)}m ago`;\n    if (diff < 86400000) return `${Math.floor(diff / 3600000)}h ago`;\n    return `${Math.floor(diff / 86400000)}d ago`;\n  };\n\n  const getKindIcon = (kind: string) => {\n    switch (kind?.toLowerCase()) {\n      case 'pod': return 'M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4';\n      case 'deployment': return 'M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10';\n      case 'service': return 'M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9';\n      case 'node': return 'M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01';\n      case 'replicaset': return 'M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4';\n      default: return 'M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z';\n    }\n  };\n\n  return (\n    <div class=\"space-y-4\">\n      {/* Header */}\n      <div class=\"flex items-center justify-between flex-wrap gap-4\">\n        <div>\n          <h1 class=\"text-2xl font-bold\" style={{ color: 'var(--text-primary)' }}>Events</h1>\n          <p style={{ color: 'var(--text-secondary)' }}>Real-time cluster events stream</p>\n        </div>\n        <div class=\"flex items-center gap-3\">\n          <button\n            onClick={() => setPaused(!paused())}\n            class={`px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-all ${\n              paused()\n                ? 'bg-gradient-to-r from-green-500/20 to-emerald-500/20 border border-green-500/40'\n                : 'bg-gradient-to-r from-amber-500/20 to-orange-500/20 border border-amber-500/40'\n            }`}\n            style={{ color: paused() ? 'var(--success-color)' : 'var(--warning-color)' }}\n          >\n            <Show when={paused()} fallback={\n              <>\n                <svg class=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path d=\"M6 4h4v16H6V4zm8 0h4v16h-4V4z\" />\n                </svg>\n                Pause\n              </>\n            }>\n              <svg class=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path d=\"M8 5v14l11-7z\" />\n              </svg>\n              Resume\n            </Show>\n          </button>\n          <button\n            onClick={() => refetch()}\n            class=\"icon-btn\"\n            style={{ background: 'var(--bg-secondary)' }}\n            title=\"Refresh Events\"\n          >\n            <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\n            </svg>\n          </button>\n        </div>\n      </div>\n\n      {/* Live indicator and stats */}\n      <div class=\"flex flex-wrap items-center gap-3\">\n        <div class={`card px-4 py-2 flex items-center gap-2 ${!paused() ? 'animate-pulse' : ''}`}\n             style={{ 'border-left': `3px solid ${paused() ? 'var(--warning-color)' : 'var(--success-color)'}` }}>\n          <span class={`w-3 h-3 rounded-full ${paused() ? 'bg-amber-500' : 'bg-green-500 animate-pulse'}`} />\n          <span style={{ color: 'var(--text-secondary)' }} class=\"text-sm\">\n            {paused() ? 'Paused' : 'Live'}\n          </span>\n          <span class=\"text-xl font-bold\" style={{ color: 'var(--text-primary)' }}>{liveEvents().length}</span>\n          <span style={{ color: 'var(--text-muted)' }} class=\"text-xs\">new</span>\n        </div>\n\n        <div class=\"card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2\"\n             style={{ 'border-left': '3px solid var(--accent-primary)' }}\n             onClick={() => setFilter('all')}>\n          <span style={{ color: 'var(--text-secondary)' }} class=\"text-sm\">Total</span>\n          <span class=\"text-xl font-bold\" style={{ color: 'var(--text-primary)' }}>{eventCounts().total}</span>\n        </div>\n\n        <div class=\"card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2\"\n             style={{ 'border-left': '3px solid var(--success-color)' }}\n             onClick={() => setFilter('Normal')}>\n          <span style={{ color: 'var(--text-secondary)' }} class=\"text-sm\">Normal</span>\n          <span class=\"text-xl font-bold\" style={{ color: 'var(--success-color)' }}>{eventCounts().normal}</span>\n        </div>\n\n        <div class=\"card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2\"\n             style={{ 'border-left': '3px solid var(--warning-color)' }}\n             onClick={() => setFilter('Warning')}>\n          <span style={{ color: 'var(--text-secondary)' }} class=\"text-sm\">Warning</span>\n          <span class=\"text-xl font-bold\" style={{ color: 'var(--warning-color)' }}>{eventCounts().warning}</span>\n        </div>\n\n        <div class=\"flex-1\" />\n\n        <input\n          type=\"text\"\n          placeholder=\"Search events...\"\n          value={search()}\n          onInput={(e) => setSearch(e.currentTarget.value)}\n          class=\"px-3 py-2 rounded-lg text-sm w-64\"\n          style={{ background: 'var(--bg-secondary)', color: 'var(--text-primary)', border: '1px solid var(--border-color)' }}\n        />\n\n        <select\n          value={filter()}\n          onChange={(e) => setFilter(e.currentTarget.value as FilterType)}\n          class=\"px-3 py-2 rounded-lg text-sm\"\n          style={{ background: 'var(--bg-secondary)', color: 'var(--text-primary)', border: '1px solid var(--border-color)' }}\n        >\n          <option value=\"all\">All Types</option>\n          <option value=\"Normal\">Normal</option>\n          <option value=\"Warning\">Warning</option>\n        </select>\n      </div>\n\n      {/* Events stream */}\n      <div class=\"card overflow-hidden\">\n        <Show\n          when={!initialEvents.loading}\n          fallback={\n            <div class=\"p-8 text-center\">\n              <div class=\"spinner mx-auto mb-2\" />\n              <span style={{ color: 'var(--text-muted)' }}>Loading events...</span>\n            </div>\n          }\n        >\n          <div class=\"overflow-y-auto\" style={{ 'max-height': 'calc(100vh - 320px)' }}>\n            <For each={filteredEvents()} fallback={\n              <div class=\"p-8 text-center\" style={{ color: 'var(--text-muted)' }}>\n                No events found\n              </div>\n            }>\n              {(event, index) => (\n                <div\n                  class={`p-4 border-b transition-all hover:bg-white/5 ${index() < liveEvents().length && !paused() ? 'animate-slide-in' : ''}`}\n                  style={{\n                    'border-color': 'var(--border-color)',\n                    'border-left': `4px solid ${event.type === 'Warning' ? 'var(--warning-color)' : 'var(--success-color)'}`,\n                  }}\n                >\n                  <div class=\"flex items-start gap-4\">\n                    {/* Kind icon */}\n                    <div class=\"flex-shrink-0 p-2 rounded-lg\" style={{ background: 'var(--bg-tertiary)' }}>\n                      <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"\n                           style={{ color: event.type === 'Warning' ? 'var(--warning-color)' : 'var(--accent-primary)' }}>\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d={getKindIcon(event.kind)} />\n                      </svg>\n                    </div>\n\n                    {/* Event content */}\n                    <div class=\"flex-1 min-w-0\">\n                      <div class=\"flex items-center gap-2 flex-wrap\">\n                        <span class={`px-2 py-0.5 rounded text-xs font-medium ${\n                          event.type === 'Warning'\n                            ? 'bg-amber-500/20 text-amber-400'\n                            : 'bg-green-500/20 text-green-400'\n                        }`}>\n                          {event.type}\n                        </span>\n                        <span class=\"px-2 py-0.5 rounded text-xs\"\n                              style={{ background: 'var(--bg-tertiary)', color: 'var(--accent-primary)' }}>\n                          {event.reason}\n                        </span>\n                        <span class=\"text-xs\" style={{ color: 'var(--text-muted)' }}>\n                          {event.kind}/{event.object}\n                        </span>\n                        <Show when={event.namespace}>\n                          <span class=\"text-xs px-2 py-0.5 rounded\" style={{ background: 'var(--bg-tertiary)', color: 'var(--text-secondary)' }}>\n                            {event.namespace}\n                          </span>\n                        </Show>\n                      </div>\n                      <p class=\"mt-1 text-sm\" style={{ color: 'var(--text-primary)' }}>\n                        {event.message}\n                      </p>\n                      <div class=\"mt-2 flex items-center gap-4 text-xs\" style={{ color: 'var(--text-muted)' }}>\n                        <span>{formatTime(event.time)}</span>\n                        <Show when={event.count > 1}>\n                          <span class=\"px-2 py-0.5 rounded\" style={{ background: 'var(--bg-tertiary)' }}>\n                            x{event.count}\n                          </span>\n                        </Show>\n                        <Show when={event.source}>\n                          <span>Source: {event.source}</span>\n                        </Show>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </For>\n          </div>\n        </Show>\n      </div>\n    </div>\n  );\n};\n\nexport default Events;\n"],"names":["Events","events","setEvents","createSignal","filter","setFilter","search","setSearch","paused","setPaused","liveEvents","setLiveEvents","fetchTrigger","setFetchTrigger","initialEvents","refetch","createResource","ns","namespace","trigger","console","log","nsParam","undefined","response","api","getEvents","length","total","err","error","createEffect","initial","loading","hasInitial","initialLength","String","Array","isArray","onMount","prev","unsubscribe","wsService","subscribe","msg","type","newEvent","data","current","slice","filteredEvents","createMemo","all","warn","filterType","query","toLowerCase","totalEvents","hasQuery","e","message","includes","object","reason","eventCounts","normal","warning","formatTime","timeStr","date","Date","isNaN","getTime","now","diff","Math","floor","getKindIcon","kind","_el$","_tmpl$3","_el$2","firstChild","_el$3","_el$4","nextSibling","_el$6","_el$7","_el$9","_el$0","_el$1","_el$10","_el$11","_el$12","_el$14","_el$15","_el$16","_el$17","_el$18","_el$19","_el$20","_el$21","_el$22","_el$23","_el$24","_el$25","_el$26","$$click","_$insert","_$createComponent","Show","when","fallback","_tmpl$4","children","_tmpl$","$$input","currentTarget","value","addEventListener","_el$29","_tmpl$5","_el$30","_el$27","_tmpl$2","For","each","_tmpl$6","event","index","_el$33","_tmpl$0","_el$34","_el$35","_el$36","_el$37","_el$38","_el$39","_el$40","_el$41","_el$42","_el$43","_el$45","_el$46","_el$47","_el$44","_tmpl$7","time","count","_el$48","_tmpl$8","source","_el$50","_tmpl$9","_$effect","_p$","_v$6","_v$7","_v$8","_v$9","_v$0","_$className","t","_$setStyleProperty","a","o","_$setAttribute","i","_v$","_v$2","_v$3","_v$4","_v$5","_$delegateEvents"],"mappings":"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"}