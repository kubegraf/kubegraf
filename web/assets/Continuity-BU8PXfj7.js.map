{"version":3,"file":"Continuity-BU8PXfj7.js","sources":["../../src/routes/Continuity.tsx"],"sourcesContent":["import { Component, createSignal, createResource, Show, For } from 'solid-js';\nimport { api } from '../services/api';\nimport { addNotification } from '../stores/ui';\n\nconst Continuity: Component = () => {\n  const [window, setWindow] = createSignal('7d');\n  const [summary, { refetch }] = createResource(\n    () => window(),\n    async (w) => {\n      try {\n        console.log('[Continuity] Fetching continuity summary for window:', w);\n        const data = await api.getContinuitySummary(w);\n        console.log('[Continuity] Received continuity data:', data);\n        // Ensure all required fields exist with defaults\n        const result = {\n          incidents_count: data?.incidents_count ?? 0,\n          major_incidents_count: data?.major_incidents_count ?? 0,\n          deployments_with_failures: data?.deployments_with_failures ?? [],\n          node_issues: data?.node_issues ?? [],\n          window: data?.window ?? w,\n          last_seen_at: data?.last_seen_at ?? new Date().toISOString(),\n        };\n        console.log('[Continuity] Processed continuity result:', result);\n        return result;\n      } catch (error: any) {\n        console.error('[Continuity] Continuity summary error:', error);\n        // Return default structure on error instead of throwing\n        return {\n          incidents_count: 0,\n          major_incidents_count: 0,\n          deployments_with_failures: [],\n          node_issues: [],\n          window: w,\n          last_seen_at: new Date().toISOString(),\n        };\n      }\n    }\n  );\n\n  const formatTime = (timeStr: string) => {\n    try {\n      const date = new Date(timeStr);\n      return date.toLocaleString();\n    } catch {\n      return timeStr;\n    }\n  };\n\n  return (\n    <div class=\"space-y-6 p-6\">\n      <div class=\"flex items-center justify-between mb-6\">\n        <div>\n          <h1 class=\"text-2xl font-bold\" style={{ color: 'var(--text-primary)' }}>\n            Continuity Tracking\n          </h1>\n          <p class=\"text-sm mt-1\" style={{ color: 'var(--text-secondary)' }}>\n            Track incidents and issues since your last session\n          </p>\n        </div>\n        <div class=\"flex items-center gap-3\">\n          <select\n            value={window()}\n            onChange={(e) => setWindow(e.currentTarget.value)}\n            class=\"px-4 py-2 rounded-lg text-sm\"\n            style={{\n              background: 'var(--bg-secondary)',\n              color: 'var(--text-primary)',\n              border: '1px solid var(--border-color)',\n            }}\n          >\n            <option value=\"24h\">Last 24 hours</option>\n            <option value=\"3d\">Last 3 days</option>\n            <option value=\"7d\">Last 7 days</option>\n            <option value=\"14d\">Last 14 days</option>\n            <option value=\"30d\">Last 30 days</option>\n          </select>\n          <button\n            onClick={() => refetch()}\n            class=\"px-4 py-2 rounded-lg text-sm font-medium\"\n            style={{\n              background: 'var(--accent-primary)',\n              color: '#000',\n            }}\n          >\n            Refresh\n          </button>\n        </div>\n      </div>\n\n      <Show when={summary.loading}>\n        <div class=\"flex items-center justify-center py-12\">\n          <div class=\"spinner\" style={{ width: '32px', height: '32px' }} />\n        </div>\n      </Show>\n\n      <Show when={summary.error}>\n        <div class=\"card p-6 text-center\">\n          <p style={{ color: 'var(--error-color)' }}>\n            Failed to load continuity summary. Please try again.\n          </p>\n        </div>\n      </Show>\n\n      <Show when={summary()}>\n        {(data) => (\n          <div class=\"space-y-6\">\n            {/* Summary Cards */}\n            <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n              <div class=\"card p-6\">\n                <div class=\"text-sm font-medium mb-2\" style={{ color: 'var(--text-secondary)' }}>\n                  Total Incidents\n                </div>\n                <div class=\"text-3xl font-bold\" style={{ color: 'var(--text-primary)' }}>\n                  {data().incidents_count}\n                </div>\n                <div class=\"text-xs mt-2\" style={{ color: 'var(--text-muted)' }}>\n                  Since {formatTime(data().last_seen_at)}\n                </div>\n              </div>\n\n              <div class=\"card p-6\">\n                <div class=\"text-sm font-medium mb-2\" style={{ color: 'var(--text-secondary)' }}>\n                  Major Incidents\n                </div>\n                <div class=\"text-3xl font-bold\" style={{ color: 'var(--error-color)' }}>\n                  {data().major_incidents_count}\n                </div>\n                <div class=\"text-xs mt-2\" style={{ color: 'var(--text-muted)' }}>\n                  Warning-level events\n                </div>\n              </div>\n\n              <div class=\"card p-6\">\n                <div class=\"text-sm font-medium mb-2\" style={{ color: 'var(--text-secondary)' }}>\n                  Deployments with Failures\n                </div>\n                <div class=\"text-3xl font-bold\" style={{ color: 'var(--text-primary)' }}>\n                  {data().deployments_with_failures.length}\n                </div>\n                <div class=\"text-xs mt-2\" style={{ color: 'var(--text-muted)' }}>\n                  Deployments affected\n                </div>\n              </div>\n\n              <div class=\"card p-6\">\n                <div class=\"text-sm font-medium mb-2\" style={{ color: 'var(--text-secondary)' }}>\n                  Node Issues\n                </div>\n                <div class=\"text-3xl font-bold\" style={{ color: 'var(--warning-color)' }}>\n                  {data().node_issues.length}\n                </div>\n                <div class=\"text-xs mt-2\" style={{ color: 'var(--text-muted)' }}>\n                  Nodes with problems\n                </div>\n              </div>\n            </div>\n\n            {/* Deployments with Failures */}\n            <Show when={data().deployments_with_failures.length > 0}>\n              <div class=\"card p-6\">\n                <h2 class=\"text-lg font-semibold mb-4\" style={{ color: 'var(--text-primary)' }}>\n                  Deployments with Failures\n                </h2>\n                <div class=\"space-y-2\">\n                  <For each={data().deployments_with_failures}>\n                    {(deployment) => (\n                      <div\n                        class=\"px-4 py-2 rounded-lg\"\n                        style={{\n                          background: 'var(--bg-tertiary)',\n                          color: 'var(--text-primary)',\n                        }}\n                      >\n                        {deployment}\n                      </div>\n                    )}\n                  </For>\n                </div>\n              </div>\n            </Show>\n\n            {/* Node Issues */}\n            <Show when={data().node_issues.length > 0}>\n              <div class=\"card p-6\">\n                <h2 class=\"text-lg font-semibold mb-4\" style={{ color: 'var(--text-primary)' }}>\n                  Node Issues\n                </h2>\n                <div class=\"space-y-2\">\n                  <For each={data().node_issues}>\n                    {(node) => (\n                      <div\n                        class=\"px-4 py-2 rounded-lg\"\n                        style={{\n                          background: 'var(--bg-tertiary)',\n                          color: 'var(--text-primary)',\n                        }}\n                      >\n                        {node}\n                      </div>\n                    )}\n                  </For>\n                </div>\n              </div>\n            </Show>\n\n            {/* Empty State */}\n            <Show when={data().incidents_count === 0 && data().deployments_with_failures.length === 0 && data().node_issues.length === 0}>\n              <div class=\"card p-12 text-center\">\n                <div class=\"text-4xl mb-4\">âœ…</div>\n                <h3 class=\"text-lg font-semibold mb-2\" style={{ color: 'var(--text-primary)' }}>\n                  No Issues Detected\n                </h3>\n                <p style={{ color: 'var(--text-secondary)' }}>\n                  Your cluster has been running smoothly since {formatTime(data().last_seen_at)}\n                </p>\n              </div>\n            </Show>\n\n            {/* Metadata */}\n            <div class=\"card p-4\">\n              <div class=\"text-xs\" style={{ color: 'var(--text-muted)' }}>\n                <div>Window: {data().window}</div>\n                <div>Last seen: {formatTime(data().last_seen_at)}</div>\n              </div>\n            </div>\n          </div>\n        )}\n      </Show>\n    </div>\n  );\n};\n\nexport default Continuity;\n\n\n"],"names":["Continuity","window","setWindow","createSignal","summary","refetch","createResource","w","console","log","data","api","getContinuitySummary","result","incidents_count","major_incidents_count","deployments_with_failures","node_issues","last_seen_at","Date","toISOString","error","formatTime","timeStr","date","toLocaleString","_el$","_tmpl$3","_el$2","firstChild","_el$3","_el$4","nextSibling","_el$6","_el$7","_el$8","addEventListener","e","currentTarget","value","$$click","_$insert","_$createComponent","Show","when","loading","children","_el$9","_tmpl$","_el$1","_tmpl$2","_el$11","_tmpl$7","_el$12","_el$13","_el$14","_el$15","_el$16","_el$18","_el$19","_el$20","_el$22","_el$23","_el$24","_el$26","_el$27","_el$28","_el$41","_el$42","_el$43","_el$45","length","_el$30","_tmpl$4","_el$31","_el$32","For","each","deployment","_el$47","_tmpl$8","_el$33","_tmpl$5","_el$34","_el$35","node","_el$48","_$memo","_el$36","_tmpl$6","_el$37","_el$38","_el$39","_$effect","_$delegateEvents"],"mappings":"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"}