(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const m of a)if(m.type==="childList")for(const d of m.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function r(a){const m={};return a.integrity&&(m.integrity=a.integrity),a.referrerPolicy&&(m.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?m.credentials="include":a.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function l(a){if(a.ep)return;a.ep=!0;const m=r(a);fetch(a.href,m)}})();const lu=!1,ou=(e,t)=>e===t,Mn=Symbol("solid-proxy"),Dc=typeof Proxy=="function",au=Symbol("solid-track"),An={equals:ou};let Rc=Oc;const ps=1,Ln=2,Pc={owned:null,cleanups:null,context:null,owner:null},tl={};var Gt=null;let rl=null,cu=null,Yt=null,fr=null,gs=null,Wn=0;function Ci(e,t){const r=Yt,l=Gt,a=e.length===0,m=t===void 0?l:t,d=a?Pc:{owned:null,cleanups:null,context:m?m.context:null,owner:m},i=a?e:()=>e(()=>pr(()=>Li(d)));Gt=d,Yt=null;try{return vs(i,!0)}finally{Yt=r,Gt=l}}function W(e,t){t=t?Object.assign({},An,t):An;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},l=a=>(typeof a=="function"&&(a=a(r.value)),Nc(r,a));return[Bc.bind(r),l]}function du(e,t,r){const l=qn(e,t,!0,ps);hi(l)}function J(e,t,r){const l=qn(e,t,!1,ps);hi(l)}function It(e,t,r){Rc=xu;const l=qn(e,t,!1,ps);(!r||!r.render)&&(l.user=!0),gs?gs.push(l):hi(l)}function et(e,t,r){r=r?Object.assign({},An,r):An;const l=qn(e,t,!0,0);return l.observers=null,l.observerSlots=null,l.comparator=r.equals||void 0,hi(l),Bc.bind(l)}function uu(e){return e&&typeof e=="object"&&"then"in e}function it(e,t,r){let l,a,m;typeof t=="function"?(l=e,a=t,m={}):(l=!0,a=e,m=t||{});let d=null,i=tl,n=!1,g="initialValue"in m,v=typeof l=="function"&&et(l);const p=new Set,[y,x]=(m.storage||W)(m.initialValue),[M,b]=W(void 0),[o,c]=W(void 0,{equals:!1}),[u,h]=W(g?"ready":"unresolved");function f(L,P,I,D){return d===L&&(d=null,D!==void 0&&(g=!0),(L===i||P===i)&&m.onHydrated&&queueMicrotask(()=>m.onHydrated(D,{value:P})),i=tl,$(P,I)),P}function $(L,P){vs(()=>{P===void 0&&x(()=>L),h(P!==void 0?"errored":g?"ready":"unresolved"),b(P);for(const I of p.keys())I.decrement();p.clear()},!1)}function C(){const L=pu,P=y(),I=M();if(I!==void 0&&!d)throw I;return Yt&&Yt.user,P}function k(L=!0){if(L!==!1&&n)return;n=!1;const P=v?v():l;if(P==null||P===!1){f(d,pr(y));return}let I;const D=i!==tl?i:pr(()=>{try{return a(P,{value:y(),refetching:L})}catch(T){I=T}});if(I!==void 0){f(d,void 0,mn(I),P);return}else if(!uu(D))return f(d,D,void 0,P),D;return d=D,"v"in D?(D.s===1?f(d,D.v,void 0,P):f(d,void 0,mn(D.v),P),D):(n=!0,queueMicrotask(()=>n=!1),vs(()=>{h(g?"refreshing":"pending"),c()},!1),D.then(T=>f(D,T,void 0,P),T=>f(D,void 0,mn(T),P)))}Object.defineProperties(C,{state:{get:()=>u()},error:{get:()=>M()},loading:{get(){const L=u();return L==="pending"||L==="refreshing"}},latest:{get(){if(!g)return C();const L=M();if(L&&!d)throw L;return y()}}});let S=Gt;return v?du(()=>(S=Gt,k(!1))):k(!1),[C,{refetch:L=>Ic(S,()=>k(L)),mutate:x}]}function hu(e){return vs(e,!1)}function pr(e){if(Yt===null)return e();const t=Yt;Yt=null;try{return e()}finally{Yt=t}}function gu(e,t,r){const l=Array.isArray(e);let a;return m=>{let d;if(l){d=Array(e.length);for(let n=0;n<e.length;n++)d[n]=e[n]()}else d=e();const i=pr(()=>t(d,a,m));return a=d,i}}function zt(e){It(()=>pr(e))}function wr(e){return Gt===null||(Gt.cleanups===null?Gt.cleanups=[e]:Gt.cleanups.push(e)),e}function vu(){return Gt}function Ic(e,t){const r=Gt,l=Yt;Gt=e,Yt=null;try{return vs(t,!0)}catch(a){Wl(a)}finally{Gt=r,Yt=l}}const[iM,nM]=W(!1);function fu(e){const t=et(e),r=et(()=>$l(t()));return r.toArray=()=>{const l=r();return Array.isArray(l)?l:l!=null?[l]:[]},r}let pu;function Bc(){if(this.sources&&this.state)if(this.state===ps)hi(this);else{const e=fr;fr=null,vs(()=>Tn(this),!1),fr=e}if(Yt){const e=this.observers?this.observers.length:0;Yt.sources?(Yt.sources.push(this),Yt.sourceSlots.push(e)):(Yt.sources=[this],Yt.sourceSlots=[e]),this.observers?(this.observers.push(Yt),this.observerSlots.push(Yt.sources.length-1)):(this.observers=[Yt],this.observerSlots=[Yt.sources.length-1])}return this.value}function Nc(e,t,r){let l=e.value;return(!e.comparator||!e.comparator(l,t))&&(e.value=t,e.observers&&e.observers.length&&vs(()=>{for(let a=0;a<e.observers.length;a+=1){const m=e.observers[a],d=rl&&rl.running;d&&rl.disposed.has(m),(d?!m.tState:!m.state)&&(m.pure?fr.push(m):gs.push(m),m.observers&&zc(m)),d||(m.state=ps)}if(fr.length>1e6)throw fr=[],new Error},!1)),t}function hi(e){if(!e.fn)return;Li(e);const t=Wn;mu(e,e.value,t)}function mu(e,t,r){let l;const a=Gt,m=Yt;Yt=Gt=e;try{l=e.fn(t)}catch(d){return e.pure&&(e.state=ps,e.owned&&e.owned.forEach(Li),e.owned=null),e.updatedAt=r+1,Wl(d)}finally{Yt=m,Gt=a}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?Nc(e,l):e.value=l,e.updatedAt=r)}function qn(e,t,r,l=ps,a){const m={fn:e,state:l,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:Gt,context:Gt?Gt.context:null,pure:r};return Gt===null||Gt!==Pc&&(Gt.owned?Gt.owned.push(m):Gt.owned=[m]),m}function En(e){if(e.state===0)return;if(e.state===Ln)return Tn(e);if(e.suspense&&pr(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Wn);)e.state&&t.push(e);for(let r=t.length-1;r>=0;r--)if(e=t[r],e.state===ps)hi(e);else if(e.state===Ln){const l=fr;fr=null,vs(()=>Tn(e,t[0]),!1),fr=l}}function vs(e,t){if(fr)return e();let r=!1;t||(fr=[]),gs?r=!0:gs=[],Wn++;try{const l=e();return bu(r),l}catch(l){r||(gs=null),fr=null,Wl(l)}}function bu(e){if(fr&&(Oc(fr),fr=null),e)return;const t=gs;gs=null,t.length&&vs(()=>Rc(t),!1)}function Oc(e){for(let t=0;t<e.length;t++)En(e[t])}function xu(e){let t,r=0;for(t=0;t<e.length;t++){const l=e[t];l.user?e[r++]=l:En(l)}for(t=0;t<r;t++)En(e[t])}function Tn(e,t){e.state=0;for(let r=0;r<e.sources.length;r+=1){const l=e.sources[r];if(l.sources){const a=l.state;a===ps?l!==t&&(!l.updatedAt||l.updatedAt<Wn)&&En(l):a===Ln&&Tn(l,t)}}}function zc(e){for(let t=0;t<e.observers.length;t+=1){const r=e.observers[t];r.state||(r.state=Ln,r.pure?fr.push(r):gs.push(r),r.observers&&zc(r))}}function Li(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),l=e.sourceSlots.pop(),a=r.observers;if(a&&a.length){const m=a.pop(),d=r.observerSlots.pop();l<a.length&&(m.sourceSlots[d]=l,a[l]=m,r.observerSlots[l]=d)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)Li(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)Li(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function mn(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Wl(e,t=Gt){throw mn(e)}function $l(e){if(typeof e=="function"&&!e.length)return $l(e());if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++){const l=$l(e[r]);Array.isArray(l)?t.push.apply(t,l):t.push(l)}return t}return e}const yu=Symbol("fallback");function ta(e){for(let t=0;t<e.length;t++)e[t]()}function _u(e,t,r={}){let l=[],a=[],m=[],d=0,i=t.length>1?[]:null;return wr(()=>ta(m)),()=>{let n=e()||[],g=n.length,v,p;return n[au],pr(()=>{let x,M,b,o,c,u,h,f,$;if(g===0)d!==0&&(ta(m),m=[],l=[],a=[],d=0,i&&(i=[])),r.fallback&&(l=[yu],a[0]=Ci(C=>(m[0]=C,r.fallback())),d=1);else if(d===0){for(a=new Array(g),p=0;p<g;p++)l[p]=n[p],a[p]=Ci(y);d=g}else{for(b=new Array(g),o=new Array(g),i&&(c=new Array(g)),u=0,h=Math.min(d,g);u<h&&l[u]===n[u];u++);for(h=d-1,f=g-1;h>=u&&f>=u&&l[h]===n[f];h--,f--)b[f]=a[h],o[f]=m[h],i&&(c[f]=i[h]);for(x=new Map,M=new Array(f+1),p=f;p>=u;p--)$=n[p],v=x.get($),M[p]=v===void 0?-1:v,x.set($,p);for(v=u;v<=h;v++)$=l[v],p=x.get($),p!==void 0&&p!==-1?(b[p]=a[v],o[p]=m[v],i&&(c[p]=i[v]),p=M[p],x.set($,p)):m[v]();for(p=u;p<g;p++)p in b?(a[p]=b[p],m[p]=o[p],i&&(i[p]=c[p],i[p](p))):a[p]=Ci(y);a=a.slice(0,d=g),l=n.slice(0)}return a});function y(x){if(m[p]=x,i){const[M,b]=W(p);return i[p]=b,t(n[p],M)}return t(n[p])}}}function _(e,t){return pr(()=>e(t||{}))}function rn(){return!0}const wl={get(e,t,r){return t===Mn?r:e.get(t)},has(e,t){return t===Mn?!0:e.has(t)},set:rn,deleteProperty:rn,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:rn,deleteProperty:rn}},ownKeys(e){return e.keys()}};function sl(e){return(e=typeof e=="function"?e():e)?e:{}}function $u(){for(let e=0,t=this.length;e<t;++e){const r=this[e]();if(r!==void 0)return r}}function wu(...e){let t=!1;for(let d=0;d<e.length;d++){const i=e[d];t=t||!!i&&Mn in i,e[d]=typeof i=="function"?(t=!0,et(i)):i}if(Dc&&t)return new Proxy({get(d){for(let i=e.length-1;i>=0;i--){const n=sl(e[i])[d];if(n!==void 0)return n}},has(d){for(let i=e.length-1;i>=0;i--)if(d in sl(e[i]))return!0;return!1},keys(){const d=[];for(let i=0;i<e.length;i++)d.push(...Object.keys(sl(e[i])));return[...new Set(d)]}},wl);const r={},l=Object.create(null);for(let d=e.length-1;d>=0;d--){const i=e[d];if(!i)continue;const n=Object.getOwnPropertyNames(i);for(let g=n.length-1;g>=0;g--){const v=n[g];if(v==="__proto__"||v==="constructor")continue;const p=Object.getOwnPropertyDescriptor(i,v);if(!l[v])l[v]=p.get?{enumerable:!0,configurable:!0,get:$u.bind(r[v]=[p.get.bind(i)])}:p.value!==void 0?p:void 0;else{const y=r[v];y&&(p.get?y.push(p.get.bind(i)):p.value!==void 0&&y.push(()=>p.value))}}}const a={},m=Object.keys(l);for(let d=m.length-1;d>=0;d--){const i=m[d],n=l[i];n&&n.get?Object.defineProperty(a,i,n):a[i]=n?n.value:void 0}return a}function Su(e,...t){const r=t.length;if(Dc&&Mn in e){const a=r>1?t.flat():t[0],m=t.map(d=>new Proxy({get(i){return d.includes(i)?e[i]:void 0},has(i){return d.includes(i)&&i in e},keys(){return d.filter(i=>i in e)}},wl));return m.push(new Proxy({get(d){return a.includes(d)?void 0:e[d]},has(d){return a.includes(d)?!1:d in e},keys(){return Object.keys(e).filter(d=>!a.includes(d))}},wl)),m}const l=[];for(let a=0;a<=r;a++)l[a]={};for(const a of Object.getOwnPropertyNames(e)){let m=r;for(let n=0;n<t.length;n++)if(t[n].includes(a)){m=n;break}const d=Object.getOwnPropertyDescriptor(e,a);!d.get&&!d.set&&d.enumerable&&d.writable&&d.configurable?l[m][a]=d.value:Object.defineProperty(l[m],a,d)}return l}const Fc=e=>`Stale read from <${e}>.`;function Xe(e){const t="fallback"in e&&{fallback:()=>e.fallback};return et(_u(()=>e.each,e.children,t||void 0))}function K(e){const t=e.keyed,r=et(()=>e.when,void 0,void 0),l=t?r:et(r,void 0,{equals:(a,m)=>!a==!m});return et(()=>{const a=l();if(a){const m=e.children;return typeof m=="function"&&m.length>0?pr(()=>m(t?a:()=>{if(!pr(l))throw Fc("Show");return r()})):m}return e.fallback},void 0,void 0)}function Dn(e){const t=fu(()=>e.children),r=et(()=>{const l=t(),a=Array.isArray(l)?l:[l];let m=()=>{};for(let d=0;d<a.length;d++){const i=d,n=a[d],g=m,v=et(()=>g()?void 0:n.when,void 0,void 0),p=n.keyed?v:et(v,void 0,{equals:(y,x)=>!y==!x});m=()=>g()||(p()?[i,v,n]:void 0)}return m});return et(()=>{const l=r()();if(!l)return e.fallback;const[a,m,d]=l,i=d.children;return typeof i=="function"&&i.length>0?pr(()=>i(d.keyed?m():()=>{if(pr(r)()?.[0]!==a)throw Fc("Match");return m()})):i},void 0,void 0)}function Or(e){return e}const Cu=["allowfullscreen","async","alpha","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","adauctionheaders","browsingtopics","credentialless","defaultchecked","defaultmuted","defaultselected","defer","disablepictureinpicture","disableremoteplayback","preservespitch","shadowrootclonable","shadowrootcustomelementregistry","shadowrootdelegatesfocus","shadowrootserializable","sharedstoragewritable"],ku=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline","adAuctionHeaders","allowFullscreen","browsingTopics","defaultChecked","defaultMuted","defaultSelected","disablePictureInPicture","disableRemotePlayback","preservesPitch","shadowRootClonable","shadowRootCustomElementRegistry","shadowRootDelegatesFocus","shadowRootSerializable","sharedStorageWritable",...Cu]),Mu=new Set(["innerHTML","textContent","innerText","children"]),Au=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Lu=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1},adauctionheaders:{$:"adAuctionHeaders",IFRAME:1},allowfullscreen:{$:"allowFullscreen",IFRAME:1},browsingtopics:{$:"browsingTopics",IMG:1},defaultchecked:{$:"defaultChecked",INPUT:1},defaultmuted:{$:"defaultMuted",AUDIO:1,VIDEO:1},defaultselected:{$:"defaultSelected",OPTION:1},disablepictureinpicture:{$:"disablePictureInPicture",VIDEO:1},disableremoteplayback:{$:"disableRemotePlayback",AUDIO:1,VIDEO:1},preservespitch:{$:"preservesPitch",AUDIO:1,VIDEO:1},shadowrootclonable:{$:"shadowRootClonable",TEMPLATE:1},shadowrootdelegatesfocus:{$:"shadowRootDelegatesFocus",TEMPLATE:1},shadowrootserializable:{$:"shadowRootSerializable",TEMPLATE:1},sharedstoragewritable:{$:"sharedStorageWritable",IFRAME:1,IMG:1}});function Eu(e,t){const r=Lu[e];return typeof r=="object"?r[t]?r.$:void 0:r}const Tu=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Du=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),Ru={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},Re=e=>et(()=>e());function Pu(e,t,r){let l=r.length,a=t.length,m=l,d=0,i=0,n=t[a-1].nextSibling,g=null;for(;d<a||i<m;){if(t[d]===r[i]){d++,i++;continue}for(;t[a-1]===r[m-1];)a--,m--;if(a===d){const v=m<l?i?r[i-1].nextSibling:r[m-i]:n;for(;i<m;)e.insertBefore(r[i++],v)}else if(m===i)for(;d<a;)(!g||!g.has(t[d]))&&t[d].remove(),d++;else if(t[d]===r[m-1]&&r[i]===t[a-1]){const v=t[--a].nextSibling;e.insertBefore(r[i++],t[d++].nextSibling),e.insertBefore(r[--m],v),t[a]=r[m]}else{if(!g){g=new Map;let p=i;for(;p<m;)g.set(r[p],p++)}const v=g.get(t[d]);if(v!=null)if(i<v&&v<m){let p=d,y=1,x;for(;++p<a&&p<m&&!((x=g.get(t[p]))==null||x!==v+y);)y++;if(y>v-i){const M=t[d];for(;i<v;)e.insertBefore(r[i++],M)}else e.replaceChild(r[i++],t[d++])}else d++;else t[d++].remove()}}}const ra="_$DX_DELEGATE";function Iu(e,t,r,l={}){let a;return Ci(m=>{a=m,t===document?e():s(t,e(),t.firstChild?null:void 0,r)},l.owner),()=>{a(),t.textContent=""}}function w(e,t,r,l){let a;const m=()=>{const i=l?document.createElementNS("http://www.w3.org/1998/Math/MathML","template"):document.createElement("template");return i.innerHTML=e,r?i.content.firstChild.firstChild:l?i.firstChild:i.content.firstChild},d=t?()=>pr(()=>document.importNode(a||(a=m()),!0)):()=>(a||(a=m())).cloneNode(!0);return d.cloneNode=d,d}function ut(e,t=window.document){const r=t[ra]||(t[ra]=new Set);for(let l=0,a=e.length;l<a;l++){const m=e[l];r.has(m)||(r.add(m),t.addEventListener(m,Hu))}}function dt(e,t,r){r==null?e.removeAttribute(t):e.setAttribute(t,r)}function Bu(e,t,r,l){l==null?e.removeAttributeNS(t,r):e.setAttributeNS(t,r,l)}function Nu(e,t,r){r?e.setAttribute(t,""):e.removeAttribute(t)}function tt(e,t){t==null?e.removeAttribute("class"):e.className=t}function Rt(e,t,r,l){if(l)Array.isArray(r)?(e[`$$${t}`]=r[0],e[`$$${t}Data`]=r[1]):e[`$$${t}`]=r;else if(Array.isArray(r)){const a=r[0];e.addEventListener(t,r[0]=m=>a.call(e,r[1],m))}else e.addEventListener(t,r,typeof r!="function"&&r)}function Hc(e,t,r={}){const l=Object.keys(t||{}),a=Object.keys(r);let m,d;for(m=0,d=a.length;m<d;m++){const i=a[m];!i||i==="undefined"||t[i]||(sa(e,i,!1),delete r[i])}for(m=0,d=l.length;m<d;m++){const i=l[m],n=!!t[i];!i||i==="undefined"||r[i]===n||!n||(sa(e,i,!0),r[i]=n)}return r}function _t(e,t,r){if(!t)return r?dt(e,"style"):t;const l=e.style;if(typeof t=="string")return l.cssText=t;typeof r=="string"&&(l.cssText=r=void 0),r||(r={}),t||(t={});let a,m;for(m in r)t[m]==null&&l.removeProperty(m),delete r[m];for(m in t)a=t[m],a!==r[m]&&(l.setProperty(m,a),r[m]=a);return r}function E(e,t,r){r!=null?e.style.setProperty(t,r):e.style.removeProperty(t)}function Ou(e,t={},r,l){const a={};return J(()=>a.children=Ei(e,t.children,a.children)),J(()=>typeof t.ref=="function"&&dr(t.ref,e)),J(()=>zu(e,t,r,!0,a,!0)),a}function dr(e,t,r){return pr(()=>e(t,r))}function s(e,t,r,l){if(r!==void 0&&!l&&(l=[]),typeof t!="function")return Ei(e,t,l,r);J(a=>Ei(e,t(),a,r),l)}function zu(e,t,r,l,a={},m=!1){t||(t={});for(const d in a)if(!(d in t)){if(d==="children")continue;a[d]=ia(e,d,null,a[d],r,m,t)}for(const d in t){if(d==="children")continue;const i=t[d];a[d]=ia(e,d,i,a[d],r,m,t)}}function Fu(e){return e.toLowerCase().replace(/-([a-z])/g,(t,r)=>r.toUpperCase())}function sa(e,t,r){const l=t.trim().split(/\s+/);for(let a=0,m=l.length;a<m;a++)e.classList.toggle(l[a],r)}function ia(e,t,r,l,a,m,d){let i,n,g,v,p;if(t==="style")return _t(e,r,l);if(t==="classList")return Hc(e,r,l);if(r===l)return l;if(t==="ref")m||r(e);else if(t.slice(0,3)==="on:"){const y=t.slice(3);l&&e.removeEventListener(y,l,typeof l!="function"&&l),r&&e.addEventListener(y,r,typeof r!="function"&&r)}else if(t.slice(0,10)==="oncapture:"){const y=t.slice(10);l&&e.removeEventListener(y,l,!0),r&&e.addEventListener(y,r,!0)}else if(t.slice(0,2)==="on"){const y=t.slice(2).toLowerCase(),x=Tu.has(y);if(!x&&l){const M=Array.isArray(l)?l[0]:l;e.removeEventListener(y,M)}(x||r)&&(Rt(e,y,r,x),x&&ut([y]))}else if(t.slice(0,5)==="attr:")dt(e,t.slice(5),r);else if(t.slice(0,5)==="bool:")Nu(e,t.slice(5),r);else if((p=t.slice(0,5)==="prop:")||(g=Mu.has(t))||!a&&((v=Eu(t,e.tagName))||(n=ku.has(t)))||(i=e.nodeName.includes("-")||"is"in d))p&&(t=t.slice(5),n=!0),t==="class"||t==="className"?tt(e,r):i&&!n&&!g?e[Fu(t)]=r:e[v||t]=r;else{const y=a&&t.indexOf(":")>-1&&Ru[t.split(":")[0]];y?Bu(e,y,t,r):dt(e,Au[t]||t,r)}return r}function Hu(e){let t=e.target;const r=`$$${e.type}`,l=e.target,a=e.currentTarget,m=n=>Object.defineProperty(e,"target",{configurable:!0,value:n}),d=()=>{const n=t[r];if(n&&!t.disabled){const g=t[`${r}Data`];if(g!==void 0?n.call(t,g,e):n.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&m(t.host),!0},i=()=>{for(;d()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const n=e.composedPath();m(n[0]);for(let g=0;g<n.length-2&&(t=n[g],!!d());g++){if(t._$host){t=t._$host,i();break}if(t.parentNode===a)break}}else i();m(l)}function Ei(e,t,r,l,a){for(;typeof r=="function";)r=r();if(t===r)return r;const m=typeof t,d=l!==void 0;if(e=d&&r[0]&&r[0].parentNode||e,m==="string"||m==="number"){if(m==="number"&&(t=t.toString(),t===r))return r;if(d){let i=r[0];i&&i.nodeType===3?i.data!==t&&(i.data=t):i=document.createTextNode(t),r=ti(e,r,l,i)}else r!==""&&typeof r=="string"?r=e.firstChild.data=t:r=e.textContent=t}else if(t==null||m==="boolean")r=ti(e,r,l);else{if(m==="function")return J(()=>{let i=t();for(;typeof i=="function";)i=i();r=Ei(e,i,r,l)}),()=>r;if(Array.isArray(t)){const i=[],n=r&&Array.isArray(r);if(Sl(i,t,r,a))return J(()=>r=Ei(e,i,r,l,!0)),()=>r;if(i.length===0){if(r=ti(e,r,l),d)return r}else n?r.length===0?na(e,i,l):Pu(e,r,i):(r&&ti(e),na(e,i));r=i}else if(t.nodeType){if(Array.isArray(r)){if(d)return r=ti(e,r,l,t);ti(e,r,null,t)}else r==null||r===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);r=t}}return r}function Sl(e,t,r,l){let a=!1;for(let m=0,d=t.length;m<d;m++){let i=t[m],n=r&&r[e.length],g;if(!(i==null||i===!0||i===!1))if((g=typeof i)=="object"&&i.nodeType)e.push(i);else if(Array.isArray(i))a=Sl(e,i,n)||a;else if(g==="function")if(l){for(;typeof i=="function";)i=i();a=Sl(e,Array.isArray(i)?i:[i],Array.isArray(n)?n:[n])||a}else e.push(i),a=!0;else{const v=String(i);n&&n.nodeType===3&&n.data===v?e.push(n):e.push(document.createTextNode(v))}}return a}function na(e,t,r=null){for(let l=0,a=t.length;l<a;l++)e.insertBefore(t[l],r)}function ti(e,t,r,l){if(r===void 0)return e.textContent="";const a=l||document.createTextNode("");if(t.length){let m=!1;for(let d=t.length-1;d>=0;d--){const i=t[d];if(a!==i){const n=i.parentNode===e;!m&&!d?n?e.replaceChild(a,i):e.insertBefore(a,r):n&&i.remove()}else m=!0}}else e.insertBefore(a,r);return[a]}const ju="http://www.w3.org/2000/svg";function jc(e,t=!1,r=void 0){return t?document.createElementNS(ju,e):document.createElement(e,{is:r})}function ms(e){const{useShadow:t}=e,r=document.createTextNode(""),l=()=>e.mount||document.body,a=vu();let m;return It(()=>{m||(m=Ic(a,()=>et(()=>e.children)));const d=l();if(d instanceof HTMLHeadElement){const[i,n]=W(!1),g=()=>n(!0);Ci(v=>s(d,()=>i()?v():m(),null)),wr(g)}else{const i=jc(e.isSVG?"g":"div",e.isSVG),n=t&&i.attachShadow?i.attachShadow({mode:"open"}):i;Object.defineProperty(i,"_$host",{get(){return r.parentNode},configurable:!0}),s(n,m),d.appendChild(i),e.ref&&e.ref(i),wr(()=>d.removeChild(i))}},void 0,{render:!0}),r}function Uu(e,t){const r=et(e);return et(()=>{const l=r();switch(typeof l){case"function":return pr(()=>l(t));case"string":const a=Du.has(l),m=jc(l,a,pr(()=>t.is));return Ou(m,t,a),m}})}function Vu(e){const[,t]=Su(e,["component"]);return Uu(()=>e.component,t)}const[us,Ut]=W("dashboard"),[cr,Wu]=W(!1),[Uc,Ti]=W(!1),[lM,qu]=W(null),[oM,aM]=W(!1),[Vc,Ku]=W(""),[Yu,la]=W([]),[Cl,Wc]=W(!1);function Gu(e){try{if(localStorage.getItem("kubegraf-sound")!=="true")return;const r=new(window.AudioContext||window.webkitAudioContext),a={success:800,error:300,warning:500,info:600}[e]||600,m=r.createOscillator(),d=r.createGain();m.connect(d),d.connect(r.destination),m.frequency.value=a,m.type="sine",d.gain.setValueAtTime(.3,r.currentTime),d.gain.exponentialRampToValueAtTime(.01,r.currentTime+.3),m.start(r.currentTime),m.stop(r.currentTime+.3)}catch(t){console.debug("Could not play notification sound:",t)}}function Je(e,t="info"){const r={id:crypto.randomUUID(),type:t,message:e,timestamp:new Date};la(l=>[r,...l].slice(0,10)),Gu(t),setTimeout(()=>{la(l=>l.filter(a=>a.id!==r.id))},5e3)}function Ju(){Wu(!cr())}function Xu(){Ti(!Uc())}function Zu(){const e=Cl();console.log("[ui.ts] toggleTerminal called - current:",e,"-> new:",!e),Wc(!e),console.log("[ui.ts] terminalOpen after setState:",Cl())}const Qu=15e3,Ss={CLUSTER:"kubegraf:selectedCluster",NAMESPACES:"kubegraf:selectedNamespaces",THEME:"kubegraf:theme",SIDEBAR_COLLAPSED:"kubegraf:sidebarCollapsed"};function eh(e,t){const r=[...t].sort().join(",");return`${e}::${r}`}function th(e){return e?Date.now()-e.lastUpdated<Qu:!1}function Kn(e,t){if(typeof window>"u")return t;try{const r=localStorage.getItem(e);return r?JSON.parse(r):t}catch{return t}}function Yn(e,t){if(!(typeof window>"u"))try{localStorage.setItem(e,JSON.stringify(t))}catch(r){console.warn(`Failed to save to localStorage: ${e}`,r)}}const[qc,cM]=W(Kn(Ss.CLUSTER,"")),[hr,rh]=W(Kn(Ss.NAMESPACES,[])),[Xr,sh]=W(""),[ih,dM]=W(Kn(Ss.THEME,"dark")),[nh,uM]=W(Kn(Ss.SIDEBAR_COLLAPSED,!1)),[hM,lh]=W(!1),[gM,vM]=W(!1),[oh,Kc]=W({pods:null,deployments:null,services:null,events:null}),[ah,ch]=W(null);It(()=>{const e=qc();Yn(Ss.CLUSTER,e)});It(()=>{const e=hr();Yn(Ss.NAMESPACES,e)});It(()=>{const e=ih();Yn(Ss.THEME,e)});It(()=>{const e=nh();Yn(Ss.SIDEBAR_COLLAPSED,e)});function dh(e){hu(()=>{rh([...e].sort()),Kc({pods:null,deployments:null,services:null,events:null})})}function Fi(e){sh(e)}function ar(e){lh(e)}function Yc(e){ch(e)}function Rn(){return eh(qc(),hr())}function oa(e){const r=oh()[e];if(!r)return null;if(th(r)){const l=Rn();if(r.key===l)return r}return null}function uh(e,t){const r=Rn(),l={data:t,lastUpdated:Date.now(),key:r};Kc(a=>({...a,[e]:l}))}const qr="/api";async function je(e,t){const l=new AbortController,a=setTimeout(()=>l.abort(),15e3);try{const m=await fetch(`${qr}${e}`,{headers:{"Content-Type":"application/json",...t?.headers},signal:l.signal,...t});if(clearTimeout(a),!m.ok){const i=m.headers.get("content-type"),n=await m.text();throw i&&i.includes("text/html")?new Error(`API endpoint not found (${m.status}). The server returned an HTML error page. Check that the endpoint exists.`):new Error(n||`API error: ${m.status}`)}const d=m.headers.get("content-type");if(d&&!d.includes("application/json")){const i=await m.text();throw i.trim().startsWith("<!DOCTYPE")||i.trim().startsWith("<!doctype")?new Error(`Server returned HTML instead of JSON. This usually means the API endpoint doesn't exist (404). Response: ${i.substring(0,200)}...`):new Error(`Unexpected content type: ${d}. Expected JSON.`)}return m.json()}catch(m){throw clearTimeout(a),m.name==="AbortError"?new Error("Request timed out. The server may be processing a large amount of data."):m}}async function ir(e){const r=await(await fetch(`${qr}${e}`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();if(!r.success)throw new Error(r.error||"Delete operation failed");return r}const Fe={getStatus:()=>je("/status"),checkForUpdates:()=>je("/updates/check"),checkUpdate:()=>je("/update/check"),autoCheckUpdate:()=>je("/update/auto-check"),installUpdate:e=>je("/updates/install",{method:"POST",body:JSON.stringify({downloadUrl:e})}),getMetrics:()=>je("/metrics"),getNamespaces:async()=>((await je("/namespaces")).namespaces||[]).map(t=>typeof t=="string"?t:t.name||t),getPods:async e=>{const t=e&&e!=="_all"&&e!=="All Namespaces"?`/pods?namespace=${e}`:"/pods?namespace=",r=await je(t);return Array.isArray(r)?r:[]},getPodDetails:(e,t)=>je(`/pod/details?name=${e}&namespace=${t}`),getPodYAML:(e,t)=>je(`/pod/yaml?name=${e}&namespace=${t}`),updatePod:async(e,t,r)=>{const l=await fetch(`/api/pod/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"text/yaml"},body:r});if(!l.ok){const a=await l.json().catch(()=>({message:"Unknown error"}));throw new Error(a.error||a.message||`API error: ${l.statusText}`)}return l.json()},getPodDescribe:(e,t)=>je(`/pod/describe?name=${e}&namespace=${t}`),deletePod:(e,t)=>ir(`/pod/delete?name=${e}&namespace=${t}`),restartPod:(e,t)=>je(`/pod/restart?name=${e}&namespace=${t}`,{method:"POST"}),getPodMetrics:async e=>{const t=e&&e!=="_all"?`/pods/metrics?namespace=${e}`:"/pods/metrics?namespace=";return await je(t)||{}},getDeployments:async e=>{const t=e&&e!=="_all"&&e!=="All Namespaces"?`/deployments?namespace=${e}`:"/deployments?namespace=",r=await je(t);return Array.isArray(r)?r:[]},getDeploymentDetails:(e,t)=>je(`/deployment/details?name=${e}&namespace=${t}`),getDeploymentYAML:(e,t)=>je(`/deployment/yaml?name=${e}&namespace=${t}`),updateDeployment:async(e,t,r)=>{const l=await fetch(`/api/deployment/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"text/yaml"},body:r});if(!l.ok){const a=await l.json().catch(()=>({message:"Unknown error"}));throw new Error(a.error||a.message||`API error: ${l.statusText}`)}return l.json()},getDeploymentDescribe:(e,t)=>je(`/deployment/describe?name=${e}&namespace=${t}`),deleteDeployment:(e,t)=>ir(`/deployment/delete?name=${e}&namespace=${t}`),restartDeployment:(e,t)=>je(`/deployment/restart?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST"}),scaleDeployment:(e,t,r)=>je(`/deployment/scale?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}&replicas=${r}`,{method:"POST"}),getStatefulSets:async e=>{const t=e&&e!=="_all"&&e!=="All Namespaces"?`/statefulsets?namespace=${e}`:"/statefulsets?namespace=",r=await je(t);return Array.isArray(r)?r:[]},getStatefulSetYAML:(e,t)=>je(`/statefulset/yaml?name=${e}&namespace=${t}`),getStatefulSetDescribe:(e,t)=>je(`/statefulset/describe?name=${e}&namespace=${t}`),deleteStatefulSet:(e,t)=>ir(`/statefulset/delete?name=${e}&namespace=${t}`),restartStatefulSet:(e,t)=>je(`/statefulset/restart?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST"}),scaleStatefulSet:(e,t,r)=>je(`/statefulset/scale?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}&replicas=${r}`,{method:"POST"}),getDaemonSets:async e=>{const t=e&&e!=="_all"&&e!=="All Namespaces"?`/daemonsets?namespace=${e}`:"/daemonsets?namespace=",r=await je(t);return Array.isArray(r)?r:[]},getDaemonSetYAML:(e,t)=>je(`/daemonset/yaml?name=${e}&namespace=${t}`),updateDaemonSet:(e,t,r)=>fetch(`${qr}/daemonset/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"application/yaml"},body:r}).then(l=>l.json()),getDaemonSetDescribe:(e,t)=>je(`/daemonset/describe?name=${e}&namespace=${t}`),deleteDaemonSet:(e,t)=>ir(`/daemonset/delete?name=${e}&namespace=${t}`),getCronJobs:async e=>{const t=e&&e!=="_all"&&e!=="All Namespaces"?`/cronjobs?namespace=${e}`:"/cronjobs?namespace=",r=await je(t);return Array.isArray(r)?r:[]},getCronJobYAML:(e,t)=>je(`/cronjob/yaml?name=${e}&namespace=${t}`),updateCronJob:(e,t,r)=>fetch(`${qr}/cronjob/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"application/yaml"},body:r}).then(l=>l.json()),deleteCronJob:(e,t)=>ir(`/cronjob/delete?name=${e}&namespace=${t}`),getJobs:async e=>{const t=e&&e!=="_all"&&e!=="All Namespaces"?`/jobs?namespace=${e}`:"/jobs?namespace=",r=await je(t);return Array.isArray(r)?r:[]},getJobYAML:(e,t)=>je(`/job/yaml?name=${e}&namespace=${t}`),updateJob:(e,t,r)=>fetch(`${qr}/job/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"application/yaml"},body:r}).then(l=>l.json()),deleteJob:(e,t)=>ir(`/job/delete?name=${e}&namespace=${t}`),getPDBs:async e=>{const t=e&&e!=="_all"&&e!=="All Namespaces"?`/pdbs?namespace=${e}`:"/pdbs?namespace=",r=await je(t);return Array.isArray(r)?r:[]},getPDBYAML:(e,t)=>je(`/pdb/yaml?name=${e}&namespace=${t}`),getPDBDescribe:(e,t)=>je(`/pdb/describe?name=${e}&namespace=${t}`),updatePDB:(e,t,r)=>fetch(`${qr}/pdb/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"application/yaml"},body:r}).then(l=>l.json()),deletePDB:(e,t)=>ir(`/pdb/delete?name=${e}&namespace=${t}`),getHPAs:async e=>{const t=e&&e!=="_all"&&e!=="All Namespaces"?`/hpas?namespace=${e}`:"/hpas?namespace=",r=await je(t);return Array.isArray(r)?r:[]},getHPAYAML:(e,t)=>je(`/hpa/yaml?name=${e}&namespace=${t}`),getHPADescribe:(e,t)=>je(`/hpa/describe?name=${e}&namespace=${t}`),updateHPA:(e,t,r)=>fetch(`${qr}/hpa/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"application/yaml"},body:r}).then(l=>l.json()),deleteHPA:(e,t)=>ir(`/hpa/delete?name=${e}&namespace=${t}`),getServices:async e=>{const t=e&&e!=="_all"&&e!=="All Namespaces"?`/services?namespace=${e}`:"/services?namespace=",r=await je(t);return Array.isArray(r)?r:[]},getServiceYAML:(e,t)=>je(`/service/yaml?name=${e}&namespace=${t}`),getServiceDetails:(e,t)=>je(`/service/details?name=${e}&namespace=${t}`),updateService:(e,t,r)=>fetch(`${qr}/service/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"application/yaml"},body:r}).then(l=>l.json()),getServiceDescribe:(e,t)=>je(`/service/describe?name=${e}&namespace=${t}`),deleteService:(e,t)=>ir(`/service/delete?name=${e}&namespace=${t}`),getIngresses:async e=>{const t=e&&e!=="_all"&&e!=="All Namespaces"?`/ingresses?namespace=${e}`:"/ingresses?namespace=",r=await je(t);return Array.isArray(r)?r:[]},getIngressYAML:(e,t)=>je(`/ingress/yaml?name=${e}&namespace=${t}`),updateIngress:(e,t,r)=>fetch(`${qr}/ingress/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"application/yaml"},body:r}).then(l=>l.json()),getIngressDescribe:(e,t)=>je(`/ingress/describe?name=${e}&namespace=${t}`),deleteIngress:(e,t)=>ir(`/ingress/delete?name=${e}&namespace=${t}`),getNetworkPolicies:async e=>{const t=e&&e!=="_all"&&e!=="All Namespaces"?`/networkpolicies?namespace=${e}`:"/networkpolicies?namespace=",r=await je(t);return Array.isArray(r)?r:[]},getNetworkPolicyYAML:(e,t)=>je(`/networkpolicy/yaml?name=${e}&namespace=${t}`),getNetworkPolicyDescribe:(e,t)=>je(`/networkpolicy/describe?name=${e}&namespace=${t}`),getNetworkPolicyDetails:(e,t)=>je(`/networkpolicy/details?name=${e}&namespace=${t}`),deleteNetworkPolicy:(e,t)=>ir(`/networkpolicy/delete?name=${e}&namespace=${t}`),getConfigMaps:async e=>{const t=e&&e!=="_all"&&e!=="All Namespaces"?`/configmaps?namespace=${e}`:"/configmaps?namespace=",r=await je(t);return Array.isArray(r)?r:[]},getConfigMapYAML:(e,t)=>je(`/configmap/yaml?name=${e}&namespace=${t}`),getConfigMapDescribe:(e,t)=>je(`/configmap/describe?name=${e}&namespace=${t}`),deleteConfigMap:(e,t)=>ir(`/configmap/delete?name=${e}&namespace=${t}`),getSecrets:async e=>{const t=e&&e!=="_all"&&e!=="All Namespaces"?`/secrets?namespace=${e}`:"/secrets?namespace=",r=await je(t);return Array.isArray(r)?r:[]},getSecretYAML:(e,t)=>je(`/secret/yaml?name=${e}&namespace=${t}`),updateSecret:async(e,t,r)=>{const l=await fetch(`/api/secret/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"text/yaml"},body:r});if(!l.ok){const a=await l.json().catch(()=>({message:"Unknown error"}));throw new Error(a.error||a.message||`API error: ${l.statusText}`)}return l.json()},getSecretDescribe:(e,t)=>je(`/secret/describe?name=${e}&namespace=${t}`),deleteSecret:(e,t)=>ir(`/secret/delete?name=${e}&namespace=${t}`),getCertificates:async e=>{const t=e&&e!=="_all"&&e!=="All Namespaces"?`/certificates?namespace=${e}`:"/certificates?namespace=",r=await je(t);return Array.isArray(r)?r:[]},getCertificateYAML:(e,t)=>je(`/certificate/yaml?name=${e}&namespace=${t}`),updateCertificate:(e,t,r)=>fetch(`${qr}/certificate/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"application/yaml"},body:r}).then(l=>l.json()),getCertificateDescribe:(e,t)=>je(`/certificate/describe?name=${e}&namespace=${t}`),deleteCertificate:(e,t)=>ir(`/certificate/delete?name=${e}&namespace=${t}`),getNodes:async()=>{const e=await je("/nodes");return Array.isArray(e)?e:[]},getNodeDetails:e=>je(`/node/details?name=${e}`),getNodeYAML:e=>je(`/node/yaml?name=${e}`),getNodeDescribe:e=>je(`/node/describe?name=${e}`),getTopology:e=>{const t=e&&e!=="_all"&&e!=="All Namespaces"?`/topology?namespace=${e}`:"/topology";return je(t)},getResourceMap:()=>je("/resourcemap"),getImpactAnalysis:(e,t,r)=>je(`/impact?kind=${e}&name=${t}&namespace=${r}`),getSecurityAnalysis:()=>je("/security"),startPortForward:(e,t,r,l,a)=>je("/portforward/start",{method:"POST",body:JSON.stringify({type:e,name:t,namespace:r,localPort:l,remotePort:a})}),stopPortForward:e=>je(`/portforward/stop?id=${e}`,{method:"POST"}),listPortForwards:()=>je("/portforward/list"),getAIStatus:()=>je("/ai/status"),queryAI:e=>je("/ai/query",{method:"POST",body:JSON.stringify({query:e})}),analyzePod:(e,t)=>je(`/ai/analyze/pod?name=${e}&namespace=${t}`),explainError:(e,t)=>je("/ai/explain",{method:"POST",body:JSON.stringify({error:e,resourceType:t})}),runDiagnostics:(e,t)=>{const r=new URLSearchParams;e&&r.append("namespace",e),t&&r.append("category",t);const l=r.toString()?`?${r.toString()}`:"";return je(`/diagnostics/run${l}`)},getDiagnosticsCategories:()=>je("/diagnostics/categories"),scanVulnerabilities:e=>{const t=new URLSearchParams;e&&t.append("severity",e);const r=t.toString()?`?${t.toString()}`:"";return je(`/vulnerabilities/scan${r}`)},refreshVulnerabilities:()=>je("/vulnerabilities/refresh",{method:"POST"}),getVulnerabilityStats:()=>je("/vulnerabilities/stats"),detectAnomalies:e=>{const t=e?`/anomalies/detect?severity=${e}`:"/anomalies/detect";return je(t)},getAnomalyStats:()=>je("/anomalies/stats"),remediateAnomaly:e=>je("/anomalies/remediate",{method:"POST",body:JSON.stringify({anomalyId:e})}),getMLRecommendations:()=>je("/ml/recommendations"),getMLRecommendationsStats:()=>je("/ml/recommendations/stats"),predictResourceNeeds:(e,t,r)=>{const l=new URLSearchParams({namespace:e,deployment:t});return r&&l.append("hours",r.toString()),je(`/ml/predict?${l.toString()}`)},getAnomalyMetrics:e=>{const t=e?`/anomalies/metrics?limit=${e}`:"/anomalies/metrics";return je(t)},getMonitoredEvents:e=>{const t=new URLSearchParams;e?.type&&t.append("type",e.type),e?.category&&t.append("category",e.category),e?.severity&&t.append("severity",e.severity),e?.namespace&&t.append("namespace",e.namespace),e?.since&&t.append("since",e.since),e?.limit&&t.append("limit",e.limit.toString());const r=t.toString()?`?${t.toString()}`:"";return je(`/events/monitored${r}`)},getLogErrors:e=>{const t=new URLSearchParams;e?.namespace&&t.append("namespace",e.namespace),e?.since&&t.append("since",e.since),e?.limit&&t.append("limit",e.limit.toString());const r=t.toString()?`?${t.toString()}`:"";return je(`/events/log-errors${r}`)},getEventStats:()=>je("/events/stats"),getGroupedEvents:e=>{const t=new URLSearchParams;e&&t.append("period",e);const r=t.toString()?`?${t.toString()}`:"";return je(`/events/grouped${r}`)},getClusterCost:()=>je("/cost/cluster"),getNamespaceCost:e=>je(`/cost/namespace?namespace=${e}`),getPodCost:(e,t)=>je(`/cost/pod?name=${e}&namespace=${t}`),getDeploymentCost:(e,t)=>je(`/cost/deployment?name=${e}&namespace=${t}`),getIdleResources:(e,t,r)=>{const l=new URLSearchParams;e&&l.append("namespace",e),t&&l.append("cpuThreshold",t.toString()),r&&l.append("memThreshold",r.toString());const a=l.toString()?`?${l.toString()}`:"";return je(`/cost/idle${a}`)},checkDrift:(e,t,r)=>{const l=new URLSearchParams({kind:e,name:t});return r&&l.append("namespace",r),je(`/drift/check?${l.toString()}`)},getNamespaceDrift:e=>je(`/drift/namespace?namespace=${e}`),getDriftSummary:e=>je(`/drift/summary?namespace=${e}`),revertDrift:(e,t,r)=>je("/drift/revert",{method:"POST",body:JSON.stringify({kind:e,name:t,namespace:r})}),getNetworkTopology:()=>je("/network/topology"),getPodHeatmap:()=>je("/heatmap/pods"),getNodeHeatmap:()=>je("/heatmap/nodes"),getPluginsList:()=>je("/plugins/list"),installPlugin:e=>je("/plugins/install",{method:"POST",body:JSON.stringify({source:e})}),uninstallPlugin:e=>je("/plugins/uninstall",{method:"POST",body:JSON.stringify({name:e})}),getHelmReleases:async e=>{const t=e?`/plugins/helm/releases?namespace=${e}`:"/plugins/helm/releases";return(await je(t)).releases||[]},getHelmReleaseDetails:(e,t)=>je(`/plugins/helm/release?name=${e}&namespace=${t}`),getHelmReleaseHistory:(e,t)=>je(`/plugins/helm/history?name=${e}&namespace=${t}`),rollbackHelmRelease:(e,t,r)=>je("/plugins/helm/rollback",{method:"POST",body:JSON.stringify({name:e,namespace:t,revision:r})}),getArgoCDApps:async()=>(await je("/plugins/argocd/apps")).apps||[],getArgoCDAppDetails:(e,t)=>je(`/plugins/argocd/app?name=${e}&namespace=${t}`),syncArgoCDApp:(e,t)=>je("/plugins/argocd/sync",{method:"POST",body:JSON.stringify({name:e,namespace:t})}),refreshArgoCDApp:(e,t)=>je("/plugins/argocd/refresh",{method:"POST",body:JSON.stringify({name:e,namespace:t})}),getFluxResources:async()=>(await je("/plugins/flux/resources")).resources||[],getKustomizeResources:()=>je("/plugins/kustomize/resources"),getCloudInfo:()=>je("/cloud"),getContexts:()=>je("/contexts"),getCurrentContext:()=>je("/contexts/current"),switchContext:e=>je("/contexts/switch",{method:"POST",body:JSON.stringify({context:e})}),getWorkspaceContext:()=>je("/workspace/context"),setWorkspaceContext:e=>je("/workspace/context",{method:"POST",body:JSON.stringify(e)}),updateWorkspaceContext:e=>je("/workspace/context",{method:"POST",body:JSON.stringify(e)}),getEvents:async(e,t)=>{const r=new URLSearchParams;return e&&e!=="All Namespaces"&&r.set("namespace",e),t&&r.set("limit",t.toString()),je(`/events?${r.toString()}`)},getApps:()=>je("/apps"),getAppDetails:e=>je(`/apps/${e}`),installApp:(e,t,r)=>je("/apps/install",{method:"POST",body:JSON.stringify({name:e,namespace:t,values:r})}),uninstallApp:(e,t)=>je("/apps/uninstall",{method:"POST",body:JSON.stringify({name:e,namespace:t})}),getInstalledApps:()=>je("/apps/installed"),getLocalClusters:()=>je("/apps/local-clusters"),analyzePodsLogs:e=>je(`/ai/analyze/logs${e?`?namespace=${e}`:""}`),analyzePodLogs:(e,t)=>je(`/ai/analyze/pod-logs?name=${e}&namespace=${t}`),getPVYAML:e=>je(`/storage/pv/yaml?name=${encodeURIComponent(e)}`),updatePV:async(e,t)=>{const r=await fetch(`/api/storage/pv/update?name=${encodeURIComponent(e)}`,{method:"POST",headers:{"Content-Type":"text/yaml"},body:t});if(!r.ok){const l=await r.json().catch(()=>({message:"Unknown error"}));throw new Error(l.error||l.message||`API error: ${r.statusText}`)}return r.json()},deletePV:e=>ir(`/storage/pv/delete?name=${e}`),getPVCYAML:(e,t)=>je(`/storage/pvc/yaml?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`),updatePVC:async(e,t,r)=>{const l=await fetch(`/api/storage/pvc/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"text/yaml"},body:r});if(!l.ok){const a=await l.json().catch(()=>({message:"Unknown error"}));throw new Error(a.error||a.message||`API error: ${l.statusText}`)}return l.json()},deletePVC:(e,t)=>ir(`/storage/pvc/delete?name=${e}&namespace=${t}`),getStorageClassYAML:e=>je(`/storage/storageclass/yaml?name=${encodeURIComponent(e)}`),updateStorageClass:async(e,t)=>{const r=await fetch(`/api/storage/storageclass/update?name=${encodeURIComponent(e)}`,{method:"POST",headers:{"Content-Type":"text/yaml"},body:t});if(!r.ok){const l=await r.json().catch(()=>({message:"Unknown error"}));throw new Error(l.error||l.message||`API error: ${r.statusText}`)}return r.json()},deleteStorageClass:e=>ir(`/storage/storageclass/delete?name=${e}`),getRoleYAML:(e,t)=>je(`/rbac/role/yaml?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`),updateRole:async(e,t,r)=>{const l=await fetch(`/api/rbac/role/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"text/yaml"},body:r});if(!l.ok){const a=await l.json().catch(()=>({message:"Unknown error"}));throw new Error(a.error||a.message||`API error: ${l.statusText}`)}return l.json()},deleteRole:(e,t)=>ir(`/rbac/role/delete?name=${e}&namespace=${t}`),getRoleBindingYAML:(e,t)=>je(`/rbac/rolebinding/yaml?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`),updateRoleBinding:async(e,t,r)=>{const l=await fetch(`/api/rbac/rolebinding/update?name=${encodeURIComponent(e)}&namespace=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"text/yaml"},body:r});if(!l.ok){const a=await l.json().catch(()=>({message:"Unknown error"}));throw new Error(a.error||a.message||`API error: ${l.statusText}`)}return l.json()},deleteRoleBinding:(e,t)=>ir(`/rbac/rolebinding/delete?name=${e}&namespace=${t}`),getClusterRoleYAML:e=>je(`/rbac/clusterrole/yaml?name=${encodeURIComponent(e)}`),updateClusterRole:async(e,t)=>{const r=await fetch(`/api/rbac/clusterrole/update?name=${encodeURIComponent(e)}`,{method:"POST",headers:{"Content-Type":"text/yaml"},body:t});if(!r.ok){const l=await r.json().catch(()=>({message:"Unknown error"}));throw new Error(l.error||l.message||`API error: ${r.statusText}`)}return r.json()},deleteClusterRole:e=>ir(`/rbac/clusterrole/delete?name=${e}`),getClusterRoleBindingYAML:e=>je(`/rbac/clusterrolebinding/yaml?name=${encodeURIComponent(e)}`),updateClusterRoleBinding:async(e,t)=>{const r=await fetch(`/api/rbac/clusterrolebinding/update?name=${encodeURIComponent(e)}`,{method:"POST",headers:{"Content-Type":"text/yaml"},body:t});if(!r.ok){const l=await r.json().catch(()=>({message:"Unknown error"}));throw new Error(l.error||l.message||`API error: ${r.statusText}`)}return r.json()},deleteClusterRoleBinding:e=>ir(`/rbac/clusterrolebinding/delete?name=${e}`),applyRecommendation:async e=>je("/ml/recommendations/apply",{method:"POST",body:JSON.stringify({id:e})}),getConnectors:()=>je("/connectors"),createConnector:e=>je("/connectors",{method:"POST",body:JSON.stringify(e)}),updateConnector:(e,t)=>je(`/connectors/${e}`,{method:"PUT",body:JSON.stringify(t)}),deleteConnector:e=>je(`/connectors/${e}`,{method:"DELETE"}),testConnector:e=>je(`/connectors/${e}/test`,{method:"POST"}),getIncidents:async(e,t,r)=>{const l=new URLSearchParams;e&&l.append("namespace",e),t&&l.append("type",t),r&&l.append("severity",r);const a=l.toString(),m=a?`/incidents?${a}`:"/incidents";return(await je(m)).incidents||[]},getBrainTimeline:async(e=72)=>{const t=await Fe.getIncidents(),r=new Date(Date.now()-e*36e5);return t.filter(a=>new Date(a.firstSeen)>=r).map(a=>({id:a.id,timestamp:a.firstSeen,type:"incident",severity:a.severity,title:`${a.type.replace(/_/g," ")} - ${a.resourceName}`,description:a.message||`${a.resourceKind} ${a.resourceName} in ${a.namespace||"cluster"}`,resource:{kind:a.resourceKind,name:a.resourceName,namespace:a.namespace}}))},getBrainOOMInsights:async()=>{const e=await Fe.getIncidents(),t=new Date(Date.now()-24*36e5),r=e.filter(i=>new Date(i.firstSeen)>=t),l=r.filter(i=>i.type==="oom").length,a=r.filter(i=>i.type==="crashloop").length,m=new Map;r.forEach(i=>{const n=`${i.namespace||""}:${i.resourceName}`;m.has(n)||m.set(n,{name:i.resourceName.split("/")[0]||i.resourceName,namespace:i.namespace||"",kind:i.resourceKind,issues:{oomKilled:0,restarts:0,crashLoops:0}});const g=m.get(n);i.type==="oom"&&(g.issues.oomKilled+=i.count),i.type==="crashloop"&&(g.issues.crashLoops+=i.count),g.issues.restarts+=i.count});const d=Array.from(m.values()).map(i=>({...i,score:i.issues.oomKilled*10+i.issues.crashLoops*5+i.issues.restarts})).sort((i,n)=>n.score-i.score).slice(0,5);return{incidents24h:l,crashLoops24h:a,topProblematic:d}},getBrainSummary:async()=>{const e=await Fe.getIncidents(),t=new Date(Date.now()-24*36e5),r=e.filter(v=>new Date(v.firstSeen)>=t),l=r.filter(v=>v.severity==="critical").length,a=r.filter(v=>v.severity==="warning").length,m=r.filter(v=>v.type==="oom").length,d=r.filter(v=>v.type==="crashloop").length;let i=`In the last 24 hours, ${r.length} incidents were detected. `;l>0&&(i+=`${l} critical and `),i+=`${a} warning-level issues. `,m>0&&(i+=`${m} OOMKilled events occurred. `),d>0&&(i+=`${d} CrashLoopBackOff incidents detected.`);const n=[];m>0&&n.push("Memory pressure and OOMKilled containers indicate resource constraints"),d>0&&n.push("CrashLoopBackOff patterns suggest application instability"),r.length>10&&n.push("High incident rate indicates systemic issues requiring attention");const g=[];return m>0&&g.push("Review and increase memory limits for workloads experiencing OOMKilled events"),d>0&&g.push("Investigate application logs for CrashLoopBackOff root causes"),r.length>5&&g.push("Consider implementing Horizontal Pod Autoscaling (HPA) for high-traffic workloads"),g.length===0&&g.push("Continue monitoring cluster health and resource usage"),{last24hSummary:i||"No significant incidents in the last 24 hours.",topRiskAreas:n.slice(0,3),recommendedActions:g.slice(0,5),generatedAt:new Date().toISOString()}},getClusters:()=>je("/clusters"),getClusterManagerStatus:()=>je("/clusters/status"),connectCluster:e=>je("/clusters/connect",{method:"POST",body:JSON.stringify(e)}),disconnectCluster:()=>je("/clusters/disconnect",{method:"POST"}),getAutoFixRules:async()=>(await je("/autofix/rules")).rules||[],toggleAutoFixRule:async(e,t,r)=>je("/autofix/rules/toggle",{method:"POST",body:JSON.stringify({ruleId:e,enabled:t,settings:r})}),getAutoFixActions:async()=>(await je("/autofix/actions")).actions||[],getAutoFixEnabled:async()=>(await je("/autofix/enabled")).enabled,setAutoFixEnabled:async e=>je("/autofix/enabled",{method:"POST",body:JSON.stringify({enabled:e})})};async function hh(e){if(!e.downloadUrl)return{success:!1,error:"Download URL is not available for this update"};try{return await Fe.installUpdate(e.downloadUrl)}catch(t){return{success:!1,error:t instanceof Error?t.message:"Failed to apply update"}}}function kl(e){return e!==null&&e.updateAvailable&&!!e.downloadUrl}var gh=w("<button>Apply Update"),vh=w('<div class="flex flex-col gap-2"><div class="flex items-center justify-center gap-2 px-6 py-3 rounded-lg text-sm font-medium text-white"style=background:var(--accent-primary)><div class=spinner style=width:16px;height:16px></div><span></span></div><div class="w-full bg-gray-700 rounded-full h-2 overflow-hidden"><div class="h-full transition-all duration-300 rounded-full"style=background:var(--accent-primary)>'),fh=w('<div class="flex flex-col gap-2"><div class="flex items-center justify-center gap-2 px-6 py-3 rounded-lg text-sm font-medium text-white bg-green-600"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 13l4 4L19 7"></path></svg><span>Update Successful!'),ph=w('<div class="flex flex-col gap-2"><button class="w-full px-6 py-3 rounded-lg text-sm font-medium transition-all flex items-center justify-center gap-2 text-white bg-red-600 hover:opacity-90"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12"></path></svg><span>Update Failed - Try Again'),mh=w("<div>"),bh=w('<div class="flex flex-col gap-2 w-full">');const xh=e=>{const[t,r]=W(!1),[l,a]=W("idle"),[m,d]=W(null),[i,n]=W(0),g=async()=>{if(!kl(e.updateInfo)){e.onError?.("Update cannot be applied - download URL is missing");return}r(!0),a("downloading"),d("Preparing update..."),n(0);const x=setInterval(()=>{n(M=>M<90?M+Math.random()*15:M)},500);try{a("downloading"),d("Downloading update..."),n(10),await new Promise(b=>setTimeout(b,1e3)),n(40),a("installing"),d("Installing update..."),n(50),await new Promise(b=>setTimeout(b,800)),n(80);const M=await hh(e.updateInfo);if(clearInterval(x),M.success)n(100),a("success"),d(" Update installed successfully! Restarting application..."),Je(` Update completed successfully! KubeGraf v${e.updateInfo.latestVersion} is now installed. The application will restart automatically.`,"success"),e.onSuccess?.(),setTimeout(()=>{d("Application will restart in a moment...")},2e3);else{clearInterval(x),a("error");const b=M.error||"Failed to apply update";d(` ${b}`),e.onError?.(b),r(!1),n(0)}}catch(M){clearInterval(x),a("error");const b=M instanceof Error?M.message:"Unknown error occurred";d(` ${b}`),e.onError?.(b),r(!1),n(0)}},v=()=>t()||!kl(e.updateInfo),p=()=>l()==="success",y=()=>l()==="error";return(()=>{var x=bh();return s(x,_(K,{get when(){return Re(()=>!t())()&&!p()},get children(){var M=gh();return M.$$click=g,J(b=>{var o=v(),c=`w-full px-6 py-3 rounded-lg text-sm font-medium transition-all flex items-center justify-center gap-2 ${e.variant==="secondary"?"bg-gray-600 hover:bg-gray-700 text-white":"text-white"} ${v()?"opacity-50 cursor-not-allowed":"hover:opacity-90"}`,u=e.variant!=="secondary"?{background:"var(--accent-primary)"}:{};return o!==b.e&&(M.disabled=b.e=o),c!==b.t&&tt(M,b.t=c),b.a=_t(M,u,b.a),b},{e:void 0,t:void 0,a:void 0}),M}}),null),s(x,_(K,{get when(){return t()},get children(){var M=vh(),b=M.firstChild,o=b.firstChild,c=o.nextSibling,u=b.nextSibling,h=u.firstChild;return s(c,(()=>{var f=Re(()=>l()==="downloading");return()=>f()?"Downloading update...":l()==="installing"?"Installing update...":"Applying update..."})()),J(f=>E(h,"width",`${i()}%`)),M}}),null),s(x,_(K,{get when(){return p()},get children(){return fh()}}),null),s(x,_(K,{get when(){return y()},get children(){var M=ph(),b=M.firstChild;return b.$$click=g,M}}),null),s(x,_(K,{get when(){return m()},get children(){var M=mh();return s(M,m),J(b=>{var o=`text-xs px-3 py-2 rounded ${p()?"bg-green-900/30 border border-green-700/50":y()?"bg-red-900/30 border border-red-700/50":""}`,c=p()?"rgba(34, 197, 94, 0.1)":y()?"rgba(239, 68, 68, 0.1)":"var(--bg-tertiary)",u=p()?"#86efac":y()?"#fca5a5":"var(--text-secondary)",h=p()?"1px solid rgba(34, 197, 94, 0.3)":y()?"1px solid rgba(239, 68, 68, 0.3)":"none";return o!==b.e&&tt(M,b.e=o),c!==b.t&&E(M,"background",b.t=c),u!==b.a&&E(M,"color",b.a=u),h!==b.o&&E(M,"border",b.o=h),b},{e:void 0,t:void 0,a:void 0,o:void 0}),M}}),null),x})()};ut(["click"]);var yh=w(`<div class="fixed inset-0 z-[1000] flex items-center justify-center p-4"style="background-color:rgba(0, 0, 0, 0.5)"><div class="w-full max-w-2xl rounded-lg shadow-2xl overflow-hidden"style="background:var(--bg-card);border:1px solid var(--border-color)"><div class="px-6 py-4 border-b flex items-center justify-between"style=border-color:var(--border-color)><h2 class="text-xl font-bold"style=color:var(--text-primary)>KubeGraf Update Available</h2><button class="text-2xl leading-none hover:opacity-70 transition-opacity"style=color:var(--text-secondary)></button></div><div class="px-6 py-4 max-h-[70vh] overflow-y-auto"><div class=mb-4><p class="text-lg mb-2"style=color:var(--text-primary)>Version <span class=font-semibold>v</span> is now available</p></div><div class=mb-6><h3 class="font-semibold mb-2 flex items-center gap-2"style=color:var(--text-primary)><span></span> Release Notes</h3><div class="prose prose-sm max-w-none p-4 rounded-lg"style=background:var(--bg-tertiary);color:var(--text-primary);white-space:pre-wrap;font-family:monospace;font-size:0.875rem></div></div><div class=mb-6><h3 class="font-semibold mb-2 flex items-center gap-2"style=color:var(--text-primary)><span></span> Comparison</h3><div class="flex items-center gap-4 p-4 rounded-lg"style=background:var(--bg-tertiary)><div><div class=text-sm style=color:var(--text-muted)>Your version:</div><div class=font-semibold style=color:var(--text-primary)>v</div></div><div class=text-2xl style=color:var(--text-secondary)></div><div><div class=text-sm style=color:var(--text-muted)>Latest version:</div><div class=font-semibold style=color:var(--accent-primary)>v</div></div></div></div><div class=mb-6><h3 class="font-semibold mb-2 flex items-center gap-2"style=color:var(--text-primary)><span></span> How to Update</h3><div class="mb-3 p-3 rounded-lg"style="background:rgba(34, 197, 94, 0.1);border:1px solid rgba(34, 197, 94, 0.3)"><p class="text-sm flex items-start gap-2"style=color:var(--text-primary)><span></span><span><strong>Safe Update:</strong> The install script works on Windows, macOS, and Linux. It will automatically detect your OS and architecture, download the correct binary, and install it. Your settings and cluster connections are preserved. After installation, restart KubeGraf to use the new version.</span></p></div><p class="text-sm mb-3"style=color:var(--text-secondary)>Run this command in your terminal when you're ready:</p><div class="flex items-center gap-2 p-4 rounded-lg"style=background:var(--bg-tertiary)><code class="flex-1 font-mono text-sm"style=color:var(--text-primary)>curl -sSL https://kubegraf.io/install.sh | bash</code><button class="px-3 py-1.5 rounded text-sm font-medium transition-colors"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)">Copy</button></div><div class="mt-3 p-3 rounded-lg"style=background:var(--bg-secondary)><p class=text-xs style=color:var(--text-muted)><strong>What happens:</strong></p><ul class="text-xs mt-1.5 ml-4 list-disc"style=color:var(--text-muted)><li>Script detects your OS (Windows/macOS/Linux) and architecture</li><li>Downloads the latest version from GitHub releases</li><li>Installs to <code>/usr/local/bin</code> (may require sudo on Linux/macOS)</li><li>Preserves all your settings and cluster connections</li><li>Restart KubeGraf manually to use the new version</li></ul><p class="text-xs mt-2 italic"style=color:var(--text-muted)> <strong>Tip:</strong> If KubeGraf is currently running, stop it first, run the install command, then start it again.</p></div><div class="mt-3 p-3 rounded-lg"style="background:var(--bg-tertiary);border:1px solid var(--border-color)"><p class="text-xs mb-2"style=color:var(--text-muted)><strong>Alternative (GitHub Raw):</strong></p><code class="text-xs font-mono block"style=color:var(--text-primary)>curl -sSL https://raw.githubusercontent.com/kubegraf/kubegraf/main/docs/install.sh | bash</code></div><p class="text-xs mt-3"style=color:var(--text-muted)>Or visit: <a target=_blank rel="noopener noreferrer"class="underline hover:opacity-80"style=color:var(--accent-primary)></a> to download manually</p></div></div><div class="px-6 py-4 border-t flex items-center justify-between gap-3"style=border-color:var(--border-color)><div class="flex items-center gap-3"></div><div class="flex items-center gap-3"><button class="px-4 py-2 rounded-lg text-sm font-medium transition-colors"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)">Remind Me Later</button><button class="px-4 py-2 rounded-lg text-sm font-medium text-white transition-colors hover:opacity-90"style=background:var(--accent-primary)>View on GitHub`);const Gc=e=>{const t=()=>{const l=e.updateInfo.htmlUrl||`https://github.com/kubegraf/kubegraf/releases/tag/v${e.updateInfo.latestVersion}`;window.open(l,"_blank","noopener,noreferrer")},r=()=>{navigator.clipboard.writeText("curl -sSL https://kubegraf.io/install.sh | bash").then(()=>{alert("Install command copied to clipboard!")})};return _(K,{get when(){return e.isOpen},get children(){return _(ms,{get children(){var l=yh(),a=l.firstChild,m=a.firstChild,d=m.firstChild,i=d.nextSibling,n=m.nextSibling,g=n.firstChild,v=g.firstChild,p=v.firstChild,y=p.nextSibling;y.firstChild;var x=g.nextSibling,M=x.firstChild,b=M.nextSibling,o=x.nextSibling,c=o.firstChild,u=c.nextSibling,h=u.firstChild,f=h.firstChild,$=f.nextSibling;$.firstChild;var C=h.nextSibling,k=C.nextSibling,S=k.firstChild,L=S.nextSibling;L.firstChild;var P=o.nextSibling,I=P.firstChild,D=I.nextSibling;D.firstChild;var T=D.nextSibling,B=T.nextSibling,N=B.firstChild,O=N.nextSibling,H=B.nextSibling,A=H.firstChild,z=A.nextSibling;z.nextSibling;var F=H.nextSibling,j=F.firstChild;j.nextSibling;var q=F.nextSibling,U=q.firstChild,Y=U.nextSibling,V=n.nextSibling,X=V.firstChild,R=X.nextSibling,G=R.firstChild,te=G.nextSibling;return Rt(l,"click",e.onClose,!0),a.$$click=ae=>ae.stopPropagation(),Rt(i,"click",e.onClose,!0),s(y,()=>e.updateInfo.latestVersion,null),s(b,()=>e.updateInfo.releaseNotes||"No release notes available."),s($,()=>e.updateInfo.currentVersion,null),s(L,()=>e.updateInfo.latestVersion,null),O.$$click=r,s(Y,()=>e.updateInfo.htmlUrl),s(X,_(K,{get when(){return kl(e.updateInfo)},get children(){return _(xh,{get updateInfo(){return e.updateInfo},onSuccess:()=>{Je(` KubeGraf is updating to v${e.updateInfo.latestVersion}. The application will restart shortly.`,"success"),e.onClose()},onError:ae=>{console.error("Update failed:",ae),Je(`Update failed: ${ae}`,"error")}})}})),Rt(G,"click",e.onClose,!0),te.$$click=t,J(()=>dt(Y,"href",e.updateInfo.htmlUrl)),l}})}})};ut(["click"]);const Jc=[{title:"Overview",items:[{id:"dashboard",label:"Dashboard",icon:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},{id:"topology",label:"Cluster Overview",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},{id:"monitoredevents",label:"Live Events Stream",icon:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"}]},{title:"Insights",items:[{id:"incidents",label:"Incidents",icon:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"},{id:"anomalies",label:"Anomalies",icon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},{id:"security",label:"Security Insights",icon:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"},{id:"cost",label:"Cost Insights",icon:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},{id:"drift",label:"Drift Detection",icon:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"}]},{title:"CD",items:[{id:"deployapp",label:"Deploy",icon:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"},{id:"rollouts",label:"Rollouts",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"}]},{title:"Workloads",items:[{id:"pods",label:"Pods",icon:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"},{id:"deployments",label:"Deployments",icon:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"},{id:"statefulsets",label:"StatefulSets",icon:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"},{id:"daemonsets",label:"DaemonSets",icon:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"},{id:"jobs",label:"Jobs",icon:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"},{id:"cronjobs",label:"CronJobs",icon:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},{id:"pdb",label:"PDB",icon:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"},{id:"hpa",label:"HPA",icon:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"}]},{title:"Networking",items:[{id:"services",label:"Services",icon:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"},{id:"ingresses",label:"Ingress",icon:"M13 10V3L4 14h7v7l9-11h-7z"},{id:"networkpolicies",label:"Network Policies",icon:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"}]},{title:"Config & Storage",items:[{id:"configmaps",label:"ConfigMaps",icon:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"},{id:"secrets",label:"Secrets",icon:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"},{id:"certificates",label:"Certificates",icon:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"},{id:"storage",label:"PVs / PVCs",icon:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"}]},{title:"Access Control",items:[{id:"serviceaccounts",label:"Service Accounts",icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"},{id:"rbac",label:"RBAC",icon:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"}]},{title:"Custom Resources",items:[{id:"customresources",label:"CRDs & Instances",icon:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"}]},{title:"Platform",items:[{id:"nodes",label:"Nodes",icon:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"},{id:"usermanagement",label:"Users",icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"},{id:"resourcemap",label:"Resource Map",icon:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"},{id:"connectors",label:"Integrations",icon:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"},{id:"plugins",label:"Plugins",icon:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"},{id:"terminal",label:"Terminal",icon:"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"}]},{title:"Intelligence",items:[{id:"ai",label:"AI Assistant",icon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},{id:"autofix",label:"AutoFix Engine",icon:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"},{id:"sreagent",label:"SRE Agent",icon:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"},{id:"aiagents",label:"AI Agents",icon:"M9.75 3.104v5.714a2.25 2.25 0 01-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 014.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0112 15a9.065 9.065 0 00-6.23-.693L5 14.5m14.8.8l1.57.393A9.065 9.065 0 0021.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.065 9.065 0 003.464 3.693M19.8 15.3l-1.464-1.464M5 14.5l-1.464-1.464"}]},{title:"ML",items:[{id:"trainingjobs",label:"Training Jobs",icon:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"},{id:"inferenceservices",label:"Inference Services",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},{id:"mlflow",label:"MLflow",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},{id:"feast",label:"Feast",icon:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"},{id:"gpudashboard",label:"GPU Dashboard",icon:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"}],conditional:!0}],ql="All Namespaces",[_h,Xc]=W(ql),Xt=_h,[bn,Zc]=W(["default"]),[Pn,$h]=W(null),[Gn,wh]=W(0),[ii,Sh]=W([]),[Ch,aa]=W(!1),[vi,Qc]=W([]),[nr,ed]=W(""),[kh,il]=W(!1),[Mh,ri]=W(""),[Ts,Ah]=W({connected:!1,context:"",server:"",namespace:"default",nodeCount:0,podCount:0,cpuUsage:0,memoryUsage:0});function Lh(e){return!e||e.length===0?ql:e.length===1?e[0]:`${e.length} namespaces`}function td(e){return Array.from(new Set(e.map(r=>r.trim()).filter(Boolean))).sort((r,l)=>r.localeCompare(l))}function Eh(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r+=1)if(e[r]!==t[r])return!1;return!0}function Ml(e){const t=td(e.selectedNamespaces||[]),r=e.filters||{};$h({selectedNamespaces:t,selectedCluster:e.selectedCluster||"",filters:r}),Sh(t);const l=(()=>{if(r.namespaceMode==="all")return[];if(t.length===0&&(r.namespaceMode==="default"||!r.namespaceMode)){const a=Ts().namespace;return a?[a]:[]}return t})();Xc(Lh(l)),wh(a=>a+1)}async function Th(){if(!Ch()){aa(!0);try{const e=await Fe.getWorkspaceContext();Ml(e||{selectedNamespaces:[]})}catch(e){console.error("Failed to load workspace context",e),Ml({selectedNamespaces:[]})}finally{aa(!1)}}}async function Dh(e){try{const t=await Fe.updateWorkspaceContext({selectedNamespaces:e.selectedNamespaces||[],selectedCluster:e.selectedCluster||"",filters:e.filters||{}});Ml(t||e)}catch(t){throw console.error("Failed to update workspace context",t),t}}async function Al(e,t){const r=td(e);if(Eh(ii(),r)&&(!t||t===Pn()?.filters?.namespaceMode))return;const l=Pn()||{selectedCluster:"",filters:{}},a={...l.filters||{}};let m;t?m=t:m=r.length===0?"default":"custom",a.namespaceMode=m,await Dh({selectedNamespaces:r,selectedCluster:l.selectedCluster,filters:a})}async function ki(e){try{Xc(e),!e||e==="_all"||e===ql?await Al([],"all"):await Al([e],"custom")}catch(t){console.error("Failed to set namespace",t)}}async function Rh(){const e=await fetch("/api/namespaces");if(!e.ok)throw new Error("Failed to fetch namespaces");return(await e.json()).namespaces||[]}async function Ph(){const e=await fetch("/api/pods");if(!e.ok)throw new Error("Failed to fetch pods");const t=await e.json();return Array.isArray(t)?t:t.pods||[]}async function Ih(){const e=await fetch("/api/deployments");if(!e.ok)throw new Error("Failed to fetch deployments");const t=await e.json();return Array.isArray(t)?t:t.deployments||[]}async function Bh(){const e=await fetch("/api/services");if(!e.ok)throw new Error("Failed to fetch services");const t=await e.json();return Array.isArray(t)?t:t.services||[]}async function Nh(){const e=await fetch("/api/nodes");if(!e.ok)throw new Error("Failed to fetch nodes");const t=await e.json();return Array.isArray(t)?t:t.nodes||[]}async function Oh(){const e=await fetch("/api/status");if(!e.ok)throw new Error("Failed to fetch status");const t=await e.json();return{connected:t.connected||!1,context:t.cluster||t.context||"",server:t.server||"",namespace:t.namespace||"default",nodeCount:t.nodeCount||0,podCount:t.podCount||0,cpuUsage:t.cpuUsage||0,memoryUsage:t.memoryUsage||0}}async function rd(){const e=await fetch("/api/contexts");if(!e.ok)throw new Error("Failed to fetch contexts");return(await e.json()).contexts||[]}async function sd(e){il(!0),ri(`Switching to ${e}...`);try{if(!(await fetch("/api/contexts/switch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({context:e})})).ok)throw new Error("Failed to switch context");ed(e),ri(`Loading resources from ${e}...`),nd();const r=await rd();Qc(r);const l=await fetch("/api/namespaces");if(l.ok){const a=await l.json();Zc(a.namespaces||[])}ri(`Connected to ${e}`),setTimeout(()=>{il(!1),ri("")},1e3)}catch(t){throw ri(`Failed to switch to ${e}`),setTimeout(()=>{il(!1),ri("")},2e3),t}}const[In]=it(Rh),[ca,{refetch:zh}]=it(Gn,()=>Ph()),[fM,{refetch:Fh}]=it(Gn,()=>Ih()),[pM,{refetch:Hh}]=it(Gn,()=>Bh()),[Is,{refetch:id}]=it(Gn,()=>Nh()),[Ll,{refetch:jh}]=it(Oh),[El,{refetch:mM}]=it(rd);It(()=>{const e=In();e&&Zc(e)});It(()=>{const e=Ll();e&&(Ah(e),ed(e.context))});It(()=>{const e=El();e&&Qc(e)});It(()=>{Ll.error&&console.error("Status error:",Ll.error),In.error&&console.error("Namespaces error:",In.error),ca.error&&console.error("Pods error:",ca.error),Is.error&&console.error("Nodes error:",Is.error)});const[yr,Uh]=W(0);function nd(){zh(),Fh(),Hh(),id(),jh(),Uh(e=>e+1)}typeof window<"u"&&Th();const[Vh,nl]=W(!1);function Wh(){const e=Is(),t=qh(e),r=Kh();return Tl(),localStorage.getItem("kubegraf-ml-force-show")==="true"?!0:localStorage.getItem("kubegraf-ml-disabled")==="true"?!1:t||r||Vh()||!0}function qh(e){return!e||e.length===0?!1:e.some(t=>{const r=t.labels||{},l=t.capacity||{};return r["nvidia.com/gpu"]!==void 0||r.accelerator==="nvidia-tesla-k80"||r.accelerator==="nvidia-tesla-p100"||r.accelerator==="nvidia-tesla-v100"||l["nvidia.com/gpu"]!==void 0||t.allocatable?.["nvidia.com/gpu"]!==void 0})}function Kh(){try{return localStorage.getItem("kubegraf-ml-enabled")==="true"}catch{return!1}}async function Tl(){try{if((await fetch("/api/trainingjobs?limit=1")).ok){nl(!0);return}}catch{}try{if((await fetch("/api/inferenceservices?limit=1")).ok){nl(!0);return}}catch{}try{const e=await fetch("/api/services?namespace=default");e.ok&&(await e.json()).some(l=>l.name?.toLowerCase().includes("mlflow")||l.name?.toLowerCase().includes("feast"))&&nl(!0)}catch{}}typeof window<"u"&&(Tl(),setInterval(Tl,3e4));var Yh=w('<button class="w-full flex items-center justify-between px-2.5 py-2 rounded-md hover:bg-white/5 transition-colors group"><span class="text-xs font-bold uppercase tracking-wide"style=color:var(--text-primary)></span><svg fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 9l-7 7-7-7">'),Gh=w("<div>"),Jh=w("<div class=mb-1>"),Xh=w("<span>"),Zh=w('<div class="fixed px-2 py-1 rounded text-xs font-medium whitespace-nowrap z-[9999]"style="transform:translateY(-50%);background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color);box-shadow:0 2px 8px rgba(0,0,0,0.3)">'),Qh=w('<button><svg class="w-4 h-4 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2>'),eg=w('<svg class="w-4 h-4 flex-shrink-0"viewBox="0 0 24 24"fill=none><circle cx=12 cy=12 r=12 fill=#3b82f6></circle><circle cx=12 cy=12 r=10 stroke=white stroke-width=1.5 fill=none></circle><path d="M12 7v6M9 10l3-3 3 3"stroke=white stroke-width=2.5 stroke-linecap=round stroke-linejoin=round fill=none>'),tg=w('<span class="text-sm flex-1 min-w-0 truncate">Check Updates'),rg=w('<button class="w-full flex items-center gap-2.5 px-2.5 py-1.5 rounded-md transition-all hover:bg-white/5"title="Check for Updates"style=color:var(--text-secondary)>'),sg=w('<svg class="w-4 h-4 flex-shrink-0 animate-spin"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">'),ig=w('<span class="font-bold text-lg gradient-text floating-text">KubeGraf'),ng=w('<button class="absolute right-2.5 top-1/2 transform -translate-y-1/2 p-0.5 rounded hover:bg-white/10"style=color:var(--text-muted)><svg class="w-3.5 h-3.5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12">'),lg=w('<div class="px-2.5 py-2 border-b"style=border-color:rgba(255,255,255,0.08)><div class=relative><svg class="absolute left-2.5 top-1/2 transform -translate-y-1/2 w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg><input type=text placeholder=Search... class="w-full pl-8 pr-2.5 py-1.5 rounded-md text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)">'),og=w('<div class="px-2.5 py-8 text-center"><p class=text-sm style=color:var(--text-muted)>No results found'),ag=w('<span class="text-sm flex-1 min-w-0 truncate">Settings'),cg=w('<div class="flex items-center gap-1.5 px-2.5 mt-2 text-xs"style=color:var(--text-muted)><span class="w-1.5 h-1.5 rounded-full bg-green-500"></span><span class=truncate>'),dg=w('<aside><div class="h-14 flex items-center justify-between px-3 border-b"style=border-color:rgba(255,255,255,0.08)><button class="flex items-center gap-2.5 hover:opacity-80 transition-opacity"title="Go to Dashboard"><svg class=floating-logo viewBox="0 0 100 100"width=32 height=32 xmlns=http://www.w3.org/2000/svg><defs><linearGradient id=gGrad x1=0% y1=0% x2=100% y2=100%><stop offset=0% stop-color=#22d3ee></stop><stop offset=50% stop-color=#3b82f6></stop><stop offset=100% stop-color=#d946ef></stop></linearGradient><filter id=glow><feGaussianBlur stdDeviation=1.5 result=coloredBlur></feGaussianBlur><feMerge><feMergeNode in=coloredBlur></feMergeNode><feMergeNode in=SourceGraphic></feMergeNode></feMerge></filter></defs><g filter=url(#glow)><line x1=80 y1=30 x2=60 y2=12 stroke=#22d3ee stroke-width=3.5 stroke-linecap=round></line><line x1=60 y1=12 x2=35 y2=12 stroke=#06b6d4 stroke-width=3.5 stroke-linecap=round></line><line x1=35 y1=12 x2=12 y2=30 stroke=#3b82f6 stroke-width=3.5 stroke-linecap=round></line><line x1=12 y1=30 x2=12 y2=70 stroke=#3b82f6 stroke-width=3.5 stroke-linecap=round></line><line x1=12 y1=70 x2=35 y2=88 stroke=#6366f1 stroke-width=3.5 stroke-linecap=round></line><line x1=35 y1=88 x2=60 y2=88 stroke=#8b5cf6 stroke-width=3.5 stroke-linecap=round></line><line x1=60 y1=88 x2=80 y2=70 stroke=#a855f7 stroke-width=3.5 stroke-linecap=round></line><line x1=80 y1=70 x2=80 y2=50 stroke=#c026d3 stroke-width=3.5 stroke-linecap=round></line><line x1=80 y1=50 x2=55 y2=50 stroke=#d946ef stroke-width=3.5 stroke-linecap=round></line></g><circle cx=80 cy=30 r=5 fill=#22d3ee></circle><circle cx=60 cy=12 r=5 fill=#06b6d4></circle><circle cx=35 cy=12 r=5 fill=#3b82f6></circle><circle cx=12 cy=30 r=5 fill=#3b82f6></circle><circle cx=12 cy=70 r=5 fill=#6366f1></circle><circle cx=35 cy=88 r=5 fill=#8b5cf6></circle><circle cx=60 cy=88 r=5 fill=#a855f7></circle><circle cx=80 cy=70 r=5 fill=#c026d3></circle><circle cx=80 cy=50 r=5 fill=#d946ef></circle><circle cx=55 cy=50 r=5 fill=#d946ef></circle><g filter=url(#glow)><path d="M42 22 L62 34 L42 46 L22 34 Z"fill=#22d3ee stroke=#fff stroke-width=1.5></path><path d="M42 46 L62 34 L62 54 L42 66 Z"fill=#8b5cf6 stroke=#fff stroke-width=1.5></path><path d="M42 46 L22 34 L22 54 L42 66 Z"fill=#3b82f6 stroke=#fff stroke-width=1.5></path></g></svg></button><button class="p-1 rounded hover:bg-white/10 transition-colors"><svg fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M11 19l-7-7 7-7m8 14l-7-7 7-7"></path></svg></button></div><nav class="p-1.5 overflow-y-auto"></nav><div class="absolute bottom-0 left-0 right-0 p-2 border-t"style=border-color:rgba(255,255,255,0.08)><button title=Settings><svg class="w-4 h-4 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z">');const ug=e=>{const[t,r]=W(e.defaultExpanded??!0);return(()=>{var l=Jh();return s(l,_(K,{get when(){return!cr()},get children(){var a=Yh(),m=a.firstChild,d=m.nextSibling;return a.$$click=()=>r(!t()),s(m,()=>e.section.title),J(()=>dt(d,"class",`w-3.5 h-3.5 transition-transform duration-200 ${t()?"":"-rotate-90"}`)),a}}),null),s(l,_(K,{get when(){return t()||cr()},get children(){var a=Gh();return s(a,_(Xe,{get each(){return e.section.items},children:m=>{const[d,i]=W(!1),[n,g]=W({top:0,left:0});return(()=>{var v=Qh(),p=v.firstChild,y=p.firstChild;return v.addEventListener("mouseleave",()=>i(!1)),v.addEventListener("mouseenter",x=>{if(cr()){const M=x.currentTarget.getBoundingClientRect();g({top:M.top+M.height/2,left:M.right+8}),i(!0)}}),v.$$click=x=>{x.preventDefault(),x.stopPropagation(),Ut(m.id)},s(v,_(K,{get when(){return!cr()},get children(){var x=Xh();return s(x,()=>m.label),J(()=>tt(x,`text-sm ${us()===m.id?"font-medium":""}`)),x}}),null),s(v,_(K,{get when(){return Re(()=>!!cr())()&&d()},get children(){return _(ms,{get children(){var x=Zh();return s(x,()=>m.label),J(M=>{var b=`${n().top}px`,o=`${n().left}px`;return b!==M.e&&E(x,"top",M.e=b),o!==M.t&&E(x,"left",M.t=o),M},{e:void 0,t:void 0}),x}})}}),null),J(x=>{var M=`w-full flex items-center gap-2.5 px-2.5 py-1.5 rounded-md transition-all ${us()===m.id?"bg-white/10":"hover:bg-white/5"}`,b=us()===m.id?"var(--text-primary)":"var(--text-secondary)",o=m.icon;return M!==x.e&&tt(v,x.e=M),b!==x.t&&E(v,"color",x.t=b),o!==x.a&&dt(y,"d",x.a=o),x},{e:void 0,t:void 0,a:void 0}),v})()}})),J(()=>tt(a,`space-y-px ${cr()?"":"mt-0.5"}`)),a}}),null),l})()},hg=()=>{const[e,t]=W(!1),[r,l]=W(!1),[a,m]=W(null);return[(()=>{var d=rg();return d.$$click=async()=>{t(!0);try{const i=await Fe.checkUpdate();m(i),Yc(i),i.updateAvailable?l(!0):Je("You're on the latest version ","success")}catch(i){Je("Failed to check for updates","error"),console.error("Update check failed:",i)}finally{t(!1)}},s(d,_(K,{get when(){return!e()},get fallback(){return sg()},get children(){return eg()}}),null),s(d,_(K,{get when(){return!cr()},get children(){return tg()}}),null),J(()=>d.disabled=e()),d})(),_(K,{get when(){return Re(()=>!!r())()&&a()},get children(){return _(Gc,{get isOpen(){return r()},onClose:()=>l(!1),get updateInfo(){return a()}})}})]},gg=()=>{const[e,t]=W(""),[r,l]=W(""),a=async()=>{try{const i=await Fe.getStatus();if(i?.version){const n=i.version,g=r();l(n),g&&g!==n&&g!==""&&Je(` KubeGraf updated to v${n}!`,"success")}else try{const n=await Fe.checkForUpdates();if(n?.currentVersion){const g=n.currentVersion,v=r();l(g),v&&v!==g&&v!==""&&Je(` KubeGraf updated to v${g}!`,"success")}}catch(n){console.error("Failed to get version from update check:",n)}}catch(i){console.error("Failed to fetch version:",i)}};zt(()=>{a();const i=setInterval(a,1e4),n=()=>{document.hidden||setTimeout(a,1e3)};document.addEventListener("visibilitychange",n);const g=()=>{setTimeout(a,500)};return window.addEventListener("focus",g),()=>{clearInterval(i),document.removeEventListener("visibilitychange",n),window.removeEventListener("focus",g)}});const m=()=>{console.log("[Sidebar] Terminal icon clicked - calling toggleTerminal()"),Zu(),console.log("[Sidebar] toggleTerminal() called")},d=et(()=>{const i=e().toLowerCase().trim(),n=Wh();let g=Jc.filter(v=>!(v.conditional&&!n));return i&&(g=g.map(v=>({...v,items:v.items.filter(p=>p.label.toLowerCase().includes(i)||v.title.toLowerCase().includes(i))})).filter(v=>v.items.length>0)),g});return(()=>{var i=dg(),n=i.firstChild,g=n.firstChild;g.firstChild;var v=g.nextSibling,p=v.firstChild,y=n.nextSibling,x=y.nextSibling,M=x.firstChild;return M.firstChild,g.$$click=()=>Ut("dashboard"),s(g,_(K,{get when(){return!cr()},get children(){return ig()}}),null),Rt(v,"click",Ju,!0),s(i,_(K,{get when(){return!cr()},get children(){var b=lg(),o=b.firstChild,c=o.firstChild,u=c.nextSibling;return u.$$input=h=>t(h.currentTarget.value),s(o,_(K,{get when(){return e()},get children(){var h=ng();return h.$$click=()=>t(""),h}}),null),J(()=>u.value=e()),b}}),y),s(y,_(Xe,{get each(){return d()},children:(b,o)=>{const c=o()<3;return _(ug,{section:b,defaultExpanded:c,onTerminalClick:m})}}),null),s(y,_(K,{get when(){return Re(()=>!!e())()&&d().length===0},get children(){var b=og();return b.firstChild,b}}),null),M.$$click=()=>Ut("settings"),s(M,_(K,{get when(){return!cr()},get children(){return ag()}}),null),s(x,_(hg,{}),null),s(x,_(K,{get when(){return!cr()},get children(){var b=cg(),o=b.firstChild,c=o.nextSibling;return s(c,(()=>{var u=Re(()=>!!r());return()=>u()?`v${r()}`:"Loading..."})()),b}}),null),J(b=>{var o=`fixed left-0 top-0 h-full sidebar-glass transition-all duration-300 z-40 ${cr()?"w-16":"w-52"}`,c=cr()?"Expand":"Collapse",u=`w-4 h-4 transition-transform ${cr()?"rotate-180":""}`,h=cr()?"calc(100% - 3.5rem - 7rem)":"calc(100% - 3.5rem - 7rem - 3rem)",f=`w-full flex items-center gap-2.5 px-2.5 py-1.5 rounded-md transition-all hover:bg-white/5 ${us()==="settings"?"bg-white/10":""}`,$=us()==="settings"?"var(--text-primary)":"var(--text-secondary)";return o!==b.e&&tt(i,b.e=o),c!==b.t&&dt(v,"title",b.t=c),u!==b.a&&dt(p,"class",b.a=u),h!==b.o&&E(y,"height",b.o=h),f!==b.i&&tt(M,b.i=f),$!==b.n&&E(M,"color",b.n=$),b},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),i})()};ut(["click","input"]);class vg{ws=null;reconnectAttempts=0;maxReconnectAttempts=10;reconnectDelay=1e3;handlers=new Set;pingInterval=null;connect(){if(this.ws?.readyState===WebSocket.OPEN)return;const r=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`;try{this.ws=new WebSocket(r),this.ws.onopen=()=>{console.log("WebSocket connected"),this.reconnectAttempts=0,this.startPing(),this.notifyHandlers({type:"connection",data:{connected:!0}})},this.ws.onmessage=l=>{try{const a=JSON.parse(l.data);this.notifyHandlers(a)}catch(a){console.error("Failed to parse WebSocket message:",a)}},this.ws.onclose=()=>{console.log("WebSocket disconnected"),this.stopPing(),this.notifyHandlers({type:"connection",data:{connected:!1}}),this.attemptReconnect()},this.ws.onerror=l=>{console.error("WebSocket error:",l)}}catch(l){console.error("Failed to create WebSocket:",l),this.attemptReconnect()}}disconnect(){this.stopPing(),this.ws&&(this.ws.close(),this.ws=null)}attemptReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.log("Max reconnect attempts reached");return}this.reconnectAttempts++;const t=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);console.log(`Reconnecting in ${t}ms (attempt ${this.reconnectAttempts})`),setTimeout(()=>this.connect(),t)}startPing(){this.pingInterval=window.setInterval(()=>{this.ws?.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify({type:"ping"}))},3e4)}stopPing(){this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null)}subscribe(t){return this.handlers.add(t),()=>this.handlers.delete(t)}notifyHandlers(t){this.handlers.forEach(r=>{try{r(t)}catch(l){console.error("Handler error:",l)}})}send(t){this.ws?.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify(t))}}const Bs=new vg,[bM,fg]=W(!1);Bs.subscribe(e=>{e.type==="connection"&&fg(e.data.connected)});const[da,pg]=W([]),[ua,mg]=W([]),[ha,bg]=W([]),[_i,Hi]=W(null),[os,ci]=W(!1);async function Rs(){ci(!0);try{const e=await Fe.getClusters();pg(e.clusters||[]),mg(e.discovered||[]),Hi(e.status||null),bg(e.contexts||[])}catch(e){console.error("Failed to load clusters",e)}finally{ci(!1)}}async function xg(){try{const e=await Fe.getClusterManagerStatus();Hi(e)}catch(e){console.error("Failed to fetch cluster status",e)}}async function xn(e){ci(!0);try{const t=await Fe.connectCluster(e),r=t.cluster?.name||e.name||"cluster";Je(`Connected to ${r}`,"success"),Hi(t.status||null),await Rs()}catch(t){throw Je(t?.message||"Failed to connect to cluster","error"),t}finally{ci(!1)}}async function ga(){ci(!0);try{const e=await Fe.disconnectCluster();Hi(e.status||null),Je("Cluster disconnected","info"),await Rs()}catch(e){throw Je(e?.message||"Failed to disconnect cluster","error"),e}finally{ci(!1)}}async function yg(e){e&&(await xn({name:e.name,provider:e.provider,kubeconfigPath:e.kubeconfigPath,makeDefault:!0}),Je(`${e.name} set as default cluster`,"success"))}function va(){Ut("clustermanager")}Bs.subscribe(e=>{e.type==="cluster_status"&&Hi(e.data)});const[cs,_g]=W(!1),[sn,$g]=W(!1);function Dl(){_g(e=>!e)}function wg(){$g(e=>!e)}const Gr={dark:{name:"dark",label:"Dark",icon:"moon",colors:{bgPrimary:"#0f172a",bgSecondary:"#1e293b",bgTertiary:"#334155",bgCard:"rgba(30, 41, 59, 0.8)",bgNavbar:"rgba(15, 23, 42, 0.95)",bgInput:"rgba(30, 41, 59, 0.8)",textPrimary:"#ffffff",textSecondary:"#94a3b8",textMuted:"#64748b",borderColor:"rgba(100, 116, 139, 0.3)",borderLight:"rgba(100, 116, 139, 0.5)",accentPrimary:"#06b6d4",accentSecondary:"#3b82f6",accentGradient:"linear-gradient(135deg, #06b6d4 0%, #3b82f6 50%, #8b5cf6 100%)",successColor:"#22c55e",warningColor:"#f59e0b",errorColor:"#ef4444"}},light:{name:"light",label:"Light",icon:"sun",colors:{bgPrimary:"#f8fafc",bgSecondary:"#e2e8f0",bgTertiary:"#cbd5e1",bgCard:"rgba(255, 255, 255, 0.95)",bgNavbar:"rgba(248, 250, 252, 0.95)",bgInput:"rgba(255, 255, 255, 0.9)",textPrimary:"#0f172a",textSecondary:"#475569",textMuted:"#64748b",borderColor:"rgba(148, 163, 184, 0.4)",borderLight:"rgba(148, 163, 184, 0.6)",accentPrimary:"#0891b2",accentSecondary:"#2563eb",accentGradient:"linear-gradient(135deg, #0891b2 0%, #2563eb 100%)",successColor:"#16a34a",warningColor:"#d97706",errorColor:"#dc2626"}},midnight:{name:"midnight",label:"Midnight",icon:"stars",colors:{bgPrimary:"#030712",bgSecondary:"#111827",bgTertiary:"#1f2937",bgCard:"rgba(17, 24, 39, 0.9)",bgNavbar:"rgba(3, 7, 18, 0.98)",bgInput:"rgba(17, 24, 39, 0.9)",textPrimary:"#f9fafb",textSecondary:"#9ca3af",textMuted:"#6b7280",borderColor:"rgba(75, 85, 99, 0.4)",borderLight:"rgba(75, 85, 99, 0.6)",accentPrimary:"#8b5cf6",accentSecondary:"#a855f7",accentGradient:"linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%)",successColor:"#10b981",warningColor:"#f59e0b",errorColor:"#f43f5e"}},nord:{name:"nord",label:"Nord",icon:"snowflake",colors:{bgPrimary:"#2e3440",bgSecondary:"#3b4252",bgTertiary:"#434c5e",bgCard:"rgba(46, 52, 64, 0.9)",bgNavbar:"rgba(46, 52, 64, 0.98)",bgInput:"rgba(46, 52, 64, 0.9)",textPrimary:"#eceff4",textSecondary:"#d8dee9",textMuted:"#81a1c1",borderColor:"rgba(129, 161, 193, 0.3)",borderLight:"rgba(129, 161, 193, 0.5)",accentPrimary:"#81a1c1",accentSecondary:"#5e81ac",accentGradient:"linear-gradient(135deg, #81a1c1 0%, #5e81ac 100%)",successColor:"#a3be8c",warningColor:"#ebcb8b",errorColor:"#bf616a"}},ocean:{name:"ocean",label:"Ocean",icon:"wave",colors:{bgPrimary:"#0c1929",bgSecondary:"#132f4c",bgTertiary:"#1a4971",bgCard:"rgba(19, 47, 76, 0.9)",bgNavbar:"rgba(12, 25, 41, 0.98)",bgInput:"rgba(19, 47, 76, 0.9)",textPrimary:"#ffffff",textSecondary:"#b2bac2",textMuted:"#8b949e",borderColor:"rgba(48, 98, 139, 0.5)",borderLight:"rgba(48, 98, 139, 0.7)",accentPrimary:"#29b6f6",accentSecondary:"#4fc3f7",accentGradient:"linear-gradient(135deg, #29b6f6 0%, #4fc3f7 100%)",successColor:"#66bb6a",warningColor:"#ffa726",errorColor:"#ef5350"}},terminal:{name:"terminal",label:"Terminal",icon:"terminal",colors:{bgPrimary:"#000000",bgSecondary:"#1a1a1a",bgTertiary:"#2d2d2d",bgCard:"rgba(26, 26, 26, 0.95)",bgNavbar:"rgba(0, 0, 0, 0.98)",bgInput:"rgba(26, 26, 26, 0.9)",textPrimary:"#ffffff",textSecondary:"#e5e5e5",textMuted:"#999999",borderColor:"rgba(255, 255, 255, 0.1)",borderLight:"rgba(255, 255, 255, 0.15)",accentPrimary:"#007aff",accentSecondary:"#5ac8fa",accentGradient:"linear-gradient(135deg, #007aff 0%, #5ac8fa 100%)",successColor:"#34c759",warningColor:"#ff9500",errorColor:"#ff3b30"}},"github-dark":{name:"github-dark",label:"GitHub Dark",icon:"github",colors:{bgPrimary:"#0d1117",bgSecondary:"#161b22",bgTertiary:"#21262d",bgCard:"rgba(13, 17, 23, 0.9)",bgNavbar:"rgba(13, 17, 23, 0.98)",bgInput:"rgba(13, 17, 23, 0.9)",textPrimary:"#c9d1d9",textSecondary:"#8b949e",textMuted:"#6e7681",borderColor:"rgba(48, 54, 61, 0.4)",borderLight:"rgba(48, 54, 61, 0.6)",accentPrimary:"#58a6ff",accentSecondary:"#79c0ff",accentGradient:"linear-gradient(135deg, #58a6ff 0%, #79c0ff 100%)",successColor:"#3fb950",warningColor:"#d29922",errorColor:"#f85149"}}};function Sg(){if(typeof window<"u"){const e=localStorage.getItem("kubegraf-theme");if(e&&Gr[e])return e}return"dark"}const[$s,Cg]=W(Sg());function ld(e){const t=Gr[e],r=document.documentElement;Object.entries(t.colors).forEach(([l,a])=>{const m=l.replace(/([A-Z])/g,"-$1").toLowerCase();r.style.setProperty(`--${m}`,a)}),document.body.setAttribute("data-theme",e),localStorage.setItem("kubegraf-theme",e)}function od(e){Cg(e),ld(e)}typeof window<"u"&&ld($s());const kg=()=>Gr[$s()];var Mg=w('<svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="w-5 h-5"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z">'),Ag=w('<svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="w-5 h-5"><circle cx=12 cy=12 r=5></circle><line x1=12 y1=1 x2=12 y2=3></line><line x1=12 y1=21 x2=12 y2=23></line><line x1=4.22 y1=4.22 x2=5.64 y2=5.64></line><line x1=18.36 y1=18.36 x2=19.78 y2=19.78></line><line x1=1 y1=12 x2=3 y2=12></line><line x1=21 y1=12 x2=23 y2=12></line><line x1=4.22 y1=19.78 x2=5.64 y2=18.36></line><line x1=18.36 y1=5.64 x2=19.78 y2=4.22>'),Lg=w('<svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="w-5 h-5"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2">'),Eg=w('<svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="w-5 h-5"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2">'),Tg=w('<svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="w-5 h-5"><path d="M2 12c2-2 4-4 6-4s4 2 6 4 4 4 6 4 4-2 6-4"></path><path d="M2 6c2-2 4-4 6-4s4 2 6 4 4 4 6 4 4-2 6-4"></path><path d="M2 18c2-2 4-4 6-4s4 2 6 4 4 4 6 4 4-2 6-4">'),Dg=w('<svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="w-5 h-5"><polyline points="4 17 10 11 4 5"></polyline><line x1=12 y1=19 x2=20 y2=19>'),Rg=w('<svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="w-5 h-5"><path d="M12 2l3 7h7l-5.5 4.5 2 6.5L12 17l-5.5 3.5 2-6.5L2 9h7l3-7z"></path><circle cx=12 cy=8 r=1 fill=currentColor>'),Pg=w('<svg viewBox="0 0 24 24"fill=currentColor class="w-5 h-5"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v 3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z">'),Ig=w('<div class="fixed inset-0"style=z-index:99998>'),Bg=w('<div class="fixed w-48 rounded-lg border border-[var(--border-color)] shadow-xl"style=background:var(--bg-secondary);z-index:99999>'),Ng=w('<div class=relative><button class="icon-btn border border-[var(--border-color)] hover:border-[var(--accent-primary)]">'),Og=w("<button><span class=font-medium>"),zg=w('<svg class="w-4 h-4 ml-auto"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"clip-rule=evenodd>');const Fg=()=>{const[e,t]=W(!1),[r,l]=W({top:0,right:0});let a;const m={dark:Mg(),light:Ag(),midnight:Lg(),cyberpunk:Eg(),ocean:Tg(),terminal:Dg(),nord:Rg(),"github-dark":Pg()},d=()=>{if(!e()&&a){const i=a.getBoundingClientRect();l({top:i.bottom+8,right:window.innerWidth-i.right})}t(!e())};return(()=>{var i=Ng(),n=i.firstChild;n.$$click=d;var g=a;return typeof g=="function"?dr(g,n):a=n,s(n,()=>m[$s()]),s(i,_(ms,{get children(){return _(K,{get when(){return e()},get children(){return[(()=>{var v=Ig();return v.$$click=()=>t(!1),v})(),(()=>{var v=Bg();return s(v,()=>Object.keys(Gr).map(p=>(()=>{var y=Og(),x=y.firstChild;return y.$$click=()=>{od(p),t(!1)},s(y,()=>m[p],x),s(x,()=>Gr[p].label),s(y,(()=>{var M=Re(()=>$s()===p);return()=>M()&&zg()})(),null),J(()=>tt(y,`w-full flex items-center gap-3 px-4 py-3 transition-colors hover:bg-[var(--bg-tertiary)] ${$s()===p?"text-[var(--accent-primary)]":"text-[var(--text-primary)]"} ${p==="dark"?"rounded-t-lg":""} ${p==="github-dark"?"rounded-b-lg":""}`)),y})())),J(p=>{var y=`${r().top}px`,x=`${r().right}px`;return y!==p.e&&E(v,"top",p.e=y),x!==p.t&&E(v,"right",p.t=x),p},{e:void 0,t:void 0}),v})()]}})}}),null),J(()=>dt(n,"title",`Theme: ${Gr[$s()].label}`)),i})()};ut(["click"]);var Hg=w('<div class="modal-overlay animate-fade-in"style=position:fixed;top:0;left:0;right:0;bottom:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;z-index:1000><div style=margin:auto;position:relative><div style=border-color:var(--border-color)><h2 style=color:var(--text-primary)></h2><button class="p-1 rounded-lg transition-colors hover:bg-[var(--bg-tertiary)]"style=color:var(--text-secondary)><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12"></path></svg></button></div><div>');const mt=e=>{It(()=>{if(e.isOpen){const r=l=>{const a=l.target;a.tagName==="INPUT"||a.tagName==="TEXTAREA"||a.closest(".xterm")||a.closest("[data-terminal]")||l.key==="Escape"&&e.onClose()};document.addEventListener("keydown",r),document.body.style.overflow="hidden",wr(()=>{document.removeEventListener("keydown",r),document.body.style.overflow=""})}});const t={xs:"max-w-[420px]",sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-[90vw] w-full"};return _(K,{get when(){return e.isOpen},get children(){return _(ms,{get children(){var r=Hg(),l=r.firstChild,a=l.firstChild,m=a.firstChild,d=m.nextSibling,i=d.firstChild,n=a.nextSibling;return Rt(r,"click",e.onClose,!0),l.$$click=g=>g.stopPropagation(),s(m,()=>e.title),Rt(d,"click",e.onClose,!0),s(n,()=>e.children),J(g=>{var v=`modal-content ${t[e.size||"lg"]} animate-slide-up`,p=e.size==="xs"?"420px":void 0,y=e.size==="xs"?"420px !important":void 0,x=`flex items-center justify-between border-b ${e.size==="xs"?"p-3":"p-4"}`,M=`font-semibold ${e.size==="xs"?"text-base":"text-lg"}`,b=`${e.size==="xs","w-5 h-5"}`,o=`overflow-auto ${e.size==="xs"?"p-3":"p-4"} ${e.size==="full"?"max-h-[85vh]":"max-h-[70vh]"}`;return v!==g.e&&tt(l,g.e=v),p!==g.t&&E(l,"width",g.t=p),y!==g.a&&E(l,"max-width",g.a=y),x!==g.o&&tt(a,g.o=x),M!==g.i&&tt(m,g.i=M),b!==g.n&&dt(i,"class",g.n=b),o!==g.s&&tt(n,g.s=o),g},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),r}})}})};ut(["click"]);var ad={exports:{}};(function(e,t){(function(r,l){e.exports=l()})(self,()=>(()=>{var r={4567:function(d,i,n){var g=this&&this.__decorate||function(h,f,$,C){var k,S=arguments.length,L=S<3?f:C===null?C=Object.getOwnPropertyDescriptor(f,$):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(h,f,$,C);else for(var P=h.length-1;P>=0;P--)(k=h[P])&&(L=(S<3?k(L):S>3?k(f,$,L):k(f,$))||L);return S>3&&L&&Object.defineProperty(f,$,L),L},v=this&&this.__param||function(h,f){return function($,C){f($,C,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;const p=n(9042),y=n(6114),x=n(9924),M=n(844),b=n(5596),o=n(4725),c=n(3656);let u=i.AccessibilityManager=class extends M.Disposable{constructor(h,f){super(),this._terminal=h,this._renderService=f,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let $=0;$<this._terminal.rows;$++)this._rowElements[$]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[$]);if(this._topBoundaryFocusListener=$=>this._handleBoundaryFocus($,0),this._bottomBoundaryFocusListener=$=>this._handleBoundaryFocus($,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new x.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize($=>this._handleResize($.rows))),this.register(this._terminal.onRender($=>this._refreshRows($.start,$.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar($=>this._handleChar($))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab($=>this._handleTab($))),this.register(this._terminal.onKey($=>this._handleKey($.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new b.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,c.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,M.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(h){for(let f=0;f<h;f++)this._handleChar(" ")}_handleChar(h){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==h&&(this._charsToAnnounce+=h):this._charsToAnnounce+=h,h===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=p.tooMuchOutput)),y.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,y.isMac&&this._liveRegion.remove()}_handleKey(h){this._clearLiveRegion(),/\p{Control}/u.test(h)||this._charsToConsume.push(h)}_refreshRows(h,f){this._liveRegionDebouncer.refresh(h,f,this._terminal.rows)}_renderRows(h,f){const $=this._terminal.buffer,C=$.lines.length.toString();for(let k=h;k<=f;k++){const S=$.translateBufferLineToString($.ydisp+k,!0),L=($.ydisp+k+1).toString(),P=this._rowElements[k];P&&(S.length===0?P.innerText="":P.textContent=S,P.setAttribute("aria-posinset",L),P.setAttribute("aria-setsize",C))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(h,f){const $=h.target,C=this._rowElements[f===0?1:this._rowElements.length-2];if($.getAttribute("aria-posinset")===(f===0?"1":`${this._terminal.buffer.lines.length}`)||h.relatedTarget!==C)return;let k,S;if(f===0?(k=$,S=this._rowElements.pop(),this._rowContainer.removeChild(S)):(k=this._rowElements.shift(),S=$,this._rowContainer.removeChild(k)),k.removeEventListener("focus",this._topBoundaryFocusListener),S.removeEventListener("focus",this._bottomBoundaryFocusListener),f===0){const L=this._createAccessibilityTreeNode();this._rowElements.unshift(L),this._rowContainer.insertAdjacentElement("afterbegin",L)}else{const L=this._createAccessibilityTreeNode();this._rowElements.push(L),this._rowContainer.appendChild(L)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(f===0?-1:1),this._rowElements[f===0?1:this._rowElements.length-2].focus(),h.preventDefault(),h.stopImmediatePropagation()}_handleResize(h){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let f=this._rowContainer.children.length;f<this._terminal.rows;f++)this._rowElements[f]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[f]);for(;this._rowElements.length>h;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const h=document.createElement("div");return h.setAttribute("role","listitem"),h.tabIndex=-1,this._refreshRowDimensions(h),h}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let h=0;h<this._terminal.rows;h++)this._refreshRowDimensions(this._rowElements[h])}}_refreshRowDimensions(h){h.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=u=g([v(1,o.IRenderService)],u)},3614:(d,i)=>{function n(y){return y.replace(/\r?\n/g,"\r")}function g(y,x){return x?"\x1B[200~"+y+"\x1B[201~":y}function v(y,x,M,b){y=g(y=n(y),M.decPrivateModes.bracketedPasteMode&&b.rawOptions.ignoreBracketedPasteMode!==!0),M.triggerDataEvent(y,!0),x.value=""}function p(y,x,M){const b=M.getBoundingClientRect(),o=y.clientX-b.left-10,c=y.clientY-b.top-10;x.style.width="20px",x.style.height="20px",x.style.left=`${o}px`,x.style.top=`${c}px`,x.style.zIndex="1000",x.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=n,i.bracketTextForPaste=g,i.copyHandler=function(y,x){y.clipboardData&&y.clipboardData.setData("text/plain",x.selectionText),y.preventDefault()},i.handlePasteEvent=function(y,x,M,b){y.stopPropagation(),y.clipboardData&&v(y.clipboardData.getData("text/plain"),x,M,b)},i.paste=v,i.moveTextAreaUnderMouseCursor=p,i.rightClickHandler=function(y,x,M,b,o){p(y,x,M),o&&b.rightClickSelect(y),x.value=b.selectionText,x.select()}},7239:(d,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const g=n(1505);i.ColorContrastCache=class{constructor(){this._color=new g.TwoKeyMap,this._css=new g.TwoKeyMap}setCss(v,p,y){this._css.set(v,p,y)}getCss(v,p){return this._css.get(v,p)}setColor(v,p,y){this._color.set(v,p,y)}getColor(v,p){return this._color.get(v,p)}clear(){this._color.clear(),this._css.clear()}}},3656:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(n,g,v,p){n.addEventListener(g,v,p);let y=!1;return{dispose:()=>{y||(y=!0,n.removeEventListener(g,v,p))}}}},6465:function(d,i,n){var g=this&&this.__decorate||function(o,c,u,h){var f,$=arguments.length,C=$<3?c:h===null?h=Object.getOwnPropertyDescriptor(c,u):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(o,c,u,h);else for(var k=o.length-1;k>=0;k--)(f=o[k])&&(C=($<3?f(C):$>3?f(c,u,C):f(c,u))||C);return $>3&&C&&Object.defineProperty(c,u,C),C},v=this&&this.__param||function(o,c){return function(u,h){c(u,h,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier2=void 0;const p=n(3656),y=n(8460),x=n(844),M=n(2585);let b=i.Linkifier2=class extends x.Disposable{get currentLink(){return this._currentLink}constructor(o){super(),this._bufferService=o,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new y.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new y.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,x.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,x.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(o){return this._linkProviders.push(o),{dispose:()=>{const c=this._linkProviders.indexOf(o);c!==-1&&this._linkProviders.splice(c,1)}}}attachToDom(o,c,u){this._element=o,this._mouseService=c,this._renderService=u,this.register((0,p.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,p.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,p.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,p.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(o){if(this._lastMouseEvent=o,!this._element||!this._mouseService)return;const c=this._positionFromMouseEvent(o,this._element,this._mouseService);if(!c)return;this._isMouseOut=!1;const u=o.composedPath();for(let h=0;h<u.length;h++){const f=u[h];if(f.classList.contains("xterm"))break;if(f.classList.contains("xterm-hover"))return}this._lastBufferCell&&c.x===this._lastBufferCell.x&&c.y===this._lastBufferCell.y||(this._handleHover(c),this._lastBufferCell=c)}_handleHover(o){if(this._activeLine!==o.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(o,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,o)||(this._clearCurrentLink(),this._askForLink(o,!0))}_askForLink(o,c){var u,h;this._activeProviderReplies&&c||((u=this._activeProviderReplies)===null||u===void 0||u.forEach($=>{$?.forEach(C=>{C.link.dispose&&C.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=o.y);let f=!1;for(const[$,C]of this._linkProviders.entries())c?!((h=this._activeProviderReplies)===null||h===void 0)&&h.get($)&&(f=this._checkLinkProviderResult($,o,f)):C.provideLinks(o.y,k=>{var S,L;if(this._isMouseOut)return;const P=k?.map(I=>({link:I}));(S=this._activeProviderReplies)===null||S===void 0||S.set($,P),f=this._checkLinkProviderResult($,o,f),((L=this._activeProviderReplies)===null||L===void 0?void 0:L.size)===this._linkProviders.length&&this._removeIntersectingLinks(o.y,this._activeProviderReplies)})}_removeIntersectingLinks(o,c){const u=new Set;for(let h=0;h<c.size;h++){const f=c.get(h);if(f)for(let $=0;$<f.length;$++){const C=f[$],k=C.link.range.start.y<o?0:C.link.range.start.x,S=C.link.range.end.y>o?this._bufferService.cols:C.link.range.end.x;for(let L=k;L<=S;L++){if(u.has(L)){f.splice($--,1);break}u.add(L)}}}}_checkLinkProviderResult(o,c,u){var h;if(!this._activeProviderReplies)return u;const f=this._activeProviderReplies.get(o);let $=!1;for(let C=0;C<o;C++)this._activeProviderReplies.has(C)&&!this._activeProviderReplies.get(C)||($=!0);if(!$&&f){const C=f.find(k=>this._linkAtPosition(k.link,c));C&&(u=!0,this._handleNewLink(C))}if(this._activeProviderReplies.size===this._linkProviders.length&&!u)for(let C=0;C<this._activeProviderReplies.size;C++){const k=(h=this._activeProviderReplies.get(C))===null||h===void 0?void 0:h.find(S=>this._linkAtPosition(S.link,c));if(k){u=!0,this._handleNewLink(k);break}}return u}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(o){if(!this._element||!this._mouseService||!this._currentLink)return;const c=this._positionFromMouseEvent(o,this._element,this._mouseService);c&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,c)&&this._currentLink.link.activate(o,this._currentLink.link.text)}_clearCurrentLink(o,c){this._element&&this._currentLink&&this._lastMouseEvent&&(!o||!c||this._currentLink.link.range.start.y>=o&&this._currentLink.link.range.end.y<=c)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,x.disposeArray)(this._linkCacheDisposables))}_handleNewLink(o){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const c=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);c&&this._linkAtPosition(o.link,c)&&(this._currentLink=o,this._currentLink.state={decorations:{underline:o.link.decorations===void 0||o.link.decorations.underline,pointerCursor:o.link.decorations===void 0||o.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,o.link,this._lastMouseEvent),o.link.decorations={},Object.defineProperties(o.link.decorations,{pointerCursor:{get:()=>{var u,h;return(h=(u=this._currentLink)===null||u===void 0?void 0:u.state)===null||h===void 0?void 0:h.decorations.pointerCursor},set:u=>{var h,f;!((h=this._currentLink)===null||h===void 0)&&h.state&&this._currentLink.state.decorations.pointerCursor!==u&&(this._currentLink.state.decorations.pointerCursor=u,this._currentLink.state.isHovered&&((f=this._element)===null||f===void 0||f.classList.toggle("xterm-cursor-pointer",u)))}},underline:{get:()=>{var u,h;return(h=(u=this._currentLink)===null||u===void 0?void 0:u.state)===null||h===void 0?void 0:h.decorations.underline},set:u=>{var h,f,$;!((h=this._currentLink)===null||h===void 0)&&h.state&&(($=(f=this._currentLink)===null||f===void 0?void 0:f.state)===null||$===void 0?void 0:$.decorations.underline)!==u&&(this._currentLink.state.decorations.underline=u,this._currentLink.state.isHovered&&this._fireUnderlineEvent(o.link,u))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(u=>{if(!this._currentLink)return;const h=u.start===0?0:u.start+1+this._bufferService.buffer.ydisp,f=this._bufferService.buffer.ydisp+1+u.end;if(this._currentLink.link.range.start.y>=h&&this._currentLink.link.range.end.y<=f&&(this._clearCurrentLink(h,f),this._lastMouseEvent&&this._element)){const $=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);$&&this._askForLink($,!1)}})))}_linkHover(o,c,u){var h;!((h=this._currentLink)===null||h===void 0)&&h.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(c,!0),this._currentLink.state.decorations.pointerCursor&&o.classList.add("xterm-cursor-pointer")),c.hover&&c.hover(u,c.text)}_fireUnderlineEvent(o,c){const u=o.range,h=this._bufferService.buffer.ydisp,f=this._createLinkUnderlineEvent(u.start.x-1,u.start.y-h-1,u.end.x,u.end.y-h-1,void 0);(c?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(f)}_linkLeave(o,c,u){var h;!((h=this._currentLink)===null||h===void 0)&&h.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(c,!1),this._currentLink.state.decorations.pointerCursor&&o.classList.remove("xterm-cursor-pointer")),c.leave&&c.leave(u,c.text)}_linkAtPosition(o,c){const u=o.range.start.y*this._bufferService.cols+o.range.start.x,h=o.range.end.y*this._bufferService.cols+o.range.end.x,f=c.y*this._bufferService.cols+c.x;return u<=f&&f<=h}_positionFromMouseEvent(o,c,u){const h=u.getCoords(o,c,this._bufferService.cols,this._bufferService.rows);if(h)return{x:h[0],y:h[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(o,c,u,h,f){return{x1:o,y1:c,x2:u,y2:h,cols:this._bufferService.cols,fg:f}}};i.Linkifier2=b=g([v(0,M.IBufferService)],b)},9042:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(d,i,n){var g=this&&this.__decorate||function(b,o,c,u){var h,f=arguments.length,$=f<3?o:u===null?u=Object.getOwnPropertyDescriptor(o,c):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$=Reflect.decorate(b,o,c,u);else for(var C=b.length-1;C>=0;C--)(h=b[C])&&($=(f<3?h($):f>3?h(o,c,$):h(o,c))||$);return f>3&&$&&Object.defineProperty(o,c,$),$},v=this&&this.__param||function(b,o){return function(c,u){o(c,u,b)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;const p=n(511),y=n(2585);let x=i.OscLinkProvider=class{constructor(b,o,c){this._bufferService=b,this._optionsService=o,this._oscLinkService=c}provideLinks(b,o){var c;const u=this._bufferService.buffer.lines.get(b-1);if(!u)return void o(void 0);const h=[],f=this._optionsService.rawOptions.linkHandler,$=new p.CellData,C=u.getTrimmedLength();let k=-1,S=-1,L=!1;for(let P=0;P<C;P++)if(S!==-1||u.hasContent(P)){if(u.loadCell(P,$),$.hasExtendedAttrs()&&$.extended.urlId){if(S===-1){S=P,k=$.extended.urlId;continue}L=$.extended.urlId!==k}else S!==-1&&(L=!0);if(L||S!==-1&&P===C-1){const I=(c=this._oscLinkService.getLinkData(k))===null||c===void 0?void 0:c.uri;if(I){const D={start:{x:S+1,y:b},end:{x:P+(L||P!==C-1?0:1),y:b}};let T=!1;if(!f?.allowNonHttpProtocols)try{const B=new URL(I);["http:","https:"].includes(B.protocol)||(T=!0)}catch{T=!0}T||h.push({text:I,range:D,activate:(B,N)=>f?f.activate(B,N,D):M(0,N),hover:(B,N)=>{var O;return(O=f?.hover)===null||O===void 0?void 0:O.call(f,B,N,D)},leave:(B,N)=>{var O;return(O=f?.leave)===null||O===void 0?void 0:O.call(f,B,N,D)}})}L=!1,$.hasExtendedAttrs()&&$.extended.urlId?(S=P,k=$.extended.urlId):(S=-1,k=-1)}}o(h)}};function M(b,o){if(confirm(`Do you want to navigate to ${o}?

WARNING: This link could potentially be dangerous`)){const c=window.open();if(c){try{c.opener=null}catch{}c.location.href=o}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=x=g([v(0,y.IBufferService),v(1,y.IOptionsService),v(2,y.IOscLinkService)],x)},6193:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(n,g){this._parentWindow=n,this._renderCallback=g,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(n){return this._refreshCallbacks.push(n),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(n,g,v){this._rowCount=v,n=n!==void 0?n:0,g=g!==void 0?g:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,n):n,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,g):g,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const n=Math.max(this._rowStart,0),g=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(n,g),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const n of this._refreshCallbacks)n(0);this._refreshCallbacks=[]}}},5596:(d,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ScreenDprMonitor=void 0;const g=n(844);class v extends g.Disposable{constructor(y){super(),this._parentWindow=y,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,g.toDisposable)(()=>{this.clearListener()}))}setListener(y){this._listener&&this.clearListener(),this._listener=y,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var y;this._outerListener&&((y=this._resolutionMediaMatchList)===null||y===void 0||y.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}i.ScreenDprMonitor=v},3236:(d,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;const g=n(3614),v=n(3656),p=n(6465),y=n(9042),x=n(3730),M=n(1680),b=n(3107),o=n(5744),c=n(2950),u=n(1296),h=n(428),f=n(4269),$=n(5114),C=n(8934),k=n(3230),S=n(9312),L=n(4725),P=n(6731),I=n(8055),D=n(8969),T=n(8460),B=n(844),N=n(6114),O=n(8437),H=n(2584),A=n(7399),z=n(5941),F=n(9074),j=n(2585),q=n(5435),U=n(4567),Y=typeof window<"u"?window.document:null;class V extends D.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(R={}){super(R),this.browser=N,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new B.MutableDisposable),this._onCursorMove=this.register(new T.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new T.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new T.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new T.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new T.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new T.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new T.EventEmitter),this._onBlur=this.register(new T.EventEmitter),this._onA11yCharEmitter=this.register(new T.EventEmitter),this._onA11yTabEmitter=this.register(new T.EventEmitter),this._onWillOpen=this.register(new T.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(p.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(x.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(F.DecorationService),this._instantiationService.setService(j.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((G,te)=>this.refresh(G,te))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(G=>this._reportWindowsOptions(G))),this.register(this._inputHandler.onColor(G=>this._handleColorEvent(G))),this.register((0,T.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,T.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,T.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,T.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(G=>this._afterResize(G.cols,G.rows))),this.register((0,B.toDisposable)(()=>{var G,te;this._customKeyEventHandler=void 0,(te=(G=this.element)===null||G===void 0?void 0:G.parentNode)===null||te===void 0||te.removeChild(this.element)}))}_handleColorEvent(R){if(this._themeService)for(const G of R){let te,ae="";switch(G.index){case 256:te="foreground",ae="10";break;case 257:te="background",ae="11";break;case 258:te="cursor",ae="12";break;default:te="ansi",ae="4;"+G.index}switch(G.type){case 0:const Q=I.color.toColorRGB(te==="ansi"?this._themeService.colors.ansi[G.index]:this._themeService.colors[te]);this.coreService.triggerDataEvent(`${H.C0.ESC}]${ae};${(0,z.toRgbString)(Q)}${H.C1_ESCAPED.ST}`);break;case 1:if(te==="ansi")this._themeService.modifyColors(Z=>Z.ansi[G.index]=I.rgba.toColor(...G.color));else{const Z=te;this._themeService.modifyColors(ne=>ne[Z]=I.rgba.toColor(...G.color))}break;case 2:this._themeService.restoreColor(G.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(R){R?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(U.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(R){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(H.C0.ESC+"[I"),this.updateCursorStyle(R),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var R;return(R=this.textarea)===null||R===void 0?void 0:R.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(H.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const R=this.buffer.ybase+this.buffer.y,G=this.buffer.lines.get(R);if(!G)return;const te=Math.min(this.buffer.x,this.cols-1),ae=this._renderService.dimensions.css.cell.height,Q=G.getWidth(te),Z=this._renderService.dimensions.css.cell.width*Q,ne=this.buffer.y*this._renderService.dimensions.css.cell.height,$e=te*this._renderService.dimensions.css.cell.width;this.textarea.style.left=$e+"px",this.textarea.style.top=ne+"px",this.textarea.style.width=Z+"px",this.textarea.style.height=ae+"px",this.textarea.style.lineHeight=ae+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,v.addDisposableDomListener)(this.element,"copy",G=>{this.hasSelection()&&(0,g.copyHandler)(G,this._selectionService)}));const R=G=>(0,g.handlePasteEvent)(G,this.textarea,this.coreService,this.optionsService);this.register((0,v.addDisposableDomListener)(this.textarea,"paste",R)),this.register((0,v.addDisposableDomListener)(this.element,"paste",R)),N.isFirefox?this.register((0,v.addDisposableDomListener)(this.element,"mousedown",G=>{G.button===2&&(0,g.rightClickHandler)(G,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,v.addDisposableDomListener)(this.element,"contextmenu",G=>{(0,g.rightClickHandler)(G,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),N.isLinux&&this.register((0,v.addDisposableDomListener)(this.element,"auxclick",G=>{G.button===1&&(0,g.moveTextAreaUnderMouseCursor)(G,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,v.addDisposableDomListener)(this.textarea,"keyup",R=>this._keyUp(R),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"keydown",R=>this._keyDown(R),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"keypress",R=>this._keyPress(R),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionupdate",R=>this._compositionHelper.compositionupdate(R))),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,v.addDisposableDomListener)(this.textarea,"input",R=>this._inputEvent(R),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(R){var G;if(!R)throw new Error("Terminal requires a parent element.");R.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=R.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),R.appendChild(this.element);const te=Y.createDocumentFragment();this._viewportElement=Y.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),te.appendChild(this._viewportElement),this._viewportScrollArea=Y.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=Y.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=Y.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),te.appendChild(this.screenElement),this.textarea=Y.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",y.promptLabel),N.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance($.CoreBrowserService,this.textarea,(G=this._document.defaultView)!==null&&G!==void 0?G:window),this._instantiationService.setService(L.ICoreBrowserService,this._coreBrowserService),this.register((0,v.addDisposableDomListener)(this.textarea,"focus",ae=>this._handleTextAreaFocus(ae))),this.register((0,v.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(h.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(L.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(P.ThemeService),this._instantiationService.setService(L.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(f.CharacterJoinerService),this._instantiationService.setService(L.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(k.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(L.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(ae=>this._onRender.fire(ae))),this.onResize(ae=>this._renderService.resize(ae.cols,ae.rows)),this._compositionView=Y.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(c.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(te);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(C.MouseService),this._instantiationService.setService(L.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(M.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(ae=>this.scrollLines(ae.amount,ae.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(S.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(L.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(ae=>this.scrollLines(ae.amount,ae.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(ae=>this._renderService.handleSelectionChanged(ae.start,ae.end,ae.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(ae=>{this.textarea.value=ae,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(ae=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,v.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(b.BufferDecorationRenderer,this.screenElement)),this.register((0,v.addDisposableDomListener)(this.element,"mousedown",ae=>this._selectionService.handleMouseDown(ae))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(U.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",ae=>this._handleScreenReaderModeOptionChange(ae))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(o.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",ae=>{!this._overviewRulerRenderer&&ae&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(o.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(u.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const R=this,G=this.element;function te(Z){const ne=R._mouseService.getMouseReportCoords(Z,R.screenElement);if(!ne)return!1;let $e,re;switch(Z.overrideType||Z.type){case"mousemove":re=32,Z.buttons===void 0?($e=3,Z.button!==void 0&&($e=Z.button<3?Z.button:3)):$e=1&Z.buttons?0:4&Z.buttons?1:2&Z.buttons?2:3;break;case"mouseup":re=0,$e=Z.button<3?Z.button:3;break;case"mousedown":re=1,$e=Z.button<3?Z.button:3;break;case"wheel":if(R.viewport.getLinesScrolled(Z)===0)return!1;re=Z.deltaY<0?0:1,$e=4;break;default:return!1}return!(re===void 0||$e===void 0||$e>4)&&R.coreMouseService.triggerMouseEvent({col:ne.col,row:ne.row,x:ne.x,y:ne.y,button:$e,action:re,ctrl:Z.ctrlKey,alt:Z.altKey,shift:Z.shiftKey})}const ae={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Q={mouseup:Z=>(te(Z),Z.buttons||(this._document.removeEventListener("mouseup",ae.mouseup),ae.mousedrag&&this._document.removeEventListener("mousemove",ae.mousedrag)),this.cancel(Z)),wheel:Z=>(te(Z),this.cancel(Z,!0)),mousedrag:Z=>{Z.buttons&&te(Z)},mousemove:Z=>{Z.buttons||te(Z)}};this.register(this.coreMouseService.onProtocolChange(Z=>{Z?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(Z)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&Z?ae.mousemove||(G.addEventListener("mousemove",Q.mousemove),ae.mousemove=Q.mousemove):(G.removeEventListener("mousemove",ae.mousemove),ae.mousemove=null),16&Z?ae.wheel||(G.addEventListener("wheel",Q.wheel,{passive:!1}),ae.wheel=Q.wheel):(G.removeEventListener("wheel",ae.wheel),ae.wheel=null),2&Z?ae.mouseup||(G.addEventListener("mouseup",Q.mouseup),ae.mouseup=Q.mouseup):(this._document.removeEventListener("mouseup",ae.mouseup),G.removeEventListener("mouseup",ae.mouseup),ae.mouseup=null),4&Z?ae.mousedrag||(ae.mousedrag=Q.mousedrag):(this._document.removeEventListener("mousemove",ae.mousedrag),ae.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,v.addDisposableDomListener)(G,"mousedown",Z=>{if(Z.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(Z))return te(Z),ae.mouseup&&this._document.addEventListener("mouseup",ae.mouseup),ae.mousedrag&&this._document.addEventListener("mousemove",ae.mousedrag),this.cancel(Z)})),this.register((0,v.addDisposableDomListener)(G,"wheel",Z=>{if(!ae.wheel){if(!this.buffer.hasScrollback){const ne=this.viewport.getLinesScrolled(Z);if(ne===0)return;const $e=H.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(Z.deltaY<0?"A":"B");let re="";for(let de=0;de<Math.abs(ne);de++)re+=$e;return this.coreService.triggerDataEvent(re,!0),this.cancel(Z,!0)}return this.viewport.handleWheel(Z)?this.cancel(Z):void 0}},{passive:!1})),this.register((0,v.addDisposableDomListener)(G,"touchstart",Z=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(Z),this.cancel(Z)},{passive:!0})),this.register((0,v.addDisposableDomListener)(G,"touchmove",Z=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(Z)?void 0:this.cancel(Z)},{passive:!1}))}refresh(R,G){var te;(te=this._renderService)===null||te===void 0||te.refreshRows(R,G)}updateCursorStyle(R){var G;!((G=this._selectionService)===null||G===void 0)&&G.shouldColumnSelect(R)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(R,G,te=0){var ae;te===1?(super.scrollLines(R,G,te),this.refresh(0,this.rows-1)):(ae=this.viewport)===null||ae===void 0||ae.scrollLines(R)}paste(R){(0,g.paste)(R,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(R){this._customKeyEventHandler=R}registerLinkProvider(R){return this.linkifier2.registerLinkProvider(R)}registerCharacterJoiner(R){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const G=this._characterJoinerService.register(R);return this.refresh(0,this.rows-1),G}deregisterCharacterJoiner(R){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(R)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(R){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+R)}registerDecoration(R){return this._decorationService.registerDecoration(R)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(R,G,te){this._selectionService.setSelection(R,G,te)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var R;(R=this._selectionService)===null||R===void 0||R.clearSelection()}selectAll(){var R;(R=this._selectionService)===null||R===void 0||R.selectAll()}selectLines(R,G){var te;(te=this._selectionService)===null||te===void 0||te.selectLines(R,G)}_keyDown(R){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(R)===!1)return!1;const G=this.browser.isMac&&this.options.macOptionIsMeta&&R.altKey;if(!G&&!this._compositionHelper.keydown(R))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;G||R.key!=="Dead"&&R.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const te=(0,A.evaluateKeyboardEvent)(R,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(R),te.type===3||te.type===2){const ae=this.rows-1;return this.scrollLines(te.type===2?-ae:ae),this.cancel(R,!0)}return te.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,R)||(te.cancel&&this.cancel(R,!0),!te.key||!!(R.key&&!R.ctrlKey&&!R.altKey&&!R.metaKey&&R.key.length===1&&R.key.charCodeAt(0)>=65&&R.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(te.key!==H.C0.ETX&&te.key!==H.C0.CR||(this.textarea.value=""),this._onKey.fire({key:te.key,domEvent:R}),this._showCursor(),this.coreService.triggerDataEvent(te.key,!0),!this.optionsService.rawOptions.screenReaderMode||R.altKey||R.ctrlKey?this.cancel(R,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(R,G){const te=R.isMac&&!this.options.macOptionIsMeta&&G.altKey&&!G.ctrlKey&&!G.metaKey||R.isWindows&&G.altKey&&G.ctrlKey&&!G.metaKey||R.isWindows&&G.getModifierState("AltGraph");return G.type==="keypress"?te:te&&(!G.keyCode||G.keyCode>47)}_keyUp(R){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(R)===!1||(function(G){return G.keyCode===16||G.keyCode===17||G.keyCode===18}(R)||this.focus(),this.updateCursorStyle(R),this._keyPressHandled=!1)}_keyPress(R){let G;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(R)===!1)return!1;if(this.cancel(R),R.charCode)G=R.charCode;else if(R.which===null||R.which===void 0)G=R.keyCode;else{if(R.which===0||R.charCode===0)return!1;G=R.which}return!(!G||(R.altKey||R.ctrlKey||R.metaKey)&&!this._isThirdLevelShift(this.browser,R)||(G=String.fromCharCode(G),this._onKey.fire({key:G,domEvent:R}),this._showCursor(),this.coreService.triggerDataEvent(G,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(R){if(R.data&&R.inputType==="insertText"&&(!R.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const G=R.data;return this.coreService.triggerDataEvent(G,!0),this.cancel(R),!0}return!1}resize(R,G){R!==this.cols||G!==this.rows?super.resize(R,G):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(R,G){var te,ae;(te=this._charSizeService)===null||te===void 0||te.measure(),(ae=this.viewport)===null||ae===void 0||ae.syncScrollArea(!0)}clear(){var R;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let G=1;G<this.rows;G++)this.buffer.lines.push(this.buffer.getBlankLine(O.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(R=this.viewport)===null||R===void 0||R.reset(),this.refresh(0,this.rows-1)}}reset(){var R,G;this.options.rows=this.rows,this.options.cols=this.cols;const te=this._customKeyEventHandler;this._setup(),super.reset(),(R=this._selectionService)===null||R===void 0||R.reset(),this._decorationService.reset(),(G=this.viewport)===null||G===void 0||G.reset(),this._customKeyEventHandler=te,this.refresh(0,this.rows-1)}clearTextureAtlas(){var R;(R=this._renderService)===null||R===void 0||R.clearTextureAtlas()}_reportFocus(){var R;!((R=this.element)===null||R===void 0)&&R.classList.contains("focus")?this.coreService.triggerDataEvent(H.C0.ESC+"[I"):this.coreService.triggerDataEvent(H.C0.ESC+"[O")}_reportWindowsOptions(R){if(this._renderService)switch(R){case q.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const G=this._renderService.dimensions.css.canvas.width.toFixed(0),te=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${H.C0.ESC}[4;${te};${G}t`);break;case q.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const ae=this._renderService.dimensions.css.cell.width.toFixed(0),Q=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${H.C0.ESC}[6;${Q};${ae}t`)}}cancel(R,G){if(this.options.cancelEvents||G)return R.preventDefault(),R.stopPropagation(),!1}}i.Terminal=V},9924:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(n,g=1e3){this._renderCallback=n,this._debounceThresholdMS=g,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(n,g,v){this._rowCount=v,n=n!==void 0?n:0,g=g!==void 0?g:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,n):n,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,g):g;const p=Date.now();if(p-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=p,this._innerRefresh();else if(!this._additionalRefreshRequested){const y=p-this._lastRefreshMs,x=this._debounceThresholdMS-y;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},x)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const n=Math.max(this._rowStart,0),g=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(n,g)}}},1680:function(d,i,n){var g=this&&this.__decorate||function(c,u,h,f){var $,C=arguments.length,k=C<3?u:f===null?f=Object.getOwnPropertyDescriptor(u,h):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(c,u,h,f);else for(var S=c.length-1;S>=0;S--)($=c[S])&&(k=(C<3?$(k):C>3?$(u,h,k):$(u,h))||k);return C>3&&k&&Object.defineProperty(u,h,k),k},v=this&&this.__param||function(c,u){return function(h,f){u(h,f,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;const p=n(3656),y=n(4725),x=n(8460),M=n(844),b=n(2585);let o=i.Viewport=class extends M.Disposable{constructor(c,u,h,f,$,C,k,S){super(),this._viewportElement=c,this._scrollArea=u,this._bufferService=h,this._optionsService=f,this._charSizeService=$,this._renderService=C,this._coreBrowserService=k,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new x.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,p.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(L=>this._activeBuffer=L.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(L=>this._renderDimensions=L)),this._handleThemeChange(S.colors),this.register(S.onChangeColors(L=>this._handleThemeChange(L))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(c){this._viewportElement.style.backgroundColor=c.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(c){if(c)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const u=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==u&&(this._lastRecordedBufferHeight=u,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const c=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==c&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=c),this._refreshAnimationFrame=null}syncScrollArea(c=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(c);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(c)}_handleScroll(c){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const u=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:u,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const c=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(c*(this._smoothScrollState.target-this._smoothScrollState.origin)),c<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(c,u){const h=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(u<0&&this._viewportElement.scrollTop!==0||u>0&&h<this._lastRecordedBufferHeight)||(c.cancelable&&c.preventDefault(),!1)}handleWheel(c){const u=this._getPixelsScrolled(c);return u!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+u:this._smoothScrollState.target+=u,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=u,this._bubbleScroll(c,u))}scrollLines(c){if(c!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const u=c*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+u,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:c,suppressScrollEvent:!1})}_getPixelsScrolled(c){if(c.deltaY===0||c.shiftKey)return 0;let u=this._applyScrollModifier(c.deltaY,c);return c.deltaMode===WheelEvent.DOM_DELTA_LINE?u*=this._currentRowHeight:c.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(u*=this._currentRowHeight*this._bufferService.rows),u}getBufferElements(c,u){var h;let f,$="";const C=[],k=u??this._bufferService.buffer.lines.length,S=this._bufferService.buffer.lines;for(let L=c;L<k;L++){const P=S.get(L);if(!P)continue;const I=(h=S.get(L+1))===null||h===void 0?void 0:h.isWrapped;if($+=P.translateToString(!I),!I||L===S.length-1){const D=document.createElement("div");D.textContent=$,C.push(D),$.length>0&&(f=D),$=""}}return{bufferElements:C,cursorElement:f}}getLinesScrolled(c){if(c.deltaY===0||c.shiftKey)return 0;let u=this._applyScrollModifier(c.deltaY,c);return c.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(u/=this._currentRowHeight+0,this._wheelPartialScroll+=u,u=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):c.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(u*=this._bufferService.rows),u}_applyScrollModifier(c,u){const h=this._optionsService.rawOptions.fastScrollModifier;return h==="alt"&&u.altKey||h==="ctrl"&&u.ctrlKey||h==="shift"&&u.shiftKey?c*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:c*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(c){this._lastTouchY=c.touches[0].pageY}handleTouchMove(c){const u=this._lastTouchY-c.touches[0].pageY;return this._lastTouchY=c.touches[0].pageY,u!==0&&(this._viewportElement.scrollTop+=u,this._bubbleScroll(c,u))}};i.Viewport=o=g([v(2,b.IBufferService),v(3,b.IOptionsService),v(4,y.ICharSizeService),v(5,y.IRenderService),v(6,y.ICoreBrowserService),v(7,y.IThemeService)],o)},3107:function(d,i,n){var g=this&&this.__decorate||function(o,c,u,h){var f,$=arguments.length,C=$<3?c:h===null?h=Object.getOwnPropertyDescriptor(c,u):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(o,c,u,h);else for(var k=o.length-1;k>=0;k--)(f=o[k])&&(C=($<3?f(C):$>3?f(c,u,C):f(c,u))||C);return $>3&&C&&Object.defineProperty(c,u,C),C},v=this&&this.__param||function(o,c){return function(u,h){c(u,h,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;const p=n(3656),y=n(4725),x=n(844),M=n(2585);let b=i.BufferDecorationRenderer=class extends x.Disposable{constructor(o,c,u,h){super(),this._screenElement=o,this._bufferService=c,this._decorationService=u,this._renderService=h,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,p.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(f=>this._removeDecoration(f))),this.register((0,x.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const o of this._decorationService.decorations)this._renderDecoration(o);this._dimensionsChanged=!1}_renderDecoration(o){this._refreshStyle(o),this._dimensionsChanged&&this._refreshXPosition(o)}_createElement(o){var c,u;const h=document.createElement("div");h.classList.add("xterm-decoration"),h.classList.toggle("xterm-decoration-top-layer",((c=o?.options)===null||c===void 0?void 0:c.layer)==="top"),h.style.width=`${Math.round((o.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,h.style.height=(o.options.height||1)*this._renderService.dimensions.css.cell.height+"px",h.style.top=(o.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",h.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const f=(u=o.options.x)!==null&&u!==void 0?u:0;return f&&f>this._bufferService.cols&&(h.style.display="none"),this._refreshXPosition(o,h),h}_refreshStyle(o){const c=o.marker.line-this._bufferService.buffers.active.ydisp;if(c<0||c>=this._bufferService.rows)o.element&&(o.element.style.display="none",o.onRenderEmitter.fire(o.element));else{let u=this._decorationElements.get(o);u||(u=this._createElement(o),o.element=u,this._decorationElements.set(o,u),this._container.appendChild(u),o.onDispose(()=>{this._decorationElements.delete(o),u.remove()})),u.style.top=c*this._renderService.dimensions.css.cell.height+"px",u.style.display=this._altBufferIsActive?"none":"block",o.onRenderEmitter.fire(u)}}_refreshXPosition(o,c=o.element){var u;if(!c)return;const h=(u=o.options.x)!==null&&u!==void 0?u:0;(o.options.anchor||"left")==="right"?c.style.right=h?h*this._renderService.dimensions.css.cell.width+"px":"":c.style.left=h?h*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(o){var c;(c=this._decorationElements.get(o))===null||c===void 0||c.remove(),this._decorationElements.delete(o),o.dispose()}};i.BufferDecorationRenderer=b=g([v(1,M.IBufferService),v(2,M.IDecorationService),v(3,y.IRenderService)],b)},5871:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(n){if(n.options.overviewRulerOptions){for(const g of this._zones)if(g.color===n.options.overviewRulerOptions.color&&g.position===n.options.overviewRulerOptions.position){if(this._lineIntersectsZone(g,n.marker.line))return;if(this._lineAdjacentToZone(g,n.marker.line,n.options.overviewRulerOptions.position))return void this._addLineToZone(g,n.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=n.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=n.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=n.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=n.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:n.options.overviewRulerOptions.color,position:n.options.overviewRulerOptions.position,startBufferLine:n.marker.line,endBufferLine:n.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(n){this._linePadding=n}_lineIntersectsZone(n,g){return g>=n.startBufferLine&&g<=n.endBufferLine}_lineAdjacentToZone(n,g,v){return g>=n.startBufferLine-this._linePadding[v||"full"]&&g<=n.endBufferLine+this._linePadding[v||"full"]}_addLineToZone(n,g){n.startBufferLine=Math.min(n.startBufferLine,g),n.endBufferLine=Math.max(n.endBufferLine,g)}}},5744:function(d,i,n){var g=this&&this.__decorate||function(f,$,C,k){var S,L=arguments.length,P=L<3?$:k===null?k=Object.getOwnPropertyDescriptor($,C):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(f,$,C,k);else for(var I=f.length-1;I>=0;I--)(S=f[I])&&(P=(L<3?S(P):L>3?S($,C,P):S($,C))||P);return L>3&&P&&Object.defineProperty($,C,P),P},v=this&&this.__param||function(f,$){return function(C,k){$(C,k,f)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;const p=n(5871),y=n(3656),x=n(4725),M=n(844),b=n(2585),o={full:0,left:0,center:0,right:0},c={full:0,left:0,center:0,right:0},u={full:0,left:0,center:0,right:0};let h=i.OverviewRulerRenderer=class extends M.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(f,$,C,k,S,L,P){var I;super(),this._viewportElement=f,this._screenElement=$,this._bufferService=C,this._decorationService=k,this._renderService=S,this._optionsService=L,this._coreBrowseService=P,this._colorZoneStore=new p.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(I=this._viewportElement.parentElement)===null||I===void 0||I.insertBefore(this._canvas,this._viewportElement);const D=this._canvas.getContext("2d");if(!D)throw new Error("Ctx cannot be null");this._ctx=D,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,M.toDisposable)(()=>{var T;(T=this._canvas)===null||T===void 0||T.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,y.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const f=Math.floor(this._canvas.width/3),$=Math.ceil(this._canvas.width/3);c.full=this._canvas.width,c.left=f,c.center=$,c.right=f,this._refreshDrawHeightConstants(),u.full=0,u.left=0,u.center=c.left,u.right=c.left+c.center}_refreshDrawHeightConstants(){o.full=Math.round(2*this._coreBrowseService.dpr);const f=this._canvas.height/this._bufferService.buffer.lines.length,$=Math.round(Math.max(Math.min(f,12),6)*this._coreBrowseService.dpr);o.left=$,o.center=$,o.right=$}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const $ of this._decorationService.decorations)this._colorZoneStore.addDecoration($);this._ctx.lineWidth=1;const f=this._colorZoneStore.zones;for(const $ of f)$.position!=="full"&&this._renderColorZone($);for(const $ of f)$.position==="full"&&this._renderColorZone($);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(f){this._ctx.fillStyle=f.color,this._ctx.fillRect(u[f.position||"full"],Math.round((this._canvas.height-1)*(f.startBufferLine/this._bufferService.buffers.active.lines.length)-o[f.position||"full"]/2),c[f.position||"full"],Math.round((this._canvas.height-1)*((f.endBufferLine-f.startBufferLine)/this._bufferService.buffers.active.lines.length)+o[f.position||"full"]))}_queueRefresh(f,$){this._shouldUpdateDimensions=f||this._shouldUpdateDimensions,this._shouldUpdateAnchor=$||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=h=g([v(2,b.IBufferService),v(3,b.IDecorationService),v(4,x.IRenderService),v(5,b.IOptionsService),v(6,x.ICoreBrowserService)],h)},2950:function(d,i,n){var g=this&&this.__decorate||function(b,o,c,u){var h,f=arguments.length,$=f<3?o:u===null?u=Object.getOwnPropertyDescriptor(o,c):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$=Reflect.decorate(b,o,c,u);else for(var C=b.length-1;C>=0;C--)(h=b[C])&&($=(f<3?h($):f>3?h(o,c,$):h(o,c))||$);return f>3&&$&&Object.defineProperty(o,c,$),$},v=this&&this.__param||function(b,o){return function(c,u){o(c,u,b)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;const p=n(4725),y=n(2585),x=n(2584);let M=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(b,o,c,u,h,f){this._textarea=b,this._compositionView=o,this._bufferService=c,this._optionsService=u,this._coreService=h,this._renderService=f,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(b){this._compositionView.textContent=b.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(b){if(this._isComposing||this._isSendingComposition){if(b.keyCode===229||b.keyCode===16||b.keyCode===17||b.keyCode===18)return!1;this._finalizeComposition(!1)}return b.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(b){if(this._compositionView.classList.remove("active"),this._isComposing=!1,b){const o={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let c;this._isSendingComposition=!1,o.start+=this._dataAlreadySent.length,c=this._isComposing?this._textarea.value.substring(o.start,o.end):this._textarea.value.substring(o.start),c.length>0&&this._coreService.triggerDataEvent(c,!0)}},0)}else{this._isSendingComposition=!1;const o=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(o,!0)}}_handleAnyTextareaChanges(){const b=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const o=this._textarea.value,c=o.replace(b,"");this._dataAlreadySent=c,o.length>b.length?this._coreService.triggerDataEvent(c,!0):o.length<b.length?this._coreService.triggerDataEvent(`${x.C0.DEL}`,!0):o.length===b.length&&o!==b&&this._coreService.triggerDataEvent(o,!0)}},0)}updateCompositionElements(b){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const o=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),c=this._renderService.dimensions.css.cell.height,u=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,h=o*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=h+"px",this._compositionView.style.top=u+"px",this._compositionView.style.height=c+"px",this._compositionView.style.lineHeight=c+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const f=this._compositionView.getBoundingClientRect();this._textarea.style.left=h+"px",this._textarea.style.top=u+"px",this._textarea.style.width=Math.max(f.width,1)+"px",this._textarea.style.height=Math.max(f.height,1)+"px",this._textarea.style.lineHeight=f.height+"px"}b||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=M=g([v(2,y.IBufferService),v(3,y.IOptionsService),v(4,y.ICoreService),v(5,p.IRenderService)],M)},9806:(d,i)=>{function n(g,v,p){const y=p.getBoundingClientRect(),x=g.getComputedStyle(p),M=parseInt(x.getPropertyValue("padding-left")),b=parseInt(x.getPropertyValue("padding-top"));return[v.clientX-y.left-M,v.clientY-y.top-b]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=n,i.getCoords=function(g,v,p,y,x,M,b,o,c){if(!M)return;const u=n(g,v,p);return u?(u[0]=Math.ceil((u[0]+(c?b/2:0))/b),u[1]=Math.ceil(u[1]/o),u[0]=Math.min(Math.max(u[0],1),y+(c?1:0)),u[1]=Math.min(Math.max(u[1],1),x),u):void 0}},9504:(d,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;const g=n(2584);function v(o,c,u,h){const f=o-p(o,u),$=c-p(c,u),C=Math.abs(f-$)-function(k,S,L){let P=0;const I=k-p(k,L),D=S-p(S,L);for(let T=0;T<Math.abs(I-D);T++){const B=y(k,S)==="A"?-1:1,N=L.buffer.lines.get(I+B*T);N?.isWrapped&&P++}return P}(o,c,u);return b(C,M(y(o,c),h))}function p(o,c){let u=0,h=c.buffer.lines.get(o),f=h?.isWrapped;for(;f&&o>=0&&o<c.rows;)u++,h=c.buffer.lines.get(--o),f=h?.isWrapped;return u}function y(o,c){return o>c?"A":"B"}function x(o,c,u,h,f,$){let C=o,k=c,S="";for(;C!==u||k!==h;)C+=f?1:-1,f&&C>$.cols-1?(S+=$.buffer.translateBufferLineToString(k,!1,o,C),C=0,o=0,k++):!f&&C<0&&(S+=$.buffer.translateBufferLineToString(k,!1,0,o+1),C=$.cols-1,o=C,k--);return S+$.buffer.translateBufferLineToString(k,!1,o,C)}function M(o,c){const u=c?"O":"[";return g.C0.ESC+u+o}function b(o,c){o=Math.floor(o);let u="";for(let h=0;h<o;h++)u+=c;return u}i.moveToCellSequence=function(o,c,u,h){const f=u.buffer.x,$=u.buffer.y;if(!u.buffer.hasScrollback)return function(S,L,P,I,D,T){return v(L,I,D,T).length===0?"":b(x(S,L,S,L-p(L,D),!1,D).length,M("D",T))}(f,$,0,c,u,h)+v($,c,u,h)+function(S,L,P,I,D,T){let B;B=v(L,I,D,T).length>0?I-p(I,D):L;const N=I,O=function(H,A,z,F,j,q){let U;return U=v(z,F,j,q).length>0?F-p(F,j):A,H<z&&U<=F||H>=z&&U<F?"C":"D"}(S,L,P,I,D,T);return b(x(S,B,P,N,O==="C",D).length,M(O,T))}(f,$,o,c,u,h);let C;if($===c)return C=f>o?"D":"C",b(Math.abs(f-o),M(C,h));C=$>c?"D":"C";const k=Math.abs($-c);return b(function(S,L){return L.cols-S}($>c?o:f,u)+(k-1)*u.cols+1+(($>c?f:o)-1),M(C,h))}},1296:function(d,i,n){var g=this&&this.__decorate||function(D,T,B,N){var O,H=arguments.length,A=H<3?T:N===null?N=Object.getOwnPropertyDescriptor(T,B):N;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(D,T,B,N);else for(var z=D.length-1;z>=0;z--)(O=D[z])&&(A=(H<3?O(A):H>3?O(T,B,A):O(T,B))||A);return H>3&&A&&Object.defineProperty(T,B,A),A},v=this&&this.__param||function(D,T){return function(B,N){T(B,N,D)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;const p=n(3787),y=n(2550),x=n(2223),M=n(6171),b=n(4725),o=n(8055),c=n(8460),u=n(844),h=n(2585),f="xterm-dom-renderer-owner-",$="xterm-rows",C="xterm-fg-",k="xterm-bg-",S="xterm-focus",L="xterm-selection";let P=1,I=i.DomRenderer=class extends u.Disposable{constructor(D,T,B,N,O,H,A,z,F,j){super(),this._element=D,this._screenElement=T,this._viewportElement=B,this._linkifier2=N,this._charSizeService=H,this._optionsService=A,this._bufferService=z,this._coreBrowserService=F,this._themeService=j,this._terminalClass=P++,this._rowElements=[],this.onRequestRedraw=this.register(new c.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add($),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(L),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,M.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(q=>this._injectCss(q))),this._injectCss(this._themeService.colors),this._rowFactory=O.createInstance(p.DomRendererRowFactory,document),this._element.classList.add(f+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(q=>this._handleLinkHover(q))),this.register(this._linkifier2.onHideLinkUnderline(q=>this._handleLinkLeave(q))),this.register((0,u.toDisposable)(()=>{this._element.classList.remove(f+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new y.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const D=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*D,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*D),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/D),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/D),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const B of this._rowElements)B.style.width=`${this.dimensions.css.canvas.width}px`,B.style.height=`${this.dimensions.css.cell.height}px`,B.style.lineHeight=`${this.dimensions.css.cell.height}px`,B.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const T=`${this._terminalSelector} .${$} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=T,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(D){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let T=`${this._terminalSelector} .${$} { color: ${D.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;T+=`${this._terminalSelector} .${$} .xterm-dim { color: ${o.color.multiplyOpacity(D.foreground,.5).css};}`,T+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,T+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",T+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${D.cursor.css};  color: ${D.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${D.cursor.css}; }}`,T+=`${this._terminalSelector} .${$}.${S} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${$}.${S} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${$} .xterm-cursor.xterm-cursor-block { background-color: ${D.cursor.css}; color: ${D.cursorAccent.css};}${this._terminalSelector} .${$} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${D.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${$} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${D.cursor.css} inset;}${this._terminalSelector} .${$} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${D.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,T+=`${this._terminalSelector} .${L} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${L} div { position: absolute; background-color: ${D.selectionBackgroundOpaque.css};}${this._terminalSelector} .${L} div { position: absolute; background-color: ${D.selectionInactiveBackgroundOpaque.css};}`;for(const[B,N]of D.ansi.entries())T+=`${this._terminalSelector} .${C}${B} { color: ${N.css}; }${this._terminalSelector} .${C}${B}.xterm-dim { color: ${o.color.multiplyOpacity(N,.5).css}; }${this._terminalSelector} .${k}${B} { background-color: ${N.css}; }`;T+=`${this._terminalSelector} .${C}${x.INVERTED_DEFAULT_COLOR} { color: ${o.color.opaque(D.background).css}; }${this._terminalSelector} .${C}${x.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${o.color.multiplyOpacity(o.color.opaque(D.background),.5).css}; }${this._terminalSelector} .${k}${x.INVERTED_DEFAULT_COLOR} { background-color: ${D.foreground.css}; }`,this._themeStyleElement.textContent=T}_setDefaultSpacing(){const D=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${D}px`,this._rowFactory.defaultSpacing=D}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(D,T){for(let B=this._rowElements.length;B<=T;B++){const N=document.createElement("div");this._rowContainer.appendChild(N),this._rowElements.push(N)}for(;this._rowElements.length>T;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(D,T){this._refreshRowElements(D,T),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(S)}handleFocus(){this._rowContainer.classList.add(S),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(D,T,B){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(D,T,B),this.renderRows(0,this._bufferService.rows-1),!D||!T)return;const N=D[1]-this._bufferService.buffer.ydisp,O=T[1]-this._bufferService.buffer.ydisp,H=Math.max(N,0),A=Math.min(O,this._bufferService.rows-1);if(H>=this._bufferService.rows||A<0)return;const z=document.createDocumentFragment();if(B){const F=D[0]>T[0];z.appendChild(this._createSelectionElement(H,F?T[0]:D[0],F?D[0]:T[0],A-H+1))}else{const F=N===H?D[0]:0,j=H===O?T[0]:this._bufferService.cols;z.appendChild(this._createSelectionElement(H,F,j));const q=A-H-1;if(z.appendChild(this._createSelectionElement(H+1,0,this._bufferService.cols,q)),H!==A){const U=O===A?T[0]:this._bufferService.cols;z.appendChild(this._createSelectionElement(A,0,U))}}this._selectionContainer.appendChild(z)}_createSelectionElement(D,T,B,N=1){const O=document.createElement("div");return O.style.height=N*this.dimensions.css.cell.height+"px",O.style.top=D*this.dimensions.css.cell.height+"px",O.style.left=T*this.dimensions.css.cell.width+"px",O.style.width=this.dimensions.css.cell.width*(B-T)+"px",O}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const D of this._rowElements)D.replaceChildren()}renderRows(D,T){const B=this._bufferService.buffer,N=B.ybase+B.y,O=Math.min(B.x,this._bufferService.cols-1),H=this._optionsService.rawOptions.cursorBlink,A=this._optionsService.rawOptions.cursorStyle,z=this._optionsService.rawOptions.cursorInactiveStyle;for(let F=D;F<=T;F++){const j=F+B.ydisp,q=this._rowElements[F],U=B.lines.get(j);if(!q||!U)break;q.replaceChildren(...this._rowFactory.createRow(U,j,j===N,A,z,O,H,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${f}${this._terminalClass}`}_handleLinkHover(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!0)}_handleLinkLeave(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!1)}_setCellUnderline(D,T,B,N,O,H){B<0&&(D=0),N<0&&(T=0);const A=this._bufferService.rows-1;B=Math.max(Math.min(B,A),0),N=Math.max(Math.min(N,A),0),O=Math.min(O,this._bufferService.cols);const z=this._bufferService.buffer,F=z.ybase+z.y,j=Math.min(z.x,O-1),q=this._optionsService.rawOptions.cursorBlink,U=this._optionsService.rawOptions.cursorStyle,Y=this._optionsService.rawOptions.cursorInactiveStyle;for(let V=B;V<=N;++V){const X=V+z.ydisp,R=this._rowElements[V],G=z.lines.get(X);if(!R||!G)break;R.replaceChildren(...this._rowFactory.createRow(G,X,X===F,U,Y,j,q,this.dimensions.css.cell.width,this._widthCache,H?V===B?D:0:-1,H?(V===N?T:O)-1:-1))}}};i.DomRenderer=I=g([v(4,h.IInstantiationService),v(5,b.ICharSizeService),v(6,h.IOptionsService),v(7,h.IBufferService),v(8,b.ICoreBrowserService),v(9,b.IThemeService)],I)},3787:function(d,i,n){var g=this&&this.__decorate||function(C,k,S,L){var P,I=arguments.length,D=I<3?k:L===null?L=Object.getOwnPropertyDescriptor(k,S):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(C,k,S,L);else for(var T=C.length-1;T>=0;T--)(P=C[T])&&(D=(I<3?P(D):I>3?P(k,S,D):P(k,S))||D);return I>3&&D&&Object.defineProperty(k,S,D),D},v=this&&this.__param||function(C,k){return function(S,L){k(S,L,C)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;const p=n(2223),y=n(643),x=n(511),M=n(2585),b=n(8055),o=n(4725),c=n(4269),u=n(6171),h=n(3734);let f=i.DomRendererRowFactory=class{constructor(C,k,S,L,P,I,D){this._document=C,this._characterJoinerService=k,this._optionsService=S,this._coreBrowserService=L,this._coreService=P,this._decorationService=I,this._themeService=D,this._workCell=new x.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(C,k,S){this._selectionStart=C,this._selectionEnd=k,this._columnSelectMode=S}createRow(C,k,S,L,P,I,D,T,B,N,O){const H=[],A=this._characterJoinerService.getJoinedCharacters(k),z=this._themeService.colors;let F,j=C.getNoBgTrimmedLength();S&&j<I+1&&(j=I+1);let q=0,U="",Y=0,V=0,X=0,R=!1,G=0,te=!1,ae=0;const Q=[],Z=N!==-1&&O!==-1;for(let ne=0;ne<j;ne++){C.loadCell(ne,this._workCell);let $e=this._workCell.getWidth();if($e===0)continue;let re=!1,de=ne,le=this._workCell;if(A.length>0&&ne===A[0][0]){re=!0;const ue=A.shift();le=new c.JoinedCellData(this._workCell,C.translateToString(!0,ue[0],ue[1]),ue[1]-ue[0]),de=ue[1]-1,$e=le.getWidth()}const xe=this._isCellInSelection(ne,k),ye=S&&ne===I,ke=Z&&ne>=N&&ne<=O;let ge=!1;this._decorationService.forEachDecorationAtCell(ne,k,void 0,ue=>{ge=!0});let Ce=le.getChars()||y.WHITESPACE_CELL_CHAR;if(Ce===" "&&(le.isUnderline()||le.isOverline())&&(Ce=""),ae=$e*T-B.get(Ce,le.isBold(),le.isItalic()),F){if(q&&(xe&&te||!xe&&!te&&le.bg===Y)&&(xe&&te&&z.selectionForeground||le.fg===V)&&le.extended.ext===X&&ke===R&&ae===G&&!ye&&!re&&!ge){U+=Ce,q++;continue}q&&(F.textContent=U),F=this._document.createElement("span"),q=0,U=""}else F=this._document.createElement("span");if(Y=le.bg,V=le.fg,X=le.extended.ext,R=ke,G=ae,te=xe,re&&I>=ne&&I<=de&&(I=ne),!this._coreService.isCursorHidden&&ye){if(Q.push("xterm-cursor"),this._coreBrowserService.isFocused)D&&Q.push("xterm-cursor-blink"),Q.push(L==="bar"?"xterm-cursor-bar":L==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(P)switch(P){case"outline":Q.push("xterm-cursor-outline");break;case"block":Q.push("xterm-cursor-block");break;case"bar":Q.push("xterm-cursor-bar");break;case"underline":Q.push("xterm-cursor-underline")}}if(le.isBold()&&Q.push("xterm-bold"),le.isItalic()&&Q.push("xterm-italic"),le.isDim()&&Q.push("xterm-dim"),U=le.isInvisible()?y.WHITESPACE_CELL_CHAR:le.getChars()||y.WHITESPACE_CELL_CHAR,le.isUnderline()&&(Q.push(`xterm-underline-${le.extended.underlineStyle}`),U===" "&&(U=""),!le.isUnderlineColorDefault()))if(le.isUnderlineColorRGB())F.style.textDecorationColor=`rgb(${h.AttributeData.toColorRGB(le.getUnderlineColor()).join(",")})`;else{let ue=le.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&le.isBold()&&ue<8&&(ue+=8),F.style.textDecorationColor=z.ansi[ue].css}le.isOverline()&&(Q.push("xterm-overline"),U===" "&&(U="")),le.isStrikethrough()&&Q.push("xterm-strikethrough"),ke&&(F.style.textDecoration="underline");let _e=le.getFgColor(),Me=le.getFgColorMode(),ve=le.getBgColor(),be=le.getBgColorMode();const ce=!!le.isInverse();if(ce){const ue=_e;_e=ve,ve=ue;const he=Me;Me=be,be=he}let Ae,se,oe,ie=!1;switch(this._decorationService.forEachDecorationAtCell(ne,k,void 0,ue=>{ue.options.layer!=="top"&&ie||(ue.backgroundColorRGB&&(be=50331648,ve=ue.backgroundColorRGB.rgba>>8&16777215,Ae=ue.backgroundColorRGB),ue.foregroundColorRGB&&(Me=50331648,_e=ue.foregroundColorRGB.rgba>>8&16777215,se=ue.foregroundColorRGB),ie=ue.options.layer==="top")}),!ie&&xe&&(Ae=this._coreBrowserService.isFocused?z.selectionBackgroundOpaque:z.selectionInactiveBackgroundOpaque,ve=Ae.rgba>>8&16777215,be=50331648,ie=!0,z.selectionForeground&&(Me=50331648,_e=z.selectionForeground.rgba>>8&16777215,se=z.selectionForeground)),ie&&Q.push("xterm-decoration-top"),be){case 16777216:case 33554432:oe=z.ansi[ve],Q.push(`xterm-bg-${ve}`);break;case 50331648:oe=b.rgba.toColor(ve>>16,ve>>8&255,255&ve),this._addStyle(F,`background-color:#${$((ve>>>0).toString(16),"0",6)}`);break;default:ce?(oe=z.foreground,Q.push(`xterm-bg-${p.INVERTED_DEFAULT_COLOR}`)):oe=z.background}switch(Ae||le.isDim()&&(Ae=b.color.multiplyOpacity(oe,.5)),Me){case 16777216:case 33554432:le.isBold()&&_e<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(_e+=8),this._applyMinimumContrast(F,oe,z.ansi[_e],le,Ae,void 0)||Q.push(`xterm-fg-${_e}`);break;case 50331648:const ue=b.rgba.toColor(_e>>16&255,_e>>8&255,255&_e);this._applyMinimumContrast(F,oe,ue,le,Ae,se)||this._addStyle(F,`color:#${$(_e.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(F,oe,z.foreground,le,Ae,void 0)||ce&&Q.push(`xterm-fg-${p.INVERTED_DEFAULT_COLOR}`)}Q.length&&(F.className=Q.join(" "),Q.length=0),ye||re||ge?F.textContent=U:q++,ae!==this.defaultSpacing&&(F.style.letterSpacing=`${ae}px`),H.push(F),ne=de}return F&&q&&(F.textContent=U),H}_applyMinimumContrast(C,k,S,L,P,I){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,u.excludeFromContrastRatioDemands)(L.getCode()))return!1;const D=this._getContrastCache(L);let T;if(P||I||(T=D.getColor(k.rgba,S.rgba)),T===void 0){const B=this._optionsService.rawOptions.minimumContrastRatio/(L.isDim()?2:1);T=b.color.ensureContrastRatio(P||k,I||S,B),D.setColor((P||k).rgba,(I||S).rgba,T??null)}return!!T&&(this._addStyle(C,`color:${T.css}`),!0)}_getContrastCache(C){return C.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(C,k){C.setAttribute("style",`${C.getAttribute("style")||""}${k};`)}_isCellInSelection(C,k){const S=this._selectionStart,L=this._selectionEnd;return!(!S||!L)&&(this._columnSelectMode?S[0]<=L[0]?C>=S[0]&&k>=S[1]&&C<L[0]&&k<=L[1]:C<S[0]&&k>=S[1]&&C>=L[0]&&k<=L[1]:k>S[1]&&k<L[1]||S[1]===L[1]&&k===S[1]&&C>=S[0]&&C<L[0]||S[1]<L[1]&&k===L[1]&&C<L[0]||S[1]<L[1]&&k===S[1]&&C>=S[0])}};function $(C,k,S){for(;C.length<S;)C=k+C;return C}i.DomRendererRowFactory=f=g([v(1,o.ICharacterJoinerService),v(2,M.IOptionsService),v(3,o.ICoreBrowserService),v(4,M.ICoreService),v(5,M.IDecorationService),v(6,o.IThemeService)],f)},2550:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(n){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=n.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const g=n.createElement("span"),v=n.createElement("span");v.style.fontWeight="bold";const p=n.createElement("span");p.style.fontStyle="italic";const y=n.createElement("span");y.style.fontWeight="bold",y.style.fontStyle="italic",this._measureElements=[g,v,p,y],this._container.appendChild(g),this._container.appendChild(v),this._container.appendChild(p),this._container.appendChild(y),n.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(n,g,v,p){n===this._font&&g===this._fontSize&&v===this._weight&&p===this._weightBold||(this._font=n,this._fontSize=g,this._weight=v,this._weightBold=p,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${v}`,this._measureElements[1].style.fontWeight=`${p}`,this._measureElements[2].style.fontWeight=`${v}`,this._measureElements[3].style.fontWeight=`${p}`,this.clear())}get(n,g,v){let p=0;if(!g&&!v&&n.length===1&&(p=n.charCodeAt(0))<256)return this._flat[p]!==-9999?this._flat[p]:this._flat[p]=this._measure(n,0);let y=n;g&&(y+="B"),v&&(y+="I");let x=this._holey.get(y);if(x===void 0){let M=0;g&&(M|=1),v&&(M|=2),x=this._measure(n,M),this._holey.set(y,x)}return x}_measure(n,g){const v=this._measureElements[g];return v.textContent=n.repeat(32),v.offsetWidth/32}}},2223:(d,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const g=n(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=g.isFirefox||g.isLegacyEdge?"bottom":"ideographic"},6171:(d,i)=>{function n(g){return 57508<=g&&g<=57558}Object.defineProperty(i,"__esModule",{value:!0}),i.createRenderDimensions=i.excludeFromContrastRatioDemands=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(g){if(!g)throw new Error("value must not be falsy");return g},i.isPowerlineGlyph=n,i.isRestrictedPowerlineGlyph=function(g){return 57520<=g&&g<=57527},i.excludeFromContrastRatioDemands=function(g){return n(g)||function(v){return 9472<=v&&v<=9631}(g)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(n){this._bufferService=n,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const n=this.selectionStart[0]+this.selectionStartLength;return n>this._bufferService.cols?n%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)-1]:[n%this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)]:[n,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const n=this.selectionStart[0]+this.selectionStartLength;return n>this._bufferService.cols?[n%this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)]:[Math.max(n,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const n=this.selectionStart,g=this.selectionEnd;return!(!n||!g)&&(n[1]>g[1]||n[1]===g[1]&&n[0]>g[0])}handleTrim(n){return this.selectionStart&&(this.selectionStart[1]-=n),this.selectionEnd&&(this.selectionEnd[1]-=n),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(d,i,n){var g=this&&this.__decorate||function(o,c,u,h){var f,$=arguments.length,C=$<3?c:h===null?h=Object.getOwnPropertyDescriptor(c,u):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(o,c,u,h);else for(var k=o.length-1;k>=0;k--)(f=o[k])&&(C=($<3?f(C):$>3?f(c,u,C):f(c,u))||C);return $>3&&C&&Object.defineProperty(c,u,C),C},v=this&&this.__param||function(o,c){return function(u,h){c(u,h,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;const p=n(2585),y=n(8460),x=n(844);let M=i.CharSizeService=class extends x.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(o,c,u){super(),this._optionsService=u,this.width=0,this.height=0,this._onCharSizeChange=this.register(new y.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new b(o,c,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const o=this._measureStrategy.measure();o.width===this.width&&o.height===this.height||(this.width=o.width,this.height=o.height,this._onCharSizeChange.fire())}};i.CharSizeService=M=g([v(2,p.IOptionsService)],M);class b{constructor(c,u,h){this._document=c,this._parentElement=u,this._optionsService=h,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const c={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return c.width!==0&&c.height!==0&&(this._result.width=c.width/32,this._result.height=Math.ceil(c.height)),this._result}}},4269:function(d,i,n){var g=this&&this.__decorate||function(c,u,h,f){var $,C=arguments.length,k=C<3?u:f===null?f=Object.getOwnPropertyDescriptor(u,h):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(c,u,h,f);else for(var S=c.length-1;S>=0;S--)($=c[S])&&(k=(C<3?$(k):C>3?$(u,h,k):$(u,h))||k);return C>3&&k&&Object.defineProperty(u,h,k),k},v=this&&this.__param||function(c,u){return function(h,f){u(h,f,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const p=n(3734),y=n(643),x=n(511),M=n(2585);class b extends p.AttributeData{constructor(u,h,f){super(),this.content=0,this.combinedData="",this.fg=u.fg,this.bg=u.bg,this.combinedData=h,this._width=f}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(u){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=b;let o=i.CharacterJoinerService=class cd{constructor(u){this._bufferService=u,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new x.CellData}register(u){const h={id:this._nextCharacterJoinerId++,handler:u};return this._characterJoiners.push(h),h.id}deregister(u){for(let h=0;h<this._characterJoiners.length;h++)if(this._characterJoiners[h].id===u)return this._characterJoiners.splice(h,1),!0;return!1}getJoinedCharacters(u){if(this._characterJoiners.length===0)return[];const h=this._bufferService.buffer.lines.get(u);if(!h||h.length===0)return[];const f=[],$=h.translateToString(!0);let C=0,k=0,S=0,L=h.getFg(0),P=h.getBg(0);for(let I=0;I<h.getTrimmedLength();I++)if(h.loadCell(I,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==L||this._workCell.bg!==P){if(I-C>1){const D=this._getJoinedRanges($,S,k,h,C);for(let T=0;T<D.length;T++)f.push(D[T])}C=I,S=k,L=this._workCell.fg,P=this._workCell.bg}k+=this._workCell.getChars().length||y.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-C>1){const I=this._getJoinedRanges($,S,k,h,C);for(let D=0;D<I.length;D++)f.push(I[D])}return f}_getJoinedRanges(u,h,f,$,C){const k=u.substring(h,f);let S=[];try{S=this._characterJoiners[0].handler(k)}catch(L){console.error(L)}for(let L=1;L<this._characterJoiners.length;L++)try{const P=this._characterJoiners[L].handler(k);for(let I=0;I<P.length;I++)cd._mergeRanges(S,P[I])}catch(P){console.error(P)}return this._stringRangesToCellRanges(S,$,C),S}_stringRangesToCellRanges(u,h,f){let $=0,C=!1,k=0,S=u[$];if(S){for(let L=f;L<this._bufferService.cols;L++){const P=h.getWidth(L),I=h.getString(L).length||y.WHITESPACE_CELL_CHAR.length;if(P!==0){if(!C&&S[0]<=k&&(S[0]=L,C=!0),S[1]<=k){if(S[1]=L,S=u[++$],!S)break;S[0]<=k?(S[0]=L,C=!0):C=!1}k+=I}}S&&(S[1]=this._bufferService.cols)}}static _mergeRanges(u,h){let f=!1;for(let $=0;$<u.length;$++){const C=u[$];if(f){if(h[1]<=C[0])return u[$-1][1]=h[1],u;if(h[1]<=C[1])return u[$-1][1]=Math.max(h[1],C[1]),u.splice($,1),u;u.splice($,1),$--}else{if(h[1]<=C[0])return u.splice($,0,h),u;if(h[1]<=C[1])return C[0]=Math.min(h[0],C[0]),u;h[0]<C[1]&&(C[0]=Math.min(h[0],C[0]),f=!0)}}return f?u[u.length-1][1]=h[1]:u.push(h),u}};i.CharacterJoinerService=o=g([v(0,M.IBufferService)],o)},5114:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0,i.CoreBrowserService=class{constructor(n,g){this._textarea=n,this.window=g,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(d,i,n){var g=this&&this.__decorate||function(M,b,o,c){var u,h=arguments.length,f=h<3?b:c===null?c=Object.getOwnPropertyDescriptor(b,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(M,b,o,c);else for(var $=M.length-1;$>=0;$--)(u=M[$])&&(f=(h<3?u(f):h>3?u(b,o,f):u(b,o))||f);return h>3&&f&&Object.defineProperty(b,o,f),f},v=this&&this.__param||function(M,b){return function(o,c){b(o,c,M)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;const p=n(4725),y=n(9806);let x=i.MouseService=class{constructor(M,b){this._renderService=M,this._charSizeService=b}getCoords(M,b,o,c,u){return(0,y.getCoords)(window,M,b,o,c,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,u)}getMouseReportCoords(M,b){const o=(0,y.getCoordsRelativeToElement)(window,M,b);if(this._charSizeService.hasValidSize)return o[0]=Math.min(Math.max(o[0],0),this._renderService.dimensions.css.canvas.width-1),o[1]=Math.min(Math.max(o[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(o[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(o[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(o[0]),y:Math.floor(o[1])}}};i.MouseService=x=g([v(0,p.IRenderService),v(1,p.ICharSizeService)],x)},3230:function(d,i,n){var g=this&&this.__decorate||function(f,$,C,k){var S,L=arguments.length,P=L<3?$:k===null?k=Object.getOwnPropertyDescriptor($,C):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(f,$,C,k);else for(var I=f.length-1;I>=0;I--)(S=f[I])&&(P=(L<3?S(P):L>3?S($,C,P):S($,C))||P);return L>3&&P&&Object.defineProperty($,C,P),P},v=this&&this.__param||function(f,$){return function(C,k){$(C,k,f)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;const p=n(3656),y=n(6193),x=n(5596),M=n(4725),b=n(8460),o=n(844),c=n(7226),u=n(2585);let h=i.RenderService=class extends o.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(f,$,C,k,S,L,P,I){if(super(),this._rowCount=f,this._charSizeService=k,this._renderer=this.register(new o.MutableDisposable),this._pausedResizeTask=new c.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new b.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new b.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new b.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new b.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new y.RenderDebouncer(P.window,(D,T)=>this._renderRows(D,T)),this.register(this._renderDebouncer),this._screenDprMonitor=new x.ScreenDprMonitor(P.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(L.onResize(()=>this._fullRefresh())),this.register(L.buffers.onBufferActivate(()=>{var D;return(D=this._renderer.value)===null||D===void 0?void 0:D.clear()})),this.register(C.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(S.onDecorationRegistered(()=>this._fullRefresh())),this.register(S.onDecorationRemoved(()=>this._fullRefresh())),this.register(C.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(L.cols,L.rows),this._fullRefresh()})),this.register(C.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(L.buffer.y,L.buffer.y,!0))),this.register((0,p.addDisposableDomListener)(P.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(I.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in P.window){const D=new P.window.IntersectionObserver(T=>this._handleIntersectionChange(T[T.length-1]),{threshold:0});D.observe($),this.register({dispose:()=>D.disconnect()})}}_handleIntersectionChange(f){this._isPaused=f.isIntersecting===void 0?f.intersectionRatio===0:!f.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(f,$,C=!1){this._isPaused?this._needsFullRefresh=!0:(C||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(f,$,this._rowCount))}_renderRows(f,$){this._renderer.value&&(f=Math.min(f,this._rowCount-1),$=Math.min($,this._rowCount-1),this._renderer.value.renderRows(f,$),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:f,end:$}),this._onRender.fire({start:f,end:$}),this._isNextRenderRedrawOnly=!0)}resize(f,$){this._rowCount=$,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(f){this._renderer.value=f,this._renderer.value.onRequestRedraw($=>this.refreshRows($.start,$.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(f){return this._renderDebouncer.addRefreshCallback(f)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var f,$;this._renderer.value&&(($=(f=this._renderer.value).clearTextureAtlas)===null||$===void 0||$.call(f),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(f,$){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(f,$)):this._renderer.value.handleResize(f,$),this._fullRefresh())}handleCharSizeChanged(){var f;(f=this._renderer.value)===null||f===void 0||f.handleCharSizeChanged()}handleBlur(){var f;(f=this._renderer.value)===null||f===void 0||f.handleBlur()}handleFocus(){var f;(f=this._renderer.value)===null||f===void 0||f.handleFocus()}handleSelectionChanged(f,$,C){var k;this._selectionState.start=f,this._selectionState.end=$,this._selectionState.columnSelectMode=C,(k=this._renderer.value)===null||k===void 0||k.handleSelectionChanged(f,$,C)}handleCursorMove(){var f;(f=this._renderer.value)===null||f===void 0||f.handleCursorMove()}clear(){var f;(f=this._renderer.value)===null||f===void 0||f.clear()}};i.RenderService=h=g([v(2,u.IOptionsService),v(3,M.ICharSizeService),v(4,u.IDecorationService),v(5,u.IBufferService),v(6,M.ICoreBrowserService),v(7,M.IThemeService)],h)},9312:function(d,i,n){var g=this&&this.__decorate||function(S,L,P,I){var D,T=arguments.length,B=T<3?L:I===null?I=Object.getOwnPropertyDescriptor(L,P):I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(S,L,P,I);else for(var N=S.length-1;N>=0;N--)(D=S[N])&&(B=(T<3?D(B):T>3?D(L,P,B):D(L,P))||B);return T>3&&B&&Object.defineProperty(L,P,B),B},v=this&&this.__param||function(S,L){return function(P,I){L(P,I,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;const p=n(9806),y=n(9504),x=n(456),M=n(4725),b=n(8460),o=n(844),c=n(6114),u=n(4841),h=n(511),f=n(2585),$="",C=new RegExp($,"g");let k=i.SelectionService=class extends o.Disposable{constructor(S,L,P,I,D,T,B,N,O){super(),this._element=S,this._screenElement=L,this._linkifier=P,this._bufferService=I,this._coreService=D,this._mouseService=T,this._optionsService=B,this._renderService=N,this._coreBrowserService=O,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new h.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new b.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new b.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new b.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new b.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=H=>this._handleMouseMove(H),this._mouseUpListener=H=>this._handleMouseUp(H),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(H=>this._handleTrim(H)),this.register(this._bufferService.buffers.onBufferActivate(H=>this._handleBufferActivate(H))),this.enable(),this._model=new x.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,o.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const S=this._model.finalSelectionStart,L=this._model.finalSelectionEnd;return!(!S||!L||S[0]===L[0]&&S[1]===L[1])}get selectionText(){const S=this._model.finalSelectionStart,L=this._model.finalSelectionEnd;if(!S||!L)return"";const P=this._bufferService.buffer,I=[];if(this._activeSelectionMode===3){if(S[0]===L[0])return"";const D=S[0]<L[0]?S[0]:L[0],T=S[0]<L[0]?L[0]:S[0];for(let B=S[1];B<=L[1];B++){const N=P.translateBufferLineToString(B,!0,D,T);I.push(N)}}else{const D=S[1]===L[1]?L[0]:void 0;I.push(P.translateBufferLineToString(S[1],!0,S[0],D));for(let T=S[1]+1;T<=L[1]-1;T++){const B=P.lines.get(T),N=P.translateBufferLineToString(T,!0);B?.isWrapped?I[I.length-1]+=N:I.push(N)}if(S[1]!==L[1]){const T=P.lines.get(L[1]),B=P.translateBufferLineToString(L[1],!0,0,L[0]);T&&T.isWrapped?I[I.length-1]+=B:I.push(B)}}return I.map(D=>D.replace(C," ")).join(c.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(S){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),c.isLinux&&S&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(S){const L=this._getMouseBufferCoords(S),P=this._model.finalSelectionStart,I=this._model.finalSelectionEnd;return!!(P&&I&&L)&&this._areCoordsInSelection(L,P,I)}isCellInSelection(S,L){const P=this._model.finalSelectionStart,I=this._model.finalSelectionEnd;return!(!P||!I)&&this._areCoordsInSelection([S,L],P,I)}_areCoordsInSelection(S,L,P){return S[1]>L[1]&&S[1]<P[1]||L[1]===P[1]&&S[1]===L[1]&&S[0]>=L[0]&&S[0]<P[0]||L[1]<P[1]&&S[1]===P[1]&&S[0]<P[0]||L[1]<P[1]&&S[1]===L[1]&&S[0]>=L[0]}_selectWordAtCursor(S,L){var P,I;const D=(I=(P=this._linkifier.currentLink)===null||P===void 0?void 0:P.link)===null||I===void 0?void 0:I.range;if(D)return this._model.selectionStart=[D.start.x-1,D.start.y-1],this._model.selectionStartLength=(0,u.getRangeLength)(D,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const T=this._getMouseBufferCoords(S);return!!T&&(this._selectWordAt(T,L),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(S,L){this._model.clearSelection(),S=Math.max(S,0),L=Math.min(L,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,S],this._model.selectionEnd=[this._bufferService.cols,L],this.refresh(),this._onSelectionChange.fire()}_handleTrim(S){this._model.handleTrim(S)&&this.refresh()}_getMouseBufferCoords(S){const L=this._mouseService.getCoords(S,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(L)return L[0]--,L[1]--,L[1]+=this._bufferService.buffer.ydisp,L}_getMouseEventScrollAmount(S){let L=(0,p.getCoordsRelativeToElement)(this._coreBrowserService.window,S,this._screenElement)[1];const P=this._renderService.dimensions.css.canvas.height;return L>=0&&L<=P?0:(L>P&&(L-=P),L=Math.min(Math.max(L,-50),50),L/=50,L/Math.abs(L)+Math.round(14*L))}shouldForceSelection(S){return c.isMac?S.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:S.shiftKey}handleMouseDown(S){if(this._mouseDownTimeStamp=S.timeStamp,(S.button!==2||!this.hasSelection)&&S.button===0){if(!this._enabled){if(!this.shouldForceSelection(S))return;S.stopPropagation()}S.preventDefault(),this._dragScrollAmount=0,this._enabled&&S.shiftKey?this._handleIncrementalClick(S):S.detail===1?this._handleSingleClick(S):S.detail===2?this._handleDoubleClick(S):S.detail===3&&this._handleTripleClick(S),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(S){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(S))}_handleSingleClick(S){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(S)?3:0,this._model.selectionStart=this._getMouseBufferCoords(S),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const L=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);L&&L.length!==this._model.selectionStart[0]&&L.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(S){this._selectWordAtCursor(S,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(S){const L=this._getMouseBufferCoords(S);L&&(this._activeSelectionMode=2,this._selectLineAt(L[1]))}shouldColumnSelect(S){return S.altKey&&!(c.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(S){if(S.stopImmediatePropagation(),!this._model.selectionStart)return;const L=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(S),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(S),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const P=this._bufferService.buffer;if(this._model.selectionEnd[1]<P.lines.length){const I=P.lines.get(this._model.selectionEnd[1]);I&&I.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}L&&L[0]===this._model.selectionEnd[0]&&L[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const S=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(S.ydisp+this._bufferService.rows,S.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=S.ydisp),this.refresh()}}_handleMouseUp(S){const L=S.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&L<500&&S.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const P=this._mouseService.getCoords(S,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(P&&P[0]!==void 0&&P[1]!==void 0){const I=(0,y.moveToCellSequence)(P[0]-1,P[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(I,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const S=this._model.finalSelectionStart,L=this._model.finalSelectionEnd,P=!(!S||!L||S[0]===L[0]&&S[1]===L[1]);P?S&&L&&(this._oldSelectionStart&&this._oldSelectionEnd&&S[0]===this._oldSelectionStart[0]&&S[1]===this._oldSelectionStart[1]&&L[0]===this._oldSelectionEnd[0]&&L[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(S,L,P)):this._oldHasSelection&&this._fireOnSelectionChange(S,L,P)}_fireOnSelectionChange(S,L,P){this._oldSelectionStart=S,this._oldSelectionEnd=L,this._oldHasSelection=P,this._onSelectionChange.fire()}_handleBufferActivate(S){this.clearSelection(),this._trimListener.dispose(),this._trimListener=S.activeBuffer.lines.onTrim(L=>this._handleTrim(L))}_convertViewportColToCharacterIndex(S,L){let P=L;for(let I=0;L>=I;I++){const D=S.loadCell(I,this._workCell).getChars().length;this._workCell.getWidth()===0?P--:D>1&&L!==I&&(P+=D-1)}return P}setSelection(S,L,P){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[S,L],this._model.selectionStartLength=P,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(S){this._isClickInSelection(S)||(this._selectWordAtCursor(S,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(S,L,P=!0,I=!0){if(S[0]>=this._bufferService.cols)return;const D=this._bufferService.buffer,T=D.lines.get(S[1]);if(!T)return;const B=D.translateBufferLineToString(S[1],!1);let N=this._convertViewportColToCharacterIndex(T,S[0]),O=N;const H=S[0]-N;let A=0,z=0,F=0,j=0;if(B.charAt(N)===" "){for(;N>0&&B.charAt(N-1)===" ";)N--;for(;O<B.length&&B.charAt(O+1)===" ";)O++}else{let Y=S[0],V=S[0];T.getWidth(Y)===0&&(A++,Y--),T.getWidth(V)===2&&(z++,V++);const X=T.getString(V).length;for(X>1&&(j+=X-1,O+=X-1);Y>0&&N>0&&!this._isCharWordSeparator(T.loadCell(Y-1,this._workCell));){T.loadCell(Y-1,this._workCell);const R=this._workCell.getChars().length;this._workCell.getWidth()===0?(A++,Y--):R>1&&(F+=R-1,N-=R-1),N--,Y--}for(;V<T.length&&O+1<B.length&&!this._isCharWordSeparator(T.loadCell(V+1,this._workCell));){T.loadCell(V+1,this._workCell);const R=this._workCell.getChars().length;this._workCell.getWidth()===2?(z++,V++):R>1&&(j+=R-1,O+=R-1),O++,V++}}O++;let q=N+H-A+F,U=Math.min(this._bufferService.cols,O-N+A+z-F-j);if(L||B.slice(N,O).trim()!==""){if(P&&q===0&&T.getCodePoint(0)!==32){const Y=D.lines.get(S[1]-1);if(Y&&T.isWrapped&&Y.getCodePoint(this._bufferService.cols-1)!==32){const V=this._getWordAt([this._bufferService.cols-1,S[1]-1],!1,!0,!1);if(V){const X=this._bufferService.cols-V.start;q-=X,U+=X}}}if(I&&q+U===this._bufferService.cols&&T.getCodePoint(this._bufferService.cols-1)!==32){const Y=D.lines.get(S[1]+1);if(Y?.isWrapped&&Y.getCodePoint(0)!==32){const V=this._getWordAt([0,S[1]+1],!1,!1,!0);V&&(U+=V.length)}}return{start:q,length:U}}}_selectWordAt(S,L){const P=this._getWordAt(S,L);if(P){for(;P.start<0;)P.start+=this._bufferService.cols,S[1]--;this._model.selectionStart=[P.start,S[1]],this._model.selectionStartLength=P.length}}_selectToWordAt(S){const L=this._getWordAt(S,!0);if(L){let P=S[1];for(;L.start<0;)L.start+=this._bufferService.cols,P--;if(!this._model.areSelectionValuesReversed())for(;L.start+L.length>this._bufferService.cols;)L.length-=this._bufferService.cols,P++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?L.start:L.start+L.length,P]}}_isCharWordSeparator(S){return S.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(S.getChars())>=0}_selectLineAt(S){const L=this._bufferService.buffer.getWrappedRangeForLine(S),P={start:{x:0,y:L.first},end:{x:this._bufferService.cols-1,y:L.last}};this._model.selectionStart=[0,L.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,u.getRangeLength)(P,this._bufferService.cols)}};i.SelectionService=k=g([v(3,f.IBufferService),v(4,f.ICoreService),v(5,M.IMouseService),v(6,f.IOptionsService),v(7,M.IRenderService),v(8,M.ICoreBrowserService)],k)},4725:(d,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;const g=n(8343);i.ICharSizeService=(0,g.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,g.createDecorator)("CoreBrowserService"),i.IMouseService=(0,g.createDecorator)("MouseService"),i.IRenderService=(0,g.createDecorator)("RenderService"),i.ISelectionService=(0,g.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,g.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,g.createDecorator)("ThemeService")},6731:function(d,i,n){var g=this&&this.__decorate||function(k,S,L,P){var I,D=arguments.length,T=D<3?S:P===null?P=Object.getOwnPropertyDescriptor(S,L):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(k,S,L,P);else for(var B=k.length-1;B>=0;B--)(I=k[B])&&(T=(D<3?I(T):D>3?I(S,L,T):I(S,L))||T);return D>3&&T&&Object.defineProperty(S,L,T),T},v=this&&this.__param||function(k,S){return function(L,P){S(L,P,k)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const p=n(7239),y=n(8055),x=n(8460),M=n(844),b=n(2585),o=y.css.toColor("#ffffff"),c=y.css.toColor("#000000"),u=y.css.toColor("#ffffff"),h=y.css.toColor("#000000"),f={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const k=[y.css.toColor("#2e3436"),y.css.toColor("#cc0000"),y.css.toColor("#4e9a06"),y.css.toColor("#c4a000"),y.css.toColor("#3465a4"),y.css.toColor("#75507b"),y.css.toColor("#06989a"),y.css.toColor("#d3d7cf"),y.css.toColor("#555753"),y.css.toColor("#ef2929"),y.css.toColor("#8ae234"),y.css.toColor("#fce94f"),y.css.toColor("#729fcf"),y.css.toColor("#ad7fa8"),y.css.toColor("#34e2e2"),y.css.toColor("#eeeeec")],S=[0,95,135,175,215,255];for(let L=0;L<216;L++){const P=S[L/36%6|0],I=S[L/6%6|0],D=S[L%6];k.push({css:y.channels.toCss(P,I,D),rgba:y.channels.toRgba(P,I,D)})}for(let L=0;L<24;L++){const P=8+10*L;k.push({css:y.channels.toCss(P,P,P),rgba:y.channels.toRgba(P,P,P)})}return k})());let $=i.ThemeService=class extends M.Disposable{get colors(){return this._colors}constructor(k){super(),this._optionsService=k,this._contrastCache=new p.ColorContrastCache,this._halfContrastCache=new p.ColorContrastCache,this._onChangeColors=this.register(new x.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:o,background:c,cursor:u,cursorAccent:h,selectionForeground:void 0,selectionBackgroundTransparent:f,selectionBackgroundOpaque:y.color.blend(c,f),selectionInactiveBackgroundTransparent:f,selectionInactiveBackgroundOpaque:y.color.blend(c,f),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(k={}){const S=this._colors;if(S.foreground=C(k.foreground,o),S.background=C(k.background,c),S.cursor=C(k.cursor,u),S.cursorAccent=C(k.cursorAccent,h),S.selectionBackgroundTransparent=C(k.selectionBackground,f),S.selectionBackgroundOpaque=y.color.blend(S.background,S.selectionBackgroundTransparent),S.selectionInactiveBackgroundTransparent=C(k.selectionInactiveBackground,S.selectionBackgroundTransparent),S.selectionInactiveBackgroundOpaque=y.color.blend(S.background,S.selectionInactiveBackgroundTransparent),S.selectionForeground=k.selectionForeground?C(k.selectionForeground,y.NULL_COLOR):void 0,S.selectionForeground===y.NULL_COLOR&&(S.selectionForeground=void 0),y.color.isOpaque(S.selectionBackgroundTransparent)&&(S.selectionBackgroundTransparent=y.color.opacity(S.selectionBackgroundTransparent,.3)),y.color.isOpaque(S.selectionInactiveBackgroundTransparent)&&(S.selectionInactiveBackgroundTransparent=y.color.opacity(S.selectionInactiveBackgroundTransparent,.3)),S.ansi=i.DEFAULT_ANSI_COLORS.slice(),S.ansi[0]=C(k.black,i.DEFAULT_ANSI_COLORS[0]),S.ansi[1]=C(k.red,i.DEFAULT_ANSI_COLORS[1]),S.ansi[2]=C(k.green,i.DEFAULT_ANSI_COLORS[2]),S.ansi[3]=C(k.yellow,i.DEFAULT_ANSI_COLORS[3]),S.ansi[4]=C(k.blue,i.DEFAULT_ANSI_COLORS[4]),S.ansi[5]=C(k.magenta,i.DEFAULT_ANSI_COLORS[5]),S.ansi[6]=C(k.cyan,i.DEFAULT_ANSI_COLORS[6]),S.ansi[7]=C(k.white,i.DEFAULT_ANSI_COLORS[7]),S.ansi[8]=C(k.brightBlack,i.DEFAULT_ANSI_COLORS[8]),S.ansi[9]=C(k.brightRed,i.DEFAULT_ANSI_COLORS[9]),S.ansi[10]=C(k.brightGreen,i.DEFAULT_ANSI_COLORS[10]),S.ansi[11]=C(k.brightYellow,i.DEFAULT_ANSI_COLORS[11]),S.ansi[12]=C(k.brightBlue,i.DEFAULT_ANSI_COLORS[12]),S.ansi[13]=C(k.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),S.ansi[14]=C(k.brightCyan,i.DEFAULT_ANSI_COLORS[14]),S.ansi[15]=C(k.brightWhite,i.DEFAULT_ANSI_COLORS[15]),k.extendedAnsi){const L=Math.min(S.ansi.length-16,k.extendedAnsi.length);for(let P=0;P<L;P++)S.ansi[P+16]=C(k.extendedAnsi[P],i.DEFAULT_ANSI_COLORS[P+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(k){this._restoreColor(k),this._onChangeColors.fire(this.colors)}_restoreColor(k){if(k!==void 0)switch(k){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[k]=this._restoreColors.ansi[k]}else for(let S=0;S<this._restoreColors.ansi.length;++S)this._colors.ansi[S]=this._restoreColors.ansi[S]}modifyColors(k){k(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function C(k,S){if(k!==void 0)try{return y.css.toColor(k)}catch{}return S}i.ThemeService=$=g([v(0,b.IOptionsService)],$)},6349:(d,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;const g=n(8460),v=n(844);class p extends v.Disposable{constructor(x){super(),this._maxLength=x,this.onDeleteEmitter=this.register(new g.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new g.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new g.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(x){if(this._maxLength===x)return;const M=new Array(x);for(let b=0;b<Math.min(x,this.length);b++)M[b]=this._array[this._getCyclicIndex(b)];this._array=M,this._maxLength=x,this._startIndex=0}get length(){return this._length}set length(x){if(x>this._length)for(let M=this._length;M<x;M++)this._array[M]=void 0;this._length=x}get(x){return this._array[this._getCyclicIndex(x)]}set(x,M){this._array[this._getCyclicIndex(x)]=M}push(x){this._array[this._getCyclicIndex(this._length)]=x,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(x,M,...b){if(M){for(let o=x;o<this._length-M;o++)this._array[this._getCyclicIndex(o)]=this._array[this._getCyclicIndex(o+M)];this._length-=M,this.onDeleteEmitter.fire({index:x,amount:M})}for(let o=this._length-1;o>=x;o--)this._array[this._getCyclicIndex(o+b.length)]=this._array[this._getCyclicIndex(o)];for(let o=0;o<b.length;o++)this._array[this._getCyclicIndex(x+o)]=b[o];if(b.length&&this.onInsertEmitter.fire({index:x,amount:b.length}),this._length+b.length>this._maxLength){const o=this._length+b.length-this._maxLength;this._startIndex+=o,this._length=this._maxLength,this.onTrimEmitter.fire(o)}else this._length+=b.length}trimStart(x){x>this._length&&(x=this._length),this._startIndex+=x,this._length-=x,this.onTrimEmitter.fire(x)}shiftElements(x,M,b){if(!(M<=0)){if(x<0||x>=this._length)throw new Error("start argument out of range");if(x+b<0)throw new Error("Cannot shift elements in list beyond index 0");if(b>0){for(let c=M-1;c>=0;c--)this.set(x+c+b,this.get(x+c));const o=x+M+b-this._length;if(o>0)for(this._length+=o;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let o=0;o<M;o++)this.set(x+o+b,this.get(x+o))}}_getCyclicIndex(x){return(this._startIndex+x)%this._maxLength}}i.CircularList=p},1439:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function n(g,v=5){if(typeof g!="object")return g;const p=Array.isArray(g)?[]:{};for(const y in g)p[y]=v<=1?g[y]:g[y]&&n(g[y],v-1);return p}},8055:(d,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;const g=n(6114);let v=0,p=0,y=0,x=0;var M,b,o,c,u;function h($){const C=$.toString(16);return C.length<2?"0"+C:C}function f($,C){return $<C?(C+.05)/($+.05):($+.05)/(C+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function($){$.toCss=function(C,k,S,L){return L!==void 0?`#${h(C)}${h(k)}${h(S)}${h(L)}`:`#${h(C)}${h(k)}${h(S)}`},$.toRgba=function(C,k,S,L=255){return(C<<24|k<<16|S<<8|L)>>>0}}(M||(i.channels=M={})),function($){function C(k,S){return x=Math.round(255*S),[v,p,y]=u.toChannels(k.rgba),{css:M.toCss(v,p,y,x),rgba:M.toRgba(v,p,y,x)}}$.blend=function(k,S){if(x=(255&S.rgba)/255,x===1)return{css:S.css,rgba:S.rgba};const L=S.rgba>>24&255,P=S.rgba>>16&255,I=S.rgba>>8&255,D=k.rgba>>24&255,T=k.rgba>>16&255,B=k.rgba>>8&255;return v=D+Math.round((L-D)*x),p=T+Math.round((P-T)*x),y=B+Math.round((I-B)*x),{css:M.toCss(v,p,y),rgba:M.toRgba(v,p,y)}},$.isOpaque=function(k){return(255&k.rgba)==255},$.ensureContrastRatio=function(k,S,L){const P=u.ensureContrastRatio(k.rgba,S.rgba,L);if(P)return u.toColor(P>>24&255,P>>16&255,P>>8&255)},$.opaque=function(k){const S=(255|k.rgba)>>>0;return[v,p,y]=u.toChannels(S),{css:M.toCss(v,p,y),rgba:S}},$.opacity=C,$.multiplyOpacity=function(k,S){return x=255&k.rgba,C(k,x*S/255)},$.toColorRGB=function(k){return[k.rgba>>24&255,k.rgba>>16&255,k.rgba>>8&255]}}(b||(i.color=b={})),function($){let C,k;if(!g.isNode){const S=document.createElement("canvas");S.width=1,S.height=1;const L=S.getContext("2d",{willReadFrequently:!0});L&&(C=L,C.globalCompositeOperation="copy",k=C.createLinearGradient(0,0,1,1))}$.toColor=function(S){if(S.match(/#[\da-f]{3,8}/i))switch(S.length){case 4:return v=parseInt(S.slice(1,2).repeat(2),16),p=parseInt(S.slice(2,3).repeat(2),16),y=parseInt(S.slice(3,4).repeat(2),16),u.toColor(v,p,y);case 5:return v=parseInt(S.slice(1,2).repeat(2),16),p=parseInt(S.slice(2,3).repeat(2),16),y=parseInt(S.slice(3,4).repeat(2),16),x=parseInt(S.slice(4,5).repeat(2),16),u.toColor(v,p,y,x);case 7:return{css:S,rgba:(parseInt(S.slice(1),16)<<8|255)>>>0};case 9:return{css:S,rgba:parseInt(S.slice(1),16)>>>0}}const L=S.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(L)return v=parseInt(L[1]),p=parseInt(L[2]),y=parseInt(L[3]),x=Math.round(255*(L[5]===void 0?1:parseFloat(L[5]))),u.toColor(v,p,y,x);if(!C||!k)throw new Error("css.toColor: Unsupported css format");if(C.fillStyle=k,C.fillStyle=S,typeof C.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(C.fillRect(0,0,1,1),[v,p,y,x]=C.getImageData(0,0,1,1).data,x!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:M.toRgba(v,p,y,x),css:S}}}(o||(i.css=o={})),function($){function C(k,S,L){const P=k/255,I=S/255,D=L/255;return .2126*(P<=.03928?P/12.92:Math.pow((P+.055)/1.055,2.4))+.7152*(I<=.03928?I/12.92:Math.pow((I+.055)/1.055,2.4))+.0722*(D<=.03928?D/12.92:Math.pow((D+.055)/1.055,2.4))}$.relativeLuminance=function(k){return C(k>>16&255,k>>8&255,255&k)},$.relativeLuminance2=C}(c||(i.rgb=c={})),function($){function C(S,L,P){const I=S>>24&255,D=S>>16&255,T=S>>8&255;let B=L>>24&255,N=L>>16&255,O=L>>8&255,H=f(c.relativeLuminance2(B,N,O),c.relativeLuminance2(I,D,T));for(;H<P&&(B>0||N>0||O>0);)B-=Math.max(0,Math.ceil(.1*B)),N-=Math.max(0,Math.ceil(.1*N)),O-=Math.max(0,Math.ceil(.1*O)),H=f(c.relativeLuminance2(B,N,O),c.relativeLuminance2(I,D,T));return(B<<24|N<<16|O<<8|255)>>>0}function k(S,L,P){const I=S>>24&255,D=S>>16&255,T=S>>8&255;let B=L>>24&255,N=L>>16&255,O=L>>8&255,H=f(c.relativeLuminance2(B,N,O),c.relativeLuminance2(I,D,T));for(;H<P&&(B<255||N<255||O<255);)B=Math.min(255,B+Math.ceil(.1*(255-B))),N=Math.min(255,N+Math.ceil(.1*(255-N))),O=Math.min(255,O+Math.ceil(.1*(255-O))),H=f(c.relativeLuminance2(B,N,O),c.relativeLuminance2(I,D,T));return(B<<24|N<<16|O<<8|255)>>>0}$.ensureContrastRatio=function(S,L,P){const I=c.relativeLuminance(S>>8),D=c.relativeLuminance(L>>8);if(f(I,D)<P){if(D<I){const N=C(S,L,P),O=f(I,c.relativeLuminance(N>>8));if(O<P){const H=k(S,L,P);return O>f(I,c.relativeLuminance(H>>8))?N:H}return N}const T=k(S,L,P),B=f(I,c.relativeLuminance(T>>8));if(B<P){const N=C(S,L,P);return B>f(I,c.relativeLuminance(N>>8))?T:N}return T}},$.reduceLuminance=C,$.increaseLuminance=k,$.toChannels=function(S){return[S>>24&255,S>>16&255,S>>8&255,255&S]},$.toColor=function(S,L,P,I){return{css:M.toCss(S,L,P,I),rgba:M.toRgba(S,L,P,I)}}}(u||(i.rgba=u={})),i.toPaddedHex=h,i.contrastRatio=f},8969:(d,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;const g=n(844),v=n(2585),p=n(4348),y=n(7866),x=n(744),M=n(7302),b=n(6975),o=n(8460),c=n(1753),u=n(1480),h=n(7994),f=n(9282),$=n(5435),C=n(5981),k=n(2660);let S=!1;class L extends g.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new o.EventEmitter),this._onScroll.event(I=>{var D;(D=this._onScrollApi)===null||D===void 0||D.fire(I.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(I){for(const D in I)this.optionsService.options[D]=I[D]}constructor(I){super(),this._windowsWrappingHeuristics=this.register(new g.MutableDisposable),this._onBinary=this.register(new o.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new o.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new o.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new o.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new o.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new o.EventEmitter),this._instantiationService=new p.InstantiationService,this.optionsService=this.register(new M.OptionsService(I)),this._instantiationService.setService(v.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(x.BufferService)),this._instantiationService.setService(v.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(y.LogService)),this._instantiationService.setService(v.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(b.CoreService)),this._instantiationService.setService(v.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(c.CoreMouseService)),this._instantiationService.setService(v.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(u.UnicodeService)),this._instantiationService.setService(v.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(h.CharsetService),this._instantiationService.setService(v.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(k.OscLinkService),this._instantiationService.setService(v.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new $.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,o.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,o.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,o.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,o.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(D=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(D=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new C.WriteBuffer((D,T)=>this._inputHandler.parse(D,T))),this.register((0,o.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(I,D){this._writeBuffer.write(I,D)}writeSync(I,D){this._logService.logLevel<=v.LogLevelEnum.WARN&&!S&&(this._logService.warn("writeSync is unreliable and will be removed soon."),S=!0),this._writeBuffer.writeSync(I,D)}resize(I,D){isNaN(I)||isNaN(D)||(I=Math.max(I,x.MINIMUM_COLS),D=Math.max(D,x.MINIMUM_ROWS),this._bufferService.resize(I,D))}scroll(I,D=!1){this._bufferService.scroll(I,D)}scrollLines(I,D,T){this._bufferService.scrollLines(I,D,T)}scrollPages(I){this.scrollLines(I*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(I){const D=I-this._bufferService.buffer.ydisp;D!==0&&this.scrollLines(D)}registerEscHandler(I,D){return this._inputHandler.registerEscHandler(I,D)}registerDcsHandler(I,D){return this._inputHandler.registerDcsHandler(I,D)}registerCsiHandler(I,D){return this._inputHandler.registerCsiHandler(I,D)}registerOscHandler(I,D){return this._inputHandler.registerOscHandler(I,D)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let I=!1;const D=this.optionsService.rawOptions.windowsPty;D&&D.buildNumber!==void 0&&D.buildNumber!==void 0?I=D.backend==="conpty"&&D.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(I=!0),I?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const I=[];I.push(this.onLineFeed(f.updateWindowsModeWrappedState.bind(null,this._bufferService))),I.push(this.registerCsiHandler({final:"H"},()=>((0,f.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,g.toDisposable)(()=>{for(const D of I)D.dispose()})}}}i.CoreTerminal=L},8460:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=n=>(this._listeners.push(n),{dispose:()=>{if(!this._disposed){for(let g=0;g<this._listeners.length;g++)if(this._listeners[g]===n)return void this._listeners.splice(g,1)}}})),this._event}fire(n,g){const v=[];for(let p=0;p<this._listeners.length;p++)v.push(this._listeners[p]);for(let p=0;p<v.length;p++)v[p].call(void 0,n,g)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(n,g){return n(v=>g.fire(v))}},5435:function(d,i,n){var g=this&&this.__decorate||function(H,A,z,F){var j,q=arguments.length,U=q<3?A:F===null?F=Object.getOwnPropertyDescriptor(A,z):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(H,A,z,F);else for(var Y=H.length-1;Y>=0;Y--)(j=H[Y])&&(U=(q<3?j(U):q>3?j(A,z,U):j(A,z))||U);return q>3&&U&&Object.defineProperty(A,z,U),U},v=this&&this.__param||function(H,A){return function(z,F){A(z,F,H)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;const p=n(2584),y=n(7116),x=n(2015),M=n(844),b=n(482),o=n(8437),c=n(8460),u=n(643),h=n(511),f=n(3734),$=n(2585),C=n(6242),k=n(6351),S=n(5941),L={"(":0,")":1,"*":2,"+":3,"-":1,".":2},P=131072;function I(H,A){if(H>24)return A.setWinLines||!1;switch(H){case 1:return!!A.restoreWin;case 2:return!!A.minimizeWin;case 3:return!!A.setWinPosition;case 4:return!!A.setWinSizePixels;case 5:return!!A.raiseWin;case 6:return!!A.lowerWin;case 7:return!!A.refreshWin;case 8:return!!A.setWinSizeChars;case 9:return!!A.maximizeWin;case 10:return!!A.fullscreenWin;case 11:return!!A.getWinState;case 13:return!!A.getWinPosition;case 14:return!!A.getWinSizePixels;case 15:return!!A.getScreenSizePixels;case 16:return!!A.getCellSizePixels;case 18:return!!A.getWinSizeChars;case 19:return!!A.getScreenSizeChars;case 20:return!!A.getIconTitle;case 21:return!!A.getWinTitle;case 22:return!!A.pushTitle;case 23:return!!A.popTitle;case 24:return!!A.setWinLines}return!1}var D;(function(H){H[H.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",H[H.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(D||(i.WindowsOptionsReportType=D={}));let T=0;class B extends M.Disposable{getAttrData(){return this._curAttrData}constructor(A,z,F,j,q,U,Y,V,X=new x.EscapeSequenceParser){super(),this._bufferService=A,this._charsetService=z,this._coreService=F,this._logService=j,this._optionsService=q,this._oscLinkService=U,this._coreMouseService=Y,this._unicodeService=V,this._parser=X,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new b.StringToUtf32,this._utf8Decoder=new b.Utf8ToUtf32,this._workCell=new h.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new c.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new c.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new c.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new c.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new c.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new c.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new c.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new c.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new c.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new c.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new c.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new c.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new c.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new N(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(R=>this._activeBuffer=R.activeBuffer)),this._parser.setCsiHandlerFallback((R,G)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(R),params:G.toArray()})}),this._parser.setEscHandlerFallback(R=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(R)})}),this._parser.setExecuteHandlerFallback(R=>{this._logService.debug("Unknown EXECUTE code: ",{code:R})}),this._parser.setOscHandlerFallback((R,G,te)=>{this._logService.debug("Unknown OSC code: ",{identifier:R,action:G,data:te})}),this._parser.setDcsHandlerFallback((R,G,te)=>{G==="HOOK"&&(te=te.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(R),action:G,payload:te})}),this._parser.setPrintHandler((R,G,te)=>this.print(R,G,te)),this._parser.registerCsiHandler({final:"@"},R=>this.insertChars(R)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},R=>this.scrollLeft(R)),this._parser.registerCsiHandler({final:"A"},R=>this.cursorUp(R)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},R=>this.scrollRight(R)),this._parser.registerCsiHandler({final:"B"},R=>this.cursorDown(R)),this._parser.registerCsiHandler({final:"C"},R=>this.cursorForward(R)),this._parser.registerCsiHandler({final:"D"},R=>this.cursorBackward(R)),this._parser.registerCsiHandler({final:"E"},R=>this.cursorNextLine(R)),this._parser.registerCsiHandler({final:"F"},R=>this.cursorPrecedingLine(R)),this._parser.registerCsiHandler({final:"G"},R=>this.cursorCharAbsolute(R)),this._parser.registerCsiHandler({final:"H"},R=>this.cursorPosition(R)),this._parser.registerCsiHandler({final:"I"},R=>this.cursorForwardTab(R)),this._parser.registerCsiHandler({final:"J"},R=>this.eraseInDisplay(R,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},R=>this.eraseInDisplay(R,!0)),this._parser.registerCsiHandler({final:"K"},R=>this.eraseInLine(R,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},R=>this.eraseInLine(R,!0)),this._parser.registerCsiHandler({final:"L"},R=>this.insertLines(R)),this._parser.registerCsiHandler({final:"M"},R=>this.deleteLines(R)),this._parser.registerCsiHandler({final:"P"},R=>this.deleteChars(R)),this._parser.registerCsiHandler({final:"S"},R=>this.scrollUp(R)),this._parser.registerCsiHandler({final:"T"},R=>this.scrollDown(R)),this._parser.registerCsiHandler({final:"X"},R=>this.eraseChars(R)),this._parser.registerCsiHandler({final:"Z"},R=>this.cursorBackwardTab(R)),this._parser.registerCsiHandler({final:"`"},R=>this.charPosAbsolute(R)),this._parser.registerCsiHandler({final:"a"},R=>this.hPositionRelative(R)),this._parser.registerCsiHandler({final:"b"},R=>this.repeatPrecedingCharacter(R)),this._parser.registerCsiHandler({final:"c"},R=>this.sendDeviceAttributesPrimary(R)),this._parser.registerCsiHandler({prefix:">",final:"c"},R=>this.sendDeviceAttributesSecondary(R)),this._parser.registerCsiHandler({final:"d"},R=>this.linePosAbsolute(R)),this._parser.registerCsiHandler({final:"e"},R=>this.vPositionRelative(R)),this._parser.registerCsiHandler({final:"f"},R=>this.hVPosition(R)),this._parser.registerCsiHandler({final:"g"},R=>this.tabClear(R)),this._parser.registerCsiHandler({final:"h"},R=>this.setMode(R)),this._parser.registerCsiHandler({prefix:"?",final:"h"},R=>this.setModePrivate(R)),this._parser.registerCsiHandler({final:"l"},R=>this.resetMode(R)),this._parser.registerCsiHandler({prefix:"?",final:"l"},R=>this.resetModePrivate(R)),this._parser.registerCsiHandler({final:"m"},R=>this.charAttributes(R)),this._parser.registerCsiHandler({final:"n"},R=>this.deviceStatus(R)),this._parser.registerCsiHandler({prefix:"?",final:"n"},R=>this.deviceStatusPrivate(R)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},R=>this.softReset(R)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},R=>this.setCursorStyle(R)),this._parser.registerCsiHandler({final:"r"},R=>this.setScrollRegion(R)),this._parser.registerCsiHandler({final:"s"},R=>this.saveCursor(R)),this._parser.registerCsiHandler({final:"t"},R=>this.windowOptions(R)),this._parser.registerCsiHandler({final:"u"},R=>this.restoreCursor(R)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},R=>this.insertColumns(R)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},R=>this.deleteColumns(R)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},R=>this.selectProtected(R)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},R=>this.requestMode(R,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},R=>this.requestMode(R,!1)),this._parser.setExecuteHandler(p.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(p.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(p.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(p.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(p.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(p.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(p.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(p.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(p.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(p.C1.IND,()=>this.index()),this._parser.setExecuteHandler(p.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(p.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new C.OscHandler(R=>(this.setTitle(R),this.setIconName(R),!0))),this._parser.registerOscHandler(1,new C.OscHandler(R=>this.setIconName(R))),this._parser.registerOscHandler(2,new C.OscHandler(R=>this.setTitle(R))),this._parser.registerOscHandler(4,new C.OscHandler(R=>this.setOrReportIndexedColor(R))),this._parser.registerOscHandler(8,new C.OscHandler(R=>this.setHyperlink(R))),this._parser.registerOscHandler(10,new C.OscHandler(R=>this.setOrReportFgColor(R))),this._parser.registerOscHandler(11,new C.OscHandler(R=>this.setOrReportBgColor(R))),this._parser.registerOscHandler(12,new C.OscHandler(R=>this.setOrReportCursorColor(R))),this._parser.registerOscHandler(104,new C.OscHandler(R=>this.restoreIndexedColor(R))),this._parser.registerOscHandler(110,new C.OscHandler(R=>this.restoreFgColor(R))),this._parser.registerOscHandler(111,new C.OscHandler(R=>this.restoreBgColor(R))),this._parser.registerOscHandler(112,new C.OscHandler(R=>this.restoreCursorColor(R))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const R in y.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:R},()=>this.selectCharset("("+R)),this._parser.registerEscHandler({intermediates:")",final:R},()=>this.selectCharset(")"+R)),this._parser.registerEscHandler({intermediates:"*",final:R},()=>this.selectCharset("*"+R)),this._parser.registerEscHandler({intermediates:"+",final:R},()=>this.selectCharset("+"+R)),this._parser.registerEscHandler({intermediates:"-",final:R},()=>this.selectCharset("-"+R)),this._parser.registerEscHandler({intermediates:".",final:R},()=>this.selectCharset("."+R)),this._parser.registerEscHandler({intermediates:"/",final:R},()=>this.selectCharset("/"+R));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(R=>(this._logService.error("Parsing error: ",R),R)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new k.DcsHandler((R,G)=>this.requestStatusString(R,G)))}_preserveStack(A,z,F,j){this._parseStack.paused=!0,this._parseStack.cursorStartX=A,this._parseStack.cursorStartY=z,this._parseStack.decodedLength=F,this._parseStack.position=j}_logSlowResolvingAsync(A){this._logService.logLevel<=$.LogLevelEnum.WARN&&Promise.race([A,new Promise((z,F)=>setTimeout(()=>F("#SLOW_TIMEOUT"),5e3))]).catch(z=>{if(z!=="#SLOW_TIMEOUT")throw z;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(A,z){let F,j=this._activeBuffer.x,q=this._activeBuffer.y,U=0;const Y=this._parseStack.paused;if(Y){if(F=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,z))return this._logSlowResolvingAsync(F),F;j=this._parseStack.cursorStartX,q=this._parseStack.cursorStartY,this._parseStack.paused=!1,A.length>P&&(U=this._parseStack.position+P)}if(this._logService.logLevel<=$.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof A=="string"?` "${A}"`:` "${Array.prototype.map.call(A,V=>String.fromCharCode(V)).join("")}"`),typeof A=="string"?A.split("").map(V=>V.charCodeAt(0)):A),this._parseBuffer.length<A.length&&this._parseBuffer.length<P&&(this._parseBuffer=new Uint32Array(Math.min(A.length,P))),Y||this._dirtyRowTracker.clearRange(),A.length>P)for(let V=U;V<A.length;V+=P){const X=V+P<A.length?V+P:A.length,R=typeof A=="string"?this._stringDecoder.decode(A.substring(V,X),this._parseBuffer):this._utf8Decoder.decode(A.subarray(V,X),this._parseBuffer);if(F=this._parser.parse(this._parseBuffer,R))return this._preserveStack(j,q,R,V),this._logSlowResolvingAsync(F),F}else if(!Y){const V=typeof A=="string"?this._stringDecoder.decode(A,this._parseBuffer):this._utf8Decoder.decode(A,this._parseBuffer);if(F=this._parser.parse(this._parseBuffer,V))return this._preserveStack(j,q,V,0),this._logSlowResolvingAsync(F),F}this._activeBuffer.x===j&&this._activeBuffer.y===q||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(A,z,F){let j,q;const U=this._charsetService.charset,Y=this._optionsService.rawOptions.screenReaderMode,V=this._bufferService.cols,X=this._coreService.decPrivateModes.wraparound,R=this._coreService.modes.insertMode,G=this._curAttrData;let te=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&F-z>0&&te.getWidth(this._activeBuffer.x-1)===2&&te.setCellFromCodePoint(this._activeBuffer.x-1,0,1,G.fg,G.bg,G.extended);for(let ae=z;ae<F;++ae){if(j=A[ae],q=this._unicodeService.wcwidth(j),j<127&&U){const Q=U[String.fromCharCode(j)];Q&&(j=Q.charCodeAt(0))}if(Y&&this._onA11yChar.fire((0,b.stringFromCodePoint)(j)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),q||!this._activeBuffer.x){if(this._activeBuffer.x+q-1>=V){if(X){for(;this._activeBuffer.x<V;)te.setCellFromCodePoint(this._activeBuffer.x++,0,1,G.fg,G.bg,G.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),te=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=V-1,q===2)continue}if(R&&(te.insertCells(this._activeBuffer.x,q,this._activeBuffer.getNullCell(G),G),te.getWidth(V-1)===2&&te.setCellFromCodePoint(V-1,u.NULL_CELL_CODE,u.NULL_CELL_WIDTH,G.fg,G.bg,G.extended)),te.setCellFromCodePoint(this._activeBuffer.x++,j,q,G.fg,G.bg,G.extended),q>0)for(;--q;)te.setCellFromCodePoint(this._activeBuffer.x++,0,0,G.fg,G.bg,G.extended)}else te.getWidth(this._activeBuffer.x-1)?te.addCodepointToCell(this._activeBuffer.x-1,j):te.addCodepointToCell(this._activeBuffer.x-2,j)}F-z>0&&(te.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<V&&F-z>0&&te.getWidth(this._activeBuffer.x)===0&&!te.hasContent(this._activeBuffer.x)&&te.setCellFromCodePoint(this._activeBuffer.x,0,1,G.fg,G.bg,G.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(A,z){return A.final!=="t"||A.prefix||A.intermediates?this._parser.registerCsiHandler(A,z):this._parser.registerCsiHandler(A,F=>!I(F.params[0],this._optionsService.rawOptions.windowOptions)||z(F))}registerDcsHandler(A,z){return this._parser.registerDcsHandler(A,new k.DcsHandler(z))}registerEscHandler(A,z){return this._parser.registerEscHandler(A,z)}registerOscHandler(A,z){return this._parser.registerOscHandler(A,new C.OscHandler(z))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var A;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||A===void 0)&&A.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);z.hasWidth(this._activeBuffer.x)&&!z.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const A=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-A),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(A=this._bufferService.cols-1){this._activeBuffer.x=Math.min(A,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(A,z){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=A,this._activeBuffer.y=this._activeBuffer.scrollTop+z):(this._activeBuffer.x=A,this._activeBuffer.y=z),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(A,z){this._restrictCursor(),this._setCursor(this._activeBuffer.x+A,this._activeBuffer.y+z)}cursorUp(A){const z=this._activeBuffer.y-this._activeBuffer.scrollTop;return z>=0?this._moveCursor(0,-Math.min(z,A.params[0]||1)):this._moveCursor(0,-(A.params[0]||1)),!0}cursorDown(A){const z=this._activeBuffer.scrollBottom-this._activeBuffer.y;return z>=0?this._moveCursor(0,Math.min(z,A.params[0]||1)):this._moveCursor(0,A.params[0]||1),!0}cursorForward(A){return this._moveCursor(A.params[0]||1,0),!0}cursorBackward(A){return this._moveCursor(-(A.params[0]||1),0),!0}cursorNextLine(A){return this.cursorDown(A),this._activeBuffer.x=0,!0}cursorPrecedingLine(A){return this.cursorUp(A),this._activeBuffer.x=0,!0}cursorCharAbsolute(A){return this._setCursor((A.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(A){return this._setCursor(A.length>=2?(A.params[1]||1)-1:0,(A.params[0]||1)-1),!0}charPosAbsolute(A){return this._setCursor((A.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(A){return this._moveCursor(A.params[0]||1,0),!0}linePosAbsolute(A){return this._setCursor(this._activeBuffer.x,(A.params[0]||1)-1),!0}vPositionRelative(A){return this._moveCursor(0,A.params[0]||1),!0}hVPosition(A){return this.cursorPosition(A),!0}tabClear(A){const z=A.params[0];return z===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:z===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(A){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let z=A.params[0]||1;for(;z--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(A){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let z=A.params[0]||1;for(;z--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(A){const z=A.params[0];return z===1&&(this._curAttrData.bg|=536870912),z!==2&&z!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(A,z,F,j=!1,q=!1){const U=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);U.replaceCells(z,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),q),j&&(U.isWrapped=!1)}_resetBufferLine(A,z=!1){const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);F&&(F.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),z),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+A),F.isWrapped=!1)}eraseInDisplay(A,z=!1){let F;switch(this._restrictCursor(this._bufferService.cols),A.params[0]){case 0:for(F=this._activeBuffer.y,this._dirtyRowTracker.markDirty(F),this._eraseInBufferLine(F++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,z);F<this._bufferService.rows;F++)this._resetBufferLine(F,z);this._dirtyRowTracker.markDirty(F);break;case 1:for(F=this._activeBuffer.y,this._dirtyRowTracker.markDirty(F),this._eraseInBufferLine(F,0,this._activeBuffer.x+1,!0,z),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(F+1).isWrapped=!1);F--;)this._resetBufferLine(F,z);this._dirtyRowTracker.markDirty(0);break;case 2:for(F=this._bufferService.rows,this._dirtyRowTracker.markDirty(F-1);F--;)this._resetBufferLine(F,z);this._dirtyRowTracker.markDirty(0);break;case 3:const j=this._activeBuffer.lines.length-this._bufferService.rows;j>0&&(this._activeBuffer.lines.trimStart(j),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-j,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-j,0),this._onScroll.fire(0))}return!0}eraseInLine(A,z=!1){switch(this._restrictCursor(this._bufferService.cols),A.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,z);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,z);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,z)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(A){this._restrictCursor();let z=A.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=this._activeBuffer.ybase+this._activeBuffer.y,j=this._bufferService.rows-1-this._activeBuffer.scrollBottom,q=this._bufferService.rows-1+this._activeBuffer.ybase-j+1;for(;z--;)this._activeBuffer.lines.splice(q-1,1),this._activeBuffer.lines.splice(F,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(A){this._restrictCursor();let z=A.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=this._activeBuffer.ybase+this._activeBuffer.y;let j;for(j=this._bufferService.rows-1-this._activeBuffer.scrollBottom,j=this._bufferService.rows-1+this._activeBuffer.ybase-j;z--;)this._activeBuffer.lines.splice(F,1),this._activeBuffer.lines.splice(j,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(A){this._restrictCursor();const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return z&&(z.insertCells(this._activeBuffer.x,A.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(A){this._restrictCursor();const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return z&&(z.deleteCells(this._activeBuffer.x,A.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(A){let z=A.params[0]||1;for(;z--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(A){let z=A.params[0]||1;for(;z--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(o.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const z=A.params[0]||1;for(let F=this._activeBuffer.scrollTop;F<=this._activeBuffer.scrollBottom;++F){const j=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);j.deleteCells(0,z,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),j.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const z=A.params[0]||1;for(let F=this._activeBuffer.scrollTop;F<=this._activeBuffer.scrollBottom;++F){const j=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);j.insertCells(0,z,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),j.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const z=A.params[0]||1;for(let F=this._activeBuffer.scrollTop;F<=this._activeBuffer.scrollBottom;++F){const j=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);j.insertCells(this._activeBuffer.x,z,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),j.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const z=A.params[0]||1;for(let F=this._activeBuffer.scrollTop;F<=this._activeBuffer.scrollBottom;++F){const j=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);j.deleteCells(this._activeBuffer.x,z,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),j.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(A){this._restrictCursor();const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return z&&(z.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(A.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(A){if(!this._parser.precedingCodepoint)return!0;const z=A.params[0]||1,F=new Uint32Array(z);for(let j=0;j<z;++j)F[j]=this._parser.precedingCodepoint;return this.print(F,0,F.length),!0}sendDeviceAttributesPrimary(A){return A.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(p.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(p.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(A){return A.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(p.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(p.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(A.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(p.C0.ESC+"[>83;40003;0c")),!0}_is(A){return(this._optionsService.rawOptions.termName+"").indexOf(A)===0}setMode(A){for(let z=0;z<A.length;z++)switch(A.params[z]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(A){for(let z=0;z<A.length;z++)switch(A.params[z]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,y.DEFAULT_CHARSET),this._charsetService.setgCharset(1,y.DEFAULT_CHARSET),this._charsetService.setgCharset(2,y.DEFAULT_CHARSET),this._charsetService.setgCharset(3,y.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(A){for(let z=0;z<A.length;z++)switch(A.params[z]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(A){for(let z=0;z<A.length;z++)switch(A.params[z]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),A.params[z]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(A,z){const F=this._coreService.decPrivateModes,{activeProtocol:j,activeEncoding:q}=this._coreMouseService,U=this._coreService,{buffers:Y,cols:V}=this._bufferService,{active:X,alt:R}=Y,G=this._optionsService.rawOptions,te=ne=>ne?1:2,ae=A.params[0];return Q=ae,Z=z?ae===2?4:ae===4?te(U.modes.insertMode):ae===12?3:ae===20?te(G.convertEol):0:ae===1?te(F.applicationCursorKeys):ae===3?G.windowOptions.setWinLines?V===80?2:V===132?1:0:0:ae===6?te(F.origin):ae===7?te(F.wraparound):ae===8?3:ae===9?te(j==="X10"):ae===12?te(G.cursorBlink):ae===25?te(!U.isCursorHidden):ae===45?te(F.reverseWraparound):ae===66?te(F.applicationKeypad):ae===67?4:ae===1e3?te(j==="VT200"):ae===1002?te(j==="DRAG"):ae===1003?te(j==="ANY"):ae===1004?te(F.sendFocus):ae===1005?4:ae===1006?te(q==="SGR"):ae===1015?4:ae===1016?te(q==="SGR_PIXELS"):ae===1048?1:ae===47||ae===1047||ae===1049?te(X===R):ae===2004?te(F.bracketedPasteMode):0,U.triggerDataEvent(`${p.C0.ESC}[${z?"":"?"}${Q};${Z}$y`),!0;var Q,Z}_updateAttrColor(A,z,F,j,q){return z===2?(A|=50331648,A&=-16777216,A|=f.AttributeData.fromColorRGB([F,j,q])):z===5&&(A&=-50331904,A|=33554432|255&F),A}_extractColor(A,z,F){const j=[0,0,-1,0,0,0];let q=0,U=0;do{if(j[U+q]=A.params[z+U],A.hasSubParams(z+U)){const Y=A.getSubParams(z+U);let V=0;do j[1]===5&&(q=1),j[U+V+1+q]=Y[V];while(++V<Y.length&&V+U+1+q<j.length);break}if(j[1]===5&&U+q>=2||j[1]===2&&U+q>=5)break;j[1]&&(q=1)}while(++U+z<A.length&&U+q<j.length);for(let Y=2;Y<j.length;++Y)j[Y]===-1&&(j[Y]=0);switch(j[0]){case 38:F.fg=this._updateAttrColor(F.fg,j[1],j[3],j[4],j[5]);break;case 48:F.bg=this._updateAttrColor(F.bg,j[1],j[3],j[4],j[5]);break;case 58:F.extended=F.extended.clone(),F.extended.underlineColor=this._updateAttrColor(F.extended.underlineColor,j[1],j[3],j[4],j[5])}return U}_processUnderline(A,z){z.extended=z.extended.clone(),(!~A||A>5)&&(A=1),z.extended.underlineStyle=A,z.fg|=268435456,A===0&&(z.fg&=-268435457),z.updateExtended()}_processSGR0(A){A.fg=o.DEFAULT_ATTR_DATA.fg,A.bg=o.DEFAULT_ATTR_DATA.bg,A.extended=A.extended.clone(),A.extended.underlineStyle=0,A.extended.underlineColor&=-67108864,A.updateExtended()}charAttributes(A){if(A.length===1&&A.params[0]===0)return this._processSGR0(this._curAttrData),!0;const z=A.length;let F;const j=this._curAttrData;for(let q=0;q<z;q++)F=A.params[q],F>=30&&F<=37?(j.fg&=-50331904,j.fg|=16777216|F-30):F>=40&&F<=47?(j.bg&=-50331904,j.bg|=16777216|F-40):F>=90&&F<=97?(j.fg&=-50331904,j.fg|=16777224|F-90):F>=100&&F<=107?(j.bg&=-50331904,j.bg|=16777224|F-100):F===0?this._processSGR0(j):F===1?j.fg|=134217728:F===3?j.bg|=67108864:F===4?(j.fg|=268435456,this._processUnderline(A.hasSubParams(q)?A.getSubParams(q)[0]:1,j)):F===5?j.fg|=536870912:F===7?j.fg|=67108864:F===8?j.fg|=1073741824:F===9?j.fg|=2147483648:F===2?j.bg|=134217728:F===21?this._processUnderline(2,j):F===22?(j.fg&=-134217729,j.bg&=-134217729):F===23?j.bg&=-67108865:F===24?(j.fg&=-268435457,this._processUnderline(0,j)):F===25?j.fg&=-536870913:F===27?j.fg&=-67108865:F===28?j.fg&=-1073741825:F===29?j.fg&=2147483647:F===39?(j.fg&=-67108864,j.fg|=16777215&o.DEFAULT_ATTR_DATA.fg):F===49?(j.bg&=-67108864,j.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):F===38||F===48||F===58?q+=this._extractColor(A,q,j):F===53?j.bg|=1073741824:F===55?j.bg&=-1073741825:F===59?(j.extended=j.extended.clone(),j.extended.underlineColor=-1,j.updateExtended()):F===100?(j.fg&=-67108864,j.fg|=16777215&o.DEFAULT_ATTR_DATA.fg,j.bg&=-67108864,j.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",F);return!0}deviceStatus(A){switch(A.params[0]){case 5:this._coreService.triggerDataEvent(`${p.C0.ESC}[0n`);break;case 6:const z=this._activeBuffer.y+1,F=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${p.C0.ESC}[${z};${F}R`)}return!0}deviceStatusPrivate(A){if(A.params[0]===6){const z=this._activeBuffer.y+1,F=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${p.C0.ESC}[?${z};${F}R`)}return!0}softReset(A){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(A){const z=A.params[0]||1;switch(z){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const F=z%2==1;return this._optionsService.options.cursorBlink=F,!0}setScrollRegion(A){const z=A.params[0]||1;let F;return(A.length<2||(F=A.params[1])>this._bufferService.rows||F===0)&&(F=this._bufferService.rows),F>z&&(this._activeBuffer.scrollTop=z-1,this._activeBuffer.scrollBottom=F-1,this._setCursor(0,0)),!0}windowOptions(A){if(!I(A.params[0],this._optionsService.rawOptions.windowOptions))return!0;const z=A.length>1?A.params[1]:0;switch(A.params[0]){case 14:z!==2&&this._onRequestWindowsOptionsReport.fire(D.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(D.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${p.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:z!==0&&z!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),z!==0&&z!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:z!==0&&z!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),z!==0&&z!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(A){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(A){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(A){return this._windowTitle=A,this._onTitleChange.fire(A),!0}setIconName(A){return this._iconName=A,!0}setOrReportIndexedColor(A){const z=[],F=A.split(";");for(;F.length>1;){const j=F.shift(),q=F.shift();if(/^\d+$/.exec(j)){const U=parseInt(j);if(O(U))if(q==="?")z.push({type:0,index:U});else{const Y=(0,S.parseColor)(q);Y&&z.push({type:1,index:U,color:Y})}}}return z.length&&this._onColor.fire(z),!0}setHyperlink(A){const z=A.split(";");return!(z.length<2)&&(z[1]?this._createHyperlink(z[0],z[1]):!z[0]&&this._finishHyperlink())}_createHyperlink(A,z){this._getCurrentLinkId()&&this._finishHyperlink();const F=A.split(":");let j;const q=F.findIndex(U=>U.startsWith("id="));return q!==-1&&(j=F[q].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:j,uri:z}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(A,z){const F=A.split(";");for(let j=0;j<F.length&&!(z>=this._specialColors.length);++j,++z)if(F[j]==="?")this._onColor.fire([{type:0,index:this._specialColors[z]}]);else{const q=(0,S.parseColor)(F[j]);q&&this._onColor.fire([{type:1,index:this._specialColors[z],color:q}])}return!0}setOrReportFgColor(A){return this._setOrReportSpecialColor(A,0)}setOrReportBgColor(A){return this._setOrReportSpecialColor(A,1)}setOrReportCursorColor(A){return this._setOrReportSpecialColor(A,2)}restoreIndexedColor(A){if(!A)return this._onColor.fire([{type:2}]),!0;const z=[],F=A.split(";");for(let j=0;j<F.length;++j)if(/^\d+$/.exec(F[j])){const q=parseInt(F[j]);O(q)&&z.push({type:2,index:q})}return z.length&&this._onColor.fire(z),!0}restoreFgColor(A){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(A){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(A){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,y.DEFAULT_CHARSET),!0}selectCharset(A){return A.length!==2?(this.selectDefaultCharset(),!0):(A[0]==="/"||this._charsetService.setgCharset(L[A[0]],y.CHARSETS[A[1]]||y.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const A=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,A,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(A){return this._charsetService.setgLevel(A),!0}screenAlignmentPattern(){const A=new h.CellData;A.content=4194373,A.fg=this._curAttrData.fg,A.bg=this._curAttrData.bg,this._setCursor(0,0);for(let z=0;z<this._bufferService.rows;++z){const F=this._activeBuffer.ybase+this._activeBuffer.y+z,j=this._activeBuffer.lines.get(F);j&&(j.fill(A),j.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(A,z){const F=this._bufferService.buffer,j=this._optionsService.rawOptions;return(q=>(this._coreService.triggerDataEvent(`${p.C0.ESC}${q}${p.C0.ESC}\\`),!0))(A==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:A==='"p'?'P1$r61;1"p':A==="r"?`P1$r${F.scrollTop+1};${F.scrollBottom+1}r`:A==="m"?"P1$r0m":A===" q"?`P1$r${{block:2,underline:4,bar:6}[j.cursorStyle]-(j.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(A,z){this._dirtyRowTracker.markRangeDirty(A,z)}}i.InputHandler=B;let N=class{constructor(H){this._bufferService=H,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(H){H<this.start?this.start=H:H>this.end&&(this.end=H)}markRangeDirty(H,A){H>A&&(T=H,H=A,A=T),H<this.start&&(this.start=H),A>this.end&&(this.end=A)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function O(H){return 0<=H&&H<256}N=g([v(0,$.IBufferService)],N)},844:(d,i)=>{function n(g){for(const v of g)v.dispose();g.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const g of this._disposables)g.dispose();this._disposables.length=0}register(g){return this._disposables.push(g),g}unregister(g){const v=this._disposables.indexOf(g);v!==-1&&this._disposables.splice(v,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(g){var v;this._isDisposed||g===this._value||((v=this._value)===null||v===void 0||v.dispose(),this._value=g)}clear(){this.value=void 0}dispose(){var g;this._isDisposed=!0,(g=this._value)===null||g===void 0||g.dispose(),this._value=void 0}},i.toDisposable=function(g){return{dispose:g}},i.disposeArray=n,i.getDisposeArrayDisposable=function(g){return{dispose:()=>n(g)}}},1505:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class n{constructor(){this._data={}}set(v,p,y){this._data[v]||(this._data[v]={}),this._data[v][p]=y}get(v,p){return this._data[v]?this._data[v][p]:void 0}clear(){this._data={}}}i.TwoKeyMap=n,i.FourKeyMap=class{constructor(){this._data=new n}set(g,v,p,y,x){this._data.get(g,v)||this._data.set(g,v,new n),this._data.get(g,v).set(p,y,x)}get(g,v,p,y){var x;return(x=this._data.get(g,v))===null||x===void 0?void 0:x.get(p,y)}clear(){this._data.clear()}}},6114:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof navigator>"u";const n=i.isNode?"node":navigator.userAgent,g=i.isNode?"node":navigator.platform;i.isFirefox=n.includes("Firefox"),i.isLegacyEdge=n.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(n),i.getSafariVersion=function(){if(!i.isSafari)return 0;const v=n.match(/Version\/(\d+)/);return v===null||v.length<2?0:parseInt(v[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(g),i.isIpad=g==="iPad",i.isIphone=g==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(g),i.isLinux=g.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(n)},6106:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let n=0;i.SortedList=class{constructor(g){this._getKey=g,this._array=[]}clear(){this._array.length=0}insert(g){this._array.length!==0?(n=this._search(this._getKey(g)),this._array.splice(n,0,g)):this._array.push(g)}delete(g){if(this._array.length===0)return!1;const v=this._getKey(g);if(v===void 0||(n=this._search(v),n===-1)||this._getKey(this._array[n])!==v)return!1;do if(this._array[n]===g)return this._array.splice(n,1),!0;while(++n<this._array.length&&this._getKey(this._array[n])===v);return!1}*getKeyIterator(g){if(this._array.length!==0&&(n=this._search(g),!(n<0||n>=this._array.length)&&this._getKey(this._array[n])===g))do yield this._array[n];while(++n<this._array.length&&this._getKey(this._array[n])===g)}forEachByKey(g,v){if(this._array.length!==0&&(n=this._search(g),!(n<0||n>=this._array.length)&&this._getKey(this._array[n])===g))do v(this._array[n]);while(++n<this._array.length&&this._getKey(this._array[n])===g)}values(){return[...this._array].values()}_search(g){let v=0,p=this._array.length-1;for(;p>=v;){let y=v+p>>1;const x=this._getKey(this._array[y]);if(x>g)p=y-1;else{if(!(x<g)){for(;y>0&&this._getKey(this._array[y-1])===g;)y--;return y}v=y+1}}return v}}},7226:(d,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const g=n(6114);class v{constructor(){this._tasks=[],this._i=0}enqueue(x){this._tasks.push(x),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(x){this._idleCallback=void 0;let M=0,b=0,o=x.timeRemaining(),c=0;for(;this._i<this._tasks.length;){if(M=Date.now(),this._tasks[this._i]()||this._i++,M=Math.max(1,Date.now()-M),b=Math.max(M,b),c=x.timeRemaining(),1.5*b>c)return o-M<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(o-M))}ms`),void this._start();o=c}this.clear()}}class p extends v{_requestCallback(x){return setTimeout(()=>x(this._createDeadline(16)))}_cancelCallback(x){clearTimeout(x)}_createDeadline(x){const M=Date.now()+x;return{timeRemaining:()=>Math.max(0,M-Date.now())}}}i.PriorityTaskQueue=p,i.IdleTaskQueue=!g.isNode&&"requestIdleCallback"in window?class extends v{_requestCallback(y){return requestIdleCallback(y)}_cancelCallback(y){cancelIdleCallback(y)}}:p,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(y){this._queue.clear(),this._queue.enqueue(y)}flush(){this._queue.flush()}}},9282:(d,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;const g=n(643);i.updateWindowsModeWrappedState=function(v){const p=v.buffer.lines.get(v.buffer.ybase+v.buffer.y-1),y=p?.get(v.cols-1),x=v.buffer.lines.get(v.buffer.ybase+v.buffer.y);x&&y&&(x.isWrapped=y[g.CHAR_DATA_CODE_INDEX]!==g.NULL_CELL_CODE&&y[g.CHAR_DATA_CODE_INDEX]!==g.WHITESPACE_CELL_CODE)}},3734:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class n{constructor(){this.fg=0,this.bg=0,this.extended=new g}static toColorRGB(p){return[p>>>16&255,p>>>8&255,255&p]}static fromColorRGB(p){return(255&p[0])<<16|(255&p[1])<<8|255&p[2]}clone(){const p=new n;return p.fg=this.fg,p.bg=this.bg,p.extended=this.extended.clone(),p}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}i.AttributeData=n;class g{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(p){this._ext=p}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(p){this._ext&=-469762049,this._ext|=p<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(p){this._ext&=-67108864,this._ext|=67108863&p}get urlId(){return this._urlId}set urlId(p){this._urlId=p}constructor(p=0,y=0){this._ext=0,this._urlId=0,this._ext=p,this._urlId=y}clone(){return new g(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=g},9092:(d,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;const g=n(6349),v=n(7226),p=n(3734),y=n(8437),x=n(4634),M=n(511),b=n(643),o=n(4863),c=n(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(u,h,f){this._hasScrollback=u,this._optionsService=h,this._bufferService=f,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=y.DEFAULT_ATTR_DATA.clone(),this.savedCharset=c.DEFAULT_CHARSET,this.markers=[],this._nullCell=M.CellData.fromCharData([0,b.NULL_CELL_CHAR,b.NULL_CELL_WIDTH,b.NULL_CELL_CODE]),this._whitespaceCell=M.CellData.fromCharData([0,b.WHITESPACE_CELL_CHAR,b.WHITESPACE_CELL_WIDTH,b.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new v.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new g.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(u){return u?(this._nullCell.fg=u.fg,this._nullCell.bg=u.bg,this._nullCell.extended=u.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new p.ExtendedAttrs),this._nullCell}getWhitespaceCell(u){return u?(this._whitespaceCell.fg=u.fg,this._whitespaceCell.bg=u.bg,this._whitespaceCell.extended=u.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new p.ExtendedAttrs),this._whitespaceCell}getBlankLine(u,h){return new y.BufferLine(this._bufferService.cols,this.getNullCell(u),h)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const u=this.ybase+this.y-this.ydisp;return u>=0&&u<this._rows}_getCorrectBufferLength(u){if(!this._hasScrollback)return u;const h=u+this._optionsService.rawOptions.scrollback;return h>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:h}fillViewportRows(u){if(this.lines.length===0){u===void 0&&(u=y.DEFAULT_ATTR_DATA);let h=this._rows;for(;h--;)this.lines.push(this.getBlankLine(u))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new g.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(u,h){const f=this.getNullCell(y.DEFAULT_ATTR_DATA);let $=0;const C=this._getCorrectBufferLength(h);if(C>this.lines.maxLength&&(this.lines.maxLength=C),this.lines.length>0){if(this._cols<u)for(let S=0;S<this.lines.length;S++)$+=+this.lines.get(S).resize(u,f);let k=0;if(this._rows<h)for(let S=this._rows;S<h;S++)this.lines.length<h+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new y.BufferLine(u,f)):this.ybase>0&&this.lines.length<=this.ybase+this.y+k+1?(this.ybase--,k++,this.ydisp>0&&this.ydisp--):this.lines.push(new y.BufferLine(u,f)));else for(let S=this._rows;S>h;S--)this.lines.length>h+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(C<this.lines.maxLength){const S=this.lines.length-C;S>0&&(this.lines.trimStart(S),this.ybase=Math.max(this.ybase-S,0),this.ydisp=Math.max(this.ydisp-S,0),this.savedY=Math.max(this.savedY-S,0)),this.lines.maxLength=C}this.x=Math.min(this.x,u-1),this.y=Math.min(this.y,h-1),k&&(this.y+=k),this.savedX=Math.min(this.savedX,u-1),this.scrollTop=0}if(this.scrollBottom=h-1,this._isReflowEnabled&&(this._reflow(u,h),this._cols>u))for(let k=0;k<this.lines.length;k++)$+=+this.lines.get(k).resize(u,f);this._cols=u,this._rows=h,this._memoryCleanupQueue.clear(),$>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let u=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,u=!1);let h=0;for(;this._memoryCleanupPosition<this.lines.length;)if(h+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),h>100)return!0;return u}get _isReflowEnabled(){const u=this._optionsService.rawOptions.windowsPty;return u&&u.buildNumber?this._hasScrollback&&u.backend==="conpty"&&u.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(u,h){this._cols!==u&&(u>this._cols?this._reflowLarger(u,h):this._reflowSmaller(u,h))}_reflowLarger(u,h){const f=(0,x.reflowLargerGetLinesToRemove)(this.lines,this._cols,u,this.ybase+this.y,this.getNullCell(y.DEFAULT_ATTR_DATA));if(f.length>0){const $=(0,x.reflowLargerCreateNewLayout)(this.lines,f);(0,x.reflowLargerApplyNewLayout)(this.lines,$.layout),this._reflowLargerAdjustViewport(u,h,$.countRemoved)}}_reflowLargerAdjustViewport(u,h,f){const $=this.getNullCell(y.DEFAULT_ATTR_DATA);let C=f;for(;C-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<h&&this.lines.push(new y.BufferLine(u,$))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-f,0)}_reflowSmaller(u,h){const f=this.getNullCell(y.DEFAULT_ATTR_DATA),$=[];let C=0;for(let k=this.lines.length-1;k>=0;k--){let S=this.lines.get(k);if(!S||!S.isWrapped&&S.getTrimmedLength()<=u)continue;const L=[S];for(;S.isWrapped&&k>0;)S=this.lines.get(--k),L.unshift(S);const P=this.ybase+this.y;if(P>=k&&P<k+L.length)continue;const I=L[L.length-1].getTrimmedLength(),D=(0,x.reflowSmallerGetNewLineLengths)(L,this._cols,u),T=D.length-L.length;let B;B=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+T):Math.max(0,this.lines.length-this.lines.maxLength+T);const N=[];for(let j=0;j<T;j++){const q=this.getBlankLine(y.DEFAULT_ATTR_DATA,!0);N.push(q)}N.length>0&&($.push({start:k+L.length+C,newLines:N}),C+=N.length),L.push(...N);let O=D.length-1,H=D[O];H===0&&(O--,H=D[O]);let A=L.length-T-1,z=I;for(;A>=0;){const j=Math.min(z,H);if(L[O]===void 0)break;if(L[O].copyCellsFrom(L[A],z-j,H-j,j,!0),H-=j,H===0&&(O--,H=D[O]),z-=j,z===0){A--;const q=Math.max(A,0);z=(0,x.getWrappedLineTrimmedLength)(L,q,this._cols)}}for(let j=0;j<L.length;j++)D[j]<u&&L[j].setCell(D[j],f);let F=T-B;for(;F-- >0;)this.ybase===0?this.y<h-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+C)-h&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+T,this.ybase+h-1)}if($.length>0){const k=[],S=[];for(let O=0;O<this.lines.length;O++)S.push(this.lines.get(O));const L=this.lines.length;let P=L-1,I=0,D=$[I];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+C);let T=0;for(let O=Math.min(this.lines.maxLength-1,L+C-1);O>=0;O--)if(D&&D.start>P+T){for(let H=D.newLines.length-1;H>=0;H--)this.lines.set(O--,D.newLines[H]);O++,k.push({index:P+1,amount:D.newLines.length}),T+=D.newLines.length,D=$[++I]}else this.lines.set(O,S[P--]);let B=0;for(let O=k.length-1;O>=0;O--)k[O].index+=B,this.lines.onInsertEmitter.fire(k[O]),B+=k[O].amount;const N=Math.max(0,L+C-this.lines.maxLength);N>0&&this.lines.onTrimEmitter.fire(N)}}translateBufferLineToString(u,h,f=0,$){const C=this.lines.get(u);return C?C.translateToString(h,f,$):""}getWrappedRangeForLine(u){let h=u,f=u;for(;h>0&&this.lines.get(h).isWrapped;)h--;for(;f+1<this.lines.length&&this.lines.get(f+1).isWrapped;)f++;return{first:h,last:f}}setupTabStops(u){for(u!=null?this.tabs[u]||(u=this.prevStop(u)):(this.tabs={},u=0);u<this._cols;u+=this._optionsService.rawOptions.tabStopWidth)this.tabs[u]=!0}prevStop(u){for(u==null&&(u=this.x);!this.tabs[--u]&&u>0;);return u>=this._cols?this._cols-1:u<0?0:u}nextStop(u){for(u==null&&(u=this.x);!this.tabs[++u]&&u<this._cols;);return u>=this._cols?this._cols-1:u<0?0:u}clearMarkers(u){this._isClearing=!0;for(let h=0;h<this.markers.length;h++)this.markers[h].line===u&&(this.markers[h].dispose(),this.markers.splice(h--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let u=0;u<this.markers.length;u++)this.markers[u].dispose(),this.markers.splice(u--,1);this._isClearing=!1}addMarker(u){const h=new o.Marker(u);return this.markers.push(h),h.register(this.lines.onTrim(f=>{h.line-=f,h.line<0&&h.dispose()})),h.register(this.lines.onInsert(f=>{h.line>=f.index&&(h.line+=f.amount)})),h.register(this.lines.onDelete(f=>{h.line>=f.index&&h.line<f.index+f.amount&&h.dispose(),h.line>f.index&&(h.line-=f.amount)})),h.register(h.onDispose(()=>this._removeMarker(h))),h}_removeMarker(u){this._isClearing||this.markers.splice(this.markers.indexOf(u),1)}}},8437:(d,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;const g=n(3734),v=n(511),p=n(643),y=n(482);i.DEFAULT_ATTR_DATA=Object.freeze(new g.AttributeData);let x=0;class M{constructor(o,c,u=!1){this.isWrapped=u,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*o);const h=c||v.CellData.fromCharData([0,p.NULL_CELL_CHAR,p.NULL_CELL_WIDTH,p.NULL_CELL_CODE]);for(let f=0;f<o;++f)this.setCell(f,h);this.length=o}get(o){const c=this._data[3*o+0],u=2097151&c;return[this._data[3*o+1],2097152&c?this._combined[o]:u?(0,y.stringFromCodePoint)(u):"",c>>22,2097152&c?this._combined[o].charCodeAt(this._combined[o].length-1):u]}set(o,c){this._data[3*o+1]=c[p.CHAR_DATA_ATTR_INDEX],c[p.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[o]=c[1],this._data[3*o+0]=2097152|o|c[p.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*o+0]=c[p.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|c[p.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(o){return this._data[3*o+0]>>22}hasWidth(o){return 12582912&this._data[3*o+0]}getFg(o){return this._data[3*o+1]}getBg(o){return this._data[3*o+2]}hasContent(o){return 4194303&this._data[3*o+0]}getCodePoint(o){const c=this._data[3*o+0];return 2097152&c?this._combined[o].charCodeAt(this._combined[o].length-1):2097151&c}isCombined(o){return 2097152&this._data[3*o+0]}getString(o){const c=this._data[3*o+0];return 2097152&c?this._combined[o]:2097151&c?(0,y.stringFromCodePoint)(2097151&c):""}isProtected(o){return 536870912&this._data[3*o+2]}loadCell(o,c){return x=3*o,c.content=this._data[x+0],c.fg=this._data[x+1],c.bg=this._data[x+2],2097152&c.content&&(c.combinedData=this._combined[o]),268435456&c.bg&&(c.extended=this._extendedAttrs[o]),c}setCell(o,c){2097152&c.content&&(this._combined[o]=c.combinedData),268435456&c.bg&&(this._extendedAttrs[o]=c.extended),this._data[3*o+0]=c.content,this._data[3*o+1]=c.fg,this._data[3*o+2]=c.bg}setCellFromCodePoint(o,c,u,h,f,$){268435456&f&&(this._extendedAttrs[o]=$),this._data[3*o+0]=c|u<<22,this._data[3*o+1]=h,this._data[3*o+2]=f}addCodepointToCell(o,c){let u=this._data[3*o+0];2097152&u?this._combined[o]+=(0,y.stringFromCodePoint)(c):(2097151&u?(this._combined[o]=(0,y.stringFromCodePoint)(2097151&u)+(0,y.stringFromCodePoint)(c),u&=-2097152,u|=2097152):u=c|4194304,this._data[3*o+0]=u)}insertCells(o,c,u,h){if((o%=this.length)&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,h?.fg||0,h?.bg||0,h?.extended||new g.ExtendedAttrs),c<this.length-o){const f=new v.CellData;for(let $=this.length-o-c-1;$>=0;--$)this.setCell(o+c+$,this.loadCell(o+$,f));for(let $=0;$<c;++$)this.setCell(o+$,u)}else for(let f=o;f<this.length;++f)this.setCell(f,u);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,h?.fg||0,h?.bg||0,h?.extended||new g.ExtendedAttrs)}deleteCells(o,c,u,h){if(o%=this.length,c<this.length-o){const f=new v.CellData;for(let $=0;$<this.length-o-c;++$)this.setCell(o+$,this.loadCell(o+c+$,f));for(let $=this.length-c;$<this.length;++$)this.setCell($,u)}else for(let f=o;f<this.length;++f)this.setCell(f,u);o&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,h?.fg||0,h?.bg||0,h?.extended||new g.ExtendedAttrs),this.getWidth(o)!==0||this.hasContent(o)||this.setCellFromCodePoint(o,0,1,h?.fg||0,h?.bg||0,h?.extended||new g.ExtendedAttrs)}replaceCells(o,c,u,h,f=!1){if(f)for(o&&this.getWidth(o-1)===2&&!this.isProtected(o-1)&&this.setCellFromCodePoint(o-1,0,1,h?.fg||0,h?.bg||0,h?.extended||new g.ExtendedAttrs),c<this.length&&this.getWidth(c-1)===2&&!this.isProtected(c)&&this.setCellFromCodePoint(c,0,1,h?.fg||0,h?.bg||0,h?.extended||new g.ExtendedAttrs);o<c&&o<this.length;)this.isProtected(o)||this.setCell(o,u),o++;else for(o&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,h?.fg||0,h?.bg||0,h?.extended||new g.ExtendedAttrs),c<this.length&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c,0,1,h?.fg||0,h?.bg||0,h?.extended||new g.ExtendedAttrs);o<c&&o<this.length;)this.setCell(o++,u)}resize(o,c){if(o===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const u=3*o;if(o>this.length){if(this._data.buffer.byteLength>=4*u)this._data=new Uint32Array(this._data.buffer,0,u);else{const h=new Uint32Array(u);h.set(this._data),this._data=h}for(let h=this.length;h<o;++h)this.setCell(h,c)}else{this._data=this._data.subarray(0,u);const h=Object.keys(this._combined);for(let $=0;$<h.length;$++){const C=parseInt(h[$],10);C>=o&&delete this._combined[C]}const f=Object.keys(this._extendedAttrs);for(let $=0;$<f.length;$++){const C=parseInt(f[$],10);C>=o&&delete this._extendedAttrs[C]}}return this.length=o,4*u*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const o=new Uint32Array(this._data.length);return o.set(this._data),this._data=o,1}return 0}fill(o,c=!1){if(c)for(let u=0;u<this.length;++u)this.isProtected(u)||this.setCell(u,o);else{this._combined={},this._extendedAttrs={};for(let u=0;u<this.length;++u)this.setCell(u,o)}}copyFrom(o){this.length!==o.length?this._data=new Uint32Array(o._data):this._data.set(o._data),this.length=o.length,this._combined={};for(const c in o._combined)this._combined[c]=o._combined[c];this._extendedAttrs={};for(const c in o._extendedAttrs)this._extendedAttrs[c]=o._extendedAttrs[c];this.isWrapped=o.isWrapped}clone(){const o=new M(0);o._data=new Uint32Array(this._data),o.length=this.length;for(const c in this._combined)o._combined[c]=this._combined[c];for(const c in this._extendedAttrs)o._extendedAttrs[c]=this._extendedAttrs[c];return o.isWrapped=this.isWrapped,o}getTrimmedLength(){for(let o=this.length-1;o>=0;--o)if(4194303&this._data[3*o+0])return o+(this._data[3*o+0]>>22);return 0}getNoBgTrimmedLength(){for(let o=this.length-1;o>=0;--o)if(4194303&this._data[3*o+0]||50331648&this._data[3*o+2])return o+(this._data[3*o+0]>>22);return 0}copyCellsFrom(o,c,u,h,f){const $=o._data;if(f)for(let k=h-1;k>=0;k--){for(let S=0;S<3;S++)this._data[3*(u+k)+S]=$[3*(c+k)+S];268435456&$[3*(c+k)+2]&&(this._extendedAttrs[u+k]=o._extendedAttrs[c+k])}else for(let k=0;k<h;k++){for(let S=0;S<3;S++)this._data[3*(u+k)+S]=$[3*(c+k)+S];268435456&$[3*(c+k)+2]&&(this._extendedAttrs[u+k]=o._extendedAttrs[c+k])}const C=Object.keys(o._combined);for(let k=0;k<C.length;k++){const S=parseInt(C[k],10);S>=c&&(this._combined[S-c+u]=o._combined[S])}}translateToString(o=!1,c=0,u=this.length){o&&(u=Math.min(u,this.getTrimmedLength()));let h="";for(;c<u;){const f=this._data[3*c+0],$=2097151&f;h+=2097152&f?this._combined[c]:$?(0,y.stringFromCodePoint)($):p.WHITESPACE_CELL_CHAR,c+=f>>22||1}return h}}i.BufferLine=M},4841:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(n,g){if(n.start.y>n.end.y)throw new Error(`Buffer range end (${n.end.x}, ${n.end.y}) cannot be before start (${n.start.x}, ${n.start.y})`);return g*(n.end.y-n.start.y)+(n.end.x-n.start.x+1)}},4634:(d,i)=>{function n(g,v,p){if(v===g.length-1)return g[v].getTrimmedLength();const y=!g[v].hasContent(p-1)&&g[v].getWidth(p-1)===1,x=g[v+1].getWidth(0)===2;return y&&x?p-1:p}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(g,v,p,y,x){const M=[];for(let b=0;b<g.length-1;b++){let o=b,c=g.get(++o);if(!c.isWrapped)continue;const u=[g.get(b)];for(;o<g.length&&c.isWrapped;)u.push(c),c=g.get(++o);if(y>=b&&y<o){b+=u.length-1;continue}let h=0,f=n(u,h,v),$=1,C=0;for(;$<u.length;){const S=n(u,$,v),L=S-C,P=p-f,I=Math.min(L,P);u[h].copyCellsFrom(u[$],C,f,I,!1),f+=I,f===p&&(h++,f=0),C+=I,C===S&&($++,C=0),f===0&&h!==0&&u[h-1].getWidth(p-1)===2&&(u[h].copyCellsFrom(u[h-1],p-1,f++,1,!1),u[h-1].setCell(p-1,x))}u[h].replaceCells(f,p,x);let k=0;for(let S=u.length-1;S>0&&(S>h||u[S].getTrimmedLength()===0);S--)k++;k>0&&(M.push(b+u.length-k),M.push(k)),b+=u.length-1}return M},i.reflowLargerCreateNewLayout=function(g,v){const p=[];let y=0,x=v[y],M=0;for(let b=0;b<g.length;b++)if(x===b){const o=v[++y];g.onDeleteEmitter.fire({index:b-M,amount:o}),b+=o-1,M+=o,x=v[++y]}else p.push(b);return{layout:p,countRemoved:M}},i.reflowLargerApplyNewLayout=function(g,v){const p=[];for(let y=0;y<v.length;y++)p.push(g.get(v[y]));for(let y=0;y<p.length;y++)g.set(y,p[y]);g.length=v.length},i.reflowSmallerGetNewLineLengths=function(g,v,p){const y=[],x=g.map((c,u)=>n(g,u,v)).reduce((c,u)=>c+u);let M=0,b=0,o=0;for(;o<x;){if(x-o<p){y.push(x-o);break}M+=p;const c=n(g,b,v);M>c&&(M-=c,b++);const u=g[b].getWidth(M-1)===2;u&&M--;const h=u?p-1:p;y.push(h),o+=h}return y},i.getWrappedLineTrimmedLength=n},5295:(d,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;const g=n(8460),v=n(844),p=n(9092);class y extends v.Disposable{constructor(M,b){super(),this._optionsService=M,this._bufferService=b,this._onBufferActivate=this.register(new g.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new p.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new p.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(M){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(M),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(M,b){this._normal.resize(M,b),this._alt.resize(M,b),this.setupTabStops(M)}setupTabStops(M){this._normal.setupTabStops(M),this._alt.setupTabStops(M)}}i.BufferSet=y},511:(d,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const g=n(482),v=n(643),p=n(3734);class y extends p.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new p.ExtendedAttrs,this.combinedData=""}static fromCharData(M){const b=new y;return b.setFromCharData(M),b}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,g.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(M){this.fg=M[v.CHAR_DATA_ATTR_INDEX],this.bg=0;let b=!1;if(M[v.CHAR_DATA_CHAR_INDEX].length>2)b=!0;else if(M[v.CHAR_DATA_CHAR_INDEX].length===2){const o=M[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=o&&o<=56319){const c=M[v.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=c&&c<=57343?this.content=1024*(o-55296)+c-56320+65536|M[v.CHAR_DATA_WIDTH_INDEX]<<22:b=!0}else b=!0}else this.content=M[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|M[v.CHAR_DATA_WIDTH_INDEX]<<22;b&&(this.combinedData=M[v.CHAR_DATA_CHAR_INDEX],this.content=2097152|M[v.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=y},643:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(d,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;const g=n(8460),v=n(844);class p{get id(){return this._id}constructor(x){this.line=x,this.isDisposed=!1,this._disposables=[],this._id=p._nextId++,this._onDispose=this.register(new g.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,v.disposeArray)(this._disposables),this._disposables.length=0)}register(x){return this._disposables.push(x),x}}i.Marker=p,p._nextId=1},7116:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},i.CHARSETS.A={"#":""},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},i.CHARSETS.C=i.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},i.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},i.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.E=i.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},i.CHARSETS.H=i.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(d,i)=>{var n,g,v;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(p){p.NUL="\0",p.SOH="",p.STX="",p.ETX="",p.EOT="",p.ENQ="",p.ACK="",p.BEL="\x07",p.BS="\b",p.HT="	",p.LF=`
`,p.VT="\v",p.FF="\f",p.CR="\r",p.SO="",p.SI="",p.DLE="",p.DC1="",p.DC2="",p.DC3="",p.DC4="",p.NAK="",p.SYN="",p.ETB="",p.CAN="",p.EM="",p.SUB="",p.ESC="\x1B",p.FS="",p.GS="",p.RS="",p.US="",p.SP=" ",p.DEL=""}(n||(i.C0=n={})),function(p){p.PAD="",p.HOP="",p.BPH="",p.NBH="",p.IND="",p.NEL="",p.SSA="",p.ESA="",p.HTS="",p.HTJ="",p.VTS="",p.PLD="",p.PLU="",p.RI="",p.SS2="",p.SS3="",p.DCS="",p.PU1="",p.PU2="",p.STS="",p.CCH="",p.MW="",p.SPA="",p.EPA="",p.SOS="",p.SGCI="",p.SCI="",p.CSI="",p.ST="",p.OSC="",p.PM="",p.APC=""}(g||(i.C1=g={})),function(p){p.ST=`${n.ESC}\\`}(v||(i.C1_ESCAPED=v={}))},7399:(d,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;const g=n(2584),v={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(p,y,x,M){const b={type:0,cancel:!1,key:void 0},o=(p.shiftKey?1:0)|(p.altKey?2:0)|(p.ctrlKey?4:0)|(p.metaKey?8:0);switch(p.keyCode){case 0:p.key==="UIKeyInputUpArrow"?b.key=y?g.C0.ESC+"OA":g.C0.ESC+"[A":p.key==="UIKeyInputLeftArrow"?b.key=y?g.C0.ESC+"OD":g.C0.ESC+"[D":p.key==="UIKeyInputRightArrow"?b.key=y?g.C0.ESC+"OC":g.C0.ESC+"[C":p.key==="UIKeyInputDownArrow"&&(b.key=y?g.C0.ESC+"OB":g.C0.ESC+"[B");break;case 8:if(p.altKey){b.key=g.C0.ESC+g.C0.DEL;break}b.key=g.C0.DEL;break;case 9:if(p.shiftKey){b.key=g.C0.ESC+"[Z";break}b.key=g.C0.HT,b.cancel=!0;break;case 13:b.key=p.altKey?g.C0.ESC+g.C0.CR:g.C0.CR,b.cancel=!0;break;case 27:b.key=g.C0.ESC,p.altKey&&(b.key=g.C0.ESC+g.C0.ESC),b.cancel=!0;break;case 37:if(p.metaKey)break;o?(b.key=g.C0.ESC+"[1;"+(o+1)+"D",b.key===g.C0.ESC+"[1;3D"&&(b.key=g.C0.ESC+(x?"b":"[1;5D"))):b.key=y?g.C0.ESC+"OD":g.C0.ESC+"[D";break;case 39:if(p.metaKey)break;o?(b.key=g.C0.ESC+"[1;"+(o+1)+"C",b.key===g.C0.ESC+"[1;3C"&&(b.key=g.C0.ESC+(x?"f":"[1;5C"))):b.key=y?g.C0.ESC+"OC":g.C0.ESC+"[C";break;case 38:if(p.metaKey)break;o?(b.key=g.C0.ESC+"[1;"+(o+1)+"A",x||b.key!==g.C0.ESC+"[1;3A"||(b.key=g.C0.ESC+"[1;5A")):b.key=y?g.C0.ESC+"OA":g.C0.ESC+"[A";break;case 40:if(p.metaKey)break;o?(b.key=g.C0.ESC+"[1;"+(o+1)+"B",x||b.key!==g.C0.ESC+"[1;3B"||(b.key=g.C0.ESC+"[1;5B")):b.key=y?g.C0.ESC+"OB":g.C0.ESC+"[B";break;case 45:p.shiftKey||p.ctrlKey||(b.key=g.C0.ESC+"[2~");break;case 46:b.key=o?g.C0.ESC+"[3;"+(o+1)+"~":g.C0.ESC+"[3~";break;case 36:b.key=o?g.C0.ESC+"[1;"+(o+1)+"H":y?g.C0.ESC+"OH":g.C0.ESC+"[H";break;case 35:b.key=o?g.C0.ESC+"[1;"+(o+1)+"F":y?g.C0.ESC+"OF":g.C0.ESC+"[F";break;case 33:p.shiftKey?b.type=2:p.ctrlKey?b.key=g.C0.ESC+"[5;"+(o+1)+"~":b.key=g.C0.ESC+"[5~";break;case 34:p.shiftKey?b.type=3:p.ctrlKey?b.key=g.C0.ESC+"[6;"+(o+1)+"~":b.key=g.C0.ESC+"[6~";break;case 112:b.key=o?g.C0.ESC+"[1;"+(o+1)+"P":g.C0.ESC+"OP";break;case 113:b.key=o?g.C0.ESC+"[1;"+(o+1)+"Q":g.C0.ESC+"OQ";break;case 114:b.key=o?g.C0.ESC+"[1;"+(o+1)+"R":g.C0.ESC+"OR";break;case 115:b.key=o?g.C0.ESC+"[1;"+(o+1)+"S":g.C0.ESC+"OS";break;case 116:b.key=o?g.C0.ESC+"[15;"+(o+1)+"~":g.C0.ESC+"[15~";break;case 117:b.key=o?g.C0.ESC+"[17;"+(o+1)+"~":g.C0.ESC+"[17~";break;case 118:b.key=o?g.C0.ESC+"[18;"+(o+1)+"~":g.C0.ESC+"[18~";break;case 119:b.key=o?g.C0.ESC+"[19;"+(o+1)+"~":g.C0.ESC+"[19~";break;case 120:b.key=o?g.C0.ESC+"[20;"+(o+1)+"~":g.C0.ESC+"[20~";break;case 121:b.key=o?g.C0.ESC+"[21;"+(o+1)+"~":g.C0.ESC+"[21~";break;case 122:b.key=o?g.C0.ESC+"[23;"+(o+1)+"~":g.C0.ESC+"[23~";break;case 123:b.key=o?g.C0.ESC+"[24;"+(o+1)+"~":g.C0.ESC+"[24~";break;default:if(!p.ctrlKey||p.shiftKey||p.altKey||p.metaKey)if(x&&!M||!p.altKey||p.metaKey)!x||p.altKey||p.ctrlKey||p.shiftKey||!p.metaKey?p.key&&!p.ctrlKey&&!p.altKey&&!p.metaKey&&p.keyCode>=48&&p.key.length===1?b.key=p.key:p.key&&p.ctrlKey&&(p.key==="_"&&(b.key=g.C0.US),p.key==="@"&&(b.key=g.C0.NUL)):p.keyCode===65&&(b.type=1);else{const c=v[p.keyCode],u=c?.[p.shiftKey?1:0];if(u)b.key=g.C0.ESC+u;else if(p.keyCode>=65&&p.keyCode<=90){const h=p.ctrlKey?p.keyCode-64:p.keyCode+32;let f=String.fromCharCode(h);p.shiftKey&&(f=f.toUpperCase()),b.key=g.C0.ESC+f}else if(p.keyCode===32)b.key=g.C0.ESC+(p.ctrlKey?g.C0.NUL:" ");else if(p.key==="Dead"&&p.code.startsWith("Key")){let h=p.code.slice(3,4);p.shiftKey||(h=h.toLowerCase()),b.key=g.C0.ESC+h,b.cancel=!0}}else p.keyCode>=65&&p.keyCode<=90?b.key=String.fromCharCode(p.keyCode-64):p.keyCode===32?b.key=g.C0.NUL:p.keyCode>=51&&p.keyCode<=55?b.key=String.fromCharCode(p.keyCode-51+27):p.keyCode===56?b.key=g.C0.DEL:p.keyCode===219?b.key=g.C0.ESC:p.keyCode===220?b.key=g.C0.FS:p.keyCode===221&&(b.key=g.C0.GS)}return b}},482:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(n){return n>65535?(n-=65536,String.fromCharCode(55296+(n>>10))+String.fromCharCode(n%1024+56320)):String.fromCharCode(n)},i.utf32ToString=function(n,g=0,v=n.length){let p="";for(let y=g;y<v;++y){let x=n[y];x>65535?(x-=65536,p+=String.fromCharCode(55296+(x>>10))+String.fromCharCode(x%1024+56320)):p+=String.fromCharCode(x)}return p},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(n,g){const v=n.length;if(!v)return 0;let p=0,y=0;if(this._interim){const x=n.charCodeAt(y++);56320<=x&&x<=57343?g[p++]=1024*(this._interim-55296)+x-56320+65536:(g[p++]=this._interim,g[p++]=x),this._interim=0}for(let x=y;x<v;++x){const M=n.charCodeAt(x);if(55296<=M&&M<=56319){if(++x>=v)return this._interim=M,p;const b=n.charCodeAt(x);56320<=b&&b<=57343?g[p++]=1024*(M-55296)+b-56320+65536:(g[p++]=M,g[p++]=b)}else M!==65279&&(g[p++]=M)}return p}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(n,g){const v=n.length;if(!v)return 0;let p,y,x,M,b=0,o=0,c=0;if(this.interim[0]){let f=!1,$=this.interim[0];$&=(224&$)==192?31:(240&$)==224?15:7;let C,k=0;for(;(C=63&this.interim[++k])&&k<4;)$<<=6,$|=C;const S=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,L=S-k;for(;c<L;){if(c>=v)return 0;if(C=n[c++],(192&C)!=128){c--,f=!0;break}this.interim[k++]=C,$<<=6,$|=63&C}f||(S===2?$<128?c--:g[b++]=$:S===3?$<2048||$>=55296&&$<=57343||$===65279||(g[b++]=$):$<65536||$>1114111||(g[b++]=$)),this.interim.fill(0)}const u=v-4;let h=c;for(;h<v;){for(;!(!(h<u)||128&(p=n[h])||128&(y=n[h+1])||128&(x=n[h+2])||128&(M=n[h+3]));)g[b++]=p,g[b++]=y,g[b++]=x,g[b++]=M,h+=4;if(p=n[h++],p<128)g[b++]=p;else if((224&p)==192){if(h>=v)return this.interim[0]=p,b;if(y=n[h++],(192&y)!=128){h--;continue}if(o=(31&p)<<6|63&y,o<128){h--;continue}g[b++]=o}else if((240&p)==224){if(h>=v)return this.interim[0]=p,b;if(y=n[h++],(192&y)!=128){h--;continue}if(h>=v)return this.interim[0]=p,this.interim[1]=y,b;if(x=n[h++],(192&x)!=128){h--;continue}if(o=(15&p)<<12|(63&y)<<6|63&x,o<2048||o>=55296&&o<=57343||o===65279)continue;g[b++]=o}else if((248&p)==240){if(h>=v)return this.interim[0]=p,b;if(y=n[h++],(192&y)!=128){h--;continue}if(h>=v)return this.interim[0]=p,this.interim[1]=y,b;if(x=n[h++],(192&x)!=128){h--;continue}if(h>=v)return this.interim[0]=p,this.interim[1]=y,this.interim[2]=x,b;if(M=n[h++],(192&M)!=128){h--;continue}if(o=(7&p)<<18|(63&y)<<12|(63&x)<<6|63&M,o<65536||o>1114111)continue;g[b++]=o}}return b}}},225:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;const n=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],g=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let v;i.UnicodeV6=class{constructor(){if(this.version="6",!v){v=new Uint8Array(65536),v.fill(1),v[0]=0,v.fill(0,1,32),v.fill(0,127,160),v.fill(2,4352,4448),v[9001]=2,v[9002]=2,v.fill(2,11904,42192),v[12351]=1,v.fill(2,44032,55204),v.fill(2,63744,64256),v.fill(2,65040,65050),v.fill(2,65072,65136),v.fill(2,65280,65377),v.fill(2,65504,65511);for(let p=0;p<n.length;++p)v.fill(0,n[p][0],n[p][1]+1)}}wcwidth(p){return p<32?0:p<127?1:p<65536?v[p]:function(y,x){let M,b=0,o=x.length-1;if(y<x[0][0]||y>x[o][1])return!1;for(;o>=b;)if(M=b+o>>1,y>x[M][1])b=M+1;else{if(!(y<x[M][0]))return!0;o=M-1}return!1}(p,g)?0:p>=131072&&p<=196605||p>=196608&&p<=262141?2:1}}},5981:(d,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;const g=n(8460),v=n(844);class p extends v.Disposable{constructor(x){super(),this._action=x,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new g.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(x,M){if(M!==void 0&&this._syncCalls>M)return void(this._syncCalls=0);if(this._pendingData+=x.length,this._writeBuffer.push(x),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let b;for(this._isSyncWriting=!0;b=this._writeBuffer.shift();){this._action(b);const o=this._callbacks.shift();o&&o()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(x,M){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=x.length,this._writeBuffer.push(x),this._callbacks.push(M),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=x.length,this._writeBuffer.push(x),this._callbacks.push(M)}_innerWrite(x=0,M=!0){const b=x||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const o=this._writeBuffer[this._bufferOffset],c=this._action(o,M);if(c){const h=f=>Date.now()-b>=12?setTimeout(()=>this._innerWrite(0,f)):this._innerWrite(b,f);return void c.catch(f=>(queueMicrotask(()=>{throw f}),Promise.resolve(!1))).then(h)}const u=this._callbacks[this._bufferOffset];if(u&&u(),this._bufferOffset++,this._pendingData-=o.length,Date.now()-b>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=p},5941:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;const n=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,g=/^[\da-f]+$/;function v(p,y){const x=p.toString(16),M=x.length<2?"0"+x:x;switch(y){case 4:return x[0];case 8:return M;case 12:return(M+M).slice(0,3);default:return M+M}}i.parseColor=function(p){if(!p)return;let y=p.toLowerCase();if(y.indexOf("rgb:")===0){y=y.slice(4);const x=n.exec(y);if(x){const M=x[1]?15:x[4]?255:x[7]?4095:65535;return[Math.round(parseInt(x[1]||x[4]||x[7]||x[10],16)/M*255),Math.round(parseInt(x[2]||x[5]||x[8]||x[11],16)/M*255),Math.round(parseInt(x[3]||x[6]||x[9]||x[12],16)/M*255)]}}else if(y.indexOf("#")===0&&(y=y.slice(1),g.exec(y)&&[3,6,9,12].includes(y.length))){const x=y.length/3,M=[0,0,0];for(let b=0;b<3;++b){const o=parseInt(y.slice(x*b,x*b+x),16);M[b]=x===1?o<<4:x===2?o:x===3?o>>4:o>>8}return M}},i.toRgbString=function(p,y=16){const[x,M,b]=p;return`rgb:${v(x,y)}/${v(M,y)}/${v(b,y)}`}},5770:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(d,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;const g=n(482),v=n(8742),p=n(5770),y=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=y,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=y}registerHandler(M,b){this._handlers[M]===void 0&&(this._handlers[M]=[]);const o=this._handlers[M];return o.push(b),{dispose:()=>{const c=o.indexOf(b);c!==-1&&o.splice(c,1)}}}clearHandler(M){this._handlers[M]&&delete this._handlers[M]}setHandlerFallback(M){this._handlerFb=M}reset(){if(this._active.length)for(let M=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;M>=0;--M)this._active[M].unhook(!1);this._stack.paused=!1,this._active=y,this._ident=0}hook(M,b){if(this.reset(),this._ident=M,this._active=this._handlers[M]||y,this._active.length)for(let o=this._active.length-1;o>=0;o--)this._active[o].hook(b);else this._handlerFb(this._ident,"HOOK",b)}put(M,b,o){if(this._active.length)for(let c=this._active.length-1;c>=0;c--)this._active[c].put(M,b,o);else this._handlerFb(this._ident,"PUT",(0,g.utf32ToString)(M,b,o))}unhook(M,b=!0){if(this._active.length){let o=!1,c=this._active.length-1,u=!1;if(this._stack.paused&&(c=this._stack.loopPosition-1,o=b,u=this._stack.fallThrough,this._stack.paused=!1),!u&&o===!1){for(;c>=0&&(o=this._active[c].unhook(M),o!==!0);c--)if(o instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=c,this._stack.fallThrough=!1,o;c--}for(;c>=0;c--)if(o=this._active[c].unhook(!1),o instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=c,this._stack.fallThrough=!0,o}else this._handlerFb(this._ident,"UNHOOK",M);this._active=y,this._ident=0}};const x=new v.Params;x.addParam(0),i.DcsHandler=class{constructor(M){this._handler=M,this._data="",this._params=x,this._hitLimit=!1}hook(M){this._params=M.length>1||M.params[0]?M.clone():x,this._data="",this._hitLimit=!1}put(M,b,o){this._hitLimit||(this._data+=(0,g.utf32ToString)(M,b,o),this._data.length>p.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(M){let b=!1;if(this._hitLimit)b=!1;else if(M&&(b=this._handler(this._data,this._params),b instanceof Promise))return b.then(o=>(this._params=x,this._data="",this._hitLimit=!1,o));return this._params=x,this._data="",this._hitLimit=!1,b}}},2015:(d,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;const g=n(844),v=n(8742),p=n(6242),y=n(6351);class x{constructor(c){this.table=new Uint8Array(c)}setDefault(c,u){this.table.fill(c<<4|u)}add(c,u,h,f){this.table[u<<8|c]=h<<4|f}addMany(c,u,h,f){for(let $=0;$<c.length;$++)this.table[u<<8|c[$]]=h<<4|f}}i.TransitionTable=x;const M=160;i.VT500_TRANSITION_TABLE=function(){const o=new x(4095),c=Array.apply(null,Array(256)).map((k,S)=>S),u=(k,S)=>c.slice(k,S),h=u(32,127),f=u(0,24);f.push(25),f.push.apply(f,u(28,32));const $=u(0,14);let C;for(C in o.setDefault(1,0),o.addMany(h,0,2,0),$)o.addMany([24,26,153,154],C,3,0),o.addMany(u(128,144),C,3,0),o.addMany(u(144,152),C,3,0),o.add(156,C,0,0),o.add(27,C,11,1),o.add(157,C,4,8),o.addMany([152,158,159],C,0,7),o.add(155,C,11,3),o.add(144,C,11,9);return o.addMany(f,0,3,0),o.addMany(f,1,3,1),o.add(127,1,0,1),o.addMany(f,8,0,8),o.addMany(f,3,3,3),o.add(127,3,0,3),o.addMany(f,4,3,4),o.add(127,4,0,4),o.addMany(f,6,3,6),o.addMany(f,5,3,5),o.add(127,5,0,5),o.addMany(f,2,3,2),o.add(127,2,0,2),o.add(93,1,4,8),o.addMany(h,8,5,8),o.add(127,8,5,8),o.addMany([156,27,24,26,7],8,6,0),o.addMany(u(28,32),8,0,8),o.addMany([88,94,95],1,0,7),o.addMany(h,7,0,7),o.addMany(f,7,0,7),o.add(156,7,0,0),o.add(127,7,0,7),o.add(91,1,11,3),o.addMany(u(64,127),3,7,0),o.addMany(u(48,60),3,8,4),o.addMany([60,61,62,63],3,9,4),o.addMany(u(48,60),4,8,4),o.addMany(u(64,127),4,7,0),o.addMany([60,61,62,63],4,0,6),o.addMany(u(32,64),6,0,6),o.add(127,6,0,6),o.addMany(u(64,127),6,0,0),o.addMany(u(32,48),3,9,5),o.addMany(u(32,48),5,9,5),o.addMany(u(48,64),5,0,6),o.addMany(u(64,127),5,7,0),o.addMany(u(32,48),4,9,5),o.addMany(u(32,48),1,9,2),o.addMany(u(32,48),2,9,2),o.addMany(u(48,127),2,10,0),o.addMany(u(48,80),1,10,0),o.addMany(u(81,88),1,10,0),o.addMany([89,90,92],1,10,0),o.addMany(u(96,127),1,10,0),o.add(80,1,11,9),o.addMany(f,9,0,9),o.add(127,9,0,9),o.addMany(u(28,32),9,0,9),o.addMany(u(32,48),9,9,12),o.addMany(u(48,60),9,8,10),o.addMany([60,61,62,63],9,9,10),o.addMany(f,11,0,11),o.addMany(u(32,128),11,0,11),o.addMany(u(28,32),11,0,11),o.addMany(f,10,0,10),o.add(127,10,0,10),o.addMany(u(28,32),10,0,10),o.addMany(u(48,60),10,8,10),o.addMany([60,61,62,63],10,0,11),o.addMany(u(32,48),10,9,12),o.addMany(f,12,0,12),o.add(127,12,0,12),o.addMany(u(28,32),12,0,12),o.addMany(u(32,48),12,9,12),o.addMany(u(48,64),12,0,11),o.addMany(u(64,127),12,12,13),o.addMany(u(64,127),10,12,13),o.addMany(u(64,127),9,12,13),o.addMany(f,13,13,13),o.addMany(h,13,13,13),o.add(127,13,0,13),o.addMany([27,156,24,26],13,14,0),o.add(M,0,2,0),o.add(M,8,5,8),o.add(M,6,0,6),o.add(M,11,0,11),o.add(M,13,13,13),o}();class b extends g.Disposable{constructor(c=i.VT500_TRANSITION_TABLE){super(),this._transitions=c,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new v.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(u,h,f)=>{},this._executeHandlerFb=u=>{},this._csiHandlerFb=(u,h)=>{},this._escHandlerFb=u=>{},this._errorHandlerFb=u=>u,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,g.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new p.OscParser),this._dcsParser=this.register(new y.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(c,u=[64,126]){let h=0;if(c.prefix){if(c.prefix.length>1)throw new Error("only one byte as prefix supported");if(h=c.prefix.charCodeAt(0),h&&60>h||h>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(c.intermediates){if(c.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let $=0;$<c.intermediates.length;++$){const C=c.intermediates.charCodeAt($);if(32>C||C>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");h<<=8,h|=C}}if(c.final.length!==1)throw new Error("final must be a single byte");const f=c.final.charCodeAt(0);if(u[0]>f||f>u[1])throw new Error(`final must be in range ${u[0]} .. ${u[1]}`);return h<<=8,h|=f,h}identToString(c){const u=[];for(;c;)u.push(String.fromCharCode(255&c)),c>>=8;return u.reverse().join("")}setPrintHandler(c){this._printHandler=c}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(c,u){const h=this._identifier(c,[48,126]);this._escHandlers[h]===void 0&&(this._escHandlers[h]=[]);const f=this._escHandlers[h];return f.push(u),{dispose:()=>{const $=f.indexOf(u);$!==-1&&f.splice($,1)}}}clearEscHandler(c){this._escHandlers[this._identifier(c,[48,126])]&&delete this._escHandlers[this._identifier(c,[48,126])]}setEscHandlerFallback(c){this._escHandlerFb=c}setExecuteHandler(c,u){this._executeHandlers[c.charCodeAt(0)]=u}clearExecuteHandler(c){this._executeHandlers[c.charCodeAt(0)]&&delete this._executeHandlers[c.charCodeAt(0)]}setExecuteHandlerFallback(c){this._executeHandlerFb=c}registerCsiHandler(c,u){const h=this._identifier(c);this._csiHandlers[h]===void 0&&(this._csiHandlers[h]=[]);const f=this._csiHandlers[h];return f.push(u),{dispose:()=>{const $=f.indexOf(u);$!==-1&&f.splice($,1)}}}clearCsiHandler(c){this._csiHandlers[this._identifier(c)]&&delete this._csiHandlers[this._identifier(c)]}setCsiHandlerFallback(c){this._csiHandlerFb=c}registerDcsHandler(c,u){return this._dcsParser.registerHandler(this._identifier(c),u)}clearDcsHandler(c){this._dcsParser.clearHandler(this._identifier(c))}setDcsHandlerFallback(c){this._dcsParser.setHandlerFallback(c)}registerOscHandler(c,u){return this._oscParser.registerHandler(c,u)}clearOscHandler(c){this._oscParser.clearHandler(c)}setOscHandlerFallback(c){this._oscParser.setHandlerFallback(c)}setErrorHandler(c){this._errorHandler=c}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(c,u,h,f,$){this._parseStack.state=c,this._parseStack.handlers=u,this._parseStack.handlerPos=h,this._parseStack.transition=f,this._parseStack.chunkPos=$}parse(c,u,h){let f,$=0,C=0,k=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,k=this._parseStack.chunkPos+1;else{if(h===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const S=this._parseStack.handlers;let L=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(h===!1&&L>-1){for(;L>=0&&(f=S[L](this._params),f!==!0);L--)if(f instanceof Promise)return this._parseStack.handlerPos=L,f}this._parseStack.handlers=[];break;case 4:if(h===!1&&L>-1){for(;L>=0&&(f=S[L](),f!==!0);L--)if(f instanceof Promise)return this._parseStack.handlerPos=L,f}this._parseStack.handlers=[];break;case 6:if($=c[this._parseStack.chunkPos],f=this._dcsParser.unhook($!==24&&$!==26,h),f)return f;$===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if($=c[this._parseStack.chunkPos],f=this._oscParser.end($!==24&&$!==26,h),f)return f;$===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,k=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let S=k;S<u;++S){switch($=c[S],C=this._transitions.table[this.currentState<<8|($<160?$:M)],C>>4){case 2:for(let T=S+1;;++T){if(T>=u||($=c[T])<32||$>126&&$<M){this._printHandler(c,S,T),S=T-1;break}if(++T>=u||($=c[T])<32||$>126&&$<M){this._printHandler(c,S,T),S=T-1;break}if(++T>=u||($=c[T])<32||$>126&&$<M){this._printHandler(c,S,T),S=T-1;break}if(++T>=u||($=c[T])<32||$>126&&$<M){this._printHandler(c,S,T),S=T-1;break}}break;case 3:this._executeHandlers[$]?this._executeHandlers[$]():this._executeHandlerFb($),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:S,code:$,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const L=this._csiHandlers[this._collect<<8|$];let P=L?L.length-1:-1;for(;P>=0&&(f=L[P](this._params),f!==!0);P--)if(f instanceof Promise)return this._preserveStack(3,L,P,C,S),f;P<0&&this._csiHandlerFb(this._collect<<8|$,this._params),this.precedingCodepoint=0;break;case 8:do switch($){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit($-48)}while(++S<u&&($=c[S])>47&&$<60);S--;break;case 9:this._collect<<=8,this._collect|=$;break;case 10:const I=this._escHandlers[this._collect<<8|$];let D=I?I.length-1:-1;for(;D>=0&&(f=I[D](),f!==!0);D--)if(f instanceof Promise)return this._preserveStack(4,I,D,C,S),f;D<0&&this._escHandlerFb(this._collect<<8|$),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|$,this._params);break;case 13:for(let T=S+1;;++T)if(T>=u||($=c[T])===24||$===26||$===27||$>127&&$<M){this._dcsParser.put(c,S,T),S=T-1;break}break;case 14:if(f=this._dcsParser.unhook($!==24&&$!==26),f)return this._preserveStack(6,[],0,C,S),f;$===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let T=S+1;;T++)if(T>=u||($=c[T])<32||$>127&&$<M){this._oscParser.put(c,S,T),S=T-1;break}break;case 6:if(f=this._oscParser.end($!==24&&$!==26),f)return this._preserveStack(5,[],0,C,S),f;$===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&C}}}i.EscapeSequenceParser=b},6242:(d,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;const g=n(5770),v=n(482),p=[];i.OscParser=class{constructor(){this._state=0,this._active=p,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(y,x){this._handlers[y]===void 0&&(this._handlers[y]=[]);const M=this._handlers[y];return M.push(x),{dispose:()=>{const b=M.indexOf(x);b!==-1&&M.splice(b,1)}}}clearHandler(y){this._handlers[y]&&delete this._handlers[y]}setHandlerFallback(y){this._handlerFb=y}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=p}reset(){if(this._state===2)for(let y=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;y>=0;--y)this._active[y].end(!1);this._stack.paused=!1,this._active=p,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||p,this._active.length)for(let y=this._active.length-1;y>=0;y--)this._active[y].start();else this._handlerFb(this._id,"START")}_put(y,x,M){if(this._active.length)for(let b=this._active.length-1;b>=0;b--)this._active[b].put(y,x,M);else this._handlerFb(this._id,"PUT",(0,v.utf32ToString)(y,x,M))}start(){this.reset(),this._state=1}put(y,x,M){if(this._state!==3){if(this._state===1)for(;x<M;){const b=y[x++];if(b===59){this._state=2,this._start();break}if(b<48||57<b)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+b-48}this._state===2&&M-x>0&&this._put(y,x,M)}}end(y,x=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let M=!1,b=this._active.length-1,o=!1;if(this._stack.paused&&(b=this._stack.loopPosition-1,M=x,o=this._stack.fallThrough,this._stack.paused=!1),!o&&M===!1){for(;b>=0&&(M=this._active[b].end(y),M!==!0);b--)if(M instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=b,this._stack.fallThrough=!1,M;b--}for(;b>=0;b--)if(M=this._active[b].end(!1),M instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=b,this._stack.fallThrough=!0,M}else this._handlerFb(this._id,"END",y);this._active=p,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(y){this._handler=y,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(y,x,M){this._hitLimit||(this._data+=(0,v.utf32ToString)(y,x,M),this._data.length>g.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(y){let x=!1;if(this._hitLimit)x=!1;else if(y&&(x=this._handler(this._data),x instanceof Promise))return x.then(M=>(this._data="",this._hitLimit=!1,M));return this._data="",this._hitLimit=!1,x}}},8742:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;const n=2147483647;class g{static fromArray(p){const y=new g;if(!p.length)return y;for(let x=Array.isArray(p[0])?1:0;x<p.length;++x){const M=p[x];if(Array.isArray(M))for(let b=0;b<M.length;++b)y.addSubParam(M[b]);else y.addParam(M)}return y}constructor(p=32,y=32){if(this.maxLength=p,this.maxSubParamsLength=y,y>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(p),this.length=0,this._subParams=new Int32Array(y),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(p),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const p=new g(this.maxLength,this.maxSubParamsLength);return p.params.set(this.params),p.length=this.length,p._subParams.set(this._subParams),p._subParamsLength=this._subParamsLength,p._subParamsIdx.set(this._subParamsIdx),p._rejectDigits=this._rejectDigits,p._rejectSubDigits=this._rejectSubDigits,p._digitIsSub=this._digitIsSub,p}toArray(){const p=[];for(let y=0;y<this.length;++y){p.push(this.params[y]);const x=this._subParamsIdx[y]>>8,M=255&this._subParamsIdx[y];M-x>0&&p.push(Array.prototype.slice.call(this._subParams,x,M))}return p}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(p){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(p<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=p>n?n:p}}addSubParam(p){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(p<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=p>n?n:p,this._subParamsIdx[this.length-1]++}}hasSubParams(p){return(255&this._subParamsIdx[p])-(this._subParamsIdx[p]>>8)>0}getSubParams(p){const y=this._subParamsIdx[p]>>8,x=255&this._subParamsIdx[p];return x-y>0?this._subParams.subarray(y,x):null}getSubParamsAll(){const p={};for(let y=0;y<this.length;++y){const x=this._subParamsIdx[y]>>8,M=255&this._subParamsIdx[y];M-x>0&&(p[y]=this._subParams.slice(x,M))}return p}addDigit(p){let y;if(this._rejectDigits||!(y=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const x=this._digitIsSub?this._subParams:this.params,M=x[y-1];x[y-1]=~M?Math.min(10*M+p,n):p}}i.Params=g},5741:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let n=this._addons.length-1;n>=0;n--)this._addons[n].instance.dispose()}loadAddon(n,g){const v={instance:g,dispose:g.dispose,isDisposed:!1};this._addons.push(v),g.dispose=()=>this._wrappedAddonDispose(v),g.activate(n)}_wrappedAddonDispose(n){if(n.isDisposed)return;let g=-1;for(let v=0;v<this._addons.length;v++)if(this._addons[v]===n){g=v;break}if(g===-1)throw new Error("Could not dispose an addon that has not been loaded");n.isDisposed=!0,n.dispose.apply(n.instance),this._addons.splice(g,1)}}},8771:(d,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;const g=n(3785),v=n(511);i.BufferApiView=class{constructor(p,y){this._buffer=p,this.type=y}init(p){return this._buffer=p,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(p){const y=this._buffer.lines.get(p);if(y)return new g.BufferLineApiView(y)}getNullCell(){return new v.CellData}}},3785:(d,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;const g=n(511);i.BufferLineApiView=class{constructor(v){this._line=v}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(v,p){if(!(v<0||v>=this._line.length))return p?(this._line.loadCell(v,p),p):this._line.loadCell(v,new g.CellData)}translateToString(v,p,y){return this._line.translateToString(v,p,y)}}},8285:(d,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;const g=n(8771),v=n(8460),p=n(844);class y extends p.Disposable{constructor(M){super(),this._core=M,this._onBufferChange=this.register(new v.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new g.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new g.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=y},7975:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(n){this._core=n}registerCsiHandler(n,g){return this._core.registerCsiHandler(n,v=>g(v.toArray()))}addCsiHandler(n,g){return this.registerCsiHandler(n,g)}registerDcsHandler(n,g){return this._core.registerDcsHandler(n,(v,p)=>g(v,p.toArray()))}addDcsHandler(n,g){return this.registerDcsHandler(n,g)}registerEscHandler(n,g){return this._core.registerEscHandler(n,g)}addEscHandler(n,g){return this.registerEscHandler(n,g)}registerOscHandler(n,g){return this._core.registerOscHandler(n,g)}addOscHandler(n,g){return this.registerOscHandler(n,g)}}},7090:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(n){this._core=n}register(n){this._core.unicodeService.register(n)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(n){this._core.unicodeService.activeVersion=n}}},744:function(d,i,n){var g=this&&this.__decorate||function(o,c,u,h){var f,$=arguments.length,C=$<3?c:h===null?h=Object.getOwnPropertyDescriptor(c,u):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(o,c,u,h);else for(var k=o.length-1;k>=0;k--)(f=o[k])&&(C=($<3?f(C):$>3?f(c,u,C):f(c,u))||C);return $>3&&C&&Object.defineProperty(c,u,C),C},v=this&&this.__param||function(o,c){return function(u,h){c(u,h,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;const p=n(8460),y=n(844),x=n(5295),M=n(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let b=i.BufferService=class extends y.Disposable{get buffer(){return this.buffers.active}constructor(o){super(),this.isUserScrolling=!1,this._onResize=this.register(new p.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new p.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(o.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(o.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new x.BufferSet(o,this))}resize(o,c){this.cols=o,this.rows=c,this.buffers.resize(o,c),this._onResize.fire({cols:o,rows:c})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(o,c=!1){const u=this.buffer;let h;h=this._cachedBlankLine,h&&h.length===this.cols&&h.getFg(0)===o.fg&&h.getBg(0)===o.bg||(h=u.getBlankLine(o,c),this._cachedBlankLine=h),h.isWrapped=c;const f=u.ybase+u.scrollTop,$=u.ybase+u.scrollBottom;if(u.scrollTop===0){const C=u.lines.isFull;$===u.lines.length-1?C?u.lines.recycle().copyFrom(h):u.lines.push(h.clone()):u.lines.splice($+1,0,h.clone()),C?this.isUserScrolling&&(u.ydisp=Math.max(u.ydisp-1,0)):(u.ybase++,this.isUserScrolling||u.ydisp++)}else{const C=$-f+1;u.lines.shiftElements(f+1,C-1,-1),u.lines.set($,h.clone())}this.isUserScrolling||(u.ydisp=u.ybase),this._onScroll.fire(u.ydisp)}scrollLines(o,c,u){const h=this.buffer;if(o<0){if(h.ydisp===0)return;this.isUserScrolling=!0}else o+h.ydisp>=h.ybase&&(this.isUserScrolling=!1);const f=h.ydisp;h.ydisp=Math.max(Math.min(h.ydisp+o,h.ybase),0),f!==h.ydisp&&(c||this._onScroll.fire(h.ydisp))}};i.BufferService=b=g([v(0,M.IOptionsService)],b)},7994:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(n){this.glevel=n,this.charset=this._charsets[n]}setgCharset(n,g){this._charsets[n]=g,this.glevel===n&&(this.charset=g)}}},1753:function(d,i,n){var g=this&&this.__decorate||function(h,f,$,C){var k,S=arguments.length,L=S<3?f:C===null?C=Object.getOwnPropertyDescriptor(f,$):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(h,f,$,C);else for(var P=h.length-1;P>=0;P--)(k=h[P])&&(L=(S<3?k(L):S>3?k(f,$,L):k(f,$))||L);return S>3&&L&&Object.defineProperty(f,$,L),L},v=this&&this.__param||function(h,f){return function($,C){f($,C,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;const p=n(2585),y=n(8460),x=n(844),M={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:h=>h.button!==4&&h.action===1&&(h.ctrl=!1,h.alt=!1,h.shift=!1,!0)},VT200:{events:19,restrict:h=>h.action!==32},DRAG:{events:23,restrict:h=>h.action!==32||h.button!==3},ANY:{events:31,restrict:h=>!0}};function b(h,f){let $=(h.ctrl?16:0)|(h.shift?4:0)|(h.alt?8:0);return h.button===4?($|=64,$|=h.action):($|=3&h.button,4&h.button&&($|=64),8&h.button&&($|=128),h.action===32?$|=32:h.action!==0||f||($|=3)),$}const o=String.fromCharCode,c={DEFAULT:h=>{const f=[b(h,!1)+32,h.col+32,h.row+32];return f[0]>255||f[1]>255||f[2]>255?"":`\x1B[M${o(f[0])}${o(f[1])}${o(f[2])}`},SGR:h=>{const f=h.action===0&&h.button!==4?"m":"M";return`\x1B[<${b(h,!0)};${h.col};${h.row}${f}`},SGR_PIXELS:h=>{const f=h.action===0&&h.button!==4?"m":"M";return`\x1B[<${b(h,!0)};${h.x};${h.y}${f}`}};let u=i.CoreMouseService=class extends x.Disposable{constructor(h,f){super(),this._bufferService=h,this._coreService=f,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new y.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const $ of Object.keys(M))this.addProtocol($,M[$]);for(const $ of Object.keys(c))this.addEncoding($,c[$]);this.reset()}addProtocol(h,f){this._protocols[h]=f}addEncoding(h,f){this._encodings[h]=f}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(h){if(!this._protocols[h])throw new Error(`unknown protocol "${h}"`);this._activeProtocol=h,this._onProtocolChange.fire(this._protocols[h].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(h){if(!this._encodings[h])throw new Error(`unknown encoding "${h}"`);this._activeEncoding=h}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(h){if(h.col<0||h.col>=this._bufferService.cols||h.row<0||h.row>=this._bufferService.rows||h.button===4&&h.action===32||h.button===3&&h.action!==32||h.button!==4&&(h.action===2||h.action===3)||(h.col++,h.row++,h.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,h,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(h))return!1;const f=this._encodings[this._activeEncoding](h);return f&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(f):this._coreService.triggerDataEvent(f,!0)),this._lastEvent=h,!0}explainEvents(h){return{down:!!(1&h),up:!!(2&h),drag:!!(4&h),move:!!(8&h),wheel:!!(16&h)}}_equalEvents(h,f,$){if($){if(h.x!==f.x||h.y!==f.y)return!1}else if(h.col!==f.col||h.row!==f.row)return!1;return h.button===f.button&&h.action===f.action&&h.ctrl===f.ctrl&&h.alt===f.alt&&h.shift===f.shift}};i.CoreMouseService=u=g([v(0,p.IBufferService),v(1,p.ICoreService)],u)},6975:function(d,i,n){var g=this&&this.__decorate||function(u,h,f,$){var C,k=arguments.length,S=k<3?h:$===null?$=Object.getOwnPropertyDescriptor(h,f):$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(u,h,f,$);else for(var L=u.length-1;L>=0;L--)(C=u[L])&&(S=(k<3?C(S):k>3?C(h,f,S):C(h,f))||S);return k>3&&S&&Object.defineProperty(h,f,S),S},v=this&&this.__param||function(u,h){return function(f,$){h(f,$,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;const p=n(1439),y=n(8460),x=n(844),M=n(2585),b=Object.freeze({insertMode:!1}),o=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let c=i.CoreService=class extends x.Disposable{constructor(u,h,f){super(),this._bufferService=u,this._logService=h,this._optionsService=f,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new y.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new y.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new y.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new y.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,p.clone)(b),this.decPrivateModes=(0,p.clone)(o)}reset(){this.modes=(0,p.clone)(b),this.decPrivateModes=(0,p.clone)(o)}triggerDataEvent(u,h=!1){if(this._optionsService.rawOptions.disableStdin)return;const f=this._bufferService.buffer;h&&this._optionsService.rawOptions.scrollOnUserInput&&f.ybase!==f.ydisp&&this._onRequestScrollToBottom.fire(),h&&this._onUserInput.fire(),this._logService.debug(`sending data "${u}"`,()=>u.split("").map($=>$.charCodeAt(0))),this._onData.fire(u)}triggerBinaryEvent(u){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${u}"`,()=>u.split("").map(h=>h.charCodeAt(0))),this._onBinary.fire(u))}};i.CoreService=c=g([v(0,M.IBufferService),v(1,M.ILogService),v(2,M.IOptionsService)],c)},9074:(d,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;const g=n(8055),v=n(8460),p=n(844),y=n(6106);let x=0,M=0;class b extends p.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new y.SortedList(u=>u?.marker.line),this._onDecorationRegistered=this.register(new v.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new v.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,p.toDisposable)(()=>this.reset()))}registerDecoration(u){if(u.marker.isDisposed)return;const h=new o(u);if(h){const f=h.marker.onDispose(()=>h.dispose());h.onDispose(()=>{h&&(this._decorations.delete(h)&&this._onDecorationRemoved.fire(h),f.dispose())}),this._decorations.insert(h),this._onDecorationRegistered.fire(h)}return h}reset(){for(const u of this._decorations.values())u.dispose();this._decorations.clear()}*getDecorationsAtCell(u,h,f){var $,C,k;let S=0,L=0;for(const P of this._decorations.getKeyIterator(h))S=($=P.options.x)!==null&&$!==void 0?$:0,L=S+((C=P.options.width)!==null&&C!==void 0?C:1),u>=S&&u<L&&(!f||((k=P.options.layer)!==null&&k!==void 0?k:"bottom")===f)&&(yield P)}forEachDecorationAtCell(u,h,f,$){this._decorations.forEachByKey(h,C=>{var k,S,L;x=(k=C.options.x)!==null&&k!==void 0?k:0,M=x+((S=C.options.width)!==null&&S!==void 0?S:1),u>=x&&u<M&&(!f||((L=C.options.layer)!==null&&L!==void 0?L:"bottom")===f)&&$(C)})}}i.DecorationService=b;class o extends p.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=g.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=g.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(u){super(),this.options=u,this.onRenderEmitter=this.register(new v.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new v.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=u.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(d,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;const g=n(2585),v=n(8343);class p{constructor(...x){this._entries=new Map;for(const[M,b]of x)this.set(M,b)}set(x,M){const b=this._entries.get(x);return this._entries.set(x,M),b}forEach(x){for(const[M,b]of this._entries.entries())x(M,b)}has(x){return this._entries.has(x)}get(x){return this._entries.get(x)}}i.ServiceCollection=p,i.InstantiationService=class{constructor(){this._services=new p,this._services.set(g.IInstantiationService,this)}setService(y,x){this._services.set(y,x)}getService(y){return this._services.get(y)}createInstance(y,...x){const M=(0,v.getServiceDependencies)(y).sort((c,u)=>c.index-u.index),b=[];for(const c of M){const u=this._services.get(c.id);if(!u)throw new Error(`[createInstance] ${y.name} depends on UNKNOWN service ${c.id}.`);b.push(u)}const o=M.length>0?M[0].index:x.length;if(x.length!==o)throw new Error(`[createInstance] First service dependency of ${y.name} at position ${o+1} conflicts with ${x.length} static arguments`);return new y(...x,...b)}}},7866:function(d,i,n){var g=this&&this.__decorate||function(o,c,u,h){var f,$=arguments.length,C=$<3?c:h===null?h=Object.getOwnPropertyDescriptor(c,u):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(o,c,u,h);else for(var k=o.length-1;k>=0;k--)(f=o[k])&&(C=($<3?f(C):$>3?f(c,u,C):f(c,u))||C);return $>3&&C&&Object.defineProperty(c,u,C),C},v=this&&this.__param||function(o,c){return function(u,h){c(u,h,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const p=n(844),y=n(2585),x={trace:y.LogLevelEnum.TRACE,debug:y.LogLevelEnum.DEBUG,info:y.LogLevelEnum.INFO,warn:y.LogLevelEnum.WARN,error:y.LogLevelEnum.ERROR,off:y.LogLevelEnum.OFF};let M,b=i.LogService=class extends p.Disposable{get logLevel(){return this._logLevel}constructor(o){super(),this._optionsService=o,this._logLevel=y.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),M=this}_updateLogLevel(){this._logLevel=x[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(o){for(let c=0;c<o.length;c++)typeof o[c]=="function"&&(o[c]=o[c]())}_log(o,c,u){this._evalLazyOptionalParams(u),o.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+c,...u)}trace(o,...c){var u,h;this._logLevel<=y.LogLevelEnum.TRACE&&this._log((h=(u=this._optionsService.options.logger)===null||u===void 0?void 0:u.trace.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.log,o,c)}debug(o,...c){var u,h;this._logLevel<=y.LogLevelEnum.DEBUG&&this._log((h=(u=this._optionsService.options.logger)===null||u===void 0?void 0:u.debug.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.log,o,c)}info(o,...c){var u,h;this._logLevel<=y.LogLevelEnum.INFO&&this._log((h=(u=this._optionsService.options.logger)===null||u===void 0?void 0:u.info.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.info,o,c)}warn(o,...c){var u,h;this._logLevel<=y.LogLevelEnum.WARN&&this._log((h=(u=this._optionsService.options.logger)===null||u===void 0?void 0:u.warn.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.warn,o,c)}error(o,...c){var u,h;this._logLevel<=y.LogLevelEnum.ERROR&&this._log((h=(u=this._optionsService.options.logger)===null||u===void 0?void 0:u.error.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.error,o,c)}};i.LogService=b=g([v(0,y.IOptionsService)],b),i.setTraceLogger=function(o){M=o},i.traceCall=function(o,c,u){if(typeof u.value!="function")throw new Error("not supported");const h=u.value;u.value=function(...f){if(M.logLevel!==y.LogLevelEnum.TRACE)return h.apply(this,f);M.trace(`GlyphRenderer#${h.name}(${f.map(C=>JSON.stringify(C)).join(", ")})`);const $=h.apply(this,f);return M.trace(`GlyphRenderer#${h.name} return`,$),$}}},7302:(d,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;const g=n(8460),v=n(844),p=n(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:p.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const y=["normal","bold","100","200","300","400","500","600","700","800","900"];class x extends v.Disposable{constructor(b){super(),this._onOptionChange=this.register(new g.EventEmitter),this.onOptionChange=this._onOptionChange.event;const o=Object.assign({},i.DEFAULT_OPTIONS);for(const c in b)if(c in o)try{const u=b[c];o[c]=this._sanitizeAndValidateOption(c,u)}catch(u){console.error(u)}this.rawOptions=o,this.options=Object.assign({},o),this._setupOptions()}onSpecificOptionChange(b,o){return this.onOptionChange(c=>{c===b&&o(this.rawOptions[b])})}onMultipleOptionChange(b,o){return this.onOptionChange(c=>{b.indexOf(c)!==-1&&o()})}_setupOptions(){const b=c=>{if(!(c in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${c}"`);return this.rawOptions[c]},o=(c,u)=>{if(!(c in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${c}"`);u=this._sanitizeAndValidateOption(c,u),this.rawOptions[c]!==u&&(this.rawOptions[c]=u,this._onOptionChange.fire(c))};for(const c in this.rawOptions){const u={get:b.bind(this,c),set:o.bind(this,c)};Object.defineProperty(this.options,c,u)}}_sanitizeAndValidateOption(b,o){switch(b){case"cursorStyle":if(o||(o=i.DEFAULT_OPTIONS[b]),!function(c){return c==="block"||c==="underline"||c==="bar"}(o))throw new Error(`"${o}" is not a valid value for ${b}`);break;case"wordSeparator":o||(o=i.DEFAULT_OPTIONS[b]);break;case"fontWeight":case"fontWeightBold":if(typeof o=="number"&&1<=o&&o<=1e3)break;o=y.includes(o)?o:i.DEFAULT_OPTIONS[b];break;case"cursorWidth":o=Math.floor(o);case"lineHeight":case"tabStopWidth":if(o<1)throw new Error(`${b} cannot be less than 1, value: ${o}`);break;case"minimumContrastRatio":o=Math.max(1,Math.min(21,Math.round(10*o)/10));break;case"scrollback":if((o=Math.min(o,4294967295))<0)throw new Error(`${b} cannot be less than 0, value: ${o}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(o<=0)throw new Error(`${b} cannot be less than or equal to 0, value: ${o}`);break;case"rows":case"cols":if(!o&&o!==0)throw new Error(`${b} must be numeric, value: ${o}`);break;case"windowsPty":o=o??{}}return o}}i.OptionsService=x},2660:function(d,i,n){var g=this&&this.__decorate||function(x,M,b,o){var c,u=arguments.length,h=u<3?M:o===null?o=Object.getOwnPropertyDescriptor(M,b):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(x,M,b,o);else for(var f=x.length-1;f>=0;f--)(c=x[f])&&(h=(u<3?c(h):u>3?c(M,b,h):c(M,b))||h);return u>3&&h&&Object.defineProperty(M,b,h),h},v=this&&this.__param||function(x,M){return function(b,o){M(b,o,x)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;const p=n(2585);let y=i.OscLinkService=class{constructor(x){this._bufferService=x,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(x){const M=this._bufferService.buffer;if(x.id===void 0){const f=M.addMarker(M.ybase+M.y),$={data:x,id:this._nextId++,lines:[f]};return f.onDispose(()=>this._removeMarkerFromLink($,f)),this._dataByLinkId.set($.id,$),$.id}const b=x,o=this._getEntryIdKey(b),c=this._entriesWithId.get(o);if(c)return this.addLineToLink(c.id,M.ybase+M.y),c.id;const u=M.addMarker(M.ybase+M.y),h={id:this._nextId++,key:this._getEntryIdKey(b),data:b,lines:[u]};return u.onDispose(()=>this._removeMarkerFromLink(h,u)),this._entriesWithId.set(h.key,h),this._dataByLinkId.set(h.id,h),h.id}addLineToLink(x,M){const b=this._dataByLinkId.get(x);if(b&&b.lines.every(o=>o.line!==M)){const o=this._bufferService.buffer.addMarker(M);b.lines.push(o),o.onDispose(()=>this._removeMarkerFromLink(b,o))}}getLinkData(x){var M;return(M=this._dataByLinkId.get(x))===null||M===void 0?void 0:M.data}_getEntryIdKey(x){return`${x.id};;${x.uri}`}_removeMarkerFromLink(x,M){const b=x.lines.indexOf(M);b!==-1&&(x.lines.splice(b,1),x.lines.length===0&&(x.data.id!==void 0&&this._entriesWithId.delete(x.key),this._dataByLinkId.delete(x.id)))}};i.OscLinkService=y=g([v(0,p.IBufferService)],y)},8343:(d,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const n="di$target",g="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(v){return v[g]||[]},i.createDecorator=function(v){if(i.serviceRegistry.has(v))return i.serviceRegistry.get(v);const p=function(y,x,M){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(b,o,c){o[n]===o?o[g].push({id:b,index:c}):(o[g]=[{id:b,index:c}],o[n]=o)})(p,y,M)};return p.toString=()=>v,i.serviceRegistry.set(v,p),p}},2585:(d,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const g=n(8343);var v;i.IBufferService=(0,g.createDecorator)("BufferService"),i.ICoreMouseService=(0,g.createDecorator)("CoreMouseService"),i.ICoreService=(0,g.createDecorator)("CoreService"),i.ICharsetService=(0,g.createDecorator)("CharsetService"),i.IInstantiationService=(0,g.createDecorator)("InstantiationService"),function(p){p[p.TRACE=0]="TRACE",p[p.DEBUG=1]="DEBUG",p[p.INFO=2]="INFO",p[p.WARN=3]="WARN",p[p.ERROR=4]="ERROR",p[p.OFF=5]="OFF"}(v||(i.LogLevelEnum=v={})),i.ILogService=(0,g.createDecorator)("LogService"),i.IOptionsService=(0,g.createDecorator)("OptionsService"),i.IOscLinkService=(0,g.createDecorator)("OscLinkService"),i.IUnicodeService=(0,g.createDecorator)("UnicodeService"),i.IDecorationService=(0,g.createDecorator)("DecorationService")},1480:(d,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;const g=n(8460),v=n(225);i.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new g.EventEmitter,this.onChange=this._onChange.event;const p=new v.UnicodeV6;this.register(p),this._active=p.version,this._activeProvider=p}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(p){if(!this._providers[p])throw new Error(`unknown Unicode version "${p}"`);this._active=p,this._activeProvider=this._providers[p],this._onChange.fire(p)}register(p){this._providers[p.version]=p}wcwidth(p){return this._activeProvider.wcwidth(p)}getStringCellWidth(p){let y=0;const x=p.length;for(let M=0;M<x;++M){let b=p.charCodeAt(M);if(55296<=b&&b<=56319){if(++M>=x)return y+this.wcwidth(b);const o=p.charCodeAt(M);56320<=o&&o<=57343?b=1024*(b-55296)+o-56320+65536:y+=this.wcwidth(o)}y+=this.wcwidth(b)}return y}}}},l={};function a(d){var i=l[d];if(i!==void 0)return i.exports;var n=l[d]={exports:{}};return r[d].call(n.exports,n,n.exports,a),n.exports}var m={};return(()=>{var d=m;Object.defineProperty(d,"__esModule",{value:!0}),d.Terminal=void 0;const i=a(9042),n=a(3236),g=a(844),v=a(5741),p=a(8285),y=a(7975),x=a(7090),M=["cols","rows"];class b extends g.Disposable{constructor(c){super(),this._core=this.register(new n.Terminal(c)),this._addonManager=this.register(new v.AddonManager),this._publicOptions=Object.assign({},this._core.options);const u=f=>this._core.options[f],h=(f,$)=>{this._checkReadonlyOptions(f),this._core.options[f]=$};for(const f in this._core.options){const $={get:u.bind(this,f),set:h.bind(this,f)};Object.defineProperty(this._publicOptions,f,$)}}_checkReadonlyOptions(c){if(M.includes(c))throw new Error(`Option "${c}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new y.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new x.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new p.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const c=this._core.coreService.decPrivateModes;let u="none";switch(this._core.coreMouseService.activeProtocol){case"X10":u="x10";break;case"VT200":u="vt200";break;case"DRAG":u="drag";break;case"ANY":u="any"}return{applicationCursorKeysMode:c.applicationCursorKeys,applicationKeypadMode:c.applicationKeypad,bracketedPasteMode:c.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:u,originMode:c.origin,reverseWraparoundMode:c.reverseWraparound,sendFocusMode:c.sendFocus,wraparoundMode:c.wraparound}}get options(){return this._publicOptions}set options(c){for(const u in c)this._publicOptions[u]=c[u]}blur(){this._core.blur()}focus(){this._core.focus()}resize(c,u){this._verifyIntegers(c,u),this._core.resize(c,u)}open(c){this._core.open(c)}attachCustomKeyEventHandler(c){this._core.attachCustomKeyEventHandler(c)}registerLinkProvider(c){return this._core.registerLinkProvider(c)}registerCharacterJoiner(c){return this._checkProposedApi(),this._core.registerCharacterJoiner(c)}deregisterCharacterJoiner(c){this._checkProposedApi(),this._core.deregisterCharacterJoiner(c)}registerMarker(c=0){return this._verifyIntegers(c),this._core.registerMarker(c)}registerDecoration(c){var u,h,f;return this._checkProposedApi(),this._verifyPositiveIntegers((u=c.x)!==null&&u!==void 0?u:0,(h=c.width)!==null&&h!==void 0?h:0,(f=c.height)!==null&&f!==void 0?f:0),this._core.registerDecoration(c)}hasSelection(){return this._core.hasSelection()}select(c,u,h){this._verifyIntegers(c,u,h),this._core.select(c,u,h)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(c,u){this._verifyIntegers(c,u),this._core.selectLines(c,u)}dispose(){super.dispose()}scrollLines(c){this._verifyIntegers(c),this._core.scrollLines(c)}scrollPages(c){this._verifyIntegers(c),this._core.scrollPages(c)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(c){this._verifyIntegers(c),this._core.scrollToLine(c)}clear(){this._core.clear()}write(c,u){this._core.write(c,u)}writeln(c,u){this._core.write(c),this._core.write(`\r
`,u)}paste(c){this._core.paste(c)}refresh(c,u){this._verifyIntegers(c,u),this._core.refresh(c,u)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(c){this._addonManager.loadAddon(this,c)}static get strings(){return i}_verifyIntegers(...c){for(const u of c)if(u===1/0||isNaN(u)||u%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...c){for(const u of c)if(u&&(u===1/0||isNaN(u)||u%1!=0||u<0))throw new Error("This API only accepts positive integers")}}d.Terminal=b})(),m})())})(ad);var jg=ad.exports,dd={exports:{}};(function(e,t){(function(r,l){e.exports=l()})(self,()=>(()=>{var r={};return(()=>{var l=r;Object.defineProperty(l,"__esModule",{value:!0}),l.FitAddon=void 0,l.FitAddon=class{activate(a){this._terminal=a}dispose(){}fit(){const a=this.proposeDimensions();if(!a||!this._terminal||isNaN(a.cols)||isNaN(a.rows))return;const m=this._terminal._core;this._terminal.rows===a.rows&&this._terminal.cols===a.cols||(m._renderService.clear(),this._terminal.resize(a.cols,a.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const a=this._terminal._core,m=a._renderService.dimensions;if(m.css.cell.width===0||m.css.cell.height===0)return;const d=this._terminal.options.scrollback===0?0:a.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),n=parseInt(i.getPropertyValue("height")),g=Math.max(0,parseInt(i.getPropertyValue("width"))),v=window.getComputedStyle(this._terminal.element),p=n-(parseInt(v.getPropertyValue("padding-top"))+parseInt(v.getPropertyValue("padding-bottom"))),y=g-(parseInt(v.getPropertyValue("padding-right"))+parseInt(v.getPropertyValue("padding-left")))-d;return{cols:Math.max(2,Math.floor(y/m.css.cell.width)),rows:Math.max(1,Math.floor(p/m.css.cell.height))}}}})(),r})())})(dd);var Ug=dd.exports,Vg=w('<div class="mb-2 px-3 py-2 rounded-lg text-sm"style="background:rgba(239, 68, 68, 0.1);color:var(--error-color)">'),Wg=w('<div class="flex flex-col h-full"style=height:100%><div class="flex items-center gap-2 mb-2 px-3 py-2 rounded-lg"style=background:var(--bg-tertiary)><span></span><span class=text-sm style=color:var(--text-secondary)></span><span class="text-sm ml-auto"style=color:var(--text-muted)>Local System Terminal</span></div><div class="flex-1 rounded-lg overflow-hidden"data-terminal=true tabindex=0 style="background:#0d1117;border:1px solid var(--border-color);padding:8px;minHeight:500px;height:100%;outline:none">');const ud=e=>{const[t,r]=W(!1),[l,a]=W(null);let m=null,d,i=null,n=null;const g=()=>{if(!d||i){console.log("Terminal init skipped - container:",!!d,"term:",!!i);return}console.log("Initializing terminal...");try{if(i=new jg.Terminal({theme:{background:"#0d1117",foreground:"#c9d1d9",cursor:"#58a6ff",cursorAccent:"#0d1117",selection:"rgba(88, 166, 255, 0.3)",black:"#484f58",red:"#ff7b72",green:"#3fb950",yellow:"#d29922",blue:"#58a6ff",magenta:"#bc8cff",cyan:"#39c5cf",white:"#b1bac4"},fontFamily:'"SF Mono", Monaco, "Cascadia Code", "Fira Code", monospace',fontSize:13,cursorBlink:!0,cursorStyle:"bar"}),console.log("Terminal created:",i),n=new Ug.FitAddon,i.loadAddon(n),i.open(d),console.log("Terminal opened in container, element:",i.element),setTimeout(()=>{n?.fit(),i.element&&(i.element.focus(),i.element.setAttribute("tabindex","0")),i.focus(),console.log("Terminal fitted and focused, activeElement:",document.activeElement),e.onReady&&e.onReady()},100),i.onData(p=>{if(console.log("TERMINAL INPUT CAPTURED:",p,"char codes:",Array.from(p).map(y=>y.charCodeAt(0))),m&&m.readyState===WebSocket.OPEN){const y=JSON.stringify({type:"input",data:p});console.log("Sending to WebSocket:",y),m.send(y)}else console.warn("WebSocket not ready, state:",m?.readyState)}),console.log("Input handler attached to terminal"),d){const p=y=>{console.log("Direct keydown on container:",y.key,"code:",y.code),i&&!i.element?.contains(document.activeElement)&&i.focus()};d.addEventListener("keydown",p),d._keydownHandler=p}}catch(p){console.error("Failed to initialize terminal:",p),a(`Failed to load terminal: ${p}`)}},v=()=>{const y=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/api/local/terminal`;console.log("Connecting to WebSocket:",y);try{m=new WebSocket(y),m.onopen=()=>{console.log("WebSocket connected!"),r(!0),a(null),i&&(i.write(`\r
\x1B[32mConnected to local terminal\x1B[0m\r
\r
`),n&&(n.fit(),m?.send(JSON.stringify({type:"resize",cols:i.cols,rows:i.rows}))),setTimeout(()=>{i.focus(),console.log("Terminal focused after connection, element:",i.element)},100))},m.onmessage=x=>{i&&i.write(x.data)},m.onerror=x=>{console.error("WebSocket error:",x),a("WebSocket connection failed"),r(!1),i&&i.write(`\r
\x1B[31mConnection error\x1B[0m\r
`)},m.onclose=()=>{console.log("WebSocket closed"),r(!1),i&&i.write(`\r
\x1B[31mConnection closed\x1B[0m\r
`)}}catch(x){console.error("Failed to create WebSocket:",x),a(`Failed to connect: ${x}`)}};return zt(()=>{setTimeout(()=>{g(),setTimeout(()=>{v()},200)},100);const p=()=>{n&&i&&(n.fit(),m&&m.readyState===WebSocket.OPEN&&m.send(JSON.stringify({type:"resize",cols:i.cols,rows:i.rows})))};window.addEventListener("resize",p),wr(()=>{window.removeEventListener("resize",p)})}),wr(()=>{m&&(m.close(),m=null),i&&(i.dispose(),i=null),d&&d._keydownHandler&&(d.removeEventListener("keydown",d._keydownHandler),delete d._keydownHandler),n=null,r(!1),a(null)}),(()=>{var p=Wg(),y=p.firstChild,x=y.firstChild,M=x.nextSibling;M.nextSibling;var b=y.nextSibling;s(M,()=>t()?"Connected":"Disconnected"),s(p,_(K,{get when(){return l()},get children(){var c=Vg();return s(c,l),c}}),b),b.$$keydown=c=>{console.log("Container keydown:",c.key,"target:",c.target),c.stopPropagation()},b.$$click=c=>{console.log("Container clicked, focusing terminal..."),c.stopPropagation(),i&&(i.focus(),d?.focus(),console.log("Terminal focused, element:",i.element,"activeElement:",document.activeElement))};var o=d;return typeof o=="function"?dr(o,b):d=b,J(()=>tt(x,`w-2 h-2 rounded-full ${t()?"bg-green-500":"bg-red-500"}`)),p})()};ut(["click","keydown"]);var qg=w('<div class="flex flex-col"style=height:80vh;minHeight:600px>');const Kg=e=>_(mt,{get isOpen(){return e.isOpen},onClose:()=>{e.onClose()},title:"Local Terminal",size:"full",get children(){var r=qg();return s(r,_(ud,{})),r}}),hd="kubegraf-favorites";function Yg(){if(typeof window<"u"){const e=localStorage.getItem(hd);if(e)try{return JSON.parse(e)}catch{return[]}}return[]}const[Kl,gd]=W(Yg());It(()=>{typeof window<"u"&&localStorage.setItem(hd,JSON.stringify(Kl()))});function Gg(e){gd(t=>t.includes(e)?t:[...t,e])}function Jg(e){gd(t=>t.filter(r=>r!==e))}function Xg(e){$i(e)?Jg(e):Gg(e)}function $i(e){return Kl().includes(e)}var Zg=w('<svg viewBox="0 0 256 206"class="w-5 h-5"fill=none><path d="M170.252 56.819l22.253-22.253 1.483-9.37C153.437-11.677 88.976-7.496 52.42 33.92 42.267 45.423 34.734 59.764 30.717 74.573l7.97-1.123 44.505-7.34 3.436-3.513c19.797-21.742 53.27-24.667 76.128-5.632l7.496-.146z"fill=#EA4335></path><path d="M224.205 73.918a100.249 100.249 0 00-30.217-48.722l-31.232 31.232a55.515 55.515 0 0120.379 44.037v5.544c15.35 0 27.797 12.446 27.797 27.796 0 15.352-12.446 27.573-27.797 27.573h-55.671l-5.466 5.621v33.339l5.466 5.389h55.67c40.143.312 73.076-31.857 73.388-72 .178-23.106-10.736-44.898-29.84-59.653l-2.477.844z"fill=#4285F4></path><path d="M71.87 205.796h55.593V161.29H71.87a27.275 27.275 0 01-11.467-2.545l-7.97 2.468-22.331 22.253-1.949 7.65c12.758 9.603 28.39 14.758 44.484 14.68h-.767z"fill=#34A853></path><path d="M71.87 50.525C31.727 50.837-1.207 84.447.081 124.59c.72 22.632 11.389 43.821 28.925 57.476l32.25-32.25c-16.292-7.378-23.503-26.672-16.125-42.964a31.86 31.86 0 0116.125-16.125l-32.25-32.25A72.002 72.002 0 0071.87 50.525z"fill=#FBBC05>'),Qg=w('<svg viewBox="0 0 256 153"class="w-5 h-5"fill=none><path d="M72.392 55.438c0 3.137.34 5.68.933 7.545a45.373 45.373 0 002.712 6.103c.424.678.593 1.356.593 1.95 0 .847-.508 1.695-1.61 2.543l-5.34 3.56c-.763.509-1.526.763-2.205.763-.847 0-1.695-.424-2.543-1.187a26.224 26.224 0 01-3.051-3.984 65.48 65.48 0 01-2.628-5.001c-6.612 7.798-14.92 11.698-24.922 11.698-7.12 0-12.8-2.035-16.954-6.103-4.153-4.07-6.272-9.495-6.272-16.277 0-7.206 2.543-13.054 7.714-17.462 5.17-4.408 12.037-6.612 20.682-6.612 2.882 0 5.849.254 8.985.678 3.137.424 6.358 1.102 9.749 1.865V29.33c0-6.443-1.356-10.935-3.984-13.563-2.712-2.628-7.29-3.9-13.817-3.9-2.967 0-6.018.34-9.155 1.103-3.136.762-6.188 1.695-9.155 2.882-.763.34-1.441.593-1.95.763-.508.17-.932.254-1.271.254-1.102 0-1.61-.763-1.61-2.374v-4.153c0-1.272.17-2.205.593-2.713.424-.508 1.187-1.017 2.374-1.525 2.967-1.526 6.527-2.798 10.68-3.815C24.922.678 29.33.085 33.992.085c10.256 0 17.716 2.374 22.463 7.12 4.662 4.747 7.036 11.952 7.036 21.615v28.618h-.1z"fill=#252F3E></path><path d="M30.94 67.052c2.798 0 5.68-.509 8.731-1.526 3.052-1.017 5.765-2.882 8.054-5.425 1.356-1.61 2.374-3.39 2.882-5.51.509-2.12.848-4.661.848-7.629v-3.646a70.732 70.732 0 00-7.799-1.44 63.56 63.56 0 00-7.968-.509c-5.68 0-9.833 1.102-12.63 3.39-2.798 2.289-4.154 5.51-4.154 9.749 0 3.984 1.017 6.95 3.136 8.985 2.035 2.12 5.001 3.137 8.9 3.137v.424z"fill=#252F3E></path><path d="M126.434 74.087c-1.441 0-2.374-.254-2.967-.847-.593-.509-1.102-1.61-1.525-3.052l-17.039-56.05c-.424-1.526-.678-2.543-.678-3.136 0-1.272.593-1.95 1.78-1.95h8.308c1.526 0 2.543.254 3.052.847.593.509 1.017 1.61 1.44 3.052l12.206 48.082 11.359-48.082c.34-1.526.763-2.543 1.356-3.052.593-.508 1.695-.847 3.136-.847h6.782c1.526 0 2.543.254 3.136.847.593.509 1.102 1.61 1.357 3.052l11.528 48.675 12.545-48.675c.424-1.526.932-2.543 1.441-3.052.593-.508 1.61-.847 3.051-.847h7.883c1.187 0 1.865.678 1.865 1.95 0 .338-.085.678-.17 1.101-.084.424-.254 1.017-.508 1.78l-17.378 56.219c-.424 1.526-.932 2.543-1.526 3.052-.593.508-1.61.847-2.966.847h-7.29c-1.526 0-2.544-.254-3.137-.847-.593-.593-1.102-1.61-1.356-3.136l-11.274-46.877-11.19 46.793c-.339 1.526-.763 2.543-1.356 3.136-.593.593-1.695.848-3.137.848h-7.29z"fill=#252F3E></path><path d="M201.462 78.325c-4.408 0-8.816-.508-13.055-1.525-4.238-1.017-7.544-2.12-9.748-3.39-1.357-.763-2.29-1.61-2.629-2.374-.339-.763-.508-1.61-.508-2.374v-4.322c0-1.61.593-2.374 1.695-2.374.423 0 .847.085 1.271.254.424.17 1.102.424 1.865.763 2.543 1.187 5.34 2.12 8.308 2.798 3.051.678 6.018 1.017 9.07 1.017 4.831 0 8.562-.847 11.105-2.543 2.543-1.695 3.9-4.153 3.9-7.29 0-2.119-.678-3.9-2.035-5.34-1.356-1.441-3.984-2.713-7.798-3.9l-11.19-3.475c-5.68-1.78-9.918-4.408-12.546-7.883-2.628-3.39-3.984-7.205-3.984-11.274 0-3.306.678-6.188 2.035-8.731 1.356-2.543 3.136-4.747 5.425-6.527 2.288-1.865 4.916-3.221 8.053-4.153 3.136-.932 6.442-1.356 9.918-1.356 1.78 0 3.645.085 5.425.339 1.865.254 3.56.593 5.255.932 1.61.424 3.136.847 4.577 1.356 1.44.508 2.543 1.017 3.305 1.525.932.593 1.61 1.187 1.95 1.865.339.593.508 1.44.508 2.458v3.984c0 1.61-.593 2.458-1.695 2.458-.593 0-1.526-.254-2.798-.763-4.238-1.95-9.07-2.882-14.495-2.882-4.408 0-7.883.678-10.341 2.12-2.459 1.44-3.73 3.645-3.73 6.781 0 2.12.763 3.9 2.289 5.34 1.525 1.441 4.408 2.882 8.562 4.153l10.935 3.475c5.595 1.78 9.665 4.238 12.122 7.374 2.459 3.136 3.646 6.697 3.646 10.681 0 3.39-.678 6.442-1.95 9.155-1.356 2.713-3.22 5.086-5.594 7.036-2.374 2.035-5.255 3.56-8.647 4.577-3.56 1.102-7.374 1.61-11.444 1.61z"fill=#252F3E></path><path d="M237.596 145.256c-29.126 21.531-71.418 32.974-107.813 32.974-50.996 0-96.927-18.853-131.65-50.235-2.713-2.459-.339-5.849 2.967-3.9 37.517 21.785 83.787 34.922 131.65 34.922 32.296 0 67.78-6.697 100.414-20.598 4.916-2.12 9.07 3.221 4.432 6.837z"fill=#FF9900></path><path d="M249.548 131.524c-3.73-4.747-24.668-2.289-34.078-1.102-2.882.339-3.306-2.12-.678-3.9 16.7-11.698 43.99-8.308 47.127-4.408 3.136 3.984-.848 31.314-16.531 44.369-2.374 2.035-4.662.932-3.56-1.78 3.475-8.562 11.189-28.449 7.72-33.179z"fill=#FF9900>'),ev=w('<svg viewBox="0 0 96 96"class="w-5 h-5"fill=none><path d="M33.337 6.11L2.305 81.954h21.792L57.67 6.11H33.337z"fill=#0078D4></path><path d="M71.175 26.316H43.09L20.97 82.097h22.125l28.08-55.781z"fill=#0078D4></path><path d="M79.04 6.11L57.8 89.9h18.41l21.484-83.79H79.04z"fill=#0078D4>'),tv=w('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#0530AD><path d="M0 7.5h4.05v.9H0zm5.4 0v.9H6.3v-.9h-.9zm3.6 0v.9h4.05v-.9H9zm8.1 0v.9h.9v-.9h-.9zm3.6 0v.9H24v-.9h-3.3zM0 9.3h4.05v.9H0zm5.4 0v.9H6.3v-.9h-.9zm3.6 0v.9h4.05v-.9H9zm8.1 0v.9h.9v-.9h-.9zm3.6 0v.9H24v-.9h-3.3zM0 11.1h2.7v.9H0zm3.6 0v.9h1.35c.124-.31.248-.6.45-.9H3.6zm5.4 0v.9h1.35c.186.31.31.6.45.9H9zm8.1 0c.124.31.248.6.45.9h1.35v-.9h-.9zm2.7 0v.9h.9c.186-.31.31-.6.45-.9h-.45zm2.7 0c.124.31.248.6.45.9H24v-.9h-3.3zM0 12.9h2.7v.9H0zm3.6 0v.9h.45c-.186-.31-.31-.6-.45-.9zm5.4 0c-.124-.31-.248-.6-.45-.9v.9H9zm8.1 0v.9c.124-.31.248-.6.45-.9h-.45zm2.7 0c-.186.31-.31.6-.45.9h.45v-.9zm2.7 0v.9H24v-.9h-3.3zM0 14.7h4.05v.9H0zm5.4 0v.9H6.3v-.9h-.9zm3.6 0v.9h4.05v-.9H9zm8.1 0v.9h.9v-.9h-.9zm3.6 0v.9H24v-.9h-3.3zM0 16.5h4.05v.9H0zm5.4 0v.9H6.3v-.9h-.9zm3.6 0v.9h4.05v-.9H9zm8.1 0v.9h.9v-.9h-.9zm3.6 0v.9H24v-.9h-3.3z">'),rv=w('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#F80000><path d="M6.754 16.15h10.492c2.294 0 4.254-1.96 4.254-4.254S19.54 7.642 17.246 7.642H6.754C4.46 7.642 2.5 9.602 2.5 11.896s1.96 4.254 4.254 4.254zm0-6.204h10.492c1.078 0 1.95.872 1.95 1.95s-.872 1.95-1.95 1.95H6.754c-1.078 0-1.95-.872-1.95-1.95s.872-1.95 1.95-1.95z">'),sv=w('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#0080FF><path d="M12.04 24v-4.8h-4.8V24H12zm-4.8-4.8v-3.6H3.6v3.6h3.64zm0-3.6v-3.6H3.6v3.6h3.64zm6-3.6v-3.6H9.6v3.6h3.64zm0 0a7.2 7.2 0 007.2-7.2H12.04v4.8h4.8v-4.8h-4.8v7.2z"></path><path d="M12 0C5.37 0 0 5.37 0 12h4.8A7.2 7.2 0 0112 4.8V0z">'),iv=w('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#FF6A00><path d="M21.692 18.5L12 13.5l-9.692 5L0 17l12-6.154L24 17l-2.308 1.5zm0-6L12 7.5l-9.692 5L0 11l12-6.154L24 11l-2.308 1.5z">'),nv=w('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#00A95C><path d="M12 2L2 7l10 5 10-5-10-5zm0 7.5L4.5 7 12 4.5l7.5 2.5L12 9.5zm0 3L4.5 10 12 7.5l7.5 2.5L12 12.5zm0 3L4.5 13 12 10.5l7.5 2.5L12 15.5zm0 3L4.5 16 12 13.5l7.5 2.5L12 18.5zm0 3L2 17v2l10 5 10-5v-2l-10 4.5z">'),lv=w('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#007BFC><path d="M19.743 6H23.5l-7 12h-3.757L19.743 6zM.5 6h3.757l7 12H7.5L.5 6zm7.28 0h3.757l5.723 9.8h-3.757L7.78 6z">'),ov=w('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#123F6D><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-4h2v2h-2zm0-8h2v6h-2z">'),av=w('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#D50C2D><path d="M4 4h16v16H4V4zm2 2v12h12V6H6zm2 2h3v8H8V8zm5 0h3v8h-3V8z">'),cv=w('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#326CE5><path d="M12 2L2 7l10 5 10-5-10-5zm0 12l-8-4v7l8 4 8-4v-7l-8 4z">'),dv=w('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#326CE5><path d="M12 2a10 10 0 100 20 10 10 0 000-20zm0 18a8 8 0 110-16 8 8 0 010 16zm-2-6l5-3-5-3v6z">'),uv=w('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#2496ED><path d="M13.983 11.078h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.185.185 0 00-.185.185v1.888c0 .102.083.185.185.185zm-2.954-5.43h2.118a.186.186 0 00.186-.186V3.574a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.186zm0 2.716h2.118a.187.187 0 00.186-.186V6.29a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.887c0 .102.082.185.185.186zm-2.93 0h2.12a.186.186 0 00.184-.186V6.29a.185.185 0 00-.185-.185H8.1a.185.185 0 00-.185.185v1.887c0 .102.083.185.185.186zm-2.964 0h2.119a.186.186 0 00.185-.186V6.29a.185.185 0 00-.185-.185H5.136a.186.186 0 00-.186.185v1.887c0 .102.084.185.186.186zm5.893 2.715h2.118a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185zm-2.93 0h2.12a.185.185 0 00.184-.185V9.006a.185.185 0 00-.184-.186h-2.12a.185.185 0 00-.184.185v1.888c0 .102.083.185.185.185zm-2.964 0h2.119a.185.185 0 00.185-.185V9.006a.185.185 0 00-.185-.186h-2.12a.186.186 0 00-.185.186v1.887c0 .102.084.185.186.185zm-2.92 0h2.12a.185.185 0 00.184-.185V9.006a.185.185 0 00-.184-.186h-2.12a.185.185 0 00-.184.185v1.888c0 .102.082.185.185.185zM23.763 9.89c-.065-.051-.672-.51-1.954-.51-.338.001-.676.03-1.01.087-.248-1.7-1.653-2.53-1.716-2.566l-.344-.199-.226.327c-.284.438-.49.922-.612 1.43-.23.97-.09 1.882.403 2.661-.595.332-1.55.413-1.744.42H.751a.751.751 0 00-.75.748 11.376 11.376 0 00.692 4.062c.545 1.428 1.355 2.48 2.41 3.124 1.18.723 3.1 1.137 5.275 1.137.983.003 1.963-.086 2.93-.266a12.248 12.248 0 003.823-1.389c.98-.567 1.86-1.288 2.61-2.136 1.252-1.418 1.998-2.997 2.553-4.4h.221c1.372 0 2.215-.549 2.68-1.009.309-.293.55-.65.707-1.046l.098-.288z">'),hv=w('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#FFC61C><path d="M12 2L2 7v10l10 5 10-5V7L12 2zm0 2.5L19 8l-7 3.5L5 8l7-3.5zM4 9.5l7 3.5v7l-7-3.5v-7zm16 0v7l-7 3.5v-7l7-3.5z">'),gv=w('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#0075A8><path d="M12 2L2 7v10l10 5 10-5V7L12 2zm0 3l6 3-6 3-6-3 6-3zm-7 5l6 3v5l-6-3v-5zm14 0v5l-6 3v-5l6-3z">'),vv=w('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=#EE0000><path d="M21.665 11.812l-9.027-3.046a.67.67 0 00-.423 0l-9.027 3.046a.67.67 0 00-.445.631v5.545c0 .286.18.542.445.632l9.027 3.046a.67.67 0 00.423 0l9.027-3.046a.67.67 0 00.445-.632v-5.545a.67.67 0 00-.445-.631zm-9.242 7.726l-7.37-2.49v-3.62l7.37 2.488v3.622zm.408-4.97l-7.576-2.558 7.576-2.558 7.576 2.558-7.576 2.558zm8.03 2.48l-7.37 2.49v-3.622l7.37-2.488v3.62z">'),fv=w('<svg viewBox="0 0 24 24"class="w-5 h-5"fill=currentColor><path d="M19.35 10.04A7.49 7.49 0 0012 4C9.11 4 6.6 5.64 5.35 8.04A5.994 5.994 0 000 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z">'),pv=w('<svg class="w-4 h-4 ml-auto"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"clip-rule=evenodd>'),mv=w('<div class="px-3 py-4 text-sm text-center"style=color:var(--text-muted)>No namespaces found'),bv=w('<div class="absolute top-full left-0 mt-1 w-64 rounded-lg shadow-xl z-[200] overflow-hidden"style="background:var(--bg-card);border:1px solid var(--border-color)"><div class="p-2 border-b"style=border-color:var(--border-color)><div class=relative><svg class="absolute left-2.5 top-1/2 -translate-y-1/2 w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg><input type=text placeholder="Search namespaces..."class="w-full rounded-md pl-8 pr-3 py-1.5 text-sm"autofocus style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div></div><div class="max-h-64 overflow-y-auto"><button class="w-full px-3 py-2 text-sm text-left flex items-center gap-2 transition-colors"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path></svg>All Namespaces</button></div><div class="p-3 border-t flex items-center gap-2"style=border-color:var(--border-color)><button class="flex-1 px-3 py-1.5 rounded-md text-sm"style="border:1px solid var(--border-color);color:var(--text-secondary)">Cancel</button><button class="flex-1 px-3 py-1.5 rounded-md text-sm text-black"style=background:var(--accent-primary)>Apply</button></div><div class="px-3 py-2 text-xs border-t"style=border-color:var(--border-color);color:var(--text-muted)> namespaces available'),xv=w('<kbd class="absolute right-3 top-1/2 -translate-y-1/2 px-1.5 py-0.5 rounded text-xs font-mono"style="background:var(--bg-tertiary);color:var(--text-muted);border:1px solid var(--border-color)">K'),yv=w('<div class="px-3 py-4 text-sm text-center"style=color:var(--text-muted)>No clusters found'),_v=w('<div class="px-3 py-4 text-sm text-center"style=color:var(--text-muted)>No clusters available'),$v=w('<div class="absolute top-full right-0 mt-1 w-72 rounded-lg shadow-xl z-[200] overflow-hidden"style="background:var(--bg-card);border:1px solid var(--border-color)"><div class="p-2 border-b"style=border-color:var(--border-color)><div class=relative><svg class="absolute left-2.5 top-1/2 -translate-y-1/2 w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg><input type=text placeholder="Search clusters..."class="w-full rounded-md pl-8 pr-3 py-1.5 text-sm"autofocus style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div></div><div class="max-h-64 overflow-y-auto"></div><div class="px-3 py-2 text-xs border-t"style=border-color:var(--border-color);color:var(--text-muted)> cluster<!> available'),wv=w('<header class="h-16 header-glass flex items-center justify-between px-6 relative"style=z-index:100><div class="flex items-center gap-4"><div class="flex items-center gap-2 relative"><label class=text-sm style=color:var(--text-secondary)>Namespace:</label><div class="flex items-center gap-2"><button class="flex items-center gap-2 rounded-lg px-3 py-1.5 text-sm min-w-[180px] justify-between"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><span class=truncate></span><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 9l-7 7-7-7"></path></svg></button></div></div><div class=relative><svg class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg><input id=global-search type=text placeholder="Search resources..."class="w-72 rounded-lg pl-10 pr-16 py-1.5 text-sm"></div></div><div class="flex items-center gap-4"><div class="flex items-center gap-2 relative"><label class=text-sm style=color:var(--text-secondary)>Cluster:</label><button class="flex items-center gap-2 rounded-lg px-3 py-1.5 text-sm min-w-[220px] justify-between transition-all"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><div class="flex items-center gap-2 text-left"><div class="flex flex-col leading-tight"><span class="text-sm font-medium truncate"></span><span class=text-xs style=color:var(--text-muted)></span></div></div><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 9l-7 7-7-7"></path></svg></button></div><div class="flex items-center gap-2"><button class="flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm"style="border:1px solid var(--border-color)"><span></span></button><button class="flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm"title="Manage Connections"style="background:var(--accent-primary);color:#000;border:1px solid var(--accent-primary);boxShadow:0 0 10px rgba(59,130,246,0.35)"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065zM12 15a3 3 0 100-6 3 3 0 000 6z"></path></svg></button></div><button class=icon-btn title="Open Local Terminal"style=display:flex;alignItems:center;justifyContent:center;minWidth:40px;minHeight:40px><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></button><button class=icon-btn title="Refresh all data"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button><button class="flex items-center gap-2 px-4 py-2 rounded-lg transition-colors"title="Open Brain Panel"style="border:1px solid var(--border-color)"><span class=text-lg></span><span>Brain</span></button><button class="flex items-center gap-2 px-4 py-2 btn-accent rounded-lg"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg><span>AI'),Sv=w('<div class="fixed inset-0 bg-black/50 z-50 flex items-center justify-center"><div class="rounded-lg border p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto"style=background:var(--bg-card);border-color:var(--border-color)><div class="flex items-center justify-between mb-4"><h2 class="text-xl font-bold"style=color:var(--text-primary)>Manage Quick Access</h2><button class="p-2 rounded hover:bg-[var(--bg-tertiary)]"style=color:var(--text-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12"></path></svg></button></div><p class="text-sm mb-4"style=color:var(--text-secondary)>Click the star icon to add or remove items from Quick Access</p><div class=space-y-2>'),Cv=w('<div class="h-12 flex items-center px-6 gap-2 border-b"style=background:var(--bg-secondary);borderColor:var(--border-color);z-index:99><span class="text-xs font-semibold mr-2"style=color:var(--text-muted)>QUICK ACCESS:</span><button class="ml-auto flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-medium transition-all hover:bg-[var(--bg-tertiary)]"title="Manage Favorites"style=color:var(--text-secondary);background:transparent><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path></svg><span>Manage'),kv=w('<div class="px-3 py-2 text-sm"style=color:var(--text-muted)>Loading...'),Mv=w('<label class="w-full px-3 py-2 text-sm flex items-center gap-3 cursor-pointer transition-colors"style=color:var(--text-primary)><input type=checkbox class="w-4 h-4"><span class="truncate flex-1">'),Av=w("<span>"),Lv=w('<div class="px-3 py-2 text-sm"style=color:var(--text-muted)>Loading clusters...'),Ev=w("<span class=text-xs style=color:var(--text-muted)>"),Tv=w('<svg class="w-4 h-4 flex-shrink-0"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"clip-rule=evenodd>'),Dv=w('<button class="w-full px-3 py-2 text-sm text-left flex items-center gap-2 transition-colors"><span></span><div class="flex-1 min-w-0"><span class="truncate block">'),Rv=w('<div class="flex items-center gap-2 px-3 py-1.5 rounded-lg"title="Loading cloud provider info..."style="background:var(--bg-secondary);border:1px solid var(--border-color)"><span class="text-sm font-medium"style=color:var(--text-primary)>...'),Pv=w('<button class="flex items-center gap-2 px-3 py-1.5 rounded-lg cursor-pointer hover:opacity-80 transition-opacity"style="background:var(--bg-secondary);border:1px solid var(--border-color)"><span class="text-sm font-medium"style=color:var(--text-primary)></span><svg class="w-3 h-3 ml-1"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14">'),Iv=w('<div class="flex items-center gap-2 px-3 py-1.5 rounded-lg opacity-90"style="background:var(--bg-secondary);border:1px solid var(--border-color)"><span class="text-sm font-medium"style=color:var(--text-primary)>'),Bv=w('<button class="flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-medium transition-all hover:bg-[var(--bg-tertiary)]"style=color:var(--text-primary);background:transparent><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg><span>'),Nv=w('<div class="flex items-center justify-between p-3 rounded-lg hover:bg-[var(--bg-tertiary)] transition-colors"><div class="flex items-center gap-3"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-secondary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg><span style=color:var(--text-primary)></span></div><button class="p-2 rounded hover:bg-[var(--bg-tertiary)]"><svg class="w-5 h-5"stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z">');const fa={gcp:()=>Zg(),aws:()=>Qg(),azure:()=>ev(),ibm:()=>tv(),oracle:()=>rv(),digitalocean:()=>sv(),alibaba:()=>iv(),linode:()=>nv(),vultr:()=>lv(),ovh:()=>ov(),hetzner:()=>av(),kind:()=>cv(),minikube:()=>dv(),"docker-desktop":()=>uv(),k3s:()=>hv(),rancher:()=>gv(),openshift:()=>vv(),generic:()=>fv()},Ov=()=>{const[e,t]=W(!1),[r,l]=W(!1),[a,m]=W(""),[d,i]=W(!1),[n,g]=W(""),[v,p]=W(!1),[y,x]=W(!1),[M,b]=W([]),[o,c]=W("default");let u,h,f,$;const[C]=it(()=>Fe.getCloudInfo().catch(()=>null)),k=()=>{const U=C()?.provider?.toLowerCase()||"generic";return fa[U]||fa.generic},S=()=>{const U=C()?.provider?.toLowerCase();return{gcp:"GCP",aws:"AWS",azure:"Azure",ibm:"IBM",oracle:"Oracle",digitalocean:"DO",alibaba:"Alibaba",linode:"Linode",vultr:"Vultr",ovh:"OVH",hetzner:"Hetzner",kind:"Kind",minikube:"Minikube","docker-desktop":"Docker",k3s:"K3s",rancher:"Rancher",openshift:"OpenShift"}[U||""]||C()?.displayName||"Cloud"},L=et(()=>{const U=a().toLowerCase();return U?bn().filter(Y=>Y.toLowerCase().includes(U)):bn()}),P=et(()=>{const U=n().toLowerCase();return U?vi().filter(Y=>Y.name.toLowerCase().includes(U)):vi()});if(It(()=>{const Y=Pn()?.filters?.namespaceMode||(ii().length===0?"default":"custom");r()||(b(ii()),c(Y))}),typeof window<"u"){document.addEventListener("keydown",Y=>{(Y.ctrlKey||Y.metaKey)&&Y.key==="k"&&(Y.preventDefault(),document.getElementById("global-search")?.focus())});const U=Y=>{r()&&u&&!u.contains(Y.target)&&h&&!h.contains(Y.target)&&(l(!1),m("")),d()&&f&&!f.contains(Y.target)&&$&&!$.contains(Y.target)&&(i(!1),g(""))};document.addEventListener("mousedown",U),wr(()=>document.removeEventListener("mousedown",U))}const I=U=>{const Y=new Set(M());Y.has(U)?Y.delete(U):Y.add(U),b(Array.from(Y)),c("custom")},D=U=>M().includes(U),T=async()=>{try{const U=o()==="all"||M().length===0?[]:M();dh(U),o()==="all"||M().length===0?ki("All Namespaces"):(M().length,ki(M()[0])),Al(M(),o()).catch(Y=>{console.error("Failed to persist workspace context",Y)}),l(!1),m("")}catch(U){console.error("Failed to update namespace",U),Je("Failed to update namespace","error"),l(!1),m("")}},B=()=>{b([]),c("all")},N=()=>Xt(),O=async U=>{if(U===nr()){i(!1),g("");return}p(!0);try{await sd(U),Je(`Switched to ${U}`,"success")}catch(Y){console.error("Failed to switch context:",Y),Je("Failed to switch cluster","error")}finally{p(!1),i(!1),g("")}},H=Jc.flatMap(U=>U.items),A=U=>H.find(V=>V.id===U)?.label||U,z=U=>H.find(V=>V.id===U)?.icon||"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2",F=et(()=>{const U=Kl();return U.length>0?U.map(Y=>({label:A(Y),view:Y,icon:z(Y)})):[{label:"Dashboard",view:"dashboard",icon:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},{label:"Pods Health",view:"pods",icon:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"},{label:"Resource Metrics",view:"cost",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},{label:"Security Status",view:"security",icon:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"},{label:"Events Log",view:"monitoredevents",icon:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"}]}),[j,q]=W(!1);return[(()=>{var U=wv(),Y=U.firstChild,V=Y.firstChild,X=V.firstChild,R=X.nextSibling,G=R.firstChild,te=G.firstChild,ae=te.nextSibling,Q=V.nextSibling,Z=Q.firstChild,ne=Z.nextSibling,$e=Y.nextSibling,re=$e.firstChild,de=re.firstChild,le=de.nextSibling,xe=le.firstChild,ye=xe.firstChild,ke=ye.firstChild,ge=ke.nextSibling,Ce=xe.nextSibling,_e=re.nextSibling,Me=_e.firstChild,ve=Me.firstChild,be=Me.nextSibling,ce=_e.nextSibling,Ae=ce.nextSibling,se=Ae.nextSibling,oe=se.nextSibling;G.$$click=()=>{r()||b(ii()),l(!r())};var ie=h;typeof ie=="function"?dr(ie,G):h=G,s(te,N),s(V,_(K,{get when(){return r()},get children(){var he=bv(),Te=he.firstChild,ee=Te.firstChild,Se=ee.firstChild,pe=Se.nextSibling,De=Te.nextSibling,Ne=De.firstChild,me=Ne.firstChild;me.nextSibling;var He=De.nextSibling,Ze=He.firstChild,we=Ze.nextSibling,ze=He.nextSibling,Pe=ze.firstChild,Ue=u;return typeof Ue=="function"?dr(Ue,he):u=he,pe.$$input=Oe=>m(Oe.target.value),Ne.$$click=B,s(Ne,_(K,{get when(){return o()==="all"},get children(){return pv()}}),null),s(De,_(K,{get when(){return!In.loading},get fallback(){return kv()},get children(){return _(Xe,{get each(){return L()},children:Oe=>{const fe=et(()=>D(Oe));return(()=>{var Le=Mv(),We=Le.firstChild,Ee=We.nextSibling;return We.$$input=()=>I(Oe),s(Ee,Oe),J(Ie=>E(Le,"background",fe()?"var(--bg-tertiary)":"transparent")),J(()=>We.checked=fe()),Le})()}})}}),null),s(De,_(K,{get when(){return Re(()=>!!a())()&&L().length===0},get children(){return mv()}}),null),Ze.$$click=()=>{l(!1),m(""),b(ii());const fe=Pn()?.filters?.namespaceMode||(ii().length===0?"default":"custom");c(fe)},we.$$click=T,s(ze,()=>bn().length,Pe),J(Oe=>{var fe=o()==="all"?"var(--bg-tertiary)":"transparent",Le=o()==="all"?"var(--accent-primary)":"var(--text-primary)";return fe!==Oe.e&&E(Ne,"background",Oe.e=fe),Le!==Oe.t&&E(Ne,"color",Oe.t=Le),Oe},{e:void 0,t:void 0}),J(()=>pe.value=a()),he}}),null),ne.addEventListener("blur",()=>t(!1)),ne.addEventListener("focus",()=>t(!0)),ne.$$input=he=>Ku(he.target.value),s(Q,_(K,{get when(){return!e()},get children(){return xv()}}),null),le.$$click=()=>i(!d());var ue=$;return typeof ue=="function"?dr(ue,le):$=le,s(xe,_(K,{get when(){return Re(()=>!!C())()&&!C.loading},get fallback(){return(()=>{var he=Av();return J(()=>tt(he,`w-2 h-2 rounded-full ${Ts().connected?"bg-green-500":"bg-red-500"}`)),he})()},get children(){return k()()}}),ye),s(ke,(()=>{var he=Re(()=>!!v());return()=>he()?"Switching...":nr()||"Select cluster"})()),s(ge,()=>Ts().connected?"Connected":"Disconnected"),s(re,_(K,{get when(){return d()},get children(){var he=$v(),Te=he.firstChild,ee=Te.firstChild,Se=ee.firstChild,pe=Se.nextSibling,De=Te.nextSibling,Ne=De.nextSibling,me=Ne.firstChild,He=me.nextSibling;He.nextSibling;var Ze=f;return typeof Ze=="function"?dr(Ze,he):f=he,pe.$$input=we=>g(we.currentTarget.value),s(De,_(K,{get when(){return!El.loading},get fallback(){return Lv()},get children(){return _(Xe,{get each(){return P()},children:we=>(()=>{var ze=Dv(),Pe=ze.firstChild,Ue=Pe.nextSibling,Oe=Ue.firstChild;return ze.$$click=()=>O(we.name),s(Oe,()=>we.name),s(Ue,_(K,{get when(){return we.serverVersion},get children(){var fe=Ev();return s(fe,()=>we.serverVersion),fe}}),null),s(ze,_(K,{get when(){return we.isCurrent},get children(){return Tv()}}),null),J(fe=>{var Le=we.isCurrent?"var(--bg-tertiary)":"transparent",We=we.isCurrent?"var(--accent-primary)":"var(--text-primary)",Ee=`w-2 h-2 rounded-full flex-shrink-0 ${we.connected?"bg-green-500":"bg-red-500"}`;return Le!==fe.e&&E(ze,"background",fe.e=Le),We!==fe.t&&E(ze,"color",fe.t=We),Ee!==fe.a&&tt(Pe,fe.a=Ee),fe},{e:void 0,t:void 0,a:void 0}),ze})()})}}),null),s(De,_(K,{get when(){return Re(()=>!!n())()&&P().length===0},get children(){return yv()}}),null),s(De,_(K,{get when(){return Re(()=>!El.loading)()&&vi().length===0},get children(){return _v()}}),null),s(Ne,()=>vi().length,me),s(Ne,()=>vi().length!==1?"s":"",He),J(()=>pe.value=n()),he}}),null),Me.$$click=()=>va(),s(Me,()=>_i()?.connected??Ts().connected?"Cluster Connected":"Cluster Disconnected",null),be.$$click=()=>va(),ce.$$click=()=>x(!0),Ae.$$click=he=>{const Te=he.currentTarget;Te.classList.add("refreshing"),setTimeout(()=>Te.classList.remove("refreshing"),500),nd()},s($e,_(Fg,{}),se),Rt(se,"click",Dl,!0),Rt(oe,"click",Xu,!0),s($e,_(K,{get when(){return Re(()=>!!C())()&&!C.loading},get fallback(){return(()=>{var he=Rv(),Te=he.firstChild;return s(he,()=>k()(),Te),he})()},get children(){return(()=>{const he=C();return he?.consoleUrl&&he.consoleUrl.trim()!==""?(()=>{var ee=Pv(),Se=ee.firstChild;return ee.$$click=()=>{he.consoleUrl&&window.open(he.consoleUrl,"_blank","noopener,noreferrer")},s(ee,()=>k()(),Se),s(Se,S),J(()=>dt(ee,"title",`Click to open ${he?.displayName||"Cloud"} Console - ${he?.region||""}`)),ee})():(()=>{var ee=Iv(),Se=ee.firstChild;return s(ee,()=>k()(),Se),s(Se,S),J(()=>dt(ee,"title",`${he?.displayName||"Local"} Cluster - ${he?.region||""} (no cloud console available)`)),ee})()})()}}),null),s(U,_(Kg,{get isOpen(){return y()},onClose:()=>x(!1)}),null),J(he=>{var Te=`w-4 h-4 transition-transform ${r()?"rotate-180":""}`,ee=v()?.7:1,Se=`w-4 h-4 transition-transform ${d()?"rotate-180":""}`,pe=_i()?.connected??Ts().connected?"rgba(16,185,129,0.15)":"rgba(239,68,68,0.15)",De=_i()?.connected??Ts().connected?"#10b981":"#ef4444",Ne=`w-2 h-2 rounded-full ${_i()?.connected??Ts().connected?"bg-emerald-400":"bg-red-500"}`,me=cs()?"var(--accent-primary)":"var(--bg-secondary)",He=cs()?"#fff":"var(--text-primary)";return Te!==he.e&&dt(ae,"class",he.e=Te),ee!==he.t&&E(le,"opacity",he.t=ee),Se!==he.a&&dt(Ce,"class",he.a=Se),pe!==he.o&&E(Me,"background",he.o=pe),De!==he.i&&E(Me,"color",he.i=De),Ne!==he.n&&tt(ve,he.n=Ne),me!==he.s&&E(se,"background",he.s=me),He!==he.h&&E(se,"color",he.h=He),he},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),J(()=>ne.value=Vc()),U})(),(()=>{var U=Cv(),Y=U.firstChild,V=Y.nextSibling;return s(U,_(Xe,{get each(){return F()},children:X=>(()=>{var R=Bv(),G=R.firstChild,te=G.firstChild,ae=G.nextSibling;return R.$$click=()=>Ut(X.view),s(ae,()=>X.label),J(Q=>{var Z=X.label,ne=X.icon;return Z!==Q.e&&dt(R,"title",Q.e=Z),ne!==Q.t&&dt(te,"d",Q.t=ne),Q},{e:void 0,t:void 0}),R})()}),V),V.$$click=()=>q(!0),s(U,_(K,{get when(){return j()},get children(){return _(ms,{get children(){var X=Sv(),R=X.firstChild,G=R.firstChild,te=G.firstChild,ae=te.nextSibling,Q=G.nextSibling,Z=Q.nextSibling;return X.$$click=()=>q(!1),R.$$click=ne=>ne.stopPropagation(),ae.$$click=()=>q(!1),s(Z,_(Xe,{each:H,children:ne=>(()=>{var $e=Nv(),re=$e.firstChild,de=re.firstChild,le=de.firstChild,xe=de.nextSibling,ye=re.nextSibling,ke=ye.firstChild;return s(xe,()=>ne.label),ye.$$click=()=>Xg(ne.id),J(ge=>{var Ce=$i(ne.id)?"var(--bg-secondary)":"transparent",_e=ne.icon,Me=$i(ne.id)?"var(--warning-color)":"var(--text-muted)",ve=$i(ne.id)?"Remove from favorites":"Add to favorites",be=$i(ne.id)?"currentColor":"none";return Ce!==ge.e&&E($e,"background",ge.e=Ce),_e!==ge.t&&dt(le,"d",ge.t=_e),Me!==ge.a&&E(ye,"color",ge.a=Me),ve!==ge.o&&dt(ye,"title",ge.o=ve),be!==ge.i&&dt(ke,"fill",ge.i=be),ge},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),$e})()})),X}})}}),null),U})()]};ut(["click","input"]);var zv=w('<div class="w-full bg-gradient-to-r from-sky-500 to-blue-600 text-white py-3 px-6 cursor-pointer transition-all hover:opacity-90"style="box-shadow:0 2px 8px rgba(14, 165, 233, 0.3)"><div class="flex items-center justify-between max-w-7xl mx-auto"><div class="flex items-center gap-3"><span class=text-xl></span><div><div class=font-semibold> New version available: v<!>  Click to view release notes and update</div><div class="text-xs opacity-90 mt-0.5">Your version: v<!>  Update is safe and non-disruptive</div></div></div><button class="ml-4 px-3 py-1 rounded hover:bg-white/20 transition-colors text-sm"title="Dismiss for 6 hours">');const Fv=()=>{const[e,t]=W(!1),[r,l]=W(!1);zt(()=>{const i=localStorage.getItem("kubegraf:updateDismissedUntil");if(i){const n=parseInt(i,10);Date.now()<n?l(!0):localStorage.removeItem("kubegraf:updateDismissedUntil")}});const a=()=>{const i=Date.now()+216e5;localStorage.setItem("kubegraf:updateDismissedUntil",i.toString()),l(!0)},m=()=>{t(!0)},d=ah();return[_(K,{get when(){return Re(()=>!!(d&&d.updateAvailable))()&&!r()},get children(){var i=zv(),n=i.firstChild,g=n.firstChild,v=g.firstChild,p=v.nextSibling,y=p.firstChild,x=y.firstChild,M=x.nextSibling;M.nextSibling;var b=y.nextSibling,o=b.firstChild,c=o.nextSibling;c.nextSibling;var u=g.nextSibling;return i.$$click=m,s(y,()=>d?.latestVersion,M),s(b,()=>d?.currentVersion,c),u.$$click=h=>{h.stopPropagation(),a()},i}}),_(K,{get when(){return e()},get children(){return _(Gc,{get isOpen(){return e()},onClose:()=>t(!1),updateInfo:d})}})]};ut(["click"]);var Hv=w('<svg class="w-6 h-6"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><rect x=4 y=4 width=16 height=16 rx=2></rect><rect x=9 y=9 width=6 height=6></rect><line x1=9 y1=1 x2=9 y2=4></line><line x1=15 y1=1 x2=15 y2=4></line><line x1=9 y1=20 x2=9 y2=23></line><line x1=15 y1=20 x2=15 y2=23></line><line x1=20 y1=9 x2=23 y2=9></line><line x1=20 y1=14 x2=23 y2=14></line><line x1=1 y1=9 x2=4 y2=9></line><line x1=1 y1=14 x2=4 y2=14>'),jv=w('<svg class="w-6 h-6"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><rect x=3 y=4 width=18 height=16 rx=2></rect><line x1=7 y1=8 x2=7 y2=16></line><line x1=11 y1=8 x2=11 y2=16></line><line x1=15 y1=8 x2=15 y2=16></line><line x1=3 y1=12 x2=21 y2=12>'),Uv=w('<svg class="w-6 h-6"viewBox="0 0 24 24"fill=currentColor><path d="M12 2L3 7v10l9 5 9-5V7l-9-5zm0 2.18l6.9 3.85L12 11.9 5.1 8.03 12 4.18zM5 9.48l6 3.35v6.7l-6-3.35v-6.7zm8 10.05v-6.7l6-3.35v6.7l-6 3.35z">'),Vv=w('<svg class="w-6 h-6"viewBox="0 0 24 24"fill=currentColor><path d="M4 4h16v4H4V4zm0 6h16v4H4v-4zm0 6h16v4H4v-4z"></path><circle cx=6 cy=6 r=1></circle><circle cx=6 cy=12 r=1></circle><circle cx=6 cy=18 r=1>'),Wv=w('<svg class="w-5 h-5"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z">'),qv=w('<svg class="w-5 h-5"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1=12 y1=9 x2=12 y2=13></line><line x1=12 y1=17 x2=12.01 y2=17>'),Kv=w('<svg class="w-4 h-4"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><polyline points="20 6 9 17 4 12">'),Yv=w('<svg class="w-4 h-4"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><line x1=18 y1=6 x2=6 y2=18></line><line x1=6 y1=6 x2=18 y2=18>'),Gv=w('<div class="text-sm mt-1"style=color:var(--text-muted)>'),Jv=w('<div class="metric-card card-hover cursor-pointer p-6"><div class="flex items-start justify-between"><div><div class="text-sm font-medium"style=color:var(--text-muted)></div><div class="text-3xl font-bold mt-2"></div></div><div class="w-12 h-12 rounded-xl flex items-center justify-center">'),Xv=w('<div class="space-y-2 max-h-64 overflow-auto">'),Zv=w('<div class=space-y-6><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Dashboard</h1><p style=color:var(--text-secondary)>Cluster overview and health monitoring</p></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"></div><div class="card p-6"><h2 class="text-lg font-semibold mb-4"style=color:var(--text-primary)>Resource Overview</h2><div class="grid grid-cols-2 md:grid-cols-5 gap-4"><div class="p-4 rounded-lg text-center cursor-pointer hover:opacity-80 transition-opacity"style=background:var(--bg-tertiary)><div class="text-3xl font-bold"style=color:#06b6d4></div><div class="text-sm mt-1"style=color:var(--text-secondary)>Pods</div></div><div class="p-4 rounded-lg text-center cursor-pointer hover:opacity-80 transition-opacity"style=background:var(--bg-tertiary)><div class="text-3xl font-bold"style=color:#3b82f6></div><div class="text-sm mt-1"style=color:var(--text-secondary)>Deployments</div></div><div class="p-4 rounded-lg text-center cursor-pointer hover:opacity-80 transition-opacity"style=background:var(--bg-tertiary)><div class="text-3xl font-bold"style=color:#8b5cf6></div><div class="text-sm mt-1"style=color:var(--text-secondary)>Services</div></div><div class="p-4 rounded-lg text-center cursor-pointer hover:opacity-80 transition-opacity"style=background:var(--bg-tertiary)><div class="text-3xl font-bold"style=color:#22c55e></div><div class="text-sm mt-1"style=color:var(--text-secondary)>Nodes</div></div><div class="p-4 rounded-lg text-center cursor-pointer hover:opacity-80 transition-opacity"style=background:var(--bg-tertiary)><div class="text-3xl font-bold"style=color:#f59e0b>$</div><div class="text-sm mt-1"style=color:var(--text-secondary)>Est. Monthly Cost</div></div></div></div><div class="grid grid-cols-1 lg:grid-cols-2 gap-6"><div class="card p-6"><h2 class="text-lg font-semibold mb-4 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><path d="M12 2a10 10 0 1 0 10 10H12V2z"></path><path d="M12 2a10 10 0 0 1 10 10"></path><circle cx=12 cy=12 r=3></circle></svg>AI Insights & Recommendations</h2><div class=space-y-3></div></div><div class="card p-6"><h2 class="text-lg font-semibold mb-4 flex items-center gap-2 cursor-pointer hover:opacity-80"style=color:var(--text-primary)>Security Overview<svg class="w-4 h-4 ml-auto"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><path d="M9 18l6-6-6-6"></path></svg></h2><div class=space-y-4><div class="flex items-center justify-between p-4 rounded-lg"style=background:var(--bg-tertiary)><span style=color:var(--text-secondary)>Security Score</span><span class="text-2xl font-bold">/100</span></div><div class=space-y-2></div></div></div></div><div class="card p-6"><h2 class="text-lg font-semibold mb-4"style=color:var(--text-primary)>Recent Events'),Qv=w('<ul class="mt-2 text-xs space-y-1"style=color:var(--text-muted)>'),ef=w('<button class="mt-3 px-3 py-1.5 text-xs font-medium rounded-md transition-all hover:opacity-80"> '),tf=w('<div class="p-4 rounded-lg border"><div class="flex items-start gap-3"><div></div><div class=flex-1><div class=font-medium></div><div class="text-sm mt-1"style=color:var(--text-secondary)>'),rf=w('<li class="flex items-center gap-2"><span class="w-1 h-1 rounded-full">'),sf=w('<span class="text-xs px-1.5 py-0.5 rounded"style=background:var(--bg-tertiary);color:var(--text-muted)>'),nf=w('<div class="flex items-center justify-between p-3 rounded-lg"style=background:var(--bg-secondary)><div class="flex items-center gap-2"><span></span><span style=color:var(--text-primary)></span></div><span>'),lf=w('<div class="text-center py-8"style=color:var(--text-muted)>No recent events'),of=w('<div class="flex items-start gap-3 p-3 rounded-lg"style=background:var(--bg-secondary)><span></span><div class="flex-1 min-w-0"><div class="text-sm font-medium truncate"style=color:var(--text-primary)>: </div><div class="text-xs truncate"style=color:var(--text-muted)>');const af=()=>Hv(),cf=()=>jv(),df=()=>Uv(),uf=()=>Vv(),pa=()=>Wv(),nn=()=>qv(),ll=()=>Kv(),ma=()=>Yv(),ln=e=>(()=>{var t=Jv(),r=t.firstChild,l=r.firstChild,a=l.firstChild,m=a.nextSibling,d=l.nextSibling;return Rt(t,"click",e.onClick,!0),s(a,()=>e.label),s(m,()=>e.value),s(l,_(K,{get when(){return e.subtext},get children(){var i=Gv();return s(i,()=>e.subtext),i}}),null),s(d,()=>e.icon({})),J(i=>{var n=`4px solid ${e.color}`,g=e.color,v=`${e.color}20`,p=e.color;return n!==i.e&&E(t,"border-left",i.e=n),g!==i.t&&E(m,"color",i.t=g),v!==i.a&&E(d,"background",i.a=v),p!==i.o&&E(d,"color",i.o=p),i},{e:void 0,t:void 0,a:void 0,o:void 0}),t})(),hf=()=>{const[e,{refetch:t}]=it(()=>{const C=nr(),k=yr();return{context:C,refresh:k}},async()=>{try{const C=await Fe.getMetrics();return console.log("Dashboard: Metrics fetched:",C),C}catch(C){throw console.error("Dashboard: Error fetching metrics:",C),C}}),[r,{refetch:l}]=it(()=>{const C=nr(),k=yr();return{context:C,refresh:k}},async()=>Fe.getPods("_all")),[a,{refetch:m}]=it(()=>{const C=nr(),k=yr();return{context:C,refresh:k}},async()=>Fe.getDeployments("_all")),[d,{refetch:i}]=it(()=>{const C=nr(),k=yr();return{context:C,refresh:k}},async()=>Fe.getServices("_all")),n=Is,[g,{refetch:v}]=it(()=>{const C=nr(),k=yr();return{context:C,refresh:k}},async()=>Fe.getEvents()),[p,{refetch:y}]=it(()=>{const C=nr(),k=yr();return{context:C,refresh:k}},async()=>{try{return await Fe.getClusterCost()}catch(C){return console.error("Dashboard cost API error:",C),null}});It(()=>{console.log("Dashboard: Metrics resource state:",{loading:e.loading,error:e.error,hasData:!!e(),data:e(),context:nr(),refresh:yr()})}),zt(()=>{console.log("Dashboard: Component mounted, refetching metrics"),t()});const x=()=>{const C=r();return!C||!Array.isArray(C)?0:C.filter(k=>k.status==="Running").length},M=()=>{const C=r();return Array.isArray(C)?C.length:0},b=()=>{const C=n();return!C||!Array.isArray(C)?0:C.filter(k=>k.status==="Ready").length},o=()=>{const C=n();return Array.isArray(C)?C.length:0},c=()=>{const C=g();return Array.isArray(C)?C.slice(0,10):[]},u=et(()=>{const C=r()||[],k=[],S=C.filter(T=>!T.securityContext);S.length>0?k.push({name:"Security Context Missing",status:"fail",severity:"critical",count:S.length,details:`${S.length} pods have no security context defined`}):C.length>0&&k.push({name:"Security Context",status:"pass",severity:"critical",details:"All pods have security context configured"});const L=C.filter(T=>T.securityContext?.runAsRoot===!0||!T.securityContext?.runAsNonRoot&&!T.securityContext?.runAsUser);L.length>0?k.push({name:"Running as Root",status:"fail",severity:"critical",count:L.length,details:`${L.length} pods may run as root user`}):C.length>0&&k.push({name:"Non-Root User",status:"pass",severity:"critical",details:"All pods run as non-root"});const P=C.filter(T=>T.privileged===!0);P.length>0?k.push({name:"Privileged Containers",status:"fail",severity:"critical",count:P.length,details:`${P.length} containers running in privileged mode`}):C.length>0&&k.push({name:"No Privileged Containers",status:"pass",severity:"critical",details:"No privileged containers detected"});const I=C.filter(T=>!T.resources?.limits);I.length>0?k.push({name:"Resource Limits Missing",status:"warning",severity:"high",count:I.length,details:`${I.length} pods without resource limits`}):C.length>0&&k.push({name:"Resource Limits",status:"pass",severity:"high",details:"All pods have resource limits configured"});const D=C.filter(T=>T.securityContext?.readOnlyRootFilesystem!==!0);return D.length>0&&C.length>0&&k.push({name:"Writable Root Filesystem",status:"warning",severity:"medium",count:D.length,details:`${D.length} pods have writable root filesystem`}),C.length===0&&k.push({name:"No Pods to Analyze",status:"warning",severity:"low",details:"No pods found for security analysis"}),k}),h=et(()=>{const C=u();if(C.length===0)return 100;const k={critical:25,high:15,medium:10,low:5};let S=0,L=0;return C.forEach(P=>{const I=k[P.severity];S+=I,P.status==="pass"?L+=I:P.status==="warning"&&(L+=I*.5)}),S>0?Math.round(L/S*100):100}),f=()=>{const C=[],k=r()||[],S=n()||[],L=e(),P=k.filter(H=>H.status==="Pending");P.length>0&&C.push({type:"warning",title:"Pending Pods Detected",message:`${P.length} pods are in Pending state.`,details:P.slice(0,3).map(H=>`${H.namespace}/${H.name}`),navigateTo:"pods",actionLabel:"View Pods"});const I=k.filter(H=>H.status==="Failed"||H.status==="Error"||H.status==="CrashLoopBackOff");I.length>0&&C.push({type:"error",title:"Failed Pods Alert",message:`${I.length} pods are failing. Immediate attention recommended.`,details:I.slice(0,3).map(H=>`${H.namespace}/${H.name} (${H.status})`),navigateTo:"pods",actionLabel:"View Failed Pods"});const D=S.filter(H=>H.status!=="Ready");D.length>0&&C.push({type:"error",title:"Node Health Issue",message:`${D.length} nodes are not ready.`,details:D.slice(0,3).map(H=>H.name),navigateTo:"nodes",actionLabel:"View Nodes"});const T=L?.cpu!=null?typeof L.cpu=="object"?L.cpu.percentage:Number(L.cpu):null,B=L?.memory!=null?typeof L.memory=="object"?L.memory.percentage:Number(L.memory):null;T&&T>80&&C.push({type:"warning",title:"High CPU Usage",message:`Cluster CPU at ${T.toFixed(1)}%. Consider scaling or optimizing workloads.`}),B&&B>85&&C.push({type:"warning",title:"High Memory Usage",message:`Cluster memory at ${B.toFixed(1)}%. Consider adding capacity.`});const N=u().filter(H=>H.status==="fail"&&H.severity==="critical");N.length>0&&C.push({type:"error",title:"Critical Security Issues",message:`${N.length} critical security findings require immediate attention.`,details:N.map(H=>`${H.name}${H.count?` (${H.count} affected)`:""}`),navigateTo:"security",actionLabel:"View Security Details"});const O=u().filter(H=>H.status==="fail"&&H.severity==="high");return O.length>0&&N.length===0&&C.push({type:"warning",title:"Security Warnings",message:`${O.length} high-severity security findings detected.`,details:O.map(H=>H.name),navigateTo:"security",actionLabel:"View Security Details"}),C.length===0&&C.push({type:"success",title:"Cluster Healthy",message:"All systems operating normally. No issues detected."}),C},$=C=>C>=80?"var(--success-color)":C>=60?"var(--warning-color)":"var(--error-color)";return(()=>{var C=Zv(),k=C.firstChild,S=k.firstChild;S.nextSibling;var L=k.nextSibling,P=L.nextSibling,I=P.firstChild,D=I.nextSibling,T=D.firstChild,B=T.firstChild;B.nextSibling;var N=T.nextSibling,O=N.firstChild;O.nextSibling;var H=N.nextSibling,A=H.firstChild;A.nextSibling;var z=H.nextSibling,F=z.firstChild;F.nextSibling;var j=z.nextSibling,q=j.firstChild;q.firstChild,q.nextSibling;var U=P.nextSibling,Y=U.firstChild,V=Y.firstChild,X=V.nextSibling,R=Y.nextSibling,G=R.firstChild,te=G.firstChild,ae=G.nextSibling,Q=ae.firstChild,Z=Q.firstChild,ne=Z.nextSibling,$e=ne.firstChild,re=Q.nextSibling,de=U.nextSibling;return de.firstChild,s(L,_(ln,{label:"CPU Usage",get value(){if(e.loading)return"...";if(e.error)return"Error";const le=e()?.cpu;return le?typeof le=="object"&&"percentage"in le?`${le.percentage.toFixed(1)}%`:`${Number(le).toFixed(1)}%`:(console.log("Dashboard: CPU is null/undefined, metrics:",e()),"--")},subtext:"Cluster average",color:"#06b6d4",icon:af}),null),s(L,_(ln,{label:"Memory Usage",get value(){if(e.loading)return"...";if(e.error)return"Error";const le=e()?.memory;return le?typeof le=="object"&&"percentage"in le?`${le.percentage.toFixed(1)}%`:`${Number(le).toFixed(1)}%`:(console.log("Dashboard: Memory is null/undefined, metrics:",e()),"--")},subtext:"Cluster average",color:"#8b5cf6",icon:cf}),null),s(L,_(ln,{label:"Running Pods",get value(){return`${x()}/${M()}`},get subtext(){return`${M()>0?(x()/M()*100).toFixed(0):0}% healthy`},color:"#22c55e",icon:df,onClick:()=>Ut("pods")}),null),s(L,_(ln,{label:"Nodes",get value(){return Re(()=>!!n.loading)()?"...":`${b()}/${o()}`},get subtext(){return Re(()=>!!n.loading)()?"Loading...":Re(()=>b()===o()&&o()>0)()?"All healthy":o()===0?"No nodes":"Some unhealthy"},get color(){return Re(()=>!!n.loading)()?"#6b7280":b()===o()&&o()>0?"#22c55e":"#f59e0b"},icon:uf,onClick:()=>Ut("nodes")}),null),T.$$click=()=>Ut("pods"),s(B,M),N.$$click=()=>Ut("deployments"),s(O,()=>(a()||[]).length),H.$$click=()=>Ut("services"),s(A,()=>(d()||[]).length),z.$$click=()=>Ut("nodes"),s(F,(()=>{var le=Re(()=>!!n.loading);return()=>le()?"...":o()})()),j.$$click=()=>Ut("cost"),s(q,()=>p()?.monthlyCost?.toFixed(0)||"--",null),s(X,_(Xe,{get each(){return f()},children:le=>(()=>{var xe=tf(),ye=xe.firstChild,ke=ye.firstChild,ge=ke.nextSibling,Ce=ge.firstChild,_e=Ce.nextSibling;return s(ke,(()=>{var Me=Re(()=>le.type==="error");return()=>Me()?_(nn,{}):Re(()=>le.type==="warning")()?_(nn,{}):Re(()=>le.type==="success")()?_(ll,{}):_(pa,{})})()),s(Ce,()=>le.title),s(_e,()=>le.message),s(ge,_(K,{get when(){return Re(()=>!!le.details)()&&le.details.length>0},get children(){var Me=Qv();return s(Me,_(Xe,{get each(){return le.details},children:ve=>(()=>{var be=rf(),ce=be.firstChild;return s(be,ve,null),J(Ae=>E(ce,"background",le.type==="error"?"var(--error-color)":le.type==="warning"?"var(--warning-color)":"var(--accent-primary)")),be})()})),Me}}),null),s(ge,_(K,{get when(){return Re(()=>!!le.navigateTo)()&&le.actionLabel},get children(){var Me=ef(),ve=Me.firstChild;return Me.$$click=()=>Ut(le.navigateTo),s(Me,()=>le.actionLabel,ve),J(be=>{var ce=le.type==="error"?"rgba(239, 68, 68, 0.2)":le.type==="warning"?"rgba(245, 158, 11, 0.2)":"rgba(6, 182, 212, 0.2)",Ae=le.type==="error"?"var(--error-color)":le.type==="warning"?"var(--warning-color)":"var(--accent-primary)",se=`1px solid ${le.type==="error"?"rgba(239, 68, 68, 0.3)":le.type==="warning"?"rgba(245, 158, 11, 0.3)":"rgba(6, 182, 212, 0.3)"}`;return ce!==be.e&&E(Me,"background",be.e=ce),Ae!==be.t&&E(Me,"color",be.t=Ae),se!==be.a&&E(Me,"border",be.a=se),be},{e:void 0,t:void 0,a:void 0}),Me}}),null),J(Me=>{var ve=le.type==="error"?"rgba(239, 68, 68, 0.1)":le.type==="warning"?"rgba(245, 158, 11, 0.1)":le.type==="success"?"rgba(34, 197, 94, 0.1)":"rgba(6, 182, 212, 0.1)",be=le.type==="error"?"rgba(239, 68, 68, 0.3)":le.type==="warning"?"rgba(245, 158, 11, 0.3)":le.type==="success"?"rgba(34, 197, 94, 0.3)":"rgba(6, 182, 212, 0.3)",ce=le.type==="error"?"var(--error-color)":le.type==="warning"?"var(--warning-color)":le.type==="success"?"var(--success-color)":"var(--accent-primary)",Ae=le.type==="error"?"var(--error-color)":le.type==="warning"?"var(--warning-color)":le.type==="success"?"var(--success-color)":"var(--accent-primary)";return ve!==Me.e&&E(xe,"background",Me.e=ve),be!==Me.t&&E(xe,"border-color",Me.t=be),ce!==Me.a&&E(ke,"color",Me.a=ce),Ae!==Me.o&&E(Ce,"color",Me.o=Ae),Me},{e:void 0,t:void 0,a:void 0,o:void 0}),xe})()})),G.$$click=()=>Ut("security"),s(G,_(pa,{}),te),s(ne,h,$e),s(re,_(Xe,{get each(){return u()},children:le=>(()=>{var xe=nf(),ye=xe.firstChild,ke=ye.firstChild,ge=ke.nextSibling,Ce=ye.nextSibling;return s(ke,()=>le.severity.toUpperCase()),s(ge,()=>le.name),s(ye,_(K,{get when(){return le.count},get children(){var _e=sf();return s(_e,()=>le.count),_e}}),null),s(Ce,(()=>{var _e=Re(()=>le.status==="pass");return()=>_e()?_(ll,{}):Re(()=>le.status==="fail")()?_(ma,{}):_(nn,{})})(),null),s(Ce,(()=>{var _e=Re(()=>le.status==="pass");return()=>_e()?"Pass":le.status==="fail"?"Fail":"Warning"})(),null),J(_e=>{var Me=`px-1.5 py-0.5 rounded text-xs font-medium ${le.severity==="critical"?"bg-red-500/20 text-red-400":le.severity==="high"?"bg-orange-500/20 text-orange-400":le.severity==="medium"?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"}`,ve=`flex items-center gap-1 text-sm ${le.status==="pass"?"text-green-400":le.status==="fail"?"text-red-400":"text-yellow-400"}`;return Me!==_e.e&&tt(ke,_e.e=Me),ve!==_e.t&&tt(Ce,_e.t=ve),_e},{e:void 0,t:void 0}),xe})()})),s(de,_(K,{get when(){return c().length>0},get fallback(){return lf()},get children(){var le=Xv();return s(le,_(Xe,{get each(){return c()},children:xe=>(()=>{var ye=of(),ke=ye.firstChild,ge=ke.nextSibling,Ce=ge.firstChild,_e=Ce.firstChild,Me=Ce.nextSibling;return s(ke,(()=>{var ve=Re(()=>xe.type==="Warning");return()=>ve()?_(nn,{}):Re(()=>xe.type==="Normal")()?_(ll,{}):_(ma,{})})()),s(Ce,()=>xe.reason,_e),s(Ce,()=>xe.object,null),s(Me,()=>xe.message),J(()=>tt(ke,`mt-0.5 ${xe.type==="Warning"?"text-yellow-400":xe.type==="Normal"?"text-green-400":"text-red-400"}`)),ye})()})),le}}),null),J(le=>E(ne,"color",$(h()))),C})()};ut(["click"]);var gf=w('<div class=p-6><div class=mb-6><h1 class="text-2xl font-bold mb-1">Cluster Overview</h1><p class="text-sm opacity-70">Real-time cluster health and resource summary'),vf=w('<div class="text-center py-12"><div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-white"></div><p class="mt-4 text-sm opacity-70">Loading cluster metrics...'),ff=w('<div><div class="flex items-center justify-between"><div><h2 class="text-lg font-semibold mb-1">Cluster Health Score</h2><p class="text-sm opacity-70">Overall cluster health indicator</p></div><div class=text-right><div>%</div><div class="text-xs opacity-70 mt-1">Health'),pf=w('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"><div class="bg-white/5 rounded-lg p-4 border border-white/10"><div class="flex items-center justify-between mb-2"><h3 class="font-semibold text-sm">Pods</h3><svg class="w-5 h-5 opacity-70"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><div class="text-2xl font-bold mb-1"></div><div class="text-xs opacity-70 space-y-1"><div class="flex justify-between"><span>Running:</span><span class=text-green-400></span></div><div class="flex justify-between"><span>Pending:</span><span class=text-yellow-400></span></div><div class="flex justify-between"><span>Failed:</span><span class=text-red-400></span></div></div></div><div class="bg-white/5 rounded-lg p-4 border border-white/10"><div class="flex items-center justify-between mb-2"><h3 class="font-semibold text-sm">Deployments</h3><svg class="w-5 h-5 opacity-70"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg></div><div class="text-2xl font-bold mb-1"></div><div class="text-xs opacity-70 space-y-1"><div class="flex justify-between"><span>Ready:</span><span class=text-green-400></span></div><div class="flex justify-between"><span>Not Ready:</span><span class=text-red-400></span></div></div></div><div class="bg-white/5 rounded-lg p-4 border border-white/10"><div class="flex items-center justify-between mb-2"><h3 class="font-semibold text-sm">Services</h3><svg class="w-5 h-5 opacity-70"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"></path></svg></div><div class="text-2xl font-bold mb-1"></div><div class="text-xs opacity-70">Total services</div></div><div class="bg-white/5 rounded-lg p-4 border border-white/10"><div class="flex items-center justify-between mb-2"><h3 class="font-semibold text-sm">Nodes</h3><svg class="w-5 h-5 opacity-70"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path></svg></div><div class="text-2xl font-bold mb-1"></div><div class="text-xs opacity-70 space-y-1"><div class="flex justify-between"><span>Ready:</span><span class=text-green-400></span></div><div class="flex justify-between"><span>Not Ready:</span><span class=text-red-400>'),mf=w('<div class="bg-white/5 rounded-lg p-4 border border-white/10"><h3 class="font-semibold mb-3">Quick Actions</h3><div class="grid grid-cols-2 md:grid-cols-4 gap-2"><a href=#pods class="px-3 py-2 bg-blue-600/20 hover:bg-blue-600/30 rounded text-sm text-center transition-colors">View Pods</a><a href=#deployments class="px-3 py-2 bg-blue-600/20 hover:bg-blue-600/30 rounded text-sm text-center transition-colors">View Deployments</a><a href=#services class="px-3 py-2 bg-blue-600/20 hover:bg-blue-600/30 rounded text-sm text-center transition-colors">View Services</a><a href=#nodes class="px-3 py-2 bg-blue-600/20 hover:bg-blue-600/30 rounded text-sm text-center transition-colors">View Nodes');const bf=()=>{const[e]=it(async()=>{try{const[a,m,d,i]=await Promise.all([fetch("/api/pods").then(p=>p.json()).catch(()=>[]),fetch("/api/deployments").then(p=>p.json()).catch(()=>[]),fetch("/api/services").then(p=>p.json()).catch(()=>[]),fetch("/api/nodes").then(p=>p.json()).catch(()=>[])]),n={total:a.length,running:a.filter(p=>p.status==="Running").length,pending:a.filter(p=>p.status==="Pending").length,failed:a.filter(p=>p.status==="Failed"||p.status==="Error").length},g={total:m.length,ready:m.filter(p=>{const[y,x]=p.ready.split("/").map(Number);return y===x&&x>0}).length,notReady:m.filter(p=>{const[y,x]=p.ready.split("/").map(Number);return y!==x||x===0}).length},v={total:i.length,ready:i.filter(p=>p.status==="Ready").length,notReady:i.filter(p=>p.status!=="Ready").length};return{pods:n,deployments:g,services:{total:d.length},nodes:v}}catch(a){return console.error("Failed to fetch cluster metrics:",a),null}}),t=et(()=>{const a=e();if(!a)return 0;let m=0,d=0;if(a.pods.total>0){const i=a.pods.running/a.pods.total*100;m+=i*.4,d+=.4}if(a.deployments.total>0){const i=a.deployments.ready/a.deployments.total*100;m+=i*.3,d+=.3}if(a.nodes.total>0){const i=a.nodes.ready/a.nodes.total*100;m+=i*.3,d+=.3}return d>0?Math.round(m/d):0}),r=a=>a>=90?"text-green-400":a>=70?"text-yellow-400":"text-red-400",l=a=>a>=90?"bg-green-500/20 border-green-500/50":a>=70?"bg-yellow-500/20 border-yellow-500/50":"bg-red-500/20 border-red-500/50";return(()=>{var a=gf();return a.firstChild,s(a,_(K,{get when(){return Re(()=>!e.loading)()&&e()},get fallback(){return vf()},children:()=>{const m=e(),d=t();return[(()=>{var i=ff(),n=i.firstChild,g=n.firstChild,v=g.nextSibling,p=v.firstChild,y=p.firstChild;return s(p,d,y),J(x=>{var M=`mb-6 p-6 rounded-lg border ${l(d)}`,b=`text-4xl font-bold ${r(d)}`;return M!==x.e&&tt(i,x.e=M),b!==x.t&&tt(p,x.t=b),x},{e:void 0,t:void 0}),i})(),(()=>{var i=pf(),n=i.firstChild,g=n.firstChild,v=g.nextSibling,p=v.nextSibling,y=p.firstChild,x=y.firstChild,M=x.nextSibling,b=y.nextSibling,o=b.firstChild,c=o.nextSibling,u=b.nextSibling,h=u.firstChild,f=h.nextSibling,$=n.nextSibling,C=$.firstChild,k=C.nextSibling,S=k.nextSibling,L=S.firstChild,P=L.firstChild,I=P.nextSibling,D=L.nextSibling,T=D.firstChild,B=T.nextSibling,N=$.nextSibling,O=N.firstChild,H=O.nextSibling,A=N.nextSibling,z=A.firstChild,F=z.nextSibling,j=F.nextSibling,q=j.firstChild,U=q.firstChild,Y=U.nextSibling,V=q.nextSibling,X=V.firstChild,R=X.nextSibling;return s(v,()=>m.pods.total),s(M,()=>m.pods.running),s(c,()=>m.pods.pending),s(f,()=>m.pods.failed),s(k,()=>m.deployments.total),s(I,()=>m.deployments.ready),s(B,()=>m.deployments.notReady),s(H,()=>m.services.total),s(F,()=>m.nodes.total),s(Y,()=>m.nodes.ready),s(R,()=>m.nodes.notReady),i})(),mf()]}}),null),a})()};function Fr(e,t,r={}){const{ttl:l=15e3,backgroundRefresh:a=!0}=r,[m,d]=W(void 0),[i,n]=W(!1),[g,v]=W(void 0),[p,y]=W(!0),[x,M]=W(""),b=()=>{const f=oa(e);return f?(d(f.data),v(void 0),!0):!1},o=async(f=!1)=>{f||n(!0),v(void 0);try{const $=await t();uh(e,$),d($),p()&&y(!1)}catch($){const C=$ instanceof Error?$:new Error(String($));v(C),m()||b()}finally{f||n(!1)}},c=async(f=!1)=>{const $=Rn(),C=$!==x();if(f||C){M($),await o(!1);return}m()?M($):b()&&a?(M($),y(!1),o(!0).catch(S=>{console.warn(`Background refresh failed for ${e}:`,S)})):(M($),await o(!1))},u=async()=>{await o(!1)};let h=null;return It(()=>{const f=Rn(),$=f!==x();h&&(clearInterval(h),h=null),$&&x()!==""&&(console.log(`[${e}] Cache key changed from ${x()} to ${f}, clearing data and fetching fresh`),d(void 0),v(void 0)),c($),a&&(h=setInterval(()=>{const C=oa(e);C&&Date.now()-C.lastUpdated>=l&&o(!0).catch(S=>{console.warn(`Background refresh failed for ${e}:`,S)})},Math.min(l,5e3)))}),wr(()=>{h&&clearInterval(h)}),{data:m,loading:i,error:g,refetch:u}}function xf(e=!1,t=!1,r=!1){return e?"var(--bg-secondary)":t?"rgba(239, 68, 68, 0.08)":r?"rgba(245, 158, 11, 0.08)":"var(--bg-secondary)"}var yf=w('<svg class="w-4 h-4 text-green-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 13l4 4L19 7">'),_f=w("<span class=text-green-400>Copied!"),$f=w('<div class=relative><div class="flex items-center justify-end gap-2 mb-2"><button class="flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm transition-colors"style=background:var(--bg-tertiary);color:var(--text-secondary)></button><button class="flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm transition-colors"style=background:var(--bg-tertiary);color:var(--text-secondary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>Download</button></div><div class="code-block overflow-auto max-h-[60vh]"><pre class="text-sm leading-relaxed">'),wf=w('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z">');const gr=e=>{const[t,r]=W(!1),l=async()=>{await navigator.clipboard.writeText(e.yaml),r(!0),e.onCopy?.(),setTimeout(()=>r(!1),2e3)},a=()=>{const i=new Blob([e.yaml],{type:"text/yaml"}),n=URL.createObjectURL(i),g=document.createElement("a");g.href=n,g.download=`${e.title||"resource"}.yaml`,g.click(),URL.revokeObjectURL(n)},m=i=>i.split(`
`).map(n=>{if(n.trim().startsWith("#"))return`<span class="text-gray-500">${d(n)}</span>`;const g=n.match(/^(\s*)([a-zA-Z0-9_-]+)(:)/);if(g){const[,v,p,y]=g,x=n.slice(g[0].length);return`${v}<span class="text-cyan-400">${d(p)}</span>${y}<span class="text-amber-300">${d(x)}</span>`}return n.trim().startsWith("-")?`<span class="text-purple-400">${d(n)}</span>`:d(n)}).join(`
`),d=i=>i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");return(()=>{var i=$f(),n=i.firstChild,g=n.firstChild,v=g.nextSibling,p=n.nextSibling,y=p.firstChild;return g.$$click=l,s(g,_(K,{get when(){return t()},get fallback(){return[wf(),"Copy"]},get children(){return[yf(),_f()]}})),v.$$click=a,J(()=>y.innerHTML=m(e.yaml)),i})()};ut(["click"]);var Sf=w("<div class=text-red-400>Error: "),Cf=w("<pre class=whitespace-pre-wrap>"),kf=w('<div class="flex flex-col h-[60vh]"><div class="flex items-center justify-end gap-2 mb-2"><button class="flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm transition-colors"style=background:var(--bg-tertiary);color:var(--text-secondary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="flex-1 font-mono text-sm p-4 rounded-lg overflow-auto"style="background:#0d1117;color:#c9d1d9;border:1px solid var(--border-color)">'),Mf=w('<div class="flex items-center justify-center h-full"><div class=spinner>');const Sr=e=>{const[t]=it(()=>({type:e.resourceType,name:e.name,ns:e.namespace,open:e.isOpen}),async m=>{if(!m.open||!m.name)return"";const d=m.ns?`&namespace=${m.ns}`:"",i=await fetch(`/api/${m.type}/describe?name=${m.name}${d}`);if(!i.ok)throw new Error("Failed to fetch describe output");return(await i.json()).describe||""}),r=async()=>{await navigator.clipboard.writeText(t()||"")},l=m=>m.split(`
`).map(d=>{const i=d.match(/^([A-Za-z][A-Za-z\s]+):\s*(.*)$/);if(i&&d.indexOf(":")<30){const[,g,v]=i;return`<span class="text-cyan-400">${a(g)}:</span> <span class="text-amber-300">${a(v)}</span>`}const n=d.match(/^(\s+)([A-Za-z][A-Za-z\s-]+):\s*(.*)$/);if(n){const[,g,v,p]=n;return`${g}<span class="text-blue-400">${a(v)}:</span> ${a(p)}`}return a(d)}).join(`
`),a=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");return _(mt,{get isOpen(){return e.isOpen},get onClose(){return e.onClose},get title(){return`Describe: ${e.name}`},size:"xl",get children(){var m=kf(),d=m.firstChild,i=d.firstChild,n=d.nextSibling;return i.$$click=r,s(n,_(K,{get when(){return!t.loading},get fallback(){return Mf()},get children(){return[_(K,{get when(){return t.error},get children(){var g=Sf();return g.firstChild,s(g,()=>t.error?.message,null),g}}),(()=>{var g=Cf();return J(()=>g.innerHTML=l(t()||"")),g})()]}})),m}})};ut(["click"]);var Af=w('<div class="fixed z-50 py-2 rounded-lg shadow-xl min-w-[180px]"style="background:var(--bg-card);border:1px solid var(--border-color);box-shadow:0 10px 40px rgba(0, 0, 0, 0.3)">'),Lf=w('<div class=relative><button class="flex items-center justify-center p-1 rounded transition-all hover:bg-opacity-80"title=Actions style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z">'),Ef=w('<div class="my-1 border-t"style=border-color:var(--border-color)>'),Tf=w("<div class=spinner style=width:16px;height:16px>"),Df=w('<button class="w-full flex items-center gap-3 px-4 py-2 text-sm transition-colors"style=background:transparent>'),Rf=w('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2>');const ba={shell:"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z",portforward:"M13 10V3L4 14h7v7l9-11h-7z",logs:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",yaml:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4",describe:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",restart:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15",delete:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",scale:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4",details:"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z",edit:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"},Jt=e=>{const[t,r]=W(!1),[l,a]=W({top:0,left:0});let m;const d=g=>{g.stopPropagation();const v=!t();if(m&&v){const p=m.getBoundingClientRect();a({top:p.bottom+4,left:p.right-180})}r(v),e.onOpenChange?.(v)},i=g=>{r(!1),e.onOpenChange?.(!1),g.onClick()},n=g=>{t()&&m&&!m.contains(g.target)&&(r(!1),e.onOpenChange?.(!1))};return typeof window<"u"&&(document.addEventListener("click",n),wr(()=>document.removeEventListener("click",n))),(()=>{var g=Lf(),v=g.firstChild;v.$$click=d;var p=m;return typeof p=="function"?dr(p,v):m=v,s(g,_(K,{get when(){return t()},get children(){return _(ms,{get children(){var y=Af();return s(y,_(Xe,{get each(){return e.actions},children:x=>[_(K,{get when(){return x.divider},get children(){return Ef()}}),(()=>{var M=Df();return M.addEventListener("mouseleave",b=>{b.currentTarget.style.background="transparent"}),M.addEventListener("mouseenter",b=>{!x.disabled&&!x.loading&&(b.currentTarget.style.background=x.variant==="danger"?"rgba(239, 68, 68, 0.1)":"var(--bg-tertiary)")}),M.$$click=()=>!x.disabled&&!x.loading&&i(x),s(M,_(K,{get when(){return x.loading},get fallback(){return(()=>{var b=Rf(),o=b.firstChild;return J(()=>dt(o,"d",ba[x.icon]||ba.details)),b})()},get children(){return Tf()}}),null),s(M,(()=>{var b=Re(()=>!!x.loading);return()=>b()?`${x.label}...`:x.label})(),null),J(b=>{var o=x.disabled||x.loading,c={"opacity-50 cursor-not-allowed":x.disabled||x.loading,"hover:bg-opacity-50":!x.disabled&&!x.loading},u=x.variant==="danger"?"var(--error-color)":"var(--text-primary)";return o!==b.e&&(M.disabled=b.e=o),b.t=Hc(M,c,b.t),u!==b.a&&E(M,"color",b.a=u),b},{e:void 0,t:void 0,a:void 0}),M})()]})),J(x=>{var M=`${l().top}px`,b=`${l().left}px`;return M!==x.e&&E(y,"top",x.e=M),b!==x.t&&E(y,"left",x.t=b),x},{e:void 0,t:void 0}),y}})}}),null),g})()};ut(["click"]);function xa(e){const t={total:e.length,ready:0,main:{total:0,ready:0},init:{total:0,ready:0},sidecar:{total:0,ready:0}};return e.forEach(r=>{t[r.type].total++,r.ready&&(t.ready++,t[r.type].ready++)}),t}function Pf(e){return`${e.ready}/${e.total}`}function If(e){return e.ready===e.total&&e.total>0?"text-green-400":e.ready===0?"text-red-400":"text-yellow-400"}var Bf=w("<span>");const ya=e=>{const t=()=>Pf(e.summary),r=()=>If(e.summary),l=()=>{switch(e.size){case"sm":return"text-xs";case"lg":return"text-base";default:return"text-sm"}};return(()=>{var a=Bf();return s(a,t),J(()=>tt(a,`font-mono font-medium ${r()} ${l()}`)),a})()};function _a(e,t){return`${e==="init"?"I":"M"}${t+1}`}function $a(e){return e.ready?e.state||"Running":e.state?e.state:"Pending"}function Nf(e){const t=e.toLowerCase();return t==="running"?"text-green-400":t==="waiting"||t==="pending"?"text-yellow-400":t==="terminated"||t==="failed"||t==="error"?"text-red-400":"text-gray-400"}function wa(e){return!e||e.length===0?"-":e.join(", ")}function Sa(e){if(!e)return"-";try{const t=new Date(e),l=new Date().getTime()-t.getTime();if(l<0)return"0s";const a=Math.floor(l/1e3),m=Math.floor(a/60),d=Math.floor(m/60),i=Math.floor(d/24);return a<60?`${a}s`:m<60?`${m}m`:d<24?`${d}h`:`${i}d`}catch{return"-"}}function Of(e,t,r){const l=[],a=[];e.forEach(d=>{d.type==="init"?l.push(d):a.push(d)});const m=[];return l.forEach((d,i)=>{const n=_a("init",i),g=t?.[d.name],v=r?.[d.name];m.push({idx:n,name:d.name,type:d.type,status:$a(d),restarts:d.restartCount||0,cpu:g?.cpu||"-",memory:g?.memory||"-",age:Sa(d.startedAt),ports:wa(v),container:d})}),a.forEach((d,i)=>{const n=_a("main",i),g=t?.[d.name],v=r?.[d.name];m.push({idx:n,name:d.name,type:d.type,status:$a(d),restarts:d.restartCount||0,cpu:g?.cpu||"-",memory:g?.memory||"-",age:Sa(d.startedAt),ports:wa(v),container:d})}),m}var zf=w('<div class=overflow-x-auto><table class="w-full border-collapse"><thead><tr class=border-b style=border-color:var(--border-color)><th class="text-left py-2 px-3 text-xs font-semibold"style=color:var(--text-muted)>IDX</th><th class="text-left py-2 px-3 text-xs font-semibold"style=color:var(--text-muted)>Name</th><th class="text-left py-2 px-3 text-xs font-semibold"style=color:var(--text-muted)>Status</th><th class="text-left py-2 px-3 text-xs font-semibold"style=color:var(--text-muted)>Restarts</th><th class="text-left py-2 px-3 text-xs font-semibold"style=color:var(--text-muted)>CPU</th><th class="text-left py-2 px-3 text-xs font-semibold"style=color:var(--text-muted)>Memory</th><th class="text-left py-2 px-3 text-xs font-semibold"style=color:var(--text-muted)>Age</th><th class="text-left py-2 px-3 text-xs font-semibold"style=color:var(--text-muted)>Ports</th></tr></thead><tbody>'),Ff=w('<tr><td colspan=8 class="py-4 text-center text-sm"style=color:var(--text-muted)>No containers found'),Hf=w('<tr class="border-b hover:opacity-80 transition-opacity cursor-pointer"style=border-color:var(--border-color)><td class="py-2 px-3 text-sm font-mono font-bold"style=color:var(--text-primary)></td><td class="py-2 px-3 text-sm"style=color:var(--text-primary)><div class="flex items-center gap-2"><span></span></div></td><td class="py-2 px-3 text-sm"><span></span></td><td class="py-2 px-3 text-sm"style=color:var(--text-primary)></td><td class="py-2 px-3 text-sm"style=color:#ec4899;font-weight:600></td><td class="py-2 px-3 text-sm"style=color:#f59e0b;font-weight:600></td><td class="py-2 px-3 text-sm"style=color:var(--text-secondary)></td><td class="py-2 px-3 text-sm font-mono"style=color:var(--text-secondary)>'),jf=w('<span class="px-1.5 py-0.5 rounded text-xs bg-blue-500/20 text-blue-400">INIT'),Uf=w("<span style=color:var(--warning-color)>");const Vf=e=>(()=>{var t=zf(),r=t.firstChild,l=r.firstChild,a=l.firstChild,m=a.firstChild,d=m.nextSibling,i=d.nextSibling,n=i.nextSibling,g=n.nextSibling,v=g.nextSibling,p=v.nextSibling;p.nextSibling;var y=l.nextSibling;return s(y,_(K,{get when(){return e.containers.length>0},get fallback(){return(()=>{var x=Ff();return x.firstChild,x})()},get children(){return _(Xe,{get each(){return e.containers},children:x=>(()=>{var M=Hf(),b=M.firstChild,o=b.nextSibling,c=o.firstChild,u=c.firstChild,h=o.nextSibling,f=h.firstChild,$=h.nextSibling,C=$.nextSibling,k=C.nextSibling,S=k.nextSibling,L=S.nextSibling;return M.$$click=()=>e.onContainerClick?.(x),s(b,()=>x.idx),s(u,()=>x.name),s(c,(()=>{var P=Re(()=>x.type==="init");return()=>P()&&jf()})(),null),s(f,()=>x.status),s($,(()=>{var P=Re(()=>x.restarts>0);return()=>P()?(()=>{var I=Uf();return s(I,()=>x.restarts),I})():x.restarts})()),s(C,()=>x.cpu),s(k,()=>x.memory),s(S,()=>x.age),s(L,()=>x.ports),J(P=>{var I=x.type==="init"?"var(--bg-secondary)":"transparent",D=Nf(x.status);return I!==P.e&&E(M,"background",P.e=I),D!==P.t&&tt(f,P.t=D),P},{e:void 0,t:void 0}),M})()})}})),t})();ut(["click"]);var Wf=w('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span></span><span>'),qf=w('<div class="card p-4"><h3 class="font-semibold mb-3 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>Active Port Forwards</h3><div class="flex flex-wrap gap-2">'),Kf=w('<div class="w-full overflow-x-auto"style=margin:0;padding:0><table class=w-full style=width:100%;table-layout:auto;background:var(--bg-primary);border-collapse:collapse;margin:0;padding:0><thead><tr style=font-weight:900;color:#0ea5e9><th class="cursor-pointer select-none whitespace-nowrap"style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none"><div class="flex items-center gap-1">Status </div></th><th class=whitespace-nowrap style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none">Ready</th><th class=whitespace-nowrap style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none">IP</th><th class="cursor-pointer select-none whitespace-nowrap"style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none"><div class="flex items-center gap-1">CPU </div></th><th class="cursor-pointer select-none whitespace-nowrap"style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none"><div class="flex items-center gap-1">Mem </div></th><th class="cursor-pointer select-none whitespace-nowrap"style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none"><div class="flex items-center gap-1">Restarts </div></th><th class=whitespace-nowrap style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none">Node</th><th class="cursor-pointer select-none whitespace-nowrap"style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none">Actions</th></tr></thead><tbody>'),Yf=w('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:var(--bg-secondary)><div style=color:var(--text-secondary)>Showing <!> - <!> of <!> pods</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)> Prev</button><span class="px-3 py-1"style=color:var(--text-primary)>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>Next </button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>Last</button><select class="px-3 py-1 rounded-lg text-sm ml-4"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20 per page</option><option value=50>50 per page</option><option value=100>100 per page'),Gf=w('<div class="text-red-400 mb-2">Error: '),Jf=w("<pre class=whitespace-pre-wrap>"),Xf=w('<div class="flex flex-col h-[60vh]"><div class="flex flex-wrap items-center gap-3 mb-3"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=50>Last 50 lines</option><option value=100>Last 100 lines</option><option value=500>Last 500 lines</option><option value=1000>Last 1000 lines</option></select><label class="flex items-center gap-2 px-3 py-2 rounded-lg cursor-pointer"><input type=checkbox class=hidden><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg><span class="text-sm font-medium"></span></label><input type=text placeholder="Search logs..."class="px-3 py-2 rounded-lg text-sm flex-1 min-w-[150px]"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><button class="p-2 rounded-lg hover:bg-[var(--bg-secondary)]"title="Refresh Logs"style=background:var(--bg-tertiary);color:var(--text-secondary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button><button class="px-3 py-2 rounded-lg text-sm flex items-center gap-1"style=background:var(--bg-tertiary);color:var(--text-secondary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>Download</button></div><div class="flex-1 font-mono text-xs p-4 rounded-lg overflow-auto"style="background:var(--bg-primary);color:var(--text-primary);border:1px solid var(--border-color)">'),Zf=w('<div class=space-y-3><div class="flex items-end gap-3"><div class=flex-1><label class="block text-sm mb-1.5"style=color:var(--text-secondary)>Local Port</label><input type=number min=1024 max=65535 class="w-full px-3 py-2 rounded text-sm"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div class="pb-3 text-gray-400 text-lg"></div><div class=flex-1><label class="block text-sm mb-1.5"style=color:var(--text-secondary)>Remote Port</label><input type=number min=1 max=65535 class="w-full px-3 py-2 rounded text-sm"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div></div><div class="text-sm px-3 py-2 rounded text-center"style=background:var(--bg-tertiary);color:var(--text-muted)><span class="font-mono text-blue-400">localhost:</span>  <span class="font-mono text-green-400">:</span></div><div class="flex gap-3 pt-1"><button class="btn-secondary flex-1 px-4 py-2 text-sm">Cancel</button><button class="btn-primary flex-1 px-4 py-2 text-sm">Start'),Qf=w('<div class=space-y-4><div class="flex items-start gap-3"><div class="flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center"style="background:rgba(239, 68, 68, 0.15)"><svg class="w-6 h-6"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--error-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div><div class=flex-1><p class="text-sm mb-2"style=color:var(--text-primary)>Are you sure you want to delete this pod?</p><div class="p-3 rounded-lg mb-4"style=background:var(--bg-tertiary)><div class="text-sm font-medium mb-1"style=color:var(--text-primary)></div><div class=text-xs style=color:var(--text-muted)>Namespace: </div></div><p class="text-xs mb-4"style=color:var(--text-muted)>This action cannot be undone. The pod will be permanently deleted from the cluster.</p></div></div><div class="flex items-center justify-end gap-3 pt-4 border-t"style=border-color:var(--border-color)><button class="px-4 py-2 rounded-lg text-sm font-medium transition-all hover:opacity-80"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)">Cancel</button><button class="px-4 py-2 rounded-lg text-sm font-medium transition-all hover:opacity-80 flex items-center gap-2"style=background:var(--error-color);color:white><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>Delete Pod'),ep=w("<div class=space-y-2>"),tp=w('<div class="space-y-4 max-w-full"><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Pods</h1><p style=color:var(--text-secondary)>Manage and monitor your Kubernetes pods</p></div><div class="flex items-center gap-3"><button class=icon-btn title="Open in New Tab"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg></button><button class=icon-btn title="Maximize to Fullscreen"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"></path></svg></button><button class=icon-btn><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></button><button class=icon-btn title="Refresh Pods (Auto-refresh: 2s)"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Running</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--warning-color)"><span class=text-sm style=color:var(--text-secondary)>Pending</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--error-color)"><span class=text-sm style=color:var(--text-secondary)>Failed</span><span class="text-xl font-bold"style=color:var(--error-color)></span></div><div class=flex-1></div><select class="px-3 py-2 rounded-lg text-sm font-bold"title="Font Size"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=12>12px</option><option value=14>14px</option><option value=16>16px</option><option value=18>18px</option><option value=20>20px</option></select><select class="px-3 py-2 rounded-lg text-sm font-bold"title="Font Style"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=Monospace>Monospace</option><option value=System-ui>System-ui</option><option value=Monaco>Monaco</option><option value=Consolas>Consolas</option><option value=Courier>Courier</option></select><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=all>All Status</option><option value=running>Running</option><option value=pending>Pending</option><option value=failed>Failed/Error</option><option value=succeeded>Succeeded</option></select><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div class=w-full style="background:var(--bg-primary);margin:0;padding:0;border:1px solid var(--border-color);border-radius:4px">'),rp=w('<div class="flex items-center gap-2 px-3 py-2 rounded-lg"style=background:var(--bg-tertiary)><span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span><span style=color:var(--text-primary)></span><span style=color:var(--text-muted)>localhost:<!>  </span><a target=_blank class="text-xs px-2 py-1 rounded"style=background:var(--accent-primary);color:white>Open</a><button class="text-red-400 hover:text-red-300"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12">'),sp=w('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading pods...'),ip=w('<tr><td colspan=10 class="text-center py-8"style=color:var(--text-muted)>No pods found'),np=w('<tr style="cursor:pointer;font-weight:900;padding:0;margin:0;border:none;transition:background-color 0.15s ease"><td style="padding:0 8px;text-align:left;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;border:none"><span style=font-weight:900> </span></td><td style="padding:0 8px;text-align:left;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;border:none"><span class="flex items-center"style=font-weight:900></span></td><td style="padding:0 8px;text-align:left;border:none"><span class="flex items-center"style=font-weight:900></span></td><td style="padding:0 8px;text-align:left;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;border:none">'),lp=w("<span>"),Ca=w("<span style=color:#ef4444;margin-left:2px>"),ka=w("<span style=color:#22c55e;margin-left:2px>"),op=w('<div class="spinner mx-auto">'),ap=w('<span class="w-2 h-2 rounded-full bg-green-400 animate-pulse">'),cp=w('<div class="flex items-center justify-center h-full"><div class=spinner>'),dp=w('<div class=space-y-6><div><h3 class="text-sm font-semibold mb-3"style=color:var(--text-secondary)>Basic Information</h3><div class="grid grid-cols-2 md:grid-cols-4 gap-3"><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>Status</div><div><span></span></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>Ready</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>CPU</div><div style=color:#ec4899;font-weight:600></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>Memory</div><div style=color:#f59e0b;font-weight:600></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>Restarts</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>Age</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>IP</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>Namespace</div><div style=color:var(--text-primary)></div></div></div><div class="mt-3 p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-xs style=color:var(--text-muted)>Node</div><div class="text-sm break-all"style=color:var(--text-primary)></div></div></div><div><h3 class="text-sm font-semibold mb-3"style=color:var(--text-secondary)>Containers</h3></div><div class="grid grid-cols-5 gap-2 pt-3"><button class="btn-primary flex flex-col items-center justify-center gap-1 px-2 py-2 rounded text-xs"title=Shell><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg><span>Shell</span></button><button class="btn-primary flex flex-col items-center justify-center gap-1 px-2 py-2 rounded text-xs"title="Port Forward"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg><span class="text-center leading-tight">Port<br>Forward</span></button><button class="btn-secondary flex flex-col items-center justify-center gap-1 px-2 py-2 rounded text-xs"title=Logs><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg><span>Logs</span></button><button class="btn-secondary flex flex-col items-center justify-center gap-1 px-2 py-2 rounded text-xs"title=YAML><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg><span>YAML</span></button><button class="btn-secondary flex flex-col items-center justify-center gap-1 px-2 py-2 rounded text-xs"title=Describe><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Describe'),up=w('<div class="p-4 text-center"><div class="spinner mx-auto">'),hp=w('<div class="rounded-lg border"style=border-color:var(--border-color);background:var(--bg-secondary)>'),gp=w("<div>No pod selected"),vp=w("<div>No containers found"),fp=w('<button class="w-full p-3 rounded-lg text-left transition-colors"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color);hover-background:var(--bg-tertiary)"><div class="flex items-center gap-2"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><div class=flex-1><div class=font-medium></div><div class="text-xs flex items-center gap-2"style=color:var(--text-muted)><span></span><span> '),pp=w('<span class="text-green-400 text-xs">');const mp=()=>{const[e,t]=W("all"),[r,l]=W("name"),[a,m]=W("asc"),[d,i]=W(1),[n,g]=W(20),[v,p]=W(null),[y,x]=W(!1),[M,b]=W(!1),[o,c]=W(!1),[u,h]=W(!1),[f,$]=W(!1),[C,k]=W(!1),[S,L]=W(!1),[P,I]=W(!1),[D,T]=W(null),[B,N]=W(!1),[O,H]=W(null),[A,z]=W(!1),[F,j]=W(8080),[q,U]=W(80),[Y,{refetch:V}]=it(Fe.listPortForwards),[X,R]=W(""),[G,te]=W(!1),[ae,Q]=W(null),[Z,ne]=W(100),[$e,re]=W(""),[de,le]=W(!1);let xe=null;const[ye,ke]=W({}),[ge,Ce]=W({});let _e=null;const[Me,ve]=W(!1),be=()=>{const Ve=localStorage.getItem("pods-font-size");return Ve?parseInt(Ve):14},[ce,Ae]=W(be()),se=Ve=>{Ae(Ve),localStorage.setItem("pods-font-size",Ve.toString())},oe=()=>localStorage.getItem("pods-font-family")||"Monospace",[ie,ue]=W(oe()),he=Ve=>{ue(Ve),localStorage.setItem("pods-font-family",Ve)},Te=()=>{switch(ie()){case"Monospace":return'"Courier New", Monaco, monospace';case"System-ui":return'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif';case"Monaco":return'Monaco, "Lucida Console", monospace';case"Consolas":return'Consolas, "Courier New", monospace';case"Courier":return'Courier, "Courier New", monospace';default:return'"Courier New", Monaco, monospace'}},[ee,Se]=W(null);let pe;const De=Ve=>{if(!Ve||Ve==="-")return 0;const nt=Ve.match(/^(\d+)/);return nt?parseInt(nt[1]):0},Ne=(Ve,nt)=>{const rt=ye()[Ve]?.[nt],wt=ge()[Ve]?.[nt];if(!rt||!wt)return null;const $t=De(rt),bt=De(wt);return $t>bt?"up":$t<bt?"down":null},me=async()=>{try{const Ve=ye(),nt=Oe(),rt=await Fe.getPodMetrics(nt);Object.keys(Ve).length>0&&Ce(Ve),ke(rt)}catch(Ve){console.error("Failed to fetch metrics:",Ve)}},[He,Ze]=W(0);let we=null;const ze=(Ve,nt)=>{if(!Ve)return"-";const rt=new Date(Ve),$t=new Date().getTime()-rt.getTime();if($t<0)return"0s";const bt=Math.floor($t/1e3),kt=Math.floor(bt/60),Mt=Math.floor(kt/60),Rr=Math.floor(Mt/24);if(bt<120)return`${bt}s`;if(kt<60){const Vr=bt%60;return`${kt}m${Vr}s`}if(Mt<24){const Vr=kt%60;return`${Mt}h${Vr}m`}const Cs=Mt%24;return`${Rr}d${Cs}h`};let Pe=null,Ue=null;zt(()=>{me(),_e=setInterval(me,1e4),we=setInterval(()=>Ze(Ve=>Ve+1),5e3),Pe=setInterval(()=>{A()||(fe.refetch().catch(Ve=>console.error("Background refresh error:",Ve)),me())},2e3),Ue=Ve=>{if(Ve.target.tagName==="INPUT"||Ve.target.tagName==="TEXTAREA")return;const nt=gt();if(nt.length===0)return;const rt=ee();switch(Ve.key){case"ArrowDown":Ve.preventDefault(),Se(wt=>wt===null?0:Math.min(wt+1,nt.length-1));break;case"ArrowUp":Ve.preventDefault(),Se(wt=>wt===null||wt===0?null:wt-1);break;case"Enter":Ve.preventDefault(),rt!==null&&nt[rt]&&Ge(nt[rt],"details");break;case"Escape":Se(null);break}},document.addEventListener("keydown",Ue)}),wr(()=>{_e&&clearInterval(_e),we&&clearInterval(we),Pe&&clearInterval(Pe),Ue&&document.removeEventListener("keydown",Ue)}),It(()=>{const Ve=ee();if(Ve!==null&&pe){const nt=pe.querySelectorAll("tbody tr");nt[Ve]&&nt[Ve].scrollIntoView({behavior:"smooth",block:"nearest"})}}),it(Fe.getNamespaces);const Oe=()=>{const Ve=hr();if(Ve.length!==0)return Ve.length===1,Ve[0]},fe=Fr("pods",async()=>{ar(!0);try{const Ve=Oe();return await Fe.getPods(Ve)}finally{ar(!1)}},{ttl:15e3,backgroundRefresh:!0}),Le=et(()=>fe.data()||[]),[We,Ee]=W(!0);It(()=>{Le()!==void 0&&We()&&Ee(!1)});const[Ie]=it(()=>(y()||M())&&v()?{name:v().name,ns:v().namespace}:null,async Ve=>Ve&&(await Fe.getPodYAML(Ve.name,Ve.ns)).yaml||""),qe=Ve=>{if(!Ve)return 0;const nt=Ve.match(/^(\d+)m?$/);return nt?parseInt(nt[1]):0},Be=Ve=>{if(!Ve)return 0;const nt=Ve.match(/^(\d+)(Ki|Mi|Gi)?$/);if(!nt)return 0;const rt=parseInt(nt[1]),wt=nt[2];return wt==="Gi"?rt*1024:wt==="Ki"?rt/1024:rt},Ke=Ve=>{if(!Ve)return 0;let nt=0;const rt=Ve.match(/(\d+)d/),wt=Ve.match(/(\d+)h/),$t=Ve.match(/(\d+)m/);return rt&&(nt+=parseInt(rt[1])*24*60),wt&&(nt+=parseInt(wt[1])*60),$t&&(nt+=parseInt($t[1])),nt},Ye=et(()=>{let Ve=Le()||[];const nt=Xr().toLowerCase(),rt=e();nt&&(Ve=Ve.filter(bt=>bt.name.toLowerCase().includes(nt)||bt.namespace.toLowerCase().includes(nt)||bt.node?.toLowerCase().includes(nt)||bt.ip?.toLowerCase().includes(nt))),rt!=="all"&&(rt==="running"?Ve=Ve.filter(bt=>bt.status==="Running"):rt==="pending"?Ve=Ve.filter(bt=>bt.status==="Pending"):rt==="failed"?Ve=Ve.filter(bt=>["Failed","Error","CrashLoopBackOff"].includes(bt.status)):rt==="succeeded"&&(Ve=Ve.filter(bt=>bt.status==="Succeeded")));const wt=r(),$t=a();return Ve=[...Ve].sort((bt,kt)=>{let Mt=0;switch(wt){case"name":Mt=bt.name.localeCompare(kt.name);break;case"namespace":Mt=bt.namespace.localeCompare(kt.namespace);break;case"status":Mt=bt.status.localeCompare(kt.status);break;case"cpu":Mt=qe(bt.cpu)-qe(kt.cpu);break;case"memory":Mt=Be(bt.memory)-Be(kt.memory);break;case"restarts":Mt=bt.restarts-kt.restarts;break;case"age":Mt=Ke(bt.age)-Ke(kt.age);break}return $t==="asc"?Mt:-Mt}),Ve}),lt=et(()=>Math.ceil(Ye().length/n())),gt=et(()=>{const Ve=(d()-1)*n();return Ye().slice(Ve,Ve+n())}),Qe=et(()=>{const Ve=Le()||[];return{running:Ve.filter(nt=>nt.status==="Running").length,pending:Ve.filter(nt=>nt.status==="Pending").length,failed:Ve.filter(nt=>["Failed","Error","CrashLoopBackOff"].includes(nt.status)).length,total:Ve.length}}),ct=Ve=>{r()===Ve?m(nt=>nt==="asc"?"desc":"asc"):(l(Ve),m("asc")),i(1)},ft=Ve=>(()=>{var nt=Wf(),rt=nt.firstChild,wt=rt.nextSibling;return J($t=>{var bt=r()===Ve.field&&a()==="asc"?"var(--accent-primary)":"var(--text-muted)",kt=r()===Ve.field&&a()==="desc"?"var(--accent-primary)":"var(--text-muted)";return bt!==$t.e&&E(rt,"color",$t.e=bt),kt!==$t.t&&E(wt,"color",$t.t=kt),$t},{e:void 0,t:void 0}),nt})(),Ge=(Ve,nt)=>{switch(p(Ve),nt){case"yaml":x(!0);break;case"describe":c(!0);break;case"logs":Tt(Ve,de()),h(!0);break;case"details":$(!0);break;case"shell":k(!0);break;case"portforward":L(!0);break}},st=async()=>{const Ve=v();if(Ve)try{await Fe.startPortForward("pod",Ve.name,Ve.namespace,F(),q()),L(!1),V()}catch(nt){console.error("Failed to start port forward:",nt)}},vt=async Ve=>{try{await Fe.stopPortForward(Ve),V()}catch(nt){console.error("Failed to stop port forward:",nt)}},at=Ve=>!Ve.containers||Ve.containers.length===0?[]:typeof Ve.containers[0]=="object"?Ve.containers:Ve.containers.map(rt=>({name:rt,type:"main",image:""})),pt=Ve=>{const nt=at(Ve);return nt.find(wt=>wt.type==="main")?.name||nt[0]?.name||""},xt=Ve=>{if(at(Ve).length>1)H(Ve),N(!0);else{const rt=pt(Ve);window.open(`/api/pod/exec?name=${Ve.name}&namespace=${Ve.namespace}&container=${rt}`,"_blank")}},Et=(Ve,nt)=>{N(!1),window.open(`/api/pod/exec?name=${Ve.name}&namespace=${Ve.namespace}&container=${nt}`,"_blank")},yt=()=>{xe&&(xe.close(),xe=null)},Tt=async(Ve,nt=!1)=>{yt(),te(!0),Q(null);const rt=pt(Ve),wt=`/api/pod/logs?name=${Ve.name}&namespace=${Ve.namespace}&container=${rt}&tail=${Z()}${nt?"&follow=true":""}`;if(nt)R(""),xe=new EventSource(wt),xe.onmessage=$t=>{R(bt=>bt+$t.data+`
`),te(!1)},xe.onerror=()=>{Q("Stream connection lost"),te(!1),yt()},xe.onopen=()=>{te(!1)};else try{const $t=await fetch(wt);if(!$t.ok){const kt=await $t.text();throw new Error(kt||`HTTP ${$t.status}`)}const bt=await $t.json();R(bt.logs||"No logs available")}catch($t){Q($t.message||"Failed to fetch logs"),R("")}finally{te(!1)}},Bt=et(()=>{const Ve=X(),nt=$e().toLowerCase();return nt?Ve.split(`
`).filter(rt=>rt.toLowerCase().includes(nt)).join(`
`):Ve}),Dt=()=>{const Ve=new Blob([X()],{type:"text/plain"}),nt=URL.createObjectURL(Ve),rt=document.createElement("a");rt.href=nt,rt.download=`${v()?.name}-logs.txt`,rt.click(),URL.revokeObjectURL(nt)},At=Ve=>{T(Ve),I(!0)},Nt=async()=>{const Ve=D();if(Ve){I(!1);try{await Fe.deletePod(Ve.name,Ve.namespace),Je(`Pod ${Ve.name} deleted successfully`,"success"),setTimeout(()=>fe.refetch(),500)}catch(nt){console.error("Failed to delete pod:",nt),Je(`Failed to delete pod: ${nt instanceof Error?nt.message:"Unknown error"}`,"error")}finally{T(null)}}};return(()=>{var Ve=tp(),nt=Ve.firstChild,rt=nt.firstChild,wt=rt.firstChild;wt.nextSibling;var $t=rt.nextSibling,bt=$t.firstChild,kt=bt.nextSibling,Mt=kt.nextSibling,Rr=Mt.nextSibling,Cs=nt.nextSibling,Vr=Cs.firstChild,Ki=Vr.firstChild,Yi=Ki.nextSibling,js=Vr.nextSibling,Gi=js.firstChild,Ji=Gi.nextSibling,Us=js.nextSibling,Xi=Us.firstChild,Zi=Xi.nextSibling,Vs=Us.nextSibling,Qi=Vs.firstChild,en=Qi.nextSibling,tn=Vs.nextSibling,Ws=tn.nextSibling,qs=Ws.nextSibling,Ks=qs.nextSibling,gi=Ks.nextSibling,_o=Cs.nextSibling;return bt.$$click=()=>{window.open(window.location.href,"_blank")},kt.$$click=()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()},Mt.$$click=()=>ve(!Me()),Rr.$$click=St=>{const Lt=St.currentTarget;Lt.classList.add("refreshing"),setTimeout(()=>Lt.classList.remove("refreshing"),500),fe.refetch(),me()},Vr.$$click=()=>t("all"),s(Yi,()=>Qe().total),js.$$click=()=>t("running"),s(Ji,()=>Qe().running),Us.$$click=()=>t("pending"),s(Zi,()=>Qe().pending),Vs.$$click=()=>t("failed"),s(en,()=>Qe().failed),Ws.addEventListener("change",St=>se(parseInt(St.currentTarget.value))),qs.addEventListener("change",St=>he(St.currentTarget.value)),Ks.addEventListener("change",St=>{t(St.currentTarget.value),i(1)}),gi.$$input=St=>{Fi(St.currentTarget.value),i(1)},s(Ve,_(K,{get when(){return(Y()||[]).length>0},get children(){var St=qf(),Lt=St.firstChild,Vt=Lt.nextSibling;return s(Vt,_(Xe,{get each(){return Y()||[]},children:Pt=>(()=>{var jt=rp(),tr=jt.firstChild,or=tr.nextSibling,rr=or.nextSibling,sr=rr.firstChild,Zt=sr.nextSibling;Zt.nextSibling;var Kt=rr.nextSibling,ur=Kt.nextSibling;return s(or,()=>Pt.name),s(rr,()=>Pt.localPort,Zt),s(rr,()=>Pt.remotePort,null),ur.$$click=()=>vt(Pt.id),J(()=>dt(Kt,"href",`http://localhost:${Pt.localPort}`)),jt})()})),St}}),_o),s(_o,_(K,{get when(){return!fe.loading()||fe.data()!==void 0},get fallback(){return(()=>{var St=sp(),Lt=St.firstChild;return Lt.nextSibling,St})()},get children(){return[(()=>{var St=Kf(),Lt=St.firstChild,Vt=Lt.firstChild,Pt=Vt.firstChild,jt=Pt.firstChild,tr=jt.firstChild;tr.firstChild;var or=jt.nextSibling,rr=or.firstChild;rr.firstChild;var sr=or.nextSibling,Zt=sr.nextSibling,Kt=Zt.nextSibling,ur=Kt.firstChild;ur.firstChild;var Ct=Kt.nextSibling,mr=Ct.firstChild;mr.firstChild;var br=Ct.nextSibling,xr=br.firstChild;xr.firstChild;var Pr=br.nextSibling,Wt=Pr.nextSibling,bs=Wt.firstChild;bs.firstChild;var Ys=Wt.nextSibling,Gs=Vt.nextSibling,xs=pe;return typeof xs=="function"?dr(xs,Lt):pe=Lt,jt.$$click=()=>ct("name"),s(tr,_(ft,{field:"name"}),null),or.$$click=()=>ct("status"),s(rr,_(ft,{field:"status"}),null),Kt.$$click=()=>ct("cpu"),s(ur,_(ft,{field:"cpu"}),null),Ct.$$click=()=>ct("memory"),s(mr,_(ft,{field:"memory"}),null),br.$$click=()=>ct("restarts"),s(xr,_(ft,{field:"restarts"}),null),Wt.$$click=()=>ct("age"),s(bs,_(ft,{field:"age"}),null),s(Gs,_(Xe,{get each(){return gt()},get fallback(){return(()=>{var ht=ip();return ht.firstChild,ht})()},children:(ht,Qr)=>{const ks=()=>ee()===Qr(),es=ht.status==="Failed"||ht.status==="CrashLoopBackOff"||ht.status==="Error",ts=ht.status==="Pending",[Js,Ms]=W(!1),Xs=()=>ht.status==="Terminating"||es?"#ef4444":ts?"#f59e0b":"#0ea5e9",Zs=()=>Js()?xf(ks(),es,ts):"transparent",kr=Xs();return(()=>{var vr=np(),Lr=vr.firstChild,rs=Lr.nextSibling,Hr=rs.firstChild,As=Hr.firstChild,Ir=rs.nextSibling,ss=Ir.nextSibling,Qs=ss.nextSibling,Br=Qs.firstChild,Wr=Qs.nextSibling,is=Wr.firstChild,ns=Wr.nextSibling,ls=ns.nextSibling,ys=ls.nextSibling,Ot=ys.nextSibling;return vr.addEventListener("mouseleave",()=>Ms(!1)),vr.addEventListener("mouseenter",()=>{Ms(!0),ee()!==Qr()&&Se(Qr())}),vr.$$click=()=>{Se(Qr()),Ge(ht,"details")},E(vr,"color",kr),E(Lr,"color",kr),s(Lr,(()=>{var ot=Re(()=>ht.name.length>40);return()=>ot()?ht.name.slice(0,37)+"...":ht.name})()),s(Hr,()=>ht.status==="Running"?"":ts?"":es?"":"",As),s(Hr,()=>ht.status,null),E(Ir,"color",kr),s(Ir,()=>{const ot=at(ht);if(ot.length>0){const Qt=xa(ot);return _(ya,{summary:Qt,size:"sm"})}return(()=>{var Qt=lp();return s(Qt,()=>ht.ready),Qt})()}),E(ss,"color",kr),s(ss,()=>ht.ip||"-"),E(Br,"color",kr),s(Br,()=>ye()[`${ht.namespace}/${ht.name}`]?.cpu||ht.cpu||"-",null),s(Br,(()=>{var ot=Re(()=>Ne(`${ht.namespace}/${ht.name}`,"cpu")==="up");return()=>ot()&&(()=>{var Qt=Ca();return J(ei=>E(Qt,"font-size",`${ce()*.7}px`)),Qt})()})(),null),s(Br,(()=>{var ot=Re(()=>Ne(`${ht.namespace}/${ht.name}`,"cpu")==="down");return()=>ot()&&(()=>{var Qt=ka();return J(ei=>E(Qt,"font-size",`${ce()*.7}px`)),Qt})()})(),null),E(is,"color",kr),s(is,()=>ye()[`${ht.namespace}/${ht.name}`]?.memory||ht.memory||"-",null),s(is,(()=>{var ot=Re(()=>Ne(`${ht.namespace}/${ht.name}`,"memory")==="up");return()=>ot()&&(()=>{var Qt=Ca();return J(ei=>E(Qt,"font-size",`${ce()*.7}px`)),Qt})()})(),null),s(is,(()=>{var ot=Re(()=>Ne(`${ht.namespace}/${ht.name}`,"memory")==="down");return()=>ot()&&(()=>{var Qt=ka();return J(ei=>E(Qt,"font-size",`${ce()*.7}px`)),Qt})()})(),null),E(ns,"color",kr),s(ns,()=>ht.restarts),E(ls,"color",kr),s(ls,()=>ht.node),E(ys,"color",kr),s(ys,()=>ze(ht.createdAt,He())),s(Ot,_(Jt,{actions:[{label:"Shell",icon:"shell",onClick:()=>xt(ht)},{label:"Port Forward",icon:"portforward",onClick:()=>Ge(ht,"portforward")},{label:"View Logs",icon:"logs",onClick:()=>Ge(ht,"logs")},{label:"View YAML",icon:"yaml",onClick:()=>Ge(ht,"yaml")},{label:"Edit YAML",icon:"edit",onClick:()=>{p(ht),b(!0)}},{label:"Describe",icon:"describe",onClick:()=>Ge(ht,"describe")},{label:"Delete",icon:"delete",onClick:()=>At(ht),variant:"danger"}],onOpenChange:z})),J(ot=>{var Qt=Zs(),ei=`${Math.max(24,ce()*1.7)}px`,$o=`${Math.max(24,ce()*1.7)}px`,wo=`${ce()}px`,So=Te(),Co=`${ce()}px`,ko=`${Math.max(24,ce()*1.7)}px`,Mo=`${Math.max(24,ce()*1.7)}px`,Ao=`${Math.max(24,ce()*1.7)}px`,Lo=`${Math.max(24,ce()*1.7)}px`,Eo=ht.status==="Running"?"#22c55e":ts?"#f59e0b":ht.status==="Succeeded"?"#06b6d4":"#ef4444",To=`${ce()}px`,Do=`${ce()}px`,Ro=`${Math.max(24,ce()*1.7)}px`,Po=`${Math.max(24,ce()*1.7)}px`,Io=`${ce()}px`,Bo=`${Math.max(24,ce()*1.7)}px`,No=`${Math.max(24,ce()*1.7)}px`,Oo=`${Math.max(24,ce()*1.7)}px`,zo=`${Math.max(24,ce()*1.7)}px`,Fo=`${ce()}px`,Ho=`${Math.max(24,ce()*1.7)}px`,jo=`${Math.max(24,ce()*1.7)}px`,Uo=`${ce()}px`,Vo=`${ce()}px`,Wo=`${Math.max(24,ce()*1.7)}px`,qo=`${Math.max(24,ce()*1.7)}px`,Ko=`${ce()}px`,Yo=`${Math.max(24,ce()*1.7)}px`,Go=`${Math.max(24,ce()*1.7)}px`,Jo=`${ce()}px`,Xo=`${Math.max(24,ce()*1.7)}px`,Zo=`${Math.max(24,ce()*1.7)}px`,Qo=`${Math.max(24,ce()*1.7)}px`,ea=`${Math.max(24,ce()*1.7)}px`;return Qt!==ot.e&&E(vr,"background",ot.e=Qt),ei!==ot.t&&E(vr,"height",ot.t=ei),$o!==ot.a&&E(vr,"line-height",ot.a=$o),wo!==ot.o&&E(vr,"font-size",ot.o=wo),So!==ot.i&&E(vr,"font-family",ot.i=So),Co!==ot.n&&E(Lr,"font-size",ot.n=Co),ko!==ot.s&&E(Lr,"height",ot.s=ko),Mo!==ot.h&&E(Lr,"line-height",ot.h=Mo),Ao!==ot.r&&E(rs,"height",ot.r=Ao),Lo!==ot.d&&E(rs,"line-height",ot.d=Lo),Eo!==ot.l&&E(Hr,"color",ot.l=Eo),To!==ot.u&&E(Hr,"font-size",ot.u=To),Do!==ot.c&&E(Ir,"font-size",ot.c=Do),Ro!==ot.w&&E(Ir,"height",ot.w=Ro),Po!==ot.m&&E(Ir,"line-height",ot.m=Po),Io!==ot.f&&E(ss,"font-size",ot.f=Io),Bo!==ot.y&&E(ss,"height",ot.y=Bo),No!==ot.g&&E(ss,"line-height",ot.g=No),Oo!==ot.p&&E(Qs,"height",ot.p=Oo),zo!==ot.b&&E(Qs,"line-height",ot.b=zo),Fo!==ot.T&&E(Br,"font-size",ot.T=Fo),Ho!==ot.A&&E(Wr,"height",ot.A=Ho),jo!==ot.O&&E(Wr,"line-height",ot.O=jo),Uo!==ot.I&&E(is,"font-size",ot.I=Uo),Vo!==ot.S&&E(ns,"font-size",ot.S=Vo),Wo!==ot.W&&E(ns,"height",ot.W=Wo),qo!==ot.C&&E(ns,"line-height",ot.C=qo),Ko!==ot.B&&E(ls,"font-size",ot.B=Ko),Yo!==ot.v&&E(ls,"height",ot.v=Yo),Go!==ot.k&&E(ls,"line-height",ot.k=Go),Jo!==ot.x&&E(ys,"font-size",ot.x=Jo),Xo!==ot.j&&E(ys,"height",ot.j=Xo),Zo!==ot.q&&E(ys,"line-height",ot.q=Zo),Qo!==ot.z&&E(Ot,"height",ot.z=Qo),ea!==ot.P&&E(Ot,"line-height",ot.P=ea),ot},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0,A:void 0,O:void 0,I:void 0,S:void 0,W:void 0,C:void 0,B:void 0,v:void 0,k:void 0,x:void 0,j:void 0,q:void 0,z:void 0,P:void 0}),vr})()}})),J(ht=>{var Qr=Te(),ks=`${Math.max(24,ce()*1.7)}px`,es=Te(),ts=`${ce()}px`,Js=`${Math.max(24,ce()*1.7)}px`,Ms=`${ce()}px`,Xs=`${ce()}px`,Zs=`${ce()}px`,kr=`${ce()}px`,vr=`${ce()}px`,Lr=`${ce()}px`,rs=`${ce()}px`,Hr=`${ce()}px`,As=`${ce()}px`,Ir=`${ce()}px`;return Qr!==ht.e&&E(Lt,"font-family",ht.e=Qr),ks!==ht.t&&E(Pt,"height",ht.t=ks),es!==ht.a&&E(Pt,"font-family",ht.a=es),ts!==ht.o&&E(Pt,"font-size",ht.o=ts),Js!==ht.i&&E(Pt,"line-height",ht.i=Js),Ms!==ht.n&&E(jt,"font-size",ht.n=Ms),Xs!==ht.s&&E(or,"font-size",ht.s=Xs),Zs!==ht.h&&E(sr,"font-size",ht.h=Zs),kr!==ht.r&&E(Zt,"font-size",ht.r=kr),vr!==ht.d&&E(Kt,"font-size",ht.d=vr),Lr!==ht.l&&E(Ct,"font-size",ht.l=Lr),rs!==ht.u&&E(br,"font-size",ht.u=rs),Hr!==ht.c&&E(Pr,"font-size",ht.c=Hr),As!==ht.w&&E(Wt,"font-size",ht.w=As),Ir!==ht.m&&E(Ys,"font-size",ht.m=Ir),ht},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0}),St})(),_(K,{get when(){return lt()>1},get children(){var St=Yf(),Lt=St.firstChild,Vt=Lt.firstChild,Pt=Vt.nextSibling,jt=Pt.nextSibling,tr=jt.nextSibling,or=tr.nextSibling,rr=or.nextSibling;rr.nextSibling;var sr=Lt.nextSibling,Zt=sr.firstChild,Kt=Zt.nextSibling,ur=Kt.nextSibling,Ct=ur.firstChild,mr=Ct.nextSibling;mr.nextSibling;var br=ur.nextSibling,xr=br.nextSibling,Pr=xr.nextSibling;return s(Lt,()=>(d()-1)*n()+1,Pt),s(Lt,()=>Math.min(d()*n(),Ye().length),tr),s(Lt,()=>Ye().length,rr),Zt.$$click=()=>i(1),Kt.$$click=()=>i(Wt=>Math.max(1,Wt-1)),s(ur,d,mr),s(ur,lt,null),br.$$click=()=>i(Wt=>Math.min(lt(),Wt+1)),xr.$$click=()=>i(lt()),Pr.addEventListener("change",Wt=>{g(parseInt(Wt.currentTarget.value)),i(1)}),J(Wt=>{var bs=d()===1,Ys=d()===1,Gs=d()===lt(),xs=d()===lt();return bs!==Wt.e&&(Zt.disabled=Wt.e=bs),Ys!==Wt.t&&(Kt.disabled=Wt.t=Ys),Gs!==Wt.a&&(br.disabled=Wt.a=Gs),xs!==Wt.o&&(xr.disabled=Wt.o=xs),Wt},{e:void 0,t:void 0,a:void 0,o:void 0}),J(()=>Pr.value=n()),St}})]}})),s(Ve,_(mt,{get isOpen(){return y()},onClose:()=>x(!1),get title(){return`YAML: ${v()?.name}`},size:"xl",get children(){return _(K,{get when(){return!Ie.loading},get fallback(){return op()},get children(){return _(gr,{get yaml(){return Ie()||""},get title(){return v()?.name}})}})}}),null),s(Ve,_(Sr,{get isOpen(){return o()},onClose:()=>c(!1),resourceType:"pod",get name(){return v()?.name||""},get namespace(){return v()?.namespace}}),null),s(Ve,_(mt,{get isOpen(){return u()},onClose:()=>{yt(),h(!1)},get title(){return`Logs: ${v()?.name}`},size:"xl",get children(){var St=Xf(),Lt=St.firstChild,Vt=Lt.firstChild,Pt=Vt.nextSibling,jt=Pt.firstChild,tr=jt.nextSibling,or=tr.firstChild,rr=tr.nextSibling,sr=Pt.nextSibling,Zt=sr.nextSibling,Kt=Zt.nextSibling,ur=Lt.nextSibling;return Vt.addEventListener("change",Ct=>{ne(parseInt(Ct.currentTarget.value)),v()&&Tt(v(),de())}),jt.addEventListener("change",Ct=>{const mr=Ct.currentTarget.checked;le(mr),v()&&Tt(v(),mr)}),s(rr,()=>de()?"Live":"Follow"),s(Pt,(()=>{var Ct=Re(()=>!!de());return()=>Ct()&&ap()})(),null),sr.$$input=Ct=>re(Ct.currentTarget.value),Zt.$$click=()=>v()&&Tt(v(),de()),Kt.$$click=Dt,s(ur,_(K,{get when(){return!G()},get fallback(){return cp()},get children(){return[_(K,{get when(){return ae()},get children(){var Ct=Gf();return Ct.firstChild,s(Ct,ae,null),Ct}}),(()=>{var Ct=Jf();return s(Ct,()=>Bt()||"No logs available"),Ct})()]}})),J(Ct=>{var mr=de(),br=de()?"var(--accent-primary)":"var(--bg-tertiary)",xr=de()?"white":"var(--text-primary)",Pr=de()?"M21 12a9 9 0 11-18 0 9 9 0 0118 0z M10 9v6m4-6v6":"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z M21 12a9 9 0 11-18 0 9 9 0 0118 0z";return mr!==Ct.e&&(Vt.disabled=Ct.e=mr),br!==Ct.t&&E(Pt,"background",Ct.t=br),xr!==Ct.a&&E(Pt,"color",Ct.a=xr),Pr!==Ct.o&&dt(or,"d",Ct.o=Pr),Ct},{e:void 0,t:void 0,a:void 0,o:void 0}),J(()=>Vt.value=Z()),J(()=>jt.checked=de()),J(()=>sr.value=$e()),St}}),null),s(Ve,_(mt,{get isOpen(){return f()},onClose:()=>$(!1),get title(){return`Pod: ${v()?.name}`},size:"xl",get children(){return _(K,{get when(){return v()},get children(){return(()=>{const[St]=it(()=>v()?{name:v().name,ns:v().namespace}:null,async Lt=>Lt?Fe.getPodDetails(Lt.name,Lt.ns):null);return(()=>{var Lt=dp(),Vt=Lt.firstChild,Pt=Vt.firstChild,jt=Pt.nextSibling,tr=jt.firstChild,or=tr.firstChild,rr=or.nextSibling,sr=rr.firstChild,Zt=tr.nextSibling,Kt=Zt.firstChild,ur=Kt.nextSibling,Ct=Zt.nextSibling,mr=Ct.firstChild,br=mr.nextSibling,xr=Ct.nextSibling,Pr=xr.firstChild,Wt=Pr.nextSibling,bs=xr.nextSibling,Ys=bs.firstChild,Gs=Ys.nextSibling,xs=bs.nextSibling,ht=xs.firstChild,Qr=ht.nextSibling,ks=xs.nextSibling,es=ks.firstChild,ts=es.nextSibling,Js=ks.nextSibling,Ms=Js.firstChild,Xs=Ms.nextSibling,Zs=jt.nextSibling,kr=Zs.firstChild,vr=kr.nextSibling,Lr=Vt.nextSibling;Lr.firstChild;var rs=Lr.nextSibling,Hr=rs.firstChild,As=Hr.nextSibling,Ir=As.nextSibling,ss=Ir.nextSibling,Qs=ss.nextSibling;return s(sr,()=>v()?.status),s(ur,()=>{const Br=v();if(!Br)return"-";const Wr=at(Br);if(Wr.length>0){const is=xa(Wr);return _(ya,{summary:is})}return Br.ready}),s(br,()=>v()?.cpu||"-"),s(Wt,()=>v()?.memory||"-"),s(Gs,()=>v()?.restarts),s(Qr,()=>v()?.age),s(ts,()=>v()?.ip||"-"),s(Xs,()=>v()?.namespace),s(vr,()=>v()?.node),s(Lr,_(K,{get when(){return Re(()=>!St.loading)()&&St()?.containers},get fallback(){return up()},get children(){return(()=>{const Br=St()?.containers||[],Wr=St()?.metrics,is=Br.map(Ot=>({name:Ot.name||(typeof Ot=="string"?Ot:""),type:Ot.type||"main",image:Ot.image||"",ready:Ot.ready,state:Ot.state,restartCount:Ot.restartCount,containerID:Ot.containerID,startedAt:Ot.startedAt,reason:Ot.reason,message:Ot.message,exitCode:Ot.exitCode,ports:Ot.ports||[]})),ns={};if(Wr?.containerMetricsMap){const Ot=Wr.containerMetricsMap;Object.keys(Ot).forEach(ot=>{const Qt=Ot[ot];ns[ot]={cpu:Qt.cpu||"-",memory:Qt.memory||"-"}})}const ls={};Br.forEach(Ot=>{Ot.name&&Ot.ports&&Array.isArray(Ot.ports)&&(ls[Ot.name]=Ot.ports)});const ys=Of(is,ns,ls);return(()=>{var Ot=hp();return s(Ot,_(Vf,{containers:ys})),Ot})()})()}}),null),Hr.$$click=()=>xt(v()),As.$$click=()=>{$(!1),Ge(v(),"portforward")},Ir.$$click=()=>{$(!1),Ge(v(),"logs")},ss.$$click=()=>{$(!1),Ge(v(),"yaml")},Qs.$$click=()=>{$(!1),Ge(v(),"describe")},J(()=>tt(sr,`badge ${v()?.status==="Running"?"badge-success":"badge-warning"}`)),Lt})()})()}})}}),null),s(Ve,_(mt,{get isOpen(){return S()},onClose:()=>L(!1),title:"Port Forward",size:"xs",get children(){var St=Zf(),Lt=St.firstChild,Vt=Lt.firstChild,Pt=Vt.firstChild,jt=Pt.nextSibling,tr=Vt.nextSibling,or=tr.nextSibling,rr=or.firstChild,sr=rr.nextSibling,Zt=Lt.nextSibling,Kt=Zt.firstChild;Kt.firstChild;var ur=Kt.nextSibling,Ct=ur.nextSibling,mr=Ct.firstChild,br=Zt.nextSibling,xr=br.firstChild,Pr=xr.nextSibling;return jt.$$input=Wt=>j(parseInt(Wt.currentTarget.value)||8080),sr.$$input=Wt=>U(parseInt(Wt.currentTarget.value)||80),s(Kt,F,null),s(Ct,()=>v()?.name,mr),s(Ct,q,null),xr.$$click=()=>L(!1),Pr.$$click=st,J(()=>jt.value=F()),J(()=>sr.value=q()),St}}),null),s(Ve,_(mt,{get isOpen(){return P()},onClose:()=>{I(!1),T(null)},title:"Delete Pod",size:"md",get children(){var St=Qf(),Lt=St.firstChild,Vt=Lt.firstChild;Vt.firstChild;var Pt=Vt.nextSibling,jt=Pt.firstChild,tr=jt.nextSibling,or=tr.firstChild,rr=or.nextSibling;rr.firstChild,tr.nextSibling;var sr=Lt.nextSibling,Zt=sr.firstChild,Kt=Zt.nextSibling;return s(or,()=>D()?.name),s(rr,()=>D()?.namespace,null),Zt.$$click=()=>{I(!1),T(null)},Kt.$$click=Nt,St}}),null),s(Ve,_(mt,{get isOpen(){return B()},onClose:()=>N(!1),get title(){return`Select Container for ${O()?.name}`},size:"sm",get children(){var St=ep();return s(St,_(K,{get when(){return O()},get fallback(){return gp()},children:Lt=>{const Vt=at(Lt());return _(K,{get when(){return Vt.length>0},get fallback(){return vp()},get children(){return _(Xe,{each:Vt,children:Pt=>(()=>{var jt=fp(),tr=jt.firstChild,or=tr.firstChild,rr=or.nextSibling,sr=rr.firstChild,Zt=sr.nextSibling,Kt=Zt.firstChild,ur=Kt.nextSibling;return ur.firstChild,jt.addEventListener("mouseleave",Ct=>Ct.currentTarget.style.background="var(--bg-secondary)"),jt.addEventListener("mouseenter",Ct=>Ct.currentTarget.style.background="var(--bg-tertiary)"),jt.$$click=()=>Et(Lt(),Pt.name),s(sr,()=>Pt.name),s(Kt,()=>Pt.type),s(ur,()=>Lt().namespace,null),s(tr,(()=>{var Ct=Re(()=>!!Pt.ready);return()=>Ct()&&pp()})(),null),J(()=>tt(Kt,`px-1.5 py-0.5 rounded text-xs ${Pt.type==="init"?"bg-blue-500/20 text-blue-400":Pt.type==="sidecar"?"bg-purple-500/20 text-purple-400":"bg-gray-500/20 text-gray-400"}`)),jt})()})}})}})),St}}),null),J(St=>{var Lt=Me()?"var(--accent-primary)":"var(--bg-secondary)",Vt=Me()?"Switch to Normal View":"Switch to Terminal View";return Lt!==St.e&&E(Mt,"background",St.e=Lt),Vt!==St.t&&dt(Mt,"title",St.t=Vt),St},{e:void 0,t:void 0}),J(()=>Ws.value=ce()),J(()=>qs.value=ie()),J(()=>Ks.value=e()),J(()=>gi.value=Xr()),Ve})()};ut(["click","input"]);var bp=w('<div class="px-3 py-1.5 rounded-lg text-sm"style="background:rgba(239, 68, 68, 0.1);color:var(--error-color)">'),xp=w("<div class=spinner style=width:16px;height:16px>"),yp=w('<div class="flex flex-col h-full"><div class="flex items-center justify-between mb-2"><div class="flex items-center gap-2"></div><div class="flex items-center gap-2"><button class="px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)">Cancel</button><button class="px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"style=background:var(--accent-primary);color:white></button></div></div><textarea class="flex-1 w-full p-4 rounded-lg font-mono text-sm leading-relaxed resize-none focus:outline-none focus:ring-2 focus:ring-[var(--accent-primary)]"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color);fontFamily:ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Menlo, Consolas, &quot;Liberation Mono&quot;, monospace">');const Dr=e=>{const[t,r]=W(e.yaml),[l,a]=W(!1),[m,d]=W(null),i=async()=>{d(null),a(!0);try{await e.onSave?.(t())}catch(g){d(g instanceof Error?g.message:"Failed to save YAML")}finally{a(!1)}},n=()=>{r(e.yaml),d(null),e.onCancel?.()};return(()=>{var g=yp(),v=g.firstChild,p=v.firstChild,y=p.nextSibling,x=y.firstChild,M=x.nextSibling,b=v.nextSibling;return s(p,_(K,{get when(){return m()},get children(){var o=bp();return s(o,m),o}})),x.$$click=n,M.$$click=i,s(M,_(K,{get when(){return l()||e.loading},fallback:"Save",get children(){return[xp(),"Saving..."]}})),b.$$input=o=>r(o.currentTarget.value),dt(b,"spellcheck",!1),J(o=>{var c=l()||e.loading,u=l()||e.loading||t()===e.yaml;return c!==o.e&&(x.disabled=o.e=c),u!==o.t&&(M.disabled=o.t=u),o},{e:void 0,t:void 0}),J(()=>b.value=t()),g})()};ut(["click","input"]);var _p=w('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span></span><span>'),$p=w('<div class="w-full overflow-x-auto"style=margin:0;padding:0><table class=w-full style=width:100%;table-layout:auto;background:var(--bg-primary);border-collapse:collapse;margin:0;padding:0><thead><tr style=font-weight:900;color:#0ea5e9><th class="cursor-pointer select-none whitespace-nowrap"style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none"><div class="flex items-center gap-1">Namespace </div></th><th class="cursor-pointer select-none whitespace-nowrap"style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none"><div class="flex items-center gap-1">Ready </div></th><th class=whitespace-nowrap style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none">Up-to-date</th><th class=whitespace-nowrap style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none">Available</th><th class="cursor-pointer select-none whitespace-nowrap"style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none">Actions</th></tr></thead><tbody>'),wp=w('<div class="flex items-center justify-between p-4 font-mono text-sm"style="background:var(--bg-secondary);borderTop:1px solid var(--border-color)"><div style=color:var(--text-secondary)>Showing <!> - <!> of <!> deployments</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)> Prev</button><span class="px-3 py-1"style=color:var(--text-primary)>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>Next </button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>Last</button><select class="px-3 py-1 rounded-lg text-sm ml-4"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20 per page</option><option value=50>50 per page</option><option value=100>100 per page</option><option value=200>200 per page'),Sp=w("<div style=height:70vh>"),Cp=w('<div class=space-y-4><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Replicas</label><input type=number min=0 max=100 class="w-full px-4 py-2 rounded-lg"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div class="flex gap-2"><button class="btn-secondary flex-1">Cancel</button><button class="btn-primary flex-1">Scale'),kp=w('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Deployments</h1><p style=color:var(--text-secondary)>Manage application deployments</p></div><div class="flex items-center gap-3"><button class=icon-btn title="Refresh Deployments"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Ready</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--warning-color)"><span class=text-sm style=color:var(--text-secondary)>Partial</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--error-color)"><span class=text-sm style=color:var(--text-secondary)>Unavailable</span><span class="text-xl font-bold"style=color:var(--error-color)></span></div><div class=flex-1></div><select class="px-3 py-2 rounded-lg text-sm"title="Font Size"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=12>12px</option><option value=14>14px</option><option value=16>16px</option><option value=18>18px</option><option value=20>20px</option></select><select class="px-3 py-2 rounded-lg text-sm"title="Font Family"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=Monospace>Monospace</option><option value=System-ui>System-ui</option><option value=Monaco>Monaco</option><option value=Consolas>Consolas</option><option value=Courier>Courier</option></select><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div class=w-full style="background:var(--bg-primary);margin:0;padding:0;border:1px solid var(--border-color);border-radius:4px">'),Mp=w('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading deployments...'),Ap=w('<tr><td colspan=7 class="text-center py-8"style=color:var(--text-muted)>No deployments found'),Lp=w('<tr><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"><span></span></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;border:none">'),Ma=w('<div class="spinner mx-auto">');const Ep=()=>{const[e,t]=W("name"),[r,l]=W("asc"),[a,m]=W(1),[d,i]=W(20),[n,g]=W(null),[v,p]=W(!1),[y,x]=W(!1),[M,b]=W(!1),[o,c]=W(!1),[u,h]=W(1),[f,$]=W(null),C=()=>{const Q=localStorage.getItem("deployments-font-size");return Q?parseInt(Q):14},[k,S]=W(C()),L=Q=>{S(Q),localStorage.setItem("deployments-font-size",Q.toString())},P=()=>localStorage.getItem("deployments-font-family")||"Monaco",[I,D]=W(P()),T=Q=>{D(Q),localStorage.setItem("deployments-font-family",Q)},B=()=>{switch(I()){case"Monospace":return'"Courier New", Monaco, monospace';case"System-ui":return'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif';case"Monaco":return'Monaco, "Lucida Console", monospace';case"Consolas":return'Consolas, "Courier New", monospace';case"Courier":return'Courier, "Courier New", monospace';default:return'"Courier New", Monaco, monospace'}},N=()=>{const Q=hr();if(Q.length!==0)return Q.length===1,Q[0]},O=Fr("deployments",async()=>{ar(!0);try{const Q=N();return await Fe.getDeployments(Q)}finally{ar(!1)}},{ttl:15e3,backgroundRefresh:!0}),H=et(()=>O.data()||[]),[A]=it(()=>(v()||y())&&n()?{name:n().name,ns:n().namespace}:null,async Q=>Q&&(await Fe.getDeploymentYAML(Q.name,Q.ns)).yaml||""),z=async Q=>{const Z=n();if(Z)try{await Fe.updateDeployment(Z.name,Z.namespace,Q),Je(` Deployment ${Z.name} updated successfully`,"success"),x(!1),setTimeout(()=>O.refetch(),500),setTimeout(()=>O.refetch(),2e3)}catch(ne){const $e=ne instanceof Error?ne.message:"Unknown error";throw Je(` Failed to update deployment: ${$e}`,"error"),ne}},F=Q=>{if(!Q)return 0;let Z=0;const ne=Q.match(/(\d+)d/),$e=Q.match(/(\d+)h/),re=Q.match(/(\d+)m/);return ne&&(Z+=parseInt(ne[1])*24*60),$e&&(Z+=parseInt($e[1])*60),re&&(Z+=parseInt(re[1])),Z},j=et(()=>{let Q=H()||[];const Z=Xr().toLowerCase();Z&&(Q=Q.filter(re=>re.name.toLowerCase().includes(Z)||re.namespace.toLowerCase().includes(Z)));const ne=e(),$e=r();return Q=[...Q].sort((re,de)=>{let le=0;switch(ne){case"name":le=re.name.localeCompare(de.name);break;case"namespace":le=re.namespace.localeCompare(de.namespace);break;case"ready":le=re.ready.localeCompare(de.ready);break;case"age":le=F(re.age)-F(de.age);break}return $e==="asc"?le:-le}),Q}),q=et(()=>Math.ceil(j().length/d())),U=et(()=>{const Q=(a()-1)*d();return j().slice(Q,Q+d())}),Y=et(()=>{const Q=H()||[];return{total:Q.length,ready:Q.filter(Z=>{const ne=Z.ready?.split("/")||["0","0"];return ne[0]===ne[1]&&parseInt(ne[0])>0}).length,partial:Q.filter(Z=>{const ne=Z.ready?.split("/")||["0","0"];return ne[0]!==ne[1]&&parseInt(ne[0])>0}).length,unavailable:Q.filter(Z=>{const ne=Z.ready?.split("/")||["0","0"];return parseInt(ne[0])===0}).length}}),V=Q=>{e()===Q?l(Z=>Z==="asc"?"desc":"asc"):(t(Q),l("asc")),m(1)},X=Q=>(()=>{var Z=_p(),ne=Z.firstChild,$e=ne.nextSibling;return J(re=>{var de=e()===Q.field&&r()==="asc"?"var(--accent-primary)":"var(--text-muted)",le=e()===Q.field&&r()==="desc"?"var(--accent-primary)":"var(--text-muted)";return de!==re.e&&E(ne,"color",re.e=de),le!==re.t&&E($e,"color",re.t=le),re},{e:void 0,t:void 0}),Z})(),R=async Q=>{const Z=`${Q.namespace}/${Q.name}`;$(Z);try{const ne=await Fe.restartDeployment(Q.name,Q.namespace);ne?.success?Je(` Deployment ${Q.name} restart initiated - pods will restart shortly`,"success"):Je(` Restart initiated but may not have completed: ${ne?.message||"Unknown status"}`,"warning"),setTimeout(()=>O.refetch(),500),setTimeout(()=>O.refetch(),2e3),setTimeout(()=>O.refetch(),5e3)}catch(ne){console.error("Failed to restart deployment:",ne);const $e=ne instanceof Error?ne.message:"Unknown error";Je(` Failed to restart deployment ${Q.name}: ${$e}`,"error")}finally{setTimeout(()=>$(null),2e3)}},G=async()=>{const Q=n();if(Q)try{const Z=await Fe.scaleDeployment(Q.name,Q.namespace,u());Z?.success?Je(` Deployment ${Q.name} scaled to ${u()} replicas`,"success"):Je(` Scale may not have completed: ${Z?.message||"Unknown status"}`,"warning"),c(!1),setTimeout(()=>O.refetch(),500),setTimeout(()=>O.refetch(),2e3)}catch(Z){console.error("Failed to scale deployment:",Z);const ne=Z instanceof Error?Z.message:"Unknown error";Je(` Failed to scale deployment: ${ne}`,"error")}},te=async Q=>{if(confirm(`Are you sure you want to delete deployment "${Q.name}" in namespace "${Q.namespace}"?`))try{await Fe.deleteDeployment(Q.name,Q.namespace),Je(`Deployment ${Q.name} deleted successfully`,"success"),refetch()}catch(Z){console.error("Failed to delete deployment:",Z),Je(`Failed to delete deployment: ${Z instanceof Error?Z.message:"Unknown error"}`,"error")}},ae=Q=>{g(Q);const Z=Q.ready?.split("/")||["1","1"];h(parseInt(Z[1])||1),c(!0)};return(()=>{var Q=kp(),Z=Q.firstChild,ne=Z.firstChild,$e=ne.firstChild;$e.nextSibling;var re=ne.nextSibling,de=re.firstChild,le=Z.nextSibling,xe=le.firstChild,ye=xe.firstChild,ke=ye.nextSibling,ge=xe.nextSibling,Ce=ge.firstChild,_e=Ce.nextSibling,Me=ge.nextSibling,ve=Me.firstChild,be=ve.nextSibling,ce=Me.nextSibling,Ae=ce.firstChild,se=Ae.nextSibling,oe=ce.nextSibling,ie=oe.nextSibling,ue=ie.nextSibling,he=ue.nextSibling,Te=le.nextSibling;return de.$$click=ee=>{const Se=ee.currentTarget;Se.classList.add("refreshing"),setTimeout(()=>Se.classList.remove("refreshing"),500),O.refetch()},s(ke,()=>Y().total),s(_e,()=>Y().ready),s(be,()=>Y().partial),s(se,()=>Y().unavailable),ie.addEventListener("change",ee=>L(parseInt(ee.currentTarget.value))),ue.addEventListener("change",ee=>T(ee.currentTarget.value)),he.$$input=ee=>{Fi(ee.currentTarget.value),m(1)},s(Te,_(K,{get when(){return!O.loading()||O.data()!==void 0},get fallback(){return(()=>{var ee=Mp(),Se=ee.firstChild;return Se.nextSibling,ee})()},get children(){return[(()=>{var ee=$p(),Se=ee.firstChild,pe=Se.firstChild,De=pe.firstChild,Ne=De.firstChild,me=Ne.firstChild;me.firstChild;var He=Ne.nextSibling,Ze=He.firstChild;Ze.firstChild;var we=He.nextSibling,ze=we.firstChild;ze.firstChild;var Pe=we.nextSibling,Ue=Pe.nextSibling,Oe=Ue.nextSibling,fe=Oe.firstChild;fe.firstChild;var Le=Oe.nextSibling,We=pe.nextSibling;return Ne.$$click=()=>V("name"),s(me,_(X,{field:"name"}),null),He.$$click=()=>V("namespace"),s(Ze,_(X,{field:"namespace"}),null),we.$$click=()=>V("ready"),s(ze,_(X,{field:"ready"}),null),Oe.$$click=()=>V("age"),s(fe,_(X,{field:"age"}),null),s(We,_(Xe,{get each(){return U()},get fallback(){return(()=>{var Ee=Ap();return Ee.firstChild,Ee})()},children:Ee=>(()=>{var Ie=Lp(),qe=Ie.firstChild,Be=qe.firstChild,Ke=qe.nextSibling,Ye=Ke.nextSibling,lt=Ye.firstChild,gt=Ye.nextSibling,Qe=gt.nextSibling,ct=Qe.nextSibling,ft=ct.nextSibling;return Be.$$click=()=>{g(Ee),b(!0)},s(Be,(()=>{var Ge=Re(()=>Ee.name.length>40);return()=>Ge()?Ee.name.slice(0,37)+"...":Ee.name})()),s(Ke,()=>Ee.namespace),s(lt,()=>Ee.ready),s(gt,()=>Ee.upToDate),s(Qe,()=>Ee.available),s(ct,()=>Ee.age),s(ft,_(Jt,{get actions(){return[{label:"Scale",icon:"scale",onClick:()=>ae(Ee)},{label:"Restart",icon:"restart",onClick:()=>R(Ee),loading:f()===`${Ee.namespace}/${Ee.name}`},{label:"View YAML",icon:"yaml",onClick:()=>{g(Ee),p(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{g(Ee),x(!0)}},{label:"Delete",icon:"delete",onClick:()=>te(Ee),variant:"danger",divider:!0}]}})),J(Ge=>{var st=`${k()}px`,vt=`${Math.max(24,k()*1.7)}px`,at=`${Math.max(24,k()*1.7)}px`,pt=`${k()}px`,xt=`${Math.max(24,k()*1.7)}px`,Et=`${Math.max(24,k()*1.7)}px`,yt=`${k()}px`,Tt=`${Math.max(24,k()*1.7)}px`,Bt=`${Math.max(24,k()*1.7)}px`,Dt=`badge ${Ee.ready.split("/")[0]===Ee.ready.split("/")[1]?"badge-success":"badge-warning"}`,At=`${k()}px`,Nt=`${Math.max(24,k()*1.7)}px`,Ve=`${Math.max(24,k()*1.7)}px`,nt=`${k()}px`,rt=`${Math.max(24,k()*1.7)}px`,wt=`${Math.max(24,k()*1.7)}px`,$t=`${k()}px`,bt=`${Math.max(24,k()*1.7)}px`,kt=`${Math.max(24,k()*1.7)}px`,Mt=`${Math.max(24,k()*1.7)}px`,Rr=`${Math.max(24,k()*1.7)}px`;return st!==Ge.e&&E(qe,"font-size",Ge.e=st),vt!==Ge.t&&E(qe,"height",Ge.t=vt),at!==Ge.a&&E(qe,"line-height",Ge.a=at),pt!==Ge.o&&E(Ke,"font-size",Ge.o=pt),xt!==Ge.i&&E(Ke,"height",Ge.i=xt),Et!==Ge.n&&E(Ke,"line-height",Ge.n=Et),yt!==Ge.s&&E(Ye,"font-size",Ge.s=yt),Tt!==Ge.h&&E(Ye,"height",Ge.h=Tt),Bt!==Ge.r&&E(Ye,"line-height",Ge.r=Bt),Dt!==Ge.d&&tt(lt,Ge.d=Dt),At!==Ge.l&&E(gt,"font-size",Ge.l=At),Nt!==Ge.u&&E(gt,"height",Ge.u=Nt),Ve!==Ge.c&&E(gt,"line-height",Ge.c=Ve),nt!==Ge.w&&E(Qe,"font-size",Ge.w=nt),rt!==Ge.m&&E(Qe,"height",Ge.m=rt),wt!==Ge.f&&E(Qe,"line-height",Ge.f=wt),$t!==Ge.y&&E(ct,"font-size",Ge.y=$t),bt!==Ge.g&&E(ct,"height",Ge.g=bt),kt!==Ge.p&&E(ct,"line-height",Ge.p=kt),Mt!==Ge.b&&E(ft,"height",Ge.b=Mt),Rr!==Ge.T&&E(ft,"line-height",Ge.T=Rr),Ge},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0}),Ie})()})),J(Ee=>{var Ie=B(),qe=`${Math.max(24,k()*1.7)}px`,Be=B(),Ke=`${k()}px`,Ye=`${Math.max(24,k()*1.7)}px`,lt=`${k()}px`,gt=`${k()}px`,Qe=`${k()}px`,ct=`${k()}px`,ft=`${k()}px`,Ge=`${k()}px`,st=`${k()}px`;return Ie!==Ee.e&&E(Se,"font-family",Ee.e=Ie),qe!==Ee.t&&E(De,"height",Ee.t=qe),Be!==Ee.a&&E(De,"font-family",Ee.a=Be),Ke!==Ee.o&&E(De,"font-size",Ee.o=Ke),Ye!==Ee.i&&E(De,"line-height",Ee.i=Ye),lt!==Ee.n&&E(Ne,"font-size",Ee.n=lt),gt!==Ee.s&&E(He,"font-size",Ee.s=gt),Qe!==Ee.h&&E(we,"font-size",Ee.h=Qe),ct!==Ee.r&&E(Pe,"font-size",Ee.r=ct),ft!==Ee.d&&E(Ue,"font-size",Ee.d=ft),Ge!==Ee.l&&E(Oe,"font-size",Ee.l=Ge),st!==Ee.u&&E(Le,"font-size",Ee.u=st),Ee},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0}),ee})(),_(K,{get when(){return q()>1||j().length>0},get children(){var ee=wp(),Se=ee.firstChild,pe=Se.firstChild,De=pe.nextSibling,Ne=De.nextSibling,me=Ne.nextSibling,He=me.nextSibling,Ze=He.nextSibling;Ze.nextSibling;var we=Se.nextSibling,ze=we.firstChild,Pe=ze.nextSibling,Ue=Pe.nextSibling,Oe=Ue.firstChild,fe=Oe.nextSibling;fe.nextSibling;var Le=Ue.nextSibling,We=Le.nextSibling,Ee=We.nextSibling;return s(Se,()=>(a()-1)*d()+1,De),s(Se,()=>Math.min(a()*d(),j().length),me),s(Se,()=>j().length,Ze),ze.$$click=()=>m(1),Pe.$$click=()=>m(Ie=>Math.max(1,Ie-1)),s(Ue,a,fe),s(Ue,q,null),Le.$$click=()=>m(Ie=>Math.min(q(),Ie+1)),We.$$click=()=>m(q()),Ee.addEventListener("change",Ie=>{i(parseInt(Ie.currentTarget.value)),m(1)}),J(Ie=>{var qe=a()===1,Be=a()===1,Ke=a()===q(),Ye=a()===q();return qe!==Ie.e&&(ze.disabled=Ie.e=qe),Be!==Ie.t&&(Pe.disabled=Ie.t=Be),Ke!==Ie.a&&(Le.disabled=Ie.a=Ke),Ye!==Ie.o&&(We.disabled=Ie.o=Ye),Ie},{e:void 0,t:void 0,a:void 0,o:void 0}),J(()=>Ee.value=d()),ee}})]}})),s(Q,_(mt,{get isOpen(){return v()},onClose:()=>p(!1),get title(){return`YAML: ${n()?.name}`},size:"xl",get children(){return _(K,{get when(){return!A.loading},get fallback(){return Ma()},get children(){return _(gr,{get yaml(){return A()||""},get title(){return n()?.name}})}})}}),null),s(Q,_(mt,{get isOpen(){return y()},onClose:()=>x(!1),get title(){return`Edit YAML: ${n()?.name}`},size:"xl",get children(){return _(K,{get when(){return!A.loading},get fallback(){return Ma()},get children(){var ee=Sp();return s(ee,_(Dr,{get yaml(){return A()||""},get title(){return n()?.name},onSave:z,onCancel:()=>x(!1)})),ee}})}}),null),s(Q,_(Sr,{get isOpen(){return M()},onClose:()=>b(!1),resourceType:"deployment",get name(){return n()?.name||""},get namespace(){return n()?.namespace}}),null),s(Q,_(mt,{get isOpen(){return o()},onClose:()=>c(!1),get title(){return`Scale: ${n()?.name}`},size:"sm",get children(){var ee=Cp(),Se=ee.firstChild,pe=Se.firstChild,De=pe.nextSibling,Ne=Se.nextSibling,me=Ne.firstChild,He=me.nextSibling;return De.$$input=Ze=>h(parseInt(Ze.currentTarget.value)||0),me.$$click=()=>c(!1),He.$$click=G,J(()=>De.value=u()),ee}}),null),J(()=>ie.value=k()),J(()=>ue.value=I()),J(()=>he.value=Xr()),Q})()};ut(["click","input"]);function qt(){return Gr[$s()].colors.bgPrimary}function Ar(){return Gr[$s()].colors.borderColor}var Tp=w('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span></span><span>'),Dp=w('<div class="w-full overflow-x-auto"style=margin:0;padding:0><table class=w-full style=width:100%;table-layout:auto;border-collapse:collapse;margin:0;padding:0><thead><tr style=font-weight:900;color:#0ea5e9><th class="cursor-pointer select-none whitespace-nowrap"style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none"><div class="flex items-center gap-1">Namespace </div></th><th class="cursor-pointer select-none whitespace-nowrap"style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none"><div class="flex items-center gap-1">Ready </div></th><th class=whitespace-nowrap style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none">Replicas</th><th class="cursor-pointer select-none whitespace-nowrap"style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none">Actions</th></tr></thead><tbody>'),Rp=w('<div class="flex items-center justify-between p-4 font-mono text-sm"style="background:var(--bg-secondary);borderTop:1px solid var(--border-color)"><div style=color:var(--text-secondary)>Showing <!> - <!> of <!> StatefulSets</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)> Prev</button><span class="px-3 py-1"style=color:var(--text-primary)>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>Next </button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>Last</button><select class="px-3 py-1 rounded-lg text-sm ml-4"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20 per page</option><option value=50>50 per page</option><option value=100>100 per page</option><option value=200>200 per page'),Pp=w("<div style=height:70vh>"),Ip=w('<div class=space-y-4><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Replicas</label><input type=number min=0 max=100 class="w-full px-4 py-2 rounded-lg"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div class="flex gap-2"><button class="btn-secondary flex-1">Cancel</button><button class="btn-primary flex-1">Scale'),Bp=w('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>StatefulSets</h1><p style=color:var(--text-secondary)>Manage stateful applications</p></div><div class="flex items-center gap-3"><button class=icon-btn title="Refresh StatefulSets"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Ready</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--warning-color)"><span class=text-sm style=color:var(--text-secondary)>Partial</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--error-color)"><span class=text-sm style=color:var(--text-secondary)>Unavailable</span><span class="text-xl font-bold"style=color:var(--error-color)></span></div><div class=flex-1></div><select class="px-3 py-2 rounded-lg text-sm"title="Font Size"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=12>12px</option><option value=14>14px</option><option value=16>16px</option><option value=18>18px</option><option value=20>20px</option></select><select class="px-3 py-2 rounded-lg text-sm"title="Font Family"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=Monospace>Monospace</option><option value=System-ui>System-ui</option><option value=Monaco>Monaco</option><option value=Consolas>Consolas</option><option value=Courier>Courier</option></select><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class=w-full style=margin:0;padding:0;border-radius:4px>'),Np=w('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading StatefulSets...'),Op=w('<tr><td colspan=6 class="text-center py-8"style=color:var(--text-muted)>No StatefulSets found'),zp=w('<tr><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"><span></span></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;border:none">'),Aa=w('<div class="spinner mx-auto">');const Fp=()=>{const[e,t]=W(""),[r,l]=W("name"),[a,m]=W("asc"),[d,i]=W(1),[n,g]=W(20),[v,p]=W(null),[y,x]=W(!1),[M,b]=W(!1),[o,c]=W(!1),[u,h]=W(!1),[f,$]=W(1),[C,k]=W(null),S=()=>{const Z=localStorage.getItem("statefulsets-font-size");return Z?parseInt(Z):14},[L,P]=W(S()),I=Z=>{P(Z),localStorage.setItem("statefulsets-font-size",Z.toString())},D=()=>localStorage.getItem("statefulsets-font-family")||"Monaco",[T,B]=W(D()),N=Z=>{B(Z),localStorage.setItem("statefulsets-font-family",Z)},O=()=>{switch(T()){case"Monospace":return'"Courier New", Monaco, monospace';case"System-ui":return'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif';case"Monaco":return'Monaco, "Lucida Console", monospace';case"Consolas":return'Consolas, "Courier New", monospace';case"Courier":return'Courier, "Courier New", monospace';default:return'"Courier New", Monaco, monospace'}},[H,{refetch:A}]=it(Xt,Fe.getStatefulSets),[z]=it(()=>(y()||M())&&v()?{name:v().name,ns:v().namespace}:null,async Z=>Z&&(await Fe.getStatefulSetYAML(Z.name,Z.ns)).yaml||""),F=async Z=>{const ne=v();if(ne)try{await Fe.updateStatefulSet(ne.name,ne.namespace,Z),Je(` StatefulSet ${ne.name} updated successfully`,"success"),b(!1),setTimeout(()=>A(),500),setTimeout(()=>A(),2e3)}catch($e){const re=$e instanceof Error?$e.message:"Unknown error";throw Je(` Failed to update StatefulSet: ${re}`,"error"),$e}},j=Z=>{if(!Z)return 0;let ne=0;const $e=Z.match(/(\d+)d/),re=Z.match(/(\d+)h/),de=Z.match(/(\d+)m/);return $e&&(ne+=parseInt($e[1])*24*60),re&&(ne+=parseInt(re[1])*60),de&&(ne+=parseInt(de[1])),ne},q=et(()=>{let Z=H()||[];const ne=e().toLowerCase();ne&&(Z=Z.filter(de=>de.name.toLowerCase().includes(ne)||de.namespace.toLowerCase().includes(ne)));const $e=r(),re=a();return Z=[...Z].sort((de,le)=>{let xe=0;switch($e){case"name":xe=de.name.localeCompare(le.name);break;case"namespace":xe=de.namespace.localeCompare(le.namespace);break;case"ready":xe=de.ready.localeCompare(le.ready);break;case"age":xe=j(de.age)-j(le.age);break}return re==="asc"?xe:-xe}),Z}),U=et(()=>Math.ceil(q().length/n())),Y=et(()=>{const Z=(d()-1)*n();return q().slice(Z,Z+n())}),V=et(()=>{const Z=H()||[];return{total:Z.length,ready:Z.filter(ne=>{const $e=ne.ready?.split("/")||["0","0"];return $e[0]===$e[1]&&parseInt($e[0])>0}).length,partial:Z.filter(ne=>{const $e=ne.ready?.split("/")||["0","0"];return $e[0]!==$e[1]&&parseInt($e[0])>0}).length,unavailable:Z.filter(ne=>{const $e=ne.ready?.split("/")||["0","0"];return parseInt($e[0])===0}).length}}),X=Z=>{r()===Z?m(ne=>ne==="asc"?"desc":"asc"):(l(Z),m("asc")),i(1)},R=Z=>(()=>{var ne=Tp(),$e=ne.firstChild,re=$e.nextSibling;return J(de=>{var le=r()===Z.field&&a()==="asc"?"var(--accent-primary)":"var(--text-muted)",xe=r()===Z.field&&a()==="desc"?"var(--accent-primary)":"var(--text-muted)";return le!==de.e&&E($e,"color",de.e=le),xe!==de.t&&E(re,"color",de.t=xe),de},{e:void 0,t:void 0}),ne})(),G=async Z=>{const ne=`${Z.namespace}/${Z.name}`;k(ne);try{const $e=await Fe.restartStatefulSet(Z.name,Z.namespace);$e?.success?Je(` StatefulSet ${Z.name} restart initiated - pods will restart shortly`,"success"):Je(` Restart initiated but may not have completed: ${$e?.message||"Unknown status"}`,"warning"),setTimeout(()=>A(),500),setTimeout(()=>A(),2e3),setTimeout(()=>A(),5e3)}catch($e){console.error("Failed to restart StatefulSet:",$e);const re=$e instanceof Error?$e.message:"Unknown error";Je(` Failed to restart StatefulSet ${Z.name}: ${re}`,"error")}finally{setTimeout(()=>k(null),2e3)}},te=async()=>{const Z=v();if(Z)try{const ne=await Fe.scaleStatefulSet(Z.name,Z.namespace,f());ne?.success?Je(` StatefulSet ${Z.name} scaled to ${f()} replicas`,"success"):Je(` Scale may not have completed: ${ne?.message||"Unknown status"}`,"warning"),h(!1),setTimeout(()=>A(),500),setTimeout(()=>A(),2e3)}catch(ne){console.error("Failed to scale StatefulSet:",ne);const $e=ne instanceof Error?ne.message:"Unknown error";Je(` Failed to scale StatefulSet: ${$e}`,"error")}},ae=async Z=>{if(confirm(`Are you sure you want to delete StatefulSet "${Z.name}" in namespace "${Z.namespace}"?`))try{await Fe.deleteStatefulSet(Z.name,Z.namespace),Je(`StatefulSet ${Z.name} deleted successfully`,"success"),A()}catch(ne){console.error("Failed to delete StatefulSet:",ne),Je(`Failed to delete StatefulSet: ${ne instanceof Error?ne.message:"Unknown error"}`,"error")}},Q=Z=>{p(Z);const ne=Z.ready?.split("/")||["1","1"];$(parseInt(ne[1])||1),h(!0)};return(()=>{var Z=Bp(),ne=Z.firstChild,$e=ne.firstChild,re=$e.firstChild;re.nextSibling;var de=$e.nextSibling,le=de.firstChild,xe=ne.nextSibling,ye=xe.firstChild,ke=ye.firstChild,ge=ke.nextSibling,Ce=ye.nextSibling,_e=Ce.firstChild,Me=_e.nextSibling,ve=Ce.nextSibling,be=ve.firstChild,ce=be.nextSibling,Ae=ve.nextSibling,se=Ae.firstChild,oe=se.nextSibling,ie=Ae.nextSibling,ue=ie.nextSibling,he=ue.nextSibling,Te=he.nextSibling,ee=Te.nextSibling,Se=xe.nextSibling;return le.$$click=pe=>{const De=pe.currentTarget;De.classList.add("refreshing"),setTimeout(()=>De.classList.remove("refreshing"),500),A()},s(ge,()=>V().total),s(Me,()=>V().ready),s(ce,()=>V().partial),s(oe,()=>V().unavailable),ue.addEventListener("change",pe=>I(parseInt(pe.currentTarget.value))),he.addEventListener("change",pe=>N(pe.currentTarget.value)),Te.$$input=pe=>{t(pe.currentTarget.value),i(1)},ee.addEventListener("change",pe=>{g(parseInt(pe.currentTarget.value)),i(1)}),s(Se,_(K,{get when(){return!H.loading},get fallback(){return(()=>{var pe=Np(),De=pe.firstChild;return De.nextSibling,pe})()},get children(){return[(()=>{var pe=Dp(),De=pe.firstChild,Ne=De.firstChild,me=Ne.firstChild,He=me.firstChild,Ze=He.firstChild;Ze.firstChild;var we=He.nextSibling,ze=we.firstChild;ze.firstChild;var Pe=we.nextSibling,Ue=Pe.firstChild;Ue.firstChild;var Oe=Pe.nextSibling,fe=Oe.nextSibling,Le=fe.firstChild;Le.firstChild;var We=fe.nextSibling,Ee=Ne.nextSibling;return He.$$click=()=>X("name"),s(Ze,_(R,{field:"name"}),null),we.$$click=()=>X("namespace"),s(ze,_(R,{field:"namespace"}),null),Pe.$$click=()=>X("ready"),s(Ue,_(R,{field:"ready"}),null),fe.$$click=()=>X("age"),s(Le,_(R,{field:"age"}),null),s(Ee,_(Xe,{get each(){return Y()},get fallback(){return(()=>{var Ie=Op();return Ie.firstChild,Ie})()},children:Ie=>(()=>{var qe=zp(),Be=qe.firstChild,Ke=Be.firstChild,Ye=Be.nextSibling,lt=Ye.nextSibling,gt=lt.firstChild,Qe=lt.nextSibling,ct=Qe.nextSibling,ft=ct.nextSibling;return Ke.$$click=()=>{p(Ie),c(!0)},s(Ke,(()=>{var Ge=Re(()=>Ie.name.length>40);return()=>Ge()?Ie.name.slice(0,37)+"...":Ie.name})()),s(Ye,()=>Ie.namespace),s(gt,()=>Ie.ready),s(Qe,()=>Ie.replicas),s(ct,()=>Ie.age),s(ft,_(Jt,{get actions(){return[{label:"Scale",icon:"scale",onClick:()=>Q(Ie)},{label:"Restart",icon:"restart",onClick:()=>G(Ie),loading:C()===`${Ie.namespace}/${Ie.name}`},{label:"View YAML",icon:"yaml",onClick:()=>{p(Ie),x(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{p(Ie),b(!0)}},{label:"Delete",icon:"delete",onClick:()=>ae(Ie),variant:"danger",divider:!0}]}})),J(Ge=>{var st=`${L()}px`,vt=`${Math.max(24,L()*1.7)}px`,at=`${Math.max(24,L()*1.7)}px`,pt=`${L()}px`,xt=`${Math.max(24,L()*1.7)}px`,Et=`${Math.max(24,L()*1.7)}px`,yt=`${L()}px`,Tt=`${Math.max(24,L()*1.7)}px`,Bt=`${Math.max(24,L()*1.7)}px`,Dt=`badge ${Ie.ready.split("/")[0]===Ie.ready.split("/")[1]?"badge-success":"badge-warning"}`,At=`${L()}px`,Nt=`${Math.max(24,L()*1.7)}px`,Ve=`${Math.max(24,L()*1.7)}px`,nt=`${L()}px`,rt=`${Math.max(24,L()*1.7)}px`,wt=`${Math.max(24,L()*1.7)}px`,$t=`${Math.max(24,L()*1.7)}px`,bt=`${Math.max(24,L()*1.7)}px`;return st!==Ge.e&&E(Be,"font-size",Ge.e=st),vt!==Ge.t&&E(Be,"height",Ge.t=vt),at!==Ge.a&&E(Be,"line-height",Ge.a=at),pt!==Ge.o&&E(Ye,"font-size",Ge.o=pt),xt!==Ge.i&&E(Ye,"height",Ge.i=xt),Et!==Ge.n&&E(Ye,"line-height",Ge.n=Et),yt!==Ge.s&&E(lt,"font-size",Ge.s=yt),Tt!==Ge.h&&E(lt,"height",Ge.h=Tt),Bt!==Ge.r&&E(lt,"line-height",Ge.r=Bt),Dt!==Ge.d&&tt(gt,Ge.d=Dt),At!==Ge.l&&E(Qe,"font-size",Ge.l=At),Nt!==Ge.u&&E(Qe,"height",Ge.u=Nt),Ve!==Ge.c&&E(Qe,"line-height",Ge.c=Ve),nt!==Ge.w&&E(ct,"font-size",Ge.w=nt),rt!==Ge.m&&E(ct,"height",Ge.m=rt),wt!==Ge.f&&E(ct,"line-height",Ge.f=wt),$t!==Ge.y&&E(ft,"height",Ge.y=$t),bt!==Ge.g&&E(ft,"line-height",Ge.g=bt),Ge},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0}),qe})()})),J(Ie=>{var qe=O(),Be=qt(),Ke=`${Math.max(24,L()*1.7)}px`,Ye=O(),lt=`${L()}px`,gt=`${Math.max(24,L()*1.7)}px`,Qe=`${L()}px`,ct=`${L()}px`,ft=`${L()}px`,Ge=`${L()}px`,st=`${L()}px`,vt=`${L()}px`;return qe!==Ie.e&&E(De,"font-family",Ie.e=qe),Be!==Ie.t&&E(De,"background",Ie.t=Be),Ke!==Ie.a&&E(me,"height",Ie.a=Ke),Ye!==Ie.o&&E(me,"font-family",Ie.o=Ye),lt!==Ie.i&&E(me,"font-size",Ie.i=lt),gt!==Ie.n&&E(me,"line-height",Ie.n=gt),Qe!==Ie.s&&E(He,"font-size",Ie.s=Qe),ct!==Ie.h&&E(we,"font-size",Ie.h=ct),ft!==Ie.r&&E(Pe,"font-size",Ie.r=ft),Ge!==Ie.d&&E(Oe,"font-size",Ie.d=Ge),st!==Ie.l&&E(fe,"font-size",Ie.l=st),vt!==Ie.u&&E(We,"font-size",Ie.u=vt),Ie},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0}),pe})(),_(K,{get when(){return U()>1||q().length>0},get children(){var pe=Rp(),De=pe.firstChild,Ne=De.firstChild,me=Ne.nextSibling,He=me.nextSibling,Ze=He.nextSibling,we=Ze.nextSibling,ze=we.nextSibling;ze.nextSibling;var Pe=De.nextSibling,Ue=Pe.firstChild,Oe=Ue.nextSibling,fe=Oe.nextSibling,Le=fe.firstChild,We=Le.nextSibling;We.nextSibling;var Ee=fe.nextSibling,Ie=Ee.nextSibling,qe=Ie.nextSibling;return s(De,()=>(d()-1)*n()+1,me),s(De,()=>Math.min(d()*n(),q().length),Ze),s(De,()=>q().length,ze),Ue.$$click=()=>i(1),Oe.$$click=()=>i(Be=>Math.max(1,Be-1)),s(fe,d,We),s(fe,U,null),Ee.$$click=()=>i(Be=>Math.min(U(),Be+1)),Ie.$$click=()=>i(U()),qe.addEventListener("change",Be=>{g(parseInt(Be.currentTarget.value)),i(1)}),J(Be=>{var Ke=d()===1,Ye=d()===1,lt=d()===U(),gt=d()===U();return Ke!==Be.e&&(Ue.disabled=Be.e=Ke),Ye!==Be.t&&(Oe.disabled=Be.t=Ye),lt!==Be.a&&(Ee.disabled=Be.a=lt),gt!==Be.o&&(Ie.disabled=Be.o=gt),Be},{e:void 0,t:void 0,a:void 0,o:void 0}),J(()=>qe.value=n()),pe}})]}})),s(Z,_(mt,{get isOpen(){return y()},onClose:()=>x(!1),get title(){return`YAML: ${v()?.name}`},size:"xl",get children(){return _(K,{get when(){return!z.loading},get fallback(){return Aa()},get children(){return _(gr,{get yaml(){return z()||""},get title(){return v()?.name}})}})}}),null),s(Z,_(mt,{get isOpen(){return M()},onClose:()=>b(!1),get title(){return`Edit YAML: ${v()?.name}`},size:"xl",get children(){return _(K,{get when(){return!z.loading},get fallback(){return Aa()},get children(){var pe=Pp();return s(pe,_(Dr,{get yaml(){return z()||""},get title(){return v()?.name},onSave:F,onCancel:()=>b(!1)})),pe}})}}),null),s(Z,_(Sr,{get isOpen(){return o()},onClose:()=>c(!1),resourceType:"statefulset",get name(){return v()?.name||""},get namespace(){return v()?.namespace}}),null),s(Z,_(mt,{get isOpen(){return u()},onClose:()=>h(!1),get title(){return`Scale: ${v()?.name}`},size:"sm",get children(){var pe=Ip(),De=pe.firstChild,Ne=De.firstChild,me=Ne.nextSibling,He=De.nextSibling,Ze=He.firstChild,we=Ze.nextSibling;return me.$$input=ze=>$(parseInt(ze.currentTarget.value)||0),Ze.$$click=()=>h(!1),we.$$click=te,J(()=>me.value=f()),pe}}),null),J(pe=>{var De=qt(),Ne=`1px solid ${Ar()}`;return De!==pe.e&&E(Se,"background",pe.e=De),Ne!==pe.t&&E(Se,"border",pe.t=Ne),pe},{e:void 0,t:void 0}),J(()=>ue.value=L()),J(()=>he.value=T()),J(()=>Te.value=e()),J(()=>ee.value=n()),Z})()};ut(["click","input"]);var Hp=w('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span></span><span>'),jp=w('<div class="w-full overflow-x-auto"style=margin:0;padding:0><table class=w-full style=width:100%;table-layout:auto;border-collapse:collapse;margin:0;padding:0><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class=whitespace-nowrap>Desired</th><th class=whitespace-nowrap>Current</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Ready </div></th><th class=whitespace-nowrap>Available</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),Up=w('<div class="flex items-center justify-between p-4 font-mono text-sm"style="background:var(--bg-secondary);borderTop:1px solid var(--border-color)"><div style=color:var(--text-secondary)>Showing <!> - <!> of <!> DaemonSets</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)> Prev</button><span class="px-3 py-1"style=color:var(--text-primary)>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>Next </button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>Last</button><select class="px-3 py-1 rounded-lg text-sm ml-4"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20 per page</option><option value=50>50 per page</option><option value=100>100 per page</option><option value=200>200 per page'),Vp=w("<div style=height:70vh>"),Wp=w('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>DaemonSets</h1><p style=color:var(--text-secondary)>Node-level workloads running on all or selected nodes</p></div><div class="flex items-center gap-3"><select class="px-3 py-2 rounded-lg text-sm"title="Font Size"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=12>12px</option><option value=13>13px</option><option value=14>14px</option><option value=15>15px</option><option value=16>16px</option><option value=17>17px</option><option value=18>18px</option><option value=19>19px</option><option value=20>20px</option></select><select class="px-3 py-2 rounded-lg text-sm"title="Font Family"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=Monospace>Monospace</option><option value=System-ui>System-ui</option><option value=Monaco>Monaco</option><option value=Consolas>Consolas</option><option value=Courier>Courier</option></select><button class=icon-btn title="Refresh DaemonSets"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Ready</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--warning-color)"><span class=text-sm style=color:var(--text-secondary)>Partial</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--error-color)"><span class=text-sm style=color:var(--text-secondary)>Unavailable</span><span class="text-xl font-bold"style=color:var(--error-color)></span></div><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class=w-full style=margin:0;padding:0;border-radius:4px>'),qp=w('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading DaemonSets...'),Kp=w('<tr><td colspan=8 class="text-center py-8"style=color:var(--text-muted)>No DaemonSets found'),Yp=w('<tr><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"><span></span></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;border:none">'),La=w('<div class="spinner mx-auto">');const Gp=()=>{const[e,t]=W(""),[r,l]=W("name"),[a,m]=W("asc"),[d,i]=W(1),[n,g]=W(20),[v,p]=W(null),[y,x]=W(!1),[M,b]=W(!1),[o,c]=W(!1),[u,h]=W(parseInt(localStorage.getItem("daemonsets-font-size")||"14")),[f,$]=W(localStorage.getItem("daemonsets-font-family")||"Monaco"),C=q=>{switch(q){case"Monospace":return"monospace";case"System-ui":return"system-ui";case"Monaco":return"Monaco, monospace";case"Consolas":return"Consolas, monospace";case"Courier":return'"Courier New", monospace';default:return"Monaco, monospace"}},k=q=>{h(q),localStorage.setItem("daemonsets-font-size",q.toString())},S=q=>{$(q),localStorage.setItem("daemonsets-font-family",q)},[L,{refetch:P}]=it(Xt,Fe.getDaemonSets),[I]=it(()=>(y()||M())&&v()?{name:v().name,ns:v().namespace}:null,async q=>q&&(await Fe.getDaemonSetYAML(q.name,q.ns)).yaml||""),D=async q=>{const U=v();if(U)try{await Fe.updateDaemonSet(U.name,U.namespace,q),Je(` DaemonSet ${U.name} updated successfully`,"success"),b(!1),setTimeout(()=>P(),500),setTimeout(()=>P(),2e3)}catch(Y){const V=Y instanceof Error?Y.message:"Unknown error";throw Je(` Failed to update daemonset: ${V}`,"error"),Y}},T=q=>{if(!q)return 0;let U=0;const Y=q.match(/(\d+)d/),V=q.match(/(\d+)h/),X=q.match(/(\d+)m/);return Y&&(U+=parseInt(Y[1])*24*60),V&&(U+=parseInt(V[1])*60),X&&(U+=parseInt(X[1])),U},B=et(()=>{let q=L()||[];const U=e().toLowerCase();U&&(q=q.filter(X=>X.name.toLowerCase().includes(U)||X.namespace.toLowerCase().includes(U)));const Y=r(),V=a();return q=[...q].sort((X,R)=>{let G=0;switch(Y){case"name":G=X.name.localeCompare(R.name);break;case"namespace":G=X.namespace.localeCompare(R.namespace);break;case"ready":G=X.ready-R.ready;break;case"age":G=T(X.age)-T(R.age);break}return V==="asc"?G:-G}),q}),N=et(()=>Math.ceil(B().length/n())),O=et(()=>{const q=(d()-1)*n();return B().slice(q,q+n())}),H=et(()=>{const q=L()||[];return{total:q.length,ready:q.filter(U=>U.ready===U.desired&&U.ready>0).length,partial:q.filter(U=>U.ready!==U.desired&&U.ready>0).length,unavailable:q.filter(U=>U.ready===0).length}}),A=q=>{r()===q?m(U=>U==="asc"?"desc":"asc"):(l(q),m("asc")),i(1)},z=q=>(()=>{var U=Hp(),Y=U.firstChild,V=Y.nextSibling;return J(X=>{var R=r()===q.field&&a()==="asc"?"var(--accent-primary)":"var(--text-muted)",G=r()===q.field&&a()==="desc"?"var(--accent-primary)":"var(--text-muted)";return R!==X.e&&E(Y,"color",X.e=R),G!==X.t&&E(V,"color",X.t=G),X},{e:void 0,t:void 0}),U})(),F=async q=>{try{await Fe.restartDaemonSet(q.name,q.namespace),P()}catch(U){console.error("Failed to restart DaemonSet:",U)}},j=async q=>{if(confirm(`Are you sure you want to delete DaemonSet "${q.name}" in namespace "${q.namespace}"?`))try{await Fe.deleteDaemonSet(q.name,q.namespace),Je(`DaemonSet ${q.name} deleted successfully`,"success"),P()}catch(U){console.error("Failed to delete DaemonSet:",U),Je(`Failed to delete DaemonSet: ${U instanceof Error?U.message:"Unknown error"}`,"error")}};return(()=>{var q=Wp(),U=q.firstChild,Y=U.firstChild,V=Y.firstChild;V.nextSibling;var X=Y.nextSibling,R=X.firstChild,G=R.nextSibling,te=G.nextSibling,ae=U.nextSibling,Q=ae.firstChild,Z=Q.firstChild,ne=Z.nextSibling,$e=Q.nextSibling,re=$e.firstChild,de=re.nextSibling,le=$e.nextSibling,xe=le.firstChild,ye=xe.nextSibling,ke=le.nextSibling,ge=ke.firstChild,Ce=ge.nextSibling,_e=ke.nextSibling,Me=_e.nextSibling,ve=Me.nextSibling,be=ae.nextSibling;return R.addEventListener("change",ce=>k(parseInt(ce.currentTarget.value))),G.addEventListener("change",ce=>S(ce.currentTarget.value)),te.$$click=ce=>{const Ae=ce.currentTarget;Ae.classList.add("refreshing"),setTimeout(()=>Ae.classList.remove("refreshing"),500),P()},s(ne,()=>H().total),s(de,()=>H().ready),s(ye,()=>H().partial),s(Ce,()=>H().unavailable),Me.$$input=ce=>{t(ce.currentTarget.value),i(1)},ve.addEventListener("change",ce=>{g(parseInt(ce.currentTarget.value)),i(1)}),s(be,_(K,{get when(){return!L.loading},get fallback(){return(()=>{var ce=qp(),Ae=ce.firstChild;return Ae.nextSibling,ce})()},get children(){return[(()=>{var ce=jp(),Ae=ce.firstChild,se=Ae.firstChild,oe=se.firstChild,ie=oe.firstChild,ue=ie.firstChild;ue.firstChild;var he=ie.nextSibling,Te=he.firstChild;Te.firstChild;var ee=he.nextSibling,Se=ee.nextSibling,pe=Se.nextSibling,De=pe.firstChild;De.firstChild;var Ne=pe.nextSibling,me=Ne.nextSibling,He=me.firstChild;He.firstChild;var Ze=se.nextSibling;return ie.$$click=()=>A("name"),s(ue,_(z,{field:"name"}),null),he.$$click=()=>A("namespace"),s(Te,_(z,{field:"namespace"}),null),pe.$$click=()=>A("ready"),s(De,_(z,{field:"ready"}),null),me.$$click=()=>A("age"),s(He,_(z,{field:"age"}),null),s(Ze,_(Xe,{get each(){return O()},get fallback(){return(()=>{var we=Kp();return we.firstChild,we})()},children:we=>(()=>{var ze=Yp(),Pe=ze.firstChild,Ue=Pe.firstChild,Oe=Pe.nextSibling,fe=Oe.nextSibling,Le=fe.nextSibling,We=Le.nextSibling,Ee=We.firstChild,Ie=We.nextSibling,qe=Ie.nextSibling,Be=qe.nextSibling;return Ue.$$click=()=>{p(we),c(!0)},s(Ue,(()=>{var Ke=Re(()=>we.name.length>40);return()=>Ke()?we.name.slice(0,37)+"...":we.name})()),s(Oe,()=>we.namespace),s(fe,()=>we.desired),s(Le,()=>we.current),s(Ee,()=>we.ready),s(Ie,()=>we.available),s(qe,()=>we.age),s(Be,_(Jt,{actions:[{label:"Restart",icon:"restart",onClick:()=>F(we)},{label:"View YAML",icon:"yaml",onClick:()=>{p(we),x(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{p(we),b(!0)}},{label:"Delete",icon:"delete",onClick:()=>j(we),variant:"danger",divider:!0}]})),J(Ke=>{var Ye=`${u()}px`,lt=`${Math.max(24,u()*1.7)}px`,gt=`${Math.max(24,u()*1.7)}px`,Qe=`${u()}px`,ct=`${Math.max(24,u()*1.7)}px`,ft=`${Math.max(24,u()*1.7)}px`,Ge=`${u()}px`,st=`${Math.max(24,u()*1.7)}px`,vt=`${Math.max(24,u()*1.7)}px`,at=`${u()}px`,pt=`${Math.max(24,u()*1.7)}px`,xt=`${Math.max(24,u()*1.7)}px`,Et=`${u()}px`,yt=`${Math.max(24,u()*1.7)}px`,Tt=`${Math.max(24,u()*1.7)}px`,Bt=`badge ${we.ready===we.desired?"badge-success":"badge-warning"}`,Dt=`${u()}px`,At=`${Math.max(24,u()*1.7)}px`,Nt=`${Math.max(24,u()*1.7)}px`,Ve=`${u()}px`,nt=`${Math.max(24,u()*1.7)}px`,rt=`${Math.max(24,u()*1.7)}px`,wt=`${Math.max(24,u()*1.7)}px`,$t=`${Math.max(24,u()*1.7)}px`;return Ye!==Ke.e&&E(Pe,"font-size",Ke.e=Ye),lt!==Ke.t&&E(Pe,"height",Ke.t=lt),gt!==Ke.a&&E(Pe,"line-height",Ke.a=gt),Qe!==Ke.o&&E(Oe,"font-size",Ke.o=Qe),ct!==Ke.i&&E(Oe,"height",Ke.i=ct),ft!==Ke.n&&E(Oe,"line-height",Ke.n=ft),Ge!==Ke.s&&E(fe,"font-size",Ke.s=Ge),st!==Ke.h&&E(fe,"height",Ke.h=st),vt!==Ke.r&&E(fe,"line-height",Ke.r=vt),at!==Ke.d&&E(Le,"font-size",Ke.d=at),pt!==Ke.l&&E(Le,"height",Ke.l=pt),xt!==Ke.u&&E(Le,"line-height",Ke.u=xt),Et!==Ke.c&&E(We,"font-size",Ke.c=Et),yt!==Ke.w&&E(We,"height",Ke.w=yt),Tt!==Ke.m&&E(We,"line-height",Ke.m=Tt),Bt!==Ke.f&&tt(Ee,Ke.f=Bt),Dt!==Ke.y&&E(Ie,"font-size",Ke.y=Dt),At!==Ke.g&&E(Ie,"height",Ke.g=At),Nt!==Ke.p&&E(Ie,"line-height",Ke.p=Nt),Ve!==Ke.b&&E(qe,"font-size",Ke.b=Ve),nt!==Ke.T&&E(qe,"height",Ke.T=nt),rt!==Ke.A&&E(qe,"line-height",Ke.A=rt),wt!==Ke.O&&E(Be,"height",Ke.O=wt),$t!==Ke.I&&E(Be,"line-height",Ke.I=$t),Ke},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0,A:void 0,O:void 0,I:void 0}),ze})()})),J(we=>{var ze=C(f()),Pe=qt();return ze!==we.e&&E(Ae,"font-family",we.e=ze),Pe!==we.t&&E(Ae,"background",we.t=Pe),we},{e:void 0,t:void 0}),ce})(),_(K,{get when(){return N()>1||B().length>0},get children(){var ce=Up(),Ae=ce.firstChild,se=Ae.firstChild,oe=se.nextSibling,ie=oe.nextSibling,ue=ie.nextSibling,he=ue.nextSibling,Te=he.nextSibling;Te.nextSibling;var ee=Ae.nextSibling,Se=ee.firstChild,pe=Se.nextSibling,De=pe.nextSibling,Ne=De.firstChild,me=Ne.nextSibling;me.nextSibling;var He=De.nextSibling,Ze=He.nextSibling,we=Ze.nextSibling;return s(Ae,()=>(d()-1)*n()+1,oe),s(Ae,()=>Math.min(d()*n(),B().length),ue),s(Ae,()=>B().length,Te),Se.$$click=()=>i(1),pe.$$click=()=>i(ze=>Math.max(1,ze-1)),s(De,d,me),s(De,N,null),He.$$click=()=>i(ze=>Math.min(N(),ze+1)),Ze.$$click=()=>i(N()),we.addEventListener("change",ze=>{g(parseInt(ze.currentTarget.value)),i(1)}),J(ze=>{var Pe=d()===1,Ue=d()===1,Oe=d()===N(),fe=d()===N();return Pe!==ze.e&&(Se.disabled=ze.e=Pe),Ue!==ze.t&&(pe.disabled=ze.t=Ue),Oe!==ze.a&&(He.disabled=ze.a=Oe),fe!==ze.o&&(Ze.disabled=ze.o=fe),ze},{e:void 0,t:void 0,a:void 0,o:void 0}),J(()=>we.value=n()),ce}})]}})),s(q,_(mt,{get isOpen(){return y()},onClose:()=>x(!1),get title(){return`YAML: ${v()?.name}`},size:"xl",get children(){return _(K,{get when(){return!I.loading},get fallback(){return La()},get children(){return _(gr,{get yaml(){return I()||""},get title(){return v()?.name}})}})}}),null),s(q,_(mt,{get isOpen(){return M()},onClose:()=>b(!1),get title(){return`Edit YAML: ${v()?.name}`},size:"xl",get children(){return _(K,{get when(){return!I.loading},get fallback(){return La()},get children(){var ce=Vp();return s(ce,_(Dr,{get yaml(){return I()||""},get title(){return v()?.name},onSave:D,onCancel:()=>b(!1)})),ce}})}}),null),s(q,_(Sr,{get isOpen(){return o()},onClose:()=>c(!1),resourceType:"daemonset",get name(){return v()?.name||""},get namespace(){return v()?.namespace}}),null),J(ce=>{var Ae=qt(),se=`1px solid ${Ar()}`;return Ae!==ce.e&&E(be,"background",ce.e=Ae),se!==ce.t&&E(be,"border",ce.t=se),ce},{e:void 0,t:void 0}),J(()=>R.value=u()),J(()=>G.value=f()),J(()=>Me.value=e()),J(()=>ve.value=n()),q})()};ut(["click","input"]);var Jp=w('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span></span><span>'),Xp=w('<div class="w-full overflow-x-auto"style=margin:0;padding:0><table class=w-full style=width:100%;table-layout:auto;border-collapse:collapse;margin:0;padding:0><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class=whitespace-nowrap>Schedule</th><th class=whitespace-nowrap>Suspend</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Active </div></th><th class=whitespace-nowrap>Last Schedule</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),Zp=w('<div class="flex items-center justify-between p-4 font-mono text-sm"style="background:var(--bg-secondary);borderTop:1px solid var(--border-color)"><div style=color:var(--text-secondary)>Showing <!> - <!> of <!> CronJobs</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)> Prev</button><span class="px-3 py-1"style=color:var(--text-primary)>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>Next </button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>Last</button><select class="px-3 py-1 rounded-lg text-sm ml-4"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20 per page</option><option value=50>50 per page</option><option value=100>100 per page</option><option value=200>200 per page'),Qp=w("<div style=height:70vh>"),em=w('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>CronJobs</h1><p style=color:var(--text-secondary)>Scheduled job management</p></div><div class="flex items-center gap-3"><select class="px-3 py-2 rounded-lg text-sm"title="Font Size"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=12>12px</option><option value=13>13px</option><option value=14>14px</option><option value=15>15px</option><option value=16>16px</option><option value=17>17px</option><option value=18>18px</option><option value=19>19px</option><option value=20>20px</option></select><select class="px-3 py-2 rounded-lg text-sm"title="Font Family"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=Monospace>Monospace</option><option value=System-ui>System-ui</option><option value=Monaco>Monaco</option><option value=Consolas>Consolas</option><option value=Courier>Courier</option></select><button class=icon-btn title="Refresh CronJobs"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Active</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--warning-color)"><span class=text-sm style=color:var(--text-secondary)>Suspended</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid #3b82f6"><span class=text-sm style=color:var(--text-secondary)>Scheduled</span><span class="text-xl font-bold"style=color:#3b82f6></span></div><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class=w-full style=margin:0;padding:0;border-radius:4px>'),tm=w('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading CronJobs...'),rm=w('<tr><td colspan=8 class="text-center py-8"style=color:var(--text-muted)>No CronJobs found'),sm=w('<tr><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"><code class="px-2 py-1 rounded text-xs"style=background:var(--bg-tertiary)></code></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"><span></span></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;border:none">'),Ea=w('<div class="spinner mx-auto">');const im=()=>{const[e,t]=W(""),[r,l]=W("name"),[a,m]=W("asc"),[d,i]=W(1),[n,g]=W(20),[v,p]=W(null),[y,x]=W(!1),[M,b]=W(!1),[o,c]=W(!1),[u,h]=W(parseInt(localStorage.getItem("cronjobs-font-size")||"14")),[f,$]=W(localStorage.getItem("cronjobs-font-family")||"Monaco"),C=V=>{switch(V){case"Monospace":return"monospace";case"System-ui":return"system-ui";case"Monaco":return"Monaco, monospace";case"Consolas":return"Consolas, monospace";case"Courier":return'"Courier New", monospace';default:return"Monaco, monospace"}},k=V=>{h(V),localStorage.setItem("cronjobs-font-size",V.toString())},S=V=>{$(V),localStorage.setItem("cronjobs-font-family",V)},L=()=>{const V=hr();if(V.length!==0)return V.length===1,V[0]},P=Fr("cronjobs",async()=>{ar(!0);try{const V=L();return await Fe.getCronJobs(V)}finally{ar(!1)}},{ttl:15e3,backgroundRefresh:!0}),I=et(()=>P.data()||[]),D=()=>P.refetch(),[T]=it(()=>(y()||M())&&v()?{name:v().name,ns:v().namespace}:null,async V=>V&&(await Fe.getCronJobYAML(V.name,V.ns)).yaml||""),B=async V=>{const X=v();if(X)try{await Fe.updateCronJob(X.name,X.namespace,V),Je(` CronJob ${X.name} updated successfully`,"success"),b(!1),setTimeout(()=>D(),500),setTimeout(()=>D(),2e3)}catch(R){const G=R instanceof Error?R.message:"Unknown error";throw Je(` Failed to update cronjob: ${G}`,"error"),R}},N=V=>{if(!V)return 0;let X=0;const R=V.match(/(\d+)d/),G=V.match(/(\d+)h/),te=V.match(/(\d+)m/);return R&&(X+=parseInt(R[1])*24*60),G&&(X+=parseInt(G[1])*60),te&&(X+=parseInt(te[1])),X},O=et(()=>{let V=I()||[];const X=e().toLowerCase();X&&(V=V.filter(te=>te.name.toLowerCase().includes(X)||te.namespace.toLowerCase().includes(X)));const R=r(),G=a();return V=[...V].sort((te,ae)=>{let Q=0;switch(R){case"name":Q=te.name.localeCompare(ae.name);break;case"namespace":Q=te.namespace.localeCompare(ae.namespace);break;case"active":Q=te.active-ae.active;break;case"age":Q=N(te.age)-N(ae.age);break}return G==="asc"?Q:-Q}),V}),H=et(()=>Math.ceil(O().length/n())),A=et(()=>{const V=(d()-1)*n();return O().slice(V,V+n())}),z=et(()=>{const V=I()||[];return{total:V.length,active:V.filter(X=>X.active>0).length,suspended:V.filter(X=>X.suspend).length,scheduled:V.filter(X=>!X.suspend&&X.active===0).length}}),F=V=>{r()===V?m(X=>X==="asc"?"desc":"asc"):(l(V),m("asc")),i(1)},j=V=>(()=>{var X=Jp(),R=X.firstChild,G=R.nextSibling;return J(te=>{var ae=r()===V.field&&a()==="asc"?"var(--accent-primary)":"var(--text-muted)",Q=r()===V.field&&a()==="desc"?"var(--accent-primary)":"var(--text-muted)";return ae!==te.e&&E(R,"color",te.e=ae),Q!==te.t&&E(G,"color",te.t=Q),te},{e:void 0,t:void 0}),X})(),q=async V=>{try{await Fe.triggerCronJob(V.name,V.namespace),D()}catch(X){console.error("Failed to trigger CronJob:",X)}},U=async V=>{try{await Fe.suspendCronJob(V.name,V.namespace,!V.suspend),D()}catch(X){console.error("Failed to toggle suspend CronJob:",X)}},Y=async V=>{if(confirm(`Are you sure you want to delete CronJob "${V.name}" in namespace "${V.namespace}"?`))try{await Fe.deleteCronJob(V.name,V.namespace),Je(`CronJob ${V.name} deleted successfully`,"success"),D()}catch(X){console.error("Failed to delete CronJob:",X),Je(`Failed to delete CronJob: ${X instanceof Error?X.message:"Unknown error"}`,"error")}};return(()=>{var V=em(),X=V.firstChild,R=X.firstChild,G=R.firstChild;G.nextSibling;var te=R.nextSibling,ae=te.firstChild,Q=ae.nextSibling,Z=Q.nextSibling,ne=X.nextSibling,$e=ne.firstChild,re=$e.firstChild,de=re.nextSibling,le=$e.nextSibling,xe=le.firstChild,ye=xe.nextSibling,ke=le.nextSibling,ge=ke.firstChild,Ce=ge.nextSibling,_e=ke.nextSibling,Me=_e.firstChild,ve=Me.nextSibling,be=_e.nextSibling,ce=be.nextSibling,Ae=ce.nextSibling,se=ne.nextSibling;return ae.addEventListener("change",oe=>k(parseInt(oe.currentTarget.value))),Q.addEventListener("change",oe=>S(oe.currentTarget.value)),Z.$$click=oe=>{const ie=oe.currentTarget;ie.classList.add("refreshing"),setTimeout(()=>ie.classList.remove("refreshing"),500),D()},s(de,()=>z().total),s(ye,()=>z().active),s(Ce,()=>z().suspended),s(ve,()=>z().scheduled),ce.$$input=oe=>{t(oe.currentTarget.value),i(1)},Ae.addEventListener("change",oe=>{g(parseInt(oe.currentTarget.value)),i(1)}),s(se,_(K,{get when(){return!P.loading()||P.data()!==void 0},get fallback(){return(()=>{var oe=tm(),ie=oe.firstChild;return ie.nextSibling,oe})()},get children(){return[(()=>{var oe=Xp(),ie=oe.firstChild,ue=ie.firstChild,he=ue.firstChild,Te=he.firstChild,ee=Te.firstChild;ee.firstChild;var Se=Te.nextSibling,pe=Se.firstChild;pe.firstChild;var De=Se.nextSibling,Ne=De.nextSibling,me=Ne.nextSibling,He=me.firstChild;He.firstChild;var Ze=me.nextSibling,we=Ze.nextSibling,ze=we.firstChild;ze.firstChild;var Pe=ue.nextSibling;return Te.$$click=()=>F("name"),s(ee,_(j,{field:"name"}),null),Se.$$click=()=>F("namespace"),s(pe,_(j,{field:"namespace"}),null),me.$$click=()=>F("active"),s(He,_(j,{field:"active"}),null),we.$$click=()=>F("age"),s(ze,_(j,{field:"age"}),null),s(Pe,_(Xe,{get each(){return A()},get fallback(){return(()=>{var Ue=rm();return Ue.firstChild,Ue})()},children:Ue=>(()=>{var Oe=sm(),fe=Oe.firstChild,Le=fe.firstChild,We=fe.nextSibling,Ee=We.nextSibling,Ie=Ee.firstChild,qe=Ee.nextSibling,Be=qe.firstChild,Ke=qe.nextSibling,Ye=Ke.nextSibling,lt=Ye.nextSibling,gt=lt.nextSibling;return Le.$$click=()=>{p(Ue),c(!0)},s(Le,(()=>{var Qe=Re(()=>Ue.name.length>40);return()=>Qe()?Ue.name.slice(0,37)+"...":Ue.name})()),s(We,()=>Ue.namespace),s(Ie,()=>Ue.schedule),s(Be,()=>Ue.suspend?"Yes":"No"),s(Ke,()=>Ue.active),s(Ye,()=>Ue.lastSchedule||"Never"),s(lt,()=>Ue.age),s(gt,_(Jt,{get actions(){return[{label:"Trigger",icon:"restart",onClick:()=>q(Ue)},{label:Ue.suspend?"Resume":"Suspend",icon:"restart",onClick:()=>U(Ue)},{label:"View YAML",icon:"yaml",onClick:()=>{p(Ue),x(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{p(Ue),b(!0)}},{label:"Delete",icon:"delete",onClick:()=>Y(Ue),variant:"danger",divider:!0}]}})),J(Qe=>{var ct=`${u()}px`,ft=`${Math.max(24,u()*1.7)}px`,Ge=`${Math.max(24,u()*1.7)}px`,st=`${u()}px`,vt=`${Math.max(24,u()*1.7)}px`,at=`${Math.max(24,u()*1.7)}px`,pt=`${u()}px`,xt=`${Math.max(24,u()*1.7)}px`,Et=`${Math.max(24,u()*1.7)}px`,yt=`${u()}px`,Tt=`${Math.max(24,u()*1.7)}px`,Bt=`${Math.max(24,u()*1.7)}px`,Dt=`badge ${Ue.suspend?"badge-warning":"badge-success"}`,At=`${u()}px`,Nt=`${Math.max(24,u()*1.7)}px`,Ve=`${Math.max(24,u()*1.7)}px`,nt=`${u()}px`,rt=`${Math.max(24,u()*1.7)}px`,wt=`${Math.max(24,u()*1.7)}px`,$t=`${u()}px`,bt=`${Math.max(24,u()*1.7)}px`,kt=`${Math.max(24,u()*1.7)}px`,Mt=`${Math.max(24,u()*1.7)}px`,Rr=`${Math.max(24,u()*1.7)}px`;return ct!==Qe.e&&E(fe,"font-size",Qe.e=ct),ft!==Qe.t&&E(fe,"height",Qe.t=ft),Ge!==Qe.a&&E(fe,"line-height",Qe.a=Ge),st!==Qe.o&&E(We,"font-size",Qe.o=st),vt!==Qe.i&&E(We,"height",Qe.i=vt),at!==Qe.n&&E(We,"line-height",Qe.n=at),pt!==Qe.s&&E(Ee,"font-size",Qe.s=pt),xt!==Qe.h&&E(Ee,"height",Qe.h=xt),Et!==Qe.r&&E(Ee,"line-height",Qe.r=Et),yt!==Qe.d&&E(qe,"font-size",Qe.d=yt),Tt!==Qe.l&&E(qe,"height",Qe.l=Tt),Bt!==Qe.u&&E(qe,"line-height",Qe.u=Bt),Dt!==Qe.c&&tt(Be,Qe.c=Dt),At!==Qe.w&&E(Ke,"font-size",Qe.w=At),Nt!==Qe.m&&E(Ke,"height",Qe.m=Nt),Ve!==Qe.f&&E(Ke,"line-height",Qe.f=Ve),nt!==Qe.y&&E(Ye,"font-size",Qe.y=nt),rt!==Qe.g&&E(Ye,"height",Qe.g=rt),wt!==Qe.p&&E(Ye,"line-height",Qe.p=wt),$t!==Qe.b&&E(lt,"font-size",Qe.b=$t),bt!==Qe.T&&E(lt,"height",Qe.T=bt),kt!==Qe.A&&E(lt,"line-height",Qe.A=kt),Mt!==Qe.O&&E(gt,"height",Qe.O=Mt),Rr!==Qe.I&&E(gt,"line-height",Qe.I=Rr),Qe},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0,A:void 0,O:void 0,I:void 0}),Oe})()})),J(Ue=>{var Oe=C(f()),fe=qt();return Oe!==Ue.e&&E(ie,"font-family",Ue.e=Oe),fe!==Ue.t&&E(ie,"background",Ue.t=fe),Ue},{e:void 0,t:void 0}),oe})(),_(K,{get when(){return H()>1||O().length>0},get children(){var oe=Zp(),ie=oe.firstChild,ue=ie.firstChild,he=ue.nextSibling,Te=he.nextSibling,ee=Te.nextSibling,Se=ee.nextSibling,pe=Se.nextSibling;pe.nextSibling;var De=ie.nextSibling,Ne=De.firstChild,me=Ne.nextSibling,He=me.nextSibling,Ze=He.firstChild,we=Ze.nextSibling;we.nextSibling;var ze=He.nextSibling,Pe=ze.nextSibling,Ue=Pe.nextSibling;return s(ie,()=>(d()-1)*n()+1,he),s(ie,()=>Math.min(d()*n(),O().length),ee),s(ie,()=>O().length,pe),Ne.$$click=()=>i(1),me.$$click=()=>i(Oe=>Math.max(1,Oe-1)),s(He,d,we),s(He,H,null),ze.$$click=()=>i(Oe=>Math.min(H(),Oe+1)),Pe.$$click=()=>i(H()),Ue.addEventListener("change",Oe=>{g(parseInt(Oe.currentTarget.value)),i(1)}),J(Oe=>{var fe=d()===1,Le=d()===1,We=d()===H(),Ee=d()===H();return fe!==Oe.e&&(Ne.disabled=Oe.e=fe),Le!==Oe.t&&(me.disabled=Oe.t=Le),We!==Oe.a&&(ze.disabled=Oe.a=We),Ee!==Oe.o&&(Pe.disabled=Oe.o=Ee),Oe},{e:void 0,t:void 0,a:void 0,o:void 0}),J(()=>Ue.value=n()),oe}})]}})),s(V,_(mt,{get isOpen(){return y()},onClose:()=>x(!1),get title(){return`YAML: ${v()?.name}`},size:"xl",get children(){return _(K,{get when(){return!T.loading},get fallback(){return Ea()},get children(){return _(gr,{get yaml(){return T()||""},get title(){return v()?.name}})}})}}),null),s(V,_(mt,{get isOpen(){return M()},onClose:()=>b(!1),get title(){return`Edit YAML: ${v()?.name}`},size:"xl",get children(){return _(K,{get when(){return!T.loading},get fallback(){return Ea()},get children(){var oe=Qp();return s(oe,_(Dr,{get yaml(){return T()||""},get title(){return v()?.name},onSave:B,onCancel:()=>b(!1)})),oe}})}}),null),s(V,_(Sr,{get isOpen(){return o()},onClose:()=>c(!1),resourceType:"cronjob",get name(){return v()?.name||""},get namespace(){return v()?.namespace}}),null),J(oe=>{var ie=qt(),ue=`1px solid ${Ar()}`;return ie!==oe.e&&E(se,"background",oe.e=ie),ue!==oe.t&&E(se,"border",oe.t=ue),oe},{e:void 0,t:void 0}),J(()=>ae.value=u()),J(()=>Q.value=f()),J(()=>ce.value=e()),J(()=>Ae.value=n()),V})()};ut(["click","input"]);var nm=w('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span></span><span>'),lm=w('<div class="w-full overflow-x-auto"style=margin:0;padding:0><table class=w-full style=width:100%;table-layout:auto;border-collapse:collapse;margin:0;padding:0><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class=whitespace-nowrap>Completions</th><th class=whitespace-nowrap>Duration</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Status </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),om=w('<div class="flex items-center justify-between p-4 font-mono text-sm"style="background:var(--bg-secondary);borderTop:1px solid var(--border-color)"><div style=color:var(--text-secondary)>Showing <!> - <!> of <!> jobs</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)> Prev</button><span class="px-3 py-1"style=color:var(--text-primary)>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>Next </button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>Last</button><select class="px-3 py-1 rounded-lg text-sm ml-4"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20 per page</option><option value=50>50 per page</option><option value=100>100 per page</option><option value=200>200 per page'),am=w("<div style=height:70vh>"),cm=w('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Jobs</h1><p style=color:var(--text-secondary)>One-time task execution</p></div><div class="flex items-center gap-3"><select class="px-3 py-2 rounded-lg text-sm"title="Font Size"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=12>12px</option><option value=13>13px</option><option value=14>14px</option><option value=15>15px</option><option value=16>16px</option><option value=17>17px</option><option value=18>18px</option><option value=19>19px</option><option value=20>20px</option></select><select class="px-3 py-2 rounded-lg text-sm"title="Font Family"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=Monospace>Monospace</option><option value=System-ui>System-ui</option><option value=Monaco>Monaco</option><option value=Consolas>Consolas</option><option value=Courier>Courier</option></select><button class=icon-btn title="Refresh Jobs"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Complete</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid #3b82f6"><span class=text-sm style=color:var(--text-secondary)>Running</span><span class="text-xl font-bold"style=color:#3b82f6></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--error-color)"><span class=text-sm style=color:var(--text-secondary)>Failed</span><span class="text-xl font-bold"style=color:var(--error-color)></span></div><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class=w-full style=margin:0;padding:0;border-radius:4px>'),dm=w('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading jobs...'),um=w('<tr><td colspan=7 class="text-center py-8"style=color:var(--text-muted)>No jobs found'),hm=w('<tr><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"><span></span></td><td style="padding:0 8px;text-align:left;border:none">'),Ta=w('<div class="spinner mx-auto">');const gm=()=>{const[e,t]=W(""),[r,l]=W("name"),[a,m]=W("asc"),[d,i]=W(1),[n,g]=W(20),[v,p]=W(null),[y,x]=W(!1),[M,b]=W(!1),[o,c]=W(!1),[u,h]=W(parseInt(localStorage.getItem("jobs-font-size")||"14")),[f,$]=W(localStorage.getItem("jobs-font-family")||"Monaco"),C=U=>{switch(U){case"Monospace":return"monospace";case"System-ui":return"system-ui";case"Monaco":return"Monaco, monospace";case"Consolas":return"Consolas, monospace";case"Courier":return'"Courier New", monospace';default:return"Monaco, monospace"}},k=U=>{h(U),localStorage.setItem("jobs-font-size",U.toString())},S=U=>{$(U),localStorage.setItem("jobs-font-family",U)},L=()=>{const U=hr();if(U.length!==0)return U.length===1,U[0]},P=Fr("jobs",async()=>{ar(!0);try{const U=L();return await Fe.getJobs(U)}finally{ar(!1)}},{ttl:15e3,backgroundRefresh:!0}),I=et(()=>P.data()||[]),D=()=>P.refetch(),[T]=it(()=>(y()||M())&&v()?{name:v().name,ns:v().namespace}:null,async U=>U&&(await Fe.getJobYAML(U.name,U.ns)).yaml||""),B=async U=>{const Y=v();if(Y)try{await Fe.updateJob(Y.name,Y.namespace,U),Je(` Job ${Y.name} updated successfully`,"success"),b(!1),setTimeout(()=>D(),500),setTimeout(()=>D(),2e3)}catch(V){const X=V instanceof Error?V.message:"Unknown error";throw Je(` Failed to update job: ${X}`,"error"),V}},N=U=>{if(!U)return 0;let Y=0;const V=U.match(/(\d+)d/),X=U.match(/(\d+)h/),R=U.match(/(\d+)m/);return V&&(Y+=parseInt(V[1])*24*60),X&&(Y+=parseInt(X[1])*60),R&&(Y+=parseInt(R[1])),Y},O=et(()=>{let U=I()||[];const Y=e().toLowerCase();Y&&(U=U.filter(R=>R.name.toLowerCase().includes(Y)||R.namespace.toLowerCase().includes(Y)));const V=r(),X=a();return U=[...U].sort((R,G)=>{let te=0;switch(V){case"name":te=R.name.localeCompare(G.name);break;case"namespace":te=R.namespace.localeCompare(G.namespace);break;case"status":te=R.status.localeCompare(G.status);break;case"age":te=N(R.age)-N(G.age);break}return X==="asc"?te:-te}),U}),H=et(()=>Math.ceil(O().length/n())),A=et(()=>{const U=(d()-1)*n();return O().slice(U,U+n())}),z=et(()=>{const U=I()||[];return{total:U.length,complete:U.filter(Y=>Y.status==="Complete").length,running:U.filter(Y=>Y.status==="Running"||Y.status==="Active").length,failed:U.filter(Y=>Y.status==="Failed").length}}),F=U=>{r()===U?m(Y=>Y==="asc"?"desc":"asc"):(l(U),m("asc")),i(1)},j=U=>(()=>{var Y=nm(),V=Y.firstChild,X=V.nextSibling;return J(R=>{var G=r()===U.field&&a()==="asc"?"var(--accent-primary)":"var(--text-muted)",te=r()===U.field&&a()==="desc"?"var(--accent-primary)":"var(--text-muted)";return G!==R.e&&E(V,"color",R.e=G),te!==R.t&&E(X,"color",R.t=te),R},{e:void 0,t:void 0}),Y})(),q=async U=>{if(confirm(`Are you sure you want to delete job "${U.name}" in namespace "${U.namespace}"?`))try{await Fe.deleteJob(U.name,U.namespace),Je(`Job ${U.name} deleted successfully`,"success"),D()}catch(Y){console.error("Failed to delete job:",Y),Je(`Failed to delete job: ${Y instanceof Error?Y.message:"Unknown error"}`,"error")}};return(()=>{var U=cm(),Y=U.firstChild,V=Y.firstChild,X=V.firstChild;X.nextSibling;var R=V.nextSibling,G=R.firstChild,te=G.nextSibling,ae=te.nextSibling,Q=Y.nextSibling,Z=Q.firstChild,ne=Z.firstChild,$e=ne.nextSibling,re=Z.nextSibling,de=re.firstChild,le=de.nextSibling,xe=re.nextSibling,ye=xe.firstChild,ke=ye.nextSibling,ge=xe.nextSibling,Ce=ge.firstChild,_e=Ce.nextSibling,Me=ge.nextSibling,ve=Me.nextSibling,be=ve.nextSibling,ce=Q.nextSibling;return G.addEventListener("change",Ae=>k(parseInt(Ae.currentTarget.value))),te.addEventListener("change",Ae=>S(Ae.currentTarget.value)),ae.$$click=Ae=>{const se=Ae.currentTarget;se.classList.add("refreshing"),setTimeout(()=>se.classList.remove("refreshing"),500),D()},s($e,()=>z().total),s(le,()=>z().complete),s(ke,()=>z().running),s(_e,()=>z().failed),ve.$$input=Ae=>{t(Ae.currentTarget.value),i(1)},be.addEventListener("change",Ae=>{g(parseInt(Ae.currentTarget.value)),i(1)}),s(ce,_(K,{get when(){return!P.loading()||P.data()!==void 0},get fallback(){return(()=>{var Ae=dm(),se=Ae.firstChild;return se.nextSibling,Ae})()},get children(){return[(()=>{var Ae=lm(),se=Ae.firstChild,oe=se.firstChild,ie=oe.firstChild,ue=ie.firstChild,he=ue.firstChild;he.firstChild;var Te=ue.nextSibling,ee=Te.firstChild;ee.firstChild;var Se=Te.nextSibling,pe=Se.nextSibling,De=pe.nextSibling,Ne=De.firstChild;Ne.firstChild;var me=De.nextSibling,He=me.firstChild;He.firstChild;var Ze=oe.nextSibling;return ue.$$click=()=>F("name"),s(he,_(j,{field:"name"}),null),Te.$$click=()=>F("namespace"),s(ee,_(j,{field:"namespace"}),null),De.$$click=()=>F("age"),s(Ne,_(j,{field:"age"}),null),me.$$click=()=>F("status"),s(He,_(j,{field:"status"}),null),s(Ze,_(Xe,{get each(){return A()},get fallback(){return(()=>{var we=um();return we.firstChild,we})()},children:we=>(()=>{var ze=hm(),Pe=ze.firstChild,Ue=Pe.firstChild,Oe=Pe.nextSibling,fe=Oe.nextSibling,Le=fe.nextSibling,We=Le.nextSibling,Ee=We.nextSibling,Ie=Ee.firstChild,qe=Ee.nextSibling;return Ue.$$click=()=>{p(we),c(!0)},s(Ue,(()=>{var Be=Re(()=>we.name.length>40);return()=>Be()?we.name.slice(0,37)+"...":we.name})()),s(Oe,()=>we.namespace),s(fe,()=>we.completions),s(Le,()=>we.duration||"-"),s(We,()=>we.age),s(Ie,()=>we.status),s(qe,_(Jt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{p(we),x(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{p(we),b(!0)}},{label:"Delete",icon:"delete",onClick:()=>q(we),variant:"danger",divider:!0}]})),J(Be=>{var Ke=`${u()}px`,Ye=`${Math.max(24,u()*1.7)}px`,lt=`${Math.max(24,u()*1.7)}px`,gt=`${u()}px`,Qe=`${Math.max(24,u()*1.7)}px`,ct=`${Math.max(24,u()*1.7)}px`,ft=`${u()}px`,Ge=`${Math.max(24,u()*1.7)}px`,st=`${Math.max(24,u()*1.7)}px`,vt=`${u()}px`,at=`${Math.max(24,u()*1.7)}px`,pt=`${Math.max(24,u()*1.7)}px`,xt=`${u()}px`,Et=`${Math.max(24,u()*1.7)}px`,yt=`${Math.max(24,u()*1.7)}px`,Tt=`${u()}px`,Bt=`${Math.max(24,u()*1.7)}px`,Dt=`${Math.max(24,u()*1.7)}px`,At=`badge ${we.status==="Complete"?"badge-success":we.status==="Failed"?"badge-error":"badge-warning"}`,Nt=`${Math.max(24,u()*1.7)}px`,Ve=`${Math.max(24,u()*1.7)}px`;return Ke!==Be.e&&E(Pe,"font-size",Be.e=Ke),Ye!==Be.t&&E(Pe,"height",Be.t=Ye),lt!==Be.a&&E(Pe,"line-height",Be.a=lt),gt!==Be.o&&E(Oe,"font-size",Be.o=gt),Qe!==Be.i&&E(Oe,"height",Be.i=Qe),ct!==Be.n&&E(Oe,"line-height",Be.n=ct),ft!==Be.s&&E(fe,"font-size",Be.s=ft),Ge!==Be.h&&E(fe,"height",Be.h=Ge),st!==Be.r&&E(fe,"line-height",Be.r=st),vt!==Be.d&&E(Le,"font-size",Be.d=vt),at!==Be.l&&E(Le,"height",Be.l=at),pt!==Be.u&&E(Le,"line-height",Be.u=pt),xt!==Be.c&&E(We,"font-size",Be.c=xt),Et!==Be.w&&E(We,"height",Be.w=Et),yt!==Be.m&&E(We,"line-height",Be.m=yt),Tt!==Be.f&&E(Ee,"font-size",Be.f=Tt),Bt!==Be.y&&E(Ee,"height",Be.y=Bt),Dt!==Be.g&&E(Ee,"line-height",Be.g=Dt),At!==Be.p&&tt(Ie,Be.p=At),Nt!==Be.b&&E(qe,"height",Be.b=Nt),Ve!==Be.T&&E(qe,"line-height",Be.T=Ve),Be},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0}),ze})()})),J(we=>{var ze=C(f()),Pe=qt();return ze!==we.e&&E(se,"font-family",we.e=ze),Pe!==we.t&&E(se,"background",we.t=Pe),we},{e:void 0,t:void 0}),Ae})(),_(K,{get when(){return H()>1||O().length>0},get children(){var Ae=om(),se=Ae.firstChild,oe=se.firstChild,ie=oe.nextSibling,ue=ie.nextSibling,he=ue.nextSibling,Te=he.nextSibling,ee=Te.nextSibling;ee.nextSibling;var Se=se.nextSibling,pe=Se.firstChild,De=pe.nextSibling,Ne=De.nextSibling,me=Ne.firstChild,He=me.nextSibling;He.nextSibling;var Ze=Ne.nextSibling,we=Ze.nextSibling,ze=we.nextSibling;return s(se,()=>(d()-1)*n()+1,ie),s(se,()=>Math.min(d()*n(),O().length),he),s(se,()=>O().length,ee),pe.$$click=()=>i(1),De.$$click=()=>i(Pe=>Math.max(1,Pe-1)),s(Ne,d,He),s(Ne,H,null),Ze.$$click=()=>i(Pe=>Math.min(H(),Pe+1)),we.$$click=()=>i(H()),ze.addEventListener("change",Pe=>{g(parseInt(Pe.currentTarget.value)),i(1)}),J(Pe=>{var Ue=d()===1,Oe=d()===1,fe=d()===H(),Le=d()===H();return Ue!==Pe.e&&(pe.disabled=Pe.e=Ue),Oe!==Pe.t&&(De.disabled=Pe.t=Oe),fe!==Pe.a&&(Ze.disabled=Pe.a=fe),Le!==Pe.o&&(we.disabled=Pe.o=Le),Pe},{e:void 0,t:void 0,a:void 0,o:void 0}),J(()=>ze.value=n()),Ae}})]}})),s(U,_(mt,{get isOpen(){return y()},onClose:()=>x(!1),get title(){return`YAML: ${v()?.name}`},size:"xl",get children(){return _(K,{get when(){return!T.loading},get fallback(){return Ta()},get children(){return _(gr,{get yaml(){return T()||""},get title(){return v()?.name}})}})}}),null),s(U,_(mt,{get isOpen(){return M()},onClose:()=>b(!1),get title(){return`Edit YAML: ${v()?.name}`},size:"xl",get children(){return _(K,{get when(){return!T.loading},get fallback(){return Ta()},get children(){var Ae=am();return s(Ae,_(Dr,{get yaml(){return T()||""},get title(){return v()?.name},onSave:B,onCancel:()=>b(!1)})),Ae}})}}),null),s(U,_(Sr,{get isOpen(){return o()},onClose:()=>c(!1),resourceType:"job",get name(){return v()?.name||""},get namespace(){return v()?.namespace}}),null),J(Ae=>{var se=qt(),oe=`1px solid ${Ar()}`;return se!==Ae.e&&E(ce,"background",Ae.e=se),oe!==Ae.t&&E(ce,"border",Ae.t=oe),Ae},{e:void 0,t:void 0}),J(()=>G.value=u()),J(()=>te.value=f()),J(()=>ve.value=e()),J(()=>be.value=n()),U})()};ut(["click","input"]);var vm=w('<div class="mb-6 rounded-lg border p-4"style=background:var(--bg-card);border-color:var(--border-color)><div class="flex items-start gap-3"><div class=text-2xl></div><div class=flex-1><h3 class="font-semibold mb-2"style=color:var(--text-primary)>Security Recommendations</h3><p class="text-sm mb-3"style=color:var(--text-secondary)>We recommend implementing the following security best practices for a secure Kubernetes environment:</p><div class=space-y-2>'),fm=w('<div class="flex items-start gap-2 p-2 rounded"style=background:var(--bg-secondary)><span class=text-lg></span><div class=flex-1><div class="font-medium text-sm"style=color:var(--text-primary)></div><div class="text-xs mt-1"style=color:var(--text-secondary)></div><a target=_blank rel="noopener noreferrer"class="text-xs mt-1 inline-block"style=color:var(--accent-primary)>Learn more ');const vd=e=>{const t=()=>{const r=[{title:"Pod Security Contexts",description:"Configure security contexts to run pods with least privilege. Set runAsNonRoot, readOnlyRootFilesystem, and drop capabilities.",icon:"",link:"https://kubernetes.io/docs/concepts/security/pod-security-standards/"},{title:"Network Policies",description:"Implement network policies to control traffic flow between pods and enforce network segmentation.",icon:"",link:"https://kubernetes.io/docs/concepts/services-networking/network-policies/"}];return e.resourceType==="PDB"?[...r,{title:"Pod Disruption Budgets",description:"Ensure PDBs are configured for critical workloads to maintain availability during voluntary disruptions.",icon:"",link:"https://kubernetes.io/docs/tasks/run-application/configure-pdb/"}]:e.resourceType==="HPA"?[...r,{title:"Horizontal Pod Autoscalers",description:"Use HPAs to automatically scale workloads based on resource utilization, ensuring optimal performance and cost efficiency.",icon:"",link:"https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/"}]:r};return(()=>{var r=vm(),l=r.firstChild,a=l.firstChild,m=a.nextSibling,d=m.firstChild,i=d.nextSibling,n=i.nextSibling;return s(n,_(Xe,{get each(){return t()},children:g=>(()=>{var v=fm(),p=v.firstChild,y=p.nextSibling,x=y.firstChild,M=x.nextSibling,b=M.nextSibling;return s(p,()=>g.icon),s(x,()=>g.title),s(M,()=>g.description),J(()=>dt(b,"href",g.link)),v})()})),r})()};var pm=w('<div class="w-full overflow-x-auto rounded border"style=background:var(--bg-card);border-color:var(--border-color)><table class=w-full style=border-collapse:collapse><thead><tr style="background:var(--bg-secondary);border-bottom:1px solid var(--border-color)"><th class="cursor-pointer px-3 py-2 text-left"style=color:var(--accent-primary);font-weight:900>Name </th><th class="cursor-pointer px-3 py-2 text-left"style=color:var(--accent-primary);font-weight:900>Namespace </th><th class="cursor-pointer px-3 py-2 text-left"style=color:var(--accent-primary);font-weight:900>Allowed Disruptions </th><th class="px-3 py-2 text-left"style=color:var(--accent-primary);font-weight:900>Current / Desired</th><th class="cursor-pointer px-3 py-2 text-left"style=color:var(--accent-primary);font-weight:900>Age </th><th class="px-3 py-2 text-left"style=color:var(--accent-primary);font-weight:900>Actions</th></tr></thead><tbody>'),mm=w('<div class="flex items-center justify-between mt-4"><div style=color:var(--text-secondary)>Showing <!> to <!> of <!> PDBs</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded"style="color:var(--text-primary);border:1px solid var(--border-color)">Previous</button><span style=color:var(--text-secondary)>Page <!> of </span><button class="px-3 py-1 rounded"style="color:var(--text-primary);border:1px solid var(--border-color)">Next'),bm=w('<div class="space-y-4 p-6"><div class="flex items-center justify-between mb-6"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Pod Disruption Budgets</h1><p class="text-sm mt-1"style=color:var(--text-secondary)>Manage pod availability during voluntary disruptions</p></div><div class="flex items-center gap-2"><button class="px-4 py-2 rounded-lg text-sm font-medium"style=background:var(--accent-primary);color:#000>Refresh</button></div></div><div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"><div class="card p-4"style="border-left:4px solid var(--accent-primary)"><div class=text-sm style=color:var(--text-secondary)>Total</div><div class="text-2xl font-bold mt-1"style=color:var(--accent-primary)></div></div><div class="card p-4"style="border-left:4px solid var(--success-color)"><div class=text-sm style=color:var(--text-secondary)>Healthy</div><div class="text-2xl font-bold mt-1"style=color:var(--success-color)></div></div><div class="card p-4"style="border-left:4px solid var(--warning-color)"><div class=text-sm style=color:var(--text-secondary)>Unhealthy</div><div class="text-2xl font-bold mt-1"style=color:var(--warning-color)></div></div></div><div class="flex items-center gap-4 mb-4"><input type=text placeholder="Search PDBs..."class="flex-1 px-4 py-2 rounded-lg text-sm"style="background:var(--bg-input);border:1px solid var(--border-color);color:var(--text-primary)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-input);border:1px solid var(--border-color);color:var(--text-primary)"><option value=10>10 per page</option><option value=20>20 per page</option><option value=50>50 per page</option><option value=100>100 per page</option></select><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-input);border:1px solid var(--border-color);color:var(--text-primary)"><option value=12>12px</option><option value=14>14px</option><option value=16>16px</option><option value=18>18px'),xm=w('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading PDBs...'),ym=w('<tr><td colspan=6 class="px-3 py-8 text-center"style=color:var(--text-muted)>No PDBs found'),_m=w('<tr style="border-bottom:1px solid var(--border-color);background:var(--bg-card)"><td class="px-3 py-2"style=color:var(--text-primary)></td><td class="px-3 py-2"style=color:var(--text-primary)></td><td class="px-3 py-2"style=color:var(--text-primary)></td><td class="px-3 py-2"style=color:var(--text-primary)> / </td><td class="px-3 py-2"style=color:var(--text-secondary)></td><td class="px-3 py-2">');const $m=()=>{const[e,t]=W("name"),[r,l]=W("asc"),[a,m]=W(1),[d,i]=W(20),[n,g]=W(null),[v,p]=W(!1),[y,x]=W(!1),[M,b]=W(!1),o=()=>{const N=localStorage.getItem("pdb-font-size");return N?parseInt(N):14},[c,u]=W(o()),h=N=>{u(N),localStorage.setItem("pdb-font-size",N.toString())},f=Fr("pdbs",async()=>{const N=hr().length===1?hr()[0]:void 0;return await Fe.getPDBs(N)},{ttl:5e3}),$=et(()=>{const N=f.data()||[],O=Xr().toLowerCase();return O?N.filter(H=>H.name.toLowerCase().includes(O)||H.namespace.toLowerCase().includes(O)):N}),C=et(()=>{const O=[...$()].sort((A,z)=>{let F=A[e()],j=z[e()];return e()==="age"?(F=new Date(A.age).getTime(),j=new Date(z.age).getTime()):e()==="allowedDisruptions"?(F=A.allowedDisruptions||0,j=z.allowedDisruptions||0):(F=String(F||"").toLowerCase(),j=String(j||"").toLowerCase()),F<j?r()==="asc"?-1:1:F>j?r()==="asc"?1:-1:0}),H=(a()-1)*d();return O.slice(H,H+d())}),k=et(()=>Math.ceil(($().length||0)/d())),S=N=>{e()===N?l(r()==="asc"?"desc":"asc"):(t(N),l("asc"))},L=async N=>{g(N),p(!0)},P=async N=>{g(N),x(!0)},I=async N=>{g(N),b(!0)},D=async N=>{if(confirm(`Are you sure you want to delete PDB "${N.name}" in namespace "${N.namespace}"?`))try{await Fe.deletePDB(N.name,N.namespace),Je(`PDB "${N.name}" deleted successfully`,"success"),f.refetch()}catch(O){Je(`Failed to delete PDB: ${O.message}`,"error")}},T=async N=>{if(n())try{await Fe.updatePDB(n().name,n().namespace,N),Je("PDB updated successfully","success"),x(!1),f.refetch()}catch(O){Je(`Failed to update PDB: ${O.message}`,"error")}},B=et(()=>{const N=$();return{total:N.length,healthy:N.filter(O=>O.currentHealthy>=O.desiredHealthy).length,unhealthy:N.filter(O=>O.currentHealthy<O.desiredHealthy).length}});return(()=>{var N=bm(),O=N.firstChild,H=O.firstChild,A=H.firstChild;A.nextSibling;var z=H.nextSibling,F=z.firstChild,j=O.nextSibling,q=j.firstChild,U=q.firstChild,Y=U.nextSibling,V=q.nextSibling,X=V.firstChild,R=X.nextSibling,G=V.nextSibling,te=G.firstChild,ae=te.nextSibling,Q=j.nextSibling,Z=Q.firstChild,ne=Z.nextSibling,$e=ne.nextSibling;return F.$$click=()=>refetch(),s(N,_(vd,{resourceType:"PDB"}),j),s(Y,()=>B().total),s(R,()=>B().healthy),s(ae,()=>B().unhealthy),Z.$$input=re=>Fi(re.currentTarget.value),ne.addEventListener("change",re=>{i(Number(re.currentTarget.value)),m(1)}),$e.addEventListener("change",re=>h(Number(re.currentTarget.value))),s(N,_(K,{get when(){return!f.loading()},get fallback(){return(()=>{var re=xm(),de=re.firstChild;return de.nextSibling,re})()},get children(){return[(()=>{var re=pm(),de=re.firstChild,le=de.firstChild,xe=le.firstChild,ye=xe.firstChild;ye.firstChild;var ke=ye.nextSibling;ke.firstChild;var ge=ke.nextSibling;ge.firstChild;var Ce=ge.nextSibling,_e=Ce.nextSibling;_e.firstChild,_e.nextSibling;var Me=le.nextSibling;return ye.$$click=()=>S("name"),s(ye,(()=>{var ve=Re(()=>e()==="name");return()=>ve()&&(r()==="asc"?"":"")})(),null),ke.$$click=()=>S("namespace"),s(ke,(()=>{var ve=Re(()=>e()==="namespace");return()=>ve()&&(r()==="asc"?"":"")})(),null),ge.$$click=()=>S("allowedDisruptions"),s(ge,(()=>{var ve=Re(()=>e()==="allowedDisruptions");return()=>ve()&&(r()==="asc"?"":"")})(),null),_e.$$click=()=>S("age"),s(_e,(()=>{var ve=Re(()=>e()==="age");return()=>ve()&&(r()==="asc"?"":"")})(),null),s(Me,_(Xe,{get each(){return C()},get fallback(){return(()=>{var ve=ym();return ve.firstChild,ve})()},children:ve=>(()=>{var be=_m(),ce=be.firstChild,Ae=ce.nextSibling,se=Ae.nextSibling,oe=se.nextSibling,ie=oe.firstChild,ue=oe.nextSibling,he=ue.nextSibling;return be.addEventListener("mouseleave",Te=>{Te.currentTarget.style.background="var(--bg-card)"}),be.addEventListener("mouseenter",Te=>{Te.currentTarget.style.background="var(--bg-secondary)"}),s(ce,()=>ve.name),s(Ae,()=>ve.namespace),s(se,()=>ve.allowedDisruptions),s(oe,()=>ve.currentHealthy,ie),s(oe,()=>ve.desiredHealthy,null),s(ue,()=>ve.age),s(he,_(Jt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>L(ve)},{label:"Edit",icon:"edit",onClick:()=>P(ve)},{label:"Describe",icon:"describe",onClick:()=>I(ve)},{label:"Delete",icon:"delete",onClick:()=>D(ve)}]})),be})()})),J(ve=>E(de,"font-size",`${c()}px`)),re})(),(()=>{var re=mm(),de=re.firstChild,le=de.firstChild,xe=le.nextSibling,ye=xe.nextSibling,ke=ye.nextSibling,ge=ke.nextSibling,Ce=ge.nextSibling;Ce.nextSibling;var _e=de.nextSibling,Me=_e.firstChild,ve=Me.nextSibling,be=ve.firstChild,ce=be.nextSibling;ce.nextSibling;var Ae=ve.nextSibling;return s(de,()=>(a()-1)*d()+1,xe),s(de,()=>Math.min(a()*d(),$().length),ke),s(de,()=>$().length,Ce),Me.$$click=()=>m(Math.max(1,a()-1)),s(ve,a,ce),s(ve,k,null),Ae.$$click=()=>m(Math.min(k(),a()+1)),J(se=>{var oe=a()===1,ie=a()===1?"var(--bg-tertiary)":"var(--bg-secondary)",ue=a()===k(),he=a()===k()?"var(--bg-tertiary)":"var(--bg-secondary)";return oe!==se.e&&(Me.disabled=se.e=oe),ie!==se.t&&E(Me,"background",se.t=ie),ue!==se.a&&(Ae.disabled=se.a=ue),he!==se.o&&E(Ae,"background",se.o=he),se},{e:void 0,t:void 0,a:void 0,o:void 0}),re})()]}}),null),s(N,_(K,{get when(){return Re(()=>!!v())()&&n()},get children(){return _(mt,{get title(){return`PDB: ${n().name}`},onClose:()=>p(!1),size:"large",get children(){return _(gr,{yaml:"",get resourceName(){return n().name},get resourceNamespace(){return n().namespace},get getYAML(){return Fe.getPDBYAML}})}})}}),null),s(N,_(K,{get when(){return Re(()=>!!y())()&&n()},get children(){return _(mt,{get title(){return`Edit PDB: ${n().name}`},onClose:()=>x(!1),size:"large",get children(){return _(Dr,{get resourceName(){return n().name},get resourceNamespace(){return n().namespace},get getYAML(){return Fe.getPDBYAML},onSave:T})}})}}),null),s(N,_(K,{get when(){return Re(()=>!!M())()&&n()},get children(){return _(Sr,{get resourceName(){return n().name},get resourceNamespace(){return n().namespace},get getDescribe(){return Fe.getPDBDescribe},onClose:()=>b(!1)})}}),null),J(()=>Z.value=Xr()),J(()=>ne.value=d()),J(()=>$e.value=c()),N})()};ut(["click","input"]);var wm=w('<div class="w-full overflow-x-auto rounded border"style=background:var(--bg-card);border-color:var(--border-color)><table class=w-full style=border-collapse:collapse><thead><tr style="background:var(--bg-secondary);border-bottom:1px solid var(--border-color)"><th class="cursor-pointer px-3 py-2 text-left"style=color:var(--accent-primary);font-weight:900>Name </th><th class="cursor-pointer px-3 py-2 text-left"style=color:var(--accent-primary);font-weight:900>Namespace </th><th class="px-3 py-2 text-left"style=color:var(--accent-primary);font-weight:900>Target</th><th class="px-3 py-2 text-left"style=color:var(--accent-primary);font-weight:900>Replicas</th><th class="px-3 py-2 text-left"style=color:var(--accent-primary);font-weight:900>Min / Max</th><th class="px-3 py-2 text-left"style=color:var(--accent-primary);font-weight:900>Metrics</th><th class="cursor-pointer px-3 py-2 text-left"style=color:var(--accent-primary);font-weight:900>Age </th><th class="px-3 py-2 text-left"style=color:var(--accent-primary);font-weight:900>Actions</th></tr></thead><tbody>'),Sm=w('<div class="flex items-center justify-between mt-4"><div style=color:var(--text-secondary)>Showing <!> to <!> of <!> HPAs</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded"style="color:var(--text-primary);border:1px solid var(--border-color)">Previous</button><span style=color:var(--text-secondary)>Page <!> of </span><button class="px-3 py-1 rounded"style="color:var(--text-primary);border:1px solid var(--border-color)">Next'),Cm=w('<div class="space-y-4 p-6"><div class="flex items-center justify-between mb-6"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Horizontal Pod Autoscalers</h1><p class="text-sm mt-1"style=color:var(--text-secondary)>Automatically scale workloads based on CPU, memory, or custom metrics</p></div><div class="flex items-center gap-2"><button class="px-4 py-2 rounded-lg text-sm font-medium"style=background:var(--accent-primary);color:#000>Refresh</button></div></div><div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"><div class="card p-4"style="border-left:4px solid var(--accent-primary)"><div class=text-sm style=color:var(--text-secondary)>Total</div><div class="text-2xl font-bold mt-1"style=color:var(--accent-primary)></div></div><div class="card p-4"style="border-left:4px solid var(--success-color)"><div class=text-sm style=color:var(--text-secondary)>Active</div><div class="text-2xl font-bold mt-1"style=color:var(--success-color)></div></div><div class="card p-4"style="border-left:4px solid var(--warning-color)"><div class=text-sm style=color:var(--text-secondary)>Scaling</div><div class="text-2xl font-bold mt-1"style=color:var(--warning-color)></div></div></div><div class="flex items-center gap-4 mb-4"><input type=text placeholder="Search HPAs..."class="flex-1 px-4 py-2 rounded-lg text-sm"style="background:var(--bg-input);border:1px solid var(--border-color);color:var(--text-primary)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-input);border:1px solid var(--border-color);color:var(--text-primary)"><option value=10>10 per page</option><option value=20>20 per page</option><option value=50>50 per page</option><option value=100>100 per page</option></select><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-input);border:1px solid var(--border-color);color:var(--text-primary)"><option value=12>12px</option><option value=14>14px</option><option value=16>16px</option><option value=18>18px'),km=w('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading HPAs...'),Mm=w('<tr><td colspan=8 class="px-3 py-8 text-center"style=color:var(--text-muted)>No HPAs found'),Am=w('<tr style="border-bottom:1px solid var(--border-color);background:var(--bg-card)"><td class="px-3 py-2"style=color:var(--text-primary)></td><td class="px-3 py-2"style=color:var(--text-primary)></td><td class="px-3 py-2"style=color:var(--text-primary)></td><td class="px-3 py-2"style=color:var(--text-primary)> / </td><td class="px-3 py-2"style=color:var(--text-primary)> / </td><td class="px-3 py-2"style=color:var(--text-secondary)></td><td class="px-3 py-2"style=color:var(--text-secondary)></td><td class="px-3 py-2">');const Lm=()=>{const[e,t]=W("name"),[r,l]=W("asc"),[a,m]=W(1),[d,i]=W(20),[n,g]=W(null),[v,p]=W(!1),[y,x]=W(!1),[M,b]=W(!1),o=()=>{const N=localStorage.getItem("hpa-font-size");return N?parseInt(N):14},[c,u]=W(o()),h=N=>{u(N),localStorage.setItem("hpa-font-size",N.toString())},f=Fr("hpas",async()=>{const N=hr().length===1?hr()[0]:void 0;return await Fe.getHPAs(N)},{ttl:5e3}),$=et(()=>{const N=f.data()||[],O=Xr().toLowerCase();return O?N.filter(H=>H.name.toLowerCase().includes(O)||H.namespace.toLowerCase().includes(O)||H.targetRef.toLowerCase().includes(O)):N}),C=et(()=>{const O=[...$()].sort((A,z)=>{let F=A[e()],j=z[e()];return e()==="age"?(F=new Date(A.age).getTime(),j=new Date(z.age).getTime()):e()==="currentReplicas"?(F=A.currentReplicas||0,j=z.currentReplicas||0):(F=String(F||"").toLowerCase(),j=String(j||"").toLowerCase()),F<j?r()==="asc"?-1:1:F>j?r()==="asc"?1:-1:0}),H=(a()-1)*d();return O.slice(H,H+d())}),k=et(()=>Math.ceil(($().length||0)/d())),S=N=>{e()===N?l(r()==="asc"?"desc":"asc"):(t(N),l("asc"))},L=async N=>{g(N),p(!0)},P=async N=>{g(N),x(!0)},I=async N=>{g(N),b(!0)},D=async N=>{if(confirm(`Are you sure you want to delete HPA "${N.name}" in namespace "${N.namespace}"?`))try{await Fe.deleteHPA(N.name,N.namespace),Je(`HPA "${N.name}" deleted successfully`,"success"),f.refetch()}catch(O){Je(`Failed to delete HPA: ${O.message}`,"error")}},T=async N=>{if(n())try{await Fe.updateHPA(n().name,n().namespace,N),Je("HPA updated successfully","success"),x(!1),f.refetch()}catch(O){Je(`Failed to update HPA: ${O.message}`,"error")}},B=et(()=>{const N=$();return{total:N.length,active:N.filter(O=>O.currentReplicas>0).length,scaling:N.filter(O=>O.currentReplicas!==O.desiredReplicas).length}});return(()=>{var N=Cm(),O=N.firstChild,H=O.firstChild,A=H.firstChild;A.nextSibling;var z=H.nextSibling,F=z.firstChild,j=O.nextSibling,q=j.firstChild,U=q.firstChild,Y=U.nextSibling,V=q.nextSibling,X=V.firstChild,R=X.nextSibling,G=V.nextSibling,te=G.firstChild,ae=te.nextSibling,Q=j.nextSibling,Z=Q.firstChild,ne=Z.nextSibling,$e=ne.nextSibling;return F.$$click=()=>refetch(),s(N,_(vd,{resourceType:"HPA"}),j),s(Y,()=>B().total),s(R,()=>B().active),s(ae,()=>B().scaling),Z.$$input=re=>Fi(re.currentTarget.value),ne.addEventListener("change",re=>{i(Number(re.currentTarget.value)),m(1)}),$e.addEventListener("change",re=>h(Number(re.currentTarget.value))),s(N,_(K,{get when(){return!f.loading()},get fallback(){return(()=>{var re=km(),de=re.firstChild;return de.nextSibling,re})()},get children(){return[(()=>{var re=wm(),de=re.firstChild,le=de.firstChild,xe=le.firstChild,ye=xe.firstChild;ye.firstChild;var ke=ye.nextSibling;ke.firstChild;var ge=ke.nextSibling,Ce=ge.nextSibling,_e=Ce.nextSibling,Me=_e.nextSibling,ve=Me.nextSibling;ve.firstChild,ve.nextSibling;var be=le.nextSibling;return ye.$$click=()=>S("name"),s(ye,(()=>{var ce=Re(()=>e()==="name");return()=>ce()&&(r()==="asc"?"":"")})(),null),ke.$$click=()=>S("namespace"),s(ke,(()=>{var ce=Re(()=>e()==="namespace");return()=>ce()&&(r()==="asc"?"":"")})(),null),ve.$$click=()=>S("age"),s(ve,(()=>{var ce=Re(()=>e()==="age");return()=>ce()&&(r()==="asc"?"":"")})(),null),s(be,_(Xe,{get each(){return C()},get fallback(){return(()=>{var ce=Mm();return ce.firstChild,ce})()},children:ce=>(()=>{var Ae=Am(),se=Ae.firstChild,oe=se.nextSibling,ie=oe.nextSibling,ue=ie.nextSibling,he=ue.firstChild,Te=ue.nextSibling,ee=Te.firstChild,Se=Te.nextSibling,pe=Se.nextSibling,De=pe.nextSibling;return Ae.addEventListener("mouseleave",Ne=>{Ne.currentTarget.style.background="var(--bg-card)"}),Ae.addEventListener("mouseenter",Ne=>{Ne.currentTarget.style.background="var(--bg-secondary)"}),s(se,()=>ce.name),s(oe,()=>ce.namespace),s(ie,()=>ce.targetRef),s(ue,()=>ce.currentReplicas,he),s(ue,()=>ce.desiredReplicas,null),s(Te,()=>ce.minReplicas,ee),s(Te,()=>ce.maxReplicas,null),s(Se,(()=>{var Ne=Re(()=>ce.cpuUtilization!==void 0);return()=>Ne()&&`CPU: ${ce.cpuUtilization}%`})(),null),s(Se,()=>ce.cpuUtilization!==void 0&&ce.memoryUtilization!==void 0&&", ",null),s(Se,(()=>{var Ne=Re(()=>ce.memoryUtilization!==void 0);return()=>Ne()&&`Mem: ${ce.memoryUtilization}%`})(),null),s(Se,()=>!ce.cpuUtilization&&!ce.memoryUtilization&&"-",null),s(pe,()=>ce.age),s(De,_(Jt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>L(ce)},{label:"Edit",icon:"edit",onClick:()=>P(ce)},{label:"Describe",icon:"describe",onClick:()=>I(ce)},{label:"Delete",icon:"delete",onClick:()=>D(ce)}]})),Ae})()})),J(ce=>E(de,"font-size",`${c()}px`)),re})(),(()=>{var re=Sm(),de=re.firstChild,le=de.firstChild,xe=le.nextSibling,ye=xe.nextSibling,ke=ye.nextSibling,ge=ke.nextSibling,Ce=ge.nextSibling;Ce.nextSibling;var _e=de.nextSibling,Me=_e.firstChild,ve=Me.nextSibling,be=ve.firstChild,ce=be.nextSibling;ce.nextSibling;var Ae=ve.nextSibling;return s(de,()=>(a()-1)*d()+1,xe),s(de,()=>Math.min(a()*d(),$().length),ke),s(de,()=>$().length,Ce),Me.$$click=()=>m(Math.max(1,a()-1)),s(ve,a,ce),s(ve,k,null),Ae.$$click=()=>m(Math.min(k(),a()+1)),J(se=>{var oe=a()===1,ie=a()===1?"var(--bg-tertiary)":"var(--bg-secondary)",ue=a()===k(),he=a()===k()?"var(--bg-tertiary)":"var(--bg-secondary)";return oe!==se.e&&(Me.disabled=se.e=oe),ie!==se.t&&E(Me,"background",se.t=ie),ue!==se.a&&(Ae.disabled=se.a=ue),he!==se.o&&E(Ae,"background",se.o=he),se},{e:void 0,t:void 0,a:void 0,o:void 0}),re})()]}}),null),s(N,_(K,{get when(){return Re(()=>!!v())()&&n()},get children(){return _(mt,{get title(){return`HPA: ${n().name}`},onClose:()=>p(!1),size:"large",get children(){return _(gr,{yaml:"",get resourceName(){return n().name},get resourceNamespace(){return n().namespace},get getYAML(){return Fe.getHPAYAML}})}})}}),null),s(N,_(K,{get when(){return Re(()=>!!y())()&&n()},get children(){return _(mt,{get title(){return`Edit HPA: ${n().name}`},onClose:()=>x(!1),size:"large",get children(){return _(Dr,{get resourceName(){return n().name},get resourceNamespace(){return n().namespace},get getYAML(){return Fe.getHPAYAML},onSave:T})}})}}),null),s(N,_(K,{get when(){return Re(()=>!!M())()&&n()},get children(){return _(Sr,{get resourceName(){return n().name},get resourceNamespace(){return n().namespace},get getDescribe(){return Fe.getHPADescribe},onClose:()=>b(!1)})}}),null),J(()=>Z.value=Xr()),J(()=>ne.value=d()),J(()=>$e.value=c()),N})()};ut(["click","input"]);var Em=w('<div class=loading-spinner-container style=position:relative><svg class=loading-spinner viewBox="0 0 50 50"><circle class=loading-spinner-circle cx=25 cy=25 r=20 fill=none stroke-width=4 stroke-linecap=round stroke-dasharray="80 50">'),Tm=w('<div class="flex items-center justify-center gap-1">'),Dm=w("<div class=rounded-full style=opacity:0.6>"),Rm=w('<div class="flex items-end justify-center gap-1">'),Pm=w('<div class=rounded-sm style="opacity:0.6;transform-origin:bottom center">'),Im=w("<div class=rounded-full style=opacity:0.7>"),Bm=w('<div class=relative><div class="absolute inset-0 rounded-full border-4 border-transparent"></div><div class="absolute inset-2 rounded-full border-4 border-transparent">'),Nm=w('<div class="absolute inset-0 flex items-center justify-center"><span class="text-xs font-semibold">%'),Om=w('<div class=relative><svg class="absolute inset-0"><circle fill=none stroke=var(--border-color) stroke-width=4 stroke-linecap=round></circle><circle fill=none stroke-width=4 stroke-linecap=round style="transition:stroke-dashoffset 0.3s ease">'),zm=w("<div class=text-sm style=color:var(--text-secondary)>"),Fm=w("<div style=gap:8px>"),Hm=w('<div class="fixed inset-0 flex items-center justify-center z-50"style="background:rgba(0, 0, 0, 0.4);backdrop-filter:blur(4px)"><div class="flex flex-col items-center gap-4 p-8 rounded-xl"style="background:var(--bg-secondary);border:1px solid var(--border-color);box-shadow:0 20px 40px rgba(0, 0, 0, 0.3)">');const ni=e=>{const t={xs:"16px",sm:"24px",md:"32px",lg:"48px",xl:"64px"},r=()=>typeof e.size=="number"?`${e.size}px`:t[e.size||"md"],l=()=>{switch(e.speed){case"slow":return"2s";case"fast":return"0.6s";default:return"1.4s"}},a=()=>e.color||"var(--accent-primary)",m=()=>{const b=r(),o=l(),c=a();return(()=>{var u=Em(),h=u.firstChild,f=h.firstChild;return E(u,"width",b),E(u,"height",b),E(h,"width",b),E(h,"height",b),dt(f,"stroke",c),E(f,"animation",`spin ${o} linear infinite`),u})()},d=()=>{const b=r(),o=l(),c=a(),u=parseInt(b)/4;return(()=>{var h=Tm();return E(h,"width",b),E(h,"height",b),s(h,()=>[0,1,2].map(f=>(()=>{var $=Dm();return E($,"width",`${u}px`),E($,"height",`${u}px`),E($,"background",c),E($,"animation",`pulse ${o} ease-in-out infinite ${f*.15}s`),$})())),h})()},i=()=>{const b=r(),o=l(),c=a(),u=parseInt(b)/5,h=parseInt(b)*.6;return(()=>{var f=Rm();return E(f,"width",b),E(f,"height",b),s(f,()=>[0,1,2].map($=>(()=>{var C=Pm();return E(C,"width",`${u}px`),E(C,"height",`${h}px`),E(C,"background",c),E(C,"animation",`scale-up ${o} ease-in-out infinite ${$*.15}s`),C})())),f})()},n=()=>{const b=r(),o=l(),c=a();return(()=>{var u=Im();return E(u,"width",b),E(u,"height",b),E(u,"background",c),E(u,"animation",`pulse ${o} ease-in-out infinite`),u})()},g=()=>{const b=r(),o=l(),c=a();return(()=>{var u=Bm(),h=u.firstChild,f=h.nextSibling;return E(u,"width",b),E(u,"height",b),E(h,"border-top-color",c),E(h,"border-right-color",c),E(h,"animation",`spin ${o} linear infinite`),E(f,"border-bottom-color",c),E(f,"border-left-color",c),E(f,"animation",`spin ${o} linear infinite reverse`),u})()},v=()=>{switch(e.type){case"dots":return d();case"bars":return i();case"pulse":return n();case"ring":return g();default:return m()}},p=()=>{if(e.progress===void 0)return null;const b=r(),o=a(),c=parseInt(b),h=c/2-4,f=2*Math.PI*h,$=f-e.progress/100*f;return(()=>{var C=Om(),k=C.firstChild,S=k.firstChild,L=S.nextSibling;return E(C,"width",b),E(C,"height",b),dt(k,"viewBox",`0 0 ${c} ${c}`),dt(S,"cx",c/2),dt(S,"cy",c/2),dt(S,"r",h),dt(L,"cx",c/2),dt(L,"cy",c/2),dt(L,"r",h),dt(L,"stroke",o),dt(L,"stroke-dasharray",`${f}`),dt(L,"stroke-dashoffset",$),dt(L,"transform",`rotate(-90 ${c/2} ${c/2})`),s(C,_(K,{get when(){return e.showProgress},get children(){var P=Nm(),I=P.firstChild,D=I.firstChild;return E(I,"color",o),s(I,()=>Math.round(e.progress),D),P}}),null),C})()},y=()=>e.progress!==void 0?p():v(),x=()=>{const b=[];return e.inline||b.push("flex items-center justify-center"),e.class&&b.push(e.class),b.join(" ")},M=(()=>{var b=Fm();return s(b,y,null),s(b,_(K,{get when(){return e.showText||e.text},get children(){var o=zm();return s(o,()=>e.text||"Loading..."),o}}),null),J(()=>tt(b,x())),b})();return e.fullPage?(()=>{var b=Hm(),o=b.firstChild;return s(o,M),b})():M},Rl=document.createElement("style");Rl.textContent=`
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
  
  @keyframes pulse {
    0%, 100% { transform: scale(1); opacity: 0.6; }
    50% { transform: scale(1.1); opacity: 1; }
  }
  
  @keyframes scale-up {
    0%, 100% { transform: scaleY(0.6); opacity: 0.6; }
    50% { transform: scaleY(1); opacity: 1; }
  }
`;document.querySelector("style[data-loading-spinner]")||(Rl.setAttribute("data-loading-spinner","true"),document.head.appendChild(Rl));var jm=w("<div aria-hidden=true>"),Um=w("<div class=skeleton-container style=width:100%>"),Vm=w("<tr class=table-row-hover>"),Wm=w("<td>"),qm=w('<div class="responsive-grid gap-6">'),Km=w('<div class="card card-hover-enhanced p-6"><div class="flex items-center justify-between mb-4"></div><div class="mt-4 pt-4 border-t">');const zr=e=>{const t=wu({variant:"text",shimmer:!0,pulse:!0,count:1,rounded:!1},e),r=()=>{switch(t.variant){case"circle":return{width:typeof t.width=="number"?`${t.width}px`:t.width||"40px",height:typeof t.height=="number"?`${t.height}px`:t.height||"40px","border-radius":"50%"};case"rect":return{width:typeof t.width=="number"?`${t.width}px`:t.width||"100%",height:typeof t.height=="number"?`${t.height}px`:t.height||"100px","border-radius":t.rounded?typeof t.rounded=="string"?t.rounded:"8px":"0"};case"card":return{width:typeof t.width=="number"?`${t.width}px`:t.width||"100%",height:typeof t.height=="number"?`${t.height}px`:t.height||"200px","border-radius":"12px"};case"text":default:return{width:typeof t.width=="number"?`${t.width}px`:t.width||"100%",height:typeof t.height=="number"?`${t.height}px`:t.height||"1em","border-radius":t.rounded?typeof t.rounded=="string"?t.rounded:"4px":"0"}}},l=()=>t.shimmer&&t.pulse?"skeleton-pulse skeleton-shimmer":t.shimmer?"skeleton-shimmer":t.pulse?"skeleton-pulse":"",a=m=>{const d=r(),i=l(),n={...d,...t.style};return t.variant==="text"&&t.count>1&&m<t.count-1&&(n["margin-bottom"]="0.5em"),(()=>{var g=jm();return J(v=>{var p=`${i} ${t.className||""}`,y=n;return p!==v.e&&tt(g,v.e=p),v.t=_t(g,y,v.t),v},{e:void 0,t:void 0}),g})()};return(()=>{var m=Um();return s(m,()=>Array.from({length:t.count},(d,i)=>a(i))),m})()},Ym=e=>{const t=e.rows||5,r=e.columns;return Re(()=>Array.from({length:t}).map((l,a)=>(()=>{var m=Vm();return s(m,()=>Array.from({length:r}).map((d,i)=>(()=>{var n=Wm();return s(n,_(zr,{variant:"text",width:i===0?"80%":"60%",shimmer:!0,pulse:!0})),n})())),m})()))},Gm=e=>{const t=e.count||4;return(()=>{var r=qm();return s(r,()=>Array.from({length:t}).map(()=>(()=>{var l=Km(),a=l.firstChild,m=a.nextSibling;return s(a,_(zr,{variant:"text",width:"40%"}),null),s(a,_(zr,{variant:"circle",width:"24px",height:"24px"}),null),s(l,_(zr,{variant:"text",width:"60%",height:"2em",className:"mb-2"}),m),s(l,_(zr,{variant:"text",width:"30%"}),m),s(m,_(zr,{variant:"text",width:"100%",height:"0.875em",count:2})),J(d=>_t(m,{"border-color":"var(--border-color)"},d)),l})())),r})()};var Jm=w('<div class=space-y-3><div class="text-sm mb-2"style=color:var(--text-primary)>Port Forwarding for <span class=font-semibold></span></div><div><label class="block text-sm mb-1.5"style=color:var(--text-secondary)>Local port to forward from:</label><div class="flex items-center gap-2"><input type=number min=1024 max=65535 class="flex-1 px-3 py-2 rounded text-sm"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><button class="px-3 py-2 rounded text-xs"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)">Random</button></div></div><div class="flex items-center gap-2"><input type=checkbox id=openInBrowser class="w-4 h-4 rounded"style=accentColor:var(--accent-primary)><label for=openInBrowser class="text-sm cursor-pointer"style=color:var(--text-primary)>Open in Browser</label></div><div class="text-xs px-2 py-1.5 rounded text-center"style=background:var(--bg-tertiary);color:var(--text-muted)><span class="font-mono text-blue-400">localhost:</span>  <span class="font-mono text-green-400">:</span></div><div class="flex gap-3 pt-1"><button class="btn-secondary flex-1 px-4 py-2 text-sm">Cancel</button><button class="btn-primary flex-1 px-4 py-2 text-sm">Start');const fd=e=>{const[t,r]=W(0),[l,a]=W(!0);It(()=>{if(e.isOpen&&e.port){const n=Math.floor(Math.random()*1e3)+8e3;r(n)}});const m=()=>{if(!e.port)return;const n=typeof e.port.targetPort=="number"?e.port.targetPort:e.port.port;e.onStart(t(),n,l())},d=()=>e.port,i=()=>{const n=d();return n?typeof n.targetPort=="number"?n.targetPort:n.port:0};return _(mt,{get isOpen(){return e.isOpen},get onClose(){return e.onClose},title:"Port Forwarding",size:"xs",get children(){return _(K,{get when(){return d()},get children(){var n=Jm(),g=n.firstChild,v=g.firstChild,p=v.nextSibling,y=g.nextSibling,x=y.firstChild,M=x.nextSibling,b=M.firstChild,o=b.nextSibling,c=y.nextSibling,u=c.firstChild;u.nextSibling;var h=c.nextSibling,f=h.firstChild;f.firstChild;var $=f.nextSibling,C=$.nextSibling,k=C.firstChild,S=h.nextSibling,L=S.firstChild,P=L.nextSibling;return s(p,()=>e.serviceName),b.$$input=I=>r(parseInt(I.currentTarget.value)||8080),o.$$click=()=>r(Math.floor(Math.random()*1e3)+8e3),u.addEventListener("change",I=>a(I.currentTarget.checked)),s(f,t,null),s(C,()=>e.serviceName,k),s(C,i,null),Rt(L,"click",e.onClose,!0),P.$$click=m,J(()=>b.value=t()),J(()=>u.checked=l()),n}})}})};ut(["input","click"]);var Xm=w("<div class=space-y-2>"),Zm=w('<div class="flex items-center justify-between gap-3 px-3 py-2 rounded-lg border"style=border-color:var(--border-color);background:var(--bg-secondary)><div class=flex-1><div class="text-sm font-medium"style=color:var(--text-primary)></div><div class="text-xs font-mono"style=color:var(--text-muted)></div></div><button class="px-4 py-1.5 rounded text-sm font-medium transition-colors hover:opacity-80"style=background:var(--accent-primary);color:white>Forward');const Qm=e=>{const t=r=>{let l=`${r.port}`;return typeof r.targetPort=="number"&&r.targetPort!==r.port?l+=`:${r.targetPort}`:typeof r.targetPort=="string"&&(l+=`:${r.targetPort}`),r.nodePort&&r.nodePort>0&&(l+=`:${r.nodePort}`),l+=`/${r.protocol}`,l};return(()=>{var r=Xm();return s(r,_(Xe,{get each(){return e.ports},children:l=>(()=>{var a=Zm(),m=a.firstChild,d=m.firstChild,i=d.nextSibling,n=m.nextSibling;return s(d,()=>l.name||`Port ${l.port}`),s(i,()=>t(l)),n.$$click=()=>e.onForward(l),a})()})),r})()};ut(["click"]);var e0=w('<div class="fixed inset-0 z-50 flex"><div class="flex-1 bg-black/50"></div><div class="w-[600px] overflow-y-auto"style="background:var(--bg-primary);borderLeft:1px solid var(--border-color);boxShadow:-4px 0 12px rgba(0, 0, 0, 0.15)"><div class="sticky top-0 z-10 flex items-center justify-between px-6 py-4 border-b"style=background:var(--bg-primary);border-color:var(--border-color)><div><h2 class="text-lg font-semibold"style=color:var(--text-primary)>Describe: </h2></div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm font-medium transition-colors hover:opacity-80"title=Copy style=background:var(--bg-secondary);color:var(--text-primary)>Copy</button><button class="p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"style=color:var(--text-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div><div class="flex-1 overflow-y-auto p-6 space-y-8"style="scrollbar-width:thin;scrollbar-color:var(--border-color) var(--bg-primary)">'),t0=w('<div class="flex items-center justify-center h-64"><div class=text-center><div class="inline-block w-8 h-8 border-4 rounded-full animate-spin mx-auto mb-4"style=borderColor:var(--accent-primary);borderTopColor:transparent></div><p style=color:var(--text-muted)>Loading service details...'),r0=w('<div class=space-y-3><h3 class="text-base font-bold mb-4"style=background:var(--accent-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text>Basic Information</h3><div class="space-y-2 font-mono text-sm"style=color:var(--text-primary);line-height:1.8><div><span class=font-semibold style=color:var(--text-primary)>Name:</span><span style=color:var(--text-secondary);marginLeft:8px></span></div><div><span class=font-semibold style=color:var(--text-primary)>Namespace:</span><span style=color:var(--text-secondary);marginLeft:8px>'),s0=w("<span style=color:var(--text-secondary);marginLeft:8px>"),i0=w('<div class="mt-1 ml-4 break-all"style=color:var(--text-secondary)>'),n0=w('<div class="border-t pt-8"style=borderColor:var(--border-color)><h3 class="text-base font-bold mb-4"style=background:var(--accent-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text>Labels & Annotations</h3><div class="space-y-2 font-mono text-sm"style=color:var(--text-primary);line-height:1.8><div><span class=font-semibold style=color:var(--text-primary)>Labels:</span></div><div><span class=font-semibold style=color:var(--text-primary)>Annotations:</span>'),l0=w('<div class="border-t pt-8"style=borderColor:var(--border-color)><h3 class="text-base font-bold mb-4"style=background:var(--accent-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text>Selector</h3><div class="font-mono text-sm"style=color:var(--text-secondary);line-height:1.8>'),o0=w('<div class="border-t pt-8"style=borderColor:var(--border-color)><h3 class="text-base font-bold mb-4"style=background:var(--accent-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text>Service Configuration</h3><div class="space-y-2 font-mono text-sm"style=color:var(--text-primary);line-height:1.8><div><span class=font-semibold style=color:var(--text-primary)>Type:</span><span style=color:var(--text-secondary);marginLeft:8px></span></div><div><span class=font-semibold style=color:var(--text-primary)>IP Family Policy:</span><span style=color:var(--text-secondary);marginLeft:8px></span></div><div><span class=font-semibold style=color:var(--text-primary)>IP Families:</span><span style=color:var(--text-secondary);marginLeft:8px></span></div><div><span class=font-semibold style=color:var(--text-primary)>Session Affinity:</span><span style=color:var(--text-secondary);marginLeft:8px>'),a0=w('<div class="border-t pt-8"style=borderColor:var(--border-color)><h3 class="text-base font-bold mb-4"style=background:var(--accent-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text>Network Configuration</h3><div class="space-y-2 font-mono text-sm"style=color:var(--text-primary);line-height:1.8><div><span class=font-semibold style=color:var(--text-primary)>IP:</span><span style=color:var(--text-secondary);marginLeft:8px></span></div><div><span class=font-semibold style=color:var(--text-primary)>IPs:</span><span style=color:var(--text-secondary);marginLeft:8px>'),c0=w('<div class="border-t pt-8"style=borderColor:var(--border-color)><h3 class="text-base font-bold mb-4"style=background:var(--accent-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text>Ports</h3><div class="space-y-3 font-mono text-sm"style=color:var(--text-primary);line-height:1.8>'),d0=w("<span style=color:var(--text-secondary)>"),u0=w('<div class="border-t pt-8"style=borderColor:var(--border-color)><h3 class="text-base font-bold mb-4"style=background:var(--accent-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text>Endpoints</h3><div class="font-mono text-sm"style=color:var(--text-primary);line-height:1.8>'),h0=w('<div class="border-t pt-8"style=borderColor:var(--border-color)><h3 class="text-base font-bold mb-4"style=background:var(--accent-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text>Events</h3><div class="font-mono text-sm"style=color:var(--text-muted);line-height:1.8>&lt;none&gt;'),Da=w("<span style=color:var(--text-muted);marginLeft:8px>&lt;none&gt;"),g0=w("<div class=mb-1>="),v0=w("<div class=space-y-1><div><span class=font-semibold style=color:var(--text-primary)>Port:</span><span style=color:var(--text-secondary);marginLeft:8px></span></div><div><span class=font-semibold style=color:var(--text-primary)>TargetPort:</span><span style=color:var(--text-secondary);marginLeft:8px>"),f0=w("<span style=color:var(--text-muted)>&lt;none&gt;");const p0=e=>{const[t,r]=W(null),[l,a]=W(!0),[m,d]=W(null),[i,n]=W(!1),[g,v]=W([]);It(async()=>{if(e.isOpen&&e.serviceName){a(!0);try{const c=await Fe.getServiceDetails(e.serviceName,e.serviceNamespace);r(c);const u=await Fe.listPortForwards();v(u||[])}catch(c){console.error("Failed to fetch service details:",c),Je("Failed to load service details","error")}finally{a(!1)}}});const p=c=>Object.entries(c).map(([u,h])=>`${u}=${h}`).join(", "),y=c=>Object.entries(c).map(([u,h])=>`${u}=${h}`).join(", "),x=c=>{const u=c.name?`${c.name}  `:"<unset>  ",h=c.port||c.portNumber||"",f=c.protocol||"TCP";return`${u}${h}/${f}`},M=c=>{const u=c.protocol||"TCP";return typeof c.targetPort=="number"?`${c.targetPort}/${u}`:typeof c.targetPort=="string"?`${c.targetPort}/${u}`:`${c.port||c.portNumber||""}/${u}`},b=c=>{const u=[`Name: ${c.name}`,`Namespace: ${c.namespace}`,`Labels: ${Object.keys(c.labels||{}).length>0?p(c.labels):"<none>"}`,`Annotations: ${Object.keys(c.annotations||{}).length>0?Object.entries(c.annotations).map(([f,$])=>`${f}=${$}`).join(", "):"<none>"}`,`Selector: ${y(c.selector)}`,`Type: ${c.type}`,`IP Family Policy: ${c.ipFamilyPolicy||"-"}`,`IP Families: ${(c.ipFamilies||[]).join(", ")||"-"}`,`IP: ${c.clusterIP}`,`IPs: ${(c.clusterIPs||[]).join(", ")||c.clusterIP}`],h=c.portsDetails||c.ports||[];if(h.length>0&&h.forEach(f=>{u.push(`Port: ${x(f)}`),u.push(`TargetPort: ${M(f)}`)}),c.endpoints&&c.endpoints.length>0){const f=c.endpoints.flatMap($=>$.addresses.map(C=>{const k=h[0];if(k){const S=typeof k.targetPort=="number"?k.targetPort:k.port||k.portNumber;return`${C}:${S}`}return C}));u.push(`Endpoints: ${f.join(", ")}`)}else u.push("Endpoints: <none>");return u.push(`Session Affinity: ${c.sessionAffinity||"None"}`),u.push("Events: <none>"),u.join(`
`)},o=()=>t();return[_(K,{get when(){return e.isOpen},get children(){var c=e0(),u=c.firstChild,h=u.nextSibling,f=h.firstChild,$=f.firstChild,C=$.firstChild;C.firstChild;var k=$.nextSibling,S=k.firstChild,L=S.nextSibling,P=f.nextSibling;return Rt(u,"click",e.onClose,!0),h.$$click=I=>I.stopPropagation(),s(C,()=>e.serviceName,null),S.$$click=()=>{if(o()){const I=`Describe: ${e.serviceName}

${b(o())}`;navigator.clipboard.writeText(I),Je("Copied to clipboard","success")}},Rt(L,"click",e.onClose,!0),s(P,_(K,{get when(){return!l()},get fallback(){return(()=>{var I=t0(),D=I.firstChild,T=D.firstChild;return T.nextSibling,I})()},get children(){return _(K,{get when(){return o()},children:I=>{const D=I().portsDetails||I().ports||[];return[(()=>{var T=r0(),B=T.firstChild,N=B.nextSibling,O=N.firstChild,H=O.firstChild,A=H.nextSibling,z=O.nextSibling,F=z.firstChild,j=F.nextSibling;return s(A,()=>I().name),s(j,()=>I().namespace),T})(),(()=>{var T=n0(),B=T.firstChild,N=B.nextSibling,O=N.firstChild;O.firstChild;var H=O.nextSibling;return H.firstChild,s(O,_(K,{get when(){return Object.keys(I().labels||{}).length>0},get fallback(){return Da()},get children(){var A=s0();return s(A,()=>p(I().labels)),A}}),null),s(H,_(K,{get when(){return Object.keys(I().annotations||{}).length>0},get fallback(){return Da()},get children(){var A=i0();return s(A,()=>Object.entries(I().annotations).map(([z,F])=>(()=>{var j=g0(),q=j.firstChild;return s(j,z,q),s(j,(()=>{var U=Re(()=>F.length>100);return()=>U()?F.substring(0,100)+"...":F})(),null),j})())),A}}),null),T})(),(()=>{var T=l0(),B=T.firstChild,N=B.nextSibling;return s(N,()=>y(I().selector)),T})(),(()=>{var T=o0(),B=T.firstChild,N=B.nextSibling,O=N.firstChild,H=O.firstChild,A=H.nextSibling,z=O.nextSibling,F=z.firstChild,j=F.nextSibling,q=z.nextSibling,U=q.firstChild,Y=U.nextSibling,V=q.nextSibling,X=V.firstChild,R=X.nextSibling;return s(A,()=>I().type),s(j,()=>I().ipFamilyPolicy||"-"),s(Y,()=>(I().ipFamilies||[]).join(", ")||"-"),s(R,()=>I().sessionAffinity||"None"),T})(),(()=>{var T=a0(),B=T.firstChild,N=B.nextSibling,O=N.firstChild,H=O.firstChild,A=H.nextSibling,z=O.nextSibling,F=z.firstChild,j=F.nextSibling;return s(A,()=>I().clusterIP),s(j,()=>(I().clusterIPs||[]).join(", ")||I().clusterIP),T})(),_(K,{get when(){return D.length>0},get children(){var T=c0(),B=T.firstChild,N=B.nextSibling;return s(N,_(Xe,{each:D,children:O=>(()=>{var H=v0(),A=H.firstChild,z=A.firstChild,F=z.nextSibling,j=A.nextSibling,q=j.firstChild,U=q.nextSibling;return s(F,()=>x(O)),s(U,()=>M(O)),H})()})),T}}),(()=>{var T=u0(),B=T.firstChild,N=B.nextSibling;return s(N,_(K,{get when(){return(I().endpoints||[]).length>0},get fallback(){return f0()},get children(){var O=d0();return s(O,()=>(I().endpoints||[]).flatMap(H=>H.addresses.map(A=>{const z=D[0];if(z){const F=typeof z.targetPort=="number"?z.targetPort:z.port||z.portNumber;return`${A}:${F}`}return A})).join(", ")),O}})),T})(),(()=>{var T=h0(),B=T.firstChild;return B.nextSibling,T})()]}})}})),c}}),_(fd,{get isOpen(){return i()},onClose:()=>{n(!1),d(null)},get serviceName(){return e.serviceName},get serviceNamespace(){return e.serviceNamespace},get port(){return m()},onStart:async(c,u,h)=>{try{await Fe.startPortForward("service",e.serviceName,e.serviceNamespace,c,u),Je(`Port forward started: localhost:${c}  ${e.serviceName}:${u}`,"success"),n(!1),d(null);const f=await Fe.listPortForwards();v(f||[]),e.onPortForwardChange&&e.onPortForwardChange(),h&&setTimeout(()=>{window.open(`http://localhost:${c}`,"_blank")},500)}catch(f){console.error("Failed to start port forward:",f),Je("Failed to start port forward","error")}}})]};ut(["click"]);var m0=w('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span></span><span>'),b0=w('<div class="w-full overflow-x-auto"style=margin:0;padding:0><table class=w-full style=width:100%;table-layout:auto;border-collapse:collapse;margin:0;padding:0><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Type </div></th><th class=whitespace-nowrap>Cluster IP</th><th class=whitespace-nowrap>External IP</th><th class=whitespace-nowrap>Ports</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),x0=w('<div class="flex items-center justify-between p-4 font-mono text-sm"style="background:var(--bg-secondary);borderTop:1px solid var(--border-color)"><div style=color:var(--text-secondary)>Showing <!> - <!> of <!> services</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)> Prev</button><span class="px-3 py-1"style=color:var(--text-primary)>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>Next </button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>Last</button><select class="px-3 py-1 rounded-lg text-sm ml-4"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20 per page</option><option value=50>50 per page</option><option value=100>100 per page</option><option value=200>200 per page'),y0=w("<div class=w-full style=margin:0;padding:0;border-radius:4px>"),_0=w("<div style=height:70vh>"),ol=w('<div class="flex items-center justify-center p-8">'),$0=w("<div class=space-y-2>"),w0=w('<div class="card p-4"><h3 class="font-semibold mb-4 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>Active Port Forwards'),S0=w('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Services</h1><p style=color:var(--text-secondary)>Network services and load balancers</p></div><div class="flex gap-2 border-b"style=border-color:var(--border-color)><button>Services</button><button>Port Forward</button></div><div class="flex items-center gap-3"><button class=icon-btn title="Refresh Services"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2 transition-all"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2 transition-all"><span class=text-sm style=color:var(--text-secondary)>ClusterIP</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2 transition-all"><span class=text-sm style=color:var(--text-secondary)>NodePort</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2 transition-all"><span class=text-sm style=color:var(--text-secondary)>LoadBalancer</span><span class="text-xl font-bold"style=color:#3b82f6></span></div><div class=flex-1></div><select class="px-3 py-2 rounded-lg text-sm"title="Font Size"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=12>12px</option><option value=14>14px</option><option value=16>16px</option><option value=18>18px</option><option value=20>20px</option></select><select class="px-3 py-2 rounded-lg text-sm"title="Font Family"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=Monospace>Monospace</option><option value=System-ui>System-ui</option><option value=Monaco>Monaco</option><option value=Consolas>Consolas</option><option value=Courier>Courier</option></select><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100'),C0=w('<span class="ml-2 px-1.5 py-0.5 rounded-full text-xs"style=background:var(--accent-primary);color:white>'),k0=w('<div class="p-8 text-center">'),M0=w('<tr><td colspan=8 class="text-center py-8"style=color:var(--text-muted)>No services found'),A0=w('<tr><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none;cursor:pointer"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"><span></span></td><td class="font-mono text-sm"style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td class="font-mono text-sm"style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td class=text-sm style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;border:none">'),L0=w('<div class="text-center py-8 text-sm"style=color:var(--text-muted)>No active port forwards'),E0=w('<div class="flex items-center justify-between gap-2 px-3 py-2 rounded-lg border"style=background:var(--bg-tertiary);border-color:var(--border-color)><div class="flex items-center gap-2 flex-1"><span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span><div class=flex-1><div class="text-sm font-medium"style=color:var(--text-primary)></div><div class="text-xs font-mono"style=color:var(--text-muted)>localhost:<!>  </div></div></div><div class="flex items-center gap-2"><a target=_blank class="text-xs px-2 py-1 rounded transition-colors hover:opacity-80"style=background:var(--accent-primary);color:white>Open</a><button class="p-1.5 rounded transition-colors hover:bg-red-500/20 text-red-400 hover:text-red-300"title="Stop Port Forward"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12">'),T0=w('<span class="ml-2 text-xs px-1.5 py-0.5 rounded"style=background:var(--bg-secondary);color:var(--text-muted)>Service'),D0=w('<span class="ml-2 text-xs px-1.5 py-0.5 rounded"style=background:var(--bg-secondary);color:var(--text-muted)>Pod'),R0=w("<span class=ml-2>(<!>)");const P0=()=>{const[e,t]=W("all"),[r,l]=W("name"),[a,m]=W("asc"),[d,i]=W(1),[n,g]=W(20),[v,p]=W(null),[y,x]=W(!1),[M,b]=W(!1),[o,c]=W(!1),[u,h]=W(!1),[f,$]=W(!1),[C,k]=W(null),[S,L]=W("services"),P=()=>{const ge=localStorage.getItem("services-font-size");return ge?parseInt(ge):14},[I,D]=W(P()),T=ge=>{D(ge),localStorage.setItem("services-font-size",ge.toString())},B=()=>localStorage.getItem("services-font-family")||"Monaco",[N,O]=W(B()),H=ge=>{O(ge),localStorage.setItem("services-font-family",ge)},A=()=>{switch(N()){case"Monospace":return'"Courier New", Monaco, monospace';case"System-ui":return'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif';case"Monaco":return'Monaco, "Lucida Console", monospace';case"Consolas":return'Consolas, "Courier New", monospace';case"Courier":return'Courier, "Courier New", monospace';default:return'"Courier New", Monaco, monospace'}},z=()=>{const ge=hr();if(ge.length!==0)return ge.length===1,ge[0]},F=Fr("services",async()=>{ar(!0);try{const ge=z();return await Fe.getServices(ge)}finally{ar(!1)}},{ttl:15e3,backgroundRefresh:!0}),j=et(()=>F.data()||[]),[q,{refetch:U}]=it(Fe.listPortForwards),[Y]=it(()=>(y()||M())&&v()?{name:v().name,ns:v().namespace}:null,async ge=>ge&&(await Fe.getServiceYAML(ge.name,ge.ns)).yaml||""),V=async ge=>{const Ce=v();if(Ce)try{await Fe.updateService(Ce.name,Ce.namespace,ge),Je(` Service ${Ce.name} updated successfully`,"success"),b(!1),setTimeout(()=>F.refetch(),500),setTimeout(()=>F.refetch(),2e3)}catch(_e){const Me=_e instanceof Error?_e.message:"Unknown error";throw Je(` Failed to update service: ${Me}`,"error"),_e}},X=ge=>{if(!ge)return 0;let Ce=0;const _e=ge.match(/(\d+)d/),Me=ge.match(/(\d+)h/),ve=ge.match(/(\d+)m/);return _e&&(Ce+=parseInt(_e[1])*24*60),Me&&(Ce+=parseInt(Me[1])*60),ve&&(Ce+=parseInt(ve[1])),Ce},R=et(()=>{let ge=j()||[];const Ce=Xr().toLowerCase(),_e=e();_e!=="all"&&(ge=ge.filter(be=>be.type===_e)),Ce&&(ge=ge.filter(be=>be.name.toLowerCase().includes(Ce)||be.namespace.toLowerCase().includes(Ce)||be.type.toLowerCase().includes(Ce)));const Me=r(),ve=a();return ge=[...ge].sort((be,ce)=>{let Ae=0;switch(Me){case"name":Ae=be.name.localeCompare(ce.name);break;case"namespace":Ae=be.namespace.localeCompare(ce.namespace);break;case"type":Ae=be.type.localeCompare(ce.type);break;case"age":Ae=X(be.age)-X(ce.age);break}return ve==="asc"?Ae:-Ae}),ge}),G=et(()=>Math.ceil(R().length/n())),te=et(()=>{const ge=(d()-1)*n();return R().slice(ge,ge+n())}),ae=et(()=>{const ge=j()||[];return{total:ge.length,clusterIP:ge.filter(Ce=>Ce.type==="ClusterIP").length,nodePort:ge.filter(Ce=>Ce.type==="NodePort").length,loadBalancer:ge.filter(Ce=>Ce.type==="LoadBalancer").length}}),Q=ge=>{r()===ge?m(Ce=>Ce==="asc"?"desc":"asc"):(l(ge),m("asc")),i(1)},Z=ge=>(()=>{var Ce=m0(),_e=Ce.firstChild,Me=_e.nextSibling;return J(ve=>{var be=r()===ge.field&&a()==="asc"?"var(--accent-primary)":"var(--text-muted)",ce=r()===ge.field&&a()==="desc"?"var(--accent-primary)":"var(--text-muted)";return be!==ve.e&&E(_e,"color",ve.e=be),ce!==ve.t&&E(Me,"color",ve.t=ce),ve},{e:void 0,t:void 0}),Ce})(),[ne,$e]=W([]),[re]=it(()=>u()&&v()?{name:v().name,ns:v().namespace}:null,async ge=>ge?await Fe.getServiceDetails(ge.name,ge.ns):null);It(()=>{const ge=re();if(ge&&ge.portsDetails){const Ce=ge.portsDetails.map(_e=>({name:_e.name||"",port:_e.port,targetPort:_e.targetPort||_e.port,protocol:_e.protocol||"TCP",nodePort:_e.nodePort||void 0}));$e(Ce)}});const de=ge=>{p(ge),h(!0)},le=ge=>{k(ge),h(!0)},xe=async(ge,Ce,_e)=>{const Me=v();if(Me)try{await Fe.startPortForward("service",Me.name,Me.namespace,ge,Ce),Je(` Port forward started: localhost:${ge}  ${Me.name}:${Ce}`,"success"),h(!1),k(null),U(),_e&&setTimeout(()=>{window.open(`http://localhost:${ge}`,"_blank")},500)}catch(ve){console.error("Failed to start port forward:",ve);const be=ve instanceof Error?ve.message:"Unknown error";Je(` Failed to start port forward: ${be}`,"error")}},ye=async ge=>{try{await Fe.stopPortForward(ge.id),Je(` Port forward stopped: ${ge.name}`,"success"),U()}catch(Ce){console.error("Failed to stop port forward:",Ce);const _e=Ce instanceof Error?Ce.message:"Unknown error";Je(` Failed to stop port forward: ${_e}`,"error")}},ke=async ge=>{if(confirm(`Are you sure you want to delete service "${ge.name}" in namespace "${ge.namespace}"?`))try{await Fe.deleteService(ge.name,ge.namespace),Je(`Service ${ge.name} deleted successfully`,"success"),F.refetch()}catch(Ce){console.error("Failed to delete service:",Ce),Je(`Failed to delete service: ${Ce instanceof Error?Ce.message:"Unknown error"}`,"error")}};return(()=>{var ge=S0(),Ce=ge.firstChild,_e=Ce.firstChild,Me=_e.firstChild;Me.nextSibling;var ve=_e.nextSibling,be=ve.firstChild,ce=be.nextSibling;ce.firstChild;var Ae=ve.nextSibling,se=Ae.firstChild,oe=Ce.nextSibling,ie=oe.firstChild,ue=ie.firstChild,he=ue.nextSibling,Te=ie.nextSibling,ee=Te.firstChild,Se=ee.nextSibling,pe=Te.nextSibling,De=pe.firstChild,Ne=De.nextSibling,me=pe.nextSibling,He=me.firstChild,Ze=He.nextSibling,we=me.nextSibling,ze=we.nextSibling,Pe=ze.nextSibling,Ue=Pe.nextSibling,Oe=Ue.nextSibling;return be.$$click=()=>L("services"),ce.$$click=()=>L("portforward"),s(ce,(()=>{var fe=Re(()=>(q()||[]).length>0);return()=>fe()&&(()=>{var Le=C0();return s(Le,()=>(q()||[]).length),Le})()})(),null),se.$$click=fe=>{const Le=fe.currentTarget;Le.classList.add("refreshing"),setTimeout(()=>Le.classList.remove("refreshing"),500),F.refetch()},ie.$$click=()=>{t("all"),i(1)},s(he,()=>ae().total),Te.$$click=()=>{t("ClusterIP"),i(1)},s(Se,()=>ae().clusterIP),pe.$$click=()=>{t("NodePort"),i(1)},s(Ne,()=>ae().nodePort),me.$$click=()=>{t("LoadBalancer"),i(1)},s(Ze,()=>ae().loadBalancer),ze.addEventListener("change",fe=>T(parseInt(fe.currentTarget.value))),Pe.addEventListener("change",fe=>H(fe.currentTarget.value)),Ue.$$input=fe=>{Fi(fe.currentTarget.value),i(1)},Oe.addEventListener("change",fe=>{g(parseInt(fe.currentTarget.value)),i(1)}),s(ge,_(K,{get when(){return S()==="services"},get children(){var fe=y0();return s(fe,_(K,{get when(){return!F.loading()||F.data()!==void 0},get fallback(){return(()=>{var Le=k0();return s(Le,_(ni,{size:"lg",showText:!0,text:"Loading services..."})),Le})()},get children(){return[(()=>{var Le=b0(),We=Le.firstChild,Ee=We.firstChild,Ie=Ee.firstChild,qe=Ie.firstChild,Be=qe.firstChild;Be.firstChild;var Ke=qe.nextSibling,Ye=Ke.firstChild;Ye.firstChild;var lt=Ke.nextSibling,gt=lt.firstChild;gt.firstChild;var Qe=lt.nextSibling,ct=Qe.nextSibling,ft=ct.nextSibling,Ge=ft.nextSibling,st=Ge.firstChild;st.firstChild;var vt=Ee.nextSibling;return qe.$$click=()=>Q("name"),s(Be,_(Z,{field:"name"}),null),Ke.$$click=()=>Q("namespace"),s(Ye,_(Z,{field:"namespace"}),null),lt.$$click=()=>Q("type"),s(gt,_(Z,{field:"type"}),null),Ge.$$click=()=>Q("age"),s(st,_(Z,{field:"age"}),null),s(vt,_(Xe,{get each(){return te()},get fallback(){return(()=>{var at=M0();return at.firstChild,at})()},children:at=>(()=>{var pt=A0(),xt=pt.firstChild,Et=xt.firstChild,yt=xt.nextSibling,Tt=yt.nextSibling,Bt=Tt.firstChild,Dt=Tt.nextSibling,At=Dt.nextSibling,Nt=At.nextSibling,Ve=Nt.nextSibling,nt=Ve.nextSibling;return Et.$$click=()=>{p(at),$(!0)},s(Et,(()=>{var rt=Re(()=>at.name.length>40);return()=>rt()?at.name.slice(0,37)+"...":at.name})()),yt.$$click=()=>{p(at),$(!0)},s(yt,()=>at.namespace),s(Bt,()=>at.type),s(Dt,()=>at.clusterIP),s(At,()=>at.externalIP||"-"),s(Nt,()=>at.ports),s(Ve,()=>at.age),s(nt,_(Jt,{actions:[{label:"Describe",icon:"info",onClick:()=>{p(at),c(!0)}},{label:"Port Forward",icon:"portforward",onClick:()=>de(at)},{label:"View YAML",icon:"yaml",onClick:()=>{p(at),x(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{p(at),b(!0)}},{label:"Delete",icon:"delete",onClick:()=>ke(at),variant:"danger",divider:!0}]})),J(rt=>{var wt=`${I()}px`,$t=`${Math.max(24,I()*1.7)}px`,bt=`${Math.max(24,I()*1.7)}px`,kt=`${I()}px`,Mt=`${Math.max(24,I()*1.7)}px`,Rr=`${Math.max(24,I()*1.7)}px`,Cs=`${I()}px`,Vr=`${Math.max(24,I()*1.7)}px`,Ki=`${Math.max(24,I()*1.7)}px`,Yi=`badge ${at.type==="LoadBalancer"?"badge-info":at.type==="NodePort"?"badge-warning":"badge-success"}`,js=`${I()}px`,Gi=`${Math.max(24,I()*1.7)}px`,Ji=`${Math.max(24,I()*1.7)}px`,Us=`${I()}px`,Xi=`${Math.max(24,I()*1.7)}px`,Zi=`${Math.max(24,I()*1.7)}px`,Vs=`${I()}px`,Qi=`${Math.max(24,I()*1.7)}px`,en=`${Math.max(24,I()*1.7)}px`,tn=`${I()}px`,Ws=`${Math.max(24,I()*1.7)}px`,qs=`${Math.max(24,I()*1.7)}px`,Ks=`${Math.max(24,I()*1.7)}px`,gi=`${Math.max(24,I()*1.7)}px`;return wt!==rt.e&&E(xt,"font-size",rt.e=wt),$t!==rt.t&&E(xt,"height",rt.t=$t),bt!==rt.a&&E(xt,"line-height",rt.a=bt),kt!==rt.o&&E(yt,"font-size",rt.o=kt),Mt!==rt.i&&E(yt,"height",rt.i=Mt),Rr!==rt.n&&E(yt,"line-height",rt.n=Rr),Cs!==rt.s&&E(Tt,"font-size",rt.s=Cs),Vr!==rt.h&&E(Tt,"height",rt.h=Vr),Ki!==rt.r&&E(Tt,"line-height",rt.r=Ki),Yi!==rt.d&&tt(Bt,rt.d=Yi),js!==rt.l&&E(Dt,"font-size",rt.l=js),Gi!==rt.u&&E(Dt,"height",rt.u=Gi),Ji!==rt.c&&E(Dt,"line-height",rt.c=Ji),Us!==rt.w&&E(At,"font-size",rt.w=Us),Xi!==rt.m&&E(At,"height",rt.m=Xi),Zi!==rt.f&&E(At,"line-height",rt.f=Zi),Vs!==rt.y&&E(Nt,"font-size",rt.y=Vs),Qi!==rt.g&&E(Nt,"height",rt.g=Qi),en!==rt.p&&E(Nt,"line-height",rt.p=en),tn!==rt.b&&E(Ve,"font-size",rt.b=tn),Ws!==rt.T&&E(Ve,"height",rt.T=Ws),qs!==rt.A&&E(Ve,"line-height",rt.A=qs),Ks!==rt.O&&E(nt,"height",rt.O=Ks),gi!==rt.I&&E(nt,"line-height",rt.I=gi),rt},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0,A:void 0,O:void 0,I:void 0}),pt})()})),J(at=>{var pt=A(),xt=qt();return pt!==at.e&&E(We,"font-family",at.e=pt),xt!==at.t&&E(We,"background",at.t=xt),at},{e:void 0,t:void 0}),Le})(),_(K,{get when(){return G()>1||R().length>0},get children(){var Le=x0(),We=Le.firstChild,Ee=We.firstChild,Ie=Ee.nextSibling,qe=Ie.nextSibling,Be=qe.nextSibling,Ke=Be.nextSibling,Ye=Ke.nextSibling;Ye.nextSibling;var lt=We.nextSibling,gt=lt.firstChild,Qe=gt.nextSibling,ct=Qe.nextSibling,ft=ct.firstChild,Ge=ft.nextSibling;Ge.nextSibling;var st=ct.nextSibling,vt=st.nextSibling,at=vt.nextSibling;return s(We,()=>(d()-1)*n()+1,Ie),s(We,()=>Math.min(d()*n(),R().length),Be),s(We,()=>R().length,Ye),gt.$$click=()=>i(1),Qe.$$click=()=>i(pt=>Math.max(1,pt-1)),s(ct,d,Ge),s(ct,G,null),st.$$click=()=>i(pt=>Math.min(G(),pt+1)),vt.$$click=()=>i(G()),at.addEventListener("change",pt=>{g(parseInt(pt.currentTarget.value)),i(1)}),J(pt=>{var xt=d()===1,Et=d()===1,yt=d()===G(),Tt=d()===G();return xt!==pt.e&&(gt.disabled=pt.e=xt),Et!==pt.t&&(Qe.disabled=pt.t=Et),yt!==pt.a&&(st.disabled=pt.a=yt),Tt!==pt.o&&(vt.disabled=pt.o=Tt),pt},{e:void 0,t:void 0,a:void 0,o:void 0}),J(()=>at.value=n()),Le}})]}})),J(Le=>{var We=qt(),Ee=`1px solid ${Ar()}`;return We!==Le.e&&E(fe,"background",Le.e=We),Ee!==Le.t&&E(fe,"border",Le.t=Ee),Le},{e:void 0,t:void 0}),fe}}),null),s(ge,_(mt,{get isOpen(){return y()},onClose:()=>x(!1),get title(){return`YAML: ${v()?.name}`},size:"xl",get children(){return _(K,{get when(){return!Y.loading},get fallback(){return(()=>{var fe=ol();return s(fe,_(ni,{size:"md"})),fe})()},get children(){return _(gr,{get yaml(){return Y()||""},get title(){return v()?.name}})}})}}),null),s(ge,_(mt,{get isOpen(){return M()},onClose:()=>b(!1),get title(){return`Edit YAML: ${v()?.name}`},size:"xl",get children(){return _(K,{get when(){return!Y.loading},get fallback(){return(()=>{var fe=ol();return s(fe,_(ni,{size:"md"})),fe})()},get children(){var fe=_0();return s(fe,_(Dr,{get yaml(){return Y()||""},get title(){return v()?.name},onSave:V,onCancel:()=>b(!1)})),fe}})}}),null),s(ge,_(Sr,{get isOpen(){return o()},onClose:()=>c(!1),resourceType:"service",get name(){return v()?.name||""},get namespace(){return v()?.namespace}}),null),s(ge,_(p0,{get isOpen(){return f()},onClose:()=>$(!1),get serviceName(){return v()?.name||""},get serviceNamespace(){return v()?.namespace||""},onPortForwardChange:()=>U()}),null),s(ge,_(K,{get when(){return Re(()=>!!(u()&&ne().length>0))()&&!C()},get children(){return _(mt,{get isOpen(){return Re(()=>!!u())()&&!C()},onClose:()=>{h(!1),k(null)},title:"Ports",size:"xs",get children(){return _(Qm,{get serviceName(){return v()?.name||""},get ports(){return ne()},onForward:le})}})}}),null),s(ge,_(K,{get when(){return Re(()=>!!u())()&&ne().length===0},get children(){return _(mt,{get isOpen(){return u()},onClose:()=>{h(!1),k(null)},title:"Ports",size:"xs",get children(){var fe=ol();return s(fe,_(ni,{size:"md"})),fe}})}}),null),s(ge,_(fd,{get isOpen(){return Re(()=>!!u())()&&C()!==null},onClose:()=>{h(!1),k(null)},get serviceName(){return v()?.name||""},get serviceNamespace(){return v()?.namespace||""},get port(){return C()},onStart:xe}),null),s(ge,_(K,{get when(){return S()==="portforward"},get children(){var fe=w0();return fe.firstChild,s(fe,_(K,{get when(){return(q()||[]).length>0},get fallback(){return L0()},get children(){var Le=$0();return s(Le,_(Xe,{get each(){return q()||[]},children:We=>(()=>{var Ee=E0(),Ie=Ee.firstChild,qe=Ie.firstChild,Be=qe.nextSibling,Ke=Be.firstChild,Ye=Ke.nextSibling,lt=Ye.firstChild,gt=lt.nextSibling;gt.nextSibling;var Qe=Ie.nextSibling,ct=Qe.firstChild,ft=ct.nextSibling;return s(Ke,()=>We.name,null),s(Ke,(()=>{var Ge=Re(()=>We.type==="service");return()=>Ge()&&T0()})(),null),s(Ke,(()=>{var Ge=Re(()=>We.type==="pod");return()=>Ge()&&D0()})(),null),s(Ye,()=>We.localPort,gt),s(Ye,()=>We.remotePort,null),s(Ye,(()=>{var Ge=Re(()=>!!We.namespace);return()=>Ge()&&(()=>{var st=R0(),vt=st.firstChild,at=vt.nextSibling;return at.nextSibling,s(st,()=>We.namespace,at),st})()})(),null),ft.$$click=()=>ye(We),J(()=>dt(ct,"href",`http://localhost:${We.localPort}`)),Ee})()})),Le}}),null),fe}}),null),J(fe=>{var Le=`px-4 py-2 text-sm font-medium transition-colors ${S()==="services"?"border-b-2":"opacity-60 hover:opacity-100"}`,We=S()==="services"?"var(--accent-primary)":"var(--text-secondary)",Ee=S()==="services"?"var(--accent-primary)":"transparent",Ie=`px-4 py-2 text-sm font-medium transition-colors relative ${S()==="portforward"?"border-b-2":"opacity-60 hover:opacity-100"}`,qe=S()==="portforward"?"var(--accent-primary)":"var(--text-secondary)",Be=S()==="portforward"?"var(--accent-primary)":"transparent",Ke=e()==="all"?"3px solid var(--accent-primary)":"3px solid transparent",Ye=e()==="all"?1:.7,lt=e()==="ClusterIP"?"3px solid var(--success-color)":"3px solid transparent",gt=e()==="ClusterIP"?1:.7,Qe=e()==="NodePort"?"3px solid var(--warning-color)":"3px solid transparent",ct=e()==="NodePort"?1:.7,ft=e()==="LoadBalancer"?"3px solid #3b82f6":"3px solid transparent",Ge=e()==="LoadBalancer"?1:.7;return Le!==fe.e&&tt(be,fe.e=Le),We!==fe.t&&E(be,"color",fe.t=We),Ee!==fe.a&&E(be,"border-color",fe.a=Ee),Ie!==fe.o&&tt(ce,fe.o=Ie),qe!==fe.i&&E(ce,"color",fe.i=qe),Be!==fe.n&&E(ce,"border-color",fe.n=Be),Ke!==fe.s&&E(ie,"border-left",fe.s=Ke),Ye!==fe.h&&E(ie,"opacity",fe.h=Ye),lt!==fe.r&&E(Te,"border-left",fe.r=lt),gt!==fe.d&&E(Te,"opacity",fe.d=gt),Qe!==fe.l&&E(pe,"border-left",fe.l=Qe),ct!==fe.u&&E(pe,"opacity",fe.u=ct),ft!==fe.c&&E(me,"border-left",fe.c=ft),Ge!==fe.w&&E(me,"opacity",fe.w=Ge),fe},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0}),J(()=>ze.value=I()),J(()=>Pe.value=N()),J(()=>Ue.value=Xr()),J(()=>Oe.value=n()),ge})()};ut(["click","input"]);var I0=w('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span></span><span>'),B0=w('<div class="card p-4 mb-4"style="background:var(--error-bg);border:1px solid var(--error-color)"><div class="flex items-center gap-2"><span style=color:var(--error-color)></span><span style=color:var(--error-color)>Error loading ingresses: '),N0=w('<div class="w-full overflow-x-auto"style=margin:0;padding:0><table class=w-full style=width:100%;table-layout:auto;border-collapse:collapse;margin:0;padding:0><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Class </div></th><th class=whitespace-nowrap>Hosts</th><th class=whitespace-nowrap>Address</th><th class=whitespace-nowrap>Ports</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),O0=w('<div class="flex items-center justify-between p-4 font-mono text-sm"style="background:var(--bg-secondary);borderTop:1px solid var(--border-color)"><div style=color:var(--text-secondary)>Showing <!> - <!> of <!> ingresses</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)> Prev</button><span class="px-3 py-1"style=color:var(--text-primary)>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>Next </button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>Last</button><select class="px-3 py-1 rounded-lg text-sm ml-4"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20 per page</option><option value=50>50 per page</option><option value=100>100 per page</option><option value=200>200 per page'),z0=w("<div style=height:70vh>"),F0=w('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Ingresses</h1><p style=color:var(--text-secondary)>External access to services</p></div><div class="flex items-center gap-3"><select class="px-3 py-2 rounded-lg text-sm"title="Font Size"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=12>12px</option><option value=13>13px</option><option value=14>14px</option><option value=15>15px</option><option value=16>16px</option><option value=17>17px</option><option value=18>18px</option><option value=19>19px</option><option value=20>20px</option></select><select class="px-3 py-2 rounded-lg text-sm"title="Font Family"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=Monospace>Monospace</option><option value=System-ui>System-ui</option><option value=Monaco>Monaco</option><option value=Consolas>Consolas</option><option value=Courier>Courier</option></select><button class=icon-btn title="Refresh Ingresses"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>With Address</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--warning-color)"><span class=text-sm style=color:var(--text-secondary)>Without Address</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid #3b82f6"><span class=text-sm style=color:var(--text-secondary)>Total Hosts</span><span class="text-xl font-bold"style=color:#3b82f6></span></div><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class=w-full style=margin:0;padding:0;border-radius:4px>'),H0=w('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading ingresses...'),j0=w('<tr><td colspan=8 class="text-center py-8"style=color:var(--text-muted)>No ingresses found'),U0=w('<tr><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"><div class="flex flex-wrap gap-1"></div></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;border:none">'),V0=w('<a target=_blank class="text-xs px-2 py-1 rounded hover:opacity-80"style=background:var(--bg-tertiary);color:var(--accent-primary)>'),Ra=w('<div class="spinner mx-auto">');const W0=()=>{const[e,t]=W(""),[r,l]=W("name"),[a,m]=W("asc"),[d,i]=W(1),[n,g]=W(20),[v,p]=W(null),[y,x]=W(!1),[M,b]=W(!1),[o,c]=W(!1),[u,h]=W(parseInt(localStorage.getItem("ingresses-font-size")||"14")),[f,$]=W(localStorage.getItem("ingresses-font-family")||"Monaco"),C=U=>{switch(U){case"Monospace":return"monospace";case"System-ui":return"system-ui";case"Monaco":return"Monaco, monospace";case"Consolas":return"Consolas, monospace";case"Courier":return'"Courier New", monospace';default:return"Monaco, monospace"}},k=U=>{h(U),localStorage.setItem("ingresses-font-size",U.toString())},S=U=>{$(U),localStorage.setItem("ingresses-font-family",U)},L=()=>{const U=hr();if(U.length!==0)return U.length===1,U[0]},P=Fr("ingresses",async()=>{ar(!0);try{const U=L();console.log("[Ingresses] Fetching ingresses with namespace:",U);const Y=await Fe.getIngresses(U);return console.log("[Ingresses] Fetched ingresses:",Y),Y}catch(U){throw console.error("[Ingresses] Error fetching ingresses:",U),Je(` Failed to fetch ingresses: ${U instanceof Error?U.message:"Unknown error"}`,"error"),U}finally{ar(!1)}},{ttl:15e3,backgroundRefresh:!0}),I=et(()=>{const U=P.data();return console.log("[Ingresses] Current data from cache:",U),U||[]}),D=()=>P.refetch();zt(()=>{P.data()||P.refetch()});const[T]=it(()=>(y()||M())&&v()?{name:v().name,ns:v().namespace}:null,async U=>U&&(await Fe.getIngressYAML(U.name,U.ns)).yaml||""),B=async U=>{const Y=v();if(Y)try{await Fe.updateIngress(Y.name,Y.namespace,U),Je(` Ingress ${Y.name} updated successfully`,"success"),b(!1),setTimeout(()=>D(),500),setTimeout(()=>D(),2e3)}catch(V){const X=V instanceof Error?V.message:"Unknown error";throw Je(` Failed to update ingress: ${X}`,"error"),V}},N=U=>{if(!U)return 0;let Y=0;const V=U.match(/(\d+)d/),X=U.match(/(\d+)h/),R=U.match(/(\d+)m/);return V&&(Y+=parseInt(V[1])*24*60),X&&(Y+=parseInt(X[1])*60),R&&(Y+=parseInt(R[1])),Y},O=et(()=>{const U=I();if(!U||!Array.isArray(U))return[];let Y=[...U];const V=e().toLowerCase();V&&(Y=Y.filter(G=>G.name.toLowerCase().includes(V)||G.namespace.toLowerCase().includes(V)||G.hosts?.some(te=>te.toLowerCase().includes(V))));const X=r(),R=a();return Y=[...Y].sort((G,te)=>{let ae=0;switch(X){case"name":ae=G.name.localeCompare(te.name);break;case"namespace":ae=G.namespace.localeCompare(te.namespace);break;case"class":ae=(G.class||"").localeCompare(te.class||"");break;case"age":ae=N(G.age)-N(te.age);break}return R==="asc"?ae:-ae}),Y}),H=et(()=>Math.ceil(O().length/n())),A=et(()=>{const U=(d()-1)*n();return O().slice(U,U+n())}),z=et(()=>{const U=I()||[];return{total:U.length,withAddress:U.filter(Y=>Y.address&&Y.address!=="-").length,withoutAddress:U.filter(Y=>!Y.address||Y.address==="-").length,totalHosts:U.reduce((Y,V)=>Y+(V.hosts?.length||0),0)}}),F=U=>{r()===U?m(Y=>Y==="asc"?"desc":"asc"):(l(U),m("asc")),i(1)},j=U=>(()=>{var Y=I0(),V=Y.firstChild,X=V.nextSibling;return J(R=>{var G=r()===U.field&&a()==="asc"?"var(--accent-primary)":"var(--text-muted)",te=r()===U.field&&a()==="desc"?"var(--accent-primary)":"var(--text-muted)";return G!==R.e&&E(V,"color",R.e=G),te!==R.t&&E(X,"color",R.t=te),R},{e:void 0,t:void 0}),Y})(),q=async U=>{if(confirm(`Are you sure you want to delete ingress "${U.name}" in namespace "${U.namespace}"?`))try{await Fe.deleteIngress(U.name,U.namespace),Je(`Ingress ${U.name} deleted successfully`,"success"),D()}catch(Y){console.error("Failed to delete ingress:",Y),Je(`Failed to delete ingress: ${Y instanceof Error?Y.message:"Unknown error"}`,"error")}};return(()=>{var U=F0(),Y=U.firstChild,V=Y.firstChild,X=V.firstChild;X.nextSibling;var R=V.nextSibling,G=R.firstChild,te=G.nextSibling,ae=te.nextSibling,Q=Y.nextSibling,Z=Q.firstChild,ne=Z.firstChild,$e=ne.nextSibling,re=Z.nextSibling,de=re.firstChild,le=de.nextSibling,xe=re.nextSibling,ye=xe.firstChild,ke=ye.nextSibling,ge=xe.nextSibling,Ce=ge.firstChild,_e=Ce.nextSibling,Me=ge.nextSibling,ve=Me.nextSibling,be=ve.nextSibling,ce=Q.nextSibling;return G.addEventListener("change",Ae=>k(parseInt(Ae.currentTarget.value))),te.addEventListener("change",Ae=>S(Ae.currentTarget.value)),ae.$$click=Ae=>{const se=Ae.currentTarget;se.classList.add("refreshing"),setTimeout(()=>se.classList.remove("refreshing"),500),D()},s($e,()=>z().total),s(le,()=>z().withAddress),s(ke,()=>z().withoutAddress),s(_e,()=>z().totalHosts),ve.$$input=Ae=>{t(Ae.currentTarget.value),i(1)},be.addEventListener("change",Ae=>{g(parseInt(Ae.currentTarget.value)),i(1)}),s(U,_(K,{get when(){return P.error()},get children(){var Ae=B0(),se=Ae.firstChild,oe=se.firstChild,ie=oe.nextSibling;return ie.firstChild,s(ie,()=>P.error()?.message||"Unknown error",null),Ae}}),ce),s(ce,_(K,{get when(){return!P.loading()||P.data()!==void 0},get fallback(){return(()=>{var Ae=H0(),se=Ae.firstChild;return se.nextSibling,Ae})()},get children(){return[(()=>{var Ae=N0(),se=Ae.firstChild,oe=se.firstChild,ie=oe.firstChild,ue=ie.firstChild,he=ue.firstChild;he.firstChild;var Te=ue.nextSibling,ee=Te.firstChild;ee.firstChild;var Se=Te.nextSibling,pe=Se.firstChild;pe.firstChild;var De=Se.nextSibling,Ne=De.nextSibling,me=Ne.nextSibling,He=me.nextSibling,Ze=He.firstChild;Ze.firstChild;var we=oe.nextSibling;return ue.$$click=()=>F("name"),s(he,_(j,{field:"name"}),null),Te.$$click=()=>F("namespace"),s(ee,_(j,{field:"namespace"}),null),Se.$$click=()=>F("class"),s(pe,_(j,{field:"class"}),null),He.$$click=()=>F("age"),s(Ze,_(j,{field:"age"}),null),s(we,_(Xe,{get each(){return A()},get fallback(){return(()=>{var ze=j0();return ze.firstChild,ze})()},children:ze=>(()=>{var Pe=U0(),Ue=Pe.firstChild,Oe=Ue.firstChild,fe=Ue.nextSibling,Le=fe.nextSibling,We=Le.nextSibling,Ee=We.firstChild,Ie=We.nextSibling,qe=Ie.nextSibling,Be=qe.nextSibling,Ke=Be.nextSibling;return Oe.$$click=()=>{p(ze),c(!0)},s(Oe,(()=>{var Ye=Re(()=>ze.name.length>40);return()=>Ye()?ze.name.slice(0,37)+"...":ze.name})()),s(fe,()=>ze.namespace),s(Le,()=>ze.class||"-"),s(Ee,_(Xe,{get each(){return ze.hosts||[]},children:Ye=>(()=>{var lt=V0();return dt(lt,"href",`https://${Ye}`),s(lt,Ye),lt})()})),s(Ie,()=>ze.address||"-"),s(qe,()=>ze.ports),s(Be,()=>ze.age),s(Ke,_(Jt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{p(ze),x(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{p(ze),b(!0)}},{label:"Delete",icon:"delete",onClick:()=>q(ze),variant:"danger",divider:!0}]})),J(Ye=>{var lt=`${u()}px`,gt=`${Math.max(24,u()*1.7)}px`,Qe=`${Math.max(24,u()*1.7)}px`,ct=`${u()}px`,ft=`${Math.max(24,u()*1.7)}px`,Ge=`${Math.max(24,u()*1.7)}px`,st=`${u()}px`,vt=`${Math.max(24,u()*1.7)}px`,at=`${Math.max(24,u()*1.7)}px`,pt=`${u()}px`,xt=`${Math.max(24,u()*1.7)}px`,Et=`${Math.max(24,u()*1.7)}px`,yt=`${u()}px`,Tt=`${Math.max(24,u()*1.7)}px`,Bt=`${Math.max(24,u()*1.7)}px`,Dt=`${u()}px`,At=`${Math.max(24,u()*1.7)}px`,Nt=`${Math.max(24,u()*1.7)}px`,Ve=`${u()}px`,nt=`${Math.max(24,u()*1.7)}px`,rt=`${Math.max(24,u()*1.7)}px`,wt=`${Math.max(24,u()*1.7)}px`,$t=`${Math.max(24,u()*1.7)}px`;return lt!==Ye.e&&E(Ue,"font-size",Ye.e=lt),gt!==Ye.t&&E(Ue,"height",Ye.t=gt),Qe!==Ye.a&&E(Ue,"line-height",Ye.a=Qe),ct!==Ye.o&&E(fe,"font-size",Ye.o=ct),ft!==Ye.i&&E(fe,"height",Ye.i=ft),Ge!==Ye.n&&E(fe,"line-height",Ye.n=Ge),st!==Ye.s&&E(Le,"font-size",Ye.s=st),vt!==Ye.h&&E(Le,"height",Ye.h=vt),at!==Ye.r&&E(Le,"line-height",Ye.r=at),pt!==Ye.d&&E(We,"font-size",Ye.d=pt),xt!==Ye.l&&E(We,"height",Ye.l=xt),Et!==Ye.u&&E(We,"line-height",Ye.u=Et),yt!==Ye.c&&E(Ie,"font-size",Ye.c=yt),Tt!==Ye.w&&E(Ie,"height",Ye.w=Tt),Bt!==Ye.m&&E(Ie,"line-height",Ye.m=Bt),Dt!==Ye.f&&E(qe,"font-size",Ye.f=Dt),At!==Ye.y&&E(qe,"height",Ye.y=At),Nt!==Ye.g&&E(qe,"line-height",Ye.g=Nt),Ve!==Ye.p&&E(Be,"font-size",Ye.p=Ve),nt!==Ye.b&&E(Be,"height",Ye.b=nt),rt!==Ye.T&&E(Be,"line-height",Ye.T=rt),wt!==Ye.A&&E(Ke,"height",Ye.A=wt),$t!==Ye.O&&E(Ke,"line-height",Ye.O=$t),Ye},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0,A:void 0,O:void 0}),Pe})()})),J(ze=>{var Pe=C(f()),Ue=qt();return Pe!==ze.e&&E(se,"font-family",ze.e=Pe),Ue!==ze.t&&E(se,"background",ze.t=Ue),ze},{e:void 0,t:void 0}),Ae})(),_(K,{get when(){return H()>1||O().length>0},get children(){var Ae=O0(),se=Ae.firstChild,oe=se.firstChild,ie=oe.nextSibling,ue=ie.nextSibling,he=ue.nextSibling,Te=he.nextSibling,ee=Te.nextSibling;ee.nextSibling;var Se=se.nextSibling,pe=Se.firstChild,De=pe.nextSibling,Ne=De.nextSibling,me=Ne.firstChild,He=me.nextSibling;He.nextSibling;var Ze=Ne.nextSibling,we=Ze.nextSibling,ze=we.nextSibling;return s(se,()=>(d()-1)*n()+1,ie),s(se,()=>Math.min(d()*n(),O().length),he),s(se,()=>O().length,ee),pe.$$click=()=>i(1),De.$$click=()=>i(Pe=>Math.max(1,Pe-1)),s(Ne,d,He),s(Ne,H,null),Ze.$$click=()=>i(Pe=>Math.min(H(),Pe+1)),we.$$click=()=>i(H()),ze.addEventListener("change",Pe=>{g(parseInt(Pe.currentTarget.value)),i(1)}),J(Pe=>{var Ue=d()===1,Oe=d()===1,fe=d()===H(),Le=d()===H();return Ue!==Pe.e&&(pe.disabled=Pe.e=Ue),Oe!==Pe.t&&(De.disabled=Pe.t=Oe),fe!==Pe.a&&(Ze.disabled=Pe.a=fe),Le!==Pe.o&&(we.disabled=Pe.o=Le),Pe},{e:void 0,t:void 0,a:void 0,o:void 0}),J(()=>ze.value=n()),Ae}})]}})),s(U,_(mt,{get isOpen(){return y()},onClose:()=>x(!1),get title(){return`YAML: ${v()?.name}`},size:"xl",get children(){return _(K,{get when(){return!T.loading},get fallback(){return Ra()},get children(){return _(gr,{get yaml(){return T()||""},get title(){return v()?.name}})}})}}),null),s(U,_(mt,{get isOpen(){return M()},onClose:()=>b(!1),get title(){return`Edit YAML: ${v()?.name}`},size:"xl",get children(){return _(K,{get when(){return!T.loading},get fallback(){return Ra()},get children(){var Ae=z0();return s(Ae,_(Dr,{get yaml(){return T()||""},get title(){return v()?.name},onSave:B,onCancel:()=>b(!1)})),Ae}})}}),null),s(U,_(Sr,{get isOpen(){return o()},onClose:()=>c(!1),resourceType:"ingress",get name(){return v()?.name||""},get namespace(){return v()?.namespace}}),null),J(Ae=>{var se=qt(),oe=`1px solid ${Ar()}`;return se!==Ae.e&&E(ce,"background",Ae.e=se),oe!==Ae.t&&E(ce,"border",Ae.t=oe),Ae},{e:void 0,t:void 0}),J(()=>G.value=u()),J(()=>te.value=f()),J(()=>ve.value=e()),J(()=>be.value=n()),U})()};ut(["click","input"]);var q0=w('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span></span><span>'),K0=w('<div class="card p-4 mb-4"style="background:var(--error-bg);border:1px solid var(--error-color)"><div class="flex items-center gap-2"><span style=color:var(--error-color)></span><span style=color:var(--error-color)>Error loading ConfigMaps: '),Y0=w('<div class="w-full overflow-x-auto"style=margin:0;padding:0><table class=w-full style=width:100%;table-layout:auto;border-collapse:collapse;margin:0;padding:0><thead><tr style=font-weight:900;color:#0ea5e9><th class="cursor-pointer select-none whitespace-nowrap"style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none"><div class="flex items-center gap-1">Namespace </div></th><th class="cursor-pointer select-none whitespace-nowrap"style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none"><div class="flex items-center gap-1">Data </div></th><th class="cursor-pointer select-none whitespace-nowrap"style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none">Actions</th></tr></thead><tbody>'),G0=w('<div class="flex items-center justify-between p-4 font-mono text-sm"style="background:var(--bg-secondary);borderTop:1px solid var(--border-color)"><div style=color:var(--text-secondary)>Showing <!> - <!> of <!> ConfigMaps</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)> Prev</button><span class="px-3 py-1"style=color:var(--text-primary)>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>Next </button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>Last</button><select class="px-3 py-1 rounded-lg text-sm ml-4"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20 per page</option><option value=50>50 per page</option><option value=100>100 per page</option><option value=200>200 per page'),J0=w('<div class=space-y-4><div class="grid grid-cols-2 gap-4"><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Name</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Namespace</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Data Keys</div><div class=font-semibold style=color:var(--accent-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Age</div><div style=color:var(--text-primary)></div></div></div><div class="flex gap-2 pt-4"><button class="btn-primary flex-1">View YAML</button><button class="btn-secondary flex-1">Describe'),X0=w('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>ConfigMaps</h1><p style=color:var(--text-secondary)>Configuration data storage</p></div><div class="flex items-center gap-3"><button class=icon-btn title="Refresh ConfigMaps"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid #8b5cf6"><span class=text-sm style=color:var(--text-secondary)>Filtered</span><span class="text-xl font-bold"style=color:#8b5cf6></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid #22c55e"><span class=text-sm style=color:var(--text-secondary)>Namespaces</span><span class="text-xl font-bold"style=color:#22c55e></span></div><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class=w-full style=margin:0;padding:0;border-radius:4px>'),Z0=w('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading ConfigMaps...'),Q0=w('<tr><td colspan=5 class="text-center py-8"style=color:var(--text-muted)>No ConfigMaps found'),eb=w('<tr><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"><span class="badge badge-info"> keys</span></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;border:none">'),tb=w('<div class="spinner mx-auto">');const rb=()=>{const[e,t]=W(""),[r,l]=W("name"),[a,m]=W("asc"),[d,i]=W(1),[n,g]=W(20),[v,p]=W(null),[y,x]=W(!1),[M,b]=W(!1),[o,c]=W(!1),[u,h]=W(!1),[f,$]=W(parseInt(localStorage.getItem("configmaps-font-size")||"14")),[C,k]=W(localStorage.getItem("configmaps-font-family")||"Monaco"),S=j=>{switch(j){case"Monospace":return"monospace";case"System-ui":return"system-ui";case"Monaco":return"Monaco, monospace";case"Consolas":return"Consolas, monospace";case"Courier":return'"Courier New", monospace';default:return"Monaco, monospace"}},L=()=>{const j=hr();if(j.length!==0)return j.length===1,j[0]},P=Fr("configmaps",async()=>{ar(!0);try{const j=L();return await Fe.getConfigMaps(j)}catch(j){throw console.error("[ConfigMaps] Error fetching configmaps:",j),Je(` Failed to fetch ConfigMaps: ${j instanceof Error?j.message:"Unknown error"}`,"error"),j}finally{ar(!1)}},{ttl:15e3,backgroundRefresh:!0}),I=et(()=>P.data()||[]),D=()=>P.refetch();zt(()=>{P.data()||P.refetch()});const[T]=it(()=>(y()||M())&&v()?{name:v().name,ns:v().namespace}:null,async j=>j&&(await Fe.getConfigMapYAML(j.name,j.ns)).yaml||""),B=j=>{if(!j)return 0;let q=0;const U=j.match(/(\d+)d/),Y=j.match(/(\d+)h/),V=j.match(/(\d+)m/);return U&&(q+=parseInt(U[1])*24*60),Y&&(q+=parseInt(Y[1])*60),V&&(q+=parseInt(V[1])),q},N=et(()=>{let j=I()||[];const q=e().toLowerCase();q&&(j=j.filter(V=>V.name.toLowerCase().includes(q)||V.namespace.toLowerCase().includes(q)));const U=r(),Y=a();return j=[...j].sort((V,X)=>{let R=0;switch(U){case"name":R=V.name.localeCompare(X.name);break;case"namespace":R=V.namespace.localeCompare(X.namespace);break;case"data":R=V.data-X.data;break;case"age":R=B(V.age)-B(X.age);break}return Y==="asc"?R:-R}),j}),O=et(()=>Math.ceil(N().length/n())),H=et(()=>{const j=(d()-1)*n();return N().slice(j,j+n())}),A=j=>{r()===j?m(q=>q==="asc"?"desc":"asc"):(l(j),m("asc")),i(1)},z=j=>(()=>{var q=q0(),U=q.firstChild,Y=U.nextSibling;return J(V=>{var X=r()===j.field&&a()==="asc"?"var(--accent-primary)":"var(--text-muted)",R=r()===j.field&&a()==="desc"?"var(--accent-primary)":"var(--text-muted)";return X!==V.e&&E(U,"color",V.e=X),R!==V.t&&E(Y,"color",V.t=R),V},{e:void 0,t:void 0}),q})(),F=async j=>{if(confirm(`Are you sure you want to delete ConfigMap "${j.name}" in namespace "${j.namespace}"?`))try{await Fe.deleteConfigMap(j.name,j.namespace),Je(`ConfigMap ${j.name} deleted successfully`,"success"),D()}catch(q){console.error("Failed to delete ConfigMap:",q),Je(`Failed to delete ConfigMap: ${q instanceof Error?q.message:"Unknown error"}`,"error")}};return(()=>{var j=X0(),q=j.firstChild,U=q.firstChild,Y=U.firstChild;Y.nextSibling;var V=U.nextSibling,X=V.firstChild,R=q.nextSibling,G=R.firstChild,te=G.firstChild,ae=te.nextSibling,Q=G.nextSibling,Z=Q.firstChild,ne=Z.nextSibling,$e=Q.nextSibling,re=$e.firstChild,de=re.nextSibling,le=$e.nextSibling,xe=le.nextSibling,ye=xe.nextSibling,ke=R.nextSibling;return X.$$click=ge=>{const Ce=ge.currentTarget;Ce.classList.add("refreshing"),setTimeout(()=>Ce.classList.remove("refreshing"),500),D()},s(ae,()=>(I()||[]).length),s(ne,()=>N().length),s(de,()=>new Set((I()||[]).map(ge=>ge.namespace)).size),xe.$$input=ge=>{t(ge.currentTarget.value),i(1)},ye.addEventListener("change",ge=>{g(parseInt(ge.currentTarget.value)),i(1)}),s(j,_(K,{get when(){return P.error()},get children(){var ge=K0(),Ce=ge.firstChild,_e=Ce.firstChild,Me=_e.nextSibling;return Me.firstChild,s(Me,()=>P.error()?.message||"Unknown error",null),ge}}),ke),s(ke,_(K,{get when(){return!P.loading()||P.data()!==void 0},get fallback(){return(()=>{var ge=Z0(),Ce=ge.firstChild;return Ce.nextSibling,ge})()},get children(){return[(()=>{var ge=Y0(),Ce=ge.firstChild,_e=Ce.firstChild,Me=_e.firstChild,ve=Me.firstChild,be=ve.firstChild;be.firstChild;var ce=ve.nextSibling,Ae=ce.firstChild;Ae.firstChild;var se=ce.nextSibling,oe=se.firstChild;oe.firstChild;var ie=se.nextSibling,ue=ie.firstChild;ue.firstChild;var he=ie.nextSibling,Te=_e.nextSibling;return ve.$$click=()=>A("name"),s(be,_(z,{field:"name"}),null),ce.$$click=()=>A("namespace"),s(Ae,_(z,{field:"namespace"}),null),se.$$click=()=>A("data"),s(oe,_(z,{field:"data"}),null),ie.$$click=()=>A("age"),s(ue,_(z,{field:"age"}),null),s(Te,_(Xe,{get each(){return H()},get fallback(){return(()=>{var ee=Q0();return ee.firstChild,ee})()},children:ee=>(()=>{var Se=eb(),pe=Se.firstChild,De=pe.firstChild,Ne=pe.nextSibling,me=Ne.nextSibling,He=me.firstChild,Ze=He.firstChild,we=me.nextSibling,ze=we.nextSibling;return De.$$click=()=>{p(ee),h(!0)},s(De,(()=>{var Pe=Re(()=>ee.name.length>40);return()=>Pe()?ee.name.slice(0,37)+"...":ee.name})()),s(Ne,()=>ee.namespace),s(He,()=>ee.data,Ze),s(we,()=>ee.age),s(ze,_(Jt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{p(ee),x(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{p(ee),b(!0)}},{label:"Delete",icon:"delete",onClick:()=>F(ee),variant:"danger",divider:!0}]})),J(Pe=>{var Ue=`${f()}px`,Oe=`${Math.max(24,f()*1.7)}px`,fe=`${Math.max(24,f()*1.7)}px`,Le=`${f()}px`,We=`${Math.max(24,f()*1.7)}px`,Ee=`${Math.max(24,f()*1.7)}px`,Ie=`${f()}px`,qe=`${Math.max(24,f()*1.7)}px`,Be=`${Math.max(24,f()*1.7)}px`,Ke=`${f()}px`,Ye=`${Math.max(24,f()*1.7)}px`,lt=`${Math.max(24,f()*1.7)}px`,gt=`${Math.max(24,f()*1.7)}px`,Qe=`${Math.max(24,f()*1.7)}px`;return Ue!==Pe.e&&E(pe,"font-size",Pe.e=Ue),Oe!==Pe.t&&E(pe,"height",Pe.t=Oe),fe!==Pe.a&&E(pe,"line-height",Pe.a=fe),Le!==Pe.o&&E(Ne,"font-size",Pe.o=Le),We!==Pe.i&&E(Ne,"height",Pe.i=We),Ee!==Pe.n&&E(Ne,"line-height",Pe.n=Ee),Ie!==Pe.s&&E(me,"font-size",Pe.s=Ie),qe!==Pe.h&&E(me,"height",Pe.h=qe),Be!==Pe.r&&E(me,"line-height",Pe.r=Be),Ke!==Pe.d&&E(we,"font-size",Pe.d=Ke),Ye!==Pe.l&&E(we,"height",Pe.l=Ye),lt!==Pe.u&&E(we,"line-height",Pe.u=lt),gt!==Pe.c&&E(ze,"height",Pe.c=gt),Qe!==Pe.w&&E(ze,"line-height",Pe.w=Qe),Pe},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0}),Se})()})),J(ee=>{var Se=S(C()),pe=qt(),De=`${Math.max(24,f()*1.7)}px`,Ne=S(C()),me=`${f()}px`,He=`${Math.max(24,f()*1.7)}px`,Ze=`${f()}px`,we=`${Math.max(24,f()*1.7)}px`,ze=`${Math.max(24,f()*1.7)}px`,Pe=`${f()}px`,Ue=`${Math.max(24,f()*1.7)}px`,Oe=`${Math.max(24,f()*1.7)}px`,fe=`${f()}px`,Le=`${Math.max(24,f()*1.7)}px`,We=`${Math.max(24,f()*1.7)}px`,Ee=`${f()}px`,Ie=`${Math.max(24,f()*1.7)}px`,qe=`${Math.max(24,f()*1.7)}px`,Be=`${f()}px`,Ke=`${Math.max(24,f()*1.7)}px`,Ye=`${Math.max(24,f()*1.7)}px`;return Se!==ee.e&&E(Ce,"font-family",ee.e=Se),pe!==ee.t&&E(Ce,"background",ee.t=pe),De!==ee.a&&E(Me,"height",ee.a=De),Ne!==ee.o&&E(Me,"font-family",ee.o=Ne),me!==ee.i&&E(Me,"font-size",ee.i=me),He!==ee.n&&E(Me,"line-height",ee.n=He),Ze!==ee.s&&E(ve,"font-size",ee.s=Ze),we!==ee.h&&E(ve,"height",ee.h=we),ze!==ee.r&&E(ve,"line-height",ee.r=ze),Pe!==ee.d&&E(ce,"font-size",ee.d=Pe),Ue!==ee.l&&E(ce,"height",ee.l=Ue),Oe!==ee.u&&E(ce,"line-height",ee.u=Oe),fe!==ee.c&&E(se,"font-size",ee.c=fe),Le!==ee.w&&E(se,"height",ee.w=Le),We!==ee.m&&E(se,"line-height",ee.m=We),Ee!==ee.f&&E(ie,"font-size",ee.f=Ee),Ie!==ee.y&&E(ie,"height",ee.y=Ie),qe!==ee.g&&E(ie,"line-height",ee.g=qe),Be!==ee.p&&E(he,"font-size",ee.p=Be),Ke!==ee.b&&E(he,"height",ee.b=Ke),Ye!==ee.T&&E(he,"line-height",ee.T=Ye),ee},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0}),ge})(),_(K,{get when(){return O()>1||N().length>0},get children(){var ge=G0(),Ce=ge.firstChild,_e=Ce.firstChild,Me=_e.nextSibling,ve=Me.nextSibling,be=ve.nextSibling,ce=be.nextSibling,Ae=ce.nextSibling;Ae.nextSibling;var se=Ce.nextSibling,oe=se.firstChild,ie=oe.nextSibling,ue=ie.nextSibling,he=ue.firstChild,Te=he.nextSibling;Te.nextSibling;var ee=ue.nextSibling,Se=ee.nextSibling,pe=Se.nextSibling;return s(Ce,()=>(d()-1)*n()+1,Me),s(Ce,()=>Math.min(d()*n(),N().length),be),s(Ce,()=>N().length,Ae),oe.$$click=()=>i(1),ie.$$click=()=>i(De=>Math.max(1,De-1)),s(ue,d,Te),s(ue,O,null),ee.$$click=()=>i(De=>Math.min(O(),De+1)),Se.$$click=()=>i(O()),pe.addEventListener("change",De=>{g(parseInt(De.currentTarget.value)),i(1)}),J(De=>{var Ne=d()===1,me=d()===1,He=d()===O(),Ze=d()===O();return Ne!==De.e&&(oe.disabled=De.e=Ne),me!==De.t&&(ie.disabled=De.t=me),He!==De.a&&(ee.disabled=De.a=He),Ze!==De.o&&(Se.disabled=De.o=Ze),De},{e:void 0,t:void 0,a:void 0,o:void 0}),J(()=>pe.value=n()),ge}})]}})),s(j,_(mt,{get isOpen(){return o()},onClose:()=>c(!1),get title(){return`ConfigMap: ${v()?.name}`},size:"lg",get children(){return _(K,{get when(){return v()},get children(){var ge=J0(),Ce=ge.firstChild,_e=Ce.firstChild,Me=_e.firstChild,ve=Me.nextSibling,be=_e.nextSibling,ce=be.firstChild,Ae=ce.nextSibling,se=be.nextSibling,oe=se.firstChild,ie=oe.nextSibling,ue=se.nextSibling,he=ue.firstChild,Te=he.nextSibling,ee=Ce.nextSibling,Se=ee.firstChild,pe=Se.nextSibling;return s(ve,()=>v()?.name),s(Ae,()=>v()?.namespace),s(ie,()=>v()?.data),s(Te,()=>v()?.age),Se.$$click=()=>{c(!1),x(!0)},pe.$$click=()=>{c(!1),h(!0)},ge}})}}),null),s(j,_(mt,{get isOpen(){return y()},onClose:()=>x(!1),get title(){return`ConfigMap: ${v()?.name}`},size:"xl",get children(){return _(K,{get when(){return!T.loading},get fallback(){return tb()},get children(){return _(gr,{get yaml(){return T()||""},get title(){return v()?.name}})}})}}),null),s(j,_(Sr,{get isOpen(){return u()},onClose:()=>h(!1),resourceType:"configmap",get name(){return v()?.name||""},get namespace(){return v()?.namespace}}),null),J(ge=>{var Ce=qt(),_e=`1px solid ${Ar()}`;return Ce!==ge.e&&E(ke,"background",ge.e=Ce),_e!==ge.t&&E(ke,"border",ge.t=_e),ge},{e:void 0,t:void 0}),J(()=>xe.value=e()),J(()=>ye.value=n()),j})()};ut(["click","input"]);var sb=w('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span></span><span>'),ib=w('<div class="card p-4 mb-4"style="background:var(--error-bg);border:1px solid var(--error-color)"><div class="flex items-center gap-2"><span style=color:var(--error-color)></span><span style=color:var(--error-color)>Error loading Secrets: '),nb=w('<div class="w-full overflow-x-auto"style=margin:0;padding:0><table class=w-full style=width:100%;table-layout:auto;border-collapse:collapse;margin:0;padding:0><thead><tr style=font-weight:900;color:#0ea5e9><th class="cursor-pointer select-none whitespace-nowrap"style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none"><div class="flex items-center gap-1">Namespace </div></th><th class="cursor-pointer select-none whitespace-nowrap"style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none"><div class="flex items-center gap-1">Type </div></th><th class="cursor-pointer select-none whitespace-nowrap"style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none"><div class="flex items-center gap-1">Data </div></th><th class="cursor-pointer select-none whitespace-nowrap"style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap style="padding:0 8px;text-align:left;font-weight:900;color:#0ea5e9;border:none">Actions</th></tr></thead><tbody>'),lb=w('<div class="flex items-center justify-between p-4 font-mono text-sm"style="background:var(--bg-secondary);borderTop:1px solid var(--border-color)"><div style=color:var(--text-secondary)>Showing <!> - <!> of <!> Secrets</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)> Prev</button><span class="px-3 py-1"style=color:var(--text-primary)>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>Next </button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>Last</button><select class="px-3 py-1 rounded-lg text-sm ml-4"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20 per page</option><option value=50>50 per page</option><option value=100>100 per page</option><option value=200>200 per page'),ob=w("<div style=height:70vh>"),ab=w('<div class=space-y-4 style=background:var(--bg-primary);minHeight:100%><div class="flex items-center justify-between"><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Secrets</h1><div class="flex items-center gap-3"><input type=text placeholder="Search secrets..."class="px-3 py-2 rounded-lg bg-[var(--bg-alt)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent-primary)]"style="border:1px solid var(--border-color);color:var(--text-primary)"><button class="px-3 py-2 rounded-lg bg-[var(--accent-primary)] text-white text-sm font-medium hover:opacity-90 transition-opacity">Refresh</button></div></div><div class=w-full style=margin:0;padding:0;border-radius:4px>'),cb=w('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading Secrets...'),db=w('<tr><td colspan=6 class="text-center py-8"style=color:var(--text-muted)>No secrets found'),ub=w('<tr><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"><span></span></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;border:none">'),Pa=w('<div class="spinner mx-auto">'),hb=w("<div class=space-y-4>"),gb=w('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading secret data...'),vb=w('<div class="p-4 text-center"style=color:var(--text-muted)>No data fields found in this secret'),fb=w('<svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21">'),pb=w('<div class="p-4 rounded-lg border"style=background:var(--bg-secondary);borderColor:var(--border-color)><div class="flex items-center justify-between mb-2"><span class="font-semibold text-sm"style=color:var(--text-primary)></span><div class="flex items-center gap-2"><button class="p-1.5 rounded hover:bg-[var(--bg-tertiary)] transition-colors"></button><button class="px-3 py-1.5 rounded text-xs font-medium flex items-center gap-1.5 transition-colors"title="Copy decoded value to clipboard"style=background:var(--accent-primary);color:white><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy Decoded</button></div></div><div class="p-3 rounded font-mono text-sm overflow-x-auto"style=background:var(--bg-tertiary);wordBreak:break-all;whiteSpace:pre-wrap>'),mb=w('<svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z">');const bb=()=>{const[e,t]=W(""),[r,l]=W("name"),[a,m]=W("asc"),[d,i]=W(1),[n,g]=W(20),[v,p]=W(null),[y,x]=W(!1),[M,b]=W(!1),[o,c]=W(!1),[u,h]=W(!1),[f,$]=W(parseInt(localStorage.getItem("secrets-font-size")||"14")),[C,k]=W(localStorage.getItem("secrets-font-family")||"Monaco"),S=G=>{switch(G){case"Monospace":return"monospace";case"System-ui":return"system-ui";case"Monaco":return"Monaco, monospace";case"Consolas":return"Consolas, monospace";case"Courier":return'"Courier New", monospace';default:return"Monaco, monospace"}},[L,P]=W(new Set),I=G=>{const te=new Set(L());te.has(G)?te.delete(G):te.add(G),P(te)},D=G=>{try{return atob(G)}catch{return G}},T=G=>{const te=D(G);navigator.clipboard.writeText(te).then(()=>{Je("Decoded value copied to clipboard","success")}).catch(()=>{Je("Failed to copy to clipboard","error")})},B=()=>{const G=hr();if(G.length!==0)return G.length===1,G[0]},N=Fr("secrets",async()=>{ar(!0);try{const G=B();return await Fe.getSecrets(G)}catch(G){throw console.error("[Secrets] Error fetching secrets:",G),Je(` Failed to fetch Secrets: ${G instanceof Error?G.message:"Unknown error"}`,"error"),G}finally{ar(!1)}},{ttl:15e3,backgroundRefresh:!0}),O=et(()=>N.data()||[]),H=()=>N.refetch();zt(()=>{N.data()||N.refetch()});const[A]=it(()=>(y()||M())&&v()?{name:v().name,ns:v().namespace}:null,async G=>G&&(await Fe.getSecretYAML(G.name,G.ns)).yaml||""),z=async G=>{const te=v();if(te)try{await Fe.updateSecret(te.name,te.namespace,G),Je(` Secret ${te.name} updated successfully`,"success"),b(!1),setTimeout(()=>H(),500),setTimeout(()=>H(),2e3)}catch(ae){const Q=ae instanceof Error?ae.message:"Unknown error";throw Je(` Failed to update secret: ${Q}`,"error"),ae}},F=G=>{if(!G)return 0;let te=0;const ae=G.match(/(\d+)d/),Q=G.match(/(\d+)h/),Z=G.match(/(\d+)m/);return ae&&(te+=parseInt(ae[1])*24*60),Q&&(te+=parseInt(Q[1])*60),Z&&(te+=parseInt(Z[1])),te},j=et(()=>{let G=O()||[];const te=e().toLowerCase();te&&(G=G.filter(Z=>Z.name.toLowerCase().includes(te)||Z.namespace.toLowerCase().includes(te)||Z.type.toLowerCase().includes(te)));const ae=r(),Q=a();return G=[...G].sort((Z,ne)=>{let $e=0;switch(ae){case"name":$e=Z.name.localeCompare(ne.name);break;case"namespace":$e=Z.namespace.localeCompare(ne.namespace);break;case"type":$e=Z.type.localeCompare(ne.type);break;case"data":$e=Z.data-ne.data;break;case"age":$e=F(Z.age)-F(ne.age);break}return Q==="asc"?$e:-$e}),G}),q=et(()=>Math.ceil(j().length/n())),U=et(()=>{const G=(d()-1)*n();return j().slice(G,G+n())}),Y=G=>{r()===G?m(te=>te==="asc"?"desc":"asc"):(l(G),m("asc")),i(1)},V=G=>(()=>{var te=sb(),ae=te.firstChild,Q=ae.nextSibling;return J(Z=>{var ne=r()===G.field&&a()==="asc"?"var(--accent-primary)":"var(--text-muted)",$e=r()===G.field&&a()==="desc"?"var(--accent-primary)":"var(--text-muted)";return ne!==Z.e&&E(ae,"color",Z.e=ne),$e!==Z.t&&E(Q,"color",Z.t=$e),Z},{e:void 0,t:void 0}),te})(),X=async G=>{if(confirm(`Are you sure you want to delete secret "${G.name}" in namespace "${G.namespace}"?`))try{await Fe.deleteSecret(G.name,G.namespace),Je(`Secret ${G.name} deleted successfully`,"success"),H()}catch(te){console.error("Failed to delete secret:",te),Je(`Failed to delete secret: ${te instanceof Error?te.message:"Unknown error"}`,"error")}},R=G=>G.includes("tls")?"badge-success":G.includes("Opaque")?"badge-default":G.includes("helm")?"badge-info":"badge-default";return(()=>{var G=ab(),te=G.firstChild,ae=te.firstChild,Q=ae.nextSibling,Z=Q.firstChild,ne=Z.nextSibling,$e=te.nextSibling;return Z.$$input=re=>t(re.currentTarget.value),ne.$$click=()=>H(),s(G,_(K,{get when(){return N.error()},get children(){var re=ib(),de=re.firstChild,le=de.firstChild,xe=le.nextSibling;return xe.firstChild,s(xe,()=>N.error()?.message||"Unknown error",null),re}}),$e),s($e,_(K,{get when(){return!N.loading()||N.data()!==void 0},get fallback(){return(()=>{var re=cb(),de=re.firstChild;return de.nextSibling,re})()},get children(){return[(()=>{var re=nb(),de=re.firstChild,le=de.firstChild,xe=le.firstChild,ye=xe.firstChild,ke=ye.firstChild;ke.firstChild;var ge=ye.nextSibling,Ce=ge.firstChild;Ce.firstChild;var _e=ge.nextSibling,Me=_e.firstChild;Me.firstChild;var ve=_e.nextSibling,be=ve.firstChild;be.firstChild;var ce=ve.nextSibling,Ae=ce.firstChild;Ae.firstChild;var se=ce.nextSibling,oe=le.nextSibling;return ye.$$click=()=>Y("name"),s(ke,_(V,{field:"name"}),null),ge.$$click=()=>Y("namespace"),s(Ce,_(V,{field:"namespace"}),null),_e.$$click=()=>Y("type"),s(Me,_(V,{field:"type"}),null),ve.$$click=()=>Y("data"),s(be,_(V,{field:"data"}),null),ce.$$click=()=>Y("age"),s(Ae,_(V,{field:"age"}),null),s(oe,_(Xe,{get each(){return U()},get fallback(){return(()=>{var ie=db();return ie.firstChild,ie})()},children:ie=>(()=>{var ue=ub(),he=ue.firstChild,Te=he.firstChild,ee=he.nextSibling,Se=ee.nextSibling,pe=Se.firstChild,De=Se.nextSibling,Ne=De.nextSibling,me=Ne.nextSibling;return Te.$$click=()=>{p(ie),c(!0)},s(Te,(()=>{var He=Re(()=>ie.name.length>40);return()=>He()?ie.name.slice(0,37)+"...":ie.name})()),s(ee,()=>ie.namespace),s(pe,()=>ie.type),s(De,()=>ie.data),s(Ne,()=>ie.age),s(me,_(Jt,{actions:[{label:"View Data",icon:"describe",onClick:()=>{p(ie),c(!0)}},{label:"View YAML",icon:"yaml",onClick:()=>{p(ie),x(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{p(ie),b(!0)}},{label:"Describe",icon:"describe",onClick:()=>{p(ie),h(!0)}},{label:"Delete",icon:"delete",onClick:()=>X(ie),variant:"danger",divider:!0}]})),J(He=>{var Ze=`${f()}px`,we=`${Math.max(24,f()*1.7)}px`,ze=`${Math.max(24,f()*1.7)}px`,Pe=`${f()}px`,Ue=`${Math.max(24,f()*1.7)}px`,Oe=`${Math.max(24,f()*1.7)}px`,fe=`${f()}px`,Le=`${Math.max(24,f()*1.7)}px`,We=`${Math.max(24,f()*1.7)}px`,Ee=`badge ${R(ie.type)}`,Ie=`${f()}px`,qe=`${Math.max(24,f()*1.7)}px`,Be=`${Math.max(24,f()*1.7)}px`,Ke=`${f()}px`,Ye=`${Math.max(24,f()*1.7)}px`,lt=`${Math.max(24,f()*1.7)}px`,gt=`${Math.max(24,f()*1.7)}px`,Qe=`${Math.max(24,f()*1.7)}px`;return Ze!==He.e&&E(he,"font-size",He.e=Ze),we!==He.t&&E(he,"height",He.t=we),ze!==He.a&&E(he,"line-height",He.a=ze),Pe!==He.o&&E(ee,"font-size",He.o=Pe),Ue!==He.i&&E(ee,"height",He.i=Ue),Oe!==He.n&&E(ee,"line-height",He.n=Oe),fe!==He.s&&E(Se,"font-size",He.s=fe),Le!==He.h&&E(Se,"height",He.h=Le),We!==He.r&&E(Se,"line-height",He.r=We),Ee!==He.d&&tt(pe,He.d=Ee),Ie!==He.l&&E(De,"font-size",He.l=Ie),qe!==He.u&&E(De,"height",He.u=qe),Be!==He.c&&E(De,"line-height",He.c=Be),Ke!==He.w&&E(Ne,"font-size",He.w=Ke),Ye!==He.m&&E(Ne,"height",He.m=Ye),lt!==He.f&&E(Ne,"line-height",He.f=lt),gt!==He.y&&E(me,"height",He.y=gt),Qe!==He.g&&E(me,"line-height",He.g=Qe),He},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0}),ue})()})),J(ie=>{var ue=S(C()),he=qt(),Te=`${Math.max(24,f()*1.7)}px`,ee=S(C()),Se=`${f()}px`,pe=`${Math.max(24,f()*1.7)}px`,De=`${f()}px`,Ne=`${Math.max(24,f()*1.7)}px`,me=`${Math.max(24,f()*1.7)}px`,He=`${f()}px`,Ze=`${Math.max(24,f()*1.7)}px`,we=`${Math.max(24,f()*1.7)}px`,ze=`${f()}px`,Pe=`${Math.max(24,f()*1.7)}px`,Ue=`${Math.max(24,f()*1.7)}px`,Oe=`${f()}px`,fe=`${Math.max(24,f()*1.7)}px`,Le=`${Math.max(24,f()*1.7)}px`,We=`${f()}px`,Ee=`${Math.max(24,f()*1.7)}px`,Ie=`${Math.max(24,f()*1.7)}px`,qe=`${f()}px`,Be=`${Math.max(24,f()*1.7)}px`,Ke=`${Math.max(24,f()*1.7)}px`;return ue!==ie.e&&E(de,"font-family",ie.e=ue),he!==ie.t&&E(de,"background",ie.t=he),Te!==ie.a&&E(xe,"height",ie.a=Te),ee!==ie.o&&E(xe,"font-family",ie.o=ee),Se!==ie.i&&E(xe,"font-size",ie.i=Se),pe!==ie.n&&E(xe,"line-height",ie.n=pe),De!==ie.s&&E(ye,"font-size",ie.s=De),Ne!==ie.h&&E(ye,"height",ie.h=Ne),me!==ie.r&&E(ye,"line-height",ie.r=me),He!==ie.d&&E(ge,"font-size",ie.d=He),Ze!==ie.l&&E(ge,"height",ie.l=Ze),we!==ie.u&&E(ge,"line-height",ie.u=we),ze!==ie.c&&E(_e,"font-size",ie.c=ze),Pe!==ie.w&&E(_e,"height",ie.w=Pe),Ue!==ie.m&&E(_e,"line-height",ie.m=Ue),Oe!==ie.f&&E(ve,"font-size",ie.f=Oe),fe!==ie.y&&E(ve,"height",ie.y=fe),Le!==ie.g&&E(ve,"line-height",ie.g=Le),We!==ie.p&&E(ce,"font-size",ie.p=We),Ee!==ie.b&&E(ce,"height",ie.b=Ee),Ie!==ie.T&&E(ce,"line-height",ie.T=Ie),qe!==ie.A&&E(se,"font-size",ie.A=qe),Be!==ie.O&&E(se,"height",ie.O=Be),Ke!==ie.I&&E(se,"line-height",ie.I=Ke),ie},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0,A:void 0,O:void 0,I:void 0}),re})(),_(K,{get when(){return q()>1||j().length>0},get children(){var re=lb(),de=re.firstChild,le=de.firstChild,xe=le.nextSibling,ye=xe.nextSibling,ke=ye.nextSibling,ge=ke.nextSibling,Ce=ge.nextSibling;Ce.nextSibling;var _e=de.nextSibling,Me=_e.firstChild,ve=Me.nextSibling,be=ve.nextSibling,ce=be.firstChild,Ae=ce.nextSibling;Ae.nextSibling;var se=be.nextSibling,oe=se.nextSibling,ie=oe.nextSibling;return s(de,()=>(d()-1)*n()+1,xe),s(de,()=>Math.min(d()*n(),j().length),ke),s(de,()=>j().length,Ce),Me.$$click=()=>i(1),ve.$$click=()=>i(ue=>Math.max(1,ue-1)),s(be,d,Ae),s(be,q,null),se.$$click=()=>i(ue=>Math.min(q(),ue+1)),oe.$$click=()=>i(q()),ie.addEventListener("change",ue=>{g(parseInt(ue.currentTarget.value)),i(1)}),J(ue=>{var he=d()===1,Te=d()===1,ee=d()===q(),Se=d()===q();return he!==ue.e&&(Me.disabled=ue.e=he),Te!==ue.t&&(ve.disabled=ue.t=Te),ee!==ue.a&&(se.disabled=ue.a=ee),Se!==ue.o&&(oe.disabled=ue.o=Se),ue},{e:void 0,t:void 0,a:void 0,o:void 0}),J(()=>ie.value=n()),re}})]}})),s(G,_(mt,{get isOpen(){return y()},onClose:()=>x(!1),get title(){return`YAML: ${v()?.name}`},size:"xl",get children(){return _(K,{get when(){return!A.loading},get fallback(){return Pa()},get children(){return _(gr,{get yaml(){return A()||""},get title(){return v()?.name}})}})}}),null),s(G,_(mt,{get isOpen(){return M()},onClose:()=>b(!1),get title(){return`Edit YAML: ${v()?.name}`},size:"xl",get children(){return _(K,{get when(){return!A.loading},get fallback(){return Pa()},get children(){var re=ob();return s(re,_(Dr,{get yaml(){return A()||""},get title(){return v()?.name},onSave:z,onCancel:()=>b(!1)})),re}})}}),null),s(G,_(Sr,{get isOpen(){return u()},onClose:()=>h(!1),resourceType:"secret",get name(){return v()?.name||""},get namespace(){return v()?.namespace||""}}),null),s(G,_(mt,{get isOpen(){return o()},onClose:()=>c(!1),get title(){return`Secret Data: ${v()?.name}`},size:"xl",get children(){return _(K,{get when(){return v()},get children(){return(()=>{const[re]=it(()=>v()?{name:v().name,ns:v().namespace}:null,async de=>{if(!de)return null;const le=await Fe.getSecretYAML(de.name,de.ns);try{const xe=le.yaml.match(/data:\s*([\s\S]*?)(?=\n\w|$)/);if(xe){const ye=xe[1],ke={},ge=ye.split(`
`);for(const Ce of ge){const _e=Ce.match(/^\s+([^:]+):\s*(.+)$/);_e&&(ke[_e[1].trim()]=_e[2].trim())}return ke}}catch(xe){console.error("Failed to parse secret data:",xe)}return{}});return _(K,{get when(){return!re.loading},get fallback(){return(()=>{var de=gb(),le=de.firstChild;return le.nextSibling,de})()},get children(){var de=hb();return s(de,_(K,{get when(){return Re(()=>!!re())()&&Object.keys(re()).length>0},get fallback(){return vb()},get children(){return _(Xe,{get each(){return Object.entries(re())},children:([le,xe])=>{const ye=`${v().name}/${le}`,ke=L().has(ye),ge=D(xe);return(()=>{var Ce=pb(),_e=Ce.firstChild,Me=_e.firstChild,ve=Me.nextSibling,be=ve.firstChild,ce=be.nextSibling,Ae=_e.nextSibling;return s(Me,le),be.$$click=()=>I(ye),dt(be,"title",ke?"Hide value":"Show value"),s(be,_(K,{when:ke,get fallback(){return mb()},get children(){return fb()}})),ce.$$click=()=>T(xe),E(Ae,"color",ke?"var(--text-primary)":"var(--text-muted)"),s(Ae,ke?ge:""),Ce})()}})}})),de}})})()}})}}),null),J(re=>{var de=qt(),le=`1px solid ${Ar()}`;return de!==re.e&&E($e,"background",re.e=de),le!==re.t&&E($e,"border",re.t=le),re},{e:void 0,t:void 0}),G})()};ut(["input","click"]);function Ls(e,t="#0ea5e9"){return{padding:"0 8px","text-align":"left",color:t,"font-weight":"900","font-size":`${e}px`,height:`${Math.max(24,e*1.7)}px`,"line-height":`${Math.max(24,e*1.7)}px`,border:"none"}}function er(e){return{padding:"0 8px","text-align":"left","font-weight":"900",color:"#0ea5e9","font-size":`${e}px`,border:"none"}}function al(e){return{height:`${Math.max(24,e*1.7)}px`,"line-height":`${Math.max(24,e*1.7)}px`}}const xb="#0ea5e9";var yb=w('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span>&#9650;</span><span>&#9660;'),_b=w('<div class="w-full overflow-x-auto"style=margin:0;padding:0><table class=w-full style=width:100%;table-layout:auto;border-collapse:collapse;margin:0;padding:0><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class=whitespace-nowrap>Secret</th><th class=whitespace-nowrap>Issuer</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Status </div></th><th class=whitespace-nowrap>Expires</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),$b=w('<div class="flex items-center justify-between p-4 font-mono text-sm"style="background:var(--bg-secondary);borderTop:1px solid var(--border-color)"><div style=color:var(--text-secondary)>Showing <!> - <!> of <!> certificates</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)> Prev</button><span class="px-3 py-1"style=color:var(--text-primary)>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>Next </button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>Last</button><select class="px-3 py-1 rounded-lg text-sm ml-4"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20 per page</option><option value=50>50 per page</option><option value=100>100 per page</option><option value=200>200 per page'),wb=w("<div style=height:70vh>"),Sb=w('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Certificates</h1><p style=color:var(--text-secondary)>TLS certificates managed by cert-manager</p></div><div class="flex items-center gap-3"><button class=icon-btn title="Refresh Certificates"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Ready</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--warning-color)"><span class=text-sm style=color:var(--text-secondary)>Pending</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--error-color)"><span class=text-sm style=color:var(--text-secondary)>Failed</span><span class="text-xl font-bold"style=color:var(--error-color)></span></div><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class=w-full style=margin:0;padding:0;border-radius:4px>'),Cb=w('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading certificates...'),kb=w('<tr><td colspan=8 class="text-center py-8"style=color:var(--text-muted)>No certificates found. Make sure cert-manager is installed.'),Mb=w('<tr><td><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td></td><td><code class="px-2 py-1 rounded text-xs"style=background:var(--bg-tertiary)></code></td><td></td><td><span></span></td><td></td><td></td><td style="padding:0 8px;text-align:left;border:none">'),Ia=w('<div class="spinner mx-auto">');const Ab=()=>{const[e,t]=W(""),[r,l]=W("name"),[a,m]=W("asc"),[d,i]=W(1),[n,g]=W(20),[v,p]=W(null),[y,x]=W(!1),[M,b]=W(!1),[o,c]=W(!1),[u,h]=W(parseInt(localStorage.getItem("certificates-font-size")||"14")),[f,$]=W(localStorage.getItem("certificates-font-family")||"Monaco"),C=F=>{switch(F){case"Monospace":return"monospace";case"System-ui":return"system-ui";case"Monaco":return"Monaco, monospace";case"Consolas":return"Consolas, monospace";case"Courier":return'"Courier New", monospace';default:return"Monaco, monospace"}},[k,{refetch:S}]=it(Xt,Fe.getCertificates),[L]=it(()=>(y()||M())&&v()?{name:v().name,ns:v().namespace}:null,async F=>F&&(await Fe.getCertificateYAML(F.name,F.ns)).yaml||""),P=async F=>{const j=v();if(j)try{await Fe.updateCertificate(j.name,j.namespace,F),Je(` Certificate ${j.name} updated successfully`,"success"),b(!1),setTimeout(()=>S(),500),setTimeout(()=>S(),2e3)}catch(q){const U=q instanceof Error?q.message:"Unknown error";throw Je(` Failed to update certificate: ${U}`,"error"),q}},I=F=>{if(!F)return 0;let j=0;const q=F.match(/(\d+)d/),U=F.match(/(\d+)h/),Y=F.match(/(\d+)m/);return q&&(j+=parseInt(q[1])*24*60),U&&(j+=parseInt(U[1])*60),Y&&(j+=parseInt(Y[1])),j},D=et(()=>{let F=k()||[];const j=e().toLowerCase();j&&(F=F.filter(Y=>Y.name.toLowerCase().includes(j)||Y.namespace.toLowerCase().includes(j)||Y.issuer?.toLowerCase().includes(j)||Y.dnsNames?.some(V=>V.toLowerCase().includes(j))));const q=r(),U=a();return F=[...F].sort((Y,V)=>{let X=0;switch(q){case"name":X=Y.name.localeCompare(V.name);break;case"namespace":X=Y.namespace.localeCompare(V.namespace);break;case"status":X=Y.status.localeCompare(V.status);break;case"age":X=I(Y.age)-I(V.age);break}return U==="asc"?X:-X}),F}),T=et(()=>Math.ceil(D().length/n())),B=et(()=>{const F=(d()-1)*n();return D().slice(F,F+n())}),N=et(()=>{const F=k()||[];return{total:F.length,ready:F.filter(j=>j.status==="Ready"||j.status==="True").length,pending:F.filter(j=>j.status==="Pending"||j.status==="Unknown").length,failed:F.filter(j=>j.status==="Failed"||j.status==="False").length}}),O=F=>{r()===F?m(j=>j==="asc"?"desc":"asc"):(l(F),m("asc")),i(1)},H=F=>(()=>{var j=yb(),q=j.firstChild,U=q.nextSibling;return J(Y=>{var V=r()===F.field&&a()==="asc"?"var(--accent-primary)":"var(--text-muted)",X=r()===F.field&&a()==="desc"?"var(--accent-primary)":"var(--text-muted)";return V!==Y.e&&E(q,"color",Y.e=V),X!==Y.t&&E(U,"color",Y.t=X),Y},{e:void 0,t:void 0}),j})(),A=async F=>{if(confirm(`Are you sure you want to delete certificate ${F.name}?`))try{await Fe.deleteCertificate(F.name,F.namespace),Je(`Certificate ${F.name} deleted successfully`,"success"),S()}catch(j){console.error("Failed to delete certificate:",j),Je(`Failed to delete certificate: ${j instanceof Error?j.message:"Unknown error"}`,"error")}},z=F=>F==="Ready"||F==="True"?"badge-success":F==="Failed"||F==="False"?"badge-error":"badge-warning";return(()=>{var F=Sb(),j=F.firstChild,q=j.firstChild,U=q.firstChild;U.nextSibling;var Y=q.nextSibling,V=Y.firstChild,X=j.nextSibling,R=X.firstChild,G=R.firstChild,te=G.nextSibling,ae=R.nextSibling,Q=ae.firstChild,Z=Q.nextSibling,ne=ae.nextSibling,$e=ne.firstChild,re=$e.nextSibling,de=ne.nextSibling,le=de.firstChild,xe=le.nextSibling,ye=de.nextSibling,ke=ye.nextSibling,ge=ke.nextSibling,Ce=X.nextSibling;return V.$$click=_e=>{const Me=_e.currentTarget;Me.classList.add("refreshing"),setTimeout(()=>Me.classList.remove("refreshing"),500),S()},s(te,()=>N().total),s(Z,()=>N().ready),s(re,()=>N().pending),s(xe,()=>N().failed),ke.$$input=_e=>{t(_e.currentTarget.value),i(1)},ge.addEventListener("change",_e=>{g(parseInt(_e.currentTarget.value)),i(1)}),s(Ce,_(K,{get when(){return!k.loading},get fallback(){return(()=>{var _e=Cb(),Me=_e.firstChild;return Me.nextSibling,_e})()},get children(){return[(()=>{var _e=_b(),Me=_e.firstChild,ve=Me.firstChild,be=ve.firstChild,ce=be.firstChild,Ae=ce.firstChild;Ae.firstChild;var se=ce.nextSibling,oe=se.firstChild;oe.firstChild;var ie=se.nextSibling,ue=ie.nextSibling,he=ue.nextSibling,Te=he.firstChild;Te.firstChild;var ee=he.nextSibling,Se=ee.nextSibling,pe=Se.firstChild;pe.firstChild;var De=ve.nextSibling;return ce.$$click=()=>O("name"),s(Ae,_(H,{field:"name"}),null),se.$$click=()=>O("namespace"),s(oe,_(H,{field:"namespace"}),null),he.$$click=()=>O("status"),s(Te,_(H,{field:"status"}),null),Se.$$click=()=>O("age"),s(pe,_(H,{field:"age"}),null),s(De,_(Xe,{get each(){return B()},get fallback(){return(()=>{var Ne=kb();return Ne.firstChild,Ne})()},children:Ne=>{const me=xb;return(()=>{var He=Mb(),Ze=He.firstChild,we=Ze.firstChild,ze=Ze.nextSibling,Pe=ze.nextSibling,Ue=Pe.firstChild,Oe=Pe.nextSibling,fe=Oe.nextSibling,Le=fe.firstChild,We=fe.nextSibling,Ee=We.nextSibling,Ie=Ee.nextSibling;return we.$$click=()=>{p(Ne),c(!0)},s(we,(()=>{var qe=Re(()=>Ne.name.length>40);return()=>qe()?Ne.name.slice(0,37)+"...":Ne.name})()),s(ze,()=>Ne.namespace),s(Ue,()=>Ne.secretName||"-"),s(Oe,()=>Ne.issuer||"-"),s(Le,()=>Ne.status),s(We,()=>Ne.notAfter||"-"),s(Ee,()=>Ne.age),s(Ie,_(Jt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{p(Ne),x(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{p(Ne),b(!0)}},{label:"Delete",icon:"delete",onClick:()=>A(Ne),variant:"danger",divider:!0}]})),J(qe=>{var Be=Ls(u(),me),Ke=Ls(u(),me),Ye=Ls(u(),me),lt=Ls(u(),me),gt=Ls(u(),me),Qe=`badge ${z(Ne.status)}`,ct=Ls(u(),me),ft=Ls(u(),me),Ge=`${Math.max(24,u()*1.7)}px`,st=`${Math.max(24,u()*1.7)}px`;return qe.e=_t(Ze,Be,qe.e),qe.t=_t(ze,Ke,qe.t),qe.a=_t(Pe,Ye,qe.a),qe.o=_t(Oe,lt,qe.o),qe.i=_t(fe,gt,qe.i),Qe!==qe.n&&tt(Le,qe.n=Qe),qe.s=_t(We,ct,qe.s),qe.h=_t(Ee,ft,qe.h),Ge!==qe.r&&E(Ie,"height",qe.r=Ge),st!==qe.d&&E(Ie,"line-height",qe.d=st),qe},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0}),He})()}})),J(Ne=>{var me=C(f()),He=qt();return me!==Ne.e&&E(Me,"font-family",Ne.e=me),He!==Ne.t&&E(Me,"background",Ne.t=He),Ne},{e:void 0,t:void 0}),_e})(),_(K,{get when(){return T()>1||D().length>0},get children(){var _e=$b(),Me=_e.firstChild,ve=Me.firstChild,be=ve.nextSibling,ce=be.nextSibling,Ae=ce.nextSibling,se=Ae.nextSibling,oe=se.nextSibling;oe.nextSibling;var ie=Me.nextSibling,ue=ie.firstChild,he=ue.nextSibling,Te=he.nextSibling,ee=Te.firstChild,Se=ee.nextSibling;Se.nextSibling;var pe=Te.nextSibling,De=pe.nextSibling,Ne=De.nextSibling;return s(Me,()=>(d()-1)*n()+1,be),s(Me,()=>Math.min(d()*n(),D().length),Ae),s(Me,()=>D().length,oe),ue.$$click=()=>i(1),he.$$click=()=>i(me=>Math.max(1,me-1)),s(Te,d,Se),s(Te,T,null),pe.$$click=()=>i(me=>Math.min(T(),me+1)),De.$$click=()=>i(T()),Ne.addEventListener("change",me=>{g(parseInt(me.currentTarget.value)),i(1)}),J(me=>{var He=d()===1,Ze=d()===1,we=d()===T(),ze=d()===T();return He!==me.e&&(ue.disabled=me.e=He),Ze!==me.t&&(he.disabled=me.t=Ze),we!==me.a&&(pe.disabled=me.a=we),ze!==me.o&&(De.disabled=me.o=ze),me},{e:void 0,t:void 0,a:void 0,o:void 0}),J(()=>Ne.value=n()),_e}})]}})),s(F,_(mt,{get isOpen(){return y()},onClose:()=>x(!1),get title(){return`YAML: ${v()?.name}`},size:"xl",get children(){return _(K,{get when(){return!L.loading},get fallback(){return Ia()},get children(){return _(gr,{get yaml(){return L()||""},get title(){return v()?.name}})}})}}),null),s(F,_(mt,{get isOpen(){return M()},onClose:()=>b(!1),get title(){return`Edit YAML: ${v()?.name}`},size:"xl",get children(){return _(K,{get when(){return!L.loading},get fallback(){return Ia()},get children(){var _e=wb();return s(_e,_(Dr,{get yaml(){return L()||""},get title(){return v()?.name},onSave:P,onCancel:()=>b(!1)})),_e}})}}),null),s(F,_(Sr,{get isOpen(){return o()},onClose:()=>c(!1),resourceType:"certificate",get name(){return v()?.name||""},get namespace(){return v()?.namespace}}),null),J(_e=>{var Me=qt(),ve=`1px solid ${Ar()}`;return Me!==_e.e&&E(Ce,"background",_e.e=Me),ve!==_e.t&&E(Ce,"border",_e.t=ve),_e},{e:void 0,t:void 0}),J(()=>ke.value=e()),J(()=>ge.value=n()),F})()};ut(["click","input"]);var Lb=w('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z">'),Eb=w('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 6h16M4 10h16M4 14h16M4 18h16">'),Tb=w('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1v-4zM14 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z">'),Db=w('<div class="grid grid-cols-1 lg:grid-cols-2 gap-4">'),Rb=w('<div class="border rounded-xl p-6 card-hover"style=background:var(--bg-card)><div class="flex items-start justify-between mb-4"><div class="flex items-center gap-3"><div><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path></svg></div><div><button class="font-semibold hover:underline text-left"style=color:var(--text-primary)></button><p class=text-sm style=color:var(--text-secondary)></p></div></div><span></span></div><div class="grid grid-cols-2 gap-4 mb-4"><div class="rounded-lg p-3"style=background:var(--bg-secondary)><div class="flex items-center justify-between mb-2"><span class=text-sm style=color:var(--text-secondary)>CPU</span><span class=font-medium style=color:var(--text-primary)></span></div><div class="h-2 rounded-full overflow-hidden"style=background:var(--bg-tertiary)><div class="h-full rounded-full"style=width:45%;background:var(--accent-primary)></div></div></div><div class="rounded-lg p-3"style=background:var(--bg-secondary)><div class="flex items-center justify-between mb-2"><span class=text-sm style=color:var(--text-secondary)>Memory</span><span class=font-medium style=color:var(--text-primary)></span></div><div class="h-2 rounded-full overflow-hidden"style=background:var(--bg-tertiary)><div class="h-full rounded-full"style=width:60%;background:var(--accent-secondary)></div></div></div></div><div class="flex items-center justify-between text-sm pt-4 border-t"style=color:var(--text-secondary);border-color:var(--border-color)><span>Version: </span><span>Age: '),Pb=w(`<div class="overflow-hidden rounded-lg"style=background:#000000><div class=overflow-x-auto><table class="data-table terminal-table"style=color:#0ea5e9;font-weight:900><style>
            table { width: 100%; border-collapse: collapse; }
            thead { background: #000000; position: sticky; top: 0; z-index: 10; }
            tbody tr:hover { background: rgba(14, 165, 233, 0.1); }
          </style><thead><tr><th class=whitespace-nowrap>Name</th><th class=whitespace-nowrap>Status</th><th class=whitespace-nowrap>Roles</th><th class=whitespace-nowrap>CPU</th><th class=whitespace-nowrap>Memory</th><th class=whitespace-nowrap>Version</th><th class=whitespace-nowrap>Age</th></tr></thead><tbody>`),Ib=w('<tr><td colspan=7 class="text-center py-8"style=color:var(--text-muted)>No nodes found'),Bb=w('<tr><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"><div class="flex items-center gap-2"><div><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path></svg></div><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></div></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"><span></span></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"><span></span></td><td class="font-mono text-sm"style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td class="font-mono text-sm"style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td class="font-mono text-sm"style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none">'),Nb=w('<div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3">'),Ob=w('<button class="border rounded-lg p-4 text-left transition-colors hover:opacity-80"style=background:var(--bg-card)><div class="flex items-center gap-2 mb-2"><div><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path></svg></div><span></span></div><h4 class="font-medium text-sm truncate mb-1"style=color:var(--text-primary)></h4><p class="text-xs truncate"style=color:var(--text-secondary)></p><div class="mt-2 pt-2 border-t"style=border-color:var(--border-color)><div class="flex justify-between text-xs"><span style=color:var(--text-secondary)>CPU</span><span style=color:var(--text-primary)></span></div><div class="flex justify-between text-xs mt-1"><span style=color:var(--text-secondary)>Mem</span><span style=color:var(--text-primary)>'),zb=w('<div class=space-y-6><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold text-white">Nodes</h1><p class="text-gray-400 mt-1">Cluster node management</p></div><div class="flex items-center gap-3"><select class="px-3 py-2 rounded-lg text-sm"title="Font Size"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=12>12px</option><option value=13>13px</option><option value=14>14px</option><option value=15>15px</option><option value=16>16px</option><option value=17>17px</option><option value=18>18px</option><option value=19>19px</option><option value=20>20px</option></select><select class="px-3 py-2 rounded-lg text-sm"title="Font Family"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=Monospace>Monospace</option><option value=System-ui>System-ui</option><option value=Monaco>Monaco</option><option value=Consolas>Consolas</option><option value=Courier>Courier</option></select><div class="flex items-center rounded-lg overflow-hidden"style="background:var(--bg-secondary);border:1px solid var(--border-color)"></div><button class=icon-btn title="Refresh Nodes"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="grid grid-cols-2 md:grid-cols-4 gap-4"><div class="bg-k8s-card border border-k8s-border rounded-lg p-4"><div class="text-gray-400 text-sm">Total Nodes</div><div class="text-2xl font-bold text-white"></div></div><div class="bg-k8s-card border border-green-500/30 rounded-lg p-4"><div class="text-gray-400 text-sm">Ready</div><div class="text-2xl font-bold text-green-400"></div></div><div class="bg-k8s-card border border-red-500/30 rounded-lg p-4"><div class="text-gray-400 text-sm">Not Ready</div><div class="text-2xl font-bold text-red-400"></div></div><div class="bg-k8s-card border border-cyan-500/30 rounded-lg p-4"><div class="text-gray-400 text-sm">Control Plane</div><div class="text-2xl font-bold text-cyan-400">'),Fb=w('<button><span class="hidden sm:inline capitalize">'),Hb=w('<div class="p-8 text-center text-gray-500"><svg class="w-8 h-8 animate-spin mx-auto mb-2"fill=none viewBox="0 0 24 24"><circle class=opacity-25 cx=12 cy=12 r=10 stroke=currentColor stroke-width=4></circle><path class=opacity-75 fill=currentColor d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>Loading nodes...');const jb=()=>{const[e,t]=W(null),[r,l]=W(!1),[a,m]=W("card"),[d,i]=W(parseInt(localStorage.getItem("nodes-font-size")||"14")),[n,g]=W(localStorage.getItem("nodes-font-family")||"Monaco"),v=h=>{switch(h){case"Monospace":return"monospace";case"System-ui":return"system-ui";case"Monaco":return"Monaco, monospace";case"Consolas":return"Consolas, monospace";case"Courier":return'"Courier New", monospace';default:return"Monaco, monospace"}},p=h=>{i(h),localStorage.setItem("nodes-font-size",h.toString())},y=h=>{g(h),localStorage.setItem("nodes-font-family",h)},x=et(()=>{const h=Is()||[],f=Vc().toLowerCase();return f?h.filter($=>$.name.toLowerCase().includes(f)||$.roles.toLowerCase().includes(f)||$.status.toLowerCase().includes(f)):h}),M=et(()=>{const h=Is()||[];return{total:h.length,ready:h.filter(f=>f.status==="Ready").length,notReady:h.filter(f=>f.status!=="Ready").length,controlPlane:h.filter(f=>f.roles.includes("control-plane")||f.roles.includes("master")).length}}),b=h=>_(Dn,{get children(){return[_(Or,{get when(){return h.mode==="card"},get children(){return Lb()}}),_(Or,{get when(){return h.mode==="list"},get children(){return Eb()}}),_(Or,{get when(){return h.mode==="grid"},get children(){return Tb()}})]}}),o=()=>(()=>{var h=Db();return s(h,_(Xe,{get each(){return x()},children:f=>{const $=f.status==="Ready",C=f.roles.includes("control-plane")||f.roles.includes("master");return(()=>{var k=Rb(),S=k.firstChild,L=S.firstChild,P=L.firstChild,I=P.firstChild,D=P.nextSibling,T=D.firstChild,B=T.nextSibling,N=L.nextSibling,O=S.nextSibling,H=O.firstChild,A=H.firstChild,z=A.firstChild,F=z.nextSibling,j=A.nextSibling;j.firstChild;var q=H.nextSibling,U=q.firstChild,Y=U.firstChild,V=Y.nextSibling,X=U.nextSibling;X.firstChild;var R=O.nextSibling,G=R.firstChild;G.firstChild;var te=G.nextSibling;return te.firstChild,E(k,"border-color",$?"var(--border-color)":"rgba(239, 68, 68, 0.3)"),tt(P,`p-2 rounded-lg ${C?"bg-cyan-500/20":""}`),dt(I,"class",`w-6 h-6 ${C?"text-cyan-400":""}`),T.$$click=()=>{t(f),l(!0)},s(T,()=>f.name),s(B,()=>f.roles||"worker"),tt(N,`px-2 py-1 rounded text-xs font-medium ${$?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`),s(N,()=>f.status),s(F,()=>f.cpu||"N/A"),s(V,()=>f.memory||"N/A"),s(G,()=>f.version,null),s(te,()=>f.age,null),J(ae=>{var Q=C?{}:{background:"var(--bg-secondary)"},Z=C?{}:{color:"var(--text-secondary)"};return ae.e=_t(P,Q,ae.e),ae.t=_t(I,Z,ae.t),ae},{e:void 0,t:void 0}),k})()}})),h})(),c=()=>(()=>{var h=Pb(),f=h.firstChild,$=f.firstChild,C=$.firstChild,k=C.nextSibling,S=k.nextSibling;return s(S,_(Xe,{get each(){return x()},get fallback(){return(()=>{var L=Ib();return L.firstChild,L})()},children:L=>{const P=L.status==="Ready",I=L.roles.includes("control-plane")||L.roles.includes("master");return(()=>{var D=Bb(),T=D.firstChild,B=T.firstChild,N=B.firstChild,O=N.firstChild,H=N.nextSibling,A=T.nextSibling,z=A.firstChild,F=A.nextSibling,j=F.firstChild,q=F.nextSibling,U=q.nextSibling,Y=U.nextSibling,V=Y.nextSibling;return tt(N,`p-1 rounded ${I?"bg-cyan-500/20":"bg-k8s-dark"}`),dt(O,"class",`w-4 h-4 ${I?"text-cyan-400":"text-gray-400"}`),H.$$click=()=>{t(L),l(!0)},s(H,()=>L.name),tt(z,`badge ${P?"badge-success":"badge-error"}`),s(z,()=>L.status),tt(j,`text-sm ${I?"text-cyan-400":"text-gray-400"}`),s(j,()=>L.roles||"worker"),s(q,()=>L.cpu||"N/A"),s(U,()=>L.memory||"N/A"),s(Y,()=>L.version),s(V,()=>L.age),J(X=>{var R=`${d()}px`,G=`${Math.max(24,d()*1.7)}px`,te=`${Math.max(24,d()*1.7)}px`,ae=`${d()}px`,Q=`${Math.max(24,d()*1.7)}px`,Z=`${Math.max(24,d()*1.7)}px`,ne=`${d()}px`,$e=`${Math.max(24,d()*1.7)}px`,re=`${Math.max(24,d()*1.7)}px`,de=`${d()}px`,le=`${Math.max(24,d()*1.7)}px`,xe=`${Math.max(24,d()*1.7)}px`,ye=`${d()}px`,ke=`${Math.max(24,d()*1.7)}px`,ge=`${Math.max(24,d()*1.7)}px`,Ce=`${d()}px`,_e=`${Math.max(24,d()*1.7)}px`,Me=`${Math.max(24,d()*1.7)}px`,ve=`${d()}px`,be=`${Math.max(24,d()*1.7)}px`,ce=`${Math.max(24,d()*1.7)}px`;return R!==X.e&&E(T,"font-size",X.e=R),G!==X.t&&E(T,"height",X.t=G),te!==X.a&&E(T,"line-height",X.a=te),ae!==X.o&&E(A,"font-size",X.o=ae),Q!==X.i&&E(A,"height",X.i=Q),Z!==X.n&&E(A,"line-height",X.n=Z),ne!==X.s&&E(F,"font-size",X.s=ne),$e!==X.h&&E(F,"height",X.h=$e),re!==X.r&&E(F,"line-height",X.r=re),de!==X.d&&E(q,"font-size",X.d=de),le!==X.l&&E(q,"height",X.l=le),xe!==X.u&&E(q,"line-height",X.u=xe),ye!==X.c&&E(U,"font-size",X.c=ye),ke!==X.w&&E(U,"height",X.w=ke),ge!==X.m&&E(U,"line-height",X.m=ge),Ce!==X.f&&E(Y,"font-size",X.f=Ce),_e!==X.y&&E(Y,"height",X.y=_e),Me!==X.g&&E(Y,"line-height",X.g=Me),ve!==X.p&&E(V,"font-size",X.p=ve),be!==X.b&&E(V,"height",X.b=be),ce!==X.T&&E(V,"line-height",X.T=ce),X},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0}),D})()}})),J(L=>{var P=`${d()}px`,I=v(n());return P!==L.e&&E($,"font-size",L.e=P),I!==L.t&&E($,"font-family",L.t=I),L},{e:void 0,t:void 0}),h})(),u=()=>(()=>{var h=Nb();return s(h,_(Xe,{get each(){return x()},children:f=>{const $=f.status==="Ready",C=f.roles.includes("control-plane")||f.roles.includes("master");return(()=>{var k=Ob(),S=k.firstChild,L=S.firstChild,P=L.firstChild,I=L.nextSibling,D=S.nextSibling,T=D.nextSibling,B=T.nextSibling,N=B.firstChild,O=N.firstChild,H=O.nextSibling,A=N.nextSibling,z=A.firstChild,F=z.nextSibling;return k.$$click=()=>{t(f),l(!0)},E(k,"border-color",$?"var(--border-color)":"rgba(239, 68, 68, 0.3)"),tt(L,`p-1.5 rounded ${C?"bg-cyan-500/20":""}`),dt(P,"class",`w-4 h-4 ${C?"text-cyan-400":""}`),tt(I,`px-1.5 py-0.5 rounded text-xs font-medium ${$?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`),s(I,()=>f.status),s(D,()=>f.name),s(T,()=>f.roles||"worker"),s(H,()=>f.cpu||"N/A"),s(F,()=>f.memory||"N/A"),J(j=>{var q=C?{}:{background:"var(--bg-secondary)"},U=C?{}:{color:"var(--text-secondary)"},Y=f.name;return j.e=_t(L,q,j.e),j.t=_t(P,U,j.t),Y!==j.a&&dt(D,"title",j.a=Y),j},{e:void 0,t:void 0,a:void 0}),k})()}})),h})();return(()=>{var h=zb(),f=h.firstChild,$=f.firstChild,C=$.nextSibling,k=C.firstChild,S=k.nextSibling,L=S.nextSibling,P=L.nextSibling,I=f.nextSibling,D=I.firstChild,T=D.firstChild,B=T.nextSibling,N=D.nextSibling,O=N.firstChild,H=O.nextSibling,A=N.nextSibling,z=A.firstChild,F=z.nextSibling,j=A.nextSibling,q=j.firstChild,U=q.nextSibling;return k.addEventListener("change",Y=>p(parseInt(Y.currentTarget.value))),S.addEventListener("change",Y=>y(Y.currentTarget.value)),s(L,_(Xe,{each:["card","list","grid"],children:Y=>(()=>{var V=Fb(),X=V.firstChild;return V.$$click=()=>m(Y),s(V,_(b,{mode:Y}),X),s(X,Y),J(R=>{var G=`px-3 py-2 flex items-center gap-2 text-sm transition-colors ${a()===Y?"bg-k8s-blue text-white":"text-gray-400 hover:text-white hover:bg-k8s-dark"}`,te=`${Y.charAt(0).toUpperCase()+Y.slice(1)} View`;return G!==R.e&&tt(V,R.e=G),te!==R.t&&dt(V,"title",R.t=te),R},{e:void 0,t:void 0}),V})()})),P.$$click=Y=>{const V=Y.currentTarget;V.classList.add("refreshing"),setTimeout(()=>V.classList.remove("refreshing"),500),id()},s(B,()=>M().total),s(H,()=>M().ready),s(F,()=>M().notReady),s(U,()=>M().controlPlane),s(h,_(K,{get when(){return!Is.loading},get fallback(){return Hb()},get children(){return _(Dn,{get children(){return[_(Or,{get when(){return a()==="card"},get children(){return _(o,{})}}),_(Or,{get when(){return a()==="list"},get children(){return _(c,{})}}),_(Or,{get when(){return a()==="grid"},get children(){return _(u,{})}})]}})}}),null),s(h,_(Sr,{get isOpen(){return r()},onClose:()=>l(!1),resourceType:"node",get name(){return e()?.name||""}}),null),J(()=>k.value=d()),J(()=>S.value=n()),h})()};ut(["click"]);var Ub={value:()=>{}};function ji(){for(var e=0,t=arguments.length,r={},l;e<t;++e){if(!(l=arguments[e]+"")||l in r||/[\s.]/.test(l))throw new Error("illegal type: "+l);r[l]=[]}return new yn(r)}function yn(e){this._=e}function Vb(e,t){return e.trim().split(/^|\s+/).map(function(r){var l="",a=r.indexOf(".");if(a>=0&&(l=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:l}})}yn.prototype=ji.prototype={constructor:yn,on:function(e,t){var r=this._,l=Vb(e+"",r),a,m=-1,d=l.length;if(arguments.length<2){for(;++m<d;)if((a=(e=l[m]).type)&&(a=Wb(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++m<d;)if(a=(e=l[m]).type)r[a]=Ba(r[a],e.name,t);else if(t==null)for(a in r)r[a]=Ba(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new yn(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),l=0,a,m;l<a;++l)r[l]=arguments[l+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(m=this._[e],l=0,a=m.length;l<a;++l)m[l].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var l=this._[e],a=0,m=l.length;a<m;++a)l[a].value.apply(t,r)}};function Wb(e,t){for(var r=0,l=e.length,a;r<l;++r)if((a=e[r]).name===t)return a.value}function Ba(e,t,r){for(var l=0,a=e.length;l<a;++l)if(e[l].name===t){e[l]=Ub,e=e.slice(0,l).concat(e.slice(l+1));break}return r!=null&&e.push({name:t,value:r}),e}var Pl="http://www.w3.org/1999/xhtml";const Na={svg:"http://www.w3.org/2000/svg",xhtml:Pl,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Jn(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),Na.hasOwnProperty(t)?{space:Na[t],local:e}:e}function qb(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===Pl&&t.documentElement.namespaceURI===Pl?t.createElement(e):t.createElementNS(r,e)}}function Kb(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function pd(e){var t=Jn(e);return(t.local?Kb:qb)(t)}function Yb(){}function Yl(e){return e==null?Yb:function(){return this.querySelector(e)}}function Gb(e){typeof e!="function"&&(e=Yl(e));for(var t=this._groups,r=t.length,l=new Array(r),a=0;a<r;++a)for(var m=t[a],d=m.length,i=l[a]=new Array(d),n,g,v=0;v<d;++v)(n=m[v])&&(g=e.call(n,n.__data__,v,m))&&("__data__"in n&&(g.__data__=n.__data__),i[v]=g);return new Tr(l,this._parents)}function Jb(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Xb(){return[]}function md(e){return e==null?Xb:function(){return this.querySelectorAll(e)}}function Zb(e){return function(){return Jb(e.apply(this,arguments))}}function Qb(e){typeof e=="function"?e=Zb(e):e=md(e);for(var t=this._groups,r=t.length,l=[],a=[],m=0;m<r;++m)for(var d=t[m],i=d.length,n,g=0;g<i;++g)(n=d[g])&&(l.push(e.call(n,n.__data__,g,d)),a.push(n));return new Tr(l,a)}function bd(e){return function(){return this.matches(e)}}function xd(e){return function(t){return t.matches(e)}}var e1=Array.prototype.find;function t1(e){return function(){return e1.call(this.children,e)}}function r1(){return this.firstElementChild}function s1(e){return this.select(e==null?r1:t1(typeof e=="function"?e:xd(e)))}var i1=Array.prototype.filter;function n1(){return Array.from(this.children)}function l1(e){return function(){return i1.call(this.children,e)}}function o1(e){return this.selectAll(e==null?n1:l1(typeof e=="function"?e:xd(e)))}function a1(e){typeof e!="function"&&(e=bd(e));for(var t=this._groups,r=t.length,l=new Array(r),a=0;a<r;++a)for(var m=t[a],d=m.length,i=l[a]=[],n,g=0;g<d;++g)(n=m[g])&&e.call(n,n.__data__,g,m)&&i.push(n);return new Tr(l,this._parents)}function yd(e){return new Array(e.length)}function c1(){return new Tr(this._enter||this._groups.map(yd),this._parents)}function Bn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Bn.prototype={constructor:Bn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function d1(e){return function(){return e}}function u1(e,t,r,l,a,m){for(var d=0,i,n=t.length,g=m.length;d<g;++d)(i=t[d])?(i.__data__=m[d],l[d]=i):r[d]=new Bn(e,m[d]);for(;d<n;++d)(i=t[d])&&(a[d]=i)}function h1(e,t,r,l,a,m,d){var i,n,g=new Map,v=t.length,p=m.length,y=new Array(v),x;for(i=0;i<v;++i)(n=t[i])&&(y[i]=x=d.call(n,n.__data__,i,t)+"",g.has(x)?a[i]=n:g.set(x,n));for(i=0;i<p;++i)x=d.call(e,m[i],i,m)+"",(n=g.get(x))?(l[i]=n,n.__data__=m[i],g.delete(x)):r[i]=new Bn(e,m[i]);for(i=0;i<v;++i)(n=t[i])&&g.get(y[i])===n&&(a[i]=n)}function g1(e){return e.__data__}function v1(e,t){if(!arguments.length)return Array.from(this,g1);var r=t?h1:u1,l=this._parents,a=this._groups;typeof e!="function"&&(e=d1(e));for(var m=a.length,d=new Array(m),i=new Array(m),n=new Array(m),g=0;g<m;++g){var v=l[g],p=a[g],y=p.length,x=f1(e.call(v,v&&v.__data__,g,l)),M=x.length,b=i[g]=new Array(M),o=d[g]=new Array(M),c=n[g]=new Array(y);r(v,p,b,o,c,x,t);for(var u=0,h=0,f,$;u<M;++u)if(f=b[u]){for(u>=h&&(h=u+1);!($=o[h])&&++h<M;);f._next=$||null}}return d=new Tr(d,l),d._enter=i,d._exit=n,d}function f1(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function p1(){return new Tr(this._exit||this._groups.map(yd),this._parents)}function m1(e,t,r){var l=this.enter(),a=this,m=this.exit();return typeof e=="function"?(l=e(l),l&&(l=l.selection())):l=l.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),r==null?m.remove():r(m),l&&a?l.merge(a).order():a}function b1(e){for(var t=e.selection?e.selection():e,r=this._groups,l=t._groups,a=r.length,m=l.length,d=Math.min(a,m),i=new Array(a),n=0;n<d;++n)for(var g=r[n],v=l[n],p=g.length,y=i[n]=new Array(p),x,M=0;M<p;++M)(x=g[M]||v[M])&&(y[M]=x);for(;n<a;++n)i[n]=r[n];return new Tr(i,this._parents)}function x1(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var l=e[t],a=l.length-1,m=l[a],d;--a>=0;)(d=l[a])&&(m&&d.compareDocumentPosition(m)^4&&m.parentNode.insertBefore(d,m),m=d);return this}function y1(e){e||(e=_1);function t(p,y){return p&&y?e(p.__data__,y.__data__):!p-!y}for(var r=this._groups,l=r.length,a=new Array(l),m=0;m<l;++m){for(var d=r[m],i=d.length,n=a[m]=new Array(i),g,v=0;v<i;++v)(g=d[v])&&(n[v]=g);n.sort(t)}return new Tr(a,this._parents).order()}function _1(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function $1(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function w1(){return Array.from(this)}function S1(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var l=e[t],a=0,m=l.length;a<m;++a){var d=l[a];if(d)return d}return null}function C1(){let e=0;for(const t of this)++e;return e}function k1(){return!this.node()}function M1(e){for(var t=this._groups,r=0,l=t.length;r<l;++r)for(var a=t[r],m=0,d=a.length,i;m<d;++m)(i=a[m])&&e.call(i,i.__data__,m,a);return this}function A1(e){return function(){this.removeAttribute(e)}}function L1(e){return function(){this.removeAttributeNS(e.space,e.local)}}function E1(e,t){return function(){this.setAttribute(e,t)}}function T1(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function D1(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function R1(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function P1(e,t){var r=Jn(e);if(arguments.length<2){var l=this.node();return r.local?l.getAttributeNS(r.space,r.local):l.getAttribute(r)}return this.each((t==null?r.local?L1:A1:typeof t=="function"?r.local?R1:D1:r.local?T1:E1)(r,t))}function _d(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function I1(e){return function(){this.style.removeProperty(e)}}function B1(e,t,r){return function(){this.style.setProperty(e,t,r)}}function N1(e,t,r){return function(){var l=t.apply(this,arguments);l==null?this.style.removeProperty(e):this.style.setProperty(e,l,r)}}function O1(e,t,r){return arguments.length>1?this.each((t==null?I1:typeof t=="function"?N1:B1)(e,t,r??"")):di(this.node(),e)}function di(e,t){return e.style.getPropertyValue(t)||_d(e).getComputedStyle(e,null).getPropertyValue(t)}function z1(e){return function(){delete this[e]}}function F1(e,t){return function(){this[e]=t}}function H1(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function j1(e,t){return arguments.length>1?this.each((t==null?z1:typeof t=="function"?H1:F1)(e,t)):this.node()[e]}function $d(e){return e.trim().split(/^|\s+/)}function Gl(e){return e.classList||new wd(e)}function wd(e){this._node=e,this._names=$d(e.getAttribute("class")||"")}wd.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Sd(e,t){for(var r=Gl(e),l=-1,a=t.length;++l<a;)r.add(t[l])}function Cd(e,t){for(var r=Gl(e),l=-1,a=t.length;++l<a;)r.remove(t[l])}function U1(e){return function(){Sd(this,e)}}function V1(e){return function(){Cd(this,e)}}function W1(e,t){return function(){(t.apply(this,arguments)?Sd:Cd)(this,e)}}function q1(e,t){var r=$d(e+"");if(arguments.length<2){for(var l=Gl(this.node()),a=-1,m=r.length;++a<m;)if(!l.contains(r[a]))return!1;return!0}return this.each((typeof t=="function"?W1:t?U1:V1)(r,t))}function K1(){this.textContent=""}function Y1(e){return function(){this.textContent=e}}function G1(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function J1(e){return arguments.length?this.each(e==null?K1:(typeof e=="function"?G1:Y1)(e)):this.node().textContent}function X1(){this.innerHTML=""}function Z1(e){return function(){this.innerHTML=e}}function Q1(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ex(e){return arguments.length?this.each(e==null?X1:(typeof e=="function"?Q1:Z1)(e)):this.node().innerHTML}function tx(){this.nextSibling&&this.parentNode.appendChild(this)}function rx(){return this.each(tx)}function sx(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ix(){return this.each(sx)}function nx(e){var t=typeof e=="function"?e:pd(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function lx(){return null}function ox(e,t){var r=typeof e=="function"?e:pd(e),l=t==null?lx:typeof t=="function"?t:Yl(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),l.apply(this,arguments)||null)})}function ax(){var e=this.parentNode;e&&e.removeChild(this)}function cx(){return this.each(ax)}function dx(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ux(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function hx(e){return this.select(e?ux:dx)}function gx(e){return arguments.length?this.property("__data__",e):this.node().__data__}function vx(e){return function(t){e.call(this,t,this.__data__)}}function fx(e){return e.trim().split(/^|\s+/).map(function(t){var r="",l=t.indexOf(".");return l>=0&&(r=t.slice(l+1),t=t.slice(0,l)),{type:t,name:r}})}function px(e){return function(){var t=this.__on;if(t){for(var r=0,l=-1,a=t.length,m;r<a;++r)m=t[r],(!e.type||m.type===e.type)&&m.name===e.name?this.removeEventListener(m.type,m.listener,m.options):t[++l]=m;++l?t.length=l:delete this.__on}}}function mx(e,t,r){return function(){var l=this.__on,a,m=vx(t);if(l){for(var d=0,i=l.length;d<i;++d)if((a=l[d]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=m,a.options=r),a.value=t;return}}this.addEventListener(e.type,m,r),a={type:e.type,name:e.name,value:t,listener:m,options:r},l?l.push(a):this.__on=[a]}}function bx(e,t,r){var l=fx(e+""),a,m=l.length,d;if(arguments.length<2){var i=this.node().__on;if(i){for(var n=0,g=i.length,v;n<g;++n)for(a=0,v=i[n];a<m;++a)if((d=l[a]).type===v.type&&d.name===v.name)return v.value}return}for(i=t?mx:px,a=0;a<m;++a)this.each(i(l[a],t,r));return this}function kd(e,t,r){var l=_d(e),a=l.CustomEvent;typeof a=="function"?a=new a(t,r):(a=l.document.createEvent("Event"),r?(a.initEvent(t,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function xx(e,t){return function(){return kd(this,e,t)}}function yx(e,t){return function(){return kd(this,e,t.apply(this,arguments))}}function _x(e,t){return this.each((typeof t=="function"?yx:xx)(e,t))}function*$x(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var l=e[t],a=0,m=l.length,d;a<m;++a)(d=l[a])&&(yield d)}var Md=[null];function Tr(e,t){this._groups=e,this._parents=t}function Ui(){return new Tr([[document.documentElement]],Md)}function wx(){return this}Tr.prototype=Ui.prototype={constructor:Tr,select:Gb,selectAll:Qb,selectChild:s1,selectChildren:o1,filter:a1,data:v1,enter:c1,exit:p1,join:m1,merge:b1,selection:wx,order:x1,sort:y1,call:$1,nodes:w1,node:S1,size:C1,empty:k1,each:M1,attr:P1,style:O1,property:j1,classed:q1,text:J1,html:ex,raise:rx,lower:ix,append:nx,insert:ox,remove:cx,clone:hx,datum:gx,on:bx,dispatch:_x,[Symbol.iterator]:$x};function lr(e){return typeof e=="string"?new Tr([[document.querySelector(e)]],[document.documentElement]):new Tr([[e]],Md)}function Sx(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ds(e,t){if(e=Sx(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var l=r.createSVGPoint();return l.x=e.clientX,l.y=e.clientY,l=l.matrixTransform(t.getScreenCTM().inverse()),[l.x,l.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const Cx={passive:!1},Di={capture:!0,passive:!1};function cl(e){e.stopImmediatePropagation()}function li(e){e.preventDefault(),e.stopImmediatePropagation()}function Ad(e){var t=e.document.documentElement,r=lr(e).on("dragstart.drag",li,Di);"onselectstart"in t?r.on("selectstart.drag",li,Di):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ld(e,t){var r=e.document.documentElement,l=lr(e).on("dragstart.drag",null);t&&(l.on("click.drag",li,Di),setTimeout(function(){l.on("click.drag",null)},0)),"onselectstart"in r?l.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const on=e=>()=>e;function Il(e,{sourceEvent:t,subject:r,target:l,identifier:a,active:m,x:d,y:i,dx:n,dy:g,dispatch:v}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:l,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:m,enumerable:!0,configurable:!0},x:{value:d,enumerable:!0,configurable:!0},y:{value:i,enumerable:!0,configurable:!0},dx:{value:n,enumerable:!0,configurable:!0},dy:{value:g,enumerable:!0,configurable:!0},_:{value:v}})}Il.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function kx(e){return!e.ctrlKey&&!e.button}function Mx(){return this.parentNode}function Ax(e,t){return t??{x:e.x,y:e.y}}function Lx(){return navigator.maxTouchPoints||"ontouchstart"in this}function Jl(){var e=kx,t=Mx,r=Ax,l=Lx,a={},m=ji("start","drag","end"),d=0,i,n,g,v,p=0;function y(f){f.on("mousedown.drag",x).filter(l).on("touchstart.drag",o).on("touchmove.drag",c,Cx).on("touchend.drag touchcancel.drag",u).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(f,$){if(!(v||!e.call(this,f,$))){var C=h(this,t.call(this,f,$),f,$,"mouse");C&&(lr(f.view).on("mousemove.drag",M,Di).on("mouseup.drag",b,Di),Ad(f.view),cl(f),g=!1,i=f.clientX,n=f.clientY,C("start",f))}}function M(f){if(li(f),!g){var $=f.clientX-i,C=f.clientY-n;g=$*$+C*C>p}a.mouse("drag",f)}function b(f){lr(f.view).on("mousemove.drag mouseup.drag",null),Ld(f.view,g),li(f),a.mouse("end",f)}function o(f,$){if(e.call(this,f,$)){var C=f.changedTouches,k=t.call(this,f,$),S=C.length,L,P;for(L=0;L<S;++L)(P=h(this,k,f,$,C[L].identifier,C[L]))&&(cl(f),P("start",f,C[L]))}}function c(f){var $=f.changedTouches,C=$.length,k,S;for(k=0;k<C;++k)(S=a[$[k].identifier])&&(li(f),S("drag",f,$[k]))}function u(f){var $=f.changedTouches,C=$.length,k,S;for(v&&clearTimeout(v),v=setTimeout(function(){v=null},500),k=0;k<C;++k)(S=a[$[k].identifier])&&(cl(f),S("end",f,$[k]))}function h(f,$,C,k,S,L){var P=m.copy(),I=ds(L||C,$),D,T,B;if((B=r.call(f,new Il("beforestart",{sourceEvent:C,target:y,identifier:S,active:d,x:I[0],y:I[1],dx:0,dy:0,dispatch:P}),k))!=null)return D=B.x-I[0]||0,T=B.y-I[1]||0,function N(O,H,A){var z=I,F;switch(O){case"start":a[S]=N,F=d++;break;case"end":delete a[S],--d;case"drag":I=ds(A||H,$),F=d;break}P.call(O,f,new Il(O,{sourceEvent:H,subject:B,target:y,identifier:S,active:F,x:I[0]+D,y:I[1]+T,dx:I[0]-z[0],dy:I[1]-z[1],dispatch:P}),k)}}return y.filter=function(f){return arguments.length?(e=typeof f=="function"?f:on(!!f),y):e},y.container=function(f){return arguments.length?(t=typeof f=="function"?f:on(f),y):t},y.subject=function(f){return arguments.length?(r=typeof f=="function"?f:on(f),y):r},y.touchable=function(f){return arguments.length?(l=typeof f=="function"?f:on(!!f),y):l},y.on=function(){var f=m.on.apply(m,arguments);return f===m?y:f},y.clickDistance=function(f){return arguments.length?(p=(f=+f)*f,y):Math.sqrt(p)},y}function Xl(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Ed(e,t){var r=Object.create(e.prototype);for(var l in t)r[l]=t[l];return r}function Vi(){}var Ri=.7,Nn=1/Ri,oi="\\s*([+-]?\\d+)\\s*",Pi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Jr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ex=/^#([0-9a-f]{3,8})$/,Tx=new RegExp(`^rgb\\(${oi},${oi},${oi}\\)$`),Dx=new RegExp(`^rgb\\(${Jr},${Jr},${Jr}\\)$`),Rx=new RegExp(`^rgba\\(${oi},${oi},${oi},${Pi}\\)$`),Px=new RegExp(`^rgba\\(${Jr},${Jr},${Jr},${Pi}\\)$`),Ix=new RegExp(`^hsl\\(${Pi},${Jr},${Jr}\\)$`),Bx=new RegExp(`^hsla\\(${Pi},${Jr},${Jr},${Pi}\\)$`),Oa={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Xl(Vi,Ii,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:za,formatHex:za,formatHex8:Nx,formatHsl:Ox,formatRgb:Fa,toString:Fa});function za(){return this.rgb().formatHex()}function Nx(){return this.rgb().formatHex8()}function Ox(){return Td(this).formatHsl()}function Fa(){return this.rgb().formatRgb()}function Ii(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Ex.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Ha(t):r===3?new Mr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?an(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?an(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Tx.exec(e))?new Mr(t[1],t[2],t[3],1):(t=Dx.exec(e))?new Mr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Rx.exec(e))?an(t[1],t[2],t[3],t[4]):(t=Px.exec(e))?an(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Ix.exec(e))?Va(t[1],t[2]/100,t[3]/100,1):(t=Bx.exec(e))?Va(t[1],t[2]/100,t[3]/100,t[4]):Oa.hasOwnProperty(e)?Ha(Oa[e]):e==="transparent"?new Mr(NaN,NaN,NaN,0):null}function Ha(e){return new Mr(e>>16&255,e>>8&255,e&255,1)}function an(e,t,r,l){return l<=0&&(e=t=r=NaN),new Mr(e,t,r,l)}function zx(e){return e instanceof Vi||(e=Ii(e)),e?(e=e.rgb(),new Mr(e.r,e.g,e.b,e.opacity)):new Mr}function Bl(e,t,r,l){return arguments.length===1?zx(e):new Mr(e,t,r,l??1)}function Mr(e,t,r,l){this.r=+e,this.g=+t,this.b=+r,this.opacity=+l}Xl(Mr,Bl,Ed(Vi,{brighter(e){return e=e==null?Nn:Math.pow(Nn,e),new Mr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ri:Math.pow(Ri,e),new Mr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Mr(Ns(this.r),Ns(this.g),Ns(this.b),On(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ja,formatHex:ja,formatHex8:Fx,formatRgb:Ua,toString:Ua}));function ja(){return`#${Ps(this.r)}${Ps(this.g)}${Ps(this.b)}`}function Fx(){return`#${Ps(this.r)}${Ps(this.g)}${Ps(this.b)}${Ps((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ua(){const e=On(this.opacity);return`${e===1?"rgb(":"rgba("}${Ns(this.r)}, ${Ns(this.g)}, ${Ns(this.b)}${e===1?")":`, ${e})`}`}function On(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ns(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ps(e){return e=Ns(e),(e<16?"0":"")+e.toString(16)}function Va(e,t,r,l){return l<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new jr(e,t,r,l)}function Td(e){if(e instanceof jr)return new jr(e.h,e.s,e.l,e.opacity);if(e instanceof Vi||(e=Ii(e)),!e)return new jr;if(e instanceof jr)return e;e=e.rgb();var t=e.r/255,r=e.g/255,l=e.b/255,a=Math.min(t,r,l),m=Math.max(t,r,l),d=NaN,i=m-a,n=(m+a)/2;return i?(t===m?d=(r-l)/i+(r<l)*6:r===m?d=(l-t)/i+2:d=(t-r)/i+4,i/=n<.5?m+a:2-m-a,d*=60):i=n>0&&n<1?0:d,new jr(d,i,n,e.opacity)}function Hx(e,t,r,l){return arguments.length===1?Td(e):new jr(e,t,r,l??1)}function jr(e,t,r,l){this.h=+e,this.s=+t,this.l=+r,this.opacity=+l}Xl(jr,Hx,Ed(Vi,{brighter(e){return e=e==null?Nn:Math.pow(Nn,e),new jr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ri:Math.pow(Ri,e),new jr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,l=r+(r<.5?r:1-r)*t,a=2*r-l;return new Mr(dl(e>=240?e-240:e+120,a,l),dl(e,a,l),dl(e<120?e+240:e-120,a,l),this.opacity)},clamp(){return new jr(Wa(this.h),cn(this.s),cn(this.l),On(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=On(this.opacity);return`${e===1?"hsl(":"hsla("}${Wa(this.h)}, ${cn(this.s)*100}%, ${cn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Wa(e){return e=(e||0)%360,e<0?e+360:e}function cn(e){return Math.max(0,Math.min(1,e||0))}function dl(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Dd=e=>()=>e;function jx(e,t){return function(r){return e+r*t}}function Ux(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(l){return Math.pow(e+l*t,r)}}function Vx(e){return(e=+e)==1?Rd:function(t,r){return r-t?Ux(t,r,e):Dd(isNaN(t)?r:t)}}function Rd(e,t){var r=t-e;return r?jx(e,r):Dd(isNaN(e)?t:e)}const qa=function e(t){var r=Vx(t);function l(a,m){var d=r((a=Bl(a)).r,(m=Bl(m)).r),i=r(a.g,m.g),n=r(a.b,m.b),g=Rd(a.opacity,m.opacity);return function(v){return a.r=d(v),a.g=i(v),a.b=n(v),a.opacity=g(v),a+""}}return l.gamma=e,l}(1);function _s(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var Nl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ul=new RegExp(Nl.source,"g");function Wx(e){return function(){return e}}function qx(e){return function(t){return e(t)+""}}function Kx(e,t){var r=Nl.lastIndex=ul.lastIndex=0,l,a,m,d=-1,i=[],n=[];for(e=e+"",t=t+"";(l=Nl.exec(e))&&(a=ul.exec(t));)(m=a.index)>r&&(m=t.slice(r,m),i[d]?i[d]+=m:i[++d]=m),(l=l[0])===(a=a[0])?i[d]?i[d]+=a:i[++d]=a:(i[++d]=null,n.push({i:d,x:_s(l,a)})),r=ul.lastIndex;return r<t.length&&(m=t.slice(r),i[d]?i[d]+=m:i[++d]=m),i.length<2?n[0]?qx(n[0].x):Wx(t):(t=n.length,function(g){for(var v=0,p;v<t;++v)i[(p=n[v]).i]=p.x(g);return i.join("")})}var Ka=180/Math.PI,Ol={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Pd(e,t,r,l,a,m){var d,i,n;return(d=Math.sqrt(e*e+t*t))&&(e/=d,t/=d),(n=e*r+t*l)&&(r-=e*n,l-=t*n),(i=Math.sqrt(r*r+l*l))&&(r/=i,l/=i,n/=i),e*l<t*r&&(e=-e,t=-t,n=-n,d=-d),{translateX:a,translateY:m,rotate:Math.atan2(t,e)*Ka,skewX:Math.atan(n)*Ka,scaleX:d,scaleY:i}}var dn;function Yx(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ol:Pd(t.a,t.b,t.c,t.d,t.e,t.f)}function Gx(e){return e==null||(dn||(dn=document.createElementNS("http://www.w3.org/2000/svg","g")),dn.setAttribute("transform",e),!(e=dn.transform.baseVal.consolidate()))?Ol:(e=e.matrix,Pd(e.a,e.b,e.c,e.d,e.e,e.f))}function Id(e,t,r,l){function a(g){return g.length?g.pop()+" ":""}function m(g,v,p,y,x,M){if(g!==p||v!==y){var b=x.push("translate(",null,t,null,r);M.push({i:b-4,x:_s(g,p)},{i:b-2,x:_s(v,y)})}else(p||y)&&x.push("translate("+p+t+y+r)}function d(g,v,p,y){g!==v?(g-v>180?v+=360:v-g>180&&(g+=360),y.push({i:p.push(a(p)+"rotate(",null,l)-2,x:_s(g,v)})):v&&p.push(a(p)+"rotate("+v+l)}function i(g,v,p,y){g!==v?y.push({i:p.push(a(p)+"skewX(",null,l)-2,x:_s(g,v)}):v&&p.push(a(p)+"skewX("+v+l)}function n(g,v,p,y,x,M){if(g!==p||v!==y){var b=x.push(a(x)+"scale(",null,",",null,")");M.push({i:b-4,x:_s(g,p)},{i:b-2,x:_s(v,y)})}else(p!==1||y!==1)&&x.push(a(x)+"scale("+p+","+y+")")}return function(g,v){var p=[],y=[];return g=e(g),v=e(v),m(g.translateX,g.translateY,v.translateX,v.translateY,p,y),d(g.rotate,v.rotate,p,y),i(g.skewX,v.skewX,p,y),n(g.scaleX,g.scaleY,v.scaleX,v.scaleY,p,y),g=v=null,function(x){for(var M=-1,b=y.length,o;++M<b;)p[(o=y[M]).i]=o.x(x);return p.join("")}}}var Jx=Id(Yx,"px, ","px)","deg)"),Xx=Id(Gx,", ",")",")"),Zx=1e-12;function Ya(e){return((e=Math.exp(e))+1/e)/2}function Qx(e){return((e=Math.exp(e))-1/e)/2}function ey(e){return((e=Math.exp(2*e))-1)/(e+1)}const ty=function e(t,r,l){function a(m,d){var i=m[0],n=m[1],g=m[2],v=d[0],p=d[1],y=d[2],x=v-i,M=p-n,b=x*x+M*M,o,c;if(b<Zx)c=Math.log(y/g)/t,o=function(k){return[i+k*x,n+k*M,g*Math.exp(t*k*c)]};else{var u=Math.sqrt(b),h=(y*y-g*g+l*b)/(2*g*r*u),f=(y*y-g*g-l*b)/(2*y*r*u),$=Math.log(Math.sqrt(h*h+1)-h),C=Math.log(Math.sqrt(f*f+1)-f);c=(C-$)/t,o=function(k){var S=k*c,L=Ya($),P=g/(r*u)*(L*ey(t*S+$)-Qx($));return[i+P*x,n+P*M,g*L/Ya(t*S+$)]}}return o.duration=c*1e3*t/Math.SQRT2,o}return a.rho=function(m){var d=Math.max(.001,+m),i=d*d,n=i*i;return e(d,i,n)},a}(Math.SQRT2,2,4);var ui=0,wi=0,fi=0,Bd=1e3,zn,Si,Fn=0,zs=0,Xn=0,Bi=typeof performance=="object"&&performance.now?performance:Date,Nd=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Zl(){return zs||(Nd(ry),zs=Bi.now()+Xn)}function ry(){zs=0}function Hn(){this._call=this._time=this._next=null}Hn.prototype=Ql.prototype={constructor:Hn,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?Zl():+r)+(t==null?0:+t),!this._next&&Si!==this&&(Si?Si._next=this:zn=this,Si=this),this._call=e,this._time=r,zl()},stop:function(){this._call&&(this._call=null,this._time=1/0,zl())}};function Ql(e,t,r){var l=new Hn;return l.restart(e,t,r),l}function sy(){Zl(),++ui;for(var e=zn,t;e;)(t=zs-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ui}function Ga(){zs=(Fn=Bi.now())+Xn,ui=wi=0;try{sy()}finally{ui=0,ny(),zs=0}}function iy(){var e=Bi.now(),t=e-Fn;t>Bd&&(Xn-=t,Fn=e)}function ny(){for(var e,t=zn,r,l=1/0;t;)t._call?(l>t._time&&(l=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:zn=r);Si=e,zl(l)}function zl(e){if(!ui){wi&&(wi=clearTimeout(wi));var t=e-zs;t>24?(e<1/0&&(wi=setTimeout(Ga,e-Bi.now()-Xn)),fi&&(fi=clearInterval(fi))):(fi||(Fn=Bi.now(),fi=setInterval(iy,Bd)),ui=1,Nd(Ga))}}function Ja(e,t,r){var l=new Hn;return t=t==null?0:+t,l.restart(a=>{l.stop(),e(a+t)},t,r),l}var ly=ji("start","end","cancel","interrupt"),oy=[],Od=0,Xa=1,Fl=2,_n=3,Za=4,Hl=5,$n=6;function Zn(e,t,r,l,a,m){var d=e.__transition;if(!d)e.__transition={};else if(r in d)return;ay(e,r,{name:t,index:l,group:a,on:ly,tween:oy,time:m.time,delay:m.delay,duration:m.duration,ease:m.ease,timer:null,state:Od})}function eo(e,t){var r=Ur(e,t);if(r.state>Od)throw new Error("too late; already scheduled");return r}function Zr(e,t){var r=Ur(e,t);if(r.state>_n)throw new Error("too late; already running");return r}function Ur(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function ay(e,t,r){var l=e.__transition,a;l[t]=r,r.timer=Ql(m,0,r.time);function m(g){r.state=Xa,r.timer.restart(d,r.delay,r.time),r.delay<=g&&d(g-r.delay)}function d(g){var v,p,y,x;if(r.state!==Xa)return n();for(v in l)if(x=l[v],x.name===r.name){if(x.state===_n)return Ja(d);x.state===Za?(x.state=$n,x.timer.stop(),x.on.call("interrupt",e,e.__data__,x.index,x.group),delete l[v]):+v<t&&(x.state=$n,x.timer.stop(),x.on.call("cancel",e,e.__data__,x.index,x.group),delete l[v])}if(Ja(function(){r.state===_n&&(r.state=Za,r.timer.restart(i,r.delay,r.time),i(g))}),r.state=Fl,r.on.call("start",e,e.__data__,r.index,r.group),r.state===Fl){for(r.state=_n,a=new Array(y=r.tween.length),v=0,p=-1;v<y;++v)(x=r.tween[v].value.call(e,e.__data__,r.index,r.group))&&(a[++p]=x);a.length=p+1}}function i(g){for(var v=g<r.duration?r.ease.call(null,g/r.duration):(r.timer.restart(n),r.state=Hl,1),p=-1,y=a.length;++p<y;)a[p].call(e,v);r.state===Hl&&(r.on.call("end",e,e.__data__,r.index,r.group),n())}function n(){r.state=$n,r.timer.stop(),delete l[t];for(var g in l)return;delete e.__transition}}function wn(e,t){var r=e.__transition,l,a,m=!0,d;if(r){t=t==null?null:t+"";for(d in r){if((l=r[d]).name!==t){m=!1;continue}a=l.state>Fl&&l.state<Hl,l.state=$n,l.timer.stop(),l.on.call(a?"interrupt":"cancel",e,e.__data__,l.index,l.group),delete r[d]}m&&delete e.__transition}}function cy(e){return this.each(function(){wn(this,e)})}function dy(e,t){var r,l;return function(){var a=Zr(this,e),m=a.tween;if(m!==r){l=r=m;for(var d=0,i=l.length;d<i;++d)if(l[d].name===t){l=l.slice(),l.splice(d,1);break}}a.tween=l}}function uy(e,t,r){var l,a;if(typeof r!="function")throw new Error;return function(){var m=Zr(this,e),d=m.tween;if(d!==l){a=(l=d).slice();for(var i={name:t,value:r},n=0,g=a.length;n<g;++n)if(a[n].name===t){a[n]=i;break}n===g&&a.push(i)}m.tween=a}}function hy(e,t){var r=this._id;if(e+="",arguments.length<2){for(var l=Ur(this.node(),r).tween,a=0,m=l.length,d;a<m;++a)if((d=l[a]).name===e)return d.value;return null}return this.each((t==null?dy:uy)(r,e,t))}function to(e,t,r){var l=e._id;return e.each(function(){var a=Zr(this,l);(a.value||(a.value={}))[t]=r.apply(this,arguments)}),function(a){return Ur(a,l).value[t]}}function zd(e,t){var r;return(typeof t=="number"?_s:t instanceof Ii?qa:(r=Ii(t))?(t=r,qa):Kx)(e,t)}function gy(e){return function(){this.removeAttribute(e)}}function vy(e){return function(){this.removeAttributeNS(e.space,e.local)}}function fy(e,t,r){var l,a=r+"",m;return function(){var d=this.getAttribute(e);return d===a?null:d===l?m:m=t(l=d,r)}}function py(e,t,r){var l,a=r+"",m;return function(){var d=this.getAttributeNS(e.space,e.local);return d===a?null:d===l?m:m=t(l=d,r)}}function my(e,t,r){var l,a,m;return function(){var d,i=r(this),n;return i==null?void this.removeAttribute(e):(d=this.getAttribute(e),n=i+"",d===n?null:d===l&&n===a?m:(a=n,m=t(l=d,i)))}}function by(e,t,r){var l,a,m;return function(){var d,i=r(this),n;return i==null?void this.removeAttributeNS(e.space,e.local):(d=this.getAttributeNS(e.space,e.local),n=i+"",d===n?null:d===l&&n===a?m:(a=n,m=t(l=d,i)))}}function xy(e,t){var r=Jn(e),l=r==="transform"?Xx:zd;return this.attrTween(e,typeof t=="function"?(r.local?by:my)(r,l,to(this,"attr."+e,t)):t==null?(r.local?vy:gy)(r):(r.local?py:fy)(r,l,t))}function yy(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function _y(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function $y(e,t){var r,l;function a(){var m=t.apply(this,arguments);return m!==l&&(r=(l=m)&&_y(e,m)),r}return a._value=t,a}function wy(e,t){var r,l;function a(){var m=t.apply(this,arguments);return m!==l&&(r=(l=m)&&yy(e,m)),r}return a._value=t,a}function Sy(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var l=Jn(e);return this.tween(r,(l.local?$y:wy)(l,t))}function Cy(e,t){return function(){eo(this,e).delay=+t.apply(this,arguments)}}function ky(e,t){return t=+t,function(){eo(this,e).delay=t}}function My(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Cy:ky)(t,e)):Ur(this.node(),t).delay}function Ay(e,t){return function(){Zr(this,e).duration=+t.apply(this,arguments)}}function Ly(e,t){return t=+t,function(){Zr(this,e).duration=t}}function Ey(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ay:Ly)(t,e)):Ur(this.node(),t).duration}function Ty(e,t){if(typeof t!="function")throw new Error;return function(){Zr(this,e).ease=t}}function Dy(e){var t=this._id;return arguments.length?this.each(Ty(t,e)):Ur(this.node(),t).ease}function Ry(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;Zr(this,e).ease=r}}function Py(e){if(typeof e!="function")throw new Error;return this.each(Ry(this._id,e))}function Iy(e){typeof e!="function"&&(e=bd(e));for(var t=this._groups,r=t.length,l=new Array(r),a=0;a<r;++a)for(var m=t[a],d=m.length,i=l[a]=[],n,g=0;g<d;++g)(n=m[g])&&e.call(n,n.__data__,g,m)&&i.push(n);return new fs(l,this._parents,this._name,this._id)}function By(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,l=t.length,a=r.length,m=Math.min(l,a),d=new Array(l),i=0;i<m;++i)for(var n=t[i],g=r[i],v=n.length,p=d[i]=new Array(v),y,x=0;x<v;++x)(y=n[x]||g[x])&&(p[x]=y);for(;i<l;++i)d[i]=t[i];return new fs(d,this._parents,this._name,this._id)}function Ny(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function Oy(e,t,r){var l,a,m=Ny(t)?eo:Zr;return function(){var d=m(this,e),i=d.on;i!==l&&(a=(l=i).copy()).on(t,r),d.on=a}}function zy(e,t){var r=this._id;return arguments.length<2?Ur(this.node(),r).on.on(e):this.each(Oy(r,e,t))}function Fy(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function Hy(){return this.on("end.remove",Fy(this._id))}function jy(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Yl(e));for(var l=this._groups,a=l.length,m=new Array(a),d=0;d<a;++d)for(var i=l[d],n=i.length,g=m[d]=new Array(n),v,p,y=0;y<n;++y)(v=i[y])&&(p=e.call(v,v.__data__,y,i))&&("__data__"in v&&(p.__data__=v.__data__),g[y]=p,Zn(g[y],t,r,y,g,Ur(v,r)));return new fs(m,this._parents,t,r)}function Uy(e){var t=this._name,r=this._id;typeof e!="function"&&(e=md(e));for(var l=this._groups,a=l.length,m=[],d=[],i=0;i<a;++i)for(var n=l[i],g=n.length,v,p=0;p<g;++p)if(v=n[p]){for(var y=e.call(v,v.__data__,p,n),x,M=Ur(v,r),b=0,o=y.length;b<o;++b)(x=y[b])&&Zn(x,t,r,b,y,M);m.push(y),d.push(v)}return new fs(m,d,t,r)}var Vy=Ui.prototype.constructor;function Wy(){return new Vy(this._groups,this._parents)}function qy(e,t){var r,l,a;return function(){var m=di(this,e),d=(this.style.removeProperty(e),di(this,e));return m===d?null:m===r&&d===l?a:a=t(r=m,l=d)}}function Fd(e){return function(){this.style.removeProperty(e)}}function Ky(e,t,r){var l,a=r+"",m;return function(){var d=di(this,e);return d===a?null:d===l?m:m=t(l=d,r)}}function Yy(e,t,r){var l,a,m;return function(){var d=di(this,e),i=r(this),n=i+"";return i==null&&(n=i=(this.style.removeProperty(e),di(this,e))),d===n?null:d===l&&n===a?m:(a=n,m=t(l=d,i))}}function Gy(e,t){var r,l,a,m="style."+t,d="end."+m,i;return function(){var n=Zr(this,e),g=n.on,v=n.value[m]==null?i||(i=Fd(t)):void 0;(g!==r||a!==v)&&(l=(r=g).copy()).on(d,a=v),n.on=l}}function Jy(e,t,r){var l=(e+="")=="transform"?Jx:zd;return t==null?this.styleTween(e,qy(e,l)).on("end.style."+e,Fd(e)):typeof t=="function"?this.styleTween(e,Yy(e,l,to(this,"style."+e,t))).each(Gy(this._id,e)):this.styleTween(e,Ky(e,l,t),r).on("end.style."+e,null)}function Xy(e,t,r){return function(l){this.style.setProperty(e,t.call(this,l),r)}}function Zy(e,t,r){var l,a;function m(){var d=t.apply(this,arguments);return d!==a&&(l=(a=d)&&Xy(e,d,r)),l}return m._value=t,m}function Qy(e,t,r){var l="style."+(e+="");if(arguments.length<2)return(l=this.tween(l))&&l._value;if(t==null)return this.tween(l,null);if(typeof t!="function")throw new Error;return this.tween(l,Zy(e,t,r??""))}function e2(e){return function(){this.textContent=e}}function t2(e){return function(){var t=e(this);this.textContent=t??""}}function r2(e){return this.tween("text",typeof e=="function"?t2(to(this,"text",e)):e2(e==null?"":e+""))}function s2(e){return function(t){this.textContent=e.call(this,t)}}function i2(e){var t,r;function l(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&s2(a)),t}return l._value=e,l}function n2(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,i2(e))}function l2(){for(var e=this._name,t=this._id,r=Hd(),l=this._groups,a=l.length,m=0;m<a;++m)for(var d=l[m],i=d.length,n,g=0;g<i;++g)if(n=d[g]){var v=Ur(n,t);Zn(n,e,r,g,d,{time:v.time+v.delay+v.duration,delay:0,duration:v.duration,ease:v.ease})}return new fs(l,this._parents,e,r)}function o2(){var e,t,r=this,l=r._id,a=r.size();return new Promise(function(m,d){var i={value:d},n={value:function(){--a===0&&m()}};r.each(function(){var g=Zr(this,l),v=g.on;v!==e&&(t=(e=v).copy(),t._.cancel.push(i),t._.interrupt.push(i),t._.end.push(n)),g.on=t}),a===0&&m()})}var a2=0;function fs(e,t,r,l){this._groups=e,this._parents=t,this._name=r,this._id=l}function Hd(){return++a2}var as=Ui.prototype;fs.prototype={constructor:fs,select:jy,selectAll:Uy,selectChild:as.selectChild,selectChildren:as.selectChildren,filter:Iy,merge:By,selection:Wy,transition:l2,call:as.call,nodes:as.nodes,node:as.node,size:as.size,empty:as.empty,each:as.each,on:zy,attr:xy,attrTween:Sy,style:Jy,styleTween:Qy,text:r2,textTween:n2,remove:Hy,tween:hy,delay:My,duration:Ey,ease:Dy,easeVarying:Py,end:o2,[Symbol.iterator]:as[Symbol.iterator]};function c2(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var d2={time:null,delay:0,duration:250,ease:c2};function u2(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function h2(e){var t,r;e instanceof fs?(t=e._id,e=e._name):(t=Hd(),(r=d2).time=Zl(),e=e==null?null:e+"");for(var l=this._groups,a=l.length,m=0;m<a;++m)for(var d=l[m],i=d.length,n,g=0;g<i;++g)(n=d[g])&&Zn(n,e,t,g,d,r||u2(n,t));return new fs(l,this._parents,e,t)}Ui.prototype.interrupt=cy;Ui.prototype.transition=h2;function ro(e,t){var r,l=1;e==null&&(e=0),t==null&&(t=0);function a(){var m,d=r.length,i,n=0,g=0;for(m=0;m<d;++m)i=r[m],n+=i.x,g+=i.y;for(n=(n/d-e)*l,g=(g/d-t)*l,m=0;m<d;++m)i=r[m],i.x-=n,i.y-=g}return a.initialize=function(m){r=m},a.x=function(m){return arguments.length?(e=+m,a):e},a.y=function(m){return arguments.length?(t=+m,a):t},a.strength=function(m){return arguments.length?(l=+m,a):l},a}function g2(e){const t=+this._x.call(null,e),r=+this._y.call(null,e);return jd(this.cover(t,r),t,r,e)}function jd(e,t,r,l){if(isNaN(t)||isNaN(r))return e;var a,m=e._root,d={data:l},i=e._x0,n=e._y0,g=e._x1,v=e._y1,p,y,x,M,b,o,c,u;if(!m)return e._root=d,e;for(;m.length;)if((b=t>=(p=(i+g)/2))?i=p:g=p,(o=r>=(y=(n+v)/2))?n=y:v=y,a=m,!(m=m[c=o<<1|b]))return a[c]=d,e;if(x=+e._x.call(null,m.data),M=+e._y.call(null,m.data),t===x&&r===M)return d.next=m,a?a[c]=d:e._root=d,e;do a=a?a[c]=new Array(4):e._root=new Array(4),(b=t>=(p=(i+g)/2))?i=p:g=p,(o=r>=(y=(n+v)/2))?n=y:v=y;while((c=o<<1|b)===(u=(M>=y)<<1|x>=p));return a[u]=m,a[c]=d,e}function v2(e){var t,r,l=e.length,a,m,d=new Array(l),i=new Array(l),n=1/0,g=1/0,v=-1/0,p=-1/0;for(r=0;r<l;++r)isNaN(a=+this._x.call(null,t=e[r]))||isNaN(m=+this._y.call(null,t))||(d[r]=a,i[r]=m,a<n&&(n=a),a>v&&(v=a),m<g&&(g=m),m>p&&(p=m));if(n>v||g>p)return this;for(this.cover(n,g).cover(v,p),r=0;r<l;++r)jd(this,d[r],i[r],e[r]);return this}function f2(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var r=this._x0,l=this._y0,a=this._x1,m=this._y1;if(isNaN(r))a=(r=Math.floor(e))+1,m=(l=Math.floor(t))+1;else{for(var d=a-r||1,i=this._root,n,g;r>e||e>=a||l>t||t>=m;)switch(g=(t<l)<<1|e<r,n=new Array(4),n[g]=i,i=n,d*=2,g){case 0:a=r+d,m=l+d;break;case 1:r=a-d,m=l+d;break;case 2:a=r+d,l=m-d;break;case 3:r=a-d,l=m-d;break}this._root&&this._root.length&&(this._root=i)}return this._x0=r,this._y0=l,this._x1=a,this._y1=m,this}function p2(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function m2(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function _r(e,t,r,l,a){this.node=e,this.x0=t,this.y0=r,this.x1=l,this.y1=a}function b2(e,t,r){var l,a=this._x0,m=this._y0,d,i,n,g,v=this._x1,p=this._y1,y=[],x=this._root,M,b;for(x&&y.push(new _r(x,a,m,v,p)),r==null?r=1/0:(a=e-r,m=t-r,v=e+r,p=t+r,r*=r);M=y.pop();)if(!(!(x=M.node)||(d=M.x0)>v||(i=M.y0)>p||(n=M.x1)<a||(g=M.y1)<m))if(x.length){var o=(d+n)/2,c=(i+g)/2;y.push(new _r(x[3],o,c,n,g),new _r(x[2],d,c,o,g),new _r(x[1],o,i,n,c),new _r(x[0],d,i,o,c)),(b=(t>=c)<<1|e>=o)&&(M=y[y.length-1],y[y.length-1]=y[y.length-1-b],y[y.length-1-b]=M)}else{var u=e-+this._x.call(null,x.data),h=t-+this._y.call(null,x.data),f=u*u+h*h;if(f<r){var $=Math.sqrt(r=f);a=e-$,m=t-$,v=e+$,p=t+$,l=x.data}}return l}function x2(e){if(isNaN(v=+this._x.call(null,e))||isNaN(p=+this._y.call(null,e)))return this;var t,r=this._root,l,a,m,d=this._x0,i=this._y0,n=this._x1,g=this._y1,v,p,y,x,M,b,o,c;if(!r)return this;if(r.length)for(;;){if((M=v>=(y=(d+n)/2))?d=y:n=y,(b=p>=(x=(i+g)/2))?i=x:g=x,t=r,!(r=r[o=b<<1|M]))return this;if(!r.length)break;(t[o+1&3]||t[o+2&3]||t[o+3&3])&&(l=t,c=o)}for(;r.data!==e;)if(a=r,!(r=r.next))return this;return(m=r.next)&&delete r.next,a?(m?a.next=m:delete a.next,this):t?(m?t[o]=m:delete t[o],(r=t[0]||t[1]||t[2]||t[3])&&r===(t[3]||t[2]||t[1]||t[0])&&!r.length&&(l?l[c]=r:this._root=r),this):(this._root=m,this)}function y2(e){for(var t=0,r=e.length;t<r;++t)this.remove(e[t]);return this}function _2(){return this._root}function $2(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function w2(e){var t=[],r,l=this._root,a,m,d,i,n;for(l&&t.push(new _r(l,this._x0,this._y0,this._x1,this._y1));r=t.pop();)if(!e(l=r.node,m=r.x0,d=r.y0,i=r.x1,n=r.y1)&&l.length){var g=(m+i)/2,v=(d+n)/2;(a=l[3])&&t.push(new _r(a,g,v,i,n)),(a=l[2])&&t.push(new _r(a,m,v,g,n)),(a=l[1])&&t.push(new _r(a,g,d,i,v)),(a=l[0])&&t.push(new _r(a,m,d,g,v))}return this}function S2(e){var t=[],r=[],l;for(this._root&&t.push(new _r(this._root,this._x0,this._y0,this._x1,this._y1));l=t.pop();){var a=l.node;if(a.length){var m,d=l.x0,i=l.y0,n=l.x1,g=l.y1,v=(d+n)/2,p=(i+g)/2;(m=a[0])&&t.push(new _r(m,d,i,v,p)),(m=a[1])&&t.push(new _r(m,v,i,n,p)),(m=a[2])&&t.push(new _r(m,d,p,v,g)),(m=a[3])&&t.push(new _r(m,v,p,n,g))}r.push(l)}for(;l=r.pop();)e(l.node,l.x0,l.y0,l.x1,l.y1);return this}function C2(e){return e[0]}function k2(e){return arguments.length?(this._x=e,this):this._x}function M2(e){return e[1]}function A2(e){return arguments.length?(this._y=e,this):this._y}function so(e,t,r){var l=new io(t??C2,r??M2,NaN,NaN,NaN,NaN);return e==null?l:l.addAll(e)}function io(e,t,r,l,a,m){this._x=e,this._y=t,this._x0=r,this._y0=l,this._x1=a,this._y1=m,this._root=void 0}function Qa(e){for(var t={data:e.data},r=t;e=e.next;)r=r.next={data:e.data};return t}var Cr=so.prototype=io.prototype;Cr.copy=function(){var e=new io(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,r,l;if(!t)return e;if(!t.length)return e._root=Qa(t),e;for(r=[{source:t,target:e._root=new Array(4)}];t=r.pop();)for(var a=0;a<4;++a)(l=t.source[a])&&(l.length?r.push({source:l,target:t.target[a]=new Array(4)}):t.target[a]=Qa(l));return e};Cr.add=g2;Cr.addAll=v2;Cr.cover=f2;Cr.data=p2;Cr.extent=m2;Cr.find=b2;Cr.remove=x2;Cr.removeAll=y2;Cr.root=_2;Cr.size=$2;Cr.visit=w2;Cr.visitAfter=S2;Cr.x=k2;Cr.y=A2;function $r(e){return function(){return e}}function ws(e){return(e()-.5)*1e-6}function L2(e){return e.x+e.vx}function E2(e){return e.y+e.vy}function no(e){var t,r,l,a=1,m=1;typeof e!="function"&&(e=$r(e==null?1:+e));function d(){for(var g,v=t.length,p,y,x,M,b,o,c=0;c<m;++c)for(p=so(t,L2,E2).visitAfter(i),g=0;g<v;++g)y=t[g],b=r[y.index],o=b*b,x=y.x+y.vx,M=y.y+y.vy,p.visit(u);function u(h,f,$,C,k){var S=h.data,L=h.r,P=b+L;if(S){if(S.index>y.index){var I=x-S.x-S.vx,D=M-S.y-S.vy,T=I*I+D*D;T<P*P&&(I===0&&(I=ws(l),T+=I*I),D===0&&(D=ws(l),T+=D*D),T=(P-(T=Math.sqrt(T)))/T*a,y.vx+=(I*=T)*(P=(L*=L)/(o+L)),y.vy+=(D*=T)*P,S.vx-=I*(P=1-P),S.vy-=D*P)}return}return f>x+P||C<x-P||$>M+P||k<M-P}}function i(g){if(g.data)return g.r=r[g.data.index];for(var v=g.r=0;v<4;++v)g[v]&&g[v].r>g.r&&(g.r=g[v].r)}function n(){if(t){var g,v=t.length,p;for(r=new Array(v),g=0;g<v;++g)p=t[g],r[p.index]=+e(p,g,t)}}return d.initialize=function(g,v){t=g,l=v,n()},d.iterations=function(g){return arguments.length?(m=+g,d):m},d.strength=function(g){return arguments.length?(a=+g,d):a},d.radius=function(g){return arguments.length?(e=typeof g=="function"?g:$r(+g),n(),d):e},d}function T2(e){return e.index}function ec(e,t){var r=e.get(t);if(!r)throw new Error("node not found: "+t);return r}function lo(e){var t=T2,r=p,l,a=$r(30),m,d,i,n,g,v=1;e==null&&(e=[]);function p(o){return 1/Math.min(i[o.source.index],i[o.target.index])}function y(o){for(var c=0,u=e.length;c<v;++c)for(var h=0,f,$,C,k,S,L,P;h<u;++h)f=e[h],$=f.source,C=f.target,k=C.x+C.vx-$.x-$.vx||ws(g),S=C.y+C.vy-$.y-$.vy||ws(g),L=Math.sqrt(k*k+S*S),L=(L-m[h])/L*o*l[h],k*=L,S*=L,C.vx-=k*(P=n[h]),C.vy-=S*P,$.vx+=k*(P=1-P),$.vy+=S*P}function x(){if(d){var o,c=d.length,u=e.length,h=new Map(d.map(($,C)=>[t($,C,d),$])),f;for(o=0,i=new Array(c);o<u;++o)f=e[o],f.index=o,typeof f.source!="object"&&(f.source=ec(h,f.source)),typeof f.target!="object"&&(f.target=ec(h,f.target)),i[f.source.index]=(i[f.source.index]||0)+1,i[f.target.index]=(i[f.target.index]||0)+1;for(o=0,n=new Array(u);o<u;++o)f=e[o],n[o]=i[f.source.index]/(i[f.source.index]+i[f.target.index]);l=new Array(u),M(),m=new Array(u),b()}}function M(){if(d)for(var o=0,c=e.length;o<c;++o)l[o]=+r(e[o],o,e)}function b(){if(d)for(var o=0,c=e.length;o<c;++o)m[o]=+a(e[o],o,e)}return y.initialize=function(o,c){d=o,g=c,x()},y.links=function(o){return arguments.length?(e=o,x(),y):e},y.id=function(o){return arguments.length?(t=o,y):t},y.iterations=function(o){return arguments.length?(v=+o,y):v},y.strength=function(o){return arguments.length?(r=typeof o=="function"?o:$r(+o),M(),y):r},y.distance=function(o){return arguments.length?(a=typeof o=="function"?o:$r(+o),b(),y):a},y}const D2=1664525,R2=1013904223,tc=4294967296;function P2(){let e=1;return()=>(e=(D2*e+R2)%tc)/tc}function I2(e){return e.x}function B2(e){return e.y}var N2=10,O2=Math.PI*(3-Math.sqrt(5));function oo(e){var t,r=1,l=.001,a=1-Math.pow(l,1/300),m=0,d=.6,i=new Map,n=Ql(p),g=ji("tick","end"),v=P2();e==null&&(e=[]);function p(){y(),g.call("tick",t),r<l&&(n.stop(),g.call("end",t))}function y(b){var o,c=e.length,u;b===void 0&&(b=1);for(var h=0;h<b;++h)for(r+=(m-r)*a,i.forEach(function(f){f(r)}),o=0;o<c;++o)u=e[o],u.fx==null?u.x+=u.vx*=d:(u.x=u.fx,u.vx=0),u.fy==null?u.y+=u.vy*=d:(u.y=u.fy,u.vy=0);return t}function x(){for(var b=0,o=e.length,c;b<o;++b){if(c=e[b],c.index=b,c.fx!=null&&(c.x=c.fx),c.fy!=null&&(c.y=c.fy),isNaN(c.x)||isNaN(c.y)){var u=N2*Math.sqrt(.5+b),h=b*O2;c.x=u*Math.cos(h),c.y=u*Math.sin(h)}(isNaN(c.vx)||isNaN(c.vy))&&(c.vx=c.vy=0)}}function M(b){return b.initialize&&b.initialize(e,v),b}return x(),t={tick:y,restart:function(){return n.restart(p),t},stop:function(){return n.stop(),t},nodes:function(b){return arguments.length?(e=b,x(),i.forEach(M),t):e},alpha:function(b){return arguments.length?(r=+b,t):r},alphaMin:function(b){return arguments.length?(l=+b,t):l},alphaDecay:function(b){return arguments.length?(a=+b,t):+a},alphaTarget:function(b){return arguments.length?(m=+b,t):m},velocityDecay:function(b){return arguments.length?(d=1-b,t):1-d},randomSource:function(b){return arguments.length?(v=b,i.forEach(M),t):v},force:function(b,o){return arguments.length>1?(o==null?i.delete(b):i.set(b,M(o)),t):i.get(b)},find:function(b,o,c){var u=0,h=e.length,f,$,C,k,S;for(c==null?c=1/0:c*=c,u=0;u<h;++u)k=e[u],f=b-k.x,$=o-k.y,C=f*f+$*$,C<c&&(S=k,c=C);return S},on:function(b,o){return arguments.length>1?(g.on(b,o),t):g.on(b)}}}function ao(){var e,t,r,l,a=$r(-30),m,d=1,i=1/0,n=.81;function g(x){var M,b=e.length,o=so(e,I2,B2).visitAfter(p);for(l=x,M=0;M<b;++M)t=e[M],o.visit(y)}function v(){if(e){var x,M=e.length,b;for(m=new Array(M),x=0;x<M;++x)b=e[x],m[b.index]=+a(b,x,e)}}function p(x){var M=0,b,o,c=0,u,h,f;if(x.length){for(u=h=f=0;f<4;++f)(b=x[f])&&(o=Math.abs(b.value))&&(M+=b.value,c+=o,u+=o*b.x,h+=o*b.y);x.x=u/c,x.y=h/c}else{b=x,b.x=b.data.x,b.y=b.data.y;do M+=m[b.data.index];while(b=b.next)}x.value=M}function y(x,M,b,o){if(!x.value)return!0;var c=x.x-t.x,u=x.y-t.y,h=o-M,f=c*c+u*u;if(h*h/n<f)return f<i&&(c===0&&(c=ws(r),f+=c*c),u===0&&(u=ws(r),f+=u*u),f<d&&(f=Math.sqrt(d*f)),t.vx+=c*x.value*l/f,t.vy+=u*x.value*l/f),!0;if(x.length||f>=i)return;(x.data!==t||x.next)&&(c===0&&(c=ws(r),f+=c*c),u===0&&(u=ws(r),f+=u*u),f<d&&(f=Math.sqrt(d*f)));do x.data!==t&&(h=m[x.data.index]*l/f,t.vx+=c*h,t.vy+=u*h);while(x=x.next)}return g.initialize=function(x,M){e=x,r=M,v()},g.strength=function(x){return arguments.length?(a=typeof x=="function"?x:$r(+x),v(),g):a},g.distanceMin=function(x){return arguments.length?(d=x*x,g):Math.sqrt(d)},g.distanceMax=function(x){return arguments.length?(i=x*x,g):Math.sqrt(i)},g.theta=function(x){return arguments.length?(n=x*x,g):Math.sqrt(n)},g}function z2(e){var t=$r(.1),r,l,a;typeof e!="function"&&(e=$r(e==null?0:+e));function m(i){for(var n=0,g=r.length,v;n<g;++n)v=r[n],v.vx+=(a[n]-v.x)*l[n]*i}function d(){if(r){var i,n=r.length;for(l=new Array(n),a=new Array(n),i=0;i<n;++i)l[i]=isNaN(a[i]=+e(r[i],i,r))?0:+t(r[i],i,r)}}return m.initialize=function(i){r=i,d()},m.strength=function(i){return arguments.length?(t=typeof i=="function"?i:$r(+i),d(),m):t},m.x=function(i){return arguments.length?(e=typeof i=="function"?i:$r(+i),d(),m):e},m}function F2(e){var t=$r(.1),r,l,a;typeof e!="function"&&(e=$r(e==null?0:+e));function m(i){for(var n=0,g=r.length,v;n<g;++n)v=r[n],v.vy+=(a[n]-v.y)*l[n]*i}function d(){if(r){var i,n=r.length;for(l=new Array(n),a=new Array(n),i=0;i<n;++i)l[i]=isNaN(a[i]=+e(r[i],i,r))?0:+t(r[i],i,r)}}return m.initialize=function(i){r=i,d()},m.strength=function(i){return arguments.length?(t=typeof i=="function"?i:$r(+i),d(),m):t},m.y=function(i){return arguments.length?(e=typeof i=="function"?i:$r(+i),d(),m):e},m}const un=e=>()=>e;function H2(e,{sourceEvent:t,target:r,transform:l,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:l,enumerable:!0,configurable:!0},_:{value:a}})}function hs(e,t,r){this.k=e,this.x=t,this.y=r}hs.prototype={constructor:hs,scale:function(e){return e===1?this:new hs(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new hs(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var co=new hs(1,0,0);hs.prototype;function hl(e){e.stopImmediatePropagation()}function pi(e){e.preventDefault(),e.stopImmediatePropagation()}function j2(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function U2(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function rc(){return this.__zoom||co}function V2(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function W2(){return navigator.maxTouchPoints||"ontouchstart"in this}function q2(e,t,r){var l=e.invertX(t[0][0])-r[0][0],a=e.invertX(t[1][0])-r[1][0],m=e.invertY(t[0][1])-r[0][1],d=e.invertY(t[1][1])-r[1][1];return e.translate(a>l?(l+a)/2:Math.min(0,l)||Math.max(0,a),d>m?(m+d)/2:Math.min(0,m)||Math.max(0,d))}function uo(){var e=j2,t=U2,r=q2,l=V2,a=W2,m=[0,1/0],d=[[-1/0,-1/0],[1/0,1/0]],i=250,n=ty,g=ji("start","zoom","end"),v,p,y,x=500,M=150,b=0,o=10;function c(B){B.property("__zoom",rc).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",L).on("dblclick.zoom",P).filter(a).on("touchstart.zoom",I).on("touchmove.zoom",D).on("touchend.zoom touchcancel.zoom",T).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}c.transform=function(B,N,O,H){var A=B.selection?B.selection():B;A.property("__zoom",rc),B!==A?$(B,N,O,H):A.interrupt().each(function(){C(this,arguments).event(H).start().zoom(null,typeof N=="function"?N.apply(this,arguments):N).end()})},c.scaleBy=function(B,N,O,H){c.scaleTo(B,function(){var A=this.__zoom.k,z=typeof N=="function"?N.apply(this,arguments):N;return A*z},O,H)},c.scaleTo=function(B,N,O,H){c.transform(B,function(){var A=t.apply(this,arguments),z=this.__zoom,F=O==null?f(A):typeof O=="function"?O.apply(this,arguments):O,j=z.invert(F),q=typeof N=="function"?N.apply(this,arguments):N;return r(h(u(z,q),F,j),A,d)},O,H)},c.translateBy=function(B,N,O,H){c.transform(B,function(){return r(this.__zoom.translate(typeof N=="function"?N.apply(this,arguments):N,typeof O=="function"?O.apply(this,arguments):O),t.apply(this,arguments),d)},null,H)},c.translateTo=function(B,N,O,H,A){c.transform(B,function(){var z=t.apply(this,arguments),F=this.__zoom,j=H==null?f(z):typeof H=="function"?H.apply(this,arguments):H;return r(co.translate(j[0],j[1]).scale(F.k).translate(typeof N=="function"?-N.apply(this,arguments):-N,typeof O=="function"?-O.apply(this,arguments):-O),z,d)},H,A)};function u(B,N){return N=Math.max(m[0],Math.min(m[1],N)),N===B.k?B:new hs(N,B.x,B.y)}function h(B,N,O){var H=N[0]-O[0]*B.k,A=N[1]-O[1]*B.k;return H===B.x&&A===B.y?B:new hs(B.k,H,A)}function f(B){return[(+B[0][0]+ +B[1][0])/2,(+B[0][1]+ +B[1][1])/2]}function $(B,N,O,H){B.on("start.zoom",function(){C(this,arguments).event(H).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(H).end()}).tween("zoom",function(){var A=this,z=arguments,F=C(A,z).event(H),j=t.apply(A,z),q=O==null?f(j):typeof O=="function"?O.apply(A,z):O,U=Math.max(j[1][0]-j[0][0],j[1][1]-j[0][1]),Y=A.__zoom,V=typeof N=="function"?N.apply(A,z):N,X=n(Y.invert(q).concat(U/Y.k),V.invert(q).concat(U/V.k));return function(R){if(R===1)R=V;else{var G=X(R),te=U/G[2];R=new hs(te,q[0]-G[0]*te,q[1]-G[1]*te)}F.zoom(null,R)}})}function C(B,N,O){return!O&&B.__zooming||new k(B,N)}function k(B,N){this.that=B,this.args=N,this.active=0,this.sourceEvent=null,this.extent=t.apply(B,N),this.taps=0}k.prototype={event:function(B){return B&&(this.sourceEvent=B),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(B,N){return this.mouse&&B!=="mouse"&&(this.mouse[1]=N.invert(this.mouse[0])),this.touch0&&B!=="touch"&&(this.touch0[1]=N.invert(this.touch0[0])),this.touch1&&B!=="touch"&&(this.touch1[1]=N.invert(this.touch1[0])),this.that.__zoom=N,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(B){var N=lr(this.that).datum();g.call(B,this.that,new H2(B,{sourceEvent:this.sourceEvent,target:c,transform:this.that.__zoom,dispatch:g}),N)}};function S(B,...N){if(!e.apply(this,arguments))return;var O=C(this,N).event(B),H=this.__zoom,A=Math.max(m[0],Math.min(m[1],H.k*Math.pow(2,l.apply(this,arguments)))),z=ds(B);if(O.wheel)(O.mouse[0][0]!==z[0]||O.mouse[0][1]!==z[1])&&(O.mouse[1]=H.invert(O.mouse[0]=z)),clearTimeout(O.wheel);else{if(H.k===A)return;O.mouse=[z,H.invert(z)],wn(this),O.start()}pi(B),O.wheel=setTimeout(F,M),O.zoom("mouse",r(h(u(H,A),O.mouse[0],O.mouse[1]),O.extent,d));function F(){O.wheel=null,O.end()}}function L(B,...N){if(y||!e.apply(this,arguments))return;var O=B.currentTarget,H=C(this,N,!0).event(B),A=lr(B.view).on("mousemove.zoom",q,!0).on("mouseup.zoom",U,!0),z=ds(B,O),F=B.clientX,j=B.clientY;Ad(B.view),hl(B),H.mouse=[z,this.__zoom.invert(z)],wn(this),H.start();function q(Y){if(pi(Y),!H.moved){var V=Y.clientX-F,X=Y.clientY-j;H.moved=V*V+X*X>b}H.event(Y).zoom("mouse",r(h(H.that.__zoom,H.mouse[0]=ds(Y,O),H.mouse[1]),H.extent,d))}function U(Y){A.on("mousemove.zoom mouseup.zoom",null),Ld(Y.view,H.moved),pi(Y),H.event(Y).end()}}function P(B,...N){if(e.apply(this,arguments)){var O=this.__zoom,H=ds(B.changedTouches?B.changedTouches[0]:B,this),A=O.invert(H),z=O.k*(B.shiftKey?.5:2),F=r(h(u(O,z),H,A),t.apply(this,N),d);pi(B),i>0?lr(this).transition().duration(i).call($,F,H,B):lr(this).call(c.transform,F,H,B)}}function I(B,...N){if(e.apply(this,arguments)){var O=B.touches,H=O.length,A=C(this,N,B.changedTouches.length===H).event(B),z,F,j,q;for(hl(B),F=0;F<H;++F)j=O[F],q=ds(j,this),q=[q,this.__zoom.invert(q),j.identifier],A.touch0?!A.touch1&&A.touch0[2]!==q[2]&&(A.touch1=q,A.taps=0):(A.touch0=q,z=!0,A.taps=1+!!v);v&&(v=clearTimeout(v)),z&&(A.taps<2&&(p=q[0],v=setTimeout(function(){v=null},x)),wn(this),A.start())}}function D(B,...N){if(this.__zooming){var O=C(this,N).event(B),H=B.changedTouches,A=H.length,z,F,j,q;for(pi(B),z=0;z<A;++z)F=H[z],j=ds(F,this),O.touch0&&O.touch0[2]===F.identifier?O.touch0[0]=j:O.touch1&&O.touch1[2]===F.identifier&&(O.touch1[0]=j);if(F=O.that.__zoom,O.touch1){var U=O.touch0[0],Y=O.touch0[1],V=O.touch1[0],X=O.touch1[1],R=(R=V[0]-U[0])*R+(R=V[1]-U[1])*R,G=(G=X[0]-Y[0])*G+(G=X[1]-Y[1])*G;F=u(F,Math.sqrt(R/G)),j=[(U[0]+V[0])/2,(U[1]+V[1])/2],q=[(Y[0]+X[0])/2,(Y[1]+X[1])/2]}else if(O.touch0)j=O.touch0[0],q=O.touch0[1];else return;O.zoom("touch",r(h(F,j,q),O.extent,d))}}function T(B,...N){if(this.__zooming){var O=C(this,N).event(B),H=B.changedTouches,A=H.length,z,F;for(hl(B),y&&clearTimeout(y),y=setTimeout(function(){y=null},x),z=0;z<A;++z)F=H[z],O.touch0&&O.touch0[2]===F.identifier?delete O.touch0:O.touch1&&O.touch1[2]===F.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(F=ds(F,this),Math.hypot(p[0]-F[0],p[1]-F[1])<o)){var j=lr(this).on("dblclick.zoom");j&&j.apply(this,arguments)}}}return c.wheelDelta=function(B){return arguments.length?(l=typeof B=="function"?B:un(+B),c):l},c.filter=function(B){return arguments.length?(e=typeof B=="function"?B:un(!!B),c):e},c.touchable=function(B){return arguments.length?(a=typeof B=="function"?B:un(!!B),c):a},c.extent=function(B){return arguments.length?(t=typeof B=="function"?B:un([[+B[0][0],+B[0][1]],[+B[1][0],+B[1][1]]]),c):t},c.scaleExtent=function(B){return arguments.length?(m[0]=+B[0],m[1]=+B[1],c):[m[0],m[1]]},c.translateExtent=function(B){return arguments.length?(d[0][0]=+B[0][0],d[1][0]=+B[1][0],d[0][1]=+B[0][1],d[1][1]=+B[1][1],c):[[d[0][0],d[0][1]],[d[1][0],d[1][1]]]},c.constrain=function(B){return arguments.length?(r=B,c):r},c.duration=function(B){return arguments.length?(i=+B,c):i},c.interpolate=function(B){return arguments.length?(n=B,c):n},c.on=function(){var B=g.on.apply(g,arguments);return B===g?c:B},c.clickDistance=function(B){return arguments.length?(b=(B=+B)*B,c):Math.sqrt(b)},c.tapDistance=function(B){return arguments.length?(o=+B,c):o},c}var K2=w('<div class="flex items-center justify-center h-64"><div class=text-center><div class="inline-block w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"></div><p style=color:var(--text-muted)>Loading traffic data...'),Y2=w('<div class="rounded-lg border overflow-hidden"style=background:var(--bg-card);borderColor:var(--border-color);minHeight:600px><svg class="w-full h-full">'),G2=w('<div class="flex items-center gap-6 p-4 rounded-lg"style=background:var(--bg-secondary)><div class="flex items-center gap-2"><div class="w-4 h-4 rounded-full"style=background:#06b6d4></div><span class=text-sm style=color:var(--text-secondary)>Services</span></div><div class="flex items-center gap-2"><div class="w-4 h-4 rounded-full"style=background:#3b82f6></div><span class=text-sm style=color:var(--text-secondary)>Deployments</span></div><div class="flex items-center gap-2"><div class="w-4 h-4 rounded-full"style=background:#ec4899></div><span class=text-sm style=color:var(--text-secondary)>Pods</span></div><div class="flex items-center gap-2"><svg class="w-4 h-4"style=color:#94a3b8><line x1=0 y1=0 x2=20 y2=0 stroke=currentColor stroke-width=2></line></svg><span class=text-sm style=color:var(--text-secondary)>Traffic Flow'),J2=w('<div class="flex items-center justify-center h-64"><p style=color:var(--text-muted)>No services found in this namespace'),X2=w('<div class=space-y-4><div class="flex items-center justify-between"><div><h2 class="text-xl font-bold"style=color:var(--text-primary)>Traffic Map</h2><p class=text-sm style=color:var(--text-secondary)>Service mesh traffic visualization  Services  Pods  Deployments</p></div><button class="px-3 py-2 rounded-lg text-sm hover:bg-[var(--bg-tertiary)]"style=background:var(--bg-secondary);color:var(--text-primary)>Reset Layout');const Z2=()=>{const[e]=it(()=>Xt(),async m=>{const d=await Fe.getServices(m==="_all"?void 0:m),i=await Fe.getPods(m==="_all"?void 0:m),n=await Fe.getDeployments(m==="_all"?void 0:m);return{services:d||[],pods:i||[],deployments:n||[]}});let t,r,l=null;const a=()=>{if(!t||!e()||!r)return;const m=e();if(!m||m.services.length===0)return;lr(t).selectAll("*").remove(),l&&l.stop();const d=r.clientWidth||1e3,i=600,n=lr(t).attr("width",d).attr("height",i).attr("viewBox",[0,0,d,i]),g=n.append("g"),v=uo().scaleExtent([.2,4]).on("zoom",b=>{g.attr("transform",b.transform)});n.call(v);const p=m.services.map(b=>({id:`service-${b.namespace}-${b.name}`,name:b.name,namespace:b.namespace||"default",type:"service",status:"running",endpoints:b.endpoints?.length||0,x:Math.random()*d,y:Math.random()*i}));m.deployments.forEach(b=>{p.push({id:`deployment-${b.namespace}-${b.name}`,name:b.name,namespace:b.namespace||"default",type:"deployment",status:b.status||"unknown",x:Math.random()*d,y:Math.random()*i})});const y=[];m.services.forEach(b=>{const o=`service-${b.namespace}-${b.name}`;b.selectors&&m.pods.forEach(c=>{if(c.namespace===b.namespace){let u=!0;for(const[h,f]of Object.entries(b.selectors))if(c.labels?.[h]!==f){u=!1;break}if(u){const h=`pod-${c.namespace}-${c.name}`;p.find(f=>f.id===h)||p.push({id:h,name:c.name,namespace:c.namespace,type:"pod",status:c.status,x:Math.random()*d,y:Math.random()*i}),y.push({source:o,target:h,protocol:"TCP",port:b.ports?.[0]?.port||80})}}}),m.deployments.forEach(c=>{if(c.namespace===b.namespace&&c.labels){let u=!0;if(b.selectors){for(const[h,f]of Object.entries(b.selectors))if(c.labels[h]!==f){u=!1;break}}if(u){const h=`deployment-${c.namespace}-${c.name}`;y.push({source:o,target:h,protocol:"TCP"})}}})}),l=oo(p).force("link",lo(y).id(b=>b.id).distance(100)).force("charge",ao().strength(-300)).force("center",ro(d/2,i/2)).force("collision",no().radius(40));const x=g.append("g").selectAll("line").data(y).enter().append("line").attr("stroke","#94a3b8").attr("stroke-width",2).attr("stroke-opacity",.6).attr("marker-end","url(#arrowhead)");n.append("defs").append("marker").attr("id","arrowhead").attr("viewBox","0 -5 10 10").attr("refX",25).attr("refY",0).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5").attr("fill","#94a3b8");const M=g.append("g").selectAll("g").data(p).enter().append("g").call(Jl().on("start",(b,o)=>{b.active||l?.alphaTarget(.3).restart(),o.fx=o.x,o.fy=o.y}).on("drag",(b,o)=>{o.fx=b.x,o.fy=b.y}).on("end",(b,o)=>{b.active||l?.alphaTarget(0),o.fx=void 0,o.fy=void 0}));M.append("circle").attr("r",b=>b.type==="service"?20:b.type==="deployment"?15:12).attr("fill",b=>b.type==="service"?"#06b6d4":b.type==="deployment"?"#3b82f6":"#ec4899").attr("stroke","#fff").attr("stroke-width",2),M.append("text").text(b=>b.name).attr("dx",b=>b.type==="service"?25:20).attr("dy",5).attr("font-size","12px").attr("fill","var(--text-primary)").style("pointer-events","none"),l.on("tick",()=>{x.attr("x1",b=>b.source.x).attr("y1",b=>b.source.y).attr("x2",b=>b.target.x).attr("y2",b=>b.target.y),M.attr("transform",b=>`translate(${b.x},${b.y})`)})};return It(()=>{e()&&!e.loading&&setTimeout(()=>a(),100)}),(()=>{var m=X2(),d=m.firstChild,i=d.firstChild,n=i.firstChild;n.nextSibling;var g=i.nextSibling;return g.$$click=()=>a(),s(m,_(K,{get when(){return e.loading},get children(){var v=K2(),p=v.firstChild,y=p.firstChild;return y.nextSibling,v}}),null),s(m,_(K,{get when(){return Re(()=>!e.loading)()&&e()},get children(){return[(()=>{var v=Y2(),p=v.firstChild,y=r;typeof y=="function"?dr(y,v):r=v;var x=t;return typeof x=="function"?dr(x,p):t=p,v})(),(()=>{var v=G2(),p=v.firstChild,y=p.firstChild;y.nextSibling;var x=p.nextSibling,M=x.firstChild;M.nextSibling;var b=x.nextSibling,o=b.firstChild;o.nextSibling;var c=b.nextSibling,u=c.firstChild;return u.nextSibling,v})()]}}),null),s(m,_(K,{get when(){return Re(()=>!!(!e.loading&&e()))()&&e().services.length===0},get children(){var v=J2();return v.firstChild,v}}),null),m})()};ut(["click"]);var Q2=w('<div class="flex items-center justify-center h-64"><div class=text-center><div class="inline-block w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"></div><p style=color:var(--text-muted)>Loading live traffic data...</p><p class="text-xs mt-2"style=color:var(--text-muted)>This may take a few seconds...'),e_=w('<div class="flex items-center justify-center h-64"><div class="text-center p-4 rounded-lg max-w-md"style=background:var(--bg-secondary)><div class="text-red-500 mb-2 text-2xl"></div><p class="font-medium mb-2"style=color:var(--text-primary)>Failed to load traffic data</p><p class="text-sm mb-4"style=color:var(--text-muted)></p><button class="px-4 py-2 rounded-lg text-sm hover:bg-[var(--bg-tertiary)]"style=background:var(--bg-primary);color:var(--text-primary)>Retry'),t_=w('<div class="rounded-lg border overflow-hidden"style=background:var(--bg-card);borderColor:var(--border-color);minHeight:600px><svg class="w-full h-full">'),r_=w('<div class="flex items-center gap-6 p-4 rounded-lg flex-wrap"style=background:var(--bg-secondary)><div class="flex items-center gap-2"><div class="w-4 h-4 rounded-full"style=background:#06b6d4></div><span class=text-sm style=color:var(--text-secondary)>Services</span></div><div class="flex items-center gap-2"><div class="w-4 h-4 rounded-full"style=background:#3b82f6></div><span class=text-sm style=color:var(--text-secondary)>Deployments</span></div><div class="flex items-center gap-2"><div class="w-4 h-4 rounded-full"style=background:#22c55e></div><span class=text-sm style=color:var(--text-secondary)>Healthy Pods</span></div><div class="flex items-center gap-2"><div class="w-4 h-4 rounded-full border-2"style=background:#f59e0b;borderColor:#f59e0b></div><span class=text-sm style=color:var(--text-secondary)>Degraded</span></div><div class="flex items-center gap-2"><div class="w-4 h-4 rounded-full"style=background:#ef4444></div><span class=text-sm style=color:var(--text-secondary)>Unhealthy</span></div><div class="flex items-center gap-2"><svg class="w-4 h-4"style=color:#22c55e><line x1=0 y1=0 x2=20 y2=0 stroke=currentColor stroke-width=3></line></svg><span class=text-sm style=color:var(--text-secondary)>Traffic Flow</span></div><div class="flex items-center gap-2"><div class="w-2 h-2 rounded-full animate-pulse"style=background:#06b6d4></div><span class=text-sm style=color:var(--text-secondary)>Live Traffic'),s_=w('<div class="grid grid-cols-3 gap-4"><div class="p-4 rounded-lg"style=background:var(--bg-secondary)><div class="text-2xl font-bold"style=color:var(--text-primary)></div><div class=text-sm style=color:var(--text-muted)>Nodes</div></div><div class="p-4 rounded-lg"style=background:var(--bg-secondary)><div class="text-2xl font-bold"style=color:var(--text-primary)></div><div class=text-sm style=color:var(--text-muted)>Connections</div></div><div class="p-4 rounded-lg"style=background:var(--bg-secondary)><div class="text-2xl font-bold"style=color:var(--text-primary)></div><div class=text-sm style=color:var(--text-muted)>Total RPS'),i_=w('<div class="flex items-center justify-center h-64"><p style=color:var(--text-muted)>No traffic data found in this namespace'),n_=w('<div class=space-y-4><div class="flex items-center justify-between"><div><h2 class="text-xl font-bold"style=color:var(--text-primary)>Live Traffic Map</h2><p class=text-sm style=color:var(--text-secondary)>Real-time service mesh traffic visualization  Animated flow  Health indicators</p></div><div class="flex items-center gap-2"><label class="flex items-center gap-2 cursor-pointer"><input type=checkbox class="w-4 h-4"><span class=text-sm style=color:var(--text-secondary)>Auto-refresh</span></label><button class="px-3 py-2 rounded-lg text-sm hover:bg-[var(--bg-tertiary)]"style=background:var(--bg-secondary);color:var(--text-primary)>Refresh</button><button class="px-3 py-2 rounded-lg text-sm hover:bg-[var(--bg-tertiary)]"style=background:var(--bg-secondary);color:var(--text-primary)>Reset Layout');const l_=()=>{const[e,t]=W(!0),[r,l]=W(5e3);let a,m,d=null,i=null;const[n,{refetch:g}]=it(()=>Xt(),async o=>{const c=new AbortController,u=setTimeout(()=>c.abort(),1e4);try{const h=await fetch(`/api/traffic/metrics?namespace=${o==="_all"?"":o}`,{signal:c.signal});if(clearTimeout(u),!h.ok){const $=await h.text().catch(()=>"Unknown error");throw new Error(`Failed to fetch traffic metrics: ${$}`)}const f=await h.json();return!f||!f.nodes&&!f.edges?(console.warn("Traffic metrics returned empty data:",f),{nodes:[],edges:[],timestamp:new Date().toISOString()}):f}catch(h){throw clearTimeout(u),h.name==="AbortError"?new Error("Request timed out. Please check if the cluster is accessible."):(console.error("Error fetching traffic metrics:",h),h)}});let v=null;It(()=>(e()?v=setInterval(()=>{g()},r()):v&&clearInterval(v),()=>{v&&clearInterval(v)}));const p=o=>{switch(o){case"healthy":return"#22c55e";case"degraded":return"#f59e0b";case"unhealthy":return"#ef4444";default:return"#94a3b8"}},y=o=>o.type==="service"?"#06b6d4":o.type==="deployment"?"#3b82f6":p(o.health),x=o=>o.requestRate===0?1:Math.min(8,Math.max(1,Math.log10(o.requestRate+1)*2)),M=o=>p(o.health),b=()=>{if(!a||!n()||!m)return;const o=n();if(!o||o.nodes.length===0)return;lr(a).selectAll("*").remove(),d&&d.stop(),i&&cancelAnimationFrame(i);const c=m.clientWidth||1e3,u=600,h=lr(a).attr("width",c).attr("height",u).attr("viewBox",[0,0,c,u]),f=h.append("g"),$=uo().scaleExtent([.2,4]).on("zoom",D=>{f.attr("transform",D.transform)});h.call($);const C=o.nodes.map(D=>({...D,x:Math.random()*c,y:Math.random()*u})),k=o.edges.map(D=>({...D,source:C.find(T=>T.id===D.source)||D.source,target:C.find(T=>T.id===D.target)||D.target}));d=oo(C).force("link",lo(k).id(D=>D.id).distance(100).strength(.5)).force("charge",ao().strength(-300)).force("center",ro(c/2,u/2)).force("collision",no().radius(50)),h.append("defs").append("marker").attr("id","arrowhead").attr("viewBox","0 -5 10 10").attr("refX",30).attr("refY",0).attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5").attr("fill","#94a3b8");const S=f.append("g").selectAll("line").data(k).enter().append("line").attr("stroke",D=>M(D)).attr("stroke-width",D=>x(D)).attr("stroke-opacity",.6).attr("marker-end","url(#arrowhead)").style("filter","drop-shadow(0px 0px 2px rgba(0,0,0,0.3))"),L=f.append("g").selectAll("circle").data(k.filter(D=>D.requestRate>0)).enter().append("circle").attr("r",3).attr("fill",D=>M(D)).attr("opacity",.8).style("filter","drop-shadow(0px 0px 3px currentColor)"),P=f.append("g").selectAll("g").data(C).enter().append("g").call(Jl().on("start",(D,T)=>{D.active||d?.alphaTarget(.3).restart(),T.fx=T.x,T.fy=T.y}).on("drag",(D,T)=>{T.fx=D.x,T.fy=D.y}).on("end",(D,T)=>{D.active||d?.alphaTarget(0),T.fx=void 0,T.fy=void 0}));P.append("circle").attr("r",D=>D.type==="service"?22:D.type==="deployment"?18:15).attr("fill",D=>y(D)).attr("stroke",D=>p(D.health)).attr("stroke-width",3).style("filter","drop-shadow(0px 2px 4px rgba(0,0,0,0.2))"),P.append("circle").attr("r",D=>(D.type==="service"?22:D.type==="deployment"?18:15)+3).attr("fill","none").attr("stroke",D=>p(D.health)).attr("stroke-width",2).attr("stroke-dasharray",D=>D.health==="degraded"?"4,4":"none").attr("opacity",D=>D.health==="unhealthy"?1:.5),P.append("text").text(D=>D.name).attr("dx",D=>D.type==="service"?28:24).attr("dy",5).attr("font-size","12px").attr("font-weight","500").attr("fill","var(--text-primary)").style("pointer-events","none").style("text-shadow","0 1px 2px rgba(0,0,0,0.5)"),P.append("text").text(D=>D.requestRate>0?`${D.requestRate.toFixed(1)} req/s`:"").attr("dx",D=>D.type==="service"?28:24).attr("dy",18).attr("font-size","10px").attr("fill","var(--text-muted)").style("pointer-events","none"),d.on("tick",()=>{S.attr("x1",D=>D.source.x).attr("y1",D=>D.source.y).attr("x2",D=>D.target.x).attr("y2",D=>D.target.y),P.attr("transform",D=>`translate(${D.x},${D.y})`),L.each(function(D){const T=D.source,B=D.target;if(typeof T=="object"&&typeof B=="object"){const N=Date.now()/2e3%1,O=T.x+(B.x-T.x)*N,H=T.y+(B.y-T.y)*N;lr(this).attr("cx",O).attr("cy",H)}})});const I=()=>{L.size()>0&&L.each(function(D){const T=D.source,B=D.target;if(typeof T=="object"&&typeof B=="object"){const N=Date.now()/(2e3/Math.max(1,D.requestRate/10))%1,O=T.x+(B.x-T.x)*N,H=T.y+(B.y-T.y)*N;lr(this).attr("cx",O).attr("cy",H)}}),i=requestAnimationFrame(I)};I()};return It(()=>{n()&&!n.loading&&setTimeout(()=>b(),100)}),wr(()=>{i&&cancelAnimationFrame(i),d&&d.stop()}),(()=>{var o=n_(),c=o.firstChild,u=c.firstChild,h=u.firstChild;h.nextSibling;var f=u.nextSibling,$=f.firstChild,C=$.firstChild;C.nextSibling;var k=$.nextSibling,S=k.nextSibling;return C.addEventListener("change",L=>t(L.currentTarget.checked)),k.$$click=()=>g(),S.$$click=()=>b(),s(o,_(K,{get when(){return n.loading},get children(){var L=Q2(),P=L.firstChild,I=P.firstChild,D=I.nextSibling;return D.nextSibling,L}}),null),s(o,_(K,{get when(){return Re(()=>!n.loading)()&&n.error},get children(){var L=e_(),P=L.firstChild,I=P.firstChild,D=I.nextSibling,T=D.nextSibling,B=T.nextSibling;return s(T,()=>n.error?.message||"Unknown error occurred"),B.$$click=()=>g(),L}}),null),s(o,_(K,{get when(){return Re(()=>!n.loading)()&&n()},get children(){return[(()=>{var L=t_(),P=L.firstChild,I=m;typeof I=="function"?dr(I,L):m=L;var D=a;return typeof D=="function"?dr(D,P):a=P,L})(),(()=>{var L=r_(),P=L.firstChild,I=P.firstChild;I.nextSibling;var D=P.nextSibling,T=D.firstChild;T.nextSibling;var B=D.nextSibling,N=B.firstChild;N.nextSibling;var O=B.nextSibling,H=O.firstChild;H.nextSibling;var A=O.nextSibling,z=A.firstChild;z.nextSibling;var F=A.nextSibling,j=F.firstChild;j.nextSibling;var q=F.nextSibling,U=q.firstChild;return U.nextSibling,L})(),_(K,{get when(){return n()},get children(){var L=s_(),P=L.firstChild,I=P.firstChild;I.nextSibling;var D=P.nextSibling,T=D.firstChild;T.nextSibling;var B=D.nextSibling,N=B.firstChild;return N.nextSibling,s(I,()=>n().nodes.length),s(T,()=>n().edges.length),s(N,()=>n().edges.reduce((O,H)=>O+H.requestRate,0).toFixed(1)),L}})]}}),null),s(o,_(K,{get when(){return Re(()=>!!(!n.loading&&n()))()&&n().nodes.length===0},get children(){var L=i_();return L.firstChild,L}}),null),J(()=>C.checked=e()),o})()};ut(["click"]);var o_=w('<div class="grid grid-cols-2 md:grid-cols-6 gap-3"><div class="card p-3 flex items-center gap-3"><div class="w-10 h-10 rounded-lg flex items-center justify-center"style=background:var(--bg-tertiary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg></div><div><div class="text-xl font-bold"style=color:var(--accent-primary)></div><div class=text-xs style=color:var(--text-muted)>Connections'),a_=w('<div class="card p-4 mb-4"style="background:var(--error-bg);border:1px solid var(--error-color)"><div class="flex items-center gap-2"><span style=color:var(--error-color)></span><span style=color:var(--error-color)>Error loading topology: '),c_=w("<svg style=width:100%;height:100%;background:var(--bg-primary)>"),d_=w('<div class="card overflow-hidden relative"style=height:650px><div class="absolute bottom-4 left-4 p-3 rounded-lg text-xs"style="background:var(--bg-secondary);border:1px solid var(--border-color)"><div class="font-semibold mb-2"style=color:var(--text-primary)>Legend</div><div class="grid grid-cols-3 gap-x-4 gap-y-1"></div></div><div class="absolute bottom-4 right-4 px-3 py-2 rounded-lg text-xs"style=background:var(--bg-secondary);color:var(--text-muted)> Drag nodes  Scroll to zoom  Click for details'),u_=w('<div class="p-4 text-center text-sm rounded-lg"style=background:var(--bg-tertiary);color:var(--text-muted)>No connected resources'),h_=w('<div class=space-y-4><div class="flex items-center gap-4 p-4 rounded-lg"><div class="w-16 h-16 rounded-xl flex items-center justify-center text-3xl"></div><div><div class="font-bold text-lg"style=color:var(--text-primary)></div><div class="flex items-center gap-2 mt-1"><span class="px-2 py-0.5 rounded text-xs font-medium uppercase"style=color:white></span><span class=text-sm style=color:var(--text-muted)>in </span></div></div></div><div><h4 class="font-semibold mb-3 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg>Connected Resources (<!>)</h4><div class="grid gap-2 max-h-64 overflow-auto">'),g_=w('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Resource Map</h1><p style=color:var(--text-secondary)>D3.js force-directed graph  Drag nodes  Scroll to zoom  Hover to highlight</p></div><div class="flex items-center gap-2 p-1 rounded-lg"style=background:var(--bg-secondary)><button>Resource Map</button><button>Traffic Map</button><button>Live Traffic</button></div><div class="flex items-center gap-3"><button class=icon-btn title=Refresh style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button><button class="px-3 py-2 rounded-lg text-sm hover:bg-[var(--bg-tertiary)]"style=background:var(--bg-secondary);color:var(--text-primary)>Reset Layout'),v_=w('<div class="card p-3 flex items-center gap-3"><div class="w-10 h-10 rounded-lg flex items-center justify-center text-lg"></div><div><div class="text-xl font-bold"></div><div class="text-xs capitalize"style=color:var(--text-muted)>s'),f_=w('<div class="h-full flex items-center justify-center"><div class=spinner>'),p_=w('<div class="h-full flex items-center justify-center flex-col gap-4"style=color:var(--text-muted)><svg class="w-20 h-20 opacity-30"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"></path></svg><p class=text-lg>No resources found</p><p class=text-sm>'),m_=w('<p class="text-xs opacity-70">The selected namespace(s) may not have any resources'),b_=w('<div class="flex items-center gap-1.5"><span></span><span class=capitalize style=color:var(--text-muted)>'),x_=w('<div class="p-3 rounded-lg flex items-center gap-3 cursor-pointer hover:scale-[1.02] transition-transform"style=background:var(--bg-tertiary)><div class="w-10 h-10 rounded-lg flex items-center justify-center text-lg"></div><div class="flex-1 min-w-0"><div class="font-medium truncate"style=color:var(--accent-primary)></div><div class="text-xs capitalize"style=color:var(--text-muted)></div></div><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 5l7 7-7 7">');const y_=()=>{const[e,t]=W("resource"),r=()=>{const u=hr();if(u.length!==0)return u.length===1,u[0]},l=Fr("topology",async()=>{ar(!0);try{const u=r();console.log("[ResourceMap] Fetching topology with namespace:",u);const h=await Fe.getTopology(u);return console.log("[ResourceMap] Fetched topology:",h),console.log("[ResourceMap] Nodes count:",h?.nodes?.length||0),console.log("[ResourceMap] Links count:",h?.links?.length||0),h}catch(u){throw console.error("[ResourceMap] Error fetching topology:",u),u}finally{ar(!1)}},{ttl:15e3,backgroundRefresh:!0}),a=et(()=>{const u=l.data();return console.log("[ResourceMap] Current topology data from cache:",u),u}),m=()=>l.refetch();zt(()=>{l.data()||l.refetch()});const[d,i]=W(null),[n,g]=W(!1);let v,p,y=null;const x={node:"#22c55e",deployment:"#3b82f6",statefulset:"#8b5cf6",daemonset:"#f59e0b",service:"#06b6d4",pod:"#ec4899",configmap:"#84cc16",secret:"#ef4444",ingress:"#14b8a6",replicaset:"#6366f1",job:"#f97316",cronjob:"#a855f7"},M=()=>{if(!v||!a())return;const u=a();if(!u?.nodes||u.nodes.length===0)return;lr(v).selectAll("*").remove(),y&&y.stop();const h=p?.clientWidth||1e3,f=650,$=lr(v).attr("width",h).attr("height",f).attr("viewBox",[0,0,h,f]),C=$.append("g"),k=uo().scaleExtent([.2,4]).on("zoom",q=>{C.attr("transform",q.transform)});$.call(k);const S=u.nodes.map(q=>({...q})),L=u.links.map(q=>({source:q.source,target:q.target,value:q.value||1}));y=oo(S).force("link",lo(L).id(q=>q.id).distance(120).strength(.5)).force("charge",ao().strength(-400)).force("center",ro(h/2,f/2)).force("collision",no().radius(60)).force("x",z2(h/2).strength(.05)).force("y",F2(f/2).strength(.05));const P=$.append("defs");P.append("marker").attr("id","arrowhead").attr("viewBox","-0 -5 10 10").attr("refX",25).attr("refY",0).attr("orient","auto").attr("markerWidth",8).attr("markerHeight",8).append("path").attr("d","M 0,-5 L 10 ,0 L 0,5").attr("fill","#06b6d4").style("opacity",.8);const I=P.append("linearGradient").attr("id","linkGradient").attr("gradientUnits","userSpaceOnUse");I.append("stop").attr("offset","0%").attr("stop-color","#06b6d4").attr("stop-opacity",.6),I.append("stop").attr("offset","100%").attr("stop-color","#8b5cf6").attr("stop-opacity",.6);const D=P.append("filter").attr("id","glow").attr("x","-50%").attr("y","-50%").attr("width","200%").attr("height","200%");D.append("feGaussianBlur").attr("stdDeviation","3").attr("result","coloredBlur");const T=D.append("feMerge");T.append("feMergeNode").attr("in","coloredBlur"),T.append("feMergeNode").attr("in","SourceGraphic");const B=C.append("g").attr("class","links").selectAll("path").data(L).join("path").attr("fill","none").attr("stroke","url(#linkGradient)").attr("stroke-width",2).attr("stroke-opacity",.6).attr("marker-end","url(#arrowhead)"),N=C.append("g").attr("class","nodes").selectAll("g").data(S).join("g").attr("cursor","pointer").call(Jl().on("start",A).on("drag",z).on("end",F));N.append("circle").attr("class","node-ring").attr("r",45).attr("fill",q=>x[q.type]||"#6b7280").attr("fill-opacity",0).attr("stroke",q=>x[q.type]||"#6b7280").attr("stroke-width",0).attr("stroke-dasharray","4 4"),N.append("circle").attr("class","node-circle").attr("r",32).attr("fill",q=>`${x[q.type]||"#6b7280"}20`).attr("stroke",q=>x[q.type]||"#6b7280").attr("stroke-width",2.5),N.append("circle").attr("r",22).attr("fill",q=>`${x[q.type]||"#6b7280"}30`);const O={node:"",deployment:"",statefulset:"",daemonset:"",service:"",pod:"",configmap:"",secret:"",ingress:"",replicaset:"",job:"",cronjob:""};N.append("text").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size","20px").text(q=>O[q.type]||""),N.append("text").attr("class","node-label").attr("text-anchor","middle").attr("dy",48).attr("font-size","10px").attr("fill","var(--text-primary)").attr("font-weight","500").text(q=>q.name.length>18?q.name.slice(0,15)+"...":q.name),N.append("rect").attr("x",-20).attr("y",55).attr("width",40).attr("height",14).attr("rx",7).attr("fill",q=>x[q.type]||"#6b7280").attr("fill-opacity",.9),N.append("text").attr("text-anchor","middle").attr("y",65).attr("font-size","8px").attr("fill","white").attr("font-weight","600").text(q=>q.type.toUpperCase().slice(0,6)),N.on("mouseenter",function(q,U){lr(this).select(".node-circle").attr("filter","url(#glow)").attr("stroke-width",3.5),lr(this).select(".node-ring").attr("fill-opacity",.1).attr("stroke-width",2),B.attr("stroke-opacity",V=>{const X=typeof V.source=="object"?V.source.id:V.source,R=typeof V.target=="object"?V.target.id:V.target;return X===U.id||R===U.id?1:.1}).attr("stroke-width",V=>{const X=typeof V.source=="object"?V.source.id:V.source,R=typeof V.target=="object"?V.target.id:V.target;return X===U.id||R===U.id?3:1});const Y=new Set;Y.add(U.id),L.forEach(V=>{const X=typeof V.source=="object"?V.source.id:V.source,R=typeof V.target=="object"?V.target.id:V.target;X===U.id&&Y.add(R),R===U.id&&Y.add(X)}),N.attr("opacity",V=>Y.has(V.id)?1:.3)}).on("mouseleave",function(){lr(this).select(".node-circle").attr("filter",null).attr("stroke-width",2.5),lr(this).select(".node-ring").attr("fill-opacity",0).attr("stroke-width",0),B.attr("stroke-opacity",.6).attr("stroke-width",2),N.attr("opacity",1)});let H=!1;function A(q){H=!1,q.active||y?.alphaTarget(.3).restart(),q.subject.fx=q.subject.x,q.subject.fy=q.subject.y}function z(q){H=!0,q.subject.fx=q.x,q.subject.fy=q.y}function F(q){q.active||y?.alphaTarget(0)}N.on("click",function(q,U){if(H){H=!1;return}q.stopPropagation(),i(U),g(!0)}),y.on("tick",()=>{B.attr("d",q=>{const U=q.source.x,Y=q.source.y,V=q.target.x,X=q.target.y,R=V-U,G=X-Y,te=Math.sqrt(R*R+G*G)*.8;return`M${U},${Y}A${te},${te} 0 0,1 ${V},${X}`}),N.attr("transform",q=>`translate(${q.x},${q.y})`)});const j=co.translate(0,0).scale(.9);$.call(k.transform,j)},b=u=>{const h=a();if(!h?.links)return[];const f=[],$=new Map(h.nodes.map(C=>[C.id,C]));return h.links.forEach(C=>{if(C.source===u||typeof C.source=="object"&&C.source.id===u){const k=typeof C.target=="object"?C.target.id:C.target,S=$.get(k);S&&f.push(S)}if(C.target===u||typeof C.target=="object"&&C.target.id===u){const k=typeof C.source=="object"?C.source.id:C.source,S=$.get(k);S&&f.push(S)}}),f};It(gu(()=>[a(),v],()=>{v&&a()&&(console.log("[ResourceMap] Topology data changed, setting up visualization"),M())})),zt(()=>{const u=()=>M();window.addEventListener("resize",u),wr(()=>{window.removeEventListener("resize",u),y&&y.stop()})});const o=()=>{const u=a();return u?.nodes?u.nodes.reduce((h,f)=>(h[f.type]=(h[f.type]||0)+1,h),{}):{}},c={node:"",deployment:"",statefulset:"",daemonset:"",service:"",pod:"",configmap:"",secret:"",ingress:"",replicaset:"",job:"",cronjob:""};return(()=>{var u=g_(),h=u.firstChild,f=h.firstChild,$=f.firstChild;$.nextSibling;var C=f.nextSibling,k=C.firstChild,S=k.nextSibling,L=S.nextSibling,P=C.nextSibling,I=P.firstChild,D=I.nextSibling;return k.$$click=()=>t("resource"),S.$$click=()=>t("traffic"),L.$$click=()=>t("live"),I.$$click=T=>{const B=T.currentTarget;B.classList.add("refreshing"),setTimeout(()=>B.classList.remove("refreshing"),500),m()},D.$$click=()=>M(),s(u,_(K,{get when(){return e()==="traffic"},get children(){return _(Z2,{})}}),null),s(u,_(K,{get when(){return e()==="live"},get children(){return _(l_,{})}}),null),s(u,_(K,{get when(){return e()==="resource"},get children(){return[(()=>{var T=o_(),B=T.firstChild,N=B.firstChild;N.firstChild;var O=N.nextSibling,H=O.firstChild;return H.nextSibling,s(T,_(Xe,{get each(){return Object.entries(o())},children:([A,z])=>(()=>{var F=v_(),j=F.firstChild,q=j.nextSibling,U=q.firstChild,Y=U.nextSibling,V=Y.firstChild;return s(j,()=>c[A]||""),s(U,z),s(Y,A,V),J(X=>{var R=`${x[A]}20`,G=x[A],te=x[A];return R!==X.e&&E(j,"background",X.e=R),G!==X.t&&E(j,"color",X.t=G),te!==X.a&&E(U,"color",X.a=te),X},{e:void 0,t:void 0,a:void 0}),F})()}),B),s(H,()=>(a()?.links||[]).length),T})(),_(K,{get when(){return l.error()},get children(){var T=a_(),B=T.firstChild,N=B.firstChild,O=N.nextSibling;return O.firstChild,s(O,()=>l.error()?.message||"Unknown error",null),T}}),(()=>{var T=d_(),B=T.firstChild,N=B.firstChild,O=N.nextSibling;B.nextSibling;var H=p;return typeof H=="function"?dr(H,T):p=T,s(T,_(K,{get when(){return!l.loading()||l.data()!==void 0},get fallback(){return f_()},get children(){return _(K,{get when(){return Re(()=>!!(a()&&a()?.nodes))()&&a()?.nodes?.length>0},get fallback(){return(()=>{var A=p_(),z=A.firstChild,F=z.nextSibling,j=F.nextSibling;return s(j,(()=>{var q=Re(()=>!!l.error());return()=>q()?"Error loading topology data":a()?"Select a namespace with deployments and services":"Loading topology data..."})()),s(A,(()=>{var q=Re(()=>!!(a()&&a()?.nodes&&a()?.nodes?.length===0));return()=>q()&&m_()})(),null),A})()},get children(){var A=c_(),z=v;return typeof z=="function"?dr(z,A):v=A,A}})}}),B),s(O,_(Xe,{get each(){return Object.entries(c).slice(0,6)},children:([A,z])=>(()=>{var F=b_(),j=F.firstChild,q=j.nextSibling;return s(j,z),s(q,A),F})()})),T})(),_(mt,{get isOpen(){return n()},onClose:()=>g(!1),get title(){return`${d()?.type}: ${d()?.name}`},size:"lg",get children(){return _(K,{get when(){return d()},get children(){var T=h_(),B=T.firstChild,N=B.firstChild,O=N.nextSibling,H=O.firstChild,A=H.nextSibling,z=A.firstChild,F=z.nextSibling;F.firstChild;var j=B.nextSibling,q=j.firstChild,U=q.firstChild,Y=U.nextSibling,V=Y.nextSibling;V.nextSibling;var X=q.nextSibling;return s(N,()=>c[d().type]||""),s(H,()=>d().name),s(z,()=>d().type),s(F,()=>d().namespace||(hr().length===0?"all namespaces":hr().join(", ")),null),s(q,()=>b(d().id).length,V),s(X,_(Xe,{get each(){return b(d().id)},children:R=>(()=>{var G=x_(),te=G.firstChild,ae=te.nextSibling,Q=ae.firstChild,Z=Q.nextSibling;return ae.nextSibling,G.$$click=()=>i(R),s(te,()=>c[R.type]||""),s(Q,()=>R.name),s(Z,()=>R.type),J(ne=>E(te,"background",`${x[R.type]}20`)),G})()}),null),s(X,_(K,{get when(){return b(d().id).length===0},get children(){return u_()}}),null),J(R=>{var G=`${x[d().type]}15`,te=`${x[d().type]}25`,ae=x[d().type];return G!==R.e&&E(B,"background",R.e=G),te!==R.t&&E(N,"background",R.t=te),ae!==R.a&&E(z,"background",R.a=ae),R},{e:void 0,t:void 0,a:void 0}),T}})}})]}}),null),J(T=>{var B=`px-4 py-2 rounded-md text-sm font-medium transition-colors ${e()==="resource"?"bg-[var(--accent-primary)] text-black":"text-[var(--text-secondary)]"}`,N=`px-4 py-2 rounded-md text-sm font-medium transition-colors ${e()==="traffic"?"bg-[var(--accent-primary)] text-black":"text-[var(--text-secondary)]"}`,O=`px-4 py-2 rounded-md text-sm font-medium transition-colors ${e()==="live"?"bg-[var(--accent-primary)] text-black":"text-[var(--text-secondary)]"}`;return B!==T.e&&tt(k,T.e=B),N!==T.t&&tt(S,T.t=N),O!==T.a&&tt(L,T.a=O),T},{e:void 0,t:void 0,a:void 0}),u})()};ut(["click"]);const __={enableDiagnostics:!0,enableCVEVulnerabilities:!0,enableSecurityChecks:!0,enableMLRecommendations:!0,enableEventMonitoring:!0,enableMCP:!0,enableConnectors:!0,enableAnomalyDetection:!0,enableCostAnalysis:!0,enableDriftDetection:!0,enableTopology:!0,enableResourceMap:!0,enableAIChat:!0,enableWebTerminal:!0,enableLogs:!0,enableMetrics:!0,showMLTimelineInBrain:!0,enableAutoRefresh:!0,enableNotifications:!0,enableSoundEffects:!0,showOverviewSection:!0,showInsightsSection:!0,showDeploymentsSection:!0,showWorkloadsSection:!0,showNetworkingSection:!0,showConfigStorageSection:!0,showClusterSection:!0,showIntegrationsSection:!0,showExtensionsSection:!0,showDashboard:!0,showAIInsights:!0,showCostAnalysisMenu:!0,showSecurityInsights:!0,showDriftDetectionMenu:!0,showConnectorsMenu:!0,showAIAgentsMenu:!0,showPlugins:!0,showTerminalMenu:!0},sc=4,Sn={...__,theme:"dark",compactMode:!1,sidebarCollapsed:!1,defaultNamespace:"_all",itemsPerPage:50,refreshInterval:30,enableDebugMode:!1,enablePerformanceMetrics:!1};function $_(){try{const e=localStorage.getItem("kubegraf-settings-version"),t=localStorage.getItem("kubegraf-settings");if(!e||parseInt(e)<sc)return console.log("Settings version mismatch or upgrade needed - resetting to defaults"),localStorage.setItem("kubegraf-settings-version",sc.toString()),Sn;if(t){const r=JSON.parse(t);return{...Sn,...r}}}catch(e){console.error("Failed to load settings:",e)}return Sn}function w_(e){try{localStorage.setItem("kubegraf-settings",JSON.stringify(e))}catch(t){console.error("Failed to save settings:",t)}}const[Os,Ud]=W($_());It(()=>{w_(Os())});function S_(e,t){Ud(r=>({...r,[e]:t}))}function C_(){Ud(Sn)}var k_=w('<button class="px-3 py-1.5 rounded-lg text-sm transition-colors flex items-center gap-2"title="Show single replica workloads"style="background:rgba(245, 158, 11, 0.2);color:var(--warning-color);border:1px solid rgba(245, 158, 11, 0.4)"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>Single Replica Issues<span class="px-1.5 py-0.5 rounded text-xs"style="background:rgba(245, 158, 11, 0.3)">'),M_=w('<div class="text-center py-8"><p class="text-xs mt-2"style=color:var(--text-muted)>Optimized with parallel execution and caching'),A_=w('<div class="text-center py-8"style=color:var(--text-muted)><svg class="w-12 h-12 mx-auto mb-4 text-green-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><p class=text-lg>All checks passed!</p><p class=text-sm>No issues found in the selected scope.'),ic=w("<div class=space-y-3>"),L_=w('<div class="flex items-center justify-between mt-6 pt-4 border-t"style=border-color:var(--border-color)><div class=text-sm style=color:var(--text-secondary)>Showing <!>-<!> of <!> findings</div><div class="flex items-center gap-2"><button class="px-3 py-1.5 rounded text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed">Previous</button><div class="flex items-center gap-1"></div><button class="px-3 py-1.5 rounded text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed">Next'),E_=w('<div class="card p-6"><h3 class="font-semibold mb-4 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg>Findings (<!>)'),T_=w('<div class="card p-6"><div class="text-center py-8"style=color:var(--text-muted)><svg class="w-12 h-12 mx-auto mb-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg><p class="text-lg mb-2">Diagnostics are disabled</p><p class=text-sm>Enable Diagnostics in Settings to run health checks'),D_=w('<div class="card p-6 mt-6"><h3 class="font-semibold mb-4 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg>High Availability (HA) Recommendations</h3><div class=space-y-4><div class="p-4 rounded-lg border-l-4"style="background:rgba(245, 158, 11, 0.1);border-color:var(--warning-color)"><div class="flex items-start gap-3"><svg class="w-5 h-5 mt-0.5 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--warning-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div class=flex-1><h4 class="font-medium mb-2"style=color:var(--text-primary)>Single Replica Workloads</h4><p class="text-sm mb-3"style=color:var(--text-secondary)>Deployments and StatefulSets with only 1 replica are at high risk. At least 2 replicas are recommended for production workloads to ensure high availability.</p><div class="text-xs space-y-1"style=color:var(--text-muted)><p><strong>Check:</strong> REL005 - Single Replica Deployment/StatefulSet</p><p><strong>Impact:</strong> No redundancy - single point of failure</p></div></div></div></div><div class="p-4 rounded-lg border-l-4"style="background:rgba(6, 182, 212, 0.1);border-color:var(--accent-primary)"><div class="flex items-start gap-3"><svg class="w-5 h-5 mt-0.5 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div class=flex-1><h4 class="font-medium mb-2"style=color:var(--text-primary)>Pod Anti-Affinity</h4><p class="text-sm mb-3"style=color:var(--text-secondary)>Multi-replica workloads should use podAntiAffinity to spread pods across different nodes, preventing all replicas from being on the same node.</p><div class="text-xs space-y-1"style=color:var(--text-muted)><p><strong>Check:</strong> REL007 - No Anti-Affinity</p><p><strong>Recommendation:</strong> Add podAntiAffinity rules to pod templates</p></div></div></div></div><div class="p-4 rounded-lg border-l-4"style="background:rgba(6, 182, 212, 0.1);border-color:var(--accent-primary)"><div class="flex items-start gap-3"><svg class="w-5 h-5 mt-0.5 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div class=flex-1><h4 class="font-medium mb-2"style=color:var(--text-primary)>Pod Disruption Budget (PDB)</h4><p class="text-sm mb-3"style=color:var(--text-secondary)>PodDisruptionBudgets ensure that a minimum number of pods remain available during voluntary disruptions (node drains, cluster upgrades, etc.).</p><div class="text-xs space-y-1"style=color:var(--text-muted)><p><strong>Check:</strong> REL006 - Missing PDB</p><p><strong>Recommendation:</strong> Create PDBs for all production workloads with 2+ replicas</p></div></div></div></div><div class="mt-4 p-4 rounded-lg"style=background:var(--bg-tertiary)><h4 class="font-medium mb-2"style=color:var(--text-primary)>Best Practices Summary</h4><ul class="text-sm space-y-1"style=color:var(--text-secondary)><li> Use at least 2 replicas for production workloads</li><li> Configure podAntiAffinity to spread pods across nodes</li><li> Create PodDisruptionBudgets for multi-replica workloads</li><li> Consider using topologySpreadConstraints for advanced placement</li><li> Monitor pod distribution across nodes regularly'),R_=w('<div class="text-center py-4"style=color:var(--text-secondary)>Loading vulnerability stats...'),P_=w('<div class="text-center py-8"style=color:var(--text-secondary)><p class="text-xs mt-2"style=color:var(--text-muted)>This may take a few moments'),I_=w('<div class="text-center py-8"style=color:var(--error-color)><p class=mb-2>Error scanning for vulnerabilities</p><p class=text-xs style=color:var(--text-muted)></p><button class="mt-4 px-4 py-2 rounded text-sm transition-colors"style=background:var(--accent-primary);color:white>Retry Scan'),B_=w('<div class="text-center py-8"style=color:var(--text-secondary)><svg class="w-12 h-12 mx-auto mb-4 text-green-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><p class=mb-2>No vulnerabilities found matching the selected criteria.</p><p class=text-xs style=color:var(--text-muted)>Click "Scan Cluster" to scan for vulnerabilities.'),N_=w('<div class="flex items-center justify-between mt-6 pt-4 border-t"style=border-color:var(--border-color)><div class=text-sm style=color:var(--text-secondary)>Showing <!>-<!> of <!> vulnerabilities</div><div class="flex items-center gap-2"><button class="px-3 py-1.5 rounded text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed">Previous</button><div class="flex items-center gap-1"></div><button class="px-3 py-1.5 rounded text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed">Next'),O_=w('<div class="mt-4 text-xs text-center"style=color:var(--text-muted)>Last NVD refresh: '),z_=w('<div class="card p-6 mt-6"><div class="flex items-center justify-between mb-4"><h3 class="font-semibold flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>CVE Vulnerabilities (NIST NVD)</h3><div class="flex items-center gap-2"><select class="px-3 py-1.5 rounded text-sm"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><option value>All Severities</option><option value=CRITICAL>Critical</option><option value=HIGH>High</option><option value=MEDIUM>Medium</option><option value=LOW>Low</option></select><button class="px-3 py-1.5 rounded text-sm transition-colors"title="Refresh NVD data"style=background:var(--bg-tertiary);color:var(--text-primary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button><button class="px-3 py-1.5 rounded text-sm transition-colors"style=background:var(--accent-primary);color:white>Scan Cluster'),F_=w('<div class="card p-6 mt-6"><div class="text-center py-8"style=color:var(--text-muted)><svg class="w-12 h-12 mx-auto mb-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><p class="text-lg mb-2">CVE Vulnerabilities are disabled</p><p class=text-sm>Enable CVE Vulnerabilities (NIST NVD) in Settings to scan for vulnerabilities'),H_=w('<div class=space-y-6><div class="flex items-center justify-between"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Security & Diagnostics</h1><p style=color:var(--text-secondary)>Cluster health checks, security posture, vulnerability scanning, and best practices analysis</p></div><div class="flex items-center gap-2"><button class="flex items-center gap-2 px-4 py-2 rounded-lg transition-colors"title="Export diagnostic report"style=background:var(--bg-tertiary);color:var(--text-primary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>Export Report</button><button class="flex items-center gap-2 px-4 py-2 rounded-lg transition-colors"style=background:var(--accent-primary);color:white><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>Run Diagnostics</button></div></div><div class="grid grid-cols-1 md:grid-cols-4 gap-6"><div class="card p-6"><div class=text-center><div class="text-5xl font-bold mb-2"></div><div style=color:var(--text-secondary)>Health Score</div><div class="mt-4 h-2 rounded-full overflow-hidden"style=background:var(--bg-tertiary)><div class="h-full rounded-full transition-all"></div></div></div></div><div class="card p-6"><div class=text-center><div class="text-3xl font-bold"style=color:var(--error-color)></div><div class=text-sm style=color:var(--text-secondary)>Critical Issues</div></div></div><div class="card p-6"><div class=text-center><div class="text-3xl font-bold"style=color:var(--warning-color)></div><div class=text-sm style=color:var(--text-secondary)>Warnings</div></div></div><div class="card p-6"><div class=text-center><div class="text-3xl font-bold"style=color:var(--accent-primary)></div><div class=text-sm style=color:var(--text-secondary)>Info</div></div></div></div><div class="flex gap-2 flex-wrap items-center"><button class="px-3 py-1.5 rounded-lg text-sm transition-colors">All Categories</button><div class=flex-1></div></div><div class="card p-6 mt-6"><h3 class="font-semibold mb-4 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg>Security Best Practices</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="p-4 rounded-lg"style=background:var(--bg-tertiary)><h4 class="font-medium mb-2"style=color:var(--text-primary)>Pod Security</h4><ul class="space-y-1 text-sm"style=color:var(--text-secondary)><li>- Run containers as non-root user</li><li>- Use read-only root filesystem</li><li>- Drop all capabilities and add only needed ones</li><li>- Use Pod Security Standards</li></ul></div><div class="p-4 rounded-lg"style=background:var(--bg-tertiary)><h4 class="font-medium mb-2"style=color:var(--text-primary)>Network Security</h4><ul class="space-y-1 text-sm"style=color:var(--text-secondary)><li>- Implement NetworkPolicies</li><li>- Use TLS for all communications</li><li>- Restrict egress traffic</li><li>- Use service mesh for mTLS</li></ul></div><div class="p-4 rounded-lg"style=background:var(--bg-tertiary)><h4 class="font-medium mb-2"style=color:var(--text-primary)>Access Control</h4><ul class="space-y-1 text-sm"style=color:var(--text-secondary)><li>- Use RBAC with least privilege</li><li>- Avoid cluster-admin bindings</li><li>- Use dedicated service accounts</li><li>- Enable audit logging</li></ul></div><div class="p-4 rounded-lg"style=background:var(--bg-tertiary)><h4 class="font-medium mb-2"style=color:var(--text-primary)>Image Security</h4><ul class="space-y-1 text-sm"style=color:var(--text-secondary)><li>- Scan images for vulnerabilities</li><li>- Use trusted base images</li><li>- Sign and verify images</li><li>- Keep images up to date'),j_=w('<span class="ml-1 opacity-70">(<!>)'),U_=w('<button class="px-3 py-1.5 rounded-lg text-sm transition-colors">'),nc=w('<div class="mt-2 text-xs flex items-start gap-1"style=color:var(--accent-primary)><svg class="w-3 h-3 mt-0.5 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>'),V_=w('<div class="p-4 rounded-lg border"><div class="flex items-start justify-between gap-4"><div class="flex items-start gap-3 flex-1"><div class=mt-0.5></div><div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-1"><span class=font-medium style=color:var(--text-primary)></span><span class="px-2 py-0.5 rounded text-xs"></span><span class="px-2 py-0.5 rounded text-xs"style=background:var(--bg-tertiary);color:var(--text-muted)></span></div><div class="text-sm mb-1"style=color:var(--text-secondary)></div><div class=text-xs style=color:var(--text-muted)><span class=font-mono>'),W_=w('<svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--error-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z">'),q_=w('<svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--warning-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z">'),K_=w('<svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z">'),Y_=w("<span> in "),lc=w("<button>"),G_=w('<div class="grid grid-cols-2 md:grid-cols-5 gap-4 mb-6"><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class="text-2xl font-bold"style=color:var(--text-primary)></div><div class=text-xs style=color:var(--text-secondary)>Total CVEs</div></div><div class="p-3 rounded-lg"style="background:rgba(239, 68, 68, 0.1)"><div class="text-2xl font-bold"style=color:var(--error-color)></div><div class=text-xs style=color:var(--text-secondary)>Critical</div></div><div class="p-3 rounded-lg"style="background:rgba(245, 158, 11, 0.1)"><div class="text-2xl font-bold"style=color:var(--warning-color)></div><div class=text-xs style=color:var(--text-secondary)>High</div></div><div class="p-3 rounded-lg"style="background:rgba(6, 182, 212, 0.1)"><div class="text-2xl font-bold"style=color:var(--accent-primary)></div><div class=text-xs style=color:var(--text-secondary)>Medium</div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class="text-2xl font-bold"style=color:var(--text-primary)></div><div class=text-xs style=color:var(--text-secondary)>CVE Cache'),J_=w('<div class="mt-2 flex flex-wrap gap-2">'),X_=w('<div class="p-4 rounded-lg border"><div class="flex items-start justify-between gap-4"><div class=flex-1><div class="flex items-center gap-2 mb-2"><span class="font-mono font-bold"style=color:var(--text-primary)></span><span class="px-2 py-0.5 rounded text-xs font-medium"style=color:white></span><span class=text-sm style=color:var(--text-secondary)>CVSS: </span></div><div class="text-sm mb-2"style=color:var(--text-secondary)></div><div class="text-xs mb-2"style=color:var(--text-muted)><span class=font-mono>'),Z_=w("<span> in <!>/"),Q_=w("<span> (<!>)"),e$=w('<a target=_blank rel="noopener noreferrer"class="text-xs px-2 py-1 rounded"style=background:var(--bg-tertiary);color:var(--accent-primary)>Reference');const t$=()=>{const[e,t]=W(""),[r,l]=W(""),[a,m]=W(1),[d,i]=W(1),[n,g]=W(""),v=10,p=()=>Os().enableDiagnostics,y=()=>Os().enableCVEVulnerabilities,x=()=>Os().enableSecurityChecks,[M]=it(Fe.getDiagnosticsCategories),[b,{refetch:o}]=it(()=>({ns:Xt(),cat:e(),enabled:p()}),async D=>{if(!D.enabled)return{findings:[],summary:{total:0,critical:0,warning:0,info:0,byCategory:{}},total:0};m(1),g("Initializing diagnostics...");const T=D.ns==="_all"?void 0:D.ns,B=D.cat||void 0;try{g(B?`Running ${B} checks in parallel...`:"Running all diagnostic checks in parallel...");const N=await Fe.runDiagnostics(T,B);return g(""),N}catch(N){throw g(""),N}}),[c,u]=W(0),[h,{refetch:f}]=it(()=>{const D=r(),T=c();return T>0?{severity:D,key:T}:null},async D=>{try{console.log("[Security] Fetching vulnerabilities with params:",D);const T=Date.now(),B=await Fe.scanVulnerabilities(D.severity||void 0),N=Date.now()-T;console.log(`[Security] Vulnerabilities fetched in ${N}ms:`,B?.vulnerabilities?.length||0,"vulnerabilities"),console.log("[Security] Result structure:",{hasVulnerabilities:!!B?.vulnerabilities,vulnArray:Array.isArray(B?.vulnerabilities),vulnLength:B?.vulnerabilities?.length,hasStats:!!B?.stats,hasLastRefresh:!!B?.lastRefresh,resultKeys:B?Object.keys(B):[]}),i(1);const O={vulnerabilities:Array.isArray(B?.vulnerabilities)?B.vulnerabilities:[],stats:B?.stats||{},lastRefresh:B?.lastRefresh||null};return console.log("[Security] Returning response:",{vulnCount:O.vulnerabilities.length,hasStats:!!O.stats,hasLastRefresh:!!O.lastRefresh}),O}catch(T){return console.error("[Security] Failed to scan vulnerabilities:",T),{vulnerabilities:[],stats:{},lastRefresh:null}}}),[$]=it(Fe.getVulnerabilityStats),C=et(()=>{const D=b();if(!D||!Array.isArray(D.findings)||D.findings.length===0)return{list:[],totalPages:0,startIdx:0,endIdx:0,total:0};const T=D.findings,B=Math.ceil(T.length/v),O=(a()-1)*v,H=O+v;return{list:T.slice(O,H),totalPages:B,startIdx:O,endIdx:H,total:T.length}}),k=et(()=>{const D=h();if(console.log("[Security] paginatedVulnerabilities memo - data:",{hasData:!!D,hasVulnerabilities:!!D?.vulnerabilities,isArray:Array.isArray(D?.vulnerabilities),length:D?.vulnerabilities?.length||0}),!D||!Array.isArray(D.vulnerabilities)||D.vulnerabilities.length===0)return console.log("[Security] paginatedVulnerabilities - returning empty"),{list:[],totalPages:0,startIdx:0,endIdx:0,total:0};const T=D.vulnerabilities,B=Math.ceil(T.length/v),O=(d()-1)*v,H=O+v,A={list:T.slice(O,H),totalPages:B,startIdx:O,endIdx:H,total:T.length};return console.log("[Security] paginatedVulnerabilities - result:",A),A});zt(()=>{console.log("[Security] Component mounted, triggering initial scan"),u(1)}),It(()=>{const D=h(),T=k();console.log("[Security] Vulnerabilities resource state:",{loading:h.loading,error:h.error,hasData:!!D,vulnCount:D?.vulnerabilities?.length||0,scanKey:c(),selectedSeverity:r(),paginatedTotal:T.total,paginatedListLength:T.list.length,dataStructure:D?{hasVulnerabilities:!!D.vulnerabilities,vulnArrayLength:D.vulnerabilities?.length,isArray:Array.isArray(D.vulnerabilities),hasStats:!!D.stats,hasLastRefresh:!!D.lastRefresh}:null})});const S=D=>{switch(D){case"critical":return"var(--error-color)";case"warning":return"var(--warning-color)";case"info":return"var(--accent-primary)";default:return"var(--text-secondary)"}},L=D=>{switch(D){case"critical":return"rgba(239, 68, 68, 0.1)";case"warning":return"rgba(245, 158, 11, 0.1)";case"info":return"rgba(6, 182, 212, 0.1)";default:return"var(--bg-tertiary)"}},P=D=>{switch(D){case"critical":return"rgba(239, 68, 68, 0.3)";case"warning":return"rgba(245, 158, 11, 0.3)";case"info":return"rgba(6, 182, 212, 0.3)";default:return"var(--border-color)"}},I=()=>{const D=b()?.summary;if(!D||D.total===0)return 100;const T=D.critical*25,B=D.warning*8,N=D.info*1,O=Math.max(0,100-T-B-N);return Math.round(O)};return(()=>{var D=H_(),T=D.firstChild,B=T.firstChild,N=B.firstChild;N.nextSibling;var O=B.nextSibling,H=O.firstChild,A=H.nextSibling,z=T.nextSibling,F=z.firstChild,j=F.firstChild,q=j.firstChild,U=q.nextSibling,Y=U.nextSibling,V=Y.firstChild,X=F.nextSibling,R=X.firstChild,G=R.firstChild;G.nextSibling;var te=X.nextSibling,ae=te.firstChild,Q=ae.firstChild;Q.nextSibling;var Z=te.nextSibling,ne=Z.firstChild,$e=ne.firstChild;$e.nextSibling;var re=z.nextSibling,de=re.firstChild,le=de.nextSibling,xe=re.nextSibling,ye=xe.firstChild,ke=ye.nextSibling,ge=ke.firstChild,Ce=ge.firstChild;Ce.nextSibling;var _e=ge.nextSibling,Me=_e.firstChild;Me.nextSibling;var ve=_e.nextSibling,be=ve.firstChild;be.nextSibling;var ce=ve.nextSibling,Ae=ce.firstChild;return Ae.nextSibling,H.$$click=()=>{const se=b();if(se){const oe={timestamp:new Date().toISOString(),summary:se.summary,findings:se.findings},ie=new Blob([JSON.stringify(oe,null,2)],{type:"application/json"}),ue=URL.createObjectURL(ie),he=document.createElement("a");he.href=ue,he.download=`kubegraf-diagnostics-${new Date().toISOString().split("T")[0]}.json`,he.click(),URL.revokeObjectURL(ue)}},A.$$click=()=>o(),s(q,I),s(G,()=>b()?.summary?.critical||0),s(Q,()=>b()?.summary?.warning||0),s($e,()=>b()?.summary?.info||0),de.$$click=()=>t(""),s(re,_(Xe,{get each(){return M()||[]},children:se=>(()=>{var oe=U_();return oe.$$click=()=>t(se.id),s(oe,()=>se.name,null),s(oe,_(K,{get when(){return b()?.summary?.byCategory?.[se.id]},get children(){var ie=j_(),ue=ie.firstChild,he=ue.nextSibling;return he.nextSibling,s(ie,()=>b()?.summary?.byCategory?.[se.id],he),ie}}),null),J(ie=>{var ue=e()===se.id?"var(--accent-primary)":"var(--bg-tertiary)",he=e()===se.id?"white":"var(--text-secondary)";return ue!==ie.e&&E(oe,"background",ie.e=ue),he!==ie.t&&E(oe,"color",ie.t=he),ie},{e:void 0,t:void 0}),oe})()}),le),s(re,_(K,{get when(){return Re(()=>!!b())()&&(b()?.findings||[]).some(se=>se.rule==="REL005")},get children(){var se=k_(),oe=se.firstChild,ie=oe.nextSibling,ue=ie.nextSibling;return se.$$click=()=>{const Te=(b()?.findings||[]).filter(ee=>ee.rule==="REL005");e()==="reliability"&&Te.length>0?document.querySelector('[data-rule="REL005"]')?.scrollIntoView({behavior:"smooth",block:"center"}):(t("reliability"),setTimeout(()=>{document.querySelector('[data-rule="REL005"]')?.scrollIntoView({behavior:"smooth",block:"center"})},300))},s(ue,()=>(b()?.findings||[]).filter(he=>he.rule==="REL005").length),se}}),null),s(D,_(K,{get when(){return p()},get children(){var se=E_(),oe=se.firstChild,ie=oe.firstChild,ue=ie.nextSibling,he=ue.nextSibling;return he.nextSibling,s(oe,()=>b()?.total||0,he),s(se,_(K,{get when(){return b.loading},get children(){var Te=M_(),ee=Te.firstChild;return s(Te,_(ni,{size:"lg",showText:!0,get text(){return n()||"Running diagnostics in parallel..."}}),ee),Te}}),null),s(se,_(K,{get when(){return Re(()=>!b.loading)()&&(b()?.findings?.length||0)===0},get children(){return A_()}}),null),s(se,_(K,{get when(){return Re(()=>!b.loading)()&&C().total>0},get children(){return[(()=>{var Te=ic();return s(Te,_(Xe,{get each(){return C().list},children:ee=>(()=>{var Se=V_(),pe=Se.firstChild,De=pe.firstChild,Ne=De.firstChild,me=Ne.nextSibling,He=me.firstChild,Ze=He.firstChild,we=Ze.nextSibling,ze=we.nextSibling,Pe=He.nextSibling,Ue=Pe.nextSibling,Oe=Ue.firstChild;return s(Ne,(()=>{var fe=Re(()=>ee.severity==="critical");return()=>fe()?W_():Re(()=>ee.severity==="warning")()?q_():K_()})()),s(Ze,()=>ee.rule),s(we,()=>ee.severity),s(ze,()=>ee.category),s(Pe,()=>ee.message),s(Oe,()=>ee.resource),s(Ue,(()=>{var fe=Re(()=>!!ee.namespace);return()=>fe()&&(()=>{var Le=Y_();return Le.firstChild,s(Le,()=>ee.namespace,null),Le})()})(),null),s(me,_(K,{get when(){return ee.remediation},get children(){var fe=nc(),Le=fe.firstChild,We=Le.nextSibling;return s(We,()=>ee.remediation),fe}}),null),J(fe=>{var Le=ee.rule,We=L(ee.severity),Ee=P(ee.severity),Ie=L(ee.severity),qe=S(ee.severity),Be=`1px solid ${P(ee.severity)}`;return Le!==fe.e&&dt(Se,"data-rule",fe.e=Le),We!==fe.t&&E(Se,"background",fe.t=We),Ee!==fe.a&&E(Se,"border-color",fe.a=Ee),Ie!==fe.o&&E(we,"background",fe.o=Ie),qe!==fe.i&&E(we,"color",fe.i=qe),Be!==fe.n&&E(we,"border",fe.n=Be),fe},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),Se})()})),Te})(),(()=>{var Te=L_(),ee=Te.firstChild,Se=ee.firstChild,pe=Se.nextSibling,De=pe.nextSibling,Ne=De.nextSibling,me=Ne.nextSibling,He=me.nextSibling;He.nextSibling;var Ze=ee.nextSibling,we=Ze.firstChild,ze=we.nextSibling,Pe=ze.nextSibling;return s(ee,()=>C().startIdx+1,pe),s(ee,()=>Math.min(C().endIdx,C().total),Ne),s(ee,()=>C().total,He),we.$$click=()=>m(Math.max(1,a()-1)),s(ze,()=>Array.from({length:Math.min(5,C().totalPages)},(Ue,Oe)=>{const fe=C().totalPages,Le=a();let We;return fe<=5||Le<=3?We=Oe+1:Le>=fe-2?We=fe-4+Oe:We=Le-2+Oe,(()=>{var Ee=lc();return Ee.$$click=()=>m(We),tt(Ee,`px-3 py-1.5 rounded text-sm transition-colors ${We===Le?"font-bold":""}`),E(Ee,"background",We===Le?"var(--accent-primary)":"var(--bg-tertiary)"),E(Ee,"color",We===Le?"white":"var(--text-primary)"),s(Ee,We),Ee})()})),Pe.$$click=()=>m(Math.min(C().totalPages,a()+1)),J(Ue=>{var Oe=a()===1,fe=a()===1?"var(--bg-tertiary)":"var(--accent-primary)",Le=a()===1?"var(--text-muted)":"white",We=a()===C().totalPages,Ee=a()===C().totalPages?"var(--bg-tertiary)":"var(--accent-primary)",Ie=a()===C().totalPages?"var(--text-muted)":"white";return Oe!==Ue.e&&(we.disabled=Ue.e=Oe),fe!==Ue.t&&E(we,"background",Ue.t=fe),Le!==Ue.a&&E(we,"color",Ue.a=Le),We!==Ue.o&&(Pe.disabled=Ue.o=We),Ee!==Ue.i&&E(Pe,"background",Ue.i=Ee),Ie!==Ue.n&&E(Pe,"color",Ue.n=Ie),Ue},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),Te})()]}}),null),se}}),xe),s(D,_(K,{get when(){return!p()},get children(){var se=T_();return se.firstChild,se}}),xe),s(D,_(K,{get when(){return x()},get children(){var se=D_(),oe=se.firstChild,ie=oe.nextSibling,ue=ie.firstChild,he=ue.firstChild,Te=he.firstChild,ee=Te.nextSibling,Se=ee.firstChild,pe=Se.nextSibling;pe.nextSibling;var De=ue.nextSibling,Ne=De.firstChild,me=Ne.firstChild,He=me.nextSibling,Ze=He.firstChild,we=Ze.nextSibling;we.nextSibling;var ze=De.nextSibling,Pe=ze.firstChild,Ue=Pe.firstChild,Oe=Ue.nextSibling,fe=Oe.firstChild,Le=fe.nextSibling;Le.nextSibling;var We=ze.nextSibling,Ee=We.firstChild;return Ee.nextSibling,se}}),xe),s(D,_(K,{get when(){return y()},get children(){var se=z_(),oe=se.firstChild,ie=oe.firstChild,ue=ie.nextSibling,he=ue.firstChild,Te=he.nextSibling,ee=Te.nextSibling;return he.addEventListener("change",Se=>l(Se.currentTarget.value)),Te.$$click=()=>Fe.refreshVulnerabilities().then(()=>f()),ee.$$click=async()=>{console.log("[Security] Scan Cluster button clicked"),l(""),u(Se=>Se+1),setTimeout(()=>{console.log("[Security] Manually refetching vulnerabilities"),f()},50)},s(se,_(K,{get when(){return $.loading},get fallback(){return _(K,{get when(){return $()},children:Se=>(()=>{var pe=G_(),De=pe.firstChild,Ne=De.firstChild;Ne.nextSibling;var me=De.nextSibling,He=me.firstChild;He.nextSibling;var Ze=me.nextSibling,we=Ze.firstChild;we.nextSibling;var ze=Ze.nextSibling,Pe=ze.firstChild;Pe.nextSibling;var Ue=ze.nextSibling,Oe=Ue.firstChild;return Oe.nextSibling,s(Ne,()=>Se().total||0),s(He,()=>Se().critical||0),s(we,()=>Se().high||0),s(Pe,()=>Se().medium||0),s(Oe,()=>Se().cveCount||0),pe})()})},get children(){return R_()}}),null),s(se,_(K,{get when(){return h.loading},get children(){var Se=P_(),pe=Se.firstChild;return s(Se,_(ni,{size:"lg",showText:!0,text:"Scanning cluster for vulnerabilities..."}),pe),Se}}),null),s(se,_(K,{get when(){return h.error},get children(){var Se=I_(),pe=Se.firstChild,De=pe.nextSibling,Ne=De.nextSibling;return s(De,()=>String(h.error)),Ne.$$click=()=>{u(me=>me+1),setTimeout(()=>f(),50)},Se}}),null),s(se,()=>{const Se=h(),pe=k();return console.log("[Security] Render check - vulnerabilities:",{loading:h.loading,error:h.error,hasData:!!Se,vulnCount:Se?.vulnerabilities?.length||0,paginatedTotal:pe.total,shouldShowList:!h.loading&&!h.error&&pe.total>0}),null},null),s(se,_(K,{get when(){return Re(()=>!!(!h.loading&&!h.error&&h()))()&&(h()?.vulnerabilities||[]).length===0},get children(){var Se=B_(),pe=Se.firstChild,De=pe.nextSibling;return De.nextSibling,Se}}),null),s(se,_(K,{get when(){return Re(()=>!h.loading&&!h.error)()&&k().total>0},get children(){return[(()=>{var Se=ic();return s(Se,_(Xe,{get each(){return k().list},children:pe=>(()=>{var De=X_(),Ne=De.firstChild,me=Ne.firstChild,He=me.firstChild,Ze=He.firstChild,we=Ze.nextSibling,ze=we.nextSibling;ze.firstChild;var Pe=He.nextSibling,Ue=Pe.nextSibling,Oe=Ue.firstChild;return s(Ze,()=>pe.cveId),s(we,()=>pe.severity),s(ze,()=>pe.cvssScore?.toFixed(1)||"N/A",null),s(Pe,()=>pe.description),s(Oe,()=>pe.affectedImage),s(Ue,(()=>{var fe=Re(()=>!!pe.namespace);return()=>fe()&&(()=>{var Le=Z_(),We=Le.firstChild,Ee=We.nextSibling;return Ee.nextSibling,s(Le,()=>pe.namespace,Ee),s(Le,()=>pe.podName,null),Le})()})(),null),s(Ue,(()=>{var fe=Re(()=>!!pe.containerName);return()=>fe()&&(()=>{var Le=Q_(),We=Le.firstChild,Ee=We.nextSibling;return Ee.nextSibling,s(Le,()=>pe.containerName,Ee),Le})()})(),null),s(me,_(K,{get when(){return pe.remediation},get children(){var fe=nc(),Le=fe.firstChild,We=Le.nextSibling;return s(We,()=>pe.remediation),fe}}),null),s(me,_(K,{get when(){return Re(()=>!!pe.references)()&&pe.references.length>0},get children(){var fe=J_();return s(fe,_(Xe,{get each(){return pe.references.slice(0,3)},children:Le=>(()=>{var We=e$();return dt(We,"href",Le),We})()})),fe}}),null),J(fe=>{var Le=pe.severity==="CRITICAL"?"rgba(239, 68, 68, 0.1)":pe.severity==="HIGH"?"rgba(245, 158, 11, 0.1)":"rgba(6, 182, 212, 0.1)",We=pe.severity==="CRITICAL"?"rgba(239, 68, 68, 0.3)":pe.severity==="HIGH"?"rgba(245, 158, 11, 0.3)":"rgba(6, 182, 212, 0.3)",Ee=pe.severity==="CRITICAL"?"var(--error-color)":pe.severity==="HIGH"?"var(--warning-color)":"var(--accent-primary)";return Le!==fe.e&&E(De,"background",fe.e=Le),We!==fe.t&&E(De,"border-color",fe.t=We),Ee!==fe.a&&E(we,"background",fe.a=Ee),fe},{e:void 0,t:void 0,a:void 0}),De})()})),Se})(),(()=>{var Se=N_(),pe=Se.firstChild,De=pe.firstChild,Ne=De.nextSibling,me=Ne.nextSibling,He=me.nextSibling,Ze=He.nextSibling,we=Ze.nextSibling;we.nextSibling;var ze=pe.nextSibling,Pe=ze.firstChild,Ue=Pe.nextSibling,Oe=Ue.nextSibling;return s(pe,()=>k().startIdx+1,Ne),s(pe,()=>Math.min(k().endIdx,k().total),He),s(pe,()=>k().total,we),Pe.$$click=()=>i(Math.max(1,d()-1)),s(Ue,()=>Array.from({length:Math.min(5,k().totalPages)},(fe,Le)=>{const We=k().totalPages,Ee=d();let Ie;return We<=5||Ee<=3?Ie=Le+1:Ee>=We-2?Ie=We-4+Le:Ie=Ee-2+Le,(()=>{var qe=lc();return qe.$$click=()=>i(Ie),tt(qe,`px-3 py-1.5 rounded text-sm transition-colors ${Ie===Ee?"font-bold":""}`),E(qe,"background",Ie===Ee?"var(--accent-primary)":"var(--bg-tertiary)"),E(qe,"color",Ie===Ee?"white":"var(--text-primary)"),s(qe,Ie),qe})()})),Oe.$$click=()=>i(Math.min(k().totalPages,d()+1)),J(fe=>{var Le=d()===1,We=d()===1?"var(--bg-tertiary)":"var(--accent-primary)",Ee=d()===1?"var(--text-muted)":"white",Ie=d()===k().totalPages,qe=d()===k().totalPages?"var(--bg-tertiary)":"var(--accent-primary)",Be=d()===k().totalPages?"var(--text-muted)":"white";return Le!==fe.e&&(Pe.disabled=fe.e=Le),We!==fe.t&&E(Pe,"background",fe.t=We),Ee!==fe.a&&E(Pe,"color",fe.a=Ee),Ie!==fe.o&&(Oe.disabled=fe.o=Ie),qe!==fe.i&&E(Oe,"background",fe.i=qe),Be!==fe.n&&E(Oe,"color",fe.n=Be),fe},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),Se})()]}}),null),s(se,_(K,{get when(){return Re(()=>!!h())()&&h()?.lastRefresh},get children(){var Se=O_();return Se.firstChild,s(Se,()=>new Date(h()?.lastRefresh||"").toLocaleString(),null),Se}}),null),J(()=>he.value=r()),se}}),null),s(D,_(K,{get when(){return!y()},get children(){var se=F_();return se.firstChild,se}}),null),J(se=>{var oe=I()>=80?"var(--success-color)":I()>=60?"var(--warning-color)":"var(--error-color)",ie=`${I()}%`,ue=I()>=80?"var(--success-color)":I()>=60?"var(--warning-color)":"var(--error-color)",he=e()===""?"var(--accent-primary)":"var(--bg-tertiary)",Te=e()===""?"white":"var(--text-secondary)";return oe!==se.e&&E(q,"color",se.e=oe),ie!==se.t&&E(V,"width",se.t=ie),ue!==se.a&&E(V,"background",se.a=ue),he!==se.o&&E(de,"background",se.o=he),Te!==se.i&&E(de,"color",se.i=Te),se},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),D})()};ut(["click"]);var r$=w("<div class=text-xs style=color:var(--text-muted)>Chart: "),s$=w('<span class="flex items-center gap-2"><svg class="animate-spin h-4 w-4"fill=none viewBox="0 0 24 24"><circle class=opacity-25 cx=12 cy=12 r=10 stroke=currentColor stroke-width=4></circle><path class=opacity-75 fill=currentColor d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>Uninstalling...'),i$=w('<div class=space-y-3><div class="flex items-start gap-2"><div class="flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center"style="background:rgba(239, 68, 68, 0.15)"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--error-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div><div class=flex-1><p class="text-sm mb-2"style=color:var(--text-primary)>Are you sure you want to uninstall <strong></strong> from <strong></strong>?</p><div class="p-2 rounded-lg mb-2"style=background:var(--bg-tertiary)><div class="text-xs font-medium mb-0.5"style=color:var(--text-primary)></div><div class=text-xs style=color:var(--text-muted)>Namespace: </div></div><p class="text-xs mb-2"style=color:var(--text-muted)>This action cannot be undone.</p></div></div><div class="flex justify-end gap-2 pt-3 border-t"style=border-color:var(--border-color)><button class="px-3 py-1.5 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"style=background:var(--bg-tertiary);color:var(--text-primary)>Cancel</button><button class="px-3 py-1.5 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"style=background:var(--error-color);color:white>');const n$=e=>_(mt,{get isOpen(){return e.isOpen},get onClose(){return e.onClose},title:"Uninstall Helm Release",size:"sm",get children(){var t=i$(),r=t.firstChild,l=r.firstChild;l.firstChild;var a=l.nextSibling,m=a.firstChild,d=m.firstChild,i=d.nextSibling,n=i.nextSibling,g=n.nextSibling,v=m.nextSibling,p=v.firstChild,y=p.nextSibling;y.firstChild,v.nextSibling;var x=r.nextSibling,M=x.firstChild,b=M.nextSibling;return s(i,()=>e.release?.name),s(g,()=>e.release?.namespace),s(p,()=>e.release?.name),s(v,_(K,{get when(){return e.release?.chart},get children(){var o=r$();return o.firstChild,s(o,()=>e.release?.chart,null),o}}),y),s(y,()=>e.release?.namespace,null),Rt(M,"click",e.onClose,!0),Rt(b,"click",e.onConfirm,!0),s(b,_(K,{get when(){return e.loading},fallback:"Uninstall",get children(){return s$()}})),J(o=>{var c=e.loading,u=e.loading;return c!==o.e&&(M.disabled=o.e=c),u!==o.t&&(b.disabled=o.t=u),o},{e:void 0,t:void 0}),t}});ut(["click"]);var l$=w('<svg viewBox="0 0 512 512"class="w-8 h-8"><path fill=#0F1689 d="M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256 256-114.6 256-256S397.4 0 256 0z"></path><g fill=#fff><circle cx=256 cy=256 r=50></circle><rect x=248 y=96 width=16 height=80 rx=8></rect><rect x=248 y=336 width=16 height=80 rx=8></rect><rect x=96 y=248 width=80 height=16 rx=8></rect><rect x=336 y=248 width=80 height=16 rx=8></rect><rect x=132 y=132 width=16 height=80 rx=8 transform="rotate(-45 140 172)"></rect><rect x=364 y=300 width=16 height=80 rx=8 transform="rotate(-45 372 340)"></rect><rect x=300 y=132 width=16 height=80 rx=8 transform="rotate(45 308 172)"></rect><rect x=132 y=300 width=16 height=80 rx=8 transform="rotate(45 140 340)">'),o$=w('<svg viewBox="0 0 128 128"class="w-8 h-8"><defs><linearGradient id=argoGrad x1=0% y1=0% x2=100% y2=100%><stop offset=0% style=stop-color:#EF7B4D></stop><stop offset=100% style=stop-color:#E96D3F></stop></linearGradient></defs><circle cx=64 cy=64 r=60 fill=url(#argoGrad)></circle><g fill=#fff><ellipse cx=64 cy=52 rx=28 ry=24></ellipse><circle cx=52 cy=48 r=6 fill=#E96D3F></circle><circle cx=76 cy=48 r=6 fill=#E96D3F></circle><circle cx=52 cy=48 r=3 fill=#1a1a1a></circle><circle cx=76 cy=48 r=3 fill=#1a1a1a></circle><path d="M44 76 Q34 90 28 100"stroke=#fff stroke-width=8 stroke-linecap=round fill=none></path><path d="M52 78 Q48 94 44 106"stroke=#fff stroke-width=8 stroke-linecap=round fill=none></path><path d="M64 80 Q64 96 64 108"stroke=#fff stroke-width=8 stroke-linecap=round fill=none></path><path d="M76 78 Q80 94 84 106"stroke=#fff stroke-width=8 stroke-linecap=round fill=none></path><path d="M84 76 Q94 90 100 100"stroke=#fff stroke-width=8 stroke-linecap=round fill=none>'),a$=w('<svg viewBox="0 0 128 128"class="w-8 h-8"><defs><linearGradient id=fluxGrad x1=0% y1=0% x2=100% y2=100%><stop offset=0% style=stop-color:#5468FF></stop><stop offset=100% style=stop-color:#316CE6></stop></linearGradient></defs><circle cx=64 cy=64 r=60 fill=url(#fluxGrad)></circle><g fill=none stroke=#fff stroke-width=8 stroke-linecap=round><path d="M24 44 Q44 28 64 44 Q84 60 104 44"></path><path d="M24 64 Q44 48 64 64 Q84 80 104 64"></path><path d="M24 84 Q44 68 64 84 Q84 100 104 84">'),c$=w('<svg viewBox="0 0 128 128"class="w-8 h-8"><defs><linearGradient id=kustomizeGrad x1=0% y1=0% x2=100% y2=100%><stop offset=0% style=stop-color:#326CE5></stop><stop offset=100% style=stop-color:#1D4ED8></stop></linearGradient></defs><circle cx=64 cy=64 r=60 fill=url(#kustomizeGrad)></circle><g fill=#fff><rect x=32 y=28 width=16 height=72 rx=2></rect><polygon points="48,64 80,28 96,28 56,72 96,100 80,100"></polygon></g><g fill=none stroke=#fff stroke-width=3><rect x=76 y=52 width=20 height=20 rx=2></rect><rect x=86 y=62 width=20 height=20 rx=2>'),d$=w('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">'),u$=w('<div class="text-2xl font-bold flex items-center justify-center"style=color:var(--accent-primary)><div class=spinner style=width:24px;height:24px>'),h$=w('<div class="text-2xl font-bold flex items-center justify-center"style=color:var(--accent-secondary)><div class=spinner style=width:24px;height:24px>'),g$=w('<div class="text-2xl font-bold flex items-center justify-center"style=color:#8b5cf6><div class=spinner style=width:24px;height:24px>'),v$=w('<div class="card p-6"><h3 class="font-semibold mb-4"style=color:var(--text-primary)>Quick Stats</h3><div class="grid grid-cols-2 md:grid-cols-4 gap-4"><div class="p-4 rounded-lg text-center"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-secondary)>Helm Releases</div></div><div class="p-4 rounded-lg text-center"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-secondary)>ArgoCD Apps</div></div><div class="p-4 rounded-lg text-center"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-secondary)>Flux Resources</div></div><div class="p-4 rounded-lg text-center"style=background:var(--bg-tertiary)><div class="text-2xl font-bold"style=color:var(--success-color)></div><div class=text-sm style=color:var(--text-secondary)>Active Plugins'),f$=w('<div class="flex items-center justify-between mb-4"><div class=text-sm style=color:var(--text-muted)> releases</div><button class="flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-colors"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>Refresh'),p$=w("<table class=data-table><thead><tr><th>Name</th><th>Namespace</th><th>Chart</th><th>Revision</th><th>Status</th><th>Updated</th><th>Actions</th></tr></thead><tbody>"),gl=w('<div class="card overflow-hidden">'),m$=w('<div class="flex items-center justify-between mb-4"><div class=text-sm style=color:var(--text-muted)> applications</div><button class="flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-colors"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>Refresh'),b$=w("<table class=data-table><thead><tr><th>Name</th><th>Project</th><th>Sync Status</th><th>Health</th><th>Age</th><th>Actions</th></tr></thead><tbody>"),x$=w('<div class="flex items-center justify-between mb-4"><div class=text-sm style=color:var(--text-muted)> resources</div><button class="flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-colors"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>Refresh'),y$=w("<table class=data-table><thead><tr><th>Name</th><th>Kind</th><th>Namespace</th><th>Ready</th><th>Status</th></tr></thead><tbody>"),oc=w("<div>"),_$=w('<div class="border rounded-lg overflow-hidden"style=border-color:var(--border-color)><table class="data-table w-full"><thead><tr><th>Revision</th><th>Status</th><th>Updated</th><th>Description</th><th>Actions</th></tr></thead><tbody>'),$$=w('<div class=space-y-4><div class="grid grid-cols-2 gap-4"><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Chart</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Current Revision</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Namespace</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Status</div><div><span class="badge badge-success"></span></div></div><div class="p-3 rounded-lg col-span-2"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Last Updated</div><div style=color:var(--text-primary)></div></div></div><div><h4 class="font-semibold mb-3 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>Release History'),w$=w('<div class=space-y-4><div class="flex gap-2"><button class="flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors"title="Apply changes from Git repository"style=background:var(--accent-primary);color:#fff><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg></button><button title="Fetch latest state from cluster"class="flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div><div class="grid grid-cols-2 gap-4"><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Project</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Namespace</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Sync Status</div><div><span></span></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Health</div><div><span></span></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Age</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Revision</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg col-span-2"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Repository</div><div class="text-sm break-all"style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Path</div><div style=color:var(--text-primary)></div></div><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Cluster</div><div class="text-sm break-all"style=color:var(--text-primary)>'),S$=w('<div class=space-y-6><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Plugins</h1><p style=color:var(--text-secondary)>GitOps and package management integrations</p></div><div class="flex gap-2 border-b"style=border-color:var(--border-color)>'),C$=w('<button class="px-4 py-2 -mb-px transition-colors">'),k$=w('<div class="card p-6"><div class="flex items-center gap-3 mb-4"><div class=flex-shrink-0></div><div><div class=font-semibold style=color:var(--text-primary)></div><div class=text-sm style=color:var(--text-muted)></div></div></div><p class="text-sm mb-4"style=color:var(--text-secondary)></p><div class="flex items-center justify-between"><span></span><button class=text-sm style=color:var(--accent-primary)>View '),M$=w('<div class="text-2xl font-bold"style=color:var(--accent-primary)>'),A$=w('<div class="text-2xl font-bold"style=color:var(--accent-secondary)>'),L$=w('<div class="text-2xl font-bold"style=color:#8b5cf6>'),vl=w('<div class="p-8 text-center"><div class="spinner mx-auto">'),E$=w('<tr><td colspan=7 class="text-center py-8"style=color:var(--text-muted)>No Helm releases found'),T$=w('<tr class="cursor-pointer hover:bg-[var(--bg-tertiary)]"><td class=font-medium style=color:var(--accent-primary)></td><td></td><td></td><td></td><td><span></span></td><td></td><td><div class="flex gap-1"><button class=action-btn title="Details &amp; History"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></button><button class=action-btn title="Uninstall release"type=button style=color:var(--error-color)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">'),D$=w('<div class="p-8 text-center"style=color:var(--text-muted)><svg class="w-12 h-12 mx-auto mb-4 opacity-50"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg><p>No ArgoCD applications found</p><p class="text-sm mt-2">ArgoCD may not be installed or configured'),R$=w('<tr class="cursor-pointer hover:bg-[var(--bg-tertiary)]"><td class=font-medium style=color:var(--accent-primary)></td><td></td><td><span></span></td><td><span></span></td><td></td><td class="flex gap-1"><button class=action-btn title="Sync - Apply changes from Git"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg></button><button class=action-btn title="Refresh - Fetch latest state"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button><button class=action-btn title=Details><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z">'),P$=w('<div class="p-8 text-center"style=color:var(--text-muted)><svg class="w-12 h-12 mx-auto mb-4 opacity-50"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg><p>No Flux resources found</p><p class="text-sm mt-2">Flux may not be installed or configured'),I$=w("<tr><td class=font-medium style=color:var(--accent-primary)></td><td></td><td></td><td><span></span></td><td>"),B$=w('<div class="p-4 text-center"><div class="spinner mx-auto">'),N$=w('<div class="p-4 text-center"style=color:var(--text-muted)>No history available'),O$=w('<span class="ml-2 badge badge-success">current'),z$=w('<button class="px-3 py-1.5 rounded transition-colors font-medium"style=background:var(--warning-color);color:#000>'),F$=w('<tr><td style=color:var(--accent-primary)></td><td><span></span></td><td style=color:var(--text-secondary)></td><td class="max-w-xs truncate"style=color:var(--text-muted)></td><td>');const H$=()=>{const[e,t]=W("overview"),[r,l]=W(null),[a,m]=W(null),[d,i]=W(!1),[n,g]=W(!1),[v,p]=W([]),[y,x]=W(!1),[M,b]=W(!1),[o,c]=W(null),[u,h]=W(!1),[f,$]=W(null),[C,k]=W(!1),[S,{refetch:L,mutate:P}]=it(()=>e()==="helm"||e()==="overview"?nr():!1,async()=>Fe.getHelmReleases()),[I,{refetch:D,mutate:T}]=it(()=>e()==="argocd"||e()==="overview"?nr():!1,async()=>Fe.getArgoCDApps()),[B,{refetch:N,mutate:O}]=it(()=>e()==="flux"||e()==="overview"?nr():!1,async()=>Fe.getFluxResources());It(()=>{nr()&&(P(void 0),T(void 0),O(void 0))});const H=async(Q,Z)=>{x(!0);try{const ne=await Fe.getHelmReleaseHistory(Q,Z);p(ne.history||[])}catch(ne){console.error("Failed to fetch release history:",ne),p([])}x(!1)},A=async Q=>{const Z=r();if(Z){b(!0),c(null);try{await Fe.rollbackHelmRelease(Z.name,Z.namespace,Q),c({type:"success",text:`Rolled back to revision ${Q}`}),H(Z.name,Z.namespace),L()}catch(ne){c({type:"error",text:ne.message||"Rollback failed"})}b(!1)}},z=async()=>{const Q=a();if(Q){b(!0),c(null);try{await Fe.syncArgoCDApp(Q.name,Q.namespace),c({type:"success",text:"Sync triggered successfully"}),D()}catch(Z){c({type:"error",text:Z.message||"Sync failed"})}b(!1)}},F=async()=>{const Q=a();if(Q){b(!0),c(null);try{await Fe.refreshArgoCDApp(Q.name,Q.namespace),c({type:"success",text:"Refresh triggered successfully"}),D()}catch(Z){c({type:"error",text:Z.message||"Refresh failed"})}b(!1)}},j=Q=>{console.log("[Plugins] Opening uninstall modal for:",Q.name),$(Q),h(!0)},q=async()=>{const Q=f();if(Q){k(!0);try{await Fe.uninstallApp(Q.name,Q.namespace),L(),h(!1),$(null),c({type:"success",text:`${Q.name} uninstalled successfully`})}catch(Z){c({type:"error",text:`Failed to uninstall ${Q.name}: ${Z.message||"Unknown error"}`})}finally{k(!1)}}},U=Q=>{l(Q),i(!0),c(null),H(Q.name,Q.namespace)},Y=Q=>{m(Q),g(!0),c(null)},V=()=>l$(),X=()=>o$(),R=()=>a$(),G=()=>c$(),te=[{name:"Helm",version:"v3",enabled:!0,description:"Package manager for Kubernetes",icon:_(V,{})},{name:"ArgoCD",version:"v2",enabled:!0,description:"GitOps continuous delivery",icon:_(X,{})},{name:"Flux",version:"v2",enabled:!0,description:"GitOps toolkit for Kubernetes",icon:_(R,{})},{name:"Kustomize",version:"v5",enabled:!0,description:"Kubernetes native configuration management",icon:_(G,{})}],ae=[{id:"overview",label:"Overview"},{id:"helm",label:"Helm Releases"},{id:"argocd",label:"ArgoCD Apps"},{id:"flux",label:"Flux Resources"}];return(()=>{var Q=S$(),Z=Q.firstChild,ne=Z.firstChild;ne.nextSibling;var $e=Z.nextSibling;return s($e,_(Xe,{each:ae,children:re=>(()=>{var de=C$();return de.$$click=()=>t(re.id),s(de,()=>re.label),J(le=>{var xe=e()===re.id?"var(--accent-primary)":"var(--text-secondary)",ye=e()===re.id?"2px solid var(--accent-primary)":"2px solid transparent";return xe!==le.e&&E(de,"color",le.e=xe),ye!==le.t&&E(de,"border-bottom",le.t=ye),le},{e:void 0,t:void 0}),de})()})),s(Q,_(K,{get when(){return e()==="overview"},get children(){return[(()=>{var re=d$();return s(re,_(Xe,{each:te,children:de=>(()=>{var le=k$(),xe=le.firstChild,ye=xe.firstChild,ke=ye.nextSibling,ge=ke.firstChild,Ce=ge.nextSibling,_e=xe.nextSibling,Me=_e.nextSibling,ve=Me.firstChild,be=ve.nextSibling;return s(ye,()=>de.icon),s(ge,()=>de.name),s(Ce,()=>de.version),s(_e,()=>de.description),s(ve,()=>de.enabled?"Enabled":"Disabled"),be.$$click=()=>t(de.name.toLowerCase()),J(()=>tt(ve,`badge ${de.enabled?"badge-success":"badge-warning"}`)),le})()})),re})(),(()=>{var re=v$(),de=re.firstChild,le=de.nextSibling,xe=le.firstChild,ye=xe.firstChild,ke=xe.nextSibling,ge=ke.firstChild,Ce=ke.nextSibling,_e=Ce.firstChild,Me=Ce.nextSibling,ve=Me.firstChild;return ve.nextSibling,s(xe,_(K,{get when(){return S.loading},get fallback(){return(()=>{var be=M$();return s(be,(()=>{var ce=Re(()=>!!Array.isArray(S()));return()=>ce()?S().length:0})()),be})()},get children(){var be=u$();return be.firstChild,be}}),ye),s(ke,_(K,{get when(){return I.loading},get fallback(){return(()=>{var be=A$();return s(be,(()=>{var ce=Re(()=>!!Array.isArray(I()));return()=>ce()?I().length:0})()),be})()},get children(){var be=h$();return be.firstChild,be}}),ge),s(Ce,_(K,{get when(){return B.loading},get fallback(){return(()=>{var be=L$();return s(be,(()=>{var ce=Re(()=>!!Array.isArray(B()));return()=>ce()?B().length:0})()),be})()},get children(){var be=g$();return be.firstChild,be}}),_e),s(ve,()=>te.filter(be=>be.enabled).length),re})()]}}),null),s(Q,_(K,{get when(){return e()==="helm"},get children(){return[(()=>{var re=f$(),de=re.firstChild,le=de.firstChild,xe=de.nextSibling,ye=xe.firstChild;return s(de,()=>S()?.length||0,le),xe.$$click=()=>L(),J(ke=>{var ge=S.loading,Ce=S.loading?.5:1,_e=`w-4 h-4 ${S.loading?"animate-spin":""}`;return ge!==ke.e&&(xe.disabled=ke.e=ge),Ce!==ke.t&&E(xe,"opacity",ke.t=Ce),_e!==ke.a&&dt(ye,"class",ke.a=_e),ke},{e:void 0,t:void 0,a:void 0}),re})(),(()=>{var re=gl();return s(re,_(K,{get when(){return!S.loading},get fallback(){return vl()},get children(){var de=p$(),le=de.firstChild,xe=le.nextSibling;return s(xe,_(Xe,{get each(){return S()||[]},get fallback(){return(()=>{var ye=E$();return ye.firstChild,ye})()},children:ye=>(()=>{var ke=T$(),ge=ke.firstChild,Ce=ge.nextSibling,_e=Ce.nextSibling,Me=_e.nextSibling,ve=Me.nextSibling,be=ve.firstChild,ce=ve.nextSibling,Ae=ce.nextSibling,se=Ae.firstChild,oe=se.firstChild,ie=oe.nextSibling;return ke.$$click=()=>U(ye),s(ge,()=>ye.name),s(Ce,()=>ye.namespace),s(_e,()=>ye.chart),s(Me,()=>ye.revision),s(be,()=>ye.status),s(ce,()=>ye.updated),oe.$$click=ue=>{ue.stopPropagation(),U(ye)},ie.$$click=ue=>{ue.preventDefault(),ue.stopPropagation(),console.log("[Plugins] Uninstall button clicked for:",ye.name),j(ye)},J(()=>tt(be,`badge ${ye.status==="deployed"?"badge-success":"badge-warning"}`)),ke})()})),de}})),re})()]}}),null),s(Q,_(K,{get when(){return e()==="argocd"},get children(){return[(()=>{var re=m$(),de=re.firstChild,le=de.firstChild,xe=de.nextSibling,ye=xe.firstChild;return s(de,()=>I()?.length||0,le),xe.$$click=()=>D(),J(ke=>{var ge=I.loading,Ce=I.loading?.5:1,_e=`w-4 h-4 ${I.loading?"animate-spin":""}`;return ge!==ke.e&&(xe.disabled=ke.e=ge),Ce!==ke.t&&E(xe,"opacity",ke.t=Ce),_e!==ke.a&&dt(ye,"class",ke.a=_e),ke},{e:void 0,t:void 0,a:void 0}),re})(),(()=>{var re=gl();return s(re,_(K,{get when(){return!I.loading},get fallback(){return vl()},get children(){return _(K,{get when(){return(I()||[]).length>0},get fallback(){return D$()},get children(){var de=b$(),le=de.firstChild,xe=le.nextSibling;return s(xe,_(Xe,{get each(){return I()||[]},children:ye=>(()=>{var ke=R$(),ge=ke.firstChild,Ce=ge.nextSibling,_e=Ce.nextSibling,Me=_e.firstChild,ve=_e.nextSibling,be=ve.firstChild,ce=ve.nextSibling,Ae=ce.nextSibling,se=Ae.firstChild,oe=se.nextSibling,ie=oe.nextSibling;return ke.$$click=()=>Y(ye),s(ge,()=>ye.name),s(Ce,()=>ye.project),s(Me,()=>ye.syncStatus),s(be,()=>ye.health),s(ce,()=>ye.age),se.$$click=ue=>{ue.stopPropagation(),m(ye),z()},oe.$$click=ue=>{ue.stopPropagation(),m(ye),F()},ie.$$click=ue=>{ue.stopPropagation(),Y(ye)},J(ue=>{var he=`badge ${ye.syncStatus==="Synced"?"badge-success":"badge-warning"}`,Te=`badge ${ye.health==="Healthy"?"badge-success":"badge-error"}`;return he!==ue.e&&tt(Me,ue.e=he),Te!==ue.t&&tt(be,ue.t=Te),ue},{e:void 0,t:void 0}),ke})()})),de}})}})),re})()]}}),null),s(Q,_(K,{get when(){return e()==="flux"},get children(){return[(()=>{var re=x$(),de=re.firstChild,le=de.firstChild,xe=de.nextSibling,ye=xe.firstChild;return s(de,()=>B()?.length||0,le),xe.$$click=()=>N(),J(ke=>{var ge=B.loading,Ce=B.loading?.5:1,_e=`w-4 h-4 ${B.loading?"animate-spin":""}`;return ge!==ke.e&&(xe.disabled=ke.e=ge),Ce!==ke.t&&E(xe,"opacity",ke.t=Ce),_e!==ke.a&&dt(ye,"class",ke.a=_e),ke},{e:void 0,t:void 0,a:void 0}),re})(),(()=>{var re=gl();return s(re,_(K,{get when(){return!B.loading},get fallback(){return vl()},get children(){return _(K,{get when(){return(B()||[]).length>0},get fallback(){return P$()},get children(){var de=y$(),le=de.firstChild,xe=le.nextSibling;return s(xe,_(Xe,{get each(){return B()||[]},children:ye=>(()=>{var ke=I$(),ge=ke.firstChild,Ce=ge.nextSibling,_e=Ce.nextSibling,Me=_e.nextSibling,ve=Me.firstChild,be=Me.nextSibling;return s(ge,()=>ye.name),s(Ce,()=>ye.kind),s(_e,()=>ye.namespace),s(ve,()=>ye.ready?"True":"False"),s(be,()=>ye.status),J(()=>tt(ve,`badge ${ye.ready?"badge-success":"badge-error"}`)),ke})()})),de}})}})),re})()]}}),null),s(Q,_(mt,{get isOpen(){return d()},onClose:()=>i(!1),get title(){return`Helm Release: ${r()?.name}`},size:"lg",get children(){return _(K,{get when(){return r()},get children(){var re=$$(),de=re.firstChild,le=de.firstChild,xe=le.firstChild,ye=xe.nextSibling,ke=le.nextSibling,ge=ke.firstChild,Ce=ge.nextSibling,_e=ke.nextSibling,Me=_e.firstChild,ve=Me.nextSibling,be=_e.nextSibling,ce=be.firstChild,Ae=ce.nextSibling,se=Ae.firstChild,oe=be.nextSibling,ie=oe.firstChild,ue=ie.nextSibling,he=de.nextSibling;return he.firstChild,s(re,_(K,{get when(){return o()},get children(){var Te=oc();return s(Te,()=>o()?.text),J(()=>tt(Te,`p-3 rounded-lg ${o()?.type==="success"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`)),Te}}),de),s(ye,()=>r()?.chart),s(Ce,()=>r()?.revision),s(ve,()=>r()?.namespace),s(se,()=>r()?.status),s(ue,()=>r()?.updated),s(he,_(K,{get when(){return!y()},get fallback(){return B$()},get children(){return _(K,{get when(){return v().length>0},get fallback(){return N$()},get children(){var Te=_$(),ee=Te.firstChild,Se=ee.firstChild,pe=Se.nextSibling;return s(pe,_(Xe,{get each(){return v()},children:De=>(()=>{var Ne=F$(),me=Ne.firstChild,He=me.nextSibling,Ze=He.firstChild,we=He.nextSibling,ze=we.nextSibling,Pe=ze.nextSibling;return s(me,()=>De.revision,null),s(me,_(K,{get when(){return De.revision===r()?.revision},get children(){return O$()}}),null),s(Ze,()=>De.status),s(we,()=>De.updated),s(ze,()=>De.description||"-"),s(Pe,_(K,{get when(){return De.revision!==r()?.revision},get children(){var Ue=z$();return Ue.$$click=()=>A(De.revision),s(Ue,()=>M()?"Rolling back...":"Rollback"),J(Oe=>{var fe=M(),Le=M()?.5:1;return fe!==Oe.e&&(Ue.disabled=Oe.e=fe),Le!==Oe.t&&E(Ue,"opacity",Oe.t=Le),Oe},{e:void 0,t:void 0}),Ue}})),J(()=>tt(Ze,`badge ${De.status==="deployed"?"badge-success":De.status==="superseded"?"badge-secondary":"badge-warning"}`)),Ne})()})),Te}})}}),null),re}})}}),null),s(Q,_(mt,{get isOpen(){return n()},onClose:()=>g(!1),get title(){return`ArgoCD App: ${a()?.name}`},size:"lg",get children(){return _(K,{get when(){return a()},get children(){var re=w$(),de=re.firstChild,le=de.firstChild;le.firstChild;var xe=le.nextSibling;xe.firstChild;var ye=de.nextSibling,ke=ye.firstChild,ge=ke.firstChild,Ce=ge.nextSibling,_e=ke.nextSibling,Me=_e.firstChild,ve=Me.nextSibling,be=_e.nextSibling,ce=be.firstChild,Ae=ce.nextSibling,se=Ae.firstChild,oe=be.nextSibling,ie=oe.firstChild,ue=ie.nextSibling,he=ue.firstChild,Te=oe.nextSibling,ee=Te.firstChild,Se=ee.nextSibling,pe=Te.nextSibling,De=pe.firstChild,Ne=De.nextSibling,me=pe.nextSibling,He=me.firstChild,Ze=He.nextSibling,we=me.nextSibling,ze=we.firstChild,Pe=ze.nextSibling,Ue=we.nextSibling,Oe=Ue.firstChild,fe=Oe.nextSibling;return s(re,_(K,{get when(){return o()},get children(){var Le=oc();return s(Le,()=>o()?.text),J(()=>tt(Le,`p-3 rounded-lg ${o()?.type==="success"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`)),Le}}),de),le.$$click=z,s(le,()=>M()?"Syncing...":"Sync",null),xe.$$click=F,s(xe,()=>M()?"Refreshing...":"Refresh",null),s(Ce,()=>a()?.project),s(ve,()=>a()?.namespace),s(se,()=>a()?.syncStatus),s(he,()=>a()?.health),s(Se,()=>a()?.age),s(Ne,()=>a()?.revision||"-"),s(Ze,()=>a()?.repoURL||"-"),s(Pe,()=>a()?.path||"-"),s(fe,()=>a()?.cluster||"-"),J(Le=>{var We=M(),Ee=M()?.5:1,Ie=M(),qe=M()?.5:1,Be=`badge ${a()?.syncStatus==="Synced"?"badge-success":"badge-warning"}`,Ke=`badge ${a()?.health==="Healthy"?"badge-success":"badge-error"}`;return We!==Le.e&&(le.disabled=Le.e=We),Ee!==Le.t&&E(le,"opacity",Le.t=Ee),Ie!==Le.a&&(xe.disabled=Le.a=Ie),qe!==Le.o&&E(xe,"opacity",Le.o=qe),Be!==Le.i&&tt(se,Le.i=Be),Ke!==Le.n&&tt(he,Le.n=Ke),Le},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),re}})}}),null),s(Q,_(n$,{get isOpen(){return u()},get release(){return f()},onClose:()=>{h(!1),$(null)},onConfirm:q,get loading(){return C()}}),null),Q})()};ut(["click"]);var j$=w('<svg class="w-8 h-8"viewBox="0 0 48 48"><path fill=#4285F4 d="M24 4L6 14v20l18 10 18-10V14L24 4z"></path><path fill=#EA4335 d="M24 4L6 14l18 10 18-10L24 4z"></path><path fill=#34A853 d="M6 34l18 10V24L6 14v20z"></path><path fill=#FBBC05 d="M42 34V14L24 24v20l18-10z"></path><path fill=#fff d="M24 17l-7 4v8l7 4 7-4v-8l-7-4z"opacity=.3>'),U$=w('<svg class="w-8 h-8"viewBox="0 0 48 48"><path fill=#FF9900 d="M8 24c0-8.8 7.2-16 16-16s16 7.2 16 16-7.2 16-16 16S8 32.8 8 24z"></path><path fill=#252F3E d="M16 22c0-4.4 3.6-8 8-8s8 3.6 8 8-3.6 8-8 8-8-3.6-8-8z">'),V$=w('<svg class="w-8 h-8"viewBox="0 0 48 48"><path fill=#0089D6 d="M24 4L8 24l8 16h16l8-16L24 4z">'),W$=w('<svg class="w-8 h-8"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z">'),q$=w('<div class="text-center py-8"style=color:var(--text-muted)>No namespace cost data available'),K$=w('<span class="text-xs px-1.5 py-0.5 rounded"style="background:rgba(34, 197, 94, 0.2);color:var(--success-color)">~70% savings'),Y$=w('<div class="mt-4 pt-3 border-t"style=border-color:var(--border-color)><div class="flex justify-between text-sm"><span style=color:var(--text-secondary)>On-Demand Nodes</span><span style=color:var(--text-primary)></span></div><div class="flex justify-between text-sm mt-1"><span style=color:var(--text-secondary)>Spot/Preemptible Nodes</span><span class="flex items-center gap-1"><span style=color:var(--success-color)>'),G$=w('<div class="grid grid-cols-1 lg:grid-cols-2 gap-6"><div class="card p-6"><h3 class="font-semibold mb-4"style=color:var(--text-primary)>Cost by Namespace</h3><div class=space-y-3></div></div><div class="card p-6"><h3 class="font-semibold mb-4"style=color:var(--text-primary)>Resource Allocation</h3><div class=space-y-4><div><div class="flex justify-between text-sm mb-2"><span style=color:var(--text-secondary)>CPU (<!>)</span><span style=color:var(--text-muted)>Cluster Total</span></div><div class="h-3 rounded-full overflow-hidden"style=background:var(--bg-tertiary)><div class="h-full rounded-full"style=width:100%;background:var(--accent-primary)></div></div></div><div><div class="flex justify-between text-sm mb-2"><span style=color:var(--text-secondary)>Memory (<!>)</span><span style=color:var(--text-muted)>Cluster Total</span></div><div class="h-3 rounded-full overflow-hidden"style=background:var(--bg-tertiary)><div class="h-full rounded-full"style=width:100%;background:var(--accent-secondary)></div></div></div><div><div class="flex justify-between text-sm mb-2"><span style=color:var(--text-secondary)>Nodes</span><span style=color:var(--text-muted)></span></div></div></div><div class="mt-6 pt-4 border-t"style=border-color:var(--border-color)><h4 class="text-sm font-medium mb-3"style=color:var(--text-primary)>Pricing Rates (<!>)</h4><div class="space-y-2 text-sm"><div class="flex justify-between"><span style=color:var(--text-secondary)>CPU (per core/hour)</span><span style=color:var(--text-primary)>$</span></div><div class="flex justify-between"><span style=color:var(--text-secondary)>Memory (per GB/hour)</span><span style=color:var(--text-primary)>$</span></div><div class="flex justify-between"><span style=color:var(--text-secondary)>Storage (per GB/month)</span><span style=color:var(--text-primary)>$</span></div></div><p class="text-xs mt-3"style=color:var(--text-muted)>'),J$=w('<div class="card overflow-hidden"><table class=data-table><thead><tr><th>Namespace</th><th>Pods</th><th>CPU</th><th>Memory</th><th>Hourly</th><th>Daily</th><th>Monthly</th></tr></thead><tbody>'),X$=w('<div class="card p-6 mb-6"><div class="flex items-center gap-3"><svg class="w-6 h-6"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--success-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h3 class=font-semibold style=color:var(--text-primary)>Optimization Opportunities</h3><p class=text-sm style=color:var(--text-secondary)>Resources using less than 10% of their requests could be scaled down to save costs'),Z$=w('<div class="card overflow-hidden"><table class=data-table><thead><tr><th>Resource</th><th>Namespace</th><th>Kind</th><th>CPU Usage</th><th>Memory Usage</th><th>Wasted Cost/hr</th></tr></thead><tbody>'),Q$=w('<div class=space-y-6><div class="flex items-center justify-between"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Cost Analysis</h1><p style=color:var(--text-secondary)></p></div><div class="flex items-center gap-3 px-4 py-2 rounded-lg"style=background:var(--bg-tertiary)><div><div class=font-medium style=color:var(--text-primary)></div><div class=text-xs style=color:var(--text-muted)></div></div></div></div><div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div class="card p-6"><div class=text-sm style=color:var(--text-muted)>Hourly Cost</div><div class="text-3xl font-bold mt-2"style=color:var(--accent-primary)></div><div class="text-xs mt-1"style=color:var(--text-secondary)> nodes</div></div><div class="card p-6"><div class=text-sm style=color:var(--text-muted)>Daily Cost</div><div class="text-3xl font-bold mt-2"style=color:var(--accent-secondary)></div><div class="text-xs mt-1"style=color:var(--text-secondary)> CPU</div></div><div class="card p-6"><div class=text-sm style=color:var(--text-muted)>Monthly Estimate</div><div class="text-3xl font-bold mt-2"style=color:#f59e0b></div><div class="text-xs mt-1"style=color:var(--text-secondary)> Memory</div></div><div class="card p-6"><div class=text-sm style=color:var(--text-muted)>Potential Savings</div><div class="text-3xl font-bold mt-2"style=color:var(--success-color)></div><div class="text-xs mt-1"style=color:var(--text-secondary)> idle resources</div></div></div><div class="flex gap-2 border-b"style=border-color:var(--border-color)>'),e4=w('<button class="px-4 py-2 -mb-px transition-colors">'),t4=w('<div class="flex items-center justify-between p-3 rounded-lg"style=background:var(--bg-tertiary)><div><div class=font-medium style=color:var(--text-primary)></div><div class=text-xs style=color:var(--text-muted)> pods  <!> CPU  <!> mem</div></div><div class=text-right><div class=font-bold style=color:var(--warning-color)>/mo</div><div class=text-xs style=color:var(--text-muted)>/day'),r4=w('<tr><td colspan=7 class="text-center py-8"style=color:var(--text-muted)>No namespace cost data available'),s4=w("<tr class=hover:bg-[var(--bg-tertiary)]><td class=font-medium style=color:var(--accent-primary)></td><td></td><td></td><td></td><td></td><td></td><td class=font-bold style=color:var(--warning-color)>"),i4=w('<tr><td colspan=6 class="text-center py-8"style=color:var(--text-muted)><svg class="w-12 h-12 mx-auto mb-4 text-green-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><p>No idle resources found</p><p class=text-sm>All resources are being utilized efficiently'),n4=w('<tr class=hover:bg-[var(--bg-tertiary)]><td class=font-medium style=color:var(--accent-primary)></td><td></td><td><span class="badge badge-info"></span></td><td><div class="flex items-center gap-2"><div class="w-16 h-2 rounded-full overflow-hidden"style=background:var(--bg-tertiary)><div class="h-full rounded-full"style=background:var(--warning-color)></div></div><span class=text-xs style=color:var(--text-muted)>%</span></div></td><td><div class="flex items-center gap-2"><div class="w-16 h-2 rounded-full overflow-hidden"style=background:var(--bg-tertiary)><div class="h-full rounded-full"style=background:var(--accent-secondary)></div></div><span class=text-xs style=color:var(--text-muted)>%</span></div></td><td class=font-bold style=color:var(--success-color)>');const l4=()=>{const[e,t]=W("overview"),[r,l]=W(null),[a,{refetch:m}]=it(()=>{const o=nr(),c=yr();return{context:o,refresh:c}},async()=>{try{const o=await Fe.getClusterCost();return console.log("Cost API response:",o),o}catch(o){return console.error("Cost API error:",o),null}}),[d,{refetch:i}]=it(()=>{const o=nr(),c=yr();return{context:o,refresh:c}},async()=>Fe.getStatus()),[n,{refetch:g}]=it(()=>{const o=nr(),c=yr();return{context:o,refresh:c}},async()=>Fe.getIdleResources()),[v,{refetch:p}]=it(()=>{const o=nr(),c=yr();return{context:o,refresh:c}},async()=>Fe.getNamespaces()),y=o=>o==null?"--":`$${o.toFixed(2)}`,x=o=>o==null?"--":o<1?`${(o*1e3).toFixed(0)}m`:`${o.toFixed(2)} cores`,M=o=>o==null?"--":o<1?`${(o*1024).toFixed(0)} Mi`:`${o.toFixed(2)} Gi`,b=[{id:"overview",label:"Overview"},{id:"namespaces",label:"By Namespace"},{id:"idle",label:"Idle Resources"}];return(()=>{var o=Q$(),c=o.firstChild,u=c.firstChild,h=u.firstChild,f=h.nextSibling,$=u.nextSibling,C=$.firstChild,k=C.firstChild,S=k.nextSibling,L=c.nextSibling,P=L.firstChild,I=P.firstChild,D=I.nextSibling,T=D.nextSibling,B=T.firstChild,N=P.nextSibling,O=N.firstChild,H=O.nextSibling,A=H.nextSibling,z=A.firstChild,F=N.nextSibling,j=F.firstChild,q=j.nextSibling,U=q.nextSibling,Y=U.firstChild,V=F.nextSibling,X=V.firstChild,R=X.nextSibling,G=R.nextSibling,te=G.firstChild,ae=L.nextSibling;return s(f,(()=>{var Q=Re(()=>!!d()?.cluster);return()=>Q()?`Cluster: ${d()?.cluster}`:"Cluster cost estimation and optimization opportunities"})()),s($,_(K,{get when(){return a()?.cloud?.provider==="gcp"},get children(){return j$()}}),C),s($,_(K,{get when(){return a()?.cloud?.provider==="aws"},get children(){return U$()}}),C),s($,_(K,{get when(){return a()?.cloud?.provider==="azure"},get children(){return V$()}}),C),s($,_(K,{get when(){return!a()?.cloud?.provider||a()?.cloud?.provider==="unknown"},get children(){return W$()}}),C),s(k,(()=>{var Q=Re(()=>!!a.loading);return()=>Q()?"Loading...":a()?.cloud?.displayName||"Unknown Cloud"})()),s(S,(()=>{var Q=Re(()=>!!a.loading);return()=>Q()?"...":a()?.cloud?.region||"Unknown region"})()),s(D,()=>y(a()?.hourlyCost)),s(T,()=>a()?.nodeCount||0,B),s(H,()=>y(a()?.dailyCost)),s(A,()=>x(a()?.totalCpu),z),s(q,()=>y(a()?.monthlyCost)),s(U,()=>M(a()?.totalMemory),Y),s(R,()=>y((n()?.idleResources||[]).reduce((Q,Z)=>Q+(Z.wastedCost||0),0)*720)),s(G,()=>(n()?.idleResources||[]).length,te),s(ae,_(Xe,{each:b,children:Q=>(()=>{var Z=e4();return Z.$$click=()=>t(Q.id),s(Z,()=>Q.label),J(ne=>{var $e=e()===Q.id?"var(--accent-primary)":"var(--text-secondary)",re=e()===Q.id?"2px solid var(--accent-primary)":"2px solid transparent";return $e!==ne.e&&E(Z,"color",ne.e=$e),re!==ne.t&&E(Z,"border-bottom",ne.t=re),ne},{e:void 0,t:void 0}),Z})()})),s(o,_(K,{get when(){return e()==="overview"},get children(){var Q=G$(),Z=Q.firstChild,ne=Z.firstChild,$e=ne.nextSibling,re=Z.nextSibling,de=re.firstChild,le=de.nextSibling,xe=le.firstChild,ye=xe.firstChild,ke=ye.firstChild,ge=ke.firstChild,Ce=ge.nextSibling;Ce.nextSibling,ke.nextSibling;var _e=ye.nextSibling;_e.firstChild;var Me=xe.nextSibling,ve=Me.firstChild,be=ve.firstChild,ce=be.firstChild,Ae=ce.nextSibling;Ae.nextSibling,be.nextSibling;var se=ve.nextSibling;se.firstChild;var oe=Me.nextSibling,ie=oe.firstChild,ue=ie.firstChild,he=ue.nextSibling,Te=le.nextSibling,ee=Te.firstChild,Se=ee.firstChild,pe=Se.nextSibling;pe.nextSibling;var De=ee.nextSibling,Ne=De.firstChild,me=Ne.firstChild,He=me.nextSibling;He.firstChild;var Ze=Ne.nextSibling,we=Ze.firstChild,ze=we.nextSibling;ze.firstChild;var Pe=Ze.nextSibling,Ue=Pe.firstChild,Oe=Ue.nextSibling;Oe.firstChild;var fe=De.nextSibling;return s($e,_(Xe,{get each(){return(a()?.namespaceCosts||[]).slice(0,8)},children:Le=>(()=>{var We=t4(),Ee=We.firstChild,Ie=Ee.firstChild,qe=Ie.nextSibling,Be=qe.firstChild,Ke=Be.nextSibling,Ye=Ke.nextSibling,lt=Ye.nextSibling;lt.nextSibling;var gt=Ee.nextSibling,Qe=gt.firstChild,ct=Qe.firstChild,ft=Qe.nextSibling,Ge=ft.firstChild;return s(Ie,()=>Le.namespace),s(qe,()=>Le.podCount,Be),s(qe,()=>x(Le.totalCpu),Ke),s(qe,()=>M(Le.totalMemory),lt),s(Qe,()=>y(Le.monthlyCost),ct),s(ft,()=>y(Le.dailyCost),Ge),We})()}),null),s($e,_(K,{get when(){return(a()?.namespaceCosts||[]).length===0},get children(){return q$()}}),null),s(ke,()=>x(a()?.totalCpu),Ce),s(be,()=>M(a()?.totalMemory),Ae),s(he,()=>a()?.nodeCount||0),s(ee,()=>a()?.pricing?.provider||"Generic",pe),s(ee,(()=>{var Le=Re(()=>!!a()?.pricing?.region);return()=>Le()?` - ${a()?.pricing?.region}`:""})(),pe),s(He,()=>(a()?.pricing?.cpuPerCoreHour||.0336).toFixed(4),null),s(ze,()=>(a()?.pricing?.memoryPerGBHour||.0045).toFixed(4),null),s(Oe,()=>(a()?.pricing?.storagePerGBMonth||.1).toFixed(2),null),s(Te,_(K,{get when(){return a()?.pricing?.spotNodesCount!==void 0},get children(){var Le=Y$(),We=Le.firstChild,Ee=We.firstChild,Ie=Ee.nextSibling,qe=We.nextSibling,Be=qe.firstChild,Ke=Be.nextSibling,Ye=Ke.firstChild;return s(Ie,()=>a()?.pricing?.onDemandNodesCount||0),s(Ye,()=>a()?.pricing?.spotNodesCount||0),s(Ke,_(K,{get when(){return(a()?.pricing?.spotNodesCount||0)>0},get children(){return K$()}}),null),Le}}),fe),s(fe,_(K,{get when(){return a()?.cloud?.provider==="gcp"},fallback:"Rates auto-detected from cluster. Actual costs may vary.",get children(){return["GCP ",Re(()=>a()?.cloud?.region)," region pricing applied automatically."]}})),Q}}),null),s(o,_(K,{get when(){return e()==="namespaces"},get children(){var Q=J$(),Z=Q.firstChild,ne=Z.firstChild,$e=ne.nextSibling;return s($e,_(Xe,{get each(){return a()?.namespaceCosts||[]},get fallback(){return(()=>{var re=r4();return re.firstChild,re})()},children:re=>(()=>{var de=s4(),le=de.firstChild,xe=le.nextSibling,ye=xe.nextSibling,ke=ye.nextSibling,ge=ke.nextSibling,Ce=ge.nextSibling,_e=Ce.nextSibling;return s(le,()=>re.namespace),s(xe,()=>re.podCount),s(ye,()=>x(re.totalCpu)),s(ke,()=>M(re.totalMemory)),s(ge,()=>y(re.hourlyCost)),s(Ce,()=>y(re.dailyCost)),s(_e,()=>y(re.monthlyCost)),de})()})),Q}}),null),s(o,_(K,{get when(){return e()==="idle"},get children(){return[(()=>{var Q=X$(),Z=Q.firstChild,ne=Z.firstChild,$e=ne.nextSibling,re=$e.firstChild;return re.nextSibling,Q})(),(()=>{var Q=Z$(),Z=Q.firstChild,ne=Z.firstChild,$e=ne.nextSibling;return s($e,_(Xe,{get each(){return n()?.idleResources||[]},get fallback(){return(()=>{var re=i4();return re.firstChild,re})()},children:re=>(()=>{var de=n4(),le=de.firstChild,xe=le.nextSibling,ye=xe.nextSibling,ke=ye.firstChild,ge=ye.nextSibling,Ce=ge.firstChild,_e=Ce.firstChild,Me=_e.firstChild,ve=_e.nextSibling,be=ve.firstChild,ce=ge.nextSibling,Ae=ce.firstChild,se=Ae.firstChild,oe=se.firstChild,ie=se.nextSibling,ue=ie.firstChild,he=ce.nextSibling;return s(le,()=>re.name),s(xe,()=>re.namespace),s(ke,()=>re.kind),s(ve,()=>(re.cpuUsage/re.cpuRequest*100).toFixed(1),be),s(ie,()=>(re.memoryUsage/re.memoryRequest*100).toFixed(1),ue),s(he,()=>y(re.wastedCost)),J(Te=>{var ee=`${Math.min(100,re.cpuUsage/re.cpuRequest*100)}%`,Se=`${Math.min(100,re.memoryUsage/re.memoryRequest*100)}%`;return ee!==Te.e&&E(Me,"width",Te.e=ee),Se!==Te.t&&E(oe,"width",Te.t=Se),Te},{e:void 0,t:void 0}),de})()})),Q})()]}}),null),o})()};ut(["click"]);var o4=w('<div class="card p-8"><div class=text-center><div class="spinner mx-auto mb-4"></div><p style=color:var(--text-muted)>Checking for configuration drift...'),a4=w('<div class="card p-8"><div class=text-center><svg class="w-16 h-16 mx-auto mb-4"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--success-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><h3 class="text-lg font-semibold"style=color:var(--text-primary)>No Configuration Drift Detected</h3><p style=color:var(--text-secondary)>All resources are in sync with their expected state'),c4=w('<div class="card overflow-hidden"><div class="p-4 border-b"style=border-color:var(--border-color)><h3 class="font-semibold flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--error-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>Drifted Resources (<!>)</h3></div><table class=data-table><thead><tr><th>Resource</th><th>Kind</th><th>Namespace</th><th>Changes</th><th>Last Checked</th><th>Actions</th></tr></thead><tbody>'),d4=w("<div class=space-y-3>"),u4=w('<div class=space-y-4><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)><div class=text-sm style=color:var(--text-muted)>Namespace</div><div style=color:var(--text-primary)></div></div><h4 class=font-medium style=color:var(--text-primary)>Changes Detected</h4><div class="flex justify-end gap-2 mt-4"><button class="px-4 py-2 rounded-lg"style=background:var(--bg-tertiary);color:var(--text-primary)>Close</button><button class="px-4 py-2 rounded-lg"style=background:var(--success-color);color:white>Revert to Expected'),h4=w('<div class=space-y-6><div class="flex items-center justify-between"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Configuration Drift</h1><p style=color:var(--text-secondary)>Detect and remediate configuration drift from desired state</p></div><button class="flex items-center gap-2 px-4 py-2 rounded-lg transition-colors"style=background:var(--bg-tertiary);color:var(--text-primary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>Check Drift</button></div><div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div class="card p-6"><div class=text-sm style=color:var(--text-muted)>Resources Checked</div><div class="text-3xl font-bold mt-2"style=color:var(--accent-primary)></div></div><div class="card p-6"><div class=text-sm style=color:var(--text-muted)>In Sync</div><div class="text-3xl font-bold mt-2"style=color:var(--success-color)></div></div><div class="card p-6"><div class=text-sm style=color:var(--text-muted)>Drifted</div><div class="text-3xl font-bold mt-2"></div></div><div class="card p-6"><div class=text-sm style=color:var(--text-muted)>Health</div><div class="text-3xl font-bold mt-2">%</div></div></div><div class="card p-6"><h3 class="font-semibold mb-4 flex items-center gap-2"style=color:var(--text-primary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>About Configuration Drift</h3><div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="p-4 rounded-lg"style=background:var(--bg-tertiary)><h4 class="font-medium mb-2"style=color:var(--text-primary)>What is Drift?</h4><p class=text-sm style=color:var(--text-secondary)>Configuration drift occurs when the actual state of a resource differs from its expected or desired state, often due to manual changes.</p></div><div class="p-4 rounded-lg"style=background:var(--bg-tertiary)><h4 class="font-medium mb-2"style=color:var(--text-primary)>Detection Method</h4><p class=text-sm style=color:var(--text-secondary)>We compare resource specifications against their last-applied-configuration annotation or GitOps source of truth.</p></div><div class="p-4 rounded-lg"style=background:var(--bg-tertiary)><h4 class="font-medium mb-2"style=color:var(--text-primary)>Remediation</h4><p class=text-sm style=color:var(--text-secondary)>Revert drifted resources to their expected state automatically, or use GitOps to sync from your repository.'),g4=w('<tr class=hover:bg-[var(--bg-tertiary)]><td class=font-medium style=color:var(--accent-primary)></td><td><span class="badge badge-info"></span></td><td></td><td><span class="badge badge-warning"> changes</span></td><td class=text-sm style=color:var(--text-muted)></td><td><div class="flex items-center gap-2"><button class=action-btn title="View Diff"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></button><button class=action-btn title="Revert to Expected"style=color:var(--success-color)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6">'),v4=w('<div class="text-center py-4"style=color:var(--text-muted)>No detailed changes available'),f4=w('<div class="p-3 rounded-lg border"style=background:var(--bg-secondary);border-color:var(--border-color)><div class="font-mono text-sm mb-2"style=color:var(--accent-primary)></div><div class="grid grid-cols-2 gap-4 text-sm"><div><div class="text-xs mb-1"style=color:var(--text-muted)>Expected</div><div class="p-2 rounded font-mono text-xs break-all"style="background:rgba(34, 197, 94, 0.1);color:var(--success-color)"></div></div><div><div class="text-xs mb-1"style=color:var(--text-muted)>Actual</div><div class="p-2 rounded font-mono text-xs break-all"style="background:rgba(239, 68, 68, 0.1);color:var(--error-color)">');const p4=()=>{const[e,t]=W(!1),[r,l]=W(null),[a,{refetch:m}]=it(()=>Xt(),async v=>{const p=v==="_all"?"default":v;return Fe.getDriftSummary(p)}),d=v=>{l(v),t(!0)},i=async v=>{if(confirm(`Revert ${v.kind}/${v.name} to its expected state?`))try{await Fe.revertDrift(v.kind,v.name,v.namespace),m()}catch(p){console.error("Failed to revert drift:",p),alert("Failed to revert. Check console for details.")}},n=()=>(a()?.drifted||[]).length,g=()=>a()?.total||0;return(()=>{var v=h4(),p=v.firstChild,y=p.firstChild,x=y.firstChild;x.nextSibling;var M=y.nextSibling,b=p.nextSibling,o=b.firstChild,c=o.firstChild,u=c.nextSibling,h=o.nextSibling,f=h.firstChild,$=f.nextSibling,C=h.nextSibling,k=C.firstChild,S=k.nextSibling,L=C.nextSibling,P=L.firstChild,I=P.nextSibling,D=I.firstChild,T=b.nextSibling,B=T.firstChild,N=B.nextSibling,O=N.firstChild,H=O.firstChild;H.nextSibling;var A=O.nextSibling,z=A.firstChild;z.nextSibling;var F=A.nextSibling,j=F.firstChild;return j.nextSibling,M.$$click=()=>m(),s(u,g),s($,()=>g()-n()),s(S,n),s(I,(()=>{var q=Re(()=>g()>0);return()=>q()?Math.round((g()-n())/g()*100):100})(),D),s(v,_(K,{get when(){return a.loading},get children(){var q=o4(),U=q.firstChild,Y=U.firstChild;return Y.nextSibling,q}}),T),s(v,_(K,{get when(){return Re(()=>!a.loading)()&&n()===0},get children(){var q=a4(),U=q.firstChild,Y=U.firstChild,V=Y.nextSibling;return V.nextSibling,q}}),T),s(v,_(K,{get when(){return Re(()=>!a.loading)()&&n()>0},get children(){var q=c4(),U=q.firstChild,Y=U.firstChild,V=Y.firstChild,X=V.nextSibling,R=X.nextSibling;R.nextSibling;var G=U.nextSibling,te=G.firstChild,ae=te.nextSibling;return s(Y,n,R),s(ae,_(Xe,{get each(){return a()?.drifted||[]},children:Q=>(()=>{var Z=g4(),ne=Z.firstChild,$e=ne.nextSibling,re=$e.firstChild,de=$e.nextSibling,le=de.nextSibling,xe=le.firstChild,ye=xe.firstChild,ke=le.nextSibling,ge=ke.nextSibling,Ce=ge.firstChild,_e=Ce.firstChild,Me=_e.nextSibling;return s(ne,()=>Q.name),s(re,()=>Q.kind),s(de,()=>Q.namespace),s(xe,()=>Q.driftDetails?.length||0,ye),s(ke,()=>Q.lastChecked||"Just now"),_e.$$click=()=>d(Q),Me.$$click=()=>i(Q),Z})()})),q}}),T),s(v,_(mt,{get isOpen(){return e()},onClose:()=>t(!1),get title(){return`Drift Details: ${r()?.kind}/${r()?.name}`},size:"lg",get children(){return _(K,{get when(){return r()},get children(){var q=u4(),U=q.firstChild,Y=U.firstChild,V=Y.nextSibling,X=U.nextSibling,R=X.nextSibling,G=R.firstChild,te=G.nextSibling;return s(V,()=>r()?.namespace),s(q,_(K,{get when(){return(r()?.driftDetails||[]).length>0},get fallback(){return v4()},get children(){var ae=d4();return s(ae,_(Xe,{get each(){return r()?.driftDetails||[]},children:Q=>(()=>{var Z=f4(),ne=Z.firstChild,$e=ne.nextSibling,re=$e.firstChild,de=re.firstChild,le=de.nextSibling,xe=re.nextSibling,ye=xe.firstChild,ke=ye.nextSibling;return s(ne,()=>Q.field),s(le,()=>Q.expected||"(not set)"),s(ke,()=>Q.actual||"(not set)"),Z})()})),ae}}),R),G.$$click=()=>t(!1),te.$$click=()=>{r()&&i(r()),t(!1)},q}})}}),null),J(q=>{var U=n()>0?"var(--error-color)":"var(--success-color)",Y=n()===0?"var(--success-color)":n()<5?"var(--warning-color)":"var(--error-color)";return U!==q.e&&E(S,"color",q.e=U),Y!==q.t&&E(I,"color",q.t=Y),q},{e:void 0,t:void 0}),v})()};ut(["click"]);var m4=w('<svg class="w-4 h-4"fill=currentColor viewBox="0 0 24 24"><path d="M8 5v14l11-7z">'),b4=w('<div class=overflow-y-auto style="max-height:calc(100vh - 320px)">'),x4=w('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Events</h1><p style=color:var(--text-secondary)>Real-time cluster events stream</p></div><div class="flex items-center gap-3"><button></button><button class=icon-btn title="Refresh Events"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div><span></span><span class=text-sm style=color:var(--text-secondary)></span><span class="text-xl font-bold"style=color:var(--text-primary)></span><span class=text-xs style=color:var(--text-muted)>new</span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Normal</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 cursor-pointer hover:opacity-80 flex items-center gap-2"style="border-left:3px solid var(--warning-color)"><span class=text-sm style=color:var(--text-secondary)>Warning</span><span class="text-xl font-bold"style=color:var(--warning-color)></span></div><div class=flex-1></div><input type=text placeholder="Search events..."class="px-3 py-2 rounded-lg text-sm w-64"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=all>All Types</option><option value=Normal>Normal</option><option value=Warning>Warning</option></select></div><div class="card overflow-hidden">'),y4=w('<svg class="w-4 h-4"fill=currentColor viewBox="0 0 24 24"><path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z">'),_4=w('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading events...'),$4=w('<div class="p-8 text-center"style=color:var(--text-muted)>No events found'),w4=w('<span class="text-xs px-2 py-0.5 rounded"style=background:var(--bg-tertiary);color:var(--text-secondary)>'),S4=w('<span class="px-2 py-0.5 rounded"style=background:var(--bg-tertiary)>x'),C4=w("<span>Source: "),k4=w('<div style=border-color:var(--border-color)><div class="flex items-start gap-4"><div class="flex-shrink-0 p-2 rounded-lg"style=background:var(--bg-tertiary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></div><div class="flex-1 min-w-0"><div class="flex items-center gap-2 flex-wrap"><span></span><span class="px-2 py-0.5 rounded text-xs"style=background:var(--bg-tertiary);color:var(--accent-primary)></span><span class=text-xs style=color:var(--text-muted)>/</span></div><p class="mt-1 text-sm"style=color:var(--text-primary)></p><div class="mt-2 flex items-center gap-4 text-xs"style=color:var(--text-muted)><span>');const M4=()=>{const[e,t]=W([]),[r,l]=W("all"),[a,m]=W(""),[d,i]=W(!1),[n,g]=W([]),[v,p]=W(0),[y,{refetch:x}]=it(()=>({ns:Xt(),trigger:v()}),async({ns:u})=>{try{console.log("[Events] Fetching events for namespace:",u);const h=u==="_all"||u==="All Namespaces"||!u?void 0:u,f=await Fe.getEvents(h,200);return console.log("[Events] Received events:",f?.events?.length||0,"total:",f?.total||0),f?.events||[]}catch(h){return console.error("[Events] Failed to fetch events:",h),[]}});It(()=>{const u=y(),h=y.loading,f=y.error;console.log("[Events] createEffect triggered:",{hasInitial:!!u,initialLength:u?.length||0,loading:h,error:f?String(f):null}),u&&Array.isArray(u)?u.length>0?(console.log("[Events] Setting events:",u.length),t(u)):console.log("[Events] Initial events array is empty"):!h&&f?console.error("[Events] Error loading events:",f):!h&&!u&&console.log("[Events] No initial events data")}),zt(()=>{p(u=>u+1)}),zt(()=>{const u=Bs.subscribe(h=>{if(h.type==="event"&&!d()){const f=h.data,$=Xt();if($&&$!=="All Namespaces"&&f.namespace!==$)return;g(C=>{const k=Array.isArray(C)?C:[];return[f,...k].slice(0,50)}),t(C=>{const k=Array.isArray(C)?C:[];return[f,...k].slice(0,500)})}});return()=>u()});const M=et(()=>{let u=e();Array.isArray(u)||(console.warn("[Events] events() is not an array:",typeof u,u),u=[]);const h=r(),f=a().toLowerCase();return console.log("[Events] filteredEvents memo:",{totalEvents:u.length,filterType:h,query:f,hasQuery:!!f}),h!=="all"&&(u=u.filter($=>$.type===h)),f&&(u=u.filter($=>$.message?.toLowerCase().includes(f)||$.object?.toLowerCase().includes(f)||$.reason?.toLowerCase().includes(f)||$.namespace?.toLowerCase().includes(f))),console.log("[Events] Filtered result:",u.length),u}),b=et(()=>{const u=e();return{total:u.length,normal:u.filter(h=>h.type==="Normal").length,warning:u.filter(h=>h.type==="Warning").length}}),o=u=>{if(!u)return"Unknown";const h=new Date(u);if(isNaN(h.getTime()))return"Unknown";const $=new Date().getTime()-h.getTime();return $<6e4?"Just now":$<36e5?`${Math.floor($/6e4)}m ago`:$<864e5?`${Math.floor($/36e5)}h ago`:`${Math.floor($/864e5)}d ago`},c=u=>{switch(u?.toLowerCase()){case"pod":return"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4";case"deployment":return"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10";case"service":return"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9";case"node":return"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01";case"replicaset":return"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4";default:return"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}};return(()=>{var u=x4(),h=u.firstChild,f=h.firstChild,$=f.firstChild;$.nextSibling;var C=f.nextSibling,k=C.firstChild,S=k.nextSibling,L=h.nextSibling,P=L.firstChild,I=P.firstChild,D=I.nextSibling,T=D.nextSibling;T.nextSibling;var B=P.nextSibling,N=B.firstChild,O=N.nextSibling,H=B.nextSibling,A=H.firstChild,z=A.nextSibling,F=H.nextSibling,j=F.firstChild,q=j.nextSibling,U=F.nextSibling,Y=U.nextSibling,V=Y.nextSibling,X=L.nextSibling;return k.$$click=()=>i(!d()),s(k,_(K,{get when(){return d()},get fallback(){return[y4(),"Pause"]},get children(){return[m4(),"Resume"]}})),S.$$click=()=>x(),s(D,()=>d()?"Paused":"Live"),s(T,()=>n().length),B.$$click=()=>l("all"),s(O,()=>b().total),H.$$click=()=>l("Normal"),s(z,()=>b().normal),F.$$click=()=>l("Warning"),s(q,()=>b().warning),Y.$$input=R=>m(R.currentTarget.value),V.addEventListener("change",R=>l(R.currentTarget.value)),s(X,_(K,{get when(){return!y.loading},get fallback(){return(()=>{var R=_4(),G=R.firstChild;return G.nextSibling,R})()},get children(){var R=b4();return s(R,_(Xe,{get each(){return M()},get fallback(){return $4()},children:(G,te)=>(()=>{var ae=k4(),Q=ae.firstChild,Z=Q.firstChild,ne=Z.firstChild,$e=ne.firstChild,re=Z.nextSibling,de=re.firstChild,le=de.firstChild,xe=le.nextSibling,ye=xe.nextSibling,ke=ye.firstChild,ge=de.nextSibling,Ce=ge.nextSibling,_e=Ce.firstChild;return s(le,()=>G.type),s(xe,()=>G.reason),s(ye,()=>G.kind,ke),s(ye,()=>G.object,null),s(de,_(K,{get when(){return G.namespace},get children(){var Me=w4();return s(Me,()=>G.namespace),Me}}),null),s(ge,()=>G.message),s(_e,()=>o(G.time)),s(Ce,_(K,{get when(){return G.count>1},get children(){var Me=S4();return Me.firstChild,s(Me,()=>G.count,null),Me}}),null),s(Ce,_(K,{get when(){return G.source},get children(){var Me=C4();return Me.firstChild,s(Me,()=>G.source,null),Me}}),null),J(Me=>{var ve=`p-4 border-b transition-all hover:bg-white/5 ${te()<n().length&&!d()?"animate-slide-in":""}`,be=`4px solid ${G.type==="Warning"?"var(--warning-color)":"var(--success-color)"}`,ce=G.type==="Warning"?"var(--warning-color)":"var(--accent-primary)",Ae=c(G.kind),se=`px-2 py-0.5 rounded text-xs font-medium ${G.type==="Warning"?"bg-amber-500/20 text-amber-400":"bg-green-500/20 text-green-400"}`;return ve!==Me.e&&tt(ae,Me.e=ve),be!==Me.t&&E(ae,"border-left",Me.t=be),ce!==Me.a&&E(ne,"color",Me.a=ce),Ae!==Me.o&&dt($e,"d",Me.o=Ae),se!==Me.i&&tt(le,Me.i=se),Me},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),ae})()})),R}})),J(R=>{var G=`px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-all ${d()?"bg-gradient-to-r from-green-500/20 to-emerald-500/20 border border-green-500/40":"bg-gradient-to-r from-amber-500/20 to-orange-500/20 border border-amber-500/40"}`,te=d()?"var(--success-color)":"var(--warning-color)",ae=`card px-4 py-2 flex items-center gap-2 ${d()?"":"animate-pulse"}`,Q=`3px solid ${d()?"var(--warning-color)":"var(--success-color)"}`,Z=`w-3 h-3 rounded-full ${d()?"bg-amber-500":"bg-green-500 animate-pulse"}`;return G!==R.e&&tt(k,R.e=G),te!==R.t&&E(k,"color",R.t=te),ae!==R.a&&tt(P,R.a=ae),Q!==R.o&&E(P,"border-left",R.o=Q),Z!==R.i&&tt(I,R.i=Z),R},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),J(()=>Y.value=a()),J(()=>V.value=r()),u})()};ut(["click","input"]);var A4=w('<span class="px-2 py-1 rounded text-xs font-medium">'),L4=w('<div class="p-4 text-center text-sm"style=color:var(--text-muted)>No namespaces found'),E4=w('<div class="p-2 border-t text-xs text-center"style=borderColor:var(--border-color);color:var(--text-muted)> selected'),T4=w('<div class="absolute right-0 mt-2 w-64 rounded-lg border shadow-lg z-50 max-h-96 overflow-hidden flex flex-col"style=background:var(--bg-secondary);borderColor:var(--border-color)><div class="p-2 border-b"style=borderColor:var(--border-color)><input type=text placeholder="Search namespaces..."class="w-full px-3 py-2 rounded border text-sm"style=background:var(--bg-primary);color:var(--text-primary);borderColor:var(--border-color)></div><div class="p-2 border-b flex gap-2"style=borderColor:var(--border-color)><button class="px-3 py-1 text-xs rounded border"style=background:var(--bg-primary);color:var(--text-primary);borderColor:var(--border-color)>Select All</button><button class="px-3 py-1 text-xs rounded border"style=background:var(--bg-primary);color:var(--text-primary);borderColor:var(--border-color)>Clear</button></div><div class="overflow-y-auto flex-1">'),D4=w('<div class="flex items-center gap-2 flex-wrap"><span class=text-sm style=color:var(--text-muted)>Filtering by:</span><button class="text-xs underline"style=color:var(--text-muted)>Clear all'),R4=w('<select class="px-3 py-2 rounded-lg text-sm border"style=background:var(--bg-secondary);color:var(--text-primary)><option value=15m>15 minutes</option><option value=1h>1 hour</option><option value=6h>6 hours</option><option value=24h>24 hours'),P4=w('<div class="card p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading events...'),I4=w('<div class="card p-8 text-center"><p style=color:var(--text-muted)>No events found'),ac=w("<div class=space-y-4>"),B4=w('<div class="card p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading grouped events...'),N4=w('<div class="card p-8 text-center"><p style=color:var(--text-muted)>No grouped events found'),O4=w("<div class=space-y-6>"),z4=w('<div class="card p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading log errors...'),F4=w('<div class="card p-8 text-center"><p style=color:var(--text-muted)>No log errors found'),H4=w('<div class="space-y-6 p-6"style=minHeight:100vh;background:var(--bg-primary)><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-3xl font-bold"style=color:var(--text-primary)>Event Monitor</h1><p style=color:var(--text-secondary)>Production environment events and alerts</p></div><div class="flex items-center gap-2 flex-wrap"><div class="relative namespace-dropdown-container"><button type=button class="px-4 py-2 rounded-lg border text-sm font-medium flex items-center gap-2"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path></svg><span></span><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 9l-7 7-7-7"></path></svg></button></div><button class="px-4 py-2 rounded-lg text-sm font-medium transition-colors"style=background:var(--accent-primary);color:white>Refresh</button><label class="flex items-center gap-2 px-4 py-2 rounded-lg text-sm cursor-pointer"style=background:var(--bg-secondary)><input type=checkbox class="w-4 h-4"><span style=color:var(--text-secondary)>Auto-refresh</span></label></div></div><div class="flex items-center justify-between flex-wrap gap-4"><div class="flex items-center gap-2"><button>Timeline</button><button>Grouped</button><button>Log Errors</button></div><div class="flex items-center gap-2"><select class="px-3 py-2 rounded-lg text-sm border"style=background:var(--bg-secondary);color:var(--text-primary)><option value=all>All Severities</option><option value=critical>Critical</option><option value=high>High</option><option value=medium>Medium</option><option value=low>Low</option><option value=info>Info</option></select><select class="px-3 py-2 rounded-lg text-sm border"style=background:var(--bg-secondary);color:var(--text-primary)><option value=all>All Types</option><option value=infrastructure>Infrastructure</option><option value=application>Application</option><option value=security>Security'),j4=w('<label class="flex items-center gap-2 p-2 hover:bg-opacity-50 cursor-pointer"><input type=checkbox class="w-4 h-4 rounded"style=accentColor:var(--accent-color)><span class=text-sm style=color:var(--text-primary)>'),U4=w('<span class="px-2 py-1 rounded text-xs font-medium flex items-center gap-1"style=background:var(--accent-color);color:var(--text-primary);opacity:0.8><button class=hover:opacity-70 style=color:var(--text-primary)><svg class="w-3 h-3"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12">'),V4=w('<div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div class="card p-4"><div class=text-sm style=color:var(--text-secondary)>Total Events</div><div class="text-2xl font-bold"style=color:var(--text-primary)></div></div><div class="card p-4"><div class=text-sm style=color:var(--text-secondary)>Critical</div><div class="text-2xl font-bold"style=color:#ef4444></div></div><div class="card p-4"><div class=text-sm style=color:var(--text-secondary)>High</div><div class="text-2xl font-bold"style=color:#f59e0b></div></div><div class="card p-4"><div class=text-sm style=color:var(--text-secondary)>Log Errors</div><div class="text-2xl font-bold"style=color:var(--text-primary)>'),W4=w('<div class="card p-4 border-l-4"><div class="flex items-start justify-between gap-4"><div class=flex-1><div class="flex items-center gap-2 mb-2"><span class="text-sm font-medium"style=color:var(--text-primary)></span></div><p class="text-sm mb-2"style=color:var(--text-secondary)></p><div class="flex items-center gap-4 text-xs"style=color:var(--text-muted)><span></span><span></span><span></span><span></span></div></div><div class=text-right><div class="text-sm font-medium"style=color:var(--text-primary)>x</div><div class=text-xs style=color:var(--text-muted)>'),q4=w('<div class="card p-4"><div class="flex items-center justify-between mb-4"><h3 class="text-lg font-semibold"style=color:var(--text-primary)></h3><span class="px-3 py-1 rounded-full text-sm"style=background:var(--bg-secondary);color:var(--text-secondary)> events</span></div><div class=space-y-2>'),K4=w('<div class="p-3 rounded border-l-4"style=background:var(--bg-secondary)><div class="flex items-center gap-2 mb-1"><span class="text-sm font-medium"style=color:var(--text-primary)></span></div><p class=text-xs style=color:var(--text-secondary)>'),Y4=w('<div class="card p-4 border-l-4"><div class="flex items-start justify-between gap-4"><div class=flex-1><div class="flex items-center gap-2 mb-2"><span class="px-2 py-1 rounded text-xs font-medium">HTTP </span><span class="text-sm font-medium"style=color:var(--text-primary)> </span></div><p class="text-sm mb-2"style=color:var(--text-secondary)></p><div class="flex items-center gap-4 text-xs"style=color:var(--text-muted)><span>Pod: </span><span>Container: </span><span></span><span></span></div></div><div class=text-right><div class=text-xs style=color:var(--text-muted)>');const G4=()=>{const[e,t]=W("timeline"),[r,l]=W("all"),[a,m]=W("all"),[d,i]=W("1h"),[n,g]=W([]),[v,p]=W([]),[y,x]=W(null),[M,b]=W(!0),[o,c]=W([]),[u,h]=W(!1),[f,$]=W(""),[C]=it(async()=>{try{return await Fe.getNamespaces()}catch(V){return console.error("[MonitoredEvents] Failed to fetch namespaces:",V),[]}}),k=et(()=>{const V=C()||[],X=f().toLowerCase();return X?V.filter(R=>R.toLowerCase().includes(X)):V}),S=V=>{const X=o();X.includes(V)?c(X.filter(R=>R!==V)):c([...X,V])},L=()=>{const V=C()||[];c([...V])},P=()=>{c([])},[I,{refetch:D}]=it(()=>({namespaces:o(),severity:r(),type:a(),context:nr(),refresh:yr()}),async({namespaces:V,severity:X,type:R})=>{try{const G={limit:500};V.length===1&&(G.namespace=V[0]),X!=="all"&&(G.severity=X),R!=="all"&&(G.type=R);let ae=(await Fe.getMonitoredEvents(G))?.events||[];return V.length>1?ae=ae.filter(Q=>V.includes(Q.namespace||"")):V.length,ae}catch(G){return console.error("[MonitoredEvents] Failed to fetch events:",G),[]}}),[T,{refetch:B}]=it(()=>({namespaces:o(),context:nr(),refresh:yr()}),async({namespaces:V})=>{try{const X={limit:200};V.length===1&&(X.namespace=V[0]);let G=(await Fe.getLogErrors(X))?.errors||[];return V.length>1&&(G=G.filter(te=>V.includes(te.namespace||""))),G}catch(X){return console.error("[MonitoredEvents] Failed to fetch log errors:",X),[]}}),[N,{refetch:O}]=it(async()=>{try{return await Fe.getEventStats()}catch(V){return console.error("[MonitoredEvents] Failed to fetch stats:",V),null}}),[H,{refetch:A}]=it(()=>d(),async V=>{try{return(await Fe.getGroupedEvents(V))?.groups||[]}catch(X){return console.error("[MonitoredEvents] Failed to fetch grouped events:",X),[]}});et(()=>{const V=I();V&&Array.isArray(V)?g(V):!I.loading&&!I.error&&g([])}),et(()=>{const V=T();V&&Array.isArray(V)?p(V):!T.loading&&!T.error&&p([])}),et(()=>{const V=N();V&&x(V)});let z=null;zt(()=>{M()&&(z=window.setInterval(()=>{D(),B(),O(),e()==="grouped"&&A()},3e4))}),wr(()=>{z&&clearInterval(z)}),zt(()=>{const V=Bs.subscribe(R=>{if(R.type==="monitored_event"&&M()){const G=R.data,te=o();(te.length===0||te.includes(G.namespace||""))&&(g(ae=>{const Q=Array.isArray(ae)?ae:[];return[G,...Q].slice(0,500)}),O())}}),X=R=>{R.target.closest(".namespace-dropdown-container")||h(!1)};return document.addEventListener("click",X),()=>{V(),document.removeEventListener("click",X)}});const F=V=>{switch(V){case"critical":return"#ef4444";case"high":return"#f59e0b";case"medium":return"#3b82f6";case"low":return"#6b7280";case"info":return"#10b981";default:return"#6b7280"}},j=V=>{const X=F(V);return(()=>{var R=A4();return E(R,"background",`${X}20`),E(R,"color",X),E(R,"border",`1px solid ${X}40`),s(R,()=>V.toUpperCase()),R})()},q=V=>{if(!V)return"Unknown";const X=new Date(V);return isNaN(X.getTime())?"Unknown":X.toLocaleString()},U=V=>{if(!V)return"Unknown";const X=new Date(V);if(isNaN(X.getTime()))return"Unknown";const G=new Date().getTime()-X.getTime();return G<6e4?"Just now":G<36e5?`${Math.floor(G/6e4)}m ago`:G<864e5?`${Math.floor(G/36e5)}h ago`:`${Math.floor(G/864e5)}d ago`},Y=et(()=>{const V=n();return Array.isArray(V)?V:[]});return(()=>{var V=H4(),X=V.firstChild,R=X.firstChild,G=R.firstChild;G.nextSibling;var te=R.nextSibling,ae=te.firstChild,Q=ae.firstChild,Z=Q.firstChild,ne=Z.nextSibling,$e=ae.nextSibling,re=$e.nextSibling,de=re.firstChild;de.nextSibling;var le=X.nextSibling,xe=le.firstChild,ye=xe.firstChild,ke=ye.nextSibling,ge=ke.nextSibling,Ce=xe.nextSibling,_e=Ce.firstChild,Me=_e.nextSibling;return Q.$$click=ve=>{ve.stopPropagation(),h(!u())},s(ne,(()=>{var ve=Re(()=>o().length===0);return()=>ve()?"All Namespaces":Re(()=>o().length===1)()?o()[0]:`${o().length} namespaces`})()),s(ae,_(K,{get when(){return u()},get children(){var ve=T4(),be=ve.firstChild,ce=be.firstChild,Ae=be.nextSibling,se=Ae.firstChild,oe=se.nextSibling,ie=Ae.nextSibling;return ve.$$click=ue=>ue.stopPropagation(),ce.$$input=ue=>$(ue.currentTarget.value),se.$$click=L,oe.$$click=P,s(ie,_(K,{get when(){return k().length===0},get children(){return L4()}}),null),s(ie,_(Xe,{get each(){return k()},children:ue=>(()=>{var he=j4(),Te=he.firstChild,ee=Te.nextSibling;return Te.addEventListener("change",()=>S(ue)),s(ee,ue),J(Se=>{var pe=o().includes(ue)?"var(--accent-color)":"transparent",De=o().includes(ue)?"0.1":"0";return pe!==Se.e&&E(he,"background",Se.e=pe),De!==Se.t&&E(he,"--tw-bg-opacity",Se.t=De),Se},{e:void 0,t:void 0}),J(()=>Te.checked=o().includes(ue)),he})()}),null),s(ve,_(K,{get when(){return o().length>0},get children(){var ue=E4(),he=ue.firstChild;return s(ue,()=>o().length,he),ue}}),null),J(()=>ce.value=f()),ve}}),null),$e.$$click=()=>{D(),B(),O(),e()==="grouped"&&A()},de.addEventListener("change",ve=>b(ve.currentTarget.checked)),s(V,_(K,{get when(){return o().length>0},get children(){var ve=D4(),be=ve.firstChild,ce=be.nextSibling;return s(ve,_(Xe,{get each(){return o()},children:Ae=>(()=>{var se=U4(),oe=se.firstChild;return s(se,Ae,oe),oe.$$click=()=>S(Ae),se})()}),ce),ce.$$click=P,ve}}),le),s(V,_(K,{get when(){return y()},children:ve=>(()=>{var be=V4(),ce=be.firstChild,Ae=ce.firstChild,se=Ae.nextSibling,oe=ce.nextSibling,ie=oe.firstChild,ue=ie.nextSibling,he=oe.nextSibling,Te=he.firstChild,ee=Te.nextSibling,Se=he.nextSibling,pe=Se.firstChild,De=pe.nextSibling;return s(se,()=>ve().total_events||0),s(ue,()=>ve().by_severity?.critical||0),s(ee,()=>ve().by_severity?.high||0),s(De,()=>ve().total_errors||0),be})()}),le),ye.$$click=()=>t("timeline"),ke.$$click=()=>t("grouped"),ge.$$click=()=>t("errors"),_e.addEventListener("change",ve=>l(ve.currentTarget.value)),Me.addEventListener("change",ve=>m(ve.currentTarget.value)),s(Ce,_(K,{get when(){return e()==="grouped"},get children(){var ve=R4();return ve.addEventListener("change",be=>i(be.currentTarget.value)),J(()=>ve.value=d()),ve}}),null),s(V,_(K,{get when(){return e()==="timeline"},get children(){return[_(K,{get when(){return I.loading},get children(){var ve=P4(),be=ve.firstChild;return be.nextSibling,ve}}),_(K,{get when(){return!I.loading},get children(){var ve=ac();return s(ve,_(Xe,{get each(){return Y()},children:be=>(()=>{var ce=W4(),Ae=ce.firstChild,se=Ae.firstChild,oe=se.firstChild,ie=oe.firstChild,ue=oe.nextSibling,he=ue.nextSibling,Te=he.firstChild,ee=Te.nextSibling,Se=ee.nextSibling,pe=Se.nextSibling,De=se.nextSibling,Ne=De.firstChild,me=Ne.firstChild,He=Ne.nextSibling;return s(oe,()=>j(be.severity),ie),s(ie,()=>be.title),s(ue,()=>be.description),s(Te,()=>be.resource),s(ee,()=>be.namespace||"cluster-wide"),s(Se,()=>U(be.timestamp)),s(pe,()=>be.source),s(Ne,()=>be.count,me),s(He,()=>q(be.timestamp)),J(Ze=>E(ce,"border-left-color",F(be.severity))),ce})()}),null),s(ve,_(K,{get when(){return Y().length===0},get children(){var be=I4();return be.firstChild,be}}),null),ve}})]}}),null),s(V,_(K,{get when(){return e()==="grouped"},get children(){return[_(K,{get when(){return H.loading},get children(){var ve=B4(),be=ve.firstChild;return be.nextSibling,ve}}),_(K,{get when(){return!H.loading},get children(){var ve=O4();return s(ve,_(Xe,{get each(){return H()||[]},children:be=>(()=>{var ce=q4(),Ae=ce.firstChild,se=Ae.firstChild,oe=se.nextSibling,ie=oe.firstChild,ue=Ae.nextSibling;return s(se,()=>new Date(be.time).toLocaleString()),s(oe,()=>be.count,ie),s(ue,_(Xe,{get each(){return be.events},children:he=>(()=>{var Te=K4(),ee=Te.firstChild,Se=ee.firstChild,pe=ee.nextSibling;return s(ee,()=>j(he.severity),Se),s(Se,()=>he.title),s(pe,()=>he.resource),J(De=>E(Te,"border-left-color",F(he.severity))),Te})()})),ce})()}),null),s(ve,_(K,{get when(){return!H()||H()?.length===0},get children(){var be=N4();return be.firstChild,be}}),null),ve}})]}}),null),s(V,_(K,{get when(){return e()==="errors"},get children(){return[_(K,{get when(){return T.loading},get children(){var ve=z4(),be=ve.firstChild;return be.nextSibling,ve}}),_(K,{get when(){return!T.loading},get children(){var ve=ac();return s(ve,_(Xe,{get each(){return(v()||[]).filter(be=>be.status_code>0)},children:be=>(()=>{var ce=Y4(),Ae=ce.firstChild,se=Ae.firstChild,oe=se.firstChild,ie=oe.firstChild;ie.firstChild;var ue=ie.nextSibling,he=ue.firstChild,Te=oe.nextSibling,ee=Te.nextSibling,Se=ee.firstChild;Se.firstChild;var pe=Se.nextSibling;pe.firstChild;var De=pe.nextSibling,Ne=De.nextSibling,me=se.nextSibling,He=me.firstChild;return s(ie,()=>be.status_code,null),s(ue,()=>be.method,he),s(ue,()=>be.path,null),s(Te,()=>be.message),s(Se,()=>be.pod,null),s(pe,()=>be.container,null),s(De,()=>be.namespace),s(Ne,()=>U(be.timestamp)),s(He,()=>q(be.timestamp)),J(Ze=>{var we=be.status_code>=500?"#ef4444":"#f59e0b",ze=be.status_code>=500?"#ef444420":"#f59e0b20",Pe=be.status_code>=500?"#ef4444":"#f59e0b";return we!==Ze.e&&E(ce,"border-left-color",Ze.e=we),ze!==Ze.t&&E(ie,"background",Ze.t=ze),Pe!==Ze.a&&E(ie,"color",Ze.a=Pe),Ze},{e:void 0,t:void 0,a:void 0}),ce})()}),null),s(ve,_(K,{get when(){return!v()||v().length===0},get children(){var be=F4();return be.firstChild,be}}),null),ve}})]}}),null),J(ve=>{var be=`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${e()==="timeline"?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"}`,ce=`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${e()==="grouped"?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"}`,Ae=`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${e()==="errors"?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"}`;return be!==ve.e&&tt(ye,ve.e=be),ce!==ve.t&&tt(ke,ve.t=ce),Ae!==ve.a&&tt(ge,ve.a=Ae),ve},{e:void 0,t:void 0,a:void 0}),J(()=>de.checked=M()),J(()=>_e.value=r()),J(()=>Me.value=a()),V})()};ut(["click","input"]);var J4=w('<div><h2 class="text-xl font-semibold mb-4"style=color:var(--text-primary)>Configured Connectors</h2><div class=space-y-4>'),X4=w('<div class="space-y-6 p-6"style=minHeight:100vh;background:var(--bg-primary)><div class="flex items-center justify-between"><div><h1 class="text-3xl font-bold"style=color:var(--text-primary)>Connectors</h1><p style=color:var(--text-secondary)>Connect KubeGraf to external services for notifications and integrations</p></div></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">'),Z4=w('<div class="card p-4 cursor-pointer hover:scale-105 transition-transform"><div class="flex items-center gap-3 mb-2"><div class="w-10 h-10 rounded-lg flex items-center justify-center"><svg class="w-6 h-6"fill=currentColor viewBox="0 0 24 24"><path></path></svg></div><div class=flex-1><h3 class=font-semibold style=color:var(--text-primary)></h3><p class=text-sm style=color:var(--text-muted)>'),Q4=w('<div class="card p-4"><div class="flex items-center justify-between"><div class="flex items-center gap-4 flex-1"><div class="w-12 h-12 rounded-lg flex items-center justify-center"><svg class="w-6 h-6"fill=currentColor viewBox="0 0 24 24"><path></path></svg></div><div class=flex-1><div class="flex items-center gap-2 mb-1"><h3 class=font-semibold style=color:var(--text-primary)></h3><span class="px-2 py-1 rounded text-xs font-medium"></span><span class="px-2 py-1 rounded text-xs font-medium"></span></div><p class=text-sm style=color:var(--text-muted)>Type: <!> | Created: </p></div></div><div class="flex items-center gap-2"><button class="px-3 py-2 rounded text-sm font-medium"style=background:var(--bg-secondary);color:var(--text-primary)></button><button class="px-3 py-2 rounded text-sm font-medium"></button><button class="px-3 py-2 rounded text-sm font-medium"style=background:var(--bg-secondary);color:var(--text-primary)>Edit</button><button class="px-3 py-2 rounded text-sm font-medium"style=background:#ef444420;color:#ef4444>Delete'),ew=w('<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50"><div class="card p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto"><div class="flex items-center justify-between mb-4"><h2 class="text-2xl font-bold"style=color:var(--text-primary)> <!> Connector</h2><button class=text-2xl style=color:var(--text-muted)></button></div><div class=space-y-4><div><label class="block text-sm font-medium mb-1"style=color:var(--text-secondary)>Connector Name</label><input type=text class="w-full px-3 py-2 rounded border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)></div><div class="flex justify-end gap-2 mt-6"><button class="px-4 py-2 rounded text-sm font-medium"style=background:var(--bg-secondary);color:var(--text-primary)>Cancel</button><button class="px-4 py-2 rounded text-sm font-medium text-white"style=background:var(--accent-primary)> Connector'),tw=w('<div><label class="block text-sm font-medium mb-1"style=color:var(--text-secondary)> '),rw=w("<span style=color:#ef4444>*"),sw=w('<select class="w-full px-3 py-2 rounded border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)><option value>Select...'),iw=w("<option>"),nw=w('<input class="w-full px-3 py-2 rounded border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)>');const mi=[{id:"github",name:"GitHub",description:"Connect to GitHub repositories for issue tracking and webhooks",icon:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z",color:"#24292e",fields:[{key:"token",label:"Personal Access Token",type:"password",required:!0,placeholder:"ghp_..."},{key:"repository",label:"Repository (owner/repo)",type:"text",required:!0,placeholder:"owner/repo"},{key:"webhook_url",label:"Webhook URL (optional)",type:"url",required:!1,placeholder:"https://..."}]},{id:"slack",name:"Slack",description:"Send alerts and notifications to Slack channels",icon:"M5.042 15.165a2.528 2.528 0 01-2.52 2.523A2.528 2.528 0 010 15.165a2.527 2.527 0 012.522-2.52 2.527 2.527 0 012.52 2.52zM9.075 15.165a2.527 2.527 0 01-2.521-2.52 2.527 2.527 0 012.521-2.521 2.528 2.528 0 012.523 2.521 2.528 2.528 0 01-2.523 2.52zM5.042 11.143a2.528 2.528 0 01-2.52-2.523A2.528 2.528 0 015.042 6.098a2.527 2.527 0 012.52 2.522 2.527 2.527 0 01-2.52 2.523z",color:"#4A154B",fields:[{key:"webhook_url",label:"Webhook URL",type:"url",required:!0,placeholder:"https://hooks.slack.com/services/..."},{key:"channel",label:"Channel (optional)",type:"text",required:!1,placeholder:"#alerts"},{key:"username",label:"Bot Username (optional)",type:"text",required:!1,placeholder:"KubeGraf"}]},{id:"pagerduty",name:"PagerDuty",description:"Create incidents and alerts in PagerDuty",icon:"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm0 22c-5.514 0-10-4.486-10-10S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10z",color:"#06AC38",fields:[{key:"integration_key",label:"Integration Key",type:"text",required:!0,placeholder:"Your PagerDuty integration key"},{key:"service_id",label:"Service ID (optional)",type:"text",required:!1,placeholder:"Service ID"}]},{id:"webhook",name:"Generic Webhook",description:"Send events to any webhook endpoint",icon:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1",color:"#6366f1",fields:[{key:"url",label:"Webhook URL",type:"url",required:!0,placeholder:"https://..."},{key:"method",label:"HTTP Method",type:"select",required:!0,options:[{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"PATCH",label:"PATCH"}]},{key:"headers",label:"Custom Headers (JSON)",type:"text",required:!1,placeholder:'{"Authorization": "Bearer token"}'}]},{id:"email",name:"Email",description:"Send email notifications via SMTP",icon:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z",color:"#3b82f6",fields:[{key:"smtp_host",label:"SMTP Host",type:"text",required:!0,placeholder:"smtp.gmail.com"},{key:"smtp_port",label:"SMTP Port",type:"text",required:!0,placeholder:"587"},{key:"username",label:"Username",type:"text",required:!0,placeholder:"your-email@example.com"},{key:"password",label:"Password",type:"password",required:!0},{key:"from_email",label:"From Email",type:"text",required:!0,placeholder:"alerts@example.com"},{key:"to_emails",label:"To Emails (comma-separated)",type:"text",required:!0,placeholder:"admin@example.com,team@example.com"}]},{id:"teams",name:"Microsoft Teams",description:"Send notifications to Microsoft Teams channels",icon:"M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-2 14H6v-4h12v4zm0-6H6v-4h12v4zm0-6H6V6h12v4z",color:"#6264A7",fields:[{key:"webhook_url",label:"Webhook URL",type:"url",required:!0,placeholder:"https://outlook.office.com/webhook/..."},{key:"channel",label:"Channel Name (optional)",type:"text",required:!1,placeholder:"Alerts"}]},{id:"discord",name:"Discord",description:"Send alerts to Discord channels via webhook",icon:"M20.317 4.37a19.791 19.791 0 00-4.885-1.515.074.074 0 00-.079.037c-.21.24-.444.464-.68.7a18.27 18.27 0 00-5.487 0 12.64 12.64 0 00-.68-.7.077.077 0 00-.079-.037A19.736 19.736 0 003.677 4.37a.07.07 0 00-.032.027C2.67 6.018 2.32 7.724 2.11 9.424a.082.082 0 00.031.084 19.9 19.9 0 005.993 3.03.078.078 0 00.084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 00-.041-.106 13.107 13.107 0 01-1.872-.892.077.077 0 01-.007-.128 10.2 10.2 0 00.372-.292.074.074 0 01.077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 01.078.01c.12.098.246.198.373.292a.077.077 0 01-.006.128 12.299 12.299 0 01-1.873.892.077.077 0 00-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 00.084.028 19.839 19.839 0 006.002-3.03.077.077 0 00.032-.083c-.216-1.7-.571-3.406-1.535-5.026a.061.061 0 00-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z",color:"#5865F2",fields:[{key:"webhook_url",label:"Webhook URL",type:"url",required:!0,placeholder:"https://discord.com/api/webhooks/..."},{key:"username",label:"Bot Username (optional)",type:"text",required:!1,placeholder:"KubeGraf Bot"}]}],lw=()=>{const[e,t]=W(null),[r,l]=W(!1),[a,m]=W(null),[d,i]=W({}),[n,g]=W(null),[v,{refetch:p}]=it(async()=>{try{return await Fe.getConnectors()}catch(f){return console.error("[Connectors] Failed to fetch connectors:",f),[]}}),y=f=>{t(f),i({}),m(null),l(!0)},x=f=>{t(f.type),i(f.config||{}),m(f),l(!0)},M=async()=>{const f=e();if(f)try{a()?await Fe.updateConnector(a().id,{name:d().name||mi.find($=>$.id===f)?.name||"",config:d()}):await Fe.createConnector({type:f,name:d().name||mi.find($=>$.id===f)?.name||"",config:d()}),l(!1),p()}catch($){alert(`Failed to save connector: ${$.message}`)}},b=async f=>{g(f.id);try{const $=await Fe.testConnector(f.id);$.success?alert("Connector test successful!"):alert(`Connector test failed: ${$.error||"Unknown error"}`),p()}catch($){alert(`Failed to test connector: ${$.message}`)}finally{g(null)}},o=async f=>{try{await Fe.updateConnector(f.id,{enabled:!f.enabled}),p()}catch($){alert(`Failed to toggle connector: ${$.message}`)}},c=async f=>{if(confirm(`Are you sure you want to delete connector "${f.name}"?`))try{await Fe.deleteConnector(f.id),p()}catch($){alert(`Failed to delete connector: ${$.message}`)}},u=f=>mi.find($=>$.id===f),h=f=>{switch(f){case"connected":return"#22c55e";case"error":return"#ef4444";default:return"#6b7280"}};return(()=>{var f=X4(),$=f.firstChild,C=$.firstChild,k=C.firstChild;k.nextSibling;var S=$.nextSibling;return s(S,_(Xe,{each:mi,children:L=>(()=>{var P=Z4(),I=P.firstChild,D=I.firstChild,T=D.firstChild,B=T.firstChild,N=D.nextSibling,O=N.firstChild,H=O.nextSibling;return P.$$click=()=>y(L.id),s(O,()=>L.name),s(H,()=>L.description),J(A=>{var z=`${L.color}20`,F=L.color,j=L.icon;return z!==A.e&&E(D,"background",A.e=z),F!==A.t&&E(T,"color",A.t=F),j!==A.a&&dt(B,"d",A.a=j),A},{e:void 0,t:void 0,a:void 0}),P})()})),s(f,_(K,{get when(){return Re(()=>!!v())()&&v().length>0},get children(){var L=J4(),P=L.firstChild,I=P.nextSibling;return s(I,_(Xe,{get each(){return v()},children:D=>{const T=u(D.type);return(()=>{var B=Q4(),N=B.firstChild,O=N.firstChild,H=O.firstChild,A=H.firstChild,z=A.firstChild,F=H.nextSibling,j=F.firstChild,q=j.firstChild,U=q.nextSibling,Y=U.nextSibling,V=j.nextSibling,X=V.firstChild,R=X.nextSibling;R.nextSibling;var G=O.nextSibling,te=G.firstChild,ae=te.nextSibling,Q=ae.nextSibling,Z=Q.nextSibling;return s(q,()=>D.name),s(U,()=>D.enabled?"Enabled":"Disabled"),s(Y,()=>D.status),s(V,()=>T?.name||D.type,R),s(V,()=>new Date(D.createdAt).toLocaleDateString(),null),te.$$click=()=>b(D),s(te,()=>n()===D.id?"Testing...":"Test"),ae.$$click=()=>o(D),s(ae,()=>D.enabled?"Disable":"Enable"),Q.$$click=()=>x(D),Z.$$click=()=>c(D),J(ne=>{var $e=`${T?.color||"#6366f1"}20`,re=T?.color||"#6366f1",de=T?.icon||"",le=D.enabled?"#22c55e20":"#6b728020",xe=D.enabled?"#22c55e":"#6b7280",ye=`${h(D.status)}20`,ke=h(D.status),ge=n()===D.id,Ce=D.enabled?"#ef444420":"#22c55e20",_e=D.enabled?"#ef4444":"#22c55e";return $e!==ne.e&&E(H,"background",ne.e=$e),re!==ne.t&&E(A,"color",ne.t=re),de!==ne.a&&dt(z,"d",ne.a=de),le!==ne.o&&E(U,"background",ne.o=le),xe!==ne.i&&E(U,"color",ne.i=xe),ye!==ne.n&&E(Y,"background",ne.n=ye),ke!==ne.s&&E(Y,"color",ne.s=ke),ge!==ne.h&&(te.disabled=ne.h=ge),Ce!==ne.r&&E(ae,"background",ne.r=Ce),_e!==ne.d&&E(ae,"color",ne.d=_e),ne},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0}),B})()}})),L}}),null),s(f,_(K,{get when(){return Re(()=>!!r())()&&e()},children:()=>{const L=mi.find(P=>P.id===e());return L?(()=>{var P=ew(),I=P.firstChild,D=I.firstChild,T=D.firstChild,B=T.firstChild,N=B.nextSibling;N.nextSibling;var O=T.nextSibling,H=D.nextSibling,A=H.firstChild,z=A.firstChild,F=z.nextSibling,j=A.nextSibling,q=j.firstChild,U=q.nextSibling,Y=U.firstChild;return P.$$click=()=>l(!1),I.$$click=V=>V.stopPropagation(),s(T,()=>a()?"Edit":"Add",B),s(T,()=>L.name,N),O.$$click=()=>l(!1),F.$$input=V=>i({...d(),name:V.currentTarget.value}),s(H,_(Xe,{get each(){return L.fields},children:V=>(()=>{var X=tw(),R=X.firstChild,G=R.firstChild;return s(R,()=>V.label,G),s(R,(()=>{var te=Re(()=>!!V.required);return()=>te()&&rw()})(),null),s(X,(()=>{var te=Re(()=>V.type==="select");return()=>te()?(()=>{var ae=sw();return ae.firstChild,ae.addEventListener("change",Q=>i({...d(),[V.key]:Q.currentTarget.value})),s(ae,_(Xe,{get each(){return V.options},children:Q=>(()=>{var Z=iw();return s(Z,()=>Q.label),J(()=>Z.value=Q.value),Z})()}),null),J(()=>ae.value=d()[V.key]||""),ae})():(()=>{var ae=nw();return ae.$$input=Q=>i({...d(),[V.key]:Q.currentTarget.value}),J(Q=>{var Z=V.type,ne=V.placeholder,$e=V.required;return Z!==Q.e&&dt(ae,"type",Q.e=Z),ne!==Q.t&&dt(ae,"placeholder",Q.t=ne),$e!==Q.a&&(ae.required=Q.a=$e),Q},{e:void 0,t:void 0,a:void 0}),J(()=>ae.value=d()[V.key]||""),ae})()})(),null),X})()}),j),q.$$click=()=>l(!1),U.$$click=M,s(U,()=>a()?"Update":"Create",Y),J(()=>dt(F,"placeholder",L.name)),J(()=>F.value=d().name||""),P})():null}}),null),f})()};ut(["click","input"]);var ow=w('<div class="card p-8 text-center"><div class=text-lg style=color:var(--text-muted)>Loading MCP server status...'),aw=w('<div class="card p-8 text-center"><div class="text-lg font-medium mb-2"style=color:var(--text-primary)>MCP Server Not Available</div><p class=text-sm style=color:var(--text-muted)>The MCP server is not running or not accessible. Make sure KubeGraf is running and the MCP endpoint is enabled.'),cw=w("<div class=text-sm style=color:var(--text-secondary)> v"),dw=w('<div class="card p-6"><div class="flex items-center gap-3 mb-4"><div class="w-3 h-3 rounded-full bg-green-500"></div><div><div class=font-semibold style=color:var(--text-primary)>MCP Server Connected</div></div></div><div class=mb-4><h3 class="text-lg font-semibold mb-2"style=color:var(--text-primary)>Available Tools (<!>)</h3><p class=text-sm style=color:var(--text-secondary)>These tools are available for AI agents to interact with your Kubernetes cluster.</p></div><div class="grid grid-cols-1 md:grid-cols-2 gap-4">'),uw=w('<div class="space-y-3 mb-4"><div class="text-sm font-medium"style=color:var(--text-primary)>Parameters:'),hw=w('<div class="mt-4 p-4 rounded border"style=background:var(--bg-secondary);borderColor:var(--border-color)><div class="text-sm font-medium mb-2"style=color:var(--text-primary)>Result:</div><pre class="text-xs whitespace-pre-wrap"style=color:var(--text-secondary)>'),gw=w('<div class="card p-6"><div class="flex items-center justify-between mb-4"><h3 class="text-lg font-semibold"style=color:var(--text-primary)></h3><button class="px-3 py-1 rounded text-sm"style=background:var(--bg-secondary);color:var(--text-primary)>Close</button></div><p class="text-sm mb-4"style=color:var(--text-secondary)></p><button class="px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50"style=background:var(--accent-primary);color:white>'),vw=w(`<div class="space-y-6 p-6"style=minHeight:100vh;background:var(--bg-primary)><div class="flex items-center justify-between"><div><h1 class="text-3xl font-bold"style=color:var(--text-primary)>AI Agents</h1><p class="text-sm mt-2"style=color:var(--text-secondary)>AI agents powered by Model Context Protocol (MCP) to interact with your Kubernetes cluster</p></div><button class="px-4 py-2 rounded-lg font-medium transition-colors"style=background:var(--accent-primary);color:white>Refresh</button></div><div class="card p-6"><h3 class="text-lg font-semibold mb-3"style=color:var(--text-primary)>Setup Instructions</h3><div class="space-y-3 text-sm"style=color:var(--text-secondary)><div><strong>For Claude Desktop:</strong><pre class="mt-2 p-3 rounded bg-gray-900 text-white text-xs overflow-x-auto">{
  "mcpServers": {
    "kubegraf": {
      "command": "kubegraf",
      "args": ["mcp", "serve"],
      "env": {
        "KUBECONFIG": "/path/to/kubeconfig"
      }
    }
  }
}</pre></div><div class=mt-4><strong>Endpoint:</strong> <code class="px-2 py-1 rounded bg-gray-100 dark:bg-gray-800">/api/mcp</code></div><div><strong>Protocol:</strong> MCP (Model Context Protocol) - JSON-RPC 2.0`),fw=w('<div class="p-4 rounded-lg border cursor-pointer hover:opacity-80 transition-opacity"style=borderColor:var(--border-color)><div class="font-semibold mb-1"style=color:var(--text-primary)></div><div class=text-sm style=color:var(--text-secondary)>'),pw=w('<span class="ml-2 text-xs"style=color:var(--text-muted)>- '),mw=w('<div><label class="block text-sm mb-1"style=color:var(--text-secondary)></label><input class="w-full px-3 py-2 rounded border"style=background:var(--bg-primary);borderColor:var(--border-color);color:var(--text-primary)>');const bw=()=>{const[e,{refetch:t}]=it(async()=>{try{const y=await fetch("/api/mcp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:1,method:"initialize",params:{}})});if(!y.ok)return{available:!1,tools:[]};const x=await y.json(),M=await fetch("/api/mcp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:2,method:"tools/list",params:{}})});return M.ok?{available:!0,tools:(await M.json()).result?.tools||[],serverInfo:x.result?.serverInfo}:{available:!0,tools:[],serverInfo:x.result?.serverInfo}}catch(y){return console.error("MCP connection error:",y),{available:!1,tools:[]}}}),[r,l]=W(null),[a,m]=W(""),[d,i]=W(!1),[n,g]=W({}),v=async y=>{l(y),m(""),i(!0);try{const x=y.inputSchema?.properties||{},M={},b=n();for(const[u,h]of Object.entries(x))b[u]!==void 0&&(M[u]=b[u]);const o=await fetch("/api/mcp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:Date.now(),method:"tools/call",params:{name:y.name,arguments:M}})});if(!o.ok)throw new Error(`HTTP ${o.status}`);const c=await o.json();if(c.error)m(`Error: ${c.error.message}`);else{const h=(c.result?.content||[]).map(f=>f.text||"").join(`
`);m(h||JSON.stringify(c.result,null,2))}}catch(x){m(`Error: ${x.message}`)}finally{i(!1)}},p=(y,x)=>{g(M=>({...M,[y]:x}))};return(()=>{var y=vw(),x=y.firstChild,M=x.firstChild,b=M.firstChild;b.nextSibling;var o=M.nextSibling,c=x.nextSibling,u=c.firstChild;return u.nextSibling,o.$$click=()=>t(),s(y,_(K,{get when(){return e.loading},get children(){var h=ow();return h.firstChild,h}}),c),s(y,_(K,{get when(){return Re(()=>!e.loading)()&&!e()?.available},get children(){var h=aw(),f=h.firstChild;return f.nextSibling,h}}),c),s(y,_(K,{get when(){return Re(()=>!e.loading)()&&e()?.available},get children(){return[(()=>{var h=dw(),f=h.firstChild,$=f.firstChild,C=$.nextSibling;C.firstChild;var k=f.nextSibling,S=k.firstChild,L=S.firstChild,P=L.nextSibling;P.nextSibling,S.nextSibling;var I=k.nextSibling;return s(C,_(K,{get when(){return e()?.serverInfo},get children(){var D=cw(),T=D.firstChild;return s(D,()=>e()?.serverInfo?.name,T),s(D,()=>e()?.serverInfo?.version,null),D}}),null),s(S,()=>e()?.tools.length||0,P),s(I,_(Xe,{get each(){return e()?.tools||[]},children:D=>(()=>{var T=fw(),B=T.firstChild,N=B.nextSibling;return T.$$click=()=>l(D),s(B,()=>D.name),s(N,()=>D.description),J(O=>E(T,"background",r()?.name===D.name?"var(--bg-secondary)":"var(--bg-tertiary)")),T})()})),h})(),_(K,{get when(){return r()},get children(){var h=gw(),f=h.firstChild,$=f.firstChild,C=$.nextSibling,k=f.nextSibling,S=k.nextSibling;return s($,()=>r()?.name),C.$$click=()=>l(null),s(k,()=>r()?.description),s(h,_(K,{get when(){return r()?.inputSchema?.properties},get children(){var L=uw();return L.firstChild,s(L,_(Xe,{get each(){return Object.entries(r()?.inputSchema?.properties||{})},children:([P,I])=>(()=>{var D=mw(),T=D.firstChild,B=T.nextSibling;return s(T,P,null),s(T,_(K,{get when(){return I.description},get children(){var N=pw();return N.firstChild,s(N,()=>I.description,null),N}}),null),B.$$input=N=>{const O=I.type==="integer"?parseInt(N.currentTarget.value)||0:N.currentTarget.value;p(P,O)},J(N=>{var O=I.type==="integer"?"number":"text",H=I.type==="integer"?"0":"Enter value...";return O!==N.e&&dt(B,"type",N.e=O),H!==N.t&&dt(B,"placeholder",N.t=H),N},{e:void 0,t:void 0}),J(()=>B.value=n()[P]||""),D})()}),null),L}}),S),S.$$click=()=>v(r()),s(S,()=>d()?"Executing...":"Execute Tool"),s(h,_(K,{get when(){return a()},get children(){var L=hw(),P=L.firstChild,I=P.nextSibling;return s(I,a),L}}),null),J(()=>S.disabled=d()),h}})]}}),c),y})()};ut(["click","input"]);var xw=w('<div class="p-8 text-center"style=color:var(--text-secondary)><div class="text-6xl mb-4"></div><div class="text-xl font-medium">No active incidents</div><div class="text-sm mt-2">Your cluster is running smoothly!'),cc=w("<div class=divide-y style=border-color:var(--border-color)>"),yw=w('<div class="rounded-lg border"style=background:var(--bg-card);border-color:var(--border-color)><div class="p-4 border-b flex justify-between items-center"style=border-color:var(--border-color)><h2 class="text-xl font-bold"style=color:var(--text-primary)>Active Incidents</h2><button class="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded text-white text-sm">Refresh'),_w=w('<div class="p-8 text-center"style=color:var(--text-secondary)><div class="text-6xl mb-4"></div><div class="text-xl font-medium">No actions recorded</div><div class="text-sm mt-2">Actions will appear here when incidents are remediated'),$w=w('<div class="rounded-lg border"style=background:var(--bg-card);border-color:var(--border-color)><div class="p-4 border-b flex justify-between items-center"style=border-color:var(--border-color)><h2 class="text-xl font-bold"style=color:var(--text-primary)>Remediation Actions</h2><button class="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded text-white text-sm">Refresh'),ww=w('<div class="p-6 space-y-6"><div class="flex items-center justify-between"><div><h1 class="text-3xl font-bold text-white mb-2">SRE Agent</h1><p class=text-gray-400>Intelligent incident detection and automated remediation</p></div></div><div class="flex space-x-2 border-b border-gray-700"><button>Overview</button><button>Incidents</button><button>Actions</button><button>Configuration'),Sw=w("<button>"),Cw=w('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"><div class="rounded-lg p-6 border"style=background:var(--bg-card);border-color:var(--border-color)><div class="text-sm mb-2"style=color:var(--text-secondary)>Incidents Detected</div><div class="text-3xl font-bold"style=color:var(--text-primary)></div></div><div class="rounded-lg p-6 border"style=background:var(--bg-card);border-color:var(--border-color)><div class="text-sm mb-2"style=color:var(--text-secondary)>Auto Remediations</div><div class="text-3xl font-bold"style=color:var(--success-color)></div></div><div class="rounded-lg p-6 border"style=background:var(--bg-card);border-color:var(--border-color)><div class="text-sm mb-2"style=color:var(--text-secondary)>Success Rate</div><div class="text-3xl font-bold"style=color:var(--accent-primary)>%</div></div><div class="rounded-lg p-6 border"style=background:var(--bg-card);border-color:var(--border-color)><div class="text-sm mb-2"style=color:var(--text-secondary)>Escalations</div><div class="text-3xl font-bold"style=color:var(--warning-color)></div></div><div class="rounded-lg p-6 border"style=background:var(--bg-card);border-color:var(--border-color)><div class="text-sm mb-2"style=color:var(--text-secondary)>Incidents Resolved</div><div class="text-3xl font-bold"style=color:var(--text-primary)></div></div><div class="rounded-lg p-6 border"style=background:var(--bg-card);border-color:var(--border-color)><div class="text-sm mb-2"style=color:var(--text-secondary)>Avg Resolution Time</div><div class="text-2xl font-bold"style=color:var(--text-primary)>s</div></div><div class="rounded-lg p-6 border"style=background:var(--bg-card);border-color:var(--border-color)><div class="text-sm mb-2"style=color:var(--text-secondary)>Batch SLO Met</div><div class="text-3xl font-bold"style=color:var(--success-color)></div></div><div class="rounded-lg p-6 border"style=background:var(--bg-card);border-color:var(--border-color)><div class="text-sm mb-2"style=color:var(--text-secondary)>Actions This Hour</div><div class="text-3xl font-bold"style=color:var(--accent-secondary)></div><div class="text-xs mt-1"style=color:var(--text-muted)>/ <!> max</div></div><div class="rounded-lg p-6 border"style=background:var(--bg-card);border-color:var(--border-color)><div class="text-sm mb-2"style=color:var(--text-secondary)>Open Incidents</div><div class="text-3xl font-bold"style=color:var(--error-color)></div><div class="text-xs mt-1"style=color:var(--text-muted)>From cluster resources'),kw=w('<span class="px-2 py-1 rounded text-xs"style="background:rgba(34, 197, 94, 0.2);color:var(--success-color)">Auto-remediated'),Mw=w('<div class="p-4 transition-colors hover:opacity-80"style=background:var(--bg-card)><div class="flex items-start justify-between mb-2"><div class=flex-1><div class="flex items-center space-x-2 mb-1"><span></span><span></span></div><h3 class="text-lg font-medium"style=color:var(--text-primary)></h3><p class="text-sm mt-1"style=color:var(--text-secondary)></p></div></div><div class="flex items-center space-x-4 text-sm mt-2"style=color:var(--text-muted)><span>Resource: </span><span>Namespace: </span><span>Detected: '),Aw=w("<span style=color:var(--success-color)>"),Lw=w("<span style=color:var(--error-color)>"),Ew=w('<span class="px-2 py-1 rounded text-xs"style="background:rgba(139, 92, 246, 0.2);color:var(--accent-secondary)">Automated'),Tw=w('<div class="p-4 transition-colors hover:opacity-80"style=background:var(--bg-card)><div class="flex items-start justify-between"><div class=flex-1><div class="flex items-center space-x-2 mb-1"><span class=font-medium style=color:var(--text-primary)></span></div><p class=text-sm style=color:var(--text-secondary)></p></div><span class=text-sm style=color:var(--text-muted)>'),Dw=w('<button class="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded text-white">Edit Configuration'),Rw=w('<div class=space-x-2><button class="px-4 py-2 bg-gray-600 hover:bg-gray-700 rounded text-white">Cancel</button><button class="px-4 py-2 bg-green-600 hover:bg-green-700 rounded text-white">Save'),hn=w('<input type=checkbox class="w-5 h-5">'),bi=w("<span style=color:var(--text-primary)>"),Pw=w('<input type=number class="w-full rounded px-3 py-2 border"style=background:var(--bg-input);color:var(--text-primary);border-color:var(--border-color)>'),Iw=w('<div class="rounded-lg border p-6"style=background:var(--bg-card);border-color:var(--border-color)><div class="flex justify-between items-center mb-6"><h2 class="text-xl font-bold"style=color:var(--text-primary)>Agent Configuration</h2></div><div class=space-y-4><div class="grid grid-cols-2 gap-4"><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Auto Remediation</label></div><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Learning Mode</label></div><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Notifications</label></div><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Batch Monitoring</label></div><div class=col-span-2><label class="block text-sm mb-2"style=color:var(--text-secondary)>Max Actions Per Hour</label></div></div><div class="mt-6 pt-6 border-t"style=border-color:var(--border-color)><h3 class="text-lg font-medium mb-4"style=color:var(--text-primary)>Auto-Remediate Types</h3><div class="flex flex-wrap gap-2"></div></div><div class="mt-6 pt-6 border-t"style=border-color:var(--border-color)><h3 class="text-lg font-medium mb-2"style=color:var(--text-primary)>Batch SLO</h3><p style=color:var(--text-secondary)>'),Bw=w('<span class="px-3 py-1 rounded-full text-sm"style="background:rgba(59, 130, 246, 0.2);color:var(--accent-secondary)">');const Nw=()=>{const[e,{refetch:t}]=it(async()=>{const h=await fetch("/api/sre/status");if(!h.ok)throw new Error("Failed to fetch SRE status");return h.json()}),[r,{refetch:l}]=it(async()=>{const h=await fetch("/api/sre/incidents");if(!h.ok)throw new Error("Failed to fetch incidents");return h.json()}),[a,{refetch:m}]=it(async()=>{const h=await fetch("/api/sre/actions");if(!h.ok)throw new Error("Failed to fetch actions");return h.json()}),[d]=it(async()=>{try{return await Fe.getIncidents()}catch(h){return console.error("Failed to fetch Kubernetes incidents:",h),[]}}),i=et(()=>{const h=d();return h?h.length:0}),[n,g]=W("overview"),[v,p]=W(!1),[y,x]=W({}),M=async()=>{const h=e();if(!h)return;(await fetch("/api/sre/enable",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:!h.enabled})})).ok&&t()},b=async()=>{(await fetch("/api/sre/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y())})).ok&&(p(!1),t())},o=()=>{const h=e();h&&(x({autoRemediate:h.autoRemediate,notificationEnabled:h.notificationEnabled,batchMonitoring:h.batchMonitoring,maxAutoActionsPerHour:h.maxAutoActionsPerHour,learningEnabled:h.learningEnabled}),p(!0))},c=h=>{switch(h.toLowerCase()){case"critical":return"text-red-400 bg-red-900/20 border-red-700";case"high":return"text-orange-400 bg-orange-900/20 border-orange-700";case"medium":return"text-yellow-400 bg-yellow-900/20 border-yellow-700";case"low":return"text-blue-400 bg-blue-900/20 border-blue-700";default:return"text-gray-400 bg-gray-900/20 border-gray-700"}},u=h=>{switch(h.toLowerCase()){case"resolved":return"text-green-400";case"active":return"text-red-400";case"investigating":return"text-yellow-400";default:return"text-gray-400"}};return(()=>{var h=ww(),f=h.firstChild;f.firstChild;var $=f.nextSibling,C=$.firstChild,k=C.nextSibling,S=k.nextSibling,L=S.nextSibling;return s(f,_(K,{get when(){return e()},children:P=>(()=>{var I=Sw();return I.$$click=M,s(I,()=>P().enabled?" Enabled":"Disabled"),J(()=>tt(I,`px-6 py-2 rounded-lg font-medium transition-colors ${P().enabled?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-600 hover:bg-gray-700 text-white"}`)),I})()}),null),C.$$click=()=>g("overview"),k.$$click=()=>g("incidents"),S.$$click=()=>g("actions"),L.$$click=()=>g("config"),s(h,_(K,{get when(){return Re(()=>n()==="overview")()&&e()},children:P=>(()=>{var I=Cw(),D=I.firstChild,T=D.firstChild,B=T.nextSibling,N=D.nextSibling,O=N.firstChild,H=O.nextSibling,A=N.nextSibling,z=A.firstChild,F=z.nextSibling,j=F.firstChild,q=A.nextSibling,U=q.firstChild,Y=U.nextSibling,V=q.nextSibling,X=V.firstChild,R=X.nextSibling,G=V.nextSibling,te=G.firstChild,ae=te.nextSibling,Q=ae.firstChild,Z=G.nextSibling,ne=Z.firstChild,$e=ne.nextSibling,re=Z.nextSibling,de=re.firstChild,le=de.nextSibling,xe=le.nextSibling,ye=xe.firstChild,ke=ye.nextSibling;ke.nextSibling;var ge=re.nextSibling,Ce=ge.firstChild,_e=Ce.nextSibling;return _e.nextSibling,s(B,()=>P().metrics.incidentsDetected),s(H,()=>P().metrics.autoRemediations),s(F,()=>P().metrics.successRate.toFixed(1),j),s(Y,()=>P().metrics.escalations),s(R,()=>P().metrics.incidentsResolved),s(ae,()=>Math.round(P().metrics.avgResolutionTime/1e3),Q),s($e,()=>P().metrics.batchSLOMet),s(le,()=>P().metrics.actionsThisHour),s(xe,()=>P().maxAutoActionsPerHour,ke),s(_e,i),I})()}),null),s(h,_(K,{get when(){return n()==="incidents"},get children(){var P=yw(),I=P.firstChild,D=I.firstChild,T=D.nextSibling;return Rt(T,"click",l,!0),s(P,_(K,{get when(){return r()?.incidents.length===0},get children(){return xw()}}),null),s(P,_(K,{get when(){return Re(()=>!!r())()&&r().incidents.length>0},get children(){var B=cc();return s(B,_(Xe,{get each(){return r().incidents},children:N=>(()=>{var O=Mw(),H=O.firstChild,A=H.firstChild,z=A.firstChild,F=z.firstChild,j=F.nextSibling,q=z.nextSibling,U=q.nextSibling,Y=H.nextSibling,V=Y.firstChild;V.firstChild;var X=V.nextSibling;X.firstChild;var R=X.nextSibling;return R.firstChild,s(F,()=>N.severity),s(j,()=>N.status),s(z,_(K,{get when(){return N.autoRemediated},get children(){return kw()}}),null),s(q,()=>N.title),s(U,()=>N.description),s(V,()=>N.resource,null),s(X,()=>N.namespace,null),s(R,()=>new Date(N.detectedAt).toLocaleString(),null),J(G=>{var te=`px-2 py-1 rounded text-xs font-medium border ${c(N.severity)}`,ae=`font-medium ${u(N.status)}`;return te!==G.e&&tt(F,G.e=te),ae!==G.t&&tt(j,G.t=ae),G},{e:void 0,t:void 0}),O})()})),B}}),null),P}}),null),s(h,_(K,{get when(){return n()==="actions"},get children(){var P=$w(),I=P.firstChild,D=I.firstChild,T=D.nextSibling;return Rt(T,"click",m,!0),s(P,_(K,{get when(){return a()?.actions.length===0},get children(){return _w()}}),null),s(P,_(K,{get when(){return Re(()=>!!a())()&&a().actions.length>0},get children(){var B=cc();return s(B,_(Xe,{get each(){return a().actions},children:N=>(()=>{var O=Tw(),H=O.firstChild,A=H.firstChild,z=A.firstChild,F=z.firstChild,j=z.nextSibling,q=A.nextSibling;return s(z,_(K,{get when(){return N.success},get children(){return Aw()}}),F),s(z,_(K,{get when(){return!N.success},get children(){return Lw()}}),F),s(F,()=>N.action),s(z,_(K,{get when(){return N.automated},get children(){return Ew()}}),null),s(j,()=>N.details),s(q,()=>new Date(N.timestamp).toLocaleString()),O})()})),B}}),null),P}}),null),s(h,_(K,{get when(){return Re(()=>n()==="config")()&&e()},children:P=>(()=>{var I=Iw(),D=I.firstChild;D.firstChild;var T=D.nextSibling,B=T.firstChild,N=B.firstChild;N.firstChild;var O=N.nextSibling;O.firstChild;var H=O.nextSibling;H.firstChild;var A=H.nextSibling;A.firstChild;var z=A.nextSibling;z.firstChild;var F=B.nextSibling,j=F.firstChild,q=j.nextSibling,U=F.nextSibling,Y=U.firstChild,V=Y.nextSibling;return s(D,_(K,{get when(){return!v()},get children(){var X=Dw();return X.$$click=o,X}}),null),s(D,_(K,{get when(){return v()},get children(){var X=Rw(),R=X.firstChild,G=R.nextSibling;return R.$$click=()=>p(!1),G.$$click=b,X}}),null),s(N,_(K,{get when(){return v()},get children(){var X=hn();return X.addEventListener("change",R=>x({...y(),autoRemediate:R.target.checked})),J(()=>X.checked=y().autoRemediate),X}}),null),s(N,_(K,{get when(){return!v()},get children(){var X=bi();return s(X,()=>P().autoRemediate?"Enabled":"Disabled"),X}}),null),s(O,_(K,{get when(){return v()},get children(){var X=hn();return X.addEventListener("change",R=>x({...y(),learningEnabled:R.target.checked})),J(()=>X.checked=y().learningEnabled),X}}),null),s(O,_(K,{get when(){return!v()},get children(){var X=bi();return s(X,()=>P().learningEnabled?"Enabled":"Disabled"),X}}),null),s(H,_(K,{get when(){return v()},get children(){var X=hn();return X.addEventListener("change",R=>x({...y(),notificationEnabled:R.target.checked})),J(()=>X.checked=y().notificationEnabled),X}}),null),s(H,_(K,{get when(){return!v()},get children(){var X=bi();return s(X,()=>P().notificationEnabled?"Enabled":"Disabled"),X}}),null),s(A,_(K,{get when(){return v()},get children(){var X=hn();return X.addEventListener("change",R=>x({...y(),batchMonitoring:R.target.checked})),J(()=>X.checked=y().batchMonitoring),X}}),null),s(A,_(K,{get when(){return!v()},get children(){var X=bi();return s(X,()=>P().batchMonitoring?"Enabled":"Disabled"),X}}),null),s(z,_(K,{get when(){return v()},get children(){var X=Pw();return X.addEventListener("change",R=>x({...y(),maxAutoActionsPerHour:parseInt(R.target.value)})),J(()=>X.value=y().maxAutoActionsPerHour),X}}),null),s(z,_(K,{get when(){return!v()},get children(){var X=bi();return s(X,()=>P().maxAutoActionsPerHour),X}}),null),s(q,_(Xe,{get each(){return P().autoRemediateTypes},children:X=>(()=>{var R=Bw();return s(R,X),R})()})),s(V,()=>P().batchSLO),I})()}),null),J(P=>{var I=`px-4 py-2 font-medium transition-colors ${n()==="overview"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-gray-300"}`,D=`px-4 py-2 font-medium transition-colors ${n()==="incidents"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-gray-300"}`,T=`px-4 py-2 font-medium transition-colors ${n()==="actions"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-gray-300"}`,B=`px-4 py-2 font-medium transition-colors ${n()==="config"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-gray-300"}`;return I!==P.e&&tt(C,P.e=I),D!==P.t&&tt(k,P.t=D),T!==P.a&&tt(S,P.a=T),B!==P.o&&tt(L,P.o=B),P},{e:void 0,t:void 0,a:void 0,o:void 0}),h})()};ut(["click"]);async function Ow(e,t){const r=await fetch(`/api${e}`,{headers:{"Content-Type":"application/json",...t?.headers},...t});if(!r.ok){const l=await r.text();throw new Error(l||`API error: ${r.status}`)}return r.json()}const zw={async getStatus(){return Ow("/integrations/kiali/status")},async getTrafficData(e){const t=await Fe.getServices(e),r=await Fe.getPods(e);return{services:t||[],pods:r||[],connections:[]}},async proxy(e,t){const r=`/api/kiali/proxy${e}`;return fetch(r,{...t,headers:{"Content-Type":"application/json",...t?.headers}})}};var Fw=w('<div class="flex items-center justify-center h-64"><div class=text-center><div class="inline-block w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"></div><p style=color:var(--text-muted)>Connecting to Kiali...'),Hw=w('<div class="flex items-center justify-center h-64"><div class=text-center><p class="text-red-500 mb-4"></p><button class="px-4 py-2 rounded-lg text-sm font-medium"style=background:var(--accent-primary);color:#000>Open in New Tab'),jw=w('<iframe class="w-full h-full border-0"title="Kiali Dashboard"sandbox="allow-same-origin allow-scripts allow-forms allow-popups allow-top-navigation"style=minHeight:600px>'),Uw=w('<div class="w-full h-full flex flex-col">');const Vw=e=>{const[t,r]=W(!0),[l,a]=W(null),[m,d]=W(null);return zt(async()=>{try{d("/api/kiali/proxy/"),r(!1)}catch(i){a(i.message||"Failed to open Kiali dashboard"),r(!1),Je("Failed to open Kiali dashboard","error")}}),(()=>{var i=Uw();return s(i,_(K,{get when(){return t()},get children(){var n=Fw(),g=n.firstChild,v=g.firstChild;return v.nextSibling,n}}),null),s(i,_(K,{get when(){return l()},get children(){var n=Hw(),g=n.firstChild,v=g.firstChild,p=v.nextSibling;return s(v,l),p.$$click=()=>window.open("http://localhost:20001","_blank"),n}}),null),s(i,_(K,{get when(){return Re(()=>!t()&&!l())()&&m()},get children(){var n=jw();return J(()=>dt(n,"src",m())),n}}),null),i})()};ut(["click"]);var Ww=w('<div class=space-y-3><div class="grid grid-cols-2 gap-4"><div><p class="text-xs mb-1"style=color:var(--text-muted)>Version</p><p class="text-sm font-medium"style=color:var(--text-primary)></p></div><div><p class="text-xs mb-1"style=color:var(--text-muted)>Namespace</p><p class="text-sm font-medium"style=color:var(--text-primary)></p></div><div><p class="text-xs mb-1"style=color:var(--text-muted)>Service</p><p class="text-sm font-medium"style=color:var(--text-primary)></p></div><div><p class="text-xs mb-1"style=color:var(--text-muted)>Istio Detected</p><p class="text-sm font-medium"style=color:var(--text-primary)></p></div></div><div class="flex items-center gap-2 pt-4 border-t"style=border-color:var(--border-color)><button class="px-4 py-2 rounded-lg text-sm font-medium transition-colors"style=background:var(--accent-primary);color:#000>Open Kiali Dashboard'),qw=w('<div class=space-y-4><p class=text-sm style=color:var(--text-secondary)>Kiali is not detected. Use the Traffic Map in Resource Map to visualize service mesh traffic.</p><button class="px-4 py-2 rounded-lg text-sm font-medium transition-colors"style=background:var(--accent-primary);color:#000>Open Traffic Map'),Kw=w('<div class="rounded-lg p-6 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class="flex items-center justify-between mb-4"><h2 class="text-lg font-semibold"style=color:var(--text-primary)>Installation Status</h2><div>'),Yw=w('<div class="rounded-lg border overflow-hidden"style=background:var(--bg-card);borderColor:var(--border-color);minHeight:600px><div class="flex items-center justify-between p-4 border-b"style=border-color:var(--border-color)><h2 class="text-lg font-semibold"style=color:var(--text-primary)>Kiali Dashboard</h2><button class="px-3 py-1.5 rounded-lg text-sm font-medium transition-colors"style="background:var(--bg-tertiary);color:var(--text-secondary);border:1px solid var(--border-color)">Close</button></div><div class=h-[600px]>'),Gw=w('<div class="p-6 space-y-6"><div class="flex items-center justify-between"><div><h1 class="text-2xl font-bold mb-2"style=color:var(--text-primary)>Kiali Service Mesh</h1><p class=text-sm style=color:var(--text-secondary)>Service mesh observability and management for Istio</p></div><div class="flex items-center gap-2"><button class="px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><svg class="w-4 h-4 inline mr-2"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>Refresh');const Jw=()=>{const[e,t]=W(!1),[r,l]=W(!1),[a,{refetch:m}]=it(async()=>{try{return await zw.getStatus()}catch(n){return console.error("Failed to fetch Kiali status:",n),{installed:!1,istioDetected:!1}}}),d=async()=>{l(!0);try{await m(),Je("Status refreshed","success")}catch{Je("Failed to refresh status","error")}finally{l(!1)}},i=()=>{a()?.installed?t(!0):Je("Kiali is not installed","error")};return(()=>{var n=Gw(),g=n.firstChild,v=g.firstChild,p=v.firstChild;p.nextSibling;var y=v.nextSibling,x=y.firstChild;return x.$$click=d,s(n,_(K,{get when(){return!a.loading},get children(){var M=Kw(),b=M.firstChild,o=b.firstChild,c=o.nextSibling;return s(c,()=>a()?.installed?"Installed":"Not Installed"),s(M,_(K,{get when(){return a()?.installed},get children(){var u=Ww(),h=u.firstChild,f=h.firstChild,$=f.firstChild,C=$.nextSibling,k=f.nextSibling,S=k.firstChild,L=S.nextSibling,P=k.nextSibling,I=P.firstChild,D=I.nextSibling,T=P.nextSibling,B=T.firstChild,N=B.nextSibling,O=h.nextSibling,H=O.firstChild;return s(C,()=>a()?.version||"Unknown"),s(L,()=>a()?.namespace||"Unknown"),s(D,()=>a()?.serviceName||"Unknown"),s(N,()=>a()?.istioDetected?"Yes":"No"),H.$$click=i,u}}),null),s(M,_(K,{get when(){return!a()?.installed},get children(){var u=qw(),h=u.firstChild,f=h.nextSibling;return f.$$click=()=>{window.location.href="#/resourcemap"},u}}),null),J(()=>tt(c,`px-3 py-1 rounded-full text-xs font-medium ${a()?.installed?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-500"}`)),M}}),null),s(n,_(K,{get when(){return Re(()=>!!e())()&&a()?.installed},get children(){var M=Yw(),b=M.firstChild,o=b.firstChild,c=o.nextSibling,u=b.nextSibling;return c.$$click=()=>t(!1),s(u,_(Vw,{get status(){return a()}})),M}}),null),J(()=>x.disabled=r()),n})()};ut(["click"]);const Xw=()=>_(Jw,{}),jl={getStatus:async()=>je("/mlflow/status"),install:async e=>je("/mlflow/install",{method:"POST",body:JSON.stringify(e)}),getVersions:async()=>je("/mlflow/versions"),upgrade:async(e,t)=>je("/mlflow/upgrade",{method:"POST",body:JSON.stringify({namespace:e,version:t})}),proxy:async(e,t)=>fetch(`/api/mlflow/proxy${e}`,t)};var Zw=w('<button class="px-4 py-2 rounded-lg text-sm transition-colors hover:opacity-80"style=background:var(--accent-primary);color:#000>Refresh'),Qw=w('<div class="text-center py-8"style=color:var(--text-secondary)>Loading MLflow status...'),eS=w('<div class="rounded-lg p-4 border"style="background:rgba(239, 68, 68, 0.1);borderColor:var(--error-color);color:var(--error-color)">Error: '),tS=w('<div class="card p-8 text-center border"style=background:var(--bg-card);borderColor:var(--border-color)><p class="text-lg font-medium mb-2"style=color:var(--text-primary)>MLflow is not installed</p><p class="text-sm mb-4"style=color:var(--text-secondary)>Install MLflow from the Marketplace  ML Apps section</p><a href="/apps?tab=marketplace&amp;category=ML Apps"class="inline-block px-6 py-2 rounded-lg text-white transition-colors hover:opacity-80"style=background:var(--accent-primary);color:#000>Go to Marketplace'),rS=w('<div class="card rounded-lg p-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class="text-sm mb-1"style=color:var(--text-secondary)>Backend Store</div><div class="text-lg font-semibold"style=color:var(--text-primary)>'),sS=w('<div class="card rounded-lg p-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class="text-sm mb-1"style=color:var(--text-secondary)>Artifact Store</div><div class="text-lg font-semibold"style=color:var(--text-primary)>'),iS=w('<div class=space-y-4><div class="grid grid-cols-2 gap-4"><div class="card rounded-lg p-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class="text-sm mb-1"style=color:var(--text-secondary)>Status</div><div class="text-lg font-semibold text-green-500">Installed</div></div><div class="card rounded-lg p-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class="text-sm mb-1"style=color:var(--text-secondary)>Version</div><div class="text-lg font-semibold"style=color:var(--text-primary)></div></div><div class="card rounded-lg p-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class="text-sm mb-1"style=color:var(--text-secondary)>Namespace</div><div class="text-lg font-semibold"style=color:var(--text-primary)></div></div><div class="card rounded-lg p-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class="text-sm mb-1"style=color:var(--text-secondary)>Deployment</div><div class="text-lg font-semibold"style=color:var(--text-primary)></div></div><div class="card rounded-lg p-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class="text-sm mb-1"style=color:var(--text-secondary)>Service</div><div class="text-lg font-semibold"style=color:var(--text-primary)></div></div></div><div class="flex gap-3"><button class="px-6 py-2 rounded-lg text-white transition-colors hover:opacity-80"style=background:var(--accent-primary);color:#000>Open Tracking UI</button><button class="px-6 py-2 rounded-lg border transition-colors hover:opacity-80"style=background:var(--bg-secondary);borderColor:var(--border-color);color:var(--text-primary)>Restart Pods</button></div><div class="card rounded-lg p-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><h3 class="font-semibold mb-3"style=color:var(--text-primary)>Quick Links</h3><div class="space-y-2 text-sm"><a target=_blank class="block transition-colors hover:opacity-80"style=color:var(--accent-primary)> MLflow Tracking UI</a><a target=_blank class="block transition-colors hover:opacity-80"style=color:var(--accent-primary)> MLflow API (Experiments)'),nS=w('<div class="p-6 space-y-6"style=background:var(--bg-primary)><div class="flex items-center justify-between"><div><h2 class="text-2xl font-bold"style=color:var(--text-primary)>MLflow</h2><p class="text-sm mt-1"style=color:var(--text-secondary)>Open source platform for managing the ML lifecycle');const lS=()=>{const[e,{refetch:t}]=it(jl.getStatus),[r,l]=W(!1),a=()=>{if(e()?.installed&&e()?.serviceName){const d=`/api/mlflow/proxy/?namespace=${e()?.namespace||"mlflow"}`;window.open(d,"_blank")}},m=async()=>{if(e()?.installed)try{(await fetch(`/api/deployments/${e()?.namespace}/${e()?.deployment}/restart`,{method:"POST"})).ok&&(alert("MLflow pods are restarting..."),setTimeout(()=>t(),5e3))}catch(d){console.error("Failed to restart pods:",d),alert("Failed to restart pods")}};return(()=>{var d=nS(),i=d.firstChild,n=i.firstChild,g=n.firstChild;return g.nextSibling,s(i,_(K,{get when(){return e()?.installed},get children(){var v=Zw();return v.$$click=()=>t(),v}}),null),s(d,_(K,{get when(){return e.loading},get children(){return Qw()}}),null),s(d,_(K,{get when(){return e.error},get children(){var v=eS();return v.firstChild,s(v,()=>e.error?.message||"Failed to load MLflow status",null),v}}),null),s(d,_(K,{get when(){return Re(()=>!e.loading)()&&!e()?.installed},get children(){var v=tS(),p=v.firstChild,y=p.nextSibling;return y.nextSibling,v}}),null),s(d,_(K,{get when(){return e()?.installed},get children(){var v=iS(),p=v.firstChild,y=p.firstChild;y.firstChild;var x=y.nextSibling,M=x.firstChild,b=M.nextSibling,o=x.nextSibling,c=o.firstChild,u=c.nextSibling,h=o.nextSibling,f=h.firstChild,$=f.nextSibling,C=h.nextSibling,k=C.firstChild,S=k.nextSibling,L=p.nextSibling,P=L.firstChild,I=P.nextSibling,D=L.nextSibling,T=D.firstChild,B=T.nextSibling,N=B.firstChild,O=N.nextSibling;return s(b,()=>e()?.version||"Unknown"),s(u,()=>e()?.namespace||"N/A"),s($,()=>e()?.deployment||"N/A"),s(S,()=>e()?.serviceName||"N/A"),s(p,_(K,{get when(){return e()?.backendStore},get children(){var H=rS(),A=H.firstChild,z=A.nextSibling;return s(z,()=>e()?.backendStore||"N/A"),H}}),null),s(p,_(K,{get when(){return e()?.artifactStore},get children(){var H=sS(),A=H.firstChild,z=A.nextSibling;return s(z,()=>e()?.artifactStore||"N/A"),H}}),null),P.$$click=a,I.$$click=m,J(H=>{var A=`/api/mlflow/proxy/?namespace=${e()?.namespace||"mlflow"}`,z=`/api/mlflow/proxy/api/2.0/mlflow/experiments/search?namespace=${e()?.namespace||"mlflow"}`;return A!==H.e&&dt(N,"href",H.e=A),z!==H.t&&dt(O,"href",H.t=z),H},{e:void 0,t:void 0}),v}}),null),d})()};ut(["click"]);const oS=()=>_(lS,{}),ai={create:async e=>je("/ml/jobs/create",{method:"POST",body:JSON.stringify(e)}),list:async e=>{const t=e&&e!=="_all"?`/ml/jobs/list?namespace=${e}`:"/ml/jobs/list";return je(t)},get:async(e,t)=>je(`/ml/jobs/get?name=${e}&namespace=${t}`),delete:async(e,t)=>je("/ml/jobs/delete",{method:"POST",body:JSON.stringify({name:e,namespace:t})}),getLogs:async(e,t,r=!1)=>{const l=`/ml/jobs/logs?name=${e}&namespace=${t}&follow=${r}`,a=await fetch(`/api${l}`);if(!a.ok)throw new Error(`Failed to fetch logs: ${a.statusText}`);return a.text()},streamLogs:(e,t,r,l)=>{const m=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/api/ml/jobs/logs/ws?name=${e}&namespace=${t}`,d=new WebSocket(m);return d.onmessage=i=>{r(i.data)},d.onerror=i=>{l(new Error("WebSocket error"))},d.onclose=()=>{},d}};var aS=w(`<div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Python Script *</label><textarea placeholder="# Your training script here
import torch
# ..."class="w-full px-3 py-2 rounded-lg font-mono text-sm border"rows=10 style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)>`),cS=w('<div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Docker Image *</label><input type=text placeholder=pytorch/pytorch:latest class="w-full px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)>'),dS=w('<div class="rounded-lg p-3 text-sm border"style="background:rgba(239, 68, 68, 0.1);borderColor:var(--error-color);color:var(--error-color)">'),uS=w('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"><div class="rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto m-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class=p-6><div class="flex items-center justify-between mb-6"><h2 class="text-2xl font-bold"style=color:var(--text-primary)>Create ML Training Job</h2><button class="text-2xl transition-colors hover:opacity-70"style=color:var(--text-secondary)></button></div><div class=space-y-6><div class="grid grid-cols-2 gap-4"><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Job Name *</label><input type=text placeholder=my-training-job class="w-full px-3 py-2 rounded-lg border"required style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Namespace</label><select class="w-full px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)><option value=default>default</option></select></div></div><div><label class="flex items-center gap-2 mb-2"><input type=checkbox class="w-4 h-4"><span class="text-sm font-medium"style=color:var(--text-primary)>Auto-build Docker image from script</span></label></div><div class="grid grid-cols-3 gap-4"><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>CPU</label><input type=text placeholder=1 class="w-full px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Memory</label><input type=text placeholder=2Gi class="w-full px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>GPU</label><input type=text placeholder=0 class="w-full px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)></div></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Restart Policy</label><select class="w-full px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)><option value=Never>Never</option><option value=OnFailure>On Failure</option><option value=Always>Always</option></select></div><div><div class="flex items-center justify-between mb-2"><label class="block text-sm font-medium"style=color:var(--text-secondary)>Environment Variables</label><button class="px-3 py-1 text-sm rounded transition-colors"style=background:var(--accent-primary);color:#000>+ Add</button></div><div class=space-y-2></div></div><div><div class="flex items-center justify-between mb-2"><label class="block text-sm font-medium"style=color:var(--text-secondary)>Volume Mounts</label><button class="px-3 py-1 text-sm rounded transition-colors"style=background:var(--accent-primary);color:#000>+ Add</button></div><div class=space-y-2></div></div><div class="flex gap-3 justify-end pt-4 border-t"style=borderColor:var(--border-color)><button class="px-6 py-2 rounded-lg border transition-colors hover:opacity-80"style=background:var(--bg-secondary);borderColor:var(--border-color);color:var(--text-secondary)>Cancel</button><button class="px-6 py-2 rounded-lg text-white transition-colors disabled:opacity-50"style=background:var(--accent-primary);color:#000>'),dc=w("<option>"),hS=w('<div class="flex gap-2"><input type=text placeholder=KEY class="flex-1 px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)><input type=text placeholder=value class="flex-1 px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)><button class="px-3 py-2 rounded transition-colors"style="color:var(--error-color);background:rgba(239, 68, 68, 0.1)">'),gS=w('<div class="grid grid-cols-4 gap-2"><input type=text placeholder="Volume Name"class="px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)><input type=text placeholder=/mnt/data class="px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)><select class="px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)><option value>Select PVC</option></select><div class="flex items-center gap-2"><label class="flex items-center gap-1 text-sm"style=color:var(--text-primary)><input type=checkbox class="w-4 h-4">Read-only</label><button class="px-2 py-1 rounded transition-colors"style="color:var(--error-color);background:rgba(239, 68, 68, 0.1)">');const vS=e=>{const[t,r]=W(""),[l,a]=W("default"),[m,d]=W(""),[i,n]=W(""),[g,v]=W(!1),[p,y]=W("1"),[x,M]=W("2Gi"),[b,o]=W("0"),[c,u]=W("Never"),[h,f]=W([]),[$,C]=W([]),[k,S]=W(!1),[L,P]=W(""),[I]=it(Fe.getNamespaces),[D]=it(()=>l(),async()=>[]),T=()=>{f([...h(),{key:"",value:""}])},B=F=>{f(h().filter((j,q)=>q!==F))},N=(F,j,q)=>{const U=[...h()];U[F][j]=q,f(U)},O=()=>{C([...$(),{name:"",mountPath:"",pvcName:"",readOnly:!1}])},H=F=>{C($().filter((j,q)=>q!==F))},A=(F,j,q)=>{const U=[...$()];U[F][j]=q,C(U)},z=async()=>{S(!0),P("");try{const F={};h().forEach(U=>{U.key&&(F[U.key]=U.value)});const j={name:t(),namespace:l(),script:m()||void 0,image:i()||void 0,autoBuild:g(),cpu:p(),memory:x(),gpu:b()!=="0"?b():void 0,restartPolicy:c(),envVars:Object.keys(F).length>0?F:void 0,volumeMounts:$().length>0?$():void 0,nodeSelector:b()!=="0"?{"nvidia.com/gpu":"true"}:void 0},q=await ai.create(j);q.success?(e.onSuccess?.(),e.onClose()):P(q.error||"Failed to create job")}catch(F){P(F.message||"Failed to create job")}finally{S(!1)}};return(()=>{var F=uS(),j=F.firstChild,q=j.firstChild,U=q.firstChild,Y=U.firstChild,V=Y.nextSibling,X=U.nextSibling,R=X.firstChild,G=R.firstChild,te=G.firstChild,ae=te.nextSibling,Q=G.nextSibling,Z=Q.firstChild,ne=Z.nextSibling;ne.firstChild;var $e=R.nextSibling,re=$e.firstChild,de=re.firstChild;de.nextSibling;var le=$e.nextSibling,xe=le.firstChild,ye=xe.firstChild,ke=ye.nextSibling,ge=xe.nextSibling,Ce=ge.firstChild,_e=Ce.nextSibling,Me=ge.nextSibling,ve=Me.firstChild,be=ve.nextSibling,ce=le.nextSibling,Ae=ce.firstChild,se=Ae.nextSibling,oe=ce.nextSibling,ie=oe.firstChild,ue=ie.firstChild,he=ue.nextSibling,Te=ie.nextSibling,ee=oe.nextSibling,Se=ee.firstChild,pe=Se.firstChild,De=pe.nextSibling,Ne=Se.nextSibling,me=ee.nextSibling,He=me.firstChild,Ze=He.nextSibling;return Rt(V,"click",e.onClose,!0),ae.$$input=we=>r(we.currentTarget.value),ne.addEventListener("change",we=>a(we.currentTarget.value)),s(ne,_(Xe,{get each(){return I()||[]},children:we=>(()=>{var ze=dc();return ze.value=we,s(ze,we),ze})()}),null),de.addEventListener("change",we=>v(we.currentTarget.checked)),s(X,_(K,{get when(){return g()},get children(){var we=aS(),ze=we.firstChild,Pe=ze.nextSibling;return Pe.$$input=Ue=>d(Ue.currentTarget.value),J(()=>Pe.value=m()),we}}),le),s(X,_(K,{get when(){return!g()},get children(){var we=cS(),ze=we.firstChild,Pe=ze.nextSibling;return Pe.$$input=Ue=>n(Ue.currentTarget.value),J(()=>Pe.value=i()),we}}),le),ke.$$input=we=>y(we.currentTarget.value),_e.$$input=we=>M(we.currentTarget.value),be.$$input=we=>o(we.currentTarget.value),se.addEventListener("change",we=>u(we.currentTarget.value)),he.$$click=T,s(Te,_(Xe,{get each(){return h()},children:(we,ze)=>(()=>{var Pe=hS(),Ue=Pe.firstChild,Oe=Ue.nextSibling,fe=Oe.nextSibling;return Ue.$$input=Le=>N(ze(),"key",Le.currentTarget.value),Oe.$$input=Le=>N(ze(),"value",Le.currentTarget.value),fe.$$click=()=>B(ze()),J(()=>Ue.value=we.key),J(()=>Oe.value=we.value),Pe})()})),De.$$click=O,s(Ne,_(Xe,{get each(){return $()},children:(we,ze)=>(()=>{var Pe=gS(),Ue=Pe.firstChild,Oe=Ue.nextSibling,fe=Oe.nextSibling;fe.firstChild;var Le=fe.nextSibling,We=Le.firstChild,Ee=We.firstChild,Ie=We.nextSibling;return Ue.$$input=qe=>A(ze(),"name",qe.currentTarget.value),Oe.$$input=qe=>A(ze(),"mountPath",qe.currentTarget.value),fe.addEventListener("change",qe=>A(ze(),"pvcName",qe.currentTarget.value)),s(fe,_(Xe,{get each(){return D()||[]},children:qe=>(()=>{var Be=dc();return s(Be,()=>qe.name),J(()=>Be.value=qe.name),Be})()}),null),Ee.addEventListener("change",qe=>A(ze(),"readOnly",qe.currentTarget.checked)),Ie.$$click=()=>H(ze()),J(()=>Ue.value=we.name),J(()=>Oe.value=we.mountPath),J(()=>fe.value=we.pvcName||""),J(()=>Ee.checked=we.readOnly||!1),Pe})()})),s(X,_(K,{get when(){return L()},get children(){var we=dS();return s(we,L),we}}),me),Rt(He,"click",e.onClose,!0),Ze.$$click=z,s(Ze,()=>k()?"Creating...":"Create Job"),J(we=>{var ze=k(),Pe=k()||!t();return ze!==we.e&&(He.disabled=we.e=ze),Pe!==we.t&&(Ze.disabled=we.t=Pe),we},{e:void 0,t:void 0}),J(()=>ae.value=t()),J(()=>ne.value=l()),J(()=>de.checked=g()),J(()=>ke.value=p()),J(()=>_e.value=x()),J(()=>be.value=b()),J(()=>se.value=c()),F})()};ut(["click","input"]);var fS=w('<div class="text-center py-8"style=color:var(--text-secondary)>Loading jobs...'),pS=w('<div class="rounded-lg p-4 border"style="background:rgba(239, 68, 68, 0.1);borderColor:var(--error-color);color:var(--error-color)">Error: '),mS=w('<div class="card p-8 text-center border"style=background:var(--bg-card);borderColor:var(--border-color)><p class=mb-4 style=color:var(--text-secondary)>No training jobs found</p><button class="px-4 py-2 rounded-lg text-white transition-colors"style=background:var(--accent-primary);color:#000>Create Your First Job'),bS=w('<div class="card border rounded-lg overflow-hidden"style=background:var(--bg-card);borderColor:var(--border-color)><table class=w-full><thead class=border-b style=background:var(--bg-secondary);borderColor:var(--border-color)><tr><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Name</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Namespace</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Status</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Image</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Resources</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Created</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Actions</th></tr></thead><tbody class=divide-y style=borderColor:var(--border-color)>'),xS=w('<div class="p-6 space-y-6"style=background:var(--bg-primary)><div class="flex items-center justify-between"><div><h2 class="text-2xl font-bold"style=color:var(--text-primary)>ML Training Jobs</h2><p class="text-sm mt-1"style=color:var(--text-secondary)>Manage and monitor your machine learning training jobs</p></div><button class="px-4 py-2 rounded-lg text-white transition-colors"style=background:var(--accent-primary);color:#000>+ Create Job'),yS=w('<tr class="hover:opacity-80 transition-opacity"style=background:var(--bg-card);border-color:var(--border-color)><td class="px-4 py-3"><button class="font-medium transition-colors hover:opacity-80"style=color:var(--accent-primary)></button></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3"><span></span></td><td class="px-4 py-3 text-sm font-mono"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)><div class="flex flex-col gap-1"></div></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3"><div class="flex gap-2"><button class="px-3 py-1 text-sm rounded transition-colors"style=background:var(--accent-primary);color:#000>View</button><button class="px-3 py-1 text-sm rounded transition-colors"style="background:rgba(239, 68, 68, 0.2);color:var(--error-color)">Delete'),_S=w("<span>CPU: "),$S=w("<span>Memory: "),wS=w("<span>GPU: ");const SS=()=>{const[e,t]=W(null),[r,l]=W(!1),[a,{refetch:m}]=it(()=>Xt(),async n=>(await ai.list(n==="_all"?void 0:n)).jobs),d=async n=>{if(confirm(`Are you sure you want to delete job "${n.name}"?`))try{await ai.delete(n.name,n.namespace),m()}catch(g){alert(`Failed to delete job: ${g.message}`)}},i=n=>{switch(n){case"Succeeded":return"bg-green-500";case"Failed":return"bg-red-500";case"Active":return"bg-blue-500";default:return"bg-gray-500"}};return(()=>{var n=xS(),g=n.firstChild,v=g.firstChild,p=v.firstChild;p.nextSibling;var y=v.nextSibling;return y.$$click=()=>l(!0),s(n,_(K,{get when(){return r()},get children(){return _(vS,{onClose:()=>l(!1),onSuccess:()=>{m(),l(!1)}})}}),null),s(n,_(K,{get when(){return a.loading},get children(){return fS()}}),null),s(n,_(K,{get when(){return a.error},get children(){var x=pS();return x.firstChild,s(x,()=>a.error?.message||"Failed to load jobs",null),x}}),null),s(n,_(K,{get when(){return Re(()=>!!(!a.loading&&a()))()&&a().length===0},get children(){var x=mS(),M=x.firstChild,b=M.nextSibling;return b.$$click=()=>l(!0),x}}),null),s(n,_(K,{get when(){return Re(()=>!!(!a.loading&&a()))()&&a().length>0},get children(){var x=bS(),M=x.firstChild,b=M.firstChild,o=b.firstChild,c=o.firstChild,u=c.nextSibling,h=u.nextSibling,f=h.nextSibling,$=f.nextSibling,C=$.nextSibling;C.nextSibling;var k=b.nextSibling;return s(k,_(Xe,{get each(){return a()},children:S=>(()=>{var L=yS(),P=L.firstChild,I=P.firstChild,D=P.nextSibling,T=D.nextSibling,B=T.firstChild,N=T.nextSibling,O=N.nextSibling,H=O.firstChild,A=O.nextSibling,z=A.nextSibling,F=z.firstChild,j=F.firstChild,q=j.nextSibling;return I.$$click=()=>{sessionStorage.setItem("kubegraf-selected-training-job",JSON.stringify({name:S.name,namespace:S.namespace})),window.location.reload()},s(I,()=>S.name),s(D,()=>S.namespace),s(B,()=>S.status),s(N,()=>S.image),s(H,(()=>{var U=Re(()=>!!S.resources.cpu);return()=>U()&&(()=>{var Y=_S();return Y.firstChild,s(Y,()=>S.resources.cpu,null),Y})()})(),null),s(H,(()=>{var U=Re(()=>!!S.resources.memory);return()=>U()&&(()=>{var Y=$S();return Y.firstChild,s(Y,()=>S.resources.memory,null),Y})()})(),null),s(H,(()=>{var U=Re(()=>!!S.resources.gpu);return()=>U()&&(()=>{var Y=wS();return Y.firstChild,s(Y,()=>S.resources.gpu,null),Y})()})(),null),s(A,()=>new Date(S.createdAt).toLocaleString()),j.$$click=()=>{sessionStorage.setItem("kubegraf-selected-training-job",JSON.stringify({name:S.name,namespace:S.namespace})),window.location.reload()},q.$$click=()=>d(S),J(()=>tt(B,`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium text-white ${i(S.status)}`)),L})()})),x}}),null),n})()};ut(["click"]);var CS=w('<div class="card rounded-lg p-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class="text-sm mb-1"style=color:var(--text-secondary)>Completed</div><div class=text-lg style=color:var(--text-primary)>'),kS=w('<div class=space-y-4><div class="grid grid-cols-2 gap-4"><div class="card rounded-lg p-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class="text-sm mb-1"style=color:var(--text-secondary)>Status</div><div class="text-lg font-semibold"style=color:var(--text-primary)></div></div><div class="card rounded-lg p-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class="text-sm mb-1"style=color:var(--text-secondary)>Image</div><div class="text-lg font-mono text-sm"style=color:var(--text-primary)></div></div><div class="card rounded-lg p-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class="text-sm mb-1"style=color:var(--text-secondary)>Created</div><div class=text-lg style=color:var(--text-primary)></div></div></div><div class="card rounded-lg p-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class="text-sm mb-2"style=color:var(--text-secondary)>Resources</div><div class="grid grid-cols-3 gap-4">'),MS=w('<button class="px-4 py-2 rounded-lg text-white transition-colors"style="background:rgba(34, 197, 94, 0.8);color:#fff">Start Streaming'),AS=w('<button class="px-4 py-2 rounded-lg text-white transition-colors"style="background:rgba(239, 68, 68, 0.8);color:#fff">Stop Streaming'),LS=w('<div class=space-y-4><div class="flex gap-2"><button class="px-4 py-2 rounded-lg text-white transition-colors disabled:opacity-50"style=background:var(--accent-primary);color:#000>Refresh Logs</button></div><div class="font-mono text-sm p-4 rounded-lg h-96 overflow-y-auto border"style=background:#000;borderColor:var(--border-color);color:#22c55e><pre class=whitespace-pre-wrap>'),ES=w('<div class="font-mono text-sm p-4 rounded-lg overflow-x-auto border"style=background:#1a1a1a;borderColor:var(--border-color);color:#e5e5e5><pre class=whitespace-pre>'),TS=w('<div class="p-6 space-y-6"style=background:var(--bg-primary)><div class="flex items-center justify-between"><div><h2 class="text-2xl font-bold"style=color:var(--text-primary)></h2><p class="text-sm mt-1"style=color:var(--text-secondary)>Namespace: </p></div><button class="px-4 py-2 rounded-lg text-white text-sm transition-colors"style=background:var(--accent-primary);color:#000>Refresh</button></div><div class=border-b style=borderColor:var(--border-color)><div class="flex gap-4"><button>Overview</button><button>Logs</button><button>YAML'),DS=w("<div><div class=text-xs style=color:var(--text-muted)>CPU</div><div class=font-medium style=color:var(--text-primary)>"),RS=w("<div><div class=text-xs style=color:var(--text-muted)>Memory</div><div class=font-medium style=color:var(--text-primary)>"),PS=w("<div><div class=text-xs style=color:var(--text-muted)>GPU</div><div class=font-medium style=color:var(--text-primary)>");const IS=e=>{const[t,r]=W("overview"),[l,a]=W(""),[m,d]=W(!1),[i,n]=W(null),[g,{refetch:v}]=it(()=>({name:e.jobName,namespace:e.jobNamespace}),async b=>await ai.get(b.name,b.namespace)),[p]=it(()=>g()?{name:e.jobName,namespace:e.jobNamespace}:null,async b=>b&&(await Fe.getJobYAML(b.name,b.namespace)).yaml||""),y=async()=>{try{const b=await ai.getLogs(e.jobName,e.jobNamespace,!1);a(b)}catch(b){a(`Error fetching logs: ${b.message}`)}},x=()=>{if(m())return;d(!0),a("");const b=ai.streamLogs(e.jobName,e.jobNamespace,o=>{a(c=>c+o)},o=>{a(c=>c+`
Error: ${o.message}
`),d(!1)});n(b)},M=()=>{i()&&(i().close(),n(null)),d(!1)};return zt(()=>{t()==="logs"&&y()}),wr(()=>{M()}),(()=>{var b=TS(),o=b.firstChild,c=o.firstChild,u=c.firstChild,h=u.nextSibling;h.firstChild;var f=c.nextSibling,$=o.nextSibling,C=$.firstChild,k=C.firstChild,S=k.nextSibling,L=S.nextSibling;return s(u,()=>e.jobName),s(h,()=>e.jobNamespace,null),f.$$click=()=>v(),k.$$click=()=>r("overview"),S.$$click=()=>{r("logs"),m()||y()},L.$$click=()=>r("yaml"),s(b,_(K,{get when(){return Re(()=>t()==="overview")()&&g()},get children(){var P=kS(),I=P.firstChild,D=I.firstChild,T=D.firstChild,B=T.nextSibling,N=D.nextSibling,O=N.firstChild,H=O.nextSibling,A=N.nextSibling,z=A.firstChild,F=z.nextSibling,j=I.nextSibling,q=j.firstChild,U=q.nextSibling;return s(B,()=>g()?.status),s(H,()=>g()?.image),s(F,()=>new Date(g()?.createdAt||"").toLocaleString()),s(I,_(K,{get when(){return g()?.completedAt},get children(){var Y=CS(),V=Y.firstChild,X=V.nextSibling;return s(X,()=>new Date(g()?.completedAt||"").toLocaleString()),Y}}),null),s(U,(()=>{var Y=Re(()=>!!g()?.resources.cpu);return()=>Y()&&(()=>{var V=DS(),X=V.firstChild,R=X.nextSibling;return s(R,()=>g()?.resources.cpu),V})()})(),null),s(U,(()=>{var Y=Re(()=>!!g()?.resources.memory);return()=>Y()&&(()=>{var V=RS(),X=V.firstChild,R=X.nextSibling;return s(R,()=>g()?.resources.memory),V})()})(),null),s(U,(()=>{var Y=Re(()=>!!g()?.resources.gpu);return()=>Y()&&(()=>{var V=PS(),X=V.firstChild,R=X.nextSibling;return s(R,()=>g()?.resources.gpu),V})()})(),null),P}}),null),s(b,_(K,{get when(){return t()==="logs"},get children(){var P=LS(),I=P.firstChild,D=I.firstChild,T=I.nextSibling,B=T.firstChild;return D.$$click=y,s(I,_(K,{get when(){return!m()},get children(){var N=MS();return N.$$click=x,N}}),null),s(I,_(K,{get when(){return m()},get children(){var N=AS();return N.$$click=M,N}}),null),s(B,()=>l()||"No logs available"),J(()=>D.disabled=m()),P}}),null),s(b,_(K,{get when(){return t()==="yaml"},get children(){var P=ES(),I=P.firstChild;return s(I,()=>p()||"Loading YAML..."),P}}),null),J(P=>{var I=`px-4 py-2 border-b-2 font-medium transition-colors ${t()==="overview"?"":"border-transparent"}`,D=t()==="overview"?{borderColor:"var(--accent-primary)",color:"var(--accent-primary)"}:{color:"var(--text-secondary)"},T=`px-4 py-2 border-b-2 font-medium transition-colors ${t()==="logs"?"":"border-transparent"}`,B=t()==="logs"?{borderColor:"var(--accent-primary)",color:"var(--accent-primary)"}:{color:"var(--text-secondary)"},N=`px-4 py-2 border-b-2 font-medium transition-colors ${t()==="yaml"?"":"border-transparent"}`,O=t()==="yaml"?{borderColor:"var(--accent-primary)",color:"var(--accent-primary)"}:{color:"var(--text-secondary)"};return I!==P.e&&tt(k,P.e=I),P.t=_t(k,D,P.t),T!==P.a&&tt(S,P.a=T),P.o=_t(S,B,P.o),N!==P.i&&tt(L,P.i=N),P.n=_t(L,O,P.n),P},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),b})()};ut(["click"]);const BS=()=>{const[e,t]=W(""),[r,l]=W("");zt(()=>{const m=sessionStorage.getItem("kubegraf-selected-training-job");if(m)try{const d=JSON.parse(m);t(d.name),l(d.namespace),sessionStorage.removeItem("kubegraf-selected-training-job")}catch{}});const a=()=>e()!=="";return _(K,{get when(){return!a()},get fallback(){return _(IS,{get jobName(){return e()},get jobNamespace(){return r()}})},get children(){return _(SS,{})}})},Ni={create:async e=>je("/inference/create",{method:"POST",body:JSON.stringify(e)}),list:async e=>{const t=e&&e!=="_all"?`/inference/list?namespace=${e}`:"/inference/list";return je(t)},get:async(e,t)=>je(`/inference/get?name=${e}&namespace=${t}`),delete:async(e,t)=>je("/inference/delete",{method:"POST",body:JSON.stringify({name:e,namespace:t})}),test:async e=>je("/inference/test",{method:"POST",body:JSON.stringify(e)}),getStatus:async(e,t)=>je(`/inference/status?name=${e}&namespace=${t}`)};var NS=w('<p class="text-sm mt-2"style=color:var(--text-secondary)>Selected: <!> (<!> KB)'),OS=w('<div class="grid grid-cols-3 gap-4 mt-4 ml-6"><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Min Replicas</label><input type=number min=1 class="w-full px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Max Replicas</label><input type=number min=1 class="w-full px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Target CPU %</label><input type=number min=1 max=100 class="w-full px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)>'),zS=w('<div class="grid grid-cols-3 gap-4 mt-4 ml-6"><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Host</label><input type=text placeholder=inference.example.com class="w-full px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Path</label><input type=text placeholder=/ class="w-full px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)></div><div class="flex items-end"><label class="flex items-center gap-2"><input type=checkbox class="w-4 h-4"><span class=text-sm style=color:var(--text-primary)>TLS'),FS=w('<input type=text placeholder="PVC Name (optional)"class="w-full px-3 py-2 rounded-lg border mt-2"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)>'),HS=w('<div class="rounded-lg p-3 text-sm border"style="background:rgba(239, 68, 68, 0.1);borderColor:var(--error-color);color:var(--error-color)">'),jS=w('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"><div class="rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto m-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class=p-6><div class="flex items-center justify-between mb-6"><h2 class="text-2xl font-bold"style=color:var(--text-primary)>Deploy Model Inference Service</h2><button class="text-2xl transition-colors hover:opacity-70"style=color:var(--text-secondary)></button></div><div class=space-y-6><div class="grid grid-cols-2 gap-4"><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Service Name *</label><input type=text placeholder=my-inference-service class="w-full px-3 py-2 rounded-lg border"required style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Namespace</label><select class="w-full px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)><option value=default>default</option></select></div></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Model File * (.pt, .onnx, .pickle, .h5)</label><input type=file accept=.pt,.onnx,.pickle,.h5,.pkl class="w-full px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Runtime *</label><select class="w-full px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)><option value=fastapi>FastAPI + Custom Handler</option><option value=mlserver>MLServer</option><option value=bentoml>BentoML</option><option value=kserve>KServe (lite)</option></select></div><div class="grid grid-cols-4 gap-4"><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>CPU</label><input type=text placeholder=1 class="w-full px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Memory</label><input type=text placeholder=2Gi class="w-full px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>GPU</label><input type=text placeholder=0 class="w-full px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Replicas</label><input type=number min=1 class="w-full px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)></div></div><div><label class="flex items-center gap-2 mb-2"><input type=checkbox class="w-4 h-4"><span class="text-sm font-medium"style=color:var(--text-primary)>Enable Horizontal Pod Autoscaler (HPA)</span></label></div><div><label class="flex items-center gap-2 mb-2"><input type=checkbox class="w-4 h-4"><span class="text-sm font-medium"style=color:var(--text-primary)>Enable Ingress/Gateway</span></label></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Model Storage</label><select class="w-full px-3 py-2 rounded-lg border mb-2"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)><option value=pvc>PVC (Persistent Volume Claim)</option><option value=minio>MinIO</option><option value=s3>S3</option></select></div><div><div class="flex items-center justify-between mb-2"><label class="block text-sm font-medium"style=color:var(--text-secondary)>Environment Variables</label><button class="px-3 py-1 text-sm rounded transition-colors"style=background:var(--accent-primary);color:#000>+ Add</button></div><div class=space-y-2></div></div><div class="flex gap-3 justify-end pt-4 border-t"style=borderColor:var(--border-color)><button class="px-6 py-2 rounded-lg border transition-colors hover:opacity-80"style=background:var(--bg-secondary);borderColor:var(--border-color);color:var(--text-secondary)>Cancel</button><button class="px-6 py-2 rounded-lg text-white transition-colors disabled:opacity-50"style=background:var(--accent-primary);color:#000>'),US=w("<option>"),VS=w('<div class="flex gap-2"><input type=text placeholder=KEY class="flex-1 px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)><input type=text placeholder=value class="flex-1 px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)><button class="px-3 py-2 rounded transition-colors"style="color:var(--error-color);background:rgba(239, 68, 68, 0.1)">');const WS=e=>{const[t,r]=W(""),[l,a]=W("default"),[m,d]=W(null),[i,n]=W("fastapi"),[g,v]=W("1"),[p,y]=W("2Gi"),[x,M]=W("0"),[b,o]=W(1),[c,u]=W(!1),[h,f]=W(1),[$,C]=W(3),[k,S]=W(70),[L,P]=W(!1),[I,D]=W(""),[T,B]=W("/"),[N,O]=W(!1),[H,A]=W("pvc"),[z,F]=W(""),[j,q]=W([]),[U,Y]=W(!1),[V,X]=W(""),[R]=it(Fe.getNamespaces),G=ne=>{const $e=ne.currentTarget;$e.files&&$e.files.length>0&&d($e.files[0])},te=()=>{q([...j(),{key:"",value:""}])},ae=ne=>{q(j().filter(($e,re)=>re!==ne))},Q=(ne,$e,re)=>{const de=[...j()];de[ne][$e]=re,q(de)},Z=async()=>{if(Y(!0),X(""),!m()){X("Please select a model file"),Y(!1);return}try{const ne=m(),$e=new FileReader;$e.onload=async re=>{try{const de=(re.target?.result).split(",")[1]||re.target?.result,le={};j().forEach(_e=>{_e.key&&(le[_e.key]=_e.value)});let xe;c()&&(xe={enabled:!0,minReplicas:h(),maxReplicas:$(),targetCPU:k()});let ye;L()&&(ye={enabled:!0,host:I()||void 0,path:T()||"/",tls:N()});let ke;H()==="pvc"&&z()?ke={type:"pvc",pvcName:z(),mountPath:"/models"}:H()!=="pvc"&&(ke={type:H(),mountPath:"/models"});const ge={name:t(),namespace:l(),modelFile:de,modelFileName:ne.name,runtime:i(),cpu:g(),memory:p(),gpu:x()!=="0"?x():void 0,replicas:b(),hpa:xe,ingress:ye,storage:ke,envVars:Object.keys(le).length>0?le:void 0},Ce=await Ni.create(ge);Ce.success?(e.onSuccess?.(),e.onClose()):X(Ce.error||"Failed to create inference service")}catch(de){X(de.message||"Failed to process model file")}finally{Y(!1)}},$e.onerror=()=>{X("Failed to read model file"),Y(!1)},$e.readAsDataURL(ne)}catch(ne){X(ne.message||"Failed to create inference service"),Y(!1)}};return(()=>{var ne=jS(),$e=ne.firstChild,re=$e.firstChild,de=re.firstChild,le=de.firstChild,xe=le.nextSibling,ye=de.nextSibling,ke=ye.firstChild,ge=ke.firstChild,Ce=ge.firstChild,_e=Ce.nextSibling,Me=ge.nextSibling,ve=Me.firstChild,be=ve.nextSibling;be.firstChild;var ce=ke.nextSibling,Ae=ce.firstChild,se=Ae.nextSibling,oe=ce.nextSibling,ie=oe.firstChild,ue=ie.nextSibling,he=oe.nextSibling,Te=he.firstChild,ee=Te.firstChild,Se=ee.nextSibling,pe=Te.nextSibling,De=pe.firstChild,Ne=De.nextSibling,me=pe.nextSibling,He=me.firstChild,Ze=He.nextSibling,we=me.nextSibling,ze=we.firstChild,Pe=ze.nextSibling,Ue=he.nextSibling,Oe=Ue.firstChild,fe=Oe.firstChild;fe.nextSibling;var Le=Ue.nextSibling,We=Le.firstChild,Ee=We.firstChild;Ee.nextSibling;var Ie=Le.nextSibling,qe=Ie.firstChild,Be=qe.nextSibling,Ke=Ie.nextSibling,Ye=Ke.firstChild,lt=Ye.firstChild,gt=lt.nextSibling,Qe=Ye.nextSibling,ct=Ke.nextSibling,ft=ct.firstChild,Ge=ft.nextSibling;return Rt(xe,"click",e.onClose,!0),_e.$$input=st=>r(st.currentTarget.value),be.addEventListener("change",st=>a(st.currentTarget.value)),s(be,_(Xe,{get each(){return R()||[]},children:st=>(()=>{var vt=US();return vt.value=st,s(vt,st),vt})()}),null),se.addEventListener("change",G),s(ce,_(K,{get when(){return m()},get children(){var st=NS(),vt=st.firstChild,at=vt.nextSibling,pt=at.nextSibling,xt=pt.nextSibling;return xt.nextSibling,s(st,()=>m()?.name,at),s(st,()=>(m()?.size||0)/1024,xt),st}}),null),ue.addEventListener("change",st=>n(st.currentTarget.value)),Se.$$input=st=>v(st.currentTarget.value),Ne.$$input=st=>y(st.currentTarget.value),Ze.$$input=st=>M(st.currentTarget.value),Pe.$$input=st=>o(parseInt(st.currentTarget.value)||1),fe.addEventListener("change",st=>u(st.currentTarget.checked)),s(Ue,_(K,{get when(){return c()},get children(){var st=OS(),vt=st.firstChild,at=vt.firstChild,pt=at.nextSibling,xt=vt.nextSibling,Et=xt.firstChild,yt=Et.nextSibling,Tt=xt.nextSibling,Bt=Tt.firstChild,Dt=Bt.nextSibling;return pt.$$input=At=>f(parseInt(At.currentTarget.value)||1),yt.$$input=At=>C(parseInt(At.currentTarget.value)||3),Dt.$$input=At=>S(parseInt(At.currentTarget.value)||70),J(()=>pt.value=h()),J(()=>yt.value=$()),J(()=>Dt.value=k()),st}}),null),Ee.addEventListener("change",st=>P(st.currentTarget.checked)),s(Le,_(K,{get when(){return L()},get children(){var st=zS(),vt=st.firstChild,at=vt.firstChild,pt=at.nextSibling,xt=vt.nextSibling,Et=xt.firstChild,yt=Et.nextSibling,Tt=xt.nextSibling,Bt=Tt.firstChild,Dt=Bt.firstChild;return Dt.nextSibling,pt.$$input=At=>D(At.currentTarget.value),yt.$$input=At=>B(At.currentTarget.value),Dt.addEventListener("change",At=>O(At.currentTarget.checked)),J(()=>pt.value=I()),J(()=>yt.value=T()),J(()=>Dt.checked=N()),st}}),null),Be.addEventListener("change",st=>A(st.currentTarget.value)),s(Ie,_(K,{get when(){return H()==="pvc"},get children(){var st=FS();return st.$$input=vt=>F(vt.currentTarget.value),J(()=>st.value=z()),st}}),null),gt.$$click=te,s(Qe,_(Xe,{get each(){return j()},children:(st,vt)=>(()=>{var at=VS(),pt=at.firstChild,xt=pt.nextSibling,Et=xt.nextSibling;return pt.$$input=yt=>Q(vt(),"key",yt.currentTarget.value),xt.$$input=yt=>Q(vt(),"value",yt.currentTarget.value),Et.$$click=()=>ae(vt()),J(()=>pt.value=st.key),J(()=>xt.value=st.value),at})()})),s(ye,_(K,{get when(){return V()},get children(){var st=HS();return s(st,V),st}}),ct),Rt(ft,"click",e.onClose,!0),Ge.$$click=Z,s(Ge,()=>U()?"Deploying...":"Deploy Service"),J(st=>{var vt=U(),at=U()||!t()||!m();return vt!==st.e&&(ft.disabled=st.e=vt),at!==st.t&&(Ge.disabled=st.t=at),st},{e:void 0,t:void 0}),J(()=>_e.value=t()),J(()=>be.value=l()),J(()=>ue.value=i()),J(()=>Se.value=g()),J(()=>Ne.value=p()),J(()=>Ze.value=x()),J(()=>Pe.value=b()),J(()=>fe.checked=c()),J(()=>Ee.checked=L()),J(()=>Be.value=H()),ne})()};ut(["click","input"]);var qS=w('<div class="text-center py-8"style=color:var(--text-secondary)>Loading services...'),KS=w('<div class="rounded-lg p-4 border"style="background:rgba(239, 68, 68, 0.1);borderColor:var(--error-color);color:var(--error-color)">Error: '),YS=w('<div class="card p-8 text-center border"style=background:var(--bg-card);borderColor:var(--border-color)><p class=mb-4 style=color:var(--text-secondary)>No inference services found</p><button class="px-4 py-2 rounded-lg text-white transition-colors"style=background:var(--accent-primary);color:#000>Deploy Your First Model'),GS=w('<div class="card border rounded-lg overflow-hidden"style=background:var(--bg-card);borderColor:var(--border-color)><table class=w-full><thead class=border-b style=background:var(--bg-secondary);borderColor:var(--border-color)><tr><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Name</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Namespace</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Status</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Runtime</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Replicas</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Model</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Created</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Actions</th></tr></thead><tbody class=divide-y style=borderColor:var(--border-color)>'),JS=w('<div class="p-6 space-y-6"style=background:var(--bg-primary)><div class="flex items-center justify-between"><div><h2 class="text-2xl font-bold"style=color:var(--text-primary)>Inference Services</h2><p class="text-sm mt-1"style=color:var(--text-secondary)>Deploy and manage ML model inference services</p></div><button class="px-4 py-2 rounded-lg text-white transition-colors"style=background:var(--accent-primary);color:#000>+ Deploy Model'),XS=w('<tr class="hover:opacity-80 transition-opacity"style=background:var(--bg-card);border-color:var(--border-color)><td class="px-4 py-3"><button class="font-medium transition-colors hover:opacity-80"style=color:var(--accent-primary)></button></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3"><span></span></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)>/</td><td class="px-4 py-3 text-sm font-mono"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3"><div class="flex gap-2"><button class="px-3 py-1 text-sm rounded transition-colors"style=background:var(--accent-primary);color:#000>View</button><button class="px-3 py-1 text-sm rounded transition-colors"style="background:rgba(239, 68, 68, 0.2);color:var(--error-color)">Delete');const ZS=()=>{const[e,t]=W(!1),[r,{refetch:l}]=it(()=>Xt(),async d=>(await Ni.list(d==="_all"?void 0:d)).services),a=async d=>{if(confirm(`Are you sure you want to delete inference service "${d.name}"?`))try{await Ni.delete(d.name,d.namespace),l()}catch(i){alert(`Failed to delete service: ${i.message}`)}},m=d=>{switch(d){case"Running":return"bg-green-500";case"Failed":return"bg-red-500";case"Pending":return"bg-yellow-500";default:return"bg-gray-500"}};return(()=>{var d=JS(),i=d.firstChild,n=i.firstChild,g=n.firstChild;g.nextSibling;var v=n.nextSibling;return v.$$click=()=>t(!0),s(d,_(K,{get when(){return e()},get children(){return _(WS,{onClose:()=>t(!1),onSuccess:()=>{l(),t(!1)}})}}),null),s(d,_(K,{get when(){return r.loading},get children(){return qS()}}),null),s(d,_(K,{get when(){return r.error},get children(){var p=KS();return p.firstChild,s(p,()=>r.error?.message||"Failed to load services",null),p}}),null),s(d,_(K,{get when(){return Re(()=>!!(!r.loading&&r()))()&&r().length===0},get children(){var p=YS(),y=p.firstChild,x=y.nextSibling;return x.$$click=()=>t(!0),p}}),null),s(d,_(K,{get when(){return Re(()=>!!(!r.loading&&r()))()&&r().length>0},get children(){var p=GS(),y=p.firstChild,x=y.firstChild,M=x.firstChild,b=M.firstChild,o=b.nextSibling,c=o.nextSibling,u=c.nextSibling,h=u.nextSibling,f=h.nextSibling,$=f.nextSibling;$.nextSibling;var C=x.nextSibling;return s(C,_(Xe,{get each(){return r()},children:k=>(()=>{var S=XS(),L=S.firstChild,P=L.firstChild,I=L.nextSibling,D=I.nextSibling,T=D.firstChild,B=D.nextSibling,N=B.nextSibling,O=N.firstChild,H=N.nextSibling,A=H.nextSibling,z=A.nextSibling,F=z.firstChild,j=F.firstChild,q=j.nextSibling;return P.$$click=()=>{sessionStorage.setItem("kubegraf-selected-inference-service",JSON.stringify({name:k.name,namespace:k.namespace})),window.location.reload()},s(P,()=>k.name),s(I,()=>k.namespace),s(T,()=>k.status),s(B,()=>k.runtime),s(N,()=>k.readyReplicas,O),s(N,()=>k.replicas,null),s(H,()=>k.modelFile),s(A,()=>new Date(k.createdAt).toLocaleString()),j.$$click=()=>{sessionStorage.setItem("kubegraf-selected-inference-service",JSON.stringify({name:k.name,namespace:k.namespace})),window.location.reload()},q.$$click=()=>a(k),J(()=>tt(T,`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium text-white ${m(k.status)}`)),S})()})),p}}),null),d})()};ut(["click"]);var QS=w('<div class=space-y-4><div class="grid grid-cols-2 gap-4"><div class="card rounded-lg p-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class="text-sm mb-1"style=color:var(--text-secondary)>Status</div><div class="text-lg font-semibold"style=color:var(--text-primary)></div></div><div class="card rounded-lg p-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class="text-sm mb-1"style=color:var(--text-secondary)>Runtime</div><div class="text-lg font-semibold"style=color:var(--text-primary)></div></div><div class="card rounded-lg p-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class="text-sm mb-1"style=color:var(--text-secondary)>Endpoint</div><div class="text-lg font-mono text-sm break-all"style=color:var(--text-primary)></div></div><div class="card rounded-lg p-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class="text-sm mb-1"style=color:var(--text-secondary)>Replicas</div><div class="text-lg font-semibold"style=color:var(--text-primary)>/</div></div></div><div class="card rounded-lg p-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class="text-sm mb-2"style=color:var(--text-secondary)>Resources</div><div class="grid grid-cols-3 gap-4">'),eC=w("<span class=text-xs style=color:var(--text-muted)>Latency: "),tC=w('<pre class="text-sm font-mono p-3 rounded border overflow-auto"style=background:var(--bg-secondary);borderColor:var(--border-color);color:var(--text-primary)>'),rC=w('<div class="text-sm p-3 rounded border"style="background:rgba(239, 68, 68, 0.1);borderColor:var(--error-color);color:var(--error-color)">'),sC=w('<div class="card rounded-lg p-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class="flex items-center justify-between mb-2"><h3 class=font-medium style=color:var(--text-primary)>Response'),iC=w('<div class=space-y-4><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Input JSON</label><textarea class="w-full px-3 py-2 rounded-lg font-mono text-sm border"rows=10 placeholder="{\\n  &quot;input&quot;: [1, 2, 3]\\n}"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)></textarea></div><button class="px-4 py-2 rounded-lg text-white transition-colors disabled:opacity-50"style=background:var(--accent-primary);color:#000>'),nC=w('<div class=space-y-4><div class="flex gap-2"><button class="px-4 py-2 rounded-lg text-white transition-colors disabled:opacity-50"style=background:var(--accent-primary);color:#000></button></div><div class="font-mono text-sm p-4 rounded-lg h-96 overflow-y-auto border"style=background:#000;borderColor:var(--border-color);color:#22c55e><pre class=whitespace-pre-wrap>'),lC=w('<div class="card rounded-lg p-8 text-center border"style=background:var(--bg-card);borderColor:var(--border-color)><p style=color:var(--text-secondary)>Metrics visualization coming soon'),oC=w('<div class="p-6 space-y-6"style=background:var(--bg-primary)><div class="flex items-center justify-between"><div><h2 class="text-2xl font-bold"style=color:var(--text-primary)></h2><p class="text-sm mt-1"style=color:var(--text-secondary)>Namespace: </p></div><button class="px-4 py-2 rounded-lg text-white text-sm transition-colors"style=background:var(--accent-primary);color:#000>Refresh</button></div><div class=border-b style=borderColor:var(--border-color)><div class="flex gap-4"><button>Overview</button><button>Test Interface</button><button>Logs</button><button>Metrics'),aC=w("<div><div class=text-xs style=color:var(--text-muted)>CPU</div><div class=font-medium style=color:var(--text-primary)>"),cC=w("<div><div class=text-xs style=color:var(--text-muted)>Memory</div><div class=font-medium style=color:var(--text-primary)>"),dC=w("<div><div class=text-xs style=color:var(--text-muted)>GPU</div><div class=font-medium style=color:var(--text-primary)>");const uC=e=>{const[t,r]=W("overview"),[l,a]=W(`{
  "input": [1, 2, 3]
}`),[m,d]=W(null),[i,n]=W(!1),[g,v]=W(""),[p,y]=W(!1),[x,{refetch:M}]=it(()=>({name:e.serviceName,namespace:e.serviceNamespace}),async c=>await Ni.get(c.name,c.namespace)),b=async()=>{n(!0),d(null);try{let c;try{c=JSON.parse(l())}catch{d({success:!1,error:"Invalid JSON input"}),n(!1);return}const u={name:e.serviceName,namespace:e.serviceNamespace,input:c},h=await Ni.test(u);d(h)}catch(c){d({success:!1,error:c.message||"Test request failed"})}finally{n(!1)}},o=async()=>{y(!0);try{const u=(await Fe.getPods(e.serviceNamespace)).find(h=>h.name?.includes(e.serviceName));v(u?"Logs would be fetched from pod: "+u.name:"No pods found for this service")}catch(c){v(`Error fetching logs: ${c.message}`)}finally{y(!1)}};return zt(()=>{t()==="logs"&&o()}),(()=>{var c=oC(),u=c.firstChild,h=u.firstChild,f=h.firstChild,$=f.nextSibling;$.firstChild;var C=h.nextSibling,k=u.nextSibling,S=k.firstChild,L=S.firstChild,P=L.nextSibling,I=P.nextSibling,D=I.nextSibling;return s(f,()=>e.serviceName),s($,()=>e.serviceNamespace,null),C.$$click=()=>M(),L.$$click=()=>r("overview"),P.$$click=()=>r("test"),I.$$click=()=>{r("logs"),o()},D.$$click=()=>r("metrics"),s(c,_(K,{get when(){return Re(()=>t()==="overview")()&&x()},get children(){var T=QS(),B=T.firstChild,N=B.firstChild,O=N.firstChild,H=O.nextSibling,A=N.nextSibling,z=A.firstChild,F=z.nextSibling,j=A.nextSibling,q=j.firstChild,U=q.nextSibling,Y=j.nextSibling,V=Y.firstChild,X=V.nextSibling,R=X.firstChild,G=B.nextSibling,te=G.firstChild,ae=te.nextSibling;return s(H,()=>x()?.status),s(F,()=>x()?.runtime),s(U,()=>x()?.endpoint||"N/A"),s(X,()=>x()?.readyReplicas,R),s(X,()=>x()?.replicas,null),s(ae,(()=>{var Q=Re(()=>!!x()?.resources.cpu);return()=>Q()&&(()=>{var Z=aC(),ne=Z.firstChild,$e=ne.nextSibling;return s($e,()=>x()?.resources.cpu),Z})()})(),null),s(ae,(()=>{var Q=Re(()=>!!x()?.resources.memory);return()=>Q()&&(()=>{var Z=cC(),ne=Z.firstChild,$e=ne.nextSibling;return s($e,()=>x()?.resources.memory),Z})()})(),null),s(ae,(()=>{var Q=Re(()=>!!x()?.resources.gpu);return()=>Q()&&(()=>{var Z=dC(),ne=Z.firstChild,$e=ne.nextSibling;return s($e,()=>x()?.resources.gpu),Z})()})(),null),T}}),null),s(c,_(K,{get when(){return t()==="test"},get children(){var T=iC(),B=T.firstChild,N=B.firstChild,O=N.nextSibling,H=B.nextSibling;return O.$$input=A=>a(A.currentTarget.value),H.$$click=b,s(H,()=>i()?"Testing...":"Send Test Request"),s(T,_(K,{get when(){return m()},get children(){var A=sC(),z=A.firstChild;return z.firstChild,s(z,_(K,{get when(){return m()?.latency},get children(){var F=eC();return F.firstChild,s(F,()=>m()?.latency,null),F}}),null),s(A,_(K,{get when(){return m()?.success},get children(){var F=tC();return s(F,()=>JSON.stringify(m()?.output,null,2)),F}}),null),s(A,_(K,{get when(){return!m()?.success},get children(){var F=rC();return s(F,()=>m()?.error),F}}),null),A}}),null),J(()=>H.disabled=i()),J(()=>O.value=l()),T}}),null),s(c,_(K,{get when(){return t()==="logs"},get children(){var T=nC(),B=T.firstChild,N=B.firstChild,O=B.nextSibling,H=O.firstChild;return N.$$click=o,s(N,()=>p()?"Loading...":"Refresh Logs"),s(H,()=>g()||"No logs available"),J(()=>N.disabled=p()),T}}),null),s(c,_(K,{get when(){return t()==="metrics"},get children(){var T=lC();return T.firstChild,T}}),null),J(T=>{var B=`px-4 py-2 border-b-2 font-medium transition-colors ${t()==="overview"?"":"border-transparent"}`,N=t()==="overview"?{borderColor:"var(--accent-primary)",color:"var(--accent-primary)"}:{color:"var(--text-secondary)"},O=`px-4 py-2 border-b-2 font-medium transition-colors ${t()==="test"?"":"border-transparent"}`,H=t()==="test"?{borderColor:"var(--accent-primary)",color:"var(--accent-primary)"}:{color:"var(--text-secondary)"},A=`px-4 py-2 border-b-2 font-medium transition-colors ${t()==="logs"?"":"border-transparent"}`,z=t()==="logs"?{borderColor:"var(--accent-primary)",color:"var(--accent-primary)"}:{color:"var(--text-secondary)"},F=`px-4 py-2 border-b-2 font-medium transition-colors ${t()==="metrics"?"":"border-transparent"}`,j=t()==="metrics"?{borderColor:"var(--accent-primary)",color:"var(--accent-primary)"}:{color:"var(--text-secondary)"};return B!==T.e&&tt(L,T.e=B),T.t=_t(L,N,T.t),O!==T.a&&tt(P,T.a=O),T.o=_t(P,H,T.o),A!==T.i&&tt(I,T.i=A),T.n=_t(I,z,T.n),F!==T.s&&tt(D,T.s=F),T.h=_t(D,j,T.h),T},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),c})()};ut(["click","input"]);const hC=()=>{const[e,t]=W(""),[r,l]=W("");zt(()=>{const m=sessionStorage.getItem("kubegraf-selected-inference-service");if(m)try{const d=JSON.parse(m);t(d.name),l(d.namespace),sessionStorage.removeItem("kubegraf-selected-inference-service")}catch{}});const a=()=>e()!=="";return _(K,{get when(){return!a()},get fallback(){return _(uC,{get serviceName(){return e()},get serviceNamespace(){return r()}})},get children(){return _(ZS,{})}})},Vd={getStatus:async()=>je("/feast/status"),install:async e=>je("/feast/install",{method:"POST",body:JSON.stringify(e)})};var gC=w('<div class="grid grid-cols-3 gap-4 ml-4"><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Host</label><input type=text class="w-full px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Port</label><input type=number class="w-full px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Password (optional)</label><input type=password class="w-full px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)>'),vC=w('<div class="grid grid-cols-2 gap-4 ml-4"><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Project ID</label><input type=text class="w-full px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Dataset</label><input type=text class="w-full px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)>'),fC=w('<div class=ml-4><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Path</label><input type=text class="w-full px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)>'),pC=w('<div class="grid grid-cols-2 gap-4 ml-4"><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>PVC Name</label><input type=text class="w-full px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Mount Path</label><input type=text class="w-full px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)>'),mC=w('<div class="rounded-lg p-3 text-sm border"style="background:rgba(239, 68, 68, 0.1);borderColor:var(--error-color);color:var(--error-color)">'),bC=w('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"><div class="rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto m-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class=p-6><div class="flex items-center justify-between mb-6"><h2 class="text-2xl font-bold"style=color:var(--text-primary)>Install Feast Feature Store</h2><button class="text-2xl transition-colors hover:opacity-70"style=color:var(--text-secondary)></button></div><div class=space-y-6><div class="grid grid-cols-2 gap-4"><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Namespace</label><select class="w-full px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)><option value=feast>feast</option></select></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Version</label><input type=text class="w-full px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)></div></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Online Store</label><select class="w-full px-3 py-2 rounded-lg border mb-2"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)><option value=redis>Redis</option><option value=bigquery>BigQuery</option></select></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Offline Store</label><select class="w-full px-3 py-2 rounded-lg border mb-2"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)><option value=file>File</option><option value=pvc>PVC</option><option value=bigquery>BigQuery</option><option value=snowflake>Snowflake</option></select></div><div class="grid grid-cols-2 gap-4"><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>CPU</label><input type=text placeholder=1 class="w-full px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Memory</label><input type=text placeholder=2Gi class="w-full px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)></div></div><div class="flex gap-3 justify-end pt-4 border-t"style=borderColor:var(--border-color)><button class="px-6 py-2 rounded-lg border transition-colors hover:opacity-80"style=background:var(--bg-secondary);borderColor:var(--border-color);color:var(--text-secondary)>Cancel</button><button class="px-6 py-2 rounded-lg text-white transition-colors disabled:opacity-50"style=background:var(--accent-primary);color:#000>'),xC=w("<option>");const Wd=e=>{const[t,r]=W("feast"),[l,a]=W("0.38.0"),[m,d]=W("redis"),[i,n]=W("file"),[g,v]=W("1"),[p,y]=W("2Gi"),[x,M]=W(!1),[b,o]=W(""),[c,u]=W("redis"),[h,f]=W(6379),[$,C]=W(""),[k,S]=W(""),[L,P]=W(""),[I,D]=W("/data/feast"),[T,B]=W(""),[N,O]=W("/data/feast"),[H]=it(Fe.getNamespaces),A=async()=>{M(!0),o("");try{let z;m()==="redis"?z={type:"redis",redis:{host:c(),port:h(),password:$()||void 0}}:z={type:"bigquery",bigquery:{projectId:k(),dataset:L()}};let F;i()==="file"?F={type:"file",file:{path:I()}}:i()==="pvc"?F={type:"pvc",pvc:{pvcName:T(),mountPath:N()}}:i()==="bigquery"?F={type:"bigquery",bigquery:{projectId:k(),dataset:L()}}:F={type:"snowflake",snowflake:{account:"",database:"",schema:"",warehouse:"",username:""}};const j={namespace:t(),version:l(),onlineStore:z,offlineStore:F,cpu:g(),memory:p()},q=await Vd.install(j);q.success?(e.onSuccess?.(),e.onClose()):o(q.error||"Failed to install Feast")}catch(z){o(z.message||"Failed to install Feast")}finally{M(!1)}};return(()=>{var z=bC(),F=z.firstChild,j=F.firstChild,q=j.firstChild,U=q.firstChild,Y=U.nextSibling,V=q.nextSibling,X=V.firstChild,R=X.firstChild,G=R.firstChild,te=G.nextSibling;te.firstChild;var ae=R.nextSibling,Q=ae.firstChild,Z=Q.nextSibling,ne=X.nextSibling,$e=ne.firstChild,re=$e.nextSibling,de=ne.nextSibling,le=de.firstChild,xe=le.nextSibling,ye=de.nextSibling,ke=ye.firstChild,ge=ke.firstChild,Ce=ge.nextSibling,_e=ke.nextSibling,Me=_e.firstChild,ve=Me.nextSibling,be=ye.nextSibling,ce=be.firstChild,Ae=ce.nextSibling;return Rt(Y,"click",e.onClose,!0),te.addEventListener("change",se=>r(se.currentTarget.value)),s(te,_(Xe,{get each(){return H()||[]},children:se=>(()=>{var oe=xC();return oe.value=se,s(oe,se),oe})()}),null),Z.$$input=se=>a(se.currentTarget.value),re.addEventListener("change",se=>d(se.currentTarget.value)),s(ne,_(K,{get when(){return m()==="redis"},get children(){var se=gC(),oe=se.firstChild,ie=oe.firstChild,ue=ie.nextSibling,he=oe.nextSibling,Te=he.firstChild,ee=Te.nextSibling,Se=he.nextSibling,pe=Se.firstChild,De=pe.nextSibling;return ue.$$input=Ne=>u(Ne.currentTarget.value),ee.$$input=Ne=>f(parseInt(Ne.currentTarget.value)||6379),De.$$input=Ne=>C(Ne.currentTarget.value),J(()=>ue.value=c()),J(()=>ee.value=h()),J(()=>De.value=$()),se}}),null),s(ne,_(K,{get when(){return m()==="bigquery"},get children(){var se=vC(),oe=se.firstChild,ie=oe.firstChild,ue=ie.nextSibling,he=oe.nextSibling,Te=he.firstChild,ee=Te.nextSibling;return ue.$$input=Se=>S(Se.currentTarget.value),ee.$$input=Se=>P(Se.currentTarget.value),J(()=>ue.value=k()),J(()=>ee.value=L()),se}}),null),xe.addEventListener("change",se=>n(se.currentTarget.value)),s(de,_(K,{get when(){return i()==="file"},get children(){var se=fC(),oe=se.firstChild,ie=oe.nextSibling;return ie.$$input=ue=>D(ue.currentTarget.value),J(()=>ie.value=I()),se}}),null),s(de,_(K,{get when(){return i()==="pvc"},get children(){var se=pC(),oe=se.firstChild,ie=oe.firstChild,ue=ie.nextSibling,he=oe.nextSibling,Te=he.firstChild,ee=Te.nextSibling;return ue.$$input=Se=>B(Se.currentTarget.value),ee.$$input=Se=>O(Se.currentTarget.value),J(()=>ue.value=T()),J(()=>ee.value=N()),se}}),null),Ce.$$input=se=>v(se.currentTarget.value),ve.$$input=se=>y(se.currentTarget.value),s(V,_(K,{get when(){return b()},get children(){var se=mC();return s(se,b),se}}),be),Rt(ce,"click",e.onClose,!0),Ae.$$click=A,s(Ae,()=>x()?"Installing...":"Install Feast"),J(se=>{var oe=x(),ie=x();return oe!==se.e&&(ce.disabled=se.e=oe),ie!==se.t&&(Ae.disabled=se.t=ie),se},{e:void 0,t:void 0}),J(()=>te.value=t()),J(()=>Z.value=l()),J(()=>re.value=m()),J(()=>xe.value=i()),J(()=>Ce.value=g()),J(()=>ve.value=p()),z})()};ut(["click","input"]);var yC=w('<button class="px-4 py-2 rounded-lg text-white transition-colors"style=background:var(--accent-primary);color:#000>Install Feast'),_C=w('<div class="text-center py-8"style=color:var(--text-secondary)>Loading...'),$C=w('<div class="grid grid-cols-2 gap-4"><div class="card rounded-lg p-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class="text-sm mb-1"style=color:var(--text-secondary)>Status</div><div class="text-lg font-semibold text-green-500">Installed</div></div><div class="card rounded-lg p-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class="text-sm mb-1"style=color:var(--text-secondary)>Version</div><div class="text-lg font-semibold"style=color:var(--text-primary)></div></div><div class="card rounded-lg p-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class="text-sm mb-1"style=color:var(--text-secondary)>Namespace</div><div class="text-lg font-semibold"style=color:var(--text-primary)></div></div><div class="card rounded-lg p-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class="text-sm mb-1"style=color:var(--text-secondary)>Serving URL</div><div class="text-lg font-mono text-sm break-all"style=color:var(--text-primary)></div></div><div class="card rounded-lg p-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class="text-sm mb-1"style=color:var(--text-secondary)>Online Store</div><div class="text-lg font-semibold"style=color:var(--text-primary)></div></div><div class="card rounded-lg p-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class="text-sm mb-1"style=color:var(--text-secondary)>Offline Store</div><div class="text-lg font-semibold"style=color:var(--text-primary)>'),wC=w('<div class="card p-8 text-center border"style=background:var(--bg-card);borderColor:var(--border-color)><p class=mb-4 style=color:var(--text-secondary)>Feast is not installed</p><button class="px-4 py-2 rounded-lg text-white transition-colors"style=background:var(--accent-primary);color:#000>Install Feast'),SC=w('<div class="p-6 space-y-6"style=background:var(--bg-primary)><div class="flex items-center justify-between"><div><h2 class="text-2xl font-bold"style=color:var(--text-primary)>Feast Feature Store</h2><p class="text-sm mt-1"style=color:var(--text-secondary)>Store, manage, and serve features for machine learning');const CC=()=>{const[e,t]=W(!1),[r,l]=W(0),[a,{refetch:m}]=it(()=>r(),async()=>await Vd.getStatus()),d=()=>{l(i=>i+1),t(!1)};return(()=>{var i=SC(),n=i.firstChild,g=n.firstChild,v=g.firstChild;return v.nextSibling,s(n,_(K,{get when(){return!a()?.installed},get children(){var p=yC();return p.$$click=()=>t(!0),p}}),null),s(i,_(K,{get when(){return e()},get children(){return _(Wd,{onClose:()=>t(!1),onSuccess:d})}}),null),s(i,_(K,{get when(){return a.loading},get children(){return _C()}}),null),s(i,_(K,{get when(){return Re(()=>!a.loading)()&&a()},get children(){return[_(K,{get when(){return a().installed},get children(){var p=$C(),y=p.firstChild;y.firstChild;var x=y.nextSibling,M=x.firstChild,b=M.nextSibling,o=x.nextSibling,c=o.firstChild,u=c.nextSibling,h=o.nextSibling,f=h.firstChild,$=f.nextSibling,C=h.nextSibling,k=C.firstChild,S=k.nextSibling,L=C.nextSibling,P=L.firstChild,I=P.nextSibling;return s(b,()=>a().version||"Unknown"),s(u,()=>a().namespace||"N/A"),s($,()=>a().servingURL||"N/A"),s(S,()=>a().onlineStore||"N/A"),s(I,()=>a().offlineStore||"N/A"),p}}),_(K,{get when(){return!a().installed},get children(){var p=wC(),y=p.firstChild,x=y.nextSibling;return x.$$click=()=>t(!0),p}})]}}),null),i})()};ut(["click"]);const kC=()=>_(CC,{}),Ul={getStatus:async()=>je("/gpu/status"),getNodes:async()=>je("/gpu/nodes"),getMetrics:async()=>je("/gpu/metrics"),install:async e=>je("/gpu/install",{method:"POST",body:JSON.stringify(e)})};var MC=w("<div class=space-y-6>"),AC=w('<div class=mt-6><div class="text-sm font-medium mb-3"style=color:var(--text-secondary)>Running Processes</div><div class=space-y-2>'),LC=w('<div class="card rounded-lg p-6 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class="flex items-center justify-between mb-4"><div><h3 class="text-lg font-semibold"style=color:var(--text-primary)> - GPU </h3><p class=text-sm style=color:var(--text-secondary)>Last updated: </p></div></div><div class="grid grid-cols-2 md:grid-cols-4 gap-4"><div><div class="text-sm mb-2"style=color:var(--text-secondary)>Utilization</div><div class="text-2xl font-bold"style=color:var(--accent-primary)>%</div><div class="w-full h-2 rounded-full mt-2"style=background:var(--bg-secondary)><div class="h-2 rounded-full transition-all"style=background:var(--accent-primary)></div></div></div><div><div class="text-sm mb-2"style=color:var(--text-secondary)>Memory</div><div class="text-2xl font-bold"style=color:var(--text-primary)></div><div class="text-sm mt-1"style=color:var(--text-muted)>/ </div><div class="w-full h-2 rounded-full mt-2"style=background:var(--bg-secondary)><div class="h-2 rounded-full transition-all"></div></div></div><div><div class="text-sm mb-2"style=color:var(--text-secondary)>Temperature</div><div class="text-2xl font-bold">C</div></div><div><div class="text-sm mb-2"style=color:var(--text-secondary)>Power Draw</div><div class="text-2xl font-bold"style=color:var(--text-primary)>W'),EC=w('<div class="flex items-center justify-between p-2 rounded border"style=background:var(--bg-secondary);borderColor:var(--border-color)><div><div class=font-medium style=color:var(--text-primary)></div><div class=text-xs style=color:var(--text-muted)>PID: </div></div><div class=text-right><div class="text-sm font-medium"style=color:var(--text-primary)></div><div class=text-xs style=color:var(--text-muted)>% GPU');const TC=e=>{const t=r=>{if(r===0)return"0 B";const l=1024,a=["B","KB","MB","GB"],m=Math.floor(Math.log(r)/Math.log(l));return Math.round(r/Math.pow(l,m)*100)/100+" "+a[m]};return(()=>{var r=MC();return s(r,_(Xe,{get each(){return e.metrics},children:l=>(()=>{var a=LC(),m=a.firstChild,d=m.firstChild,i=d.firstChild,n=i.firstChild,g=i.nextSibling;g.firstChild;var v=m.nextSibling,p=v.firstChild,y=p.firstChild,x=y.nextSibling,M=x.firstChild,b=x.nextSibling,o=b.firstChild,c=p.nextSibling,u=c.firstChild,h=u.nextSibling,f=h.nextSibling;f.firstChild;var $=f.nextSibling,C=$.firstChild,k=c.nextSibling,S=k.firstChild,L=S.nextSibling,P=L.firstChild,I=k.nextSibling,D=I.firstChild,T=D.nextSibling,B=T.firstChild;return s(i,()=>l.nodeName,n),s(i,()=>l.gpuId,null),s(g,()=>new Date(l.timestamp).toLocaleString(),null),s(x,()=>l.utilization.toFixed(1),M),s(h,()=>t(l.memoryUsed)),s(f,()=>t(l.memoryTotal),null),s(L,()=>l.temperature.toFixed(1),P),s(T,()=>l.powerDraw.toFixed(1),B),s(a,_(K,{get when(){return Re(()=>!!l.processes)()&&l.processes.length>0},get children(){var N=AC(),O=N.firstChild,H=O.nextSibling;return s(H,_(Xe,{get each(){return l.processes},children:A=>(()=>{var z=EC(),F=z.firstChild,j=F.firstChild,q=j.nextSibling;q.firstChild;var U=F.nextSibling,Y=U.firstChild,V=Y.nextSibling,X=V.firstChild;return s(j,()=>A.name),s(q,()=>A.pid,null),s(Y,()=>t(A.memory)),s(V,()=>A.utilization.toFixed(1),X),z})()})),N}}),null),J(N=>{var O=`${Math.min(l.utilization,100)}%`,H=l.memoryUsed/l.memoryTotal>.8?"var(--error-color)":"var(--accent-primary)",A=`${Math.min(l.memoryUsed/l.memoryTotal*100,100)}%`,z=l.temperature>80?"var(--error-color)":l.temperature>60?"#f59e0b":"var(--text-primary)";return O!==N.e&&E(o,"width",N.e=O),H!==N.t&&E(C,"background",N.t=H),A!==N.a&&E(C,"width",N.a=A),z!==N.o&&E(L,"color",N.o=z),N},{e:void 0,t:void 0,a:void 0,o:void 0}),a})()})),r})()};var DC=w('<div class="rounded-lg p-3 text-sm border"style="background:rgba(239, 68, 68, 0.1);borderColor:var(--error-color);color:var(--error-color)">'),RC=w('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"><div class="rounded-lg shadow-xl max-w-2xl w-full m-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class=p-6><div class="flex items-center justify-between mb-6"><h2 class="text-2xl font-bold"style=color:var(--text-primary)>Install DCGM Exporter</h2><button class="text-2xl transition-colors hover:opacity-70"style=color:var(--text-secondary)></button></div><div class=space-y-6><div class="rounded-lg p-4 border"style="background:rgba(6, 182, 212, 0.1);borderColor:var(--accent-primary)"><p class=text-sm style=color:var(--text-primary)>DCGM (Data Center GPU Manager) Exporter provides GPU metrics including utilization, memory usage, temperature, and power consumption.</p></div><div class="grid grid-cols-2 gap-4"><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Namespace</label><select class="w-full px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)><option value=gpu-operator>gpu-operator</option></select></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Version</label><input type=text placeholder=latest class="w-full px-3 py-2 rounded-lg border"style=background:var(--bg-secondary);color:var(--text-primary);borderColor:var(--border-color)></div></div><div class="flex gap-3 justify-end pt-4 border-t"style=borderColor:var(--border-color)><button class="px-6 py-2 rounded-lg border transition-colors hover:opacity-80"style=background:var(--bg-secondary);borderColor:var(--border-color);color:var(--text-secondary)>Cancel</button><button class="px-6 py-2 rounded-lg text-white transition-colors disabled:opacity-50"style=background:var(--accent-primary);color:#000>'),PC=w("<option>");const IC=e=>{const[t,r]=W("gpu-operator"),[l,a]=W("latest"),[m,d]=W(!1),[i,n]=W(""),[g]=it(Fe.getNamespaces),v=async()=>{d(!0),n("");try{const p={namespace:t(),version:l()||void 0},y=await Ul.install(p);y.success?(e.onSuccess?.(),e.onClose()):n(y.error||"Failed to install DCGM exporter")}catch(p){n(p.message||"Failed to install DCGM exporter")}finally{d(!1)}};return(()=>{var p=RC(),y=p.firstChild,x=y.firstChild,M=x.firstChild,b=M.firstChild,o=b.nextSibling,c=M.nextSibling,u=c.firstChild;u.firstChild;var h=u.nextSibling,f=h.firstChild,$=f.firstChild,C=$.nextSibling;C.firstChild;var k=f.nextSibling,S=k.firstChild,L=S.nextSibling,P=h.nextSibling,I=P.firstChild,D=I.nextSibling;return Rt(o,"click",e.onClose,!0),C.addEventListener("change",T=>r(T.currentTarget.value)),s(C,_(Xe,{get each(){return g()||[]},children:T=>(()=>{var B=PC();return B.value=T,s(B,T),B})()}),null),L.$$input=T=>a(T.currentTarget.value),s(c,_(K,{get when(){return i()},get children(){var T=DC();return s(T,i),T}}),P),Rt(I,"click",e.onClose,!0),D.$$click=v,s(D,()=>m()?"Installing...":"Install DCGM Exporter"),J(T=>{var B=m(),N=m();return B!==T.e&&(I.disabled=T.e=B),N!==T.t&&(D.disabled=T.t=N),T},{e:void 0,t:void 0}),J(()=>C.value=t()),J(()=>L.value=l()),p})()};ut(["click","input"]);var BC=w('<button class="px-4 py-2 rounded-lg text-white transition-colors"style=background:var(--accent-primary);color:#000>Install DCGM Exporter'),NC=w('<div class="text-center py-8"style=color:var(--text-secondary)>Loading...'),OC=w('<div class=mb-6><h3 class="text-lg font-semibold mb-4"style=color:var(--text-primary)>GPU Nodes Detected</h3><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">'),zC=w('<p class="text-xs mb-4 p-2 rounded"style="background:rgba(6, 182, 212, 0.1);color:var(--accent-primary)"> <!> GPU node(s) detected automatically'),FC=w('<div class="card p-8 text-center border"style=background:var(--bg-card);borderColor:var(--border-color)><p class=mb-4 style=color:var(--text-secondary)></p><p class="text-sm mb-6"style=color:var(--text-muted)>DCGM Exporter provides detailed GPU metrics: utilization, memory usage, temperature, and power consumption.</p><button class="px-4 py-2 rounded-lg text-white transition-colors"style=background:var(--accent-primary);color:#000>Install DCGM Exporter'),HC=w('<div class="grid grid-cols-4 gap-4 mb-6"><div class="card rounded-lg p-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class="text-sm mb-1"style=color:var(--text-secondary)>Status</div><div class="text-lg font-semibold text-green-500">Active</div></div><div class="card rounded-lg p-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class="text-sm mb-1"style=color:var(--text-secondary)>Namespace</div><div class="text-lg font-semibold"style=color:var(--text-primary)></div></div><div class="card rounded-lg p-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class="text-sm mb-1"style=color:var(--text-secondary)>Service URL</div><div class="text-lg font-mono text-xs break-all"style=color:var(--text-primary)></div></div><div class="card rounded-lg p-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class="text-sm mb-1"style=color:var(--text-secondary)>GPUs Monitored</div><div class="text-lg font-semibold"style=color:var(--text-primary)>'),jC=w('<div class="text-center py-8"style=color:var(--text-secondary)>Loading GPU metrics...'),UC=w('<div class="card p-8 text-center border"style=background:var(--bg-card);borderColor:var(--border-color)><p style=color:var(--text-secondary)>No GPU metrics available</p><p class="text-sm mt-2"style=color:var(--text-muted)>Make sure GPU nodes are available and DCGM exporter is running'),VC=w('<div class="p-6 space-y-6"style=background:var(--bg-primary)><div class="flex items-center justify-between"><div><h2 class="text-2xl font-bold"style=color:var(--text-primary)>GPU Dashboard</h2><p class="text-sm mt-1"style=color:var(--text-secondary)>Monitor GPU utilization, memory, temperature, and power consumption</p></div><div class="flex gap-2"><label class="flex items-center gap-2"><input type=checkbox class="w-4 h-4"><span class=text-sm style=color:var(--text-secondary)>Auto-refresh</span></label><button class="px-4 py-2 rounded-lg border transition-colors hover:opacity-80"style=background:var(--bg-secondary);borderColor:var(--border-color);color:var(--text-primary)>Refresh'),WC=w('<div class="card rounded-lg p-4 border"style=background:var(--bg-card);borderColor:var(--border-color)><div class="font-medium mb-2"style=color:var(--text-primary)></div><div class="text-sm space-y-1"><div style=color:var(--text-secondary)><span class=font-medium>GPUs:</span> '),qC=w("<div style=color:var(--text-secondary)><span class=font-medium>Type:</span> ");const KC=()=>{const[e,t]=W(!1),[r,l]=W(0),[a,m]=W(!0);let d;const[i,{refetch:n}]=it(()=>r(),async()=>await Ul.getStatus()),[g,{refetch:v}]=it(()=>[r(),a()],async()=>i()?.dcgmInstalled?await Ul.getMetrics():{metrics:[]});zt(()=>(d=setInterval(()=>{a()&&v()},5e3),()=>{d&&clearInterval(d)}));const p=()=>{l(y=>y+1),t(!1)};return(()=>{var y=VC(),x=y.firstChild,M=x.firstChild,b=M.firstChild;b.nextSibling;var o=M.nextSibling,c=o.firstChild,u=c.firstChild;u.nextSibling;var h=c.nextSibling;return u.addEventListener("change",f=>m(f.currentTarget.checked)),h.$$click=()=>v(),s(o,_(K,{get when(){return!i()?.dcgmInstalled},get children(){var f=BC();return f.$$click=()=>t(!0),f}}),null),s(y,_(K,{get when(){return e()},get children(){return _(IC,{onClose:()=>t(!1),onSuccess:p})}}),null),s(y,_(K,{get when(){return i.loading},get children(){return NC()}}),null),s(y,_(K,{get when(){return Re(()=>!i.loading)()&&i()},get children(){return[_(K,{get when(){return Re(()=>!!(i().gpuNodesFound&&i().gpuNodes))()&&i().gpuNodes.length>0},get children(){var f=OC(),$=f.firstChild,C=$.nextSibling;return s(C,_(Xe,{get each(){return i().gpuNodes},children:k=>(()=>{var S=WC(),L=S.firstChild,P=L.nextSibling,I=P.firstChild,D=I.firstChild;return D.nextSibling,s(L,()=>k.nodeName),s(I,()=>k.totalGPUs,null),s(P,(()=>{var T=Re(()=>!!k.gpuType);return()=>T()&&(()=>{var B=qC(),N=B.firstChild;return N.nextSibling,s(B,()=>k.gpuType,null),B})()})(),null),S})()})),f}}),_(K,{get when(){return!i().dcgmInstalled},get children(){var f=FC(),$=f.firstChild,C=$.nextSibling,k=C.nextSibling;return s($,()=>i().gpuNodesFound?"DCGM Exporter is not installed. Install it to view detailed GPU metrics.":"No GPU nodes detected. DCGM Exporter can be installed to monitor GPU metrics when available."),s(f,_(K,{get when(){return i().gpuNodesFound},get children(){var S=zC(),L=S.firstChild,P=L.nextSibling;return P.nextSibling,s(S,()=>i().gpuNodes.length,P),S}}),k),k.$$click=()=>t(!0),f}}),_(K,{get when(){return i().dcgmInstalled},get children(){return[(()=>{var f=HC(),$=f.firstChild;$.firstChild;var C=$.nextSibling,k=C.firstChild,S=k.nextSibling,L=C.nextSibling,P=L.firstChild,I=P.nextSibling,D=L.nextSibling,T=D.firstChild,B=T.nextSibling;return s(S,()=>i().namespace||"N/A"),s(I,()=>i().serviceURL||"N/A"),s(B,()=>g()?.metrics.length||0),f})(),_(K,{get when(){return g.loading},get children(){return jC()}}),_(K,{get when(){return Re(()=>!!(!g.loading&&g()?.metrics))()&&g().metrics.length>0},get children(){return _(TC,{get metrics(){return g().metrics}})}}),_(K,{get when(){return Re(()=>!g.loading)()&&(!g()?.metrics||g().metrics.length===0)},get children(){var f=UC(),$=f.firstChild;return $.nextSibling,f}})]}})]}}),null),J(()=>u.checked=a()),y})()};ut(["click"]);const YC=()=>_(KC,{});var GC=w('<div class="flex items-center justify-center min-h-screen"style=background:var(--bg-primary)><div class="max-w-2xl mx-auto p-8 text-center"><div class=mb-6><h1 class="text-4xl font-bold mb-4"style=color:var(--text-primary)></h1><p class="text-lg mb-6"style=color:var(--text-secondary)></p></div><div class="mt-8 pt-8 border-t"style=border-color:var(--border-color)><p class=text-sm style=color:var(--text-muted)>This feature is under active development. Check back soon for updates!'),JC=w('<div class="inline-flex items-center justify-center w-20 h-20 rounded-full mb-4"style=background:var(--bg-secondary)><svg class="w-10 h-10"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2>'),XC=w('<div class="inline-flex items-center gap-2 px-4 py-2 rounded-full mb-8"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span class="text-sm font-medium"style=color:var(--text-primary)>Coming Soon'),ZC=w('<div class="text-left space-y-3"><h2 class="text-xl font-semibold mb-4"style=color:var(--text-primary)>Planned Features:</h2><ul class=space-y-2>'),QC=w('<li class="flex items-start gap-3"><svg class="w-5 h-5 mt-0.5 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span style=color:var(--text-secondary)>');const ho=e=>(()=>{var t=GC(),r=t.firstChild,l=r.firstChild,a=l.firstChild,m=a.nextSibling,d=l.nextSibling;return d.firstChild,s(l,(()=>{var i=Re(()=>!!e.icon);return()=>i()&&(()=>{var n=JC(),g=n.firstChild,v=g.firstChild;return J(()=>dt(v,"d",e.icon)),n})()})(),a),s(a,()=>e.title),s(m,()=>e.description),s(r,(()=>{var i=Re(()=>!!e.comingSoon);return()=>i()&&(()=>{var n=XC(),g=n.firstChild;return g.nextSibling,n})()})(),d),s(r,(()=>{var i=Re(()=>!!(e.features&&e.features.length>0));return()=>i()&&(()=>{var n=ZC(),g=n.firstChild,v=g.nextSibling;return s(v,()=>e.features.map(p=>(()=>{var y=QC(),x=y.firstChild,M=x.nextSibling;return s(M,p),y})())),n})()})(),d),t})(),e3=()=>_(ho,{title:"ML Workflows",description:"Manage and orchestrate machine learning workflows, pipelines, and automated training jobs across your Kubernetes cluster.",icon:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01",comingSoon:!0,features:["Workflow orchestration and scheduling","Pipeline definition and management","Automated training job workflows","DAG (Directed Acyclic Graph) visualization","Workflow execution monitoring","Integration with MLflow and Feast","Conditional branching and retries","Workflow templates library"]});var t3=w("<option disabled>Loading pods..."),r3=w("<option disabled>Loading containers..."),s3=w("<option disabled>No containers found"),i3=w('<div class="p-4 bg-red-500/10 border-l-4 border-red-500"><p style=color:var(--error-color)>'),n3=w('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading logs...'),l3=w('<div class="p-8 text-center"style=color:var(--text-muted)><svg class="w-12 h-12 mx-auto mb-4 opacity-50"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg><p>Select a pod and container, then click "Fetch Logs"'),o3=w('<div id=logs-container class="p-4 font-mono text-sm overflow-auto"style="background:#0d1117;color:#c9d1d9;max-height:calc(100vh - 400px);white-space:pre-wrap;word-break:break-word">'),a3=w('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Logs</h1><p style=color:var(--text-secondary)>View and stream pod container logs</p></div><div class="flex items-center gap-2"><button class="px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"style=background:var(--accent-primary);color:white></button><button class="px-4 py-2 rounded-lg text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed"style=background:var(--bg-tertiary);color:var(--text-primary)>Download</button></div></div><div class="card p-4"><div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Namespace</label><select class="w-full px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option></option></select></div><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Pod</label><select class="w-full px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value>Select a pod</option></select></div><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Container</label><select class="w-full px-3 py-2 rounded-lg text-sm disabled:opacity-50"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value>Select a container</option></select></div><div><label class="block text-sm mb-2"style=color:var(--text-secondary)>Tail Lines</label><input type=number min=10 max=10000 class="w-full px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div></div><div class="flex items-center gap-4 mt-4"><label class="flex items-center gap-2 cursor-pointer"><input type=checkbox class="w-4 h-4 rounded"><span class=text-sm style=color:var(--text-secondary)>Follow logs (stream)</span></label></div></div><div class="card p-4"><input type=text placeholder="Search logs..."class="w-full px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div class="card overflow-hidden">'),c3=w("<option> (<!>)"),d3=w("<option>");const u3=()=>{console.log("[Logs] Component rendering");const[e,t]=W(""),[r,l]=W(""),[a,m]=W(""),[d,i]=W(100),[n,g]=W(!1),[v,p]=W(""),[y,x]=W(""),[M,b]=W(!1),[o,c]=W(null);let u=null;const[h]=it(()=>Xt(),async I=>{try{console.log("[Logs] Fetching pods for namespace:",I);const D=I==="_all"?void 0:I,T=await Fe.getPods(D);return console.log("[Logs] Fetched pods:",T?.length||0),Array.isArray(T)?T:[]}catch(D){return console.error("[Logs] Failed to fetch pods:",D),[]}}),[f]=it(()=>{const I=e(),D=a()||Xt();return I?{pod:I,namespace:(D==="_all"?void 0:D)||"default"}:null},async I=>{if(!I)return null;try{console.log("[Logs] Fetching pod details:",I);const D=await Fe.getPodDetails(I.pod,I.namespace);return console.log("[Logs] Pod details:",D),D}catch(D){return console.error("[Logs] Failed to fetch pod details:",D),null}}),$=et(()=>{try{const I=f();if(!I||!I.containers)return[];if(!Array.isArray(I.containers))return console.warn("[Logs] podDetails.containers is not an array:",typeof I.containers,I.containers),[];const D=I.containers.map(T=>T.name||T).filter(Boolean);return console.log("[Logs] Containers:",D),D}catch(I){return console.error("[Logs] Error in containers memo:",I),[]}}),C=()=>{u&&(u.close(),u=null)},k=async()=>{const I=e(),D=r(),T=a()||Xt();if(!I||!D){c("Please select a pod and container");return}C(),b(!0),c(null);const O=`/api/pod/logs?name=${I}&namespace=${(T==="_all"?void 0:T)||"default"}&container=${D}&tail=${d()}${n()?"&follow=true":""}`;if(n())x(""),u=new EventSource(O),u.onmessage=H=>{x(A=>A+H.data+`
`),b(!1),setTimeout(()=>{const A=document.getElementById("logs-container");A&&(A.scrollTop=A.scrollHeight)},50)},u.onerror=()=>{c("Stream connection lost"),b(!1),C()},u.onopen=()=>{b(!1)};else try{const H=await fetch(O);if(!H.ok){const z=await H.text();throw new Error(z||`HTTP ${H.status}`)}const A=await H.json();x(A.logs||"No logs available")}catch(H){c(H.message||"Failed to fetch logs"),x("")}finally{b(!1)}},S=et(()=>{const I=y(),D=v().toLowerCase();return D?I.split(`
`).filter(T=>T.toLowerCase().includes(D)).join(`
`):I}),L=()=>{const I=new Blob([y()],{type:"text/plain"}),D=URL.createObjectURL(I),T=document.createElement("a");T.href=D,T.download=`${e()}-${r()||"logs"}.txt`,T.click(),URL.revokeObjectURL(D)};et(()=>{const I=$();I.length>0&&!r()&&l(I[0])}),zt(()=>{console.log("[Logs] Component mounted successfully")}),wr(()=>{C()});const P=et(()=>{try{if(h.loading)return[];if(h.error)return console.error("[Logs] pods resource error:",h.error),[];const I=h();return I==null?[]:Array.isArray(I)?I:(console.warn("[Logs] pods() returned non-array:",typeof I,I),[])}catch(I){return console.error("[Logs] Error in podsList memo:",I),[]}});return console.log("[Logs] Component rendering - RETURNING JSX"),(()=>{var I=a3(),D=I.firstChild,T=D.firstChild,B=T.firstChild;B.nextSibling;var N=T.nextSibling,O=N.firstChild,H=O.nextSibling,A=D.nextSibling,z=A.firstChild,F=z.firstChild,j=F.firstChild,q=j.nextSibling,U=q.firstChild,Y=F.nextSibling,V=Y.firstChild,X=V.nextSibling;X.firstChild;var R=Y.nextSibling,G=R.firstChild,te=G.nextSibling;te.firstChild;var ae=R.nextSibling,Q=ae.firstChild,Z=Q.nextSibling,ne=z.nextSibling,$e=ne.firstChild,re=$e.firstChild;re.nextSibling;var de=A.nextSibling,le=de.firstChild,xe=de.nextSibling;return O.$$click=k,s(O,()=>M()?"Loading...":"Fetch Logs"),H.$$click=L,q.addEventListener("change",ye=>{m(ye.currentTarget.value),t(""),l("")}),s(U,(()=>{var ye=Re(()=>Xt()==="_all");return()=>ye()?"All Namespaces":Xt()})()),X.addEventListener("change",ye=>{t(ye.currentTarget.value),l("")}),s(X,_(K,{get when(){return h.loading},get children(){return t3()}}),null),s(X,_(K,{get when(){return Re(()=>!!(!h.loading&&Array.isArray(P())))()&&P().length>0},get children(){return _(Xe,{get each(){return P()},children:ye=>(()=>{var ke=c3(),ge=ke.firstChild,Ce=ge.nextSibling;return Ce.nextSibling,s(ke,()=>ye.name,ge),s(ke,()=>ye.namespace||"default",Ce),J(()=>ke.value=ye.name),ke})()})}}),null),te.addEventListener("change",ye=>l(ye.currentTarget.value)),s(te,_(K,{get when(){return f.loading},get children(){return r3()}}),null),s(te,_(K,{get when(){return Re(()=>!f.loading)()&&$().length>0},get children(){return _(Xe,{get each(){return $()},children:ye=>(()=>{var ke=d3();return ke.value=ye,s(ke,ye),ke})()})}}),null),s(te,_(K,{get when(){return Re(()=>!!(!f.loading&&e()))()&&$().length===0},get children(){return s3()}}),null),Z.addEventListener("change",ye=>i(parseInt(ye.currentTarget.value)||100)),re.addEventListener("change",ye=>{g(ye.currentTarget.checked),ye.currentTarget.checked&&e()&&r()?k():C()}),le.$$input=ye=>p(ye.currentTarget.value),s(xe,_(K,{get when(){return o()},get children(){var ye=i3(),ke=ye.firstChild;return s(ke,o),ye}}),null),s(xe,_(K,{get when(){return Re(()=>!!M())()&&!y()},get children(){var ye=n3(),ke=ye.firstChild;return ke.nextSibling,ye}}),null),s(xe,_(K,{get when(){return Re(()=>!y()&&!M())()&&!o()},get children(){return l3()}}),null),s(xe,_(K,{get when(){return y()},get children(){var ye=o3();return s(ye,()=>S()||"No logs available"),ye}}),null),J(ye=>{var ke=!e()||!r()||M(),ge=!y(),Ce=!e(),_e=!e()||!r();return ke!==ye.e&&(O.disabled=ye.e=ke),ge!==ye.t&&(H.disabled=ye.t=ge),Ce!==ye.a&&(te.disabled=ye.a=Ce),_e!==ye.o&&(re.disabled=ye.o=_e),ye},{e:void 0,t:void 0,a:void 0,o:void 0}),J(()=>U.value=Xt()),J(()=>q.value=a()||Xt()),J(()=>X.value=e()),J(()=>te.value=r()),J(()=>Z.value=d()),J(()=>re.checked=n()),J(()=>le.value=v()),I})()};ut(["click","input"]);var uc=w('<button class="px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"style=background:var(--accent-primary);color:white>'),h3=w("<span class=text-sm style=color:var(--text-muted)>Detection time: "),g3=w('<div class="card p-4"><div class="flex items-center gap-4"><label class="text-sm font-medium"style=color:var(--text-secondary)>Filter by Severity:</label><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value>All Severities</option><option value=critical>Critical</option><option value=warning>Warning</option><option value=info>Info'),v3=w('<div class="card p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Detecting anomalies...'),f3=w("<div class=space-y-4>"),p3=w('<div class="flex items-center justify-center gap-2 mt-4"><button class="px-3 py-1 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed"style=background:var(--bg-secondary);color:var(--text-primary)>Previous</button><span class=text-sm style=color:var(--text-secondary)>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed"style=background:var(--bg-secondary);color:var(--text-primary)>Next'),m3=w('<div class="card p-8 text-center"><svg class="w-16 h-16 mx-auto mb-4 opacity-50"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><p class="text-lg font-medium mb-2"style=color:var(--text-primary)>No Anomalies Detected</p><p style=color:var(--text-secondary)>Your cluster appears to be healthy!'),b3=w('<div class="card p-4 bg-red-500/10 border-l-4 border-red-500"><p style=color:var(--error-color)>Error: '),x3=w('<div class="card p-8 text-center"><div class="spinner mx-auto mb-2"></div><div class="flex flex-col items-center gap-2"><span style=color:var(--text-muted)>Loading ML recommendations...</span><p class=text-sm style=color:var(--text-muted)>This may take a few seconds'),y3=w('<div class="card p-4 bg-red-500/10 border-l-4 border-red-500"><p style=color:var(--error-color)>Error: </p><p class="text-sm mt-2"style=color:var(--text-muted)>Tip: Run anomaly detection first to collect metrics, then try again.'),_3=w('<div class=space-y-4><div class="card p-4"><div class=text-sm style=color:var(--text-secondary)>Total Recommendations: <strong style=color:var(--text-primary)>'),$3=w('<div class="space-y-6 p-6"style=minHeight:100vh;background:var(--bg-primary)><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-3xl font-bold"style=color:var(--text-primary)>AI/ML Insights</h1><p style=color:var(--text-secondary)>Anomaly detection and ML-powered recommendations</p></div><div class="flex items-center gap-2"></div></div><div class="flex gap-2 border-b"style=border-color:var(--border-color)><button>Anomaly Detection</button><button>ML Recommendations'),w3=w('<div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div class="card p-4"><div class=text-sm style=color:var(--text-secondary)>Total Anomalies</div><div class="text-2xl font-bold"style=color:var(--text-primary)></div></div><div class="card p-4"><div class=text-sm style=color:var(--text-secondary)>Critical</div><div class="text-2xl font-bold"style=color:#ef4444></div></div><div class="card p-4"><div class=text-sm style=color:var(--text-secondary)>Warning</div><div class="text-2xl font-bold"style=color:#f59e0b></div></div><div class="card p-4"><div class=text-sm style=color:var(--text-secondary)>Info</div><div class="text-2xl font-bold"style=color:#3b82f6>'),S3=w('<button class="px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap"style=background:var(--accent-primary);color:white>'),C3=w('<div class="card p-4 border-l-4"><div class="flex items-start justify-between gap-4"><div class=flex-1><div class="flex items-center gap-2 mb-2"><span class=text-xl></span><span class="px-2 py-1 rounded text-xs font-medium uppercase"></span><span class=text-sm style=color:var(--text-secondary)></span><span class="text-sm font-mono"style=color:var(--text-muted)>Score: <!>%</span></div><h3 class="font-semibold mb-1"style=color:var(--text-primary)></h3><p class="text-sm mb-2"style=color:var(--text-secondary)><strong>Namespace:</strong> <!> | <strong>Pod:</strong> </p><p class="text-sm mb-2"style=color:var(--text-secondary)><strong>Recommendation:</strong> </p><div class=text-xs style=color:var(--text-muted)>Detected: '),k3=w('<div class="card p-8 text-center"><svg class="w-16 h-16 mx-auto mb-4 opacity-50"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg><p class="text-lg font-medium mb-4"style=color:var(--text-primary)>No ML Recommendations Yet</p><div class="max-w-md mx-auto mb-4"><div class="flex items-center justify-between mb-2"><span class="text-sm font-medium"style=color:var(--text-secondary)>Metrics Collected</span><span class="text-sm font-medium"style=color:var(--text-primary)> / </span></div><div class="w-full rounded-full h-3 overflow-hidden"style=background:var(--bg-tertiary)><div class="h-full rounded-full transition-all duration-300"></div></div><p class="text-xs mt-2"style=color:var(--text-muted)></p></div><div class="text-sm space-y-2 max-w-md mx-auto"style=color:var(--text-secondary)><p>Recommendations will appear as the system learns from your cluster metrics.</p><p class=text-xs style=color:var(--text-muted)> <strong>Tip:</strong> Run anomaly detection multiple times to collect more metrics. Each scan adds new samples to the history.'),M3=w('<span class="px-2 py-1 rounded text-xs"style=background:#22c55e20;color:#22c55e>Auto-Apply Available'),A3=w('<div class="mt-2 text-sm"style=color:#22c55e> Estimated Savings: '),L3=w('<button class="px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap"style=background:var(--accent-primary);color:white>Auto-Remediate'),E3=w('<div class="card p-4 border-l-4"><div class="flex items-start justify-between gap-4"><div class=flex-1><div class="flex items-center gap-2 mb-2 flex-wrap"><span class="px-2 py-1 rounded text-xs font-medium uppercase"></span><span class="px-2 py-1 rounded text-xs font-medium"></span><span class=text-sm style=color:var(--text-muted)>Confidence: <!>%</span></div><h3 class="font-semibold mb-1"style=color:var(--text-primary)></h3><p class="text-sm mb-2"style=color:var(--text-secondary)><strong>Resource:</strong> <!> | <strong>Namespace:</strong> </p><p class="text-sm mb-2"style=color:var(--text-secondary)></p><div class="flex items-center gap-4 text-sm mb-2"><div><span style=color:var(--text-muted)>Current: </span><strong style=color:var(--text-primary)></strong></div><div></div><div><span style=color:var(--text-muted)>Recommended: </span><strong style=color:var(--accent-primary)></strong></div></div><div class="mt-2 flex items-center gap-4 text-xs"style=color:var(--text-muted)><span>Impact: </span><span>Effort: </span></div><div class="text-xs mt-2"style=color:var(--text-muted)>Generated: </div></div><div class="flex flex-col gap-2"><button class="px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)">View Resource');const T3=()=>{const[e,t]=W("anomalies"),[r,l]=W(""),[a,m]=W(0),[d,i]=W(null),[n,{refetch:g}]=it(()=>{const $=r(),C=a(),k=nr(),S=yr();return{severity:$,key:C,context:k,refresh:S}},async({severity:$})=>{try{const C=await Fe.detectAnomalies($||void 0);return console.log("[Anomalies] Fetched anomalies:",C?.anomalies?.length||0),{anomalies:C?.anomalies||[],stats:C?.stats||{total:0,critical:0,warning:0,info:0},duration:C?.duration||"0s"}}catch(C){return console.error("[Anomalies] Failed to fetch anomalies:",C),{anomalies:[],stats:{total:0,critical:0,warning:0,info:0},duration:"0s"}}}),[v,p]=W(1),y=10,x=et(()=>{const $=n()?.anomalies||[],C=(v()-1)*y,k=C+y;return{list:$.slice(C,k),total:$.length,pages:Math.ceil($.length/y)}}),M=async $=>{if(!$.autoRemediate){alert("Auto-remediation is not available for this anomaly type.");return}if(confirm(`Are you sure you want to auto-remediate this anomaly?

${$.message}

Recommendation: ${$.recommendation}`)){i($.id);try{const C=await Fe.remediateAnomaly($.id);C.success?(alert(C.message||"Anomaly remediated successfully!"),m(k=>k+1)):alert("Failed to remediate anomaly.")}catch(C){alert(`Failed to remediate: ${C.message}`)}finally{i(null)}}},b=async $=>{if(!$.autoApply){alert("Auto-remediation is not available for this recommendation.");return}if(confirm(`Are you sure you want to apply this recommendation?

${$.title}

${$.description}

Recommended: ${$.recommendedValue}`))try{const C=await Fe.applyRecommendation($.id);C?.success?(alert("Recommendation applied successfully!"),f()):alert(C?.error||"Failed to apply recommendation.")}catch(C){alert(`Failed to apply: ${C.message}`)}},o=$=>{const[C,k]=$.resource.split("/"),S=$.namespace;qu({kind:C,name:k,namespace:S}),C==="Deployment"?Ut("deployments"):C==="Pod"?Ut("pods"):C==="StatefulSet"?Ut("statefulsets"):C==="DaemonSet"&&Ut("daemonsets")},c=$=>{switch($){case"critical":return"#ef4444";case"warning":return"#f59e0b";case"info":return"#3b82f6";default:return"#6b7280"}},u=$=>{switch($){case"crash_loop":return"";case"cpu_spike":return"";case"memory_spike":return"";case"hpa_maxed":return"";case"pod_not_ready":return"";case"frequent_restarts":return"";default:return""}},[h,{refetch:f}]=it(()=>{const $=e()==="recommendations",C=nr(),k=yr();return{shouldFetch:$,context:C,refresh:k}},async({shouldFetch:$})=>{if(!$)return{recommendations:[],total:0,error:void 0};try{console.log("[Anomalies] Fetching ML recommendations...");const C=await Fe.getMLRecommendations();return console.log("[Anomalies] Fetched ML recommendations:",C),{...C,error:void 0}}catch(C){console.error("[Anomalies] Failed to fetch recommendations:",C);const k=C?.message||"Failed to load ML recommendations. This may take a few moments if there is no historical data.";return{recommendations:[],total:0,error:k}}});return It(()=>{e()==="recommendations"&&!h.loading&&!h()&&(console.log("[Anomalies] Tab changed to recommendations, fetching..."),f())}),zt(()=>{m(1)}),(()=>{var $=$3(),C=$.firstChild,k=C.firstChild,S=k.firstChild;S.nextSibling;var L=k.nextSibling,P=C.nextSibling,I=P.firstChild,D=I.nextSibling;return s(L,_(K,{get when(){return e()==="anomalies"},get children(){var T=uc();return T.$$click=()=>{m(B=>B+1),l(""),p(1)},s(T,()=>n.loading?"Detecting...":"Detect Anomalies"),J(()=>T.disabled=n.loading),T}}),null),s(L,_(K,{get when(){return e()==="recommendations"},get children(){var T=uc();return T.$$click=()=>f(),s(T,()=>h.loading?"Loading...":"Refresh Recommendations"),J(()=>T.disabled=h.loading),T}}),null),I.$$click=()=>t("anomalies"),D.$$click=()=>t("recommendations"),s($,_(K,{get when(){return Re(()=>e()==="anomalies")()&&n()?.stats},children:T=>(()=>{var B=w3(),N=B.firstChild,O=N.firstChild,H=O.nextSibling,A=N.nextSibling,z=A.firstChild,F=z.nextSibling,j=A.nextSibling,q=j.firstChild,U=q.nextSibling,Y=j.nextSibling,V=Y.firstChild,X=V.nextSibling;return s(H,()=>T().total),s(F,()=>T().critical),s(U,()=>T().warning),s(X,()=>T().info),B})()}),null),s($,_(K,{get when(){return e()==="anomalies"},get children(){var T=g3(),B=T.firstChild,N=B.firstChild,O=N.nextSibling;return O.addEventListener("change",H=>{l(H.currentTarget.value),p(1)}),s(B,_(K,{get when(){return n()?.duration},get children(){var H=h3();return H.firstChild,s(H,()=>n()?.duration,null),H}}),null),J(()=>O.value=r()),T}}),null),s($,_(K,{get when(){return e()==="anomalies"},get children(){return[_(K,{get when(){return n.loading},get children(){var T=v3(),B=T.firstChild;return B.nextSibling,T}}),_(K,{get when(){return Re(()=>!n.loading&&!n.error)()&&x().total>0},get children(){return[(()=>{var T=f3();return s(T,_(Xe,{get each(){return x().list},children:B=>(()=>{var N=C3(),O=N.firstChild,H=O.firstChild,A=H.firstChild,z=A.firstChild,F=z.nextSibling,j=F.nextSibling,q=j.nextSibling,U=q.firstChild,Y=U.nextSibling;Y.nextSibling;var V=A.nextSibling,X=V.nextSibling,R=X.firstChild,G=R.nextSibling,te=G.nextSibling,ae=te.nextSibling,Q=ae.nextSibling;Q.nextSibling;var Z=X.nextSibling,ne=Z.firstChild;ne.nextSibling;var $e=Z.nextSibling;return $e.firstChild,s(z,()=>u(B.type)),s(F,()=>B.severity),s(j,()=>B.type.replace(/_/g," ")),s(q,()=>(B.score*100).toFixed(1),Y),s(V,()=>B.message),s(X,()=>B.namespace,te),s(X,()=>B.podName,null),s(X,(()=>{var re=Re(()=>!!B.deployment);return()=>re()&&` | <strong>Deployment:</strong> ${B.deployment}`})(),null),s(Z,()=>B.recommendation,null),s($e,()=>new Date(B.timestamp).toLocaleString(),null),s(O,_(K,{get when(){return B.autoRemediate},get children(){var re=S3();return re.$$click=()=>M(B),s(re,()=>d()===B.id?"Remediating...":"Auto-Remediate"),J(()=>re.disabled=d()===B.id),re}}),null),J(re=>{var de=c(B.severity),le=`${c(B.severity)}20`,xe=c(B.severity);return de!==re.e&&E(N,"border-left-color",re.e=de),le!==re.t&&E(F,"background",re.t=le),xe!==re.a&&E(F,"color",re.a=xe),re},{e:void 0,t:void 0,a:void 0}),N})()})),T})(),_(K,{get when(){return x().pages>1},get children(){var T=p3(),B=T.firstChild,N=B.nextSibling,O=N.firstChild,H=O.nextSibling;H.nextSibling;var A=N.nextSibling;return B.$$click=()=>p(z=>Math.max(1,z-1)),s(N,v,H),s(N,()=>x().pages,null),A.$$click=()=>p(z=>Math.min(x().pages,z+1)),J(z=>{var F=v()===1,j=v()===x().pages;return F!==z.e&&(B.disabled=z.e=F),j!==z.t&&(A.disabled=z.t=j),z},{e:void 0,t:void 0}),T}})]}}),_(K,{get when(){return Re(()=>!n.loading&&!n.error)()&&x().total===0},get children(){var T=m3(),B=T.firstChild,N=B.nextSibling;return N.nextSibling,T}}),_(K,{get when(){return n.error},get children(){var T=b3(),B=T.firstChild;return B.firstChild,s(B,(()=>{var N=Re(()=>n.error instanceof Error);return()=>N()?n.error.message:String(n.error)})(),null),T}})]}}),null),s($,_(K,{get when(){return e()==="recommendations"},get children(){return[_(K,{get when(){return Re(()=>!!h.loading)()&&e()==="recommendations"},get children(){var T=x3(),B=T.firstChild,N=B.nextSibling,O=N.firstChild;return O.nextSibling,T}}),_(K,{get when(){return Re(()=>!!(!h.loading&&h()))()&&h().error},get children(){var T=y3(),B=T.firstChild;return B.firstChild,B.nextSibling,s(B,()=>h().error,null),T}}),_(K,{get when(){return Re(()=>!!(!h.loading&&h()&&!h().error))()&&(!h().recommendations||!Array.isArray(h().recommendations)||h().recommendations.length===0)},children:()=>{const T=h()?.metricsStats,B=T?.totalSamples||0,N=T?.minRequired||20,O=T?.progress||0,H=T?.hasEnoughData||!1,A=T?.remainingNeeded||N;return(()=>{var z=k3(),F=z.firstChild,j=F.nextSibling,q=j.nextSibling,U=q.firstChild,Y=U.firstChild,V=Y.nextSibling,X=V.firstChild,R=U.nextSibling,G=R.firstChild,te=R.nextSibling,ae=q.nextSibling,Q=ae.firstChild;return Q.nextSibling,s(V,B,X),s(V,N,null),E(G,"background",H?"linear-gradient(90deg, #22c55e, #10b981)":"linear-gradient(90deg, #3b82f6, #2563eb)"),s(te,H?" Enough data collected! Recommendations will appear after analysis.":`${A} more sample${A!==1?"s":""} needed`),J(Z=>E(G,"width",`${Math.min(O,100)}%`)),z})()}}),_(K,{get when(){return Re(()=>!!(!h.loading&&h()&&h().recommendations&&Array.isArray(h().recommendations)))()&&h().recommendations.length>0},get children(){var T=_3(),B=T.firstChild,N=B.firstChild,O=N.firstChild,H=O.nextSibling;return s(H,()=>h().total||0),s(T,_(Xe,{get each(){return h().recommendations||[]},children:A=>(()=>{var z=E3(),F=z.firstChild,j=F.firstChild,q=j.firstChild,U=q.firstChild,Y=U.nextSibling,V=Y.nextSibling,X=V.firstChild,R=X.nextSibling;R.nextSibling;var G=q.nextSibling,te=G.nextSibling,ae=te.firstChild,Q=ae.nextSibling,Z=Q.nextSibling,ne=Z.nextSibling,$e=ne.nextSibling;$e.nextSibling;var re=te.nextSibling,de=re.nextSibling,le=de.firstChild,xe=le.firstChild,ye=xe.nextSibling,ke=le.nextSibling,ge=ke.nextSibling,Ce=ge.firstChild,_e=Ce.nextSibling,Me=de.nextSibling,ve=Me.firstChild;ve.firstChild;var be=ve.nextSibling;be.firstChild;var ce=Me.nextSibling;ce.firstChild;var Ae=j.nextSibling,se=Ae.firstChild;return s(U,()=>A.severity),s(Y,()=>A.type.replace(/_/g," ")),s(V,()=>(A.confidence*100).toFixed(0),R),s(q,_(K,{get when(){return A.autoApply},get children(){return M3()}}),null),s(G,()=>A.title),s(te,()=>A.resource,Z),s(te,()=>A.namespace,null),s(re,()=>A.description),s(ye,()=>A.currentValue),s(_e,()=>A.recommendedValue),s(j,_(K,{get when(){return A.estimatedSavings},get children(){var oe=A3();return oe.firstChild,s(oe,()=>A.estimatedSavings,null),oe}}),Me),s(ve,()=>A.impact,null),s(be,()=>A.effort,null),s(ce,()=>new Date(A.timestamp).toLocaleString(),null),se.$$click=()=>o(A),s(Ae,_(K,{get when(){return A.autoApply},get children(){var oe=L3();return oe.$$click=()=>b(A),oe}}),null),J(oe=>{var ie=A.severity==="high"?"#ef4444":A.severity==="medium"?"#f59e0b":"#3b82f6",ue=A.severity==="high"?"#ef444420":A.severity==="medium"?"#f59e0b20":"#3b82f620",he=A.severity==="high"?"#ef4444":A.severity==="medium"?"#f59e0b":"#3b82f6",Te=A.type==="scaling"?"#a855f720":A.type==="resource_optimization"?"#22c55e20":A.type==="cost_saving"?"#f59e0b20":"#3b82f620",ee=A.type==="scaling"?"#a855f7":A.type==="resource_optimization"?"#22c55e":A.type==="cost_saving"?"#f59e0b":"#3b82f6";return ie!==oe.e&&E(z,"border-left-color",oe.e=ie),ue!==oe.t&&E(U,"background",oe.t=ue),he!==oe.a&&E(U,"color",oe.a=he),Te!==oe.o&&E(Y,"background",oe.o=Te),ee!==oe.i&&E(Y,"color",oe.i=ee),oe},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),z})()}),null),T}})]}}),null),J(T=>{var B=`px-4 py-2 text-sm font-medium transition-colors ${e()==="anomalies"?"border-b-2":"opacity-60 hover:opacity-100"}`,N=e()==="anomalies"?"var(--accent-primary)":"var(--text-secondary)",O=e()==="anomalies"?"var(--accent-primary)":"transparent",H=`px-4 py-2 text-sm font-medium transition-colors ${e()==="recommendations"?"border-b-2":"opacity-60 hover:opacity-100"}`,A=e()==="recommendations"?"var(--accent-primary)":"var(--text-secondary)",z=e()==="recommendations"?"var(--accent-primary)":"transparent";return B!==T.e&&tt(I,T.e=B),N!==T.t&&E(I,"color",T.t=N),O!==T.a&&E(I,"border-bottom-color",T.a=O),H!==T.o&&tt(D,T.o=H),A!==T.i&&E(D,"color",T.i=A),z!==T.n&&E(D,"border-bottom-color",T.n=z),T},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),$})()};ut(["click"]);var D3=w('<div class="w-full overflow-x-auto rounded border"style=background:var(--bg-card);border-color:var(--border-color)><table class=w-full style=border-collapse:collapse><thead><tr style="background:var(--bg-secondary);border-bottom:1px solid var(--border-color);height:40px"><th style="padding:8px 12px;text-align:left;color:var(--accent-primary);font-weight:900">Type</th><th style="padding:8px 12px;text-align:left;color:var(--accent-primary);font-weight:900">Resource</th><th style="padding:8px 12px;text-align:left;color:var(--accent-primary);font-weight:900">Namespace</th><th style="padding:8px 12px;text-align:left;color:var(--accent-primary);font-weight:900">Severity</th><th style="padding:8px 12px;text-align:left;color:var(--accent-primary);font-weight:900">First Seen</th><th style="padding:8px 12px;text-align:left;color:var(--accent-primary);font-weight:900">Last Seen</th><th style="padding:8px 12px;text-align:left;color:var(--accent-primary);font-weight:900">Count</th><th style="padding:8px 12px;text-align:left;color:var(--accent-primary);font-weight:900">Actions</th></tr></thead><tbody>'),R3=w("<tr><td colspan=8 style=padding:24px;text-align:center;color:var(--text-muted)>No incidents found"),P3=w('<tr style="border-bottom:1px solid var(--border-color);height:48px;background:var(--bg-card)"><td style="padding:8px 12px;color:var(--text-primary)"><span style=margin-right:8px></span><span style=text-transform:capitalize></span></td><td style="padding:8px 12px;color:var(--text-primary)"><div><div style=font-weight:600></div><div style=font-size:12px;color:var(--text-secondary)></div></div></td><td style="padding:8px 12px;color:var(--text-primary)"></td><td style="padding:8px 12px"><span style="padding:4px 8px;border-radius:4px;font-size:12px;font-weight:600"></span></td><td style="padding:8px 12px;color:var(--text-secondary);font-size:13px"></td><td style="padding:8px 12px;color:var(--text-secondary);font-size:13px"></td><td style="padding:8px 12px;color:var(--accent-primary);font-weight:600"></td><td style="padding:8px 12px">');const I3=e=>{const t=a=>{switch(a){case"oom":return"";case"crashloop":return"";case"node_pressure":case"node_memory_pressure":case"node_disk_pressure":return"";case"job_failure":case"cronjob_failure":return"";default:return""}},r=a=>a==="critical"?"var(--error-color)":"var(--warning-color)",l=a=>{const m=new Date(a),i=new Date().getTime()-m.getTime(),n=Math.floor(i/6e4),g=Math.floor(i/36e5),v=Math.floor(i/864e5);return n<1?"Just now":n<60?`${n}m ago`:g<24?`${g}h ago`:v<7?`${v}d ago`:m.toLocaleDateString()};return(()=>{var a=D3(),m=a.firstChild,d=m.firstChild,i=d.firstChild,n=i.firstChild,g=n.nextSibling,v=g.nextSibling,p=v.nextSibling,y=p.nextSibling,x=y.nextSibling,M=x.nextSibling;M.nextSibling;var b=d.nextSibling;return s(b,_(Xe,{get each(){return e.incidents},get fallback(){return(()=>{var o=R3();return o.firstChild,o})()},children:o=>(()=>{var c=P3(),u=c.firstChild,h=u.firstChild,f=h.nextSibling,$=u.nextSibling,C=$.firstChild,k=C.firstChild,S=k.nextSibling,L=$.nextSibling,P=L.nextSibling,I=P.firstChild,D=P.nextSibling,T=D.nextSibling,B=T.nextSibling,N=B.nextSibling;return c.addEventListener("mouseleave",O=>{O.currentTarget.style.background="var(--bg-card)"}),c.addEventListener("mouseenter",O=>{O.currentTarget.style.background="var(--bg-secondary)"}),s(h,()=>t(o.type)),s(f,()=>o.type.replace(/_/g," ")),s(k,()=>o.resourceName),s(S,()=>o.resourceKind),s(L,()=>o.namespace||"-"),s(I,()=>o.severity.toUpperCase()),s(D,()=>l(o.firstSeen)),s(T,()=>l(o.lastSeen)),s(B,()=>o.count),s(N,_(Jt,{get actions(){return[...o.resourceKind==="Pod"&&e.onViewPod?[{label:"View Pod",icon:"pod",onClick:()=>e.onViewPod?.(o)}]:[],...e.onViewLogs?[{label:"View Logs",icon:"logs",onClick:()=>e.onViewLogs?.(o)}]:[],...e.onViewEvents?[{label:"View Events",icon:"events",onClick:()=>e.onViewEvents?.(o)}]:[]]}})),J(O=>{var H=r(o.severity)+"20",A=r(o.severity);return H!==O.e&&E(I,"background",O.e=H),A!==O.t&&E(I,"color",O.t=A),O},{e:void 0,t:void 0}),c})()})),a})()};var B3=w('<div class="flex flex-wrap items-center gap-4 mb-4"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></select><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></select><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value>All Namespaces'),fl=w("<option>");const N3=e=>{const t=[{value:"",label:"All Types"},{value:"oom",label:"OOMKilled"},{value:"crashloop",label:"CrashLoopBackOff"},{value:"node_pressure",label:"Node Pressure"},{value:"node_memory_pressure",label:"Node Memory Pressure"},{value:"node_disk_pressure",label:"Node Disk Pressure"},{value:"job_failure",label:"Job Failure"},{value:"cronjob_failure",label:"CronJob Failure"}],r=[{value:"",label:"All Severities"},{value:"warning",label:"Warning"},{value:"critical",label:"Critical"}];return(()=>{var l=B3(),a=l.firstChild,m=a.nextSibling,d=m.nextSibling;return d.firstChild,a.addEventListener("change",i=>e.onTypeFilterChange(i.currentTarget.value)),s(a,_(Xe,{each:t,children:i=>(()=>{var n=fl();return s(n,()=>i.label),J(()=>n.value=i.value),n})()})),m.addEventListener("change",i=>e.onSeverityFilterChange(i.currentTarget.value)),s(m,_(Xe,{each:r,children:i=>(()=>{var n=fl();return s(n,()=>i.label),J(()=>n.value=i.value),n})()})),d.addEventListener("change",i=>e.onNamespaceFilterChange(i.currentTarget.value)),s(d,_(Xe,{get each(){return e.namespaces},children:i=>(()=>{var n=fl();return n.value=i,s(n,i),n})()}),null),J(()=>a.value=e.typeFilter),J(()=>m.value=e.severityFilter),J(()=>d.value=e.namespaceFilter),l})()};var O3=w('<div class="space-y-4 p-6"><div class="flex items-center justify-between mb-6"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Incidents & OOM</h1><p class="text-sm mt-1"style=color:var(--text-secondary)>Real-time detection of OOMKilled, CrashLoopBackOff, Node Pressure, and Job Failures</p></div><button class="px-4 py-2 rounded-lg text-sm font-medium"style=background:var(--accent-primary);color:#000>Refresh</button></div><div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"><div class="card p-4"style="border-left:4px solid var(--error-color)"><div class=text-sm style=color:var(--text-secondary)>Critical</div><div class="text-2xl font-bold mt-1"style=color:var(--error-color)></div></div><div class="card p-4"style="border-left:4px solid var(--warning-color)"><div class=text-sm style=color:var(--text-secondary)>Warnings</div><div class="text-2xl font-bold mt-1"style=color:var(--warning-color)></div></div><div class="card p-4"style="border-left:4px solid var(--accent-primary)"><div class=text-sm style=color:var(--text-secondary)>Total</div><div class="text-2xl font-bold mt-1"style=color:var(--accent-primary)>'),z3=w('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading incidents...');const F3=()=>{const[e,t]=W(""),[r,l]=W(""),[a,m]=W(""),[d]=it(Fe.getNamespaces),[i,{refetch:n}]=it(()=>({namespace:a()||void 0,type:e()||void 0,severity:r()||void 0}),async b=>await Fe.getIncidents(b.namespace,b.type,b.severity)),g=et(()=>(i()||[]).filter(o=>!(e()&&o.type!==e()||r()&&o.severity!==r()||a()&&o.namespace!==a()))),v=b=>{if(b.resourceKind==="Pod"){const c=b.resourceName.split("/")[0];Ut("pods"),Je(`Navigating to pod: ${c}`,"info")}},p=b=>{if(b.resourceKind==="Pod"){const c=b.resourceName.split("/")[0];Ut("pods"),Je(`Opening logs for: ${c}`,"info")}},y=b=>{Ut("events"),Je(`Viewing events for: ${b.resourceName}`,"info")},x=et(()=>g().filter(b=>b.severity==="critical").length),M=et(()=>g().filter(b=>b.severity==="warning").length);return(()=>{var b=O3(),o=b.firstChild,c=o.firstChild,u=c.firstChild;u.nextSibling;var h=c.nextSibling,f=o.nextSibling,$=f.firstChild,C=$.firstChild,k=C.nextSibling,S=$.nextSibling,L=S.firstChild,P=L.nextSibling,I=S.nextSibling,D=I.firstChild,T=D.nextSibling;return h.$$click=()=>n(),s(k,x),s(P,M),s(T,()=>g().length),s(b,_(N3,{get typeFilter(){return e()},get severityFilter(){return r()},get namespaceFilter(){return a()},get namespaces(){return d()||[]},onTypeFilterChange:t,onSeverityFilterChange:l,onNamespaceFilterChange:m}),null),s(b,_(K,{get when(){return!i.loading},get fallback(){return(()=>{var B=z3(),N=B.firstChild;return N.nextSibling,B})()},get children(){return _(I3,{get incidents(){return g()},onViewPod:v,onViewLogs:p,onViewEvents:y})}}),null),b})()};ut(["click"]);var H3=w('<span class="flex items-center gap-2"><svg class="animate-spin h-4 w-4"fill=none viewBox="0 0 24 24"><circle class=opacity-25 cx=12 cy=12 r=10 stroke=currentColor stroke-width=4></circle><path class=opacity-75 fill=currentColor d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>Uninstalling...'),j3=w('<div class=space-y-4><div class="flex items-start gap-3"><div class="flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center"style="background:rgba(239, 68, 68, 0.15)"><svg class="w-6 h-6"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--error-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div><div class=flex-1><p class="text-sm mb-3"style=color:var(--text-primary)>Are you sure you want to uninstall <strong></strong> from <strong></strong>?</p><div class="p-3 rounded-lg mb-4"style=background:var(--bg-tertiary)><div class="text-sm font-medium mb-1"style=color:var(--text-primary)></div><div class=text-xs style=color:var(--text-muted)>Namespace: </div><div class=text-xs style=color:var(--text-muted)>Release: </div></div><p class="text-xs mb-4"style=color:var(--text-muted)>This action cannot be undone. The application will be permanently uninstalled from the cluster.</p></div></div><div class="flex justify-end gap-3 pt-4 border-t"style=border-color:var(--border-color)><button class="px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"style=background:var(--bg-tertiary);color:var(--text-primary)>Cancel</button><button class="px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"style=background:var(--error-color);color:white>');const U3=e=>_(mt,{get isOpen(){return e.isOpen},get onClose(){return e.onClose},title:"Uninstall Application",size:"md",get children(){var t=j3(),r=t.firstChild,l=r.firstChild;l.firstChild;var a=l.nextSibling,m=a.firstChild,d=m.firstChild,i=d.nextSibling,n=i.nextSibling,g=n.nextSibling,v=m.nextSibling,p=v.firstChild,y=p.nextSibling;y.firstChild;var x=y.nextSibling;x.firstChild,v.nextSibling;var M=r.nextSibling,b=M.firstChild,o=b.nextSibling;return s(i,()=>e.displayName),s(g,()=>e.namespace),s(p,()=>e.displayName),s(y,()=>e.namespace,null),s(x,()=>e.appName,null),Rt(b,"click",e.onClose,!0),Rt(o,"click",e.onConfirm,!0),s(o,_(K,{get when(){return e.loading},fallback:"Uninstall",get children(){return H3()}})),J(c=>{var u=e.loading,h=e.loading;return u!==c.e&&(b.disabled=c.e=u),h!==c.t&&(o.disabled=c.t=h),c},{e:void 0,t:void 0}),t}});ut(["click"]);var V3=w('<span class="flex items-center gap-2"><svg class="animate-spin h-4 w-4"fill=none viewBox="0 0 24 24"><circle class=opacity-25 cx=12 cy=12 r=10 stroke=currentColor stroke-width=4></circle><path class=opacity-75 fill=currentColor d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>Removing...'),W3=w('<div class=space-y-4><div class="flex items-start gap-3"><div class="flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center"style="background:rgba(245, 158, 11, 0.15)"><svg class="w-6 h-6"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--warning-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div><div class=flex-1><p class="text-sm mb-3"style=color:var(--text-primary)>Are you sure you want to remove <strong></strong> from your custom apps?</p><div class="p-3 rounded-lg mb-4"style=background:var(--bg-tertiary)><div class="text-sm font-medium mb-1"style=color:var(--text-primary)></div><div class=text-xs style=color:var(--text-muted)>App ID: </div></div><p class="text-xs mb-4"style=color:var(--text-muted)>This will remove the app from your custom apps list. It will not uninstall any installed instances.</p></div></div><div class="flex justify-end gap-3 pt-4 border-t"style=border-color:var(--border-color)><button class="px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"style=background:var(--bg-tertiary);color:var(--text-primary)>Cancel</button><button class="px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"style=background:var(--warning-color);color:white>');const q3=e=>_(mt,{get isOpen(){return e.isOpen},get onClose(){return e.onClose},title:"Remove Custom App",size:"md",get children(){var t=W3(),r=t.firstChild,l=r.firstChild;l.firstChild;var a=l.nextSibling,m=a.firstChild,d=m.firstChild,i=d.nextSibling,n=m.nextSibling,g=n.firstChild,v=g.nextSibling;v.firstChild,n.nextSibling;var p=r.nextSibling,y=p.firstChild,x=y.nextSibling;return s(i,()=>e.displayName),s(g,()=>e.displayName),s(v,()=>e.appName,null),Rt(y,"click",e.onClose,!0),Rt(x,"click",e.onConfirm,!0),s(x,_(K,{get when(){return e.loading},fallback:"Remove",get children(){return V3()}})),J(M=>{var b=e.loading,o=e.loading;return b!==M.e&&(y.disabled=M.e=b),o!==M.t&&(x.disabled=M.t=o),M},{e:void 0,t:void 0}),t}});ut(["click"]);var K3=w('<svg class="w-4 h-4"fill=none viewBox="0 0 24 24"stroke=currentColor style=color:var(--success-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z">'),Y3=w('<div class="p-4 space-y-4">'),G3=w('<div class="p-4 space-y-2 border-t"style=border-color:var(--border-color)><h4 class="text-xs font-semibold mb-3"style=color:var(--text-secondary)>Recent'),J3=w("<div class=overflow-y-auto style=max-height:520px>"),X3=w('<div class="fixed bottom-6 right-6 z-50 transition-all duration-300"><div class="rounded-lg shadow-2xl overflow-hidden"style="background:var(--card-bg);border:1px solid var(--border-color)"><div class="flex items-center justify-between px-4 py-3 cursor-pointer"style=background:var(--header-bg)><div class="flex items-center gap-3"><svg class="w-5 h-5 animate-spin"fill=none viewBox="0 0 24 24"style=color:var(--primary-color)><circle class=opacity-25 cx=12 cy=12 r=10 stroke=currentColor stroke-width=4></circle><path class=opacity-75 fill=currentColor d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg><div><h3 class="text-sm font-semibold"style=color:var(--text-primary)>Deployments (<!>)</h3><p class=text-xs style=color:var(--text-secondary)> active</p></div></div><div class="flex items-center gap-2"><button class="p-1.5 rounded hover:opacity-70 transition-opacity"></button><svg class="w-4 h-4 transition-transform"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-secondary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 9l-7 7-7-7">'),Z3=w('<svg class="w-4 h-4"fill=none viewBox="0 0 24 24"stroke=currentColor style=color:var(--text-secondary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"clip-rule=evenodd></path><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2">'),Q3=w('<div class="p-4 rounded-lg"style="background:var(--input-bg);border:1px solid var(--border-color)"><div class="flex items-start justify-between mb-3"><div class=flex-1><h4 class="text-sm font-semibold"style=color:var(--text-primary)></h4><p class="text-xs mt-0.5"style=color:var(--text-secondary)>v<!>  </p></div><button class="text-xs px-2 py-1 rounded hover:opacity-70 transition-opacity"style=background:var(--error-color-alpha);color:var(--error-color)>Cancel</button></div><div class=space-y-2>'),e5=w('<div class="mt-1.5 h-1 rounded-full overflow-hidden"style=background:var(--border-color)><div class="h-full transition-all duration-300"style=background:var(--primary-color)>'),t5=w('<p class="text-xs mt-1"style=color:var(--text-secondary)>'),r5=w('<div class="flex items-center gap-3"><div class="w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0"></div><div class="flex-1 min-w-0"><div class="flex items-center justify-between"><p class="text-xs font-medium truncate"style=color:var(--text-primary)></p><span class="text-xs ml-2"style=color:var(--text-secondary)>'),s5=w('<div class="flex items-center justify-between p-2 rounded"style=background:var(--input-bg)><div class="flex items-center gap-2 flex-1 min-w-0"><span class=text-sm></span><span class="text-xs truncate"style=color:var(--text-primary)></span></div><button class="text-xs opacity-50 hover:opacity-100 transition-opacity"style=color:var(--text-secondary)>');const[gn,Qn]=W([]),[si,i5]=W(!1),[Oi,n5]=W(localStorage.getItem("kubegraf_sound_enabled")!=="false");let pl=null;const qd=()=>(pl||(pl=new(window.AudioContext||window.webkitAudioContext)),pl),l5=()=>{if(Oi())try{const e=qd(),t=e.createOscillator(),r=e.createGain();t.connect(r),r.connect(e.destination),t.frequency.value=800,t.type="sine",r.gain.setValueAtTime(.1,e.currentTime),r.gain.exponentialRampToValueAtTime(.01,e.currentTime+.3),t.start(e.currentTime),t.stop(e.currentTime+.3)}catch(e){console.error("Failed to play success sound:",e)}},o5=()=>{if(Oi())try{const e=qd(),t=e.createOscillator(),r=e.createGain();t.connect(r),r.connect(e.destination),t.frequency.value=200,t.type="sawtooth",r.gain.setValueAtTime(.1,e.currentTime),r.gain.exponentialRampToValueAtTime(.01,e.currentTime+.4),t.start(e.currentTime),t.stop(e.currentTime+.4)}catch(e){console.error("Failed to play error sound:",e)}},a5=(e,t,r,l)=>{const a={id:`deploy-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,appName:e,appVersion:t,namespace:r,tasks:l.map((m,d)=>({id:`task-${d}`,name:m,status:d===0?"running":"pending",progress:d===0?10:0})),overallStatus:"running",createdAt:Date.now()};return Qn(m=>[...m,a]),a.id},Nr=(e,t,r)=>{Qn(l=>l.map(a=>{if(a.id!==e)return a;const m=a.tasks.map(n=>{if(n.id!==t)return n;const g={...n,...r};if(g.status==="completed"&&n.status!=="completed"){g.endTime=Date.now(),l5();const v=a.tasks.findIndex(p=>p.id===t);v<a.tasks.length-1&&setTimeout(()=>{Nr(e,a.tasks[v+1].id,{status:"running",progress:10,startTime:Date.now()})},300)}else g.status==="failed"&&n.status!=="failed"&&(g.endTime=Date.now(),o5());return g}),d=m.every(n=>n.status==="completed"),i=m.some(n=>n.status==="failed");return{...a,tasks:m,overallStatus:i?"failed":d?"completed":"running"}}))},c5=e=>{Qn(t=>t.map(r=>r.id!==e?r:{...r,overallStatus:"cancelled",tasks:r.tasks.map(l=>l.status==="pending"||l.status==="running"?{...l,status:"failed",message:"Cancelled by user"}:l)}))},hc=e=>{Qn(t=>t.filter(r=>r.id!==e))},d5=()=>{const e=!Oi();n5(e),localStorage.setItem("kubegraf_sound_enabled",String(e))},u5=()=>{const e=()=>gn().filter(m=>m.overallStatus==="running"||m.overallStatus==="pending"),t=()=>gn().filter(m=>m.overallStatus==="completed"||m.overallStatus==="failed"),r=m=>{switch(m){case"completed":return"var(--success-color)";case"failed":return"var(--error-color)";case"running":return"var(--primary-color)";default:return"var(--text-secondary)"}},l=m=>{switch(m){case"completed":return"";case"failed":return"";case"running":return"";default:return""}},a=(m,d)=>{if(!m)return"";const i=d||Date.now(),n=Math.floor((i-m)/1e3);if(n<60)return`${n}s`;const g=Math.floor(n/60),v=n%60;return`${g}m ${v}s`};return It(()=>{t().forEach(d=>{const i=d.tasks[d.tasks.length-1];i.endTime&&Date.now()-i.endTime>1e4&&hc(d.id)})}),_(K,{get when(){return gn().length>0},get children(){return _(ms,{get children(){var m=X3(),d=m.firstChild,i=d.firstChild,n=i.firstChild,g=n.firstChild,v=g.nextSibling,p=v.firstChild,y=p.firstChild,x=y.nextSibling;x.nextSibling;var M=p.nextSibling,b=M.firstChild,o=n.nextSibling,c=o.firstChild,u=c.nextSibling;return i.$$click=()=>i5(!si()),s(p,()=>gn().length,x),s(M,()=>e().length,b),c.$$click=h=>{h.stopPropagation(),d5()},s(c,_(K,{get when(){return Oi()},get fallback(){return Z3()},get children(){return K3()}})),s(d,_(K,{get when(){return!si()},get children(){var h=J3();return s(h,_(K,{get when(){return e().length>0},get children(){var f=Y3();return s(f,_(Xe,{get each(){return e()},children:$=>(()=>{var C=Q3(),k=C.firstChild,S=k.firstChild,L=S.firstChild,P=L.nextSibling,I=P.firstChild,D=I.nextSibling;D.nextSibling;var T=S.nextSibling,B=k.nextSibling;return s(L,()=>$.appName),s(P,()=>$.appVersion,D),s(P,()=>$.namespace,null),T.$$click=()=>c5($.id),s(B,_(Xe,{get each(){return $.tasks},children:N=>(()=>{var O=r5(),H=O.firstChild,A=H.nextSibling,z=A.firstChild,F=z.firstChild,j=F.nextSibling;return s(H,()=>l(N.status)),s(F,()=>N.name),s(j,()=>a(N.startTime,N.endTime)),s(A,_(K,{get when(){return Re(()=>N.status==="running")()&&N.progress>0},get children(){var q=e5(),U=q.firstChild;return J(Y=>E(U,"width",`${N.progress}%`)),q}}),null),s(A,_(K,{get when(){return N.message},get children(){var q=t5();return s(q,()=>N.message),q}}),null),J(q=>{var U=N.status==="running"?"var(--primary-color-alpha)":"transparent",Y=r(N.status),V=N.status==="pending"?"1px solid var(--border-color)":"none",X=N.status==="running";return U!==q.e&&E(H,"background",q.e=U),Y!==q.t&&E(H,"color",q.t=Y),V!==q.a&&E(H,"border",q.a=V),X!==q.o&&H.classList.toggle("animate-pulse",q.o=X),q},{e:void 0,t:void 0,a:void 0,o:void 0}),O})()})),C})()})),f}}),null),s(h,_(K,{get when(){return t().length>0},get children(){var f=G3();return f.firstChild,s(f,_(Xe,{get each(){return t()},children:$=>(()=>{var C=s5(),k=C.firstChild,S=k.firstChild,L=S.nextSibling,P=k.nextSibling;return s(S,()=>l($.overallStatus)),s(L,()=>$.appName),P.$$click=()=>hc($.id),J(I=>E(S,"color",r($.overallStatus))),C})()}),null),f}}),null),h}}),null),J(h=>{var f=si()?"320px":"420px",$=si()?"60px":"600px",C=si()?"none":"1px solid var(--border-color)",k=e().length===0,S=Oi()?"Disable sounds":"Enable sounds",L=!si();return f!==h.e&&E(m,"width",h.e=f),$!==h.t&&E(m,"max-height",h.t=$),C!==h.a&&E(i,"border-bottom",h.a=C),k!==h.o&&g.classList.toggle("hidden",h.o=k),S!==h.i&&dt(c,"title",h.i=S),L!==h.n&&u.classList.toggle("rotate-180",h.n=L),h},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),m}})}})};ut(["click"]);var h5=w('<div class="bg-red-50 border border-red-200 rounded-lg p-3 text-red-800 text-sm">'),g5=w('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"><div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto m-4"><div class=p-6><div class="flex items-center justify-between mb-6"><h2 class="text-2xl font-bold">Install MLflow</h2><button class="text-gray-500 hover:text-gray-700 text-2xl"></button></div><div class=space-y-6><div><label class="block text-sm font-medium mb-2">Namespace</label><select class="w-full px-3 py-2 border rounded-lg"></select></div><div><label class="block text-sm font-medium mb-2">Backend Store</label><select class="w-full px-3 py-2 border rounded-lg"><option value=pvc>PVC (Persistent Volume Claim)</option><option value=minio>MinIO</option><option value=s3>Amazon S3</option><option value=gcs>Google Cloud Storage</option></select></div><div><label class="block text-sm font-medium mb-2">Artifact Store</label><select class="w-full px-3 py-2 border rounded-lg"><option value=pvc>PVC (Persistent Volume Claim)</option><option value=minio>MinIO</option><option value=s3>Amazon S3</option><option value=gcs>Google Cloud Storage</option></select></div><div><label class="block text-sm font-medium mb-2">Version</label><select class="w-full px-3 py-2 border rounded-lg"><option value>Latest (<!>)</option></select></div><div class="grid grid-cols-2 gap-4"><div><label class="block text-sm font-medium mb-2">CPU Limit</label><input type=text placeholder=500m class="w-full px-3 py-2 border rounded-lg"></div><div><label class="block text-sm font-medium mb-2">Memory Limit</label><input type=text placeholder=1Gi class="w-full px-3 py-2 border rounded-lg"></div></div><div class=space-y-3><label class="flex items-center gap-2"><input type=checkbox class="w-4 h-4"><span class=text-sm>Enable Tracking UI</span></label><label class="flex items-center gap-2"><input type=checkbox class="w-4 h-4"><span class=text-sm>Enable Ingress/Gateway</span></label></div><div class="flex gap-3 justify-end pt-4 border-t"><button class="px-6 py-2 rounded-lg border hover:bg-gray-50">Cancel</button><button class="px-6 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white disabled:opacity-50">'),gc=w("<option>");const v5=e=>{const[t,r]=W("mlflow"),[l,a]=W("pvc"),[m,d]=W("pvc"),[i,n]=W(!0),[g,v]=W(!1),[p,y]=W("500m"),[x,M]=W("1Gi"),[b,o]=W(""),[c,u]=W(!1),[h,f]=W(""),[$]=it(Fe.getNamespaces),[C]=it(jl.getVersions),k=async()=>{u(!0),f("");try{const S={namespace:t(),backendStore:l(),artifactStore:m(),enableUI:i(),enableIngress:g(),cpu:p(),memory:x(),version:b()||C()?.latest||"2.8.0"};(await jl.install(S)).success?(e.onSuccess?.(),e.onClose()):f("Installation failed")}catch(S){f(S.message||"Installation failed")}finally{u(!1)}};return(()=>{var S=g5(),L=S.firstChild,P=L.firstChild,I=P.firstChild,D=I.firstChild,T=D.nextSibling,B=I.nextSibling,N=B.firstChild,O=N.firstChild,H=O.nextSibling,A=N.nextSibling,z=A.firstChild,F=z.nextSibling,j=A.nextSibling,q=j.firstChild,U=q.nextSibling,Y=j.nextSibling,V=Y.firstChild,X=V.nextSibling,R=X.firstChild,G=R.firstChild,te=G.nextSibling;te.nextSibling;var ae=Y.nextSibling,Q=ae.firstChild,Z=Q.firstChild,ne=Z.nextSibling,$e=Q.nextSibling,re=$e.firstChild,de=re.nextSibling,le=ae.nextSibling,xe=le.firstChild,ye=xe.firstChild,ke=xe.nextSibling,ge=ke.firstChild,Ce=le.nextSibling,_e=Ce.firstChild,Me=_e.nextSibling;return Rt(T,"click",e.onClose,!0),H.addEventListener("change",ve=>r(ve.currentTarget.value)),s(H,_(Xe,{get each(){return $()||[]},children:ve=>(()=>{var be=gc();return s(be,()=>ve.name),J(()=>be.value=ve.name),be})()})),F.addEventListener("change",ve=>a(ve.currentTarget.value)),U.addEventListener("change",ve=>d(ve.currentTarget.value)),X.addEventListener("change",ve=>o(ve.currentTarget.value)),s(R,()=>C()?.latest||"2.8.0",te),s(X,_(Xe,{get each(){return C()?.versions||[]},children:ve=>(()=>{var be=gc();return be.value=ve,s(be,ve),be})()}),null),ne.addEventListener("change",ve=>y(ve.currentTarget.value)),de.addEventListener("change",ve=>M(ve.currentTarget.value)),ye.addEventListener("change",ve=>n(ve.currentTarget.checked)),ge.addEventListener("change",ve=>v(ve.currentTarget.checked)),s(B,_(K,{get when(){return h()},get children(){var ve=h5();return s(ve,h),ve}}),Ce),Rt(_e,"click",e.onClose,!0),Me.$$click=k,s(Me,()=>c()?"Installing...":"Install"),J(ve=>{var be=c(),ce=c();return be!==ve.e&&(_e.disabled=ve.e=be),ce!==ve.t&&(Me.disabled=ve.t=ce),ve},{e:void 0,t:void 0}),J(()=>H.value=t()),J(()=>F.value=l()),J(()=>U.value=m()),J(()=>X.value=b()),J(()=>ne.value=p()),J(()=>de.value=x()),J(()=>ye.checked=i()),J(()=>ge.checked=g()),S})()};ut(["click"]);const f5=[{name:"nginx-ingress",displayName:"NGINX Ingress",description:"Ingress controller for Kubernetes using NGINX as a reverse proxy",category:"kubernetes-essentials",icon:"M13 10V3L4 14h7v7l9-11h-7z",version:"4.9.0",chartRepo:"https://kubernetes.github.io/ingress-nginx",chartName:"ingress-nginx",tags:["ingress","networking","load-balancer"],maintainer:"Kubernetes",clusterSupport:{single:!0,multi:!0,namespaces:["ingress-nginx","default"]}},{name:"argocd",displayName:"Argo CD",description:"Declarative GitOps continuous delivery tool for Kubernetes",category:"kubernetes-essentials",icon:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15",version:"5.51.0",chartRepo:"https://argoproj.github.io/argo-helm",chartName:"argo-cd",tags:["gitops","cicd","deployment"],maintainer:"Argo Project",clusterSupport:{single:!0,multi:!0,namespaces:["argocd"]}},{name:"fluxcd",displayName:"Flux CD",description:"GitOps toolkit for continuous and progressive delivery",category:"kubernetes-essentials",icon:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4",version:"2.12.0",chartRepo:"https://fluxcd-community.github.io/helm-charts",chartName:"flux2",tags:["gitops","cicd"],maintainer:"Flux Project",clusterSupport:{single:!0,multi:!0,namespaces:["flux-system"]}}],p5=[{name:"prometheus",displayName:"Prometheus",description:"Monitoring system and time series database for metrics",category:"observability",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z",version:"25.8.0",chartRepo:"https://prometheus-community.github.io/helm-charts",chartName:"prometheus",tags:["metrics","monitoring","alerting"],maintainer:"Prometheus Community",clusterSupport:{single:!0,multi:!0,namespaces:["monitoring","prometheus"]}},{name:"grafana",displayName:"Grafana",description:"Analytics & monitoring dashboards for all your metrics",category:"observability",icon:"M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z",version:"7.0.19",chartRepo:"https://grafana.github.io/helm-charts",chartName:"grafana",tags:["dashboards","visualization","metrics"],maintainer:"Grafana Labs",clusterSupport:{single:!0,multi:!0,namespaces:["monitoring","grafana"]}},{name:"loki",displayName:"Loki",description:"Like Prometheus, but for logs - scalable log aggregation",category:"observability",icon:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",version:"5.41.4",chartRepo:"https://grafana.github.io/helm-charts",chartName:"loki-stack",tags:["logs","aggregation","storage"],maintainer:"Grafana Labs",clusterSupport:{single:!0,multi:!0,namespaces:["monitoring","loki"]}},{name:"tempo",displayName:"Tempo",description:"High-scale distributed tracing backend",category:"observability",icon:"M13 10V3L4 14h7v7l9-11h-7z",version:"1.7.1",chartRepo:"https://grafana.github.io/helm-charts",chartName:"tempo",tags:["tracing","distributed-tracing","opentelemetry"],maintainer:"Grafana Labs",clusterSupport:{single:!0,multi:!0,namespaces:["monitoring","tempo"]}},{name:"kube-prometheus-stack",displayName:"Kube Prometheus Stack",description:"Full Prometheus + Grafana + Alertmanager observability stack",category:"observability",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z",version:"55.5.0",chartRepo:"https://prometheus-community.github.io/helm-charts",chartName:"kube-prometheus-stack",tags:["full-stack","prometheus","grafana","alertmanager"],maintainer:"Prometheus Community",clusterSupport:{single:!0,multi:!0,namespaces:["monitoring"]}}],m5=[{name:"cert-manager",displayName:"cert-manager",description:"Automatically provision and manage TLS certificates",category:"security",icon:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z",version:"1.13.3",chartRepo:"https://charts.jetstack.io",chartName:"cert-manager",tags:["tls","certificates","ssl"],maintainer:"Jetstack",clusterSupport:{single:!0,multi:!0,namespaces:["cert-manager"]}},{name:"vault",displayName:"HashiCorp Vault",description:"Secrets management, encryption, and privileged access",category:"security",icon:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z",version:"0.27.0",chartRepo:"https://helm.releases.hashicorp.com",chartName:"vault",tags:["secrets","encryption","security"],maintainer:"HashiCorp",clusterSupport:{single:!0,multi:!0,namespaces:["vault"]}}],b5=[{name:"istio",displayName:"Istio Service Mesh",description:"Connect, secure, control, and observe services across your cluster",category:"service-mesh",icon:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9",version:"1.20.0",chartRepo:"https://istio-release.storage.googleapis.com/charts",chartName:"istiod",tags:["service-mesh","networking","security"],maintainer:"Istio",clusterSupport:{single:!0,multi:!0,namespaces:["istio-system"]}},{name:"kiali",displayName:"Kiali",description:"Service mesh observability console for Istio. Visualize service topology, health, and traffic flow",category:"service-mesh",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z",version:"1.73.0",chartRepo:"https://kiali.org/helm-charts",chartName:"kiali-server",tags:["observability","istio","service-mesh","topology"],maintainer:"Kiali",documentation:"https://kiali.io/docs/",clusterSupport:{single:!0,multi:!0,namespaces:["istio-system","kiali-operator"]}},{name:"cilium",displayName:"Cilium CNI",description:"eBPF-based networking, observability, and security for Kubernetes",category:"service-mesh",icon:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z",version:"1.14.5",chartRepo:"https://helm.cilium.io/",chartName:"cilium",tags:["cni","ebpf","networking","security"],maintainer:"Cilium",clusterSupport:{single:!0,multi:!0,namespaces:["kube-system"]}}],x5=[{name:"mlflow",displayName:"MLflow",description:"Open source platform for managing the ML lifecycle, including experimentation, reproducibility, deployment, and a central model registry",category:"machine-learning",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z",version:"2.8.0",chartRepo:"https://community-charts.github.io/helm-charts",chartName:"mlflow",tags:["mlops","experiment-tracking","model-registry"],maintainer:"MLflow",documentation:"https://mlflow.org/docs/latest/index.html",clusterSupport:{single:!0,multi:!0,namespaces:["mlflow"]}},{name:"feast",displayName:"Feast Feature Store",description:"Open source feature store for machine learning. Store, manage, and serve features for training and inference",category:"machine-learning",icon:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10",version:"0.38.0",chartRepo:"https://feast-charts.storage.googleapis.com",chartName:"feast",tags:["feature-store","ml","data"],maintainer:"Feast",documentation:"https://docs.feast.dev/",clusterSupport:{single:!0,multi:!0,namespaces:["feast"]}},{name:"kserve",displayName:"KServe",description:"Serverless inferencing for ML models on Kubernetes. High performance model serving with autoscaling",category:"machine-learning",icon:"M13 10V3L4 14h7v7l9-11h-7z",version:"0.12.0",chartRepo:"https://kserve.github.io/kserve",chartName:"kserve",tags:["model-serving","inference","serverless"],maintainer:"KServe",documentation:"https://kserve.github.io/website/",clusterSupport:{single:!0,multi:!0,namespaces:["kserve","kserve-system"]}},{name:"bentoml",displayName:"BentoML",description:"Unified Model Serving Framework. Build, ship, and scale ML models with ease",category:"machine-learning",icon:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10",version:"1.0.0",chartRepo:"https://bentoml.github.io/helm-charts",chartName:"bentoml",tags:["model-serving","mlops","deployment"],maintainer:"BentoML",documentation:"https://docs.bentoml.com/",clusterSupport:{single:!0,multi:!0,namespaces:["bentoml"]}}],y5=[{name:"postgresql",displayName:"PostgreSQL",description:"Advanced open-source relational database with JSON support and ACID compliance",category:"database",icon:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4",version:"16.2.0",chartRepo:"https://charts.bitnami.com/bitnami",chartName:"postgresql",tags:["database","sql","rdbms","postgres"],maintainer:"Bitnami",clusterSupport:{single:!0,multi:!0,namespaces:["default","database","postgresql"]}},{name:"mysql",displayName:"MySQL",description:"Popular open-source relational database management system",category:"database",icon:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4",version:"10.6.0",chartRepo:"https://charts.bitnami.com/bitnami",chartName:"mysql",tags:["database","sql","rdbms","mysql"],maintainer:"Bitnami",clusterSupport:{single:!0,multi:!0,namespaces:["default","database","mysql"]}},{name:"memcached",displayName:"Memcached",description:"High-performance distributed memory caching system",category:"database",icon:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4",version:"6.4.0",chartRepo:"https://charts.bitnami.com/bitnami",chartName:"memcached",tags:["cache","memory","key-value","memcached"],maintainer:"Bitnami",clusterSupport:{single:!0,multi:!0,namespaces:["default","database","cache","memcached"]}}],_5=[...f5,...p5,...m5,...b5,...x5,...y5],Mi=[{id:"kubernetes-essentials",name:"Kubernetes Essentials",description:"Core Kubernetes tools and utilities",color:"#3b82f6",icon:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"},{id:"observability",name:"Observability",description:"Monitoring, logging, and tracing solutions",color:"#f97316",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},{id:"security",name:"Security",description:"Security tools and policies",color:"#22c55e",icon:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"},{id:"service-mesh",name:"Service Mesh",description:"Service mesh solutions and observability",color:"#8b5cf6",icon:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"},{id:"machine-learning",name:"Machine Learning",description:"ML platforms, feature stores, and model serving",color:"#ec4899",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},{id:"database",name:"Database",description:"Databases and data storage solutions",color:"#10b981",icon:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"}],$5=e=>Mi.find(t=>t.id===e),Es=e=>$5(e)?.color||"#6b7280";function w5(e){return{name:e.name,displayName:e.displayName,description:e.description,category:e.category,icon:e.icon,version:e.version,chartRepo:e.chartRepo,chartName:e.chartName,installedInstances:e.installedInstances?.map(t=>({namespace:t.namespace,chart:t.chart,version:t.version,releaseName:t.releaseName})),isCustom:e.isCustom}}class S5{statuses=new Map;getStatus(t,r,l){const a=this.getKey(t,r,l);return this.statuses.get(a)}setStatus(t,r,l,a,m,d,i){const n=this.getKey(t,r,i),g=new Date().toISOString(),v=this.statuses.get(n);this.statuses.set(n,{status:l,progress:a,message:m,error:d,installedAt:l==="installed"&&!v?.installedAt?g:v?.installedAt,updatedAt:g})}updateProgress(t,r,l,a,m){const d=this.getKey(t,r,m),i=this.statuses.get(d);i&&this.statuses.set(d,{...i,progress:l,message:a,updatedAt:new Date().toISOString()})}markInstalled(t,r,l,a){this.setStatus(t,r,"installed",100,l,void 0,a)}markFailed(t,r,l,a){this.setStatus(t,r,"failed",0,void 0,l,a)}clearStatus(t,r,l){const a=this.getKey(t,r,l);this.statuses.delete(a)}getAllStatuses(t){const r=[];for(const[l,a]of this.statuses.entries())l.startsWith(`${t}:`)&&r.push(a);return r}getKey(t,r,l){return l?`${t}:${r}:${l}`:`${t}:${r}`}syncWithInstalled(t){for(const r of t){const l=r.status||"installed";this.setStatus(r.releaseName,r.namespace,l,l==="installed"?100:void 0,`Installed version ${r.version}`,void 0,r.clusterName)}}}const vc=new S5;var C5=w('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z">'),k5=w('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 6h16M4 10h16M4 14h16M4 18h16">'),M5=w('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1v-4zM14 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z">'),A5=w('<div class=space-y-4><h2 class="text-lg font-semibold flex items-center gap-2"><span class="w-3 h-3 rounded-full"></span></h2><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">'),L5=w('<div class="absolute top-2 right-2 px-2 py-1 rounded text-xs font-medium flex items-center gap-1"style="background:rgba(6, 182, 212, 0.2);color:var(--accent-primary)"><div class=spinner style=width:12px;height:12px></div>Deploying...'),E5=w('<div class="absolute top-2 right-2 px-2 py-1 rounded text-xs font-medium flex items-center gap-1"style="background:rgba(34, 197, 94, 0.2);color:var(--success-color)"><svg class="w-3 h-3"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"clip-rule=evenodd></path></svg> Installed'),T5=w("<div class=spinner style=width:24px;height:24px>"),D5=w('<div class="flex items-center gap-2"><span class=text-xs style=color:var(--accent-primary)>to '),R5=w('<button class="px-3 py-1.5 rounded-lg text-sm font-medium transition-all hover:opacity-80"style=background:var(--accent-primary);color:#000>Install'),P5=w('<button class="p-1.5 rounded-lg text-sm transition-all hover:opacity-80 ml-2"title="Remove custom app"style="background:rgba(239, 68, 68, 0.2);color:var(--error-color)"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">'),I5=w('<div class="mt-3 pt-3 border-t space-y-2"style=border-color:var(--border-color)><div class="text-xs font-medium"style=color:var(--text-muted)>Installed Instances:'),B5=w('<div><div class="flex items-start gap-3"><div class="p-3 rounded-lg"style=background:var(--bg-tertiary)></div><div class="flex-1 min-w-0"><h3 class=font-semibold style=color:var(--text-primary)></h3><p class="text-xs mt-0.5"style=color:var(--text-muted)>v</p></div></div><p class="mt-3 text-sm line-clamp-2"style=color:var(--text-secondary)></p><div class="mt-4 flex items-center justify-between"><span class="text-xs px-2 py-1 rounded"style=background:var(--bg-tertiary);color:var(--text-muted)>'),N5=w('<svg class="w-6 h-6"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2>'),O5=w('<div class="flex items-center justify-between p-2 rounded"style=background:var(--bg-tertiary)><div class="flex-1 min-w-0"><div class="text-xs font-medium truncate"style=color:var(--text-primary)></div><div class=text-xs style=color:var(--text-muted)>  v</div></div><div class="flex items-center gap-1 ml-2"><button class="p-1 rounded hover:bg-[var(--bg-secondary)] transition-colors"title="View pods"style=color:var(--success-color)><svg class="w-3.5 h-3.5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg></button><button class="p-1 rounded hover:bg-[var(--bg-secondary)] transition-colors"title=Uninstall style=color:var(--error-color)><svg class="w-3.5 h-3.5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">'),z5=w('<div class="overflow-hidden rounded-lg"style=background:#0d1117><div class=overflow-x-auto><table class="data-table terminal-table"><thead><tr><th class=whitespace-nowrap>App</th><th class=whitespace-nowrap>Category</th><th class=whitespace-nowrap>Version</th><th class=whitespace-nowrap>Chart</th><th class=whitespace-nowrap>Status</th><th class=whitespace-nowrap>Namespace</th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),F5=w('<tr><td colspan=7 class="text-center py-8"style=color:var(--text-muted)>No apps found'),H5=w('<span class="badge badge-info flex items-center gap-1"><div class=spinner style=width:12px;height:12px></div>Deploying'),j5=w('<button class="px-3 py-1 rounded text-sm transition-all hover:opacity-80"style="background:rgba(34, 197, 94, 0.2);color:var(--success-color)">View'),U5=w('<button class="px-3 py-1 rounded text-sm transition-all hover:opacity-80"style="background:rgba(239, 68, 68, 0.2);color:var(--error-color)">Uninstall'),V5=w('<tr><td><div class="flex items-center gap-3"><div class="p-2 rounded-lg"style=background:var(--bg-tertiary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></div><div><div class=font-medium style=color:var(--text-primary)></div><div class=text-xs style=color:var(--text-muted)></div></div></div></td><td><span class="text-xs px-2 py-1 rounded"></span></td><td class="font-mono text-sm"></td><td class="font-mono text-sm"></td><td></td><td class=text-sm></td><td><div class="flex items-center gap-2">'),W5=w('<span class="badge badge-success">Installed'),q5=w('<span class="badge badge-default">Available'),K5=w('<button class="px-3 py-1 rounded text-sm transition-all hover:opacity-80"style=background:var(--accent-primary);color:#000>Install'),Y5=w('<div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3">'),G5=w("<div class=spinner style=width:12px;height:12px>"),J5=w('<div class="absolute top-1 right-1">'),X5=w('<button class="px-2 py-0.5 rounded text-xs transition-all hover:opacity-80"style=background:var(--accent-primary);color:#000>Install'),Z5=w('<button><div class="flex items-center gap-2 mb-2"><div class="p-1.5 rounded"style=background:var(--bg-tertiary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></div></div><h4 class="font-medium text-sm truncate mb-1"style=color:var(--text-primary)></h4><p class="text-xs truncate mb-2"style=color:var(--text-muted)></p><div class="flex items-center justify-between text-xs"><span style=color:var(--text-muted)>v'),Q5=w('<div class="w-2 h-2 rounded-full bg-green-500"title=Installed>'),ek=w('<button class="px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-all hover:opacity-80"style=background:var(--accent-primary);color:#000><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 4v16m8-8H4"></path></svg>Add Custom App'),tk=w('<div class="flex items-center gap-1 p-1 rounded-lg"style=background:var(--bg-secondary)><button><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg>Marketplace<span class="px-2 py-0.5 rounded text-xs"style=background:var(--bg-primary);color:var(--text-muted)></span></button><button><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"></path></svg>Custom Apps<span class="px-2 py-0.5 rounded text-xs"style=background:var(--bg-primary);color:var(--text-muted)>'),rk=w('<div class="card p-12 text-center"><div class="w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center"style=background:var(--bg-tertiary)><svg class="w-8 h-8"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-muted)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"></path></svg></div><h3 class="text-lg font-semibold mb-2"style=color:var(--text-primary)>No Custom Apps</h3><p class=mb-4 style=color:var(--text-secondary)>Add your own Helm charts to deploy custom applications.</p><button class="px-4 py-2 rounded-lg text-sm font-medium transition-all hover:opacity-80"style=background:var(--accent-primary);color:#000>Add Your First Custom App'),sk=w('<div class="p-4 rounded-lg border-l-4"style="background:rgba(245, 158, 11, 0.1);border-left-color:#f59e0b;color:var(--text-primary)"><div class="flex items-start gap-2"><svg class="w-5 h-5 mt-0.5 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div class=flex-1><h4 class="font-semibold mb-1">Prerequisites Required</h4><p class="text-sm mb-2">This local cluster installer requires <strong>Docker</strong> to be installed and running.</p><ul class="text-sm list-disc list-inside space-y-1 mb-2"style=color:var(--text-secondary)><li>Docker Desktop must be installed</li><li>Docker Desktop must be running</li><li>Docker daemon must be accessible</li></ul><p class=text-xs style=color:var(--text-muted)>If Docker is not installed, the installation will fail. Check server logs for detailed error messages.'),ik=w("<div class=spinner style=width:16px;height:16px>"),nk=w('<div class=space-y-4><p style=color:var(--text-secondary)></p><div class="p-4 rounded-lg"style=background:var(--bg-tertiary)><div class="flex items-center justify-between text-sm"><span style=color:var(--text-muted)>Chart</span><span style=color:var(--text-primary)></span></div><div class="flex items-center justify-between text-sm mt-2"><span style=color:var(--text-muted)>Version</span><span style=color:var(--text-primary)></span></div><div class="flex items-center justify-between text-sm mt-2"><span style=color:var(--text-muted)>Repository</span><span class="text-xs truncate max-w-xs"style=color:var(--accent-primary)></span></div></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Target Namespace</label><input type=text class="w-full px-3 py-2 rounded-lg text-sm"placeholder=default style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div class="flex justify-end gap-3 mt-6"><button class="px-4 py-2 rounded-lg text-sm font-medium"style=background:var(--bg-secondary);color:var(--text-secondary)>Cancel</button><button class="px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 disabled:opacity-50"style=background:var(--accent-primary);color:#000>'),lk=w('<div class=space-y-4><p style=color:var(--text-secondary)>Add your own Helm chart to the marketplace. Custom apps are stored locally in your browser.</p><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>App Name <span style=color:var(--error-color)>*</span></label><input type=text class="w-full px-3 py-2 rounded-lg text-sm"placeholder=my-app style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Display Name</label><input type=text class="w-full px-3 py-2 rounded-lg text-sm"placeholder="My Application"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Chart Repository URL <span style=color:var(--error-color)>*</span></label><input type=text class="w-full px-3 py-2 rounded-lg text-sm"placeholder=https://charts.example.com style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Chart Name <span style=color:var(--error-color)>*</span></label><input type=text class="w-full px-3 py-2 rounded-lg text-sm"placeholder=my-chart style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div class="grid grid-cols-2 gap-4"><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Category</label><select class="w-full px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=Custom>Custom</option><option value=Networking>Networking</option><option value=CI/CD>CI/CD</option><option value=Observability>Observability</option><option value=Security>Security</option><option value=Data>Data</option></select></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Version</label><input type=text class="w-full px-3 py-2 rounded-lg text-sm"placeholder=1.0.0 style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Description</label><textarea class="w-full px-3 py-2 rounded-lg text-sm resize-none"placeholder="Optional description for the app"rows=3 style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></textarea></div><div class="flex justify-end gap-3 mt-6"><button class="px-4 py-2 rounded-lg text-sm font-medium"style=background:var(--bg-secondary);color:var(--text-secondary)>Cancel</button><button class="px-4 py-2 rounded-lg text-sm font-medium"style=background:var(--accent-primary);color:#000>Add App'),ok=w('<div class=space-y-6><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)></h1><p style=color:var(--text-secondary)></p></div><div class="flex items-center gap-3"><div class="flex items-center rounded-lg overflow-hidden"style="background:var(--bg-secondary);border:1px solid var(--border-color)"></div><button class=icon-btn title=Refresh style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class="card px-4 py-2 flex items-center gap-2"style="border-left:3px solid var(--accent-primary)"><span class=text-sm style=color:var(--text-secondary)>Total Apps</span><span class="text-xl font-bold"style=color:var(--text-primary)></span></div><div class="card px-4 py-2 flex items-center gap-2"style="border-left:3px solid var(--success-color)"><span class=text-sm style=color:var(--text-secondary)>Installed</span><span class="text-xl font-bold"style=color:var(--success-color)></span></div><div class="card px-4 py-2 flex items-center gap-2"style="border-left:3px solid #8b5cf6"><span class=text-sm style=color:var(--text-secondary)>Available</span><span class="text-xl font-bold"style=color:#8b5cf6></span></div><div class=flex-1></div><input type=text placeholder="Search apps..."class="px-3 py-2 rounded-lg text-sm w-64"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div class="flex flex-wrap gap-2">'),ak=w('<button><span class="hidden sm:inline capitalize">'),ck=w("<button>");const dk=()=>{try{const e=localStorage.getItem("kubegraf-custom-apps");return e?JSON.parse(e):[]}catch{return[]}},fc=e=>{localStorage.setItem("kubegraf-custom-apps",JSON.stringify(e))},ml=_5.map(w5),bl=Object.fromEntries(Mi.map(e=>[e.id,e.color])),go=e=>{const[t,r]=W(""),[l,a]=W("all"),[m,d]=W(null),[i,n]=W(!1),[g,v]=W(!1),[p,y]=W(!1),[x,M]=W("default"),[b,o]=W("kubegraf-cluster"),[c,u]=W(!1),[h,f]=W([]),[$,C]=W(!1),[k,S]=W("card"),[L,P]=W({}),[I,D]=W(!1),[T,B]=W(null),[N,O]=W(!1),[H,A]=W(!1),[z,F]=W(null);zt(()=>{const oe=sessionStorage.getItem("kubegraf-auto-filter");oe&&(a(oe),sessionStorage.removeItem("kubegraf-auto-filter"));const ie=sessionStorage.getItem("kubegraf-default-tab");ie&&(ie==="marketplace"||ie==="custom")&&(q(ie),sessionStorage.removeItem("kubegraf-default-tab")),oe==="Local Cluster"&&setTimeout(()=>{const ue=document.querySelector('[data-category="Local Cluster"]');ue&&ue.scrollIntoView({behavior:"smooth",block:"start"})},300)});const[j,q]=W(e.defaultTab||"marketplace");It(()=>{e.defaultTab&&q(e.defaultTab)});const[U,Y]=W(dk()),[V,X]=W(!1),[R,G]=W({name:"",displayName:"",description:"",category:"Custom",chartRepo:"",chartName:"",version:"1.0.0"}),[te,{refetch:ae}]=it(async()=>{try{return await Fe.getInstalledApps()}catch{return[]}}),Q=et(()=>{const oe=te()||[];return vc.syncWithInstalled(oe.map(ie=>({namespace:ie.namespace,chart:ie.chart,version:ie.version,releaseName:ie.name,status:"installed"}))),ml.map(ie=>{const ue=oe.filter(he=>he.name===ie.name||he.chart&&he.chart.toLowerCase().includes(ie.chartName.toLowerCase())).map(he=>{const Te=vc.getStatus(he.name,he.namespace);return{namespace:he.namespace,chart:he.chart,version:he.version,releaseName:he.name,status:Te?.status||"installed"}});return{...ie,installedInstances:ue}})}),Z=et(()=>["all",...Mi.map(ie=>ie.id)]),ne=et(()=>{let oe=Q();const ie=t().toLowerCase(),ue=l();return ue!=="all"&&(oe=oe.filter(he=>he.category===ue)),ie&&(oe=oe.filter(he=>he.displayName.toLowerCase().includes(ie)||he.description.toLowerCase().includes(ie)||he.category.toLowerCase().includes(ie))),oe});et(()=>{const oe=ne(),ie={};return oe.forEach(ue=>{ie[ue.category]||(ie[ue.category]=[]),ie[ue.category].push(ue)}),Object.entries(ie).map(([ue,he])=>({name:ue,apps:he}))});const $e=et(()=>{const oe=Q();return{total:oe.length,installed:oe.filter(ie=>ie.installedInstances&&ie.installedInstances.length>0).length,available:oe.filter(ie=>!ie.installedInstances||ie.installedInstances.length===0).length}}),re=(oe,ie,ue)=>{const he=setInterval(async()=>{try{(await Fe.getInstalledApps())?.some(Se=>Se.name===oe)&&(clearInterval(he),P(Se=>{const pe={...Se};return delete pe[oe],pe}),Je(`${ie} deployed successfully to ${ue}`,"success"),ae())}catch{}},5e3);setTimeout(()=>{clearInterval(he),P(Te=>{const ee={...Te};return delete ee[oe],ee})},3e5)},de=async()=>{const oe=m();if(!oe)return;u(!0);const ie=x()||"default",ue=a5(oe.displayName,oe.version,ie,["Validating namespace","Adding Helm repository","Fetching chart metadata","Installing resources","Verifying deployment"]);try{Nr(ue,"task-0",{status:"running",progress:30,startTime:Date.now()}),await new Promise(he=>setTimeout(he,500)),Nr(ue,"task-0",{status:"completed",progress:100}),Nr(ue,"task-1",{status:"running",progress:40,startTime:Date.now()}),await new Promise(he=>setTimeout(he,500)),Nr(ue,"task-1",{status:"completed",progress:100}),Nr(ue,"task-2",{status:"running",progress:50,startTime:Date.now()}),await new Promise(he=>setTimeout(he,500)),Nr(ue,"task-2",{status:"completed",progress:100}),Nr(ue,"task-3",{status:"running",progress:60,startTime:Date.now(),message:`Deploying ${oe.displayName}...`}),await Fe.installApp(oe.name,ie),Nr(ue,"task-3",{status:"completed",progress:100}),Nr(ue,"task-4",{status:"running",progress:80,startTime:Date.now()}),P(he=>({...he,[oe.name]:{namespace:ie,startTime:Date.now()}})),re(oe.name,oe.displayName,ie),await new Promise(he=>setTimeout(he,1e3)),Nr(ue,"task-4",{status:"completed",progress:100,message:`${oe.displayName} deployed successfully!`}),Je(`${oe.displayName} installed successfully in ${ie}`,"success"),n(!1)}catch(he){const Te=["task-0","task-1","task-2","task-3","task-4"];for(const ee of Te){Nr(ue,ee,{status:"failed",message:he instanceof Error?he.message:"Unknown error"});break}Je(`Failed to install ${oe.displayName}: ${he instanceof Error?he.message:"Unknown error"}`,"error")}finally{u(!1)}},le=oe=>{const ie=oe.installedNamespace||"default";console.log("Navigating to pods for app:",oe.name,"in namespace:",ie),ki(ie),Ut("pods")},xe=(oe,ie)=>{B({app:oe,instance:ie}),D(!0)},ye=async()=>{const oe=T();if(oe){O(!0);try{await Fe.uninstallApp(oe.instance.releaseName,oe.instance.namespace),Je(`${oe.app.displayName} uninstalled from ${oe.instance.namespace}`,"success"),ae(),D(!1),B(null)}catch(ie){Je(`Failed to uninstall ${oe.app.displayName}: ${ie instanceof Error?ie.message:"Unknown error"}`,"error")}finally{O(!1)}}},ke=()=>{const oe=R();if(!oe.name||!oe.chartRepo||!oe.chartName){Je("Please fill in all required fields","error");return}const ue={name:oe.name.toLowerCase().replace(/[^a-z0-9-]/g,"-"),displayName:oe.displayName||oe.name,description:oe.description||`Custom Helm chart: ${oe.chartName}`,category:oe.category||"Custom",icon:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4",version:oe.version||"1.0.0",chartRepo:oe.chartRepo,chartName:oe.chartName,isCustom:!0},he=[...U(),ue];Y(he),fc(he),G({name:"",displayName:"",description:"",category:"Custom",chartRepo:"",chartName:"",version:"1.0.0"}),X(!1),Je(`${ue.displayName} added to custom apps`,"success")},ge=oe=>{F(oe),A(!0)},Ce=()=>{const oe=z();if(!oe)return;const ie=U().filter(ue=>ue.name!==oe.name);Y(ie),fc(ie),Je(`${oe.displayName} removed from custom apps`,"success"),A(!1),F(null)},_e=et(()=>{const oe=te()||[],ie=ml.map(he=>{const Te=oe.filter(ee=>ee.name===he.name||ee.chart&&ee.chart.toLowerCase().includes(he.chartName.toLowerCase())).map(ee=>({namespace:ee.namespace,chart:ee.chart,version:ee.version,releaseName:ee.name}));return{...he,installedInstances:Te}}),ue=U().map(he=>{const Te=oe.filter(ee=>ee.name===he.name||ee.chart&&ee.chart.toLowerCase().includes(he.chartName.toLowerCase())).map(ee=>({namespace:ee.namespace,chart:ee.chart,version:ee.version,releaseName:ee.name}));return{...he,installedInstances:Te}});return{marketplace:ie,custom:ue}}),Me=et(()=>{const{marketplace:oe,custom:ie}=_e(),ue=j()==="marketplace"?oe:ie,he=t().toLowerCase(),Te=l();let ee=ue;return Te!=="all"&&(ee=ee.filter(Se=>Se.category===Te)),he&&(ee=ee.filter(Se=>Se.displayName.toLowerCase().includes(he)||Se.description.toLowerCase().includes(he)||Se.category.toLowerCase().includes(he))),ee}),ve=et(()=>{const oe=Me(),ie={};return oe.forEach(ue=>{ie[ue.category]||(ie[ue.category]=[]),ie[ue.category].push(ue)}),Object.entries(ie).map(([ue,he])=>({name:ue,apps:he}))}),be=oe=>_(Dn,{get children(){return[_(Or,{get when(){return oe.mode==="card"},get children(){return C5()}}),_(Or,{get when(){return oe.mode==="list"},get children(){return k5()}}),_(Or,{get when(){return oe.mode==="grid"},get children(){return M5()}})]}}),ce=()=>_(Xe,{get each(){return ve()},children:oe=>(()=>{var ie=A5(),ue=ie.firstChild,he=ue.firstChild,Te=ue.nextSibling;return s(ue,()=>Mi.find(ee=>ee.id===oe.name)?.name||oe.name,null),s(Te,_(Xe,{get each(){return oe.apps},children:ee=>{const Se=()=>!!L()[ee.name],pe=()=>L()[ee.name];return(()=>{var De=B5(),Ne=De.firstChild,me=Ne.firstChild,He=me.nextSibling,Ze=He.firstChild,we=Ze.nextSibling;we.firstChild;var ze=Ne.nextSibling,Pe=ze.nextSibling,Ue=Pe.firstChild;return s(De,_(K,{get when(){return Se()},get children(){var Oe=L5();return Oe.firstChild,Oe}}),Ne),s(De,_(K,{get when(){return Re(()=>!!(ee.installedInstances&&ee.installedInstances.length>0))()&&!Se()},get children(){var Oe=E5(),fe=Oe.firstChild,Le=fe.nextSibling;return s(Oe,()=>ee.installedInstances.length,Le),Oe}}),Ne),s(me,_(K,{get when(){return Se()},get fallback(){return(()=>{var Oe=N5(),fe=Oe.firstChild;return J(Le=>{var We=Es(ee.category),Ee=ee.icon;return We!==Le.e&&E(Oe,"color",Le.e=We),Ee!==Le.t&&dt(fe,"d",Le.t=Ee),Le},{e:void 0,t:void 0}),Oe})()},get children(){return T5()}})),s(Ze,()=>ee.displayName),s(we,()=>ee.version,null),s(ze,()=>ee.description),s(Ue,()=>ee.chartName),s(Pe,_(K,{get when(){return Se()},get children(){var Oe=D5(),fe=Oe.firstChild;return fe.firstChild,s(fe,()=>pe()?.namespace,null),Oe}}),null),s(Pe,_(K,{get when(){return!Se()},get children(){return[(()=>{var Oe=R5();return Oe.$$click=fe=>{fe.stopPropagation(),d(ee),ee.name==="mlflow"?v(!0):ee.name==="feast"?y(!0):n(!0)},Oe})(),_(K,{get when(){return ee.isCustom},get children(){var Oe=P5();return Oe.$$click=fe=>{fe.stopPropagation(),ge(ee)},Oe}})]}}),null),s(De,_(K,{get when(){return Re(()=>!!(ee.installedInstances&&ee.installedInstances.length>0))()&&!Se()},get children(){var Oe=I5();return Oe.firstChild,s(Oe,_(Xe,{get each(){return ee.installedInstances},children:fe=>(()=>{var Le=O5(),We=Le.firstChild,Ee=We.firstChild,Ie=Ee.nextSibling,qe=Ie.firstChild,Be=We.nextSibling,Ke=Be.firstChild,Ye=Ke.nextSibling;return s(Ee,()=>fe.releaseName),s(Ie,()=>fe.namespace,qe),s(Ie,()=>fe.version,null),Ke.$$click=lt=>{lt.stopPropagation(),ki(fe.namespace),Ut("pods")},Ye.$$click=lt=>{lt.stopPropagation(),xe(ee,fe)},Le})()}),null),Oe}}),null),J(Oe=>{var fe=`card p-4 relative overflow-hidden group transition-all ${ee.installedInstances&&ee.installedInstances.length>0?"hover:border-blue-500/30":"hover:border-cyan-500/30"} ${Se()?"animate-pulse":""}`,Le=`4px solid ${Es(ee.category)}`;return fe!==Oe.e&&tt(De,Oe.e=fe),Le!==Oe.t&&E(De,"border-left",Oe.t=Le),Oe},{e:void 0,t:void 0}),De})()}})),J(ee=>{var Se=oe.name,pe=Es(oe.name),De=Es(oe.name);return Se!==ee.e&&dt(ie,"data-category",ee.e=Se),pe!==ee.t&&E(ue,"color",ee.t=pe),De!==ee.a&&E(he,"background",ee.a=De),ee},{e:void 0,t:void 0,a:void 0}),ie})()}),Ae=()=>(()=>{var oe=z5(),ie=oe.firstChild,ue=ie.firstChild,he=ue.firstChild,Te=he.nextSibling;return s(Te,_(Xe,{get each(){return Me()},get fallback(){return(()=>{var ee=F5();return ee.firstChild,ee})()},children:ee=>{const Se=()=>!!L()[ee.name];return(()=>{var pe=V5(),De=pe.firstChild,Ne=De.firstChild,me=Ne.firstChild,He=me.firstChild,Ze=He.firstChild,we=me.nextSibling,ze=we.firstChild,Pe=ze.nextSibling,Ue=De.nextSibling,Oe=Ue.firstChild,fe=Ue.nextSibling,Le=fe.nextSibling,We=Le.nextSibling,Ee=We.nextSibling,Ie=Ee.nextSibling,qe=Ie.firstChild;return s(ze,()=>ee.displayName),s(Pe,()=>ee.description),s(Oe,()=>ee.category),s(fe,()=>ee.version),s(Le,()=>ee.chartName),s(We,_(K,{get when(){return Se()},get fallback(){return _(K,{get when(){return ee.installed},get fallback(){return q5()},get children(){return W5()}})},get children(){var Be=H5();return Be.firstChild,Be}})),s(Ee,()=>ee.installedNamespace||"-"),s(qe,_(K,{get when(){return!Se()},get children(){return _(K,{get when(){return ee.installed},get fallback(){return(()=>{var Be=K5();return Be.$$click=()=>{d(ee),ee.name==="mlflow"?v(!0):n(!0)},Be})()},get children(){return[(()=>{var Be=j5();return Be.$$click=()=>le(ee),Be})(),(()=>{var Be=U5();return Be.$$click=()=>xe(ee),Be})()]}})}})),J(Be=>{var Ke=Es(ee.category),Ye=ee.icon,lt=`${Es(ee.category)}20`,gt=bl[ee.category]||"var(--accent-primary)";return Ke!==Be.e&&E(He,"color",Be.e=Ke),Ye!==Be.t&&dt(Ze,"d",Be.t=Ye),lt!==Be.a&&E(Oe,"background",Be.a=lt),gt!==Be.o&&E(Oe,"color",Be.o=gt),Be},{e:void 0,t:void 0,a:void 0,o:void 0}),pe})()}})),oe})(),se=()=>(()=>{var oe=Y5();return s(oe,_(Xe,{get each(){return Me()},children:ie=>{const ue=()=>!!L()[ie.name],he=()=>ie.installed&&!ue();return(()=>{var Te=Z5(),ee=Te.firstChild,Se=ee.firstChild,pe=Se.firstChild,De=pe.firstChild,Ne=ee.nextSibling,me=Ne.nextSibling,He=me.nextSibling,Ze=He.firstChild;return Ze.firstChild,Te.$$click=()=>he()&&le(ie),s(Te,_(K,{get when(){return ue()||he()},get children(){var we=J5();return s(we,_(K,{get when(){return ue()},get fallback(){return Q5()},get children(){return G5()}})),we}}),ee),s(Ne,()=>ie.displayName),s(me,()=>ie.description),s(Ze,()=>ie.version,null),s(He,_(K,{get when(){return Re(()=>!ue())()&&!he()},get children(){var we=X5();return we.$$click=ze=>{ze.stopPropagation(),d(ie),ie.name==="mlflow"?v(!0):n(!0)},we}}),null),J(we=>{var ze=`card p-3 text-left hover:border-cyan-500/30 transition-colors relative ${he()?"cursor-pointer":""} ${ue()?"animate-pulse":""}`,Pe=`3px solid ${bl[ie.category]||"var(--accent-primary)"}`,Ue=bl[ie.category]||"var(--accent-primary)",Oe=ie.icon,fe=ie.displayName,Le=ie.description;return ze!==we.e&&tt(Te,we.e=ze),Pe!==we.t&&E(Te,"border-left",we.t=Pe),Ue!==we.a&&E(pe,"color",we.a=Ue),Oe!==we.o&&dt(De,"d",we.o=Oe),fe!==we.i&&dt(Ne,"title",we.i=fe),Le!==we.n&&dt(me,"title",we.n=Le),we},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),Te})()}})),oe})();return(()=>{var oe=ok(),ie=oe.firstChild,ue=ie.firstChild,he=ue.firstChild,Te=he.nextSibling,ee=ue.nextSibling,Se=ee.firstChild,pe=Se.nextSibling,De=ie.nextSibling,Ne=De.firstChild,me=Ne.firstChild,He=me.nextSibling,Ze=Ne.nextSibling,we=Ze.firstChild,ze=we.nextSibling,Pe=Ze.nextSibling,Ue=Pe.firstChild,Oe=Ue.nextSibling,fe=Pe.nextSibling,Le=fe.nextSibling,We=De.nextSibling;return s(he,_(K,{get when(){return j()==="marketplace"},children:"Apps Marketplace"}),null),s(he,_(K,{get when(){return j()==="custom"},children:"Custom Apps"}),null),s(Te,_(K,{get when(){return j()==="marketplace"},children:"Deploy platform tools and applications with one click"}),null),s(Te,_(K,{get when(){return j()==="custom"},children:"Manage your custom application deployments"}),null),s(Se,_(Xe,{each:["card","list","grid"],children:Ee=>(()=>{var Ie=ak(),qe=Ie.firstChild;return Ie.$$click=()=>S(Ee),s(Ie,_(be,{mode:Ee}),qe),s(qe,Ee),J(Be=>{var Ke=`px-3 py-2 flex items-center gap-2 text-sm transition-colors ${k()===Ee?"text-white":"text-gray-400 hover:text-white"}`,Ye=k()===Ee?{background:"var(--accent-primary)"}:{background:"transparent"},lt=`${Ee.charAt(0).toUpperCase()+Ee.slice(1)} View`;return Ke!==Be.e&&tt(Ie,Be.e=Ke),Be.t=_t(Ie,Ye,Be.t),lt!==Be.a&&dt(Ie,"title",Be.a=lt),Be},{e:void 0,t:void 0,a:void 0}),Ie})()})),s(ee,_(K,{get when(){return j()==="custom"},get children(){var Ee=ek();return Ee.$$click=()=>X(!0),Ee}}),pe),pe.$$click=()=>ae(),s(oe,_(K,{when:!0,get children(){var Ee=tk(),Ie=Ee.firstChild,qe=Ie.firstChild,Be=qe.nextSibling,Ke=Be.nextSibling,Ye=Ie.nextSibling,lt=Ye.firstChild,gt=lt.nextSibling,Qe=gt.nextSibling;return Ie.$$click=()=>q("marketplace"),s(Ke,()=>ml.length),Ye.$$click=()=>q("custom"),s(Qe,()=>U().length),J(ct=>{var ft=`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all flex items-center justify-center gap-2 ${j()==="marketplace"?"shadow-sm":"hover:opacity-80"}`,Ge=j()==="marketplace"?"var(--bg-tertiary)":"transparent",st=j()==="marketplace"?"var(--accent-primary)":"var(--text-secondary)",vt=`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all flex items-center justify-center gap-2 ${j()==="custom"?"shadow-sm":"hover:opacity-80"}`,at=j()==="custom"?"var(--bg-tertiary)":"transparent",pt=j()==="custom"?"var(--accent-primary)":"var(--text-secondary)";return ft!==ct.e&&tt(Ie,ct.e=ft),Ge!==ct.t&&E(Ie,"background",ct.t=Ge),st!==ct.a&&E(Ie,"color",ct.a=st),vt!==ct.o&&tt(Ye,ct.o=vt),at!==ct.i&&E(Ye,"background",ct.i=at),pt!==ct.n&&E(Ye,"color",ct.n=pt),ct},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),Ee}}),De),s(He,()=>$e().total),s(ze,()=>$e().installed),s(Oe,()=>$e().available),Le.$$input=Ee=>r(Ee.currentTarget.value),s(We,_(Xe,{get each(){return Z()},children:Ee=>(()=>{var Ie=ck();return Ie.$$click=()=>a(Ee),s(Ie,()=>Ee==="all"?"All Categories":Mi.find(qe=>qe.id===Ee)?.name||Ee),J(qe=>{var Be=`px-4 py-2 rounded-lg text-sm font-medium transition-all ${l()===Ee?"bg-gradient-to-r from-cyan-500/20 to-blue-500/20 border border-cyan-500/40":"bg-white/5 border border-transparent hover:border-white/10"}`,Ke=l()===Ee?Ee==="all"?"var(--accent-primary)":Es(Ee):"var(--text-secondary)";return Be!==qe.e&&tt(Ie,qe.e=Be),Ke!==qe.t&&E(Ie,"color",qe.t=Ke),qe},{e:void 0,t:void 0}),Ie})()})),s(oe,_(K,{get when(){return Re(()=>j()==="custom")()&&U().length===0},get children(){var Ee=rk(),Ie=Ee.firstChild;Ie.firstChild;var qe=Ie.nextSibling,Be=qe.nextSibling,Ke=Be.nextSibling;return Ke.$$click=()=>X(!0),Ee}}),null),s(oe,_(Dn,{get children(){return[_(Or,{get when(){return k()==="card"},get children(){return _(ce,{})}}),_(Or,{get when(){return k()==="list"},get children(){return _(Ae,{})}}),_(Or,{get when(){return k()==="grid"},get children(){return _(se,{})}})]}}),null),s(oe,_(mt,{get isOpen(){return i()},onClose:()=>n(!1),get title(){return`Install ${m()?.displayName}`},get children(){var Ee=nk(),Ie=Ee.firstChild,qe=Ie.nextSibling,Be=qe.firstChild,Ke=Be.firstChild,Ye=Ke.nextSibling,lt=Be.nextSibling,gt=lt.firstChild,Qe=gt.nextSibling,ct=lt.nextSibling,ft=ct.firstChild,Ge=ft.nextSibling,st=qe.nextSibling,vt=st.firstChild,at=vt.nextSibling,pt=st.nextSibling,xt=pt.firstChild,Et=xt.nextSibling;return s(Ie,()=>m()?.description),s(Ee,_(K,{get when(){return m()?.name==="k3d"||m()?.name==="kind"||m()?.name==="minikube"},get children(){var yt=sk(),Tt=yt.firstChild,Bt=Tt.firstChild,Dt=Bt.nextSibling,At=Dt.firstChild,Nt=At.nextSibling,Ve=Nt.nextSibling;return Ve.nextSibling,yt}}),qe),s(Ye,()=>m()?.chartName),s(Qe,()=>m()?.version),s(Ge,()=>m()?.chartRepo),at.$$input=yt=>M(yt.currentTarget.value),xt.$$click=()=>n(!1),Et.$$click=de,s(Et,_(K,{get when(){return c()},get children(){return ik()}}),null),s(Et,()=>c()?"Installing...":"Install",null),J(()=>Et.disabled=c()),J(()=>at.value=x()),Ee}}),null),s(oe,_(K,{get when(){return g()},get children(){return _(v5,{onClose:()=>{v(!1),d(null)},onSuccess:()=>{ae(),Je("MLflow installation started","success")}})}}),null),s(oe,_(K,{get when(){return p()},get children(){return _(Wd,{onClose:()=>{y(!1),d(null)},onSuccess:()=>{ae(),Je("Feast installation started","success")}})}}),null),s(oe,_(mt,{get isOpen(){return V()},onClose:()=>X(!1),title:"Add Custom App",get children(){var Ee=lk(),Ie=Ee.firstChild,qe=Ie.nextSibling,Be=qe.firstChild,Ke=Be.firstChild;Ke.nextSibling;var Ye=Be.nextSibling,lt=qe.nextSibling,gt=lt.firstChild,Qe=gt.nextSibling,ct=lt.nextSibling,ft=ct.firstChild,Ge=ft.firstChild;Ge.nextSibling;var st=ft.nextSibling,vt=ct.nextSibling,at=vt.firstChild,pt=at.firstChild;pt.nextSibling;var xt=at.nextSibling,Et=vt.nextSibling,yt=Et.firstChild,Tt=yt.firstChild,Bt=Tt.nextSibling,Dt=yt.nextSibling,At=Dt.firstChild,Nt=At.nextSibling,Ve=Et.nextSibling,nt=Ve.firstChild,rt=nt.nextSibling,wt=Ve.nextSibling,$t=wt.firstChild,bt=$t.nextSibling;return Ye.$$input=kt=>G(Mt=>({...Mt,name:kt.currentTarget.value})),Qe.$$input=kt=>G(Mt=>({...Mt,displayName:kt.currentTarget.value})),st.$$input=kt=>G(Mt=>({...Mt,chartRepo:kt.currentTarget.value})),xt.$$input=kt=>G(Mt=>({...Mt,chartName:kt.currentTarget.value})),Bt.addEventListener("change",kt=>G(Mt=>({...Mt,category:kt.currentTarget.value}))),Nt.$$input=kt=>G(Mt=>({...Mt,version:kt.currentTarget.value})),rt.$$input=kt=>G(Mt=>({...Mt,description:kt.currentTarget.value})),$t.$$click=()=>X(!1),bt.$$click=ke,J(()=>Ye.value=R().name),J(()=>Qe.value=R().displayName),J(()=>st.value=R().chartRepo),J(()=>xt.value=R().chartName),J(()=>Bt.value=R().category),J(()=>Nt.value=R().version),J(()=>rt.value=R().description),Ee}}),null),s(oe,_(U3,{get isOpen(){return I()},get appName(){return T()?.instance.releaseName||""},get displayName(){return T()?.app.displayName||""},get namespace(){return T()?.instance.namespace||""},onClose:()=>{D(!1),B(null)},onConfirm:ye,get loading(){return N()}}),null),s(oe,_(q3,{get isOpen(){return H()},get appName(){return z()?.name||""},get displayName(){return z()?.displayName||""},onClose:()=>{A(!1),F(null)},onConfirm:Ce}),null),J(()=>Le.value=t()),oe})()};ut(["click","input"]);var uk=w('<button class="px-3 py-1.5 rounded-md text-sm"style=background:var(--error-color);color:#fff>Disconnect'),hk=w('<div class="grid gap-4 lg:grid-cols-2">'),gk=w("<div class=space-y-3>"),vk=w('<div class="space-y-2 max-h-64 overflow-y-auto pr-1">'),fk=w('<div class="space-y-3 max-h-80 overflow-y-auto pr-1">'),pk=w('<div class=space-y-6><div class="flex flex-col gap-2"><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-semibold"style=color:var(--text-primary)>Cluster Manager</h1><p class=text-sm style=color:var(--text-secondary)>Discover, connect, and manage every Kubernetes cluster from one place.</p></div><div class="flex items-center gap-3"><div><span></span></div><button class="px-3 py-1.5 rounded-md text-sm"style="border:1px solid var(--border-color)">Auto-detect</button></div></div></div><div class="grid gap-6 lg:grid-cols-2"><div class="p-4 rounded-xl border"style="border:1px solid var(--border-color);background:var(--bg-card)"><div class="flex items-center justify-between mb-4"><div><h2 class="text-lg font-semibold"style=color:var(--text-primary)>Connected Clusters</h2><p class=text-sm style=color:var(--text-secondary)>Track every cluster KubeGraf knows about.</p></div></div><div class="mt-6 border-t pt-4"style=borderColor:var(--border-color)><div class="flex items-center justify-between mb-3"><div><h3 class="text-sm font-semibold"style=color:var(--text-primary)>Runtime kubeconfig contexts</h3><p class=text-xs style=color:var(--text-secondary)>Direct view of every context available in your local kubeconfig.</p></div><button class="px-3 py-1 text-xs rounded-md"style="border:1px solid var(--border-color)">Refresh</button></div></div></div><div class="p-4 rounded-xl border"style="border:1px solid var(--border-color);background:var(--bg-card)"><div class="flex items-center justify-between mb-4"><div><h2 class="text-lg font-semibold"style=color:var(--text-primary)>Auto-detected kubeconfigs</h2><p class=text-sm style=color:var(--text-secondary)>One click connect to any discovered file.</p></div></div><div class="mt-5 border-t pt-4"style=borderColor:var(--border-color)><h3 class="text-sm font-semibold mb-2"style=color:var(--text-primary)>Manual import</h3><div class=space-y-2><input type=text placeholder="Cluster name (optional)"class="w-full px-3 py-2 rounded-md text-sm"style="background:var(--bg-input);border:1px solid var(--border-color);color:var(--text-primary)"><input type=text placeholder=/path/to/kubeconfig class="w-full px-3 py-2 rounded-md text-sm"style="background:var(--bg-input);border:1px solid var(--border-color);color:var(--text-primary)"><select class="w-full px-3 py-2 rounded-md text-sm"style="background:var(--bg-input);border:1px solid var(--border-color);color:var(--text-primary)"></select><button class="w-full px-3 py-2 rounded-md text-sm"style=background:var(--accent-primary);color:#000>Connect cluster'),mk=w('<div class="p-4 rounded-xl border"style="border:1px solid var(--border-color);background:var(--bg-card)"><h3 class="text-base font-semibold mb-1"style=color:var(--text-primary)></h3><p class="text-sm mb-3"style=color:var(--text-secondary)></p><button class="px-3 py-1.5 rounded-md text-sm">'),bk=w("<p class=text-sm style=color:var(--text-muted)>No clusters saved yet."),xk=w('<span class="px-2 py-0.5 text-xs rounded-full"style=background:rgba(59,130,246,0.15);color:#3b82f6>Default'),yk=w('<div class="p-3 rounded-lg border flex flex-col gap-2"style="border:1px solid var(--border-color);background:var(--bg-secondary)"><div class="flex items-center justify-between"><div><div class="flex items-center gap-2"><span class="text-base font-semibold"style=color:var(--text-primary)></span></div><p class=text-xs style=color:var(--text-muted)>  </p></div><div class="flex items-center gap-2"><span class="w-2 h-2 rounded-full"></span><span class=text-xs style=color:var(--text-secondary)></span></div></div><div class="flex flex-wrap gap-2"><button class="px-3 py-1.5 text-sm rounded-md"style=background:var(--accent-primary);color:#000>Connect</button><button class="px-3 py-1.5 text-sm rounded-md"style="border:1px solid var(--border-color)">Disconnect</button><button class="px-3 py-1.5 text-sm rounded-md"style="border:1px solid var(--border-color)">Set Default'),_k=w("<p class=text-sm style=color:var(--text-muted)>No contexts detected. Import a kubeconfig to get started."),$k=w('<span class="px-2 py-0.5 text-xs rounded-full"style=background:rgba(16,185,129,0.15);color:#10b981>Active'),wk=w('<p class="text-xs mt-1"style=color:var(--error-color)>'),Sk=w('<div class="p-3 rounded-lg border flex items-center justify-between gap-3"style="border:1px solid var(--border-color);background:var(--bg-tertiary)"><div class="flex-1 min-w-0"><div class="flex items-center gap-2 flex-wrap"><p class="text-sm font-semibold"style=color:var(--text-primary)></p></div><p class=text-xs style=color:var(--text-secondary)>Provider: <!>  </p><p class="text-xs truncate"style=color:var(--text-muted)></p></div><div class="flex flex-col items-end gap-2"><div class="flex items-center gap-2 text-xs"style=color:var(--text-secondary)><span></span></div><button class="px-3 py-1.5 text-sm rounded-md"style="border:1px solid var(--border-color)">Switch'),Ck=w("<p class=text-sm style=color:var(--text-muted)>Nothing detected yet. Try running auto-detect."),kk=w('<div class="p-3 rounded-lg border flex items-center justify-between gap-3"style="border:1px solid var(--border-color)"><div><p class="text-sm font-semibold"style=color:var(--text-primary)></p><p class=text-xs style=color:var(--text-muted)></p><p class=text-xs style=color:var(--text-secondary)>Contexts: </p></div><button class="px-3 py-1.5 text-sm rounded-md"style=background:var(--accent-primary);color:#000>Connect'),Mk=w("<option>");const Ak=[{id:"generic",label:"Generic / Other"},{id:"gke",label:"Google Kubernetes Engine (GKE)"},{id:"eks",label:"Amazon EKS"},{id:"aks",label:"Azure AKS"},{id:"kind",label:"kind (local)"},{id:"minikube",label:"Minikube"},{id:"k3s",label:"K3s / K3d"},{id:"docker-desktop",label:"Docker Desktop"}],Lk=()=>{const[e,t]=W(""),[r,l]=W(""),[a,m]=W("generic");zt(()=>{Rs()});const d=et(()=>!!_i()?.connected),i=async v=>{try{await sd(v),Je(`Switched to ${v}`,"success"),Rs()}catch(p){console.error("Failed to switch context",p),Je(p?.message||`Failed to switch to ${v}`,"error")}},n=async()=>{e().trim()&&(await xn({name:r()||void 0,provider:a(),kubeconfigPath:e()}),t(""),l(""))},g=[{title:"Auto-detect kubeconfig",description:"Scan common locations (~/.kube, $KUBECONFIG) and reused files.",action:()=>Rs(),button:"Run auto-detect"},{title:"Connect to GKE",description:"Use `gcloud container clusters get-credentials` to generate kubeconfig, then auto-detect.",link:"https://cloud.google.com/kubernetes-engine/docs/how-to/cluster-access-for-kubectl",button:"Open GKE guide"},{title:"Connect to EKS",description:"Run `aws eks update-kubeconfig --name <cluster>` and auto-detect the generated kubeconfig.",link:"https://docs.aws.amazon.com/eks/latest/userguide/create-kubeconfig.html",button:"Open EKS guide"},{title:"Connect to AKS",description:"Use `az aks get-credentials --name <cluster> --resource-group <rg>` to pull credentials.",link:"https://learn.microsoft.com/azure/aks/learn/quick-kubernetes-deploy-portal",button:"Open AKS guide"},{title:"Import manually",description:"Paste the kubeconfig path from any location and connect instantly.",action:n,button:"Connect from path",primary:!0}];return(()=>{var v=pk(),p=v.firstChild,y=p.firstChild,x=y.firstChild,M=x.firstChild;M.nextSibling;var b=x.nextSibling,o=b.firstChild,c=o.firstChild,u=o.nextSibling,h=p.nextSibling,f=h.firstChild,$=f.firstChild,C=$.firstChild,k=C.firstChild;k.nextSibling;var S=$.nextSibling,L=S.firstChild,P=L.firstChild,I=P.firstChild;I.nextSibling;var D=P.nextSibling,T=f.nextSibling,B=T.firstChild,N=B.firstChild,O=N.firstChild;O.nextSibling;var H=B.nextSibling,A=H.firstChild,z=A.nextSibling,F=z.firstChild,j=F.nextSibling,q=j.nextSibling,U=q.nextSibling;return s(o,()=>d()?"Cluster Connected":"Cluster Disconnected",null),u.$$click=()=>Rs(),s(b,_(K,{get when(){return d()},get children(){var Y=uk();return Y.$$click=()=>ga(),J(()=>Y.disabled=os()),Y}}),null),s(v,_(K,{get when(){return!d()},get children(){var Y=hk();return s(Y,_(Xe,{each:g,children:V=>(()=>{var X=mk(),R=X.firstChild,G=R.nextSibling,te=G.nextSibling;return s(R,()=>V.title),s(G,()=>V.description),te.$$click=()=>{V.link?window.open(V.link,"_blank","noopener"):V.action&&V.action()},s(te,()=>V.button),J(ae=>{var Q=V.primary?"var(--accent-primary)":"var(--bg-tertiary)",Z=V.primary?"#000":"var(--text-primary)";return Q!==ae.e&&E(te,"background",ae.e=Q),Z!==ae.t&&E(te,"color",ae.t=Z),ae},{e:void 0,t:void 0}),X})()})),Y}}),h),s(f,_(K,{get when(){return da().length>0},get fallback(){return bk()},get children(){var Y=gk();return s(Y,_(Xe,{get each(){return da()},children:V=>(()=>{var X=yk(),R=X.firstChild,G=R.firstChild,te=G.firstChild,ae=te.firstChild,Q=te.nextSibling,Z=Q.firstChild,ne=G.nextSibling,$e=ne.firstChild,re=$e.nextSibling,de=R.nextSibling,le=de.firstChild,xe=le.nextSibling,ye=xe.nextSibling;return s(ae,()=>V.name),s(te,_(K,{get when(){return V.isDefault},get children(){return xk()}}),null),s(Q,()=>V.provider,Z),s(Q,()=>V.kubeconfigPath,null),s(re,()=>V.connected?"Connected":"Disconnected"),le.$$click=()=>xn({name:V.name,provider:V.provider,kubeconfigPath:V.kubeconfigPath}),xe.$$click=()=>ga(),ye.$$click=()=>yg(V),J(ke=>{var ge=V.connected?"var(--success-color)":"var(--text-muted)",Ce=V.connected||os(),_e=!V.connected||os(),Me=V.isDefault||os();return ge!==ke.e&&E($e,"background",ke.e=ge),Ce!==ke.t&&(le.disabled=ke.t=Ce),_e!==ke.a&&(xe.disabled=ke.a=_e),Me!==ke.o&&(ye.disabled=ke.o=Me),ke},{e:void 0,t:void 0,a:void 0,o:void 0}),X})()})),Y}}),S),D.$$click=()=>Rs(),s(S,_(K,{get when(){return ha().length>0},get fallback(){return _k()},get children(){var Y=vk();return s(Y,_(Xe,{get each(){return ha()},children:V=>(()=>{var X=Sk(),R=X.firstChild,G=R.firstChild,te=G.firstChild,ae=G.nextSibling,Q=ae.firstChild,Z=Q.nextSibling;Z.nextSibling;var ne=ae.nextSibling,$e=R.nextSibling,re=$e.firstChild,de=re.firstChild,le=re.nextSibling;return s(te,()=>V.name),s(G,_(K,{get when(){return V.current},get children(){return $k()}}),null),s(ae,()=>V.provider||"generic",Z),s(ae,(()=>{var xe=Re(()=>!!V.serverVersion);return()=>xe()?`Kubernetes ${V.serverVersion}`:"version unknown"})(),null),s(ne,()=>V.kubeconfigPath),s(R,_(K,{get when(){return V.error},get children(){var xe=wk();return s(xe,()=>V.error),xe}}),null),s(re,()=>V.connected?"Reachable":"Unavailable",null),le.$$click=()=>i(V.name),J(xe=>{var ye=`w-2 h-2 rounded-full ${V.connected?"bg-emerald-400":"bg-red-500"}`,ke=V.current?"var(--bg-secondary)":"var(--bg-card)",ge=V.current||os();return ye!==xe.e&&tt(de,xe.e=ye),ke!==xe.t&&E(le,"background",xe.t=ke),ge!==xe.a&&(le.disabled=xe.a=ge),xe},{e:void 0,t:void 0,a:void 0}),X})()})),Y}}),null),s(T,_(K,{get when(){return ua().length>0},get fallback(){return Ck()},get children(){var Y=fk();return s(Y,_(Xe,{get each(){return ua()},children:V=>(()=>{var X=kk(),R=X.firstChild,G=R.firstChild,te=G.nextSibling,ae=te.nextSibling;ae.firstChild;var Q=R.nextSibling;return s(G,()=>V.name),s(te,()=>V.path),s(ae,()=>V.contexts.join(", "),null),Q.$$click=()=>xn({name:V.name,provider:V.provider,kubeconfigPath:V.path}),J(()=>Q.disabled=os()),X})()})),Y}}),H),F.$$input=Y=>l(Y.currentTarget.value),j.$$input=Y=>t(Y.currentTarget.value),q.$$input=Y=>m(Y.currentTarget.value),s(q,_(Xe,{each:Ak,children:Y=>(()=>{var V=Mk();return s(V,()=>Y.label),J(()=>V.value=Y.id),V})()})),U.$$click=n,J(Y=>{var V=`px-3 py-1.5 rounded-full text-sm font-medium flex items-center gap-2 ${d()?"bg-emerald-500/10 text-emerald-400":"bg-red-500/10 text-red-400"}`,X=`w-2 h-2 rounded-full ${d()?"bg-emerald-400":"bg-red-400"}`,R=os(),G=os(),te=!e().trim()||os();return V!==Y.e&&tt(o,Y.e=V),X!==Y.t&&tt(c,Y.t=X),R!==Y.a&&(u.disabled=Y.a=R),G!==Y.o&&(D.disabled=Y.o=G),te!==Y.i&&(U.disabled=Y.i=te),Y},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),J(()=>F.value=r()),J(()=>j.value=e()),J(()=>q.value=a()),v})()};ut(["click","input"]);var Ek=w('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading PersistentVolumes...'),Tk=w('<div class="p-8 text-center"style=color:var(--text-muted)><p>No PersistentVolumes found'),Dk=w('<div class="w-full overflow-x-auto"style=margin:0;padding:0><table class=w-full style=width:100%;table-layout:auto;border-collapse:collapse;margin:0;padding:0><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name</div></th><th class=whitespace-nowrap>Capacity</th><th class=whitespace-nowrap>Access Modes</th><th class=whitespace-nowrap>Reclaim Policy</th><th class=whitespace-nowrap>Status</th><th class=whitespace-nowrap>Storage Class</th><th class=whitespace-nowrap>Claim</th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),xl=w("<div class=w-full style=margin:0;padding:0;border-radius:4px>"),Rk=w('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading PersistentVolumeClaims...'),Pk=w('<div class="p-8 text-center"style=color:var(--text-muted)><p>No PersistentVolumeClaims found'),Ik=w('<div class="w-full overflow-x-auto"style=margin:0;padding:0><table class=w-full style=width:100%;table-layout:auto;border-collapse:collapse;margin:0;padding:0><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name</div></th><th class=whitespace-nowrap>Namespace</th><th class=whitespace-nowrap>Status</th><th class=whitespace-nowrap>Volume</th><th class=whitespace-nowrap>Capacity</th><th class=whitespace-nowrap>Access Modes</th><th class=whitespace-nowrap>Storage Class</th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),Bk=w('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading StorageClasses...'),Nk=w('<div class="p-8 text-center"style=color:var(--text-muted)><p>No StorageClasses found'),Ok=w('<div class="w-full overflow-x-auto"style=margin:0;padding:0><table class=w-full style=width:100%;table-layout:auto;border-collapse:collapse;margin:0;padding:0><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name</div></th><th class=whitespace-nowrap>Provisioner</th><th class=whitespace-nowrap>Reclaim Policy</th><th class=whitespace-nowrap>Volume Binding Mode</th><th class=whitespace-nowrap>Allow Volume Expansion</th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),pc=w('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading YAML...'),zk=w('<div class="space-y-6 p-6"style=minHeight:100vh;background:var(--bg-primary)><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-3xl font-bold"style=color:var(--text-primary)>Storage</h1><p style=color:var(--text-secondary)>Manage PersistentVolumes, PersistentVolumeClaims, and StorageClasses</p></div><div class="flex items-center gap-2"><select class="px-3 py-2 rounded-lg text-sm font-bold"title="Font Size"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=12>12px</option><option value=14>14px</option><option value=16>16px</option><option value=18>18px</option><option value=20>20px</option></select><select class="px-3 py-2 rounded-lg text-sm font-bold"title="Font Style"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=Monospace>Monospace</option><option value=System-ui>System-ui</option><option value=Monaco>Monaco</option><option value=Consolas>Consolas</option><option value=Courier>Courier</option></select></div></div><div class="flex gap-2 border-b"style=border-color:var(--border-color)><button>PersistentVolumes (<!>)</button><button>PersistentVolumeClaims (<!>)</button><button>StorageClasses (<!>)'),Fk=w('<tr><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"><span class="px-2 py-1 rounded text-xs font-medium"></span></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;border:none">'),Hk=w('<tr><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"><span class="px-2 py-1 rounded text-xs font-medium"></span></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;border:none">'),jk=w('<tr><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;border:none">'),Uk=w("<span class=text-green-500>Yes"),Vk=w("<span class=text-gray-500>No");const Wk=()=>{const[e,t]=W("pvs"),[r,l]=W(null),[a,m]=W(null),[d,i]=W(null),[n,g]=W(!1),[v,p]=W(!1),[y,x]=W(""),[M,b]=W(!1),o=()=>{const A=localStorage.getItem("storage-font-size");return A?parseInt(A):14},[c,u]=W(o()),h=A=>{u(A),localStorage.setItem("storage-font-size",A.toString())},f=()=>localStorage.getItem("storage-font-family")||"Monospace",[$,C]=W(f()),k=A=>{C(A),localStorage.setItem("storage-font-family",A)},S=()=>{switch($()){case"Monospace":return'"Courier New", Monaco, monospace';case"System-ui":return'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif';case"Monaco":return'Monaco, "Lucida Console", monospace';case"Consolas":return'Consolas, "Courier New", monospace';case"Courier":return'Courier, "Courier New", monospace';default:return'"Courier New", Monaco, monospace'}},[L,{refetch:P}]=it(async()=>{try{const A=await fetch("/api/storage/persistentvolumes");if(!A.ok)throw new Error("Failed to fetch PVs");const z=await A.json();return Array.isArray(z)?z:[]}catch(A){return console.error("Failed to fetch PVs:",A),[]}}),[I,{refetch:D}]=it(()=>Xt(),async A=>{try{const z=A==="_all"||A==="All Namespaces"||!A?"":A,F=await fetch(`/api/storage/persistentvolumeclaims${z?`?namespace=${z}`:""}`);if(!F.ok)throw new Error("Failed to fetch PVCs");const j=await F.json();return Array.isArray(j)?j:[]}catch(z){return console.error("Failed to fetch PVCs:",z),[]}}),[T,{refetch:B}]=it(async()=>{try{const A=await fetch("/api/storage/storageclasses");if(!A.ok)throw new Error("Failed to fetch StorageClasses");const z=await A.json();return Array.isArray(z)?z:[]}catch(A){return console.error("Failed to fetch StorageClasses:",A),[]}}),N=async(A,z,F)=>{b(!0);try{let j="";A==="pv"?j=(await Fe.getPVYAML(z)).yaml||"":A==="pvc"?j=(await Fe.getPVCYAML(z,F||"default")).yaml||"":A==="sc"&&(j=(await Fe.getStorageClassYAML(z)).yaml||""),x(j)}catch(j){Je(`Failed to load YAML: ${j instanceof Error?j.message:"Unknown error"}`,"error")}finally{b(!1)}},O=async A=>{try{e()==="pvs"&&r()?(await Fe.updatePV(r().name,A),Je(` PersistentVolume ${r().name} updated successfully`,"success"),P()):e()==="pvcs"&&a()?(await Fe.updatePVC(a().name,a().namespace||"default",A),Je(` PersistentVolumeClaim ${a().name} updated successfully`,"success"),D()):e()==="storageclasses"&&d()&&(await Fe.updateStorageClass(d().name,A),Je(` StorageClass ${d().name} updated successfully`,"success"),B()),p(!1)}catch(z){throw Je(` Failed to update: ${z instanceof Error?z.message:"Unknown error"}`,"error"),z}},H=async(A,z,F)=>{if(confirm(`Are you sure you want to delete ${z}?`))try{A==="pv"?(await Fe.deletePV(z),Je(` PersistentVolume ${z} deleted successfully`,"success"),P()):A==="pvc"?(await Fe.deletePVC(z,F||"default"),Je(` PersistentVolumeClaim ${z} deleted successfully`,"success"),D()):A==="sc"&&(await Fe.deleteStorageClass(z),Je(` StorageClass ${z} deleted successfully`,"success"),B())}catch(j){Je(` Failed to delete: ${j instanceof Error?j.message:"Unknown error"}`,"error")}};return(()=>{var A=zk(),z=A.firstChild,F=z.firstChild,j=F.firstChild;j.nextSibling;var q=F.nextSibling,U=q.firstChild,Y=U.nextSibling,V=z.nextSibling,X=V.firstChild,R=X.firstChild,G=R.nextSibling;G.nextSibling;var te=X.nextSibling,ae=te.firstChild,Q=ae.nextSibling;Q.nextSibling;var Z=te.nextSibling,ne=Z.firstChild,$e=ne.nextSibling;return $e.nextSibling,U.addEventListener("change",re=>h(parseInt(re.currentTarget.value))),Y.addEventListener("change",re=>k(re.currentTarget.value)),X.$$click=()=>t("pvs"),s(X,()=>L()?.length||0,G),te.$$click=()=>t("pvcs"),s(te,()=>I()?.length||0,Q),Z.$$click=()=>t("storageclasses"),s(Z,()=>T()?.length||0,$e),s(A,_(K,{get when(){return e()==="pvs"},get children(){var re=xl();return s(re,_(K,{get when(){return L.loading},get children(){var de=Ek(),le=de.firstChild;return le.nextSibling,de}}),null),s(re,_(K,{get when(){return Re(()=>!L.loading)()&&(!L()||L().length===0)},get children(){return Tk()}}),null),s(re,_(K,{get when(){return Re(()=>!!(!L.loading&&L()))()&&L().length>0},get children(){var de=Dk(),le=de.firstChild,xe=le.firstChild,ye=xe.firstChild,ke=ye.firstChild,ge=ke.nextSibling,Ce=ge.nextSibling,_e=Ce.nextSibling,Me=_e.nextSibling,ve=Me.nextSibling,be=ve.nextSibling,ce=be.nextSibling,Ae=xe.nextSibling;return s(Ae,_(Xe,{get each(){return L()},children:se=>(()=>{var oe=Fk(),ie=oe.firstChild,ue=ie.nextSibling,he=ue.nextSibling,Te=he.nextSibling,ee=Te.nextSibling,Se=ee.firstChild,pe=ee.nextSibling,De=pe.nextSibling,Ne=De.nextSibling;return s(ie,()=>se.name),s(ue,()=>se.capacity||"N/A"),s(he,(()=>{var me=Re(()=>!!Array.isArray(se.accessModes));return()=>me()?se.accessModes.join(", "):se.accessModes||"N/A"})()),s(Te,()=>se.reclaimPolicy||"N/A"),s(Se,()=>se.status||"Unknown"),s(pe,()=>se.storageClass||"N/A"),s(De,()=>se.claim||"-"),s(Ne,_(Jt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{l(se),N("pv",se.name),g(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{l(se),N("pv",se.name),p(!0)}},{label:"Delete",icon:"delete",onClick:()=>H("pv",se.name),variant:"danger",divider:!0}]})),J(me=>{var He=`${c()}px`,Ze=`${Math.max(24,c()*1.7)}px`,we=`${Math.max(24,c()*1.7)}px`,ze=`${c()}px`,Pe=`${Math.max(24,c()*1.7)}px`,Ue=`${Math.max(24,c()*1.7)}px`,Oe=`${c()}px`,fe=`${Math.max(24,c()*1.7)}px`,Le=`${Math.max(24,c()*1.7)}px`,We=`${c()}px`,Ee=`${Math.max(24,c()*1.7)}px`,Ie=`${Math.max(24,c()*1.7)}px`,qe=`${c()}px`,Be=`${Math.max(24,c()*1.7)}px`,Ke=`${Math.max(24,c()*1.7)}px`,Ye=se.status==="Bound"?"#10b98120":se.status==="Available"?"#3b82f620":"#ef444420",lt=se.status==="Bound"?"#10b981":se.status==="Available"?"#3b82f6":"#ef4444",gt=`${c()}px`,Qe=`${Math.max(24,c()*1.7)}px`,ct=`${Math.max(24,c()*1.7)}px`,ft=`${c()}px`,Ge=`${Math.max(24,c()*1.7)}px`,st=`${Math.max(24,c()*1.7)}px`,vt=`${Math.max(24,c()*1.7)}px`,at=`${Math.max(24,c()*1.7)}px`;return He!==me.e&&E(ie,"font-size",me.e=He),Ze!==me.t&&E(ie,"height",me.t=Ze),we!==me.a&&E(ie,"line-height",me.a=we),ze!==me.o&&E(ue,"font-size",me.o=ze),Pe!==me.i&&E(ue,"height",me.i=Pe),Ue!==me.n&&E(ue,"line-height",me.n=Ue),Oe!==me.s&&E(he,"font-size",me.s=Oe),fe!==me.h&&E(he,"height",me.h=fe),Le!==me.r&&E(he,"line-height",me.r=Le),We!==me.d&&E(Te,"font-size",me.d=We),Ee!==me.l&&E(Te,"height",me.l=Ee),Ie!==me.u&&E(Te,"line-height",me.u=Ie),qe!==me.c&&E(ee,"font-size",me.c=qe),Be!==me.w&&E(ee,"height",me.w=Be),Ke!==me.m&&E(ee,"line-height",me.m=Ke),Ye!==me.f&&E(Se,"background",me.f=Ye),lt!==me.y&&E(Se,"color",me.y=lt),gt!==me.g&&E(pe,"font-size",me.g=gt),Qe!==me.p&&E(pe,"height",me.p=Qe),ct!==me.b&&E(pe,"line-height",me.b=ct),ft!==me.T&&E(De,"font-size",me.T=ft),Ge!==me.A&&E(De,"height",me.A=Ge),st!==me.O&&E(De,"line-height",me.O=st),vt!==me.I&&E(Ne,"height",me.I=vt),at!==me.S&&E(Ne,"line-height",me.S=at),me},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0,A:void 0,O:void 0,I:void 0,S:void 0}),oe})()})),J(se=>{var oe=S(),ie=qt(),ue=al(c()),he=er(c()),Te=er(c()),ee=er(c()),Se=er(c()),pe=er(c()),De=er(c()),Ne=er(c()),me=er(c());return oe!==se.e&&E(le,"font-family",se.e=oe),ie!==se.t&&E(le,"background",se.t=ie),se.a=_t(ye,ue,se.a),se.o=_t(ke,he,se.o),se.i=_t(ge,Te,se.i),se.n=_t(Ce,ee,se.n),se.s=_t(_e,Se,se.s),se.h=_t(Me,pe,se.h),se.r=_t(ve,De,se.r),se.d=_t(be,Ne,se.d),se.l=_t(ce,me,se.l),se},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0}),de}}),null),J(de=>{var le=qt(),xe=`1px solid ${Ar()}`;return le!==de.e&&E(re,"background",de.e=le),xe!==de.t&&E(re,"border",de.t=xe),de},{e:void 0,t:void 0}),re}}),null),s(A,_(K,{get when(){return e()==="pvcs"},get children(){var re=xl();return s(re,_(K,{get when(){return I.loading},get children(){var de=Rk(),le=de.firstChild;return le.nextSibling,de}}),null),s(re,_(K,{get when(){return Re(()=>!I.loading)()&&(!I()||Array.isArray(I())&&I().length===0)},get children(){return Pk()}}),null),s(re,_(K,{get when(){return Re(()=>!!(!I.loading&&I()&&Array.isArray(I())))()&&I().length>0},get children(){var de=Ik(),le=de.firstChild,xe=le.firstChild,ye=xe.firstChild,ke=ye.firstChild,ge=ke.nextSibling,Ce=ge.nextSibling,_e=Ce.nextSibling,Me=_e.nextSibling,ve=Me.nextSibling,be=ve.nextSibling,ce=be.nextSibling,Ae=xe.nextSibling;return s(Ae,_(Xe,{get each(){return I()},children:se=>(()=>{var oe=Hk(),ie=oe.firstChild,ue=ie.nextSibling,he=ue.nextSibling,Te=he.firstChild,ee=he.nextSibling,Se=ee.nextSibling,pe=Se.nextSibling,De=pe.nextSibling,Ne=De.nextSibling;return s(ie,()=>se.name),s(ue,()=>se.namespace||"default"),s(Te,()=>se.status||"Unknown"),s(ee,()=>se.volume||"-"),s(Se,()=>se.capacity||"N/A"),s(pe,(()=>{var me=Re(()=>!!Array.isArray(se.accessModes));return()=>me()?se.accessModes.join(", "):se.accessModes||"N/A"})()),s(De,()=>se.storageClass||"N/A"),s(Ne,_(Jt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{m(se),N("pvc",se.name,se.namespace),g(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{m(se),N("pvc",se.name,se.namespace),p(!0)}},{label:"Delete",icon:"delete",onClick:()=>H("pvc",se.name,se.namespace),variant:"danger",divider:!0}]})),J(me=>{var He=`${c()}px`,Ze=`${Math.max(24,c()*1.7)}px`,we=`${Math.max(24,c()*1.7)}px`,ze=`${c()}px`,Pe=`${Math.max(24,c()*1.7)}px`,Ue=`${Math.max(24,c()*1.7)}px`,Oe=`${c()}px`,fe=`${Math.max(24,c()*1.7)}px`,Le=`${Math.max(24,c()*1.7)}px`,We=se.status==="Bound"?"#10b98120":"#ef444420",Ee=se.status==="Bound"?"#10b981":"#ef4444",Ie=`${c()}px`,qe=`${Math.max(24,c()*1.7)}px`,Be=`${Math.max(24,c()*1.7)}px`,Ke=`${c()}px`,Ye=`${Math.max(24,c()*1.7)}px`,lt=`${Math.max(24,c()*1.7)}px`,gt=`${c()}px`,Qe=`${Math.max(24,c()*1.7)}px`,ct=`${Math.max(24,c()*1.7)}px`,ft=`${c()}px`,Ge=`${Math.max(24,c()*1.7)}px`,st=`${Math.max(24,c()*1.7)}px`,vt=`${Math.max(24,c()*1.7)}px`,at=`${Math.max(24,c()*1.7)}px`;return He!==me.e&&E(ie,"font-size",me.e=He),Ze!==me.t&&E(ie,"height",me.t=Ze),we!==me.a&&E(ie,"line-height",me.a=we),ze!==me.o&&E(ue,"font-size",me.o=ze),Pe!==me.i&&E(ue,"height",me.i=Pe),Ue!==me.n&&E(ue,"line-height",me.n=Ue),Oe!==me.s&&E(he,"font-size",me.s=Oe),fe!==me.h&&E(he,"height",me.h=fe),Le!==me.r&&E(he,"line-height",me.r=Le),We!==me.d&&E(Te,"background",me.d=We),Ee!==me.l&&E(Te,"color",me.l=Ee),Ie!==me.u&&E(ee,"font-size",me.u=Ie),qe!==me.c&&E(ee,"height",me.c=qe),Be!==me.w&&E(ee,"line-height",me.w=Be),Ke!==me.m&&E(Se,"font-size",me.m=Ke),Ye!==me.f&&E(Se,"height",me.f=Ye),lt!==me.y&&E(Se,"line-height",me.y=lt),gt!==me.g&&E(pe,"font-size",me.g=gt),Qe!==me.p&&E(pe,"height",me.p=Qe),ct!==me.b&&E(pe,"line-height",me.b=ct),ft!==me.T&&E(De,"font-size",me.T=ft),Ge!==me.A&&E(De,"height",me.A=Ge),st!==me.O&&E(De,"line-height",me.O=st),vt!==me.I&&E(Ne,"height",me.I=vt),at!==me.S&&E(Ne,"line-height",me.S=at),me},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0,A:void 0,O:void 0,I:void 0,S:void 0}),oe})()})),J(se=>{var oe=S(),ie=qt(),ue=al(c()),he=er(c()),Te=er(c()),ee=er(c()),Se=er(c()),pe=er(c()),De=er(c()),Ne=er(c()),me=er(c());return oe!==se.e&&E(le,"font-family",se.e=oe),ie!==se.t&&E(le,"background",se.t=ie),se.a=_t(ye,ue,se.a),se.o=_t(ke,he,se.o),se.i=_t(ge,Te,se.i),se.n=_t(Ce,ee,se.n),se.s=_t(_e,Se,se.s),se.h=_t(Me,pe,se.h),se.r=_t(ve,De,se.r),se.d=_t(be,Ne,se.d),se.l=_t(ce,me,se.l),se},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0}),de}}),null),J(de=>{var le=qt(),xe=`1px solid ${Ar()}`;return le!==de.e&&E(re,"background",de.e=le),xe!==de.t&&E(re,"border",de.t=xe),de},{e:void 0,t:void 0}),re}}),null),s(A,_(K,{get when(){return e()==="storageclasses"},get children(){var re=xl();return s(re,_(K,{get when(){return T.loading},get children(){var de=Bk(),le=de.firstChild;return le.nextSibling,de}}),null),s(re,_(K,{get when(){return Re(()=>!T.loading)()&&(!T()||T().length===0)},get children(){return Nk()}}),null),s(re,_(K,{get when(){return Re(()=>!!(!T.loading&&T()))()&&T().length>0},get children(){var de=Ok(),le=de.firstChild,xe=le.firstChild,ye=xe.firstChild,ke=ye.firstChild,ge=ke.nextSibling,Ce=ge.nextSibling,_e=Ce.nextSibling,Me=_e.nextSibling,ve=Me.nextSibling,be=xe.nextSibling;return s(be,_(Xe,{get each(){return T()},children:ce=>(()=>{var Ae=jk(),se=Ae.firstChild,oe=se.nextSibling,ie=oe.nextSibling,ue=ie.nextSibling,he=ue.nextSibling,Te=he.nextSibling;return s(se,()=>ce.name),s(oe,()=>ce.provisioner||"N/A"),s(ie,()=>ce.reclaimPolicy||"N/A"),s(ue,()=>ce.volumeBindingMode||"N/A"),s(he,(()=>{var ee=Re(()=>!!ce.allowVolumeExpansion);return()=>ee()?Uk():Vk()})()),s(Te,_(Jt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{i(ce),N("sc",ce.name),g(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{i(ce),N("sc",ce.name),p(!0)}},{label:"Delete",icon:"delete",onClick:()=>H("sc",ce.name),variant:"danger",divider:!0}]})),J(ee=>{var Se=`${c()}px`,pe=`${Math.max(24,c()*1.7)}px`,De=`${Math.max(24,c()*1.7)}px`,Ne=`${c()}px`,me=`${Math.max(24,c()*1.7)}px`,He=`${Math.max(24,c()*1.7)}px`,Ze=`${c()}px`,we=`${Math.max(24,c()*1.7)}px`,ze=`${Math.max(24,c()*1.7)}px`,Pe=`${c()}px`,Ue=`${Math.max(24,c()*1.7)}px`,Oe=`${Math.max(24,c()*1.7)}px`,fe=`${c()}px`,Le=`${Math.max(24,c()*1.7)}px`,We=`${Math.max(24,c()*1.7)}px`,Ee=`${Math.max(24,c()*1.7)}px`,Ie=`${Math.max(24,c()*1.7)}px`;return Se!==ee.e&&E(se,"font-size",ee.e=Se),pe!==ee.t&&E(se,"height",ee.t=pe),De!==ee.a&&E(se,"line-height",ee.a=De),Ne!==ee.o&&E(oe,"font-size",ee.o=Ne),me!==ee.i&&E(oe,"height",ee.i=me),He!==ee.n&&E(oe,"line-height",ee.n=He),Ze!==ee.s&&E(ie,"font-size",ee.s=Ze),we!==ee.h&&E(ie,"height",ee.h=we),ze!==ee.r&&E(ie,"line-height",ee.r=ze),Pe!==ee.d&&E(ue,"font-size",ee.d=Pe),Ue!==ee.l&&E(ue,"height",ee.l=Ue),Oe!==ee.u&&E(ue,"line-height",ee.u=Oe),fe!==ee.c&&E(he,"font-size",ee.c=fe),Le!==ee.w&&E(he,"height",ee.w=Le),We!==ee.m&&E(he,"line-height",ee.m=We),Ee!==ee.f&&E(Te,"height",ee.f=Ee),Ie!==ee.y&&E(Te,"line-height",ee.y=Ie),ee},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0}),Ae})()})),J(ce=>{var Ae=S(),se=qt(),oe=al(c()),ie=er(c()),ue=er(c()),he=er(c()),Te=er(c()),ee=er(c()),Se=er(c());return Ae!==ce.e&&E(le,"font-family",ce.e=Ae),se!==ce.t&&E(le,"background",ce.t=se),ce.a=_t(ye,oe,ce.a),ce.o=_t(ke,ie,ce.o),ce.i=_t(ge,ue,ce.i),ce.n=_t(Ce,he,ce.n),ce.s=_t(_e,Te,ce.s),ce.h=_t(Me,ee,ce.h),ce.r=_t(ve,Se,ce.r),ce},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),de}}),null),J(de=>{var le=qt(),xe=`1px solid ${Ar()}`;return le!==de.e&&E(re,"background",de.e=le),xe!==de.t&&E(re,"border",de.t=xe),de},{e:void 0,t:void 0}),re}}),null),s(A,_(K,{get when(){return n()},get children(){return _(mt,{size:"large",get title(){return`View YAML - ${e()==="pvs"?r()?.name:e()==="pvcs"?a()?.name:d()?.name}`},onClose:()=>{g(!1),l(null),m(null),i(null)},get children(){return _(K,{get when(){return M()},get fallback(){return _(gr,{get content(){return y()}})},get children(){var re=pc(),de=re.firstChild;return de.nextSibling,re}})}})}}),null),s(A,_(K,{get when(){return v()},get children(){return _(mt,{size:"large",get title(){return`Edit YAML - ${e()==="pvs"?r()?.name:e()==="pvcs"?a()?.name:d()?.name}`},onClose:()=>{p(!1),l(null),m(null),i(null)},get children(){return _(K,{get when(){return M()},get fallback(){return _(Dr,{get content(){return y()},onSave:O,onCancel:()=>p(!1)})},get children(){var re=pc(),de=re.firstChild;return de.nextSibling,re}})}})}}),null),J(re=>{var de=`px-4 py-2 font-medium transition-colors ${e()==="pvs"?"border-b-2":""}`,le=e()==="pvs"?"var(--accent-primary)":"var(--text-secondary)",xe=e()==="pvs"?"var(--accent-primary)":"transparent",ye=`px-4 py-2 font-medium transition-colors ${e()==="pvcs"?"border-b-2":""}`,ke=e()==="pvcs"?"var(--accent-primary)":"var(--text-secondary)",ge=e()==="pvcs"?"var(--accent-primary)":"transparent",Ce=`px-4 py-2 font-medium transition-colors ${e()==="storageclasses"?"border-b-2":""}`,_e=e()==="storageclasses"?"var(--accent-primary)":"var(--text-secondary)",Me=e()==="storageclasses"?"var(--accent-primary)":"transparent";return de!==re.e&&tt(X,re.e=de),le!==re.t&&E(X,"color",re.t=le),xe!==re.a&&E(X,"border-bottom-color",re.a=xe),ye!==re.o&&tt(te,re.o=ye),ke!==re.i&&E(te,"color",re.i=ke),ge!==re.n&&E(te,"border-bottom-color",re.n=ge),Ce!==re.s&&tt(Z,re.s=Ce),_e!==re.h&&E(Z,"color",re.h=_e),Me!==re.r&&E(Z,"border-bottom-color",re.r=Me),re},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),J(()=>U.value=c()),J(()=>Y.value=$()),A})()};ut(["click"]);var qk=w('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading Roles...'),Kk=w('<div class="p-8 text-center"style=color:var(--text-muted)><p>No Roles found'),Yk=w('<div class=overflow-x-auto><table class=w-full><thead style=background:var(--bg-secondary)><tr><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Name</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Namespace</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Rules</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Age</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Actions</th></tr></thead><tbody>'),vn=w('<div class="card overflow-hidden">'),Gk=w('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading RoleBindings...'),Jk=w('<div class="p-8 text-center"style=color:var(--text-muted)><p>No RoleBindings found'),Xk=w('<div class=overflow-x-auto><table class=w-full><thead style=background:var(--bg-secondary)><tr><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Name</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Namespace</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Role Ref</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Subjects</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Age</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Actions</th></tr></thead><tbody>'),Zk=w('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading ClusterRoles...'),Qk=w('<div class="p-8 text-center"style=color:var(--text-muted)><p>No ClusterRoles found'),e6=w('<div class=overflow-x-auto><table class=w-full><thead style=background:var(--bg-secondary)><tr><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Name</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Rules</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Age</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Actions</th></tr></thead><tbody>'),t6=w('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading ClusterRoleBindings...'),r6=w('<div class="p-8 text-center"style=color:var(--text-muted)><p>No ClusterRoleBindings found'),s6=w('<div class=overflow-x-auto><table class=w-full><thead style=background:var(--bg-secondary)><tr><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Name</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Role Ref</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Subjects</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Age</th><th class="px-4 py-3 text-left text-sm font-medium"style=color:var(--text-primary)>Actions</th></tr></thead><tbody>'),mc=w('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading YAML...'),i6=w('<div class="space-y-6 p-6"style=minHeight:100vh;background:var(--bg-primary)><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-3xl font-bold"style=color:var(--text-primary)>RBAC</h1><p style=color:var(--text-secondary)>Manage Roles, RoleBindings, ClusterRoles, and ClusterRoleBindings</p></div></div><div class="flex gap-2 border-b"style=border-color:var(--border-color)><button>Roles (<!>)</button><button>RoleBindings (<!>)</button><button>ClusterRoles (<!>)</button><button>ClusterRoleBindings (<!>)'),bc=w('<tr class=border-t style=border-color:var(--border-color)><td class="px-4 py-3 text-sm"style=color:var(--text-primary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm">'),n6=w('<tr class=border-t style=border-color:var(--border-color)><td class="px-4 py-3 text-sm"style=color:var(--text-primary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm">'),l6=w('<tr class=border-t style=border-color:var(--border-color)><td class="px-4 py-3 text-sm"style=color:var(--text-primary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm"style=color:var(--text-secondary)></td><td class="px-4 py-3 text-sm">');const o6=()=>{const[e,t]=W("roles"),[r,l]=W(null),[a,m]=W(null),[d,i]=W(null),[n,g]=W(null),[v,p]=W(!1),[y,x]=W(!1),[M,b]=W(""),[o,c]=W(!1),[u]=it(()=>Xt(),async C=>{try{const k=C==="_all"?void 0:C,S=await fetch(`/api/rbac/roles${k?`?namespace=${k}`:""}`);if(!S.ok)throw new Error("Failed to fetch Roles");const L=await S.json();return Array.isArray(L)?L:[]}catch(k){return console.error("Failed to fetch Roles:",k),[]}}),[h]=it(()=>Xt(),async C=>{try{const k=C==="_all"?void 0:C,S=await fetch(`/api/rbac/rolebindings${k?`?namespace=${k}`:""}`);if(!S.ok)throw new Error("Failed to fetch RoleBindings");const L=await S.json();return Array.isArray(L)?L:[]}catch(k){return console.error("Failed to fetch RoleBindings:",k),[]}}),[f]=it(async()=>{try{const C=await fetch("/api/rbac/clusterroles");if(!C.ok)throw new Error("Failed to fetch ClusterRoles");const k=await C.json();return Array.isArray(k)?k:[]}catch(C){return console.error("Failed to fetch ClusterRoles:",C),[]}}),[$]=it(async()=>{try{const C=await fetch("/api/rbac/clusterrolebindings");if(!C.ok)throw new Error("Failed to fetch ClusterRoleBindings");const k=await C.json();return Array.isArray(k)?k:[]}catch(C){return console.error("Failed to fetch ClusterRoleBindings:",C),[]}});return(()=>{var C=i6(),k=C.firstChild,S=k.firstChild,L=S.firstChild;L.nextSibling;var P=k.nextSibling,I=P.firstChild,D=I.firstChild,T=D.nextSibling;T.nextSibling;var B=I.nextSibling,N=B.firstChild,O=N.nextSibling;O.nextSibling;var H=B.nextSibling,A=H.firstChild,z=A.nextSibling;z.nextSibling;var F=H.nextSibling,j=F.firstChild,q=j.nextSibling;return q.nextSibling,I.$$click=()=>t("roles"),s(I,()=>u()?.length||0,T),B.$$click=()=>t("rolebindings"),s(B,()=>h()?.length||0,O),H.$$click=()=>t("clusterroles"),s(H,()=>f()?.length||0,z),F.$$click=()=>t("clusterrolebindings"),s(F,()=>$()?.length||0,q),s(C,_(K,{get when(){return e()==="roles"},get children(){var U=vn();return s(U,_(K,{get when(){return u.loading},get children(){var Y=qk(),V=Y.firstChild;return V.nextSibling,Y}}),null),s(U,_(K,{get when(){return Re(()=>!u.loading)()&&(!u()||u().length===0)},get children(){return Kk()}}),null),s(U,_(K,{get when(){return Re(()=>!!(!u.loading&&u()))()&&u().length>0},get children(){var Y=Yk(),V=Y.firstChild,X=V.firstChild,R=X.firstChild,G=R.firstChild,te=G.nextSibling,ae=te.nextSibling,Q=ae.nextSibling;Q.nextSibling;var Z=X.nextSibling;return s(Z,_(Xe,{get each(){return u()},children:ne=>(()=>{var $e=bc(),re=$e.firstChild,de=re.nextSibling,le=de.nextSibling,xe=le.nextSibling,ye=xe.nextSibling;return s(re,()=>ne.name),s(de,()=>ne.namespace||"default"),s(le,()=>ne.rules||0),s(xe,()=>ne.age||"N/A"),s(ye,_(Jt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{l(ne),loadYAML("role",ne.name,ne.namespace),p(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{l(ne),loadYAML("role",ne.name,ne.namespace),x(!0)}},{label:"Delete",icon:"delete",onClick:()=>handleDelete("role",ne.name,ne.namespace),variant:"danger",divider:!0}]})),$e})()})),Y}}),null),U}}),null),s(C,_(K,{get when(){return e()==="rolebindings"},get children(){var U=vn();return s(U,_(K,{get when(){return h.loading},get children(){var Y=Gk(),V=Y.firstChild;return V.nextSibling,Y}}),null),s(U,_(K,{get when(){return Re(()=>!h.loading)()&&(!h()||h().length===0)},get children(){return Jk()}}),null),s(U,_(K,{get when(){return Re(()=>!!(!h.loading&&h()))()&&h().length>0},get children(){var Y=Xk(),V=Y.firstChild,X=V.firstChild,R=X.firstChild,G=R.firstChild,te=G.nextSibling,ae=te.nextSibling,Q=ae.nextSibling,Z=Q.nextSibling;Z.nextSibling;var ne=X.nextSibling;return s(ne,_(Xe,{get each(){return h()},children:$e=>(()=>{var re=n6(),de=re.firstChild,le=de.nextSibling,xe=le.nextSibling,ye=xe.nextSibling,ke=ye.nextSibling,ge=ke.nextSibling;return s(de,()=>$e.name),s(le,()=>$e.namespace||"default"),s(xe,()=>$e.roleRef||"N/A"),s(ye,()=>$e.subjects||0),s(ke,()=>$e.age||"N/A"),s(ge,_(Jt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{m($e),loadYAML("rb",$e.name,$e.namespace),p(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{m($e),loadYAML("rb",$e.name,$e.namespace),x(!0)}},{label:"Delete",icon:"delete",onClick:()=>handleDelete("rb",$e.name,$e.namespace),variant:"danger",divider:!0}]})),re})()})),Y}}),null),U}}),null),s(C,_(K,{get when(){return e()==="clusterroles"},get children(){var U=vn();return s(U,_(K,{get when(){return f.loading},get children(){var Y=Zk(),V=Y.firstChild;return V.nextSibling,Y}}),null),s(U,_(K,{get when(){return Re(()=>!f.loading)()&&(!f()||f().length===0)},get children(){return Qk()}}),null),s(U,_(K,{get when(){return Re(()=>!!(!f.loading&&f()))()&&f().length>0},get children(){var Y=e6(),V=Y.firstChild,X=V.firstChild,R=X.firstChild,G=R.firstChild,te=G.nextSibling,ae=te.nextSibling;ae.nextSibling;var Q=X.nextSibling;return s(Q,_(Xe,{get each(){return f()},children:Z=>(()=>{var ne=l6(),$e=ne.firstChild,re=$e.nextSibling,de=re.nextSibling,le=de.nextSibling;return s($e,()=>Z.name),s(re,()=>Z.rules||0),s(de,()=>Z.age||"N/A"),s(le,_(Jt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{i(Z),loadYAML("cr",Z.name),p(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{i(Z),loadYAML("cr",Z.name),x(!0)}},{label:"Delete",icon:"delete",onClick:()=>handleDelete("cr",Z.name),variant:"danger",divider:!0}]})),ne})()})),Y}}),null),U}}),null),s(C,_(K,{get when(){return e()==="clusterrolebindings"},get children(){var U=vn();return s(U,_(K,{get when(){return $.loading},get children(){var Y=t6(),V=Y.firstChild;return V.nextSibling,Y}}),null),s(U,_(K,{get when(){return Re(()=>!$.loading)()&&(!$()||$().length===0)},get children(){return r6()}}),null),s(U,_(K,{get when(){return Re(()=>!!(!$.loading&&$()))()&&$().length>0},get children(){var Y=s6(),V=Y.firstChild,X=V.firstChild,R=X.firstChild,G=R.firstChild,te=G.nextSibling,ae=te.nextSibling,Q=ae.nextSibling;Q.nextSibling;var Z=X.nextSibling;return s(Z,_(Xe,{get each(){return $()},children:ne=>(()=>{var $e=bc(),re=$e.firstChild,de=re.nextSibling,le=de.nextSibling,xe=le.nextSibling,ye=xe.nextSibling;return s(re,()=>ne.name),s(de,()=>ne.roleRef||"N/A"),s(le,()=>ne.subjects||0),s(xe,()=>ne.age||"N/A"),s(ye,_(Jt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{g(ne),loadYAML("crb",ne.name),p(!0)}},{label:"Edit YAML",icon:"edit",onClick:()=>{g(ne),loadYAML("crb",ne.name),x(!0)}},{label:"Delete",icon:"delete",onClick:()=>handleDelete("crb",ne.name),variant:"danger",divider:!0}]})),$e})()})),Y}}),null),U}}),null),s(C,_(K,{get when(){return v()},get children(){return _(mt,{size:"large",get title(){return`View YAML - ${e()==="roles"?r()?.name:e()==="rolebindings"?a()?.name:e()==="clusterroles"?d()?.name:n()?.name}`},onClose:()=>{p(!1),l(null),m(null),i(null),g(null)},get children(){return _(K,{get when(){return o()},get fallback(){return _(gr,{get content(){return M()}})},get children(){var U=mc(),Y=U.firstChild;return Y.nextSibling,U}})}})}}),null),s(C,_(K,{get when(){return y()},get children(){return _(mt,{size:"large",get title(){return`Edit YAML - ${e()==="roles"?r()?.name:e()==="rolebindings"?a()?.name:e()==="clusterroles"?d()?.name:n()?.name}`},onClose:()=>{x(!1),l(null),m(null),i(null),g(null)},get children(){return _(K,{get when(){return o()},get fallback(){return _(Dr,{get content(){return M()},onSave:handleSaveYAML,onCancel:()=>x(!1)})},get children(){var U=mc(),Y=U.firstChild;return Y.nextSibling,U}})}})}}),null),J(U=>{var Y=`px-4 py-2 font-medium transition-colors ${e()==="roles"?"border-b-2":""}`,V=e()==="roles"?"var(--accent-primary)":"var(--text-secondary)",X=e()==="roles"?"var(--accent-primary)":"transparent",R=`px-4 py-2 font-medium transition-colors ${e()==="rolebindings"?"border-b-2":""}`,G=e()==="rolebindings"?"var(--accent-primary)":"var(--text-secondary)",te=e()==="rolebindings"?"var(--accent-primary)":"transparent",ae=`px-4 py-2 font-medium transition-colors ${e()==="clusterroles"?"border-b-2":""}`,Q=e()==="clusterroles"?"var(--accent-primary)":"var(--text-secondary)",Z=e()==="clusterroles"?"var(--accent-primary)":"transparent",ne=`px-4 py-2 font-medium transition-colors ${e()==="clusterrolebindings"?"border-b-2":""}`,$e=e()==="clusterrolebindings"?"var(--accent-primary)":"var(--text-secondary)",re=e()==="clusterrolebindings"?"var(--accent-primary)":"transparent";return Y!==U.e&&tt(I,U.e=Y),V!==U.t&&E(I,"color",U.t=V),X!==U.a&&E(I,"border-bottom-color",U.a=X),R!==U.o&&tt(B,U.o=R),G!==U.i&&E(B,"color",U.i=G),te!==U.n&&E(B,"border-bottom-color",U.n=te),ae!==U.s&&tt(H,U.s=ae),Q!==U.h&&E(H,"color",U.h=Q),Z!==U.r&&E(H,"border-bottom-color",U.r=Z),ne!==U.d&&tt(F,U.d=ne),$e!==U.l&&E(F,"color",U.l=$e),re!==U.u&&E(F,"border-bottom-color",U.u=re),U},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0}),C})()};ut(["click"]);var a6=w('<div class=overflow-x-auto><table class="w-full border-collapse"><thead><tr class="border-b border-white/10"><th class="text-left py-3 px-4 font-semibold text-sm">Name</th><th class="text-left py-3 px-4 font-semibold text-sm">Namespace</th><th class="text-left py-3 px-4 font-semibold text-sm">Secrets</th><th class="text-left py-3 px-4 font-semibold text-sm">Age</th><th class="text-left py-3 px-4 font-semibold text-sm">Actions</th></tr></thead><tbody>'),c6=w('<div class="text-center py-8"><div class="inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-white">'),d6=w('<div class=p-6><div class="mb-6 flex items-center justify-between"><div><h1 class="text-2xl font-bold mb-1">Service Accounts</h1><p class="text-sm opacity-70">Manage service accounts and their permissions</p></div><button class="px-4 py-2 rounded-md bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium transition-colors">Refresh'),u6=w('<div class="text-center py-12"><div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-white"></div><p class="mt-4 text-sm opacity-70">Loading service accounts...'),h6=w('<div class="text-center py-12"><p class="text-lg opacity-70">No service accounts found'),g6=w('<tr class="border-b border-white/5 hover:bg-white/5 transition-colors"><td class="py-3 px-4"><div class=font-medium></div></td><td class="py-3 px-4 text-sm opacity-70"></td><td class="py-3 px-4 text-sm"></td><td class="py-3 px-4 text-sm opacity-70"></td><td class="py-3 px-4">');const v6=()=>{const[e,t]=W(null),[r,l]=W(!1),[a,m]=W(""),[d,i]=W(!1),[n,{refetch:g}]=it(()=>Xt(),async p=>{try{const y=new URLSearchParams;p&&p!=="All Namespaces"&&y.append("namespace",p);const x=await fetch(`/api/serviceaccounts?${y.toString()}`);if(!x.ok)throw new Error("Failed to fetch service accounts");return await x.json()}catch(y){return Je(`Failed to load service accounts: ${y.message}`,"error"),[]}}),v=async p=>{t(p),i(!0),l(!0);try{const y=new URLSearchParams({name:p.name,namespace:p.namespace}),x=await fetch(`/api/serviceaccount/yaml?${y.toString()}`);if(!x.ok)throw new Error("Failed to fetch YAML");const M=await x.text();m(M)}catch(y){Je(`Failed to load YAML: ${y.message}`,"error"),m("")}finally{i(!1)}};return(()=>{var p=d6(),y=p.firstChild,x=y.firstChild,M=x.nextSibling;return M.$$click=()=>g(),s(p,_(K,{get when(){return!n.loading},get fallback(){return u6()},get children(){return _(K,{get when(){return(n()||[]).length>0},get fallback(){return h6()},get children(){var b=a6(),o=b.firstChild,c=o.firstChild,u=c.nextSibling;return s(u,_(Xe,{get each(){return n()},children:h=>(()=>{var f=g6(),$=f.firstChild,C=$.firstChild,k=$.nextSibling,S=k.nextSibling,L=S.nextSibling,P=L.nextSibling;return s(C,()=>h.name),s(k,()=>h.namespace),s(S,()=>h.secrets),s(L,()=>h.age),s(P,_(Jt,{items:[{label:"View YAML",onClick:()=>v(h)}]})),f})()})),b}})}}),null),s(p,_(K,{get when(){return r()},get children(){return _(mt,{get isOpen(){return r()},onClose:()=>{l(!1),m(""),t(null)},get title(){return`Service Account: ${e()?.name}`},get children(){return _(K,{get when(){return d()},get fallback(){return _(gr,{get content(){return a()}})},get children(){return c6()}})}})}}),null),p})()};ut(["click"]);var f6=w("<button>Instances (<!>)"),p6=w('<div class=overflow-x-auto><table class="w-full border-collapse"><thead><tr class="border-b border-white/10"><th class="text-left py-3 px-4 font-semibold text-sm">Name</th><th class="text-left py-3 px-4 font-semibold text-sm">Group</th><th class="text-left py-3 px-4 font-semibold text-sm">Version</th><th class="text-left py-3 px-4 font-semibold text-sm">Kind</th><th class="text-left py-3 px-4 font-semibold text-sm">Scope</th><th class="text-left py-3 px-4 font-semibold text-sm">Instances</th><th class="text-left py-3 px-4 font-semibold text-sm">Age</th><th class="text-left py-3 px-4 font-semibold text-sm">Actions</th></tr></thead><tbody>'),m6=w('<div class=mb-4><button class="text-sm opacity-70 hover:opacity-100 mb-4"> Back to CRDs</button><h2 class="text-lg font-semibold mb-2">Instances of <!> (<!>)'),b6=w('<div class=overflow-x-auto><table class="w-full border-collapse"><thead><tr class="border-b border-white/10"><th class="text-left py-3 px-4 font-semibold text-sm">Name</th><th class="text-left py-3 px-4 font-semibold text-sm">Namespace</th><th class="text-left py-3 px-4 font-semibold text-sm">Age</th><th class="text-left py-3 px-4 font-semibold text-sm">Actions</th></tr></thead><tbody>'),x6=w('<div class="text-center py-8"><div class="inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-white">'),y6=w('<div class=p-6><div class="mb-6 flex items-center justify-between"><div><h1 class="text-2xl font-bold mb-1">Custom Resources</h1><p class="text-sm opacity-70">Manage CustomResourceDefinitions and their instances</p></div><div class="flex gap-2"><button class="px-4 py-2 rounded-md bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium transition-colors">Refresh</button></div></div><div class="mb-4 flex gap-2 border-b border-white/10"><button>CRDs (<!>)'),_6=w('<div class="text-center py-12"><div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-white"></div><p class="mt-4 text-sm opacity-70">Loading CRDs...'),$6=w('<div class="text-center py-12"><p class="text-lg opacity-70">No CustomResourceDefinitions found'),w6=w('<tr class="border-b border-white/5 hover:bg-white/5 transition-colors"><td class="py-3 px-4"><div class=font-medium></div></td><td class="py-3 px-4 text-sm opacity-70"></td><td class="py-3 px-4 text-sm opacity-70"></td><td class="py-3 px-4 text-sm"></td><td class="py-3 px-4 text-sm"><span></span></td><td class="py-3 px-4 text-sm"></td><td class="py-3 px-4 text-sm opacity-70"></td><td class="py-3 px-4">'),S6=w('<div class="text-center py-12"><div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-white"></div><p class="mt-4 text-sm opacity-70">Loading instances...'),C6=w('<div class="text-center py-12"><p class="text-lg opacity-70">No instances found'),k6=w('<tr class="border-b border-white/5 hover:bg-white/5 transition-colors"><td class="py-3 px-4"><div class=font-medium></div></td><td class="py-3 px-4 text-sm opacity-70"></td><td class="py-3 px-4 text-sm opacity-70"></td><td class="py-3 px-4">');const M6=()=>{const[e,t]=W(null),[r,l]=W(null),[a,m]=W(!1),[d,i]=W(!1),[n,g]=W(""),[v,p]=W(!1),[y,x]=W("crds"),[M,{refetch:b}]=it(async()=>{try{const f=await fetch("/api/crds");if(!f.ok)throw new Error("Failed to fetch CRDs");return await f.json()}catch(f){return Je(`Failed to load CRDs: ${f.message}`,"error"),[]}}),[o,{refetch:c}]=it(()=>e()?.name,async f=>{if(!f)return[];try{const $=new URLSearchParams({crd:f}),C=Xt();C&&C!=="All Namespaces"&&$.append("namespace",C);const k=await fetch(`/api/crd/instances?${$.toString()}`);if(!k.ok)throw new Error("Failed to fetch instances");return await k.json()}catch($){return Je(`Failed to load instances: ${$.message}`,"error"),[]}}),u=f=>{t(f),m(!0),x("instances")},h=async(f,$)=>{l(f),p(!0),i(!0);try{const C=new URLSearchParams({crd:$.name,name:f.name});f.namespace&&C.append("namespace",f.namespace);const k=await fetch(`/api/crd/instance/yaml?${C.toString()}`);if(!k.ok)throw new Error("Failed to fetch YAML");const S=await k.text();g(S)}catch(C){Je(`Failed to load YAML: ${C.message}`,"error"),g("")}finally{p(!1)}};return(()=>{var f=y6(),$=f.firstChild,C=$.firstChild,k=C.nextSibling,S=k.firstChild,L=$.nextSibling,P=L.firstChild,I=P.firstChild,D=I.nextSibling;return D.nextSibling,S.$$click=()=>{y()==="crds"?b():c()},P.$$click=()=>{x("crds"),m(!1),t(null)},s(P,()=>M()?.length||0,D),s(L,_(K,{get when(){return e()},get children(){var T=f6(),B=T.firstChild,N=B.nextSibling;return N.nextSibling,T.$$click=()=>x("instances"),s(T,()=>o()?.length||0,N),J(()=>tt(T,`px-4 py-2 text-sm font-medium transition-colors ${y()==="instances"?"border-b-2 border-blue-500 text-blue-400":"opacity-70 hover:opacity-100"}`)),T}}),null),s(f,_(K,{get when(){return y()==="crds"},get children(){return _(K,{get when(){return!M.loading},get fallback(){return _6()},get children(){return _(K,{get when(){return(M()||[]).length>0},get fallback(){return $6()},get children(){var T=p6(),B=T.firstChild,N=B.firstChild,O=N.nextSibling;return s(O,_(Xe,{get each(){return M()},children:H=>(()=>{var A=w6(),z=A.firstChild,F=z.firstChild,j=z.nextSibling,q=j.nextSibling,U=q.nextSibling,Y=U.nextSibling,V=Y.firstChild,X=Y.nextSibling,R=X.nextSibling,G=R.nextSibling;return s(F,()=>H.name),s(j,()=>H.group),s(q,()=>H.version),s(U,()=>H.kind),s(V,()=>H.scope),s(X,()=>H.instances),s(R,()=>H.age),s(G,_(Jt,{items:[{label:"View Instances",onClick:()=>u(H)}]})),J(()=>tt(V,`px-2 py-1 rounded text-xs ${H.scope==="Namespaced"?"bg-blue-500/20 text-blue-300":"bg-purple-500/20 text-purple-300"}`)),A})()})),T}})}})}}),null),s(f,_(K,{get when(){return Re(()=>y()==="instances")()&&e()},get children(){return[(()=>{var T=m6(),B=T.firstChild,N=B.nextSibling,O=N.firstChild,H=O.nextSibling,A=H.nextSibling,z=A.nextSibling;return z.nextSibling,B.$$click=()=>{x("crds"),m(!1),t(null)},s(N,()=>e()?.kind,H),s(N,()=>e()?.name,z),T})(),_(K,{get when(){return!o.loading},get fallback(){return S6()},get children(){return _(K,{get when(){return(o()||[]).length>0},get fallback(){return C6()},get children(){var T=b6(),B=T.firstChild,N=B.firstChild,O=N.nextSibling;return s(O,_(Xe,{get each(){return o()},children:H=>(()=>{var A=k6(),z=A.firstChild,F=z.firstChild,j=z.nextSibling,q=j.nextSibling,U=q.nextSibling;return s(F,()=>H.name),s(j,()=>H.namespace||"-"),s(q,()=>H.age),s(U,_(Jt,{items:[{label:"View YAML",onClick:()=>h(H,e())}]})),A})()})),T}})}})]}}),null),s(f,_(K,{get when(){return Re(()=>!!d())()&&r()},get children(){return _(mt,{get isOpen(){return d()},onClose:()=>{i(!1),g(""),l(null)},get title(){return`${e()?.kind}: ${r()?.name}`},get children(){return _(K,{get when(){return v()},get fallback(){return _(gr,{get content(){return n()}})},get children(){return x6()}})}})}}),null),J(()=>tt(P,`px-4 py-2 text-sm font-medium transition-colors ${y()==="crds"?"border-b-2 border-blue-500 text-blue-400":"opacity-70 hover:opacity-100"}`)),f})()};ut(["click"]);var A6=w('<span class="ml-1 inline-flex flex-col text-xs leading-none"><span></span><span>'),L6=w('<div class="w-full overflow-x-auto"style=margin:0;padding:0><table class=w-full style=width:100%;table-layout:auto;border-collapse:collapse;margin:0;padding:0><thead><tr><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Name </div></th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Namespace </div></th><th class=whitespace-nowrap>Pod Selector</th><th class=whitespace-nowrap>Ingress</th><th class=whitespace-nowrap>Egress</th><th class=whitespace-nowrap>Policy Types</th><th class="cursor-pointer select-none whitespace-nowrap"><div class="flex items-center gap-1">Age </div></th><th class=whitespace-nowrap>Actions</th></tr></thead><tbody>'),E6=w('<div class="flex items-center justify-between p-4 font-mono text-sm"style=background:var(--bg-secondary)><div style=color:var(--text-secondary)>Showing <!> - <!> of <!> policies</div><div class="flex items-center gap-2"><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>First</button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)> Prev</button><span class="px-3 py-1"style=color:var(--text-primary)>Page <!> of </span><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>Next </button><button class="px-3 py-1 rounded text-sm disabled:opacity-50"style=background:var(--bg-tertiary);color:var(--text-primary)>Last'),T6=w('<div class=space-y-4><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Network Policies</h1><p style=color:var(--text-secondary)>View and manage Kubernetes Network Policies for controlling pod-to-pod communication</p></div><div class="flex items-center gap-3"><select class="px-3 py-2 rounded-lg text-sm"title="Font Size"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=12>12px</option><option value=13>13px</option><option value=14>14px</option><option value=15>15px</option><option value=16>16px</option><option value=17>17px</option><option value=18>18px</option><option value=19>19px</option><option value=20>20px</option></select><select class="px-3 py-2 rounded-lg text-sm"title="Font Family"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=Monospace>Monospace</option><option value=System-ui>System-ui</option><option value=Monaco>Monaco</option><option value=Consolas>Consolas</option><option value=Courier>Courier</option></select><button class=icon-btn title="Refresh Network Policies"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div></div><div class="flex flex-wrap items-center gap-3"><div class=flex-1></div><input type=text placeholder=Search... class="px-3 py-2 rounded-lg text-sm w-48"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><select class="px-3 py-2 rounded-lg text-sm"style="background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div class=w-full style=margin:0;padding:0;border-radius:4px>'),D6=w('<div class="p-8 text-center"><div class="spinner mx-auto mb-2"></div><span style=color:var(--text-muted)>Loading network policies...'),R6=w('<tr><td colspan=8 class="text-center py-8"style=color:var(--text-muted)>No network policies found'),P6=w('<tr><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"><button class="font-medium hover:underline text-left"style=color:var(--accent-primary)></button></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;color:#0ea5e9;font-weight:900;border:none"></td><td style="padding:0 8px;text-align:left;border:none">'),I6=w('<div class="flex items-center justify-center p-8">Loading...');const B6=()=>{const[e,t]=W(""),[r,l]=W("name"),[a,m]=W("asc"),[d,i]=W(1),[n,g]=W(20),[v,p]=W(null),[y,x]=W(!1),[M,b]=W(!1),[o,c]=W(parseInt(localStorage.getItem("networkpolicies-font-size")||"14")),[u,h]=W(localStorage.getItem("networkpolicies-font-family")||"Monaco"),f=A=>{switch(A){case"Monospace":return"monospace";case"System-ui":return"system-ui";case"Monaco":return"Monaco, monospace";case"Consolas":return"Consolas, monospace";case"Courier":return'"Courier New", monospace';default:return"Monaco, monospace"}},$=A=>{c(A),localStorage.setItem("networkpolicies-font-size",A.toString())},C=A=>{h(A),localStorage.setItem("networkpolicies-font-family",A)},k=()=>{const A=hr();if(A.length!==0)return A.length===1,A[0]},S=Fr("networkpolicies",async()=>{ar(!0);try{const A=k();return await Fe.getNetworkPolicies(A)}catch(A){throw console.error("[NetworkPolicies] Error fetching policies:",A),Je(` Failed to fetch network policies: ${A instanceof Error?A.message:"Unknown error"}`,"error"),A}finally{ar(!1)}},{ttl:15e3,backgroundRefresh:!0}),L=et(()=>S.data()||[]);zt(()=>{S.data()||S.refetch()});const[P]=it(()=>y()&&v()?{name:v().name,ns:v().namespace}:null,async A=>A&&(await Fe.getNetworkPolicyYAML(A.name,A.ns)).yaml||""),I=A=>{if(!A)return 0;let z=0;const F=A.match(/(\d+)d/),j=A.match(/(\d+)h/),q=A.match(/(\d+)m/);return F&&(z+=parseInt(F[1])*24*60),j&&(z+=parseInt(j[1])*60),q&&(z+=parseInt(q[1])),z},D=et(()=>{let A=L()||[];const z=e().toLowerCase();z&&(A=A.filter(q=>q.name.toLowerCase().includes(z)||q.namespace.toLowerCase().includes(z)||q.selector.toLowerCase().includes(z)));const F=r(),j=a();return A=[...A].sort((q,U)=>{let Y=0;switch(F){case"name":Y=q.name.localeCompare(U.name);break;case"namespace":Y=q.namespace.localeCompare(U.namespace);break;case"age":Y=I(q.age)-I(U.age);break}return j==="asc"?Y:-Y}),A}),T=et(()=>Math.ceil(D().length/n())),B=et(()=>{const A=(d()-1)*n();return D().slice(A,A+n())}),N=A=>{r()===A?m(z=>z==="asc"?"desc":"asc"):(l(A),m("asc")),i(1)},O=A=>(()=>{var z=A6(),F=z.firstChild,j=F.nextSibling;return J(q=>{var U=r()===A.field&&a()==="asc"?"var(--accent-primary)":"var(--text-muted)",Y=r()===A.field&&a()==="desc"?"var(--accent-primary)":"var(--text-muted)";return U!==q.e&&E(F,"color",q.e=U),Y!==q.t&&E(j,"color",q.t=Y),q},{e:void 0,t:void 0}),z})(),H=async A=>{if(confirm(`Are you sure you want to delete network policy "${A.name}" in namespace "${A.namespace}"?`))try{await Fe.deleteNetworkPolicy(A.name,A.namespace),Je(`Network policy ${A.name} deleted successfully`,"success"),S.refetch()}catch(z){console.error("Failed to delete network policy:",z),Je(`Failed to delete network policy: ${z instanceof Error?z.message:"Unknown error"}`,"error")}};return(()=>{var A=T6(),z=A.firstChild,F=z.firstChild,j=F.firstChild;j.nextSibling;var q=F.nextSibling,U=q.firstChild,Y=U.nextSibling,V=Y.nextSibling,X=z.nextSibling,R=X.firstChild,G=R.nextSibling,te=G.nextSibling,ae=X.nextSibling;return U.addEventListener("change",Q=>$(parseInt(Q.currentTarget.value))),Y.addEventListener("change",Q=>C(Q.currentTarget.value)),V.$$click=Q=>{const Z=Q.currentTarget;Z.classList.add("refreshing"),setTimeout(()=>Z.classList.remove("refreshing"),500),S.refetch()},G.$$input=Q=>{t(Q.currentTarget.value),i(1)},te.addEventListener("change",Q=>{g(parseInt(Q.currentTarget.value)),i(1)}),s(ae,_(K,{get when(){return!S.loading()||S.data()!==void 0},get fallback(){return(()=>{var Q=D6(),Z=Q.firstChild;return Z.nextSibling,Q})()},get children(){return[(()=>{var Q=L6(),Z=Q.firstChild,ne=Z.firstChild,$e=ne.firstChild,re=$e.firstChild,de=re.firstChild;de.firstChild;var le=re.nextSibling,xe=le.firstChild;xe.firstChild;var ye=le.nextSibling,ke=ye.nextSibling,ge=ke.nextSibling,Ce=ge.nextSibling,_e=Ce.nextSibling,Me=_e.firstChild;Me.firstChild;var ve=ne.nextSibling;return re.$$click=()=>N("name"),s(de,_(O,{field:"name"}),null),le.$$click=()=>N("namespace"),s(xe,_(O,{field:"namespace"}),null),_e.$$click=()=>N("age"),s(Me,_(O,{field:"age"}),null),s(ve,_(Xe,{get each(){return B()},get fallback(){return(()=>{var be=R6();return be.firstChild,be})()},children:be=>(()=>{var ce=P6(),Ae=ce.firstChild,se=Ae.firstChild,oe=Ae.nextSibling,ie=oe.nextSibling,ue=ie.nextSibling,he=ue.nextSibling,Te=he.nextSibling,ee=Te.nextSibling,Se=ee.nextSibling;return se.$$click=()=>{p(be),b(!0)},s(se,(()=>{var pe=Re(()=>be.name.length>40);return()=>pe()?be.name.slice(0,37)+"...":be.name})()),s(oe,()=>be.namespace),s(ie,()=>be.selector),s(ue,()=>be.ingress),s(he,()=>be.egress),s(Te,()=>be.policyTypes?.join(", ")||"-"),s(ee,()=>be.age),Se.$$click=pe=>pe.stopPropagation(),s(Se,_(Jt,{actions:[{label:"View YAML",icon:"yaml",onClick:()=>{p(be),x(!0)}},{label:"Describe",icon:"info",onClick:()=>{p(be),b(!0)}},{label:"Delete",icon:"delete",onClick:()=>H(be),variant:"danger",divider:!0}]})),J(pe=>{var De=`${o()}px`,Ne=`${Math.max(24,o()*1.7)}px`,me=`${Math.max(24,o()*1.7)}px`,He=`${o()}px`,Ze=`${Math.max(24,o()*1.7)}px`,we=`${Math.max(24,o()*1.7)}px`,ze=`${o()}px`,Pe=`${Math.max(24,o()*1.7)}px`,Ue=`${Math.max(24,o()*1.7)}px`,Oe=`${o()}px`,fe=`${Math.max(24,o()*1.7)}px`,Le=`${Math.max(24,o()*1.7)}px`,We=`${o()}px`,Ee=`${Math.max(24,o()*1.7)}px`,Ie=`${Math.max(24,o()*1.7)}px`,qe=`${o()}px`,Be=`${Math.max(24,o()*1.7)}px`,Ke=`${Math.max(24,o()*1.7)}px`,Ye=`${o()}px`,lt=`${Math.max(24,o()*1.7)}px`,gt=`${Math.max(24,o()*1.7)}px`,Qe=`${Math.max(24,o()*1.7)}px`,ct=`${Math.max(24,o()*1.7)}px`;return De!==pe.e&&E(Ae,"font-size",pe.e=De),Ne!==pe.t&&E(Ae,"height",pe.t=Ne),me!==pe.a&&E(Ae,"line-height",pe.a=me),He!==pe.o&&E(oe,"font-size",pe.o=He),Ze!==pe.i&&E(oe,"height",pe.i=Ze),we!==pe.n&&E(oe,"line-height",pe.n=we),ze!==pe.s&&E(ie,"font-size",pe.s=ze),Pe!==pe.h&&E(ie,"height",pe.h=Pe),Ue!==pe.r&&E(ie,"line-height",pe.r=Ue),Oe!==pe.d&&E(ue,"font-size",pe.d=Oe),fe!==pe.l&&E(ue,"height",pe.l=fe),Le!==pe.u&&E(ue,"line-height",pe.u=Le),We!==pe.c&&E(he,"font-size",pe.c=We),Ee!==pe.w&&E(he,"height",pe.w=Ee),Ie!==pe.m&&E(he,"line-height",pe.m=Ie),qe!==pe.f&&E(Te,"font-size",pe.f=qe),Be!==pe.y&&E(Te,"height",pe.y=Be),Ke!==pe.g&&E(Te,"line-height",pe.g=Ke),Ye!==pe.p&&E(ee,"font-size",pe.p=Ye),lt!==pe.b&&E(ee,"height",pe.b=lt),gt!==pe.T&&E(ee,"line-height",pe.T=gt),Qe!==pe.A&&E(Se,"height",pe.A=Qe),ct!==pe.O&&E(Se,"line-height",pe.O=ct),pe},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0,A:void 0,O:void 0}),ce})()})),J(be=>{var ce=f(u()),Ae=qt();return ce!==be.e&&E(Z,"font-family",be.e=ce),Ae!==be.t&&E(Z,"background",be.t=Ae),be},{e:void 0,t:void 0}),Q})(),_(K,{get when(){return T()>1||D().length>0},get children(){var Q=E6(),Z=Q.firstChild,ne=Z.firstChild,$e=ne.nextSibling,re=$e.nextSibling,de=re.nextSibling,le=de.nextSibling,xe=le.nextSibling;xe.nextSibling;var ye=Z.nextSibling,ke=ye.firstChild,ge=ke.nextSibling,Ce=ge.nextSibling,_e=Ce.firstChild,Me=_e.nextSibling;Me.nextSibling;var ve=Ce.nextSibling,be=ve.nextSibling;return s(Z,()=>(d()-1)*n()+1,$e),s(Z,()=>Math.min(d()*n(),D().length),de),s(Z,()=>D().length,xe),ke.$$click=()=>i(1),ge.$$click=()=>i(ce=>Math.max(1,ce-1)),s(Ce,d,Me),s(Ce,T,null),ve.$$click=()=>i(ce=>Math.min(T(),ce+1)),be.$$click=()=>i(T()),J(ce=>{var Ae=`1px solid ${Ar()}`,se=d()===1,oe=d()===1,ie=d()===T(),ue=d()===T();return Ae!==ce.e&&E(Q,"borderTop",ce.e=Ae),se!==ce.t&&(ke.disabled=ce.t=se),oe!==ce.a&&(ge.disabled=ce.a=oe),ie!==ce.o&&(ve.disabled=ce.o=ie),ue!==ce.i&&(be.disabled=ce.i=ue),ce},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),Q}})]}})),s(A,_(mt,{get isOpen(){return y()},onClose:()=>x(!1),get title(){return`YAML: ${v()?.name}`},size:"xl",get children(){return _(K,{get when(){return!P.loading},get fallback(){return I6()},get children(){return _(gr,{get yaml(){return P()||""},get title(){return v()?.name}})}})}}),null),s(A,_(Sr,{get isOpen(){return M()},onClose:()=>b(!1),resourceType:"networkpolicy",get name(){return v()?.name||""},get namespace(){return v()?.namespace}}),null),J(Q=>{var Z=qt(),ne=`1px solid ${Ar()}`;return Z!==Q.e&&E(ae,"background",Q.e=Z),ne!==Q.t&&E(ae,"border",Q.t=ne),Q},{e:void 0,t:void 0}),J(()=>U.value=o()),J(()=>Y.value=u()),J(()=>G.value=e()),J(()=>te.value=n()),A})()};ut(["click","input"]);var N6=w('<div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Email</label><input type=email class="w-full px-4 py-2 rounded-lg"placeholder=your@email.com style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)">'),O6=w('<div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Role</label><select class="w-full px-4 py-2 rounded-lg"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><option value=viewer>Viewer (Read-only)</option><option value=developer>Developer (Read/Write)</option><option value=admin>Admin (Full Access)</option></select><p class="text-xs mt-1"style=color:var(--text-muted)>Choose your access level'),z6=w('<div class="mt-6 p-4 rounded-lg text-sm"style="background:var(--bg-tertiary);border:1px solid var(--border-color)"><p class="font-medium mb-2"style=color:var(--text-primary)> First Time Setup</p><p style=color:var(--text-secondary)>If this is your first time, create an admin account by clicking "Create one" below, or use the default credentials if configured.'),F6=w('<div class="fixed inset-0 flex items-center justify-center"style="background:rgba(0, 0, 0, 0.7);z-index:9999;pointer-events:auto"><div class="card p-8 max-w-md w-full mx-4"style=background:var(--bg-card)><div class=mb-6><h2 class="text-2xl font-bold mb-2"style=color:var(--text-primary)></h2><p class=text-sm style=color:var(--text-secondary)></p></div><form class=space-y-4><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Username</label><input type=text required class="w-full px-4 py-2 rounded-lg"placeholder="Enter username"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div><div><label class="block text-sm font-medium mb-2"style=color:var(--text-secondary)>Password</label><input type=password required class="w-full px-4 py-2 rounded-lg"placeholder="Enter password"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"></div><button type=submit class="w-full py-3 rounded-lg font-medium transition-opacity disabled:opacity-50"style=background:var(--accent-primary);color:white></button></form><div class="mt-4 text-center"><button class="text-sm hover:underline"style=color:var(--accent-primary)>');const H6=e=>{const[t,r]=W(""),[l,a]=W(""),[m,d]=W(!1),[i,n]=W(!1),[g,v]=W(""),[p,y]=W("viewer"),x=async b=>{b.preventDefault(),d(!0);try{const o=await fetch("http://localhost:3001/api/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:t(),password:l()})});if(!o.ok)throw new Error("Invalid credentials");const c=await o.json();localStorage.setItem("kubegraf_token",c.token),localStorage.setItem("kubegraf_user",JSON.stringify(c.user)),Je(` Welcome back, ${c.user.username}!`,"success"),e.onLoginSuccess(c.user),e.onClose()}catch(o){Je(` Login failed: ${o instanceof Error?o.message:"Unknown error"}`,"error")}finally{d(!1)}},M=async b=>{b.preventDefault(),d(!0);try{const o=await fetch("http://localhost:3001/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t(),password:l(),email:g(),role:p()})});if(!o.ok){const c=await o.text();throw new Error(c||"Registration failed")}Je(" Account created! Please login.","success"),n(!1),a("")}catch(o){Je(` Registration failed: ${o instanceof Error?o.message:"Unknown error"}`,"error")}finally{d(!1)}};return console.log("[LoginModal] Render called - isOpen:",e.isOpen),_(K,{get when(){return e.isOpen},get children(){return _(ms,{get children(){var b=F6(),o=b.firstChild,c=o.firstChild,u=c.firstChild,h=u.nextSibling,f=c.nextSibling,$=f.firstChild,C=$.firstChild,k=C.nextSibling,S=$.nextSibling,L=S.firstChild,P=L.nextSibling,I=S.nextSibling,D=f.nextSibling,T=D.firstChild;return Rt(b,"click",e.onClose,!0),o.$$click=B=>B.stopPropagation(),s(u,()=>i()?" Create Account":" Login to KubeGraf"),s(h,()=>i()?"Create a new account to access KubeGraf":"Enter your credentials to continue"),Rt(f,"submit",i()?M:x),k.$$input=B=>r(B.currentTarget.value),s(f,_(K,{get when(){return i()},get children(){var B=N6(),N=B.firstChild,O=N.nextSibling;return O.$$input=H=>v(H.currentTarget.value),J(H=>{var A=i(),z=m();return A!==H.e&&(O.required=H.e=A),z!==H.t&&(O.disabled=H.t=z),H},{e:void 0,t:void 0}),J(()=>O.value=g()),B}}),S),P.$$input=B=>a(B.currentTarget.value),s(f,_(K,{get when(){return i()},get children(){var B=O6(),N=B.firstChild,O=N.nextSibling;return O.nextSibling,O.addEventListener("change",H=>y(H.currentTarget.value)),J(()=>O.disabled=m()),J(()=>O.value=p()),B}}),I),s(I,(()=>{var B=Re(()=>!!m());return()=>B()?" Processing...":i()?" Create Account":" Login"})()),T.$$click=()=>{n(!i()),a(""),v("")},s(T,()=>i()?" Back to Login":"Don't have an account? Create one "),s(o,_(K,{get when(){return!i()},get children(){var B=z6(),N=B.firstChild;return N.nextSibling,B}}),null),J(B=>{var N=m(),O=m(),H=m(),A=m();return N!==B.e&&(k.disabled=B.e=N),O!==B.t&&(P.disabled=B.t=O),H!==B.a&&(I.disabled=B.a=H),A!==B.o&&(T.disabled=B.o=A),B},{e:void 0,t:void 0,a:void 0,o:void 0}),J(()=>k.value=t()),J(()=>P.value=l()),b}})}})};ut(["click","input"]);var j6=w('<div class="flex items-center gap-3"><div class=text-right><div class="text-sm font-medium"style=color:var(--text-primary)></div><div class=text-xs style=color:var(--text-secondary)></div></div><button class="px-4 py-2 rounded-lg text-sm"style="background:var(--bg-tertiary);border:1px solid var(--border-color);color:var(--text-primary)">Logout'),U6=w('<div class="p-4 rounded-lg"style="background:var(--bg-tertiary);border:1px solid var(--border-color)"><div class="grid grid-cols-2 gap-4"><div><div class=text-xs style=color:var(--text-muted)>Username</div><div class=font-medium style=color:var(--text-primary)></div></div><div><div class=text-xs style=color:var(--text-muted)>Email</div><div class=font-medium style=color:var(--text-primary)></div></div><div><div class=text-xs style=color:var(--text-muted)>Role</div><div><span class="inline-flex px-2 py-1 rounded text-xs font-medium"></span></div></div><div><div class=text-xs style=color:var(--text-muted)>Status</div><div class="flex items-center gap-2"><span class="w-2 h-2 rounded-full bg-green-500"></span><span class=text-sm style=color:var(--text-primary)>Active'),V6=w(`<div class="card p-6"><h3 class="text-lg font-semibold mb-4"style=color:var(--text-primary)> Quick Setup Guide</h3><div class=space-y-4><div class="flex items-start gap-3"><div class="w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0"style=background:var(--accent-primary);color:white>1</div><div><div class="font-medium mb-1"style=color:var(--text-primary)>Create Admin Account</div><div class=text-sm style=color:var(--text-secondary)>Click "Login" button  "Create one"  Fill details  Select "Admin" role</div></div></div><div class="flex items-start gap-3"><div class="w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0"style=background:var(--accent-primary);color:white>2</div><div><div class="font-medium mb-1"style=color:var(--text-primary)>Login</div><div class=text-sm style=color:var(--text-secondary)>Use your credentials to login  Session valid for 24 hours</div></div></div><div class="flex items-start gap-3"><div class="w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0"style=background:var(--accent-primary);color:white>3</div><div><div class="font-medium mb-1"style=color:var(--text-primary)>Create Additional Users</div><div class=text-sm style=color:var(--text-secondary)>As admin, create accounts for team members with appropriate roles</div></div></div></div><div class="mt-6 p-4 rounded-lg"style="background:var(--bg-tertiary);border:1px solid var(--border-color)"><div class="flex items-start gap-2"><span></span><div class=text-sm style=color:var(--text-secondary)><strong>First Time?</strong> If IAM is enabled but you don't have credentials, you'll need to create the first admin account. Click the Login button above to get started.`),W6=w('<div class="space-y-6 p-6"><div class="flex items-center justify-between"><div><h1 class="text-3xl font-bold"style=color:var(--text-primary)> User Management</h1><p class="text-sm mt-2"style=color:var(--text-secondary)>Manage users, roles, and authentication</p></div></div><div class="card p-6"><div class="flex items-center justify-between mb-4"><div class="flex items-center gap-3"><div class="w-12 h-12 rounded-full flex items-center justify-center"style=background:var(--accent-primary)><span class=text-2xl></span></div><div><h2 class="text-xl font-semibold"style=color:var(--text-primary)>Local IAM System</h2><p class=text-sm style=color:var(--text-secondary)>Identity and Access Management</p></div></div></div></div><div class="card p-6"><h3 class="text-lg font-semibold mb-4"style=color:var(--text-primary)> Roles & Permissions</h3><div class=space-y-3><div class="p-4 rounded-lg"style="background:var(--bg-tertiary);border:1px solid var(--border-color)"><div class="flex items-center gap-3 mb-2"><span class="px-2 py-1 rounded text-xs font-medium"style="background:rgba(239, 68, 68, 0.1);color:#ef4444">Admin</span><span class="text-sm font-medium"style=color:var(--text-primary)>Full Access</span></div><p class=text-sm style=color:var(--text-secondary)>Complete control over all resources, users, and settings. Can create/delete users, modify any resource, and access all namespaces.</p></div><div class="p-4 rounded-lg"style="background:var(--bg-tertiary);border:1px solid var(--border-color)"><div class="flex items-center gap-3 mb-2"><span class="px-2 py-1 rounded text-xs font-medium"style="background:rgba(59, 130, 246, 0.1);color:#3b82f6">Developer</span><span class="text-sm font-medium"style=color:var(--text-primary)>Read/Write Access</span></div><p class=text-sm style=color:var(--text-secondary)>Can create, update, and delete pods, deployments, services, and config maps. Can view all resources but cannot manage users or cluster settings.</p></div><div class="p-4 rounded-lg"style="background:var(--bg-tertiary);border:1px solid var(--border-color)"><div class="flex items-center gap-3 mb-2"><span class="px-2 py-1 rounded text-xs font-medium"style="background:rgba(34, 197, 94, 0.1);color:#22c55b">Viewer</span><span class="text-sm font-medium"style=color:var(--text-primary)>Read-Only Access</span></div><p class=text-sm style=color:var(--text-secondary)>Can view all resources, logs, and metrics. Cannot create, update, or delete any resources. Perfect for monitoring and auditing purposes.'),q6=w('<button class="px-6 py-2 rounded-lg font-medium transition-all hover:opacity-90"type=button style=background:var(--accent-primary);color:white;cursor:pointer;border:none> Login');const K6=()=>{const[e,t]=W(!1),[r,l]=W(null),[a,m]=W(!1);(()=>{const g=localStorage.getItem("kubegraf_token"),v=localStorage.getItem("kubegraf_user");return g&&v?(l(JSON.parse(v)),!0):!1})();const i=()=>{fetch("http://localhost:3001/api/logout",{method:"POST",credentials:"include"}),localStorage.removeItem("kubegraf_token"),localStorage.removeItem("kubegraf_user"),l(null),Je(" Logged out successfully","success")},n=g=>{l(g)};return(()=>{var g=W6(),v=g.firstChild,p=v.firstChild,y=p.firstChild;y.nextSibling;var x=v.nextSibling,M=x.firstChild,b=M.firstChild,o=b.firstChild,c=o.nextSibling,u=c.firstChild;u.nextSibling;var h=x.nextSibling,f=h.firstChild,$=f.nextSibling,C=$.firstChild,k=C.firstChild,S=k.firstChild;S.nextSibling,k.nextSibling;var L=C.nextSibling,P=L.firstChild,I=P.firstChild;I.nextSibling,P.nextSibling;var D=L.nextSibling,T=D.firstChild,B=T.firstChild;return B.nextSibling,T.nextSibling,s(M,_(K,{get when(){return r()},get fallback(){return(()=>{var N=q6();return N.$$click=O=>{O.preventDefault(),O.stopPropagation(),console.log("Login button clicked! Current state:",e()),t(!0),console.log("After setState:",e()),setTimeout(()=>{console.log("After timeout:",e())},0)},N})()},get children(){var N=j6(),O=N.firstChild,H=O.firstChild,A=H.nextSibling,z=O.nextSibling;return s(H,()=>r()?.username),s(A,()=>r()?.role),z.$$click=i,N}}),null),s(x,_(K,{get when(){return r()},get children(){var N=U6(),O=N.firstChild,H=O.firstChild,A=H.firstChild,z=A.nextSibling,F=H.nextSibling,j=F.firstChild,q=j.nextSibling,U=F.nextSibling,Y=U.firstChild,V=Y.nextSibling,X=V.firstChild,R=U.nextSibling,G=R.firstChild,te=G.nextSibling,ae=te.firstChild;return ae.nextSibling,s(z,()=>r()?.username),s(q,()=>r()?.email||"Not set"),s(X,()=>r()?.role),J(Q=>{var Z=r()?.role==="admin"?"rgba(239, 68, 68, 0.1)":r()?.role==="developer"?"rgba(59, 130, 246, 0.1)":"rgba(34, 197, 94, 0.1)",ne=r()?.role==="admin"?"#ef4444":r()?.role==="developer"?"#3b82f6":"#22c55b";return Z!==Q.e&&E(X,"background",Q.e=Z),ne!==Q.t&&E(X,"color",Q.t=ne),Q},{e:void 0,t:void 0}),N}}),null),s(g,_(K,{get when(){return!r()},get children(){var N=V6(),O=N.firstChild,H=O.nextSibling,A=H.firstChild,z=A.firstChild,F=z.nextSibling,j=F.firstChild;j.nextSibling;var q=A.nextSibling,U=q.firstChild,Y=U.nextSibling,V=Y.firstChild;V.nextSibling;var X=q.nextSibling,R=X.firstChild,G=R.nextSibling,te=G.firstChild;te.nextSibling;var ae=H.nextSibling,Q=ae.firstChild,Z=Q.firstChild;return Z.nextSibling,N}}),h),s(g,_(K,{when:!0,get children(){return _(H6,{get isOpen(){return e()},onClose:()=>{console.log("Closing login modal"),t(!1)},onLoginSuccess:n})}}),null),g})()};ut(["click"]);var Y6=w('<div class="flex flex-col h-full"style="height:calc(100vh - 120px)"><div class="flex items-center justify-between mb-4"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>Terminal</h1><p style=color:var(--text-secondary)>Local system terminal');const G6=()=>(()=>{var e=Y6(),t=e.firstChild,r=t.firstChild,l=r.firstChild;return l.nextSibling,s(e,_(ud,{}),null),e})();var J6=w('<div class="p-8 text-center rounded-lg border"style=background:var(--bg-secondary);border-color:var(--border-color);color:var(--text-muted)>No recent actions'),X6=w('<div class=space-y-6><div class="flex items-center justify-between"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>AutoFix Engine</h1><p class="text-sm mt-1"style=color:var(--text-secondary)>Automated remediation for OOM, HPA max, security, and drift issues</p></div><label class="flex items-center gap-2 cursor-pointer"><input type=checkbox class="w-4 h-4 rounded"style=accentColor:var(--accent-primary)><span class="text-sm font-medium"style=color:var(--text-primary)>Enable AutoFix</span></label></div><div class="flex gap-2 border-b"style=border-color:var(--border-color)></div><div><h2 class="text-lg font-semibold mb-4"style=color:var(--text-primary)>AutoFix Rules</h2><div class="grid gap-4"></div></div><div><h2 class="text-lg font-semibold mb-4"style=color:var(--text-primary)>Recent Actions</h2><div class=space-y-2>'),Z6=w("<button>"),Q6=w("<div> Maximum limit: <strong class=text-yellow-400> replicas"),e8=w("<div> <strong class=text-yellow-400>No maximum limit</strong> - can scale indefinitely"),t8=w('<div class="space-y-1 mb-2"><div> Adds <strong class=text-blue-400> additional replicas</strong> per trigger'),xc=w('<button class="text-xs px-2 py-1 rounded"style=background:var(--accent-primary);color:#000>Configure'),r8=w('<div class=space-y-2><div><label class="block text-xs mb-1"style=color:var(--text-secondary)>Additional Replicas per Trigger:</label><input type=number min=1 max=100 class="w-full px-2 py-1 rounded text-sm"style="background:var(--bg-primary);border:1px solid var(--border-color);color:var(--text-primary)"></div><div><label class="block text-xs mb-1"style=color:var(--text-secondary)>Maximum Replicas Limit (0 = no limit):</label><input type=number min=0 class="w-full px-2 py-1 rounded text-sm"style="background:var(--bg-primary);border:1px solid var(--border-color);color:var(--text-primary)"></div><div class="flex gap-2"><button class="text-xs px-3 py-1 rounded"style=background:var(--accent-primary);color:#000>Save</button><button class="text-xs px-3 py-1 rounded"style="background:var(--bg-primary);border:1px solid var(--border-color);color:var(--text-secondary)">Cancel'),s8=w('<div class="text-xs mb-2 p-3 rounded border"style=background:var(--bg-tertiary);color:var(--text-muted);border-color:var(--border-color)><div class="font-semibold mb-2"style=color:var(--text-secondary)>Scaling Configuration:'),i8=w('<div class="space-y-1 mb-2"><div> Restarts pod and increases memory by <strong class=text-red-400> MiB</strong></div><div> Deletes the pod to trigger Kubernetes recreation'),n8=w('<div class=space-y-2><div><label class="block text-xs mb-1"style=color:var(--text-secondary)>Memory Increase (MiB):</label><input type=number min=100 max=10000 step=100 class="w-full px-2 py-1 rounded text-sm"style="background:var(--bg-primary);border:1px solid var(--border-color);color:var(--text-primary)"></div><div class="flex gap-2"><button class="text-xs px-3 py-1 rounded"style=background:var(--accent-primary);color:#000>Save</button><button class="text-xs px-3 py-1 rounded"style="background:var(--bg-primary);border:1px solid var(--border-color);color:var(--text-secondary)">Cancel'),l8=w('<div class="text-xs mb-2 p-3 rounded border"style=background:var(--bg-tertiary);color:var(--text-muted);border-color:var(--border-color)><div class="font-semibold mb-2"style=color:var(--text-secondary)>Memory Configuration:'),o8=w('<div class="text-xs mb-2 p-2 rounded border"style=background:var(--bg-tertiary);color:var(--text-muted);border-color:var(--border-color)><div class="font-semibold mb-1"style=color:var(--text-secondary)>Default Settings:</div><div class=space-y-1><div> Automatically applies <strong class=text-yellow-400>security policy fixes</strong></div><div> Fixes policy violations automatically</div><div> Applies recommended security configurations'),a8=w('<div class="text-xs mb-2 p-2 rounded border"style=background:var(--bg-tertiary);color:var(--text-muted);border-color:var(--border-color)><div class="font-semibold mb-1"style=color:var(--text-secondary)>Default Settings:</div><div class=space-y-1><div> <strong class=text-purple-400>Reverts configuration</strong> to expected state</div><div> Corrects drift from Git/declared configuration</div><div> Restores resources to match source of truth'),c8=w("<span>Last: "),d8=w('<div class="p-4 rounded-lg border"style=background:var(--bg-secondary);border-color:var(--border-color)><div class="flex items-start justify-between"><div class=flex-1><div class="flex items-center gap-3 mb-2"><h3 class=font-medium style=color:var(--text-primary)></h3><span></span></div><p class="text-sm mb-3"style=color:var(--text-secondary)></p><div class="flex items-center gap-4 text-xs"style=color:var(--text-muted)><span>Triggered <!> times</span></div></div><label class="flex items-center gap-2 cursor-pointer ml-4"><input type=checkbox class="w-4 h-4 rounded"style=accentColor:var(--accent-primary)><span class=text-sm style=color:var(--text-secondary)>'),u8=w('<div class="p-3 rounded-lg border flex items-center justify-between"style=background:var(--bg-secondary);border-color:var(--border-color)><div class="flex items-center gap-3 flex-1"><span></span><div class=flex-1><div class="text-sm font-medium"style=color:var(--text-primary)> (<!>)</div><div class=text-xs style=color:var(--text-secondary)></div></div><div class=text-xs style=color:var(--text-muted)>');const h8=()=>{const[e,t]=W("all"),[r,l]=W(null),[a,m]=W({}),[d,{refetch:i}]=it(async()=>{try{return await Fe.getAutoFixRules()}catch(h){return console.error("Failed to fetch auto-fix rules:",h),Je("Failed to load AutoFix rules","error"),[]}}),[n,{refetch:g}]=it(async()=>{try{return await Fe.getAutoFixEnabled()}catch(h){return console.error("Failed to fetch AutoFix enabled state:",h),!1}}),[v,{refetch:p}]=it(async()=>{try{return await Fe.getAutoFixActions()}catch(h){return console.error("Failed to fetch auto-fix actions:",h),[]}}),y=()=>{const h=d()||[];return e()==="all"?h:h.filter(f=>f.type===e())},x=()=>{const h=v()||[];return e()==="all"?h:h.filter(f=>f.type===e())},M=async h=>{try{const f=(d()||[]).find(k=>k.id===h);if(!f){Je("Rule not found","error");return}const $=!f.enabled,C=a()[h]||f.settings;await Fe.toggleAutoFixRule(h,$,C),i(),Je(`${f.name} ${$?"enabled":"disabled"}`,"success")}catch(f){console.error("Failed to toggle rule:",f),Je(f.message||"Failed to update rule","error")}},b=async(h,f)=>{try{const $=(d()||[]).find(C=>C.id===h);if(!$){Je("Rule not found","error");return}m({...a(),[h]:f}),await Fe.toggleAutoFixRule(h,$.enabled,f),i(),l(null),Je("Settings updated","success")}catch($){console.error("Failed to update rule settings:",$),Je($.message||"Failed to update settings","error")}},o=async h=>{try{await Fe.setAutoFixEnabled(h),g(),Je(`AutoFix ${h?"enabled":"disabled"}`,"success")}catch(f){console.error("Failed to toggle AutoFix:",f),Je(f.message||"Failed to update AutoFix state","error")}},c=h=>{switch(h){case"oom":return"bg-red-500/10 text-red-400 border-red-500/20";case"hpa_max":return"bg-blue-500/10 text-blue-400 border-blue-500/20";case"security":return"bg-yellow-500/10 text-yellow-400 border-yellow-500/20";case"drift":return"bg-purple-500/10 text-purple-400 border-purple-500/20";default:return"bg-gray-500/10 text-gray-400 border-gray-500/20"}},u=h=>{switch(h){case"success":return"bg-green-500/10 text-green-400";case"failed":return"bg-red-500/10 text-red-400";case"pending":return"bg-yellow-500/10 text-yellow-400";default:return"bg-gray-500/10 text-gray-400"}};return(()=>{var h=X6(),f=h.firstChild,$=f.firstChild,C=$.firstChild;C.nextSibling;var k=$.nextSibling,S=k.firstChild;S.nextSibling;var L=f.nextSibling,P=L.nextSibling,I=P.firstChild,D=I.nextSibling,T=P.nextSibling,B=T.firstChild,N=B.nextSibling;return S.addEventListener("change",O=>o(O.currentTarget.checked)),s(L,()=>["all","oom","hpa_max","security","drift"].map(O=>(()=>{var H=Z6();return H.$$click=()=>t(O),s(H,O==="all"?"All":O==="oom"?"OOM":O==="hpa_max"?"HPA Max":O==="security"?"Security":"Drift"),J(A=>{var z=`px-4 py-2 text-sm font-medium transition-colors ${e()===O?"border-b-2":"opacity-60 hover:opacity-100"}`,F=e()===O?"var(--accent-primary)":"var(--text-secondary)",j=e()===O?"var(--accent-primary)":"transparent";return z!==A.e&&tt(H,A.e=z),F!==A.t&&E(H,"color",A.t=F),j!==A.a&&E(H,"border-color",A.a=j),A},{e:void 0,t:void 0,a:void 0}),H})())),s(D,_(Xe,{get each(){return y()},children:O=>(()=>{var H=d8(),A=H.firstChild,z=A.firstChild,F=z.firstChild,j=F.firstChild,q=j.nextSibling,U=F.nextSibling,Y=U.nextSibling,V=Y.firstChild,X=V.firstChild,R=X.nextSibling;R.nextSibling;var G=z.nextSibling,te=G.firstChild,ae=te.nextSibling;return s(j,()=>O.name),s(q,(()=>{var Q=Re(()=>O.type==="hpa_max");return()=>Q()?"HPA MAX":O.type.toUpperCase()})()),s(U,()=>O.description),s(z,_(K,{get when(){return O.type==="hpa_max"},get children(){var Q=s8();return Q.firstChild,s(Q,_(K,{get when(){return r()!==O.id},get children(){return[(()=>{var Z=t8(),ne=Z.firstChild,$e=ne.firstChild,re=$e.nextSibling,de=re.firstChild;return s(re,()=>O.settings?.additionalReplicas??2,de),s(Z,_(K,{get when(){return(O.settings?.maxReplicasLimit??0)>0},get children(){var le=Q6(),xe=le.firstChild,ye=xe.nextSibling,ke=ye.firstChild;return s(ye,()=>O.settings?.maxReplicasLimit,ke),le}}),null),s(Z,_(K,{get when(){return(O.settings?.maxReplicasLimit??0)===0},get children(){return e8()}}),null),Z})(),(()=>{var Z=xc();return Z.$$click=()=>l(O.id),Z})()]}}),null),s(Q,_(K,{get when(){return r()===O.id},get children(){var Z=r8(),ne=Z.firstChild,$e=ne.firstChild,re=$e.nextSibling,de=ne.nextSibling,le=de.firstChild,xe=le.nextSibling,ye=de.nextSibling,ke=ye.firstChild,ge=ke.nextSibling;return re.$$input=Ce=>{const _e=parseInt(Ce.currentTarget.value)||2;m({...a(),[O.id]:{...a()[O.id],...O.settings,additionalReplicas:_e}})},xe.$$input=Ce=>{const _e=parseInt(Ce.currentTarget.value)||0;m({...a(),[O.id]:{...a()[O.id],...O.settings,maxReplicasLimit:_e}})},ke.$$click=()=>b(O.id,a()[O.id]||O.settings||{}),ge.$$click=()=>{l(null),m({...a(),[O.id]:O.settings||{}})},J(()=>re.value=a()[O.id]?.additionalReplicas??O.settings?.additionalReplicas??2),J(()=>xe.value=a()[O.id]?.maxReplicasLimit??O.settings?.maxReplicasLimit??0),Z}}),null),Q}}),Y),s(z,_(K,{get when(){return O.type==="oom"},get children(){var Q=l8();return Q.firstChild,s(Q,_(K,{get when(){return r()!==O.id},get children(){return[(()=>{var Z=i8(),ne=Z.firstChild,$e=ne.firstChild,re=$e.nextSibling,de=re.firstChild;return s(re,()=>O.settings?.memoryIncreaseMiB??500,de),Z})(),(()=>{var Z=xc();return Z.$$click=()=>l(O.id),Z})()]}}),null),s(Q,_(K,{get when(){return r()===O.id},get children(){var Z=n8(),ne=Z.firstChild,$e=ne.firstChild,re=$e.nextSibling,de=ne.nextSibling,le=de.firstChild,xe=le.nextSibling;return re.$$input=ye=>{const ke=parseInt(ye.currentTarget.value)||500;m({...a(),[O.id]:{...a()[O.id],...O.settings,memoryIncreaseMiB:ke}})},le.$$click=()=>b(O.id,a()[O.id]||O.settings||{}),xe.$$click=()=>{l(null),m({...a(),[O.id]:O.settings||{}})},J(()=>re.value=a()[O.id]?.memoryIncreaseMiB??O.settings?.memoryIncreaseMiB??500),Z}}),null),Q}}),Y),s(z,_(K,{get when(){return O.type==="security"},get children(){var Q=o8();return Q.firstChild,Q}}),Y),s(z,_(K,{get when(){return O.type==="drift"},get children(){var Q=a8();return Q.firstChild,Q}}),Y),s(V,()=>O.triggerCount,R),s(Y,_(K,{get when(){return O.lastTriggered},get children(){var Q=c8();return Q.firstChild,s(Q,()=>new Date(O.lastTriggered).toLocaleString(),null),Q}}),null),te.addEventListener("change",()=>M(O.id)),s(ae,()=>O.enabled?"Enabled":"Disabled"),J(Q=>{var Z=`px-2 py-0.5 rounded text-xs border ${c(O.type)}`,ne=!(n()??!1);return Z!==Q.e&&tt(q,Q.e=Z),ne!==Q.t&&(te.disabled=Q.t=ne),Q},{e:void 0,t:void 0}),J(()=>te.checked=O.enabled),H})()})),s(N,_(Xe,{get each(){return x()},children:O=>(()=>{var H=u8(),A=H.firstChild,z=A.firstChild,F=z.nextSibling,j=F.firstChild,q=j.firstChild,U=q.nextSibling;U.nextSibling;var Y=j.nextSibling,V=F.nextSibling;return s(z,()=>O.status.toUpperCase()),s(j,()=>O.resource,q),s(j,()=>O.namespace,U),s(Y,()=>O.message),s(V,()=>new Date(O.timestamp).toLocaleString()),J(()=>tt(z,`px-2 py-1 rounded text-xs font-medium ${u(O.status)}`)),H})()}),null),s(N,_(K,{get when(){return x().length===0},get children(){return J6()}}),null),J(()=>S.checked=n()??!1),h})()};ut(["click","input"]);function vo(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Hs=vo();function Kd(e){Hs=e}const Yd=/[&<>"']/,g8=new RegExp(Yd.source,"g"),Gd=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,v8=new RegExp(Gd.source,"g"),f8={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},yc=e=>f8[e];function Er(e,t){if(t){if(Yd.test(e))return e.replace(g8,yc)}else if(Gd.test(e))return e.replace(v8,yc);return e}const p8=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function m8(e){return e.replace(p8,(t,r)=>(r=r.toLowerCase(),r==="colon"?":":r.charAt(0)==="#"?r.charAt(1)==="x"?String.fromCharCode(parseInt(r.substring(2),16)):String.fromCharCode(+r.substring(1)):""))}const b8=/(^|[^\[])\^/g;function Ht(e,t){let r=typeof e=="string"?e:e.source;t=t||"";const l={replace:(a,m)=>{let d=typeof m=="string"?m:m.source;return d=d.replace(b8,"$1"),r=r.replace(a,d),l},getRegex:()=>new RegExp(r,t)};return l}function _c(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}const Ai={exec:()=>null};function $c(e,t){const r=e.replace(/\|/g,(m,d,i)=>{let n=!1,g=d;for(;--g>=0&&i[g]==="\\";)n=!n;return n?"|":" |"}),l=r.split(/ \|/);let a=0;if(l[0].trim()||l.shift(),l.length>0&&!l[l.length-1].trim()&&l.pop(),t)if(l.length>t)l.splice(t);else for(;l.length<t;)l.push("");for(;a<l.length;a++)l[a]=l[a].trim().replace(/\\\|/g,"|");return l}function fn(e,t,r){const l=e.length;if(l===0)return"";let a=0;for(;a<l&&e.charAt(l-a-1)===t;)a++;return e.slice(0,l-a)}function x8(e,t){if(e.indexOf(t[1])===-1)return-1;let r=0;for(let l=0;l<e.length;l++)if(e[l]==="\\")l++;else if(e[l]===t[0])r++;else if(e[l]===t[1]&&(r--,r<0))return l;return-1}function wc(e,t,r,l){const a=t.href,m=t.title?Er(t.title):null,d=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){l.state.inLink=!0;const i={type:"link",raw:r,href:a,title:m,text:d,tokens:l.inlineTokens(d)};return l.state.inLink=!1,i}return{type:"image",raw:r,href:a,title:m,text:Er(d)}}function y8(e,t){const r=e.match(/^(\s+)(?:```)/);if(r===null)return t;const l=r[1];return t.split(`
`).map(a=>{const m=a.match(/^\s+/);if(m===null)return a;const[d]=m;return d.length>=l.length?a.slice(l.length):a}).join(`
`)}class jn{options;rules;lexer;constructor(t){this.options=t||Hs}space(t){const r=this.rules.block.newline.exec(t);if(r&&r[0].length>0)return{type:"space",raw:r[0]}}code(t){const r=this.rules.block.code.exec(t);if(r){const l=r[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:r[0],codeBlockStyle:"indented",text:this.options.pedantic?l:fn(l,`
`)}}}fences(t){const r=this.rules.block.fences.exec(t);if(r){const l=r[0],a=y8(l,r[3]||"");return{type:"code",raw:l,lang:r[2]?r[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):r[2],text:a}}}heading(t){const r=this.rules.block.heading.exec(t);if(r){let l=r[2].trim();if(/#$/.test(l)){const a=fn(l,"#");(this.options.pedantic||!a||/ $/.test(a))&&(l=a.trim())}return{type:"heading",raw:r[0],depth:r[1].length,text:l,tokens:this.lexer.inline(l)}}}hr(t){const r=this.rules.block.hr.exec(t);if(r)return{type:"hr",raw:r[0]}}blockquote(t){const r=this.rules.block.blockquote.exec(t);if(r){let l=r[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`);l=fn(l.replace(/^ *>[ \t]?/gm,""),`
`);const a=this.lexer.state.top;this.lexer.state.top=!0;const m=this.lexer.blockTokens(l);return this.lexer.state.top=a,{type:"blockquote",raw:r[0],tokens:m,text:l}}}list(t){let r=this.rules.block.list.exec(t);if(r){let l=r[1].trim();const a=l.length>1,m={type:"list",raw:"",ordered:a,start:a?+l.slice(0,-1):"",loose:!1,items:[]};l=a?`\\d{1,9}\\${l.slice(-1)}`:`\\${l}`,this.options.pedantic&&(l=a?l:"[*+-]");const d=new RegExp(`^( {0,3}${l})((?:[	 ][^\\n]*)?(?:\\n|$))`);let i="",n="",g=!1;for(;t;){let v=!1;if(!(r=d.exec(t))||this.rules.block.hr.test(t))break;i=r[0],t=t.substring(i.length);let p=r[2].split(`
`,1)[0].replace(/^\t+/,c=>" ".repeat(3*c.length)),y=t.split(`
`,1)[0],x=0;this.options.pedantic?(x=2,n=p.trimStart()):(x=r[2].search(/[^ ]/),x=x>4?1:x,n=p.slice(x),x+=r[1].length);let M=!1;if(!p&&/^ *$/.test(y)&&(i+=y+`
`,t=t.substring(y.length+1),v=!0),!v){const c=new RegExp(`^ {0,${Math.min(3,x-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),u=new RegExp(`^ {0,${Math.min(3,x-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),h=new RegExp(`^ {0,${Math.min(3,x-1)}}(?:\`\`\`|~~~)`),f=new RegExp(`^ {0,${Math.min(3,x-1)}}#`);for(;t;){const $=t.split(`
`,1)[0];if(y=$,this.options.pedantic&&(y=y.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),h.test(y)||f.test(y)||c.test(y)||u.test(t))break;if(y.search(/[^ ]/)>=x||!y.trim())n+=`
`+y.slice(x);else{if(M||p.search(/[^ ]/)>=4||h.test(p)||f.test(p)||u.test(p))break;n+=`
`+y}!M&&!y.trim()&&(M=!0),i+=$+`
`,t=t.substring($.length+1),p=y.slice(x)}}m.loose||(g?m.loose=!0:/\n *\n *$/.test(i)&&(g=!0));let b=null,o;this.options.gfm&&(b=/^\[[ xX]\] /.exec(n),b&&(o=b[0]!=="[ ] ",n=n.replace(/^\[[ xX]\] +/,""))),m.items.push({type:"list_item",raw:i,task:!!b,checked:o,loose:!1,text:n,tokens:[]}),m.raw+=i}m.items[m.items.length-1].raw=i.trimEnd(),m.items[m.items.length-1].text=n.trimEnd(),m.raw=m.raw.trimEnd();for(let v=0;v<m.items.length;v++)if(this.lexer.state.top=!1,m.items[v].tokens=this.lexer.blockTokens(m.items[v].text,[]),!m.loose){const p=m.items[v].tokens.filter(x=>x.type==="space"),y=p.length>0&&p.some(x=>/\n.*\n/.test(x.raw));m.loose=y}if(m.loose)for(let v=0;v<m.items.length;v++)m.items[v].loose=!0;return m}}html(t){const r=this.rules.block.html.exec(t);if(r)return{type:"html",block:!0,raw:r[0],pre:r[1]==="pre"||r[1]==="script"||r[1]==="style",text:r[0]}}def(t){const r=this.rules.block.def.exec(t);if(r){const l=r[1].toLowerCase().replace(/\s+/g," "),a=r[2]?r[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",m=r[3]?r[3].substring(1,r[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):r[3];return{type:"def",tag:l,raw:r[0],href:a,title:m}}}table(t){const r=this.rules.block.table.exec(t);if(!r||!/[:|]/.test(r[2]))return;const l=$c(r[1]),a=r[2].replace(/^\||\| *$/g,"").split("|"),m=r[3]&&r[3].trim()?r[3].replace(/\n[ \t]*$/,"").split(`
`):[],d={type:"table",raw:r[0],header:[],align:[],rows:[]};if(l.length===a.length){for(const i of a)/^ *-+: *$/.test(i)?d.align.push("right"):/^ *:-+: *$/.test(i)?d.align.push("center"):/^ *:-+ *$/.test(i)?d.align.push("left"):d.align.push(null);for(const i of l)d.header.push({text:i,tokens:this.lexer.inline(i)});for(const i of m)d.rows.push($c(i,d.header.length).map(n=>({text:n,tokens:this.lexer.inline(n)})));return d}}lheading(t){const r=this.rules.block.lheading.exec(t);if(r)return{type:"heading",raw:r[0],depth:r[2].charAt(0)==="="?1:2,text:r[1],tokens:this.lexer.inline(r[1])}}paragraph(t){const r=this.rules.block.paragraph.exec(t);if(r){const l=r[1].charAt(r[1].length-1)===`
`?r[1].slice(0,-1):r[1];return{type:"paragraph",raw:r[0],text:l,tokens:this.lexer.inline(l)}}}text(t){const r=this.rules.block.text.exec(t);if(r)return{type:"text",raw:r[0],text:r[0],tokens:this.lexer.inline(r[0])}}escape(t){const r=this.rules.inline.escape.exec(t);if(r)return{type:"escape",raw:r[0],text:Er(r[1])}}tag(t){const r=this.rules.inline.tag.exec(t);if(r)return!this.lexer.state.inLink&&/^<a /i.test(r[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(r[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:r[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:r[0]}}link(t){const r=this.rules.inline.link.exec(t);if(r){const l=r[2].trim();if(!this.options.pedantic&&/^</.test(l)){if(!/>$/.test(l))return;const d=fn(l.slice(0,-1),"\\");if((l.length-d.length)%2===0)return}else{const d=x8(r[2],"()");if(d>-1){const n=(r[0].indexOf("!")===0?5:4)+r[1].length+d;r[2]=r[2].substring(0,d),r[0]=r[0].substring(0,n).trim(),r[3]=""}}let a=r[2],m="";if(this.options.pedantic){const d=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(a);d&&(a=d[1],m=d[3])}else m=r[3]?r[3].slice(1,-1):"";return a=a.trim(),/^</.test(a)&&(this.options.pedantic&&!/>$/.test(l)?a=a.slice(1):a=a.slice(1,-1)),wc(r,{href:a&&a.replace(this.rules.inline.anyPunctuation,"$1"),title:m&&m.replace(this.rules.inline.anyPunctuation,"$1")},r[0],this.lexer)}}reflink(t,r){let l;if((l=this.rules.inline.reflink.exec(t))||(l=this.rules.inline.nolink.exec(t))){const a=(l[2]||l[1]).replace(/\s+/g," "),m=r[a.toLowerCase()];if(!m){const d=l[0].charAt(0);return{type:"text",raw:d,text:d}}return wc(l,m,l[0],this.lexer)}}emStrong(t,r,l=""){let a=this.rules.inline.emStrongLDelim.exec(t);if(!a||a[3]&&l.match(/[\p{L}\p{N}]/u))return;if(!(a[1]||a[2]||"")||!l||this.rules.inline.punctuation.exec(l)){const d=[...a[0]].length-1;let i,n,g=d,v=0;const p=a[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(p.lastIndex=0,r=r.slice(-1*t.length+d);(a=p.exec(r))!=null;){if(i=a[1]||a[2]||a[3]||a[4]||a[5]||a[6],!i)continue;if(n=[...i].length,a[3]||a[4]){g+=n;continue}else if((a[5]||a[6])&&d%3&&!((d+n)%3)){v+=n;continue}if(g-=n,g>0)continue;n=Math.min(n,n+g+v);const y=[...a[0]][0].length,x=t.slice(0,d+a.index+y+n);if(Math.min(d,n)%2){const b=x.slice(1,-1);return{type:"em",raw:x,text:b,tokens:this.lexer.inlineTokens(b)}}const M=x.slice(2,-2);return{type:"strong",raw:x,text:M,tokens:this.lexer.inlineTokens(M)}}}}codespan(t){const r=this.rules.inline.code.exec(t);if(r){let l=r[2].replace(/\n/g," ");const a=/[^ ]/.test(l),m=/^ /.test(l)&&/ $/.test(l);return a&&m&&(l=l.substring(1,l.length-1)),l=Er(l,!0),{type:"codespan",raw:r[0],text:l}}}br(t){const r=this.rules.inline.br.exec(t);if(r)return{type:"br",raw:r[0]}}del(t){const r=this.rules.inline.del.exec(t);if(r)return{type:"del",raw:r[0],text:r[2],tokens:this.lexer.inlineTokens(r[2])}}autolink(t){const r=this.rules.inline.autolink.exec(t);if(r){let l,a;return r[2]==="@"?(l=Er(r[1]),a="mailto:"+l):(l=Er(r[1]),a=l),{type:"link",raw:r[0],text:l,href:a,tokens:[{type:"text",raw:l,text:l}]}}}url(t){let r;if(r=this.rules.inline.url.exec(t)){let l,a;if(r[2]==="@")l=Er(r[0]),a="mailto:"+l;else{let m;do m=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])?.[0]??"";while(m!==r[0]);l=Er(r[0]),r[1]==="www."?a="http://"+r[0]:a=r[0]}return{type:"link",raw:r[0],text:l,href:a,tokens:[{type:"text",raw:l,text:l}]}}}inlineText(t){const r=this.rules.inline.text.exec(t);if(r){let l;return this.lexer.state.inRawBlock?l=r[0]:l=Er(r[0]),{type:"text",raw:r[0],text:l}}}}const _8=/^(?: *(?:\n|$))+/,$8=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,w8=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Wi=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,S8=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Jd=/(?:[*+-]|\d{1,9}[.)])/,Xd=Ht(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Jd).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),fo=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,C8=/^[^\n]+/,po=/(?!\s*\])(?:\\.|[^\[\]\\])+/,k8=Ht(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",po).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),M8=Ht(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Jd).getRegex(),el="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",mo=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,A8=Ht("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",mo).replace("tag",el).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Zd=Ht(fo).replace("hr",Wi).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",el).getRegex(),L8=Ht(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Zd).getRegex(),bo={blockquote:L8,code:$8,def:k8,fences:w8,heading:S8,hr:Wi,html:A8,lheading:Xd,list:M8,newline:_8,paragraph:Zd,table:Ai,text:C8},Sc=Ht("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Wi).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",el).getRegex(),E8={...bo,table:Sc,paragraph:Ht(fo).replace("hr",Wi).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Sc).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",el).getRegex()},T8={...bo,html:Ht(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",mo).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ai,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ht(fo).replace("hr",Wi).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Xd).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Qd=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,D8=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,eu=/^( {2,}|\\)\n(?!\s*$)/,R8=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,qi="\\p{P}\\p{S}",P8=Ht(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,qi).getRegex(),I8=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,B8=Ht(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,qi).getRegex(),N8=Ht("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,qi).getRegex(),O8=Ht("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,qi).getRegex(),z8=Ht(/\\([punct])/,"gu").replace(/punct/g,qi).getRegex(),F8=Ht(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),H8=Ht(mo).replace("(?:-->|$)","-->").getRegex(),j8=Ht("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",H8).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Un=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,U8=Ht(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Un).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),tu=Ht(/^!?\[(label)\]\[(ref)\]/).replace("label",Un).replace("ref",po).getRegex(),ru=Ht(/^!?\[(ref)\](?:\[\])?/).replace("ref",po).getRegex(),V8=Ht("reflink|nolink(?!\\()","g").replace("reflink",tu).replace("nolink",ru).getRegex(),xo={_backpedal:Ai,anyPunctuation:z8,autolink:F8,blockSkip:I8,br:eu,code:D8,del:Ai,emStrongLDelim:B8,emStrongRDelimAst:N8,emStrongRDelimUnd:O8,escape:Qd,link:U8,nolink:ru,punctuation:P8,reflink:tu,reflinkSearch:V8,tag:j8,text:R8,url:Ai},W8={...xo,link:Ht(/^!?\[(label)\]\((.*?)\)/).replace("label",Un).getRegex(),reflink:Ht(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Un).getRegex()},Vl={...xo,escape:Ht(Qd).replace("])","~|])").getRegex(),url:Ht(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},q8={...Vl,br:Ht(eu).replace("{2,}","*").getRegex(),text:Ht(Vl.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},pn={normal:bo,gfm:E8,pedantic:T8},xi={normal:xo,gfm:Vl,breaks:q8,pedantic:W8};class Kr{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Hs,this.options.tokenizer=this.options.tokenizer||new jn,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const r={block:pn.normal,inline:xi.normal};this.options.pedantic?(r.block=pn.pedantic,r.inline=xi.pedantic):this.options.gfm&&(r.block=pn.gfm,this.options.breaks?r.inline=xi.breaks:r.inline=xi.gfm),this.tokenizer.rules=r}static get rules(){return{block:pn,inline:xi}}static lex(t,r){return new Kr(r).lex(t)}static lexInline(t,r){return new Kr(r).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){const l=this.inlineQueue[r];this.inlineTokens(l.src,l.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,r=[]){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(i,n,g)=>n+"    ".repeat(g.length));let l,a,m,d;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(i=>(l=i.call({lexer:this},t,r))?(t=t.substring(l.raw.length),r.push(l),!0):!1))){if(l=this.tokenizer.space(t)){t=t.substring(l.raw.length),l.raw.length===1&&r.length>0?r[r.length-1].raw+=`
`:r.push(l);continue}if(l=this.tokenizer.code(t)){t=t.substring(l.raw.length),a=r[r.length-1],a&&(a.type==="paragraph"||a.type==="text")?(a.raw+=`
`+l.raw,a.text+=`
`+l.text,this.inlineQueue[this.inlineQueue.length-1].src=a.text):r.push(l);continue}if(l=this.tokenizer.fences(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.heading(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.hr(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.blockquote(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.list(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.html(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.def(t)){t=t.substring(l.raw.length),a=r[r.length-1],a&&(a.type==="paragraph"||a.type==="text")?(a.raw+=`
`+l.raw,a.text+=`
`+l.raw,this.inlineQueue[this.inlineQueue.length-1].src=a.text):this.tokens.links[l.tag]||(this.tokens.links[l.tag]={href:l.href,title:l.title});continue}if(l=this.tokenizer.table(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.lheading(t)){t=t.substring(l.raw.length),r.push(l);continue}if(m=t,this.options.extensions&&this.options.extensions.startBlock){let i=1/0;const n=t.slice(1);let g;this.options.extensions.startBlock.forEach(v=>{g=v.call({lexer:this},n),typeof g=="number"&&g>=0&&(i=Math.min(i,g))}),i<1/0&&i>=0&&(m=t.substring(0,i+1))}if(this.state.top&&(l=this.tokenizer.paragraph(m))){a=r[r.length-1],d&&a.type==="paragraph"?(a.raw+=`
`+l.raw,a.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=a.text):r.push(l),d=m.length!==t.length,t=t.substring(l.raw.length);continue}if(l=this.tokenizer.text(t)){t=t.substring(l.raw.length),a=r[r.length-1],a&&a.type==="text"?(a.raw+=`
`+l.raw,a.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=a.text):r.push(l);continue}if(t){const i="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(i);break}else throw new Error(i)}}return this.state.top=!0,r}inline(t,r=[]){return this.inlineQueue.push({src:t,tokens:r}),r}inlineTokens(t,r=[]){let l,a,m,d=t,i,n,g;if(this.tokens.links){const v=Object.keys(this.tokens.links);if(v.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(d))!=null;)v.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(d=d.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+d.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.blockSkip.exec(d))!=null;)d=d.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+d.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(d))!=null;)d=d.slice(0,i.index)+"++"+d.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(n||(g=""),n=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(v=>(l=v.call({lexer:this},t,r))?(t=t.substring(l.raw.length),r.push(l),!0):!1))){if(l=this.tokenizer.escape(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.tag(t)){t=t.substring(l.raw.length),a=r[r.length-1],a&&l.type==="text"&&a.type==="text"?(a.raw+=l.raw,a.text+=l.text):r.push(l);continue}if(l=this.tokenizer.link(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(l.raw.length),a=r[r.length-1],a&&l.type==="text"&&a.type==="text"?(a.raw+=l.raw,a.text+=l.text):r.push(l);continue}if(l=this.tokenizer.emStrong(t,d,g)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.codespan(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.br(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.del(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.autolink(t)){t=t.substring(l.raw.length),r.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(t))){t=t.substring(l.raw.length),r.push(l);continue}if(m=t,this.options.extensions&&this.options.extensions.startInline){let v=1/0;const p=t.slice(1);let y;this.options.extensions.startInline.forEach(x=>{y=x.call({lexer:this},p),typeof y=="number"&&y>=0&&(v=Math.min(v,y))}),v<1/0&&v>=0&&(m=t.substring(0,v+1))}if(l=this.tokenizer.inlineText(m)){t=t.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(g=l.raw.slice(-1)),n=!0,a=r[r.length-1],a&&a.type==="text"?(a.raw+=l.raw,a.text+=l.text):r.push(l);continue}if(t){const v="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(v);break}else throw new Error(v)}}return r}}class Vn{options;constructor(t){this.options=t||Hs}code(t,r,l){const a=(r||"").match(/^\S*/)?.[0];return t=t.replace(/\n$/,"")+`
`,a?'<pre><code class="language-'+Er(a)+'">'+(l?t:Er(t,!0))+`</code></pre>
`:"<pre><code>"+(l?t:Er(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t,r){return t}heading(t,r,l){return`<h${r}>${t}</h${r}>
`}hr(){return`<hr>
`}list(t,r,l){const a=r?"ol":"ul",m=r&&l!==1?' start="'+l+'"':"";return"<"+a+m+`>
`+t+"</"+a+`>
`}listitem(t,r,l){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(t){return`<p>${t}</p>
`}table(t,r){return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+r+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,r){const l=r.header?"th":"td";return(r.align?`<${l} align="${r.align}">`:`<${l}>`)+t+`</${l}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return"<br>"}del(t){return`<del>${t}</del>`}link(t,r,l){const a=_c(t);if(a===null)return l;t=a;let m='<a href="'+t+'"';return r&&(m+=' title="'+r+'"'),m+=">"+l+"</a>",m}image(t,r,l){const a=_c(t);if(a===null)return l;t=a;let m=`<img src="${t}" alt="${l}"`;return r&&(m+=` title="${r}"`),m+=">",m}text(t){return t}}class yo{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,r,l){return""+l}image(t,r,l){return""+l}br(){return""}}class Yr{options;renderer;textRenderer;constructor(t){this.options=t||Hs,this.options.renderer=this.options.renderer||new Vn,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new yo}static parse(t,r){return new Yr(r).parse(t)}static parseInline(t,r){return new Yr(r).parseInline(t)}parse(t,r=!0){let l="";for(let a=0;a<t.length;a++){const m=t[a];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[m.type]){const d=m,i=this.options.extensions.renderers[d.type].call({parser:this},d);if(i!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(d.type)){l+=i||"";continue}}switch(m.type){case"space":continue;case"hr":{l+=this.renderer.hr();continue}case"heading":{const d=m;l+=this.renderer.heading(this.parseInline(d.tokens),d.depth,m8(this.parseInline(d.tokens,this.textRenderer)));continue}case"code":{const d=m;l+=this.renderer.code(d.text,d.lang,!!d.escaped);continue}case"table":{const d=m;let i="",n="";for(let v=0;v<d.header.length;v++)n+=this.renderer.tablecell(this.parseInline(d.header[v].tokens),{header:!0,align:d.align[v]});i+=this.renderer.tablerow(n);let g="";for(let v=0;v<d.rows.length;v++){const p=d.rows[v];n="";for(let y=0;y<p.length;y++)n+=this.renderer.tablecell(this.parseInline(p[y].tokens),{header:!1,align:d.align[y]});g+=this.renderer.tablerow(n)}l+=this.renderer.table(i,g);continue}case"blockquote":{const d=m,i=this.parse(d.tokens);l+=this.renderer.blockquote(i);continue}case"list":{const d=m,i=d.ordered,n=d.start,g=d.loose;let v="";for(let p=0;p<d.items.length;p++){const y=d.items[p],x=y.checked,M=y.task;let b="";if(y.task){const o=this.renderer.checkbox(!!x);g?y.tokens.length>0&&y.tokens[0].type==="paragraph"?(y.tokens[0].text=o+" "+y.tokens[0].text,y.tokens[0].tokens&&y.tokens[0].tokens.length>0&&y.tokens[0].tokens[0].type==="text"&&(y.tokens[0].tokens[0].text=o+" "+y.tokens[0].tokens[0].text)):y.tokens.unshift({type:"text",text:o+" "}):b+=o+" "}b+=this.parse(y.tokens,g),v+=this.renderer.listitem(b,M,!!x)}l+=this.renderer.list(v,i,n);continue}case"html":{const d=m;l+=this.renderer.html(d.text,d.block);continue}case"paragraph":{const d=m;l+=this.renderer.paragraph(this.parseInline(d.tokens));continue}case"text":{let d=m,i=d.tokens?this.parseInline(d.tokens):d.text;for(;a+1<t.length&&t[a+1].type==="text";)d=t[++a],i+=`
`+(d.tokens?this.parseInline(d.tokens):d.text);l+=r?this.renderer.paragraph(i):i;continue}default:{const d='Token with "'+m.type+'" type was not found.';if(this.options.silent)return console.error(d),"";throw new Error(d)}}}return l}parseInline(t,r){r=r||this.renderer;let l="";for(let a=0;a<t.length;a++){const m=t[a];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[m.type]){const d=this.options.extensions.renderers[m.type].call({parser:this},m);if(d!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(m.type)){l+=d||"";continue}}switch(m.type){case"escape":{const d=m;l+=r.text(d.text);break}case"html":{const d=m;l+=r.html(d.text);break}case"link":{const d=m;l+=r.link(d.href,d.title,this.parseInline(d.tokens,r));break}case"image":{const d=m;l+=r.image(d.href,d.title,d.text);break}case"strong":{const d=m;l+=r.strong(this.parseInline(d.tokens,r));break}case"em":{const d=m;l+=r.em(this.parseInline(d.tokens,r));break}case"codespan":{const d=m;l+=r.codespan(d.text);break}case"br":{l+=r.br();break}case"del":{const d=m;l+=r.del(this.parseInline(d.tokens,r));break}case"text":{const d=m;l+=r.text(d.text);break}default:{const d='Token with "'+m.type+'" type was not found.';if(this.options.silent)return console.error(d),"";throw new Error(d)}}}return l}}class Cn{options;constructor(t){this.options=t||Hs}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}}class K8{defaults=vo();options=this.setOptions;parse=this.#e(Kr.lex,Yr.parse);parseInline=this.#e(Kr.lexInline,Yr.parseInline);Parser=Yr;Renderer=Vn;TextRenderer=yo;Lexer=Kr;Tokenizer=jn;Hooks=Cn;constructor(...t){this.use(...t)}walkTokens(t,r){let l=[];for(const a of t)switch(l=l.concat(r.call(this,a)),a.type){case"table":{const m=a;for(const d of m.header)l=l.concat(this.walkTokens(d.tokens,r));for(const d of m.rows)for(const i of d)l=l.concat(this.walkTokens(i.tokens,r));break}case"list":{const m=a;l=l.concat(this.walkTokens(m.items,r));break}default:{const m=a;this.defaults.extensions?.childTokens?.[m.type]?this.defaults.extensions.childTokens[m.type].forEach(d=>{const i=m[d].flat(1/0);l=l.concat(this.walkTokens(i,r))}):m.tokens&&(l=l.concat(this.walkTokens(m.tokens,r)))}}return l}use(...t){const r=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(l=>{const a={...l};if(a.async=this.defaults.async||a.async||!1,l.extensions&&(l.extensions.forEach(m=>{if(!m.name)throw new Error("extension name required");if("renderer"in m){const d=r.renderers[m.name];d?r.renderers[m.name]=function(...i){let n=m.renderer.apply(this,i);return n===!1&&(n=d.apply(this,i)),n}:r.renderers[m.name]=m.renderer}if("tokenizer"in m){if(!m.level||m.level!=="block"&&m.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const d=r[m.level];d?d.unshift(m.tokenizer):r[m.level]=[m.tokenizer],m.start&&(m.level==="block"?r.startBlock?r.startBlock.push(m.start):r.startBlock=[m.start]:m.level==="inline"&&(r.startInline?r.startInline.push(m.start):r.startInline=[m.start]))}"childTokens"in m&&m.childTokens&&(r.childTokens[m.name]=m.childTokens)}),a.extensions=r),l.renderer){const m=this.defaults.renderer||new Vn(this.defaults);for(const d in l.renderer){if(!(d in m))throw new Error(`renderer '${d}' does not exist`);if(d==="options")continue;const i=d,n=l.renderer[i],g=m[i];m[i]=(...v)=>{let p=n.apply(m,v);return p===!1&&(p=g.apply(m,v)),p||""}}a.renderer=m}if(l.tokenizer){const m=this.defaults.tokenizer||new jn(this.defaults);for(const d in l.tokenizer){if(!(d in m))throw new Error(`tokenizer '${d}' does not exist`);if(["options","rules","lexer"].includes(d))continue;const i=d,n=l.tokenizer[i],g=m[i];m[i]=(...v)=>{let p=n.apply(m,v);return p===!1&&(p=g.apply(m,v)),p}}a.tokenizer=m}if(l.hooks){const m=this.defaults.hooks||new Cn;for(const d in l.hooks){if(!(d in m))throw new Error(`hook '${d}' does not exist`);if(d==="options")continue;const i=d,n=l.hooks[i],g=m[i];Cn.passThroughHooks.has(d)?m[i]=v=>{if(this.defaults.async)return Promise.resolve(n.call(m,v)).then(y=>g.call(m,y));const p=n.call(m,v);return g.call(m,p)}:m[i]=(...v)=>{let p=n.apply(m,v);return p===!1&&(p=g.apply(m,v)),p}}a.hooks=m}if(l.walkTokens){const m=this.defaults.walkTokens,d=l.walkTokens;a.walkTokens=function(i){let n=[];return n.push(d.call(this,i)),m&&(n=n.concat(m.call(this,i))),n}}this.defaults={...this.defaults,...a}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,r){return Kr.lex(t,r??this.defaults)}parser(t,r){return Yr.parse(t,r??this.defaults)}#e(t,r){return(l,a)=>{const m={...a},d={...this.defaults,...m};this.defaults.async===!0&&m.async===!1&&(d.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),d.async=!0);const i=this.#t(!!d.silent,!!d.async);if(typeof l>"u"||l===null)return i(new Error("marked(): input parameter is undefined or null"));if(typeof l!="string")return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(l)+", string expected"));if(d.hooks&&(d.hooks.options=d),d.async)return Promise.resolve(d.hooks?d.hooks.preprocess(l):l).then(n=>t(n,d)).then(n=>d.hooks?d.hooks.processAllTokens(n):n).then(n=>d.walkTokens?Promise.all(this.walkTokens(n,d.walkTokens)).then(()=>n):n).then(n=>r(n,d)).then(n=>d.hooks?d.hooks.postprocess(n):n).catch(i);try{d.hooks&&(l=d.hooks.preprocess(l));let n=t(l,d);d.hooks&&(n=d.hooks.processAllTokens(n)),d.walkTokens&&this.walkTokens(n,d.walkTokens);let g=r(n,d);return d.hooks&&(g=d.hooks.postprocess(g)),g}catch(n){return i(n)}}}#t(t,r){return l=>{if(l.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const a="<p>An error occurred:</p><pre>"+Er(l.message+"",!0)+"</pre>";return r?Promise.resolve(a):a}if(r)return Promise.reject(l);throw l}}}const Fs=new K8;function Ft(e,t){return Fs.parse(e,t)}Ft.options=Ft.setOptions=function(e){return Fs.setOptions(e),Ft.defaults=Fs.defaults,Kd(Ft.defaults),Ft};Ft.getDefaults=vo;Ft.defaults=Hs;Ft.use=function(...e){return Fs.use(...e),Ft.defaults=Fs.defaults,Kd(Ft.defaults),Ft};Ft.walkTokens=function(e,t){return Fs.walkTokens(e,t)};Ft.parseInline=Fs.parseInline;Ft.Parser=Yr;Ft.parser=Yr.parse;Ft.Renderer=Vn;Ft.TextRenderer=yo;Ft.Lexer=Kr;Ft.lexer=Kr.lex;Ft.Tokenizer=jn;Ft.Hooks=Cn;Ft.parse=Ft;Ft.options;Ft.setOptions;Ft.use;Ft.walkTokens;Ft.parseInline;Yr.parse;Kr.lex;const[xM,Y8]=W(null),[yl,Ds]=W([]),[kn,Cc]=W(!1),[kc,su]=W("ollama"),[Mc,yM]=W([{id:"ollama",name:"Ollama (Local)",icon:"llama"},{id:"openai",name:"OpenAI GPT-4",icon:"openai"},{id:"anthropic",name:"Claude",icon:"anthropic"}]);async function G8(){try{const e=await fetch("/api/ai/status");if(e.ok){const t=await e.json();if(t.available&&t.provider){const r=t.provider.split(" ")[0];su(r)}}}catch(e){console.error("Failed to fetch AI status:",e)}}async function Ac(e){if(!e.trim()||kn())return;const t={id:crypto.randomUUID(),role:"user",content:e,timestamp:new Date};Ds(r=>[...r,t]),Cc(!0);try{if(!(await(await fetch("/api/ai/status")).json()).available){const m={id:crypto.randomUUID(),role:"assistant",content:"No AI provider available. Configure Ollama (local), OpenAI (OPENAI_API_KEY), or Claude (ANTHROPIC_API_KEY) to enable AI features.",timestamp:new Date};Ds(d=>[...d,m]);return}const a=await fetch("/api/ai/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e})});if(a.ok){const m=await a.json();if(m.error){const d={id:crypto.randomUUID(),role:"assistant",content:`Error: ${m.error}`,timestamp:new Date};Ds(i=>[...i,d])}else{const d={id:crypto.randomUUID(),role:"assistant",content:m.response,timestamp:new Date};Ds(i=>[...i,d])}}else{const m=await a.text(),d={id:crypto.randomUUID(),role:"assistant",content:`Error: ${m}`,timestamp:new Date};Ds(i=>[...i,d])}}catch(r){const l={id:crypto.randomUUID(),role:"assistant",content:`Failed to send message: ${r}`,timestamp:new Date};Ds(a=>[...a,l])}finally{Cc(!1)}}function iu(){Ds([]),Y8(null)}function J8(e){su(e),iu()}var X8=w('<div class="fixed inset-0 bg-black/50 transition-opacity z-40"style=opacity:1;pointerEvents:auto>'),Z8=w('<svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 9V4.5M9 9H4.5M9 9L3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5l5.25 5.25">'),Q8=w('<div class="flex items-center justify-between px-4 py-3 border-b"style=border-color:var(--border-color);background:var(--bg-secondary)><div class="flex items-center gap-3"><div class="w-10 h-10 rounded-lg bg-gradient-to-br from-purple-600 to-indigo-600 flex items-center justify-center"><svg class="w-6 h-6 text-white"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg></div><div><h2 class=font-semibold style=color:var(--text-primary)>AI Assistant</h2><p class=text-xs style=color:var(--text-secondary)>Kubernetes expert</p></div></div><div class="flex items-center gap-2"><select class="rounded-lg px-2 py-1 text-sm focus:outline-none"style="background:var(--bg-input);border:1px solid var(--border-color);color:var(--text-primary)"></select><button class="p-2 rounded-lg transition-colors"title="Clear chat"style=color:var(--text-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button><button class="p-2 rounded-lg transition-colors"style=color:var(--text-secondary)></button><button class="p-2 rounded-lg transition-colors border"title="Close panel"style=color:var(--text-secondary);border-color:transparent><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12">'),e7=w('<div class="text-center py-8"><div class="w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4"style=background:var(--bg-secondary)><svg class="w-8 h-8"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path></svg></div><h3 class="font-medium mb-2"style=color:var(--text-primary)>How can I help?</h3><p class="text-sm mb-6"style=color:var(--text-secondary)>Ask me about your Kubernetes cluster, resources, or troubleshooting</p><div class=space-y-2>'),t7=w('<div class="flex justify-start"><div class="rounded-lg px-4 py-3"style=background:var(--bg-secondary)><div class="flex items-center gap-2"><div class="flex gap-1"><div class="w-2 h-2 rounded-full animate-bounce"style=animation-delay:0ms;background:var(--accent-primary)></div><div class="w-2 h-2 rounded-full animate-bounce"style=animation-delay:150ms;background:var(--accent-primary)></div><div class="w-2 h-2 rounded-full animate-bounce"style=animation-delay:300ms;background:var(--accent-primary)></div></div><span class=text-sm style=color:var(--text-secondary)>Thinking...'),r7=w('<div><div class="flex-1 overflow-y-auto p-4 space-y-4"><div></div></div><form class="p-4 border-t"style=border-color:var(--border-color)><div class="flex items-center gap-2"><input type=text placeholder="Ask about your cluster..."class="flex-1 rounded-lg px-4 py-2.5 focus:outline-none disabled:opacity-50"style="background:var(--bg-input);border:1px solid var(--border-color);color:var(--text-primary)"><button type=submit class="p-2.5 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed"style=background:var(--accent-primary);color:#000><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg></button></div><p class="mt-2 text-xs text-center"style=color:var(--text-muted)>Using '),s7=w("<option>"),i7=w('<svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4">'),n7=w('<button class="w-full text-left px-4 py-2 rounded-lg text-sm transition-colors"style=background:var(--bg-secondary);color:var(--text-secondary)>'),l7=w('<div class="prose prose-invert prose-sm max-w-none">'),o7=w('<div class="mt-2 pt-2 border-t text-xs"style=border-color:var(--border-color);color:var(--text-muted)>Tokens: '),a7=w('<div><div class="max-w-[85%] rounded-lg px-4 py-3">'),c7=w('<p class="text-sm whitespace-pre-wrap">');const nu=e=>{const t=()=>e.inline??!1;let r,l;const[a,m]=W(""),[d,i]=W(!1),n=["Show me pods with high restart counts","List deployments not fully available","What services expose port 80?","Show cluster resource usage"];zt(()=>{G8(),l?.focus()}),It(()=>{yl(),setTimeout(()=>{r?.scrollIntoView({behavior:"smooth"})},100)});async function g(x){x.preventDefault();const M=a().trim();M&&(m(""),await Ac(M))}function v(x){Ac(x)}function p(x){try{return Ft.parse(x,{async:!1})}catch{return x}}const y=()=>{t()&&Ut("dashboard"),Ti(!1)};return[_(K,{get when(){return!t()},get children(){var x=X8();return x.$$click=y,x}}),(()=>{var x=r7(),M=x.firstChild,b=M.firstChild,o=M.nextSibling,c=o.firstChild,u=c.firstChild,h=u.nextSibling,f=c.nextSibling;f.firstChild,x.$$click=k=>k.stopPropagation(),s(x,_(K,{get when(){return!t()},get children(){var k=Q8(),S=k.firstChild,L=S.firstChild,P=L.nextSibling,I=P.firstChild;I.nextSibling;var D=S.nextSibling,T=D.firstChild,B=T.nextSibling,N=B.nextSibling,O=N.nextSibling;return T.addEventListener("change",H=>J8(H.target.value)),s(T,_(Xe,{get each(){return Mc()},children:H=>(()=>{var A=s7();return s(A,()=>H.name),J(()=>A.value=H.id),A})()})),B.addEventListener("mouseleave",H=>H.currentTarget.style.background="transparent"),B.addEventListener("mouseenter",H=>H.currentTarget.style.background="var(--bg-tertiary)"),B.$$click=H=>{H.stopPropagation(),iu()},N.addEventListener("mouseleave",H=>H.currentTarget.style.background="transparent"),N.addEventListener("mouseenter",H=>H.currentTarget.style.background="var(--bg-tertiary)"),N.$$click=H=>{H.stopPropagation(),i(!d())},s(N,_(K,{get when(){return d()},get fallback(){return i7()},get children(){return Z8()}})),O.addEventListener("mouseleave",H=>{H.currentTarget.style.background="transparent",H.currentTarget.style.borderColor="transparent",H.currentTarget.style.color="var(--text-secondary)"}),O.addEventListener("mouseenter",H=>{H.currentTarget.style.background="rgba(239, 68, 68, 0.1)",H.currentTarget.style.borderColor="rgba(239, 68, 68, 0.3)",H.currentTarget.style.color="var(--error-color)"}),O.$$click=H=>{H.stopPropagation(),y()},J(()=>dt(N,"title",d()?"Restore":"Maximize")),J(()=>T.value=kc()),k}}),M),s(M,_(K,{get when(){return yl().length===0},get children(){var k=e7(),S=k.firstChild;S.firstChild;var L=S.nextSibling,P=L.nextSibling,I=P.nextSibling;return s(I,_(Xe,{each:n,children:D=>(()=>{var T=n7();return T.addEventListener("mouseleave",B=>{B.currentTarget.style.background="var(--bg-secondary)",B.currentTarget.style.color="var(--text-secondary)"}),T.addEventListener("mouseenter",B=>{B.currentTarget.style.background="var(--bg-tertiary)",B.currentTarget.style.color="var(--text-primary)"}),T.$$click=()=>v(D),s(T,D),T})()})),k}}),b),s(M,_(Xe,{get each(){return yl()},children:k=>(()=>{var S=a7(),L=S.firstChild;return s(L,_(K,{get when(){return k.role==="assistant"},get fallback(){return(()=>{var P=c7();return s(P,()=>k.content),P})()},get children(){return[(()=>{var P=l7();return J(()=>P.innerHTML=p(k.content)),P})(),_(K,{get when(){return k.usage},get children(){var P=o7();return P.firstChild,s(P,()=>k.usage?.totalTokens,null),P}})]}})),J(P=>{var I=`flex ${k.role==="user"?"justify-end":"justify-start"}`,D=k.role==="user"?"var(--accent-primary)":"var(--bg-secondary)",T=k.role==="user"?"#000":"var(--text-primary)";return I!==P.e&&tt(S,P.e=I),D!==P.t&&E(L,"background",P.t=D),T!==P.a&&E(L,"color",P.a=T),P},{e:void 0,t:void 0,a:void 0}),S})()}),b),s(M,_(K,{get when(){return kn()},get children(){var k=t7(),S=k.firstChild,L=S.firstChild,P=L.firstChild,I=P.firstChild,D=I.nextSibling;return D.nextSibling,P.nextSibling,k}}),b);var $=r;typeof $=="function"?dr($,b):r=b,o.addEventListener("submit",g),u.$$input=k=>m(k.currentTarget.value);var C=l;return typeof C=="function"?dr(C,u):l=u,s(f,()=>Mc().find(k=>k.id===kc())?.name||"AI",null),J(k=>{var S=`flex flex-col ${t()?"h-full":"fixed right-0 border-l z-50 animate-slide-in shadow-2xl"}`,L=t()?{background:"transparent"}:{background:"var(--bg-card)","border-color":"var(--border-color)",top:"112px",bottom:"0",height:"calc(100vh - 112px)",width:d()?`calc(100vw - ${cr()?"64px":"208px"})`:"420px",transition:"width 0.3s ease-in-out"},P=kn(),I=kn()||!a().trim();return S!==k.e&&tt(x,k.e=S),k.t=_t(x,L,k.t),P!==k.a&&(u.disabled=k.a=P),I!==k.o&&(h.disabled=k.o=I),k},{e:void 0,t:void 0,a:void 0,o:void 0}),J(()=>u.value=a()),x})()]};ut(["click","input"]);var d7=w('<div class="h-full flex flex-col"><div class="mb-4 flex items-center justify-between"><div><h1 class="text-2xl font-bold"style=color:var(--text-primary)>AI Assistant</h1><p class="text-sm mt-1"style=color:var(--text-secondary)>Ask questions about your Kubernetes cluster and get AI-powered insights</p></div><button class="p-2 rounded-lg transition-colors border"title="Close AI Assistant"style=color:var(--text-secondary);border-color:transparent><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12"></path></svg></button></div><div class="flex-1 overflow-hidden rounded-lg border"style=background:var(--bg-card);border-color:var(--border-color)>');const u7=()=>{zt(()=>{Ti(!0)});const e=()=>{Ti(!1),Ut("dashboard")};return(()=>{var t=d7(),r=t.firstChild,l=r.firstChild,a=l.firstChild;a.nextSibling;var m=l.nextSibling,d=r.nextSibling;return m.addEventListener("mouseleave",i=>{i.currentTarget.style.background="transparent",i.currentTarget.style.borderColor="transparent",i.currentTarget.style.color="var(--text-secondary)"}),m.addEventListener("mouseenter",i=>{i.currentTarget.style.background="rgba(239, 68, 68, 0.1)",i.currentTarget.style.borderColor="rgba(239, 68, 68, 0.3)",i.currentTarget.style.color="var(--error-color)"}),m.$$click=e,s(d,_(nu,{inline:!0})),t})()};ut(["click"]);var h7=w('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-secondary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 9V4.5M9 9H4.5M9 9L3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5l5.25 5.25">'),g7=w('<div class="fixed bottom-0 left-0 right-0 transition-all duration-300"style="z-index:1000;background:var(--bg-primary);border-top:2px solid var(--border-color);box-shadow:0 -4px 6px -1px rgba(0, 0, 0, 0.1)"><div class="flex items-center justify-between px-4 py-2"style="background:var(--bg-secondary);border-bottom:1px solid var(--border-color)"><div class="flex items-center gap-3"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg><span class="text-sm font-semibold"style=color:var(--text-primary)>Terminal</span><span class=text-xs style=color:var(--text-secondary)>kubectl ready</span></div><div class="flex items-center gap-2"><button class="p-1.5 rounded hover:bg-gray-700 transition-colors"></button><button class="p-1.5 rounded hover:bg-gray-700 transition-colors"title=Close><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-secondary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div><div class="overflow-y-auto p-4 font-mono text-sm"style="height:calc(100% - 100px);background:#0d1117;color:#c9d1d9"></div><div class="flex items-center gap-2 px-4 py-3"style="background:#161b22;border-top:1px solid var(--border-color)"><span class="text-sm font-mono"style=color:#58a6ff>$</span><input type=text placeholder="Type a command (e.g., kubectl get pods)"class="flex-1 bg-transparent font-mono text-sm outline-none"autocomplete=off style=color:#c9d1d9;border:none>'),v7=w('<svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-secondary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4">'),f7=w("<div style=margin-bottom:4px>");const p7=e=>{const[t,r]=W(!1),[l,a]=W(""),[m,d]=W(["KubeGraf Terminal v1.3.0",'Type "help" for available commands',""]),[i,n]=W([]),[g,v]=W(-1);let p,y;zt(()=>{e.isOpen&&p&&p.focus()});const x=async o=>{if(o.trim()){if(n(c=>[...c,o]),v(-1),d(c=>[...c,`$ ${o}`,""]),o==="help")d(c=>[...c,"Available commands:","  kubectl <args>  - Execute kubectl commands","  clear          - Clear terminal","  help           - Show this help",""]);else if(o==="clear")d(["KubeGraf Terminal v1.3.0",'Type "help" for available commands',""]);else if(o.startsWith("kubectl"))try{const c=await fetch("http://localhost:3001/api/exec",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({command:o})});if(c.ok){const u=await c.json();d(h=>[...h,u.output||"Command executed",""])}else d(u=>[...u,"Error: Failed to execute command",""])}catch(c){d(u=>[...u,`Error: ${c instanceof Error?c.message:"Unknown error"}`,""])}else d(c=>[...c,`Command not found: ${o}`,'Type "help" for available commands',""]);setTimeout(()=>{y&&(y.scrollTop=y.scrollHeight)},0)}},M=o=>{if(o.key==="Enter")o.preventDefault(),x(l()),a("");else if(o.key==="ArrowUp"){o.preventDefault();const c=i();if(c.length>0){const u=g()===-1?c.length-1:Math.max(0,g()-1);v(u),a(c[u])}}else if(o.key==="ArrowDown"){o.preventDefault();const c=i();if(g()!==-1){const u=g()+1;u>=c.length?(v(-1),a("")):(v(u),a(c[u]))}}};console.log("[DockedTerminal] Render called - isOpen:",e.isOpen);const b=t()?"calc(100vh - 60px)":"400px";return _(K,{get when(){return e.isOpen},get children(){return _(ms,{get children(){var o=g7(),c=o.firstChild,u=c.firstChild,h=u.firstChild,f=h.nextSibling;f.nextSibling;var $=u.nextSibling,C=$.firstChild,k=C.nextSibling;k.firstChild;var S=c.nextSibling,L=S.nextSibling,P=L.firstChild,I=P.nextSibling;E(o,"height",b),C.$$click=()=>r(!t()),s(C,_(K,{get when(){return t()},get fallback(){return v7()},get children(){return h7()}})),Rt(k,"click",e.onClose,!0);var D=y;typeof D=="function"?dr(D,S):y=S,s(S,()=>m().map((B,N)=>(()=>{var O=f7();return dt(O,"key",N),s(O,B),J(H=>E(O,"color",B.startsWith("$")?"#58a6ff":B.startsWith("Error")?"#f85149":"#c9d1d9")),O})())),I.$$keydown=M,I.$$input=B=>a(B.currentTarget.value);var T=p;return typeof T=="function"?dr(T,I):p=I,J(()=>dt(C,"title",t()?"Restore":"Maximize")),J(()=>I.value=l()),o}})}})};ut(["click","input","keydown"]);var m7=w('<svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z">'),b7=w('<svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z">'),x7=w('<svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z">'),y7=w('<svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z">'),_7=w('<svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4">'),$7=w("<div><div class=empty-state-icon></div><h3 class=empty-state-title>"),w7=w("<p class=empty-state-description>"),S7=w("<div class=empty-state-actions>");const zi=e=>{const t=()=>{switch(e.variant){case"success":return{iconColor:"var(--success-color)",borderColor:"color-mix(in srgb, var(--success-color) 30%, transparent)",bgColor:"color-mix(in srgb, var(--success-color) 10%, transparent)"};case"warning":return{iconColor:"var(--warning-color)",borderColor:"color-mix(in srgb, var(--warning-color) 30%, transparent)",bgColor:"color-mix(in srgb, var(--warning-color) 10%, transparent)"};case"error":return{iconColor:"var(--error-color)",borderColor:"color-mix(in srgb, var(--error-color) 30%, transparent)",bgColor:"color-mix(in srgb, var(--error-color) 10%, transparent)"};case"info":return{iconColor:"var(--accent-primary)",borderColor:"color-mix(in srgb, var(--accent-primary) 30%, transparent)",bgColor:"color-mix(in srgb, var(--accent-primary) 10%, transparent)"};default:return{iconColor:"var(--text-muted)",borderColor:"var(--border-color)",bgColor:"var(--bg-card)"}}},r=()=>{switch(e.size){case"sm":return{padding:"1.5rem",iconSize:"2.5rem",titleSize:"1rem",descriptionSize:"0.875rem"};case"lg":return{padding:"4rem 2rem",iconSize:"5rem",titleSize:"1.75rem",descriptionSize:"1.125rem"};case"md":default:return{padding:"3rem 2rem",iconSize:"4rem",titleSize:"1.5rem",descriptionSize:"1rem"}}},l=t(),a=r(),m=()=>{switch(e.variant){case"success":return(()=>{var d=m7();return J(i=>E(d,"color",l.iconColor)),d})();case"warning":return(()=>{var d=b7();return J(i=>E(d,"color",l.iconColor)),d})();case"error":return(()=>{var d=x7();return J(i=>E(d,"color",l.iconColor)),d})();case"info":return(()=>{var d=y7();return J(i=>E(d,"color",l.iconColor)),d})();default:return(()=>{var d=_7();return J(i=>E(d,"color",l.iconColor)),d})()}};return(()=>{var d=$7(),i=d.firstChild,n=i.nextSibling;return s(i,()=>e.icon||m()),s(n,()=>e.title),s(d,(()=>{var g=Re(()=>!!e.description);return()=>g()&&(()=>{var v=w7();return s(v,()=>e.description),J(p=>E(v,"font-size",a.descriptionSize)),v})()})(),null),s(d,(()=>{var g=Re(()=>!!e.actions);return()=>g()&&(()=>{var v=S7();return s(v,()=>e.actions),v})()})(),null),J(g=>{var v=`empty-state-enhanced ${e.className||""}`,p=a.padding,y=l.bgColor,x=l.borderColor,M=a.iconSize,b=l.iconColor,o=a.titleSize;return v!==g.e&&tt(d,g.e=v),p!==g.t&&E(d,"padding",g.t=p),y!==g.a&&E(d,"background",g.a=y),x!==g.o&&E(d,"border-color",g.o=x),M!==g.i&&E(i,"font-size",g.i=M),b!==g.n&&E(i,"color",g.n=b),o!==g.s&&E(n,"font-size",g.s=o),g},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),d})()},C7=e=>_(zi,{get title(){return Re(()=>!!e.resource)()?`No ${e.resource} Found`:"No Data Available"},get description(){return Re(()=>!!e.resource)()?`There are no ${e.resource.toLowerCase()} to display.`:"There is no data to display at the moment."},variant:"info",get actions(){return e.actions}}),k7=e=>_(zi,{get title(){return e.title||"Something Went Wrong"},get description(){return e.description||"An error occurred while loading the data. Please try again."},variant:"error",get actions(){return e.actions}}),M7=e=>_(zi,{title:"No Results Found",get description(){return Re(()=>!!e.searchQuery)()?`No results found for "${e.searchQuery}". Try a different search term.`:"No results match your criteria."},variant:"warning",get actions(){return e.actions}});var A7=w('<div class="p-6 space-y-8"><div><h2 class="text-2xl font-bold mb-4 gradient-text">UI/UX Improvements Demo</h2><p class="text-gray-400 mb-6">This demo showcases the UI/UX improvements implemented for KubeGraf.</p></div><section class="card p-6 card-hover-enhanced"><h3 class="text-xl font-semibold mb-4">Loading Skeletons</h3><p class="text-gray-400 mb-6">Enhanced loading states with pulse and shimmer effects for better perceived performance.</p><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class=space-y-4><h4 class=font-medium>Text Skeletons</h4></div><div class=space-y-4><h4 class=font-medium>Shape Skeletons</h4><div class="flex items-center gap-4"></div></div></div><div class=mt-6><h4 class="font-medium mb-4">Dashboard Card Skeletons</h4></div><div class=mt-6><h4 class="font-medium mb-4">Table Row Skeletons</h4><table class=w-full><thead><tr><th class="text-left p-3">Name</th><th class="text-left p-3">Status</th><th class="text-left p-3">Age</th><th class="text-left p-3">Actions</th></tr></thead><tbody></tbody></table></div></section><section class="card p-6 card-hover-enhanced"><h3 class="text-xl font-semibold mb-4">Enhanced Empty States</h3><p class="text-gray-400 mb-6">Informative empty states with appropriate icons, colors, and actions.</p><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"><div><h4 class="font-medium mb-3">No Data</h4></div><div><h4 class="font-medium mb-3">Error State</h4></div><div><h4 class="font-medium mb-3">No Results</h4></div></div><div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6"><div><h4 class="font-medium mb-3">Custom Empty State</h4></div><div><h4 class="font-medium mb-3">Success State</h4></div></div></section><section class="card p-6 card-hover-enhanced"><h3 class="text-xl font-semibold mb-4">Interactive Feedback</h3><p class="text-gray-400 mb-6">Enhanced hover states, focus states, and animations.</p><div class=space-y-6><div><h4 class="font-medium mb-3">Enhanced Buttons</h4><div class="flex flex-wrap gap-4"><button class="btn-accent px-6 py-3 rounded-lg btn-ripple">Primary Button</button><button class="btn-secondary px-6 py-3 rounded-lg btn-ripple">Secondary Button</button><button class="px-6 py-3 rounded-lg focus-visible-enhanced"style=background:var(--bg-tertiary);color:var(--text-primary)>Focus Visible</button></div></div><div><h4 class="font-medium mb-3">Enhanced Cards</h4><div class="grid grid-cols-1 md:grid-cols-3 gap-4"></div></div><div><h4 class="font-medium mb-3">Enhanced Inputs</h4><div class="space-y-4 max-w-md"><input type=text placeholder="Search resources..."class="w-full input-enhanced"><textarea placeholder="Enter description..."class="w-full input-enhanced"rows=3></textarea><select class="w-full input-enhanced"><option value>Select an option</option><option value=1>Option 1</option><option value=2>Option 2</option></select></div></div><div><h4 class="font-medium mb-3">Enhanced Status Indicators</h4><div class="flex flex-wrap gap-4"><span class="status-indicator status-indicator-running">Running</span><span class="status-indicator status-indicator-pending">Pending</span><span class="status-indicator status-indicator-failed">Failed</span></div></div></div></section><section class="card p-6 card-hover-enhanced"><h3 class="text-xl font-semibold mb-4">Utility Classes</h3><p class="text-gray-400 mb-6">Additional utility classes for common UI patterns.</p><div class=space-y-6><div><h4 class="font-medium mb-3">Text Truncation</h4><div class="space-y-2 max-w-md"><div class="line-clamp-1 p-2 bg-gray-800 rounded">This is a very long text that will be truncated with an ellipsis when it exceeds the container width.</div><div class="truncate-2 p-2 bg-gray-800 rounded">This is a multi-line text that will be truncated after two lines. The text continues here but will be hidden with an ellipsis at the end of the second line.</div></div></div><div><h4 class="font-medium mb-3">Gradient Text & Borders</h4><div class=space-y-4><h2 class="text-3xl font-bold text-gradient">Gradient Text Example</h2><div class="border-gradient p-6 rounded-lg"><p>This card has a gradient border using CSS border-image.</p></div></div></div><div><h4 class="font-medium mb-3">Enhanced Tooltips</h4><div class="flex gap-4"><button class="px-4 py-2 rounded-lg bg-gray-800 tooltip-enhanced"data-tooltip="This is an enhanced tooltip">Hover for Tooltip</button><button class="px-4 py-2 rounded-lg bg-gray-800 tooltip-enhanced"data-tooltip="Tooltip with arrow and shadow">Another Tooltip</button></div></div></div></section><section class="card p-6 card-hover-enhanced"><h3 class="text-xl font-semibold mb-4">Responsive Improvements</h3><p class="text-gray-400 mb-6">Responsive grid layouts that adapt to different screen sizes.</p><div class="responsive-grid gap-4">'),L7=w('<button class="btn-accent px-4 py-2 rounded-lg">Connect Cluster'),E7=w('<button class="btn-secondary px-4 py-2 rounded-lg">View Details'),T7=w('<div class="card card-hover-enhanced p-4"><div class="flex items-center justify-between mb-3"><span class=font-medium>Card </span><span class="status-indicator status-indicator-running">Running</span></div><p class="text-sm text-gray-400">Hover over this card to see the enhanced hover effect with shimmer animation.'),D7=w('<div class="card p-4 text-center"><div class="text-lg font-medium">Item </div><div class="text-sm text-gray-400">Resize window to see responsive behavior');const R7=()=>{const[e,t]=W(!0),[r,l]=W(!1),[a,m]=W(!1),[d,i]=W("");return setTimeout(()=>{t(!1),l(!1),m(!0)},2e3),(()=>{var n=A7(),g=n.firstChild,v=g.nextSibling,p=v.firstChild,y=p.nextSibling,x=y.nextSibling,M=x.firstChild;M.firstChild;var b=M.nextSibling,o=b.firstChild,c=o.nextSibling,u=x.nextSibling;u.firstChild;var h=u.nextSibling,f=h.firstChild,$=f.nextSibling,C=$.firstChild,k=C.nextSibling,S=v.nextSibling,L=S.firstChild,P=L.nextSibling,I=P.nextSibling,D=I.firstChild;D.firstChild;var T=D.nextSibling;T.firstChild;var B=T.nextSibling;B.firstChild;var N=I.nextSibling,O=N.firstChild;O.firstChild;var H=O.nextSibling;H.firstChild;var A=S.nextSibling,z=A.firstChild,F=z.nextSibling,j=F.nextSibling,q=j.firstChild,U=q.firstChild,Y=U.nextSibling,V=Y.firstChild,X=V.nextSibling;X.nextSibling;var R=q.nextSibling,G=R.firstChild,te=G.nextSibling,ae=A.nextSibling,Q=ae.nextSibling,Z=Q.firstChild,ne=Z.nextSibling,$e=ne.nextSibling;return s(M,_(zr,{variant:"text",width:"100%"}),null),s(M,_(zr,{variant:"text",width:"80%"}),null),s(M,_(zr,{variant:"text",width:"60%",count:3}),null),s(c,_(zr,{variant:"circle",width:"40px",height:"40px"}),null),s(c,_(zr,{variant:"rect",width:"100px",height:"40px",rounded:"8px"}),null),s(b,_(zr,{variant:"card",width:"100%",height:"120px"}),null),s(u,_(Gm,{count:3}),null),s(k,_(Ym,{columns:4,rows:3})),s(D,_(C7,{resource:"Pods"}),null),s(T,_(k7,{title:"Failed to Load",description:"Unable to fetch cluster data. Please check your connection."}),null),s(B,_(M7,{searchQuery:"production"}),null),s(O,_(zi,{title:"Welcome to KubeGraf!",description:"Get started by connecting to your Kubernetes cluster.",variant:"info",size:"lg",get actions(){return L7()}}),null),s(H,_(zi,{title:"All Systems Operational",description:"All services are running smoothly.",variant:"success",get actions(){return E7()}}),null),s(te,()=>[1,2,3].map(re=>(()=>{var de=T7(),le=de.firstChild,xe=le.firstChild;return xe.firstChild,s(xe,re,null),de})())),s($e,()=>[1,2,3,4,5,6].map(re=>(()=>{var de=D7(),le=de.firstChild;return le.firstChild,s(le,re,null),de})())),n})()};var P7=w('<span class="px-2 py-0.5 rounded text-xs font-semibold uppercase tracking-wide">'),I7=w("<p class=text-xs style=color:var(--text-muted)>"),B7=w("<button type=button style=outline:none><span>"),N7=w('<select class="rounded-lg px-3 py-1.5 text-sm cursor-pointer"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)">'),O7=w('<div class="flex items-center gap-2"><input type=number class="w-24 rounded-lg px-3 py-1.5 text-sm text-right"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)">'),z7=w('<div class="card p-4 hover:border-opacity-60 transition-all"><div class="flex items-start justify-between gap-4"><div class=flex-1><div class="flex items-center gap-2 mb-1"><label class="text-sm font-medium"style=color:var(--text-primary)></label></div></div><div class=flex-shrink-0>'),F7=w("<option>"),H7=w('<span class="px-3 py-1 rounded-full text-xs font-semibold"style=background:#f59e0b20;color:#f59e0b>Update Available'),j7=w("<div class=spinner style=width:16px;height:16px>"),U7=w('<div class=space-y-4><div class="card p-6"><h3 class="text-lg font-semibold mb-4"style=color:var(--text-primary)>Application Version & Updates</h3><div class="flex items-center justify-between mb-4"><div><div class="text-sm font-medium mb-1"style=color:var(--text-primary)>KubeGraf </div><div class=text-xs style=color:var(--text-muted)>Advanced Kubernetes Visualization & Management Platform</div></div></div><button class="px-4 py-2 rounded-lg text-sm font-medium transition-all hover:opacity-90 disabled:opacity-50 flex items-center gap-2"style=background:var(--accent-primary);color:#000></button></div><div class="card p-6"><h3 class="text-lg font-semibold mb-2"style=color:var(--text-primary)>Reset All Settings</h3><p class="text-sm mb-4"style=color:var(--text-muted)>Reset all settings to their default values. This will clear all customizations and preferences.</p><button class="px-4 py-2 rounded-lg text-sm font-medium hover:opacity-90 transition-opacity"style=background:var(--error-color);color:white>Reset to Defaults</button></div><div class="card p-6"><h3 class="text-lg font-semibold mb-4"style=color:var(--text-primary)>Documentation & Links</h3><div class="grid grid-cols-2 gap-3"><a href=https://kubegraf.io target=_blank class="flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium hover:opacity-80 transition-opacity"style=background:var(--bg-tertiary);color:var(--text-primary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>Website</a><a href=https://github.com/kubegraf/kubegraf target=_blank class="flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium hover:opacity-80 transition-opacity"style=background:var(--bg-tertiary);color:var(--text-primary)><svg class="w-4 h-4"fill=currentColor viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>GitHub</a><a href=https://kubegraf.io/docs target=_blank class="flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium hover:opacity-80 transition-opacity"style=background:var(--bg-tertiary);color:var(--text-primary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg>Documentation</a><a href=https://github.com/kubegraf/kubegraf/issues target=_blank class="flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium hover:opacity-80 transition-opacity"style=background:var(--bg-tertiary);color:var(--text-primary)><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>Report Issue'),V7=w('<div class="max-w-5xl mx-auto"><div class=mb-8><h1 class="text-3xl font-bold mb-2 gradient-text">Settings</h1><p class=text-sm style=color:var(--text-muted)>Configure KubeGraf to match your workflow and preferences</p></div><div class=mb-8><button class="flex items-center gap-2 text-sm font-medium mb-4 hover:opacity-80 transition-opacity"style=color:var(--accent-primary)><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 5l7 7-7 7"></path></svg>Advanced Settings & Information'),W7=w("<p class=text-sm style=color:var(--text-muted)>"),q7=w("<div class=space-y-3>"),K7=w('<div class=mb-8><button class="w-full flex items-center gap-3 mb-4 cursor-pointer hover:opacity-80 transition-opacity"><div class="w-10 h-10 rounded-lg flex items-center justify-center"style="background:rgba(6, 182, 212, 0.1)"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></div><div class="flex-1 text-left"><h2 class="text-xl font-semibold"style=color:var(--text-primary)></h2></div><svg fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--text-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 5l7 7-7 7">');const Y7=()=>{const[e,t]=W(!1),[r,l]=W(new Set),[a,m]=W("1.2.1"),[d,i]=W(null),[n,g]=W(!1),[v,p]=W(!1);It(async()=>{try{const u=await Fe.getStatus();u&&u.version&&m(u.version)}catch(u){console.error("Failed to get version:",u)}});const y=(u,h)=>{S_(u,h),Je(`Setting updated: ${u}`,"success")},x=()=>{confirm("Are you sure you want to reset all settings to defaults? This action cannot be undone.")&&(C_(),od("dark"),Je("All settings have been reset to defaults","success"),setTimeout(()=>location.reload(),1e3))},M=u=>{l(h=>{const f=new Set(h);return f.has(u)?f.delete(u):f.add(u),f})},b=u=>r().has(u),o=[{title:"Appearance",description:"Customize the look and feel of KubeGraf",icon:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01",items:[{id:"theme",label:"Color Theme",description:"Choose your preferred color scheme",type:"select",options:Object.keys(Gr).map(u=>({label:Gr[u].label,value:u}))},{id:"compactMode",label:"Compact Mode",description:"Reduce spacing and padding for a more compact view",type:"toggle"},{id:"sidebarCollapsed",label:"Collapsed Sidebar by Default",description:"Start with sidebar in collapsed state",type:"toggle"}]},{title:"General Settings",description:"Configure basic application behavior",icon:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z",items:[{id:"defaultNamespace",label:"Default Namespace",description:"Set the default namespace to load on startup",type:"select",options:[{label:"All Namespaces",value:"_all"},...bn().map(u=>({label:u,value:u}))]},{id:"itemsPerPage",label:"Items Per Page",description:"Number of items to display per page in resource lists",type:"number",min:10,max:200,step:10},{id:"enableAutoRefresh",label:"Auto Refresh",description:"Automatically refresh resource data at regular intervals",type:"toggle"},{id:"refreshInterval",label:"Refresh Interval (seconds)",description:"Time between automatic refreshes",type:"number",min:5,max:300,step:5}]},{title:"Notifications & Alerts",description:"Configure notification and alert preferences",icon:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9",items:[{id:"enableNotifications",label:"Desktop Notifications",description:"Show toast notifications for important events and actions",type:"toggle"},{id:"enableSoundEffects",label:"Sound Effects",description:"Play sound effects for notifications and alerts",type:"toggle"}]},{title:"Security & Diagnostics",description:"Enable or disable security scanning and diagnostic features",icon:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z",items:[{id:"enableDiagnostics",label:"Cluster Diagnostics",description:"Run automatic cluster health checks and diagnostics",type:"toggle",badge:"Core",badgeColor:"blue"},{id:"enableSecurityChecks",label:"Security Checks",description:"Perform security-related diagnostic checks",type:"toggle",badge:"Security",badgeColor:"red"},{id:"enableCVEVulnerabilities",label:"CVE Vulnerability Scanning",description:"Scan for known CVE vulnerabilities using NIST NVD database",type:"toggle",badge:"NIST NVD",badgeColor:"purple"}]},{title:"AI & ML Features",description:"Control AI-powered features and machine learning capabilities",icon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z",items:[{id:"enableAIChat",label:"AI Chat Assistant",description:"Enable AI-powered chat assistant for cluster management",type:"toggle",badge:"AI",badgeColor:"green"},{id:"enableMLRecommendations",label:"ML Recommendations",description:"Get AI/ML-powered optimization recommendations",type:"toggle",badge:"ML",badgeColor:"green"},{id:"enableAnomalyDetection",label:"Anomaly Detection",description:"Detect anomalies in cluster behavior using machine learning",type:"toggle",badge:"Advanced",badgeColor:"orange"},{id:"showMLTimelineInBrain",label:"ML Timeline in Brain Panel",description:"Show ML timeline events in the Brain Panel",type:"toggle",badge:"Brain",badgeColor:"blue"}]},{title:"Monitoring & Analysis",description:"Configure monitoring, cost analysis, and drift detection",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z",items:[{id:"enableEventMonitoring",label:"Event Monitoring",description:"Monitor and track Kubernetes events in real-time",type:"toggle"},{id:"enableCostAnalysis",label:"Cost Analysis",description:"Analyze and track cluster costs across cloud providers",type:"toggle",badge:"Beta",badgeColor:"yellow"},{id:"enableDriftDetection",label:"Configuration Drift Detection",description:"Detect configuration drift in deployments and resources",type:"toggle"},{id:"enableMetrics",label:"Resource Metrics",description:"Display CPU, memory, and other resource metrics",type:"toggle"}]},{title:"Integrations",description:"Enable or disable external integrations and connectors",icon:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1",items:[{id:"enableMCP",label:"AI Agents",description:"Enable Model Context Protocol server for AI agent integration (Claude, Cursor, etc.)",type:"toggle",badge:"New",badgeColor:"cyan"},{id:"enableConnectors",label:"External Connectors",description:"Enable integrations with external services (GitHub, Slack, PagerDuty, Webhooks)",type:"toggle"}]},{title:"Visualization",description:"Configure visualization and topology features",icon:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z",items:[{id:"enableTopology",label:"Topology View",description:"Enable interactive topology visualization",type:"toggle"},{id:"enableResourceMap",label:"Resource Map",description:"Enable resource relationship mapping",type:"toggle"}]},{title:"Developer Tools",description:"Tools for developers and advanced users",icon:"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z",items:[{id:"enableWebTerminal",label:"Web Terminal",description:"Enable built-in web terminal for kubectl commands",type:"toggle"},{id:"enableLogs",label:"Log Viewer",description:"Enable advanced log viewing and streaming",type:"toggle"}]},{title:"Sidebar Visibility",description:"Control which sections and menu items appear in the sidebar",icon:"M4 6h16M4 10h16M4 14h16M4 18h16",items:[{id:"showOverviewSection",label:"Show Overview Section",description:"Display Dashboard in sidebar",type:"toggle"},{id:"showInsightsSection",label:"Show Insights Section",description:"Display AI Insights, Cost Analysis, Security, Drift Detection",type:"toggle"},{id:"showDeploymentsSection",label:"Show Deployments Section",description:"Display Deploy and Rollouts",type:"toggle"},{id:"showWorkloadsSection",label:"Show Workloads Section",description:"Display Pods, Deployments, StatefulSets, DaemonSets, Jobs, CronJobs",type:"toggle"},{id:"showNetworkingSection",label:"Show Networking Section",description:"Display Services, Ingresses, Network Policies",type:"toggle"},{id:"showConfigStorageSection",label:"Show Config & Storage Section",description:"Display ConfigMaps, Secrets, Certificates, Storage",type:"toggle"},{id:"showClusterSection",label:"Show Cluster Section",description:"Display Nodes, RBAC, Events, Resource Map",type:"toggle"},{id:"showIntegrationsSection",label:"Show Integrations Section",description:"Display Connectors and AI Agents menu items",type:"toggle",badge:"Important",badgeColor:"cyan"},{id:"showExtensionsSection",label:"Show Extensions Section",description:"Display Plugins and Terminal",type:"toggle"}]},{title:"Individual Menu Items",description:"Fine-grained control over specific sidebar menu items",icon:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4",items:[{id:"showConnectorsMenu",label:"Show Connectors Menu",description:"Display Connectors in Integrations section",type:"toggle",badge:"Integration",badgeColor:"cyan"},{id:"showAIAgentsMenu",label:"Show AI Agents Menu",description:"Display AI Agents in Integrations section",type:"toggle",badge:"Integration",badgeColor:"cyan"},{id:"showAIInsights",label:"Show AI Insights",description:"Display AI Insights in Insights section",type:"toggle"},{id:"showCostAnalysisMenu",label:"Show Cost Analysis",description:"Display Cost Analysis in Insights section",type:"toggle"},{id:"showSecurityInsights",label:"Show Security Insights",description:"Display Security in Insights section",type:"toggle"},{id:"showDriftDetectionMenu",label:"Show Drift Detection",description:"Display Drift Detection in Insights section",type:"toggle"},{id:"showPlugins",label:"Show Plugins",description:"Display Plugins in Extensions section",type:"toggle"},{id:"showTerminalMenu",label:"Show Terminal",description:"Display Terminal in Extensions section",type:"toggle"}]}],c=u=>{const h=u.item,f=()=>Os()[h.id];return(()=>{var $=z7(),C=$.firstChild,k=C.firstChild,S=k.firstChild,L=S.firstChild,P=k.nextSibling;return s(L,()=>h.label),s(S,_(K,{get when(){return h.badge},get children(){var I=P7();return s(I,()=>h.badge),J(D=>{var T=h.badgeColor==="blue"?"#3b82f620":h.badgeColor==="red"?"#ef444420":h.badgeColor==="green"?"#22c55e20":h.badgeColor==="purple"?"#a855f720":h.badgeColor==="orange"?"#f97316 20":h.badgeColor==="yellow"?"#f59e0b20":h.badgeColor==="cyan"?"#06b6d420":"#3b82f620",B=h.badgeColor==="blue"?"#3b82f6":h.badgeColor==="red"?"#ef4444":h.badgeColor==="green"?"#22c55e":h.badgeColor==="purple"?"#a855f7":h.badgeColor==="orange"?"#f97316":h.badgeColor==="yellow"?"#f59e0b":h.badgeColor==="cyan"?"#06b6d4":"#3b82f6";return T!==D.e&&E(I,"background",D.e=T),B!==D.t&&E(I,"color",D.t=B),D},{e:void 0,t:void 0}),I}}),null),s(k,_(K,{get when(){return h.description},get children(){var I=I7();return s(I,()=>h.description),I}}),null),s(P,_(K,{get when(){return h.type==="toggle"},get children(){var I=B7(),D=I.firstChild;return I.$$click=T=>{T.preventDefault(),T.stopPropagation(),y(h.id,!f())},J(T=>{var B=`relative inline-flex h-6 w-11 items-center rounded-full transition-colors cursor-pointer ${f()?"bg-[var(--accent-primary)]":"bg-[var(--bg-tertiary)]"}`,N=f()?"Enabled":"Disabled",O=`inline-block h-4 w-4 transform rounded-full bg-white transition-transform pointer-events-none ${f()?"translate-x-6":"translate-x-1"}`;return B!==T.e&&tt(I,T.e=B),N!==T.t&&dt(I,"title",T.t=N),O!==T.a&&tt(D,T.a=O),T},{e:void 0,t:void 0,a:void 0}),I}}),null),s(P,_(K,{get when(){return h.type==="select"},get children(){var I=N7();return I.addEventListener("change",D=>y(h.id,D.currentTarget.value)),s(I,_(Xe,{get each(){return h.options},children:D=>(()=>{var T=F7();return s(T,()=>D.label),J(()=>T.value=D.value),T})()})),J(()=>I.value=f()),I}}),null),s(P,_(K,{get when(){return h.type==="number"},get children(){var I=O7(),D=I.firstChild;return D.addEventListener("change",T=>y(h.id,parseInt(T.currentTarget.value,10))),J(T=>{var B=h.min,N=h.max,O=h.step;return B!==T.e&&dt(D,"min",T.e=B),N!==T.t&&dt(D,"max",T.t=N),O!==T.a&&dt(D,"step",T.a=O),T},{e:void 0,t:void 0,a:void 0}),J(()=>D.value=f()),I}}),null),$})()};return(()=>{var u=V7(),h=u.firstChild,f=h.firstChild;f.nextSibling;var $=h.nextSibling,C=$.firstChild,k=C.firstChild;return s(u,_(Xe,{each:o,children:S=>(()=>{var L=K7(),P=L.firstChild,I=P.firstChild,D=I.firstChild,T=D.firstChild,B=I.nextSibling,N=B.firstChild,O=B.nextSibling;return P.$$click=()=>M(S.title),s(N,()=>S.title),s(B,_(K,{get when(){return S.description},get children(){var H=W7();return s(H,()=>S.description),H}}),null),s(L,_(K,{get when(){return!b(S.title)},get children(){var H=q7();return s(H,_(Xe,{get each(){return S.items},children:A=>_(c,{item:A})})),H}}),null),J(H=>{var A=S.icon,z=`w-5 h-5 transition-transform flex-shrink-0 ${b(S.title)?"":"rotate-90"}`;return A!==H.e&&dt(T,"d",H.e=A),z!==H.t&&dt(O,"class",H.t=z),H},{e:void 0,t:void 0}),L})()}),$),C.$$click=()=>t(!e()),s($,_(K,{get when(){return e()},get children(){var S=U7(),L=S.firstChild,P=L.firstChild,I=P.nextSibling,D=I.firstChild,T=D.firstChild;T.firstChild,T.nextSibling;var B=I.nextSibling,N=L.nextSibling,O=N.firstChild,H=O.nextSibling,A=H.nextSibling,z=N.nextSibling,F=z.firstChild,j=F.nextSibling,q=j.firstChild,U=q.nextSibling,Y=U.nextSibling;return Y.nextSibling,s(T,a,null),s(I,_(K,{get when(){return Re(()=>!!d())()&&d().updateAvailable},get children(){return H7()}}),null),B.$$click=async()=>{g(!0);try{const V=await Fe.checkForUpdates();i(V),V.updateAvailable?Je(`Update available: ${V.latestVersion}`,"info"):Je("You are running the latest version","success")}catch(V){Je(`Failed to check for updates: ${V instanceof Error?V.message:"Unknown error"}`,"error")}finally{g(!1)}},s(B,_(K,{get when(){return n()},get children(){return j7()}}),null),s(B,()=>n()?"Checking...":"Check for Updates",null),A.$$click=x,J(()=>B.disabled=n()),S}}),null),J(()=>dt(k,"class",`w-4 h-4 transition-transform ${e()?"rotate-90":""}`)),u})()};ut(["click"]);const _l={getTimeline:async(e=72)=>je(`/brain/ml/timeline?hours=${e}`),getPredictions:async()=>je("/brain/ml/predictions"),getSummary:async(e=24)=>je(`/brain/ml/summary?hours=${e}`)};async function G7(){const t=Os().showMLTimelineInBrain,[r,l,a,...m]=await Promise.all([Fe.getBrainTimeline(72),Fe.getBrainOOMInsights(),Fe.getBrainSummary(),...t?[_l.getTimeline(72),_l.getPredictions(),_l.getSummary(24)]:[]]),d={timelineEvents:r,oomMetrics:l,summary:a};return t&&m.length===3&&(d.mlTimeline=m[0],d.mlPredictions=m[1],d.mlSummary=m[2]),d}async function J7(){try{await Promise.all([Fe.getBrainOOMInsights().catch(()=>null)])}catch(e){console.debug("Brain pre-fetch failed:",e)}}var X7=w('<div class=space-y-4><div class="flex items-center justify-between mb-4"><h3 class="text-lg font-bold"style=background:var(--accent-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text>Cluster Timeline</h3><span class=text-xs style=color:var(--text-muted)>Last 72h</span></div><div class="space-y-3 max-h-96 overflow-y-auto"style="scrollbar-width:thin;scrollbar-color:var(--border-color) var(--bg-primary)">'),Z7=w('<div class="text-center py-8"style=color:var(--text-muted)>No events in the last 72 hours'),Q7=w('<div class="flex gap-3 p-3 rounded-lg transition-colors"style=background:var(--bg-tertiary)><div class="flex-shrink-0 mt-1"><span class=text-lg></span></div><div class="flex-1 min-w-0"><div class="flex items-start justify-between gap-2 mb-1"><h4 class="font-semibold text-sm"style=color:var(--accent-primary)></h4><span class="text-xs whitespace-nowrap"style=color:var(--text-muted)></span></div><p class="text-xs mb-2"style=color:var(--text-secondary)>'),e9=w("<div class=text-xs style=color:var(--text-muted)><span class=capitalize></span> <span class=font-mono>"),t9=w("<span class=font-mono>");const r9=e=>{const t=m=>{const d=new Date(m),n=new Date().getTime()-d.getTime(),g=Math.floor(n/36e5),v=Math.floor(n%36e5/6e4);return g<1?`${v}m ago`:g<24?`${g}h ago`:`${Math.floor(g/24)}d ago`},r=m=>{switch(m){case"incident":return"";case"event_spike":return"";case"scaling":return"";case"deployment":return"";default:return""}},l=m=>{switch(m){case"critical":return"var(--error-color)";case"warning":return"var(--warning-color)";default:return"var(--accent-primary)"}},a=et(()=>[...e.events].sort((m,d)=>new Date(d.timestamp).getTime()-new Date(m.timestamp).getTime()));return(()=>{var m=X7(),d=m.firstChild,i=d.firstChild;i.nextSibling;var n=d.nextSibling;return s(n,_(K,{get when(){return a().length>0},get fallback(){return Z7()},get children(){return _(Xe,{get each(){return a()},children:g=>(()=>{var v=Q7(),p=v.firstChild,y=p.firstChild,x=p.nextSibling,M=x.firstChild,b=M.firstChild,o=b.nextSibling,c=M.nextSibling;return v.addEventListener("mouseleave",u=>u.currentTarget.style.background="var(--bg-tertiary)"),v.addEventListener("mouseenter",u=>u.currentTarget.style.background="var(--bg-secondary)"),s(y,()=>r(g.type)),s(b,()=>g.title),s(o,()=>t(g.timestamp)),s(c,()=>g.description),s(x,(()=>{var u=Re(()=>!!g.resource);return()=>u()&&(()=>{var h=e9(),f=h.firstChild,$=f.nextSibling,C=$.nextSibling;return s(f,()=>g.resource.kind),s(C,()=>g.resource.name),s(h,(()=>{var k=Re(()=>!!g.resource.namespace);return()=>k()&&[" ","in"," ",(()=>{var S=t9();return s(S,()=>g.resource.namespace),S})()]})(),null),h})()})(),null),J(u=>E(v,"border-left",`3px solid ${l(g.severity)}`)),v})()})}})),m})()};var s9=w("<div class=space-y-2>"),i9=w('<div class=space-y-4><h3 class="text-lg font-bold"style=background:var(--accent-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text>OOM & Reliability Insights</h3><div class="grid grid-cols-2 gap-3"><div class="p-4 rounded-lg"style="background:var(--glass-gradient);border:1px solid var(--border-color)"><div class="text-xs mb-1"style=color:var(--text-muted)>OOM Incidents</div><div class="text-2xl font-bold"style=color:var(--error-color)></div><div class="text-xs mt-1"style=color:var(--text-muted)>Last 24h</div></div><div class="p-4 rounded-lg"style="background:var(--glass-gradient);border:1px solid var(--border-color)"><div class="text-xs mb-1"style=color:var(--text-muted)>CrashLoops</div><div class="text-2xl font-bold"style=color:var(--warning-color)></div><div class="text-xs mt-1"style=color:var(--text-muted)>Last 24h</div></div></div><div><h4 class="text-sm font-semibold mb-3"style=color:var(--accent-primary)>Top 5 Problematic Workloads'),n9=w('<div class="text-center py-4 text-sm"style=color:var(--text-muted)>No problematic workloads detected'),l9=w('<div class="p-3 rounded-lg text-sm"style="background:var(--bg-tertiary);border:1px solid var(--border-color)"><div class="flex items-start justify-between mb-2"><div class="flex-1 min-w-0"><div class=font-semibold style=color:var(--accent-primary)></div><div class="text-xs mt-1"style=color:var(--text-muted)><span class=capitalize></span>  </div></div><div class="text-xs font-bold px-2 py-1 rounded"style="background:var(--bg-secondary);color:var(--error-color);border:1px solid var(--border-color)">Score: </div></div><div class="flex gap-4 text-xs mt-2"style=color:var(--text-muted)>'),o9=w("<span>OOM: "),a9=w("<span>Restarts: "),c9=w("<span>CrashLoops: ");const d9=e=>{const t=()=>e.metrics.topProblematic.slice(0,5);return(()=>{var r=i9(),l=r.firstChild,a=l.nextSibling,m=a.firstChild,d=m.firstChild,i=d.nextSibling;i.nextSibling;var n=m.nextSibling,g=n.firstChild,v=g.nextSibling;v.nextSibling;var p=a.nextSibling;return p.firstChild,s(i,()=>e.metrics.incidents24h),s(v,()=>e.metrics.crashLoops24h),s(p,_(K,{get when(){return t().length>0},get fallback(){return n9()},get children(){var y=s9();return s(y,_(Xe,{get each(){return t()},children:x=>(()=>{var M=l9(),b=M.firstChild,o=b.firstChild,c=o.firstChild,u=c.nextSibling,h=u.firstChild;h.nextSibling;var f=o.nextSibling;f.firstChild;var $=b.nextSibling;return s(c,()=>x.name),s(h,()=>x.kind),s(u,()=>x.namespace,null),s(f,()=>x.score,null),s($,(()=>{var C=Re(()=>x.issues.oomKilled>0);return()=>C()&&(()=>{var k=o9();return k.firstChild,s(k,()=>x.issues.oomKilled,null),k})()})(),null),s($,(()=>{var C=Re(()=>x.issues.restarts>0);return()=>C()&&(()=>{var k=a9();return k.firstChild,s(k,()=>x.issues.restarts,null),k})()})(),null),s($,(()=>{var C=Re(()=>x.issues.crashLoops>0);return()=>C()&&(()=>{var k=c9();return k.firstChild,s(k,()=>x.issues.crashLoops,null),k})()})(),null),M})()})),y}}),null),r})()};var Lc=w("<div class=space-y-2>"),u9=w('<div class=space-y-4><h3 class="text-lg font-bold"style=background:var(--accent-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text>Explanation & Suggestions</h3><div class="p-4 rounded-lg"style="background:var(--glass-gradient);border:1px solid var(--border-color)"><h4 class="text-sm font-semibold mb-2"style=color:var(--accent-primary)>Summary of Last 24h</h4><p class=text-sm style=color:var(--text-secondary);line-height:1.6></p></div><div><h4 class="text-sm font-semibold mb-3"style=color:var(--accent-primary)>Top 3 Risk Areas</h4></div><div><h4 class="text-sm font-semibold mb-3"style=color:var(--accent-primary)>Recommended Next Actions</h4></div><div class="text-xs pt-2"style=color:var(--text-muted)>Generated at '),h9=w("<div class=text-sm style=color:var(--text-muted)>No significant risk areas identified"),g9=w('<div class="flex items-start gap-3 p-3 rounded-lg"style="background:var(--bg-tertiary);border:1px solid var(--border-color)"><div class="flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold"style="background:var(--bg-secondary);color:var(--error-color);border:1px solid var(--border-color)"></div><p class="text-sm flex-1"style=color:var(--text-secondary)>'),v9=w("<div class=text-sm style=color:var(--text-muted)>No specific actions recommended at this time"),f9=w('<div class="flex items-start gap-3 p-3 rounded-lg"style="background:var(--glass-gradient);border:1px solid var(--border-color)"><div class="flex-shrink-0 mt-0.5"style=color:var(--success-color)></div><p class="text-sm flex-1"style=color:var(--text-secondary)>');const p9=e=>(()=>{var t=u9(),r=t.firstChild,l=r.nextSibling,a=l.firstChild,m=a.nextSibling,d=l.nextSibling;d.firstChild;var i=d.nextSibling;i.firstChild;var n=i.nextSibling;return n.firstChild,s(m,()=>e.summary.last24hSummary),s(d,_(K,{get when(){return e.summary.topRiskAreas.length>0},get fallback(){return h9()},get children(){var g=Lc();return s(g,_(Xe,{get each(){return e.summary.topRiskAreas},children:(v,p)=>(()=>{var y=g9(),x=y.firstChild,M=x.nextSibling;return s(x,()=>p()+1),s(M,v),y})()})),g}}),null),s(i,_(K,{get when(){return e.summary.recommendedActions.length>0},get fallback(){return v9()},get children(){var g=Lc();return s(g,_(Xe,{get each(){return e.summary.recommendedActions},children:v=>(()=>{var p=f9(),y=p.firstChild,x=y.nextSibling;return s(x,v),p})()})),g}}),null),s(n,()=>new Date(e.summary.generatedAt).toLocaleString(),null),t})();var m9=w('<div class="text-center py-8"style=color:var(--text-muted)><p>No ML events in the selected time range'),b9=w("<div class=space-y-4>"),x9=w('<div><div class="flex items-center justify-between mb-4"><h3 class="text-lg font-semibold"style=color:var(--text-primary)>ML Timeline</h3><span class="text-sm px-2 py-1 rounded"style="background:var(--glass-gradient);color:var(--info-color);border:1px solid var(--border-color)"> events'),y9=w("<span> "),_9=w('<div class="flex items-center gap-2 text-xs"style=color:var(--text-muted)><span class="px-2 py-0.5 rounded"style="background:var(--bg-secondary);color:var(--info-color);border:1px solid var(--border-color)"></span><span>'),$9=w('<div class="flex gap-4 p-4 rounded-lg border"style=background:var(--bg-tertiary);borderColor:var(--border-color)><div class="flex flex-col items-center"><div class="w-10 h-10 rounded-full flex items-center justify-center"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></div><div class="flex-1 w-0.5 mt-2"style=background:var(--border-color)></div></div><div class="flex-1 min-w-0"><div class="flex items-start justify-between gap-2 mb-1"><h4 class=font-medium style=color:var(--text-primary)></h4><span class="text-xs whitespace-nowrap"style=color:var(--text-muted)></span></div><p class="text-sm mb-2"style=color:var(--text-secondary)>');const w9=e=>{const t=a=>{switch(a){case"training_failure":return"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z";case"gpu_spike":return"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z";case"model_deployment":return"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10";case"drift_detected":return"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4";default:return"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"}},r=a=>{switch(a){case"critical":return"var(--error-color)";case"warning":return"var(--warning-color)";case"info":return"var(--info-color)";default:return"var(--text-muted)"}},l=a=>{const m=new Date(a),i=new Date().getTime()-m.getTime(),n=Math.floor(i/(1e3*60*60)),g=Math.floor(i/(1e3*60));return g<1?"Just now":g<60?`${g}m ago`:n<24?`${n}h ago`:m.toLocaleDateString()};return(()=>{var a=x9(),m=a.firstChild,d=m.firstChild,i=d.nextSibling,n=i.firstChild;return s(i,()=>e.events.length,n),s(a,_(K,{get when(){return e.events.length===0},get children(){return m9()}}),null),s(a,_(K,{get when(){return e.events.length>0},get children(){var g=b9();return s(g,_(Xe,{get each(){return e.events},children:v=>{const p=r(v.severity);return(()=>{var y=$9(),x=y.firstChild,M=x.firstChild,b=M.firstChild,o=b.firstChild;M.nextSibling;var c=x.nextSibling,u=c.firstChild,h=u.firstChild,f=h.nextSibling,$=u.nextSibling;return E(M,"border",`2px solid ${p}`),E(b,"color",p),s(h,()=>v.title),s(f,()=>l(v.timestamp)),s($,()=>v.description),s(c,_(K,{get when(){return v.resource},get children(){var C=_9(),k=C.firstChild,S=k.nextSibling;return s(k,()=>v.resource.kind),s(S,()=>v.resource.name),s(C,_(K,{get when(){return v.resource.namespace},get children(){var L=y9();return L.firstChild,s(L,()=>v.resource.namespace,null),L}}),null),C}}),null),J(()=>dt(o,"d",t(v.type))),y})()}})),g}}),null),a})()};var S9=w('<div class="text-center py-8"style=color:var(--text-muted)><p>No predictions available at this time'),C9=w("<div class=space-y-4>"),k9=w('<div><div class="flex items-center justify-between mb-4"><h3 class="text-lg font-semibold"style=color:var(--text-primary)>ML Predictions</h3><span class="text-sm px-2 py-1 rounded"style="background:var(--glass-gradient);color:var(--warning-color);border:1px solid var(--border-color)"> forecasts'),M9=w('<div class="mt-2 flex items-center gap-2 text-xs"><span class="px-2 py-0.5 rounded"style="background:var(--bg-secondary);color:var(--info-color);border:1px solid var(--border-color)"></span><span style=color:var(--text-muted)>'),A9=w('<div class="p-4 rounded-lg border"style=background:var(--bg-tertiary);borderLeftWidth:4px><div class="flex items-start gap-3 mb-3"><div class="w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0"style=background:var(--bg-secondary)><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></div><div class="flex-1 min-w-0"><div class="flex items-start justify-between gap-2 mb-1"><h4 class=font-medium style=color:var(--text-primary)></h4><div class="flex items-center gap-2"><span class="text-xs px-2 py-0.5 rounded"style="background:var(--bg-secondary);border:1px solid var(--border-color)">% confidence</span></div></div><p class="text-sm mb-2"style=color:var(--text-secondary)></p><div class="flex items-center gap-4 text-xs"style=color:var(--text-muted)><span>Timeframe: <strong style=color:var(--text-primary)></strong></span><span>Trend: <strong>');const L9=e=>{const t=a=>{switch(a){case"gpu_saturation":return"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z";case"latency_increase":return"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6";case"artifact_growth":return"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4";default:return"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"}},r=a=>{switch(a){case"critical":return"var(--error-color)";case"warning":return"var(--warning-color)";case"info":return"var(--info-color)";default:return"var(--text-muted)"}},l=a=>a>=.8?"var(--error-color)":a>=.6?"var(--warning-color)":"var(--info-color)";return(()=>{var a=k9(),m=a.firstChild,d=m.firstChild,i=d.nextSibling,n=i.firstChild;return s(i,()=>e.predictions.length,n),s(a,_(K,{get when(){return e.predictions.length===0},get children(){return S9()}}),null),s(a,_(K,{get when(){return e.predictions.length>0},get children(){var g=C9();return s(g,_(Xe,{get each(){return e.predictions},children:v=>{const p=r(v.severity),y=l(v.confidence);return(()=>{var x=A9(),M=x.firstChild,b=M.firstChild,o=b.firstChild,c=o.firstChild,u=b.nextSibling,h=u.firstChild,f=h.firstChild,$=f.nextSibling,C=$.firstChild,k=C.firstChild,S=h.nextSibling,L=S.nextSibling,P=L.firstChild,I=P.firstChild,D=I.nextSibling,T=P.nextSibling,B=T.firstChild,N=B.nextSibling;return E(x,"borderColor",p),E(b,"border",`1px solid ${p}`),E(o,"color",p),s(f,()=>v.title),E(C,"color",y),s(C,()=>Math.round(v.confidence*100),k),s(S,()=>v.description),s(D,()=>v.timeframe),s(N,()=>v.trend),s(u,_(K,{get when(){return v.resource},get children(){var O=M9(),H=O.firstChild,A=H.nextSibling;return s(H,()=>v.resource.kind),s(A,()=>v.resource.name),O}}),null),J(O=>{var H=t(v.type),A=v.trend==="increasing"?"var(--error-color)":"var(--success-color)";return H!==O.e&&dt(c,"d",O.e=H),A!==O.t&&E(N,"color",O.t=A),O},{e:void 0,t:void 0}),x})()}})),g}}),null),a})()};var E9=w('<div><h4 class="font-medium mb-3"style=color:var(--text-primary)>Key Insights</h4><div class=space-y-2>'),T9=w('<div><h4 class="font-medium mb-3"style=color:var(--text-primary)>Recommendations</h4><div class=space-y-2>'),D9=w('<div><div class="flex items-center justify-between mb-4"><h3 class="text-lg font-semibold"style=color:var(--text-primary)>ML Summary</h3><span class=text-xs style=color:var(--text-muted)></span></div><div class=space-y-6><div class="p-4 rounded-lg border"style=background:var(--bg-tertiary);borderColor:var(--border-color)><h4 class="font-medium mb-2"style=color:var(--text-primary)>Overview</h4><p class="text-sm whitespace-pre-line"style=color:var(--text-secondary)>'),R9=w('<div class="flex items-start gap-3 p-3 rounded-lg"style="background:var(--glass-gradient);borderLeft:3px solid var(--info-color);border:1px solid var(--border-color);borderLeftWidth:3px"><svg class="w-5 h-5 flex-shrink-0 mt-0.5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--info-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><p class="text-sm flex-1"style=color:var(--text-secondary)>'),P9=w('<div class="flex items-start gap-3 p-3 rounded-lg"style="background:var(--glass-gradient);borderLeft:3px solid var(--warning-color);border:1px solid var(--border-color);borderLeftWidth:3px"><svg class="w-5 h-5 flex-shrink-0 mt-0.5"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--warning-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg><p class="text-sm flex-1"style=color:var(--text-secondary)>');const I9=e=>(()=>{var t=D9(),r=t.firstChild,l=r.firstChild,a=l.nextSibling,m=r.nextSibling,d=m.firstChild,i=d.firstChild,n=i.nextSibling;return s(a,()=>e.summary.timeRange),s(n,()=>e.summary.summary),s(m,_(K,{get when(){return Re(()=>!!e.summary.keyInsights)()&&e.summary.keyInsights.length>0},get children(){var g=E9(),v=g.firstChild,p=v.nextSibling;return s(p,_(Xe,{get each(){return e.summary.keyInsights},children:y=>(()=>{var x=R9(),M=x.firstChild,b=M.nextSibling;return s(b,y),x})()})),g}}),null),s(m,_(K,{get when(){return Re(()=>!!e.summary.recommendations)()&&e.summary.recommendations.length>0},get children(){var g=T9(),v=g.firstChild,p=v.nextSibling;return s(p,_(Xe,{get each(){return e.summary.recommendations},children:y=>(()=>{var x=P9(),M=x.firstChild,b=M.nextSibling;return s(b,y),x})()})),g}}),null),t})();var B9=w('<div class="fixed right-0 z-50 flex"style=top:112px;bottom:0><div class="fixed inset-0 transition-opacity"style="background:rgba(0, 0, 0, 0.5)"></div><div class="relative flex flex-col w-full max-w-2xl shadow-xl transition-transform duration-300 ease-in-out"style="borderLeft:1px solid var(--border-color)"><div class="flex items-center justify-between p-4 border-b"style=borderColor:var(--border-color)><div class="flex items-center gap-3"><div class=text-2xl></div><div><h2 class="text-xl font-bold"style=background:var(--accent-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text>Brain</h2><p class=text-xs style=color:var(--text-muted)>Intelligent SRE insights for your cluster</p></div></div><div class="flex items-center gap-2"><button class="p-2 rounded-lg transition-colors"style=background:transparent><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"></svg></button><button class="p-2 rounded-lg transition-colors"style=color:var(--text-muted);background:transparent><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div><div class="flex-1 overflow-y-auto p-6 space-y-8"style="scrollbar-width:thin;scrollbar-color:var(--border-color) var(--bg-primary)">'),N9=w('<svg><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></svg>',!1,!0,!1),O9=w('<svg><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"fill=none></svg>',!1,!0,!1),z9=w('<div class="flex items-center justify-center h-64"><div class=text-center><div class="inline-block w-8 h-8 border-4 rounded-full animate-spin mx-auto mb-4"style=borderColor:var(--accent-primary);borderTopColor:transparent></div><p style=color:var(--text-muted)>Loading Brain insights...'),yi=w('<div class="border-t pt-8"style=borderColor:var(--border-color)>');const F9=()=>{const e=et(()=>kg()),[t]=it(()=>cs(),async()=>cs()?await G7():{timelineEvents:[],oomMetrics:{incidents24h:0,crashLoops24h:0,topProblematic:[]},summary:{last24hSummary:"",topRiskAreas:[],recommendedActions:[],generatedAt:new Date().toISOString()}});return _(K,{get when(){return cs()},get children(){var r=B9(),l=r.firstChild,a=l.nextSibling,m=a.firstChild,d=m.firstChild,i=d.firstChild,n=i.nextSibling,g=n.firstChild;g.nextSibling;var v=d.nextSibling,p=v.firstChild,y=p.firstChild,x=p.nextSibling,M=m.nextSibling;return l.$$click=()=>!sn()&&Dl(),p.addEventListener("mouseleave",b=>b.currentTarget.style.background="transparent"),p.addEventListener("mouseenter",b=>b.currentTarget.style.background="var(--bg-tertiary)"),Rt(p,"click",wg,!0),s(y,(()=>{var b=Re(()=>!!sn());return()=>b()?N9():O9()})()),x.addEventListener("mouseleave",b=>b.currentTarget.style.background="transparent"),x.addEventListener("mouseenter",b=>b.currentTarget.style.background="var(--bg-tertiary)"),Rt(x,"click",Dl,!0),s(M,_(K,{get when(){return Re(()=>!t.loading)()&&t()},get fallback(){return(()=>{var b=z9(),o=b.firstChild,c=o.firstChild;return c.nextSibling,b})()},get children(){return(()=>{const b=t();return[_(r9,{get events(){return b.timelineEvents||[]}}),(()=>{var o=yi();return s(o,_(d9,{get metrics(){return b.oomMetrics||{incidents24h:0,crashLoops24h:0,topProblematic:[]}}})),o})(),(()=>{var o=yi();return s(o,_(p9,{get summary(){return b.summary||{last24hSummary:"",topRiskAreas:[],recommendedActions:[],generatedAt:new Date().toISOString()}}})),o})(),_(K,{get when(){return Re(()=>!!(Os().showMLTimelineInBrain&&b.mlTimeline&&b.mlPredictions))()&&b.mlSummary},get children(){return[(()=>{var o=yi();return s(o,_(w9,{get events(){return b.mlTimeline?.events||[]}})),o})(),(()=>{var o=yi();return s(o,_(L9,{get predictions(){return b.mlPredictions?.predictions||[]}})),o})(),(()=>{var o=yi();return s(o,_(I9,{get summary(){return b.mlSummary||{summary:"",keyInsights:[],recommendations:[],generatedAt:new Date().toISOString(),timeRange:"last 24 hours"}}})),o})()]}})]})()}})),J(b=>{var o=cs()?"auto":"none",c=cs()?1:0,u=cs()?"auto":"none",h=cs()?"translateX(0)":"translateX(100%)",f=e().colors.bgCard,$=e().colors.textPrimary,C=sn()?"Unpin panel":"Pin panel",k=sn()?"var(--accent-primary)":"var(--text-muted)";return o!==b.e&&E(r,"pointerEvents",b.e=o),c!==b.t&&E(l,"opacity",b.t=c),u!==b.a&&E(l,"pointerEvents",b.a=u),h!==b.o&&E(a,"transform",b.o=h),f!==b.i&&E(a,"background",b.i=f),$!==b.n&&E(a,"color",b.n=$),C!==b.s&&dt(p,"title",b.s=C),k!==b.h&&E(p,"color",b.h=k),b},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),r}})};ut(["click"]);class H9{initialized=!1;prefetchPromise=null;async initialize(){this.initialized||(this.initialized=!0,this.prefetchPromise=this.prefetchAll())}async prefetchAll(){try{await Promise.allSettled([Fe.getStatus().catch(()=>null),Fe.getNamespaces().catch(()=>null),Fe.getCloudInfo().catch(()=>null),J7(),Fe.getContexts().catch(()=>null)]),console.debug("Background pre-fetch completed")}catch(t){console.debug("Background pre-fetch error:",t)}}async waitForPrefetch(){this.prefetchPromise&&await this.prefetchPromise}reset(){this.initialized=!1,this.prefetchPromise=null}}const j9=new H9;var U9=w('<div class="px-6 py-3 flex items-center gap-3"style="background:rgba(239, 68, 68, 0.1);border-bottom:1px solid rgba(239, 68, 68, 0.2)"><svg class="w-5 h-5 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--error-color)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div class="flex-1 min-w-0"><span class=font-medium style=color:var(--error-color)>Cluster not connected</span><span class="text-sm ml-2"style=color:var(--text-muted)> Connect to a Kubernetes cluster to use KubeGraf</span></div><button class="px-3 py-1.5 rounded text-sm font-medium transition-all hover:opacity-80 flex items-center gap-1.5"style="background:rgba(239, 68, 68, 0.2);color:var(--error-color)"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>Retry'),V9=w('<div class="px-4 py-2 flex items-center gap-3"style="background:rgba(6, 182, 212, 0.1);border-bottom:1px solid rgba(6, 182, 212, 0.3);color:var(--accent-primary)"><div class=spinner style=width:16px;height:16px></div><span class="text-sm font-medium">'),W9=w('<div class="card p-4 mb-6 text-left max-w-lg mx-auto"><div class="text-xs font-semibold mb-2 uppercase tracking-wide"style=color:var(--error-color)>Error</div><div class="text-xs font-mono break-all mb-2"style=color:var(--text-secondary)></div><div class="text-sm font-medium mt-3"style=color:var(--text-primary)><div class=mb-2>Check your kubeconfig at:</div><code class="block px-3 py-2 rounded mb-3 text-xs font-mono"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)">~/.kube/config</code><div class=mb-2>Or run this command to verify access:</div><code class="block px-3 py-2 rounded text-xs font-mono"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)">kubectl cluster-info'),q9=w('<div class="absolute inset-0 z-10 flex items-center justify-center p-8"style=background:var(--bg-primary);pointer-events:auto><div class="max-w-3xl w-full"><div class="text-center mb-8"><div class="w-20 h-20 mx-auto mb-6 rounded-full flex items-center justify-center"style="background:rgba(6, 182, 212, 0.15)"><svg class="w-12 h-12"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg></div><h2 class="text-3xl font-bold mb-3"style=color:var(--text-primary)>No Cluster Connected</h2><p class="text-base mb-8"style=color:var(--text-secondary)>Connect to an existing Kubernetes cluster or create a local one to get started</p></div><div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"><div class="card p-6 hover:border-cyan-500/50 transition-all cursor-pointer"style="border:2px solid var(--border-color)"><div class="flex items-center gap-3 mb-4"><div class="w-12 h-12 rounded-lg flex items-center justify-center"style="background:rgba(6, 182, 212, 0.1)"><svg class="w-6 h-6"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:var(--accent-primary)><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg></div><h3 class="text-lg font-semibold"style=color:var(--text-primary)>Connect via kubeconfig</h3></div><p class="text-sm mb-4"style=color:var(--text-secondary)>Connect to an existing Kubernetes cluster using your kubeconfig file</p><ul class="text-xs space-y-2 mb-4"style=color:var(--text-muted)><li class="flex items-start gap-2"><span class=mt-1></span><span>Ensure kubeconfig is at <code class="px-1 py-0.5 rounded"style=background:var(--bg-tertiary)>~/.kube/config</code></span></li><li class="flex items-start gap-2"><span class=mt-1></span><span>Verify with: <code class="px-1 py-0.5 rounded"style=background:var(--bg-tertiary)>kubectl cluster-info</code></span></li><li class="flex items-start gap-2"><span class=mt-1></span><span>Click "Retry Connection" below</span></li></ul><button class="w-full px-4 py-2 rounded-lg text-sm font-medium transition-all hover:opacity-90 flex items-center justify-center gap-2"style=background:var(--accent-primary);color:#000><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>Retry Connection</button></div><div class="card p-6 hover:border-cyan-500/50 transition-all cursor-pointer"style="border:2px solid var(--border-color)"><div class="flex items-center gap-3 mb-4"><div class="w-12 h-12 rounded-lg flex items-center justify-center"style="background:rgba(34, 197, 94, 0.1)"><svg class="w-6 h-6"fill=none stroke=currentColor viewBox="0 0 24 24"style=color:#22c55e><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg></div><h3 class="text-lg font-semibold"style=color:var(--text-primary)>Create Local Cluster</h3></div><p class="text-sm mb-4"style=color:var(--text-secondary)>Set up a local Kubernetes cluster using k3d, kind, or minikube</p><ul class="text-xs space-y-2 mb-4"style=color:var(--text-muted)><li class="flex items-start gap-2"><span class=mt-1></span><span>Requires Docker Desktop installed and running</span></li><li class="flex items-start gap-2"><span class=mt-1></span><span>Choose from k3d, kind, or minikube</span></li><li class="flex items-start gap-2"><span class=mt-1></span><span>Automatically connects after creation</span></li></ul><button class="w-full px-4 py-2 rounded-lg text-sm font-medium transition-all hover:opacity-90 flex items-center justify-center gap-2"style=background:#22c55e;color:#000><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>Go to Marketplace</button></div></div><div class="flex items-center justify-center gap-3"><button class="px-5 py-2.5 rounded-lg font-medium transition-all hover:opacity-90 flex items-center gap-2"style=background:var(--error-color);color:white><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>Retry Connection</button><a href=https://kubegraf.io/docs target=_blank class="px-5 py-2.5 rounded-lg font-medium transition-all hover:opacity-90 flex items-center gap-2"style="background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg>Documentation'),K9=w('<div class="flex items-center gap-2 px-3 py-2 rounded-lg text-xs"style=background:var(--bg-secondary);color:var(--text-muted)><span></span><span>'),Y9=w('<div class="flex flex-col h-screen overflow-hidden"style=background:var(--bg-primary)><div class="flex flex-1 overflow-hidden"><div><main class="flex-1 overflow-auto p-6 relative"></main><footer class="px-6 py-2 border-t flex items-center justify-end text-xs"style=background:var(--bg-secondary);border-color:var(--border-color);color:var(--text-muted)><div class="flex items-center gap-4"><span class="flex items-center gap-1"><span></span></span><a href=https://github.com/kubegraf/kubegraf target=_blank class=hover:underline style=color:var(--accent-primary)>GitHub</a></div></footer></div><div class="fixed bottom-4 right-4 z-50 flex flex-col gap-2"></div><div class="fixed bottom-4 z-50"style=left:80px>'),G9=w('<div class=p-6 style=background:red;color:white;font-size:20px;z-index:9999;position:relative>Error: Component not found for view "<!>"'),J9=w("<div class=p-6 style=background:red;color:white;font-size:20px>Error rendering <!>: "),X9=w('<div class="animate-slide-in px-4 py-3 rounded-lg shadow-lg border max-w-sm"><div class="flex items-start gap-2"><span></span><span class=text-sm>');const Z9=()=>_(go,{}),Q9=()=>_(go,{}),eM=()=>_(go,{}),tM=()=>_(ho,{title:"Releases",description:"Manage application releases and track deployment history across your cluster.",icon:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12",comingSoon:!0,features:["Release history tracking","Release comparison","Rollback to previous releases","Release notes and changelog","Release approval workflow"]}),rM=()=>_(ho,{title:"Rollouts (Canary / Blue-Green)",description:"Advanced deployment strategies including canary and blue-green rollouts for zero-downtime deployments.",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z",comingSoon:!0,features:["Canary deployments","Blue-Green deployments","Traffic splitting","Automatic rollback on errors","Progressive delivery","Integration with Argo Rollouts"]}),Ec={dashboard:hf,topology:bf,monitoredevents:G4,incidents:F3,anomalies:T3,security:t$,cost:l4,drift:p4,pods:mp,deployments:Ep,statefulsets:Fp,daemonsets:Gp,jobs:gm,cronjobs:im,pdb:$m,hpa:Lm,services:P0,ingresses:W0,networkpolicies:B6,configmaps:rb,secrets:bb,certificates:Ab,storage:Wk,serviceaccounts:v6,rbac:o6,customresources:M6,nodes:jb,usermanagement:K6,resourcemap:y_,connectors:lw,plugins:H$,terminal:G6,settings:Y7,ai:u7,autofix:h8,sreagent:Nw,aiagents:bw,trainingjobs:BS,inferenceservices:hC,mlworkflows:e3,mlflow:oS,feast:kC,gpudashboard:YC,events:M4,logs:u3,apps:Z9,customapps:Q9,clustermanager:Lk,kiali:Xw,deployapp:eM,releases:tM,rollouts:rM,uidemo:R7},sM=()=>{const[e,{refetch:t}]=it(Fe.getStatus),[r,l]=W(!1);zt(()=>{j9.initialize(),Bs.connect(),xg(),Fe.autoCheckUpdate().then(d=>{Yc(d)}).catch(d=>{console.debug("Auto-update check failed:",d)});const m=Bs.subscribe(d=>{d.type==="connection"&&l(d.data.connected)});return()=>{m(),Bs.disconnect()}});const a=()=>e()?.connected!==!1;return(()=>{var m=Y9(),d=m.firstChild,i=d.firstChild,n=i.firstChild,g=n.nextSibling,v=g.firstChild,p=v.firstChild,y=p.firstChild;p.nextSibling;var x=i.nextSibling,M=x.nextSibling;return s(m,_(Fv,{}),d),s(d,_(gg,{}),i),s(i,_(Ov,{}),n),s(i,_(K,{get when(){return!a()},get children(){var b=U9(),o=b.firstChild,c=o.nextSibling,u=c.firstChild;u.nextSibling;var h=c.nextSibling;return h.$$click=()=>location.reload(),b}}),n),s(i,_(K,{get when(){return kh()},get children(){var b=V9(),o=b.firstChild,c=o.nextSibling;return s(c,Mh),b}}),n),s(n,_(K,{get when(){return Re(()=>!a())()&&us()!=="settings"},get children(){var b=q9(),o=b.firstChild,c=o.firstChild,u=c.firstChild;u.firstChild;var h=u.nextSibling;h.nextSibling;var f=c.nextSibling,$=f.firstChild,C=$.firstChild,k=C.firstChild;k.firstChild,k.nextSibling;var S=C.nextSibling,L=S.nextSibling,P=L.firstChild,I=P.firstChild,D=I.nextSibling,T=D.firstChild;T.nextSibling;var B=P.nextSibling,N=B.firstChild,O=N.nextSibling,H=O.firstChild;H.nextSibling;var A=L.nextSibling,z=$.nextSibling,F=z.firstChild,j=F.firstChild;j.firstChild,j.nextSibling;var q=F.nextSibling,U=q.nextSibling,Y=U.nextSibling,V=f.nextSibling,X=V.firstChild;return X.nextSibling,$.$$click=()=>{alert(`To connect to an existing cluster:

1. Ensure your kubeconfig is set up (~/.kube/config)
2. Verify access: kubectl cluster-info
3. Click "Retry Connection" or refresh the page

KubeGraf will automatically detect and connect to your cluster.`)},A.$$click=R=>{R.stopPropagation(),t()},z.$$click=()=>{Ut("apps"),sessionStorage.setItem("kubegraf-auto-filter","Local Cluster")},Y.$$click=R=>{R.stopPropagation(),sessionStorage.setItem("kubegraf-auto-filter","Local Cluster"),sessionStorage.setItem("kubegraf-default-tab","marketplace"),Ut("apps")},s(o,_(K,{get when(){return e()?.error},get children(){var R=W9(),G=R.firstChild,te=G.nextSibling,ae=te.nextSibling,Q=ae.firstChild,Z=Q.nextSibling,ne=Z.nextSibling;return ne.nextSibling,s(te,()=>e()?.error),R}}),V),X.$$click=()=>location.reload(),b}}),null),s(n,_(K,{get when(){return a()||us()==="settings"||us()==="logs"},get children(){return(()=>{const b=us(),o=Ec[b];if(!o)return console.error("[App] Component not found for view:",b,"Available views:",Object.keys(Ec)),(()=>{var c=G9(),u=c.firstChild,h=u.nextSibling;return h.nextSibling,s(c,b,h),c})();try{return _(Vu,{component:o})}catch(c){return console.error("[App] Error rendering component:",c),(()=>{var u=J9(),h=u.firstChild,f=h.nextSibling;return f.nextSibling,s(u,b,f),s(u,()=>String(c),null),u})()}})()}}),null),s(p,()=>e()?.connected?"Connected":"Disconnected",null),s(d,_(K,{get when(){return Uc()},get children(){return _(nu,{})}}),x),s(d,_(F9,{}),x),s(x,_(Xe,{get each(){return Yu()},children:b=>(()=>{var o=X9(),c=o.firstChild,u=c.firstChild,h=u.nextSibling;return s(u,(()=>{var f=Re(()=>b.type==="error");return()=>f()?"":Re(()=>b.type==="warning")()?"":b.type==="success"?"":""})()),s(h,()=>b.message),J(f=>{var $=b.type==="error"?"rgba(239, 68, 68, 0.1)":b.type==="warning"?"rgba(245, 158, 11, 0.1)":b.type==="success"?"rgba(34, 197, 94, 0.1)":"rgba(6, 182, 212, 0.1)",C=b.type==="error"?"rgba(239, 68, 68, 0.3)":b.type==="warning"?"rgba(245, 158, 11, 0.3)":b.type==="success"?"rgba(34, 197, 94, 0.3)":"rgba(6, 182, 212, 0.3)",k=b.type==="error"?"var(--error-color)":b.type==="warning"?"var(--warning-color)":b.type==="success"?"var(--success-color)":"var(--accent-primary)";return $!==f.e&&E(o,"background",f.e=$),C!==f.t&&E(o,"border-color",f.t=C),k!==f.a&&E(o,"color",f.a=k),f},{e:void 0,t:void 0,a:void 0}),o})()})),s(M,_(K,{get when(){return cr()},get children(){var b=K9(),o=b.firstChild,c=o.nextSibling;return s(c,()=>r()?"Live":"Offline"),J(()=>tt(o,`w-2 h-2 rounded-full ${r()?"bg-green-500":"bg-red-500"}`)),b}})),s(d,_(u5,{}),null),s(d,_(p7,{get isOpen(){return Cl()},onClose:()=>Wc(!1)}),null),J(b=>{var o=`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${cr()?"ml-16":"ml-52"}`,c=`w-2 h-2 rounded-full ${e()?.connected?"bg-green-500":"bg-red-500"}`;return o!==b.e&&tt(i,b.e=o),c!==b.t&&tt(y,b.t=c),b},{e:void 0,t:void 0}),m})()};ut(["click"]);const Tc=document.getElementById("root");Tc&&Iu(()=>_(sM,{}),Tc);
