{"version":3,"file":"DescribeModal-6Ip9Wbf-.js","sources":["../../src/components/DescribeModal.tsx"],"sourcesContent":["import { Component, createResource, Show } from 'solid-js';\nimport Modal from './Modal';\n\ninterface DescribeModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  resourceType: 'pod' | 'deployment' | 'service' | 'node' | 'statefulset' | 'daemonset' | 'configmap' | 'secret' | 'ingress' | 'cronjob' | 'job';\n  name: string;\n  namespace?: string;\n}\n\nconst DescribeModal: Component<DescribeModalProps> = (props) => {\n  const [describe] = createResource(\n    () => ({ type: props.resourceType, name: props.name, ns: props.namespace, open: props.isOpen }),\n    async (params) => {\n      if (!params.open || !params.name) return '';\n      const nsParam = params.ns ? `&namespace=${params.ns}` : '';\n      const res = await fetch(`/api/${params.type}/describe?name=${params.name}${nsParam}`);\n      if (!res.ok) throw new Error('Failed to fetch describe output');\n      const data = await res.json();\n      return data.describe || '';\n    }\n  );\n\n  const copyToClipboard = async () => {\n    await navigator.clipboard.writeText(describe() || '');\n  };\n\n  // Simple syntax highlighting for describe output\n  const highlightDescribe = (text: string) => {\n    return text\n      .split('\\n')\n      .map((line) => {\n        // Section headers (e.g., \"Name:\", \"Namespace:\")\n        const headerMatch = line.match(/^([A-Za-z][A-Za-z\\s]+):\\s*(.*)$/);\n        if (headerMatch && line.indexOf(':') < 30) {\n          const [, key, value] = headerMatch;\n          return `<span class=\"text-cyan-400\">${escapeHtml(key)}:</span> <span class=\"text-amber-300\">${escapeHtml(value)}</span>`;\n        }\n        // Indented key-value pairs\n        const kvMatch = line.match(/^(\\s+)([A-Za-z][A-Za-z\\s-]+):\\s*(.*)$/);\n        if (kvMatch) {\n          const [, indent, key, value] = kvMatch;\n          return `${indent}<span class=\"text-blue-400\">${escapeHtml(key)}:</span> ${escapeHtml(value)}`;\n        }\n        return escapeHtml(line);\n      })\n      .join('\\n');\n  };\n\n  const escapeHtml = (str: string) => {\n    return str\n      .replace(/&/g, '&amp;')\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;')\n      .replace(/\"/g, '&quot;');\n  };\n\n  return (\n    <Modal isOpen={props.isOpen} onClose={props.onClose} title={`Describe: ${props.name}`} size=\"xl\">\n      <div class=\"flex flex-col h-[60vh]\">\n        {/* Toolbar */}\n        <div class=\"flex items-center justify-end gap-2 mb-2\">\n          <button\n            onClick={copyToClipboard}\n            class=\"flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm transition-colors\"\n            style={{ background: 'var(--bg-tertiary)', color: 'var(--text-secondary)' }}\n          >\n            <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\" />\n            </svg>\n            Copy\n          </button>\n        </div>\n\n        {/* Content */}\n        <div\n          class=\"flex-1 font-mono text-sm p-4 rounded-lg overflow-auto\"\n          style={{\n            background: '#0d1117',\n            color: '#c9d1d9',\n            border: '1px solid var(--border-color)',\n          }}\n        >\n          <Show\n            when={!describe.loading}\n            fallback={\n              <div class=\"flex items-center justify-center h-full\">\n                <div class=\"spinner\" />\n              </div>\n            }\n          >\n            <Show when={describe.error}>\n              <div class=\"text-red-400\">Error: {describe.error?.message}</div>\n            </Show>\n            <pre class=\"whitespace-pre-wrap\" innerHTML={highlightDescribe(describe() || '')} />\n          </Show>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n\nexport default DescribeModal;\n"],"names":["DescribeModal","props","describe","createResource","type","resourceType","name","ns","namespace","open","isOpen","params","nsParam","res","fetch","ok","Error","data","json","copyToClipboard","navigator","clipboard","writeText","highlightDescribe","text","split","map","line","headerMatch","match","indexOf","key","value","escapeHtml","kvMatch","indent","join","str","replace","_$createComponent","Modal","onClose","title","size","children","_el$","_tmpl$3","_el$2","firstChild","_el$3","_el$4","nextSibling","$$click","_$insert","Show","when","loading","fallback","_tmpl$4","error","_el$5","_tmpl$","message","_el$7","_tmpl$2","_$effect","innerHTML","_$delegateEvents"],"mappings":"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"}